(function(window){var freeExports=typeof exports=="object"&&exports,freeRequire=typeof require=="function"&&require,freeGlobal=isHostType(this,"global")&&(freeExports?window=global:global),counter=0,uid="uid"+ +new Date,divisors={1:4096,2:512,3:64,4:8,5:0},distribution={1:12.706,2:4.303,3:3.182,4:2.776,5:2.571,6:2.447,7:2.365,8:2.306,9:2.262,10:2.228,11:2.201,12:2.179,13:2.16,14:2.145,15:2.131,16:2.12,17:2.11,18:2.101,19:2.093,20:2.086,21:2.08,22:2.074,23:2.069,24:2.064,25:2.06,26:2.056,27:2.052,28:2.048,29:2.045,30:2.042,infinity:1.96},has={air:isClassOf(window.runtime,"ScriptBridgingProxyObject"),java:isClassOf(window.java,"JavaPackage"),timeout:isHostType(window,"setTimeout")&&isHostType(window,"clearTimeout")},slice=[].slice,shift=aloClean([].shift),abs=Math.abs,max=Math.max,min=Math.min,pow=Math.pow,sqrt=Math.sqrt;function Benchmark(name,fn,options){var me=this;if(isClassOf(name,"Object")){options=name}else if(isClassOf(name,"Function")){options=fn;fn=name}else{me.name=name}if(name!=call){counter++;setOptions(me,options);me.fn||(me.fn=fn);me.id||(me.id=counter);me.stats=extend({},me.stats);me.times=extend({},me.times)}}function Suite(name,options){var me=this;if(isClassOf(name,"Object")){options=name}else{me.name=name}setOptions(me,options)}function aloClean(fn){return function(){var me=this,result=fn.apply(me,arguments);if(!me.length){delete me[0]}return result}}function call(me,fn,async){if(async&&has.timeout){me._timerId=setTimeout(function(){delete me._timerId;fn()},me.delay*1e3)}else{fn()}}function clock(){var applet,args,fallback,options=Benchmark.options,timers=[],timerNS=Date,msRes=getRes("ms"),timer={ns:timerNS,res:max(.0015,msRes),unit:"ms"},code='var r$,s$,m$=this,i$=m$.count,f$=m$.fn;#{setup}#{start};while(i$--){|}#{end};#{teardown}return{time:r$,uid:"$"}|m$.teardown&&m$.teardown();|f$()|m$.setup&&m$.setup();|n$';clock=function(me){var result,fn=me.fn,compiled=fn.compiled,count=me.count;me.minTime||(me.minTime=me.options.minTime=options.minTime);if(applet){try{timerNS.nanoTime()}catch(e){timerNS=new applet.Packages.nano}}if(compiled==null||compiled){try{if(!compiled){compiled=createFunction(args,interpolate(code[0],{setup:getSource(me.setup)})+getSource(fn)+interpolate(code[1],{teardown:getSource(me.teardown)}));me.count=1;compiled=fn.compiled=compiled.call(me,timerNS).uid==uid&&compiled;me.count=count}if(compiled){result=compiled.call(me,timerNS).time}}catch(e){me.count=count;compiled=fn.compiled=false}}if(!compiled){result=fallback.call(me,timerNS).time}return result};function getRes(unit){var measured,start,count=30,divisor=1e3,sample=[];while(count--){if(unit=="us"){divisor=1e6;if(timerNS.stop){timerNS.start();while(!(measured=timerNS.microseconds())){}}else{start=timerNS();while(!(measured=timerNS()-start)){}}}else if(unit=="ns"){divisor=1e9;start=timerNS.nanoTime();while(!(measured=timerNS.nanoTime()-start)){}}else{start=new timerNS;while(!(measured=new timerNS-start)){}}if(measured>0){sample.push(measured)}else{sample.push(Infinity);break}}return getMean(sample)/divisor}each(window.document&&document.applets||[],function(element){if(timerNS=applet="nanoTime"in element&&element){return false}});try{timerNS=java.lang.System}catch(e){}try{if(typeof timerNS.nanoTime()=="number"){timers.push({ns:timerNS,res:getRes("ns"),unit:"ns"})}}catch(e){}try{if(timerNS=new(window.chrome||window.chromium).Interval){timers.push({ns:timerNS,res:getRes("us"),unit:"us"})}}catch(e){}if(timerNS=(req("microtime")||{now:0}).now){timers.push({ns:timerNS,res:getRes("us"),unit:"us"})}timerNS=(timer=reduce(timers,function(timer,other){return other.res<timer.res?other:timer},timer)).ns;if(timer.unit=="ms"){timer.res=msRes}if(timer.unit!="ns"&&applet){applet.parentNode.removeChild(applet);applet=null}if(timer.res==Infinity){throw new Error("Benchmark.js was unable to find a working timer.")}if(timer.unit=="ns"){code=interpolate(code,{start:"s$=n$.nanoTime()",end:"r$=(n$.nanoTime()-s$)/1e9"})}else if(timer.unit=="us"){code=interpolate(code,timerNS.stop?{start:"s$=n$.start()",end:"r$=n$.microseconds()/1e6"}:{start:"s$=n$()",end:"r$=(n$()-s$)/1e6"})}else{code=interpolate(code,{start:"s$=new n$",end:"r$=(new n$-s$)/1e3"})}code=code.replace(/\$/g,uid).split("|");args=code.pop();fallback=createFunction(args,interpolate(code[0],{setup:code.pop()})+code.pop()+interpolate(code[1],{teardown:code.pop()}));options.minTime||(options.minTime=max(timer.res/2/.01,.05));return clock.apply(null,arguments)}function createFunction(){createFunction=function(args,body){var sibling=document.getElementsByTagName("script")[0],parent=sibling.parentNode,script=document.createElement("script");script.appendChild(document.createTextNode("Benchmark."+uid+"=function("+args+"){"+body+"}"));parent.removeChild(parent.insertBefore(script,sibling));return[Benchmark[uid],delete Benchmark[uid]][0]};try{createFunction=createFunction("",'return"'+uid+'"')()==uid&&createFunction}catch(e){createFunction=false}createFunction||(createFunction=Function);return createFunction.apply(null,arguments)}function extend(destination,source){source||(source={});for(var key in source){destination[key]=source[key]}return destination}function getCriticalValue(df){return distribution[Math.round(df)||1]||distribution.infinity}function getMean(sample){return reduce(sample,function(sum,x){return sum+x},0)/sample.length||0}function getSource(fn){return((/^[^{]+{([\s\S]*)}\s*$/.exec(fn)||0)[1]||"").replace(/^\s+|\s+$/g,"").replace(/([^\n])$/,"$1\n")}function hasKey(object,key){var result,o={},hasOwnProperty=o.hasOwnProperty,parent=(object.constructor||Object).prototype;object=Object(object);if(isClassOf(hasOwnProperty,"Function")){result=hasOwnProperty.call(object,key)}else if(o.__proto__==Object.prototype){object.__proto__=[object.__proto__,object.__proto__=null,result=key in object][0]}else{result=key in object&&!(key in parent&&object[key]===parent[key])}return result}function interpolate(string,object){string=string==null?"":string;each(object||{},function(value,key){string=string.replace(RegExp("#\\{"+key+"\\}","g"),value)});return string}function isClassOf(object,name){return object!=null&&{}.toString.call(object).slice(8,-1)==name}function isHostType(object,property){var type=object!=null?typeof object[property]:"number";return!/^(?:boolean|number|string|undefined)$/.test(type)&&(type=="object"?!!object[property]:true)}function methodize(fn){return function(){return fn.apply(this,[this].concat(slice.call(arguments)))}}function noop(){}function req(id){var result=null;try{freeExports&&freeRequire&&(result=freeRequire(id))}catch(e){}return result}function setOptions(me,options){options=extend(extend({},me.constructor.options),options);me.options=each(options,function(value,key){if(/^on[A-Z]/.test(key)){each(key.split(" "),function(key){me.on(key.slice(2).toLowerCase(),value)})}else{me[key]=value}})}function each(object,callback){var i=-1,result=object,object=Object(object),length=object.length;if("length"in object&&length>-1&&length<4294967296){while(++i<length){if((i in object||"item"in object)&&callback(object[i],i,object)===false){break}}}else{for(i in object){if(hasKey(object,i)&&callback(object[i],i,object)===false){break}}}return result}function filter(array,callback){var result;if(callback=="successful"){callback=function(bench){return bench.cycles}}else if(/^(?:fast|slow)est$/.test(callback)){result=filter(array,"successful").sort(function(a,b){a=a.stats;b=b.stats;return(a.mean+a.moe>b.mean+b.moe?1:-1)*(callback=="fastest"?1:-1)});result=filter(result,function(bench){return!result[0].compare(bench)})}return result||reduce(array,function(result,value,index){return callback(value,index,array)?result.push(value)&&result:result},[])}function formatNumber(number){number=String(number).split(".");return number[0].replace(/(?=(?:\d{3})+$)(?!\b)/g,",")+(number[1]?"."+number[1]:"")}function indexOf(array,value){var result=-1;each(array,function(v,i){if(v===value){result=i;return false}});return result}function invoke(benches,name){var args,async,bench,queued,i=0,options={onStart:noop,onCycle:noop,onComplete:noop},result=slice.call(benches);function execute(){var listeners;if(async){bench.on("complete",next);listeners=bench.events["complete"];listeners.splice(0,0,listeners.pop())}result[i]=bench[name].apply(bench,args);return async||next()}function next(){var last=bench;bench=false;if(async){last.removeListener("complete",next);last.emit("complete")}if(options.onCycle.call(benches,last)!==false){if(queued){shift.call(benches);bench=benches[0]}else{bench=benches[++i]}}if(bench){if(async){call(bench,execute,async)}else{return true}}else{options.onComplete.call(benches,last)}return false}if(isClassOf(name,"String")){args=slice.call(arguments,2)}else{options=extend(options,name);name=options.name;args=isClassOf(args="args"in options?options.args:[],"Array")?args:[args];queued=options.queued}if(name=="run"){async=(args[0]==null?Benchmark.options.async:args[0])&&has.timeout}if(bench=benches[0]){options.onStart.call(benches,bench);if(async){call(bench,execute,async)}else{result.length=0;while(execute()){}}}return result}function join(object,separator1,separator2){var pairs=[];if(isClassOf(object,"Array")){pairs=object}else{separator2||(separator2=": ");each(object,function(value,key){pairs.push(key+separator2+value)})}return pairs.join(separator1||",")}function map(array,callback){return reduce(array,function(result,value,index){result.push(callback(value,index,array));return result},[])}function pluck(array,property){return map(array,function(object){return object[property]})}function reduce(array,callback,accumulator){each(array,function(value,index){accumulator=callback(accumulator,value,index,array)});return accumulator}function abortSuite(){var me=this;me.aborted=true;me.running=false;invoke(me,"abort");me.emit("abort");return me}function add(name,fn,options){var me=this,bench=new Benchmark(call);Benchmark.call(bench,name,fn,options);me.push(bench);me.emit("add",bench);return me}function cloneSuite(options){var me=this,result=new me.constructor(extend(extend({},me.options),options));each(me,function(value,key){if(!hasKey(result,key)){result[key]=/^\d+$/.test(key)?value.clone():value}});return result.reset()}function filterSuite(callback){var me=this,result=new me.constructor;result.push.apply(result,filter(me,callback));return result}function resetSuite(){var me=this;me.aborted=me.running=false;invoke(me,"reset");me.emit("reset");return me}function runSuite(async,queued){var me=this;me.reset();me.running=true;invoke(me,{name:"run",args:async,queued:queued,onStart:function(bench){me.emit("start",bench)},onCycle:function(bench){if(bench.error){me.emit("error",bench)}return!me.aborted&&me.emit("cycle",bench)},onComplete:function(bench){me.running=false;me.emit("complete",bench)}});return me}function addListener(type,listener){var me=this,events=me.events||(me.events={});each(type.split(" "),function(type){(events[type]||(events[type]=[])).push(listener)});return me}function emit(type){var me=this,event=typeof type=="string"?{type:type}:type,args=(arguments[0]=event,slice.call(arguments)),events=me.events,listeners=events&&events[event.type]||[],successful=true;each(listeners.slice(),function(listener){if(!(successful=listener.apply(me,args)!==false)){return successful}});return successful}function removeListener(type,listener){var me=this,events=me.events;each(type.split(" "),function(type){var listeners=events&&events[type]||[],index=indexOf(listeners,listener);if(index>-1){listeners.splice(index,1)}});return me}function removeAllListeners(type){var me=this,events=me.events;each(type.split(" "),function(type){(events&&events[type]||[]).length=0});return me}function abort(){var me=this;if(me.running){if(me._timerId&&has.timeout){clearTimeout(me._timerId);delete me._timerId}me.running=NaN;me.reset();me.aborted=true;me.emit("abort")}return me}function clone(options){var me=this,result=new me.constructor(me.fn,extend(extend({},me.options),options));each(me,function(value,key){if(!hasKey(result,key)){result[key]=value}});return result.reset()}function compare(other){var a=this.stats,b=other.stats,df=a.size+b.size-2,pooled=((a.size-1)*a.variance+(b.size-1)*b.variance)/df,tstat=(a.mean-b.mean)/sqrt(pooled*(1/a.size+1/b.size)),near=abs(1-a.mean/b.mean)<.055&&a.rme<3&&b.rme<3;return!near&&abs(tstat)>getCriticalValue(df)?tstat>0?-1:1:0}function reset(){var changed,pair,me=this,source=extend(extend({},me.constructor.prototype),me.options),pairs=[[source,me]];function check(value,key){var other=pair[1][key];if(value&&isClassOf(value,"Object")){pairs.push([value,other])}else if(!isClassOf(value,"Function")&&value!=other){pair[1][key]=value;changed=true}}if(me.running){me.abort();me.aborted=source.aborted}else{while(pairs.length){each((pair=pairs.pop(),pair[0]),check)}if(changed){me.emit("reset")}}return me}function toString(){var me=this,error=me.error,hz=me.hz,id=me.id,stats=me.stats,size=stats.size,pm=has.java?"+/-":"±",result=me.name||(typeof id=="number"?"<Test #"+id+">":id);if(error){result+=": "+join(error)}else{result+=" x "+formatNumber(hz.toFixed(hz<100?2:0))+" ops/sec "+pm+stats.rme.toFixed(2)+"% ("+size+" run"+(size==1?"":"s")+" sampled)"}return result}function compute(me,async){var queue=[],sample=[],initCount=me.initCount;function enqueue(count){while(count--){queue.push(me.clone({_host:me,events:{start:[update],cycle:[update]}}))}}function update(){var clone=this;if(me.running){if(clone.cycles){me.hz=clone.hz;me.times.period=clone.times.period;me.initCount=clone.initCount;me.emit("cycle")}else if(clone.error){me.abort();me.error=clone.error;me.emit("error")}else{clone.count=me.initCount}}else if(me.aborted){clone.abort()}}function evaluate(clone){var mean,moe,rme,sd,sem,variance,now=+new Date,times=me.times,aborted=me.aborted,elapsed=(now-times.start)/1e3,maxedOut=elapsed>me.maxTime,size=sample.push(clone.times.period),varOf=function(sum,x){return sum+pow(x-mean,2)};if(aborted||clone.hz==Infinity){maxedOut=!(size=sample.length=queue.length=0)}if(queue.length<2){mean=getMean(sample);variance=reduce(sample,varOf,0)/(size-1);sd=sqrt(variance);sem=sd/sqrt(size);moe=sem*getCriticalValue(size-1);rme=moe/mean*100||0;if(!maxedOut){enqueue(1)}else{if(!aborted){me.running=false;times.stop=now;times.elapsed=elapsed;extend(me.stats,{moe:moe,rme:rme,sem:sem,deviation:sd,mean:mean,size:size,variance:variance});if(me.hz!=Infinity){times.period=mean;times.cycle=mean*me.count;me.hz=1/mean}}me.initCount=initCount;me.emit("complete")}}return!aborted}enqueue(me.minSamples);invoke(queue,{name:"run",args:async,queued:true,onCycle:evaluate})}function run(async){var me=this;function cycle(){var clocked,divisor,minTime,period,count=me.count,host=me._host,times=me.times;if(me.running){me.cycles++;host.cycles++;host.count=count;try{clocked=clock(host);minTime=me.minTime=host.minTime}catch(e){me.abort();me.error=e;me.emit("error")}}if(me.running){times.cycle=clocked;period=times.period=clocked/count;me.hz=1/period;me.running=clocked<minTime;me.initCount=count;if(me.running){if(!clocked&&(divisor=divisors[me.cycles])!=null){count=Math.floor(4e6/divisor)}if(count<=me.count){count+=Math.ceil((minTime-clocked)/period)}me.running=count!=Infinity}}if(me.emit("cycle")===false){me.abort()}if(me.running){me.count=count;call(me,cycle,async)}else{if(window["Benchmark"]==Benchmark){window["Benchmark"]=1;window["Benchmark"]=Benchmark}me.emit("complete")}}me.running=false;me.reset();me.running=true;me.count=me.initCount;me.times.start=+new Date;me.emit("start");async=(async==null?me.async:async)&&has.timeout;if(me._host){cycle()}else{compute(me,async)}return me}extend(Benchmark,{version:"0.2.2",options:{async:false,delay:.005,initCount:5,maxTime:5,minSamples:5,minTime:0},platform:req("platform")||window.platform||{description:window.navigator&&navigator.userAgent||"unknown platform",layout:null,product:null,name:null,os:null,version:null,toString:function(){return this.description}},each:each,filter:filter,formatNumber:formatNumber,indexOf:indexOf,invoke:invoke,join:join,map:map,pluck:pluck,reduce:reduce});Benchmark.prototype.toString=toString;extend(Benchmark.prototype,{count:0,cycles:0,error:null,hz:0,aborted:false,running:false,on:addListener,setup:noop,teardown:noop,stats:{moe:0,rme:0,sem:0,deviation:0,mean:0,size:0,variance:0},times:{cycle:0,elapsed:0,period:0,start:0,stop:0},abort:abort,addListener:addListener,clone:clone,compare:compare,emit:emit,removeAllListeners:removeAllListeners,removeListener:removeListener,reset:reset,run:run});Suite.options={};extend(Suite.prototype,{length:0,aborted:false,running:false,each:methodize(each),indexOf:methodize(indexOf),invoke:methodize(invoke),map:methodize(map),pluck:methodize(pluck),reduce:methodize(reduce),abort:abortSuite,add:add,addListener:addListener,clone:cloneSuite,emit:emit,filter:filterSuite,on:addListener,removeAllListeners:removeAllListeners,removeListener:removeListener,reset:resetSuite,run:runSuite,concat:[].concat,join:[].join,pop:aloClean([].pop),push:[].push,reverse:[].reverse,shift:shift,slice:slice,sort:[].sort,splice:aloClean([].splice),unshift:[].unshift});Benchmark.Suite=Suite;if(freeExports){if(typeof module=="object"&&module&&module.exports==freeExports){module.exports=Benchmark}else{freeExports.Benchmark=Benchmark}}else if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(["platform"],function(platform){Benchmark.platform=platform;return Benchmark})}else{window["Benchmark"]=Benchmark}if(has.air){clock({fn:noop,count:1,options:{}})}})(this);