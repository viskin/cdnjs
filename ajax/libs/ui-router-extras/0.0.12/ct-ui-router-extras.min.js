!function(t,e){"use strict";function r(t,e){var r=[];for(var n in t.path){if(t.path[n]!==e.path[n])break;r.push(t.path[n])}return r}function n(e){if(Object.keys)return Object.keys(e);var r=[];return t.forEach(e,function(t,e){r.push(e)}),r}function a(t,e){var r=[];for(var n in t)e&&-1!==e.indexOf(n)||r.push(n);return r}function o(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var r=t.length>>>0,n=Number(arguments[2])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=r);r>n;n++)if(n in t&&t[n]===e)return n;return-1}function i(t,e,a,i){var u,s=r(a,i),c={},f=[];for(var l in s)if(s[l].params&&(u=x(s[l].params)?s[l].params:n(s[l].params),u.length))for(var v in u)o(f,u[v])>=0||(f.push(u[v]),c[u[v]]=t[u[v]]);return $({},c,e)}function u(t,e){return $(new($(function(){},{prototype:t})),e)}function s(t){h.push(t)}function c(){P=e}function f(){var e={},r={},n=!1;this.registerStickyState=function(t){r[t.name]=t},this.enableDebug=this.debugMode=function(e){return t.isDefined(e)&&(n=e),n},this.$get=["$rootScope","$state","$stateParams","$injector","$log",function(r,o,u,s,c){function f(){var r={};return t.forEach(e,function(t){for(var e=l(t),n=0;n<e.length;n++){var a=e[n].parent;r[a.name]=r[a.name]||[],r[a.name].push(t)}r[""]&&(r.__inactives=r[""])}),r}function l(t){var e=[];if(!t)return e;do t.sticky&&e.push(t),t=t.parent;while(t);return e.reverse(),e}function v(t,e,r){if(t[r]===e[r])return{from:!1,to:!1};var n=r<t.length&&t[r].self.sticky,a=r<e.length&&e[r].self.sticky;return{from:n,to:a}}function p(t,r,n,a){if(a)return"updateStateParams";var o=e[t.self.name];if(!o)return"enter";if(t.self===n)return"updateStateParams";var i=m(r,o.locals.globals.$stateParams,t.ownParams);return i?"reactivate":"updateStateParams"}function d(t,r){var n=e[t.name];if(!n)return null;if(!r)return n;var a=m(r,n.locals.globals.$stateParams,t.ownParams);return a?n:null}function m(e,r,n){if(!t.isArray(n)&&t.isObject(n)&&(n=a(n,["$$keys","$$values","$$equals","$$validates","$$new","$$parent"])),!n){n=[];for(var o in e)n.push(o)}for(var i=0;i<n.length;i++){var u=n[i];if(e[u]!=r[u])return!1}return!0}var h={getInactiveStates:function(){var r=[];return t.forEach(e,function(t){r.push(t)}),r},getInactiveStatesByParent:function(){return f()},processTransition:function(e){var r={inactives:[],enter:[],exit:[],keep:0},n=e.fromState.path,a=e.fromParams,s=e.toState.path,c=e.toParams,l=e.reloadStateTree,d=e.options,h=0,g=s[h];for(d.inherit&&(c=i(u,c||{},o.$current,e.toState));g&&g===n[h]&&m(c,a,g.ownParams);)g=s[++h];r.keep=h;var $,x,S,E={},b=v(n,s,h),P=!!d.reload;for($=h;$<s.length;$++){var k=b.to?p(s[$],c,l,P):"enter";P=P||"updateStateParams"==k,r.enter[$]=k,"reactivate"==k&&(S=E[s[$].name]=s[$]),"updateStateParams"==k&&(x=E[s[$].name]=s[$])}S=S?S.self.name+".":"",x=x?x.self.name+".":"";var w=f(),F=[""].concat(y(n.slice(0,h),function(t){return t.self.name}));for(t.forEach(F,function(t){for(var e=w[t],n=0;e&&n<e.length;n++){var a=e[n];E[a.name]||S&&0===a.self.name.indexOf(S)||x&&0===a.self.name.indexOf(x)||r.inactives.push(a)}}),$=h;$<n.length;$++){var R="exit";b.from&&(r.inactives.push(n[$]),R="inactivate"),r.exit[$]=R}return r},stateInactivated:function(t){e[t.self.name]=t,t.self.status="inactive",t.self.onInactivate&&s.invoke(t.self.onInactivate,t.self,t.locals.globals)},stateReactivated:function(t){e[t.self.name]&&delete e[t.self.name],t.self.status="entered",t.self.onReactivate&&s.invoke(t.self.onReactivate,t.self,t.locals.globals)},stateExiting:function(r,a,o){var i={};t.forEach(a,function(t){i[t.self.name]=!0}),t.forEach(e,function(a,o){!i[o]&&a.includes[r.name]&&(n&&c.debug("Exiting "+o+" because it's a substate of "+r.name+" and wasn't found in ",i),a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),t.forEach(a.locals,function(t,e){delete j.locals[e]}),a.locals=null,a.self.status="exited",delete e[o])}),o&&s.invoke(o,r.self,r.locals.globals),r.locals=null,r.self.status="exited",delete e[r.self.name]},stateEntering:function(t,e,r,n){var a=d(t);if(a&&(n||!d(t,e))){var o=t.locals;this.stateExiting(a),t.locals=o}t.self.status="entered",r&&s.invoke(r,t.self,t.locals.globals)},reset:function(t,e){var n=o.get(t),a=d(n,e);return a?(h.stateExiting(a),r.$broadcast("$viewContentLoading"),!0):!1}};return h}]}function l(t){return{resolve:{},locals:{globals:F&&F.locals&&F.locals.globals},views:{},self:{},params:{},ownParams:A.hasParamSet?{$$equals:function(){return!0}}:[],surrogateType:t}}function v(e,r,n){function a(t,e,r){return t[e]?t[e].toUpperCase()+": "+r.self.name:"("+r.self.name+")"}var o=y(n.inactives,function(t){return t.self.name}),i=y(r.toState.path,function(t,e){return a(n.enter,e,t)}),u=y(r.fromState.path,function(t,e){return a(n.exit,e,t)}),s=r.fromState.self.name+": "+t.toJson(r.fromParams)+":  -> "+r.toState.self.name+": "+t.toJson(r.toParams);e.debug("   Current transition: ",s),e.debug("Before transition, inactives are:   : ",y(w.getInactiveStates(),function(t){return t.self.name})),e.debug("After transition,  inactives will be: ",o),e.debug("Transition will exit:  ",u),e.debug("Transition will enter: ",i)}function p(t,e,r){t.debug("Current state: "+e.self.name+", inactive states: ",y(w.getInactiveStates(),function(t){return t.self.name}));for(var n=function(t,e){return"'"+e+"' ("+t.$$state.name+")"},a=function(t,e){return"globals"!=e&&"resolve"!=e},o=function(t){var e=y(b(t.locals,a),n).join(", ");return"("+(t.self.name?t.self.name:"root")+".locals"+(e.length?": "+e:"")+")"},i=o(e),u=e.parent;u&&u!==e;)""===u.self.name&&(i=o(r.$current.path[0])+" / "+i),i=o(u)+" / "+i,e=u,u=e.parent;t.debug("Views: "+i)}var d=t.module("ct.ui.router.extras.core",["ui.router"]),m={},h=[];d.config(["$stateProvider","$injector",function(e){e.decorator("parent",function(e,r){return m[e.self.name]=e,e.self.$$state=function(){return m[e.self.name]},t.forEach(h,function(t){t(e)}),r(e)})}]);var g=t.forEach,$=t.extend,x=t.isArray,y=function(t,e){var r=[];return g(t,function(t,n){r.push(e(t,n))}),r},S=function(t){return y(t,function(t,e){return e})},E=function(t,e){var r=[];return g(t,function(t,n){e(t,n)&&r.push(t)}),r},b=function(t,e){var r={};return g(t,function(t,n){e(t,n)&&(r[n]=t)}),r};d.provider("uirextras_core",function(){var e={internalStates:m,onStateRegistered:s,forEach:g,extend:$,isArray:x,map:y,keys:S,filter:E,filterObj:b,ancestors:r,objectKeys:n,protoKeys:a,arraySearch:o,inheritParams:i,inherit:u};t.extend(this,e),this.$get=function(){return e}});var P;t.module("ct.ui.router.extras.dsr",["ct.ui.router.extras.core"]).config(["$provide",function(t){var e;t.decorator("$state",["$delegate","$q",function(t,r){return e=t.transitionTo,t.transitionTo=function(n,a,o){return o.ignoreDsr&&(P=o.ignoreDsr),e.apply(t,arguments).then(function(t){return c(),t},function(t){return c(),r.reject(t)})},t}])}]),t.module("ct.ui.router.extras.dsr").service("$deepStateRedirect",["$rootScope","$state","$injector",function(r,n,a){function o(t){var e=t.name;return l.hasOwnProperty(e)?l[e]:void u(e)}function i(e){var r=e.deepStateRedirect||e.dsr;if(!r)return{dsr:!1};var n={dsr:!0};return t.isFunction(r)?n.fn=r:t.isObject(r)&&(n=t.extend(n,r)),t.isString(n["default"])&&(n["default"]={state:n["default"]}),n.fn||(n.fn=["$dsr$",function(t){return t.redirect.state!=t.to.state}]),n}function u(t){var r=n.get(t);if(!r)return!1;var a=i(r);a.dsr&&(l[r.name]=v,f[t]===e&&(f[t]={}));var o=r.$$state&&r.$$state().parent;if(o){var s=u(o.self.name);s&&l[r.name]===e&&(l[r.name]=p)}return l[r.name]||!1}function s(r,n){n===!0&&(n=Object.keys(r)),(null===n||n===e)&&(n=[]);var a={};return t.forEach(n.sort(),function(t){a[t]=r[t]}),a}function c(e,r){function n(t){return t?t.toString():t}var a=s(e,r),o={};return t.forEach(a,function(t,e){o[e]=n(t)}),t.toJson(o)}var f={},l={},v="Redirect",p="AncestorRedirect";return r.$on("$stateChangeStart",function(e,r,u){var l=i(r);if(!P&&(o(r)===v||l["default"])){var p=c(u,l.params),d=f[r.name][p]||l["default"];if(d){var m={redirect:{state:d.state,params:d.params},to:{state:r.name,params:u}},h=a.invoke(l.fn,r,{$dsr$:m});if(h){h.state&&(d=h),e.preventDefault();var g=s(u,l.params);n.go(d.state,t.extend(g,d.params))}}}}),r.$on("$stateChangeSuccess",function(e,r,a){var u=o(r);if(u){var s=r.name;t.forEach(f,function(e,r){var o=i(n.get(r)),u=c(a,o.params);(s==r||-1!=s.indexOf(r+"."))&&(f[r][u]={state:s,params:t.copy(a)})})}}),{reset:function(e,r){if(e){var a=n.get(e);if(!a)throw new Error("Unknown state: "+e);if(f[a.name])if(r){var o=c(r,i(a).params);delete f[a.name][o]}else f[a.name]={}}else t.forEach(f,function(t,e){f[e]={}})}}}]),t.module("ct.ui.router.extras.dsr").run(["$deepStateRedirect",function(){}]),t.module("ct.ui.router.extras.sticky",["ct.ui.router.extras.core"]);var k=t.module("ct.ui.router.extras.sticky");f.$inject=["$stateProvider"],k.provider("$stickyState",f);var w,F,R,j,m={},O=[],A={hasParamSet:!1};t.module("ct.ui.router.extras.sticky").run(["$stickyState",function(t){w=t}]),t.module("ct.ui.router.extras.sticky").config(["$provide","$stateProvider","$stickyStateProvider","$urlMatcherFactoryProvider","uirextras_coreProvider",function(r,n,a,o,i){var s=i.internalStates;A.hasParamSet=!!o.ParamSet,j=t.extend(new l("__inactives"),{self:{name:"__inactives"}}),F=R=e,O=[],i.onStateRegistered(function(t){t.self.sticky===!0&&a.registerStickyState(t.self)});var c;r.decorator("$state",["$delegate","$log","$q",function(r,n,i){return F=r.$current,s[""]=F,F.parent=j,j.parent=e,F.locals=u(j.locals,F.locals),delete j.locals.globals,c=r.transitionTo,r.transitionTo=function(e,u,f){function d(e){var r=t.extend(new l("reactivate_phase1"),{locals:e.locals});return r.self=t.extend({},e.self),r}function m(e){var r=t.extend(new l("reactivate_phase2"),e),n=r.self.onEnter;return r.resolve={},r.views={},r.self.onEnter=function(){r.locals=e.locals,w.stateReactivated(e)},J.addRestoreFunction(function(){e.self.onEnter=n}),r}function h(t){var e=new l("inactivate");e.self=t.self;var r=t.self.onExit;return e.self.onExit=function(){w.stateInactivated(t)},J.addRestoreFunction(function(){t.self.onExit=r}),e}function g(t,e){var r=t.self.onEnter;return t.self.onEnter=function(){w.stateEntering(t,e,r)},J.addRestoreFunction(function(){t.self.onEnter=r}),t}function $(t,e){var r=t.self.onEnter;return t.self.onEnter=function(){w.stateEntering(t,e,r,!0)},J.addRestoreFunction(function(){t.self.onEnter=r}),t}function x(t){var e=t.self.onExit;return t.self.onExit=function(){w.stateExiting(t,N,e)},J.addRestoreFunction(function(){t.self.onExit=e}),t}var S=a.debugMode();j.locals||(j.locals=F.locals);var E=O.length;R&&(R(),S&&n.debug("Restored paths from pending transition"));var b,P,k,T,I=r.$current,C=r.params,M=f&&f.relative||r.$current,_=r.get(e,M),D=[],N=[];u=u||{},arguments[1]=u;var q=function(){},J=function(){b&&(z.path=b,b=null),P&&(I.path=P,P=null),t.forEach(J.restoreFunctions,function(t){t()}),J=q,R=null,O.splice(E,1)};if(J.restoreFunctions=[],J.addRestoreFunction=function(t){this.restoreFunctions.push(t)},_){var z=s[_.name];if(z){b=z.path,P=I.path;var K=f&&f.reload||!1,U=K&&(K===!0?b[0].self:r.get(K,M));f&&K&&K!==!0&&delete f.reload;var B={toState:z,toParams:u||{},fromState:I,fromParams:C||{},options:f,reloadStateTree:U};if(O.push(B),R=J,U){B.toParams.$$uirouterextrasreload=Math.random();var H=U.$$state().params,V=U.$$state().ownParams;if(A.hasParamSet){var W=new o.Param("$$uirouterextrasreload");H.$$uirouterextrasreload=V.$$uirouterextrasreload=W,J.restoreFunctions.push(function(){delete H.$$uirouterextrasreload,delete V.$$uirouterextrasreload})}else H.push("$$uirouterextrasreload"),V.push("$$uirouterextrasreload"),J.restoreFunctions.push(function(){H.length=H.length-1,V.length=V.length-1})}k=w.processTransition(B),S&&v(n,B,k);var L=z.path.slice(0,k.keep),Y=I.path.slice(0,k.keep);t.forEach(j.locals,function(t,e){-1!=e.indexOf("@")&&delete j.locals[e]});for(var G=0;G<k.inactives.length;G++){var Q=k.inactives[G].locals;t.forEach(Q,function(t,e){Q.hasOwnProperty(e)&&-1!=e.indexOf("@")&&(j.locals[e]=t)})}if(t.forEach(k.enter,function(t,e){var r,n=z.path[e];"reactivate"===t?(r=d(n),L.push(r),Y.push(r),D.push(m(n)),T=n):"updateStateParams"===t?(r=$(n),L.push(r),T=n):"enter"===t&&L.push(g(n))}),t.forEach(k.exit,function(t,e){var r=I.path[e];"inactivate"===t?(Y.push(h(r)),N.push(r)):"exit"===t&&(Y.push(x(r)),N.push(r))}),D.length&&t.forEach(D,function(t){L.push(t)}),z===T){var X=T.self.name+".",Z=w.getInactiveStates(),te=[];Z.forEach(function(t){0===t.self.name.indexOf(X)&&te.push(t)}),te.sort(),te.reverse(),Y=Y.concat(y(te,function(t){return x(t)})),N=N.concat(te)}z.path=L,I.path=Y;var ee=function(t){return(t.surrogateType?t.surrogateType+":":"")+t.self.name};S&&n.debug("SurrogateFromPath: ",y(Y,ee)),S&&n.debug("SurrogateToPath:   ",y(L,ee))}}var re=c.apply(r,arguments);return re.then(function(t){return J(),S&&p(n,s[t.name],r),t.status="active",t},function(t){return J(),S&&"transition prevented"!==t.message&&"transition aborted"!==t.message&&"transition superseded"!==t.message&&(n.debug("transition failed",t),console.log(t.stack)),i.reject(t)})},r}])}]),function(t,e){function r(e,r,n){function a(e,r){var n=t.isObject(e)?e.name:e;return r?f[n]:m[n]}function o(t,e){if(e.name){var r=e.name.split(/\./);for("."===e.name.charAt(0)&&(r[0]=t.current.name);r.length;){var n=r.join(".");if(t.get(n,{relative:t.current}))return null;if(f[n])return f[n];r.pop()}}if(e.url){var a=[];for(var o in f){var i=f[o].urlMatcher;i&&i.exec(e.url)&&a.push(f[o])}for(var u=a.slice(0),s=a.length-1;s>=0;s--)for(var c=0;c<u.length;c++)a[s]===u[c].parentFutureState&&a.splice(s,1);return a[0]}}function i(t,e){l=!0;var r=t.get("$q");if(!e){var n=r.defer();return n.reject("No lazyState passed in "+e),n.promise}var a=r.when([]),o=e.parentFutureState;o&&f[o.name]&&(a=i(t,f[o.name]));var u=e.type,s=c[u];if(!s)throw Error("No state factory for futureState.type: "+(e&&e.type));return a.then(function(r){var n=t.invoke(s,s,{futureState:e});return n.then(function(t){return t&&r.push(t),r})})["finally"](function(){delete f[e.name]})}function u(t,r){var n=!1,a=["$rootScope","$urlRouter","$state",function(a,u,c){function f(){n=!0,u.sync(),n=!1}if(!p)return s().then(f),void(p=!0);var v=o(c,{url:r.path()});return v?void i(t,v).then(function(t){t.forEach(function(t){t&&(!c.get(t)||t.name&&!c.get(t.name))&&e.state(t)}),l=!1,f()},function(){l=!1,f()}):t.invoke(h)}];if(!l){var u=n?h:a;return t.invoke(u)}}var s,c={},f={},l=!1,v=[],p=!1,d=this;this.addResolve=function(t){v.push(t)},this.stateFactory=function(t,e){c[t]=e},this.futureState=function(e){e.stateName&&(e.name=e.stateName),e.urlPrefix&&(e.url="^"+e.urlPrefix),f[e.name]=e;var r,o=e.name.split(/\./).slice(0,-1).join("."),i=a(e.parent||o);if(i)r=i.url||i.navigable.url;else if(""===o)r=n.compile("");else{var u=a(e.parent||o,!0);if(!u)throw new Error("Couldn't determine parent state of future state. FutureState:"+t.toJson(e));var s=u.urlMatcher.source.replace(/\*rest$/,"");r=n.compile(s),e.parentFutureState=u}e.url&&(e.urlMatcher="^"===e.url.charAt(0)?n.compile(e.url.substring(1)+"*rest"):r.concat(e.url+"*rest"))},this.get=function(){return t.extend({},f)};var h=["$log","$location",function(t,e){t.debug("Unable to map "+e.path())}];r.otherwise(u),r.otherwise=function(e){if(t.isString(e)){var n=e;e=function(){return n}}else if(!t.isFunction(e))throw new Error("'rule' must be a function");return h=["$injector","$location",e],r};var g={getResolvePromise:function(){return s()}};this.$get=["$injector","$state","$q","$rootScope","$urlRouter","$timeout","$log",function(r,n,a,u,c,f,p){function m(){if(u.$on("$stateNotFound",function(t,a,u,s){if(!l){p.debug("event, unfoundState, fromState, fromParams",t,a,u,s);var c=o(n,{name:a.to});if(c){t.preventDefault();var f=i(r,c);f.then(function(t){t.forEach(function(t){t&&(!n.get(t)||t.name&&!n.get(t.name))&&e.state(t)}),n.go(a.to,a.toParams),l=!1},function(t){console.log("failed to lazy load state ",t),n.go(u,s),l=!1})}}}),!s){var d=[];t.forEach(v,function(t){d.push(r.invoke(t))}),s=function(){return a.all(d)}}s().then(function(){f(function(){n.transition?n.transition.then(c.sync,c.sync):c.sync()})})}return m(),g.state=e.state,g.futureState=d.futureState,g.get=d.get,g}]}var n=t.module("ct.ui.router.extras.future",["ct.ui.router.extras.core"]);n.provider("$futureState",["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider",r]);var a={state:function(t){a.$rootScope&&a.$rootScope.$broadcast("$stateAdded",t)},itsNowRuntimeOhWhatAHappyDay:function(t){a.$rootScope=t},$rootScope:e};n.config(["$stateProvider",function(e){var r=e.state;e.state=function(){var n=r.apply(e,arguments),o=t.isObject(arguments[0])?arguments[0]:arguments[1];return a.state(o),n}}]),n.run(["$futureState",function(t,e){a.itsNowRuntimeOhWhatAHappyDay(e)}])}(t),t.module("ct.ui.router.extras.previous",["ct.ui.router.extras.core","ct.ui.router.extras.transition"]).service("$previousState",["$rootScope","$state",function(t,r){var n=null,a=null,o={};t.$on("$transitionStart",function(t,e){function r(){a=null}function o(){n=a}var i=e.from,u=i.state&&i.state.$$state&&i.state.$$state();u&&u.navigable&&(a=n,n=e.from),e.promise.then(r)["catch"](o)});var i={get:function(t){return t?o[t]:n},go:function(t,e){var n=i.get(t);return r.go(n.state,n.params,e)},memo:function(t,e,a){o[t]=n||{state:r.get(e),params:a}},forget:function(t){t?delete o[t]:n=e}};return i}]),t.module("ct.ui.router.extras.previous").run(["$previousState",function(){}]),t.module("ct.ui.router.extras.transition",["ct.ui.router.extras.core"]).config(["$provide",function(e){e.decorator("$state",["$delegate","$rootScope","$q","$injector",function(e,r,n,a){function o(e){var r=a.invoke,n=a.instantiate;return a.invoke=function(n,a,o){return r(n,a,t.extend({$transition$:e},o))},a.instantiate=function(r,a){return n(r,t.extend({$transition$:e},a))},function(){a.invoke=r,a.instantiate=n}}function i(){v.pop()(),l.pop(),f--}function u(t,e){return function(n){return i(),r.$broadcast("$transitionSuccess",e),t.resolve(n)}}function s(t,e){return function(n){return i(),r.$broadcast("$transitionError",e,n),t.reject(n)}}var c=e.transitionTo,f=-1,l=[],v=[];return e.transitionTo=function(){var t=n.defer(),r=l[++f]={promise:t.promise};v[f]=function(){};var a=c.apply(e,arguments);return a.then(u(t,r),s(t,r))},r.$on("$stateChangeStart",function(e,n,a,i,u){var s=f,c=t.extend(l[s],{to:{state:n,params:a},from:{state:i,params:u}}),p=o(c);v[s]=p,r.$broadcast("$transitionStart",c)}),e}])}]),function(){function e(e,r,n){return{scope:{width:"@",height:"@"},restrict:"AE",template:"<svg></svg>",link:function(r,a){function o(e){e=e.map(function(e){return""===e.name?l:t.copy(e)}),t.extend(u,e.reduce(function(t,e){return t[e.name]=e,t},{})),e.forEach(function(t){var e=t.name.split(/\./).slice(0,-1).join("."),r=t.name!=e&&u[e];r&&((r.children||(r.children=[])).push(t),t.px=r.px,t.py=r.py,v.push(t))})}function i(){function t(t){var e=t.name.split(".").pop();return t.sticky&&(e+=" (STICKY)"),t.deepStateRedirect&&(e+=" (DSR)"),e}h=h.data(f.nodes(l),function(t){return t.name}),g=g.data(f.links(v),function(t){return t.target.name}),$=$.data(p),v.forEach(function(t){t.y=70*t.depth});var e=h.enter();$.enter().append("circle").attr("class","active").attr("r",13).attr("cx",function(t){return t.parent.px||100}).attr("cy",function(t){return t.parent.py||100}),e.append("circle").attr("class","node").attr("r",9).attr("cx",function(t){return t.parent.px}).attr("cy",function(t){return t.parent.py}),e.append("text").attr("class","label").attr("x",function(t){return t.parent.px}).attr("y",function(t){return t.parent.py}).attr("text-anchor",function(){return"middle"}).text(t).style("fill-opacity",1),g.enter().insert("path",".node").attr("class","link").attr("d",function(t){var e={x:t.source.px,y:t.source.py};return d({source:e,target:e})});var r=m.transition().duration(y);r.selectAll(".link").attr("d",d);var n={entered:"#AF0",exited:"#777",active:"#0f0",inactive:"#55F",future:"#009"};r.selectAll(".node").attr("cx",function(t){return t.px=t.x}).attr("cy",function(t){return t.py=t.y}).attr("r",function(t){return"active"===t.status?15:10}).style("fill",function(t){return n[t.status]||"#FFF"}),r.selectAll(".label").attr("x",function(t){return t.px=t.x}).attr("y",function(t){return t.py=t.y-15}).attr("transform",function(t){return"rotate(-25 "+t.x+" "+t.y+")"}),r.selectAll(".active").attr("x",function(t){return t.px=t.x}).attr("y",function(t){return t.py=t.y-15})}var u={},s=r.width||400,c=r.height||400,f=d3.layout.tree().size([s-20,c-20]).separation(function(t,e){return t.parent==e.parent?10:25}),l=e.get().filter(function(t){return""===t.name})[0],v=f(l);l.parent=l,l.px=l.x=s/2,l.py=l.y=c/2;var p={};p.px=p.x=l.px,p.py=p.y=l.py;{var d=d3.svg.diagonal(),m=d3.select(a.find("svg")[0]).attr("width",s).attr("height",c).append("g").attr("transform","translate(10, 10)"),h=m.selectAll(".node"),g=m.selectAll(".link"),$=m.selectAll(".active"),x=200,y=200;setInterval(i,x)}n(function(){r.states=e.get(),t.forEach(v,function(t){var r=e.get(t.name);r&&(t.status=r.status||"exited")})},250),r.$watchCollection("states",function(t,e){var r=(e||[]).map(function(t){return t.name});o((t||[]).filter(function(t){return-1==r.indexOf(t.name)}))}),i(x)}}}var r=t.module("ct.ui.router.extras.statevis",["ct.ui.router.extras.core"]);r.directive("stateVis",["$state","$timeout","$interval",e])}(),t.module("ct.ui.router.extras",["ct.ui.router.extras.core","ct.ui.router.extras.dsr","ct.ui.router.extras.future","ct.ui.router.extras.previous","ct.ui.router.extras.statevis","ct.ui.router.extras.sticky","ct.ui.router.extras.transition"])}(angular);