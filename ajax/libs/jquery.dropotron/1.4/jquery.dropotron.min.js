(function(a){a.fn.disableSelection_dropotron=function(){return a(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")};a.fn.dropotron=function(b){if(this.length>1){for(var c=0;c<this.length;c++){a(this[c]).dropotron(b)}}return a.dropotron(a.extend({selectorParent:a(this)},b))};a.dropotron=function(c){var f=a.extend({selectorParent:null,baseZIndex:1000,menuClass:"dropotron",expandMode:"hover",hoverDelay:150,hideDelay:250,openerClass:"opener",openerActiveClass:"active",submenuClassPrefix:"level-",mode:"fade",speed:"fast",easing:"swing",alignment:"left",offsetX:0,offsetY:0,globalOffsetY:0,IEOffsetX:0,IEOffsetY:0,noOpenerFade:true,detach:true,cloneOnDetach:true},c);var g=f.selectorParent,b=g.find("ul"),i=a("html");var h=false,d=null,e=null;g.on("doCollapseAll",function(){b.trigger("doCollapse")});b.each(function(){var k=a(this),j=k.parent();if(f.hideDelay>0){k.add(j).on("mouseleave",function(l){window.clearTimeout(e);e=window.setTimeout(function(){k.trigger("doCollapse")},f.hideDelay)})}k.disableSelection_dropotron().hide().addClass(f.menuClass).css("position","absolute").on("mouseenter",function(l){window.clearTimeout(e)}).on("doExpand",function(){if(k.is(":visible")){return false}window.clearTimeout(e);b.each(function(){var w=a(this);if(!a.contains(w.get(0),j.get(0))){w.trigger("doCollapse")}});var r=j.offset(),q=j.position(),o=j.parent().position(),m=j.outerWidth(),v=k.outerWidth(),l=(k.css("z-index")==f.baseZIndex);var u,s,n,t;if(l){if(!f.detach){u=q}else{u=r}t=u.top+j.outerHeight()+f.globalOffsetY;s=f.alignment;k.removeClass("left").removeClass("right").removeClass("center");switch(f.alignment){case"right":n=u.left-v+m;if(n<0){n=u.left;s="left"}break;case"center":n=u.left-Math.floor((v-m)/2);if(n<0){n=u.left;s="left"}else{if(n+v>i.width()){n=u.left-v+m;s="right"}}break;case"left":default:n=u.left;if(n+v>i.width()){n=u.left-v+m;s="right"}break}k.addClass(s)}else{if(j.css("position")=="relative"||j.css("position")=="absolute"){t=f.offsetY;n=(-1*q.left)}else{t=q.top+f.offsetY;n=0}switch(f.alignment){case"right":n+=(-1*j.parent().outerWidth())+f.offsetX;break;case"center":case"left":default:n+=j.parent().outerWidth()+f.offsetX;break}}if(navigator.userAgent.match(/MSIE ([0-9]+)\./)&&RegExp.$1<8){n+=f.IEOffsetX;t+=f.IEOffsetY}k.css("left",n+"px").css("top",t+"px");k.css("opacity","0.01").show();var p=false;if(j.css("position")=="relative"||j.css("position")=="absolute"){n=(-1*q.left)}else{n=0}if(k.offset().left<0){n+=j.parent().outerWidth()-f.offsetX;p=true}else{if(k.offset().left+v>i.width()){n+=(-1*j.parent().outerWidth())-f.offsetX;p=true}}if(p){k.css("left",n+"px")}k.hide().css("opacity","1");switch(f.mode){case"zoom":h=true;j.addClass(f.openerActiveClass);k.animate({width:"toggle",height:"toggle"},f.speed,f.easing,function(){h=false});break;case"slide":h=true;j.addClass(f.openerActiveClass);k.animate({height:"toggle"},f.speed,f.easing,function(){h=false});break;case"fade":h=true;if(l&&!f.noOpenerFade){var p;if(f.speed=="slow"){p=80}else{if(f.speed=="fast"){p=40}else{p=Math.floor(f.speed/2)}}j.fadeTo(p,0.01,function(){j.addClass(f.openerActiveClass);j.fadeTo(f.speed,1);k.fadeIn(f.speed,function(){h=false})})}else{j.addClass(f.openerActiveClass);j.fadeTo(f.speed,1);k.fadeIn(f.speed,function(){h=false})}break;case"instant":default:j.addClass(f.openerActiveClass);k.show();break}return false}).on("doCollapse",function(){if(!k.is(":visible")){return false}k.hide();j.removeClass(f.openerActiveClass);k.find("."+f.openerActiveClass).removeClass(f.openerActiveClass);k.find("ul").hide();return false}).on("doToggle",function(l){if(k.is(":visible")){k.trigger("doCollapse")}else{k.trigger("doExpand")}return false});j.disableSelection_dropotron().addClass("opener").css("cursor","pointer").on("click",function(l){if(h){return}l.preventDefault();l.stopPropagation();k.trigger("doToggle")});if(f.expandMode=="hover"){j.hover(function(l){if(h){return}d=window.setTimeout(function(){k.trigger("doExpand")},f.hoverDelay)},function(l){window.clearTimeout(d)})}});b.find("a").css("display","block").on("click",function(j){if(h){return}g.trigger("doCollapseAll");j.stopPropagation();if(a(this).attr("href").length<1){j.preventDefault()}});g.find("li").css("white-space","nowrap").each(function(){var l=a(this),j=l.children("a"),k=l.children("ul");j.on("click",function(m){if(a(this).attr("href").length<1){m.preventDefault()}else{m.stopPropagation()}});if(j.length>0&&k.length==0){l.on("click",function(m){if(h){return}g.trigger("doCollapseAll");m.stopPropagation()})}});g.children("li").each(function(){var k=a(this),m=k.children("ul"),o;if(m.length>0){if(f.detach){if(f.cloneOnDetach){o=m.clone();o.attr("class","").hide().appendTo(m.parent())}m.detach().appendTo("body")}for(var l=f.baseZIndex,j=1,n=m;n.length>0;j++){n.css("z-index",l++);if(f.submenuClassPrefix){n.addClass(f.submenuClassPrefix+(l-1-f.baseZIndex))}n=n.find("> li > ul")}}});i.on("click",function(){if(!h){g.trigger("doCollapseAll")}}).on("keypress",function(j){if(!h&&j.keyCode==27){j.preventDefault();g.trigger("doCollapseAll")}})}})(jQuery);