!function(e,t,o){"use strict";function i(e,t){var o=!1;return function(){o||(e.call(),o=!0,setTimeout(function(){o=!1},t))}}function n(){J&&le.hide(),e(t).on("touchstart.testMouse",function(){e(t).off("touchstart.testMouse"),V=!0,le.addClass("mobile")}),W.off().on("click",H.toggle),_.off().on("click","a",z.click),Z&&le.addClass("msie"),le.off().on("click","img",function(e){e.stopPropagation()}),e(t.body).append(le),P=t.documentElement}function s(e,t,o){1==t?(X.css({transform:"translateX(25%)",transition:".2s",opacity:0}),setTimeout(function(){S(O)},200)):-1==t&&(X.css({transform:"translateX(-25%)",transition:".2s",opacity:0}),setTimeout(function(){S(E)},200)),1==o?R.prop("checked",!0):-1==o&&R.prop("checked",!1)}function a(e){var o,i=t.createElement("p").style,n=["ms","O","Moz","Webkit"];if(""==i[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=n.length;o--;)if(""==i[n[o]+e])return n[o]+e}function r(e){var t=e.keyCode,o=T.keys;return o.close.indexOf(t)>=0&&C()||o.next.indexOf(t)>=0&&!T.single&&c(E)||o.prev.indexOf(t)>=0&&!T.single&&c(O)||!0}function l(e,t,o){1==o?c(E):-1==o&&c(O)}function u(){var e="pbPrevBtn"==this.id?O:E;return c(e),!1}function h(e){M=K,K=e,L=Q[e][0],O=(K||(T.loop?Q.length:0))-1,E=(K+1)%Q.length||(T.loop?0:-1)}function c(e){if(!T.loop){var t=K==Q.length-1&&e==E,o=0==K&&e==O;if(t||o)return}S(e)}function d(){var t=Q[K][0],o=e("<a>").prop("href",Q[K][0])[0].search?"&":"?";return t+=o+"vq=hd720&wmode=opaque",e("<iframe>").prop({scrolling:"no",frameborder:0,allowTransparency:!0,src:t}).attr({webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0})}function f(){if(j.off(G).removeClass("change"),T.counter){try{var e=T.counter.replace("A",K+1).replace("B",Q.length)}catch(t){T.counter="(A/B)",f()}Y.find(".counter").text(e)}T.title&&Y.find(".title").html("<span>"+Q[K][1]+"</span>")}function p(){le.addClass("error"),X[0].src=ee,ne.onerror=null}function m(e){function t(){clearTimeout(i),o.off(G).css({transition:"none"}),le.removeClass("video"),"video"==D?(X[0].src=ee,B.addClass("prepare"),le.addClass("video")):X.prop({src:L,"class":"prepare"}),setTimeout(function(){X.add(B).removeAttr("style").removeClass("prepare"),le.removeClass("hide next prev"),setTimeout(function(){X.add(B).on(G,v),Z&&v()},0)},50)}var o,i;i=setTimeout(t,2e3),q.fadeOut(300,function(){le.removeClass("pbLoading"),q.removeAttr("style")}),le.addClass("hide"),X.add(B).removeAttr("style").removeClass("zoomable"),e||"video"!=k[M].rel?o=X:(o=B,X.addClass("prepare")),e||Z?t():o.on(G,t)}function v(){X.add(B).off(G).addClass("zoomable"),"video"==D?B.removeClass("hide"):W&&T.autoplay&&H.play(),"function"==typeof A.callback&&A.callback.apply(k[K])}function g(o,i,n){if(n)return!1;if("video"==D){var s=B.data("zoom")||1;if(s+=i/10,.5>s)return!1;B.data("zoom",s).css({width:624*s,height:351*s})}else{var s=X.data("zoom")||1,a=X[0].getBoundingClientRect();s+=i/10,.1>s&&(s=.1),ie(function(){X.data("zoom",s).css({transform:"scale("+s+")"})}),a.height>P.clientHeight||a.width>P.clientWidth?e(t).on("mousemove.photobox",w):(e(t).off("mousemove.photobox"),X[0].style[te]="50% 50%")}return!1}function b(e,t){e.preventDefault(),e.stopPropagation();var o,i=A.thumbsList;i.css("height",i[0].clientHeight+10*t),o=Y[0].clientHeight/2,U[0].style.cssText="margin-top: -"+o+"px; padding: "+o+"px 0;",_.hide().show(0)}function w(e){var t=e.clientY/P.clientHeight*(P.clientHeight+200)-100,o=t/P.clientHeight*100,i=e.clientX/P.clientWidth*100,n=i.toFixed(2)+"% "+o.toFixed(2)+"%";ie(function(){X[0].style[te]=n})}function y(){clearTimeout(H.autoPlayTimer),e(t).off("mousemove.photobox"),ne.onload=function(){},ne.src=se.src=ae.src=L}function C(){function t(){""!=le[0].className&&(le.removeClass("show hide error pbLoading"),X.removeAttr("class").removeAttr("style").off().data("zoom",1),Y.find(".title").empty(),J&&setTimeout(function(){le.hide()},200),T.hideFlash&&e("iframe, object, embed").css("visibility","visible"))}return le.hasClass("show")?(y(),B.find("iframe").prop("src","").empty(),x.prototype.setup(),ue.clear(),le.removeClass("on video").addClass("hide"),X.on(G,t),Z&&t(),setTimeout(function(){A=null},1e3),setTimeout(t,500),void("function"==typeof T.afterClose&&T.afterClose(le))):!1}var x,A,T,k,L,M,D,O,E,z,P,H,S,F,X,B,I,N,R,Y,j,q,W,_,U,Q=[],K=-1,G="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",Z=!("placeholder"in t.createElement("input")),J=function(){var t=e("<p>")[0];return t.style.cssText="pointer-events:auto",!t.style.pointerEvents}(),V=!1,$=e(),ee="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",te=a("transformOrigin"),oe=a("transition"),ie=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},ne={},se=new Image,ae=new Image,re={single:!1,beforeShow:null,afterClose:null,loop:!0,thumb:null,thumbs:!0,counter:"(A/B)",title:!0,autoplay:!1,time:3e3,history:!0,hideFlash:!0,zoomable:!0,wheelNextPrev:!0,keys:{close:"27, 88, 67",prev:"37, 80",next:"39, 78"}},le=e('<div id="pbOverlay">').append(R=e('<input type="checkbox" id="pbThumbsToggler" checked hidden>'),q=e('<div class="pbLoader"><b></b><b></b><b></b></div>'),I=e('<div id="pbPrevBtn" class="prevNext"><b></b></div>').on("click",u),N=e('<div id="pbNextBtn" class="prevNext"><b></b></div>').on("click",u),U=e('<div class="pbWrapper">').append(X=e("<img>"),B=e("<div>")),F=e('<div id="pbCloseBtn">').on("click",C)[0],W=e('<div id="pbAutoplayBtn">').append(e('<div class="pbProgress">')),Y=e('<div id="pbCaption">').append('<label for="pbThumbsToggler" title="thumbnails on/off"></label>',j=e('<div class="pbCaptionText">').append('<div class="title"></div><div class="counter">'),_=e("<div>").addClass("pbThumbs")));e.fn.photobox=function(t,o,i){return this.each(function(){var s,a=e(this).data("_photobox");return a?("destroy"===t&&a.destroy(),this):("string"!=typeof t&&(t="a"),"prepareDOM"===t?(n(),this):(s=e.extend({},re,o||{}),A=new x(s,this,t),e(this).data("_photobox",A),void(A.callback=i)))})},x=function(o,i,n){this.options=e.extend({},o),this.target=n,this.selector=e(i||t),this.thumbsList=null;var s=this.imageLinksFilter(this.selector.find(n));this.imageLinks=s[0],this.images=s[1],this.init()},x.prototype={init:function(){var e=this;this.selector.one("mouseenter.photobox",this.target,function(t){e.thumbsList=z.generate.apply(e)}),this.selector.on("click.photobox",this.target,function(t){t.preventDefault(),e.open(this)}),this.observerTimeout=null,1==this.selector[0].nodeType&&e.observeDOM(e.selector[0],this.onDOMchanges.bind(this))},onDOMchanges:function(e){var t=e;clearTimeout(this.observerTimeout),t.observerTimeout=setTimeout(function(){var e,o=t.imageLinksFilter(t.selector.find(t.target)),i=0,n=!1;if(t.imageLinks.length!=o[0].length){if(t.imageLinks=o[0],t.images=o[1],A&&t.selector==A.selector)for(Q=t.images,k=t.imageLinks,e=Q.length;e--;)Q[e][0]==L&&(n=!0);t.thumbsList=z.generate.apply(t),_.html(t.thumbsList),t.images.length&&L&&t.options.thumbs&&(i=t.thumbsList.find('a[href="'+L+'"]').eq(0).parent().index(),-1==i&&(i=0),z.changeActive(i,0))}},50)},open:function(t){var o=e.inArray(t,this.imageLinks);return-1==o?!1:(T=this.options,Q=this.images,k=this.imageLinks,A=this,this.setup(1),le.on(G,function(){le.off(G).addClass("on"),S(o,!0)}).addClass("show"),Z&&le.trigger("MSTransitionEnd"),!1)},imageLinksFilter:function(t){var o,i=this,n=[],s={};return[t.filter(function(t){var a,r=e(this),l="";return s.content=r[0].getAttribute("title")||"",i.options.thumb&&(a=r.find(i.options.thumb)[0]),i.options.thumb&&a||(a=r.find("img")[0]),a&&(o=a.getAttribute("data-pb-captionlink"),l=a.getAttribute("src"),s.content=a.getAttribute("alt")||a.getAttribute("title")||""),o&&(o=o.split("["),2==o.length?(s.linkText=o[0],s.linkHref=o[1].slice(0,-1)):(s.linkText=o,s.linkHref=o),s.content+=' <a href="'+s.linkHref+'">'+s.linkText+"</a>"),n.push([r[0].href,s.content,l]),!0}),n]},observeDOM:function(){var e=o.MutationObserver||o.WebKitMutationObserver,t=o.addEventListener;return function(o,i){if(e){var n=this,s=new e(function(e,t){(e[0].addedNodes.length||e[0].removedNodes.length)&&i(n)});s.observe(o,{childList:!0,subtree:!0})}else t&&(o.addEventListener("DOMNodeInserted",i,!1),o.addEventListener("DOMNodeRemoved",i,!1))}}(),setup:function(n){var a=n?"on":"off";X[0].src=ee,T.thumbs&&(V||_[a]("mouseenter.photobox",z.calc)[a]("mousemove.photobox",z.move)),n?(X.css({transition:"0s"}).removeAttr("style"),le.show(),_.html(this.thumbsList).trigger("mouseenter.photobox"),T.thumbs?le.addClass("thumbs"):(R.prop("checked",!1),le.removeClass("thumbs")),this.images.length<2||T.single?le.removeClass("thumbs hasArrows hasCounter hasAutoplay"):(le.addClass("hasArrows hasCounter"),T.time>1e3?(le.addClass("hasAutoplay"),T.autoplay?H.progress.start():H.pause()):le.removeClass("hasAutoplay")),T.hideFlash&&e("iframe, object, embed").css("visibility","hidden")):e(o).off("resize.photobox"),e(t).off("keydown.photobox")[a]({"keydown.photobox":r}),V&&(le.removeClass("hasArrows"),U[a]("swipe",s)),T.zoomable&&(le[a]({"mousewheel.photobox":g}),Z||_[a]({"mousewheel.photobox":b})),!T.single&&T.wheelNextPrev&&le[a]({"mousewheel.photobox":i(l,1e3)})},destroy:function(){T=this.options,this.selector.off("click.photobox",this.target).removeData("_photobox"),C()}},z=function(){var t,o,i,n,s=0,a=0,r=0,l=0,u=null;return{generate:function(){var t,o,i,n,s,a=e("<ul>"),r=[],l=this.imageLinks.size();for(s=0;l>s;s++)i=this.imageLinks[s],o=this.images[s][2],o&&(t=this.images[s][1],n=i.rel?" class='"+i.rel+"'":"",r.push("<li"+n+'><a href="'+i.href+'"><img src="'+o+'" alt="" title="'+t+'" /></a></li>'));return a.html(r.join("")),a},click:function(t){t.preventDefault(),$.removeClass("active"),$=e(this).parent().addClass("active");var o=e(this.parentNode).index();return S(o,0,1)},changeActiveTimeout:null,changeActive:function(e,t,o){$.index();$.removeClass("active"),$=_.find("li").eq(e).addClass("active"),!o&&$[0]&&(clearTimeout(this.changeActiveTimeout),this.changeActiveTimeout=setTimeout(function(){var e=$[0].offsetLeft+$[0].clientWidth/2-P.clientWidth/2;t?_.delay(800):_.stop(),_.animate({scrollLeft:e},500,"swing")},200))},calc:function(e){return o=_[0],s=o.clientWidth,a=o.scrollWidth,t=.15*s,r=_.offset().left,l=e.pageX-t-r,n=l/(s-2*t),i=(a-s)*n,_.animate({scrollLeft:i},200),clearTimeout(u),u=setTimeout(function(){u=null},200),this},move:function(e){if(!u){var i,n,l=e.pageX-t-r;0>l&&(l=0),i=l/(s-2*t),n=(a-s)*i,ie(function(){o.scrollLeft=n})}}}}(),H={autoPlayTimer:!1,play:function(){H.autoPlayTimer=setTimeout(function(){S(E)},T.time),H.progress.start(),W.removeClass("play"),H.setTitle("Click to stop autoplay"),T.autoplay=!0},pause:function(){clearTimeout(H.autoPlayTimer),H.progress.reset(),W.addClass("play"),H.setTitle("Click to resume autoplay"),T.autoplay=!1},progress:{reset:function(){W.find("div").removeAttr("style"),setTimeout(function(){W.removeClass("playing")},200)},start:function(){Z||W.find("div").css(oe,T.time+"ms"),W.addClass("playing")}},setTitle:function(e){e&&W.prop("title",e+" (every "+T.time/1e3+" seconds)")},toggle:function(e){e.stopPropagation(),H[T.autoplay?"pause":"play"]()}},S=function(){var e;return function(t,o,i){if(!e){if(e=setTimeout(function(){e=null},150),(!t||0>t)&&(t=0),T.loop||(N[t==Q.length-1?"addClass":"removeClass"]("hide"),I[0==t?"addClass":"removeClass"]("hide")),"function"==typeof T.beforeShow&&T.beforeShow(k[t]),le.removeClass("error").addClass(t>K?"next":"prev"),h(t),y(),B.empty(),ne.onerror=null,X.add(B).data("zoom",1),D="video"==k[t].rel?"video":"image","video"==D)B.html(d()).addClass("hide"),m(o);else{var n=setTimeout(function(){le.addClass("pbLoading")},50);Z&&le.addClass("hide"),T.autoplay&&H.progress.reset(),ne=new Image,ne.onload=function(){ne.onload=null,O>=0&&(se.src=Q[O][0]),E>=0&&(ae.src=Q[E][0]),clearTimeout(n),m(o)},ne.onerror=p,ne.src=L}j.on(G,f).addClass("change"),(o||Z)&&f(),T.thumbs&&z.changeActive(t,o,i),ue.save()}}}();var ue={save:function(){"pushState"in window.history&&decodeURIComponent(window.location.hash.slice(1))!=L&&T.history&&window.history.pushState("photobox",t.title+"-"+Q[K][1],window.location.pathname+window.location.search+"#"+encodeURIComponent(L))},load:function(){if(T&&!T.history)return!1;var t=decodeURIComponent(window.location.hash.slice(1));!t&&le.hasClass("show")&&C(),e('a[href="'+t+'"]').trigger("click.photobox")},clear:function(){T.history&&"pushState"in window.history&&window.history.pushState("photobox",t.title,window.location.pathname+window.location.search)}};window.onpopstate=function(){var e=window.onpopstate;return function(t){e&&e.apply(this,arguments),"photobox"==t.state&&ue.load()}}(),e.event.special.swipe={setup:function(){e(this).bind("touchstart",e.event.special.swipe.handler)},teardown:function(){e(this).unbind("touchstart",e.event.special.swipe.handler)},handler:function(t){function o(){h.removeEventListener("touchmove",i),n=s=null}function i(i){i.preventDefault();var r=n-i.touches[0].pageX,c=s-i.touches[0].pageY;return Math.abs(r)>=20?(o(),l=r>0?-1:1):Math.abs(c)>=20&&(o(),u=c>0?1:-1),t.type="swipe",a.unshift(t,l,u),(e.event.dispatch||e.event.handle).apply(h,a)}var n,s,a=[].slice.call(arguments,1),r=t.originalEvent.touches,l=0,u=0,h=this;t=e.event.fix(t),1==r.length&&(n=r[0].pageX,s=r[0].pageY,this.addEventListener("touchmove",i,!1))}},!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,r=l.call(arguments,1),u=0,c=0,d=0,f=0,p=0,m=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(c=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(c=-1*d,d=0),u=0===d?c:d,"deltaY"in a&&(d=-1*a.deltaY,u=d),"deltaX"in a&&(c=a.deltaX,0===d&&(u=-1*c)),0!==d||0!==c){if(1===a.deltaMode){var v=e.data(this,"mousewheel-line-height");u*=v,d*=v,c*=v}else if(2===a.deltaMode){var g=e.data(this,"mousewheel-page-height");u*=g,d*=g,c*=g}if(f=Math.max(Math.abs(d),Math.abs(c)),(!s||s>f)&&(s=f,i(a,f)&&(s/=40)),i(a,f)&&(u/=40,c/=40,d/=40),u=Math[u>=1?"floor":"ceil"](u/s),c=Math[c>=1?"floor":"ceil"](c/s),d=Math[d>=1?"floor":"ceil"](d/s),h.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();p=t.clientX-b.left,m=t.clientY-b.top}return t.deltaX=c,t.deltaY=d,t.deltaFactor=s,t.offsetX=p,t.offsetY=m,t.deltaMode=0,r.unshift(t,u,c,d),n&&clearTimeout(n),n=setTimeout(o,200),(e.event.dispatch||e.event.handle).apply(this,r)}}function o(){s=null}function i(e,t){return h.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var n,s,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var h=e.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var o=r.length;o;)this.addEventListener(r[--o],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",h.getLineHeight(this)),e.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var o=r.length;o;)this.removeEventListener(r[--o],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var o=e(t)["offsetParent"in e.fn?"offsetParent":"parent"]();return o.length||(o=e("body")),parseInt(o.css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),e(t).ready(n),window._photobox={DOM:{overlay:le},close:C,history:ue,defaults:re}}(jQuery,document,window);
//# sourceMappingURL=./jquery.photobox.min.js.map