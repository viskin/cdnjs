/*!
 * jQuery Lazy - min - v0.4.0
 * http://jquery.eisbehr.de/lazy/
 * http://eisbehr.de/
 *
 * Copyright 2014, Daniel 'Eisbehr' Kern
 *
 * Dual licensed under the MIT and GPL-2.0 licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * jQuery("img.lazy").lazy();
 */
!function(t,n,i,o){"use strict";function e(t,n){return this.items=t,this.lazy(n),this.configuration.chainable?t:this}t.fn.Lazy=t.fn.lazy=function(t){return new e(this,t)},e.prototype.configuration={chainable:!0,bind:"load",threshold:500,fallbackWidth:2e3,fallbackHeight:2e3,visibleOnly:!1,appendScroll:n,scrollDirection:"both",defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",retinaAttribute:"data-retina",removeAttribute:!0,handledName:"handled",effect:"show",effectTime:0,enableThrottle:!1,throttle:250,enableQueueing:!0,beforeLoad:null,onLoad:null,afterLoad:null,onError:null,onFinishedAll:null},e.prototype.items={},e.prototype.lazy=function(e){function r(){if(y=n.devicePixelRatio>1,null!==b.configuration.defaultImage||null!==b.configuration.placeholder)for(var i=0;i<b.items.length;i++){var o=t(b.items[i]);o.data("lazy",b),null===b.configuration.defaultImage||o.attr("src")||o.attr("src",b.configuration.defaultImage),null===b.configuration.placeholder||o.css("background-image")&&"none"!=o.css("background-image")||o.css("background-image","url("+b.configuration.placeholder+")")}b.configuration.delay>=0&&setTimeout(function(){a(!0)},b.configuration.delay),(b.configuration.delay<0||b.configuration.combined)&&(a(!1),b.event=d(b.configuration.throttle,function(){m(function(){a(!1)},this,!0)}),m(function(){t(b.configuration.appendScroll).bind("scroll",b.event)},this),m(function(){t(b.configuration.appendScroll).bind("resize",b.event)},this))}function a(n){if(b.items.length){for(var i=!1,o=0;o<b.items.length;o++)!function(e){var r=e[o],a=t(r);if(c(r)||n){var l=r.tagName.toLowerCase();if(a.data(b.configuration.handledName))return;i=!0,a.data(b.configuration.handledName,!0),a.attr(b.configuration.attribute)&&("img"==l&&a.attr(b.configuration.attribute)!=a.attr("src")||"img"!=l&&a.attr(b.configuration.attribute)!=a.css("background-image"))&&(a.is(":visible")||!b.configuration.visibleOnly)&&m(function(){u(a,l)},this)}}(b.items);i&&m(function(){b.items=t(b.items).filter(function(){return!t(this).data(b.configuration.handledName)})},this)}}function u(i,o){var e=t(new Image);++A,e.error(b.configuration.onError?function(){s(b.configuration.onError,i),g()}:function(){g()});var r=!1;e.one("load",function(){var t=function(){return r?(i.hide(),"img"==o?i.attr("src",e.attr("src")):i.css("background-image","url("+e.attr("src")+")"),i[b.configuration.effect](b.configuration.effectTime),b.configuration.removeAttribute&&(i.removeAttr(b.configuration.attribute),i.removeAttr(b.configuration.retinaAttribute)),s(b.configuration.afterLoad,i),e.unbind("load").remove(),void g()):void n.setTimeout(t,100)};t()}),s(b.configuration.beforeLoad,i),e.attr("src",i.attr(y&&i.attr(b.configuration.retinaAttribute)?b.configuration.retinaAttribute:b.configuration.attribute)),s(b.configuration.onLoad,i),r=!0,e.complete&&e.load()}function c(t){var n=l(),i=f(),o=t.getBoundingClientRect(),e=i+b.configuration.threshold>o.top&&-b.configuration.threshold<o.bottom,r=n+b.configuration.threshold>o.left&&-b.configuration.threshold<o.right;return"vertical"==b.configuration.scrollDirection?e:"horizontal"==b.configuration.scrollDirection?r:e&&r}function l(){return v>=0?v:v=n.innerWidth||i.documentElement.clientWidth||i.body.clientWidth||i.body.offsetWidth||b.configuration.fallbackWidth}function f(){return p>=0?p:p=n.innerHeight||i.documentElement.clientHeight||i.body.clientHeight||i.body.offsetHeight||b.configuration.fallbackHeight}function d(t,n){function i(){function i(){r=+new Date,n.apply(o)}var a=+new Date-r;e&&clearTimeout(e),a>t||!b.configuration.enableThrottle?i():e=setTimeout(i,t-a)}var e,r=0;return i}function g(){--A,b.items.size()||A||s(b.configuration.onFinishedAll,null)}function s(t,n){t&&(n?m(function(){t(n)},this):m(t,this))}function h(){w=setTimeout(function(){m(),E.length&&h()},2)}function m(t,i,o){if(t)return b.configuration.enableQueueing?((!o||o&&!k)&&(E.push([t,i,o]),o&&(k=!0)),void(1==E.length&&h())):void t.call(i||n);var e=E.shift();e&&(e[2]&&(k=!1),e[0].call(e[1]||n))}var b=this,A=0,v=-1,p=-1,y=!1,w=null,E=[],k=!1;!function(){e&&t.extend(b.configuration,e),b.configuration.onError&&b.items.each(function(){var n=this;m(function(){t(n).bind("error",function(){s(b.configuration.onError,t(this))})},n)}),"load"==b.configuration.bind?t(n).load(r):"event"==b.configuration.bind&&r()}()},e.prototype.event=function(){},e.prototype.destroy=function(){t(this.configuration.appendScroll).unbind("scroll",this.event),t(this.configuration.appendScroll).unbind("resize",this.event),this.items={},this.event=function(){}}}(jQuery,window,document);