/*!
 * jQuery Lazy - min - v0.4.1
 * http://jquery.eisbehr.de/lazy/
 * http://eisbehr.de/
 *
 * Copyright 2015, Daniel 'Eisbehr' Kern
 *
 * Dual licensed under the MIT and GPL-2.0 licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * jQuery("img.lazy").lazy();
 */
!function(t,n,i,o){"use strict";function e(t,n){return this._items=t,this._lazy(n),this.configuration.chainable?t:this}t.fn.Lazy=t.fn.lazy=function(t){return new e(this,t)},t.extend(e.prototype,{configuration:{chainable:!0,bind:"load",threshold:500,fallbackWidth:2e3,fallbackHeight:2e3,visibleOnly:!1,appendScroll:n,scrollDirection:"both",defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",retinaAttribute:"data-retina",removeAttribute:!0,handledName:"handled",effect:"show",effectTime:0,enableThrottle:!1,throttle:250,enableQueueing:!0,beforeLoad:null,onLoad:null,afterLoad:null,onError:null,onFinishedAll:null},_items:{},_lazy:function(e){function r(){if(_=n.devicePixelRatio>1,null!==m.configuration.defaultImage||null!==m.configuration.placeholder)for(var i=0;i<m._items.length;i++){var o=t(m._items[i]);o.data("plugin_lazy",m),null===m.configuration.defaultImage||o.attr("src")||o.attr("src",m.configuration.defaultImage),null===m.configuration.placeholder||o.css("background-image")&&"none"!=o.css("background-image")||o.css("background-image","url("+m.configuration.placeholder+")")}m.configuration.delay>=0&&setTimeout(function(){a(!0)},m.configuration.delay),(m.configuration.delay<0||m.configuration.combined)&&(a(!1),m._event=d(m.configuration.throttle,function(){b(function(){a(!1)},this,!0)}),b(function(){t(m.configuration.appendScroll).bind("scroll",m._event)},this),b(function(){t(m.configuration.appendScroll).bind("resize",m._event)},this))}function a(n){if(m._items.length){for(var i=!1,o=0;o<m._items.length;o++)!function(e){var r=e[o],a=t(r);if(c(r)||n){var l=r.tagName.toLowerCase();if(a.data(m.configuration.handledName))return;i=!0,a.data(m.configuration.handledName,!0),a.attr(m.configuration.attribute)&&("img"==l&&a.attr(m.configuration.attribute)!=a.attr("src")||"img"!=l&&a.attr(m.configuration.attribute)!=a.css("background-image"))&&(a.is(":visible")||!m.configuration.visibleOnly)&&b(function(){u(a,l)},this)}}(m._items);i&&b(function(){m._items=t(m._items).filter(function(){return!t(this).data(m.configuration.handledName)})},this)}}function u(i,o){var e=t(new Image);++v,e.error(m.configuration.onError?function(){s(m.configuration.onError,i),g()}:function(){g()});var r=!1;e.one("load",function(){var t=function(){return r?(i.hide(),"img"==o?i.attr("src",e.attr("src")):i.css("background-image","url("+e.attr("src")+")"),i[m.configuration.effect](m.configuration.effectTime),m.configuration.removeAttribute&&(i.removeAttr(m.configuration.attribute),i.removeAttr(m.configuration.retinaAttribute)),s(m.configuration.afterLoad,i),e.unbind("load").remove(),void g()):void n.setTimeout(t,100)};t()}),s(m.configuration.beforeLoad,i),e.attr("src",i.attr(_&&i.attr(m.configuration.retinaAttribute)?m.configuration.retinaAttribute:m.configuration.attribute)),s(m.configuration.onLoad,i),r=!0,e.complete&&e.load()}function c(t){var n=l(),i=f(),o=t.getBoundingClientRect(),e=i+m.configuration.threshold>o.top&&-m.configuration.threshold<o.bottom,r=n+m.configuration.threshold>o.left&&-m.configuration.threshold<o.right;return"vertical"==m.configuration.scrollDirection?e:"horizontal"==m.configuration.scrollDirection?r:e&&r}function l(){return A>=0?A:A=n.innerWidth||i.documentElement.clientWidth||i.body.clientWidth||i.body.offsetWidth||m.configuration.fallbackWidth}function f(){return p>=0?p:p=n.innerHeight||i.documentElement.clientHeight||i.body.clientHeight||i.body.offsetHeight||m.configuration.fallbackHeight}function d(t,n){function i(){function i(){r=+new Date,n.apply(o)}var a=+new Date-r;e&&clearTimeout(e),a>t||!m.configuration.enableThrottle?i():e=setTimeout(i,t-a)}var e,r=0;return i}function g(){--v,m._items.size()||v||s(m.configuration.onFinishedAll,null)}function s(t,n){t&&(n?b(function(){t(n)},this):b(t,this))}function h(){y=setTimeout(function(){b(),T.length&&h()},2)}function b(t,i,o){if(t)return m.configuration.enableQueueing?((!o||o&&!w)&&(T.push([t,i,o]),o&&(w=!0)),void(1==T.length&&h())):void t.call(i||n);var e=T.shift();e&&(e[2]&&(w=!1),e[0].call(e[1]||n))}var m=this,v=0,A=-1,p=-1,_=!1,y=null,T=[],w=!1;!function(){e&&t.extend(m.configuration,e),m.configuration.onError&&m._items.each(function(){var n=this;b(function(){t(n).bind("error",function(){s(m.configuration.onError,t(this))})},n)}),"load"==m.configuration.bind?t(n).load(r):"event"==m.configuration.bind&&r()}()},_event:function(){},forceUpdate:function(){var t=this.configuration.enableThrottle;this.configuration.enableThrottle=!1,this._event(),this.configuration.enableThrottle=t},destroy:function(){t(this.configuration.appendScroll).unbind("scroll",this._event),t(this.configuration.appendScroll).unbind("resize",this._event),this._items={},this._event=function(){}}})}(jQuery,window,document);