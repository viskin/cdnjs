(function(){var t,n,e,r,i,o,s,a,u,l,f,h,c,p,g,m,d,y,v,b,w,x,M,S,k,T,F,H,q,R,z,I,j,A,G,X,Y,O,Z,C,V,D,E,L,W,$,B,N,U,J,K=function(t,n){return function(){return t.apply(n,arguments)}};T=function(){return"visible"===document.visibilityState||null!=M.tests},R=function(){var t;return t=[],"undefined"!=typeof document&&null!==document&&document.addEventListener("visibilitychange",function(){var n,e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(n(T()));return i}),function(n){return t.push(n)}}(),y=function(t){var n;return n={},function(){var e,r,i,o,s;for(r="",o=0,s=arguments.length;s>o;o++)e=arguments[o],r+=e.toString()+",";return i=n[r],i||(n[r]=i=t.apply(this,arguments)),i}},q=function(t){return function(n){var e,r,i;return n instanceof Array||n instanceof NodeList?i=function(){var i,o,s;for(s=[],r=i=0,o=n.length;o>=0?o>i:i>o;r=o>=0?++i:--i)e=Array.prototype.slice.call(arguments,1),e.splice(0,0,n[r]),s.push(t.apply(this,e));return s}.apply(this,arguments):t.apply(this,arguments)}},p=function(t,n){var e,r,i;i=[];for(e in n)r=n[e],i.push(null!=t[e]?t[e]:t[e]=r);return i},g=function(t,n){var e,r,i;if(null!=t.style)return m(t,n);i=[];for(e in n)r=n[e],i.push(t[e]=r.format());return i},m=function(t,n,e){var r,i,o,s,a,u;null==e&&(e=!1),n=z(n),o=[],r="undefined"!=typeof SVGElement&&null!==SVGElement&&"undefined"!=typeof SVGSVGElement&&null!==SVGSVGElement?t instanceof SVGElement&&!(t instanceof SVGSVGElement):null!=(a=null!=(u=M.tests)&&"function"==typeof u.isSVG?u.isSVG(t):void 0)?a:!1;for(i in n)s=n[i],N.contains(i)?o.push(U(i,s)):(s=null!=s.format?s.format():""+s+J(i,s),!e&&r&&E.contains(i)?t.setAttribute(i,s):t.style[j(i)]=s);return o.length>0?t.style[j("transform")]=o.join(" "):void 0},X=function(t,n){var e;return e=Math.pow(10,n),Math.round(t*e)/e},a=function(){function t(t){var n,e,r;for(this.obj={},e=0,r=t.length;r>e;e++)n=t[e],this.obj[n]=1}return t.prototype.contains=function(t){return 1===this.obj[t]},t}(),B=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},A=new a("marginTop,marginLeft,marginBottom,marginRight,paddingTop,paddingLeft,paddingBottom,paddingRight,top,left,bottom,right,translateX,translateY,translateZ,perspectiveX,perspectiveY,perspectiveZ,width,height,maxWidth,maxHeight,minWidth,minHeight,borderRadius".split(",")),x=new a("rotate,rotateX,rotateY,rotateZ,skew,skewX,skewY,skewZ".split(",")),N=new a("translateX,translateY,translateZ,scale,scaleX,scaleY,scaleZ,rotate,rotateX,rotateY,rotateZ,skew,skewX,skewY,skewZ,perspective".split(",")),E=new a("accent-height,ascent,azimuth,baseFrequency,baseline-shift,bias,cx,cy,d,diffuseConstant,divisor,dx,dy,elevation,filterRes,fx,fy,gradientTransform,height,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,letter-spacing,limitingConeAngle,markerHeight,markerWidth,numOctaves,order,overline-position,overline-thickness,pathLength,points,pointsAtX,pointsAtY,pointsAtZ,r,radius,rx,ry,seed,specularConstant,specularExponent,stdDeviation,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,surfaceScale,target,targetX,targetY,transform,underline-position,underline-thickness,viewBox,width,x,x1,x2,y,y1,y2,z".split(",")),J=function(t,n){return"number"!=typeof n?"":A.contains(t)?"px":x.contains(t)?"deg":""},U=function(t,n){var e,r;return e=(""+n).match(/^([0-9.-]*)([^0-9]*)$/),null!=e?(n=e[1],r=e[2]):n=parseFloat(n),n=X(parseFloat(n),10),(null==r||""===r)&&(r=J(t,n)),""+t+"("+n+r+")"},d=function(t){return"perspective"===t||"skew"===t?["X","Y"]:["X","Y","Z"]},z=function(t){var n,e,r,i,o,s,a,u;r={};for(i in t)if(o=t[i],N.contains(i))if(e=i.match(/(translate|rotate|skew|scale|perspective)(X|Y|Z|)/),e&&e[2].length>0)r[i]=o;else for(u=d(e[1]),s=0,a=u.length;a>s;s++)n=u[s],r[e[1]+n]=o;else r[i]=o;return r},w=function(t){var n;return n="opacity"===t?1:0,""+n+J(t,n)},S=function(t,n){var e,r,i,o,a,u,l,f;if(r={},null!=t.style)for(i=window.getComputedStyle(t,null),a=0,l=n.length;l>a;a++)e=n[a],N.contains(e)?null==r.transform&&(r.transform=s.fromTransform(i[j("transform")]).decompose()):(o=i[e],null==o&&E.contains(e)&&(o=t.getAttribute(e)),(""===o||null==o)&&(o=w(e)),r[e]=b(o));else for(u=0,f=n.length;f>u;u++)e=n[u],r[e]=b(t[e]);return r},b=function(t){var n,s,a,u,l;for(a=[r,e,i,o],u=0,l=a.length;l>u;u++)if(s=a[u],n=s.create(t),null!=n)return n;return null},i=function(){function t(t){this.format=K(this.format,this),this.interpolate=K(this.interpolate,this),this.obj=t}return t.prototype.interpolate=function(n,e){var r,i,o,s,a;s=this.obj,r=n.obj,o={};for(i in s)a=s[i],o[i]=null!=a.interpolate?a.interpolate(r[i],e):a;return new t(o)},t.prototype.format=function(){return this.obj},t.create=function(n){var e,r,i;if(n instanceof Object){r={};for(e in n)i=n[e],r[e]=b(i);return new t(r)}return null},t}(),o=function(){function t(t,n,e){this.prefix=n,this.suffix=e,this.format=K(this.format,this),this.interpolate=K(this.interpolate,this),this.value=parseFloat(t)}return t.prototype.interpolate=function(n,e){var r,i;return i=this.value,r=n.value,new t((r-i)*e+i,n.prefix||this.prefix,n.suffix||this.suffix)},t.prototype.format=function(){return null==this.prefix&&null==this.suffix?X(this.value,5):this.prefix+X(this.value,5)+this.suffix},t.create=function(n){var e;return"string"!=typeof n?new t(n):(e=(""+n).match("([^0-9.+-]*)([0-9.+-]+)([^0-9.+-]*)"),null!=e?new t(e[2],e[1],e[3]):null)},t}(),e=function(){function t(t,n){this.values=t,this.sep=n,this.format=K(this.format,this),this.interpolate=K(this.interpolate,this)}return t.prototype.interpolate=function(n,e){var r,i,o,s,a,u;for(s=this.values,r=n.values,o=[],i=a=0,u=Math.min(s.length,r.length);u>=0?u>a:a>u;i=u>=0?++a:--a)o.push(null!=s[i].interpolate?s[i].interpolate(r[i],e):s[i]);return new t(o,this.sep)},t.prototype.format=function(){var t;return t=this.values.map(function(t){return null!=t.format?t.format():t}),null!=this.sep?t.join(this.sep):t},t.createFromArray=function(n,e){var r;return r=n.map(function(t){return b(t)||t}),r=r.filter(function(t){return null!=t}),new t(r,e)},t.create=function(n){var e,r,i,o,s;if(n instanceof Array)return t.createFromArray(n,null);if("string"==typeof n){for(i=[" ",",","|",";","/",":"],o=0,s=i.length;s>o;o++)if(r=i[o],e=n.split(r),e.length>1)return t.createFromArray(e,r);return null}},t}(),t=function(){function t(t,n){this.rgb=null!=t?t:{},this.format=n,this.toRgba=K(this.toRgba,this),this.toRgb=K(this.toRgb,this),this.toHex=K(this.toHex,this)}return t.fromHex=function(n){var e,r;return e=n.match(/^#([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i),null!=e&&(n="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),r=n.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i),null!=r?new t({r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:1},"hex"):null},t.fromRgb=function(n){var e,r;return e=n.match(/^rgba?\(([0-9.]*), ?([0-9.]*), ?([0-9.]*)(?:, ?([0-9.]*))?\)$/),null!=e?new t({r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(null!=(r=e[4])?r:1)},null!=e[4]?"rgba":"rgb"):null},t.componentToHex=function(t){var n;return n=t.toString(16),1===n.length?"0"+n:n},t.prototype.toHex=function(){return"#"+t.componentToHex(this.rgb.r)+t.componentToHex(this.rgb.g)+t.componentToHex(this.rgb.b)},t.prototype.toRgb=function(){return"rgb("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+")"},t.prototype.toRgba=function(){return"rgba("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+", "+this.rgb.a+")"},t}(),r=function(){function n(t){this.color=t,this.format=K(this.format,this),this.interpolate=K(this.interpolate,this)}return n.prototype.interpolate=function(e,r){var i,o,s,a,u,l,f,h;for(a=this.color,i=e.color,s={},h=["r","g","b"],l=0,f=h.length;f>l;l++)o=h[l],u=Math.round((i.rgb[o]-a.rgb[o])*r+a.rgb[o]),s[o]=Math.min(255,Math.max(0,u));return o="a",u=X((i.rgb[o]-a.rgb[o])*r+a.rgb[o],5),s[o]=Math.min(1,Math.max(0,u)),new n(new t(s,i.format))},n.prototype.format=function(){return"hex"===this.color.format?this.color.toHex():"rgb"===this.color.format?this.color.toRgb():"rgba"===this.color.format?this.color.toRgba():void 0},n.create=function(e){var r;if("string"==typeof e)return r=t.fromHex(e)||t.fromRgb(e),null!=r?new n(r):null},n}(),u=function(){function t(t){this.els=t,this.combine=K(this.combine,this),this.normalize=K(this.normalize,this),this.length=K(this.length,this),this.cross=K(this.cross,this),this.dot=K(this.dot,this),this.e=K(this.e,this)}return t.prototype.e=function(t){return 1>t||t>this.els.length?null:this.els[t-1]},t.prototype.dot=function(t){var n,e,r;if(n=t.els||t,r=0,e=this.els.length,e!==n.length)return null;for(e+=1;--e;)r+=this.els[e-1]*n[e-1];return r},t.prototype.cross=function(n){var e,r;return r=n.els||n,3!==this.els.length||3!==r.length?null:(e=this.els,new t([e[1]*r[2]-e[2]*r[1],e[2]*r[0]-e[0]*r[2],e[0]*r[1]-e[1]*r[0]]))},t.prototype.length=function(){var t,n,e,r,i;for(t=0,i=this.els,e=0,r=i.length;r>e;e++)n=i[e],t+=Math.pow(n,2);return Math.sqrt(t)},t.prototype.normalize=function(){var n,e,r,i,o;r=this.length(),i=[],o=this.els;for(e in o)n=o[e],i[e]=n/r;return new t(i)},t.prototype.combine=function(n,e,r){var i,o,s;for(o=[],i=s=0;2>=s;i=++s)o[i]=e*this.els[i]+r*n.els[i];return new t(o)},t}(),n=function(){function t(){this.toMatrix=K(this.toMatrix,this),this.format=K(this.format,this),this.interpolate=K(this.interpolate,this)}return t.prototype.interpolate=function(n,e,r){var i,o,s,a,u,l,f,h,c,p,g,m,d,y,v,b,w,x;for(null==r&&(r=null),s=this,o=new t,w=["translate","scale","skew","perspective"],m=0,b=w.length;b>m;m++)for(f=w[m],o[f]=[],a=d=0,x=s[f].length-1;x>=0?x>=d:d>=x;a=x>=0?++d:--d)o[f][a]=null==r||r.indexOf(f)>-1||r.indexOf(""+f+["x","y","z"][a])>-1?(n[f][a]-s[f][a])*e+s[f][a]:s[f][a];if(null==r||-1!==r.indexOf("rotate")){if(h=s.quaternion,c=n.quaternion,i=h[0]*c[0]+h[1]*c[1]+h[2]*c[2]+h[3]*c[3],0>i){for(a=y=0;3>=y;a=++y)h[a]=-h[a];i=-i}for(i+1>.05?1-i>=.05?(g=Math.acos(i),l=1/Math.sin(g),p=Math.sin(g*(1-e))*l,u=Math.sin(g*e)*l):(p=1-e,u=e):(c[0]=-h[1],c[1]=h[0],c[2]=-h[3],c[3]=h[2],p=Math.sin(piDouble*(.5-e)),u=Math.sin(piDouble*e)),o.quaternion=[],a=v=0;3>=v;a=++v)o.quaternion[a]=h[a]*p+c[a]*u}else o.quaternion=s.quaternion;return o},t.prototype.format=function(){return this.toMatrix().toString()},t.prototype.toMatrix=function(){var t,n,e,r,i,o,a,u,l,f,h,c,p,g,m,d;for(t=this,i=s.I(4),n=p=0;3>=p;n=++p)i.els[n][3]=t.perspective[n];for(o=t.quaternion,f=o[0],h=o[1],c=o[2],l=o[3],a=t.skew,r=[[1,0],[2,0],[2,1]],n=g=2;g>=0;n=--g)a[n]&&(u=s.I(4),u.els[r[n][0]][r[n][1]]=a[n],i=i.multiply(u));for(i=i.multiply(new s([[1-2*(h*h+c*c),2*(f*h-c*l),2*(f*c+h*l),0],[2*(f*h+c*l),1-2*(f*f+c*c),2*(h*c-f*l),0],[2*(f*c-h*l),2*(h*c+f*l),1-2*(f*f+h*h),0],[0,0,0,1]])),n=m=0;2>=m;n=++m){for(e=d=0;2>=d;e=++d)i.els[n][e]*=t.scale[n];i.els[3][n]=t.translate[n]}return i},t}(),s=function(){function t(t){this.els=t,this.toString=K(this.toString,this),this.decompose=K(this.decompose,this),this.inverse=K(this.inverse,this),this.augment=K(this.augment,this),this.toRightTriangular=K(this.toRightTriangular,this),this.transpose=K(this.transpose,this),this.multiply=K(this.multiply,this),this.dup=K(this.dup,this),this.e=K(this.e,this)}return t.prototype.e=function(t,n){return 1>t||t>this.els.length||1>n||n>this.els[0].length?null:this.els[t-1][n-1]},t.prototype.dup=function(){return new t(this.els)},t.prototype.multiply=function(n){var e,r,i,o,s,a,u,l,f,h,c,p,g;for(p=n.modulus?!0:!1,e=n.els||n,"undefined"==typeof e[0][0]&&(e=new t(e).els),h=this.els.length,u=h,l=e[0].length,i=this.els[0].length,o=[],h+=1;--h;)for(s=u-h,o[s]=[],c=l,c+=1;--c;){for(a=l-c,g=0,f=i,f+=1;--f;)r=i-f,g+=this.els[s][r]*e[r][a];o[s][a]=g}return e=new t(o),p?e.col(1):e},t.prototype.transpose=function(){var n,e,r,i,o,s,a;for(a=this.els.length,n=this.els[0].length,e=[],o=n,o+=1;--o;)for(r=n-o,e[r]=[],s=a,s+=1;--s;)i=a-s,e[r][i]=this.els[i][r];return new t(e)},t.prototype.toRightTriangular=function(){var t,n,e,r,i,o,s,a,u,l,f,h,c,p;for(t=this.dup(),a=this.els.length,i=a,o=this.els[0].length;--a;){if(e=i-a,0===t.els[e][e])for(r=f=c=e+1;i>=c?i>f:f>i;r=i>=c?++f:--f)if(0!==t.els[r][e]){for(n=[],u=o,u+=1;--u;)l=o-u,n.push(t.els[e][l]+t.els[r][l]);t.els[e]=n;break}if(0!==t.els[e][e])for(r=h=p=e+1;i>=p?i>h:h>i;r=i>=p?++h:--h){for(s=t.els[r][e]/t.els[e][e],n=[],u=o,u+=1;--u;)l=o-u,n.push(e>=l?0:t.els[r][l]-t.els[e][l]*s);t.els[r]=n}}return t},t.prototype.augment=function(n){var e,r,i,o,s,a,u,l,f;if(e=n.els||n,"undefined"==typeof e[0][0]&&(e=new t(e).els),r=this.dup(),i=r.els[0].length,l=r.els.length,a=l,u=e[0].length,l!==e.length)return null;for(l+=1;--l;)for(o=a-l,f=u,f+=1;--f;)s=u-f,r.els[o][i+s]=e[o][s];return r},t.prototype.inverse=function(){var n,e,r,i,o,s,a,u,l,f,h,c,p;for(f=this.els.length,a=f,n=this.augment(t.I(f)).toRightTriangular(),u=n.els[0].length,o=[],f+=1;--f;){for(i=f-1,r=[],h=u,o[i]=[],e=n.els[i][i],h+=1;--h;)c=u-h,l=n.els[i][c]/e,r.push(l),c>=a&&o[i].push(l);for(n.els[i]=r,s=p=0;i>=0?i>p:p>i;s=i>=0?++p:--p){for(r=[],h=u,h+=1;--h;)c=u-h,r.push(n.els[s][c]-n.els[i][c]*n.els[s][i]);n.els[s]=r}}return new t(o)},t.I=function(n){var e,r,i,o,s;for(e=[],o=n,n+=1;--n;)for(r=o-n,e[r]=[],s=o,s+=1;--s;)i=o-s,e[r][i]=r===i?1:0;return new t(e)},t.prototype.decompose=function(){var t,e,r,i,o,s,a,l,f,h,c,p,g,m,d,y,v,b,w,x,M,S,k,T,F,H,q,R,z,I,j,A,G,X,Y,O,Z,C;for(s=this,x=[],v=[],b=[],h=[],l=[],t=[],e=z=0;3>=z;e=++z)for(t[e]=[],i=I=0;3>=I;i=++I)t[e][i]=s.els[e][i];if(0===t[3][3])return!1;for(e=j=0;3>=j;e=++j)for(i=A=0;3>=A;i=++A)t[e][i]/=t[3][3];for(f=s.dup(),e=G=0;2>=G;e=++G)f.els[e][3]=0;if(f.els[3][3]=1,0!==t[0][3]||0!==t[1][3]||0!==t[2][3]){for(p=new u(t.slice(0,4)[3]),r=f.inverse(),M=r.transpose(),l=M.multiply(p).els,e=X=0;2>=X;e=++X)t[e][3]=0;t[3][3]=1}else l=[0,0,0,1];for(e=Y=0;2>=Y;e=++Y)x[e]=t[3][e],t[3][e]=0;for(m=[],e=O=0;2>=O;e=++O)m[e]=new u(t[e].slice(0,3));if(v[0]=m[0].length(),m[0]=m[0].normalize(),b[0]=m[0].dot(m[1]),m[1]=m[1].combine(m[0],1,-b[0]),v[1]=m[1].length(),m[1]=m[1].normalize(),b[0]/=v[1],b[1]=m[0].dot(m[2]),m[2]=m[2].combine(m[0],1,-b[1]),b[2]=m[1].dot(m[2]),m[2]=m[2].combine(m[1],1,-b[2]),v[2]=m[2].length(),m[2]=m[2].normalize(),b[1]/=v[2],b[2]/=v[2],a=m[1].cross(m[2]),m[0].dot(a)<0)for(e=Z=0;2>=Z;e=++Z)for(v[e]*=-1,i=C=0;2>=C;i=++C)m[e].els[i]*=-1;d=function(t,n){return m[t].els[n]},g=[],g[1]=Math.asin(-d(0,2)),0!==Math.cos(g[1])?(g[0]=Math.atan2(d(1,2),d(2,2)),g[2]=Math.atan2(d(0,1),d(0,0))):(g[0]=Math.atan2(-d(2,0),d(1,1)),g[1]=0),w=d(0,0)+d(1,1)+d(2,2)+1,w>1e-4?(y=.5/Math.sqrt(w),F=.25/y,H=(d(2,1)-d(1,2))*y,q=(d(0,2)-d(2,0))*y,R=(d(1,0)-d(0,1))*y):d(0,0)>d(1,1)&&d(0,0)>d(2,2)?(y=2*Math.sqrt(1+d(0,0)-d(1,1)-d(2,2)),H=.25*y,q=(d(0,1)+d(1,0))/y,R=(d(0,2)+d(2,0))/y,F=(d(2,1)-d(1,2))/y):d(1,1)>d(2,2)?(y=2*Math.sqrt(1+d(1,1)-d(0,0)-d(2,2)),H=(d(0,1)+d(1,0))/y,q=.25*y,R=(d(1,2)+d(2,1))/y,F=(d(0,2)-d(2,0))/y):(y=2*Math.sqrt(1+d(2,2)-d(0,0)-d(1,1)),H=(d(0,2)+d(2,0))/y,q=(d(1,2)+d(2,1))/y,R=.25*y,F=(d(1,0)-d(0,1))/y),h=[H,q,R,F],c=new n,c.translate=x,c.scale=v,c.skew=b,c.quaternion=h,c.perspective=l,c.rotate=g;for(k in c){S=c[k];for(o in S)T=S[o],isNaN(T)&&(S[o]=0)}return c},t.prototype.toString=function(){var t,n,e,r,i;for(e="matrix3d(",t=r=0;3>=r;t=++r)for(n=i=0;3>=i;n=++i)e+=X(this.els[t][n],10),(3!==t||3!==n)&&(e+=",");return e+=")"},t.matrixForTransform=y(function(t){var n,e,r,i,o,s;return n=document.createElement("div"),n.style.position="absolute",n.style.visibility="hidden",n.style[j("transform")]=t,document.body.appendChild(n),r=window.getComputedStyle(n,null),e=null!=(i=null!=(o=r.transform)?o:r[j("transform")])?i:null!=(s=M.tests)?s.matrixForTransform(t):void 0,document.body.removeChild(n),e}),t.fromTransform=function(n){var e,r,i,o,s,a;for(o=null!=n?n.match(/matrix3?d?\(([-0-9,e \.]*)\)/):void 0,o?(e=o[1].split(","),e=e.map(parseFloat),r=6===e.length?[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]:e):r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=[],i=a=0;3>=a;i=++a)s.push(r.slice(4*i,4*i+4));return new t(s)},t}(),I=y(function(t){var n,e,r,i,o,s,a,u,l,f;if(void 0!==document.body.style[t])return"";for(i=t.split("-"),o="",s=0,u=i.length;u>s;s++)r=i[s],o+=r.substring(0,1).toUpperCase()+r.substring(1);for(f=["Webkit","Moz"],a=0,l=f.length;l>a;a++)if(e=f[a],n=e+o,void 0!==document.body.style[n])return e;return""}),j=y(function(t){var n;return n=I(t),"Moz"===n?""+n+(t.substring(0,1).toUpperCase()+t.substring(1)):""!==n?"-"+n.toLowerCase()+"-"+B(t):B(t)}),G="undefined"!=typeof window&&null!==window?window.requestAnimationFrame:void 0,h=[],c=[],null==G&&(F=0,G=function(t){var n,e,r;return n=Date.now(),r=Math.max(0,16-(n-F)),e=window.setTimeout(function(){return t(n+r)},r),F=n+r,e}),O=!1,Y=!1,D=function(){return O?void 0:(O=!0,G(Z))},Z=function(t){var n,e,r,i;if(Y)return void G(Z);for(e=[],r=0,i=h.length;i>r;r++)n=h[r],f(t,n)||e.push(n);return h=h.filter(function(t){return-1===e.indexOf(t)}),0===h.length?O=!1:G(Z)},f=function(t,n){var e,r,i,o,s,a,u,l;if(null==n.tStart&&(n.tStart=t),o=(t-n.tStart)/n.options.duration,s=n.curve(o),r={},o>=1)r=n.curve.initialForce?n.properties.start:n.properties.end;else{l=n.properties.start;for(e in l)i=l[e],r[e]=k(i,n.properties.end[e],s)}return g(n.el,r),"function"==typeof(a=n.options).change&&a.change(),o>=1&&"function"==typeof(u=n.options).complete&&u.complete(n.el),1>o},k=function(t,n,e){return null!=t&&null!=t.interpolate?t.interpolate(n,e):null},V=function(t,n,e){var r,i,a,u,l,f;M.stop(t),n=z(n),a=S(t,Object.keys(n)),r={},u=[];for(i in n)l=n[i],N.contains(i)?u.push(U(i,l)):(r[i]=b(l),r[i]instanceof o&&null!=t.style&&(r[i].prefix="",null==(f=r[i]).suffix&&(f.suffix=J(i,0))));return u.length>0&&(r.transform=s.fromTransform(s.matrixForTransform(u.join(" "))).decompose()),h.push({el:t,properties:{start:a,end:r},options:e,curve:e.type.call(e.type,e)}),D()},$=[],W=0,C=function(t){return T()?t.realTimeoutId=setTimeout(function(){return t.fn(),v(t.id)},t.delay):void 0},l=function(t,n){var e;return W+=1,e={id:W,tStart:Date.now(),fn:t,delay:n,originalDelay:n},C(e),$.push(e),W},v=function(t){return $=$.filter(function(n){return n.id===t&&clearTimeout(n.realTimeoutId),n.id!==t})},H=function(t,n){var e;return null!=t?(e=t-n.tStart,n.originalDelay-e):n.originalDelay},"undefined"!=typeof window&&null!==window&&window.addEventListener("unload",function(){}),L=null,R(function(t){var n,e,r,i,o,s,a,u,l,f;if(Y=!t,t){if(O)for(e=Date.now()-L,o=0,u=h.length;u>o;o++)n=h[o],null!=n.tStart&&(n.tStart+=e);for(s=0,l=$.length;l>s;s++)r=$[s],r.delay=H(L,r),C(r);return L=null}for(L=Date.now(),f=[],i=0,a=$.length;a>i;i++)r=$[i],f.push(clearTimeout(r.realTimeoutId));return f}),M={},M.linear=function(){return function(t){return t}},M.spring=function(t){var n,e,r,i,o,s;return null==t&&(t={}),p(t,arguments.callee.defaults),i=Math.max(1,t.frequency/20),o=Math.pow(20,t.friction/100),s=t.anticipationSize/1e3,r=Math.max(0,s),n=function(n){var e,r,i,o,a;return e=.8,o=s/(1-s),a=0,i=(o-e*a)/(o-a),r=(e-i)/o,r*n*t.anticipationStrength/100+i},e=function(t){return Math.pow(o/10,-t)*(1-t)},function(t){var r,o,a,u,l,f,h,c;return f=t/(1-s)-s/(1-s),s>t?(c=s/(1-s)-s/(1-s),h=0/(1-s)-s/(1-s),l=Math.acos(1/n(c)),a=(Math.acos(1/n(h))-l)/(i*-s),r=n):(r=e,l=0,a=1),o=r(f),u=i*(t-s)*a+l,1-o*Math.cos(u)}},M.bounce=function(t){var n,e,r,i;return null==t&&(t={}),p(t,arguments.callee.defaults),r=Math.max(1,t.frequency/20),i=Math.pow(20,t.friction/100),n=function(t){return Math.pow(i/10,-t)*(1-t)},e=function(t){var e,i,o,s;return s=-1.57,i=1,e=n(t),o=r*t*i+s,e*Math.cos(o)},e.initialForce=!0,e},M.gravity=function(t){var n,e,r,i,o,s,a;return null==t&&(t={}),p(t,arguments.callee.defaults),e=Math.min(t.bounciness/1250,.8),i=t.elasticity/1e3,a=100,r=[],n=function(){var r,i;for(r=Math.sqrt(2/a),i={a:-r,b:r,H:1},t.initialForce&&(i.a=0,i.b=2*i.b);i.H>.001;)n=i.b-i.a,i={a:i.b,b:i.b+n*e,H:i.H*e*e};return i.b}(),s=function(e,r,i,o){var s,a;return n=r-e,a=2/n*o-1-2*e/n,s=a*a*i-i+1,t.initialForce&&(s=1-s),s},function(){var o,s,u,l;for(s=Math.sqrt(2/(a*n*n)),u={a:-s,b:s,H:1},t.initialForce&&(u.a=0,u.b=2*u.b),r.push(u),o=n,l=[];u.b<1&&u.H>.001;)o=u.b-u.a,u={a:u.b,b:u.b+o*e,H:u.H*i},l.push(r.push(u));return l}(),o=function(n){var e,i,o;for(i=0,e=r[i];!(n>=e.a&&n<=e.b)&&(i+=1,e=r[i]););return o=e?s(e.a,e.b,e.H,n):t.initialForce?0:1},o.initialForce=t.initialForce,o},M.forceWithGravity=function(t){return null==t&&(t={}),p(t,arguments.callee.defaults),t.initialForce=!0,M.gravity(t)},M.bezier=function(){var t,n,e;return n=function(t,n,e,r,i){return Math.pow(1-t,3)*n+3*Math.pow(1-t,2)*t*e+3*(1-t)*Math.pow(t,2)*r+Math.pow(t,3)*i},t=function(t,e,r,i,o){return{x:n(t,e.x,r.x,i.x,o.x),y:n(t,e.y,r.y,i.y,o.y)}},e=function(t,n,e){var r,i,o,s,a,u,l,f,h,c;for(r=null,h=0,c=n.length;c>h&&(i=n[h],t>=i(0).x&&t<=i(1).x&&(r=i),null===r);h++);if(!r)return e?0:1;for(f=1e-4,s=0,u=1,a=(u+s)/2,l=r(a).x,o=0;Math.abs(t-l)>f&&100>o;)t>l?s=a:u=a,a=(u+s)/2,l=r(a).x,o+=1;return r(a).y},function(n){var r,i,o;return null==n&&(n={}),i=n.points,o=!1,r=function(){var n,e,o;r=[],o=function(n,e){var i;return i=function(r){return t(r,n,n.cp[n.cp.length-1],e.cp[0],e)},r.push(i)};for(n in i){if(e=parseInt(n),e>=i.length-1)break;o(i[e],i[e+1])}return r}(),function(t){return 0===t?0:1===t?1:e(t,r,o)}}}(),M.easeInOut=function(t){var n,e;return null==t&&(t={}),n=null!=(e=t.friction)?e:arguments.callee.defaults.friction,M.bezier({points:[{x:0,y:0,cp:[{x:.92-n/1e3,y:0}]},{x:1,y:1,cp:[{x:.08+n/1e3,y:1}]}]})},M.easeIn=function(t){var n,e;return null==t&&(t={}),n=null!=(e=t.friction)?e:arguments.callee.defaults.friction,M.bezier({points:[{x:0,y:0,cp:[{x:.92-n/1e3,y:0}]},{x:1,y:1,cp:[{x:1,y:1}]}]})},M.easeOut=function(t){var n,e;return null==t&&(t={}),n=null!=(e=t.friction)?e:arguments.callee.defaults.friction,M.bezier({points:[{x:0,y:0,cp:[{x:0,y:0}]},{x:1,y:1,cp:[{x:.08+n/1e3,y:1}]}]})},M.spring.defaults={frequency:300,friction:200,anticipationSize:0,anticipationStrength:0},M.bounce.defaults={frequency:300,friction:200},M.forceWithGravity.defaults=M.gravity.defaults={bounciness:400,elasticity:200},M.easeInOut.defaults=M.easeIn.defaults=M.easeOut.defaults={friction:500},M.css=q(function(t,n){return m(t,n,!0)}),M.animate=q(function(t,n,e){var r;return null==e&&(e={}),p(e,{type:M.easeInOut,duration:1e3,delay:0}),e.duration=Math.max(0,e.duration),e.delay=Math.max(0,e.delay),0===e.delay?V(t,n,e):(r=M.setTimeout(V.bind(this,t,n,e),e.delay),c.push({id:r,el:t}))}),M.stop=q(function(t){return c=c.filter(function(n){return n.el===t?(M.clearTimeout(n.id),!0):!1}),h=h.filter(function(n){return n.el!==t})}),M.setTimeout=function(t,n){return l(t,n)},M.clearTimeout=function(t){return v(t)},"object"==typeof module&&"object"==typeof module.exports?module.exports=M:"function"==typeof define&&define.amd?define(M):window.dynamics=M}).call(this);