/*!
 * jBone v0.0.11 - 2013-11-14 - Library for DOM manipulation
 *
 * https://github.com/kupriyanenko/jbone
 *
 * Copyright 2013 Alexey Kupriyanenko
 * Released under the MIT license.
 */

!function(a,b){function c(a,b){return this instanceof c?d.call(this,a,b):new c(a,b)}function d(a,b){var d;return a instanceof c?a:(Array.isArray(a)?d=a.map(function(a){return e(a,b)}):a&&(d=e(a,b)),d instanceof c?d:(d=Array.isArray(d)?d:[d],c.merge(this,d),b instanceof Object&&!c.isElement(b)&&this.attr(b),this))}function e(a,b){var d,e;return"string"==typeof a&&(d=f.exec(a))?document.createElement(d[1]):"string"==typeof a&&(d=g.exec(a))&&d[1]?(e=document.createElement("div"),e.innerHTML=a,[].slice.call(e.childNodes)):"string"==typeof a?c.isElement(b)?c(b).find(a):[].slice.call(document.querySelectorAll(a)):a}b["true"]=a;var f=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;c.setId=function(a){var b=a.jid||void 0;a===window?b="window":a.jid||(b=++c._cache.jid,a.jid=b),c._cache.events[b]||(c._cache.events[b]={})},c.getData=function(a){a=a instanceof c?a[0]:a;var b=a===window?"window":a.jid;return{jid:b,events:c._cache.events[b]}},c.isElement=function(a){return a instanceof c||a instanceof HTMLElement||"string"==typeof a},c.merge=function(a,b){var c=b.length,d=a.length,e=0;if("number"==typeof c)for(;c>e;)a[d++]=b[e],e++;else for(;void 0!==b[e];)a[d++]=b[e++];return a.length=d,a},c._cache={events:{},jid:0},c.fn=c.prototype=[],window.jBone=window.$=c,c.fn.on=function(a){var b,d,e,f,g,h,i;return 2===arguments.length?b=arguments[1]:(d=arguments[1],b=arguments[2]),this.forEach(function(j){c.setId(j),g=c.getData(j).events,a.split(" ").forEach(function(a){i=a.split(".")[0],e=a.split(".")[1],g[i]=g[i]?g[i]:[],f=function(a){a.namespace&&a.namespace!==e||(d?~c(j).find(d).indexOf(a.target)?b.call(j,a):(h=c(a.target).parents(c(j).find(d)))&&h.length&&h.trigger(i):b.call(j,a))},g[i].push({namespace:e,fn:f,originfn:b}),j.addEventListener&&j.addEventListener(i,f,!1)})}),this},c.fn.one=function(){var a,b,d=arguments[0];return 2===arguments.length?a=arguments[1]:(b=arguments[1],a=arguments[2]),this.forEach(function(e){d.split(" ").forEach(function(d){var f=function(b){a.call(e,b),c(e).off(d,f)};2===arguments.length?c(e).on(d,f):c(e).on(d,b,f)})}),this},c.fn.trigger=function(a){if(!a||!a.split(".")[0])return this;var b,c;return this.forEach(function(d){a.split(" ").forEach(function(a){b=a.split(".")[1],c=a.split(".")[0],"CustomEvent"in window?(a=document.createEvent("CustomEvent"),a.initCustomEvent(c,!0,!0,null)):(a=document.createEvent("Event"),a.initEvent(c,!0,!0)),a.namespace=b,d.dispatchEvent&&d.dispatchEvent(a)})}),this},c.fn.off=function(a,b){var d,e,f,g,h=function(a){return b&&a.originfn===b?a.fn:b?void 0:a.fn};return this.forEach(function(b){d=c.getData(b).events,d&&a.split(" ").forEach(function(a){g=a.split(".")[0],f=a.split(".")[1],d[g]?d[g].forEach(function(a){e=h(a),f?a.namespace===f&&b.removeEventListener(g,e):f||b.removeEventListener(g,e)}):f&&Object.keys(d).forEach(function(a){d[a].forEach(function(c){e=h(c),c.namespace===f&&b.removeEventListener(a,e)})})})}),this},c.fn.is=function(){var a=arguments;return this.some(function(b){return b.tagName.toLowerCase()===a[0]})},c.fn.has=function(){var a=arguments;return this.some(function(b){return b.querySelectorAll(a[0]).length})},c.fn.toArray=function(){return[].slice.call(this)},c.fn.attr=function(){var a=arguments;return"string"==typeof a[0]&&1===a.length?this[0].getAttribute(a[0]):("string"==typeof a[0]&&a.length>1?this.forEach(function(b){b.setAttribute(a[0],a[1])}):a[0]instanceof Object&&this.forEach(function(b){Object.keys(a[0]).forEach(function(c){b.setAttribute(c,a[0][c])})}),this)},c.fn.val=function(a){return void 0===a?this[0].value:(this.forEach(function(b){b.value=a}),this)},c.fn.css=function(){var a=arguments;return"string"==typeof a[0]&&2===a.length?this.forEach(function(b){b.style[a[0]]=a[1]}):a[0]instanceof Object&&this.forEach(function(b){Object.keys(a[0]).forEach(function(c){b.style[c]=a[0][c]})}),this},c.fn.find=function(a){var b=[];return this.forEach(function(c){[].forEach.call(c.querySelectorAll(a),function(a){b.push(a)})}),c(b)},c.fn.get=function(a){return this[a]},c.fn.eq=function(a){return c(this[a])},c.fn.html=function(){var a,b=arguments[0];return void 0!==b?(this.empty.call(this),this.append.call(this,b),this):(a=[],this.forEach(function(b){b instanceof HTMLElement&&a.push(b.innerHTML)}),a.length?a.join(""):null)},c.fn.append=function(a){return"string"==typeof a&&(a=c(a)),a instanceof c?this.forEach(function(b,c){a.forEach(function(a){c?b.appendChild(a.cloneNode()):b.appendChild(a)})}):(a instanceof HTMLElement||a instanceof DocumentFragment)&&this.forEach(function(b){b.appendChild(a)}),this},c.fn.appendTo=function(a){return c(a).append(this),this},c.fn.parent=function(){var a=[];return this.forEach(function(b){~a.indexOf(b.parentNode)||a.push(b.parentNode)}),c(a)},c.fn.parents=function(a){var b,d=[];return b=function(a,c){return a===c?d.push(a):(a.parentNode&&b(a.parentNode,c),void 0)},a instanceof HTMLElement&&(a=c(a)),this.forEach(function(c){a.forEach(function(a){b(c.parentNode,a)})}),c(d)},c.fn.empty=function(){return this.forEach(function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)}),this},c.fn.remove=function(){return this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),this}}({},function(){return this}());