L.Util.ajax=function(url,options,cb){"use strict";var XMHreq;if("function"==typeof options&&(cb=options,options={}),options.jsonp)return L.Util.ajax.jsonp(url,options,cb);XMHreq=void 0===window.XMLHttpRequest?function(){try{return new ActiveXObject("Microsoft.XMLHTTP.6.0")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP.3.0")}catch(b){throw new Error("XMLHttpRequest is not supported")}}}:window.XMLHttpRequest;var response,request=new XMHreq;return request.open("GET",url),request.onreadystatechange=function(){4===request.readyState&&200===request.status&&(response=window.JSON?JSON.parse(request.responseText):eval("("+request.responseText+")"),cb(response))},request.send(),request},L.Util.ajax.jsonp=function(a,b,c){var d,e,f,g=document.getElementsByTagName("head")[0],h=b.cbParam||"callback";b.callbackName?d=b.callbackName:(f="_"+(""+Math.random()).slice(2),d="L.Util.ajax.cb."+f);var i=L.DomUtil.create("script","",g);return i.type="text/javascript",f&&(L.Util.ajax.cb[f]=function(a){g.removeChild(i),delete L.Util.ajax.cb[f],c(a)}),e=-1===a.indexOf("?")?a+"?"+h+"="+d:a+"&"+h+"="+d,i.src=e,{abort:function(){return g.removeChild(i),delete L.Util.ajax.cb[f],!0}}},L.Util.ajax.cb={},L.GeoJSON.AJAX=L.GeoJSON.extend({defaultAJAXparams:{dataType:"json",callbackParam:"callback",middleware:function(a){return a}},initialize:function(a,b){this.urls=[],a&&("string"==typeof a?this.urls.push(a):"function"==typeof a.pop?this.urls=this.urls.concat(a):(b=a,a=void 0));var c=L.Util.extend({},this.defaultAJAXparams);for(var d in b)this.defaultAJAXparams.hasOwnProperty(d)&&(c[d]=b[d]);this.ajaxParams=c,this._layers={},L.Util.setOptions(this,b),this.on("dataLoadComplete",function(){this.filter&&this.refilter(this.filter)},this),this.urls.length>0&&this.addUrl()},clearLayers:function(){return this.urls=[],L.GeoJSON.prototype.clearLayers.call(this),this},addUrl:function(a){var b=this;a&&("string"==typeof a?b.urls.push(a):"function"==typeof a.pop&&(b.urls=b.urls.concat(a)));var c=b.urls.length,d=0;b.fire("beforeDataLoad"),b.urls.forEach(function(a){"json"===b.ajaxParams.dataType.toLowerCase()?L.Util.ajax(a,function(a){var c=b.ajaxParams.middleware(a);b.addData(c),b.fire("dataLoaded")}):"jsonp"===b.ajaxParams.dataType.toLowerCase()&&L.Util.ajax(a,{jsonp:!0},function(a){var c=b.ajaxParams.middleware(a);b.addData(c),b.fire("dataLoaded")},b.ajaxParams.callbackParam)}),b.on("dataLoaded",function(){++d===c&&b.fire("dataLoadComplete")})},refresh:function(a){a=a||this.urls,this.clearLayers(),this.addUrl(a)},refilter:function(a){"function"!=typeof a?(this.filter=!1,this.eachLayer(function(a){a.setStyle({stroke:!0,clickable:!0})})):(this.filter=a,this.eachLayer(function(b){a(b.feature)?b.setStyle({stroke:!0,clickable:!0}):b.setStyle({stroke:!1,clickable:!1})}))}}),L.geoJson.ajax=function(a,b){return new L.GeoJSON.AJAX(a,b)};