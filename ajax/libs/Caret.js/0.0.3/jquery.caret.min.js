(function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e,n,o,r,i,s;return s="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(t){return this.domInputor},e.prototype.getIEPosition=function(){return t.noop()},e.prototype.getPosition=function(){return t.noop()},e.prototype.getOldIEPos=function(){var t,e;return e=document.selection.createRange(),t=document.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?(t=n.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):document.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=document.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(t){var e,n,o,i;if(n=null,window.getSelection&&(o=this.range())){if(o.endOffset-1<0)return null;e=o.cloneRange(),e.setStart(o.endContainer,o.endOffset-1),e.setEnd(o.endContainer,o.endOffset),i=e.getBoundingClientRect(),n={height:i.height,left:i.left+i.width,top:i.top},e.detach()}else document.selection&&this.getOldIEOffset();return r.adjustOffset(n,this.$inputor)},e.prototype.range=function(){var t;if(window.getSelection)return t=window.getSelection(),t.rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function t(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var t,e,n,o,r,i,s;return e=this.domInputor,i=document.selection.createRange(),r=0,i&&i.parentElement()===e&&(o=e.value.replace(/\r\n/g,"\n"),n=o.length,s=e.createTextRange(),s.moveToBookmark(i.getBookmark()),t=e.createTextRange(),t.collapse(!1),r=s.compareEndPoints("StartToEnd",t)>-1?n:-s.moveStart("character",-n)),r},t.prototype.getPos=function(){return document.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(t){var e,n;return e=this.domInputor,document.selection?(n=e.createTextRange(),n.move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},t.prototype.getIEOffset=function(t){var e,n,o,r,i;return o=this.domInputor.createTextRange(),t?o.move("character",t):(n=document.selection.createRange(),o.moveToBookmark(n.getBookmark())),r=o.boundingLeft,i=o.boundingTop,e=o.boundingHeight,{left:r,top:i,height:e}},t.prototype.getOffset=function(t){var e,n,o;return e=this.$inputor,document.selection?r.adjustOffset(this.getIEOffset(t),e):(n=e.offset(),o=this.getPosition(t),n={left:n.left+o.left,top:n.top+o.top,height:o.height})},t.prototype.getPosition=function(t){var e,n,r,i,s,c;return e=this.$inputor,r=function(t){return t.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===t&&(t=this.getPos()),c=e.val().slice(0,t),i="<span>"+r(c)+"</span>",i+="<span id='caret'>|</span>",s=new o(e),n=s.create(i).rect()},t.prototype.getIEPosition=function(t){var e,n,o,r,i;return o=this.getIEOffset(t),n=this.$inputor.offset(),r=o.left-n.left,i=o.top-n.top,e=o.height,{left:r,top:i,height:e}},t}(),o=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},t.each(this.css_attr,function(t,o){return e[o]=n.$inputor.css(o)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return t=this.$mirror.find("#caret"),e=t.position(),n={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),r={adjustOffset:function(e,n){return e?(e.top+=t(window).scrollTop()+n.scrollTop(),e.left+=+t(window).scrollLeft()+n.scrollLeft(),e):void 0},contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},i={pos:function(t){return t?this.setPos(t):this.getPos()},position:function(t){return document.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){return this.getOffset(t)}},t.fn.caret=function(o){var s;return s=r.contentEditable(this)?new e(this):new n(this),i[o]?i[o].apply(s,Array.prototype.slice.call(arguments,1)):t.error("Method "+o+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=r,t.fn.caret.apis=i})}).call(this);
//# sourceMappingURL=./0.0.3/jquery.caret.min.js.map