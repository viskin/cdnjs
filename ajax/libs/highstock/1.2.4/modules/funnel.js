!function(){var t=Highcharts,e=(t.addEvent,t.getOptions()),o=e.plotOptions,r=t.seriesTypes,n=(t.map,t.merge),a=t.each;Math;o.funnel=n(o.pie,{width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",dataLabels:{connectorWidth:1,connectorColor:"#606060"}});var i=Highcharts.extendClass(r.pie,{type:"funnel",translate:function(){function t(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}var e,o,r,n,i,p,h,c,s,d,l=0,g=this,u=g.chart,f=u.plotWidth,k=u.plotHeight,w=0,y=g.options,L=y.center,W=t(L[0],f),b=(t(L[0],k),t(y.width,f)),v=t(y.height,k),H=t(y.neckWidth,f),A=t(y.neckHeight,k),C=v-A,T=g.data;g.getWidthAt=o=function(t){return t>v-A?H:H+(b-H)*((v-A-t)/(v-A))},g.centerX=W,a(T,function(t){l+=t.y}),a(T,function(t){d=null,fraction=l?t.y/l:0,i=w*v,c=i+fraction*v,e=o(i),n=W-e/2,p=n+e,e=o(c),h=W-e/2,s=h+e,i>C?(n=h=W-H/2,p=s=W+H/2):c>C&&(d=c,e=o(C),h=W-e/2,s=h+e,c=C),r=["M",n,i,"L",p,i,s,c],d&&r.push(s,d,h,d),r.push(h,c,"Z"),t.shapeType="path",t.shapeArgs=r,t.percentage=100*fraction,t.plotX=W,t.plotY=(i+(d||c))/2,t.tooltipPos=[W,t.plotY],w+=fraction}),g.setTooltipPoints()},drawPoints:function(t){var e=this,o=e.options,r=e.chart,n=r.renderer,i=(r.trackerRect,r.plotLeft),p=r.plotTop;a(e.data,function(t){t.group||(t.group=n.g("point").add(e.group).translate(i,p),t.graphic=n.path(t.shapeArgs).attr({fill:t.color,stroke:o.borderColor,"stroke-width":o.borderWidth}).add(t.group))})},drawDataLabels:function(){var e=this,o=e.options.dataLabels,r=o.connectorWidth;t.Series.prototype.drawDataLabels.apply(e),a(e.data,function(t){var n=t.dataLabel.getBBox(),a=n.y+n.height/2+r/2%1;t.connector=e.chart.renderer.path(["M",n.x+n.width+5,a,"L",e.centerX-e.getWidthAt(a)/2-5,a]).attr({"stroke-width":r,stroke:o.connectorColor}).add(t.group)})}});r.funnel=i}();