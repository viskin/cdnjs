/*
 TechanJS v0.3.1
 (c) 2014 - 2014 Andre Dumas | https://github.com/andredumas/techan.js
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.techan=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";b.exports="0.3.1"},{}],2:[function(a,b){"use strict";b.exports=function(){return{ohlc:a("./ohlc"),volume:a("./volume"),macd:a("./macd"),rsi:a("./rsi"),trendline:a("./trendline"),value:a("./value")}}},{"./macd":3,"./ohlc":4,"./rsi":5,"./trendline":6,"./value":7,"./volume":8}],3:[function(a,b){"use strict";b.exports=function(){function a(b){return a.m(b)}function b(){return a.d=c,a.m=d,a.s=f,a.dif=g,a.z=e,a}var c=function(a){return a.date},d=function(a){return a.macd},e=function(a){return a.zero},f=function(a){return a.signal},g=function(a){return a.difference};return a.date=function(a){return arguments.length?(c=a,b()):c},a.macd=function(a){return arguments.length?(d=a,b()):d},a.signal=function(a){return arguments.length?(f=a,b()):f},a.difference=function(a){return arguments.length?(g=a,b()):g},b()}},{}],4:[function(a,b){"use strict";b.exports=function(){function a(b){return a.c(b)}function b(){return a.d=c,a.o=d,a.h=e,a.l=f,a.c=g,a.v=h,a}var c=function(a){return a.date},d=function(a){return a.open},e=function(a){return a.high},f=function(a){return a.low},g=function(a){return a.close},h=function(a){return a.volume};return a.date=function(a){return arguments.length?(c=a,b()):c},a.open=function(a){return arguments.length?(d=a,b()):d},a.high=function(a){return arguments.length?(e=a,b()):e},a.low=function(a){return arguments.length?(f=a,b()):f},a.close=function(a){return arguments.length?(g=a,b()):g},a.volume=function(a){return arguments.length?(h=a,b()):h},b()}},{}],5:[function(a,b){"use strict";b.exports=function(){function a(b){return a.r(b)}function b(){return a.d=c,a.r=d,a.ob=e,a.os=f,a.m=g,a}var c=function(a){return a.date},d=function(a){return a.rsi},e=function(a){return a.overbought},f=function(a){return a.oversold},g=function(a){return a.middle};return a.date=function(a){return arguments.length?(c=a,b()):c},a.rsi=function(a){return arguments.length?(d=a,b()):d},a.overbought=function(a){return arguments.length?(e=a,b()):e},a.oversold=function(a){return arguments.length?(f=a,b()):f},a.middle=function(a){return arguments.length?(g=a,b()):g},b()}},{}],6:[function(a,b){"use strict";b.exports=function(){function a(b){return a.sv(b)}function b(){return a.sd=c,a.sv=d,a.ed=e,a.ev=f,a}var c=function(a,b){return arguments.length<2?a.start.date:void(a.start.date=b)},d=function(a,b){return arguments.length<2?a.start.value:void(a.start.value=b)},e=function(a,b){return arguments.length<2?a.end.date:void(a.end.date=b)},f=function(a,b){return arguments.length<2?a.end.value:void(a.end.value=b)};return a.startDate=function(a){return arguments.length?(c=a,b()):c},a.startValue=function(a){return arguments.length?(d=a,b()):d},a.endDate=function(a){return arguments.length?(e=a,b()):e},a.endValue=function(a){return arguments.length?(f=a,b()):f},b()}},{}],7:[function(a,b){"use strict";b.exports=function(){function a(b){return a.v(b)}function b(){return a.d=c,a.v=d,a.z=e,a}var c=function(a){return a.date},d=function(a,b){return arguments.length<2?a.value:void(a.value=b)},e=function(a){return a.zero};return a.date=function(a){return arguments.length?(c=a,b()):c},a.value=function(a){return arguments.length?(d=a,b()):d},a.zero=function(a){return arguments.length?(e=a,b()):e},b()}},{}],8:[function(a,b){"use strict";b.exports=function(){function a(b){return a.v(b)}function b(){return a.d=c,a.v=d,a}var c=function(a){return a.date},d=function(a){return a.volume};return a.date=function(a){return arguments.length?(c=a,b()):c},a.volume=function(a){return arguments.length?(d=a,b()):d},b()}},{}],9:[function(a,b){"use strict";b.exports=function(a,b,c){return function(){function d(a){return d.init(),a.map(e).filter(function(a){return a.value})}function e(a,b){var c=d.average(j.accessor(a));return k>b+1&&(c=null),{date:j.accessor.d(a),value:c}}var f,g,h,i,j={},k=10;return d.init=function(){return f=null,g=c(k),h=0,i=0,d},d.average=function(a){return k>i?(h+=a)/++i:(i===k&&(f=h/i++),f+=g*(a-f))},d.period=function(a){return arguments.length?(k=a,d):k},a(d,j,b()),d}}},{}],10:[function(a,b){"use strict";function c(a){return 2/(a+1)}function d(a){return 1/a}b.exports=function(){var b=a("./indicatormixin")(),e=a("../accessor")(),f=a("./ema"),g=f(b,e.ohlc,c);return{ema:g,macd:a("./macd")(b,e.ohlc,g),rsi:a("./rsi")(b,e.ohlc,g),sma:a("./sma")(b,e.ohlc),wilderma:f(b,e.ohlc,d)}}},{"../accessor":2,"./ema":9,"./indicatormixin":11,"./macd":12,"./rsi":13,"./sma":14}],11:[function(a,b){"use strict";b.exports=function(){return function(a,b,c){function d(){return b.accessor=c,a}a.accessor=function(a){return arguments.length?(c=a,d()):c},d()}}},{}],12:[function(a,b){"use strict";function c(a,b,c,d,e){return b?{date:a,macd:b,signal:c,difference:d,zero:e}:{date:a,macd:null,signal:null,difference:null,zero:null}}b.exports=function(a,b,d){return function(){function e(a){var b=Math.max(g,h)-1,j=b+i-1,k=d().accessor(e.accessor()).period(i).init(),l=d().accessor(e.accessor()).period(g).init(),m=d().accessor(e.accessor()).period(h).init();return a.map(function(a,d){h=l.average(f.accessor(a)),g=m.average(f.accessor(a));var e=h-g,i=d>=b?k.average(e):null;return d>=j?c(f.accessor.d(a),e,i,e-i,0):c(f.accessor.d(a))}).filter(function(a){return a.macd})}var f={},g=12,h=26,i=9;return e.fast=function(a){return arguments.length?(g=a,e):g},e.slow=function(a){return arguments.length?(h=a,e):h},e.signal=function(a){return arguments.length?(i=a,e):i},a(e,f,b()),e}}},{}],13:[function(a,b){"use strict";function c(a,b,c,d,e){return b?{date:a,rsi:b,middle:c,overbought:d,oversold:e}:{date:a,rsi:null,middle:null,overbought:null,oversold:null}}b.exports=function(a,b,d){return function(){function e(a){var b=d().accessor(e.accessor()).period(g).init(),k=d().accessor(e.accessor()).period(g).init();return a.map(function(d,e){if(1>e)return c(f.accessor.d(d));var l=f.accessor(d)-f.accessor(a[e-1]),m=k.average(Math.max(l,0)),n=Math.abs(b.average(Math.min(l,0)));if(e>=g){var o=100-100/(1+m/n);return c(f.accessor.d(d),o,i,h,j)}return c(f.accessor.d(d))}).filter(function(a){return a.rsi})}var f={},g=14,h=70,i=50,j=30;return e.period=function(a){return arguments.length?(g=a,e):g},e.overbought=function(a){return arguments.length?(h=a,e):h},e.middle=function(a){return arguments.length?(i=a,e):i},e.oversold=function(a){return arguments.length?(j=a,e):j},a(e,f,b()),e}}},{}],14:[function(a,b){"use strict";b.exports=function(a,b){return function(){function c(a){return c.init(),a.map(d).filter(function(a){return a.value})}function d(a,b){var d=c.average(h.accessor(a));return i>b+1&&(d=null),{date:h.accessor.d(a),value:d}}var e,f,g,h={},i=10;return c.init=function(){return g=0,e=[],f=0,c},c.average=function(a){return g+=a,e.length+1<i?(e.push(a),g/++f):(e.length<i&&(e.push(a),g+=a),g-=e[f],e[f]=a,++f===i&&(f=0),g/i)},c.period=function(a){return arguments.length?(i=a,c):i},a(c,h,b()),c}}},{}],15:[function(a,b){"use strict";function c(a,b,c,f,i,j,k,l){var m="left"===c.orient()||"top"===c.orient()?-1:1,n=a.select("g.translate"),o=b.groupSelect(n,d(c.scale()));o.entry.append("path"),o.entry.append("text"),n.attr("transform","translate("+l[0]+","+l[1]+")"),o.selection.selectAll("path").attr("d",h(c,i,j,k,m)),o.selection.selectAll("text").text(g(f)).call(e,c,m)}function d(a){return function(b){var c=a.range(),d=c[0],e=c[c.length-1];return c=e>d?[d,e]:[e,d],b.filter(function(b){if(!b.value)return!1;var d=a(b.value);return d&&!isNaN(d)&&c[0]<=d&&d<=c[1]})}}function e(a,b,c){var d=b.scale();switch(b.orient()){case"left":case"right":a.attr({x:c*(Math.max(b.innerTickSize(),0)+b.tickPadding()),y:f(d),dy:".32em"}).style("text-anchor",0>c?"end":"start");break;case"top":case"bottom":a.attr({x:f(d),y:c*(Math.max(b.innerTickSize(),0)+b.tickPadding()),dy:0>c?"0em":".72em"}).style("text-anchor","middle")}}function f(a){return function(b){return a(b.value)}}function g(a){return function(b){return a(b.value)}}function h(a,b,c,d,e){return function(f){var g=a.scale(),h=g(f.value),i=d;switch(a.orient()){case"left":case"right":var j=0;return d>b/2?i=b/2:j=b/2-d,["M",0,h,"l",e*a.innerTickSize(),-i,"l",0,-j,"l",e*c,0,"l",0,b,"l",e*-c,0,"l",0,-j].join(" ");case"top":case"bottom":var k=0;return d>c/2?i=c/2:k=c/2-d,["M",h,0,"l",-i,e*a.innerTickSize(),"l",-k,0,"l",0,e*b,"l",c,0,"l",0,e*-b,"l",-k,0].join(" ");default:throw"Unsupported axis.orient() = "+a.orient()}}}b.exports=function(a,b){return function(){function d(a){a.selectAll("g.translate").data(b.dataMapper.array).enter().append("g").attr("class","translate"),d.refresh(a)}var e,f=a(),g=4,h=14,i=50,j=[0,0];return d.refresh=function(a){var d=e?e:f.tickFormat()?f.tickFormat():f.scale().tickFormat();c(a,b,f,d,h,i,g,j)},d.axis=function(a){return arguments.length?(f=a,d):f},d.format=function(a){return arguments.length?(e=a,d):e},d.height=function(a){return arguments.length?(h=a,d):h},d.width=function(a){return arguments.length?(i=a,d):i},d.translate=function(a){return arguments.length?(j=a,d):j},d}}},{}],16:[function(a,b){"use strict";function c(a,b,c,f,g){a.selectAll("path.candle.body").attr("d",d(c,f,g)).classed(b.classedUpDown(c)),a.selectAll("path.candle.wick").attr("d",e(c,f,g)).classed(b.classedUpDown(c))}function d(a,b,c){return function(d){var e=[],f=c(a.o(d)),g=c(a.c(d)),h=b.band(),i=b(a.d(d))-h/2;return e.push("M",i,f,"l",h,0),f!=g&&e.push("L",i+h,g,"l",-h,0,"L",i,f),e.join(" ")}}function e(a,b,c){return function(d){var e=[],f=c(a.o(d)),g=c(a.c(d)),h=b.band(),i=b(a.d(d)),j=i-h/2;return e.push("M",i,c(a.h(d)),"L",i,Math.min(f,g)),f==g&&e.push("M",j,f,"l",h,0),e.push("M",i,Math.max(f,g),"L",i,c(a.l(d))),e.join(" ")}}function f(a,b,c,d){var e=a.selectAll("g.data"),f=b().domain(c(e.data().map(d).filter(function(a){return!isNaN(a)}))).range([.2,1]);e.selectAll("path.candle").style("opacity",function(a){var b=d(a);return isNaN(b)?null:f(b)})}b.exports=function(a,b,d,e,g){return function(){function h(a){var b=e.groupSelect(a,e.dataMapper.unity,i.accessor.d);b.entry.append("path").attr("class","candle body"),b.entry.append("path").attr("class","candle wick"),h.refresh(a)}var i={},j=!1;return h.refresh=function(d){j&&f(d,a,b,i.accessor.v),c(d,e,i.accessor,i.xScale,i.yScale)},h.volumeOpacity=function(a){return arguments.length?(j=a,h):j},g(h,i,d()),h}}},{}],17:[function(a,b){"use strict";function c(a,b){a.select("g.data.top").style("display",b)}function d(a,b,c,d,f,g,i,j,k,l,m){var n=[new Array(d.length),new Array(f.length)];return function(){var o=b(this),p=d[0].axis().scale(),q=f[0].axis().scale();e(a,d,f,g.datum(p.invert(o[0])),i.datum(q.invert(o[1])),j.each(h(d,o[0],n[0])),k.each(h(f,o[1],n[1])),l,m),c.move(n)}}function e(a,b,c,d,e,h,i,k,l){var m=b[0].axis().scale(),n=c[0].axis().scale();d.attr("d",g(m,k||n.range())),e.attr("d",f(n,l||m.range())),h.each(j(a,b)),i.each(j(a,c))}function f(a,b){return function(c){if(!c)return"M 0 0";var d=a(c);return["M",b[0],d,"L",b[b.length-1],d].join(" ")}}function g(a,b){return function(c){if(!c)return"M 0 0";var d=a(c);return["M",d,b[0],"L",d,b[b.length-1]].join(" ")}}function h(a,b,c){return function(d,e){c[e]=a[e].axis().scale().invert(b),d[0].value=c[e]}}function i(a,b,c,d){var e=a.append("g").attr("class","axisannotation "+c).selectAll("g").data(d.map(function(){return[{value:null}]}));e.enter().append("g").attr("class",function(a,b){return b}).each(function(a,c){d[c](b(this))})}function j(a,b){return function(c,d){b[d].refresh(a(this))}}b.exports=function(a,b,f,g,h,j){return function(){function b(c){var d=c.selectAll("g.data.top").data([p],function(a){return a}),e=d.enter(),f=e.append("g").attr("class","data top").style("display","none");d.exit().remove(),f.append("path").attr("class","horizontal wire"),f.append("path").attr("class","vertical wire"),i(f,a,"x",n),i(f,a,"y",o),c.selectAll("rect").data([0]).enter().append("rect").style({fill:"none","pointer-events":"all"}),b.refresh(c)}var k,l,m=g("enter","out","move"),n=[h()],o=[h()],p=0;return b.refresh=function(b){var g=n[0].axis().scale().range(),h=o[0].axis().scale().range(),i=b.selectAll("g.data"),j=b.selectAll("rect"),p=i.selectAll("path.vertical"),q=i.selectAll("path.horizontal"),r=i.selectAll("g.axisannotation.x > g"),s=i.selectAll("g.axisannotation.y > g");j.attr({x:Math.min(g[0],g[g.length-1]),y:Math.min(h[0],h[h.length-1]),height:Math.abs(h[h.length-1]-h[0]),width:Math.abs(g[g.length-1]-g[0])}).on("mouseenter",function(){c(b,"inline"),m.enter()}).on("mouseout",function(){c(b,"none"),m.out()}).on("mousemove",d(a,f,m,n,o,p,q,r,s,k,l)),e(a,n,o,p,q,r,s,k,l)},b.xAnnotation=function(a){return arguments.length?(n=a instanceof Array?a:[a],p++,b):n},b.yAnnotation=function(a){return arguments.length?(o=a instanceof Array?a:[a],p++,b):o},b.verticalWireRange=function(a){return arguments.length?(k=a,b):k},b.horizontalWireRange=function(a){return arguments.length?(l=a,b):l},j.on(b,m),b}}},{}],18:[function(a,b){"use strict";function c(){return d3.event}b.exports=function(b){var d=a("../scale")(b),e=a("../accessor")(),f=a("./plot")(b.svg.line,b.select),g=a("./plotmixin")(b.scale.linear,d.financetime),h=a("./line"),i=a("./axisannotation")(b.svg.axis,f);return{axisannotation:i,candlestick:a("./candlestick")(b.scale.linear,b.extent,e.ohlc,f,g),crosshair:a("./crosshair")(b.select,c,b.mouse,b.dispatch,i,g),ema:h(e.value,f,g),ohlc:a("./ohlc")(b.scale.linear,b.extent,e.ohlc,f,g),close:h(e.ohlc,f,g),volume:a("./volume")(e.volume,f,g),rsi:a("./rsi")(e.rsi,f,g),macd:a("./macd")(e.macd,f,g),momentum:h(e.value,f,g,!0),moneyflow:h(e.value,f,g,!0),sma:h(e.value,f,g),supstance:a("./supstance")(b.behavior.drag,c,b.select,b.dispatch,e.value,f,g),trendline:a("./trendline")(b.behavior.drag,c,b.select,b.dispatch,e.trendline,f,g),wilderma:h(e.value,f,g)}}},{"../accessor":2,"../scale":29,"./axisannotation":15,"./candlestick":16,"./crosshair":17,"./line":19,"./macd":20,"./ohlc":21,"./plot":22,"./plotmixin":23,"./rsi":24,"./supstance":25,"./trendline":26,"./volume":27}],19:[function(a,b){"use strict";function c(a,b,c,d,e,f){a.selectAll("path.line").attr("d",e.pathLine(b.d,c,b,d)),f&&a.selectAll("path.zero").attr("d",e.horizontalPathLine(c,b.z,d))}b.exports=function(a,b,d,e){return e=e||!1,function(){function f(a){var c=b.groupSelect(a,b.dataMapper.array);c.entry.append("path").attr("class","line"),e&&c.selection.append("path").attr("class","zero"),f.refresh(a)}var g={};return f.refresh=function(a){c(a,g.accessor,g.xScale,g.yScale,b,e)},d(f,g,a()),f}}},{}],20:[function(a,b){"use strict";function c(a,b,c,e,f){a.selectAll("path.difference").attr("d",d(b,c,e)),a.selectAll("path.zero").attr("d",f.horizontalPathLine(b.d,c,b.z,e)),a.selectAll("path.macd").attr("d",f.pathLine(b.d,c,b.m,e)),a.selectAll("path.signal").attr("d",f.pathLine(b.d,c,b.s,e))}function d(a,b,c){return function(d){var e=c(0),f=c(a.dif(d))-e,g=b.band(),h=b(a.d(d))-g/2;return["M",h,e,"l",0,f,"l",g,0,"l",0,-f].join(" ")}}b.exports=function(a,b,d){return function(){function e(a){var c=b.groupSelect(a,b.dataMapper.array,f.accessor.d),d=c.selection.append("g").attr("class","difference").selectAll("g.difference").data(function(a){return a});d.exit().remove(),d.enter().append("path").attr("class","difference"),c.selection.append("path").attr("class","zero"),c.selection.append("path").attr("class","macd"),c.selection.append("path").attr("class","signal"),e.refresh(a)}var f={};return e.refresh=function(a){c(a,f.accessor,f.xScale,f.yScale,b)},d(e,f,a()),e}}},{}],21:[function(a,b){"use strict";function c(a,b,c,e,f){a.selectAll("path.ohlc").attr({d:d(c,e,f)}).classed(b.classedUpDown(c))}function d(a,b,c){return function(d){var e=c(a.o(d)),f=c(a.c(d)),g=b.band(),h=b(a.d(d)),i=h-g/2;return["M",i,e,"l",g/2,0,"M",h,c(a.h(d)),"L",h,c(a.l(d)),"M",h,f,"l",g/2,0].join(" ")}}b.exports=function(a,b,d,e,f){return function(){function a(c){e.groupSelect(c,e.dataMapper.unity,b.accessor.d).entry.append("path").attr({"class":"ohlc"}),a.refresh(c)}var b={};return a.refresh=function(a){c(a,e,b.accessor,b.xScale,b.yScale)},f(a,b,d()),a}}},{}],22:[function(a,b){"use strict";b.exports=function(a,b){function c(a,b,c){var d=a.selectAll("g.data").data(b,c);return d.exit().remove(),d}function d(a){return a.enter().append("g").attr("class","data")}return{dataMapper:{unity:function(a){return a},array:function(a){return[a]}},dataSelection:c,dataEntry:d,groupSelect:function(a,b,e){var f=c(a,b,e),g=d(f);return{selection:f,entry:g}},classedUpDown:function(a){return{up:function(b){return a.o(b)<a.c(b)},down:function(b){return a.o(b)>a.c(b)}}},horizontalPathLine:function(a,b,c,d){return function(e){var f=e[0],g=e[e.length-1];return["M",b(a(f)),d(c(f)),"L",b(a(g)),d(c(g))].join(" ")}},pathLine:function(b,c,d,e){return a().interpolate("monotone").x(function(a){return c(b(a))}).y(function(a){return e(d(a))})},interaction:{mousedispatch:function(a){return function(c){return c.on("mouseenter",function(c){b(this.parentNode).classed("mouseover",!0),a.mouseenter(c)}).on("mouseleave",function(c){var d=b(this.parentNode);d.classed("dragging")||(d.classed("mouseover",!1),a.mouseout(c))}).on("mousemove",function(b){a.mousemove(b)})}},dragStartEndDispatch:function(a,c){return a.on("dragstart",function(a){b(this.parentNode.parentNode).classed("dragging",!0),c.dragstart(a)}).on("dragend",function(a){b(this.parentNode.parentNode).classed("dragging",!1),c.dragend(a)})}}}}},{}],23:[function(a,b){"use strict";b.exports=function(a,b){function c(d,e,f){function g(){return e.xScale=h,e.yScale=i,e.accessor=f,d}var h=b(),i=a();return d.accessor=function(a){return arguments.length?(f=a,g()):f},d.xScale=function(a){return arguments.length?(h=a,g()):h},d.yScale=function(a){return arguments.length?(i=a,g()):i},g(),c}return c.on=function(a,b){return a.on=function(c,d){return b.on(c,d),a},c},c}},{}],24:[function(a,b){"use strict";function c(a,b,c,d,e){a.selectAll("path.overbought").attr("d",e.horizontalPathLine(b.d,c,b.ob,d)),a.selectAll("path.middle").attr("d",e.horizontalPathLine(b.d,c,b.m,d)),a.selectAll("path.oversold").attr("d",e.horizontalPathLine(b.d,c,b.os,d)),a.selectAll("path.rsi").attr("d",e.pathLine(b.d,c,b.r,d))}b.exports=function(a,b,d){return function(){function e(a){var c=b.groupSelect(a,b.dataMapper.array,f.accessor.d);c.entry.append("path").attr("class","overbought"),c.entry.append("path").attr("class","middle"),c.entry.append("path").attr("class","oversold"),c.entry.append("path").attr("class","rsi"),e.refresh(a)}var f={};return e.refresh=function(a){c(a,f.accessor,f.xScale,f.yScale,b)},d(e,f,a()),e}}},{}],25:[function(a,b){"use strict";function c(a,b,c,e){a.selectAll(".supstance path").attr("d",d(b,c,e)),a.selectAll(".interaction path").attr("d",d(b,c,e))}function d(a,b,c){return function(d){var e=[],f=b.range();return e.push("M",f[0],c(a.v(d))),e.push("L",f[f.length-1],c(a.v(d))),e.join(" ")}}b.exports=function(a,b,d,e,f,g,h){function i(){function a(b){var c=g.groupSelect(b,g.dataMapper.unity);c.entry.append("g").attr("class","supstance").append("path");var e=c.entry.append("g").attr("class","interaction").style({opacity:0,fill:"none"}).call(g.interaction.mousedispatch(d));e.append("path").style("stroke-width",16),a.refresh(b)}var b={},d=e("mouseenter","mouseout","mousemove","drag","dragstart","dragend");return a.refresh=function(a){c(a,b.accessor,b.xScale,b.yScale)},a.drag=function(a){a.selectAll(".interaction path").call(j(d,b.accessor,b.xScale,b.yScale))},h(a,b,f()).on(a,d),a}function j(e,f,h,i){var j=a().origin(function(a){return{x:0,y:i(f.v(a))}}).on("drag",function(a){f.v(a,i.invert(b().y)),c(d(this.parentNode.parentNode),f,h,i),e.drag(a)});return g.interaction.dragStartEndDispatch(j,e)}return i}},{}],26:[function(a,b){"use strict";function c(a,b,c,f){a.selectAll(".trendline path.body").attr("d",d(b,c,f)),a.selectAll(".trendline circle.start").attr(e(b.sd,c,b.sv,f)),a.selectAll(".trendline circle.end").attr(e(b.ed,c,b.ev,f)),a.selectAll(".interaction path.body").attr("d",d(b,c,f)),a.selectAll(".interaction circle.start").attr(e(b.sd,c,b.sv,f)),a.selectAll(".interaction circle.end").attr(e(b.ed,c,b.ev,f))}function d(a,b,c){return function(d){var e=[];return e.push("M",b(a.sd(d)),c(a.sv(d))),e.push("L",b(a.ed(d)),c(a.ev(d))),e.join(" ")}}function e(a,b,c,d){return{cx:function(c){return b(a(c))},cy:function(a){return d(c(a))}}}b.exports=function(a,b,d,e,f,g,h){function i(){function a(b){var c=g.groupSelect(b,g.dataMapper.unity),e=c.entry.append("g").attr("class","trendline");e.append("path").attr("class","body"),e.append("circle").attr({"class":"start",r:1}),e.append("circle").attr({"class":"end",r:1});var f=c.entry.append("g").attr("class","interaction").style({opacity:0,fill:"none"}).call(g.interaction.mousedispatch(d));f.append("path").attr("class","body").style("stroke-width",16),f.append("circle").attr({"class":"start",r:8}),f.append("circle").attr({"class":"end",r:8}),a.refresh(b)}var b={},d=e("mouseenter","mouseout","mousemove","drag","dragstart","dragend");return a.refresh=function(a){c(a,b.accessor,b.xScale,b.yScale)},a.drag=function(a){a.selectAll(".interaction circle.start").call(j(d,b.accessor,b.accessor.sd,b.xScale,b.accessor.sv,b.yScale)),a.selectAll(".interaction circle.end").call(j(d,b.accessor,b.accessor.ed,b.xScale,b.accessor.ev,b.yScale)),a.selectAll(".interaction path.body").call(k(d,b.accessor,b.xScale,b.yScale))},h(a,b,f()).on(a,d),a}function j(e,f,h,i,j,k){var m=a();return m.origin(function(a){return{x:i(h(a)),y:k(j(a))}}).on("drag",function(a){l(h,i,b().x,j,k,b().y,a),c(d(this.parentNode.parentNode),f,i,k),e.drag(a)}),g.interaction.dragStartEndDispatch(m,e)}function k(e,f,h,i){var j={},k=a();return k.origin(function(a){return j.start={date:h(f.sd(a)),value:i(f.sv(a))},j.end={date:h(f.ed(a)),value:i(f.ev(a))},{x:0,y:0}}).on("drag",function(a){l(f.sd,h,b().x+j.start.date,f.sv,i,b().y+j.start.value,a),l(f.ed,h,b().x+j.end.date,f.ev,i,b().y+j.end.value,a),c(d(this.parentNode.parentNode),f,h,i),e.drag(a)}),g.interaction.dragStartEndDispatch(k,e)}function l(a,b,c,d,e,f,g){var h=b.invert(c);h&&a(g,h),d(g,e.invert(f))}return i}},{}],27:[function(a,b){"use strict";function c(a,b,c,e){a.selectAll("path.volume").attr("d",d(b,c,e))}function d(a,b,c){return function(d){var e=a.v(d);if(isNaN(e))return null;var f=c(0),g=c(e)-f,h=b.band(),i=b(a.d(d))-h/2;return["M",i,f,"l",0,g,"l",h,0,"l",0,-g].join(" ")}}b.exports=function(a,b,d){return function(){function e(a){var c=b.groupSelect(a,b.dataMapper.unity,f.accessor.d).entry.append("path").attr("class","volume");f.accessor.o&&f.accessor.c&&c.classed(b.classedUpDown(f.accessor)),e.refresh(a)}var f={};return e.refresh=function(a){c(a,f.accessor,f.xScale,f.yScale)},d(e,f,a()),e}}},{}],28:[function(a,b){"use strict";b.exports=function(a,b,c,d,e,f){function g(b,m,n,o){function p(a){var d=u[+a];return void 0===d&&(d=m[0]>a?-1:c(m,a)),b(d)}function q(){return w=h(b,m,n),p}function r(){u=j(m)}function t(){return r(),b.domain([0,m.length-1]),q(),b.domain(b.range().map(e(o,w)).map(b.invert)),q()}var u,v={tickFormat:s[s.length-1][2]},w=3;return b=b||a(),m=m||[new Date(0),new Date(1)],n=void 0===n?.2:n,o=void 0===o?.65:o,p.invert=function(a){var b=p.invertToIndex(a);return null===b?null:m[b]},p.invertToIndex=function(a){var c=Math.round(b.invert(a));return m[c]?Math.abs(c):null},p.domain=function(a){if(!arguments.length){var c=b.domain();return c=[Math.ceil(c[0]),Math.floor(c[c.length-1])],m.slice(c[0],c[c.length-1]+1)}return m=a,t()},p.copy=function(){return g(b.copy(),m,n,o)},p.band=function(){return w},p.outerPadding=function(a){return arguments.length?(o=a,t()):o},p.padding=function(a){return arguments.length?(n=a,t()):n},p.zoomable=function(){return f(b,q)},p.ticks=function(a,b){var c=p.domain();if(!c.length)return[];var d=void 0===a?i(c,10):"number"==typeof a?i(c,a):null;v.tickFormat=d?d[2]:i(c,10)[2],d&&(a=d[0],b=d[1]);var e=a.range(c[0],+c[c.length-1]+1,b);return e.map(k(c)).reduce(l,[])},p.tickFormat=function(){return function(a){return v.tickFormat(a)}},d(p,b,q,"range","interpolate","clamp","nice"),r(),q()}function h(a,b,c){return Math.abs(a(b.length-1)-a(0))/Math.max(1,b.length-1)*(1-c)}function i(a,b){if(1==a.length)return p;var d=(a[a.length-1]-a[0])/q<1,e=d?u:s,f=d?t:r,g=(a[a.length-1]-a[0])/b,h=c(f,g);return h?e[g/f[h-1]<f[h]/g?h-1:h]:e[h]}function j(a){var b={};return a.forEach(function(a,c){b[+a]=c}),b}function k(a){var b=j(a);return function(d){var e=b[+d];return void 0!==e?a[e]:a[c(a,d)]}}function l(a,b){return(0===a.length||a[a.length-1]!==b)&&a.push(b),a}var m=b.format("%b %e"),n=b.format.multi([["%b %Y",function(a){return a.getMonth()}],["%Y",function(){return!0}]]),o=b.format.multi([[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}]]),p=[b.second,1,b.format.multi([[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%b %e",function(){return!0}]])],q=864e5,r=[q,6048e5,2592e6,7776e6,31536e6],s=[[b.day,1,m],[b.monday,1,m],[b.month,1,n],[b.month,3,n],[b.year,1,n]],t=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5],u=[[b.second,1,o],[b.second,5,o],[b.second,15,o],[b.second,30,o],[b.minute,1,o],[b.minute,5,o],[b.minute,15,o],[b.minute,30,o],[b.hour,1,o],[b.hour,3,o],[b.hour,6,o],[b.hour,12,o],[b.day,1,m]];return g}},{}],29:[function(a,b){"use strict";function c(a,b,c,d){return b.length>0?a.extent(b,c).map(e(d)):null}function d(a,b,d,e){return a.scale.linear().domain(c(a,b,d,e)).range([1,0])}function e(a,b){return a=a||0,function(c,d,e){if(e.length>2)throw"array.length > 2 unsupported. array.length = "+e.length;return b=b||e[e.length-1]-e[0],c+(2*d-1)*b*a}}b.exports=function(b){var c=a("./zoomable")(),f=a("../util")(),g=a("../accessor")(),h=a("./financetime")(b.scale.linear,b.time,b.bisect,f.rebindCallback,e,c);return{financetime:h,analysis:{supstance:function(){return b.scale.linear()},trendline:function(){return b.scale.linear()}},plot:{time:function(a,b){return b=b||g.value(),h().domain(a.map(b.d))},percent:function(a,b){var c=a.domain();return b=b||c[0],a.copy().domain([c[0],c[c.length-1]].map(function(a){return(a-b)/b}))},ohlc:function(a,c){return c=c||g.ohlc(),b.scale.linear().domain([b.min(a.map(c.low())),b.max(a.map(c.high()))].map(e(.02))).range([1,0])},volume:function(a,c){return c=c||g.ohlc().v,b.scale.linear().domain([0,1.15*b.max(a.map(c))]).range([1,0])},rsi:function(){return b.scale.linear().domain([0,100]).range([1,0])},momentum:function(a,c){return c=c||g.value(),d(b,a,c,.04)},moneyflow:function(a,c){return c=c||g.value(),d(b,a,c,.04)},macd:function(a,c){return c=c||g.macd(),d(b,a,c,.04)},movingaverage:function(a,c){return c=c||g.value(),d(b,a,c)}},position:{}}}},{"../accessor":2,"../util":32,"./financetime":28,"./zoomable":30}],30:[function(a,b){"use strict";b.exports=function(){function a(b,c){var d={},e=b.domain();return d.invert=b.invert,d.domain=function(a){if(!arguments.length)throw"zoomable is a write only domain. Use this scale for zooming only";return b.domain([Math.max(e[0],a[0]),Math.min(e[1],a[1])]),c&&c(),d},d.range=function(){if(!arguments.length)return b.range();throw"zoomable is a read only range. Use this scale for zooming only"},d.copy=function(){return a(b.copy(),c)},d}return a}},{}],31:[function(a,b){"use strict";b.exports=function(b){return{version:a("../build/version"),accessor:a("./accessor")(),indicator:a("./indicator")(),plot:a("./plot")(b),scale:a("./scale")(b)}}(d3)},{"../build/version":1,"./accessor":2,"./indicator":10,"./plot":18,"./scale":29}],32:[function(a,b){"use strict";function c(a,b,c){for(var e,f=2,g=arguments.length;++f<g;)a[e=arguments[f]]=d(a,b,b[e],c);return a}function d(a,b,c,d){return function(){var e=c.apply(b,arguments);return d&&e===b&&d(),e===b?a:e}}b.exports=function(){return{rebindCallback:c,rebind:function(){var a=Array.prototype.slice.call(arguments,0);return a.splice(2,0,void 0),c.apply(this,a)}}}},{}]},{},[31])(31)});
//# sourceMappingURL=techan.min.js.map