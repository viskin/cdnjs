(function(a){a.fn.extend({maxlength:function(o,m){var h=a("body"),c={alwaysShow:false,threshold:10,warningClass:"badge badge-success",limitReachedClass:"badge badge-important",separator:" / ",preText:"",postText:"",placement:"bottom",validate:false};if(a.isFunction(o)&&!m){m=o;o={}}o=a.extend(c,o);function d(p){var s=p.val(),r=s.match(/\n/g),q=r?r.length:0;return p.val().length+q}function g(q,s,r){var p=false;if(!o.alwaysShow&&(r-d(q)>s)){p=true}return p}function i(p,q){var r=q-d(p);return r}function f(p){p.css({display:"block"})}function k(p){p.css({display:"none"})}function l(q,r){var p="";if(o.preText){p+=o.preText}p=p+r+o.separator+q;if(o.postText){p+=o.postText}return p}function e(q,p,r,s){s.html(l(r,q));if(q>0){if(g(p,o.threshold,r)){f(s.removeClass(o.limitReachedClass).addClass(o.warningClass))}else{k(s)}}else{f(s.removeClass(o.warningClass).addClass(o.limitReachedClass))}}function n(p){var q=p[0];return a.extend({},(typeof q.getBoundingClientRect==="function")?q.getBoundingClientRect():{width:q.offsetWidth,height:q.offsetHeight},p.offset())}function b(p,t){var w=n(p),u=p.offset(),s=p.outerWidth(),r=t.outerWidth(),q=t.width(),v=t.height();switch(o.placement){case"bottom":t.css({top:u.top+w.height,left:u.left+w.width/2-q/2});break;case"top":t.css({top:w.top-v,left:w.left+w.width/2-q/2});break;case"left":t.css({top:w.top+w.height/2-v/2,left:w.left-q});break;case"right":t.css({top:w.top+w.height/2-v/2,left:w.left+w.width});break;case"bottom-right":t.css({top:w.top+w.height,left:w.left+w.width});break;case"top-right":t.css({top:u.top-v,left:u.left+s});break;case"top-left":t.css({top:u.top-v,left:u.left-r});break;case"bottom-left":t.css({top:u.top+p.outerHeight(),left:u.left-r});break;case"centered-right":t.css({top:u.top+(v/2),left:u.left+s-r-3});break}}function j(p){return p.attr("maxlength")||p.attr("size")}return this.each(function(){var p=a(this),q=j(p),r=a("<span></span>").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:999}).html(l(q,"0"));h.append(r);p.focus(function(){var s=i(p,q=j(p));r.css({zIndex:99999});e(s,p,q,r);b(p,r)});p.blur(function(){r.css("display","none")});p.keyup(function(){var t=i(p,q=j(p)),s=true;if(o.validate&&t<0){s=false}else{e(t,p,q,r)}return s});p.keydown(function(t){var s=i(p,q=j(p));if(s<=0&&(t.keyCode!==46&&t.keyCode!==8)){return false}})})}})}(jQuery));