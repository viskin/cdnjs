(function(a){a.fn.extend({maxlength:function(n,l){var h=a("body"),c={alwaysShow:false,threshold:10,warningClass:"badge badge-success",limitReachedClass:"badge badge-important",separator:" / ",preText:"",postText:"",placement:"bottom",validate:false};if(a.isFunction(n)&&!l){l=n;n={}}n=a.extend(c,n);function g(o,q,p){if(n.alwaysShow){return true}else{if((p-d(o))<=q){return true}else{return false}}}function d(o){return o.val().length}function i(o,p){var q=p-d(o);return q}function f(o){o.css({display:"block"})}function j(o){o.css({display:"none"})}function e(p,o,q,r){r.html(k(q,p));if(p){if(g(o,n.threshold,q)){f(r.removeClass(n.limitReachedClass).addClass(n.warningClass))}else{j(r)}}else{f(r.removeClass(n.warningClass).addClass(n.limitReachedClass))}}function k(p,q){var o="";if(n.preText){o+=n.preText}o=o+q+n.separator+p;if(n.postText){o+=n.postText}return o}function m(o){var p=o[0];return a.extend({},(typeof p.getBoundingClientRect=="function")?p.getBoundingClientRect():{width:p.offsetWidth,height:p.offsetHeight},o.offset())}function b(o,s){var v=m(o),t=o.offset(),r=o.outerWidth(),q=s.outerWidth(),p=s.width(),u=s.height();switch(n.placement){case"bottom":s.css({top:t.top+v.height,left:t.left+v.width/2-p/2});break;case"top":s.css({top:v.top-u,left:v.left+v.width/2-p/2});break;case"left":s.css({top:v.top+v.height/2-u/2,left:v.left-p});break;case"right":s.css({top:v.top+v.height/2-u/2,left:v.left+v.width});break;case"bottom-right":s.css({top:v.top+v.height,left:v.left+v.width});break;case"top-right":s.css({top:t.top-u,left:t.left+r});break;case"top-left":s.css({top:t.top-u,left:t.left-q});break;case"bottom-left":s.css({top:t.top+o.outerHeight(),left:t.left-q});break;case"centered-right":s.css({top:t.top+(u/2),left:t.left+r-q-3});break}}return this.each(function(){var o=a(this),p=o.attr("maxlength")||o.attr("size"),q=a("<span></span>").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:999}).html(k(p,"0"));h.append(q);o.focus(function(){var r=i(o,p);q.css({zIndex:99999});e(r,o,p,q);b(o,q)});o.blur(function(){q.css("display","none")});o.keyup(function(){var r=i(o,p);if(n.validate&&r<0){return false}else{e(r,o,p,q)}})})}})})(jQuery);