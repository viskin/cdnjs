function Matrix(){}PureCSSMatrix=function(){function d(a){a&&a!==null&&a!="none"?a instanceof Matrix?this.setMatrix(a):this.setMatrixValue(a):this.m=Matrix.I(3)}function e(b){var c=parseFloat(f(b));return b.match(a)&&(c=2*Math.PI*c/360),c}function f(a){return a.match(b)}function g(a){return Number(a).toFixed(6)}"use strict";var a=/deg$/,b=/([0-9.\-e]+)/g,c=/([a-zA-Z]+)\(([^\)]+)\)/g;return d.prototype.setMatrix=function(a){this.m=a},d.prototype.setMatrixValue=function(a){var b=Matrix.I(3),d;while((d=c.exec(a))!==null){var g=d[1].toLowerCase(),h=d[2].split(","),i;if(g=="matrix")i=Matrix.create([[parseFloat(h[0]),parseFloat(h[2]),parseFloat(f(h[4]))],[parseFloat(h[1]),parseFloat(h[3]),parseFloat(f(h[5]))],[0,0,1]]);else if(g=="translate")i=Matrix.I(3),i.elements[0][2]=parseFloat(f(h[0])),i.elements[1][2]=parseFloat(f(h[1]));else if(g=="scale"){var j=parseFloat(h[0]),k;h.length>1?k=parseFloat(h[1]):k=j,i=Matrix.create([[j,0,0],[0,k,0],[0,0,1]])}else g=="rotate"?i=Matrix.RotationZ(e(h[0])):g=="skew"||g=="skewx"?(i=Matrix.I(3),i.elements[0][1]=Math.tan(e(h[0]))):g=="skewy"?(i=Matrix.I(3),i.elements[1][0]=Math.tan(e(h[0]))):console.log("Problem with setMatrixValue",g,h);b=b.multiply(i)}this.m=b},d.prototype.multiply=function(a){return new d(this.m.multiply(a.m))},d.prototype.inverse=function(){return Math.abs(this.m.elements[0][0])<1e-6&&(this.m.elements[0][0]=0),new d(this.m.inverse())},d.prototype.translate=function(a,b){var c=Matrix.I(3);return c.elements[0][2]=a,c.elements[1][2]=b,new d(this.m.multiply(c))},d.prototype.scale=function(a,b){var c=Matrix.create([[a,0,0],[0,b,0],[0,0,1]]);return new d(this.m.multiply(c))},d.prototype.rotate=function(a){var b=Matrix.RotationZ(a);return new d(this.m.multiply(b))},d.prototype.toString=function(){var a=this.m.elements,b="";if($.browser.mozilla||$.browser.opera)b="px";return"matrix("+g(a[0][0])+", "+g(a[1][0])+", "+g(a[0][1])+", "+g(a[1][1])+", "+g(a[0][2])+b+", "+g(a[1][2])+b+")"},d.prototype.elements=function(){var a=this.m.elements;return{a:a[0][0],b:a[1][0],c:a[0][1],d:a[1][1],e:a[0][2],f:a[1][2]}},d}(),$.zoomooz||($.zoomooz={}),$.zoomooz.helpers=function(a,b){"use strict";var c=["-moz-","-webkit-","-o-","-ms-"];return b.forEachPrefix=function(a,b){for(var d=0;d<c.length;d++)a(c[d]);b&&a("")},b.getElementTransform=function(c){var d;return b.forEachPrefix(function(b){d=d||a(c).css(b+"transform")},!0),d},b}(jQuery,{}),function(a){function j(a,b,c){var d={};g.forEachPrefix(function(b){d[b+"transform"]=a},!0);if(b){var e=w(b/1e3,6)+"s";d["-webkit-transition-duration"]=e,d["-o-transition-duration"]=e}if(c){var f=o(c);d["-webkit-transition-timing-function"]=f,d["-o-transition-timing-function"]=f}return d}function k(a,d,e,f,g){d||(d=m(new PureCSSMatrix)),b=(new Date).getTime(),c&&(clearInterval(c),c=null),f.easing&&(f.easingfunction=p(f.easing,f.duration)),c=setInterval(function(){l(a,d,e,f,g)},1)}function l(a,d,e,f,g){var h=(new Date).getTime()-b,i;f.easingfunction?i=f.easingfunction(h/f.duration):i=h/f.duration,a.css(j(n(v(d,e,i)))),h>f.duration&&(clearInterval(c),c=null,i=1,g&&g())}function m(a){var b=a.elements(),c=b.a,d=b.b,e=b.c,f=b.d,g=b.e,h=b.f;if(Math.abs(c*f-d*e)<.01){console.log("fail!");return}var i=g,j=h,k=Math.sqrt(c*c+d*d);c/=k,d/=k;var l=c*e+d*f;e-=c*l,f-=d*l;var m=Math.sqrt(e*e+f*f);e/=m,f/=m,l/=m,c*f-d*e<0&&(c=-c,d=-d,e=-e,f=-f,k=-k,m=-m);var n=Math.atan2(d,c);return{tx:i,ty:j,r:n,k:Math.atan(l),sx:k,sy:m}}function n(a){var b="";return b+="translate("+w(a.tx,6)+"px,"+w(a.ty,6)+"px) ",b+="rotate("+w(a.r,6)+"rad) skewX("+w(a.k,6)+"rad) ",b+="scale("+w(a.sx,6)+","+w(a.sy,6)+")",b}function o(a){return a instanceof Array?"cubic-bezier("+w(a[0],6)+","+w(a[1],6)+","+w(a[2],6)+","+w(a[3],6)+")":a}function p(a,b){var c=[];if(a instanceof Array)c=a;else switch(a){case"linear":c=[0,0,1,1];break;case"ease":c=[.25,.1,.25,1];break;case"ease-in":c=[.42,0,1,1];break;case"ease-out":c=[0,0,.58,1];break;case"ease-in-out":c=[.42,0,.58,1]}var d=function(a){return r(a,c[0],c[1],c[2],c[3],b)};return d}function q(a,b,c,d,e){var f,g,h=(1-a)*(1-a)*(1-a);return f=b*3*a*a*(1-a)+d*3*a*(1-a)*(1-a)+h,g=c*3*a*a*(1-a)+e*3*a*(1-a)*(1-a)+h,{x:Math.abs(f),y:Math.abs(g)}}function r(a,b,c,d,e,f){function m(a){return((g*a+h)*a+i)*a}function n(a){return((j*a+k)*a+l)*a}function o(a){return(3*g*a+2*h)*a+i}function p(a){return 1/(200*a)}function q(a,b){return n(r(a,b))}function r(a,b){function i(a){return a>=0?a:0-a}var c,d,e,f,g,h;for(e=a,h=0;h<8;h++){f=m(e)-a;if(i(f)<b)return e;g=o(e);if(i(g)<1e-6)break;e-=f/g}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=m(e);if(i(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)*.5+c}return e}var g=0,h=0,i=0,j=0,k=0,l=0;return i=3*b,h=3*(d-b)-i,g=1-i-h,l=3*c,k=3*(e-c)-l,j=1-l-k,q(a,p(f))}function s(a){var b=g.getElementTransform(a),c;b?c=new PureCSSMatrix(b):c=new PureCSSMatrix;var d=m(c);return d.r=t(b),d}function t(a){var b=0,c;while((c=e.exec(a))!==null){var d=c[1].toLowerCase(),g=c[2].split(",");if(d=="matrix"){var h=d+"("+c[2]+")";b+=m(new PureCSSMatrix(h)).r}else if(d=="rotate"){var i=g[0],j=parseFloat(x(i));i.match(f)&&(j=2*Math.PI*j/360),b+=j}}return b}function u(a,b){if(Math.abs(a.r-b.r)>Math.PI)if(b.r<a.r)while(Math.abs(a.r-b.r)>Math.PI)b.r+=2*Math.PI;else while(Math.abs(a.r-b.r)>Math.PI)b.r-=2*Math.PI;return b}function v(a,b,c){var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=a[e]+(b[e]-a[e])*c);return d}function w(a,b){b=Math.abs(parseInt(b,10))||0;var c=Math.pow(10,b);return Math.round(a*c)/c}function x(a){return a.match(d)}"use strict";var b,c,d=/([0-9.\-e]+)/g,e=/([a-z]+)\(([^\)]+)\)/g,f=/deg$/,g=a.zoomooz.helpers,h={duration:1e3,easing:"ease",nativeanimation:!1},i;jQuery.cssHooks.MsTransform={set:function(a,b){a.style.msTransform=b}},jQuery.cssHooks.MsTransformOrigin={set:function(a,b){a.style.msTransformOrigin=b}},a.fn.animateTransformation=function(b,c,d){c=jQuery.extend({},h,c),this.each(function(){var e=a(this);b||(b=new PureCSSMatrix);var f=s(e),g=u(f,m(b));a.browser.webkit&&c.nativeanimation?(e.css(j(n(g),c.duration,c.easing)),d&&(i=setTimeout(d,c.duration))):k(e,f,g,c,d),i&&(clearTimeout(i),i=null)})},a.fn.setTransformation=function(b){this.each(function(){var c=a(this),d=s(c),e=u(d,m(b));c.css(j(n(e)))})}}(jQuery),function(a){function d(){var a=document.createElement("style");a.type="text/css";var b=function(a){var b="";return c.forEachPrefix(function(c){b+=c+"transform-origin: "+a+" "+a+";"}),b};a.innerHTML="html,body {margin:0;padding:0;width:100%;height:100%;} .noScroll {overflow:hidden !important;}* {"+b("0")+"} body {"+b("50%")+"}",document.getElementsByTagName("head")[0].appendChild(a)}function e(){return{targetsize:.9,scalemode:"both",duration:1e3,root:a(document.body),debug:!1}}function f(b,c){var d=g(b,c),e,f=null;b[0]!==c.root[0]?e=h(b,l(b,c.root).inverse(),c):(e=(new PureCSSMatrix).translate(-d.x,-d.y),f=function(){a(c.root).setTransformation(new PureCSSMatrix);var b=d.elem;console.log("resetting to",d),b.removeClass("noScroll"),b.scrollLeft(d.x),b.scrollTop(d.y)}),a(c.root).animateTransformation(e,c,f)}function g(a,b){var d=b.root,e=d.parent();if(a[0]===d[0]){var f=d.data("original-scroll");return f?(d.data("original-scroll",null),f):{elem:e,x:0,"y:":0}}if(!e.hasClass("noScroll")){var g=d.scrollTop(),h=d.scrollLeft(),a=d;g||(g=e.scrollTop(),h=e.scrollLeft(),a=e);var f={elem:a,x:h,y:g};d.data("original-scroll",f),a.addClass("noScroll"),a.scrollTop(0),a.scrollLeft(0);var i="translate(-"+h+"px,-"+g+"px)";return c.forEachPrefix(function(a){d.css(a+"transform",i)}),f}}function h(b,d,e){var f=e.targetsize,g=e.scalemode,h=e.root,i=a(h).width(),j=a(h).height(),k=i/b.outerWidth(),l=j/b.outerHeight(),n;if(g=="width")n=f*k;else if(g=="height")n=f*l;else{if(g!="both"){console.log("wrong zoommode");return}n=f*Math.min(k,l)}var o=(i-b.outerWidth()*n)/2,p=(j-b.outerHeight()*n)/2,q=i/2,r=j/2,s=m(q)+"px "+m(r)+"px";c.forEachPrefix(function(a){h.css(a+"transform-origin",s)});var t=(new PureCSSMatrix).translate(-q,-r).translate(o,p).scale(n,n).multiply(d).translate(q,r);return t}function i(a,b,c){return[a.a*b+a.c*c+a.e,a.b*b+a.d*c+a.f]}function j(a,b){var c=l(a,b.root).elements();k(i(c,0,0)),k(i(c,0,a.outerHeight())),k(i(c,a.outerWidth(),a.outerHeight())),k(i(c,a.outerWidth(),0))}function k(b){var c="width:4px;height:4px;background-color:red;position:absolute;margin-left:-2px;margin-top:-2px;";c+="left:"+b[0]+"px;top:"+b[1]+"px;";var d='<div class="debuglabel" style="'+c+'"></div>';a("#debug").append(d)}function l(a,b){var c=a[0];if(!c||!c.ownerDocument)return null;var d=new PureCSSMatrix,e;if(c===c.ownerDocument.body){var f=jQuery.offset.bodyOffset(c);return e=new PureCSSMatrix,e=e.translate(f.left,f.top),d=d.multiply(e),d}var g;jQuery.offset.initialize?(jQuery.offset.initialize(),g={fixedPosition:jQuery.offset.supportsFixedPosition,doesNotAddBorder:jQuery.offset.doesNotAddBorder,doesAddBorderForTableAndCells:jQuery.support.doesAddBorderForTableAndCells,subtractsBorderForOverflowNotVisible:jQuery.offset.subtractsBorderForOverflowNotVisible}):g=jQuery.support;var h=c.offsetParent,i=c.ownerDocument,j,k=i.documentElement,l=i.body,m=b[0],o=i.defaultView,p;o?p=o.getComputedStyle(c,null):p=c.currentStyle;var q=c.offsetTop,r=c.offsetLeft,s=n().translate(r,q);s=s.multiply(n(c)),d=s.multiply(d);while((c=c.parentNode)&&c!==l&&c!==k&&c!==m){q=0,r=0;if(g.fixedPosition&&p.position==="fixed")break;j=o?o.getComputedStyle(c,null):c.currentStyle,q-=c.scrollTop,r-=c.scrollLeft,c===h&&(q+=c.offsetTop,r+=c.offsetLeft,g.doesNotAddBorder&&(!g.doesAddBorderForTableAndCells||!/^t(able|d|h)$/i.test(c.nodeName))&&(q+=parseFloat(j.borderTopWidth)||0,r+=parseFloat(j.borderLeftWidth)||0),h=c.offsetParent),g.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"&&(q+=parseFloat(j.borderTopWidth)||0,r+=parseFloat(j.borderLeftWidth)||0),p=j,s=n().translate(r,q),s=s.multiply(n(c)),d=s.multiply(d)}q=0,r=0;if(p.position==="relative"||p.position==="static")q+=l.offsetTop,r+=l.offsetLeft;g.fixedPosition&&p.position==="fixed"&&(q+=Math.max(k.scrollTop,l.scrollTop),r+=Math.max(k.scrollLeft,l.scrollLeft));var t=(new PureCSSMatrix).translate(r,q);return d=d.multiply(t),d}function m(a){return Number(a).toFixed(6)}function n(a){var b=c.getElementTransform(a);return b?new PureCSSMatrix(b):new PureCSSMatrix}"use strict";var b,c=a.zoomooz.helpers;d(),a.zoomooz||(a.zoomooz={}),a.zoomooz.setup=function(a){b=jQuery.extend(e(),a)},a.fn.zoomTo=function(c){return b||a.zoomooz.setup(),c=jQuery.extend({},b,c),this.each(function(){f(a(this),c),c.debug?(a("#debug").length===0?a(c.root).append('<div id="debug"><div>'):a("#debug").html(""),j(a(this),c)):a("#debug").length!==0&&a("#debug").html("")}),this}}(jQuery);var Sylvester={version:"0.1.3",precision:1e-6};Matrix.prototype={dup:function(){return Matrix.create(this.elements)},canMultiplyFromLeft:function(a){var b=a.elements||a;return typeof b[0][0]=="undefined"&&(b=Matrix.create(b).elements),this.elements[0].length==b.length},multiply:function(a){if(!a.elements)return this.map(function(b){return b*a});var b=a.modulus?!0:!1,c=a.elements||a;typeof c[0][0]=="undefined"&&(c=Matrix.create(c).elements);if(!this.canMultiplyFromLeft(c))return null;var d=this.elements.length,e=d,f,g,h=c[0].length,i,j=this.elements[0].length,k=[],l,m,n;do{f=e-d,k[f]=[],g=h;do{i=h-g,l=0,m=j;do n=j-m,l+=this.elements[f][n]*c[n][i];while(--m);k[f][i]=l}while(--g)}while(--d);var c=Matrix.create(k);return b?c.col(1):c},isSquare:function(){return this.elements.length==this.elements[0].length},toRightTriangular:function(){var a=this.dup(),b,c=this.elements.length,d=c,e,f,g=this.elements[0].length,h;do{e=d-c;if(a.elements[e][e]==0)for(j=e+1;j<d;j++)if(a.elements[j][e]!=0){b=[],f=g;do h=g-f,b.push(a.elements[e][h]+a.elements[j][h]);while(--f);a.elements[e]=b;break}if(a.elements[e][e]!=0)for(j=e+1;j<d;j++){var i=a.elements[j][e]/a.elements[e][e];b=[],f=g;do h=g-f,b.push(h<=e?0:a.elements[j][h]-a.elements[e][h]*i);while(--f);a.elements[j]=b}}while(--c);return a},determinant:function(){if(!this.isSquare())return null;var a=this.toRightTriangular(),b=a.elements[0][0],c=a.elements.length-1,d=c,e;do e=d-c+1,b*=a.elements[e][e];while(--c);return b},isSingular:function(){return this.isSquare()&&this.determinant()===0},augment:function(a){var b=a.elements||a;typeof b[0][0]=="undefined"&&(b=Matrix.create(b).elements);var c=this.dup(),d=c.elements[0].length,e=c.elements.length,f=e,g,h,i=b[0].length,j;if(e!=b.length)return null;do{g=f-e,h=i;do j=i-h,c.elements[g][d+j]=b[g][j];while(--h)}while(--e);return c},inverse:function(){if(!this.isSquare()||this.isSingular())return null;var a=this.elements.length,b=a,c,d,e=this.augment(Matrix.I(a)).toRightTriangular(),f,g=e.elements[0].length,h,i,j,k=[],l;do{c=a-1,i=[],f=g,k[c]=[],j=e.elements[c][c];do h=g-f,l=e.elements[c][h]/j,i.push(l),h>=b&&k[c].push(l);while(--f);e.elements[c]=i;for(d=0;d<c;d++){i=[],f=g;do h=g-f,i.push(e.elements[d][h]-e.elements[c][h]*e.elements[d][c]);while(--f);e.elements[d]=i}}while(--a);return Matrix.create(k)},setElements:function(a){var b,c=a.elements||a;if(typeof c[0][0]!="undefined"){var d=c.length,e=d,f,g,h;this.elements=[];do{b=e-d,f=c[b].length,g=f,this.elements[b]=[];do h=g-f,this.elements[b][h]=c[b][h];while(--f)}while(--d);return this}var i=c.length,j=i;this.elements=[];do b=j-i,this.elements.push([c[b]]);while(--i);return this}},Matrix.create=function(a){var b=new Matrix;return b.setElements(a)},Matrix.I=function(a){var b=[],c=a,d,e,f;do{d=c-a,b[d]=[],e=c;do f=c-e,b[d][f]=d==f?1:0;while(--e)}while(--a);return Matrix.create(b)}