!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:e.maquette={})}(this,function(e){var t,r,n="http://www.w3.org/",o=n+"2000/svg",i=n+"1999/xlink",a=[],s=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r},d=function(e,t){return e.vnodeSelector!==t.vnodeSelector?!1:e.properties&&t.properties?e.properties.key!==t.properties.key?!1:e.properties.bind===t.properties.bind:!e.properties&&!t.properties},p=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},u=function(e,t,r){for(var n=0;n<t.length;n++){var o=t[n];Array.isArray(o)?u(e,o,r):null!==o&&void 0!==o&&(o.hasOwnProperty("vnodeSelector")||(o=p(o)),r.push(o))}},c=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},f={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,t,r){e.style[t]=r},transitions:{enter:c,exit:c}},l=function(e){return s(f,e)},v=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},h=function(e,t,r){if(t)for(var n=r.eventHandlerInterceptor,a=Object.keys(t),s=a.length,d=0;s>d;d++){var p=a[d],u=t[p];if("className"===p)throw new Error('Property "className" is not supported, use "class".');if("class"===p)u.split(/\s+/).forEach(function(t){return e.classList.add(t)});else if("classes"===p)for(var c=Object.keys(u),f=c.length,l=0;f>l;l++){var h=c[l];u[h]&&e.classList.add(h)}else if("styles"===p)for(var m=Object.keys(u),y=m.length,l=0;y>l;l++){var g=m[l],N=u[g];N&&(v(N),r.styleApplyer(e,g,N))}else{if("key"===p)continue;if(null===u||void 0===u)continue;var b=typeof u;"function"===b?0===p.lastIndexOf("on",0)&&(n&&(u=n(p,u,e,t)),"oninput"===p&&!function(){var e=u;u=function(t){t.target["oninput-value"]=t.target.value,e.apply(this,[t])}}(),e[p]=u):"string"===b&&"value"!==p&&"innerHTML"!==p?r.namespace===o&&"href"===p?e.setAttributeNS(i,p,u):e.setAttribute(p,u):e[p]=u}}},m=function(e,t,r,n){if(r){for(var a=!1,s=Object.keys(r),d=s.length,p=0;d>p;p++){var u=s[p],c=r[u],f=t[u];if("class"===u){if(f!==c)throw new Error('"class" property may not be updated. Use the "classes" property for conditional css classes.')}else if("classes"===u)for(var l=e.classList,h=Object.keys(c),m=h.length,y=0;m>y;y++){var g=h[y],N=!!c[g],b=!!f[g];N!==b&&(a=!0,N?l.add(g):l.remove(g))}else if("styles"===u)for(var w=Object.keys(c),x=w.length,y=0;x>y;y++){var S=w[y],A=c[S],k=f[S];A!==k&&(a=!0,A?(v(A),n.styleApplyer(e,S,A)):n.styleApplyer(e,S,""))}else if(c||"string"!=typeof f||(c=""),"value"===u)e[u]!==c&&e["oninput-value"]!==c&&(e[u]=c,e["oninput-value"]=void 0),c!==f&&(a=!0);else if(c!==f){var E=typeof c;if("function"===E)throw new Error("Functions may not be updated on subsequent renders (property: "+u+"). Hint: declare event handler functions outside the render() function.");"string"===E&&"innerHTML"!==u?n.namespace===o&&"href"===u?e.setAttributeNS(i,u,c):e.setAttribute(u,c):e[u]!==c&&(e[u]=c),a=!0}}return a}},y=function(e,t,r){if(""!==t.vnodeSelector)for(var n=r;n<e.length;n++)if(d(e[n],t))return n;return-1},g=function(e,t){if(e.properties){var r=e.properties.enterAnimation;r&&("function"==typeof r?r(e.domNode,e.properties):t.enter(e.domNode,e.properties,r))}},N=function(e,t){var r=e.domNode;if(e.properties){var n=e.properties.exitAnimation;if(n){r.style.pointerEvents="none";var o=function(){r.parentNode&&r.parentNode.removeChild(r)};return"function"==typeof n?void n(r,o,e.properties):void t.exit(e.domNode,e.properties,n,o)}}r.parentNode&&r.parentNode.removeChild(r)},b=function(e,t,r,n){var o=e[t];if(""!==o.vnodeSelector){var i=o.properties,a=i?void 0===i.key?i.bind:i.key:void 0;if(!a)for(var s=0;s<e.length;s++)if(s!==t){var p=e[s];if(d(p,o))throw new Error("added"===n?r.vnodeSelector+" had a "+o.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.":r.vnodeSelector+" had a "+o.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},w=function(e,n,o,i,s){if(o===i)return!1;o=o||a,i=i||a;for(var p,u=o.length,c=i.length,f=s.transitions,l=0,v=0,h=!1;c>v;){var m=u>l?o[l]:void 0,w=i[v];if(void 0!==m&&d(m,w))h=r(m,w,s)||h,l++;else{var x=y(o,w,l+1);if(x>=0){for(p=l;x>p;p++)N(o[p],f),b(o,p,e,"removed");h=r(o[x],w,s)||h,l=x+1}else t(w,n,u>l?o[l].domNode:void 0,s),g(w,f),b(i,v,e,"added")}v++}if(u>l)for(p=l;u>p;p++)N(o[p],f),b(o,p,e,"removed");return h},x=function(e,r,n){if(r)for(var o=0;o<r.length;o++)t(r[o],e,void 0,n)},S=function(e,t,r){x(e,t.children,r),t.text&&(e.textContent=t.text),h(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate(e,r,t.vnodeSelector,t.properties,t.children)};t=function(e,t,r,n){var i,a,d,p,u,c=0,f=e.vnodeSelector;if(""===f)i=e.domNode=document.createTextNode(e.text),void 0!==r?t.insertBefore(i,r):t.appendChild(i);else{for(a=0;a<=f.length;++a)d=f.charAt(a),(a===f.length||"."===d||"#"===d)&&(p=f.charAt(c-1),u=f.slice(c,a),"."===p?i.classList.add(u):"#"===p?i.id=u:("svg"===u&&(n=s(n,{namespace:o})),i=e.domNode=void 0!==n.namespace?document.createElementNS(n.namespace,u):document.createElement(u),void 0!==r?t.insertBefore(i,r):t.appendChild(i)),c=a+1);S(i,e,n)}},r=function(e,t,r){var n=e.domNode,i=!1;if(e===t)return!1;var a=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var d=document.createTextNode(t.text);return n.parentNode.replaceChild(d,n),t.domNode=d,i=!0}}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(r=s(r,{namespace:o})),e.text!==t.text&&(a=!0,void 0===t.text?n.removeChild(n.firstChild):n.textContent=t.text),a=w(t,n,e.children,t.children,r)||a,a=m(n,e.properties,t.properties,r)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate(n,r,t.vnodeSelector,t.properties,t.children);return a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),t.domNode=e.domNode,i};var A=function(e,t){return{update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");r(e,n,t),e=n},domNode:e.domNode}};e.h=function(e){var t=arguments[1];if("string"!=typeof e)throw new Error;var r=1;!t||t.hasOwnProperty("vnodeSelector")||Array.isArray(t)||"object"!=typeof t?t=void 0:r=2;var n=void 0,o=void 0,i=arguments.length;if(i===r+1){var a=arguments[r];"string"==typeof a?n=a:void 0!==a&&null!==a&&1===a.length&&"string"==typeof a[0]&&(n=a[0])}if(void 0===n)for(o=[];r<arguments.length;r++){var s=arguments[r];null!==s&&void 0!==s&&(Array.isArray(s)?u(e,s,o):o.push(s.hasOwnProperty("vnodeSelector")?s:p(s)))}return{vnodeSelector:e,properties:t,children:o,text:""===n?void 0:n,domNode:null}},e.dom={create:function(e,r){return r=l(r),t(e,document.createElement("div"),void 0,r),A(e,r)},append:function(e,r,n){return n=l(n),t(r,e,void 0,n),A(r,n)},insertBefore:function(e,r,n){return n=l(n),t(r,e.parentNode,e,n),A(r,n)},merge:function(e,t,r){return r=l(r),t.domNode=e,S(e,t,r),A(t,r)}},e.createCache=function(){var e=void 0,t=void 0,r={invalidate:function(){t=void 0,e=void 0},result:function(r,n){if(e)for(var o=0;o<r.length;o++)e[o]!==r[o]&&(t=void 0);return t||(t=n(),e=r),t}};return r},e.createMapping=function(e,t,r){var n=[],o=[];return{results:o,map:function(i){for(var a=i.map(e),s=o.slice(),d=0,p=0;p<i.length;p++){var u=i[p],c=a[p];if(c===n[d])o[p]=s[d],r(u,s[d],p),d++;else{for(var f=!1,l=1;l<n.length+1;l++){var v=(d+l)%n.length;if(n[v]===c){o[p]=s[v],r(i[p],s[v],p),d=v+1,f=!0;break}}f||(o[p]=t(u,p))}}o.length=i.length,n=a}}},e.createProjector=function(r){var n,o=l(r);o.eventHandlerInterceptor=function(e,t,r,o){return function(){return n.scheduleRender(),t.apply(o.bind||this,arguments)}};var i,a=!0,s=!1,d=[],p=[],u=function(){if(i=void 0,a){a=!1;for(var e=0;e<d.length;e++){var t=p[e]();d[e].update(t)}a=!0}};return n={scheduleRender:function(){i||s||(i=requestAnimationFrame(u))},stop:function(){i&&(cancelAnimationFrame(i),i=void 0),s=!0},resume:function(){s=!1,a=!0,n.scheduleRender()},append:function(t,r){d.push(e.dom.append(t,r(),o)),p.push(r)},insertBefore:function(t,r){d.push(e.dom.insertBefore(t,r(),o)),p.push(r)},merge:function(t,r){d.push(e.dom.merge(t,r(),o)),p.push(r)},replace:function(e,r){var n=r();t(n,e.parentNode,e,o),e.parentNode.removeChild(e),d.push(A(n,o)),p.push(r)},detach:function(e){for(var t=0;t<p.length;t++)if(p[t]===e)return p.splice(t,1),d.splice(t,1)[0];throw new Error("renderMaquetteFunction was not found")}}}});
//# sourceMappingURL=maquette.min.js.map
