"use strict";(function(){angular.module("ngStorage",[]).factory("$localStorage",a("localStorage")).factory("$sessionStorage",a("sessionStorage"));function a(b){return["$rootScope","$browser","$window",function(d,c,l){var j=l[b],g={$default:function(m){for(var i in m){angular.isDefined(g[i])||(g[i]=m[i])}return g},$reset:function(m){for(var i in g){"$"===i[0]||delete g[i]}return g.$default(m)}},h;for(var f=0,e;f<j.length&&(e=j.key(f));f++){"ngStorage-"===e.slice(0,10)&&(g[e.slice(10)]=angular.fromJson(j.getItem(e)))}h=angular.copy(g);c.addPollFn(function(){if(!angular.equals(g,h)){angular.forEach(g,function(n,m){if(angular.isDefined(n)&&"$"!==m[0]){g[m]=angular.fromJson(angular.toJson(n));j.setItem("ngStorage-"+m,angular.toJson(n))}delete h[m]});for(var i in h){j.removeItem("ngStorage-"+i)}h=angular.copy(g);d.$apply()}});"localStorage"===b&&l.addEventListener("storage",function(i){if("ngStorage-"===i.key.slice(0,10)){i.newValue?g[i.key.slice(10)]=angular.fromJson(i.newValue):delete g[i.key.slice(10)];h=angular.copy(g);d.$apply()}});return g}]}})();