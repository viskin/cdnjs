"use strict";(function(){angular.module("ngStorage",[]).factory("$localStorage",a("localStorage")).factory("$sessionStorage",a("sessionStorage"));function a(b){return function(d,c,l){var j=l[b],g={$default:function(i){angular.forEach(i,function(n,m){angular.isDefined(g[m])||(g[m]=n)});return g},$reset:function(m){for(var i in g){/^\$/.test(i)||delete g[i]}angular.forEach(m,function(o,n){g[n]=o});return g}},h;for(var f=0,e;e=j.key(f);f++){g[e]=angular.fromJson(j.getItem(e))}h=angular.copy(g);c.addPollFn(function(){if(!angular.equals(g,h)){angular.forEach(g,function(m,i){if(angular.isDefined(m)&&!/^\$/.test(i)){g[i]=angular.fromJson(angular.toJson(m));j.setItem(i,angular.toJson(m))}delete h[i]});angular.forEach(h,function(m,i){j.removeItem(i)});h=angular.copy(g);d.$digest()}});"localStorage"===b&&angular.element(l).bind("storage",function(i){i.newValue?g[i.key]=angular.fromJson(i.newValue):delete g[i.key];h=angular.copy(g);d.$digest()});return g}}})();