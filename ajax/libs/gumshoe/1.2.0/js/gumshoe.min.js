/** gumshoe v1.2.0, by Chris Ferdinandi | http://github.com/cferdinandi/gumshoe | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define(["buoy"],t(e)):"object"==typeof exports?module.exports=t(e,require("buoy")):e.gumshoe=t(e,e.buoy)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t,n,a,o,r,s,c={},i=!!document.querySelector&&!!e.addEventListener,u=[],l={offset:0,selector:"[data-gumshoe] a",headerSelector:"[data-gumshoe-header]",activeClass:"active",callback:function(){}},d=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},f=function(){u.sort(function(e,t){return e.distance>t.distance?-1:e.distance<t.distance?1:0})};c.setDistances=function(){a=d(),r=o?buoy.getHeight(o)+buoy.getOffsetTop(o):0,buoy.forEach(u,function(e){e.distance=buoy.getOffsetTop(e.target)}),f()};var v=function(){var e=document.querySelectorAll(t.selector);buoy.forEach(e,function(e){e.hash&&u.push({nav:e,target:document.querySelector(e.hash),parent:"li"===e.parentNode.tagName.toLowerCase()?e.parentNode:null,distance:0})})},m=function(e){s&&(s.nav.classList.remove(t.activeClass),s.parent&&s.parent.classList.remove(t.activeClass)),e.nav.classList.add(t.activeClass),e.parent&&e.parent.classList.add(t.activeClass),t.callback(e),s={nav:e.nav,parent:e.parent}};c.getCurrentNav=function(){var t=e.pageYOffset;if(e.innerHeight+t>=a)return m(u[0]);for(var n=0,o=u.length;o>n;n++){var r=u[n];if(r.distance<t)return m(r)}};var g=function(){buoy.forEach(u,function(e){e.nav.classList.contains(t.activeClass)&&(s={nav:e.nav,parent:e.parent})})};c.destroy=function(){t&&(e.removeEventListener("resize",h,!1),e.removeEventListener("scroll",h,!1),u=[],t=null,n=null,a=null,o=null,r=null,s=null)};var h=function(e){n||(n=setTimeout(function(){n=null,"scroll"===e.type&&c.getCurrentNav(),"resize"===e.type&&(c.setDistances(),c.getCurrentNav())},66))};return c.init=function(n){i&&(c.destroy(),t=buoy.extend(l,n||{}),o=document.querySelector(t.headerSelector),v(),0!==u.length&&(g(),c.setDistances(),c.getCurrentNav(),e.addEventListener("resize",h,!1),e.addEventListener("scroll",h,!1)))},c});