var dialogPolyfill={};dialogPolyfill.reposition=function(a){var c=document.body.scrollTop||document.documentElement.scrollTop;var b=c+(window.innerHeight-a.offsetHeight)/2;a.style.top=b+"px";a.dialogPolyfillInfo.isTopOverridden=true};dialogPolyfill.inNodeList=function(a,c){for(var b=0;b<a.length;++b){if(a[b]==c){return true}}return false};dialogPolyfill.isInlinePositionSetByStylesheet=function(c){for(var d=0;d<document.styleSheets.length;++d){var l=document.styleSheets[d];var g=null;try{g=l.cssRules}catch(f){}if(!g){continue}for(var b=0;b<g.length;++b){var k=g[b];var m=null;try{m=document.querySelectorAll(k.selectorText)}catch(f){}if(!m||!dialogPolyfill.inNodeList(m,c)){continue}var a=k.style.getPropertyValue("top");var h=k.style.getPropertyValue("bottom");if((a&&a!="auto")||(h&&h!="auto")){return true}}}return false};dialogPolyfill.needsCentering=function(b){var a=getComputedStyle(b);if(a.position!="absolute"){return false}if((b.style.top!="auto"&&b.style.top!="")||(b.style.bottom!="auto"&&b.style.bottom!="")){return false}return !dialogPolyfill.isInlinePositionSetByStylesheet(b)};dialogPolyfill.showDialog=function(a){if(this.open){throw"InvalidStateError: showDialog called on open dialog"}this.open=true;this.setAttribute("open","open");if(dialogPolyfill.needsCentering(this)){dialogPolyfill.reposition(this)}if(a){this.dialogPolyfillInfo.modal=true;dialogPolyfill.dm.pushDialog(this)}};dialogPolyfill.close=function(a){if(!this.open){throw new InvalidStateError}this.open=false;this.removeAttribute("open");if(typeof a!="undefined"){this.returnValue=a}if(this.dialogPolyfillInfo.isTopOverridden){this.style.top="auto"}if(this.dialogPolyfillInfo.modal){dialogPolyfill.dm.removeDialog(this)}var b;if(document.createEvent){b=document.createEvent("HTMLEvents");b.initEvent("close",true,true)}else{b=new Event("close")}this.dispatchEvent(b);return this.returnValue};dialogPolyfill.registerDialog=function(a){if(a.show){console.warn("This browser already supports <dialog>, the polyfill may not work correctly.")}a.show=dialogPolyfill.showDialog.bind(a,false);a.showModal=dialogPolyfill.showDialog.bind(a,true);a.close=dialogPolyfill.close.bind(a);a.dialogPolyfillInfo={}};TOP_LAYER_ZINDEX=100000;MAX_PENDING_DIALOGS=100000;dialogPolyfill.DialogManager=function(){this.pendingDialogStack=[];this.overlay=document.createElement("div");this.overlay.style.width="100%";this.overlay.style.height="100%";this.overlay.style.position="fixed";this.overlay.style.left="0px";this.overlay.style.top="0px";this.overlay.style.backgroundColor="rgba(0,0,0,0.0)";this.overlay.addEventListener("click",function(a){var b=document.createEvent("MouseEvents");b.initMouseEvent(a.type,a.bubbles,a.cancelable,window,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget);document.body.dispatchEvent(b)})};dialogPolyfill.dm=new dialogPolyfill.DialogManager();dialogPolyfill.DialogManager.prototype.blockDocument=function(){if(!document.body.contains(this.overlay)){document.body.appendChild(this.overlay)}};dialogPolyfill.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay)};dialogPolyfill.DialogManager.prototype.updateStacking=function(){if(this.pendingDialogStack.length==0){this.unblockDocument();return}this.blockDocument();var c=TOP_LAYER_ZINDEX;for(var b=0;b<this.pendingDialogStack.length;b++){if(b==this.pendingDialogStack.length-1){this.overlay.style.zIndex=c++}var a=this.pendingDialogStack[b];a.dialogPolyfillInfo.backdrop.style.zIndex=c++;a.style.zIndex=c++}};dialogPolyfill.DialogManager.prototype.pushDialog=function(b){if(this.pendingDialogStack.length>=MAX_PENDING_DIALOGS){throw"Too many modal dialogs"}var a=document.createElement("div");a.classList.add("backdrop");a.addEventListener("click",function(c){var d=document.createEvent("MouseEvents");d.initMouseEvent(c.type,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget);b.dispatchEvent(d)});b.parentNode.insertBefore(a,b.nextSibling);b.dialogPolyfillInfo.backdrop=a;this.pendingDialogStack.push(b);this.updateStacking()};dialogPolyfill.DialogManager.prototype.removeDialog=function(c){var b=this.pendingDialogStack.indexOf(c);if(b==-1){return}this.pendingDialogStack.splice(b,1);var a=c.dialogPolyfillInfo.backdrop;a.parentNode.removeChild(a);c.dialogPolyfillInfo.backdrop=null;this.updateStacking()};