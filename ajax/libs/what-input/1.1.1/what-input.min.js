!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.whatInput=t()}(this,function(){"use strict";function e(e){clearTimeout(s),n(e),f=!0,s=setTimeout(function(){f=!1},1e3)}function t(e){f||n(e)}function n(e){var t=o(e),n=i(e),d=w[e.type];"pointer"===d&&(d=r(e)),p!==d&&(!y&&p&&"keyboard"===d&&"tab"!==v[t]&&m.indexOf(n.nodeName.toLowerCase())>=0||(p=d,c.setAttribute("data-whatinput",p),-1===h.indexOf(p)&&h.push(p))),"keyboard"===d&&u(t)}function o(e){return e.keyCode?e.keyCode:e.which}function i(e){return e.target||e.srcElement}function r(e){return"number"==typeof e.pointerType?b[e.pointerType]:e.pointerType}function u(e){-1===a.indexOf(v[e])&&v[e]&&a.push(v[e])}function d(e){var t=o(e),n=a.indexOf(v[t]);-1!==n&&a.splice(n,1)}var s,a=[],c=document.body,f=!1,p=null,m=["input","select","textarea"],y=c.hasAttribute("data-whatinput-formtyping"),w={keydown:"keyboard",mousedown:"mouse",mouseenter:"mouse",touchstart:"touch",pointerdown:"pointer",MSPointerDown:"pointer"},h=[],v={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},b={2:"touch",3:"touch",4:"mouse"};return function(){var n="mousedown";window.PointerEvent?n="pointerdown":window.MSPointerEvent&&(n="MSPointerDown"),c.addEventListener(n,t),c.addEventListener("mouseenter",t),"ontouchstart"in document.documentElement&&c.addEventListener("touchstart",e),c.addEventListener("keydown",t),c.addEventListener("keyup",d)}(),{ask:function(){return p},keys:function(){return a},types:function(){return h},set:n}});