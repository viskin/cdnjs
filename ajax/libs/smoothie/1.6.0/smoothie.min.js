function TimeSeries(e){e=e||{},e.resetBoundsInterval=e.resetBoundsInterval||3e3,e.resetBounds=e.resetBounds||!0,this.options=e,this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN,e.resetBounds&&(this.boundsTimer=setInterval(function(e){e.resetBounds()},e.resetBoundsInterval,this))}function SmoothieChart(e){e=e||{},e.grid=e.grid||{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,millisPerLine:1e3,verticalSections:2},e.millisPerPixel=e.millisPerPixel||20,e.fps=e.fps||50,e.maxValueScale=e.maxValueScale||1,e.minValue=e.minValue,e.maxValue=e.maxValue,e.labels=e.labels||{fillStyle:"#ffffff"},e.interpolation=e.interpolation||"bezier",this.options=e,this.seriesSet=[]}TimeSeries.prototype.resetBounds=function(){this.maxValue=Number.NaN,this.minValue=Number.NaN;for(var e=0;e<this.data.length;e++)this.maxValue=isNaN(this.maxValue)?this.data[e][1]:Math.max(this.maxValue,this.data[e][1]),this.minValue=isNaN(this.minValue)?this.data[e][1]:Math.min(this.minValue,this.data[e][1])},TimeSeries.prototype.append=function(e,i){this.data.push([e,i]),this.maxValue=isNaN(this.maxValue)?i:Math.max(this.maxValue,i),this.minValue=isNaN(this.minValue)?i:Math.min(this.minValue,i)},SmoothieChart.prototype.addTimeSeries=function(e,i){this.seriesSet.push({timeSeries:e,options:i||{}})},SmoothieChart.prototype.removeTimeSeries=function(e){this.seriesSet.splice(this.seriesSet.indexOf(e),1)},SmoothieChart.prototype.streamTo=function(e,i){var t=this;this.render_on_tick=function(){t.render(e,(new Date).getTime()-(i||0))},this.start()},SmoothieChart.prototype.start=function(){this.timer||(this.timer=setInterval(this.render_on_tick,1e3/this.options.fps))},SmoothieChart.prototype.stop=function(){this.timer&&(clearInterval(this.timer),this.timer=void 0)},SmoothieChart.prototype.render=function(e,i){var t=e.getContext("2d"),a=this.options,l={top:0,left:0,width:e.clientWidth,height:e.clientHeight};if(t.save(),i-=i%a.millisPerPixel,t.translate(l.left,l.top),t.beginPath(),t.rect(0,0,l.width,l.height),t.clip(),t.save(),t.fillStyle=a.grid.fillStyle,t.fillRect(0,0,l.width,l.height),t.restore(),t.save(),t.lineWidth=a.grid.lineWidth||1,t.strokeStyle=a.grid.strokeStyle||"#ffffff",a.grid.millisPerLine>0)for(var s=i-i%a.grid.millisPerLine;s>=i-l.width*a.millisPerPixel;s-=a.grid.millisPerLine){t.beginPath();var r=Math.round(l.width-(i-s)/a.millisPerPixel);t.moveTo(r,0),t.lineTo(r,l.height),t.stroke(),t.closePath()}for(var h=1;h<a.grid.verticalSections;h++){var o=Math.round(h*l.height/a.grid.verticalSections);t.beginPath(),t.moveTo(0,o),t.lineTo(l.width,o),t.stroke(),t.closePath()}t.beginPath(),t.strokeRect(0,0,l.width,l.height),t.closePath(),t.restore();for(var n=Number.NaN,m=Number.NaN,u=0;u<this.seriesSet.length;u++){var d=this.seriesSet[u].timeSeries;isNaN(d.maxValue)||(n=isNaN(n)?d.maxValue:Math.max(n,d.maxValue)),isNaN(d.minValue)||(m=isNaN(m)?d.minValue:Math.min(m,d.minValue))}if(!isNaN(n)||!isNaN(m)){null!=a.maxValue?n=a.maxValue:n*=a.maxValueScale,null!=a.minValue&&(m=a.minValue);for(var f=n-m,u=0;u<this.seriesSet.length;u++){t.save();for(var d=this.seriesSet[u].timeSeries,S=d.data,p=this.seriesSet[u].options;S.length>=2&&S[1][0]<i-l.width*a.millisPerPixel;)S.splice(0,1);t.lineWidth=p.lineWidth||1,t.fillStyle=p.fillStyle,t.strokeStyle=p.strokeStyle||"#ffffff",t.beginPath();for(var c=0,N=0,x=0,g=0;g<S.length;g++){var v=Math.round(l.width-(i-S[g][0])/a.millisPerPixel),V=S[g][1],P=n-V,y=f?Math.round(P/f*l.height):0,T=Math.max(Math.min(y,l.height-1),1);if(0==g)c=v,t.moveTo(v,T);else switch(a.interpolation){case"line":t.lineTo(v,T);break;case"bezier":default:t.bezierCurveTo(Math.round((N+v)/2),x,Math.round(N+v)/2,T,v,T)}N=v,x=T}S.length>0&&p.fillStyle&&(t.lineTo(l.width+p.lineWidth+1,x),t.lineTo(l.width+p.lineWidth+1,l.height+p.lineWidth+1),t.lineTo(c,l.height+p.lineWidth),t.fill()),t.stroke(),t.closePath(),t.restore()}if(!a.labels.disabled){t.fillStyle=a.labels.fillStyle;var b=parseFloat(n).toFixed(2),w=parseFloat(m).toFixed(2);t.fillText(b,l.width-t.measureText(b).width-2,10),t.fillText(w,l.width-t.measureText(w).width-2,l.height-2)}t.restore()}};