function TimeSeries(e){e=e||{},e.resetBoundsInterval=e.resetBoundsInterval||3e3,e.resetBounds=e.resetBounds||!0,this.options=e,this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN,e.resetBounds&&(this.boundsTimer=setInterval(function(e){e.resetBounds()},e.resetBoundsInterval,this))}function SmoothieChart(e){e=e||{},e.grid=e.grid||{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,millisPerLine:1e3,verticalSections:2},e.millisPerPixel=e.millisPerPixel||20,e.fps=e.fps||20,e.maxValueScale=e.maxValueScale||1,e.minValue=e.minValue,e.labels=e.labels||{fillStyle:"#ffffff"},this.options=e,this.seriesSet=[]}TimeSeries.prototype.resetBounds=function(){this.maxValue=Number.NaN,this.minValue=Number.NaN;for(var e=0;e<this.data.length;e++)this.maxValue=isNaN(this.maxValue)?this.data[e][1]:Math.max(this.maxValue,this.data[e][1]),this.minValue=isNaN(this.minValue)?this.data[e][1]:Math.min(this.minValue,this.data[e][1])},TimeSeries.prototype.append=function(e,i){this.data.push([e,i]),this.maxValue=isNaN(this.maxValue)?i:Math.max(this.maxValue,i),this.minValue=isNaN(this.minValue)?i:Math.min(this.minValue,i)},SmoothieChart.prototype.addTimeSeries=function(e,i){this.seriesSet.push({timeSeries:e,options:i||{}})},SmoothieChart.prototype.removeTimeSeries=function(e){this.seriesSet.splice(this.seriesSet.indexOf(e),1)},SmoothieChart.prototype.streamTo=function(e,i){var t=this;!function l(){t.render(e,(new Date).getTime()-(i||0)),setTimeout(l,1e3/t.options.fps)}()},SmoothieChart.prototype.render=function(e,i){var t=e.getContext("2d"),l=this.options,s={top:0,left:0,width:e.clientWidth,height:e.clientHeight};if(t.save(),i-=i%l.millisPerPixel,t.translate(s.left,s.top),t.beginPath(),t.rect(0,0,s.width,s.height),t.clip(),t.save(),t.fillStyle=l.grid.fillStyle,t.fillRect(0,0,s.width,s.height),t.restore(),t.save(),t.lineWidth=l.grid.lineWidth||1,t.strokeStyle=l.grid.strokeStyle||"#ffffff",l.grid.millisPerLine>0)for(var a=i-i%l.grid.millisPerLine;a>=i-s.width*l.millisPerPixel;a-=l.grid.millisPerLine){t.beginPath();var h=Math.round(s.width-(i-a)/l.millisPerPixel);t.moveTo(h,0),t.lineTo(h,s.height),t.stroke(),t.closePath()}for(var r=1;r<l.grid.verticalSections;r++){var n=Math.round(r*s.height/l.grid.verticalSections);t.beginPath(),t.moveTo(0,n),t.lineTo(s.width,n),t.stroke(),t.closePath()}t.beginPath(),t.strokeRect(0,0,s.width,s.height),t.closePath(),t.restore();for(var o=Number.NaN,m=Number.NaN,d=0;d<this.seriesSet.length;d++){var u=this.seriesSet[d].timeSeries;isNaN(u.maxValue)||(o=isNaN(o)?u.maxValue:Math.max(o,u.maxValue)),isNaN(u.minValue)||(m=isNaN(m)?u.minValue:Math.min(m,u.minValue))}if(!isNaN(o)||!isNaN(m)){o*=l.maxValueScale,null!=l.minValue&&(m=l.minValue);for(var f=o-m,d=0;d<this.seriesSet.length;d++){t.save();for(var u=this.seriesSet[d].timeSeries,S=u.data,N=this.seriesSet[d].options;S.length>=2&&S[1][0]<i-s.width*l.millisPerPixel;)S.splice(0,1);t.lineWidth=N.lineWidth||1,t.fillStyle=N.fillStyle,t.strokeStyle=N.strokeStyle||"#ffffff",t.beginPath();for(var g=0,x=0,c=0,p=0;p<S.length;p++){var v=Math.round(s.width-(i-S[p][0])/l.millisPerPixel),V=S[p][1],P=o-V,T=f?Math.round(P/f*s.height):0,y=Math.max(Math.min(T,s.height-1),1);0==p?(g=v,t.moveTo(v,y)):t.bezierCurveTo(Math.round((x+v)/2),c,Math.round(x+v)/2,y,v,y),x=v,c=y}S.length>0&&N.fillStyle&&(t.lineTo(s.width+N.lineWidth+1,c),t.lineTo(s.width+N.lineWidth+1,s.height+N.lineWidth+1),t.lineTo(g,s.height+N.lineWidth),t.fill()),t.stroke(),t.closePath(),t.restore()}if(!l.labels.disabled){t.fillStyle=l.labels.fillStyle;var b=o.toFixed(2),w=m.toFixed(2);t.fillText(b,s.width-t.measureText(b).width-2,10),t.fillText(w,s.width-t.measureText(w).width-2,s.height-2)}t.restore()}};