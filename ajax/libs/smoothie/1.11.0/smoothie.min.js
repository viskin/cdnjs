function TimeSeries(e){e=e||{},e.resetBoundsInterval=e.resetBoundsInterval||3e3,e.resetBounds=void 0===e.resetBounds?!0:e.resetBounds,this.options=e,this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN,e.resetBounds&&(this.boundsTimer=setInterval(function(e){return function(){e.resetBounds()}}(this),e.resetBoundsInterval))}function SmoothieChart(e){e=e||{},e.grid=e.grid||{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,sharpLines:!1,millisPerLine:1e3,verticalSections:2},e.millisPerPixel=e.millisPerPixel||20,e.maxValueScale=e.maxValueScale||1,e.labels=e.labels||{fillStyle:"#ffffff"},e.interpolation=e.interpolation||"bezier",e.scaleSmoothing=e.scaleSmoothing||.125,e.maxDataSetLength=e.maxDataSetLength||2,e.timestampFormatter=e.timestampFormatter||null,this.options=e,this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0}TimeSeries.prototype.resetBounds=function(){this.maxValue=Number.NaN,this.minValue=Number.NaN;for(var e=0;e<this.data.length;e++)this.maxValue=isNaN(this.maxValue)?this.data[e][1]:Math.max(this.maxValue,this.data[e][1]),this.minValue=isNaN(this.minValue)?this.data[e][1]:Math.min(this.minValue,this.data[e][1])},TimeSeries.prototype.append=function(e,t){this.data.push([e,t]),this.maxValue=isNaN(this.maxValue)?t:Math.max(this.maxValue,t),this.minValue=isNaN(this.minValue)?t:Math.min(this.minValue,t)},SmoothieChart.AnimateCompatibility=function(){var e=0,t=function(t,i){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){var i=(new Date).getTime(),a=Math.max(0,16-(i-e)),r=window.setTimeout(function(){t(i+a)},a);return e=i+a,r};return a.call(window,t,i)},i=function(e){var t=window.cancelAnimationFrame||function(e){clearTimeout(e)};return t.call(window,e)};return{requestAnimationFrame:t,cancelAnimationFrame:i}}(),SmoothieChart.prototype.addTimeSeries=function(e,t){this.seriesSet.push({timeSeries:e,options:t||{}})},SmoothieChart.prototype.removeTimeSeries=function(e){this.seriesSet.splice(this.seriesSet.indexOf(e),1)},SmoothieChart.prototype.streamTo=function(e,t){this.canvas=e,this.delay=t,this.start()},SmoothieChart.prototype.start=function(){this.frame||this.animate()},SmoothieChart.prototype.animate=function(){this.frame=SmoothieChart.AnimateCompatibility.requestAnimationFrame(this.animate.bind(this)),this.render(this.canvas,(new Date).getTime()-(this.delay||0))},SmoothieChart.prototype.stop=function(){this.frame&&(SmootheiChart.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame)},SmoothieChart.timeFormatter=function(e){function t(e){return(10>e?"0":"")+e}return t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())},SmoothieChart.prototype.render=function(e,t){var i=e.getContext("2d"),a=this.options,r={top:0,left:0,width:e.clientWidth,height:e.clientHeight};if(i.save(),t-=t%a.millisPerPixel,i.translate(r.left,r.top),i.beginPath(),i.rect(0,0,r.width,r.height),i.clip(),i.save(),i.fillStyle=a.grid.fillStyle,i.clearRect(0,0,r.width,r.height),i.fillRect(0,0,r.width,r.height),i.restore(),i.save(),i.lineWidth=a.grid.lineWidth||1,i.strokeStyle=a.grid.strokeStyle||"#ffffff",a.grid.millisPerLine>0)for(var n=t-t%a.grid.millisPerLine;n>=t-r.width*a.millisPerPixel;n-=a.grid.millisPerLine){i.beginPath();var s=Math.round(r.width-(t-n)/a.millisPerPixel);if(a.grid.sharpLines&&(s-=.5),i.moveTo(s,0),i.lineTo(s,r.height),i.stroke(),a.timestampFormatter){var l=new Date(n),o=a.timestampFormatter(l),h=i.measureText(o).width/2+i.measureText(k).width+4;s<r.width-h&&(i.fillStyle=a.labels.fillStyle,i.fillText(o,s-i.measureText(o).width/2,r.height-2))}i.closePath()}for(var m=1;m<a.grid.verticalSections;m++){var u=Math.round(m*r.height/a.grid.verticalSections);a.grid.sharpLines&&(u-=.5),i.beginPath(),i.moveTo(0,u),i.lineTo(r.width,u),i.stroke(),i.closePath()}i.beginPath(),i.strokeRect(0,0,r.width,r.height),i.closePath(),i.restore();for(var d=Number.NaN,f=Number.NaN,c=0;c<this.seriesSet.length;c++){var S=this.seriesSet[c].timeSeries;isNaN(S.maxValue)||(d=isNaN(d)?S.maxValue:Math.max(d,S.maxValue)),isNaN(S.minValue)||(f=isNaN(f)?S.minValue:Math.min(f,S.minValue))}if(isNaN(d)&&isNaN(f))return void i.restore();null!=a.maxValue?d=a.maxValue:d*=a.maxValueScale,null!=a.minValue&&(f=a.minValue);var g=d-f;this.currentValueRange+=a.scaleSmoothing*(g-this.currentValueRange),this.currentVisMinValue+=a.scaleSmoothing*(f-this.currentVisMinValue);for(var p=this.currentValueRange,w=this.currentVisMinValue,c=0;c<this.seriesSet.length;c++){i.save();for(var S=this.seriesSet[c].timeSeries,x=S.data,V=this.seriesSet[c].options;x.length>=a.maxDataSetLength&&x[1][0]<t-r.width*a.millisPerPixel;)x.splice(0,1);i.lineWidth=V.lineWidth||1,i.strokeStyle=V.strokeStyle||"#ffffff",i.beginPath();for(var v=0,N=0,y=0,T=0;T<x.length;T++){var b=Math.round(r.width-(t-x[T][0])/a.millisPerPixel),P=x[T][1],M=P-w,F=r.height-(p?Math.round(M/p*r.height):0),C=Math.max(Math.min(F,r.height-1),1);if(0==T)v=b,i.moveTo(b,C);else switch(a.interpolation){case"line":i.lineTo(b,C);break;case"bezier":default:i.bezierCurveTo(Math.round((N+b)/2),y,Math.round(N+b)/2,C,b,C)}N=b,y=C}x.length>0&&V.fillStyle&&(i.lineTo(r.width+V.lineWidth+1,y),i.lineTo(r.width+V.lineWidth+1,r.height+V.lineWidth+1),i.lineTo(v,r.height+V.lineWidth),i.fillStyle=V.fillStyle,i.fill()),i.stroke(),i.closePath(),i.restore()}if(!a.labels.disabled){i.fillStyle=a.labels.fillStyle;var A=parseFloat(d).toFixed(2),k=parseFloat(f).toFixed(2);i.fillText(A,r.width-i.measureText(A).width-2,10),i.fillText(k,r.width-i.measureText(k).width-2,r.height-2)}i.restore()};