function TimeSeries(e){e=e||{},e.resetBoundsInterval=e.resetBoundsInterval||3e3,e.resetBounds=e.resetBounds||!0,this.options=e,this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN,e.resetBounds&&(this.boundsTimer=setInterval(function(e){e.resetBounds()},e.resetBoundsInterval,this))}function SmoothieChart(e){e=e||{},e.grid=e.grid||{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,millisPerLine:1e3,verticalSections:2},e.millisPerPixel=e.millisPerPixel||20,e.fps=e.fps||50,e.maxValueScale=e.maxValueScale||1,e.minValue=e.minValue,e.maxValue=e.maxValue,e.labels=e.labels||{fillStyle:"#ffffff"},e.interpolation=e.interpolation||"bezier",e.scaleSmoothing=e.scaleSmoothing||.125,this.options=e,this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0}TimeSeries.prototype.resetBounds=function(){this.maxValue=Number.NaN,this.minValue=Number.NaN;for(var e=0;e<this.data.length;e++)this.maxValue=isNaN(this.maxValue)?this.data[e][1]:Math.max(this.maxValue,this.data[e][1]),this.minValue=isNaN(this.minValue)?this.data[e][1]:Math.min(this.minValue,this.data[e][1])},TimeSeries.prototype.append=function(e,i){this.data.push([e,i]),this.maxValue=isNaN(this.maxValue)?i:Math.max(this.maxValue,i),this.minValue=isNaN(this.minValue)?i:Math.min(this.minValue,i)},SmoothieChart.prototype.addTimeSeries=function(e,i){this.seriesSet.push({timeSeries:e,options:i||{}})},SmoothieChart.prototype.removeTimeSeries=function(e){this.seriesSet.splice(this.seriesSet.indexOf(e),1)},SmoothieChart.prototype.streamTo=function(e,i){var t=this;this.render_on_tick=function(){t.render(e,(new Date).getTime()-(i||0))},this.start()},SmoothieChart.prototype.start=function(){this.timer||(this.timer=setInterval(this.render_on_tick,1e3/this.options.fps))},SmoothieChart.prototype.stop=function(){this.timer&&(clearInterval(this.timer),this.timer=void 0)},SmoothieChart.prototype.render=function(e,i){var t=e.getContext("2d"),a=this.options,s={top:0,left:0,width:e.clientWidth,height:e.clientHeight};if(t.save(),i-=i%a.millisPerPixel,t.translate(s.left,s.top),t.beginPath(),t.rect(0,0,s.width,s.height),t.clip(),t.save(),t.fillStyle=a.grid.fillStyle,t.clearRect(0,0,s.width,s.height),t.fillRect(0,0,s.width,s.height),t.restore(),t.save(),t.lineWidth=a.grid.lineWidth||1,t.strokeStyle=a.grid.strokeStyle||"#ffffff",a.grid.millisPerLine>0)for(var l=i-i%a.grid.millisPerLine;l>=i-s.width*a.millisPerPixel;l-=a.grid.millisPerLine){t.beginPath();var r=Math.round(s.width-(i-l)/a.millisPerPixel);t.moveTo(r,0),t.lineTo(r,s.height),t.stroke(),t.closePath()}for(var h=1;h<a.grid.verticalSections;h++){var n=Math.round(h*s.height/a.grid.verticalSections);t.beginPath(),t.moveTo(0,n),t.lineTo(s.width,n),t.stroke(),t.closePath()}t.beginPath(),t.strokeRect(0,0,s.width,s.height),t.closePath(),t.restore();for(var o=Number.NaN,m=Number.NaN,u=0;u<this.seriesSet.length;u++){var d=this.seriesSet[u].timeSeries;isNaN(d.maxValue)||(o=isNaN(o)?d.maxValue:Math.max(o,d.maxValue)),isNaN(d.minValue)||(m=isNaN(m)?d.minValue:Math.min(m,d.minValue))}if(!isNaN(o)||!isNaN(m)){null!=a.maxValue?o=a.maxValue:o*=a.maxValueScale,null!=a.minValue&&(m=a.minValue);var f=o-m;this.currentValueRange+=a.scaleSmoothing*(f-this.currentValueRange),this.currentVisMinValue+=a.scaleSmoothing*(m-this.currentVisMinValue);for(var c=this.currentValueRange,S=this.currentVisMinValue,u=0;u<this.seriesSet.length;u++){t.save();for(var d=this.seriesSet[u].timeSeries,g=d.data,V=this.seriesSet[u].options;g.length>=2&&g[1][0]<i-s.width*a.millisPerPixel;)g.splice(0,1);t.lineWidth=V.lineWidth||1,t.fillStyle=V.fillStyle,t.strokeStyle=V.strokeStyle||"#ffffff",t.beginPath();for(var p=0,N=0,x=0,v=0;v<g.length;v++){var P=Math.round(s.width-(i-g[v][0])/a.millisPerPixel),y=g[v][1],T=y-S,b=s.height-(c?Math.round(T/c*s.height):0),w=Math.max(Math.min(b,s.height-1),1);if(0==v)p=P,t.moveTo(P,w);else switch(a.interpolation){case"line":t.lineTo(P,w);break;case"bezier":default:t.bezierCurveTo(Math.round((N+P)/2),x,Math.round(N+P)/2,w,P,w)}N=P,x=w}g.length>0&&V.fillStyle&&(t.lineTo(s.width+V.lineWidth+1,x),t.lineTo(s.width+V.lineWidth+1,s.height+V.lineWidth+1),t.lineTo(p,s.height+V.lineWidth),t.fill()),t.stroke(),t.closePath(),t.restore()}if(!a.labels.disabled){t.fillStyle=a.labels.fillStyle;var M=parseFloat(o).toFixed(2),k=parseFloat(m).toFixed(2);t.fillText(M,s.width-t.measureText(M).width-2,10),t.fillText(k,s.width-t.measureText(k).width-2,s.height-2)}t.restore()}};