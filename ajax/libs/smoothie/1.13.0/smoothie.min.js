function TimeSeries(e){e=e||{},e.resetBoundsInterval=e.resetBoundsInterval||3e3,e.resetBounds=void 0===e.resetBounds?!0:e.resetBounds,this.options=e,this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN,e.resetBounds&&(this.boundsTimer=setInterval(function(e){return function(){e.resetBounds()}}(this),e.resetBoundsInterval))}function SmoothieChart(e){e=e||{},e.grid=e.grid||{},e.grid.fillStyle=e.grid.fillStyle||"#000000",e.grid.strokeStyle=e.grid.strokeStyle||"#777777",e.grid.lineWidth="undefined"==typeof e.grid.lineWidth?1:e.grid.lineWidth,e.grid.sharpLines=!!e.grid.sharpLines,e.grid.millisPerLine=e.grid.millisPerLine||1e3,e.grid.verticalSections="undefined"==typeof e.grid.verticalSections?2:e.grid.verticalSections,e.millisPerPixel=e.millisPerPixel||20,e.maxValueScale=e.maxValueScale||1,e.labels=e.labels||{fillStyle:"#ffffff"},e.interpolation=e.interpolation||"bezier",e.scaleSmoothing=e.scaleSmoothing||.125,e.maxDataSetLength=e.maxDataSetLength||2,e.timestampFormatter=e.timestampFormatter||null,e.horizontalLines=e.horizontalLines||[],this.options=e,this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0}TimeSeries.prototype.resetBounds=function(){this.maxValue=Number.NaN,this.minValue=Number.NaN;for(var e=0;e<this.data.length;e++)this.maxValue=isNaN(this.maxValue)?this.data[e][1]:Math.max(this.maxValue,this.data[e][1]),this.minValue=isNaN(this.minValue)?this.data[e][1]:Math.min(this.minValue,this.data[e][1])},TimeSeries.prototype.append=function(e,t){this.data.push([e,t]),this.maxValue=isNaN(this.maxValue)?t:Math.max(this.maxValue,t),this.minValue=isNaN(this.minValue)?t:Math.min(this.minValue,t)},SmoothieChart.AnimateCompatibility=function(){var e=0,t=function(t,i){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){var i=(new Date).getTime(),a=Math.max(0,16-(i-e)),r=window.setTimeout(function(){t(i+a)},a);return e=i+a,r};return a.call(window,t,i)},i=function(e){var t=window.cancelAnimationFrame||function(e){clearTimeout(e)};return t.call(window,e)};return{requestAnimationFrame:t,cancelAnimationFrame:i}}(),SmoothieChart.prototype.addTimeSeries=function(e,t){this.seriesSet.push({timeSeries:e,options:t||{}})},SmoothieChart.prototype.removeTimeSeries=function(e){this.seriesSet.splice(this.seriesSet.indexOf(e),1)},SmoothieChart.prototype.streamTo=function(e,t){this.canvas=e,this.delay=t,this.start()},SmoothieChart.prototype.start=function(){this.frame||this.animate()},SmoothieChart.prototype.animate=function(){this.frame=SmoothieChart.AnimateCompatibility.requestAnimationFrame(this.animate.bind(this)),this.render(this.canvas,(new Date).getTime()-(this.delay||0))},SmoothieChart.prototype.stop=function(){this.frame&&(SmoothieChart.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame)},SmoothieChart.timeFormatter=function(e){function t(e){return(10>e?"0":"")+e}return t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())},SmoothieChart.prototype.render=function(e,t){var i=e.getContext("2d"),a=this.options,r={top:0,left:0,width:e.clientWidth,height:e.clientHeight};if(i.save(),t-=t%a.millisPerPixel,i.translate(r.left,r.top),i.beginPath(),i.rect(0,0,r.width,r.height),i.clip(),i.save(),i.fillStyle=a.grid.fillStyle,i.clearRect(0,0,r.width,r.height),i.fillRect(0,0,r.width,r.height),i.restore(),i.save(),i.lineWidth=a.grid.lineWidth,i.strokeStyle=a.grid.strokeStyle,a.grid.millisPerLine>0)for(var n=t-t%a.grid.millisPerLine;n>=t-r.width*a.millisPerPixel;n-=a.grid.millisPerLine){i.beginPath();var s=Math.round(r.width-(t-n)/a.millisPerPixel);if(a.grid.sharpLines&&(s-=.5),i.moveTo(s,0),i.lineTo(s,r.height),i.stroke(),a.timestampFormatter){var l=new Date(n),o=a.timestampFormatter(l),h=i.measureText(o).width/2+i.measureText(A).width+4;s<r.width-h&&(i.fillStyle=a.labels.fillStyle,i.fillText(o,s-i.measureText(o).width/2,r.height-2))}i.closePath()}for(var m=1;m<a.grid.verticalSections;m++){var u=Math.round(m*r.height/a.grid.verticalSections);a.grid.sharpLines&&(u-=.5),i.beginPath(),i.moveTo(0,u),i.lineTo(r.width,u),i.stroke(),i.closePath()}i.beginPath(),i.strokeRect(0,0,r.width,r.height),i.closePath(),i.restore();for(var d=Number.NaN,f=Number.NaN,c=0;c<this.seriesSet.length;c++){var g=this.seriesSet[c].timeSeries;isNaN(g.maxValue)||(d=isNaN(d)?g.maxValue:Math.max(d,g.maxValue)),isNaN(g.minValue)||(f=isNaN(f)?g.minValue:Math.min(f,g.minValue))}if(isNaN(d)&&isNaN(f))return void i.restore();if(null!=a.maxValue?d=a.maxValue:d*=a.maxValueScale,null!=a.minValue&&(f=a.minValue),this.yRangeFunction){var S=this.yRangeFunction({min:f,max:d});f=S.min,d=S.max}var p=d-f;this.currentValueRange+=a.scaleSmoothing*(p-this.currentValueRange),this.currentVisMinValue+=a.scaleSmoothing*(f-this.currentVisMinValue);var v=this.currentValueRange,w=this.currentVisMinValue,x=function(e){var t=e-w;return r.height-(0!==v?Math.round(t/v*r.height):0)};if(a.horizontalLines&&a.horizontalLines.length)for(var V=0;V<a.horizontalLines.length;V++){var N=a.horizontalLines[V],y=Math.round(x(N.value))-.5;i.strokeStyle=N.color||"#ffffff",i.lineWidth=N.lineWidth||1,i.beginPath(),i.moveTo(0,y),i.lineTo(r.width,y),i.stroke(),i.closePath()}for(var c=0;c<this.seriesSet.length;c++){i.save();for(var g=this.seriesSet[c].timeSeries,T=g.data,P=this.seriesSet[c].options;T.length>=a.maxDataSetLength&&T[1][0]<t-r.width*a.millisPerPixel;)T.splice(0,1);i.lineWidth=P.lineWidth||1,i.strokeStyle=P.strokeStyle||"#ffffff",i.beginPath();for(var b=0,F=0,M=0,L=0;L<T.length&&1!==T.length;L++){var C=Math.round(r.width-(t-T[L][0])/a.millisPerPixel),k=x(T[L][1]);if(0==L)b=C,i.moveTo(C,k);else switch(a.interpolation){case"line":i.lineTo(C,k);break;case"bezier":default:i.bezierCurveTo(Math.round((F+C)/2),M,Math.round(F+C)/2,k,C,k)}F=C,M=k}T.length>0&&P.fillStyle&&(i.lineTo(r.width+P.lineWidth+1,M),i.lineTo(r.width+P.lineWidth+1,r.height+P.lineWidth+1),i.lineTo(b,r.height+P.lineWidth),i.fillStyle=P.fillStyle,i.fill()),i.stroke(),i.closePath(),i.restore()}if(!a.labels.disabled){i.fillStyle=a.labels.fillStyle;var W=parseFloat(d).toFixed(2),A=parseFloat(f).toFixed(2);i.fillText(W,r.width-i.measureText(W).width-2,10),i.fillText(A,r.width-i.measureText(A).width-2,r.height-2)}i.restore()};