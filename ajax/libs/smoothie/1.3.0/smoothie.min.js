function TimeSeries(){this.data=[],this.max=Number.NaN,this.min=Number.NaN}function SmoothieChart(e){e=e||{},e.grid=e.grid||{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,millisPerLine:1e3,verticalSections:2},e.millisPerPixel=e.millisPerPixel||20,e.fps=e.fps||20,e.labels=e.labels||{fillStyle:"#ffffff"},this.options=e,this.seriesSet=[]}TimeSeries.prototype.append=function(e,i){this.data.push([e,i]),this.maxValue=isNaN(this.maxValue)?i:Math.max(this.maxValue,i),this.minValue=isNaN(this.minValue)?i:Math.min(this.minValue,i)},SmoothieChart.prototype.addTimeSeries=function(e,i){this.seriesSet.push({timeSeries:e,options:i||{}})},SmoothieChart.prototype.streamTo=function(e,i){var t=this;!function l(){t.render(e,(new Date).getTime()-(i||0)),setTimeout(l,1e3/t.options.fps)}()},SmoothieChart.prototype.render=function(e,i){var t=e.getContext("2d"),l=this.options,h={top:0,left:0,width:e.clientWidth,height:e.clientHeight};if(t.save(),i-=i%l.millisPerPixel,t.translate(h.left,h.top),t.beginPath(),t.rect(0,0,h.width,h.height),t.clip(),t.save(),t.fillStyle=l.grid.fillStyle,t.fillRect(0,0,h.width,h.height),t.restore(),t.save(),t.lineWidth=l.grid.lineWidth||1,t.strokeStyle=l.grid.strokeStyle||"#ffffff",l.grid.millisPerLine>0)for(var s=i-i%l.grid.millisPerLine;s>=i-h.width*l.millisPerPixel;s-=l.grid.millisPerLine){t.beginPath();var r=Math.round(h.width-(i-s)/l.millisPerPixel);t.moveTo(r,0),t.lineTo(r,h.height),t.stroke(),t.closePath()}for(var a=1;a<l.grid.verticalSections;a++){var o=Math.round(a*h.height/l.grid.verticalSections);t.beginPath(),t.moveTo(0,o),t.lineTo(h.width,o),t.stroke(),t.closePath()}t.beginPath(),t.strokeRect(0,0,h.width,h.height),t.closePath(),t.restore();for(var n=Number.NaN,d=Number.NaN,m=0;m<this.seriesSet.length;m++){var f=this.seriesSet[m].timeSeries;isNaN(f.maxValue)||(n=isNaN(n)?f.maxValue:Math.max(n,f.maxValue)),isNaN(f.minValue)||(d=isNaN(d)?f.minValue:Math.min(d,f.minValue))}if(!isNaN(n)||!isNaN(d)){for(var u=n-d,m=0;m<this.seriesSet.length;m++){t.save();for(var f=this.seriesSet[m].timeSeries,g=f.data,S=this.seriesSet[m].options;g.length>=2&&g[1][0]<i-h.width*l.millisPerPixel;)g.splice(0,1);t.lineWidth=S.lineWidth||1,t.fillStyle=S.fillStyle,t.strokeStyle=S.strokeStyle||"#ffffff",t.beginPath();for(var N=0,P=0,c=0,p=0;p<g.length;p++){var v=Math.round(h.width-(i-g[p][0])/l.millisPerPixel),x=g[p][1],T=n-x,y=u?Math.round(T/u*h.height):0,w=Math.max(Math.min(y,h.height-1),1);0==p?(N=v,t.moveTo(v,w)):t.bezierCurveTo(Math.round((P+v)/2),c,Math.round(P+v)/2,w,v,w),P=v,c=w}g.length>0&&S.fillStyle&&(t.lineTo(h.width+S.lineWidth+1,c),t.lineTo(h.width+S.lineWidth+1,h.height+S.lineWidth+1),t.lineTo(N,h.height+S.lineWidth),t.fill()),t.stroke(),t.closePath(),t.restore()}if(!l.labels.disabled){t.fillStyle=l.labels.fillStyle;var b=n.toFixed(2),M=d.toFixed(2);t.fillText(b,h.width-t.measureText(b).width-2,10),t.fillText(M,h.width-t.measureText(M).width-2,h.height-2)}t.restore()}};