(function(a,c,b){b.module("googlechart",[]).constant("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}}).provider("googleJsapiUrl",function(){var e="https:";var d="//www.google.com/jsapi";this.setProtocol=function(f){e=f};this.setUrl=function(f){d=f};this.$get=function(){return(e?e:"")+d}}).factory("googleChartApiPromise",["$rootScope","$q","googleChartApiConfig","googleJsapiUrl",function(d,h,g,k){var e=h.defer();var j=function(){var l={callback:function(){var m=g.optionalSettings.callback;d.$apply(function(){e.resolve()});if(b.isFunction(m)){m.call(this)}}};l=b.extend({},g.optionalSettings,l);c.google.load("visualization",g.version,l)};var i=a.getElementsByTagName("head")[0];var f=a.createElement("script");f.setAttribute("type","text/javascript");f.src=k;if(f.addEventListener){f.addEventListener("load",j,false)}else{f.onreadystatechange=function(){if(f.readyState==="loaded"||f.readyState==="complete"){f.onreadystatechange=null;j()}}}i.appendChild(f);return e.promise}]).directive("googleChart",["$timeout","$window","$rootScope","googleChartApiPromise",function(e,g,d,f){return{restrict:"A",scope:{chart:"=chart",onReady:"&",onSelect:"&",select:"&"},link:function(k,j,i){k.$watch(function(){if(k.chart){return{data:k.chart.data,formatters:k.chart.formatters,options:k.chart.options,type:k.chart.type,customFormatters:k.chart.customFormatters}}return k.chart},function(){l()},true);d.$on("resizeMsg",function(){e(function(){if(k.chartWrapper){l()}})});k.oldChartFormatters={};function m(t,n,s){if(typeof(k.chart.formatters[t])!="undefined"){if(!b.equals(k.chart.formatters[t],k.oldChartFormatters[t])){k.oldChartFormatters[t]=k.chart.formatters[t];k.formatters[t]=[];if(t==="color"){for(var r=0;r<k.chart.formatters[t].length;r++){var p=new n();for(o=0;o<k.chart.formatters[t][r].formats.length;o++){var q=k.chart.formatters[t][r].formats[o];if(typeof(q.fromBgColor)!="undefined"&&typeof(q.toBgColor)!="undefined"){p.addGradientRange(q.from,q.to,q.color,q.fromBgColor,q.toBgColor)}else{p.addRange(q.from,q.to,q.color,q.bgcolor)}}k.formatters[t].push(p)}}else{for(var o=0;o<k.chart.formatters[t].length;o++){k.formatters[t].push(new n(k.chart.formatters[t][o]))}}}for(o=0;o<k.formatters[t].length;o++){if(k.chart.formatters[t][o].columnNum<s.getNumberOfColumns()){k.formatters[t][o].format(s,k.chart.formatters[t][o].columnNum)}}if(t==="arrow"||t==="bar"||t==="color"){k.chart.options.allowHtml=true}}}function h(){if(!h.triggered&&(k.chart!=undefined)){h.triggered=true;e(function(){if(typeof(k.formatters)==="undefined"){k.formatters={}}var p;if(k.chart.data instanceof google.visualization.DataTable){p=k.chart.data.clone()}else{if(b.isArray(k.chart.data)){p=google.visualization.arrayToDataTable(k.chart.data)}else{p=new google.visualization.DataTable(k.chart.data,0.5)}}if(typeof(k.chart.formatters)!="undefined"){m("number",google.visualization.NumberFormat,p);m("arrow",google.visualization.ArrowFormat,p);m("date",google.visualization.DateFormat,p);m("bar",google.visualization.BarFormat,p);m("color",google.visualization.ColorFormat,p)}var q=k.chart.customFormatters;if(typeof(q)!="undefined"){for(var n in q){m(n,q[n],p)}}var o={chartType:k.chart.type,dataTable:p,view:k.chart.view,options:k.chart.options,containerId:j[0]};k.chartWrapper=new google.visualization.ChartWrapper(o);google.visualization.events.addListener(k.chartWrapper,"ready",function(){k.chart.displayed=true;k.$apply(function(r){r.onReady({chartWrapper:r.chartWrapper})})});google.visualization.events.addListener(k.chartWrapper,"error",function(r){console.log("Chart not displayed due to error: "+r.message+". Full error object follows.");console.log(r)});google.visualization.events.addListener(k.chartWrapper,"select",function(){var r=k.chartWrapper.getChart().getSelection()[0];k.$apply(function(){if(i.select){console.log("Angular-Google-Chart: The 'select' attribute is deprecated and will be removed in a future release.  Please use 'onSelect'.");k.select({selectedItem:r})}else{k.onSelect({selectedItem:r})}})});e(function(){j.empty();k.chartWrapper.draw();h.triggered=false})},0,true)}}function l(){f.then(function(){h()})}}}}]).run(["$rootScope","$window",function(d,e){b.element(e).bind("resize",function(){d.$emit("resizeMsg")})}])})(document,window,window.angular);