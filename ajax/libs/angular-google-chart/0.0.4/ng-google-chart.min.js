(function(a,c){function b(e,f){var d=a.createElement("script");d.src=e;d.onload=f;d.onerror=function(){throw Error('Error loading "'+e+'"')};a.getElementsByTagName("head")[0].appendChild(d)}angular.module("googlechart",[]).constant("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}}).factory("googleChartApiProxy",["$rootScope","$q","googleChartApiConfig",function(d,g,f){var e=g.defer(),h=function(){var i={callback:function(){var j=f.optionalSettings.callback;d.$apply(function(){e.resolve()});if(angular.isFunction(j)){j.call(this)}}};i=angular.extend({},f.optionalSettings,i);c.google.load("visualization",f.version,i)};b("//www.google.com/jsapi",h);return function(k,j){var i=Array.prototype.slice.call(arguments,2);return function(){e.promise.then(function(){k.apply(j,i.concat(Array.prototype.slice.call(arguments)))})}}}]).directive("googleChart",["$timeout","$window","$rootScope","googleChartApiProxy",function(f,g,e,d){return{restrict:"A",scope:{chart:"=chart",onReady:"&"},link:function(j,i,l){j.$watch("chart",function(){h()},true);e.$on("resizeMsg",function(m){f(function(){j.chartWrapper.draw()})});function k(s,m,r){if(typeof(j.chart.formatters[s])!="undefined"){if(j.formatters[s]==null){j.formatters[s]=new Array();if(s==="color"){for(var q=0;q<j.chart.formatters[s].length;q++){var o=new m();for(var n=0;n<j.chart.formatters[s][q].formats.length;n++){var p=j.chart.formatters[s][q].formats[n];if(typeof(p.fromBgColor)!="undefined"&&typeof(p.toBgColor)!="undefined"){o.addGradientRange(p.from,p.to,p.color,p.fromBgColor,p.toBgColor)}else{o.addRange(p.from,p.to,p.color,p.bgcolor)}}j.formatters[s].push(o)}}else{for(var n=0;n<j.chart.formatters[s].length;n++){j.formatters[s].push(new m(j.chart.formatters[s][n]))}}}for(var n=0;n<j.formatters[s].length;n++){if(j.chart.formatters[s][n].columnNum<r.getNumberOfColumns()){j.formatters[s][n].format(r,j.chart.formatters[s][n].columnNum)}}if(s==="arrow"||s==="bar"||s==="color"){j.chart.options.allowHtml=true}}}function h(){if(!h.triggered&&(j.chart!=undefined)){h.triggered=true;f(function(){h.triggered=false;if(typeof(j.formatters)==="undefined"){j.formatters={}}var n;if(j.chart.data instanceof google.visualization.DataTable){n=j.chart.data}else{n=new google.visualization.DataTable(j.chart.data,0.5)}if(typeof(j.chart.formatters)!="undefined"){k("number",google.visualization.NumberFormat,n);k("arrow",google.visualization.ArrowFormat,n);k("date",google.visualization.DateFormat,n);k("bar",google.visualization.BarFormat,n);k("color",google.visualization.ColorFormat,n)}var m={chartType:j.chart.type,dataTable:n,view:j.chart.view,options:j.chart.options,containerId:i[0]};if(j.chartWrapper==null){j.chartWrapper=new google.visualization.ChartWrapper(m);google.visualization.events.addListener(j.chartWrapper,"ready",function(){j.chart.displayed=true;j.onReady()});google.visualization.events.addListener(j.chartWrapper,"error",function(o){console.log("Chart not displayed due to error: "+o.message)})}else{j.chartWrapper.setChartType(j.chart.type);j.chartWrapper.setDataTable(n);j.chartWrapper.setView(j.chart.view);j.chartWrapper.setOptions(j.chart.options)}f(function(){j.chartWrapper.draw()})},0,true)}}h=d(h,this)}}}]).run(["$rootScope","$window",function(d,e){angular.element(e).bind("resize",function(){d.$emit("resizeMsg")})}])})(document,window);