module.exports=function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){function o(e,t,a){var i=r(1);return a=i(!0,{},a)||{},void 0===a.protocol&&(a.protocol="https:"),a._setTimeout=s,a._ua=o.ua,a._useCache=!1,new n(e,t,a)}function n(){c.apply(this,arguments)}function s(e,t){function r(){return Date.now()<o+t?void process.nextTick(r):void e()}var o=Date.now();process.nextTick(r)}e.exports=o,process.env={};var a=r(2)("algoliasearch:parse"),i=r(5),c=r(6);a("loaded the Parse client"),o.version=r(12),o.ua="Algolia for Parse "+o.version,i(n,c),n.prototype._request=function(e,t){function o(r){a("error: %j  - %s %j",r,e,t),i.resolve({statusCode:r.status,body:r.data,headers:r.headers})}function n(r){a("success: %j  - %s %j",r,e,t),i.resolve({statusCode:r.status,body:r.data,headers:r.headers})}var s=r(1),i=new Parse.Promise;a("url: %s, opts: %j",e,t);var c={url:e,headers:s([],t.headers),method:t.method,success:n,error:o};return t.body&&(c.headers["content-type"]="application/json;charset=utf-8",c.body=t.body),Parse.Cloud.httpRequest(c),i},n.prototype._promise={reject:function(e){return Parse.Promise.error(e)},resolve:function(e){return Parse.Promise.as(e)},delay:function(e){var t=new Parse.Promise;return s(t.resolve.bind(t),e),t}}},function(e){var t,r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,n=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},s=function(e){"use strict";if(!e||"[object Object]"!==o.call(e))return!1;var n=r.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!s)return!1;var a;for(a in e);return a===t||r.call(e,a)};e.exports=function a(){"use strict";var e,r,o,i,c,u,l=arguments[0],d=1,h=arguments.length,p=!1;for("boolean"==typeof l?(p=l,l=arguments[1]||{},d=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});h>d;++d)if(e=arguments[d],null!=e)for(r in e)o=l[r],i=e[r],l!==i&&(p&&i&&(s(i)||(c=n(i)))?(c?(c=!1,u=o&&n(o)?o:[]):u=o&&s(o)?o:{},l[r]=a(p,u,i)):i!==t&&(l[r]=i));return l}},function(e,t,r){function o(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function n(){var e=arguments,r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return e;var o="color: "+this.color;e=[e[0],o,"color: inherit"].concat(Array.prototype.slice.call(e,1));var n=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(s=n))}),e.splice(s,0,o),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(r){}}function i(){var e;try{e=t.storage.debug}catch(r){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=r(3),t.log=s,t.formatArgs=n,t.save=a,t.load=i,t.useColors=o,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(i())},function(e,t,r){function o(){return t.colors[l++%t.colors.length]}function n(e){function r(){}function n(){var e=n,r=+new Date,s=r-(u||r);e.diff=s,e.prev=u,e.curr=r,u=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=o());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var i=0;a[0]=a[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;i++;var n=t.formatters[o];if("function"==typeof n){var s=a[i];r=n.call(e,s),a.splice(i,1),i--}return r}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));var c=n.log||t.log||console.log.bind(console);c.apply(e,a)}r.enabled=!1,n.enabled=!0;var s=t.enabled(e)?n:r;return s.namespace=e,s}function s(e){t.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,n=0;o>n;n++)r[n]&&(e=r[n].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function i(e){var r,o;for(r=0,o=t.skips.length;o>r;r++)if(t.skips[r].test(e))return!1;for(r=0,o=t.names.length;o>r;r++)if(t.names[r].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=n,t.coerce=c,t.disable=a,t.enable=s,t.enabled=i,t.humanize=r(4),t.names=[],t.skips=[],t.formatters={};var u,l=0},function(e){function t(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),o=(t[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"hrs":case"hr":case"h":return r*i;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=i?Math.round(e/i)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return n(e,c,"day")||n(e,i,"hour")||n(e,a,"minute")||n(e,s,"second")||e+" ms"}function n(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,a=60*s,i=60*a,c=24*i,u=365.25*c;e.exports=function(e,n){return n=n||{},"string"==typeof e?t(e):n.long?o(e):r(e)}},function(e){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){function o(e,t,r){void 0===r.protocol&&(r.protocol="https:"),s.apply(this,arguments)}e.exports=o;var n=r(5),s=r(7);n(o,s),o.prototype.enableRateLimitForward=function(e,t,r){this._forward={adminAPIKey:e,endUserIP:t,rateLimitAPIKey:r}},o.prototype.disableRateLimitForward=function(){this._forward=null},o.prototype.useSecuredAPIKey=function(e,t,r){this._secure={apiKey:e,securityTags:t,userToken:r}},o.prototype.disableSecuredAPIKey=function(){this._secure=null},o.prototype._computeRequestHeaders=function(){var e=o.super_.prototype._computeRequestHeaders.call(this);return this._forward&&(e["x-algolia-api-key"]=this._forward.adminAPIKey,e["x-forwarded-for"]=this._forward.endUserIP,e["x-forwarded-api-key"]=this._forward.rateLimitAPIKey),this._secure&&(e["x-algolia-api-key"]=this._secure.apiKey,e["x-algolia-tagfilters"]=this._secure.securityTags,e["x-algolia-usertoken"]=this._secure.userToken),e}},function(e,t,r){function o(e,t,o){var a=r(1),i="Usage: algoliasearch(applicationID, apiKey, opts)";if(!e)throw new h.AlgoliaSearchError("Please provide an application ID. "+i);if(!t)throw new h.AlgoliaSearchError("Please provide an API key. "+i);this.applicationID=e,this.apiKey=t;var c=[this.applicationID+"-1.algolianet.com",this.applicationID+"-2.algolianet.com",this.applicationID+"-3.algolianet.com"];this.hosts={read:[],write:[]},this.hostIndex={read:0,write:0},o=o||{};var u=o.protocol||"https:",d=void 0===o.timeout?2e3:o.timeout;if(/:$/.test(u)||(u+=":"),"http:"!==o.protocol&&"https:"!==o.protocol)throw new h.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+o.protocol+"`)");o.hosts?(this.hosts.read=a([],o.hosts),this.hosts.write=a([],o.hosts)):(this.hosts.read=[this.applicationID+"-dsn.algolia.net"].concat(c),this.hosts.write=[this.applicationID+".algolia.net"].concat(c)),this.hosts.read=n(this.hosts.read,s(u)),this.hosts.write=n(this.hosts.write,s(u)),this.requestTimeout=d,this.extraHeaders=[],this.cache={},this._ua=o._ua,this._useCache=void 0===o._useCache?!0:o._useCache,this._setTimeout=o._setTimeout,l("init done, %j",this)}function n(e,t){for(var r=[],o=0;o<e.length;++o)r.push(t(e[o],o));return r}function s(e){return function(t){return e+"//"+t.toLowerCase()}}function a(){var e="Not implemented in this environment.\nIf you feel this is a mistake, write to support@algolia.com";throw new h.AlgoliaSearchError(e)}function i(e,t){var r=e.toLowerCase().replace(".","").replace("()","");return"algoliasearch: `"+e+"` was replaced by `"+t+"`. Please see https://github.com/algolia/algoliasearch-client-js/wiki/Deprecated#"+r}function c(e,t){t(e,0)}function u(e,t){function r(){return o||(console.log(t),o=!0),e.apply(this,arguments)}var o=!1;return r}e.exports=o,"development"===process.env.APP_ENV&&r(2).enable("algoliasearch*");var l=r(2)("algoliasearch"),d=r(8),h=r(9);o.prototype={deleteIndex:function(e,t){return this._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(e),hostType:"write",callback:t})},moveIndex:function(e,t,r){var o={operation:"move",destination:t};return this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:o,hostType:"write",callback:r})},copyIndex:function(e,t,r){var o={operation:"copy",destination:t};return this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:o,hostType:"write",callback:r})},getLogs:function(e,t,r){return 0===arguments.length||"function"==typeof e?(r=e,e=0,t=10):(1===arguments.length||"function"==typeof t)&&(r=t,t=10),this._jsonRequest({method:"GET",url:"/1/logs?offset="+e+"&length="+t,hostType:"read",callback:r})},listIndexes:function(e,t){var r="";return void 0===e||"function"==typeof e?t=e:r="?page="+e,this._jsonRequest({method:"GET",url:"/1/indexes"+r,hostType:"read",callback:t})},initIndex:function(e){return new this.Index(this,e)},listUserKeys:function(e){return this._jsonRequest({method:"GET",url:"/1/keys",hostType:"read",callback:e})},getUserKeyACL:function(e,t){return this._jsonRequest({method:"GET",url:"/1/keys/"+e,hostType:"read",callback:t})},deleteUserKey:function(e,t){return this._jsonRequest({method:"DELETE",url:"/1/keys/"+e,hostType:"write",callback:t})},addUserKey:function(e,t,r){(1===arguments.length||"function"==typeof t)&&(r=t,t=null);var o={acl:e};return t&&(o.validity=t.validity,o.maxQueriesPerIPPerHour=t.maxQueriesPerIPPerHour,o.maxHitsPerQuery=t.maxHitsPerQuery,o.indexes=t.indexes,o.description=t.description,t.queryParameters&&(o.queryParameters=this._getSearchParams(t.queryParameters,"")),o.referers=t.referers),this._jsonRequest({method:"POST",url:"/1/keys",body:o,hostType:"write",callback:r})},addUserKeyWithValidity:u(function(e,t,r){return this.addUserKey(e,t,r)},i("client.addUserKeyWithValidity()","client.addUserKey()")),updateUserKey:function(e,t,r,o){(2===arguments.length||"function"==typeof r)&&(o=r,r=null);var n={acl:t};return r&&(n.validity=r.validity,n.maxQueriesPerIPPerHour=r.maxQueriesPerIPPerHour,n.maxHitsPerQuery=r.maxHitsPerQuery,n.indexes=r.indexes,n.description=r.description,r.queryParameters&&(n.queryParameters=this._getSearchParams(r.queryParameters,"")),n.referers=r.referers),this._jsonRequest({method:"PUT",url:"/1/keys/"+e,body:n,hostType:"write",callback:o})},setSecurityTags:function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],r=0;r<e.length;++r)if("[object Array]"===Object.prototype.toString.call(e[r])){for(var o=[],n=0;n<e[r].length;++n)o.push(e[r][n]);t.push("("+o.join(",")+")")}else t.push(e[r]);e=t.join(",")}this.securityTags=e},setUserToken:function(e){this.userToken=e},startQueriesBatch:u(function(){this._batch=[]},i("client.startQueriesBatch()","client.search()")),addQueryInBatch:u(function(e,t,r){this._batch.push({indexName:e,query:t,params:r})},i("client.addQueryInBatch()","client.search()")),clearCache:function(){this.cache={}},sendQueriesBatch:u(function(e){return this.search(this._batch,e)},i("client.sendQueriesBatch()","client.search()")),setRequestTimeout:function(e){e&&(this.requestTimeout=parseInt(e,10))},search:function(e,t){var r=this,o={requests:n(e,function(e){var t="";return void 0!==e.query&&(t+="query="+encodeURIComponent(e.query)),{indexName:e.indexName,params:r._getSearchParams(e.params,t)}})};return this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:o,hostType:"read",callback:t})},batch:function(e,t){return this._jsonRequest({method:"POST",url:"/1/indexes/*/batch",body:{requests:e},hostType:"write",callback:t})},destroy:a,enableRateLimitForward:a,disableRateLimitForward:a,useSecuredAPIKey:a,disableSecuredAPIKey:a,generateSecuredApiKey:a,Index:function(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}},setExtraHeader:function(e,t){this.extraHeaders.push({name:e.toLowerCase(),value:t})},_sendQueriesBatch:function(e,t){return this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:e,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:function(){for(var t="",r=0;r<e.requests.length;++r){var o="/1/indexes/"+encodeURIComponent(e.requests[r].indexName)+"?"+e.requests[r].params;t+=r+"="+encodeURIComponent(o)+"&"}return t}()}},callback:t})},_jsonRequest:function(e){function t(r,c){function l(e){var t=e&&e.body&&e.body.message&&e.body.status||e.statusCode||e&&e.body&&200;n("received response: statusCode: %s, computed statusCode: %d, headers: %j",e.statusCode,t,e.headers),process.env.DEBUG&&-1!==process.env.DEBUG.indexOf("debugBody")&&n("body: %j",e.body);var r=200===t||201===t,o=!r&&4!==Math.floor(t/100)&&1!==Math.floor(t/100);if(a._useCache&&r&&s&&(s[f]=e.body),r)return e.body;if(o)return i+=1,p();var c=new h.AlgoliaSearchError(e.body&&e.body.message);return a._promise.reject(c)}function d(o){return n("error: %s, stack: %s",o.message,o.stack),o instanceof h.AlgoliaSearchError||(o=new h.Unknown(o&&o.message,o)),i+=1,o instanceof h.Unknown||o instanceof h.UnparsableJSON||!r.fallback&&o instanceof h.Network||i>=a.hosts[e.hostType].length&&(u||!e.fallback||!a._request.fallback)?a._promise.reject(o):(a.hostIndex[e.hostType]=++a.hostIndex[e.hostType]%a.hosts[e.hostType].length,o instanceof h.RequestTimeout?p():(a._request.fallback&&!a.useFallback&&(a.useFallback=!0),t(r,c)))}function p(){return a.hostIndex[e.hostType]=++a.hostIndex[e.hostType]%a.hosts[e.hostType].length,c.timeout=a.requestTimeout*(i+1),t(r,c)}var f;if(a._useCache&&(f=e.url),a._useCache&&o&&(f+="_body_"+c.body),a._useCache&&s&&void 0!==s[f])return n("serving response from cache"),a._promise.resolve(JSON.parse(JSON.stringify(s[f])));if(i>=a.hosts[e.hostType].length||a.useFallback&&!u)return e.fallback&&a._request.fallback&&!u?(n("switching to fallback"),i=0,c.method=e.fallback.method,c.url=e.fallback.url,c.jsonBody=e.fallback.body,c.jsonBody&&(c.body=JSON.stringify(c.jsonBody)),c.timeout=a.requestTimeout*(i+1),a.hostIndex[e.hostType]=0,u=!0,t(a._request.fallback,c)):(n("could not get any response"),a._promise.reject(new h.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue.")));var m=a.hosts[e.hostType][a.hostIndex[e.hostType]]+c.url,y={body:o,jsonBody:e.body,method:c.method,headers:a._computeRequestHeaders(),timeout:c.timeout,debug:n};return n("method: %s, url: %s, headers: %j, timeout: %d",y.method,m,y.headers,y.timeout),r===a._request.fallback&&n("using fallback"),r.call(a,m,y).then(l,d)}var o,n=r(2)("algoliasearch:"+e.url),s=e.cache,a=this,i=0,u=!1;void 0!==e.body&&(o=JSON.stringify(e.body)),n("request start");var l=a.useFallback&&e.fallback,d=l?e.fallback:e,p=t(l?a._request.fallback:a._request,{url:d.url,method:d.method,body:o,jsonBody:e.body,timeout:a.requestTimeout*(i+1)});return e.callback?void p.then(function(t){c(function(){e.callback(null,t)},a._setTimeout||setTimeout)},function(t){c(function(){e.callback(t)},a._setTimeout||setTimeout)}):p},_getSearchParams:function(e,t){if(this._isUndefined(e)||null===e)return t;for(var r in e)null!==r&&e.hasOwnProperty(r)&&(t+=""===t?"":"&",t+=r+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[r])?JSON.stringify(e[r]):e[r]));return t},_isUndefined:function(e){return void 0===e},_computeRequestHeaders:function(){var e={"x-algolia-api-key":this.apiKey,"x-algolia-application-id":this.applicationID,"x-algolia-agent":this._ua};return this.userToken&&(e["x-algolia-usertoken"]=this.userToken),this.securityTags&&(e["x-algolia-tagfilters"]=this.securityTags),this.extraHeaders&&d(this.extraHeaders,function(t){e[t.name]=t.value}),e}},o.prototype.Index.prototype={clearCache:function(){this.cache={}},addObject:function(e,t,r){var o=this;return(1===arguments.length||"function"==typeof t)&&(r=t,t=void 0),this.as._jsonRequest({method:void 0!==t?"PUT":"POST",url:"/1/indexes/"+encodeURIComponent(o.indexName)+(void 0!==t?"/"+encodeURIComponent(t):""),body:e,hostType:"write",callback:r})},addObjects:function(e,t){for(var r=this,o={requests:[]},n=0;n<e.length;++n){var s={action:"addObject",body:e[n]};o.requests.push(s)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/batch",body:o,hostType:"write",callback:t})},getObject:function(e,t,r){var o=this;(1===arguments.length||"function"==typeof t)&&(r=t,t=void 0);var n="";if(void 0!==t){n="?attributes=";for(var s=0;s<t.length;++s)0!==s&&(n+=","),n+=t[s]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(o.indexName)+"/"+encodeURIComponent(e)+n,hostType:"read",callback:r})},getObjects:function(e,t,r){var o=this;(1===arguments.length||"function"==typeof t)&&(r=t,t=void 0);var s={requests:n(e,function(e){var r={indexName:o.indexName,objectID:e};return t&&(r.attributesToRetrieve=t.join(",")),r})};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:s,callback:r})},partialUpdateObject:function(e,t){var r=this;return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e.objectID)+"/partial",body:e,hostType:"write",callback:t})},partialUpdateObjects:function(e,t){for(var r=this,o={requests:[]},n=0;n<e.length;++n){var s={action:"partialUpdateObject",objectID:e[n].objectID,body:e[n]};o.requests.push(s)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/batch",body:o,hostType:"write",callback:t})},saveObject:function(e,t){var r=this;return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e.objectID),body:e,hostType:"write",callback:t})},saveObjects:function(e,t){for(var r=this,o={requests:[]},n=0;n<e.length;++n){var s={action:"updateObject",objectID:e[n].objectID,body:e[n]};o.requests.push(s)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/batch",body:o,hostType:"write",callback:t})},deleteObject:function(e,t){if("function"==typeof e||"string"!=typeof e&&"number"!=typeof e){var r=new h.AlgoliaSearchError("Cannot delete an object without an objectID");return t=e,"function"==typeof t?t(r):this.as._promise.reject(r)}var o=this;return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(o.indexName)+"/"+encodeURIComponent(e),hostType:"write",callback:t})},deleteObjects:function(e,t){var r=this,o={requests:n(e,function(e){return{action:"deleteObject",objectID:e,body:{objectID:e}}})};return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/batch",body:o,hostType:"write",callback:t})},deleteByQuery:function(e,t,r){function o(e){if(0===e.nbHits)return e;var t=n(e.hits,function(e){return e.objectID});return l.deleteObjects(t).then(s).then(a)}function s(e){return l.waitTask(e.taskID)}function a(){return l.deleteByQuery(e,t)}function i(){c(function(){r(null)},d._setTimeout||setTimeout)}function u(e){c(function(){r(e)},d._setTimeout||setTimeout)}var l=this,d=l.as;(1===arguments.length||"function"==typeof t)&&(r=t,t={}),t.attributesToRetrieve="objectID",t.hitsPerPage=1e3,this.clearCache();var h=this.search(e,t).then(o);return r?void h.then(i,u):h},search:function(e,t,r){if("function"==typeof e&&"object"==typeof t||"object"==typeof r)throw new h.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");0===arguments.length||"function"==typeof e?(r=e,e=""):(1===arguments.length||"function"==typeof t)&&(r=t,t=void 0),"object"==typeof e&&null!==e?(t=e,e=void 0):(void 0===e||null===e)&&(e="");var o="";return void 0!==e&&(o+="query="+encodeURIComponent(e)),void 0!==t&&(o=this.as._getSearchParams(t,o)),this._search(o,r)},browse:function(e,t,o){var n,s,a=r(1),i=this;0===arguments.length||1===arguments.length&&"function"==typeof arguments[0]?(n=0,o=arguments[0],e=void 0):"number"==typeof arguments[0]?(n=arguments[0],"number"==typeof arguments[1]?s=arguments[1]:"function"==typeof arguments[1]&&(o=arguments[1],s=void 0),e=void 0,t=void 0):"object"==typeof arguments[0]?("function"==typeof arguments[1]&&(o=arguments[1]),t=arguments[0],e=void 0):"string"==typeof arguments[0]&&"function"==typeof arguments[1]&&(o=arguments[1],t=void 0),t=a({},t||{},{page:n,hitsPerPage:s,query:e});var c=this.as._getSearchParams(t,"");return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(i.indexName)+"/browse?"+c,hostType:"read",callback:o})},browseFrom:function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse?cursor="+e,hostType:"read",callback:t})},browseAll:function(e,t){function o(e){if(!i._stopped){var t;t=void 0!==e?"cursor="+encodeURIComponent(e):l,c._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(u.indexName)+"/browse?"+t,hostType:"read",callback:n})}}function n(e,t){return i._stopped?void 0:e?void i._error(e):(i._result(t),void 0===t.cursor?void i._end():void o(t.cursor))}"object"==typeof e&&(t=e,e=void 0);var s=r(1),a=r(10),i=new a,c=this.as,u=this,l=c._getSearchParams(s({},t||{},{query:e}),"");return o(),i},ttAdapter:function(e){var t=this;return function(r,o,n){var s;s="function"==typeof n?n:o,t.search(r,e,function(e,t){return e?void s(e):void s(t.hits)})}},waitTask:function(e,t){function r(){return l._jsonRequest({method:"GET",hostType:"read",url:"/1/indexes/"+encodeURIComponent(u.indexName)+"/task/"+e}).then(function(e){i++;var t=s*i*i;return t>a&&(t=a),"published"!==e.status?l._promise.delay(t).then(function(){return r()}):e})}function o(e){c(function(){t(null,e)},l._setTimeout||setTimeout)}function n(e){c(function(){t(e)},l._setTimeout||setTimeout)}var s=100,a=5e3,i=0,u=this,l=u.as,d=r();return t?void d.then(o,n):d},clearIndex:function(e){var t=this;return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(t.indexName)+"/clear",hostType:"write",callback:e})},getSettings:function(e){var t=this;return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(t.indexName)+"/settings",hostType:"read",callback:e})},setSettings:function(e,t){var r=this;return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/settings",hostType:"write",body:e,callback:t})},listUserKeys:function(e){var t=this;return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(t.indexName)+"/keys",hostType:"read",callback:e})},getUserKeyACL:function(e,t){var r=this;return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/keys/"+e,hostType:"read",callback:t})},deleteUserKey:function(e,t){var r=this;return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/keys/"+e,hostType:"write",callback:t})},addUserKey:function(e,t,r){(1===arguments.length||"function"==typeof t)&&(r=t,t=null);var o={acl:e};return t&&(o.validity=t.validity,o.maxQueriesPerIPPerHour=t.maxQueriesPerIPPerHour,o.maxHitsPerQuery=t.maxHitsPerQuery,o.description=t.description,t.queryParameters&&(o.queryParameters=this.as._getSearchParams(t.queryParameters,"")),o.referers=t.referers),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys",body:o,hostType:"write",callback:r})},addUserKeyWithValidity:u(function(e,t,r){return this.addUserKey(e,t,r)},i("index.addUserKeyWithValidity()","index.addUserKey()")),updateUserKey:function(e,t,r,o){(2===arguments.length||"function"==typeof r)&&(o=r,r=null);var n={acl:t};return r&&(n.validity=r.validity,n.maxQueriesPerIPPerHour=r.maxQueriesPerIPPerHour,n.maxHitsPerQuery=r.maxHitsPerQuery,n.description=r.description,r.queryParameters&&(n.queryParameters=this.as._getSearchParams(r.queryParameters,"")),n.referers=r.referers),this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys/"+e,body:n,hostType:"write",callback:o})},_search:function(e,t){return this.as._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:e}},callback:t})},as:null,indexName:null,typeAheadArgs:null,typeAheadValueOption:null}},function(e){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,o,n){if("[object Function]"!==r.call(o))throw new TypeError("iterator must be a function");var s=e.length;if(s===+s)for(var a=0;s>a;a++)o.call(n,e[a],a,e);else for(var i in e)t.call(e,i)&&o.call(n,e[i],i,e)}},function(e,t,r){function o(e,t){var r=this;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):r.stack=(new Error).stack||"Cannot get a stacktrace, browser is too old",this.name=this.constructor.name,this.message=e||"Unknown error",t&&s(t,function(e,t){r[t]=e})}function n(e,t){function r(){var r=Array.prototype.slice.call(arguments,0);"string"!=typeof r[0]&&r.unshift(t),o.apply(this,r),this.name="AlgoliaSearch"+e+"Error"}return a(r,o),r}var s=r(8),a=r(5);a(o,Error),e.exports={AlgoliaSearchError:o,UnparsableJSON:n("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:n("RequestTimeout","Request timedout before getting a response"),Network:n("Network","Network issue, see err.more for details"),JSONPScriptFail:n("JSONPScriptFail","<script> was loaded but did not call our provided callback"),JSONPScriptError:n("JSONPScriptError","<script> unable to load due to an `error` event on it"),Unknown:n("Unknown","Unknown error occured")}},function(e,t,r){function o(){}e.exports=o;var n=r(5),s=r(11).EventEmitter;n(o,s),o.prototype.stop=function(){this._stopped=!0,this._clean()},o.prototype._end=function(){this.emit("end"),this._clean()},o.prototype._error=function(e){this.emit("error",e),this._clean()},o.prototype._result=function(e){this.emit("result",e)},o.prototype._clean=function(){this.removeAllListeners("stop"),this.removeAllListeners("end"),this.removeAllListeners("error"),this.removeAllListeners("result")}},function(e){e.exports=require("events")},function(e){e.exports="3.5.0"}]);