(function(){var t={firstrun:!0,is_supported:window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/)};t.addEvent=function(t,e,n){window.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},t.clone=function(t){object={};for(var e in t)object[e]=t[e];return object},t.triggerEvent=function(t,e){document.createEvent?(evt=document.createEvent("HTMLEvents"),evt.initEvent(e,!0,!0),t.dispatchEvent(evt)):(evt=document.createEventObject(),evt.eventType="on"+e,t.fireEvent(evt.eventType,evt))},t.addEvent(window,"popstate",function(e){if(null!=e.state){var n={url:e.state.url,container:e.state.container,history:!1};if("undefined"!=typeof t.options)for(var o in t.options)"undefined"==typeof n[o]&&(n[o]=t.options[o]);var i=t.parseOptions(n);if(0==i)return;t.handle(i)}}),t.attach=function(e,n){if(t.is_supported&&e.protocol===document.location.protocol&&e.host===document.location.host){if(e.pathname==location.pathname&&e.hash.length>0)return!0;n.url=e.href,e.getAttribute("data-pjax")&&(n.container=e.getAttribute("data-pjax")),e.getAttribute("data-title")&&(n.title=e.getAttribute("data-title")),n=t.parseOptions(n),0!=n&&t.addEvent(e,"click",function(e){return e.which>1||e.metaKey?void 0:(e.preventDefault?e.preventDefault():e.returnValue=!1,document.location.href==n.url?!1:void t.handle(n))})}},t.parseLinks=function(e,n){"undefined"!=typeof n.useClass?nodes=e.getElementsByClassName(n.useClass):nodes=e.getElementsByTagName("a");for(var o,i=0;i<nodes.length;i++)node=nodes[i],o=t.clone(n),o.history=!0,t.attach(node,o)},t.smartLoad=function(t,e){var n=document.createElement("div");n.innerHTML=t;var o=n.getElementsByTagName("title")[0].innerHTML;o&&(document.title=o),tmpNodes=n.getElementsByTagName("div");for(var i=0;i<tmpNodes.length;i++)if(tmpNodes[i].id==e.container.id)return tmpNodes[i].innerHTML;return t},t.handle=function(e){t.triggerEvent(e.container,"beforeSend"),t.request(e.url,function(n){return e.smartLoad&&(n=t.smartLoad(n,e)),e.container.innerHTML=n,e.parseLinksOnload&&t.parseLinks(e.container,e),"undefined"==typeof e.title&&(0!=e.container.getElementsByTagName("title").length?e.title=e.container.getElementsByTagName("title")[0].innerHTML:e.title=document.title),e.history&&(t.firstrun&&(window.history.replaceState({url:document.location.href,container:e.container.id},document.title),t.firstrun=!1),window.history.pushState({url:e.url,container:e.container.id},e.title,e.url)),t.triggerEvent(e.container,"complete"),0==n?void t.triggerEvent(e.container,"error"):(t.triggerEvent(e.container,"success"),window._gaq&&_gaq.push(["_trackPageview"]),void(document.title=e.title))})},t.request=function(t,e){try{xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status?e(xmlhttp.responseText):4!=xmlhttp.readyState||404!=xmlhttp.status&&500!=xmlhttp.status||e(!1)},xmlhttp.open("GET",t+(/[?&]/.test(t)?"&_pjax":"?_pjax"),!0),xmlhttp.setRequestHeader("X-PJAX","true"),xmlhttp.setRequestHeader("X-Requested-With","XMLHttpRequest"),xmlhttp.send(null)},t.parseOptions=function(e){if(opt={},opt.history=!0,opt.parseLinksOnload=!0,opt.smartLoad=!0,"undefined"==typeof e.url||"undefined"==typeof e.container)return console.log("URL and Container must be provided."),!1;if("undefined"==typeof e.history?e.history=opt.history:e.history=!(0==e.history),"undefined"==typeof e.parseLinksOnload&&(e.parseLinksOnload=opt.parseLinksOnload),"undefined"==typeof e.smartLoad&&(e.smartLoad=opt.smartLoad),"string"==typeof e.container){if(container=document.getElementById(e.container),null==container)return console.log("Could not find container with id:"+e.container),!1;e.container=container}return"function"==typeof e.beforeSend&&t.addEvent(e.container,"beforeSend",e.beforeSend),"function"==typeof e.complete&&t.addEvent(e.container,"complete",e.complete),"function"==typeof e.error&&t.addEvent(e.container,"error",e.error),"function"==typeof e.success&&t.addEvent(e.container,"success",e.success),e},this.connect=function(){var e={};2==arguments.length&&(e.container=arguments[0],e.useClass=arguments[1]),1==arguments.length&&("string"==typeof arguments[0]?e.container=arguments[0]:e=arguments[0]),delete e.title,delete e.history,t.options=e,"complete"==document.readyState?t.parseLinks(document,e):t.addEvent(window,"load",function(){t.parseLinks(document,e)})},this.invoke=function(){return 2==arguments.length?(options={},options.url=arguments[0],options.container=arguments[1]):options=arguments[0],t.is_supported?(options=t.parseOptions(options),void(options!==!1&&t.handle(options))):void(document.location=options.url)};var e=this;"function"==typeof define&&define.amd?define(function(){return e}):window.pjax=e}).call({});
//# sourceMappingURL=./pjax-standalone.min.js.map