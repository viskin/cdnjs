(function(a,b){if(typeof define==="function"&&define.amd){define(["d3"],b)}else{a.d3.tip=b(a.d3)}}(this,function(a){return function(){var t=k,f=c,h=r,p=o(),l=null,q=null,y=null;function j(z){l=v(z);q=l.createSVGPoint();document.body.appendChild(p)}j.show=function(){var G=Array.prototype.slice.call(arguments);if(G[G.length-1] instanceof SVGElement){y=G.pop()}var F=h.apply(this,G),z=f.apply(this,G),B=t.apply(this,G),D=a.select(p),E=i.length,H,A=document.documentElement.scrollTop||document.body.scrollTop,C=document.documentElement.scrollLeft||document.body.scrollLeft;D.html(F).style({opacity:1,"pointer-events":"all"});while(E--){D.classed(i[E],false)}H=w.get(B).apply(this);D.classed(B,true).style({top:(H.top+z[0])+A+"px",left:(H.left+z[1])+C+"px"});return j};j.hide=function(){nodel=a.select(p);nodel.style({opacity:0,"pointer-events":"none"});return j};j.attr=function(B,z){if(arguments.length<2&&typeof B==="string"){return a.select(p).attr(B)}else{var A=Array.prototype.slice.call(arguments);a.selection.prototype.attr.apply(a.select(p),A)}return j};j.style=function(B,z){if(arguments.length<2&&typeof B==="string"){return a.select(p).style(B)}else{var A=Array.prototype.slice.call(arguments);a.selection.prototype.style.apply(a.select(p),A)}return j};j.direction=function(z){if(!arguments.length){return t}t=z==null?z:a.functor(z);return j};j.offset=function(z){if(!arguments.length){return f}f=z==null?z:a.functor(z);return j};j.html=function(z){if(!arguments.length){return h}h=z==null?z:a.functor(z);return j};function k(){return"n"}function c(){return[0,0]}function r(){return" "}var w=a.map({n:b,s:u,e:d,w:s,nw:e,ne:n,sw:x,se:g}),i=w.keys();function b(){var z=m();return{top:z.n.y-p.offsetHeight,left:z.n.x-p.offsetWidth/2}}function u(){var z=m();return{top:z.s.y,left:z.s.x-p.offsetWidth/2}}function d(){var z=m();return{top:z.e.y-p.offsetHeight/2,left:z.e.x}}function s(){var z=m();return{top:z.w.y-p.offsetHeight/2,left:z.w.x-p.offsetWidth}}function e(){var z=m();return{top:z.nw.y-p.offsetHeight,left:z.nw.x-p.offsetWidth}}function n(){var z=m();return{top:z.ne.y-p.offsetHeight,left:z.ne.x}}function x(){var z=m();return{top:z.sw.y,left:z.sw.x-p.offsetWidth}}function g(){var z=m();return{top:z.se.y,left:z.e.x}}function o(){var z=a.select(document.createElement("div"));z.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"});return z.node()}function v(z){z=z.node();if(z.tagName.toLowerCase()=="svg"){return z}return z.ownerSVGElement}function m(){var E=y||a.event.target,F={},C=E.getScreenCTM(),B=E.getBBox(),D=B.width,A=B.height,z=B.x,G=B.y;q.x=z;q.y=G;F.nw=q.matrixTransform(C);q.x+=D;F.ne=q.matrixTransform(C);q.y+=A;F.se=q.matrixTransform(C);q.x-=D;F.sw=q.matrixTransform(C);q.y-=A/2;F.w=q.matrixTransform(C);q.x+=D;F.e=q.matrixTransform(C);q.x-=D/2;q.y-=A/2;F.n=q.matrixTransform(C);q.y+=A;F.s=q.matrixTransform(C);return F}return j}}));