"use strict";angular.module("pasvaz.bindonce",[]).directive("bindonce",function(){var a=function(e){if(e&&e.length!==0){var d=angular.lowercase(""+e);e=!(d=="f"||d=="0"||d=="false"||d=="no"||d=="n"||d=="[]")}else{e=false}return e};var b=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);if(isNaN(b)){b=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10)}var c={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(f,e,d,j){var h=function(o,k,n){var l=(k=="show")?"":"none";var m=(k=="hide")?"":"none";o.css("display",a(n)?l:m)};var g=function(m,l){if(angular.isObject(l)&&!angular.isArray(l)){var k=[];angular.forEach(l,function(o,n){if(o){k.push(n)}});l=k}if(l){m.addClass(angular.isArray(l)?l.join(" "):l)}};var i={watcherRemover:undefined,binders:[],group:d.boName,element:e,ran:false,addBinder:function(k){this.binders.push(k);if(this.ran){this.runBinders()}},setupWatcher:function(l){var k=this;this.watcherRemover=f.$watch(l,function(m){if(m==undefined){return}k.removeWatcher();k.runBinders()},true)},removeWatcher:function(){if(this.watcherRemover!=undefined){this.watcherRemover();this.watcherRemover=undefined}},runBinders:function(){for(var m in this.binders){var k=this.binders[m];if(this.group&&this.group!=k.group){continue}var l=k.scope.$eval((k.interpolate)?j(k.value):k.value);switch(k.attr){case"if":if(a(l)){k.transclude(k.scope.$new(),function(r){var p=k.element.parent();var q=k.element&&k.element[k.element.length-1];var n=p&&p[0]||q&&q.parentNode;var o=(q&&q.nextSibling)||null;angular.forEach(r,function(s){n.insertBefore(s,o)})})}break;case"hide":case"show":h(k.element,k.attr,l);break;case"class":g(k.element,l);break;case"text":k.element.text(l);break;case"html":k.element.html(l);break;case"style":k.element.css(l);break;case"src":k.element.attr(k.attr,l);if(b){k.element.prop("src",l)}case"attr":angular.forEach(k.attrs,function(p,o){var q,n;if(o.match(/^boAttr./)&&k.attrs[o]){q=o.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n=k.scope.$eval(k.attrs[o]);k.element.attr(q,n)}});break;case"href":case"alt":case"title":case"id":case"value":k.element.attr(k.attr,l);break}}this.ran=true;this.binders=[]}};return i}],link:function(f,h,d,e){var g=(d.bindonce)?f.$eval(d.bindonce):true;if(g!=undefined){e.runBinders()}else{e.setupWatcher(d.bindonce);h.bind("$destroy",e.removeWatcher)}}};return c});angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boIf",attribute:"if",transclude:"element",terminal:true,priority:1000},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:true},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:true},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"}],function(b){var a=200;return angular.module("pasvaz.bindonce").directive(b.directiveName,function(){var c={priority:b.priority||a,transclude:b.transclude||false,terminal:b.terminal||false,require:"^bindonce",compile:function(e,f,d){return function(k,m,h,j){var g=h.boParent;if(g&&j.group!=g){var i=j.element.parent();j=undefined;var l;while(i[0].nodeType!=9&&i.length){if((l=i.data("$bindonceController"))&&l.group==g){j=l;break}i=i.parent()}if(!j){throw Error("No bindonce controller: "+g)}}j.addBinder({element:m,attr:b.attribute,attrs:h,value:h[b.directiveName],interpolate:b.interpolate,group:g,transclude:d,scope:k})}}};return c})});