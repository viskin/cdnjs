/**
 * angular-data-table - AngularJS data table directive written in ES6.
 * @version v0.1.3
 * @link http://swimlane.com/
 * @license 
 */
!function(e,n){if("function"==typeof define&&define.amd)define("DataTable",["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var t={exports:{}};n(t.exports,t),e.DataTable=t.exports}}(this,function(e,n){"use strict";function t(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(){return{restrict:"E",controller:"PagerController",controllerAs:"pager",scope:{page:"=",size:"=",count:"=",onPage:"&"},template:'<div class="dt-pager">\n        <ul class="pager">\n          <li ng-class="{ disabled: !pager.canPrevious(this) }">\n            <a href ng-click="pager.selectPage(this, 1)" class="icon-left"></a>\n          </li>\n          <li ng-repeat="pg in pager.pages track by $index" ng-class="{ active: pg.active }">\n            <a href ng-click="pager.selectPage(this, pg.number)">{{pg.text}}</a>\n          </li>\n          <li ng-class="{ disabled: !pager.canNext(this) }">\n            <a href ng-click="pager.selectPage(this, pager.totalPages)" class="icon-right"></a>\n          </li>\n        </ul>\n      </div>',replace:!0}}function i(){return{restrict:"E",controller:"FooterController",controllerAs:"footer",scope:{paging:"=",onPage:"&"},template:'<div class="dt-footer">\n        <div class="page-count">{{paging.count}} total</div>\n        <dt-pager page="page"\n               size="paging.size"\n               count="paging.count"\n               on-page="footer.onPage(this, page)"\n               ng-show="paging.count > 1">\n         </dt-pager>\n      </div>',replace:!0}}function l(e,n,t){return{restrict:"E",controller:"CellController",controllerAs:"cell",scope:{options:"=",value:"=",selected:"=",column:"=",row:"=",expanded:"=",hasChildren:"=",onTreeToggle:"&",onCheckboxChange:"&"},template:'<div class="dt-cell" \n            data-title="{{::column.name}}" \n            ng-style="cell.styles(column)"\n            ng-class="cell.cellClass(column)">\n        <label ng-if="column.isCheckboxColumn" class="dt-checkbox">\n          <input type="checkbox" \n                 ng-checked="selected"\n                 ng-click="cell.onCheckboxChange($event, this)" />\n        </label>\n        <span ng-if="column.isTreeColumn && hasChildren"\n              ng-class="cell.treeClass(this)"\n              ng-click="cell.onTreeToggle($event, this)"></span>\n        <span class="dt-cell-content"></span>\n      </div>',replace:!0,compile:function(){return{pre:function(t,o,r,i){var l,s=angular.element(o[0].querySelector(".dt-cell-content"));(t.column.template||t.column.cellRenderer)&&(l=e.$new(!0),angular.forEach(t.options.$outer,function(e,n){"$"!==n[0]&&(l[n]=e)}),l.getValue=i.getValue),t.$watch("value",function(){if(s.empty(),l&&(l.value=t.value,l.row=t.row),t.column.template){var e=angular.element("<span>"+t.column.template.trim()+"</span>");s.append(n(e)(l))}else if(t.column.cellRenderer){var e=angular.element(t.column.cellRenderer(l,s));s.append(n(e)(l))}else s[0].innerHTML=i.getValue(t)})}}}}}function s(){return{restrict:"E",controller:"GroupRowController",controllerAs:"group",scope:{row:"=",onGroupToggle:"&",expanded:"="},replace:!0,template:'\n      <div class="dt-group-row">\n        <span ng-class="group.treeClass(this)"\n              ng-click="group.onGroupToggle($event, this)">\n        </span>\n        <span class="dt-group-row-label">\n          {{row.name}}\n        </span>\n      </div>'}}function a(){return{restrict:"E",controller:"RowController",controllerAs:"rowCtrl",scope:{row:"=",columns:"=",columnWidths:"=",expanded:"=",selected:"=",hasChildren:"=",options:"=",onCheckboxChange:"&",onTreeToggle:"&"},template:'\n      <div class="dt-row">\n        <div class="dt-row-left dt-row-block" \n             ng-if="columns[\'left\'].length"\n             ng-style="rowCtrl.stylesByGroup(this, \'left\')">\n          <dt-cell ng-repeat="column in columns[\'left\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggle(this, cell)"\n                   column="column"\n                   options="options"\n                   has-children="hasChildren"\n                   on-checkbox-change="rowCtrl.onCheckboxChange(this)"\n                   selected="selected"\n                   expanded="expanded"\n                   row="row"\n                   value="rowCtrl.getValue(this, column)">\n          </dt-cell>\n        </div>\n        <div class="dt-row-center dt-row-block" \n             ng-style="rowCtrl.stylesByGroup(this, \'center\')">\n          <dt-cell ng-repeat="column in columns[\'center\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggle(this, cell)"\n                   column="column"\n                   options="options"\n                   has-children="hasChildren"\n                   expanded="expanded"\n                   selected="selected"\n                   row="row"\n                   on-checkbox-change="rowCtrl.onCheckboxChange(this)"\n                   value="rowCtrl.getValue(this, column)">\n          </dt-cell>\n        </div>\n        <div class="dt-row-right dt-row-block" \n             ng-if="columns[\'right\'].length"\n             ng-style="rowCtrl.stylesByGroup(this, \'right\')">\n          <dt-cell ng-repeat="column in columns[\'right\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggle(this, cell)"\n                   column="column"\n                   options="options"\n                   has-children="hasChildren"\n                   selected="selected"\n                   on-checkbox-change="rowCtrl.onCheckboxChange(this)"\n                   row="row"\n                   expanded="expanded"\n                   value="rowCtrl.getValue(this, column)">\n          </dt-cell>\n        </div>\n      </div>',replace:!0}}function c(e){return e=e.replace(/[^a-zA-Z0-9 ]/g," "),e=e.replace(/([a-z](?=[A-Z]))/g,"$1 "),e=e.replace(/([^a-zA-Z0-9 ])|^[0-9]+/g,"").trim().toLowerCase(),e=e.replace(/([ 0-9]+)([a-zA-Z])/g,function(e,n,t){return n.trim()+t.toUpperCase()})}function u(e){var n=c(e);return M[n]||(M[n]=D[N.dom]?N.css+e:null),M[n]}function d(e,n,t){j?!I&&L?(e[O]="translate3d("+n+"px, "+t+"px, 0)",e[V]="hidden"):e[O]="translate("+n+"px, "+t+"px, 0)":(e.top=t+"px",e.left=n+"px")}function h(e,n){if(!e||!n)return e;var t=e,o=n.split(".");if(o.length)for(var r=0,i=o.length;i>r;r++)t=t[o[r]];return t}function p(e){return{restrict:"E",controller:"ScrollerController",controllerAs:"scroller",require:"^dtBody",transclude:!0,template:'<div ng-style="scroller.scrollerStyles(this)" ng-transclude></div>',link:function(n,t,o,r){function i(){e(function(){n.options.internal.offsetY=a,n.options.internal.offsetX=c,r.updatePage()}),s=!1}function l(){s||(U(i),s=!0)}{var s=!1,a=0,c=0;Y.create(t)}t.parent().on("scroll",function(e){a=this.scrollTop,c=this.scrollLeft,l()})}}}function g(e){return{restrict:"E",controller:"BodyController",controllerAs:"body",scope:{columns:"=",columnWidths:"=",rows:"=",options:"=",selected:"=?",expanded:"=?",onPage:"&",onTreeToggle:"&",onSelect:"&",onRowClick:"&"},template:'\n      <div class="dt-body" ng-style="body.styles()">\n        <dt-scroller class="dt-body-scroller">\n          <dt-group-row ng-repeat-start="r in body.tempRows track by $index"\n                        ng-if="r.group"\n                        ng-style="body.groupRowStyles(this, r)" \n                        on-group-toggle="body.onGroupToggle(this, group)"\n                        expanded="body.getRowExpanded(this, r)"\n                        tabindex="{{$index}}"\n                        row="r">\n          </dt-group-row>\n          <dt-row ng-repeat-end\n                  ng-if="!r.group"\n                  row="body.getRowValue($index)"\n                  tabindex="{{$index}}"\n                  columns="columns"\n                  column-widths="columnWidths"\n                  ng-keydown="body.keyDown($event, $index, r)"\n                  ng-click="body.rowClicked($event, $index, r)"\n                  on-tree-toggle="body.onTreeToggle(this, row, cell)"\n                  ng-class="body.rowClasses(this, r)"\n                  options="options"\n                  selected="body.isSelected(r)"\n                  on-checkbox-change="body.onCheckboxChange($index, row)"\n                  columns="body.columnsByPin"\n                  has-children="body.getRowHasChildren(r)"\n                  expanded="body.getRowExpanded(this, r)"\n                  ng-style="body.rowStyles(this, r)">\n          </dt-row>\n        </dt-scroller>\n        <div ng-if="rows && !rows.length" \n             class="empty-row" \n             ng-bind="::options.emptyMessage">\n       </div>\n       <div ng-if="rows === undefined" \n             class="loading-row"\n             ng-bind="::options.loadingMessage">\n        </div>\n      </div>'}}function f(e){return{restrict:"E",controller:"HeaderCellController",controllerAs:"hcell",scope:{column:"=",onCheckboxChange:"&",onSort:"&",onResize:"&",selected:"="},replace:!0,template:'<div ng-class="hcell.cellClass(this)"\n            draggable="true"\n            ng-style="hcell.styles(this)"\n            title="{{::column.name}}">\n        <div resizable="column.resizable" \n             on-resize="hcell.onResize(this, width, column)"\n             min-width="column.minWidth"\n             max-width="column.maxWidth">\n          <label ng-if="column.isCheckboxColumn && column.headerCheckbox" class="dt-checkbox">\n            <input type="checkbox" \n                   ng-checked="selected"\n                   ng-click="hcell.onCheckboxChange(this)" />\n          </label>\n          <span class="dt-header-cell-label" \n                ng-click="hcell.sort(this)">\n          </span>\n          <span ng-class="hcell.sortClass(this)"></span>\n        </div>\n      </div>',compile:function(){return{pre:function(n,t,o,r){var i=t[0].querySelector(".dt-header-cell-label");if(n.column.headerRenderer){var l=angular.element(n.column.headerRenderer(n,t));angular.element(i).append(e(l)(n)[0])}else{var s=n.column.name;(void 0===s||null===s)&&(s=""),i.innerHTML=s}}}}}}function m(e){return{restrict:"E",controller:"HeaderController",controllerAs:"header",scope:{options:"=",columns:"=",columnWidths:"=",onSort:"&",onResize:"&",onCheckboxChange:"&"},template:'\n      <div class="dt-header" ng-style="header.styles(this)">\n        <div class="dt-header-inner" ng-style="header.innerStyles(this)">\n          <div class="dt-row-left"\n               ng-style="header.stylesByGroup(this, \'left\')"\n               ng-if="columns[\'left\'].length"\n               sortable="options.reorderable"\n               on-sortable-sort="columnsResorted(event, childScope)">\n            <dt-header-cell ng-repeat="column in columns[\'left\'] track by column.$id" \n                            on-checkbox-change="header.onCheckboxChange(this)"\n                            on-sort="header.onSort(this, column)"\n                            on-resize="header.onResize(this, column, width)"\n                            selected="header.isSelected(this)"\n                            column="column">\n            </dt-header-cell>\n          </div>\n          <div class="dt-row-center" \n               sortable="options.reorderable"\n               ng-style="header.stylesByGroup(this, \'center\')"\n               on-sortable-sort="columnsResorted(event, childScope)">\n            <dt-header-cell ng-repeat="column in columns[\'center\'] track by column.$id" \n                            on-checkbox-change="header.onCheckboxChange(this)"\n                            on-sort="header.onSort(this, column)"\n                            selected="header.isSelected(this)"\n                            on-resize="header.onResize(this, column, width)"\n                            column="column">\n            </dt-header-cell>\n          </div>\n          <div class="dt-row-right"\n               ng-if="columns[\'right\'].length"\n               sortable="options.reorderable"\n               ng-style="header.stylesByGroup(this, \'right\')"\n               on-sortable-sort="columnsResorted(event, childScope)">\n            <dt-header-cell ng-repeat="column in columns[\'right\'] track by column.$id" \n                            on-checkbox-change="header.onCheckboxChange(this)"\n                            on-sort="header.onSort(this, column)"\n                            selected="header.isSelected(this)"\n                            on-resize="header.onResize(this, column, width)"\n                            column="column">\n            </dt-header-cell>\n          </div>\n        </div>\n      </div>',replace:!0,link:function(n,t,o,r){n.columnsResorted=function(t,o){var r=o.column,i=angular.element(t.currentTarget),l=-1;angular.forEach(i.children(),function(e,n){o===angular.element(e).scope()&&(l=n)}),e(function(){angular.forEach(n.columns,function(e){var t=e.indexOf(r);if(t>-1){var o=e[l],i=n.options.columns.indexOf(o),s=n.options.columns.indexOf(r);return n.options.columns.splice(s,1),n.options.columns.splice(i,0,r),!1}})})}}}}function v(e,n,t){var o,r,i,l=null,s=0;t||(t={});var a=function(){s=t.leading===!1?0:new Date,l=null,i=e.apply(o,r)};return function(){var c=new Date;s||t.leading!==!1||(s=c);var u=n-(c-s);return o=this,r=arguments,0>=u?(clearTimeout(l),l=null,s=c,i=e.apply(o,r)):l||t.trailing===!1||(l=setTimeout(a,u)),i}}function w(e,n,t){var o,r,i,l,s;return function(){i=this,r=arguments,l=new Date;var a=function u(){var a=new Date-l;n>a?o=setTimeout(u,n-a):(o=null,t||(s=e.apply(i,r)))},c=t&&!o;return o||(o=setTimeout(a,n)),c&&(s=e.apply(i,r)),s}}function y(e){return{restrict:"AC",scope:{isSortable:"=sortable",onSortableSort:"&"},link:function(e,n,t){function o(e,n){if(e.parentNode==n.parentNode)for(var t=e;t;t=t.previousSibling)if(t===n)return!0;return!1}function r(e){var n=e.target;o(s,n)?n.parentNode.insertBefore(s,n):n.nextSibling&&n.hasAttribute("draggable")&&n.parentNode.insertBefore(s,n.nextSibling)}function i(t){t.preventDefault(),s.classList.remove("dt-clone"),n.off("dragend",i),n.off("dragenter",r),a!==s.nextSibling&&e.onSortableSort({event:t,childScope:angular.element(s).scope()})}function l(t){return e.isSortable?(t=t.originalEvent||t,s=t.target,a=s.nextSibling,s.classList.add("dt-clone"),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("Text",s.textContent),n.on("dragenter",r),void n.on("dragend",i)):!1}{var s,a;n[0]}n.on("dragstart",l),e.$on("$destroy",function(){n.off("dragstart",l)})}}}function b(e,n,t){return{restrict:"AEC",scope:{isResizable:"=resizable",minWidth:"=",maxWidth:"=",onResize:"&"},link:function(n,o,r){function i(e){e=e.originalEvent||e;var t=c[0].scrollWidth,o=e.movementX||e.mozMovementX||e.screenX-s,r=t+(o||0);s=e.screenX,(!n.minWidth||r>=n.minWidth)&&(!n.maxWidth||r<=n.maxWidth)&&c.css({width:r+"px"})}function l(){n.onResize&&t(function(){n.onResize({width:c[0].scrollWidth})}),e.unbind("mousemove",i),e.unbind("mouseup",l)}n.isResizable&&o.addClass("resizable");var s,a=angular.element('<span class="dt-resize-handle" title="Resize"></span>'),c=o.parent();a.on("mousedown",function(n){return o[0].classList.contains("resizable")?(n.stopPropagation(),n.preventDefault(),e.on("mousemove",i),void e.on("mouseup",l)):!1}),o.append(a)}}}function x(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var n=e.offsetWidth;e.style.overflow="scroll";var t=document.createElement("div");t.style.width="100%",e.appendChild(t);var o=t.offsetWidth;return e.parentNode.removeChild(e),n-o}function C(e,n,t){return{restrict:"E",replace:!0,controller:"DataTable",scope:{options:"=",rows:"=",selected:"=?",expanded:"=?",onSelect:"&",onSort:"&",onTreeToggle:"&",onPage:"&",onRowClick:"&"},controllerAs:"dt",template:function(e){return e.columns=e[0].getElementsByTagName("column"),'<div class="dt" ng-class="dt.tableCss(this)">\n          <dt-header options="options"\n                     on-checkbox-change="dt.onHeaderCheckboxChange(this)"\n                     columns="dt.columnsByPin"\n                     column-widths="dt.columnWidths"\n                     ng-if="options.headerHeight"\n                     on-resize="dt.onResize(this, column, width)"\n                     selected="dt.isAllRowsSelected(this)"\n                     on-sort="dt.onSort(this)">\n          </dt-header>\n          <dt-body rows="rows"\n                   selected="selected"\n                   expanded="expanded"\n                   columns="dt.columnsByPin"\n                   on-select="dt.onSelect(this, rows)"\n                   on-row-click="dt.onRowClick(this, row)"\n                   column-widths="dt.columnWidths"\n                   options="options"\n                   on-page="dt.onBodyPage(this, offset, size)"\n                   on-tree-toggle="dt.onTreeToggle(this, row, cell)">\n           </dt-body>\n          <dt-footer ng-if="options.footerHeight"\n                     ng-style="{ height: options.footerHeight + \'px\' }"\n                     on-page="dt.onFooterPage(this, offset, size)"\n                     paging="options.paging">\n           </dt-footer>\n        </div>'},compile:function(o,r){return{pre:function(o,r,i,l){function s(){var e=r[0].getBoundingClientRect();if(o.options.internal.innerWidth=Math.floor(e.width),o.options.scrollbarV){var n=e.height;o.options.headerHeight&&(n-=o.options.headerHeight),o.options.footerHeight&&(n-=o.options.footerHeight),o.options.internal.bodyHeight=n}l.adjustColumns(),l.calculatePageSize()}l.buildColumns(o,r.columns),l.transposeColumnDefaults(o.options.columns),o.options.internal.scrollBarWidth=x(),n(s),r.addClass("dt-loaded"),angular.element(e).bind("resize",t(function(){n(s)}))}}}}}function k(e){var n=0,t=!0,o=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var s=i.value;n+=s.flexGrow||0}}catch(a){o=!0,r=a}finally{try{!t&&l["return"]&&l["return"]()}finally{if(o)throw r}}return n}function $(e,n){var t=0;return e.forEach(function(e){var o=n&&e[n];t+=o?e[n]:e.width}),t}function R(e,n){if(0>=n)return{columns:e,width:$(e)};for(var t=k(e),o=n,r=0,i=0,l=e.length;l>i;i++){var s=e[i];if(!s.flexGrow)return void(r+=s.width);var a=Math.floor(s.flexGrow/t*o),c=Math.floor(s.width+a);s.minWidth&&c<s.minWidth&&(c=s.minWidth),s.maxWidth&&c>s.maxWidth&&(c=s.maxWidth),r+=c,t-=s.flexGrow,o-=a,s.width=c}return{width:r}}function T(e){for(var n={left:[],center:[],right:[]},t=0,o=e.length;o>t;t++){var r=e[t];r.frozenLeft?n.left.push(r):r.frozenRight?n.right.push(r):n.center.push(r)}return n}function S(e,n){var t=$(e),o=k(e),r=Math.max(n-t,0),i=T(e);angular.forEach(i,function(e){{var n=k(e),t=Math.floor(n/o*r);R(e,t)}o-=n,r-=t})}function z(e,n,t){var o=0,r=t>-1?e.slice(t,e.length).filter(function(e){return e.canAutoResize}):e.filter(function(e){return e.canAutoResize});e.forEach(function(e){o+=e.canAutoResize?e.$$oldWidth||e.width:e.width});var i=n-o,l=Math.floor(i/r.length),s=o>n;r.forEach(function(e){if(s)e.width=e.$$oldWidth||e.width;else{e.$$oldWidth||(e.$$oldWidth=e.width);var n=e.$$oldWidth+l;e.width=e.minWith&&n<e.minWidth?e.minWidth:e.maxWidth&&n>e.maxWidth?e.maxWidth:n}})}function P(e,n){return{left:$(e.left),center:$(e.center),right:$(e.right),total:$(n)}}function W(){var e=((new Date).getTime()/1e3|0).toString(16);return e+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)}).toLowerCase()}var E=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();!function(){function e(e){Array.prototype[e]||(Array.prototype[e]=function(n){var t,o,r,i=arguments[1];if("function"!=typeof n)throw new TypeError;for(r=i?function(){return n.apply(i,arguments)}:n,t=0,o=this.length;o>t;t++)if(r(this[t],t,this)===!0)return"find"===e?this[t]:t;return"find"!==e?-1:void 0})}for(var n in{find:1,findIndex:1})e(n)}();var A=function(){function e(n){var t=this;o(this,e),n.$watch("count",function(e){t.calcTotalPages(n.size,n.count),t.getPages(n.page||1)}),n.$watch("page",function(e){0!==e&&e<=t.totalPages&&t.getPages(e)}),this.getPages(n.page||1)}return e.$inject=["$scope"],E(e,[{key:"calcTotalPages",value:function(e,n){var n=1>e?1:Math.ceil(n/e);this.totalPages=Math.max(n||0,1)}},{key:"selectPage",value:function(e,n){n>0&&n<=this.totalPages&&(e.page=n,e.onPage({page:n}))}},{key:"canPrevious",value:function(e){return 1!==e.page}},{key:"canNext",value:function(e){return e.page<=this.totalPages}},{key:"getPages",value:function(e){var n=[],t=1,o=this.totalPages,r=5,i=r<this.totalPages;i&&(t=(Math.ceil(e/r)-1)*r+1,o=Math.min(t+r-1,this.totalPages));for(var l=t;o>=l;l++)n.push({number:l,text:l,active:l===e});i&&(t>1&&n.unshift({number:t-1,text:"..."}),o<this.totalPages&&n.push({number:o+1,text:"..."})),this.pages=n}}]),e}(),G=function(){function e(n){var t=this;o(this,e),n.page=n.paging.offset+1,n.$watch("paging.offset",function(e){t.offsetChanged(n,e)})}return e.$inject=["$scope"],E(e,[{key:"offsetChanged",value:function(e,n){e.page=n+1}},{key:"onPage",value:function(e,n){e.paging.offset=n-1,e.onPage({offset:e.paging.offset,size:e.paging.size})}}]),e}();l.$inject=["$rootScope","$compile","$log"];var B=function(){function e(){o(this,e)}return E(e,[{key:"styles",value:function(e){return{width:e.width+"px"}}},{key:"cellClass",value:function(e){var n={"dt-tree-col":e.isTreeColumn};return e.className&&(n[e.className]=!0),n}},{key:"treeClass",value:function(e){return{"dt-tree-toggle":!0,"icon-right":!e.expanded,"icon-down":e.expanded}}},{key:"onTreeToggle",value:function(e,n){e.stopPropagation(),n.expanded=!n.expanded,n.onTreeToggle({cell:{value:n.value,column:n.column,expanded:n.expanded}})}},{key:"onCheckboxChange",value:function(e,n){e.stopPropagation(),n.onCheckboxChange()}},{key:"getValue",value:function(e){var n=e.column.cellDataGetter?e.column.cellDataGetter(e.value):e.value;return(void 0===n||null===n)&&(n=""),n}}]),e}(),H=function(){function e(){o(this,e)}return E(e,[{key:"onGroupToggle",value:function(e,n){e.stopPropagation(),n.onGroupToggle({group:n.row})}},{key:"treeClass",value:function(e){return{"dt-tree-toggle":!0,"icon-right":!e.expanded,"icon-down":e.expanded}}}]),e}(),M={},D=document.createElement("div").style,N=function(){var e=window.getComputedStyle(document.documentElement,""),n=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],t="WebKit|Moz|MS|O".match(new RegExp("("+n+")","i"))[1];return{dom:t,lowercase:n,css:"-"+n+"-",js:n[0].toUpperCase()+n.substr(1)}}(),O=u("transform"),V=u("backfaceVisibility"),j=!!u("transform"),L=!!u("perspective"),F=window.navigator.userAgent,I=/Safari\//.test(F)&&!/Chrome\//.test(F),X=function(){function e(){o(this,e)}return E(e,[{key:"getValue",value:function(e,n){return n.prop?h(e.row,n.prop):""}},{key:"onTreeToggle",value:function(e,n){e.onTreeToggle({cell:n,row:e.row})}},{key:"stylesByGroup",value:function(e,n){var t={width:e.columnWidths[n]+"px"};if("left"===n)d(t,e.options.internal.offsetX,0);else if("right"===n){var o=-1*(e.columnWidths.total-e.options.internal.innerWidth-e.options.internal.offsetX);d(t,o,0)}return t}},{key:"onCheckboxChange",value:function(e){e.onCheckboxChange({row:e.row})}}]),e}(),U=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),Y=function(){var e;return{create:function(n){e=n},setYOffset:function(n){e[0].scrollTop=n}}}();p.$inject=["$timeout"];var q=function(){function e(){o(this,e)}return E(e,[{key:"scrollerStyles",value:function(e){return{height:e.count*e.options.rowHeight+"px"}}}]),e}();g.$inject=["$timeout"];var Z={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},K=function(){function e(n,r,i){var l=this;o(this,e),angular.extend(this,{$scope:n,options:n.options,selected:n.selected}),this.tempRows=[],this.treeColumn=n.options.columns.find(function(e){return e.isTreeColumn}),this.groupColumn=n.options.columns.find(function(e){return e.group}),this.options.scrollbarV&&n.$watch("options.internal.offsetY",i(this.getRows.bind(this),10)),n.$watchCollection("rows",function(e,o){if(e)if(l.options.paging.externalPaging||(l.options.paging.count=e.length),n.count=l.options.paging.count,(l.treeColumn||l.groupColumn)&&l.buildRowsByGroup(),l.options.scrollbarV){var r=e&&o&&(e.length===o.length||e.length<o.length);l.getRows(r)}else{var i,s=n.rows;l.treeColumn?s=l.buildTree():l.groupColumn&&(s=l.buildGroups()),l.tempRows.splice(0,l.tempRows.length),(i=l.tempRows).push.apply(i,t(s))}}),this.options.scrollbarV&&(n.$watch("options.internal.offsetY",this.updatePage.bind(this)),n.$watch("options.paging.size",function(e,n){l.options.scrollbarV&&(!n||e>n)&&l.getRows()}),n.$watch("options.paging.count",function(e){n.count=e,l.updatePage()}),n.$watch("options.paging.offset",function(e){n.onPage({offset:e,size:l.options.paging.size})}))}return e.$inject=["$scope","$timeout","throttle"],E(e,[{key:"getFirstLastIndexes",value:function(){var e=Math.max(Math.floor((this.$scope.options.internal.offsetY||0)/this.options.rowHeight,0),0),n=Math.min(e+this.options.paging.size,this.$scope.count);return{first:e,last:n}}},{key:"updatePage",value:function(){var e=this.getFirstLastIndexes(),n=Math.ceil(e.first/this.options.paging.size);this.options.paging.offset=n}},{key:"buildRowsByGroup",value:function(){this.index={},this.rowsByGroup={};for(var e=this.treeColumn?this.treeColumn.relationProp:this.groupColumn.prop,n=0,t=this.$scope.rows.length;t>n;n++){var o=this.$scope.rows[n],r=o[e];if(r&&(this.rowsByGroup[r]?this.rowsByGroup[r].push(o):this.rowsByGroup[r]=[o]),this.treeColumn){var i=this.treeColumn.prop;if(this.index[o[i]]=o,void 0===o[e])o.$$depth=0;else{var l=this.index[o[e]];o.$$depth=l.$$depth+1,l.$$children?l.$$children.push(o[i]):l.$$children=[o[i]]}}}}},{key:"buildGroups",value:function(){var e=this,n=[];return angular.forEach(this.rowsByGroup,function(o,r){n.push({name:r,group:!0}),e.$scope.expanded[r]&&n.push.apply(n,t(o))}),n}},{key:"buildTree",value:function(){for(var e=0,n=[],o=0,r=this.$scope.rows.length;r>o;o++){var i=this.$scope.rows[o],l=i[this.treeColumn.relationProp],s=i[this.treeColumn.prop],a=this.rowsByGroup[s],c=this.$scope.expanded[s];l||(e++,n.push(i)),a&&a.length&&c&&(n.push.apply(n,t(a)),e+=a.length)}return n}},{key:"getRows",value:function(e){if((this.treeColumn||this.groupColumn)&&!this.rowsByGroup)return!1;var n;this.treeColumn?(n=this.treeTemp||[],(e||!this.treeTemp)&&(this.treeTemp=n=this.buildTree(),this.$scope.count=n.length,this.tempRows.splice(0,this.tempRows.length))):this.groupColumn?(n=this.groupsTemp||[],(e||!this.groupsTemp)&&(this.groupsTemp=n=this.buildGroups(),this.$scope.count=n.length)):(n=this.$scope.rows,e===!0&&this.tempRows.splice(0,this.tempRows.length));for(var t=0,o=this.getFirstLastIndexes(),r=o.first;r<o.last&&r<this.$scope.count;){var i=n[r];i&&(i.$$index=r,this.tempRows[t]=i),t++&&r++}}},{key:"styles",value:function n(){var n={width:this.options.internal.innerWidth+"px"};return this.options.scrollbarV?this.options.scrollbarH===!1&&(n.overflowX="hidden"):n.overflowY="hidden",this.options.scrollbarV&&(n.height=this.options.internal.bodyHeight+"px"),n}},{key:"rowStyles",value:function(e,n){var t={height:e.options.rowHeight+"px"};if(e.options.scrollbarV){var o=n?n.$$index:0,r=o*e.options.rowHeight;d(t,0,r)}return t}},{key:"groupRowStyles",value:function(e,n){var t=this.rowStyles(e,n);return t.width=e.columnWidths.total+"px",t}},{key:"rowClasses",value:function(e,n){var t={selected:this.isSelected(n)};return this.treeColumn&&(t["dt-leaf"]=this.rowsByGroup[n[this.treeColumn.relationProp]],t["dt-has-leafs"]=this.rowsByGroup[n[this.treeColumn.prop]],t["dt-depth-"+n.$$depth]=!0),t}},{key:"isSelected",value:function(e){var n=!1;return this.options.selectable&&(n=this.options.multiSelect?this.selected.indexOf(e)>-1:this.selected===e),n}},{key:"keyDown",value:function(e,n,t){if(e.preventDefault(),e.keyCode===Z.DOWN){var o=e.target.nextElementSibling;o&&o.focus()}else if(e.keyCode===Z.UP){var r=e.target.previousElementSibling;r&&r.focus()}else e.keyCode===Z.RETURN&&this.selectRow(n,t)}},{key:"rowClicked",value:function(e,n,t){this.options.checkboxSelection||(e.preventDefault(),this.selectRow(n,t)),this.$scope.onRowClick({row:t})}},{key:"selectRow",value:function(e,n){if(this.options.selectable)if(this.options.multiSelect){var t=(event.ctrlKey||event.metaKey,event.shiftKey);if(t)this.selectRowsBetween(e,n);else{var o=this.selected.indexOf(n);o>-1?this.selected.splice(o,1):(this.selected.push(n),this.$scope.onSelect({rows:[n]}))}this.prevIndex=e}else this.selected=n,this.$scope.onSelect({rows:[n]})}},{key:"selectRowsBetween",value:function(e){for(var n=e<this.prevIndex,t=[],o=0,r=this.tempRows.length;r>o;o++){var i=this.tempRows[o],l=o>=this.prevIndex&&e>=o,s=o<=this.prevIndex&&o>=e;if(n&&s||!n&&l){var a=this.selected.indexOf(i);-1===a&&(this.selected.push(i),t.push(i))}}this.$scope.onSelect({rows:t})}},{key:"getRowValue",value:function(e){return this.tempRows[e]}},{key:"getRowExpanded",value:function(e,n){return this.treeColumn?e.expanded[n[this.treeColumn.prop]]:this.groupColumn?e.expanded[n.name]:void 0}},{key:"getRowHasChildren",value:function(e){if(this.treeColumn){var n=this.rowsByGroup[e[this.treeColumn.prop]];return void 0!==n||n&&!n.length}}},{key:"onTreeToggle",value:function(e,n,o){var r=n[this.treeColumn.prop];if(e.expanded[r]=!e.expanded[r],this.options.scrollbarV)this.getRows(!0);else{var i,l=this.buildTree();this.tempRows.splice(0,this.tempRows.length),(i=this.tempRows).push.apply(i,t(l))}e.onTreeToggle({row:n,cell:o})}},{key:"onCheckboxChange",value:function(e,n){this.selectRow(e,n)}},{key:"onGroupToggle",value:function(e,n){if(e.expanded[n.name]=!e.expanded[n.name],this.options.scrollbarV)this.getRows(!0);else{var o,r=this.buildGroups();this.tempRows.splice(0,this.tempRows.length),(o=this.tempRows).push.apply(o,t(r))}}}]),e}();f.$inject=["$compile"];var _=function(){function e(){o(this,e)}return E(e,[{key:"styles",value:function(e){return{width:e.column.width+"px",minWidth:e.column.minWidth+"px",maxWidth:e.column.maxWidth+"px",height:e.column.height+"px"}}},{key:"cellClass",value:function(e){var n={sortable:e.column.sortable,"dt-header-cell":!0,resizable:e.column.resizable};return e.column.heaerClassName&&(n[e.column.headerClassName]=!0),n}},{key:"sort",value:function(e){e.column.sortable&&(e.column.sort?"asc"===e.column.sort?e.column.sort="desc":"desc"===e.column.sort&&(e.column.sort=void 0):e.column.sort="asc",e.onSort({column:e.column}))}},{key:"sortClass",value:function(e){return{"sort-btn":!0,"sort-asc icon-down":"asc"===e.column.sort,"sort-desc icon-up":"desc"===e.column.sort}}},{key:"onResize",value:function(e,n,t){e.onResize({column:t,width:n})}},{key:"onCheckboxChange",value:function(e){e.onCheckboxChange()}}]),e}();m.$inject=["$timeout"];var J=function(){function e(){o(this,e)}return E(e,[{key:"styles",value:function(e){return{width:e.options.internal.innerWidth+"px",height:e.options.headerHeight+"px"}}},{key:"innerStyles",value:function(e){return{width:e.columnWidths.total+"px"}}},{key:"onSort",value:function(e,n){e.onSort({column:n})}},{key:"stylesByGroup",value:function(e,n){var t={width:e.columnWidths[n]+"px"};if("center"===n)d(t,-1*e.options.internal.offsetX,0);else if("right"===n){var o=-1*(e.columnWidths.total-e.options.internal.innerWidth);d(t,o,0)}return t}},{key:"onCheckboxChange",
value:function(e){e.onCheckboxChange()}},{key:"onResize",value:function(e,n,t){e.onResize({column:n,width:t})}}]),e}();y.$inject=["$timeout"],b.$inject=["$document","debounce","$timeout"],C.$inject=["$window","$timeout","throttle"];var Q=Object.freeze({frozenLeft:!1,frozenRight:!1,className:void 0,heaerClassName:void 0,flexGrow:0,minWidth:void 0,maxWidth:void 0,width:150,resizable:!0,comparator:void 0,sortable:!0,sort:void 0,headerRenderer:void 0,cellRenderer:void 0,cellDataGetter:void 0,isTreeColumn:!1,isCheckboxColumn:!1,headerCheckbox:!1,canAutoResize:!0}),ee=Object.freeze({scrollbarV:!0,rowHeight:30,columnMode:"standard",loadingMessage:"Loading...",emptyMessage:"No data to display",headerHeight:30,footerHeight:0,paging:{externalPaging:!1,size:void 0,count:0,offset:0},selectable:!1,multiSelect:!1,checkboxSelection:!1,reorderable:!0,internal:{offsetX:0,offsetY:0,innerWidth:0,bodyHeight:300}}),ne=function(){function e(n,t,r,i){var l=this;o(this,e),angular.extend(this,{$scope:n,$filter:t,$log:r}),this.defaults(n),n.options.$outer=n.$parent,n.$watch("options.columns",function(e,n){e.length>n.length&&l.transposeColumnDefaults(e),e.length!==n.length&&l.adjustColumns(),l.calculateColumns()},!0)}return e.$inject=["$scope","$filter","$log","$transclude"],E(e,[{key:"buildColumns",value:function(e,n){if(n&&n.length){var t=[];angular.forEach(n,function(e){var n={};angular.forEach(e.attributes,function(e){var t=c(e.name);if(Q.hasOwnProperty(t)){var o=e.value;isNaN(e.value)||(o=parseInt(e.value)),n[t]=o}"class"===t&&(n.className=e.value),"name"===t&&(n.name=e.value)}),""!==e.innerHTML&&(n.template=e.innerHTML),t.push(n)}),e.options.columns=t}}},{key:"defaults",value:function(e){var n=this;e.expanded=e.expanded||{};var t=angular.extend(angular.copy(ee),e.options);t.paging=angular.extend(angular.copy(ee.paging),e.options.paging),e.options=t,e.options.selectable&&e.options.multiSelect&&(e.selected=e.selected||[]);var o=e.$watch("rows",function(t){t&&(o(),n.onSort(e))})}},{key:"transposeColumnDefaults",value:function(e){for(var n=0,t=e.length;t>n;n++){var o=e[n];o.$id=W(),angular.forEach(Q,function(e,n){o.hasOwnProperty(n)||(o[n]=e)}),o.name&&!o.prop&&(o.prop=c(o.name)),e[n]=o}}},{key:"calculateColumns",value:function(){var e=this.$scope.options.columns;this.columnsByPin=T(e),this.columnWidths=P(this.columnsByPin,e)}},{key:"tableCss",value:function(e){return{fixed:e.options.scrollbarV,selectable:e.options.selectable,checkboxable:e.options.checkboxSelection}}},{key:"adjustColumns",value:function(e){var n=this.$scope.options.internal.innerWidth-this.$scope.options.internal.scrollBarWidth;"force"===this.$scope.options.columnMode?z(this.$scope.options.columns,n,e):"flex"===this.$scope.options.columnMode&&S(this.$scope.options.columns,n)}},{key:"calculatePageSize",value:function(){this.$scope.options.paging.size=Math.ceil(this.$scope.options.internal.bodyHeight/this.$scope.options.rowHeight)+1}},{key:"onSort",value:function(e){if(e.rows){var n=e.options.columns.filter(function(e){return e.sort});if(n.length){this.$scope.onSort&&this.$scope.onSort({sorts:n});for(var o=[],r=0,i=n.length;i>r;r++){var l=n[r];if(l.comparator!==!1){var s="asc"===l.sort?"":"-";o.push(s+l.prop)}}if(o.length){var a,c=this.$filter("orderBy")(e.rows,o);e.rows.splice(0,e.rows.length),(a=e.rows).push.apply(a,t(c))}}Y.setYOffset(0)}}},{key:"onTreeToggle",value:function(e,n,t){e.onTreeToggle({row:n,cell:t})}},{key:"onBodyPage",value:function(e,n,t){e.onPage({offset:n,size:t})}},{key:"onFooterPage",value:function(e,n,t){var o=e.options.rowHeight*t,r=o*n;Y.setYOffset(r)}},{key:"onHeaderCheckboxChange",value:function(e){if(e.rows){var n=e.selected.length===e.rows.length;if(e.selected.splice(0,e.selected.length),!n){var o;(o=e.selected).push.apply(o,t(e.rows))}}}},{key:"isAllRowsSelected",value:function(e){return e.rows?e.selected.length===e.rows.length:!1}},{key:"onResize",value:function(e,n,t){var o=e.options.columns.indexOf(n);if(o>-1){var n=e.options.columns[o];n.width=t,n.canAutoResize=!1,this.adjustColumns(o),this.calculateColumns()}}},{key:"onSelect",value:function(e,n){e.onSelect({rows:n})}},{key:"onRowClick",value:function(e,n){e.onRowClick({row:n})}}]),e}(),te=angular.module("data-table",[]).controller("DataTable",ne).directive("dtable",C).directive("resizable",b).directive("sortable",y).constant("debounce",w).constant("throttle",v).controller("HeaderController",J).directive("dtHeader",m).controller("HeaderCellController",_).directive("dtHeaderCell",f).controller("BodyController",K).directive("dtBody",g).controller("ScrollerController",q).directive("dtScroller",p).controller("RowController",X).directive("dtRow",a).controller("GroupRowController",H).directive("dtGroupRow",s).controller("CellController",B).directive("dtCell",l).controller("FooterController",G).directive("dtFooter",i).controller("PagerController",A).directive("dtPager",r);n.exports=te});