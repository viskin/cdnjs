/**
 * API Bound Models for AngularJS
 * @version v0.12.2 - 2014-02-27
 * @link https://github.com/angular-platanus/restmod
 * @author Ignacio Baixas <iobaixas@gmai.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";var c=a.isObject;a.module("plRestmod").factory("DebouncedModel",["$restmod","SyncMask","$timeout","$q",function(a,d,e,f){function g(a,b,c,d){return function(){var e=a.$promise;a.$promise=d,b.call(a).$promise.then(function(b){c.resolve(b),a.$promise=e},function(b){c.reject(b),a.$promise=e}),a.$dmStatus=null}}return a.mixin(function(){this.attrMask("$dmStatus",d.SYSTEM_ALL).define("$dmTimeout",500).define("$dmAdjourn",!0).extend("setDebounceOptions",function(a){return a.timeout!==b&&this.define("$dmTimeout",a.timeout),a.adjourn!==b&&this.define("$dmAdjourn",a.adjourn),this}).define("$save",function(a){var d=this.$dmTimeout,h=this.$dmAdjourn,i=this.$dmStatus;if(a!==b&&c(a)&&(a.timeout!==b&&(d=a.timeout),a.adjourn!==b&&(h=a.adjourn)),i)h&&(e.cancel(i.timeout),d?i.timeout=e(i.save,d):i.save()),this.$promise=i.promise;else{if(!d)return this.$super();var j=f.defer(),k=g(this,this.$super,j,this.$promise);this.$dmStatus={save:k,promise:j.promise,timeout:e(k,d)},this.$promise=j.promise}return this}).define("$saveNow",function(){return this.$save({timeout:0,adjourn:!0})})})}])}(angular);