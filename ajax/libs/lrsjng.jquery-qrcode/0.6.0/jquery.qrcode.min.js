/*! {{pkg.displayName}} {{pkg.version}} - //larsjung.de/qrcode - MIT License */
(function(d){var l=function(B,t,y,w){var z=qrcode(y,t);z.addData(B);z.make();w=w||0;var x=z.getModuleCount(),u=z.getModuleCount()+2*w,v=function(D,C){D-=w;C-=w;if(D<0||D>=x||C<0||C>=x){return false}return z.isDark(D,C)},A=function(D,G,H,C){var F=this.isDark,E=1/u;this.isDark=function(M,J){var N=J*E,I=M*E,K=N+E,L=I+E;return F(M,J)&&(D>K||N>H||G>L||I>C)}};this.text=B;this.level=t;this.version=y;this.moduleCount=u;this.isDark=v;this.addBlank=A},m=(function(){var t=document.createElement("canvas");return !!(t.getContext&&t.getContext("2d"))}()),g=Object.prototype.toString.call(window.opera)!=="[object Opera]",j=function(y,z,w,x,u){w=Math.max(1,w||1);x=Math.min(40,x||40);for(var t=w;t<=x;t+=1){try{return new l(y,z,t,u)}catch(v){}}},r=function(C,u,z){var v="bold "+(z.labelsize*z.size)+"px "+z.fontname,G=d("<canvas/>")[0].getContext("2d");G.font=v;var D=G.measureText(z.label).width,A=z.labelsize,E=D/z.size,y=(1-E)/2,F=(1-A)/2,t=y+E,B=F+A,x=0.01;if(z.mode===1){C.addBlank(0,F-x,size,B+x)}else{C.addBlank(y-x,F-x,t+x,B+x)}u.fillStyle=z.fontcolor;u.textAlign="center";u.font=v;u.fillText(d("#label").val(),0.5*z.size,0.5*z.size+0.3*z.labelsize*z.size)},c=function(C,u,y){var G=y.size,D=y.image.naturalWidth||1,z=y.image.naturalHeight||1,A=y.imagesize,E=A*D/z,x=(1-E)/2,F=(1-A)/2,t=x+E,B=F+A,v=0.01;if(y.mode===3){C.addBlank(0,F-v,G,B+v)}else{C.addBlank(x-v,F-v,t+v,B+v)}u.drawImage(y.image,x*G,F*G,E*G,A*G)},k=function(t,u,v){if(v.bgColor){u.fillStyle=v.bgColor;u.fillRect(v.left,v.top,v.size,v.size)}var w=v.mode;if(w===1||w===2){r(t,u,v)}else{if(w===3||w===4){c(t,u,v)}}},q=function(t,v,x,z,y,w,A,u){if(t.isDark(A,u)){v.rect(z,y,w,w)}},a=function(D,v,C,u,A,z,x,w,y,B){if(x){D.moveTo(v+z,C)}else{D.moveTo(v,C)}if(w){D.lineTo(u-z,C);D.arcTo(u,C,u,A,z)}else{D.lineTo(u,C)}if(y){D.lineTo(u,A-z);D.arcTo(u,A,v,A,z)}else{D.lineTo(u,A)}if(B){D.lineTo(v+z,A);D.arcTo(v,A,v,C,z)}else{D.lineTo(v,A)}if(x){D.lineTo(v,C+z);D.arcTo(v,C,u,C,z)}else{D.lineTo(v,C)}},i=function(D,v,C,u,A,z,x,w,y,B){if(x){D.moveTo(v+z,C);D.lineTo(v,C);D.lineTo(v,C+z);D.arcTo(v,C,v+z,C,z)}if(w){D.moveTo(u-z,C);D.lineTo(u,C);D.lineTo(u,C+z);D.arcTo(u,C,u-z,C,z)}if(y){D.moveTo(u-z,A);D.lineTo(u,A);D.lineTo(u,A-z);D.arcTo(u,A,u-z,A,z)}if(B){D.moveTo(v+z,A);D.lineTo(v,A);D.lineTo(v,A-z);D.arcTo(v,A,v+z,A,z)}},b=function(t,w,N,z,I,K,D,A){var v=t.isDark,P=z+K,E=I+K,y=N.radius*K,u=D-1,H=D+1,C=A-1,x=A+1,Q=v(D,A),J=v(u,C),L=v(u,A),M=v(u,x),F=v(D,x),R=v(H,x),G=v(H,A),O=v(H,C),B=v(D,C);if(Q){a(w,z,I,P,E,y,!L&&!B,!L&&!F,!G&&!F,!G&&!B)}else{i(w,z,I,P,E,y,L&&B&&J,L&&F&&M,G&&F&&R,G&&B&&O)}},p=function(B,u,z){var x=B.moduleCount,F=z.size/x,A=q,E,v;if(g&&z.radius>0&&z.radius<=0.5){A=b}u.beginPath();for(E=0;E<x;E+=1){for(v=0;v<x;v+=1){var y=z.left+v*F,D=z.top+E*F,C=F;A(B,u,z,y,D,C,E,v)}}u.fillStyle=z.color;u.fill()},f=function(u,w){var t=j(w.text,w.ecLevel,w.minVersion,w.maxVersion,w.quiet);if(!t){return null}var x=d(u).data("qrcode",t),v=x[0].getContext("2d");k(t,v,w);p(t,v,w);return x},o=function(t){var u=d("<canvas/>").attr("width",t.size).attr("height",t.size);return f(u,t)},s=function(t){return d("<img/>").attr("src",o(t)[0].toDataURL("image/png"))},e=function(x){var B=j(x.text,x.ecLevel,x.minVersion,x.maxVersion,x.quiet);if(!B){return null}var t=x.size,F=x.bgColor,C=Math.floor,w=B.moduleCount,E=C(t/w),y=C(0.5*(t-E*w)),D,v,A={position:"relative",left:0,top:0,padding:0,margin:0,width:t,height:t},u={position:"absolute",padding:0,margin:0,width:E,height:E,"background-color":x.color},z=d("<div/>").data("qrcode",B).css(A);if(F){z.css("background-color",F)}for(D=0;D<w;D+=1){for(v=0;v<w;v+=1){if(B.isDark(D,v)){d("<div/>").css(u).css({left:y+v*E,top:y+D*E}).appendTo(z)}}}return z},n=function(t){if(m&&t.render==="canvas"){return o(t)}else{if(m&&t.render==="image"){return s(t)}}return e(t)},h={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,color:"#000",bgColor:null,text:"no text",radius:0,quiet:0,mode:0,label:"no label",labelsize:0.1,fontname:"sans",fontcolor:"#000",image:null,imagesize:0.1};d.fn.qrcode=function(t){var u=d.extend({},h,t);return this.each(function(){if(this.nodeName.toLowerCase()==="canvas"){f(this,u)}else{d(this).append(n(u))}})}}(jQuery));