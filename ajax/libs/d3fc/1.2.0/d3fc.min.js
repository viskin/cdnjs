/*! d3fc 16-09-2015 */

!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("css-layout"),require("d3")):"function"==typeof define&&define.amd?define(["css-layout","d3"],b):a.fc=b(a.computeLayout,a.d3)}(this,function(a,b){"use strict";function c(a){var b=a.ownerDocument.defaultView.getComputedStyle(a);return{width:parseFloat(b.width)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight),height:parseFloat(b.height)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)}}function d(){function b(a){if(!a)return{};var b=a.split(";"),c={};return b.forEach(function(a){var b=a.split(":");if(2===b.length){var d=b[0].trim(),e=b[1].trim();c[d]=isNaN(e)?e:Number(e)}}),c}function d(a){function c(){for(var b=[],c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];1===e.nodeType&&e.getAttribute("layout-css")&&b.push(d(e))}return b}return{style:b(a.getAttribute("layout-css")),children:c(a),element:a}}function e(a){a.element.setAttribute("layout-width",a.layout.width),a.element.setAttribute("layout-height",a.layout.height),a.element.nodeName.match(/(?:svg|rect)/i)?(a.element.setAttribute("width",a.layout.width),a.element.setAttribute("height",a.layout.height),a.element.setAttribute("x",a.layout.left),a.element.setAttribute("y",a.layout.top)):a.element.setAttribute("transform","translate("+a.layout.left+", "+a.layout.top+")"),a.children.forEach(e)}var f=-1,g=-1,h=function(b){b.each(function(b){var h=c(this),i=d(this);i.style.width=-1!==f?f:h.width,i.style.height=-1!==g?g:h.height,a(i),e(i)})};return h.width=function(a){return arguments.length?(f=a,h):f},h.height=function(a){return arguments.length?(g=a,h):g},h}function e(a,b){return function(c,d){var e={xInDomainUnits:!1,x:c,yInDomainUnits:!1,y:d};return a.invert&&(e.xInDomainUnits=!0,e.x=a.invert(c)),b.invert&&(e.yInDomainUnits=!0,e.y=b.invert(d)),e}}function f(a,b,c,d,e,f){return f=f||function(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)},function(g,h){var i=e.map(function(e){var i=f(g,h,a(c(e)),b(d(e)));return[i,e]}).reduce(function(a,b){return a[0]>b[0]?b:a},[Number.MAX_VALUE,null])[1];return{datum:i,x:i?c(i):g,xInDomainUnits:Boolean(i),y:i?d(i):h,yInDomainUnits:Boolean(i)}}}function g(a,b,c){return function(d,e){var g=a.xScale(),h=a.yScale(),i=a.xValue(),j=(a.yValue||a.yCloseValue).call(a);return f(g,h,i,j,b,c)(d,e)}}function h(a,b){function c(a,b,c,d){var e=a-c;return Math.abs(e)}return g(a,b,c)}function i(a,b){function c(a,b,c,d){var e=b-d;return Math.abs(e)}return g(a,b,c)}function j(a){return a.rangeExtent}function k(a){return j(a)?a.rangeExtent():a.range()}function l(a,c,d){return"object"!=typeof d?b.rebind.apply(b,arguments):(Object.keys(d).forEach(function(b){var e=c[d[b]];if("function"!=typeof e)throw new Error("The method "+d[b]+" does not exist on the source object");a[b]=function(){var b=e.apply(c,arguments);return b===c?a:b}}),a)}function m(a){return a[0].toUpperCase()+a.slice(1)}function n(a,b,c,d){if(3===arguments.length)d=[];else if(4===arguments.length)Array.isArray(d)||(d=[d]);else{var e=Array.prototype.slice.call(arguments);d=e.slice(3)}d.forEach(function(a){if(!b.hasOwnProperty(a))throw new Error("The method "+a+" does not exist on the source object")});var f={};for(var g in b)b.hasOwnProperty(g)&&-1===d.indexOf(g)&&(f[c+m(g)]=g);l(a,b,f)}function o(a){return function(c){if(c.length<=1)return 10;c.sort();var d=b.pairs(c).map(function(a){return Math.abs(a[0]-a[1])}),e=b.min(d);return a*e}}function p(){return this}function q(a){return a}function r(a,b){return b}function s(a){}function t(a,c){return Array.isArray(a[0])||(a=[a]),Array.isArray(c)||(c=[c]),"function"!=typeof c[0]&&(c=c.map(function(a){return function(b){return b[a]}})),[b.min(a,function(a){return b.min(a,function(a){return b.min(c.map(function(b){return b(a)}))})}),b.max(a,function(a){return b.max(a,function(a){return b.max(c.map(function(b){return b(a)}))})})]}function u(a){var b=a;return"number"==typeof b&&(b={top:a,bottom:a,left:a,right:a}),["top","bottom","left","right"].forEach(function(a){b[a]||(b[a]=0)}),b}function v(){var a="g",c=!1,d="g",e={},f=r,g=function(g,h){var i=h||q;g.selectAll&&g.node||(g=b.select(g));var j=g.selectAll(a);c&&(j=j.filter(function(){return this.parentNode===g.node()}));var k=j.data(i,f),l=k.enter().insert(d).attr(e).style("opacity",va),m=b.transition(k.exit()).style("opacity",va).remove();return k=b.transition(k).style("opacity",1),k.enter=b.functor(l),k.exit=b.functor(m),k};return g.selector=function(b){return arguments.length?(a=b,g):a},g.children=function(a){return arguments.length?(c=a,g):c},g.element=function(a){return arguments.length?(d=a,g):d},g.attr=function(a){if(!arguments.length)return e;if(1===arguments.length)e=arguments[0];else if(2===arguments.length){var b=arguments[0],c=arguments[1];e[b]=c}return g},g.key=function(a){return arguments.length?(f=a,g):f},g}function w(){function a(){var a=b.select(this),c=a.datum()[0];if("DONE"!==c.state){var d=b.mouse(this),e=k.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function c(){var c=b.select(this).on("click.measure",g).on("mousemove.measure",d).on("mouseleave.measure",f),e=c.datum();null==e[0]&&e.push({state:"SELECT_SOURCE"}),a.call(this),c.call(t)}function d(){var c=b.select(this);a.call(this),c.call(t)}function f(){var a=b.select(this),c=a.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),a.on("click.measure",null).on("mousemove.measure",null).on("mouseleave.measure",null)}function g(){var c=b.select(this),d=c.datum()[0];switch(d.state){case"SELECT_SOURCE":a.call(this),h.measuresource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":a.call(this),h.measuretarget.apply(this,arguments),d.state="DONE";break;case"DONE":h.measureclear.apply(this,arguments),d.state="SELECT_SOURCE",a.call(this);break;default:throw new Error("Unknown state "+d.state)}c.call(t)}var h=b.dispatch("measuresource","measuretarget","measureclear"),i=b.time.scale(),j=b.scale.linear(),k=function(a,b){return e(i,j)(a,b)},l=s,m=b.functor(""),n=b.functor(""),o=b.functor(2),p=function(a){return a.xInDomainUnits?i(a.x):a.x},q=function(a){return a.yInDomainUnits?j(a.y):a.y},r=v().selector("g.measure").element("g").attr("class","measure"),t=function(a){a.each(function(a,d){var e=b.select(this).style("pointer-events","all").on("mouseenter.measure",c),f=e.selectAll("rect").data([a]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",i.range()[0]).attr("y",j.range()[1]).attr("width",i.range()[1]).attr("height",j.range()[0]);var g=r(e,a),h=g.enter();h.append("line").attr("class","tangent"),h.append("line").attr("class","horizontal"),h.append("line").attr("class","vertical"),h.append("text").attr("class","horizontal"),h.append("text").attr("class","vertical"),g.select("line.tangent").attr("x1",function(a){return p(a.source)}).attr("y1",function(a){return q(a.source)}).attr("x2",function(a){return p(a.target)}).attr("y2",function(a){return q(a.target)}),g.select("line.horizontal").attr("x1",function(a){return p(a.source)}).attr("y1",function(a){return q(a.source)}).attr("x2",function(a){return p(a.target)}).attr("y2",function(a){return q(a.source)}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.vertical").attr("x1",function(a){return p(a.target)}).attr("y1",function(a){return q(a.target)}).attr("x2",function(a){return p(a.target)}).attr("y2",function(a){return q(a.source)}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"});var k=o.apply(this,arguments);g.select("text.horizontal").attr("x",function(a){return p(a.source)+(p(a.target)-p(a.source))/2}).attr("y",function(a){return q(a.source)-k}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(m),g.select("text.vertical").attr("x",function(a){return p(a.target)+k}).attr("y",function(a){return q(a.source)+(q(a.target)-q(a.source))/2}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(n),l(g,a,d)})};return t.xScale=function(a){return arguments.length?(i=a,t):i},t.yScale=function(a){return arguments.length?(j=a,t):j},t.snap=function(a){return arguments.length?(k=a,t):k},t.decorate=function(a){return arguments.length?(l=a,t):l},t.xLabel=function(a){return arguments.length?(m=b.functor(a),t):m},t.yLabel=function(a){return arguments.length?(n=b.functor(a),t):n},t.padding=function(a){return arguments.length?(o=b.functor(a),t):o},b.rebind(t,h,"on"),t}function x(){function a(){var a=b.select(this),c=a.datum()[0];if("DONE"!==c.state){var d=b.mouse(this),e=k.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function c(){var c=b.select(this).on("click.fan",g).on("mousemove.fan",d).on("mouseleave.fan",f),e=c.datum();null==e[0]&&e.push({state:"SELECT_SOURCE"}),a.call(this),c.call(p)}function d(){var c=b.select(this);a.call(this),c.call(p)}function f(){var a=b.select(this),c=a.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),a.on("click.fan",null).on("mousemove.fan",null).on("mouseleave.fan",null)}function g(){var c=b.select(this),d=c.datum()[0];switch(d.state){case"SELECT_SOURCE":a.call(this),h.fansource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":a.call(this),h.fantarget.apply(this,arguments),d.state="DONE";break;case"DONE":h.fanclear.apply(this,arguments),d.state="SELECT_SOURCE",a.call(this);break;default:throw new Error("Unknown state "+d.state)}c.call(p)}var h=b.dispatch("fansource","fantarget","fanclear"),i=b.time.scale(),j=b.scale.linear(),k=function(a,b){return e(i,j)(a,b)},l=s,m=function(a){return a.xInDomainUnits?i(a.x):a.x},n=function(a){return a.yInDomainUnits?j(a.y):a.y},o=v().selector("g.fan").element("g").attr("class","fan"),p=function(a){a.each(function(a,d){var e=b.select(this).style("pointer-events","all").on("mouseenter.fan",c),f=e.selectAll("rect").data([a]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",i.range()[0]).attr("y",j.range()[1]).attr("width",i.range()[1]).attr("height",j.range()[0]);var g=o(e,a);g.each(function(a){if(a.x=i.range()[1],a.ay=a.by=a.cy=n(a.target),m(a.source)!==m(a.target)){if("DONE"===a.state&&m(a.source)>m(a.target)){var b=a.source;a.source=a.target,a.target=b}var c=(n(a.target)-n(a.source))/(m(a.target)-m(a.source)),d=a.x-m(a.source),e=c*d;a.ay=.618*e+n(a.source),a.by=.5*e+n(a.source),a.cy=.382*e+n(a.source)}});var h=g.enter();h.append("line").attr("class","trend"),h.append("line").attr("class","a"),h.append("line").attr("class","b"),h.append("line").attr("class","c"),h.append("polygon").attr("class","area"),g.select("line.trend").attr("x1",function(a){return m(a.source)}).attr("y1",function(a){return n(a.source)}).attr("x2",function(a){return m(a.target)}).attr("y2",function(a){return n(a.target)}),g.select("line.a").attr("x1",function(a){return m(a.source)}).attr("y1",function(a){return n(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.ay}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.b").attr("x1",function(a){return m(a.source)}).attr("y1",function(a){return n(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.by}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.c").attr("x1",function(a){return m(a.source)}).attr("y1",function(a){return n(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("polygon.area").attr("points",function(a){return m(a.source)+","+n(a.source)+" "+a.x+","+a.ay+" "+a.x+","+a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),l(g,a,d)})};return p.xScale=function(a){return arguments.length?(i=a,p):i},p.yScale=function(a){return arguments.length?(j=a,p):j},p.snap=function(a){return arguments.length?(k=a,p):k},p.decorate=function(a){return arguments.length?(l=a,p):l},b.rebind(p,h,"on"),p}function y(){var a=b.time.scale(),c=b.scale.linear(),d=[],e=p,f=r,g=s,h=v().selector("g.multi").children(!0).attr("class","multi").element("g").key(function(a,b){var c=this.__series__||a;return f.call(this,c,b)}),i=function(f){f.each(function(f){var i=h(this,d);i.each(function(d,g){this.__series__=d,(d.xScale||d.x).call(d,a),(d.yScale||d.y).call(d,c),b.select(this).datum(e.call(f,d,g)).call(d)}),g(i)})};return i.xScale=function(b){return arguments.length?(a=b,i):a},i.yScale=function(a){return arguments.length?(c=a,i):c},i.series=function(a){return arguments.length?(d=a,i):d},i.mapping=function(a){return arguments.length?(e=a,i):e},i.key=function(a){return arguments.length?(f=a,i):f},i.decorate=function(a){return arguments.length?(g=a,i):g},i}function z(){var a=b.time.scale(),c=b.scale.linear(),d=q,e=r,f=d,g=s,h="horizontal",i=v().selector("g.annotation").element("g").attr("class","annotation"),j=function(e){e.each(function(e,j){var l,m,n,o,p,q,r={x:-5,y:-5};switch(h){case"horizontal":n=function(a,b){return"translate("+a+", "+b+")"},o="x2",m=a,l=c,p="left-handle",q="right-handle";break;case"vertical":n=function(a,b){return"translate("+b+", "+a+")"},o="y2",m=c,l=a,r.transform="rotate(-90)",p="bottom-handle",q="top-handle";break;default:throw new Error("Invalid orientation")}var s=k(m),t=function(a){var b=l(d(a));return n(s[0],b)},u=s[1]-s[0],v=b.select(this),w=i(v,e),x=w.enter().attr("transform",t);x.append("line").attr(o,u),x.append("g").classed(p,!0),x.append("g").classed(q,!0).attr("transform",n(u,0)).append("text").attr(r),w.attr("transform",t),w.select("line").attr(o,u),w.select("g."+q).attr("transform",n(u,0)),w.select("text").text(f),g(w,e,j)})};return j.xScale=function(b){return arguments.length?(a=b,j):a},j.yScale=function(a){return arguments.length?(c=a,j):c},j.value=function(a){return arguments.length?(d=b.functor(a),j):d},j.keyValue=function(a){return arguments.length?(e=b.functor(a),j):e},j.label=function(a){return arguments.length?(f=b.functor(a),j):f},j.decorate=function(a){return arguments.length?(g=a,j):g},j.orient=function(a){return arguments.length?(h=a,j):h},j}function A(){var a=s,c=b.time.scale(),d=b.scale.linear(),e=function(a,b){return a.close},f=function(a,b){return a.date},g=b.functor(5),h=v().selector("g.point").element("g").attr("class","point"),i=function(a,b){var g=c(f(a,b)),h=d(e(a,b));return"translate("+g+", "+h+")"},j=function(b){b.each(function(b,c){var d=h(this,b);d.enter().attr("transform",i).append("circle"),d.attr("transform",i),d.select("circle").attr("r",g),a(d,b,c)})};return j.decorate=function(b){return arguments.length?(a=b,j):a},j.xScale=function(a){return arguments.length?(c=a,j):c},j.yScale=function(a){return arguments.length?(d=a,j):d},j.xValue=function(a){return arguments.length?(f=a,j):f},j.yValue=function(a){return arguments.length?(e=a,j):e},j.radius=function(a){return arguments.length?(g=a,j):g},b.rebind(j,h,"key"),j}function B(){function a(a){return b.scale.identity().range(k(a))}function c(){var a=b.mouse(this),c=b.select(this),d=j.apply(this,a),e=c.datum();e.push(d),c.call(u),g.trackingstart.apply(this,arguments)}function d(){var a=b.mouse(this),c=b.select(this),d=j.apply(this,a),e=c.datum();e[e.length-1]=d,c.call(u),g.trackingmove.apply(this,arguments)}function f(){var a=b.select(this),c=a.datum();c.pop(),a.call(u),g.trackingend.apply(this,arguments)}var g=b.dispatch("trackingstart","trackingmove","trackingend"),h=b.time.scale(),i=b.scale.linear(),j=function(a,b){return e(h,i)(a,b)},m=s,n=function(a){return a.xInDomainUnits?h(a.x):a.x},o=function(a){return a.yInDomainUnits?i(a.y):a.y},p=v().children(!0).selector("g.crosshair").element("g").attr("class","crosshair"),q=A().xValue(n).yValue(o),r=z().value(o).label(function(a){return a.y}),t=z().orient("vertical").value(n).label(function(a){return a.x}),u=function(e){e.each(function(e,g){var j=b.select(this).style("pointer-events","all").on("mouseenter.crosshair",c).on("mousemove.crosshair",d).on("mouseleave.crosshair",f),l=j.selectAll("rect").data([e]);l.enter().append("rect").style("visibility","hidden"),j.select("rect").attr("x",k(h)[0]).attr("y",k(i)[1]).attr("width",k(h)[1]).attr("height",k(i)[0]);var n=p(j,e);n.enter().style("pointer-events","none");var o=y().series([r,t,q]).xScale(a(h)).yScale(a(i)).mapping(function(){return[this]});n.call(o),m(n,e,g)})};return u.xScale=function(a){return arguments.length?(h=a,u):h},u.yScale=function(a){return arguments.length?(i=a,u):i},u.snap=function(a){return arguments.length?(j=a,u):j},u.decorate=function(a){return arguments.length?(m=a,u):m},b.rebind(u,g,"on"),l(u,r,{yLabel:"label"}),l(u,t,{xLabel:"label"}),u}function C(){var a=function(a,b){return a.date},c=function(a,b){return a.open},d=function(a,b){return a.high},e=function(a,b){return a.low},f=function(a,b){return a.close},g=b.functor(3),h=function(b){return b.map(function(b,h){var i=a(b,h),j=c(b,h),k=d(b,h),l=e(b,h),m=f(b,h),n=g(b,h)/2,o="M"+i+","+l,p="V"+k,q="M"+i+","+j+"h"+-n,r="M"+i+","+m+"h"+n;return o+p+q+r}).join("")};return h.x=function(b){return arguments.length?(a=b,h):a},h.open=function(a){return arguments.length?(c=a,h):c},h.high=function(a){return arguments.length?(d=a,h):d},h.low=function(a){return arguments.length?(e=a,h):e},h.close=function(a){return arguments.length?(f=a,h):f},h.width=function(a){return arguments.length?(g=b.functor(a),h):g},h}function D(){var a=function(a,b){return a.date},c=function(a,b){return a.open},d=function(a,b){return a.high},e=function(a,b){return a.low},f=function(a,b){return a.close},g=b.functor(3),h=function(b){return b.map(function(b,h){var i=a(b,h),j=c(b,h),k=d(b,h),l=e(b,h),m=f(b,h),n=g(b,h),o="M"+(i-n/2)+","+j+"h"+n+"V"+m+"h"+-n+"V"+j+"z",p="M"+i+","+Math.min(m,j)+"V"+k,q="M"+i+","+Math.max(m,j)+"V"+l;return o+p+q}).join("")};return h.x=function(b){return arguments.length?(a=b,h):a},h.open=function(a){return arguments.length?(c=a,h):c},h.high=function(a){return arguments.length?(d=a,h):d},h.low=function(a){return arguments.length?(e=a,h):e},h.close=function(a){return arguments.length?(f=a,h):f},h.width=function(a){return arguments.length?(g=b.functor(a),h):g},h}function E(){var a=function(a,b){return a.x},c=function(a,b){return a.y},d="center",e=function(a,b){return a.height},f=b.functor(3),g=function(b,g){return b.map(function(b,h){var i,j=a.call(this,b,g||h),k=c.call(this,b,g||h),l=e.call(this,b,g||h),m=f.call(this,b,g||h);switch(d){case"left":i=m;break;case"right":i=0;break;case"center":i=m/2;break;default:throw new Error("Invalid alignment")}var n="M"+(j-i)+","+k+"h"+m+"v"+l+"h"+-m+"z";return n},this).join("")};return g.x=function(c){return arguments.length?(a=b.functor(c),g):a},g.y=function(a){return arguments.length?(c=b.functor(a),g):c},g.width=function(a){return arguments.length?(f=b.functor(a),g):f},g.align=function(a){return arguments.length?(d=a,g):d},g.height=function(a){return arguments.length?(e=b.functor(a),g):e},g}function F(){function a(a,b){return function(c){return b(a(c),0)}}function c(a,b){return e()?"translate("+b+", "+a+")":"translate("+a+", "+b+")"}function d(a){return e()?a.map(function(a){return[a[1],a[0]]}):a}function e(){return"left"===i||"right"===i}function f(a,b){return g[a]?g[a].apply(g,l):b}var g=b.scale.identity(),h=s,i="bottom",l=[10],m=null,n=null,o=6,p=6,r=3,t=b.svg.line(),u=v().selector("g.tick").element("g").key(q).attr("class","tick"),w=v().selector("path.domain").element("path").attr("class","domain"),x=function(e){e.each(function(e,l){var s=this.__chart__||g;this.__chart__=g.copy();var v=null==m?f("ticks",g.domain()):m,x=null==n?f("tickFormat",q):n,y="bottom"===i||"right"===i?1:-1,z=b.select(this),A=k(g),B=d([[A[0],y*o],[A[0],0],[A[1],0],[A[1],y*o]]),C=w(z,[e]);C.attr("d",t(B)),u.attr({transform:a(j(g)?g:s,c)});var D=u(z,v);D.enter().append("path");var E=y*(p+r);D.enter().append("text").attr("transform",c(0,E)),D.attr("class","tick orient-"+i),D.attr("transform",a(g,c)),D.selectAll("path").attr("d",function(a){return t(d([[0,0],[0,y*p]]))}),D.selectAll("text").attr("transform",c(0,E)).text(x),j(g)||D.exit().attr("transform",a(g,c)),h(D,e,l)})};return x.scale=function(a){return arguments.length?(g=a,x):g},x.ticks=function(a){return arguments.length?(l=arguments,x):l},x.tickValues=function(a){return arguments.length?(m=a,x):m},x.tickFormat=function(a){return arguments.length?(n=a,x):n},x.tickSize=function(a){var b=arguments.length;return b?(p=Number(a),o=Number(arguments[b-1]),x):p},x.innerTickSize=function(a){return arguments.length?(p=Number(a),x):p},x.outerTickSize=function(a){return arguments.length?(o=Number(a),x):o},x.tickPadding=function(a){return arguments.length?(r=a,x):r},x.orient=function(a){return arguments.length?(i=a,x):i},x.decorate=function(a){return arguments.length?(h=a,x):h},x}function G(){var a=s,c=function(c){c.each(function(c){var d=b.select(this),e=v().selector("g.stacked").element("g").attr("class","stacked");e(d,c).call(a)})};return c.series=function(b){return arguments.length?(a=b,c):a},c}function H(){var a=s,c=b.time.scale(),d=b.scale.linear(),e=function(a,b){return a.close},f=function(a,b){return a.date},g=function(a,b){return c(f(a,b))},h=function(a,b){return d(e(a,b))},i=b.svg.line().defined(function(a,b){return!isNaN(h(a,b))}).x(g).y(h),j=v().selector("path.line").element("path").attr("class","line"),k=function(b){b.each(function(b,c){var d=j(this,[b]);d.attr("d",i),a(d,b,c)})};return k.decorate=function(b){return arguments.length?(a=b,k):a},k.xScale=function(a){return arguments.length?(c=a,k):c},k.yScale=function(a){return arguments.length?(d=a,k):d},k.xValue=function(a){return arguments.length?(f=a,k):f},k.yValue=function(a){return arguments.length?(e=a,k):e},b.rebind(k,j,"key"),b.rebind(k,i,"interpolate","tension"),k}function I(){var a=H().yValue(function(a){return a.y0+a.y}),b=G().series(a),c=function(a){a.call(b)};return l(c,a,{decorate:"decorate",xScale:"xScale",yScale:"yScale",xValue:"xValue",yValue:"yValue"})}function J(){var a=s,c=b.time.scale(),d=b.scale.linear(),e=function(a,b){return a.close},f=function(a,b){return a.date},g=b.functor(0),h=o(.75),i=v().selector("g.bar").element("g").attr("class","bar"),j=function(a,b){return c(f(a,b))},k=function(c){c.each(function(c,k){var l=c.filter(function(a,b){return void 0!==g(a,b)&&void 0!==e(a,b)&&void 0!==f(a,b)}),m=i(this,l),n=h(l.map(j)),o=E().x(0).y(0).width(n).height(0),p=function(a,b){return j(a,b)},q=function(a,b){return d(e(a,b))},r=function(a,b){return d(g(a,b))};m.enter().attr("transform",function(a,b){return"translate("+p(a,b)+", "+r(a,b)+")"}).append("path").attr("d",function(a){return o([a])}),m.each(function(a,c){o.height(r(a,c)-q(a,c));var d=b.select(this);b.transition(d).attr("transform","translate("+p(a,c)+", "+q(a,c)+")").select("path").attr("d",o([a]))}),a(m,l,k)})};return k.decorate=function(b){return arguments.length?(a=b,k):a},k.xScale=function(a){return arguments.length?(c=a,k):c},k.yScale=function(a){return arguments.length?(d=a,k):d},k.xValue=function(a){return arguments.length?(f=a,k):f},k.y0Value=function(a){return arguments.length?(g=b.functor(a),k):g},k.yValue=k.y1Value=function(a){return arguments.length?(e=a,k):e},k.barWidth=function(a){return arguments.length?(h=b.functor(a),k):h},b.rebind(k,i,"key"),k}function K(){var a=J().yValue(function(a){return a.y0+a.y}).y0Value(function(a){return a.y0}),b=G().series(a),c=function(a){a.call(b)};return l(c,a,{decorate:"decorate",xScale:"xScale",yScale:"yScale",xValue:"xValue",y0Value:"y0Value",y1Value:"y1Value",yValue:"yValue",barWidth:"barWidth"})}function L(){var a=s,c=b.time.scale(),d=b.scale.linear(),e=b.functor(0),f=function(a,b){return a.close},g=function(a,b){return a.date},h=function(a,b){return c(g(a,b))},i=function(a,b){return d(e(a,b))},j=function(a,b){return d(f(a,b))},k=b.svg.area().defined(function(a,b){return!isNaN(i(a,b))&&!isNaN(j(a,b))}).x(h).y0(i).y1(j),l=v().selector("path.area").element("path").attr("class","area"),m=function(b){b.each(function(b,c){var d=l(this,[b]);d.attr("d",k),a(d,b,c)})};return m.decorate=function(b){return arguments.length?(a=b,m):a},m.xScale=function(a){return arguments.length?(c=a,m):c},m.yScale=function(a){return arguments.length?(d=a,m):d},m.xValue=function(a){return arguments.length?(g=a,m):g},m.y0Value=function(a){return arguments.length?(e=b.functor(a),m):e},m.yValue=m.y1Value=function(a){return arguments.length?(f=a,m):f},b.rebind(m,l,"key"),b.rebind(m,k,"interpolate","tension"),m}function M(){var a=L().yValue(function(a){return a.y0+a.y}).y0Value(function(a){return a.y0}),b=G().series(a),c=function(a){a.call(b)};return l(c,a,{decorate:"decorate",xScale:"xScale",yScale:"yScale",xValue:"xValue",y0Value:"y0Value",y1Value:"y1Value",yValue:"yValue"})}function N(a){var c=s,d=b.time.scale(),e=b.scale.linear(),f=function(a,b){return a.date},g=function(a,b){return a.open},h=function(a,b){return a.high},i=function(a,b){return a.low},j=function(a,b){return a.close},k=o(.75),l=function(a,b){return d(f(a,b))},m=v().selector("g.ohlc").element("g").attr("class","ohlc"),n=function(a){a.each(function(a,d){var f=m(this,a);f.enter().append("path");var n=C().width(k(a.map(l)));f.each(function(a,c){var d=j(a,c),f=g(a,c),k=l(a,c),m=e(f),o=e(h(a,c)),p=e(i(a,c)),q=e(d),r=b.select(this).classed({up:d>f,down:f>d}).attr("transform","translate("+k+", "+o+")");n.x(b.functor(0)).open(function(){return m-o}).high(function(){return o-o}).low(function(){return p-o}).close(function(){return q-o}),r.select("path").attr("d",n([a]))}),c(f,a,d)})};return n.decorate=function(a){return arguments.length?(c=a,n):c},n.xScale=function(a){return arguments.length?(d=a,n):d},n.yScale=function(a){return arguments.length?(e=a,n):e},n.xValue=function(a){return arguments.length?(f=a,n):f},n.yOpenValue=function(a){return arguments.length?(g=a,n):g},n.yHighValue=function(a){return arguments.length?(h=a,n):h},n.yLowValue=function(a){return arguments.length?(i=a,n):i},n.yValue=n.yCloseValue=function(a){return arguments.length?(j=a,n):j},n.barWidth=function(a){return arguments.length?(k=b.functor(a),n):k},b.rebind(n,m,"key"),n}function O(){var a=s,c=b.scale.linear(),d=b.scale.linear(),e=function(a,b){return a.date.getDay()},f=b.scale.linear(),g=H(),h=o(.75),i=v().selector("g.cycle").element("g").attr("class","cycle"),j=function(j){j.each(function(j,k){var l=b.nest().key(e).map(j),m=Object.keys(l),n=h(m.map(c)),o=n/2,p=i(this,m);p.each(function(a,e){var h=b.select(this);h.attr("transform","translate("+c(a)+", 0)"),(f.rangeBands||f.range)([-o,o]),g.xScale(f).yScale(d),b.select(this).datum(l[a]).call(g)}),a(p,m,k)})};return j.decorate=function(b){return arguments.length?(a=b,j):a},j.xScale=function(a){return arguments.length?(c=a,j):c},j.yScale=function(a){return arguments.length?(d=a,j):d},j.xValue=function(a){return arguments.length?(e=a,j):e},j.subScale=function(a){return arguments.length?(f=a,j):f},j.subSeries=function(a){return arguments.length?(g=a,j):g},j.barWidth=function(a){return arguments.length?(h=b.functor(a),j):h},b.rebind(j,i,"key"),j}function P(){var a=s,c=b.time.scale(),d=b.scale.linear(),e=function(a,b){return a.date},f=function(a,b){return a.open},g=function(a,b){return a.high},h=function(a,b){return a.low},i=function(a,b){return a.close},j=o(.75),k=v().selector("g.candlestick").element("g").attr("class","candlestick"),l=function(a,b){return c(e(a,b))},m=function(c){c.each(function(c,e){var m=k(this,c);m.enter().append("path");var n=D().width(j(c.map(l)));m.each(function(a,c){var e=i(a,c),j=f(a,c),k=l(a,c),m=d(j),o=d(g(a,c)),p=d(h(a,c)),q=d(e),r=b.select(this).classed({up:e>j,down:j>e}).attr("transform","translate("+k+", "+o+")");n.x(b.functor(0)).open(function(){return m-o}).high(function(){return o-o}).low(function(){return p-o}).close(function(){return q-o}),r.select("path").attr("d",n([a]))}),a(m,c,e)})};return m.decorate=function(b){return arguments.length?(a=b,m):a},m.xScale=function(a){return arguments.length?(c=a,m):c},m.yScale=function(a){return arguments.length?(d=a,m):d},m.xValue=function(a){return arguments.length?(e=a,m):e},m.yOpenValue=function(a){return arguments.length?(f=a,m):f},m.yHighValue=function(a){return arguments.length?(g=a,m):g},m.yLowValue=function(a){return arguments.length?(h=a,m):h},m.yValue=m.yCloseValue=function(a){return arguments.length?(i=a,m):i},m.barWidth=function(a){return arguments.length?(j=b.functor(a),m):j},b.rebind(m,k,"key"),m}function Q(){var a=F(),c=b.functor(0),d=s,e=b.time.scale(),f=b.scale.linear(),g=v().selector("g.axis-adapter").element("g").attr({"class":"axis axis-adapter"}),h=function(b){b.each(function(b,i){var j=g(this,[b]);switch(h.orient()){case"top":case"bottom":j.attr("transform","translate(0,"+f(c(b))+")"),a.scale(e);break;case"left":case"right":j.attr("transform","translate("+e(c(b))+",0)"),a.scale(f);break;default:throw new Error("Invalid orientation")}j.call(a),d(j,b,i)})};return h.baseline=function(a){return arguments.length?(c=b.functor(a),h):c},h.decorate=function(a){return arguments.length?(d=a,h):d},h.xScale=function(a){return arguments.length?(e=a,h):e},h.yScale=function(a){return arguments.length?(f=a,h):f},b.rebind(h,a,"orient","ticks","tickValues","tickSize","innerTickSize","outerTickSize","tickPadding","tickFormat")}function R(){var a={};return a.distance=function(a,b){return b.getTime()-a.getTime()},a.offset=function(a,b){return new Date(a.getTime()+b)},a.clampUp=q,a.clampDown=q,a.copy=function(){return a},a}function S(a,b,c){var d=a.map(function(d,e){if(e<a.length-1)return b.clampUp(d);var f=b.clampUp(d);return f<c[1]?f:b.clampDown(d)}),e=d.reduce(function(a,b){return 0===a.filter(function(a){return a.getTime()===b.getTime()}).length&&a.push(b),a},[]);return e}function T(a,c){function d(b){var d=a.domain(),e=a.range(),f=c.distance(d[0],d[1]),g=c.distance(d[0],b),h=g/f,i=h*(e[1]-e[0])+e[0];return i}return arguments.length||(a=b.time.scale(),c=R()),d.invert=function(b){var d=a.domain(),e=a.range(),f=(b-e[0])/(e[1]-e[0]),g=c.distance(d[0],d[1]),h=f*g;return c.offset(d[0],h)},d.domain=function(b){if(!arguments.length)return a.domain();var e=c.clampUp(b[0]),f=c.clampDown(b[1]);return a.domain([e,f]),d},d.nice=function(){a.nice();var b=a.domain(),e=c.clampUp(b[0]),f=c.clampDown(b[1]);return a.domain([e,f]),d},d.ticks=function(){var b=a.ticks.apply(this,arguments);return S(b,c,d.domain())},d.copy=function(){return T(a.copy(),c.copy())},d.discontinuityProvider=function(a){return arguments.length?(c=a,d):c},b.rebind(d,a,"range","rangeRound","interpolate","clamp","tickFormat")}function U(){return T()}function V(){function a(a){return 0===a.getDay()||6===a.getDay()}var c=864e5,d=5*c,e=7*c,f={};return f.clampDown=function(c){if(a(c)){var d=0===c.getDay()?2:1,e=b.time.day.ceil(c);return b.time.day.offset(e,-d)}return c},f.clampUp=function(c){if(a(c)){var d=0===c.getDay()?1:2,e=b.time.day.floor(c);return b.time.day.offset(e,d)}return c},f.distance=function(a,c){a=f.clampUp(a),c=f.clampDown(c);var g=b.time.saturday.ceil(a);if(g>c)return c.getTime()-a.getTime();var h=g.getTime()-a.getTime(),i=b.time.saturday.ceil(c),j=i.getTime()-c.getTime(),k=(i.getTime()-g.getTime())/e;return k*d+h-j},f.offset=function(c,e){var g=a(c)?f.clampUp(c):c,h=e,i=b.time.saturday.ceil(g);if(h-=i.getTime()-g.getTime(),0>h)return new Date(g.getTime()+e);g=b.time.day.offset(i,2);var j=Math.floor(h/d);return g=b.time.day.offset(g,7*j),h-=j*d,g=new Date(g.getTime()+h)},f.copy=function(){return f},f}function W(){var a=b.time.scale(),c=b.scale.linear(),d=70,e=30,f=y(),g=s,h=z(),i=H().yValue(function(a,b){return a.rsi}),j=function(b){f.xScale(a).yScale(c).series([h,i]).mapping(function(a){return a===h?[d,50,e]:this}).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["annotations","indicator"][b]}),g(a,b,c)}),b.call(f)};return j.xScale=function(b){return arguments.length?(a=b,j):a},j.yScale=function(a){return arguments.length?(c=a,j):c},j.upperValue=function(a){return arguments.length?(d=a,
j):d},j.lowerValue=function(a){return arguments.length?(e=a,j):e},j.decorate=function(a){return arguments.length?(g=a,j):g},b.rebind(j,i,"yValue","xValue"),j}function X(){var a=b.time.scale(),c=b.scale.linear(),d=function(a){return a.date},e=function(a){return a.macd},f=H(),g=H(),h=J(),i=y(),j=s,k=function(b){f.xValue(d).yValue(function(a,b){return e(a).macd}),g.xValue(d).yValue(function(a,b){return e(a).signal}),h.xValue(d).yValue(function(a,b){return e(a).divergence}),i.xScale(a).yScale(c).series([h,f,g]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["divergence","macd","signal"][b]}),j(a,b,c)}),b.call(i)};return k.xScale=function(b){return arguments.length?(a=b,k):a},k.xValue=function(a){return arguments.length?(d=a,k):d},k.yScale=function(a){return arguments.length?(c=a,k):c},k.root=function(a){return arguments.length?(e=a,k):e},k.decorate=function(a){return arguments.length?(j=a,k):j},k}function Y(){var a=b.time.scale(),c=b.scale.linear(),d=function(a,b){return a.close},e=function(a,b){return a.date},f=function(a){return a.bollingerBands},g=s,h=L().y0Value(function(a,b){return f(a).upper}).y1Value(function(a,b){return f(a).lower}),i=H().yValue(function(a,b){return f(a).upper}),j=H().yValue(function(a,b){return f(a).average}),k=H().yValue(function(a,b){return f(a).lower}),l=function(b){var d=y().xScale(a).yScale(c).series([h,i,k,j]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["area","upper","lower","average"][b]}),g(a,b,c)});h.xValue(e),i.xValue(e),j.xValue(e),k.xValue(e),b.call(d)};return l.xScale=function(b){return arguments.length?(a=b,l):a},l.yScale=function(a){return arguments.length?(c=a,l):c},l.xValue=function(a){return arguments.length?(e=a,l):e},l.yValue=function(a){return arguments.length?(d=a,l):d},l.root=function(a){return arguments.length?(f=a,l):f},l.decorate=function(a){return arguments.length?(g=a,l):g},l}function Z(){var a=b.functor(void 0),c=b.functor(10),d=s,e=q,f=function(b){var f=c.apply(this,arguments),g=b.slice(0,f).map(e);return b.map(function(b,c){return f-1>c?a(b,c):(c>=f&&(g.shift(),g.push(e(b,c))),d(g))})};return f.undefinedValue=function(c){return arguments.length?(a=b.functor(c),f):a},f.windowSize=function(a){return arguments.length?(c=b.functor(a),f):c},f.accumulator=function(a){return arguments.length?(d=a,f):d},f.value=function(a){return arguments.length?(e=a,f):e},f}function $(){var a=s,c=Z(),d=function(d){return b.zip(d,c(d)).forEach(function(b){a(b[0],b[1])})};return d.algorithm=function(a){return arguments.length?(c=a,d):c},d.merge=function(b){return arguments.length?(a=b,d):a},d}function _(){var a=function(a,b){return a.open},c=function(a,b){return a.close},d=function(a){for(var b=1/a.length,c=a[0],d=1,e=a.length;e>d;d++)c=b*a[d]+(1-b)*c;return c},e=Z().windowSize(14).accumulator(function(b){for(var e=[],f=[],g=0,h=b.length;h>g;g++){var i=b[g],j=a(i),k=c(i);e.push(j>k?j-k:0),f.push(k>j?k-j:0)}var l=d(e);if(0===l)return 100;var m=d(f)/l;return 100-100/(1+m)}),f=function(a){return e(a)};return f.openValue=function(b){return arguments.length?(a=b,f):a},f.closeValue=function(a){return arguments.length?(c=a,f):c},b.rebind(f,e,"windowSize"),f}function aa(){var a=_(),c=$().algorithm(a).merge(function(a,b){a.rsi=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","openValue","closeValue"),d}function ba(){var a=Z().accumulator(b.mean).value(function(a){return a.close}),c=$().algorithm(a).merge(function(a,b){a.movingAverage=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","undefinedValue","value"),d}function ca(){function a(a){return Array.apply(null,new Array(a)).map(d)}var c=Z().accumulator(b.mean),d=b.functor(void 0),e=function(a){return void 0===a},f=function(b){for(var d=0;e(b[d])&&d<b.length;)d++;var f=b.slice(d);return a(d).concat(c(f))};return f.algorithm=function(a){return arguments.length?(c=a,f):c},f.undefinedValue=function(a){return arguments.length?(d=b.functor(a),f):d},f.defined=function(a){return arguments.length?(e=a,f):e},f}function da(){var a=9,b=q,c=function(c){var d,e=2/(a+1),f=0;return c.map(function(c,g){if(a-1>g)return void(f+=b(c,g));if(g===a-1){f+=b(c,g);var h=f/a;return d=h,h}var i=b(c,g)*e+(1-e)*d;return d=i,i})};return c.windowSize=function(b){return arguments.length?(a=b,c):a},c.value=function(a){return arguments.length?(b=a,c):b},c}function ea(){var a=q,c=da().windowSize(12),d=da().windowSize(29),e=da().windowSize(9),f=ca().algorithm(e),g=function(e){c.value(a),d.value(a);var g=b.zip(c(e),d(e)).map(function(a){return void 0!==a[0]&&void 0!==a[1]?a[0]-a[1]:void 0}),h=f(g),i=b.zip(g,h).map(function(a){return{macd:a[0],signal:a[1],divergence:void 0!==a[0]&&void 0!==a[1]?a[0]-a[1]:void 0}});return i};return g.value=function(b){return arguments.length?(a=b,g):a},l(g,c,{fastPeriod:"windowSize"}),l(g,d,{slowPeriod:"windowSize"}),l(g,e,{signalPeriod:"windowSize"}),g}function fa(){var a=ea().value(function(a){return a.close}),c=$().algorithm(a).merge(function(a,b){a.macd=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"fastPeriod","slowPeriod","signalPeriod","value"),d}function ga(){var a=Z().accumulator(b.mean).value(function(a){return a.close}),c=$().algorithm(a).merge(function(a,b){a.exponentialMovingAverage=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","value"),d}function ha(){var a=b.functor(0),c=q,d=function(b){if(0===b.length)return[];var d=c(b[a(b)]);return b.map(function(a,b){return(c(a,b)-d)/d})};return d.baseIndex=function(c){return arguments.length?(a=b.functor(c),d):a},d.value=function(a){return arguments.length?(c=a,d):c},d}function ia(){var a=2,c=Z().undefinedValue({upper:void 0,average:void 0,lower:void 0}).accumulator(function(c){var d=b.mean(c),e=b.deviation(c);return{upper:d+a*e,average:d,lower:d-a*e}}),d=function(a){return c(a)};return d.multiplier=function(b){return arguments.length?(a=b,d):a},b.rebind(d,c,"windowSize","value"),d}function ja(){var a=ia().value(function(a){return a.close}),c=$().algorithm(a).merge(function(a,b){a.bollingerBands=b}),d=function(a){return c(a)};return d.root=function(a){return a.bollingerBands},b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","value","multiplier"),d}function ka(a,c,d,e,f){var g,h,i=b.random.normal(),j=a/c,k=new Array(c+1);for(h=1;h<k.length;h+=1)g=i(),g*=Math.sqrt(j),g*=e,g+=(d-e*e/2)*j,k[h]=Math.exp(g);for(k[0]=f,h=1;h<k.length;h+=1)k[h]=k[h-1]*k[h];return k}function la(){var a=.1,b=.1,c=100,d=1e5,e=new Date,f=50,g=.3,h=function(a){return!(0===a.getDay()||6===a.getDay())},i=function(a,b,c){for(var d,g=[],h=0,i=0;g.length<a;)d=b.slice(i,i+f),g.push({date:new Date(e.getTime()),open:d[0],high:Math.max.apply({},d),low:Math.min.apply({},d),close:d[f-1],volume:c[h]}),i+=f,h+=1,e.setUTCDate(e.getUTCDate()+1);return g},j=function(j){var k=new Date(e.getTime());k.setUTCDate(e.getUTCDate()+j);var l=315569e5,m=(k.getTime()-e.getTime())/l,n=ka(m,j*f,a,b,c),o=ka(m,j,0,b,d);return o=o.map(function(a){var b=Math.min(0,Math.max(g,1)),c=1+b*(1-2*Math.random());return Math.floor(a*c)}),c=n[n.length-1],d=o[o.length-1],i(j,n,o).filter(function(a){return!h||h(a.date)})};return j.mu=function(b){return arguments.length?(a=b,j):a},j.sigma=function(a){return arguments.length?(b=a,j):b},j.startPrice=function(a){return arguments.length?(c=a,j):c},j.startVolume=function(a){return arguments.length?(d=a,j):d},j.startDate=function(a){return arguments.length?(e=a,j):e},j.stepsPerDay=function(a){return arguments.length?(f=a,j):f},j.volumeNoiseFactor=function(a){return arguments.length?(g=a,j):g},j.filter=function(a){return arguments.length?(h=a,j):h},j}function ma(){var a="BTC-USD",c=null,d=null,e=null,f=function(f){var g=[];null!=c&&g.push("start="+c.toISOString()),null!=d&&g.push("end="+d.toISOString()),null!=e&&g.push("granularity="+e);var h="https://api.exchange.coinbase.com/products/"+a+"/candles?"+g.join("&");b.json(h,function(a,b){return a?void f(a):(b=b.map(function(a){return{date:new Date(1e3*a[0]),open:a[3],high:a[2],low:a[1],close:a[4],volume:a[5]}}),void f(a,b))})};return f.product=function(b){return arguments.length?(a=b,f):a},f.start=function(a){return arguments.length?(c=a,f):c},f.end=function(a){return arguments.length?(d=a,f):d},f.granularity=function(a){return arguments.length?(e=a,f):e},f}function na(){function a(a){function c(b){return a.filter(function(a){return e(a)===b})[0]}var d=j.xValue(),e=j.yValue(),f=b.max(a,e),g=b.min(a,e);return[{x:d(a[0]),y:e(a[0])},{x:d(c(f)),y:f},{x:d(c(g)),y:g},{x:d(a[a.length-1]),y:e(a[a.length-1])}]}var d=U(),e=b.scale.linear(),f=2,g=H(),h=A().xValue(function(a){return a.x}).yValue(function(a){return a.y}).decorate(function(a){a.attr("class",function(a,b){switch(b){case 0:return"open";case 1:return"high";case 2:return"low";case 3:return"close"}})}),i=y().series([g,h]).mapping(function(b){switch(b){case h:return a(this);default:return this}}),j=function(a){h.radius(f),a.each(function(a){var g=b.select(this),h=c(this),j=f;d.range([j,h.width-j]),e.range([h.height-j,j]),i.xScale(d).yScale(e),g.call(i)})};return l(j,d,{xDiscontinuityProvider:"discontinuityProvider",xDomain:"domain"}),l(j,e,{yDomain:"domain"}),l(j,g,"xValue","yValue"),j.xScale=function(){return d},j.yScale=function(){return e},j.radius=function(a){return arguments.length?(f=a,j):f},j}function oa(){var a=20,c=0,d=H(),e=U(),f=b.scale.linear(),g=F().scale(e).orient("bottom"),h=F().scale(f).orient("left"),i=function(i){i.each(function(i){var j=b.select(this),k={position:"absolute",top:0,right:c,bottom:a,left:0},l=j.selectAll("rect.background").data([i]);l.enter().append("rect").attr("class","background").layout(k);var m=j.selectAll("svg.plot-area").data([i]);m.enter().append("svg").attr({"class":"plot-area"}).layout(k);var n=j.selectAll("g.x-axis").data([i]);n.enter().append("g").attr("class","axis x-axis").layout({position:"absolute",left:0,bottom:0,right:c,height:a});var o=j.selectAll("g.y-axis").data([i]);o.enter().append("g").attr("class","axis y-axis").layout({position:"absolute",top:0,right:0,bottom:a,width:c}),j.layout(),e.range([0,n.layout("width")]),f.range([o.layout("height"),0]),n.call(g),o.call(h),d.xScale(e).yScale(f),m.call(d)})};return l(i,e,{xDiscontinuityProvider:"discontinuityProvider",xDomain:"domain",xNice:"nice"}),l(i,f,{yDomain:"domain",yNice:"nice"}),n(i,g,"x","scale"),n(i,h,"y","scale"),i.xScale=function(){return e},i.yScale=function(){return f},i.plotArea=function(a){return arguments.length?(d=a,i):d},i.xAxisHeight=function(b){return arguments.length?(a=b,i):a},i.yAxisWidth=function(a){return arguments.length?(c=a,i):c},i}function pa(){var a=s,c=s,d=[["datum",function(a){return a.datum}]],e=v().selector("table.legend").element("table").attr("class","legend"),f=v().selector("tr.row").element("tr").attr("class","row"),g=function(g){g.each(function(g,h){var i=b.select(this),j=d.map(function(a,c){return{datum:g,header:b.functor(a[0]),value:b.functor(a[1])}}),k=e(i,[j]),l=f(k),m=l.enter();m.append("th"),m.append("td"),l.select("th").html(function(a,b){return a.header.call(this,a.datum,b)}),l.select("td").html(function(a,b){return a.value.call(this,a.datum,b)}),a(k,g,h),c(l,g,h)})};return g.items=function(a){return arguments.length?(d=a,g):d},g.rowDecorate=function(a){return arguments.length?(c=a,g):c},g.tableDecorate=function(b){return arguments.length?(a=b,g):a},g}function qa(a,c){a=a||b.scale.linear(),c=c||b.scale.linear();var d={bottom:30,right:30},e="",f="",g="",h=H(),i=s,j=Q().orient("bottom").baseline(function(){var a=c.domain();return"bottom"===j.orient()?a[0]:a[1]}),k=Q().orient("right").baseline(function(){var b=a.domain();return"right"===k.orient()?b[1]:b[0]}),l=y().series([j,k]),m=v().selector("svg.cartesian-chart").element("svg").attr({"class":"cartesian-chart","layout-css":"flex: 1"}),o=function(n){n.each(function(n,o){var p=b.select(this),q=m(p,[n]);q.enter().html('<g class="title">                         <g layout-css="height: 0; width: 0">                             <text class="label"/>                         </g>                     </g>                     <g class="y-axis">                         <g layout-css="height: 0; width: 0">                             <text class="label"/>                         </g>                     </g>                     <g class="x-axis">                         <g layout-css="height: 0; width: 0">                             <text class="label"/>                         </g>                     </g>                     <g class="plot-area-container">                         <rect class="background"                             layout-css="position: absolute; top: 0; bottom: 0; left: 0; right: 0"/>                         <svg class="axes-container"                             layout-css="position: absolute; top: 0; bottom: 0; left: 0; right: 0"/>                         <svg class="plot-area"                             layout-css="position: absolute; top: 0; bottom: 0; left: 0; right: 0"/>                     </g>');var r=u(d);q.select(".plot-area-container").layout({position:"absolute",top:r.top,left:r.left,bottom:r.bottom,right:r.right}),q.select(".title").layout({position:"absolute",top:0,alignItems:"center",left:r.left,right:r.right});var s={position:"absolute",top:r.top,bottom:r.bottom,alignItems:"center",flexDirection:"row"};s[k.orient()]=0,q.select(".y-axis").attr("class","y-axis "+k.orient()).layout(s);var t={position:"absolute",left:r.left,right:r.right,alignItems:"center"};t[j.orient()]=0,q.select(".x-axis").attr("class","x-axis "+j.orient()).layout(t),p.layout(),q.select(".title .label").text(g),q.select(".y-axis .label").text(e).attr("transform","right"===k.orient()?"rotate(90)":"rotate(-90)"),q.select(".x-axis .label").text(f);var v=q.select(".plot-area");a.range([0,v.layout("width")]),c.range([v.layout("height"),0]);var w=q.select(".axes-container");l.xScale(a).yScale(c),w.call(l),h.xScale(a).yScale(c),v.call(h),i(q,n,o)})},p=["range","rangeRound","tickFormat"];return n(o,a,"x",p),n(o,c,"y",p),n(o,j,"x"),n(o,k,"y"),o.chartLabel=function(a){return arguments.length?(g=a,o):g},o.plotArea=function(a){return arguments.length?(h=a,o):h},o.xLabel=function(a){return arguments.length?(f=a,o):f},o.margin=function(a){return arguments.length?(d=a,o):d},o.yLabel=function(a){return arguments.length?(e=a,o):e},o.decorate=function(a){return arguments.length?(i=a,o):i},o}function ra(){var a=b.time.scale(),c=b.scale.linear(),d=10,e=10,f=s,g=s,h=v().selector("line.x").element("line").attr("class","x gridline"),i=v().selector("line.y").element("line").attr("class","y gridline"),j=function(b){b.each(function(b,j){var k=a.ticks(d),l=h(this,k);l.attr({x1:a,x2:a,y1:c.range()[0],y2:c.range()[1]}),f(l,k,j);var m=c.ticks(e),n=i(this,m);n.attr({x1:a.range()[0],x2:a.range()[1],y1:c,y2:c}),g(n,m,j)})};return j.xScale=function(b){return arguments.length?(a=b,j):a},j.yScale=function(a){return arguments.length?(c=a,j):c},j.xTicks=function(a){return arguments.length?(d=a,j):d},j.yTicks=function(a){return arguments.length?(e=a,j):e},j.yDecorate=function(a){return arguments.length?(g=a,j):g},j.xDecorate=function(a){return arguments.length?(f=a,j):f},j}function sa(){var a,c,d,e,f=b.time.scale(),g=b.scale.linear(),h=function(){return k(f)[0]},i=function(){return k(f)[1]},j=function(){return k(g)[0]},l=function(){return k(g)[1]},m=s,n=v().selector("g.annotation").element("g").attr("class","annotation"),o=function(a){a.each(function(a,c){var d=b.select(this),e=n(d,a);e.enter().append("path").classed("band",!0);var f=E().align("right").x(h).y(j).height(function(){return l.apply(this,arguments)-j.apply(this,arguments)}).width(function(){return i.apply(this,arguments)-h.apply(this,arguments)});e.select("path").attr("d",function(a,b){return f.call(this,[a],b)}),m(e,a,c)})};return o.xScale=function(a){return arguments.length?(f=a,o):f},o.yScale=function(a){return arguments.length?(g=a,o):g},o.decorate=function(a){return arguments.length?(m=a,o):m},o.x0=function(c){return arguments.length?(a=b.functor(c),h=function(){return f(a.apply(this,arguments))},o):a},o.x1=function(a){return arguments.length?(c=b.functor(a),i=function(){return f(c.apply(this,arguments))},o):c},o.y0=function(a){return arguments.length?(d=b.functor(a),j=function(){return g(d.apply(this,arguments))},o):d},o.y1=function(a){return arguments.length?(e=b.functor(a),l=function(){return g(e.apply(this,arguments))},o):e},o}a="default"in a?a["default"]:a,b="default"in b?b["default"]:b;var ta={get isOrdinal(){return j},get range(){return k}},ua={get context(){return p},get identity(){return q},get index(){return r},get noop(){return s}};b.selection.prototype.layout=function(a,b){var c=d(),e=arguments.length;if(2===e)"string"!=typeof a?(c.width(a).height(b),this.call(c)):this.attr("layout-css",a+":"+b);else if(1===e){if("string"==typeof a)return Number(this.attr("layout-"+a));var f=a,g=Object.keys(f).map(function(a){return a+":"+f[a]}).join(";");this.attr("layout-css",g)}else 0===e&&this.call(c);return this};var va=1e-6,wa={dataJoin:v,expandMargin:u,extent:t,fn:ua,fractionalBarWidth:o,innerDimensions:c,rebind:l,rebindAll:n,scale:ta,noSnap:e,pointSnap:f,seriesPointSnap:g,seriesPointSnapXOnly:h,seriesPointSnapYOnly:i},xa={crosshair:B,fibonacciFan:x,measure:w},ya={axis:F,bar:E,candlestick:D,ohlc:C},za={area:M,bar:K,stack:G,line:I},Aa={area:L,axis:Q,bar:J,candlestick:P,cycle:O,line:H,multi:y,ohlc:N,point:A,stacked:za};U.tickTransformer=S;var Ba={discontinuity:{identity:R,skipWeekends:V},dateTime:U},Ca={bollingerBands:Y,macd:X,relativeStrengthIndex:W},Da={bollingerBands:ia,exponentialMovingAverage:da,macd:ea,percentageChange:ha,relativeStrengthIndex:_,slidingWindow:Z,undefinedInputAdapter:ca},Ea={bollingerBands:ja,calculator:Da,exponentialMovingAverage:ga,macd:fa,merge:$,movingAverage:ba,relativeStrengthIndex:aa},Fa={algorithm:Ea,renderer:Ca},Ga={financial:la,walk:ka},Ha={coinbase:ma},Ia={feed:Ha,random:Ga},Ja={cartesianChart:qa,legend:pa,linearTimeSeries:oa,sparkline:na},Ka={band:sa,gridline:ra,line:z},La="1.2.0",Ma={annotation:Ka,chart:Ja,data:Ia,indicator:Fa,layout:d,scale:Ba,series:Aa,svg:ya,tool:xa,util:wa,version:La};return Ma});
//# sourceMappingURL=d3fc.min.js.map