/*!
 * MockJax - jQuery Plugin to Mock Ajax requests
 *
 * Version:  1.3.2
 * Released: 2010-10-07
 * Source:   http://github.com/appendto/jquery-mockjax
 * Docs:     http://enterprisejquery.com/2010/07/mock-your-ajax-requests-with-mockjax-for-rapid-development
 * Plugin:   mockjax
 * Author:   Jonathan Sharp (http://jdsharp.com)
 * License:  MIT,GPL
 * 
 * Copyright (c) 2010 appendTo LLC.
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 */
(function(c){var m=c.ajax,g=[];c.extend({ajax:function(j){var a=jQuery.extend(true,{},jQuery.ajaxSettings,j),n=false;c.each(g,function(h){if(g[h]){var b=null;if(c.isFunction(g[h]))b=g[h](a);else{b=g[h];if(c.isFunction(b.url.test))b.url.test(a.url)||(b=null);else{h=b.url.indexOf("*");if(b.url!="*"&&b.url!=a.url&&h==-1||h>-1&&b.url.substr(0,h)!=a.url.substr(0,h))b=null}if(b){if(b.data&&a.data){var l=false;(function d(e,k){if(typeof k==="string")return l=c.isFunction(e.test)?e.test(k):e==k;c.each(e,
function(i){if(k[i]===undefined)return l=false;else{l=true;if(typeof k[i]=="object")return d(e[i],k[i]);else return l=c.isFunction(e[i].test)?e[i].test(k[i]):e[i]==k[i]}})})(b.data,a.data);if(l==false)b=null}if(b&&b.type&&b.type!=a.type)b=null}}if(b){typeof console!=="undefined"&&console.log&&console.log("MOCK GET: "+a.url);n=true;if(a.dataType==="jsonp"){if(a.type.toUpperCase()==="GET")f.test(a.url)||(a.url+=(rquery.test(a.url)?"&":"?")+(a.jsonp||"callback")+"=?");else if(!a.data||!f.test(a.data))a.data=
(a.data?a.data+"&":"")+(a.jsonp||"callback")+"=?";a.dataType="json"}var f=/=\?(&|$)/;if(a.dataType==="json"&&(a.data&&f.test(a.data)||f.test(a.url))){jsonp=a.jsonpCallback||"jsonp"+jsc++;if(a.data)a.data=(a.data+"").replace(f,"="+jsonp+"$1");a.url=a.url.replace(f,"="+jsonp+"$1");a.dataType="script";window[jsonp]=window[jsonp]||function(d){data=d;o();p();window[jsonp]=undefined;try{delete window[jsonp]}catch(e){}head&&head.removeChild(script)}}f=(f=/^(\w+:)?\/\/([^\/?#]+)/.exec(a.url))&&(f[1]&&f[1]!==
location.protocol||f[2]!==location.host);if(a.dataType==="script"&&a.type.toUpperCase()==="GET"&&f){var q=j&&j.context||a,o=function(){if(a.success)a.success.call(q,b.response?b.response.toString():b.responseText||"",status,{});if(a.global){var d=[{},a];(a.context?jQuery(a.context):jQuery.event).trigger("ajaxSuccess",d)}},p=function(){a.complete&&a.complete.call(q,{},status);if(a.global){var d=[{},a];(a.context?jQuery(a.context):jQuery.event).trigger("ajaxComplete",d)}a.global&&!--jQuery.active&&
jQuery.event.trigger("ajaxStop")};c.globalEval(b.responseText);o();p();return false}m.call(c,c.extend(true,{},j,{xhr:function(){b=c.extend({},c.mockjaxSettings,b);return{status:b.status,readyState:1,open:function(){},send:function(){var d=c.proxy(function(){this.status=b.status;this.readyState=4;c.isFunction(b.response)&&b.response();if(a.dataType=="json"&&typeof b.responseText=="object")this.responseText=JSON.stringify(b.responseText);else if(a.dataType=="xml")this.responseXML=c.xmlDOM&&typeof b.responseXML==
"string"?c.xmlDOM(b.responseXML)[0]:b.responseXML;else this.responseText=b.responseText;this.onreadystatechange(b.isTimeout?"timeout":undefined)},this);if(b.proxy)m({global:false,url:b.proxy,type:b.type,data:b.data,dataType:a.dataType,complete:function(e){b.responseXML=e.responseXML;b.responseText=e.responseText;this.responseTimer=setTimeout(d,b.responseTime||0)}});else if(a.async===false)d();else this.responseTimer=setTimeout(d,b.responseTime||50)},abort:function(){clearTimeout(this.responseTimer)},
setRequestHeader:function(){},getResponseHeader:function(d){if(b.headers&&b.headers[d])return b.headers[d];else if(d=="Last-modified")return b.lastModified||(new Date).toString();else if(d=="Etag")return b.etag||"";else if(d=="content-type")return b.contentType||"text/plain"}}}}));return false}}});if(!n)return m.apply(c,arguments)}});c.mockjaxSettings={status:200,responseTime:500,isTimeout:false,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",lastModified:null,etag:"",
headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}};c.mockjax=function(j){var a=g.length;g[a]=j;return a};c.mockjaxClear=function(j){if(arguments.length==1)g[j]=null;else g=[]}})(jQuery);