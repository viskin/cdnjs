!function(e,n){"function"==typeof define&&define.amd?define(n):e.KeyboardJS=n()}(this,function(){function e(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent("on"+n,function(n){return t.call(e,n)})}function n(){for(var e=[],n=h.length;n>-1;n-=1)if(h[n])for(var t=h[n],r=0;r<t.length;r+=1){for(var o=t[r],a=!0,f=0;f<o.keys.length;f+=1){var i=o.keys[f];d.indexOf(i)<0&&(a=!1)}a&&e.push(o)}return e}function t(e){if(1>d)return!0;for(var t,r=n(),o=[],a=0;a<r.length;a+=1){for(var f=r[a],i=!1,c=0;c<f.keys.length;c+=1){var l=f.keys[c];if(o.indexOf(l)>-1){i=!0;break}}if(!i){"function"==typeof f.callback&&(f.callback(e,f.keys,f.keyCombo)||(t=!1)),k[f.keyCombo]||(k[f.keyCombo]=f);for(var c=0;c<f.keys.length;c+=1){var l=f.keys[c];o.indexOf(l)<0&&o.push(l)}}}return o.length?!1:t}function r(e){var t,r=n();for(var o in k)if(k.hasOwnProperty(o)){for(var a=k[o],f=!1,i=0;i<r.length;i+=1){var c=r[i].keyCombo;if(c===o){f=!0;break}}f||("function"==typeof a.endCallback&&(a.endCallback(e,a.keys,a.keyCombo)||(t=!1)),delete k[o])}return t}function o(e,n,t){function r(){if(f&&f.length){var e=h[f.length];if(e.indexOf(i)>-1){var n=h[f.length].indexOf(i);delete h[f.length][n]}}}for(var o=e.toLowerCase().replace(/\s/g,"").split(","),a=0;a<o.length;a+=1){var f=o[a].split("+");if(f.length){h[f.length]||(h[f.length]=[]);var i={callback:n,endCallback:t,keyCombo:o[a],keys:f};h[f.length].push(i)}}return{clear:r}}function a(e,n,t,r,a){function f(){"function"==typeof c&&c(),"function"==typeof l&&l(),"function"==typeof u&&u(),"function"==typeof s&&s(),"function"==typeof d&&clearInterval(d)}var i=[0,0];if("function"!=typeof a)return!1;var c=o(e,function(){0===i[0]&&(i[0]=-1)},function(){i[0]=0}).clear,l=o(n,function(){0===i[0]&&(i[0]=1)},function(){i[0]=0}).clear,u=o(t,function(){0===i[1]&&(i[1]=-1)},function(){i[1]=0}).clear,s=o(r,function(){0===i[1]&&(i[1]=1)},function(){i[1]=0}).clear,d=setInterval(function(){var e;0===i[0]&&0===i[1]||(-1===i[0]&&-1===i[1]?e=315:-1===i[0]&&1===i[1]?e=45:1===i[0]&&-1===i[1]?e=225:1===i[0]&&1===i[1]?e=135:-1===i[0]&&0===i[1]?e=0:1===i[0]&&0===i[1]?e=180:0===i[0]&&-1===i[1]?e=270:0===i[0]&&1===i[1]&&(e=90),a(e))},1);return{clear:f}}function f(e){if("all"===e)return void(h=[]);e=e.replace(/\s/g,"").split(",");for(var n=h.length;n>-1;n-=1)if(h[n]){for(var t=h[n],r=!0,o=0;o<t.length;o+=1){for(var a=t[o],f=0;f<a.keys.length;f+=1){for(var i=a.keys[f],c=0;c<e.length;c+=1){var l=e[c];if(l===i){r=!0;break}}if(r)break}if(r)break}r&&delete h[n]}}function i(){return d}function c(e,n){u[e]=n}function l(e){u[e]&&(s=u[e])}[].indexOf||(Array.prototype.indexOf=function(e,n,t){for(t=this.length,n=(t+~~n)%t;t>n&&(!(n in this)||this[n]!==e);n++);return n^t?n:-1});var u={us:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,escape:27,esc:27,space:32,spacebar:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,meta:91,command:91,windows:91,win:91,_91:92,select:93,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,multiply:106,add:107,subtract:109,decimal:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,num:144,scrolllock:145,scroll:145,semicolon:186,equal:187,equalsign:187,comma:188,dash:189,period:190,slash:191,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222}},s=u.us,d=[],k={},h=[];return e(document,"keydown",function(e){for(var n in s)s.hasOwnProperty(n)&&e.keyCode===s[n]&&d.indexOf(n)<0&&d.push(n);return t(e)}),e(document,"keyup",function(e){for(var n in s)if(s.hasOwnProperty(n)&&e.keyCode===s[n]){var t=d.indexOf(n);t>-1&&d.splice(t,1)}return r(e)}),{bind:{key:o,axis:a},activeKeys:i,unbind:{key:f},locale:{add:c,set:l}}});