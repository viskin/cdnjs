{"version":3,"file":"./dist/t3.min.js","sources":["./dist/t3.js"],"names":["window","Box","EventTarget","this","_handlers","prototype","constructor","on","type","handler","push","fire","data","handlers","i","len","event","Array","concat","length","call","off","splice","Context","application","element","broadcast","name","getService","serviceName","getConfig","getModuleConfig","getGlobal","getGlobalConfig","reportError","exception","getElement","Application","MODULE_SELECTOR","globalConfig","modules","serviceStack","services","behaviors","instances","exports","initialized","eventTypes","assign","receiver","supplier","prop","hasOwnProperty","bind","method","thisValue","apply","arguments","indexOf","items","item","reset","isServiceBeingInstantiated","error","debug","captureObjectErrors","object","objectName","propertyName","propertyValue","methodName","errorPrefix","ex","message","getModuleName","moduleAttribute","getAttribute","split","isModuleElement","hasAttribute","isTypeElement","callModuleMethod","instance","slice","serviceData","ReferenceError","join","creator","pop","getBehaviors","instanceData","behaviorNames","behaviorData","behaviorInstances","moduleBehaviorInstances","context","Error","getNearestTypeElement","found","parentNode","bindEventType","eventHandler","targetElement","target","elementType","$","bindEventListeners","j","eventHandlerName","eventHandlerFunctions","moduleBehaviors","eventHandlers","unbindEventListeners","getInstanceDataByElement","id","init","params","startAll","document","documentElement","destroy","stopAll","isStarted","start","moduleName","moduleData","module","counter","behaviorInstance","stop","root","moduleElements","querySelectorAll","addModule","configElement","config","querySelector","JSON","parse","text","addService","options","exportedMethodName","service","addBehavior","behaviorName","messageHandlers","messages","onmessage","setGlobalConfig"],"mappings":"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"}