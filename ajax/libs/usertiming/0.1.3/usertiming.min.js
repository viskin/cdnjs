/*! usertiming v0.1.0 */
(function(e){"use strict";e===void 0&&(e={}),e.performance===void 0&&(e.performance={}),e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var r,n,i=[],o=[],t=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,o=["webkitNow","msNow","mozNow"],r=0;o.length>r;r++)if("function"==typeof e.performance[o[r]]){e.performance.now=e.performance[o[r]],e.performance.userTimingJsNowPrefixed=!0;break}var a=+new Date;e.performance.timing&&e.performance.timing.navigationStart&&(a=e.performance.timing.navigationStart),"function"!=typeof e.performance.now&&(e.performance.now=Date.now?function(){return Date.now()-a}:function(){return+new Date-a})}var f=function(){},m=function(){},c=[],p=!1;if("function"!=typeof e.performance.getEntries){for(e.performance.userTimingJsPerformanceTimeline=!0,i=["webkit","moz"],o=["getEntries","getEntriesByName","getEntriesByType"],r=0;o.length>r;r++)for(n=0;i.length>n;n++)t=i[n]+o[r].substr(0,1).toUpperCase()+o[r].substr(1),"function"==typeof e.performance[t]&&(e.performance[o[r]]=e.performance[t],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);f=function(e){c.push(e),"measure"===e.entryType&&(p=!0)};var s=function(){p&&(c.sort(function(e,r){return e.startTime-r.startTime}),p=!1)};m=function(e,n){for(r=0;c.length>r;)c[r].entryType===e?void 0===n||c[r].name===n?c.splice(r,1):r++:r++},"function"!=typeof e.performance.getEntries&&(e.performance.getEntries=function(){return s(),c.slice(0)}),"function"!=typeof e.performance.getEntriesByType&&(e.performance.getEntriesByType=function(e){if(e===void 0||"mark"!==e&&"measure"!==e)return[];"measure"===e&&s();var n=[];for(r=0;c.length>r;r++)c[r].entryType===e&&n.push(c[r]);return n}),"function"!=typeof e.performance.getEntriesByName&&(e.performance.getEntriesByName=function(e,n){if(n&&"mark"!==n&&"measure"!==n)return[];n!==void 0&&"measure"===n&&s();var i=[];for(r=0;c.length>r;r++)(void 0===n||c[r].entryType===n)&&c[r].name===e&&i.push(c[r]);return i})}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,i=["webkit","moz","ms"],o=["mark","measure","clearMarks","clearMeasures"],r=0;o.length>r;r++)for(n=0;i.length>n;n++)t=i[n]+o[r].substr(0,1).toUpperCase()+o[r].substr(1),"function"==typeof e.performance[t]&&(e.performance[o[r]]=e.performance[t],e.performance.userTimingJsUserTimingPrefixed=!0);var u={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(r){var n=e.performance.now();if(r===void 0)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&r in e.performance.timing)throw new SyntaxError("Mark name is not allowed");u[r]||(u[r]=[]),u[r].push(n),f({entryType:"mark",name:r,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?u[e]=[]:u={},m("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(r,n,i){var o=e.performance.now();if(!r)throw Error("Measure must be specified");if(!n)return f({entryType:"measure",name:r,startTime:0,duration:o}),void 0;var t=0;if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw Error(n+" has a timing of 0");t=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in u))throw Error(n+" mark not found");t=u[n][u[n].length-1]}var a=o;if(i)if(a=0,e.performance.timing&&i in e.performance.timing){if("navigationStart"!==i&&0===e.performance.timing[i])throw Error(i+" has a timing of 0");a=e.performance.timing[i]-e.performance.timing.navigationStart}else{if(!(i in u))throw Error(i+" mark not found");a=u[i][u[i].length-1]}var m=a-t;f({entryType:"measure",name:r,startTime:t,duration:m})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){m("measure",e)})}"undefined"!=typeof define&&define.amd?define([],function(){return e.performance}):"undefined"!=typeof module&&module.exports!==void 0&&(module.exports=e.performance)})("undefined"!=typeof window?window:void 0);