/*
  angular-summernote v0.1.1
  Copyright 2014 Jeonghoon Byun
  License: MIT
 */
angular.module("summernote",[]).controller("SummernoteController",["$scope","$attrs",function($scope,$attrs){"use strict";var currentElement,codeInSummernote,summernoteConfig=$scope.summernoteConfig||{};if(angular.isDefined($attrs.height)&&(summernoteConfig.height=$attrs.height),angular.isDefined($attrs.focus)&&(summernoteConfig.focus=!0),angular.isDefined($attrs.lang)){if(!angular.isDefined($.summernote.lang[$attrs.lang]))throw new Error('"'+$attrs.lang+'" lang file must be exist.');summernoteConfig.lang=$attrs.lang}summernoteConfig.oninit=$scope.init,summernoteConfig.onenter=function(evt){$scope.enter({evt:evt})},summernoteConfig.onfocus=function(evt){$scope.focus({evt:evt})},summernoteConfig.onblur=function(evt){$scope.blur({evt:evt})},summernoteConfig.onkeydown=function(evt){$scope.keydown({evt:evt})},angular.isDefined($attrs.onImageUpload)&&(summernoteConfig.onImageUpload=function(files,editor,welEditable){$scope.imageUpload({files:files,editor:editor,welEditable:welEditable})}),this.activate=function(scope,element){summernoteConfig.onkeyup=function(evt){scope.code!==element.code()&&(codeInSummernote=element.code(),scope.code&&(scope.code=element.code()),("$apply"!==$scope.$$phase||"$digest"!==$scope.$$phase)&&scope.$apply()),$scope.keyup({evt:evt})},element.summernote(summernoteConfig),element.code(scope.code),currentElement=element},$scope.$on("$destroy",function(){currentElement.destroy()}),$scope.$watch("code",function(newValue,oldValue){newValue!==oldValue&&newValue!==codeInSummernote&&currentElement.code(newValue)})}]).directive("summernote",[function(){"use strict";return{restrict:"EA",transclude:!0,replace:!0,controller:"SummernoteController",scope:{code:"=",summernoteConfig:"=config",init:"&onInit",enter:"&onEnter",focus:"&onFocus",blur:"&onBlur",keyup:"&onKeyup",keydown:"&onKeydown",imageUpload:"&onImageUpload"},template:'<div class="summernote"></div>',link:function(scope,element,attrs,summernoteController){summernoteController.activate(scope,element)}}}]);