/* jQuery.fracs 0.14.0 - http://larsjung.de/fracs/ */
!function(t,i,n){"use strict";var e=n(t),r=n(i),o=n.extend,s=n.isFunction,h=([].slice,Math.max),l=Math.min,c=Math.round,u=function(t,i){return typeof t===i},a=function(t,i){return t instanceof i},f=function(t){return t&&t.nodeType},p=function(t){return f(t)?t:a(t,n)?t[0]:void 0},d=function(t,i,e){return n.each(t,function(t,n){e=i.call(n,e,t,n)}),e},v=function(){var t={},i=1;return function(n){return n?(t[n]||(t[n]=i,i+=1),t[n]):0}}(),w=function(t,i,n){var e,r,o;if(t===i)return!0;if(!t||!i||t.constructor!==i.constructor)return!1;for(e=0,r=n.length;r>e;e+=1){if(o=n[e],t[o]&&s(t[o].equals)&&!t[o].equals(i[o]))return!1;if(t[o]!==i[o])return!1}return!0},g=function(t,i,n,e){this.left=c(t),this.top=c(i),this.width=c(n),this.height=c(e),this.right=this.left+this.width,this.bottom=this.top+this.height};o(g.prototype,{equals:function(t){return w(this,t,["left","top","width","height"])},area:function(){return this.width*this.height},relativeTo:function(t){return new g(this.left-t.left,this.top-t.top,this.width,this.height)},intersection:function(t){if(!a(t,g))return null;var i=h(this.left,t.left),n=l(this.right,t.right),e=h(this.top,t.top),r=l(this.bottom,t.bottom),o=n-i,s=r-e;return o>=0&&s>=0?new g(i,e,o,s):null},envelope:function(t){if(!a(t,g))return this;var i=l(this.left,t.left),n=h(this.right,t.right),e=l(this.top,t.top),r=h(this.bottom,t.bottom),o=n-i,s=r-e;return new g(i,e,o,s)}}),o(g,{ofContent:function(n,e){return n&&n!==i&&n!==t?e?new g(0,0,n.scrollWidth,n.scrollHeight):new g(n.offsetLeft-n.scrollLeft,n.offsetTop-n.scrollTop,n.scrollWidth,n.scrollHeight):new g(0,0,r.width(),r.height())},ofViewport:function(n,r){return n&&n!==i&&n!==t?r?new g(n.scrollLeft,n.scrollTop,n.clientWidth,n.clientHeight):new g(n.offsetLeft,n.offsetTop,n.clientWidth,n.clientHeight):new g(e.scrollLeft(),e.scrollTop(),e.width(),e.height())},ofElement:function(t){var i=n(t);if(!i.is(":visible"))return null;var e=i.offset();return new g(e.left,e.top,i.outerWidth(),i.outerHeight())}});var m=function(t,i,n,e){this.visible=t||0,this.viewport=i||0,this.possible=n||0,this.rects=e&&o({},e)||null};o(m.prototype,{equals:function(t){return this.fracsEqual(t)&&this.rectsEqual(t)},fracsEqual:function(t){return w(this,t,["visible","viewport","possible"])},rectsEqual:function(t){return w(this.rects,t.rects,["document","element","viewport"])}}),o(m,{of:function(t,i){var n,e,r;return t=f(t)&&g.ofElement(t)||t,i=f(i)&&g.ofViewport(i)||i||g.ofViewport(),t instanceof g?(n=t.intersection(i))?(e=n.area(),r=l(t.width,i.width)*l(t.height,i.height),new m(e/t.area(),e/i.area(),e/r,{document:n,element:n.relativeTo(t),viewport:n.relativeTo(i)})):new m:new m}});var b=function(t,i){this.els=t,this.viewport=i},T=["width","height","left","right","top","bottom"],y=["possible","visible","viewport"],k=function(t,i,e){var r;return n.inArray(e,T)>=0?r=g.ofElement(t):n.inArray(e,y)>=0&&(r=m.of(t,i)),r?r[e]:0},V=function(t,i){return t.val-i.val},E=function(t,i){return i.val-t.val};o(b.prototype,{sorted:function(t,i){var e=this.viewport;return n.map(this.els,function(i){return{el:i,val:k(i,e,t)}}).sort(i?E:V)},best:function(t,i){return this.els.length?this.sorted(t,i)[0]:null}});var x=function(t){var i=g.ofContent(t,!0),n=g.ofViewport(t,!0),e=i.width-n.width,r=i.height-n.height;this.content=i,this.viewport=n,this.width=0>=e?null:n.left/e,this.height=0>=r?null:n.top/r,this.left=n.left,this.top=n.top,this.right=i.right-n.right,this.bottom=i.bottom-n.bottom};o(x.prototype,{equals:function(t){return w(this,t,["width","height","left","top","right","bottom","content","viewport"])}});var q=function(i){this.el=i||t};o(q.prototype,{equals:function(t){return w(this,t,["el"])},scrollState:function(){return new x(this.el)},scrollTo:function(i,e,r){var o=this.el===t?n("html,body"):n(this.el);i=i||0,e=e||0,r=isNaN(r)?1e3:r,o.stop(!0).animate({scrollLeft:i,scrollTop:e},r)},scroll:function(i,r,o){var s=this.el===t?e:n(this.el);i=i||0,r=r||0,this.scrollTo(s.scrollLeft()+i,s.scrollTop()+r,o)},scrollToRect:function(t,i,n,e){i=i||0,n=n||0,this.scrollTo(t.left-i,t.top-n,e)},scrollToElement:function(t,i,n,e){var r=g.ofElement(t).relativeTo(g.ofContent(this.el));this.scrollToRect(r,i,n,e)}});var S={init:function(){this.callbacks=n.Callbacks("memory unique"),this.currVal=null,this.prevVal=null,this.checkProxy=n.proxy(this.check,this),this.autoCheck()},bind:function(t){this.callbacks.add(t)},unbind:function(t){t?this.callbacks.remove(t):this.callbacks.empty()},trigger:function(){this.callbacks.fireWith(this.context,[this.currVal,this.prevVal])},check:function(t){var i=this.updatedValue(t);return void 0===i?!1:(this.prevVal=this.currVal,this.currVal=i,this.trigger(),!0)},$autoTarget:e,autoEvents:"load resize scroll",autoCheck:function(t){this.$autoTarget[t===!1?"off":"on"](this.autoEvents,this.checkProxy)}},C=function(t,i){this.context=t,this.viewport=i,this.init()};o(C.prototype,S,{updatedValue:function(){var t=m.of(this.context,this.viewport);return this.currVal&&this.currVal.equals(t)?void 0:t}});var L=function(t,i,n,e){this.context=new b(t,i),this.property=n,this.descending=e,this.init()};o(L.prototype,S,{updatedValue:function(){var t=this.context.best(this.property,this.descending);return t&&(t=t.val>0?t.el:null,this.currVal!==t)?t:void 0}});var M=function(e){e&&e!==t&&e!==i?(this.context=e,this.$autoTarget=n(e)):this.context=t,this.init()};o(M.prototype,S,{updatedValue:function(){var t=new x(this.context);return this.currVal&&this.currVal.equals(t)?void 0:t}});var W=function(t,i){var n=[].slice,e=jQuery,r=e.extend,o=e.isFunction,s=r({},i),h=function(i,n,r,s){return r=o(r)?r.apply(i,n):r,o(s[r])?s[r].apply(i,n):(e.error('Method "'+r+'" does not exist on jQuery.'+t),void 0)},l=function(){return h(this,n.call(arguments),s.defaultStatic,l)},c=function(t){return o(c[t])?c[t].apply(this,n.call(arguments,1)):h(this,n.call(arguments),s.defaultMethod,c)},u=function(t){t&&(r(l,t.statics),r(c,t.methods)),l.modplug=u};u.prev={statics:e[t],methods:e.fn[t]},u(i),e[t]=l,e.fn[t]=c},H="fracs";W(H,{statics:{version:"0.14.0",Rect:g,Fractions:m,Group:b,ScrollState:x,Viewport:q,FracsCallbacks:C,GroupCallbacks:L,ScrollStateCallbacks:M,fracs:function(t,i){return m.of(t,i)}},methods:{content:function(t){return this.length?g.ofContent(this[0],t):null},envelope:function(){return d(this,function(t){var i=g.ofElement(this);return t?t.envelope(i):i})},fracs:function(t,i,e){u(t,"string")||(e=i,i=t,t=null),s(i)||(e=i,i=null),e=p(e);var r=H+".fracs."+v(e);return"unbind"===t?this.each(function(){var t=n(this).data(r);t&&t.unbind(i)}):"check"===t?this.each(function(){var t=n(this).data(r);t&&t.check()}):s(i)?this.each(function(){var t=n(this),o=t.data(r);o||(o=new C(this,e),t.data(r,o)),o.bind(i)}):this.length?m.of(this[0],e):null},intersection:function(){return d(this,function(t){var i=g.ofElement(this);return t?t.intersection(i):i})},max:function(t,i,n){return s(i)||(n=i,i=null),n=p(n),i?(new L(this,n,t,!0).bind(i),this):this.pushStack(new b(this,n).best(t,!0).el)},min:function(t,i,n){return s(i)||(n=i,i=null),n=p(n),i?(new L(this,n,t).bind(i),this):this.pushStack(new b(this,n).best(t).el)},rect:function(){return this.length?g.ofElement(this[0]):null},scrollState:function(t,i){var e=H+".scrollState";return u(t,"string")||(i=t,t=null),"unbind"===t?this.each(function(){var t=n(this).data(e);t&&t.unbind(i)}):"check"===t?this.each(function(){var t=n(this).data(e);t&&t.check()}):s(i)?this.each(function(){var t=n(this),r=t.data(e);r||(r=new M(this),t.data(e,r)),r.bind(i)}):this.length?new x(this[0]):null},scroll:function(t,i,n){return this.each(function(){new q(this).scroll(t,i,n)})},scrollTo:function(t,i,e,r){return n.isNumeric(t)&&(r=e,e=i,i=t,t=null),t=p(t),this.each(function(){t?new q(this).scrollToElement(t,i,e,r):new q(this).scrollTo(i,e,r)})},scrollToThis:function(t,i,n,e){return e=new q(p(e)),e.scrollToElement(this[0],t,i,n),this},softLink:function(t,i,e,r){return r=new q(p(r)),this.filter("a[href^=#]").each(function(){var o=n(this);o.on("click",function(){r.scrollToElement(n(o.attr("href"))[0],t,i,e)})})},sort:function(t,i,e){return u(i,"boolean")||(e=i,i=null),e=p(e),this.pushStack(n.map(new b(this,e).sorted(t,!i),function(t){return t.el}))},viewport:function(t){return this.length?g.ofViewport(this[0],t):null}},defaultStatic:"fracs",defaultMethod:"fracs"})}(window,document,jQuery);