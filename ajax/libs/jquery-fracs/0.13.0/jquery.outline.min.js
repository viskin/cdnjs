/*! jQuery.outline 0.13.0 - //larsjung.de/fracs - MIT License */
!function(t,e){"use strict";var i=e(t),n=e.extend,o=e.fracs,r=o.Rect,s=o.Viewport,h={crop:!1,duration:0,focusWidth:.5,focusHeight:.5,autoFocus:!0,styles:[{selector:"header,footer,section,article",fillStyle:"rgb(230,230,230)"},{selector:"h1,h2,h3,h4",fillStyle:"rgb(255,144,55)"}],viewportStyle:{fillStyle:"rgba(255,144,55,0.3)"},viewportDragStyle:{fillStyle:"rgba(255,144,55,0.5)"},invertViewport:!1},l=function(o,l,c){if(!o||!e.isFunction(o.getContext))return null;var u=o.getContext("2d");if(!u)return null;c=c||t;var a,f,d,p,v,w=n({},h,l),g=e(o),m=g.attr("width"),b=g.attr("height"),y=e(c),T=new s(c),k=c===t?function(t){return e(t)}:function(t){return y.find(t)},S=!1,V=function(t,e,i,n,o){t&&(i||n)&&(n&&(u.beginPath(),o?(u.rect(0,0,a.width,t.top),u.rect(0,t.top,t.left,t.height),u.rect(t.right,t.top,a.width-t.right,t.height),u.rect(0,t.bottom,a.width,a.height-t.bottom)):u.rect(t.left,t.top,t.width,t.height),u.fillStyle=n,u.fill()),i&&(u.beginPath(),u.rect(t.left,t.top,t.width,t.height),u.lineWidth=d?Math.max(e,.2/d):e,u.strokeStyle=i,u.stroke()))},E=function(t,i,n,o){var s=e(t),h=r.ofElement(t);!h||h.width<=0||h.height<=0||"hidden"===s.css("visibility")||(h=h.relativeTo(a),i="auto"===i?parseInt(s.css("border-top-width"),10):i,n="auto"===n?s.css("border-top-color"):n,o="auto"===o?s.css("background-color"):o,V(h,i,n,o))},x=function(){e.each(w.styles,function(t,e){k(e.selector).each(function(){E(this,e.strokeWidth,e.strokeStyle,e.fillStyle)})})},C=function(){var t=S&&w.viewportDragStyle?w.viewportDragStyle:w.viewportStyle;V(f,t.strokeWidth,t.strokeStyle,t.fillStyle,w.invertViewport)},q=function(){a=r.ofContent(c),f=r.ofViewport(c,!0),d=Math.min(m/a.width,b/a.height),w.crop&&g.attr("width",a.width*d).attr("height",a.height*d),u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,g.width(),g.height()),u.scale(d,d),x(),C()},W=function(t){var e=r.ofElement(o),i=(t.pageX-e.left)/d-f.width*p,n=(t.pageY-e.top)/d-f.height*v;T.scrollTo(i,n,w.duration)},L=function(t){S=!1,t.preventDefault(),g.css("cursor","pointer").removeClass("dragOn"),e("body").css("cursor","auto"),i.off("mousemove",W),q()},M=function(t){var n;w.autoFocus&&(n=r.ofElement(o),p=((t.pageX-n.left)/d-f.left)/f.width,v=((t.pageY-n.top)/d-f.top)/f.height),(!w.autoFocus||0>p||p>1||0>v||v>1)&&(p=w.focusWidth,v=w.focusHeight),S=!0,t.preventDefault(),g.css("cursor","crosshair").addClass("dragOn"),e("body").css("cursor","crosshair"),i.on("mousemove",W).one("mouseup",L),W(t)},F=function(){g.css("cursor","pointer").mousedown(M),y.on("load resize scroll",q),q()};F(),this.redraw=q},c="fracs.outline";o.modplug({statics:{Outline:l},methods:{outline:function(t,i,n){return"string"!=typeof t&&(n=i,i=t,t=null),n instanceof e&&(n=n[0]),"redraw"===t?this.each(function(){var t=e(this).data(c);t&&t.redraw()}):this.each(function(){var t=e(this).data(c);t||(t=new l(this,i,n),t&&e(this).data(c,t))})}}})}(window,jQuery);