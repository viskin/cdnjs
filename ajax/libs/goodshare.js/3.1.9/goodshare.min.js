/*
 *  @author Interactive agency «Central marketing» http://centralmarketing.ru
 *  @copyright Copyright (c) 2015, Interactive agency «Central marketing»	
 *  @license http://opensource.org/licenses/MIT The MIT License (MIT)
 *  @version 3.1.9 at 16/10/2015 (0:30)
 *  
 *  goodshare.js
 *  
 *  Useful jQuery plugin that will help your website visitors share a link on social networks and microblogs.
 *  Easy to install and configuring on any of your website!
 *  
 *  @category jQuery plugin
 */
!(function(b,f,c,g){b(c).ready(function(){goodshare={init:function(a,h){var e=goodshare,d=b.extend({type:"vk",url:location.href,title:c.title,text:b('meta[property="og:description"]').attr("content"),image:b('meta[property="og:image"]').attr("content")},b(a).data(),h);if(null!==e.popup(link=e[d.type](d)))return!1},vk:function(a){a=b.extend({url:location.href,title:c.title,text:b('meta[property="og:description"]').attr("content"),image:b('meta[property="og:image"]').attr("content")},a);return"http://vk.com/share.php?url="+
encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)+"&description="+encodeURIComponent(a.text)+"&image="+encodeURIComponent(a.image)},ok:function(a){a=b.extend({url:location.href,title:c.title},a);return"http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st.comments="+encodeURIComponent(a.title)+"&st._surl="+encodeURIComponent(a.url)},fb:function(a){a=b.extend({url:location.href,title:c.title},a);return"http://www.facebook.com/sharer.php?u="+encodeURIComponent(a.url)},lj:function(a){a=
b.extend({url:location.href,title:c.title,text:b('meta[property="og:description"]').attr("content")},a);return"http://livejournal.com/update.bml?subject="+encodeURIComponent(a.title)+"&event="+encodeURIComponent('<a href="'+a.url+'">'+a.title+"</a> "+a.text)},tw:function(a){a=b.extend({url:location.href,title:c.title},a);return"http://twitter.com/share?url="+encodeURIComponent(a.url)+"&text="+encodeURIComponent(a.title)},gp:function(a){a=b.extend({url:location.href},a);return"https://plus.google.com/share?url="+
encodeURIComponent(a.url)},mr:function(a){a=b.extend({url:location.href,title:c.title,text:b('meta[property="og:description"]').attr("content"),image:b('meta[property="og:image"]').attr("content")},a);return"http://connect.mail.ru/share?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)+"&description="+encodeURIComponent(a.text)+"&imageurl="+encodeURIComponent(a.image)},li:function(a){a=b.extend({url:location.href,title:c.title,text:b('meta[property="og:description"]').attr("content")},
a);return"http://www.linkedin.com/shareArticle?url="+encodeURIComponent(a.url)+"&text="+encodeURIComponent(a.title)+"&summary="+encodeURIComponent(a.text)+"&mini=true"},tm:function(a){a=b.extend({url:location.href,title:c.title,text:b('meta[property="og:description"]').attr("content")},a);return"https://www.tumblr.com/widgets/share/tool?canonicalUrl="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)+"&caption="+encodeURIComponent(a.text)+"&posttype=link"},bl:function(a){a=b.extend({url:location.href,
title:c.title},a);return"https://www.blogger.com/blog-this.g?u="+encodeURIComponent(a.url)+"&n="+encodeURIComponent(a.title)},pt:function(a){a=b.extend({url:location.href,title:c.title},a);return"https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(a.url)+"&description="+encodeURIComponent(a.title)},en:function(a){a=b.extend({url:location.href,title:c.title,text:b('meta[property="og:description"]').attr("content")},a);return"https://www.evernote.com/clip.action?url="+encodeURIComponent(a.url)+
"&title="+encodeURIComponent(a.title)+"&body="+encodeURIComponent(a.text+'<br/><a href="'+a.url+'">'+a.title+"</a>")},di:function(a){a=b.extend({url:location.href,title:c.title},a);return"http://digg.com/submit?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)},rd:function(a){a=b.extend({url:location.href,title:c.title},a);return"http://www.reddit.com/submit?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)},de:function(a){a=b.extend({url:location.href,title:c.title},
a);return"https://delicious.com/save?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)},su:function(a){a=b.extend({url:location.href,title:c.title},a);return"http://www.stumbleupon.com/submit?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)},po:function(a){a=b.extend({url:location.href,title:c.title},a);return"https://getpocket.com/save?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)},sb:function(a){a=b.extend({url:location.href,title:c.title,
text:b('meta[property="og:description"]').attr("content")},a);return"http://surfingbird.ru/share?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)+"&description="+encodeURIComponent(a.text)},bf:function(a){a=b.extend({url:location.href,title:c.title},a);return"https://buffer.com/add?url="+encodeURIComponent(a.url)+"&text="+encodeURIComponent(a.title)},ip:function(a){a=b.extend({url:location.href,title:c.title},a);return"https://www.instapaper.com/edit?url="+encodeURIComponent(a.url)+
"&title="+encodeURIComponent(a.title)},ra:function(a){a=b.extend({url:location.href},a);return"http://www.readability.com/save?url="+encodeURIComponent(a.url)},popup:function(a){return f.open(a,"","toolbar=0,status=0,scrollbars=0,width=630,height=440")}};b.fn.getCount=function(){var a=function(a){return 999<a&&999999>=a?a/1E3+"k":999999<a?">1M":a},c=function(a){return 0<b(a).length};c('[data-counter="vk"]')&&(b.getJSON("https://vk.com/share.php?act=count&index=1&url="+encodeURIComponent(location.href)+
"&callback=?",function(a){}),f.VK||(VK={}),VK.Share={count:function(e,c){b('[data-counter="vk"]').text(a(c))}});c('[data-counter="fb"]')&&b.getJSON("http://graph.facebook.com/?id="+encodeURIComponent(location.href)+"&callback=?",function(e){e.shares===g?b('[data-counter="fb"]').text("0"):b('[data-counter="fb"]').text(a(e.shares))});c('[data-counter="ok"]')&&(b.getJSON("https://connect.ok.ru/dk?st.cmd=extLike&uid=1&ref="+encodeURIComponent(location.href)+"&callback=?",function(a){}),f.ODKL||(ODKL=
{}),ODKL.updateCount=function(c,d){b('[data-counter="ok"]').text(a(d))});c('[data-counter="tw"]')&&b.getJSON("http://cdn.api.twitter.com/1/urls/count.json?url="+encodeURIComponent(location.href)+"&callback=?",function(c){b('[data-counter="tw"]').text(a(c.count))});c('[data-counter="gp"]')&&b.ajax({type:"POST",url:"https://clients6.google.com/rpc",processData:!0,contentType:"application/json",data:JSON.stringify({method:"pos.plusones.get",id:location.href,params:{nolog:!0,id:location.href,source:"widget",
userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}),success:function(c){b('[data-counter="gp"]').text(a(c.result.metadata.globalCounts.count))}});c('[data-counter="mr"]')&&b.getJSON("http://connect.mail.ru/share_count?url_list="+encodeURIComponent(location.href)+"&callback=1&func=?",function(c){var d=encodeURIComponent(location.href);for(d in c)if(c.hasOwnProperty(d)){var f=c[d].shares;break}b.isEmptyObject(c)?b('[data-counter="mr"]').text("0"):b('[data-counter="mr"]').text(a(f))});
c('[data-counter="li"]')&&b.getJSON("http://www.linkedin.com/countserv/count/share?url="+encodeURIComponent(location.href)+"&callback=?",function(c){b('[data-counter="li"]').text(a(c.count))});c('[data-counter="tm"]')&&b.getJSON("http://api.tumblr.com/v2/share/stats?url="+encodeURIComponent(location.href)+"&callback=?",function(c){b('[data-counter="tm"]').text(a(c.response.note_count))});c('[data-counter="pt"]')&&b.getJSON("http://api.pinterest.com/v1/urls/count.json?url="+encodeURIComponent(location.href)+
"&callback=?",function(c){b('[data-counter="pt"]').text(a(c.count))});c('[data-counter="rd"]')&&b.getJSON("https://www.reddit.com/api/info.json?url="+encodeURIComponent(location.href)+"&jsonp=?",function(c){c=c.data.children;0===c.length?b('[data-counter="rd"]').text("0"):b('[data-counter="rd"]').text(a(c[0].data.score))});c('[data-counter="su"]')&&b.getJSON("http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from html where url="http://www.stumbleupon.com/services/1.01/badge.getinfo?url='+
location.href+'" and xpath="*"')+"&format=json&callback=?",function(c){c=b.parseJSON(c.query.results.html.body);c.result.views===g?b('[data-counter="su"]').text("0"):b('[data-counter="su"]').text(a(c.result.views))});c('[data-counter="po"]')&&b.getJSON("http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from html where url="https://widgets.getpocket.com/v1/button?count=horizontal&url='+location.href+'" and xpath="*"')+"&format=json&callback=?",function(c){b('[data-counter="po"]').text(a(c.query.results.html.body.div.a.span.em.content))});
c('[data-counter="sb"]')&&b.getJSON("http://anyorigin.com/dev/get?url="+encodeURIComponent("http://surfingbird.ru/button?url="+location.href)+"&callback=?",function(c){c=b(c.contents).find("span.stats-num").text();b('[data-counter="sb"]').text(a(c))});c('[data-counter="bf"]')&&b.getJSON("https://api.bufferapp.com/1/links/shares.json?url="+encodeURIComponent(location.href)+"&callback=?",function(c){b('[data-counter="bf"]').text(a(c.shares))})};b(c).on("click",".goodshare",function(a){a.preventDefault();
goodshare.init(this)});b(c).getCount()})})(jQuery,window,document);
