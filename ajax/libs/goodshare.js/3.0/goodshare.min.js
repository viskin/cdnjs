/*
 *	@author Interactive agency "Central marketing" http://iacm.ru
 *	@copyright Copyright (c) 2015, Interactive agency "Central marketing"	
 *	@license http://opensource.org/licenses/MIT The MIT License (MIT)
 *	@version 3.0 at 14/09/2015 (16:50)
 *	
 *	goodshare.js
 *	
 *	Useful jQuery plugin that will help your website visitors share a link on social networks and microblogs.
 *	Easy to install and configuring on any of your website!
 */
;(function(b,c,g,h){b(c).ready(function(){goodshare={init:function(a,d){var e=goodshare,f=b.extend({type:"vk",url:location.href,title:c.title,text:b('meta[property="og:description"]').attr("content"),image:b('meta[property="og:image"]').attr("content")},b(a).data(),d);if(null!==e.popup(link=e[f.type](f)))return!1},vk:function(a){a=b.extend({url:location.href,title:c.title,text:"",image:""},a);return"http://vk.com/share.php?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)+"&description="+
encodeURIComponent(a.text)+"&image="+encodeURIComponent(a.image)},ok:function(a){a=b.extend({url:location.href,text:""},a);return"http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st.comments="+encodeURIComponent(a.text)+"&st._surl="+encodeURIComponent(a.url)},fb:function(a){a=b.extend({url:location.href,title:c.title,image:"",text:""},a);return"http://www.facebook.com/sharer.php?u="+encodeURIComponent(a.url)},lj:function(a){a=b.extend({url:location.href,title:c.title,text:""},a);return"http://livejournal.com/update.bml?subject="+
encodeURIComponent(a.title)+"&event="+encodeURIComponent('<a href="'+a.url+'">'+a.title+"</a> "+a.text)},tw:function(a){a=b.extend({url:location.href,title:c.title},a);return"http://twitter.com/share?url="+encodeURIComponent(a.url)+"&text="+encodeURIComponent(a.title)},gp:function(a){a=b.extend({url:location.href},a);return"https://plus.google.com/share?url="+encodeURIComponent(a.url)},mr:function(a){a=b.extend({url:location.href,title:c.title,image:"",text:""},a);return"http://connect.mail.ru/share?url="+
encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)+"&description="+encodeURIComponent(a.text)+"&imageurl="+encodeURIComponent(a.image)},li:function(a){a=b.extend({url:location.href,title:c.title,text:""},a);return"http://www.linkedin.com/shareArticle?url="+encodeURIComponent(a.url)},tm:function(a){a=b.extend({url:location.href,title:c.title,text:""},a);return"http://www.tumblr.com/share/link?url="+encodeURIComponent(a.url)+"&name="+encodeURIComponent(a.title)+"&description="+encodeURIComponent(a.text)},
bl:function(a){a=b.extend({url:location.href,title:c.title,text:""},a);return"https://www.blogger.com/blog-this.g?u="+encodeURIComponent(a.url)+"&n="+encodeURIComponent(a.title)},pt:function(a){a=b.extend({url:location.href,title:c.title,text:""},a);return"https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(a.url)+"&description="+encodeURIComponent(a.title)},en:function(a){a=b.extend({url:location.href,title:c.title,text:""},a);return"https://www.evernote.com/clip.action?url="+encodeURIComponent(a.url)+
"&title="+encodeURIComponent(a.title)+"&body="+encodeURIComponent(a.text+'<br/><a href="'+a.url+'">'+a.title+"</a>")},di:function(a){a=b.extend({url:location.href,title:c.title,text:""},a);return"http://digg.com/submit?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)},rd:function(a){a=b.extend({url:location.href,title:c.title},a);return"http://www.reddit.com/submit?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)},po:function(a){a=b.extend({url:location.href,
title:c.title,text:""},a);return"https://getpocket.com/save?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)},sb:function(a){a=b.extend({url:location.href,title:c.title,text:""},a);return"http://surfingbird.ru/share?url="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)+"&description="+encodeURIComponent(a.text)},popup:function(a){return g.open(a,"","toolbar=0,status=0,scrollbars=0,width=626,height=436")}};b.getJSON("https://vk.com/share.php?act=count&index=1&url="+
encodeURIComponent(location.href)+"&callback=?",function(a){});VK={Share:{}};VK.Share.count=function(a,d){999<d&&999999>=d?b('[data-counter="vk"]').text(d/1E3+"k"):999999<d?b('[data-counter="vk"]').text((d/1E6).toFixed(3)+"M"):b('[data-counter="vk"]').text(d)};b.getJSON("http://graph.facebook.com/?id="+encodeURIComponent(location.href),function(a){"undefined"===b.type(a.shares)?b('[data-counter="fb"]').text("0"):999<a.shares&&999999>=a.shares?b('[data-counter="fb"]').text(a.shares/1E3+"k"):999999<
a.shares?b('[data-counter="fb"]').text((a.shares/1E6).toFixed(3)+"M"):b('[data-counter="fb"]').text(a.shares)});b.getJSON("https://connect.ok.ru/dk?st.cmd=extLike&uid=1&ref="+encodeURIComponent(location.href)+"&callback=?",function(a){});ODKL={updateCount:function(a,d){999<d&&999999>=d?b('[data-counter="ok"]').text(d/1E3+"k"):999999<d?b('[data-counter="ok"]').text((d/1E6).toFixed(3)+"M"):b('[data-counter="ok"]').text(d)}};b.getJSON("http://cdn.api.twitter.com/1/urls/count.json?url="+encodeURIComponent(location.href)+
"&callback=?",function(a){999<a.count&&999999>=a.count?b('[data-counter="tw"]').text(a.count/1E3+"k"):999999<a.count?b('[data-counter="tw"]').text((a.count/1E6).toFixed(3)+"M"):b('[data-counter="tw"]').text(a.count)});b.ajax({type:"POST",url:"https://clients6.google.com/rpc",processData:!0,contentType:"application/json",data:JSON.stringify({method:"pos.plusones.get",id:location.href,params:{nolog:!0,id:location.href,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}),
success:function(a){999<a.result.metadata.globalCounts.count&&999999>=a.result.metadata.globalCounts.count?b('[data-counter="gp"]').text(a.result.metadata.globalCounts.count/1E3+"k"):999999<a.result.metadata.globalCounts.count?b('[data-counter="gp"]').text((a.result.metadata.globalCounts.count/1E6).toFixed(3)+"M"):b('[data-counter="gp"]').text(a.result.metadata.globalCounts.count)}});b.getJSON("http://connect.mail.ru/share_count?url_list="+encodeURIComponent(location.href)+"&callback=1&func=?",function(a){var d=
encodeURIComponent(location.href);for(d in a)if(a.hasOwnProperty(d)){var c=a[d].shares;break}b.isEmptyObject(a)?b('[data-counter="mr"]').text("0"):999<c&&999999>=c?b('[data-counter="mr"]').text(c/1E3+"k"):999999<c?b('[data-counter="mr"]').text((c/1E6).toFixed(3)+"M"):b('[data-counter="mr"]').text(c)});b.getJSON("http://www.linkedin.com/countserv/count/share?url="+encodeURIComponent(location.href)+"&callback=?",function(a){999<a.count&&999999>=a.count?b('[data-counter="li"]').text(a.count/1E3+"k"):
999999<a.count?b('[data-counter="li"]').text((a.count/1E6).toFixed(3)+"M"):b('[data-counter="li"]').text(a.count)});b.getJSON("http://api.tumblr.com/v2/share/stats?url="+encodeURIComponent(location.href)+"&callback=?",function(a){999<a.response.note_count&&999999>=a.response.note_count?b('[data-counter="tm"]').text(a.response.note_count/1E3+"k"):999999<a.response.note_count?b('[data-counter="tm"]').text((a.response.note_count/1E6).toFixed(3)+"M"):b('[data-counter="tm"]').text(a.response.note_count)});
b.getJSON("http://api.pinterest.com/v1/urls/count.json?url="+encodeURIComponent(location.href)+"&callback=?",function(a){999<a.count&&999999>=a.count?b('[data-counter="pt"]').text(a.count/1E3+"k"):999999<a.count?b('[data-counter="pt"]').text((a.count/1E6).toFixed(3)+"M"):b('[data-counter="pt"]').text(a.count)});b(c).on("click",".goodshare",function(a){a.preventDefault();goodshare.init(this)})})})(jQuery,document,window);
