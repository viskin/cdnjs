if(!org){var org={}}if(!org.polymaps){org.polymaps={}}(function(e){e.version="2.2.0";var h={x:0,y:0};e.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};function i(m){var n=m.indexOf(":");return n<0?m:{space:e.ns[m.substring(0,n)],local:m.substring(n+1)}}e.id=(function(){var m=0;return function(){return ++m}})();e.svg=function(m){return document.createElementNS(e.ns.svg,m)};e.transform=function(w,v,u,t,s,r){var o={},m,n,q;if(!arguments.length){w=1;u=0;s=0;v=0;t=1;r=0}o.zoomFraction=function(y){if(!arguments.length){return n}n=y;m=Math.floor(n+Math.log(Math.sqrt(w*w+v*v+u*u+t*t))/Math.log(2));q=Math.pow(2,-m);return o};o.apply=function(z){var y=Math.pow(2,-z.zoom),A=Math.pow(2,z.zoom-m);return{column:(w*z.column*y+u*z.row*y+s)*A,row:(v*z.column*y+t*z.row*y+r)*A,zoom:z.zoom-m}};o.unapply=function(z){var y=Math.pow(2,-z.zoom),A=Math.pow(2,z.zoom+m);return{column:(z.column*y*t-z.row*y*u-s*t+r*u)/(w*t-v*u)*A,row:(z.column*y*v-z.row*y*w-s*v+r*w)/(u*v-t*w)*A,zoom:z.zoom+m}};o.toString=function(){return"matrix("+[w*q,v*q,u*q,t*q].join(" ")+" 0 0)"};return o.zoomFraction(0)};e.cache=function(w,q){var m={},x={},o={},u=null,t=null,y=64,r=0;function s(n){r--;if(q){q(n)}delete o[n.key];if(n.next){n.next.prev=n.prev}else{if(t=n.prev){t.next=null}}if(n.prev){n.prev.next=n.next}else{if(u=n.next){u.prev=null}}}function v(){for(var n=t;r>y;n=n.prev){if(!n){break}if(n.lock){continue}s(n)}}m.peek=function(n){return o[[n.zoom,n.column,n.row].join("/")]};m.load=function(B,n){var z=[B.zoom,B.column,B.row].join("/"),A=o[z];if(A){if(A.prev){A.prev.next=A.next;if(A.next){A.next.prev=A.prev}else{t=A.prev}A.prev=null;A.next=u;u.prev=A;u=A}A.lock=1;x[z]=A;return A}A={key:z,column:B.column,row:B.row,zoom:B.zoom,next:u,prev:null,lock:1};w.call(null,A,n);x[z]=o[z]=A;if(u){u.prev=A}else{t=A}u=A;r++;return A};m.unload=function(n){if(!(n in x)){return false}var z=x[n];z.lock=0;delete x[n];if(z.request&&z.request.abort(false)){s(z)}return z};m.locks=function(){return x};m.size=function(n){if(!arguments.length){return y}y=n;v();return m};m.flush=function(){v();return m};m.clear=function(){for(var n in o){var z=o[n];if(z.request){z.request.abort(false)}if(q){q(o[n])}if(z.lock){z.lock=0;z.element.parentNode.removeChild(z.element)}}x={};o={};u=t=null;r=0;return m};return m};e.url=function(n){var m=[];function o(s){var q=s.zoom<0?1:1<<s.zoom,r=s.column%q;if(r<0){r+=q}return n.replace(/{(.)}/g,function(x,u){switch(u){case"S":return m[(Math.abs(s.zoom)+s.row+r)%m.length];case"Z":return s.zoom;case"X":return r;case"Y":return s.row;case"B":var t=e.map.coordinateLocation({row:s.row,column:r,zoom:s.zoom}),y=e.map.coordinateLocation({row:s.row+1,column:r+1,zoom:s.zoom}),w=Math.ceil(Math.log(s.zoom)/Math.LN2);return y.lat.toFixed(w)+","+t.lon.toFixed(w)+","+t.lat.toFixed(w)+","+y.lon.toFixed(w)}return u})}o.template=function(q){if(!arguments.length){return n}n=q;return o};o.hosts=function(q){if(!arguments.length){return m}m=q;return o};return o};e.dispatch=function(n){var m={};n.on=function(s,r){var q=m[s]||(m[s]=[]);for(var o=0;o<q.length;o++){if(q[o].handler==r){return n}}q.push({handler:r,on:true});return n};n.off=function(t,s){var r=m[t];if(r){for(var q=0;q<r.length;q++){var o=r[q];if(o.handler==s){o.on=false;r.splice(q,1);break}}}return n};return function(s){var r=m[s.type];if(!r){return}r=r.slice();for(var q=0;q<r.length;q++){var o=r[q];if(o.on){o.handler.call(n,s)}}}};e.queue=(function(){var m=[],q=0,w=6;function n(){if((q>=w)||!m.length){return}q++;m.pop()()}function t(y){for(var x=0;x<m.length;x++){if(m[x]==y){m.splice(x,1);return true}}return false}function r(x,C,A){var y;function z(){y=new XMLHttpRequest();if(A){y.overrideMimeType(A)}y.open("GET",x,true);y.onreadystatechange=function(D){if(y.readyState==4){q--;if(y.status<300){C(y)}n()}};y.send(null)}function B(D){if(t(z)){return true}if(D&&y){y.abort();return true}return false}m.push(z);n();return{abort:B}}function u(x,z,y){return r(x,function(A){if(A.responseText){z(A.responseText)}},y)}function v(x,y){return r(x,function(z){if(z.responseText){y(JSON.parse(z.responseText))}},"application/json")}function s(x,y){return r(x,function(z){if(z.responseXML){y(z.responseXML)}},"application/xml")}function o(z,A,C){var x;function y(){x=document.createElement("img");x.onerror=function(){q--;n()};x.onload=function(){q--;C(x);n()};x.src=A;z.setAttributeNS(e.ns.xlink,"href",A)}function B(D){if(t(y)){return true}if(D&&x){x.src="about:";return true}return false}m.push(y);n();return{abort:B}}return{text:u,xml:s,json:v,image:o}})();e.map=function(){var I={},x,B,A=h,q=h,w={x:256,y:256},H={lat:37.76487,lon:-122.41948},m=12,G=0,r=1,o=[1,18],F=0,y=1,v=0,s=1,C=0,D=-180,E=180;var z=[{lat:a(D),lon:-Infinity},{lat:a(E),lon:Infinity}];I.locationCoordinate=function(J){var L=e.map.locationCoordinate(J),K=Math.pow(2,m);L.column*=K;L.row*=K;L.zoom+=m;return L};I.coordinateLocation=e.map.coordinateLocation;I.coordinatePoint=function(L,O){var M=Math.pow(2,m-O.zoom),N=Math.pow(2,m-L.zoom),K=(O.column*M-L.column*N)*w.x*r,J=(O.row*M-L.row*N)*w.y*r;return{x:q.x+y*K-v*J,y:q.y+v*K+y*J}};I.pointCoordinate=function(L,M){var N=Math.pow(2,m-L.zoom),K=(M.x-q.x)/r,J=(M.y-q.y)/r;return{column:L.column*N+(s*K-C*J)/w.x,row:L.row*N+(C*K+s*J)/w.y,zoom:m}};I.locationPoint=function(K){var M=Math.pow(2,m+G-3)/45,L=(K.lon-H.lon)*M*w.x,J=(l(H.lat)-l(K.lat))*M*w.y;return{x:q.x+y*L-v*J,y:q.y+v*L+y*J}};I.pointLocation=function(M){var L=45/Math.pow(2,m+G-3),K=(M.x-q.x)*L,J=(M.y-q.y)*L;return{lon:H.lon+(s*K-C*J)/w.x,lat:a(l(H.lat)-(C*K+s*J)/w.y)}};function u(){if(o){if(m<o[0]){m=o[0]}else{if(m>o[1]){m=o[1]}}}G=m-(m=Math.round(m));r=Math.pow(2,G)}function t(){if(!z){return}var K=45/Math.pow(2,m+G-3);var P=Math.max(Math.abs(v*q.x+y*q.y),Math.abs(C*q.x+s*q.y)),O=a(D-P*K/w.y),N=a(E+P*K/w.y);H.lat=Math.max(O,Math.min(N,H.lat));var J=Math.max(Math.abs(v*q.y+y*q.x),Math.abs(C*q.y+s*q.x)),M=z[0].lon-J*K/w.x,L=z[1].lon+J*K/w.x;H.lon=Math.max(M,Math.min(L,H.lon))}var n=e.svg("rect");n.setAttribute("visibility","hidden");n.setAttribute("pointer-events","all");I.container=function(J){if(!arguments.length){return x}x=J;x.setAttribute("class","map");x.appendChild(n);return I.resize()};I.focusableParent=function(){for(var J=x;J;J=J.parentNode){if(J.tabIndex>=0){return J}}return window};I.mouse=function(M){var J=(x.ownerSVGElement||x).createSVGPoint();if((c<0)&&(window.scrollX||window.scrollY)){var L=document.body.appendChild(e.svg("svg"));L.style.position="absolute";L.style.top=L.style.left="0px";var K=L.getScreenCTM();c=!(K.f||K.e);document.body.removeChild(L)}if(c){J.x=M.pageX;J.y=M.pageY}else{J.x=M.clientX;J.y=M.clientY}return J.matrixTransform(x.getScreenCTM().inverse())};I.size=function(J){if(!arguments.length){return A}B=J;return I.resize()};I.resize=function(){if(!B){var J=x.ownerSVGElement||x;if(J.offsetWidth==null){n.setAttribute("width","100%");n.setAttribute("height","100%");J=n}b=J.getClientRects()[0];A={x:b.width,y:b.height};k.add(I)}else{A=B;k.remove(I)}n.setAttribute("width",A.x);n.setAttribute("height",A.y);q={x:A.x/2,y:A.y/2};t();I.dispatch({type:"resize"});return I};I.tileSize=function(J){if(!arguments.length){return w}w=J;I.dispatch({type:"move"});return I};I.center=function(J){if(!arguments.length){return H}H=J;t();I.dispatch({type:"move"});return I};I.panBy=function(J){var M=45/Math.pow(2,m+G-3),L=J.x*M,K=J.y*M;return I.center({lon:H.lon+(C*K-s*L)/w.x,lat:a(l(H.lat)+(C*L+s*K)/w.y)})};I.centerRange=function(J){if(!arguments.length){return z}z=J;if(z){D=z[0].lat>-90?l(z[0].lat):-Infinity;E=z[0].lat<90?l(z[1].lat):Infinity}else{D=-Infinity;E=Infinity}t();I.dispatch({type:"move"});return I};I.zoom=function(J){if(!arguments.length){return m+G}m=J;u();return I.center(H)};I.zoomBy=function(M,L,J){if(arguments.length<2){return I.zoom(m+G+M)}if(arguments.length<3){J=I.pointLocation(L)}m=m+G+M;u();var K=I.locationPoint(J);return I.panBy({x:L.x-K.x,y:L.y-K.y})};I.zoomRange=function(J){if(!arguments.length){return o}o=J;return I.zoom(m+G)};I.extent=function(J){if(!arguments.length){return[I.pointLocation({x:0,y:A.y}),I.pointLocation({x:A.x,y:0})]}var N=I.locationPoint(J[0]),M=I.locationPoint(J[1]),L=Math.max((M.x-N.x)/A.x,(N.y-M.y)/A.y),K=I.pointLocation({x:(N.x+M.x)/2,y:(N.y+M.y)/2});m=m+G-Math.log(L)/Math.log(2);u();return I.center(K)};I.angle=function(J){if(!arguments.length){return F}F=J;y=Math.cos(F);v=Math.sin(F);s=Math.cos(-F);C=Math.sin(-F);t();I.dispatch({type:"move"});return I};I.add=function(J){J.map(I);return I};I.remove=function(J){J.map(null);return I};I.dispatch=e.dispatch(I);return I};function k(n){for(var m=0;m<k.maps.length;m++){k.maps[m].resize()}}k.maps=[];k.add=function(n){for(var m=0;m<k.maps.length;m++){if(k.maps[m]==n){return}}k.maps.push(n)};k.remove=function(n){for(var m=0;m<k.maps.length;m++){if(k.maps[m]==n){k.maps.splice(m,1);return}}};window.addEventListener("resize",k,false);function a(m){return 360/Math.PI*Math.atan(Math.exp(m*Math.PI/180))-90}function l(m){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+m*Math.PI/360))}e.map.locationCoordinate=function(m){var n=1/360;return{column:(m.lon+180)*n,row:(180-l(m.lat))*n,zoom:0}};e.map.coordinateLocation=function(n){var m=45/Math.pow(2,n.zoom-3);return{lon:m*n.column-180,lat:a(180-m*n.row)}};var c=/WebKit/.test(navigator.userAgent)?-1:0;e.layer=function(q,y){var E={},w=E.cache=e.cache(q,y).size(512),D=true,n=true,m,x,C,u=e.svg("g"),s,t,o={};u.setAttribute("class","layer");for(var A=-4;A<=-1;A++){o[A]=u.appendChild(e.svg("g"))}for(var A=2;A>=1;A--){o[A]=u.appendChild(e.svg("g"))}o[0]=u.appendChild(e.svg("g"));function B(I){var G=o[0].nextSibling;for(;t<I;t++){u.insertBefore(o[-4],G);u.insertBefore(o[2],G);u.insertBefore(o[1],G);var H=o[-4];for(var F=-4;F<2;){o[F]=o[++F]}o[F]=H}}function v(I){var G=o[0].nextSibling;for(;t>I;t--){u.insertBefore(o[-1],G);u.insertBefore(o[2],o[-4]);var H=o[2];for(var F=2;F>-4;){o[F]=o[--F]}o[F]=H}}function z(){var Y=E.map(),Q=Y.zoom(),I=Q-(Q=Math.round(Q)),F=Y.size(),ab=Y.angle(),L=Y.tileSize(),U=Y.locationCoordinate(Y.center());if(t!=Q){if(t<Q){B(Q)}else{if(t>Q){v(Q)}else{t=Q}}for(var H=-4;H<=2;H++){var S=o[H];S.setAttribute("class","zoom"+(H<0?"":"+")+H+" zoom"+(Q+H));S.setAttribute("transform","scale("+Math.pow(2,-H)+")")}}u.setAttribute("transform","translate("+(F.x/2)+","+(F.y/2)+")"+(ab?"rotate("+ab/Math.PI*180+")":"")+(I?"scale("+Math.pow(2,I)+")":"")+(s?s.zoomFraction(I):""));var R=Y.pointCoordinate(U,h),P=Y.pointCoordinate(U,{x:F.x,y:0}),O=Y.pointCoordinate(U,F),N=Y.pointCoordinate(U,{x:0,y:F.y});if(!I&&!ab&&!s){U.column=(Math.round(L.x*U.column)+(F.x&1)/2)/L.x;U.row=(Math.round(L.y*U.row)+(F.y&1)/2)/L.y}if(s){R=s.unapply(R);P=s.unapply(P);O=s.unapply(O);N=s.unapply(N);U=s.unapply(U)}var G=m?m(R.zoom)-R.zoom:0;if(G){var V=Math.pow(2,G);R.column*=V;R.row*=V;P.column*=V;P.row*=V;O.column*=V;O.row*=V;N.column*=V;N.row*=V;R.zoom=P.zoom=O.zoom=N.zoom+=G}function aa(ah){var af=ah.zoom,ad=af<0?1:1<<af,ae=ah.column%ad,ag=ah.row;if(ae<0){ae+=ad}return{locationPoint:function(ai){var ak=e.map.locationCoordinate(ai),aj=Math.pow(2,af-ak.zoom);return{x:L.x*(aj*ak.column-ae),y:L.y*(aj*ak.row-ag)}}}}var X=w.locks(),T={};for(var ac in X){X[ac].proxyCount=0}if(n&&G>-5&&G<3){var W=R.zoom<0?1:1<<R.zoom;if(D){g(R,P,O,0,W,Z);g(O,N,R,0,W,Z)}else{var K=Math.floor((R.column+O.column)/2),J=Math.max(0,Math.min(W-1,Math.floor((P.row+N.row)/2))),H=Math.min(4,R.zoom);K=K>>H<<H;J=J>>H<<H;Z(K,K+1,J)}}function Z(ae,ad,am){var al=R.zoom,ah=2-G,ag=4+G;for(var an=ae;an<ad;an++){var aq=w.load({column:an,row:am,zoom:al},aa);if(!aq.ready&&!(aq.key in T)){aq.proxyRefs={};var ak,ai,aj;for(var ao=1;ao<=ah;ao++){ai=true;for(var ap=0,af=1<<ao;ap<=af;ap++){for(var ar=0;ar<=af;ar++){aj=w.peek(ak={column:(an<<ao)+ar,row:(am<<ao)+ap,zoom:al+ao});if(aj&&aj.ready){T[aj.key]=w.load(ak);aj.proxyCount++;aq.proxyRefs[aj.key]=aj}else{ai=false}}}if(ai){break}}if(!ai){for(var ao=1;ao<=ag;ao++){aj=w.peek(ak={column:an>>ao,row:am>>ao,zoom:al-ao});if(aj&&aj.ready){T[aj.key]=w.load(ak);aj.proxyCount++;aq.proxyRefs[aj.key]=aj;break}}}}T[aq.key]=aq}}for(var ac in T){var M=T[ac],V=Math.pow(2,M.level=M.zoom-U.zoom),K=L.x*(M.column-U.column*V),J=L.y*(M.row-U.row*V);M.element.setAttribute("transform","translate("+K+","+J+")")}for(var ac in X){if(!(ac in T)){var M=w.unload(ac);M.element.parentNode.removeChild(M.element);delete M.proxyRefs}}for(var ac in T){var M=T[ac];if(M.element.parentNode!=o[M.level]){o[M.level].appendChild(M.element);if(E.show){E.show(M)}}}w.flush()}function r(H){if(H.tile.proxyRefs){for(var F in H.tile.proxyRefs){var G=H.tile.proxyRefs[F];if((--G.proxyCount<=0)&&w.unload(F)){G.element.parentNode.removeChild(G.element)}}delete H.tile.proxyRefs}}E.map=function(F){if(!arguments.length){return C}if(C){if(C==F){u.parentNode.appendChild(u);return E}C.off("move",z).off("resize",z);u.parentNode.removeChild(u)}C=F;if(C){C.container().appendChild(u);if(E.init){E.init(u)}C.on("move",z).on("resize",z);z()}return E};E.container=function(){return u};E.id=function(F){if(!arguments.length){return x}x=F;u.setAttribute("id",F);return E};E.visible=function(F){if(!arguments.length){return n}if(n=F){u.removeAttribute("visibility")}else{u.setAttribute("visibility","hidden")}if(C){z()}return E};E.transform=function(F){if(!arguments.length){return s}s=F;if(C){z()}return E};E.zoom=function(F){if(!arguments.length){return m}m=typeof F=="function"||F==null?F:function(){return F};if(C){z()}return E};E.tile=function(F){if(!arguments.length){return D}D=F;if(C){z()}return E};E.reload=function(){w.clear();if(C){z()}return E};E.dispatch=e.dispatch(E);E.on("load",r);return E};function d(n,m){if(n.row>m.row){var o=n;n=m;m=o}return{x0:n.column,y0:n.row,x1:m.column,y1:m.row,dx:m.column-n.column,dy:m.row-n.row}}function j(w,v,A,r,s){var z=Math.max(A,Math.floor(v.y0)),x=Math.min(r,Math.ceil(v.y1));if((w.x0==v.x0&&w.y0==v.y0)?(w.x0+v.dy/w.dy*w.dx<v.x1):(w.x1-v.dy/w.dy*w.dx<v.x0)){var C=w;w=v;v=C}var D=w.dx/w.dy,B=v.dx/v.dy,o=w.dx>0,m=v.dx<0;for(var u=z;u<x;u++){var q=D*Math.max(0,Math.min(w.dy,u+o-w.y0))+w.x0,n=B*Math.max(0,Math.min(v.dy,u+m-v.y0))+v.x0;s(Math.floor(n),Math.ceil(q),u)}}function g(u,s,r,v,m,o){var x=d(u,s),q=d(s,r),n=d(r,u);if(x.dy>q.dy){var w=x;x=q;q=w}if(x.dy>n.dy){var w=x;x=n;n=w}if(q.dy>n.dy){var w=q;q=n;n=w}if(x.dy){j(n,x,v,m,o)}if(q.dy){j(n,q,v,m,o)}}e.image=function(){var q=e.layer(o,m),n="about:blank";function o(t){var s=t.element=e.svg("image"),r=q.map().tileSize();s.setAttribute("preserveAspectRatio","none");s.setAttribute("width",r.x);s.setAttribute("height",r.y);s.setAttribute("opacity",0);if(typeof n=="function"){t.request=e.queue.image(s,n(t),function(u){delete t.request;t.ready=true;t.img=u;s.removeAttribute("opacity");q.dispatch({type:"load",tile:t})})}else{t.ready=true;s.setAttributeNS(e.ns.xlink,"href",n);q.dispatch({type:"load",tile:t})}}function m(r){if(r.request){r.request.abort(true)}}q.url=function(r){if(!arguments.length){return n}n=typeof r=="string"&&/{.}/.test(r)?e.url(r):r;return q.reload()};return q};e.geoJson=function(C){var u=e.layer(v,B),A=u.container(),q="about:blank",G=true,n="org.polymaps."+e.id(),w="url(#"+n+")",s=A.insertBefore(e.svg("clipPath"),A.firstChild),F=s.appendChild(e.svg("rect")),m=null,t;A.setAttribute("fill-rule","evenodd");s.setAttribute("id",n);if(!arguments.length){C=e.queue.json}function r(J,I){return J&&J.type in z&&z[J.type](J,I)}function E(K,I){var J=I({lat:K[1],lon:K[0]}),L=e.svg("circle");L.setAttribute("r",4.5);L.setAttribute("cx",J.x);L.setAttribute("cy",J.y);return L}function x(M,I,K,L){L.push("M");for(var J=0;J<M.length-I;J++){p=K({lat:M[J][1],lon:M[J][0]});L.push(p.x);L.push(",");L.push(p.y);L.push("L")}L.pop()}function y(M,I,K,L){for(var J=0;J<M.length;J++){x(M[J],I,K,L)}if(I){L.push("Z")}}function D(L,O,I,K){var N=[];for(var J=0;J<O.length;J++){L(O[J],I,K,N)}if(!N.length){return}var M=e.svg("path");M.setAttribute("d",N.join(""));return M}var z={Point:function(J,I){return E(J.coordinates,I)},MultiPoint:function(L,J){var K=e.svg("g");for(var I=0;I<L.coordinates.length;I++){K.appendChild(E(L.coordinates[I],J))}return K},LineString:function(J,I){return D(x,[J.coordinates],0,I)},MultiLineString:function(J,I){return D(x,J.coordinates,0,I)},Polygon:function(J,I){return D(y,[J.coordinates],1,I)},MultiPolygon:function(J,I){return D(y,J.coordinates||J.coords,1,I)},GeometryCollection:function(M,K){var L=e.svg("g");for(var J=0;J<M.geometries.length;J++){var I=r(M.geometries[J],K);if(I){L.appendChild(I)}}return L}};function v(K,I){var J=K.element=e.svg("g");K.features=[];I=I(K);function L(Q){var M=[];if(Q.next){K.request=C(Q.next.href,L)}switch(Q.type){case"FeatureCollection":for(var P=0;P<Q.features.length;P++){var O=Q.features[P],N=r(O.geometry,I.locationPoint);if(N){M.push({element:J.appendChild(N),data:O})}}break;case"Feature":var N=r(Q.geometry,I.locationPoint);if(N){M.push({element:J.appendChild(N),data:Q})}break;default:var N=r(Q,I.locationPoint);if(N){M.push({element:J.appendChild(N),data:{type:"Feature",geometry:Q}})}break}K.ready=true;M.push.apply(K.features,M);u.dispatch({type:"load",tile:K,features:M})}if(t){L({type:"FeatureCollection",features:t})}else{K.request=C(typeof q=="function"?q(K):q,L)}}function B(I){if(I.request){I.request.abort(true)}}u.url=function(I){if(!arguments.length){return q}q=typeof I=="string"&&/{.}/.test(I)?e.url(I):I;if(typeof q=="string"){u.tile(false)}return u.reload()};u.features=function(I){if(!arguments.length){return t}if(I){u.tile(false)}t=I;return u.reload()};u.clip=function(I){if(!arguments.length){return G}if(G){A.removeChild(s)}if(G=I){A.insertBefore(s,A.firstChild)}var K=u.cache.locks();for(var J in K){if(G){K[J].element.setAttribute("clip-path",w)}else{K[J].element.removeAttribute("clip-path")}}return u};var o=u.tile;u.tile=function(I){if(arguments.length&&!I){u.clip(I)}return o.apply(u,arguments)};var H=u.map;u.map=function(I){if(I&&F){var J=I.tileSize();F.setAttribute("width",J.x);F.setAttribute("height",J.y)}return H.apply(u,arguments)};u.show=function(I){if(G){I.element.setAttribute("clip-path",w)}else{I.element.removeAttribute("clip-path")}u.dispatch({type:"show",tile:I,features:I.features});return u};u.reshow=function(){var J=u.cache.locks();for(var I in J){u.show(J[I])}return u};return u};e.dblclick=function(){var r={},n="mouse",q,m;function o(s){var t=q.zoom();if(s.shiftKey){t=Math.ceil(t)-t-1}else{t=1-t+Math.floor(t)}n==="mouse"?q.zoomBy(t,q.mouse(s)):q.zoomBy(t)}r.zoom=function(s){if(!arguments.length){return n}n=s;return r};r.map=function(s){if(!arguments.length){return q}if(q){m.removeEventListener("dblclick",o,false);m=null}if(q=s){m=q.container();m.addEventListener("dblclick",o,false)}return r};return r};e.drag=function(){var q={},s,m,r;function n(u){if(u.shiftKey){return}r={x:u.clientX,y:u.clientY};s.focusableParent().focus();u.preventDefault();document.body.style.setProperty("cursor","move",null)}function o(u){if(!r){return}s.panBy({x:u.clientX-r.x,y:u.clientY-r.y});r.x=u.clientX;r.y=u.clientY}function t(u){if(!r){return}o(u);r=null;document.body.style.removeProperty("cursor")}q.map=function(u){if(!arguments.length){return s}if(s){m.removeEventListener("mousedown",n,false);m=null}if(s=u){m=s.container();m.addEventListener("mousedown",n,false)}return q};window.addEventListener("mousemove",o,false);window.addEventListener("mouseup",t,false);return q};e.wheel=function(){var s={},r=0,v=0,n=true,w="mouse",u,m,o;function q(x){u=null}function t(A){var C=(A.wheelDelta/120||-A.detail)*0.1,x;if(f<0){var z=Date.now(),B=z-v;if((B>9)&&(Math.abs(A.wheelDelta)/B>=50)){f=1}v=z}if(f==1){C*=0.03}if(!n&&C){var y=Date.now();if(y-r>200){C=C>0?+1:-1;r=y}else{C=0}}if(C){switch(w){case"mouse":x=m.mouse(A);if(!u){u=m.pointLocation(x)}m.off("move",q).zoomBy(C,x,u).on("move",q);break;case"location":m.zoomBy(C,m.locationPoint(u),u);break;default:m.zoomBy(C);break}}A.preventDefault();return false}s.smooth=function(y){if(!arguments.length){return n}n=y;return s};s.zoom=function(y,z){if(!arguments.length){return w}w=y;u=z;if(m){if(w=="mouse"){m.on("move",q)}else{m.off("move",q)}}return s};s.map=function(y){if(!arguments.length){return m}if(m){o.removeEventListener("mousemove",q,false);o.removeEventListener("mousewheel",t,false);o.removeEventListener("DOMMouseScroll",t,false);o=null;m.off("move",q)}if(m=y){if(w=="mouse"){m.on("move",q)}o=m.container();o.addEventListener("mousemove",q,false);o.addEventListener("mousewheel",t,false);o.addEventListener("DOMMouseScroll",t,false)}return s};return s};var f=/WebKit\/533/.test(navigator.userAgent)?-1:0;e.arrow=function(){var x={},z={left:0,right:0,up:0,down:0},y=0,m,u=250,v=50,s=16,o,w;function t(D){if(D.ctrlKey||D.altKey||D.metaKey){return}var C=Date.now(),B=0,A=0;switch(D.keyCode){case 37:if(!z.left){y=C;z.left=1;if(!z.right){B=s}}break;case 39:if(!z.right){y=C;z.right=1;if(!z.left){B=-s}}break;case 38:if(!z.up){y=C;z.up=1;if(!z.down){A=s}}break;case 40:if(!z.down){y=C;z.down=1;if(!z.up){A=-s}}break;default:return}if(B||A){o.panBy({x:B,y:A})}if(!m&&(z.left|z.right|z.up|z.down)){m=setInterval(q,v)}D.preventDefault()}function n(A){y=Date.now();switch(A.keyCode){case 37:z.left=0;break;case 39:z.right=0;break;case 38:z.up=0;break;case 40:z.down=0;break;default:return}if(m&&!(z.left|z.right|z.up|z.down)){m=clearInterval(m)}A.preventDefault()}function r(A){switch(A.charCode){case 45:case 95:o.zoom(Math.ceil(o.zoom())-1);break;case 43:case 61:o.zoom(Math.floor(o.zoom())+1);break;default:return}A.preventDefault()}function q(){if(!o){return}if(Date.now()<y+u){return}var B=(z.left-z.right)*s,A=(z.up-z.down)*s;if(B||A){o.panBy({x:B,y:A})}}x.map=function(A){if(!arguments.length){return o}if(o){w.removeEventListener("keypress",r,false);w.removeEventListener("keydown",t,false);w.removeEventListener("keyup",n,false);w=null}if(o=A){w=o.focusableParent();w.addEventListener("keypress",r,false);w.addEventListener("keydown",t,false);w.addEventListener("keyup",n,false)}return x};x.speed=function(A){if(!arguments.length){return s}s=A;return x};return x};e.hash=function(){var s={},o,r=90-1e-8,q;function m(){var t=q.center(),w=q.zoom(),u=Math.max(0,Math.ceil(Math.log(w)/Math.LN2)),v="#"+w.toFixed(2)+"/"+t.lat.toFixed(u)+"/"+t.lon.toFixed(u);if(o!==v){location.replace(o=v)}}function n(){if(location.hash===o){return}var t=(o=location.hash).substring(1).split("/").map(Number);if(t.length<3||t.some(isNaN)){m()}else{var u=q.size();q.zoomBy(t[0]-q.zoom(),{x:u.x/2,y:u.y/2},{lat:Math.min(r,Math.max(-r,t[1])),lon:t[2]})}}s.map=function(t){if(!arguments.length){return q}if(q){q.off("move",m);window.removeEventListener("hashchange",n,false)}if(q=t){q.on("move",m);window.addEventListener("hashchange",n,false);location.hash?n():m()}return s};return s};e.interact=function(){var o={},n=e.drag(),m=e.wheel(),r=e.dblclick(),q=e.arrow();o.map=function(s){n.map(s);m.map(s);r.map(s);q.map(s);return o};return o};e.compass=function(){var L={},V=e.svg("g"),N={},R=30,Q=16,x=0,U=250,D=50,M="top-left",P="small",B,y="small",s,q,F,o,A=e.svg("rect"),E,H,O;V.setAttribute("class","compass");A.setAttribute("class","back fore");A.setAttribute("pointer-events","none");A.setAttribute("display","none");function n(r){V.setAttribute("class","compass active");if(!s){s=setInterval(I,D)}if(q){E.panBy(q)}x=Date.now();return t(r)}function I(){if(q&&(Date.now()>x+U)){E.panBy(q)}}function w(r){if(r.shiftKey){o={x0:E.mouse(r)};E.focusableParent().focus();return t(r)}}function C(r){if(!o){return}o.x1=E.mouse(r);A.setAttribute("x",Math.min(o.x0.x,o.x1.x));A.setAttribute("y",Math.min(o.x0.y,o.x1.y));A.setAttribute("width",Math.abs(o.x0.x-o.x1.x));A.setAttribute("height",Math.abs(o.x0.y-o.x1.y));A.removeAttribute("display")}function J(r){V.setAttribute("class","compass");if(o){if(o.x1){E.extent([E.pointLocation({x:Math.min(o.x0.x,o.x1.x),y:Math.max(o.x0.y,o.x1.y)}),E.pointLocation({x:Math.max(o.x0.x,o.x1.x),y:Math.min(o.x0.y,o.x1.y)})]);A.setAttribute("display","none")}o=null}if(s){clearInterval(s);s=0}}function G(r){return function(){r?this.setAttribute("class","active"):this.removeAttribute("class");q=r}}function K(r){return function(Y){V.setAttribute("class","compass active");var Z=E.zoom();E.zoom(r<0?Math.ceil(Z)-1:Math.floor(Z)+1);return t(Y)}}function X(r){return function(Y){E.zoom(r);return t(Y)}}function T(){this.setAttribute("class","active")}function z(){this.removeAttribute("class")}function t(r){r.stopPropagation();r.preventDefault();return false}function u(ab){var r=Math.SQRT1_2*R,ad=R*0.7,ac=R*0.2,aa=e.svg("g"),Z=aa.appendChild(e.svg("path")),Y=aa.appendChild(e.svg("path"));Z.setAttribute("class","direction");Z.setAttribute("pointer-events","all");Z.setAttribute("d","M0,0L"+r+","+r+"A"+R+","+R+" 0 0,1 "+-r+","+r+"Z");Y.setAttribute("class","chevron");Y.setAttribute("d","M"+ac+","+(ad-ac)+"L0,"+ad+" "+-ac+","+(ad-ac));Y.setAttribute("pointer-events","none");aa.addEventListener("mousedown",n,false);aa.addEventListener("mouseover",G(ab),false);aa.addEventListener("mouseout",G(null),false);aa.addEventListener("dblclick",t,false);return aa}function S(ad){var Y=R*0.4,ae=Y/2,ab=e.svg("g"),Z=ab.appendChild(e.svg("path")),r=ab.appendChild(e.svg("path")),ac=ab.appendChild(e.svg("path")),aa=ab.appendChild(e.svg("path"));Z.setAttribute("class","back");Z.setAttribute("d","M"+-Y+",0V"+-Y+"A"+Y+","+Y+" 0 1,1 "+Y+","+-Y+"V0Z");r.setAttribute("class","direction");r.setAttribute("d",Z.getAttribute("d"));ac.setAttribute("class","chevron");ac.setAttribute("d","M"+-ae+","+-Y+"H"+ae+(ad>0?"M0,"+(-Y-ae)+"V"+-ae:""));aa.setAttribute("class","fore");aa.setAttribute("fill","none");aa.setAttribute("d",Z.getAttribute("d"));ab.addEventListener("mousedown",K(ad),false);ab.addEventListener("mouseover",T,false);ab.addEventListener("mouseout",z,false);ab.addEventListener("dblclick",t,false);return ab}function m(Z){var r=R*0.2,ac=R*0.4,aa=e.svg("g"),Y=aa.appendChild(e.svg("rect")),ab=aa.appendChild(e.svg("path"));Y.setAttribute("pointer-events","all");Y.setAttribute("fill","none");Y.setAttribute("x",-ac);Y.setAttribute("y",-0.75*ac);Y.setAttribute("width",2*ac);Y.setAttribute("height",1.5*ac);ab.setAttribute("class","chevron");ab.setAttribute("d","M"+-r+",0H"+r);aa.addEventListener("mousedown",X(Z),false);aa.addEventListener("dblclick",t,false);return aa}function v(){var r=R+6,ab=r,aa=E.size();switch(M){case"top-left":break;case"top-right":r=aa.x-r;break;case"bottom-left":ab=aa.y-ab;break;case"bottom-right":r=aa.x-r;ab=aa.y-ab;break}var Y="translate("+r+","+ab+")";if(F){F.setAttribute("transform",Y)}if(B){B.setAttribute("transform",Y)}for(var Z in N){Z==E.zoom()?N[Z].setAttribute("class","active"):N[Z].removeAttribute("class")}}function W(){while(V.lastChild){V.removeChild(V.lastChild)}V.appendChild(A);if(y!="none"){F=V.appendChild(e.svg("g"));F.setAttribute("class","pan");var ab=F.appendChild(e.svg("circle"));ab.setAttribute("class","back");ab.setAttribute("r",R);var af=F.appendChild(u({x:0,y:-Q}));af.setAttribute("transform","rotate(0)");var ae=F.appendChild(u({x:Q,y:0}));ae.setAttribute("transform","rotate(90)");var Y=F.appendChild(u({x:0,y:Q}));Y.setAttribute("transform","rotate(180)");var ad=F.appendChild(u({x:-Q,y:0}));ad.setAttribute("transform","rotate(270)");var ac=F.appendChild(e.svg("circle"));ac.setAttribute("fill","none");ac.setAttribute("class","fore");ac.setAttribute("r",R)}else{F=null}if(P!="none"){B=V.appendChild(e.svg("g"));B.setAttribute("class","zoom");var Z=-0.5;if(P=="big"){N={};for(var aa=E.zoomRange()[0],Z=0;aa<=E.zoomRange()[1];aa++,Z++){(N[aa]=B.appendChild(m(aa))).setAttribute("transform","translate(0,"+(-(Z+0.75)*R*0.4)+")")}}var r=y=="none"?0.4:2;B.setAttribute("transform","translate(0,"+R*(/^top-/.test(M)?(r+(Z+0.5)*0.4):-r)+")");B.appendChild(S(+1)).setAttribute("transform","translate(0,"+(-(Z+0.5)*R*0.4)+")");B.appendChild(S(-1)).setAttribute("transform","scale(-1)")}else{B=null}v()}L.radius=function(r){if(!arguments.length){return R}R=r;if(E){W()}return L};L.speed=function(r){if(!arguments.length){return R}Q=r;return L};L.position=function(r){if(!arguments.length){return M}M=r;if(E){W()}return L};L.pan=function(r){if(!arguments.length){return y}y=r;if(E){W()}return L};L.zoom=function(r){if(!arguments.length){return P}P=r;if(E){W()}return L};L.map=function(r){if(!arguments.length){return E}if(E){H.removeEventListener("mousedown",w,false);H.removeChild(V);H=null;O.removeEventListener("mousemove",C,false);O.removeEventListener("mouseup",J,false);O=null;E.off("move",v).off("resize",v)}if(E=r){H=E.container();H.appendChild(V);H.addEventListener("mousedown",w,false);O=H.ownerDocument.defaultView;O.addEventListener("mousemove",C,false);O.addEventListener("mouseup",J,false);E.on("move",v).on("resize",v);W()}return L};return L};e.grid=function(){var n={},q,o=e.svg("g");o.setAttribute("class","grid");function m(v){var r,C=o.firstChild,B=q.size(),u=q.pointLocation(h),w=q.pointLocation(B),s=Math.pow(2,4-Math.round(q.zoom()));u.lat=Math.floor(u.lat/s)*s;u.lon=Math.ceil(u.lon/s)*s;for(var A;(A=q.locationPoint(u).x)<=B.x;u.lon+=s){if(!C){C=o.appendChild(e.svg("line"))}C.setAttribute("x1",A);C.setAttribute("x2",A);C.setAttribute("y1",0);C.setAttribute("y2",B.y);C=C.nextSibling}for(var z;(z=q.locationPoint(u).y)<=B.y;u.lat-=s){if(!C){C=o.appendChild(e.svg("line"))}C.setAttribute("y1",z);C.setAttribute("y2",z);C.setAttribute("x1",0);C.setAttribute("x2",B.x);C=C.nextSibling}while(C){var t=C.nextSibling;o.removeChild(C);C=t}}n.map=function(r){if(!arguments.length){return q}if(q){o.parentNode.removeChild(o);q.off("move",m).off("resize",m)}if(q=r){q.on("move",m).on("resize",m);q.container().appendChild(o);q.dispatch({type:"move"})}return n};return n};e.stylist=function(){var m=[],n=[],o;function q(z){var s=z.features.length,w=m.length,B=n.length,y,A,r,C,D,u,t;for(u=0;u<s;++u){if(!(r=(y=z.features[u]).element)){continue}A=y.data;for(t=0;t<w;++t){D=(C=m[t]).value;if(typeof D==="function"){D=D.call(null,A)}D==null?(C.name.local?r.removeAttributeNS(C.name.space,C.name.local):r.removeAttribute(C.name)):(C.name.local?r.setAttributeNS(C.name.space,C.name.local,D):r.setAttribute(C.name,D))}for(t=0;t<B;++t){D=(C=n[t]).value;if(typeof D==="function"){D=D.call(null,A)}D==null?r.style.removeProperty(C.name):r.style.setProperty(C.name,D,C.priority)}if(D=o){if(typeof D==="function"){D=D.call(null,A)}while(r.lastChild){r.removeChild(r.lastChild)}if(D!=null){r.appendChild(e.svg("title")).appendChild(document.createTextNode(D))}}}}q.attr=function(s,r){m.push({name:i(s),value:r});return q};q.style=function(t,r,s){n.push({name:t,value:r,priority:arguments.length<3?null:s});return q};q.title=function(r){o=r;return q};return q}})(org.polymaps);