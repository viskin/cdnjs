YUI.add("lazy-model-list",function(a,i){var d=a.Attribute.prototype,g=YUI.namespace("Env.Model"),f=a.Lang,h=a.Array,b="add",e="error",c="reset";a.LazyModelList=a.Base.create("lazyModelList",a.ModelList,[],{free:function(k){var j;if(k){j=f.isNumber(k)?k:this.indexOf(k);if(j>=0){delete this._models[j];}}else{this._models=[];}return this;},get:function(j){if(this.attrAdded(j)){return d.get.apply(this,arguments);}return h.map(this._items,function(k){return k[j];});},getAsHTML:function(j){if(this.attrAdded(j)){return a.Escape.html(d.get.apply(this,arguments));}return h.map(this._items,function(k){return a.Escape.html(k[j]);});},getAsURL:function(j){if(this.attrAdded(j)){return encodeURIComponent(d.get.apply(this,arguments));}return h.map(this._items,function(k){return encodeURIComponent(k[j]);});},indexOf:function(j){return h.indexOf(j&&j._isYUIModel?this._models:this._items,j);},reset:function(j,k){j||(j=[]);k||(k={});var l=a.merge({src:"reset"},k);j=j._isYUIModelList?j.map(this._modelToObject):h.map(j,this._modelToObject);l.models=j;if(k.silent){this._defResetFn(l);}else{if(this.comparator){j.sort(a.bind(this._sort,this));}this.fire(c,l);}return this;},revive:function(l){var k,j,m;if(l||l===0){return this._revive(f.isNumber(l)?l:this.indexOf(l));}else{m=[];for(k=0,j=this._items.length;k<j;k++){m.push(this._revive(k));}return m;}},toJSON:function(){return this.toArray();},_add:function(l,j){var k;j||(j={});l=this._modelToObject(l);if(!("clientId" in l)){l.clientId=this._generateClientId();}if(this._isInList(l)){this.fire(e,{error:"Model is already in the list.",model:l,src:"add"});return;}k=a.merge(j,{index:"index" in j?j.index:this._findIndex(l),model:l});j.silent?this._defAddFn(k):this.fire(b,k);return l;},_clear:function(){h.each(this._models,this._detachList,this);this._clientIdMap={};this._idMap={};this._items=[];this._models=[];},_generateClientId:function(){g.lastId||(g.lastId=0);return this.model.NAME+"_"+(g.lastId+=1);},_isInList:function(j){return !!(("clientId" in j&&this._clientIdMap[j.clientId])||("id" in j&&this._idMap[j.id]));},_modelToObject:function(j){if(j._isYUIModel){j=j.getAttrs();delete j.destroyed;delete j.initialized;}return j;},_remove:function(k,j){if(k._isYUIModel){k=this.indexOf(k);}return a.ModelList.prototype._remove.call(this,k,j);},_revive:function(k){var l,j;if(k<0){return null;}l=this._items[k];if(!l){return null;}j=this._models[k];if(!j){j=new this.model(l);this._attachList(j);this._models[k]=j;}return j;},_defAddFn:function(k){var j=k.model;this._clientIdMap[j.clientId]=j;if(f.isValue(j.id)){this._idMap[j.id]=j;}this._items.splice(k.index,0,j);},_defRemoveFn:function(m){var k=m.index,l=m.model,j=this._models[k];delete this._clientIdMap[l.clientId];if("id" in l){delete this._idMap[l.id];}if(j){this._detachList(j);}this._items.splice(k,1);this._models.splice(k,1);}});},"@VERSION@",{"requires":["model-list"]});