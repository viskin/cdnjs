YUI.add("calendar",function(c,g){var t=c.ClassNameManager.getClassName,o="calendar",e=40,q=38,u=37,j=39,f=13,h=32,n=t(o,"header"),d=t(o,"day-selected"),b=t(o,"day-highlighted"),s=t(o,"day"),a=t(o,"prevmonth-day"),p=t(o,"nextmonth-day"),k=t(o,"grid"),l=c.DataType.Date,r=c.delegate,v=t(o,"pane"),i=c.UA.os;function m(w){m.superclass.constructor.apply(this,arguments);}c.Calendar=c.extend(m,c.CalendarBase,{_keyEvents:[],_highlightedDateNode:null,_lastSelectedDate:null,initializer:function(){this.plug(c.Plugin.CalendarNavigator);this._keyEvents=[];this._highlightedDateNode=null;this._lastSelectedDate=null;},_bindCalendarEvents:function(){var w=this.get("contentBox"),x=w.one("."+v);x.on("selectstart",this._preventSelectionStart);x.delegate("click",this._clickCalendar,"."+s+", ."+a+", ."+p,this);x.delegate("keydown",this._keydownCalendar,"."+k,this);x.delegate("focus",this._focusCalendarGrid,"."+k,this);x.delegate("focus",this._focusCalendarCell,"."+s,this);x.delegate("blur",this._blurCalendarGrid,"."+k+",."+s,this);},_preventSelectionStart:function(w){w.preventDefault();},_highlightDateNode:function(x){this._unhighlightCurrentDateNode();var w=this._dateToNode(x);w.focus();w.addClass(b);},_unhighlightCurrentDateNode:function(){var w=this.get("contentBox").all("."+b);if(w){w.removeClass(b);}},_getGridNumber:function(x){var w=x.get("id").split("_").reverse();return parseInt(w[0],10);},_blurCalendarGrid:function(w){this._unhighlightCurrentDateNode();},_focusCalendarCell:function(w){this._highlightedDateNode=w.target;w.stopPropagation();},_focusCalendarGrid:function(w){this._unhighlightCurrentDateNode();this._highlightedDateNode=null;},_keydownCalendar:function(E){var y=this._getGridNumber(E.target),A=!this._highlightedDateNode?null:this._nodeToDate(this._highlightedDateNode),G=E.keyCode,x=0,z="";switch(G){case e:x=7;z="s";break;case q:x=-7;z="n";break;case u:x=-1;z="w";break;case j:x=1;z="e";break;case h:case f:E.preventDefault();if(this._highlightedDateNode){var D=this.get("selectionMode");if(D==="single"&&!this._highlightedDateNode.hasClass(d)){this._clearSelection(true);this._addDateToSelection(A);}else{if(D==="multiple"||D==="multiple-sticky"){if(this._highlightedDateNode.hasClass(d)){this._removeDateFromSelection(A);}else{this._addDateToSelection(A);}}}}break;}if(G==e||G==q||G==u||G==j){if(!A){A=l.addMonths(this.get("date"),y);x=0;}E.preventDefault();var F=l.addDays(A,x),w=this.get("date"),C=l.addMonths(this.get("date"),this._paneNumber-1),B=new Date(C);C.setDate(l.daysInMonth(C));if(l.isInRange(F,w,C)){this._highlightDateNode(F);}else{if(l.isGreater(w,F)){if(!l.isGreaterOrEqual(this.get("minimumDate"),w)){this.set("date",l.addMonths(w,-1));this._highlightDateNode(F);}}else{if(l.isGreater(F,C)){if(!l.isGreaterOrEqual(B,this.get("maximumDate"))){this.set("date",l.addMonths(w,1));this._highlightDateNode(F);}}}}}},_clickCalendar:function(z){var A=z.currentTarget,x=A.hasClass(s)&&!A.hasClass(a)&&!A.hasClass(p),w=A.hasClass(d);switch(this.get("selectionMode")){case ("single"):if(x){if(!w){this._clearSelection(true);this._addDateToSelection(this._nodeToDate(A));}}break;case ("multiple-sticky"):if(x){if(w){this._removeDateFromSelection(this._nodeToDate(A));}else{this._addDateToSelection(this._nodeToDate(A));}}break;case ("multiple"):if(x){if(!z.metaKey&&!z.ctrlKey&&!z.shiftKey){this._clearSelection(true);this._lastSelectedDate=this._nodeToDate(A);this._addDateToSelection(this._lastSelectedDate);}else{if(((i=="macintosh"&&z.metaKey)||(i!="macintosh"&&z.ctrlKey))&&!z.shiftKey){if(w){this._removeDateFromSelection(this._nodeToDate(A));this._lastSelectedDate=null;}else{this._lastSelectedDate=this._nodeToDate(A);this._addDateToSelection(this._lastSelectedDate);}}else{if(((i=="macintosh"&&z.metaKey)||(i!="macintosh"&&z.ctrlKey))&&z.shiftKey){if(this._lastSelectedDate){var y=this._nodeToDate(A);this._addDateRangeToSelection(y,this._lastSelectedDate);this._lastSelectedDate=y;}else{this._lastSelectedDate=this._nodeToDate(A);this._addDateToSelection(this._lastSelectedDate);}}else{if(z.shiftKey){if(this._lastSelectedDate){var y=this._nodeToDate(A);this._clearSelection(true);this._addDateRangeToSelection(y,this._lastSelectedDate);this._lastSelectedDate=y;}else{this._clearSelection(true);this._lastSelectedDate=this._nodeToDate(A);this._addDateToSelection(this._lastSelectedDate);}}}}}}break;}if(x){this.fire("dateClick",{cell:A,date:this._nodeToDate(A)});}else{if(A.hasClass(a)){this.fire("prevMonthClick");}else{if(A.hasClass(p)){this.fire("nextMonthClick");}}}},subtractMonth:function(w){this.set("date",l.addMonths(this.get("date"),-1));if(w){w.halt();}},subtractYear:function(w){this.set("date",l.addYears(this.get("date"),-1));if(w){w.halt();}},addMonth:function(w){this.set("date",l.addMonths(this.get("date"),1));if(w){w.halt();}},addYear:function(w){this.set("date",l.addYears(this.get("date"),1));if(w){w.halt();}}},{NAME:"calendar",ATTRS:{selectionMode:{value:"single"},date:{value:new Date(),lazyAdd:false,setter:function(B){var x=this._normalizeDate(B),y=l.addMonths(x,this._paneNumber-1);var z=this.get("minimumDate");var A=this.get("maximumDate");if((!z||l.isGreaterOrEqual(x,z))&&(!A||l.isGreaterOrEqual(A,y))){return x;}else{if(z&&l.isGreater(z,x)){return z;}else{if(A&&l.isGreater(y,A)){var w=l.addMonths(A,-1*(this._paneNumber-1));return w;}}}}},minimumDate:{value:null,setter:function(y){if(y){var x=this.get("date"),w=this._normalizeDate(y);if(x&&!l.isGreaterOrEqual(x,w)){this.set("date",w);}return w;}else{return this._normalizeDate(y);}}},maximumDate:{value:null,setter:function(y){if(y){var w=this.get("date"),x=this._normalizeDate(y);if(w&&!l.isGreaterOrEqual(y,l.addMonths(w,this._paneNumber-1))){this.set("date",l.addMonths(x,-1*(this._paneNumber-1)));}return x;}else{return y;}}}}});},"@VERSION@",{"requires":["calendar-base","calendarnavigator"],"lang":["de","en","fr","ja","nb-NO","pt-BR","ru","zh-HANT-TW"],"skinnable":true});