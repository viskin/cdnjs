YUI.add("editor-br",function(d,c){var e=function(){e.superclass.constructor.apply(this,arguments);},a="host",b="li";d.extend(e,d.Base,{_onKeyDown:function(j){if(j.stopped){j.halt();return;}if(j.keyCode==13){var g=this.get(a),i=g.getInstance(),h=new i.EditorSelection(),f="";if(h){if(d.UA.ie){if(!h.anchorNode||(!h.anchorNode.test(b)&&!h.anchorNode.ancestor(b))){var g=this.get(a);g.execCommand("inserthtml",i.EditorSelection.CURSOR);j.halt();}}if(d.UA.webkit){if(!h.anchorNode.test(b)&&!h.anchorNode.ancestor(b)){g.frame._execCommand("insertlinebreak",null);j.halt();}}}}},_afterEditorReady:function(){var f=this.get(a).getInstance();try{f.config.doc.execCommand("insertbronreturn",null,true);}catch(g){}if(d.UA.ie||d.UA.webkit){f.on("keydown",d.bind(this._onKeyDown,this),f.config.doc);}},_onNodeChange:function(h){switch(h.changedType){case"backspace-up":case"backspace-down":case"delete-up":var g=this.get(a).getInstance();var i=h.changedNode;var f=g.config.doc.createTextNode(" ");i.appendChild(f);i.removeChild(f);break;}},initializer:function(){var f=this.get(a);if(f.editorPara){d.error("Can not plug EditorBR and EditorPara at the same time.");return;}f.after("ready",d.bind(this._afterEditorReady,this));if(d.UA.gecko){f.on("nodeChange",d.bind(this._onNodeChange,this));}}},{NAME:"editorBR",NS:"editorBR",ATTRS:{host:{value:false}}});d.namespace("Plugin");d.Plugin.EditorBR=e;},"@VERSION@",{"requires":["editor-base"]});