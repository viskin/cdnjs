YUI.add("scrollview-paginator",function(a){var b=(a.ScrollView)?a.ScrollView.UI_SRC:"ui",c="index",j="prevIndex",g="scrollX",f="scrollY",d="total",h="boundingBox",i="contentBox",e=3;function k(){k.superclass.constructor.apply(this,arguments);}k.NAME="pluginScrollViewPaginator";k.NS="pages";k.ATTRS={selector:{value:null},index:{value:0},prevIndex:{value:0},prevIndex:{value:0},total:{value:0}};a.extend(k,a.Plugin.Base,{optimizeDOM:false,_pageOffsets:null,_pageNodes:null,initializer:function(m){var n=this,l=m.optimizeDOM||l;n._host=n.get("host");n.beforeHostMethod("_flickFrame",n._flickFrame);n.afterHostMethod("_uiDimensionsChange",n._calcOffsets);n.afterHostEvent("scrollEnd",n._scrollEnded);n.afterHostEvent("render",n._afterRender);n.after("indexChange",n._afterIndexChange);n.optimizeDOM=l;},_calcOffsets:function(){var u=this._host,n=u.get(i),s=u.get(h),p=u._scrollsVertical,v=(p)?u._scrollHeight:u._scrollWidth,t=this.get("selector"),q=this.optimizeDOM,r=this.get(c),l,m;l=t?n.all(t):n.get("children");this.set(d,l.size());this._pageOffsets=l.get((p)?"offsetTop":"offsetLeft");if(q){this.set(j,r);this._pageNodes=l;n.empty(true);for(var o=0;o<e;o++){n.append(this._pageNodes.item(r+o));}}},_getTargetOffset:function(n){var p=this.get(j),q=this.get(c),m=(p<q)?true:false,o=this._pageOffsets,l=this.optimizeDOM,r;if(l){if(m){if(n>1){r=o[2];}else{r=o[1];}}else{r=o[0];}}else{r=o[n];}return r;},_flickFrame:function(){var o=this._host,n=o._currentVelocity,p=n<0,l=this.get(c),m=this.get(d);if(n){if(p&&l<m-1){this.next();}else{if(!p&&l>0){this.prev();}}}return this._prevent;},_afterRender:function(m){var l=this._host;l.get("boundingBox").addClass(l.getClassName("paged"));},_scrollEnded:function(q){var p=this._host,l=this.get(c),n=this.get(d),o=k.SNAP_TO_CURRENT,m=this.optimizeDOM;if(q.onGestureMoveEnd&&!p._flicking){if(p._scrolledHalfway){if(p._scrolledForward&&l<n-1){this.next();}else{if(l>0){this.prev();}else{this.snapToCurrent(o.duration,o.easing);}}}else{this.snapToCurrent(o.duration,o.easing);}}if(!q.onGestureMoveEnd){if(m){this._manageDOM();}this.set(j,l);}},_manageDOM:function(){var s,r,q,u=this._host,n=u.get(i),o=this.get(c),l=this.get(j),t=(l<o)?true:false,m=n.get("children"),p=this._pageNodes;if(t){s=p.item(o+1);r=n.append;}else{s=p.item(o-1);r=n.prepend;}if(m.indexOf(s)===-1){r.call(n,s);}m=n.get("children");if(m.size()>3){q=(t)?n.one("li:first-of-type"):n.one("li:last-of-type");q.remove();u.set("scrollX",300);}},_afterIndexChange:function(l){if(l.src!==b){this._uiIndex(l.newVal);}},_uiIndex:function(l){this.scrollTo(l,350,"ease-out");},next:function(){var l=this.get(c);if(l<this.get(d)-1){this.set(c,l+1);}},prev:function(){var l=this.get(c);if(l>0){this.set(c,l-1);}},scrollTo:function(m,p,r){var o=this._host,l=o._scrollsVertical,n=(l)?f:g,q=this._getTargetOffset(m);o.set(n,q,{duration:p,easing:r});},snapToCurrent:function(n,o){var m=this._host,l=m._scrollsVertical;m._killTimer();m.set((l)?f:g,this._getTargetOffset(this.get(c)),{duration:n,easing:o});},_prevent:new a.Do.Prevent()});k.SNAP_TO_CURRENT={duration:300,easing:"ease-out"};a.namespace("Plugin").ScrollViewPaginator=k;},"@VERSION@",{requires:["plugin"]});