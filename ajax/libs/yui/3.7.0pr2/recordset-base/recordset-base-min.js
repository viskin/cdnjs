YUI.add("recordset-base",function(f,d){var a=f.Base.create("record",f.Base,[],{_setId:function(){return f.guid();},initializer:function(){},destructor:function(){},getValue:function(g){if(g===undefined){return this.get("data");}else{return this.get("data")[g];}return null;}},{ATTRS:{id:{valueFn:"_setId"},data:{value:null}}});f.Record=a;var b=f.ArrayList,c=f.Lang,e=f.Base.create("recordset",f.Base,[],{initializer:function(){if(!this._items){this._items=[];}this.publish({add:{defaultFn:this._defAddFn},remove:{defaultFn:this._defRemoveFn},empty:{defaultFn:this._defEmptyFn},update:{defaultFn:this._defUpdateFn}});this._buildHashTable(this.get("key"));this.after(["recordsChange","add","remove","update","empty"],this._updateHash);},getRecord:function(g){if(c.isString(g)){return this.get("table")[g];}else{if(c.isNumber(g)){return this._items[g];}}return null;},getRecordByIndex:function(g){return this._items[g];},getRecordsByIndex:function(j,h){var k=0,g=[];h=(c.isNumber(h)&&(h>0))?h:1;for(;k<h;k++){g.push(this._items[j+k]);}return g;},getLength:function(){return this.size();},getValuesByKey:function(j){var h=0,g=this._items.length,k=[];for(;h<g;h++){k.push(this._items[h].getValue(j));}return k;},add:function(l,h){var k=[],g,j=0;g=(c.isNumber(h)&&(h>-1))?h:this._items.length;if(c.isArray(l)){for(;j<l.length;j++){k[j]=this._changeToRecord(l[j]);}}else{if(c.isObject(l)){k[0]=this._changeToRecord(l);}}this.fire("add",{added:k,index:g});return this;},remove:function(h,g){var i=[];h=(h>-1)?h:(this._items.length-1);g=(g>0)?g:1;i=this._items.slice(h,(h+g));this.fire("remove",{removed:i,range:g,index:h});return this;},empty:function(){this.fire("empty",{});return this;},update:function(k,h){var l,g,j=0;g=(!(c.isArray(k)))?[k]:k;l=this._items.slice(h,h+g.length);for(;j<g.length;j++){g[j]=this._changeToRecord(g[j]);}this.fire("update",{updated:g,overwritten:l,index:h});return this;},_defAddFn:function(g){this._items.splice.apply(this._items,[g.index,0].concat(g.added));},_defRemoveFn:function(g){this._items.splice(g.index,g.range||1);},_defUpdateFn:function(h){for(var g=0;g<h.updated.length;g++){this._items[h.index+g]=this._changeToRecord(h.updated[g]);}},_defEmptyFn:function(g){this._items=[];},_updateHash:function(j){var h="_hash",g=j.type.replace(/.*:/,""),i;h+=g.charAt(0).toUpperCase()+g.slice(1);i=this[h]&&this[h](this.get("table"),this.get("key"),j);if(i){this.set("table",i);}},_hashRecordsChange:function(i,g,h){return this._buildHashTable(g);},_buildHashTable:function(g){return this._hashAdd({},g,{added:this._items});},_hashAdd:function(m,k,l){var h=l.added,j,g;for(j=0,g=l.added.length;j<g;++j){m[h[j].get(k)]=h[j];}return m;},_hashRemove:function(k,h,j){for(var g=j.removed.length-1;g>=0;--g){delete k[j.removed[g].get(h)];}return k;},_hashUpdate:function(i,g,h){if(h.overwritten&&h.overwritten.length){i=this._hashRemove(i,g,{removed:h.overwritten});}return this._hashAdd(i,g,{added:h.updated});},_hashEmpty:function(){return{};},_initHashTable:function(){return this._hashAdd({},this.get("key"),{added:this._items||[]});},_changeToRecord:function(g){return(g instanceof f.Record)?g:new f.Record({data:g});},_setRecords:function(j){if(!f.Lang.isArray(j)){return f.Attribute.INVALID_VALUE;}var h=[],k,g;for(k=0,g=j.length;k<g;++k){h[k]=this._changeToRecord(j[k]);}return(this._items=h);}},{ATTRS:{records:{lazyAdd:false,getter:function(){return f.Array(this._items);},setter:"_setRecords"},table:{valueFn:"_initHashTable"},key:{value:"id",readOnly:true}}});f.augment(e,b);f.Recordset=e;},"@VERSION@",{"requires":["base","arraylist"]});