YUI.add("node-scroll-info",function(b,k){var f="scroll",a="scrollDown",d="scrollLeft",c="scrollRight",e="scrollUp",h="scrollToBottom",g="scrollToLeft",j="scrollToRight",i="scrollToTop";b.Plugin.ScrollInfo=b.Base.create("scrollInfoPlugin",b.Plugin.Base,[],{initializer:function(l){this._host=l.host;this._hostIsBody=this._host.get("nodeName").toLowerCase()==="body";this._scrollDelay=this.get("scrollDelay");this._scrollMargin=this.get("scrollMargin");this._scrollNode=this._getScrollNode();this.refreshDimensions();this._lastScroll=this.getScrollInfo();this._bind();},destructor:function(){(new b.EventHandle(this._events)).detach();delete this._events;},getOffscreenNodes:function(q,r){if(typeof r==="undefined"){r=this._scrollMargin;}var s=this._lastScroll,l=this._host.all(q||"*"),m=s.scrollBottom+r,p=s.scrollLeft-r,o=s.scrollRight+r,n=s.scrollTop-r,t=this;return l.filter(function(y){var z=b.DOM.getXY(y),x=z[0]-t._left,u=z[1]-t._top,w,v;if(x>=p&&x<o&&u>=n&&u<m){return false;}w=u+y.offsetHeight;v=x+y.offsetWidth;if(v<o&&v>=p&&w<m&&w>=n){return false;}return true;});},getOnscreenNodes:function(q,r){if(typeof r==="undefined"){r=this._scrollMargin;}var s=this._lastScroll,l=this._host.all(q||"*"),m=s.scrollBottom+r,p=s.scrollLeft-r,o=s.scrollRight+r,n=s.scrollTop-r,t=this;return l.filter(function(y){var z=b.DOM.getXY(y),x=z[0]-t._left,u=z[1]-t._top,w,v;if(x>=p&&x<o&&u>=n&&u<m){return true;}w=u+y.offsetHeight;v=x+y.offsetWidth;if(v<o&&v>=p&&w<m&&w>=n){return true;}return false;});},getScrollInfo:function(){var q=this._scrollNode,r=this._lastScroll,p=this._scrollMargin,o=q.scrollLeft,t=q.scrollHeight,m=q.scrollTop,s=q.scrollWidth,l=m+this._height,n=o+this._width;return{atBottom:l>(t-p),atLeft:o<p,atRight:n>(s-p),atTop:m<p,isScrollDown:r&&m>r.scrollTop,isScrollLeft:r&&o<r.scrollLeft,isScrollRight:r&&o>r.scrollLeft,isScrollUp:r&&m<r.scrollTop,scrollBottom:l,scrollHeight:t,scrollLeft:o,scrollRight:n,scrollTop:m,scrollWidth:s};},refreshDimensions:function(){var n=this._hostIsBody,l=n&&b.UA.ios,o=b.config.win,m;if(n&&b.UA.webkit){m=b.config.doc.documentElement;}else{m=this._scrollNode;}this._height=l?o.innerHeight:m.clientHeight;this._left=m.offsetLeft;this._top=m.offsetTop;this._width=l?o.innerWidth:m.clientWidth;},_bind:function(){var l=b.one("win");this._events=[this.after({scrollDelayChange:this._afterScrollDelayChange,scrollMarginChange:this._afterScrollMarginChange}),l.on("windowresize",this._afterResize,this),(this._hostIsBody?l:this._host).after("scroll",this._afterScroll,this)];},_getScrollNode:function(){return this._hostIsBody&&!b.UA.webkit?b.config.doc.documentElement:b.Node.getDOMNode(this._host);},_triggerScroll:function(o){var n=this.getScrollInfo(),l=b.merge(o,n),m=this._lastScroll;this._lastScroll=n;this.fire(f,l);if(n.isScrollLeft){this.fire(d,l);}else{if(n.isScrollRight){this.fire(c,l);}}if(n.isScrollUp){this.fire(e,l);}else{if(n.isScrollDown){this.fire(a,l);}}if(n.atBottom&&(!m.atBottom||n.scrollHeight>m.scrollHeight)){this.fire(h,l);}if(n.atLeft&&!m.atLeft){this.fire(g,l);}if(n.atRight&&(!m.atRight||n.scrollWidth>m.scrollWidth)){this.fire(j,l);}if(n.atTop&&!m.atTop){this.fire(i,l);}},_afterResize:function(l){this.refreshDimensions();},_afterScroll:function(m){var l=this;clearTimeout(this._scrollTimeout);this._scrollTimeout=setTimeout(function(){l._triggerScroll(m);},this._scrollDelay);},_afterScrollDelayChange:function(l){this._scrollDelay=l.newVal;},_afterScrollMarginChange:function(l){this._scrollMargin=l.newVal;}},{NS:"scrollInfo",ATTRS:{scrollDelay:{value:50},scrollMargin:{value:50}}});},"@VERSION@",{"requires":["base-build","dom-screen","event-resize","node-pluginhost","plugin"]});