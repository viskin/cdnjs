YUI.add("io-xdr",function(b){var l=b.publish("io:xdrReady",{fireOnce:true}),f={},h={},k=b.config.doc,m=b.config.win,g=m&&m.XDomainRequest;function i(d,q){var n='<object id="io_swf" type="application/x-shockwave-flash" data="'+d+'" width="0" height="0">'+'<param name="movie" value="'+d+'">'+'<param name="FlashVars" value="yid='+q+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",p=k.createElement("div");k.body.appendChild(p);p.innerHTML=n;}function a(r,u){var s=this,n=r.id,q="xdrResponse",d="timeout";r.c.onprogress=function(){h[n]=3;};r.c.onload=function(){h[n]=4;s[q](r,u,"success");};r.c.onerror=function(){h[n]=4;s[q](r,u,"failure");};if(u.timeout){r.c.ontimeout=function(){h[n]=4;s[q](r,u,d);};r.c[d]=u[d];}}function c(q,n,p){if(n==="flash"){q.c.responseText=decodeURI(q.c.responseText);}if(p==="xml"){q.c.responseXML=b.DataType.XML.parse(q.c.responseXML);}return q;}function j(d,n){return d.c.abort(d.id,n);}function e(d){return g?h[d.id]!==4:d.c.isInProgress(d.id);}b.mix(b.IO.prototype,{_transport:{},xdr:function(d,n,q){var p=this;if(q.xdr.use==="flash"){f[n.id]=q;m.setTimeout(function(){if(n.c.send){n.c.send(d,{id:n.id,uid:n.uid,method:q.method,data:q.data,headers:q.headers});}else{p.xdrResponse(n,q,"transport error");delete f[n.id];}},b.io.xdr.delay);}else{if(g){a(n,q);n.c.open(q.method||"GET",d);n.c.send(q.data);}else{n.c.send(d,n,q);}}return{id:n.id,abort:function(){return n.c?j(n,q):false;},isInProgress:function(){return n.c?e(n.id):false;},conn:p};},xdrResponse:function(q,s,v){v=f[s.id]?f[s.id]:v;var t=this,n=g?h:f,p=v.xdr.use,r=v.xdr.dataType;switch(q){case"start":t.start(s,v);break;case"success":t.success(c(s,p,r),v);delete n[s.id];break;case"timeout":case"abort":case"transport error":s.e=q;case"failure":t.failure(c(s,p,r),v);delete n[s.id];break;}},xdrReady:function(n,d){b.io.xdr.delay=0;b.fire(l,n);},transport:function(d){if(d.id==="flash"){i(b.UA.ie?d.src+"?d="+new Date().valueOf().toString():d.src,b.id);}this._transport[d.id]=(d.id==="flash")?k.getElementById("io_swf"):d.src;}});b.io.xdrResponse=function(d,n,q){var p=b.io._map[n.uid];p.xdrResponse.apply(p,[d,n,q]);};b.io.transport=function(n){var d=b.io._map["io:0"]||new b.IO();d.transport.apply(d,[n]);};b.io.xdr={delay:100};},"@VERSION@",{requires:["io-base","datatype-xml"]});