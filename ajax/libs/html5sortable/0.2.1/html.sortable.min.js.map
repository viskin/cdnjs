{"version":3,"sources":["html.sortable.js"],"names":["root","factory","define","amd","exports","module","require","sortable","$","this","jquery","dragging","draggingHeight","placeholders","options","method","String","extend","connectWith","placeholder","dragImage","placeholderClass","draggingClass","each","index","items","children","handles","handle","find","off","test","citems","data","attr","removeData","add","soptions","startParent","newParent","tagName","addClass","not","on","dragDrop","end","e","stopImmediatePropagation","dt","originalEvent","dataTransfer","effectAllowed","setData","setDragImage","height","parent","triggerHandler","item","startparent","removeClass","show","detach","get","oldindex","endparent","is","type","stopPropagation","filter","after","trigger","preventDefault","dropEffect","thisHeight","forcePlaceholderSize","deadZone","offsetTop","offset","top","pageY","hide","length","append","fn"],"mappings":"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","file":"html.sortable.min.js","sourcesContent":["(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.sortable = factory(root.$);\n  }\n}(this, function(jquery) {\n/*\n * HTML5 Sortable jQuery Plugin\n * https://github.com/voidberg/html5sortable\n *\n * Original code copyright 2012 Ali Farhadi.\n * This version is mantained by Alexandru Badiu <andu@ctrlz.ro>\n *\n * Thanks to the following contributors: andyburke, bistoco, daemianmack, drskullster, flying-sheep, OscarGodson, Parikshit N. Samant, rodolfospalenza, ssafejava\n *\n * Released under the MIT license.\n */\n  var dragging;\n  var draggingHeight;\n  var placeholders = $();\n  var sortable = function(options) {\n    'use strict';\n    var method = String(options);\n\n    options = $.extend({\n      connectWith: false,\n      placeholder: null,\n      dragImage: null,\n      placeholderClass: 'sortable-placeholder',\n      draggingClass: 'sortable-dragging'\n    }, options);\n\n    return this.each(function() {\n\n      var index;\n      var items = $(this).children(options.items);\n      var handles = options.handle ? items.find(options.handle) : items;\n\n      if (method === 'reload') {\n        $(this).children(options.items).off('dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s');\n        $(this).off('dragover.h5s dragenter.h5s drop.h5s');\n      }\n      if (/^enable|disable|destroy$/.test(method)) {\n        var citems = $(this).children($(this).data('items'));\n        citems.attr('draggable', method === 'enable');\n\n        $(this).attr('aria-dropeffect', (/^disable|destroy$/.test(method) ? 'none' : 'move'));\n\n        if (method === 'destroy') {\n          $(this).off('sortstart sortupdate');\n          $(this).removeData('opts');\n          citems.add(this).removeData('connectWith items')\n            .off('dragstart.h5s dragend.h5s dragover.h5s dragenter.h5s drop.h5s sortupdate');\n          handles.off('selectstart.h5s');\n        }\n        return;\n      }\n\n      var soptions = $(this).data('opts');\n\n      if (typeof soptions === 'undefined') {\n        $(this).data('opts', options);\n      } else {\n        options = soptions;\n      }\n\n      var startParent;\n      var newParent;\n      var placeholder = (options.placeholder === null) ? $('<' + (/^ul|ol$/i.test(this.tagName) ? 'li' : 'div') + ' class=\"'+options.placeholderClass+'\"/>') : $(options.placeholder).addClass(options.placeholderClass);\n\n      $(this).data('items', options.items);\n      placeholders = placeholders.add(placeholder);\n      if (options.connectWith) {\n        $(options.connectWith).add(this).data('connectWith', options.connectWith);\n      }\n\n      items.attr('role', 'option');\n      items.attr('aria-grabbed', 'false');\n\n      // Setup drag handles\n      handles.attr('draggable', 'true');\n      handles.not('a[href], img').on('selectstart.h5s', function() {\n        if (this.dragDrop) {\n          this.dragDrop();\n        }\n      }).end();\n\n      // Handle drag events on draggable items\n      items.on('dragstart.h5s', function(e) {\n        e.stopImmediatePropagation();\n        var dt = e.originalEvent.dataTransfer;\n        dt.effectAllowed = 'move';\n        dt.setData('text', '');\n\n        if (options.dragImage && dt.setDragImage) {\n          dt.setDragImage(options.dragImage, 0, 0);\n        }\n\n        index = (dragging = $(this)).addClass(options.draggingClass).attr('aria-grabbed', 'true').index();\n        draggingHeight = dragging.height();\n        startParent = $(this).parent();\n        dragging.parent().triggerHandler('sortstart', {\n          item: dragging,\n          startparent: startParent\n        });\n      }).on('dragend.h5s', function() {\n          if (!dragging) {\n            return;\n          }\n          dragging.removeClass(options.draggingClass).attr('aria-grabbed', 'false').show();\n          placeholders.detach();\n          newParent = $(this).parent();\n          if (index !== dragging.index() || startParent.get(0) !== newParent.get(0)) {\n            dragging.parent().triggerHandler('sortupdate', {\n              item: dragging,\n              oldindex: index,\n              startparent: startParent,\n              endparent: newParent\n            });\n          }\n          dragging = null;\n          draggingHeight = null;\n        }).add([this, placeholder]).on('dragover.h5s dragenter.h5s drop.h5s', function(e) {\n          if (!items.is(dragging) && options.connectWith !== $(dragging).parent().data('connectWith')) {\n            return true;\n          }\n          if (e.type === 'drop') {\n            e.stopPropagation();\n            placeholders.filter(':visible').after(dragging);\n            dragging.trigger('dragend.h5s');\n            return false;\n          }\n          e.preventDefault();\n          e.originalEvent.dataTransfer.dropEffect = 'move';\n          if (items.is(this)) {\n            var thisHeight = $(this).height();\n            if (options.forcePlaceholderSize) {\n              placeholder.height(draggingHeight);\n            }\n\n            // Check if $(this) is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n            if (thisHeight > draggingHeight) {\n              // Dead zone?\n              var deadZone = thisHeight - draggingHeight;\n              var offsetTop = $(this).offset().top;\n              if (placeholder.index() < $(this).index() && e.originalEvent.pageY < offsetTop + deadZone) {\n                return false;\n              }\n              if (placeholder.index() > $(this).index() && e.originalEvent.pageY > offsetTop + thisHeight - deadZone) {\n                return false;\n              }\n            }\n\n            dragging.hide();\n            $(this)[placeholder.index() < $(this).index() ? 'after' : 'before'](placeholder);\n            placeholders.not(placeholder).detach();\n          } else if (!placeholders.is(this) && !$(this).children(options.items).length) {\n            placeholders.detach();\n            $(this).append(placeholder);\n          }\n          return false;\n        });\n    });\n  };\n\n$.fn.sortable = sortable;\n\nreturn sortable;\n}));\n"],"sourceRoot":"/source/"}