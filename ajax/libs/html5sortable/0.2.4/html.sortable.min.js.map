{"version":3,"sources":["html.sortable.js"],"names":["root","factory","define","amd","exports","module","require","sortable","jQuery","this","$","dragging","draggingHeight","placeholders","options","method","String","extend","connectWith","placeholder","dragImage","placeholderClass","draggingClass","each","index","$sortable","items","children","handles","handle","find","off","test","citems","data","attr","removeData","add","soptions","startParent","newParent","tagName","addClass","not","on","dragDrop","end","e","stopImmediatePropagation","dt","originalEvent","dataTransfer","effectAllowed","setData","setDragImage","height","parent","triggerHandler","item","startparent","removeClass","show","detach","get","oldindex","endparent","is","type","stopPropagation","filter","after","trigger","preventDefault","dropEffect","thisHeight","forcePlaceholderSize","deadZone","offsetTop","offset","top","pageY","hide","before","length","append","fn"],"mappings":"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","file":"html.sortable.min.js","sourcesContent":["(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.sortable = factory(root.jQuery);\n  }\n}(this, function($) {\n/*\n * HTML5 Sortable jQuery Plugin\n * https://github.com/voidberg/html5sortable\n *\n * Original code copyright 2012 Ali Farhadi.\n * This version is mantained by Alexandru Badiu <andu@ctrlz.ro> & Lukas Oppermann <lukas@vea.re>\n *\n *\n * Released under the MIT license.\n */\nvar dragging;\nvar draggingHeight;\nvar placeholders = $();\nvar sortable = function(options) {\n  'use strict';\n  var method = String(options);\n\n  options = $.extend({\n    connectWith: false,\n    placeholder: null,\n    dragImage: null,\n    placeholderClass: 'sortable-placeholder',\n    draggingClass: 'sortable-dragging'\n  }, options);\n  /* TODO: maxstatements should be 25, fix and remove line below */\n  /*jshint maxstatements:false */\n  return this.each(function() {\n\n    var index;\n    var $sortable = $(this);\n    var items = $sortable.children(options.items);\n    var handles = options.handle ? items.find(options.handle) : items;\n\n    if (method === 'reload') {\n      // remove event handlers from items\n      items.off('dragstart.h5s');\n      items.off('dragend.h5s');\n      items.off('selectstart.h5s');\n      items.off('dragover.h5s');\n      items.off('dragenter.h5s');\n      items.off('drop.h5s');\n      // remove event handlers from sortable\n      $sortable.off('dragover.h5s');\n      $sortable.off('dragenter.h5s');\n      $sortable.off('drop.h5s');\n    }\n\n    if (/^enable|disable|destroy$/.test(method)) {\n      var citems = $(this).children($(this).data('items'));\n      citems.attr('draggable', method === 'enable');\n\n      $(this).attr('aria-dropeffect', (/^disable|destroy$/.test(method) ? 'none' : 'move'));\n\n      if (method === 'destroy') {\n        $(this).off('sortstart sortupdate');\n        $(this).removeData('opts');\n        citems.add(this).removeData('connectWith items')\n          .off('dragstart.h5s dragend.h5s dragover.h5s dragenter.h5s drop.h5s sortupdate');\n        handles.off('selectstart.h5s');\n      }\n      return;\n    }\n\n    var soptions = $(this).data('opts');\n\n    if (typeof soptions === 'undefined') {\n      $(this).data('opts', options);\n    } else {\n      options = soptions;\n    }\n\n    var startParent;\n    var newParent;\n    var placeholder = (options.placeholder === null) ? $('<' + (/^ul|ol$/i.test(this.tagName) ? 'li' : 'div') + ' class=\"' + options.placeholderClass + '\"/>') : $(options.placeholder).addClass(options.placeholderClass);\n\n    $(this).data('items', options.items);\n    placeholders = placeholders.add(placeholder);\n    if (options.connectWith) {\n      $(options.connectWith).add(this).data('connectWith', options.connectWith);\n    }\n\n    items.attr('role', 'option');\n    items.attr('aria-grabbed', 'false');\n\n    // Setup drag handles\n    handles.attr('draggable', 'true');\n    handles.not('a[href], img').on('selectstart.h5s', function() {\n      if (this.dragDrop) {\n        this.dragDrop();\n      }\n    }).end();\n\n    // Handle drag events on draggable items\n    items.on('dragstart.h5s', function(e) {\n      e.stopImmediatePropagation();\n      var dt = e.originalEvent.dataTransfer;\n      dt.effectAllowed = 'move';\n      dt.setData('text', '');\n\n      if (options.dragImage && dt.setDragImage) {\n        dt.setDragImage(options.dragImage, 0, 0);\n      }\n\n      // cache selsection & add attr for dragging\n      dragging = $(this);\n      dragging.addClass(options.draggingClass);\n      dragging.attr('aria-grabbed', 'true');\n      // grab values\n      index = dragging.index();\n      draggingHeight = dragging.height();\n      startParent = $(this).parent();\n      // trigger sortstar update\n      dragging.parent().triggerHandler('sortstart', {\n        item: dragging,\n        startparent: startParent\n      });\n    });\n    // Handle drag events on draggable items\n    items.on('dragend.h5s', function() {\n      if (!dragging) {\n        return;\n      }\n      // remove dragging attributes and show item\n      dragging.removeClass(options.draggingClass);\n      dragging.attr('aria-grabbed', 'false');\n      dragging.show();\n\n      placeholders.detach();\n      newParent = $(this).parent();\n      if (index !== dragging.index() ||\n          startParent.get(0) !== newParent.get(0)) {\n        dragging.parent().triggerHandler('sortupdate', {\n          item: dragging,\n          oldindex: index,\n          startparent: startParent,\n          endparent: newParent\n        });\n      }\n      dragging = null;\n      draggingHeight = null;\n    });\n    // Handle dragover, dragenter and drop events on draggable items\n    items.add([this, placeholder]).on('dragover.h5s dragenter.h5s drop.h5s', function(e) {\n      if (!items.is(dragging) &&\n          options.connectWith !== $(dragging).parent().data('connectWith')) {\n        return true;\n      }\n      if (e.type === 'drop') {\n        e.stopPropagation();\n        placeholders.filter(':visible').after(dragging);\n        dragging.trigger('dragend.h5s');\n        return false;\n      }\n      e.preventDefault();\n      e.originalEvent.dataTransfer.dropEffect = 'move';\n      if (items.is(this)) {\n        var thisHeight = $(this).height();\n        if (options.forcePlaceholderSize) {\n          placeholder.height(draggingHeight);\n        }\n\n        // Check if $(this) is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n        if (thisHeight > draggingHeight) {\n          // Dead zone?\n          var deadZone = thisHeight - draggingHeight;\n          var offsetTop = $(this).offset().top;\n          if (placeholder.index() < $(this).index() &&\n              e.originalEvent.pageY < offsetTop + deadZone) {\n            return false;\n          }\n          if (placeholder.index() > $(this).index() &&\n              e.originalEvent.pageY > offsetTop + thisHeight - deadZone) {\n            return false;\n          }\n        }\n\n        dragging.hide();\n        if (placeholder.index() < $(this).index()) {\n          $(this).after(placeholder);\n        } else {\n          $(this).before(placeholder);\n        }\n        placeholders.not(placeholder).detach();\n      } else {\n        if (!placeholders.is(this) && !$(this).children(options.items).length) {\n          placeholders.detach();\n          $(this).append(placeholder);\n        }\n      }\n      return false;\n    });\n  });\n};\n\n$.fn.sortable = sortable;\n\nreturn sortable;\n}));\n"],"sourceRoot":"/source/"}