{"version":3,"sources":["html.sortable.js"],"names":["root","factory","define","amd","exports","module","require","sortable","jQuery","this","$","dragging","draggingHeight","placeholders","_removeItemEvents","items","off","_removeSortableEvents","_attachGhost","event","ghost","dataTransfer","effectAllowed","setData","setDragImage","item","x","y","_addGhostPos","e","parseInt","pageX","draggedItem","offset","left","pageY","top","_makeGhost","$draggedItem","_getGhost","_getOptions","soptions","options","method","String","extend","connectWith","placeholder","dragImage","placeholderClass","draggingClass","each","$sortable","data","index","children","handles","handle","find","attr","test","citems","removeData","removeAttr","startParent","newParent","tagName","addClass","add","document","createElement","dragDrop","on","parents","stopImmediatePropagation","originalEvent","console","log","height","parent","triggerHandler","startparent","removeClass","show","detach","get","oldindex","endparent","is","type","stopPropagation","filter","after","trigger","preventDefault","dropEffect","thisHeight","forcePlaceholderSize","deadZone","offsetTop","hide","before","not","length","append","fn"],"mappings":"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","file":"html.sortable.min.js","sourcesContent":["(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.sortable = factory(root.jQuery);\n  }\n}(this, function($) {\n/*\n * HTML5 Sortable jQuery Plugin\n * https://github.com/voidberg/html5sortable\n *\n * Original code copyright 2012 Ali Farhadi.\n * This version is mantained by Alexandru Badiu <andu@ctrlz.ro> & Lukas Oppermann <lukas@vea.re>\n *\n *\n * Released under the MIT license.\n */\n'use strict';\n/*\n * variables global to the plugin\n */\nvar dragging;\nvar draggingHeight;\nvar placeholders = $();\n/*\n * remove event handlers from items\n * @param: {jQuery collection} items\n */\nvar _removeItemEvents = function(items) {\n  items.off('dragstart.h5s');\n  items.off('dragend.h5s');\n  items.off('selectstart.h5s');\n  items.off('dragover.h5s');\n  items.off('dragenter.h5s');\n  items.off('drop.h5s');\n};\n/*\n * remove event handlers from sortable\n * @param: {jQuery collection} sortable\n */\nvar _removeSortableEvents = function(sortable) {\n  sortable.off('dragover.h5s');\n  sortable.off('dragenter.h5s');\n  sortable.off('drop.h5s');\n};\n/*\n * attache ghost to dataTransfer object\n * @param: original event\n * @param: object with ghost item, x and y coordinates\n */\nvar _attachGhost = function(event, ghost) {\n  // this needs to be set for HTML5 drag & drop to work\n  event.dataTransfer.effectAllowed = 'move';\n  event.dataTransfer.setData('text', '');\n\n  // check if setDragImage method is available\n  if (event.dataTransfer.setDragImage) {\n    event.dataTransfer.setDragImage(ghost.item, ghost.x, ghost.y);\n  }\n};\n/**\n * _addGhostPos clones the dragged item and adds it as a Ghost item\n * @param [object] event - the event fired when dragstart is triggered\n * @param [object] ghost - .item = node, draggedItem = jQuery collection\n */\nvar _addGhostPos = function(e, ghost) {\n  if (!ghost.x) {\n    ghost.x = parseInt(e.pageX - ghost.draggedItem.offset().left);\n  }\n  if (!ghost.y) {\n    ghost.y = parseInt(e.pageY - ghost.draggedItem.offset().top);\n  }\n  return ghost;\n};\n/**\n * _makeGhost decides which way to make a ghost and passes it to attachGhost\n * @param [jQuery selection] $draggedItem - the item that the user drags\n */\nvar _makeGhost = function($draggedItem) {\n  return {\n    item: $draggedItem[0],\n    draggedItem: $draggedItem\n  };\n};\n/**\n * _getGhost constructs ghost and attaches it to dataTransfer\n * @param [event] event - the original drag event object\n * @param [jQuery selection] $draggedItem - the item that the user drags\n * @param [object] ghostOpt - the ghost options\n */\n// TODO: could $draggedItem be replaced by event.target in all instances\nvar _getGhost = function(event, $draggedItem) {\n  // add ghost item & draggedItem to ghost object\n  var ghost = _makeGhost($draggedItem);\n  // attach ghost position\n  ghost = _addGhostPos(event, ghost);\n  // attach ghost to dataTransfer\n  _attachGhost(event, ghost);\n};\n/*\n * return options if not set on sortable already\n * @param: {obj} soptions\n * @param: {obj} options\n */\nvar _getOptions = function(soptions, options) {\n  if (typeof soptions === 'undefined') {\n    return options;\n  }\n  return soptions;\n};\n\nvar sortable = function(options) {\n\n  var method = String(options);\n\n  options = $.extend({\n    connectWith: false,\n    placeholder: null,\n    // dragImage can be null or a jQuery element\n    dragImage: null,\n    placeholderClass: 'sortable-placeholder',\n    draggingClass: 'sortable-dragging'\n  }, options);\n\n  /* TODO: maxstatements should be 25, fix and remove line below */\n  /*jshint maxstatements:false */\n  return this.each(function() {\n\n    var $sortable = $(this);\n\n    // get options & set options on sortable\n    options = _getOptions($sortable.data('opts'), options);\n    $sortable.data('opts', options);\n\n    var index;\n    var items = $sortable.children(options.items);\n    var handles = options.handle ? items.find(options.handle) : items;\n\n    if (method === 'reload') {\n      // remove event handlers from items\n      _removeItemEvents(items);\n      // remove event handlers from sortable\n      _removeSortableEvents($sortable);\n    }\n\n    $sortable.attr('aria-dropeffect', (/^disable|destroy$/.test(method) ? 'none' : 'move'));\n\n    if (/^enable|disable|destroy$/.test(method)) {\n      var citems = $sortable.children($(this).data('items'));\n      citems.attr('draggable', method === 'enable');\n\n      if (method === 'destroy') {\n        // remove event handlers & data from sortable\n        _removeSortableEvents($sortable);\n        $sortable.removeData('opts');\n        $sortable.removeData('connectWith');\n        $sortable.removeData('items');\n        $sortable.removeAttr('aria-dropeffect');\n        // remove event handlers & data from items\n        _removeItemEvents(citems);\n        citems.removeAttr('aria-grabbed');\n        citems.removeAttr('draggable');\n        citems.removeAttr('role', 'option');\n        handles.off('selectstart.h5s');\n      }\n      return;\n    }\n\n    var startParent;\n    var newParent;\n    var placeholder = (options.placeholder === null) ? $('<' + (/^ul|ol$/i.test(this.tagName) ? 'li' : 'div') + ' class=\"' + options.placeholderClass + '\"/>') : $(options.placeholder).addClass(options.placeholderClass);\n\n    $sortable.data('items', options.items);\n    placeholders = placeholders.add(placeholder);\n    if (options.connectWith) {\n      $(options.connectWith).add(this).data('connectWith', options.connectWith);\n    }\n\n    items.attr('role', 'option');\n    items.attr('aria-grabbed', 'false');\n\n    // Setup drag handles\n    handles.attr('draggable', 'true');\n    // IE FIX for ghost\n    if (typeof document.createElement('span').dragDrop === 'function') {\n      handles.on('mousedown', function() {\n        if (items.index(this) !== -1) {\n          this.dragDrop();\n        } else {\n          $(this).parents(options.items)[0].dragDrop();\n        }\n      });\n    }\n    // Handle drag events on draggable items\n    items.on('dragstart.h5s', function(e) {\n      e.stopImmediatePropagation();\n\n      if (options.dragImage) {\n        _attachGhost(e.originalEvent, {\n          item: options.dragImage,\n          x: 0,\n          y: 0\n        });\n        console.log('WARNING: dragImage option is deprecated' +\n        ' and will be removed in the future!');\n      } else {\n        // add transparent clone or other ghost to cursor\n        _getGhost(e.originalEvent, $(this), options.dragImage);\n      }\n      // cache selsection & add attr for dragging\n      dragging = $(this);\n      dragging.addClass(options.draggingClass);\n      dragging.attr('aria-grabbed', 'true');\n      // grab values\n      index = dragging.index();\n      draggingHeight = dragging.height();\n      startParent = $(this).parent();\n      // trigger sortstar update\n      dragging.parent().triggerHandler('sortstart', {\n        item: dragging,\n        startparent: startParent\n      });\n    });\n    // Handle drag events on draggable items\n    items.on('dragend.h5s', function() {\n      if (!dragging) {\n        return;\n      }\n      // remove dragging attributes and show item\n      dragging.removeClass(options.draggingClass);\n      dragging.attr('aria-grabbed', 'false');\n      dragging.show();\n\n      placeholders.detach();\n      newParent = $(this).parent();\n      if (index !== dragging.index() ||\n          startParent.get(0) !== newParent.get(0)) {\n        dragging.parent().triggerHandler('sortupdate', {\n          item: dragging,\n          oldindex: index,\n          startparent: startParent,\n          endparent: newParent\n        });\n      }\n      dragging = null;\n      draggingHeight = null;\n    });\n    // Handle dragover, dragenter and drop events on draggable items\n    // TODO: REMOVE placeholder?????\n    items.add([this, placeholder]).on('dragover.h5s dragenter.h5s drop.h5s', function(e) {\n      if (!items.is(dragging) &&\n          options.connectWith !== $(dragging).parent().data('connectWith')) {\n        return true;\n      }\n      if (e.type === 'drop') {\n        e.stopPropagation();\n        placeholders.filter(':visible').after(dragging);\n        dragging.trigger('dragend.h5s');\n        return false;\n      }\n      e.preventDefault();\n      e.originalEvent.dataTransfer.dropEffect = 'move';\n      if (items.is(this)) {\n        var thisHeight = $(this).height();\n        if (options.forcePlaceholderSize) {\n          placeholder.height(draggingHeight);\n        }\n\n        // Check if $(this) is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n        if (thisHeight > draggingHeight) {\n          // Dead zone?\n          var deadZone = thisHeight - draggingHeight;\n          var offsetTop = $(this).offset().top;\n          if (placeholder.index() < $(this).index() &&\n              e.originalEvent.pageY < offsetTop + deadZone) {\n            return false;\n          }\n          if (placeholder.index() > $(this).index() &&\n              e.originalEvent.pageY > offsetTop + thisHeight - deadZone) {\n            return false;\n          }\n        }\n\n        dragging.hide();\n        if (placeholder.index() < $(this).index()) {\n          $(this).after(placeholder);\n        } else {\n          $(this).before(placeholder);\n        }\n        placeholders.not(placeholder).detach();\n      } else {\n        if (!placeholders.is(this) && !$(this).children(options.items).length) {\n          placeholders.detach();\n          $(this).append(placeholder);\n        }\n      }\n      return false;\n    });\n  });\n};\n\n$.fn.sortable = sortable;\n\nreturn sortable;\n}));\n"],"sourceRoot":"/source/"}