/*
Kule urBrowser
Version: 3.160209

License: MIT License

Author: Kei Cheng
Github: https://github.com/keicheng/urbrowser
Website: http://urbrowser.kule.tw
Facebook: https://www.facebook.com/kule.tw
*/

!function(){"use strict";var a=function(){};a.prototype={root:document.documentElement,agent:navigator.userAgent.toLowerCase(),platform:navigator.platform.toLowerCase(),docSize:{width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},screenSize:{width:function(){return screen.width},height:function(){return screen.height}},breakpointsInfo:{xs:480,sm:768,md:992,lg:1200},getName:function(){var a=this,b=a.agent;return-1!=b.indexOf("iemobile")?"iemobile":-1!=b.indexOf("cordova")?"cordova":-1!=b.indexOf("opr")||-1!=b.indexOf("opera")||-1!=b.indexOf("opios")?-1!=b.indexOf("version")?"version":-1!=b.indexOf("opios")?"opios":"opr":-1!=b.indexOf("firefox")?"firefox":-1!=b.indexOf("fxios")?"fxios":-1!=b.indexOf("msie")?"msie":-1!=b.indexOf("rv:")?"rv":-1!=b.indexOf("applewebkit")?-1!=b.indexOf("edge")?"edge":-1!=b.indexOf("chrome")?"chrome":-1!=b.indexOf("version")?"version":-1!=b.indexOf("crios")?"crios":"safari":null},getVersion:function(a){var b=this,c=b.agent;if(a){var d=a,e=d.length,f=c.indexOf(d)+e+1,g=5,h=c.substr(f,g);return parseInt(h.split(".")[0],10)}return null},OSName:function(a){var b=this,c=b.root,d=b.agent,e=b.platforms("get"),f=e;return"windows"==e?f=-1!=d.indexOf("windows nt")?"windows nt":"windows":"iphone"==e||"ipad"==e||"ipod"==e?f="ios":"android"==e&&(f="android"),"get"===a?f:void("set"===a&&c.setAttribute("data-os-name",f))},windowsVersion:function(a){var h,i,b=this,c=b.root,d=b.agent,e=b.OSName("get"),f=e.length,g=d.indexOf(e)+f+1;return-1!=d.indexOf("win")&&(e.match("windows nt")?(h=3,i=parseFloat(d.substr(g,h))):(h=2,i=parseFloat(d.substr(g,h)))),"get"===a?i:void("set"===a&&"desktop"===b.device("type","get")&&-1!=d.indexOf("win")&&c.setAttribute("data-os-version",i))},getBrowserNameAndCore:function(){var e,f,g,a=this,b=a.agent,c=a.getName(),d=a.getVersion(c);if(null===c?g=null:"fxios"==c?(e=" firefox",f="fxios",g=f+e):"opr"==c||"opera"==c||"opios"==c?(f="opera",e=-1!=b.indexOf("applewebkit")?" webkit":" presto",g=f+e):"version"==c||"chrome"==c||"crios"==c||"safari"==c?(e=" webkit","edge"==c?f="edge":"chrome"==c||"crios"==c?f="chrome":"version"==c?-1!=b.indexOf("opr")||-1!=b.indexOf("opera")||-1!=b.indexOf("opios")?(f="opera",e=-1!=b.indexOf("applewebkit")?"webkit":"presto",g=f+e):f=-1!=b.indexOf("android")?"adrBuiltin":"safari":f="safari",g=f+e):"msie"==c||"rv"==c||"iemobile"==c?(e="ie",f="ie",g=e):("cordova"===c?(e=" webkit inapp",-1!=b.indexOf("cordova-android")?f="cordova-adr cordova":-1!=b.indexOf("cordova-ios")&&(f="cordova-ios cordova"),g=f+e,d=null):-1!=b.indexOf("iemobile")||-1!=b.indexOf("msie")?g=c+" ie":-1!=b.indexOf("applewebkit")?(e=" webkit",e=-1!=b.indexOf("edge")?" webkit":-1!=b.indexOf("chrome")||-1!=b.indexOf("crios")?" chrome webkit":-1!=b.indexOf("version")&&-1!=b.indexOf("android")?" adrBuiltin webkit":" safari webkit",g=c+e):g=c,f=c),null!==d){var h=f+d,i=g.split(" "),j=i[0]+" "+h;if(i.length>1)for(var k=1;k<i.length;k++)j+=" "+i[k];if("ie"===f)for(var l=11,m=Number(d),n=m;l>n;n++)j+=" "+f+(n+1)+"lt";return j}return g},platforms:function(a){var f,b=this,c=b.root,d=b.agent,e=b.platform;return e.match("win32")||e.match("win64")||e.match("windows")?-1!=d.indexOf("windows phone")||-1!=d.indexOf("iemobile")?f="wp":-1!=d.indexOf("windows")&&(f="windows"):e.match("arm")?-1!=d.indexOf("windows phone")||-1!=d.indexOf("iemobile")?f="wp":-1!=d.indexOf("android")&&(f="android"):f=-1!=e.indexOf("linux")?-1!=d.indexOf("cros")?"chromeos":-1!=d.indexOf("android")?"android":"linux":-1!=e.indexOf("iphone")?"iphone":-1!=e.indexOf("ipad")?"ipad":-1!=e.indexOf("ipod")?"ipod":-1!=e.indexOf("android")?"android":-1!=e.indexOf("mac")?"mac":-1!=e.indexOf("x11")?"unix":-1!=e.indexOf("sunos")?"solaris":"unknown","get"===a?f:void("set"===a&&c.setAttribute("id",f))},browserVersion:function(a){var g,b=this,c=b.root,d=b.agent,e=b.getName(),f=b.getVersion(e);return g=-1!=d.indexOf(e)?f:"unknown","get"===a?g:void("set"===a&&c.setAttribute("data-browser-version",g))},device:function(a,b){var i,j,k,c=this,d=c.root,e=c.agent,f=c.docSize.width(),g=c.screenSize.width(),h=c.breakpointsInfo;if(i=-1!=e.indexOf("mobile")||window.orientation?"mobile":"android"===c.platforms("get")?"mobile":"desktop",j="mobile"==i?g<h.sm?"phone":"tablet":"desktop",f<h.sm?k="phone":f>=h.sm&&f<h.md?k="tablet":f>=h.md&&(k="desktop"),"type"===a){if("get"===b)return i;"set"===b&&d.setAttribute("data-device-type",i)}else if("device"===a){if("get"===b)return j;"set"===b&&d.setAttribute("data-device",j)}else if("sim"===a){if("get"===b)return k;"set"===b&&d.setAttribute("data-device-sim",k)}},orientation:function(a){var e,b=this,c=b.root,d=b.docSize;return e="mobile"===b.device("type","get")?90==Math.abs(window.orientation)?"landscape":"portrait":d.width()>=d.height()?"landscape":"portrait","get"===a?e:void("set"===a&&c.setAttribute("data-orientation",e))},sizeInfo:function(a,b){var c=this,d=c.root,e=c.docSize,f=c.screenSize;"width"===a?"doc"===b?d.setAttribute("data-doc-width",e.width()):"screen"===b&&d.setAttribute("data-screen-width",f.width()):"height"===a&&("doc"===b?d.setAttribute("data-doc-height",e.height()):"screen"===b&&d.setAttribute("data-screen-height",f.height()))},breakpoints:function(a,b){var h,i,c=this,d=c.root,e=c.docSize.width(),f=c.screenSize.width(),g=c.breakpointsInfo;if("doc"===a){if(e<g.sm?h="screen-xs":e>=g.sm&&e<g.md?h="screen-sm":e>=g.md&&e<g.lg?h="screen-md":e>=g.lg&&(h="screen-lg"),"get"===b)return h;"set"===b&&d.setAttribute("data-doc-size",h)}else if("screen"===a){if(f<g.sm?i="screen-xs":f>=g.sm&&f<g.md?i="screen-sm":f>=g.md&&f<g.lg?i="screen-md":f>=g.lg&&(i="screen-lg"),"get"===b)return i;"set"===b&&d.setAttribute("data-screen-size",i)}},setLanguage:function(){var a=this,b=a.root;if(null===b.lang||""===b.lang){var c=navigator.language||navigator.browserLanguage||navigator.systemLanguage;c&&c.length&&(b.lang=c)}},resizeInfo:function(a){a.orientation("set"),a.sizeInfo("width","doc"),a.breakpoints("doc","set"),a.device("sim","set"),a.layout("set"),"desktop"!==a.device("type","get")&&a.cookie.run()},browserName:function(a,b){var f,c=this,d=c.root,e=c.getBrowserNameAndCore(),g=d.className;if(e){var h=e.split(" ");f=h[0]}else f="unknown";return"get"===a?f:void("set"===a&&("class"===b?g.length?d.className+=" "+e:d.className=e:"attr"===b&&d.setAttribute("data-browser-name",f)))},inApp:function(a){var b=this,c=b.root,d=b.agent,e=-1!=d.indexOf("cordova")?!0:!1,f=function(){return-1!=d.indexOf("cordova-ios")?"ios":-1!=d.indexOf("cordova-android")?"android":void 0};return"get"==a?e?f():!1:void("set"==a&&(e?c.setAttribute("data-inapp",f()):c.setAttribute("data-inapp",e)))},layout:function(a){var g,b=this,c=b.root,d=b.breakpointsInfo,e=b.screenSize.width(),f=b.device("type","get");return"mobile"==f||"mobile"==f&&e<d.md?g="mobile":("desktop"==f||"mobile"==f&&e>=d.md)&&(g=b.inApp("get")!==!1?"mobile":"desktop"),"get"==a?g:void("set"==a&&c.setAttribute("data-layout-mode",g))},urCookies:{set:function(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toUTCString();document.cookie=a+"="+b+"; "+e},get:function(a){var b=a+"=",c=document.cookie.split(";"),d=[];if(c.length>0)for(var e=0;e<c.length;e++){for(var f=c[e];" "==f.charAt(0);)f=f.substring(1);if(d[0]=-1!=f.indexOf(b)?!0:!1,d[0]){d[1]=f.substring(b.length,f.length);break}}else d[0]=!1;return d},isEnabled:function(){var a=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||a||(document.cookie="testcookie",a=-1!=document.cookie.indexOf("testcookie")?!0:!1),a},run:function(a){var b=this;if(b.isEnabled()){var c=location.href,d=b.get("urbrowser"),e=b.get("reload"),f=e[0]?e[1]:0,g="undefined"!=typeof JSON?JSON.stringify({device:a.device("device","get"),deviceType:a.device("type","get"),screenWidth:a.screenSize.width(),breakpoint:a.breakpoints("screen","get"),orientation:a.orientation("get"),layout:a.layout("get"),inApp:a.inApp("get")}):'{"device":"'+a.device("device","get")+'","deviceType":"'+a.device("type","get")+'","screenWidth":"'+a.screenSize.width()+'","breakpoint":"'+a.breakpoints("screen","get")+'","orientation":"'+a.orientation("get")+'","layout":"'+a.layout("get")+'","inapp":"'+a.inApp("get")+'"}';if(!d[0]||g.indexOf(d[1])){var h=new Date;h.setTime(h.getTime()+31536e6);var i="expires="+h.toUTCString();document.cookie="urbrowser=; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie="urbrowser="+g+"; "+i,f++,document.cookie="reload="+f+"; "+i,-1==c.indexOf("file:///")&&2>=f&&location.reload()}else(-1!=c.indexOf("http://localhost")||-1!=c.indexOf("http://192.168")||-1!=c.indexOf("http://127.0.0.")||-1!=c.indexOf("http://urbrowser.kule.tw/")||-1!=c.indexOf("file:///"))&&console.log(d[1])}else console.log("Please open browser cookie.")}},done:function(){var a=this,b=a.root;a.setLanguage(),a.platforms("set"),a.browserName("set","class"),a.device("device","set"),a.device("type","set"),a.device("sim","set"),a.browserName("set","attr"),a.browserVersion("set"),a.OSName("set"),a.windowsVersion("set"),a.breakpoints("doc","set"),a.breakpoints("screen","set"),a.orientation("set"),a.sizeInfo("width","screen"),a.sizeInfo("width","doc"),a.layout("set"),a.inApp("set"),b.setAttribute("data-urbrowser","true"),a.urCookies.run(a),window.addEventListener?window.addEventListener("resize",function(){a.resizeInfo(a)},!1):window.attachEvent("onresize",function(){a.resizeInfo(a)},!1)}};var b=new a;b.done()}(window);