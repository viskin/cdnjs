/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20140114 */
(function(e){"use strict";e.fn.cycle.transitions.tileSlide=e.fn.cycle.transitions.tileBlind={before:function(t,i,n,o){t.API.stackSlides(i,n,o),e(i).show(),t.container.css("overflow","hidden"),t.tileDelay=t.tileDelay||"tileSlide"==t.fx?100:125,t.tileCount=t.tileCount||7,t.tileVertical=t.tileVertical!==!1,t.container.data("cycleTileInitialized")||(t.container.on("cycle-destroyed",e.proxy(this.onDestroy,t.API)),t.container.data("cycleTileInitialized",!0))},transition:function(t,i,n,o,s){function r(e){p.eq(e).animate(I,{duration:t.speed,easing:t.easing,complete:function(){(o?g-1===e:0===e)&&t._tileAniCallback()}}),setTimeout(function(){(o?g-1!==e:0!==e)&&r(o?e+1:e-1)},t.tileDelay)}t.slides.not(i).not(n).hide();var c,l,a,d,u,p=e(),f=e(i),y=e(n),g=t.tileCount,v=t.tileVertical,h=t.container.height(),m=t.container.width();v?(l=Math.floor(m/g),d=m-l*(g-1),a=u=h):(l=d=m,a=Math.floor(h/g),u=h-a*(g-1)),t.container.find(".cycle-tiles-container").remove();var I,A={left:0,top:0,overflow:"hidden",position:"absolute",margin:0,padding:0};I=v?"tileSlide"==t.fx?{top:h}:{width:0}:"tileSlide"==t.fx?{left:m}:{height:0};var S=e('<div class="cycle-tiles-container"></div>');S.css({zIndex:f.css("z-index"),overflow:"visible",position:"absolute",top:0,left:0,direction:"ltr"}),S.insertBefore(n);for(var x=0;g>x;x++)c=e("<div></div>").css(A).css({width:g-1===x?d:l,height:g-1===x?u:a,marginLeft:v?x*l:0,marginTop:v?0:x*a}).append(f.clone().css({position:"relative",maxWidth:"none",width:f.width(),margin:0,padding:0,marginLeft:v?-(x*l):0,marginTop:v?0:-(x*a)})),p=p.add(c);S.append(p),f.hide(),y.show().css("opacity",1),r(o?0:g-1),t._tileAniCallback=function(){y.show(),f.hide(),S.remove(),s()}},stopTransition:function(e){e.container.find("*").stop(!0,!0),e._tileAniCallback&&e._tileAniCallback()},onDestroy:function(){var e=this.opts();e.container.find(".cycle-tiles-container").remove()}}})(jQuery);