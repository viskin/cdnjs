(function(){if(window.fetch){return}function i(k){this.map={};var j=this;if(k instanceof i){k.forEach(function(m,l){l.forEach(function(n){j.append(m,n)})})}else{if(k){Object.getOwnPropertyNames(k).forEach(function(l){j.append(l,k[l])})}}}i.prototype.append=function(j,l){var k=this.map[j];if(!k){k=[];this.map[j]=k}k.push(l)};i.prototype["delete"]=function(j){delete this.map[j]};i.prototype.get=function(k){var j=this.map[k];return j?j[0]:null};i.prototype.getAll=function(j){return this.map[j]||[]};i.prototype.has=function(j){return this.map.hasOwnProperty(j)};i.prototype.set=function(j,k){this.map[j]=[k]};i.prototype.forEach=function(k){var j=this;Object.getOwnPropertyNames(this.map).forEach(function(l){k(l,j.map[l])})};function g(j){if(j.bodyUsed){return Promise.reject(new TypeError("Body already consumed"))}j.bodyUsed=true}function h(){this._body=null;this.bodyUsed=false;this.arrayBuffer=function(){throw new Error("Not implemented yet")};this.blob=function(){var j=g(this);return j?j:Promise.resolve(new Blob([this._body]))};this.formData=function(){return Promise.resolve(a(this._body))};this.json=function(){var k=g(this);if(k){return k}var j=this._body;return new Promise(function(n,m){try{n(JSON.parse(j))}catch(l){m(l)}})};this.text=function(){var j=g(this);return j?j:Promise.resolve(this._body)};return this}var e=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function f(k){var j=k.toUpperCase();return(e.indexOf(j)>-1)?j:k}function c(k,j){j=j||{};this.url=k;this._body=j.body;this.credentials=j.credentials||null;this.headers=new i(j.headers);this.method=f(j.method||"GET");this.mode=j.mode||null;this.referrer=null}function a(j){var k=new FormData();j.trim().split("&").forEach(function(l){if(l){var n=l.split("=");var m=n.shift().replace(/\+/g," ");var o=n.join("=").replace(/\+/g," ");k.append(decodeURIComponent(m),decodeURIComponent(o))}});return k}function d(l){var j=new i();var k=l.getAllResponseHeaders().trim().split("\n");k.forEach(function(p){var n=p.trim().split(":");var m=n.shift().trim();var o=n.join(":").trim();j.append(m,o)});return j}c.prototype.fetch=function(){var j=this;return new Promise(function(l,k){var m=new XMLHttpRequest();m.onload=function(){var n=(m.status===1223)?204:m.status;if(n<100||n>599){k(new TypeError("Network request failed"));return}var o={status:n,statusText:m.statusText,headers:d(m)};l(new b(m.responseText,o))};m.onerror=function(){k(new TypeError("Network request failed"))};m.open(j.method,j.url);j.headers.forEach(function(o,n){n.forEach(function(p){m.setRequestHeader(o,p)})});m.send((j._body===undefined)?null:j._body)})};h.call(c.prototype);function b(j,k){this._body=j;this.type="default";this.url=null;this.status=k.status;this.statusText=k.statusText;this.headers=k.headers}h.call(b.prototype);window.fetch=function(k,j){return new c(k,j).fetch()}})();