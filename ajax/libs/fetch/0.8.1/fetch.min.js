(function(){if(self.fetch){return}function h(p){if(typeof p!=="string"){p=p.toString()}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(p)){throw new TypeError("Invalid character in header field name")}return p.toLowerCase()}function f(p){if(typeof p!=="string"){p=p.toString()}return p}function n(q){this.map={};var p=this;if(q instanceof n){q.forEach(function(s,r){r.forEach(function(t){p.append(s,t)})})}else{if(q){Object.getOwnPropertyNames(q).forEach(function(r){p.append(r,q[r])})}}}n.prototype.append=function(p,r){p=h(p);r=f(r);var q=this.map[p];if(!q){q=[];this.map[p]=q}q.push(r)};n.prototype["delete"]=function(p){delete this.map[h(p)]};n.prototype.get=function(q){var p=this.map[h(q)];return p?p[0]:null};n.prototype.getAll=function(p){return this.map[h(p)]||[]};n.prototype.has=function(p){return this.map.hasOwnProperty(h(p))};n.prototype.set=function(p,q){this.map[h(p)]=[f(q)]};n.prototype.forEach=function(q){var p=this;Object.getOwnPropertyNames(this.map).forEach(function(r){q(r,p.map[r])})};function k(p){if(p.bodyUsed){return Promise.reject(new TypeError("Already read"))}p.bodyUsed=true}function j(p){return new Promise(function(r,q){p.onload=function(){r(p.result)};p.onerror=function(){q(p.error)}})}function g(q){var p=new FileReader();p.readAsArrayBuffer(q);return j(p)}function o(q){var p=new FileReader();p.readAsText(q);return j(p)}var m={blob:"FileReader" in self&&"Blob" in self&&(function(){try{new Blob();return true}catch(p){return false}})(),formData:"FormData" in self};function l(){this.bodyUsed=false;this._initBody=function(p){this._bodyInit=p;if(typeof p==="string"){this._bodyText=p}else{if(m.blob&&Blob.prototype.isPrototypeOf(p)){this._bodyBlob=p}else{if(m.formData&&FormData.prototype.isPrototypeOf(p)){this._bodyFormData=p}else{if(!p){this._bodyText=""}else{throw new Error("unsupported BodyInit type")}}}}};if(m.blob){this.blob=function(){var p=k(this);if(p){return p}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else{if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}}};this.arrayBuffer=function(){return this.blob().then(g)};this.text=function(){var p=k(this);if(p){return p}if(this._bodyBlob){return o(this._bodyBlob)}else{if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}}else{this.text=function(){var p=k(this);return p?p:Promise.resolve(this._bodyText)}}if(m.formData){this.formData=function(){return this.text().then(a)}}this.json=function(){return this.text().then(JSON.parse)};return this}var e=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function i(q){var p=q.toUpperCase();return(e.indexOf(p)>-1)?p:q}function c(q,p){p=p||{};this.url=q;this.credentials=p.credentials||"omit";this.headers=new n(p.headers);this.method=i(p.method||"GET");this.mode=p.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&p.body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(p.body)}function a(p){var q=new FormData();p.trim().split("&").forEach(function(r){if(r){var t=r.split("=");var s=t.shift().replace(/\+/g," ");var u=t.join("=").replace(/\+/g," ");q.append(decodeURIComponent(s),decodeURIComponent(u))}});return q}function d(r){var p=new n();var q=r.getAllResponseHeaders().trim().split("\n");q.forEach(function(v){var t=v.trim().split(":");var s=t.shift().trim();var u=t.join(":").trim();p.append(s,u)});return p}l.call(c.prototype);function b(q,p){if(!p){p={}}this._initBody(q);this.type="default";this.url=null;this.status=p.status;this.ok=this.status>=200&&this.status<300;this.statusText=p.statusText;this.headers=p.headers instanceof n?p.headers:new n(p.headers);this.url=p.url||""}l.call(b.prototype);self.Headers=n;self.Request=c;self.Response=b;self.fetch=function(p,r){var q;if(c.prototype.isPrototypeOf(p)&&!r){q=p}else{q=new c(p,r)}return new Promise(function(t,s){var v=new XMLHttpRequest();if(q.credentials==="cors"){v.withCredentials=true}function u(){if("responseURL" in v){return v.responseURL}if(/^X-Request-URL:/m.test(v.getAllResponseHeaders())){return v.getResponseHeader("X-Request-URL")}return}v.onload=function(){var x=(v.status===1223)?204:v.status;if(x<100||x>599){s(new TypeError("Network request failed"));return}var y={status:x,statusText:v.statusText,headers:d(v),url:u()};var w="response" in v?v.response:v.responseText;t(new b(w,y))};v.onerror=function(){s(new TypeError("Network request failed"))};v.open(q.method,q.url,true);if("responseType" in v&&m.blob){v.responseType="blob"}q.headers.forEach(function(x,w){w.forEach(function(y){v.setRequestHeader(x,y)})});v.send(typeof q._bodyInit==="undefined"?null:q._bodyInit)})};self.fetch.polyfill=true})();