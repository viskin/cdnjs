(function(){if(self.fetch){return}function l(o){this.map={};var n=this;if(o instanceof l){o.forEach(function(q,p){p.forEach(function(r){n.append(q,r)})})}else{if(o){Object.getOwnPropertyNames(o).forEach(function(p){n.append(p,o[p])})}}}l.prototype.append=function(n,p){n=n.toLowerCase();var o=this.map[n];if(!o){o=[];this.map[n]=o}o.push(p)};l.prototype["delete"]=function(n){delete this.map[n.toLowerCase()]};l.prototype.get=function(o){var n=this.map[o.toLowerCase()];return n?n[0]:null};l.prototype.getAll=function(n){return this.map[n.toLowerCase()]||[]};l.prototype.has=function(n){return this.map.hasOwnProperty(n.toLowerCase())};l.prototype.set=function(n,o){this.map[n.toLowerCase()]=[o]};l.prototype.forEach=function(o){var n=this;Object.getOwnPropertyNames(this.map).forEach(function(p){o(p,n.map[p])})};function i(n){if(n.bodyUsed){return Promise.reject(new TypeError("Already read"))}n.bodyUsed=true}function h(n){return new Promise(function(p,o){n.onload=function(){p(n.result)};n.onerror=function(){o(n.error)}})}function f(o){var n=new FileReader();n.readAsArrayBuffer(o);return h(n)}function m(o){var n=new FileReader();n.readAsText(o);return h(n)}var k={blob:"FileReader" in self&&"Blob" in self&&(function(){try{new Blob();return true}catch(n){return false}})(),formData:"FormData" in self};function j(){this.bodyUsed=false;if(k.blob){this._initBody=function(n){this._bodyInit=n;if(typeof n==="string"){this._bodyText=n}else{if(k.blob&&Blob.prototype.isPrototypeOf(n)){this._bodyBlob=n}else{if(k.formData&&FormData.prototype.isPrototypeOf(n)){this._bodyFormData=n}else{if(!n){this._bodyText=""}else{throw new Error("unsupported BodyInit type")}}}}};this.blob=function(){var n=i(this);if(n){return n}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else{if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}}};this.arrayBuffer=function(){return this.blob().then(f)};this.text=function(){var n=i(this);if(n){return n}if(this._bodyBlob){return m(this._bodyBlob)}else{if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}}else{this._initBody=function(n){this._bodyInit=n;if(typeof n==="string"){this._bodyText=n}else{if(k.formData&&FormData.prototype.isPrototypeOf(n)){this._bodyFormData=n}else{if(!n){this._bodyText=""}else{throw new Error("unsupported BodyInit type")}}}};this.text=function(){var n=i(this);return n?n:Promise.resolve(this._bodyText)}}if(k.formData){this.formData=function(){return this.text().then(a)}}this.json=function(){return this.text().then(JSON.parse)};return this}var e=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(o){var n=o.toUpperCase();return(e.indexOf(n)>-1)?n:o}function c(o,n){n=n||{};this.url=o;this.credentials=n.credentials||"omit";this.headers=new l(n.headers);this.method=g(n.method||"GET");this.mode=n.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&n.body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(n.body)}function a(n){var o=new FormData();n.trim().split("&").forEach(function(p){if(p){var r=p.split("=");var q=r.shift().replace(/\+/g," ");var s=r.join("=").replace(/\+/g," ");o.append(decodeURIComponent(q),decodeURIComponent(s))}});return o}function d(p){var n=new l();var o=p.getAllResponseHeaders().trim().split("\n");o.forEach(function(t){var r=t.trim().split(":");var q=r.shift().trim();var s=r.join(":").trim();n.append(q,s)});return n}c.prototype.fetch=function(){var n=this;return new Promise(function(p,o){var r=new XMLHttpRequest();if(n.credentials==="cors"){r.withCredentials=true}function q(){if("responseURL" in r){return r.responseURL}if(/^X-Request-URL:/m.test(r.getAllResponseHeaders())){return r.getResponseHeader("X-Request-URL")}return}r.onload=function(){var t=(r.status===1223)?204:r.status;if(t<100||t>599){o(new TypeError("Network request failed"));return}var u={status:t,statusText:r.statusText,headers:d(r),url:q()};var s="response" in r?r.response:r.responseText;p(new b(s,u))};r.onerror=function(){o(new TypeError("Network request failed"))};r.open(n.method,n.url,true);if("responseType" in r&&k.blob){r.responseType="blob"}n.headers.forEach(function(t,s){s.forEach(function(u){r.setRequestHeader(t,u)})});r.send(typeof n._bodyInit==="undefined"?null:n._bodyInit)})};j.call(c.prototype);function b(o,n){if(!n){n={}}this._initBody(o);this.type="default";this.url=null;this.status=n.status;this.statusText=n.statusText;this.headers=n.headers;this.url=n.url||""}j.call(b.prototype);self.Headers=l;self.Request=c;self.Response=b;self.fetch=function(o,n){return new c(o,n).fetch()};self.fetch.polyfill=true})();