(function(){if(self.fetch){return}function l(o){this.map={};var n=this;if(o instanceof l){o.forEach(function(q,p){p.forEach(function(r){n.append(q,r)})})}else{if(o){Object.getOwnPropertyNames(o).forEach(function(p){n.append(p,o[p])})}}}l.prototype.append=function(n,p){n=n.toLowerCase();var o=this.map[n];if(!o){o=[];this.map[n]=o}o.push(p)};l.prototype["delete"]=function(n){delete this.map[n.toLowerCase()]};l.prototype.get=function(o){var n=this.map[o.toLowerCase()];return n?n[0]:null};l.prototype.getAll=function(n){return this.map[n.toLowerCase()]||[]};l.prototype.has=function(n){return this.map.hasOwnProperty(n.toLowerCase())};l.prototype.set=function(n,o){this.map[n.toLowerCase()]=[o]};l.prototype.forEach=function(o){var n=this;Object.getOwnPropertyNames(this.map).forEach(function(p){o(p,n.map[p])})};function j(n){if(n.bodyUsed){return Promise.reject(new TypeError("Already read"))}n.bodyUsed=true}function i(n){return new Promise(function(p,o){n.onload=function(){p(n.result)};n.onerror=function(){o(n.error)}})}function f(o){var n=new FileReader();n.readAsArrayBuffer(o);return i(n)}function m(o){var n=new FileReader();n.readAsText(o);return i(n)}var g="FileReader" in self&&"Blob" in self&&(function(){try{new Blob();return true}catch(n){return false}})();function k(){this.bodyUsed=false;if(g){this.blob=function(){var n=j(this);return n?n:Promise.resolve(this._bodyBlob)};this.arrayBuffer=function(){return this.blob().then(f)};this.text=function(){return this.blob().then(m)}}else{this.text=function(){var n=j(this);return n?n:Promise.resolve(this._bodyText)}}if("FormData" in self){this.formData=function(){return this.text().then(a)}}this.json=function(){return this.text().then(JSON.parse)};return this}var e=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(o){var n=o.toUpperCase();return(e.indexOf(n)>-1)?n:o}function c(o,n){n=n||{};this.url=o;this._body=n.body;this.credentials=n.credentials||"omit";this.headers=new l(n.headers);this.method=h(n.method||"GET");this.mode=n.mode||null;this.referrer=null}function a(n){var o=new FormData();n.trim().split("&").forEach(function(p){if(p){var r=p.split("=");var q=r.shift().replace(/\+/g," ");var s=r.join("=").replace(/\+/g," ");o.append(decodeURIComponent(q),decodeURIComponent(s))}});return o}function d(p){var n=new l();var o=p.getAllResponseHeaders().trim().split("\n");o.forEach(function(t){var r=t.trim().split(":");var q=r.shift().trim();var s=r.join(":").trim();n.append(q,s)});return n}c.prototype.fetch=function(){var n=this;return new Promise(function(p,o){var r=new XMLHttpRequest();function q(){if("responseURL" in r){return r.responseURL}if(/^X-Request-URL:/m.test(r.getAllResponseHeaders())){return r.getResponseHeader("X-Request-URL")}return}r.onload=function(){var t=(r.status===1223)?204:r.status;if(t<100||t>599){o(new TypeError("Network request failed"));return}var u={status:t,statusText:r.statusText,headers:d(r),url:q()};var s="response" in r?r.response:r.responseText;p(new b(s,u))};r.onerror=function(){o(new TypeError("Network request failed"))};r.open(n.method,n.url);if("responseType" in r&&g){r.responseType="blob"}n.headers.forEach(function(t,s){s.forEach(function(u){r.setRequestHeader(t,u)})});r.send((n._body===undefined)?null:n._body)})};k.call(c.prototype);function b(o,n){if(!n){n={}}if(g){if(typeof o==="string"){this._bodyBlob=new Blob([o])}else{this._bodyBlob=o}}else{this._bodyText=o}this.type="default";this.url=null;this.status=n.status;this.statusText=n.statusText;this.headers=n.headers;this.url=n.url||""}k.call(b.prototype);self.Headers=l;self.Request=c;self.Response=b;self.fetch=function(o,n){return new c(o,n).fetch()};self.fetch.polyfill=true})();