!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var d="function"==typeof require&&require;if(!a&&d)return d(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return r(n?n:t)},f,f.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i=t("./helpers"),r=function(t){var e=t.data("b"),n=t.data("p"),r=i.decls[e];if(!r)throw new Error(e+" block is not declared");var o={name:e,params:n,$node:t,_id:i.guid()};$.extend(this,o,r.methods),this._addEvents(),this._setInited(),this.emit("b-inited")};r.prototype.on=function(t,e){return this.$node.on(this._getEventName(t),e),this},r.prototype.off=function(t,e){var n=this._getEventName(t);return t?e?this.$node.off(n,e):this.$node.off(n):this.$node.off(),this},r.prototype._addEvents=function(){var t=i.decls[this.name],e=t.events;for(var n in e)if(e.hasOwnProperty(n)){var r=n.split(" ",2),o=r[0],s=r[1],a=e[n];this._isInnerEvent(o)&&(o=this._getEventName(o)),"string"==typeof a&&(a=t.methods[a]),this.$node.on(o,s,a.bind(this))}},r.prototype._isInnerEvent=function(t){return["b-inited","b-destroyed"].indexOf(t)>-1},r.prototype._setInited=function(){this.$node.addClass("jb-inited")},r.prototype.emit=function(t,e){return this.$node.trigger(this._getEventName(t),e),this},r.prototype.destroy=function(){i.cache[this._id]=null,this.$node.removeClass("jb-inited"),this.off(),this.emit("b-destroyed")},r.prototype._getEventName=function(t){return this._id+":"+t},e.exports=r},{"./helpers":3}],2:[function(t,e,n){var i=t("./helpers"),r=t("./Block"),o={init:function(){return this.find("[data-b]").jblocks("get")},destroy:function(){this.find("[data-b]").jblocks("get").each(function(){this.destroy()})},get:function(){return this.map(function(){var t=$(this),e=t.data("_bid");if(e)return i.cache[e];var n=new r(t);return e=n._id,t.data("_bid",e),i.cache[e]=n,n})},find:function(t){var e="[data-b]";return t&&(e='[data-b="'+t+'"]'),this.find(e).map(function(){return $(this).jblocks("get")[0]})}};$.fn.jblocks=function(t){if(t in o)return o[t].apply(this,Array.prototype.slice.call(arguments,1));throw new Error("Can`t find method "+t)},$.jblocks=function(t){if(!("name"in t))throw new Error("Need to define block`s name");if(i.decls[t.name])throw new Error("Can`t redefine "+t.name+" block");i.decls[t.name]=t},$.Block=r},{"./Block":1,"./helpers":3}],3:[function(t,e,n){var i=0;n.cache={},n.decls={},n.guid=function(){return"b-"+i++}},{}]},{},[2]);
//# sourceMappingURL=./0.3.6/jblocks.min.js.map