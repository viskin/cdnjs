!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Immutable")):"function"==typeof define&&define.amd?define(["Immutable"],t):"object"==typeof exports?exports.GyreJS=t(require("Immutable")):e.GyreJS=t(e.Immutable)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(3),u=r(o);e.exports=u.default},function(e,t){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var r=new Map,o=[],u=function(e){o.dispatch=function(n,u){return o.reduce(function(r,o){return function(){return o(t.NS,n,u,r,e)}},function(){return r.get(n)(u.push(e)&&u)})()}},i=function(e){for(var u=arguments.length,i=Array(u>1?u-1:0),c=1;u>c;c++)i[c-1]=arguments[c];var a=i;"object"===("undefined"==typeof e?"undefined":n(e))&&Object.prototype.hasOwnProperty.call(e,"type")&&(a=[e.payload],e=e.type),r.has(e)?o.dispatch(e,a):console.warn(">> GyreJS-'"+t.NS+"'-gyre: Unregistered action dispatched: '"+e+"' with arguments:",a,". (This is a no-op)")},c=function(n,o){if("string"!=typeof n)throw new Error("GyreJS (addAction): first argument (id) should be a string.");if("function"!=typeof o)throw new Error("GyreJS (addAction): second argument (reducer) should be a function.");r.set(n,function(n){return e.update(t.NS,o,n)})},a=function(e){if("object"!==("undefined"==typeof e?"undefined":n(e)))throw new Error("GyreJS (addActions): first argument (actions object) should be an object.");Object.keys(e).forEach(function(t){c(t,e[t])})},f=function(e){if("function"!=typeof e)throw new Error("GyreJS (use): first argument should be a function.");o.unshift(e),u(i)};return u(i),{addAction:c,addActions:a,dispatch:i,use:f}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),i=r(u),c=n(4),a=r(c),f=function(){return{}},d=function(e){return e()},s=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.actions,n=void 0===t?f:t,r=e.selectors,u=void 0===r?{}:r,c=e.state,s=void 0===c?{}:c,l=e.ticker,y=void 0===l?d:l;return function(e,t){var r={},c=(0,i.default)(e,t),f=(0,a.default)(e,t,c.dispatch),d={},l=function(){return c.addAction.apply(c,arguments),r},p=function(){return c.addActions.apply(c,arguments),r},b=function(e,n,o){if("string"!=typeof e)throw new Error("GyreJS (addSelector): first argument (id) should be a string.");if("function"!=typeof n)throw new Error("GyreJS (addSelector): second argument (selector) should be a function.");if("boolean"!=typeof o&&"undefined"!=typeof o&&null!==o)throw new Error("GyreJS (addSelector(s)): last argument (replace) should either be a boolean or undefined/null.");return!Object.prototype.hasOwnProperty.call(d,e)||o?d[e]=n:console.warn(">> GyreJS-'"+t.NS+"'-gyre: AddFilter -> Selector with id: '"+e+"' already exists."),r},h=function(e,t){if("object"!==("undefined"==typeof e?"undefined":o(e)))throw new Error("GyreJS (addSelectors): first argument (selectors) should be an object.");return Object.keys(e).forEach(function(n){b(n,e[n],t)}),r},g=function(e,n){for(var r=arguments.length,u=Array(r>2?r-2:0),i=2;r>i;i++)u[i-2]=arguments[i];return"function"==typeof e||"object"===("undefined"==typeof e?"undefined":o(e))?f(e,n):Object.prototype.hasOwnProperty.call(d,e)?f(d[e].apply(d,u),n):void console.warn(">> GyreJS-'"+t.NS+"'-gyre: Unregistered selector requested: '"+e+"' with arguments:",u,".")},S=function(){return c.dispatch.apply(c,arguments),r},m=function(){return e.getState(t.NS)},w=function(){for(var n=arguments.length,o=Array(n),u=0;n>u;u++)o[u]=arguments[u];return e.setState.apply(e,o.concat([t.NS])),r},v=function(){for(var n=arguments.length,o=Array(n),u=0;n>u;u++)o[u]=arguments[u];return e.setTicker.apply(e,[t.NS].concat(o)),r},j=function(){return c.use.apply(c,arguments),r};return p(n(t)),h(u),v(y),w(s),Object.assign(r,{addAction:l,addActions:p,addSelector:b,addSelectors:h,createSelector:g,dispatch:S,getState:m,nameSpace:t.NS,setState:w,setTicker:v,use:j})}};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),u=r(o),i=n(2),c=r(i),a={},f=function(){var e=void 0;return function(){return e||(e=(0,u.default)())}}(),d=function(){var e=void 0;return function(){return e||(e=new Map)}}(),s=function(e,t){return d().has(e)?d().get(e)(f(),Object.assign({},t,{NS:e+"-"+Date.now()})):void console.warn(">> GyreJS: Error on create - Gyre factory '"+e+"' not registered.")},l=function(e,t){return d().set(e,t),a},y=function(e){return d().has(e)?d().delete(e)&&!0:(console.warn(">> GyreJS: Error on unregister - Gyre factory '"+e+"' not registered."),!1)};t.default=Object.assign(a,{createGyre:s,registerGyreFactory:l,unRegisterGyreFactory:y,createGyreFactory:c.default})},function(e,t){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){var o=t.NS;return function(t,u){if("object"===("undefined"==typeof t?"undefined":n(t))&&"function"!=typeof t.onUpdate)throw new Error("GyreJS: Selector object should expose an 'onUpdate' method.");if("object"!==("undefined"==typeof t?"undefined":n(t))&&"function"!=typeof t)throw new Error("GyreJS: Selector should either be a function or an object with an 'onUpdate' method.");"function"==typeof t.onSubscribe&&t.onSubscribe(r);var i="object"===("undefined"==typeof t?"undefined":n(t))?t.onUpdate:t,c=e.addSelector(o,function(e){return i(e,u)});return function(){c(),"function"==typeof t.onUnsubscribe&&t.onUnsubscribe(r)}}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),c=r(i),a=function(){var e=c.default.Map({}),t={},n=function(e){return t[e]||(t[e]=[])},r=function(t,r){return function(){var o=n(t);return o.updateRequested=!1,r?r(e.get(t)):o.forEach(function(n){return n(e.get(t))})}},i=function(e,t){var o=n(e);o.updateRequested||(o.updateRequested=!0,o.ticker(r(e,t)))},a=function(e,n){return function(){return t[e].splice(t[e].indexOf(n),1)}},f=function(t,n){return e.get(n)!==t&&(e=e.set(n,t),i(n)),e},d=function(e,t){return n(e).push(t),i(e,t),a(e,t)},s=function(t){return e.has(t)?e.get(t):e},l=function(e,t){if("object"!==("undefined"==typeof e?"undefined":u(e)))throw new Error("GyreJS (setState): New state should either be an object or an instance of Immutable.Map.");return f(c.default.Map.isMap(e)?e:c.default.Map(e),t)},y=function(e,t){if("function"!=typeof t)throw new Error("GyreJS (setTicker): Ticker should be a function.");n(e).ticker=t},p=function(t,n,r){return f(n.apply(void 0,o([e.get(t)].concat(r)))||e.get(t),t)};return{addSelector:d,getState:s,setState:l,setTicker:y,update:p}};t.default=a},function(t,n){t.exports=e}])});