!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Immutable")):"function"==typeof define&&define.amd?define(["Immutable"],e):"object"==typeof exports?exports.GyreJS=e(require("Immutable")):t.GyreJS=e(t.Immutable)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return t[r].call(u.exports,u,u.exports,e),u.loaded=!0,u.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var u=n(3),o=r(u),a=n(2),i=r(a),c=new Map,s=o.default(),f=function(t,e){c.has(t)||console.warn(">> GyreJS: Gyre factory '"+t+"' not registered.");var n=t+"-"+Date.now();return s.setState({data:{}},n),c.get(t)(s,Object.assign({},{NS:n},e))},d=function(t){return c.has(t)?c.delete(t)&&!0:(console.warn(">> GyreJS: Gyre factory '"+t+"' not registered."),!1)},l=function(t,e){c.set(t,e)};e.GyreFactory=i.default,e.default={createGyre:f,destroyGyre:d,registerGyreFactory:l}},function(t,e){"use strict";e.__esModule=!0;var n=function(t,e){var n=new Map,r=[],u=function c(t){for(var u=arguments.length,o=Array(u>1?u-1:0),a=1;u>a;a++)o[a-1]=arguments[a];n.has(t)?r.reduce(function(n,r){return function(){return r(e.NS,t,o,n,c)}},function(){return n.get(t)(o.push(c)&&o)})():console.warn(">> GyreJS-'"+e.NS+"'-gyre: Unregistered action dispatched: '"+t+"' with arguments:",o,". (This is a no-op)")},o=function(r,u){n.set(r,function(n){return t.updateState(e.NS,u,n)})},a=function(t){Object.keys(t).forEach(function(e){o(e,t[e])})},i=function(t){r.unshift(t)};return{addAction:o,addActions:a,dispatch:u,use:i}};e.default=n,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var u=n(1),o=r(u),a=function(t){var e=t.actions,n=void 0===e?function(){}:e,r=t.filters,u=void 0===r?{}:r,a=t.state,i=void 0===a?{}:a;return function(t,e){var r=o.default(t,e),a=function(n,o){for(var a=arguments.length,i=Array(a>2?a-2:0),c=2;a>c;c++)i[c-2]=arguments[c];return Object.prototype.hasOwnProperty.call(u,n)?u[n].apply(u,[t,r.dispatch,o,e].concat(i)):void console.warn(">> GyreJS-'"+e.NS+"'-gyre: Unregistered filter requested: '"+n+"' with arguments:",i,".")},c=function(n){return t.setState(n,e.NS)},s=function(){return t.getState().get(e.NS)};return r.addActions(n(e)),c(i),{addAction:r.addAction,addActions:r.addActions,dispatch:r.dispatch,getState:s,getFilter:a,nameSpace:e.NS,setState:c,use:r.use}}};e.default=a,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var u=n(4),o=r(u),a=function(){var t=o.default.Map({}),e={},n=new Set,r=function(){n.forEach(function(n){return(e[n]||[]).forEach(function(e){return e("all"===n?t:t.get(n))})}),n.clear()},u=function(t){n.size||requestAnimationFrame(r),n.add("all").add(t)},a=function(t,n){return function(){return e[t]=e[t].filter(function(t){return t!==n})}},i=function(e,n){return t.get(n)!==e&&(t=t.set(n,e),u(n)),t},c=function(t){var n=arguments.length<=1||void 0===arguments[1]?"all":arguments[1];return e[n]||(e[n]=[]),e[n].push(t),u(n),a(n,t)},s=function(){return t},f=function(t,e){return i(o.default.Map.isMap(t)?t:o.default.Map(t),e)},d=function(e,n,r){return i(n.apply(void 0,[t.get(e)].concat(r))||t.get(e),e)};return{addFilter:c,getState:s,setState:f,updateState:d}};e.default=a,t.exports=e.default},function(e,n){e.exports=t}])});