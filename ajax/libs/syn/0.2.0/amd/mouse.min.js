define(function(require,exports,module){var syn=require("./synthetic"),h=syn.helpers,getWin=h.getWindow;syn.mouse={},h.extend(syn.defaults,{mousedown:function(options){syn.trigger(this,"focus",{})},click:function(){var element=this,href,type,createChange,radioChanged,nodeName,scope;try{href=element.href,type=element.type,createChange=syn.data(element,"createChange"),radioChanged=syn.data(element,"radioChanged"),scope=getWin(element),nodeName=element.nodeName.toLowerCase()}catch(e){return}if(!syn.support.linkHrefJS&&/^\s*javascript:/.test(href)){var code=href.replace(/^\s*javascript:/,"");"//"!==code&&-1===code.indexOf("void(0)")&&(window.selenium?eval("with(selenium.browserbot.getCurrentWindow()){"+code+"}"):eval("with(scope){"+code+"}"))}if(!syn.support.clickSubmits&&("input"===nodeName||"button"===nodeName)&&"submit"===type){var form=syn.closest(element,"form");form&&syn.trigger(form,"submit",{})}"a"===nodeName&&element.href&&!/^\s*javascript:/.test(href)&&(scope.location.href=href),"input"===nodeName&&"checkbox"===type&&(syn.support.clickChanges||syn.trigger(element,"change",{})),"input"===nodeName&&"radio"===type&&radioChanged&&!syn.support.radioClickChanges&&syn.trigger(element,"change",{}),"option"===nodeName&&createChange&&(syn.trigger(element.parentNode,"change",{}),syn.data(element,"createChange",!1))}}),h.extend(syn.create,{mouse:{options:function(type,options,element){var doc=document.documentElement,body=document.body,center=[options.pageX||0,options.pageY||0],left=syn.mouse.browser&&syn.mouse.browser.left[type],right=syn.mouse.browser&&syn.mouse.browser.right[type];return h.extend({bubbles:!0,cancelable:!0,view:window,detail:1,screenX:1,screenY:1,clientX:options.clientX||center[0]-(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc.clientLeft||0),clientY:options.clientY||center[1]-(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc.clientTop||0),ctrlKey:!!syn.key.ctrlKey,altKey:!!syn.key.altKey,shiftKey:!!syn.key.shiftKey,metaKey:!!syn.key.metaKey,button:left&&null!==left.button?left.button:right&&right.button||("contextmenu"===type?2:0),relatedTarget:document.documentElement},options)},event:function(type,defaults,element){var event,doc=getWin(element).document||document;if(doc.createEvent){try{event=doc.createEvent("MouseEvents"),event.initMouseEvent(type,defaults.bubbles,defaults.cancelable,defaults.view,defaults.detail,defaults.screenX,defaults.screenY,defaults.clientX,defaults.clientY,defaults.ctrlKey,defaults.altKey,defaults.shiftKey,defaults.metaKey,defaults.button,defaults.relatedTarget)}catch(e){event=h.createBasicStandardEvent(type,defaults,doc)}return event.synthetic=!0,event}try{event=h.createEventObject(type,defaults,element)}catch(e){}return event}},click:{setup:function(type,options,element){var nodeName=element.nodeName.toLowerCase();if(!syn.support.clickChecks&&!syn.support.changeChecks&&"input"===nodeName&&(type=element.type.toLowerCase(),"checkbox"===type&&(element.checked=!element.checked),"radio"===type&&!element.checked)){try{syn.data(element,"radioChanged",!0)}catch(e){}element.checked=!0}if("a"===nodeName&&element.href&&!/^\s*javascript:/.test(element.href)&&syn.data(element,"href",element.href),/option/i.test(element.nodeName)){for(var child=element.parentNode.firstChild,i=-1;child&&(1!==child.nodeType||(i++,child!==element));)child=child.nextSibling;i!==element.parentNode.selectedIndex&&(element.parentNode.selectedIndex=i,syn.data(element,"createChange",!0))}}},mousedown:{setup:function(type,options,element){var nn=element.nodeName.toLowerCase();!syn.browser.safari||"select"!==nn&&"option"!==nn||(options._autoPrevent=!0)}}})});