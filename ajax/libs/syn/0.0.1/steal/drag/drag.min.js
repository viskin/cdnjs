steal("src/synthetic.js",function(Syn){(function(){if(!document.body){setTimeout(arguments.callee,1);return}var div=document.createElement("div");document.body.appendChild(div);Syn.helpers.extend(div.style,{width:"100px",height:"10000px",backgroundColor:"blue",position:"absolute",top:"10px",left:"0px",zIndex:19999});document.body.scrollTop=11;if(!document.elementFromPoint){return}var el=document.elementFromPoint(3,1);if(el==div){Syn.support.elementFromClient=true}else{Syn.support.elementFromPage=true}document.body.removeChild(div);document.body.scrollTop=0})();var elementFromPoint=function(point,element){var clientX=point.clientX,clientY=point.clientY,win=Syn.helpers.getWindow(element),el;if(Syn.support.elementFromPage){var off=Syn.helpers.scrollOffset(win);clientX=clientX+off.left;clientY=clientY+off.top}el=win.document.elementFromPoint?win.document.elementFromPoint(clientX,clientY):element;if(el===win.document.documentElement&&(point.clientY<0||point.clientX<0)){return element}else{return el}},createEventAtPoint=function(event,point,element){var el=elementFromPoint(point,element);Syn.trigger(event,point,el||element);return el},mouseMove=function(point,element,last){var el=elementFromPoint(point,element);if(last!=el&&el&&last){var options=Syn.helpers.extend({},point);options.relatedTarget=el;Syn.trigger("mouseout",options,last);options.relatedTarget=last;Syn.trigger("mouseover",options,el)}Syn.trigger("mousemove",point,el||element);return el},startMove=function(start,end,duration,element,callback){var startTime=new Date,distX=end.clientX-start.clientX,distY=end.clientY-start.clientY,win=Syn.helpers.getWindow(element),current=elementFromPoint(start,element),cursor=win.document.createElement("div"),calls=0;move=function(){var now=new Date,scrollOffset=Syn.helpers.scrollOffset(win),fraction=(calls==0?0:now-startTime)/duration,options={clientX:distX*fraction+start.clientX,clientY:distY*fraction+start.clientY};calls++;if(fraction<1){Syn.helpers.extend(cursor.style,{left:options.clientX+scrollOffset.left+2+"px",top:options.clientY+scrollOffset.top+2+"px"});current=mouseMove(options,element,current);setTimeout(arguments.callee,15)}else{current=mouseMove(end,element,current);win.document.body.removeChild(cursor);callback()}};Syn.helpers.extend(cursor.style,{height:"5px",width:"5px",backgroundColor:"red",position:"absolute",zIndex:19999,fontSize:"1px"});win.document.body.appendChild(cursor);move()},startDrag=function(start,end,duration,element,callback){createEventAtPoint("mousedown",start,element);startMove(start,end,duration,element,function(){createEventAtPoint("mouseup",end,element);callback()})},center=function(el){var j=Syn.jquery()(el),o=j.offset();return{pageX:o.left+j.outerWidth()/2,pageY:o.top+j.outerHeight()/2}},convertOption=function(option,win,from){var page=/(\d+)[x ](\d+)/,client=/(\d+)X(\d+)/,relative=/([+-]\d+)[xX ]([+-]\d+)/;if(typeof option=="string"&&relative.test(option)&&from){var cent=center(from),parts=option.match(relative);option={pageX:cent.pageX+parseInt(parts[1]),pageY:cent.pageY+parseInt(parts[2])}}if(typeof option=="string"&&page.test(option)){var parts=option.match(page);option={pageX:parseInt(parts[1]),pageY:parseInt(parts[2])}}if(typeof option=="string"&&client.test(option)){var parts=option.match(client);option={clientX:parseInt(parts[1]),clientY:parseInt(parts[2])}}if(typeof option=="string"){option=Syn.jquery()(option,win.document)[0]}if(option.nodeName){option=center(option)}if(option.pageX){var off=Syn.helpers.scrollOffset(win);option={clientX:option.pageX-off.left,clientY:option.pageY-off.top}}return option},adjust=function(from,to,win){if(from.clientY<0){var off=Syn.helpers.scrollOffset(win);var dimensions=Syn.helpers.scrollDimensions(win),top=off.top+from.clientY-100,diff=top-off.top;if(top>0){}else{top=0;diff=-off.top}from.clientY=from.clientY-diff;to.clientY=to.clientY-diff;Syn.helpers.scrollOffset(win,{top:top,left:off.left})}};Syn.helpers.extend(Syn.init.prototype,{_move:function(options,from,callback){var win=Syn.helpers.getWindow(from),fro=convertOption(options.from||from,win,from),to=convertOption(options.to||options,win,from);options.adjust!==false&&adjust(fro,to,win);startMove(fro,to,options.duration||500,from,callback)},_drag:function(options,from,callback){var win=Syn.helpers.getWindow(from),fro=convertOption(options.from||from,win,from),to=convertOption(options.to||options,win,from);options.adjust!==false&&adjust(fro,to,win);startDrag(fro,to,options.duration||500,from,callback)}});return Syn});
