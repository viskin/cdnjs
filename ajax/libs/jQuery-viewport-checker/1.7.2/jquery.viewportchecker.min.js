(function(a){a.fn.viewportChecker=function(b){var e={classToAdd:"visible",classToRemove:"invisible",offset:100,repeat:false,callbackFunction:function(g,h){},scrollHorizontal:false};a.extend(e,b);var c=this,d={height:a(window).height(),width:a(window).width()},f=((navigator.userAgent.toLowerCase().indexOf("webkit")!=-1)?"body":"html");this.checkElements=function(){if(!e.scrollHorizontal){var h=a(f).scrollTop(),g=(h+d.height)}else{var h=a(f).scrollLeft(),g=(h+d.width)}c.each(function(){var m=a(this),j={},l={};if(m.data("vp-add-class")){l.classToAdd=m.data("vp-add-class")}if(m.data("vp-remove-class")){l.classToRemove=m.data("vp-remove-class")}if(m.data("vp-offset")){l.offset=m.data("vp-offset")}if(m.data("vp-repeat")){l.repeat=m.data("vp-repeat")}if(m.data("vp-scrollHorizontal")){l.scrollHorizontal=m.data("vp-scrollHorizontal")}a.extend(j,e);a.extend(j,l);if(m.hasClass(j.classToAdd)&&!j.repeat){return}var k=(!j.scrollHorizontal)?Math.round(m.offset().top)+j.offset:Math.round(m.offset().left)+j.offset,i=(!j.scrollHorizontal)?k+m.height():k+m.width();if((k<g)&&(i>h)){m.removeClass(j.classToRemove);m.addClass(j.classToAdd);j.callbackFunction(m,"add")}else{if(m.hasClass(j.classToAdd)&&(j.repeat)){m.removeClass(j.classToAdd);j.callbackFunction(m,"remove")}}})};a(window).bind("load scroll touchmove",this.checkElements);a(window).resize(function(g){d=(!e.scrollHorizontal)?g.currentTarget.innerHeight:g.currentTarget.innerWidth});this.checkElements();return this}})(jQuery);