(function(a){a.fn.viewportChecker=function(b){var e={classToAdd:"visible",classToRemove:"invisible",offset:100,repeat:false,callbackFunction:function(g,h){},scrollHorizontal:false};a.extend(e,b);var c=this,d=(!e.scrollHorizontal)?a(window).height():a(window).width(),f=((navigator.userAgent.toLowerCase().indexOf("webkit")!=-1)?"body":"html");this.checkElements=function(){if(!e.scrollHorizontal){var g=a(f).scrollTop(),h=(g+d)}else{var g=a(f).scrollLeft(),h=(g+d)}c.each(function(){var m=a(this),k={},l={};if(m.data("add")){l.classToAdd=m.data("vp-add-class")}if(m.data("add")){l.classToRemove=m.data("vp-remove-class")}if(m.data("offset")){l.offset=m.data("vp-offset")}if(m.data("repeat")){l.repeat=m.data("vp-repeat")}if(m.data("scrollHorizontal")){l.scrollHorizontal=m.data("vp-scrollHorizontal")}a.extend(k,e);a.extend(k,l);if(m.hasClass(k.classToAdd)&&!k.repeat){return}var i=(!k.scrollHorizontal)?Math.round(m.offset().top)+k.offset:Math.round(m.offset().left)+k.offset,j=i+(m.height());if((i<h)&&(j>g)){m.removeClass(k.classToRemove);m.addClass(k.classToAdd);k.callbackFunction(m,"add")}else{if(m.hasClass(k.classToAdd)&&(k.repeat)){m.removeClass(k.classToAdd);k.callbackFunction(m,"remove")}}})};a(window).bind("load scroll touchmove",this.checkElements);a(window).resize(function(g){d=(!e.scrollHorizontal)?g.currentTarget.innerHeight:g.currentTarget.innerWidth});this.checkElements();return this}})(jQuery);