{"version":3,"file":"bundle.js","sources":["/source-files/jsondiffpatch/node_modules/fiberglass/node_modules/browserify/node_modules/browser-pack/_prelude.js","/source-files/jsondiffpatch/src/main-formatters.js","/source-files/jsondiffpatch/src/formatters/index.js","/source-files/jsondiffpatch/src/formatters/html.js","/source-files/jsondiffpatch/src/formatters/annotated.js","/source-files/jsondiffpatch/node_modules/fiberglass/node_modules/browserify/node_modules/process/browser.js","/source-files/jsondiffpatch/src/formatters/base.js"],"names":["process","exports","html","require","annotated","browser","consoleModuleName","console","call","this","base","BaseFormatter","HtmlFormatter","prototype","typeFormattterErrorFormatter","context","err","out","formatValue","value","JSON","stringify","formatTextDiffString","lines","parseTextDiff","i","l","length","line","location","chr","pieces","pieceIndex","piecesLength","piece","type","text","adjustArrows","node","document","getElementText","el","textContent","innerText","eachByQuery","query","fn","elems","querySelectorAll","eachChildren","children","arrow","arrowParent","parentNode","svg","path","style","display","destinationElem","destination","querySelector","container","child","getAttribute","distance","offsetTop","setAttribute","Math","abs","top","curve","round","rootBegin","nodeType","nodeClass","rootEnd","hasArrows","toString","nodeBegin","key","leftKey","nodeEnd","format_unchanged","delta","left","format_movedestination","format_node","_t","formatDeltaChildren","format_added","format_modified","format_deleted","format_moved","format_textdiff","showUnchanged","show","delay","body","prefix","classes","showing","hiding","visible","hidden","list","classList","remove","add","setTimeout","intervalId","setInterval","clearInterval","hideUnchanged","defaultInstance","format","AnnotatedFormatter","includeMoveDestinations","prepareContext","indent","levels","indentLevel","indentPad","Array","join","row","json","htmlNote","isLast","wrapPropertyName","name","deltaAnnotations","added","formatLegend","modified","deleted","moved","textdiff","formatAnyChange","deltaType","getDeltaType","annotator","apply","slice","arguments","split","noop","module","nextTick","canSetImmediate","window","setImmediate","canPost","postMessage","addEventListener","f","queue","ev","source","data","stopPropagation","shift","push","title","env","argv","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","Error","cwd","chdir","isArray","a","getObjectKeys","Object","keys","obj","names","property","hasOwnProperty","trimUnderscore","str","substr","arrayKeyToSortNumber","parseInt","arrayKeyComparer","key1","key2","recurse","finalize","buffer","typeFormattterNotFound","movedFrom","undefined","typeFormattter","error","stack","self","forEachDeltaKey","arrayKeys","moveDestinations","sort","index","output","lineOutput","exec","pieceOutput"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports=require(\"./formatters\");","(function (process){\n\nexports.html = require('./html');\nexports.annotated = require('./annotated');\n\nif (!process.browser) {\n\tvar consoleModuleName = './console';\n\texports.console = require(consoleModuleName);\n}\n\n}).call(this,require('_process'))","\nvar base = require('./base');\nvar BaseFormatter = base.BaseFormatter;\n\nvar HtmlFormatter = function HtmlFormatter() {\n};\n\nHtmlFormatter.prototype = new BaseFormatter();\n\nHtmlFormatter.prototype.typeFormattterErrorFormatter = function(context, err) {\n    context.out('<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n};\n\nHtmlFormatter.prototype.formatValue = function(context, value) {\n    context.out('<pre>' + JSON.stringify(value, null, 2) + '</pre>');\n};\n\nHtmlFormatter.prototype.formatTextDiffString = function(context, value) {\n    var lines = this.parseTextDiff(value);\n    context.out('<ul class=\"jsondiffpatch-textdiff\">');\n    for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li>' +\n        '<div class=\"jsondiffpatch-textdiff-location\">' +\n        '<span class=\"jsondiffpatch-textdiff-line-number\">' +\n        line.location.line +\n        '</span>' +\n        '<span class=\"jsondiffpatch-textdiff-char\">' +\n        line.location.chr +\n        '</span>' +\n        '</div>' +\n        '<div class=\"jsondiffpatch-textdiff-line\">');\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n            var piece = pieces[pieceIndex];\n            context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' +\n                piece.text + '</span>');\n        }\n        context.out('</div></li>');\n    }\n    context.out('</ul>');\n};\n\nvar adjustArrows = function jsondiffpatchHtmlFormatterAdjustArrows(node) {\n    node = node || document;\n    var getElementText = function(el) {\n        return el.textContent || el.innerText;\n    };\n    var eachByQuery = function(el, query, fn) {\n        var elems = el.querySelectorAll(query);\n        for (var i = 0, l = elems.length; i < l; i++) {\n            fn(elems[i]);\n        }\n    };\n    var eachChildren = function(el, fn) {\n        for (var i = 0, l = el.children.length; i < l; i++) {\n            fn(el.children[i], i);\n        }\n    };\n    eachByQuery(node, '.jsondiffpatch-arrow', function(arrow) {\n        var arrowParent = arrow.parentNode;\n        var svg = arrow.children[0], path = svg.children[1];\n        svg.style.display = 'none';\n        var destination = getElementText(arrowParent.querySelector('.jsondiffpatch-moved-destination'));\n        var container = arrowParent.parentNode;\n        var destinationElem;\n        eachChildren(container, function(child) {\n            if (child.getAttribute('data-key') === destination) {\n                destinationElem = child;\n            }\n        });\n        if (!destinationElem) { return; }\n        try {\n            var distance = destinationElem.offsetTop - arrowParent.offsetTop;\n            svg.setAttribute('height', Math.abs(distance) + 6);\n            arrow.style.top = (- 8 + (distance > 0 ? 0 : distance)) + 'px';\n            var curve = distance > 0 ?\n                'M30,0 Q-10,' + Math.round(distance / 2) + ' 26,' + (distance - 4) :\n                'M30,' + (-distance) + ' Q-10,' + Math.round(-distance / 2) + ' 26,4';\n            path.setAttribute('d', curve);\n            svg.style.display = '';\n        } catch(err) {\n            return;\n        }\n    });\n};\n\nHtmlFormatter.prototype.rootBegin = function(context, type, nodeType) {\n    var nodeClass = 'jsondiffpatch-' + type +\n        (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n    context.out('<div class=\"jsondiffpatch-delta ' + nodeClass + '\">');\n};\n\nHtmlFormatter.prototype.rootEnd = function(context) {\n    context.out('</div>' + (context.hasArrows ?\n        ('<script type=\"text/javascript\">setTimeout(' +\n            adjustArrows.toString() +\n            ',10);</script>') : ''));\n};\n\nHtmlFormatter.prototype.nodeBegin = function(context, key, leftKey, type, nodeType) {\n    var nodeClass = 'jsondiffpatch-' + type +\n        (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n    context.out('<li class=\"' + nodeClass + '\" data-key=\"' + leftKey + '\">' +\n        '<div class=\"jsondiffpatch-property-name\">' + leftKey + '</div>');\n};\n\n\nHtmlFormatter.prototype.nodeEnd = function(context) {\n    context.out('</li>');\n};\n\n/* jshint camelcase: false */\n\nHtmlFormatter.prototype.format_unchanged = function(context, delta, left) {\n    if (typeof left === 'undefined') { return; }\n    context.out('<div class=\"jsondiffpatch-value\">');\n    this.formatValue(context, left);\n    context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_movedestination = function(context, delta, left) {\n    if (typeof left === 'undefined') { return; }\n    context.out('<div class=\"jsondiffpatch-value\">');\n    this.formatValue(context, left);\n    context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_node = function(context, delta, left) {\n    // recurse\n    var nodeType = (delta._t === 'a') ? 'array': 'object';\n    context.out('<ul class=\"jsondiffpatch-node jsondiffpatch-node-type-' + nodeType + '\">');\n    this.formatDeltaChildren(context, delta, left);\n    context.out('</ul>');\n};\n\nHtmlFormatter.prototype.format_added = function(context, delta) {\n    context.out('<div class=\"jsondiffpatch-value\">');\n    this.formatValue(context, delta[0]);\n    context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_modified = function(context, delta) {\n    context.out('<div class=\"jsondiffpatch-value jsondiffpatch-left-value\">');\n    this.formatValue(context, delta[0]);\n    context.out('</div>' +\n        '<div class=\"jsondiffpatch-value jsondiffpatch-right-value\">');\n    this.formatValue(context, delta[1]);\n    context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_deleted = function(context, delta) {\n    context.out('<div class=\"jsondiffpatch-value\">');\n    this.formatValue(context, delta[0]);\n    context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_moved = function(context, delta) {\n    context.out('<div class=\"jsondiffpatch-value\">');\n    this.formatValue(context, delta[0]);\n    context.out('</div><div class=\"jsondiffpatch-moved-destination\">' + delta[1] + '</div>');\n\n    // draw an SVG arrow from here to move destination\n    context.out(\n        /*jshint multistr: true */\n        '<div class=\"jsondiffpatch-arrow\" style=\"position: relative; left: -34px;\">\\\n        <svg width=\"30\" height=\"60\" style=\"position: absolute; display: none;\">\\\n        <defs>\\\n            <marker id=\"markerArrow\" markerWidth=\"8\" markerHeight=\"8\" refx=\"2\" refy=\"4\"\\\n                   orient=\"auto\" markerUnits=\"userSpaceOnUse\">\\\n                <path d=\"M1,1 L1,7 L7,4 L1,1\" style=\"fill: #339;\" />\\\n            </marker>\\\n        </defs>\\\n        <path d=\"M30,0 Q-10,25 26,50\" style=\"stroke: #88f; stroke-width: 2px; fill: none;\\\n        stroke-opacity: 0.5; marker-end: url(#markerArrow);\"></path>\\\n        </svg>\\\n        </div>');\n    context.hasArrows = true;\n};\n\nHtmlFormatter.prototype.format_textdiff = function(context, delta) {\n    context.out('<div class=\"jsondiffpatch-value\">');\n    this.formatTextDiffString(context, delta[0]);\n    context.out('</div>');\n};\n\n/* jshint camelcase: true */\n\nvar showUnchanged = function(show, node, delay) {\n    var el = node || document.body;\n    var prefix = 'jsondiffpatch-unchanged-';\n    var classes = {\n        showing: prefix + 'showing',\n        hiding: prefix + 'hiding',\n        visible: prefix + 'visible',\n        hidden: prefix + 'hidden',\n    };\n    var list = el.classList;\n    if (!list) { return; }\n    if (!delay) {\n        list.remove(classes.showing);\n        list.remove(classes.hiding);\n        list.remove(classes.visible);\n        list.remove(classes.hidden);\n        if (show === false) {\n            list.add(classes.hidden);\n        }\n        return;\n    }\n    if (show === false) {\n        list.remove(classes.showing);\n        list.add(classes.visible);\n        setTimeout(function(){\n            list.add(classes.hiding);\n        }, 10);\n    } else {\n        list.remove(classes.hiding);\n        list.add(classes.showing);\n        list.remove(classes.hidden);\n    }\n    var intervalId = setInterval(function(){\n        adjustArrows(el);\n    }, 100);\n    setTimeout(function(){\n        list.remove(classes.showing);\n        list.remove(classes.hiding);\n        if (show === false) {\n            list.add(classes.hidden);\n            list.remove(classes.visible);\n        } else {\n            list.add(classes.visible);\n            list.remove(classes.hidden);\n        }\n        setTimeout(function(){\n            list.remove(classes.visible);\n            clearInterval(intervalId);\n        }, delay + 400);\n    }, delay);\n};\n\nvar hideUnchanged = function(node, delay) {\n    return showUnchanged(false, node, delay);\n};\n\nexports.HtmlFormatter = HtmlFormatter;\n\nexports.showUnchanged = showUnchanged;\n\nexports.hideUnchanged = hideUnchanged;\n\nvar defaultInstance;\n\nexports.format = function(delta, left) {\n    if (!defaultInstance) {\n        defaultInstance = new HtmlFormatter();\n    }\n    return defaultInstance.format(delta, left);\n};","\nvar base = require('./base');\nvar BaseFormatter = base.BaseFormatter;\n\nvar AnnotatedFormatter = function AnnotatedFormatter() {\n    this.includeMoveDestinations = false;\n};\n\nAnnotatedFormatter.prototype = new BaseFormatter();\n\nAnnotatedFormatter.prototype.prepareContext = function(context) {\n    BaseFormatter.prototype.prepareContext.call(this, context);\n    context.indent = function(levels) {\n        this.indentLevel = (this.indentLevel || 0) +\n            (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('&nbsp;&nbsp;');\n    };\n    context.row = function(json, htmlNote) {\n        context.out('<tr><td style=\"white-space: nowrap;\">' +\n            '<pre class=\"jsondiffpatch-annotated-indent\" style=\"display: inline-block\">');\n        context.out(context.indentPad);\n        context.out('</pre><pre style=\"display: inline-block\">');\n        context.out(json);\n        context.out('</pre></td><td class=\"jsondiffpatch-delta-note\"><div>');\n        context.out(htmlNote);\n        context.out('</div></td></tr>');\n    };\n};\n\nAnnotatedFormatter.prototype.typeFormattterErrorFormatter = function(context, err) {\n    context.row('','<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n};\n\nAnnotatedFormatter.prototype.formatTextDiffString = function(context, value) {\n    var lines = this.parseTextDiff(value);\n    context.out('<ul class=\"jsondiffpatch-textdiff\">');\n    for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li>' +\n        '<div class=\"jsondiffpatch-textdiff-location\">' +\n        '<span class=\"jsondiffpatch-textdiff-line-number\">' +\n        line.location.line +\n        '</span>' +\n        '<span class=\"jsondiffpatch-textdiff-char\">' +\n        line.location.chr +\n        '</span>' +\n        '</div>' +\n        '<div class=\"jsondiffpatch-textdiff-line\">');\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n            var piece = pieces[pieceIndex];\n            context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' +\n                piece.text + '</span>');\n        }\n        context.out('</div></li>');\n    }\n    context.out('</ul>');\n};\n\nAnnotatedFormatter.prototype.rootBegin = function(context, type, nodeType) {\n    context.out('<table class=\"jsondiffpatch-annotated-delta\">');\n    if (type ==='node') {\n        context.row('{');\n        context.indent();\n    }\n    if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n    }\n};\n\nAnnotatedFormatter.prototype.rootEnd = function(context, type) {\n    if (type ==='node') {\n        context.indent(-1);\n        context.row('}');\n    }\n    context.out('</table>');\n};\n\nAnnotatedFormatter.prototype.nodeBegin = function(context, key, leftKey, type, nodeType) {\n    context.row('&quot;'+key+'&quot;: {');\n    if (type === 'node') {\n        context.indent();\n    }\n    if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n    }\n};\n\nAnnotatedFormatter.prototype.nodeEnd = function(context, key, leftKey, type, nodeType, isLast) {\n    if (type ==='node') {\n        context.indent(-1);\n    }\n    context.row('}' + (isLast ? '' : ','));\n};\n\n/* jshint camelcase: false */\n\nAnnotatedFormatter.prototype.format_unchanged = function() {\n    return;\n};\n\nAnnotatedFormatter.prototype.format_movedestination = function() {\n    return;\n};\n\n\nAnnotatedFormatter.prototype.format_node = function(context, delta, left) {\n    // recurse\n    this.formatDeltaChildren(context, delta, left);\n};\n\nvar wrapPropertyName = function(name) {\n    return '<pre style=\"display:inline-block\">&quot;' + name + '&quot;</pre>';\n};\n\nvar deltaAnnotations = {\n    added: function(delta, left, key, leftKey) {\n        var formatLegend = ' <pre>([newValue])</pre>';\n        if (typeof leftKey === 'undefined') {\n            return 'new value' + formatLegend;\n        }\n        if (typeof leftKey === 'number') {\n            return 'insert at index ' + leftKey + formatLegend;\n        }\n        return 'add property ' + wrapPropertyName(leftKey) + formatLegend;\n    },\n    modified: function(delta, left, key, leftKey) {\n        var formatLegend = ' <pre>([previousValue, newValue])</pre>';\n        if (typeof leftKey === 'undefined') {\n            return 'modify value' + formatLegend;\n        }\n        if (typeof leftKey === 'number') {\n            return 'modify at index ' + leftKey + formatLegend;\n        }\n        return 'modify property ' + wrapPropertyName(leftKey) + formatLegend;\n    },\n    deleted: function(delta, left, key, leftKey) {\n        var formatLegend = ' <pre>([previousValue, 0, 0])</pre>';\n        if (typeof leftKey === 'undefined') {\n            return 'delete value' + formatLegend;\n        }\n        if (typeof leftKey === 'number') {\n            return 'remove index ' + leftKey + formatLegend;\n        }\n        return 'delete property ' + wrapPropertyName(leftKey) + formatLegend;\n    },\n    moved: function(delta, left, key, leftKey) {\n        return 'move from <span title=\"(position to remove at original state)\">index ' +\n            leftKey + '</span> to ' +\n            '<span title=\"(position to insert at final state)\">index ' +\n            delta[1] + '</span>';\n    },\n    textdiff: function(delta, left, key, leftKey) {\n        var location = (typeof leftKey === 'undefined') ?\n            '' : (\n                (typeof leftKey === 'number') ?\n                ' at index ' + leftKey :\n                ' at property ' + wrapPropertyName(leftKey)\n            );\n        return 'text diff' + location + ', format is ' +\n        '<a href=\"https://code.google.com/p/google-diff-match-patch/wiki/Unidiff\">' +\n        'a variation of Unidiff</a>';\n    }\n};\n\nvar formatAnyChange = function(context, delta) {\n    var deltaType = this.getDeltaType(delta);\n    var annotator = deltaAnnotations[deltaType];\n    var htmlNote = annotator && annotator.apply(annotator,\n        Array.prototype.slice.call(arguments, 1));\n    var json = JSON.stringify(delta, null, 2);\n    if (deltaType === 'textdiff') {\n        // split text diffs lines\n        json = json.split('\\\\n').join('\\\\n\"+\\n   \"');\n    }\n    context.indent();\n    context.row(json, htmlNote);\n    context.indent(-1);\n};\n\nAnnotatedFormatter.prototype.format_added = formatAnyChange;\nAnnotatedFormatter.prototype.format_modified = formatAnyChange;\nAnnotatedFormatter.prototype.format_deleted = formatAnyChange;\nAnnotatedFormatter.prototype.format_moved = formatAnyChange;\nAnnotatedFormatter.prototype.format_textdiff = formatAnyChange;\n\n/* jshint camelcase: true */\n\nexports.AnnotatedFormatter = AnnotatedFormatter;\n\nvar defaultInstance;\n\nexports.format = function(delta, left) {\n    if (!defaultInstance) {\n        defaultInstance = new AnnotatedFormatter();\n    }\n    return defaultInstance.format(delta, left);\n};","// shim for using process in browser\n\nvar process = module.exports = {};\n\nprocess.nextTick = (function () {\n    var canSetImmediate = typeof window !== 'undefined'\n    && window.setImmediate;\n    var canPost = typeof window !== 'undefined'\n    && window.postMessage && window.addEventListener\n    ;\n\n    if (canSetImmediate) {\n        return function (f) { return window.setImmediate(f) };\n    }\n\n    if (canPost) {\n        var queue = [];\n        window.addEventListener('message', function (ev) {\n            var source = ev.source;\n            if ((source === window || source === null) && ev.data === 'process-tick') {\n                ev.stopPropagation();\n                if (queue.length > 0) {\n                    var fn = queue.shift();\n                    fn();\n                }\n            }\n        }, true);\n\n        return function nextTick(fn) {\n            queue.push(fn);\n            window.postMessage('process-tick', '*');\n        };\n    }\n\n    return function nextTick(fn) {\n        setTimeout(fn, 0);\n    };\n})();\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n}\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\n","\nvar isArray = (typeof Array.isArray === 'function') ?\n    // use native function\n    Array.isArray :\n    // use instanceof operator\n    function(a) {\n        return a instanceof Array;\n    };\n\nvar getObjectKeys = typeof Object.keys === 'function' ?\n    function(obj) {\n        return Object.keys(obj);\n    } : function(obj) {\n        var names = [];\n        for (var property in obj) {\n            if (obj.hasOwnProperty(property)) {\n                names.push(property);\n            }\n        }\n        return names;\n    };\n\nvar trimUnderscore = function(str) {\n    if (str.substr(0, 1) === '_') {\n        return str.slice(1);\n    }\n    return str;\n};\n\nvar arrayKeyToSortNumber = function(key) {\n    if (key === '_t') {\n        return -1;\n    } else {\n        if (key.substr(0, 1) === '_') {\n            return parseInt(key.slice(1), 10);\n        } else {\n            return parseInt(key, 10) + 0.1;\n        }\n    }\n};\n\nvar arrayKeyComparer = function(key1, key2) {\n    return arrayKeyToSortNumber(key1) - arrayKeyToSortNumber(key2);\n};\n\nvar BaseFormatter = function BaseFormatter() {\n};\n\nBaseFormatter.prototype.format = function(delta, left) {\n    var context = {};\n    this.prepareContext(context);\n    this.recurse(context, delta, left);\n    return this.finalize(context);\n};\n\nBaseFormatter.prototype.prepareContext = function(context) {\n    context.buffer = [];\n    context.out = function() {\n        this.buffer.push.apply(this.buffer, arguments);\n    };\n};\n\nBaseFormatter.prototype.typeFormattterNotFound = function(context, deltaType) {\n    throw new Error('cannot format delta type: ' + deltaType);\n};\n\nBaseFormatter.prototype.typeFormattterErrorFormatter = function(context, err) {\n    return err.toString();\n};\n\nBaseFormatter.prototype.finalize = function(context) {\n    if (isArray(context.buffer)) {\n        return context.buffer.join('');\n    }\n};\n\nBaseFormatter.prototype.recurse = function(context, delta, left, key, leftKey, movedFrom, isLast) {\n    if (typeof delta === 'undefined' && typeof key === 'undefined') {\n        return undefined;\n    }\n    var type = this.getDeltaType(delta, movedFrom);\n    var nodeType = type === 'node' ? (delta._t === 'a' ? 'array' : 'object') : '';\n\n    if (typeof key !== 'undefined') {\n        this.nodeBegin(context, key, leftKey, type, nodeType, isLast);\n    } else {\n        this.rootBegin(context, type, nodeType);\n    }\n\n    var typeFormattter;\n    try {\n        typeFormattter = this['format_' + type] || this.typeFormattterNotFound(context, type);\n        typeFormattter.call(this, context, delta, left, key, leftKey, movedFrom);\n    } catch (err) {\n        this.typeFormattterErrorFormatter(context, err, delta, left, key, leftKey, movedFrom);\n        if (typeof console !== 'undefined' && console.error) {\n            console.error(err.stack);\n        }\n    }\n\n    if (typeof key !== 'undefined') {\n        this.nodeEnd(context, key, leftKey, type, nodeType, isLast);\n    } else {\n        this.rootEnd(context, type, nodeType);\n    }\n};\n\nBaseFormatter.prototype.formatDeltaChildren = function(context, delta, left) {\n    var self = this;\n    this.forEachDeltaKey(delta, left, function(key, leftKey, movedFrom, isLast) {\n        self.recurse(context, delta[key], left ? left[leftKey] : undefined,\n            key, leftKey, movedFrom, isLast);\n    });\n};\n\nBaseFormatter.prototype.forEachDeltaKey = function(delta, left, fn) {\n    var keys = getObjectKeys(delta);\n    var arrayKeys = delta._t === 'a';\n    var moveDestinations = {};\n    var name;\n    if (typeof left !== 'undefined') {\n        for (name in left) {\n            if (typeof delta[name] === 'undefined' &&\n                ((!arrayKeys) || typeof delta['_' + name] === 'undefined')) {\n                keys.push(name);\n            }\n        }\n    }\n    // look for move destinations\n    for (name in delta) {\n        var value = delta[name];\n        if (isArray(value) && value[2] === 3) {\n            moveDestinations[value[1].toString()] = value[0];\n            if (this.includeMoveDestinations !== false) {\n                if ((typeof left === 'undefined') &&\n                    (typeof delta[value[1]] === 'undefined')) {\n                    keys.push(value[1].toString());\n                }\n            }\n        }\n    }\n    if (arrayKeys) {\n        keys.sort(arrayKeyComparer);\n    } else {\n        keys.sort();\n    }\n    for (var index = 0, length = keys.length; index < length; index++) {\n        var key = keys[index];\n        if (arrayKeys && key === '_t') { continue; }\n        var leftKey = arrayKeys ?\n            (typeof key === 'number' ? key : parseInt(trimUnderscore(key), 10)) :\n            key;\n        var isLast = (index === length - 1);\n        fn(key, leftKey, moveDestinations[leftKey], isLast);\n    }\n};\n\nBaseFormatter.prototype.getDeltaType = function(delta, movedFrom) {\n    if (typeof delta === 'undefined') {\n        if (typeof movedFrom !== 'undefined') {\n            return 'movedestination';\n        }\n        return 'unchanged';\n    }\n    if (isArray(delta)) {\n        if (delta.length === 1) { return 'added'; }\n        if (delta.length === 2) { return 'modified'; }\n        if (delta.length === 3 && delta[2] === 0) { return 'deleted'; }\n        if (delta.length === 3 && delta[2] === 2) { return 'textdiff'; }\n        if (delta.length === 3 && delta[2] === 3) { return 'moved'; }\n    } else if (typeof delta === 'object') {\n        return 'node';\n    }\n    return 'unknown';\n};\n\nBaseFormatter.prototype.parseTextDiff = function(value) {\n    var output = [];\n    var lines = value.split('\\n@@ ');\n    for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        var lineOutput = {\n            pieces: []\n        };\n        var location = /^(?:@@ )?[-+]?(\\d+),(\\d+)/.exec(line).slice(1);\n        lineOutput.location = {\n            line: location[0],\n            chr: location[1]\n        };\n        var pieces = line.split('\\n').slice(1);\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n            var piece = pieces[pieceIndex];\n            if (!piece.length) { continue; }\n            var pieceOutput = { type: 'context' };\n            if (piece.substr(0, 1) === '+') {\n                pieceOutput.type = 'added';\n            } else if (piece.substr(0, 1) === '-') {\n                pieceOutput.type = 'deleted';\n            }\n            pieceOutput.text = piece.slice(1);\n            lineOutput.pieces.push(pieceOutput);\n        }\n        output.push(lineOutput);\n    }\n    return output;\n};\n\nexports.BaseFormatter = BaseFormatter;\n\n\n"]}