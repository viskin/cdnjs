{"version":3,"file":"bundle.js","sources":["/source-files/jsondiffpatch/node_modules/fiberglass/node_modules/browserify/node_modules/browser-pack/_prelude.js","/source-files/jsondiffpatch/src/main-formatters.js","/source-files/jsondiffpatch/src/formatters/index.js","/source-files/jsondiffpatch/src/formatters/annotated.js","/source-files/jsondiffpatch/src/formatters/html.js","/source-files/jsondiffpatch/node_modules/fiberglass/node_modules/browserify/node_modules/process/browser.js","/source-files/jsondiffpatch/src/formatters/base.js"],"names":["process","exports","html","require","annotated","browser","consoleModuleName","console","call","this","base","BaseFormatter","AnnotatedFormatter","includeMoveDestinations","prototype","prepareContext","context","indent","levels","indentLevel","indentPad","Array","join","row","json","htmlNote","out","typeFormattterErrorFormatter","err","formatTextDiffString","value","lines","parseTextDiff","i","l","length","line","location","chr","pieces","pieceIndex","piecesLength","piece","type","text","rootBegin","nodeType","rootEnd","nodeBegin","key","leftKey","nodeEnd","isLast","format_unchanged","format_movedestination","format_node","delta","left","formatDeltaChildren","wrapPropertyName","name","deltaAnnotations","added","formatLegend","modified","deleted","moved","textdiff","formatAnyChange","deltaType","getDeltaType","annotator","apply","slice","arguments","JSON","stringify","split","format_added","format_modified","format_deleted","format_moved","format_textdiff","defaultInstance","format","HtmlFormatter","formatValue","adjustArrows","node","document","getElementText","el","textContent","innerText","eachByQuery","query","fn","elems","querySelectorAll","eachChildren","children","arrow","arrowParent","parentNode","svg","path","style","display","destinationElem","destination","querySelector","container","child","getAttribute","distance","offsetTop","setAttribute","Math","abs","top","curve","round","nodeClass","hasArrows","toString","_t","showUnchanged","show","delay","body","prefix","classes","showing","hiding","visible","hidden","list","classList","remove","add","setTimeout","intervalId","setInterval","clearInterval","hideUnchanged","noop","module","nextTick","canSetImmediate","window","setImmediate","canPost","postMessage","addEventListener","f","queue","ev","source","data","stopPropagation","shift","push","title","env","argv","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","Error","cwd","chdir","isArray","a","getObjectKeys","Object","keys","obj","names","property","hasOwnProperty","trimUnderscore","str","substr","arrayKeyToSortNumber","parseInt","arrayKeyComparer","key1","key2","recurse","finalize","buffer","typeFormattterNotFound","movedFrom","useMoveOriginHere","leftValue","undefined","typeFormattter","error","stack","self","forEachDeltaKey","arrayKeys","moveDestinations","sort","index","output","lineOutput","exec","pieceOutput"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports=require(\"./formatters\");","(function (process){\n\nexports.html = require('./html');\nexports.annotated = require('./annotated');\n\nif (!process.browser) {\n\tvar consoleModuleName = './console';\n\texports.console = require(consoleModuleName);\n}\n\n}).call(this,require('_process'))","var base = require('./base');\nvar BaseFormatter = base.BaseFormatter;\n\nvar AnnotatedFormatter = function AnnotatedFormatter() {\n  this.includeMoveDestinations = false;\n};\n\nAnnotatedFormatter.prototype = new BaseFormatter();\n\nAnnotatedFormatter.prototype.prepareContext = function(context) {\n  BaseFormatter.prototype.prepareContext.call(this, context);\n  context.indent = function(levels) {\n    this.indentLevel = (this.indentLevel || 0) +\n      (typeof levels === 'undefined' ? 1 : levels);\n    this.indentPad = new Array(this.indentLevel + 1).join('&nbsp;&nbsp;');\n  };\n  context.row = function(json, htmlNote) {\n    context.out('<tr><td style=\"white-space: nowrap;\">' +\n      '<pre class=\"jsondiffpatch-annotated-indent\" style=\"display: inline-block\">');\n    context.out(context.indentPad);\n    context.out('</pre><pre style=\"display: inline-block\">');\n    context.out(json);\n    context.out('</pre></td><td class=\"jsondiffpatch-delta-note\"><div>');\n    context.out(htmlNote);\n    context.out('</div></td></tr>');\n  };\n};\n\nAnnotatedFormatter.prototype.typeFormattterErrorFormatter = function(context, err) {\n  context.row('', '<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n};\n\nAnnotatedFormatter.prototype.formatTextDiffString = function(context, value) {\n  var lines = this.parseTextDiff(value);\n  context.out('<ul class=\"jsondiffpatch-textdiff\">');\n  for (var i = 0, l = lines.length; i < l; i++) {\n    var line = lines[i];\n    context.out('<li>' +\n      '<div class=\"jsondiffpatch-textdiff-location\">' +\n      '<span class=\"jsondiffpatch-textdiff-line-number\">' +\n      line.location.line +\n      '</span>' +\n      '<span class=\"jsondiffpatch-textdiff-char\">' +\n      line.location.chr +\n      '</span>' +\n      '</div>' +\n      '<div class=\"jsondiffpatch-textdiff-line\">');\n    var pieces = line.pieces;\n    for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n      var piece = pieces[pieceIndex];\n      context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' +\n        piece.text + '</span>');\n    }\n    context.out('</div></li>');\n  }\n  context.out('</ul>');\n};\n\nAnnotatedFormatter.prototype.rootBegin = function(context, type, nodeType) {\n  context.out('<table class=\"jsondiffpatch-annotated-delta\">');\n  if (type === 'node') {\n    context.row('{');\n    context.indent();\n  }\n  if (nodeType === 'array') {\n    context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n  }\n};\n\nAnnotatedFormatter.prototype.rootEnd = function(context, type) {\n  if (type === 'node') {\n    context.indent(-1);\n    context.row('}');\n  }\n  context.out('</table>');\n};\n\nAnnotatedFormatter.prototype.nodeBegin = function(context, key, leftKey, type, nodeType) {\n  context.row('&quot;' + key + '&quot;: {');\n  if (type === 'node') {\n    context.indent();\n  }\n  if (nodeType === 'array') {\n    context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n  }\n};\n\nAnnotatedFormatter.prototype.nodeEnd = function(context, key, leftKey, type, nodeType, isLast) {\n  if (type === 'node') {\n    context.indent(-1);\n  }\n  context.row('}' + (isLast ? '' : ','));\n};\n\n/* jshint camelcase: false */\n\nAnnotatedFormatter.prototype.format_unchanged = function() {\n  return;\n};\n\nAnnotatedFormatter.prototype.format_movedestination = function() {\n  return;\n};\n\n\nAnnotatedFormatter.prototype.format_node = function(context, delta, left) {\n  // recurse\n  this.formatDeltaChildren(context, delta, left);\n};\n\nvar wrapPropertyName = function(name) {\n  return '<pre style=\"display:inline-block\">&quot;' + name + '&quot;</pre>';\n};\n\nvar deltaAnnotations = {\n  added: function(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'new value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'insert at index ' + leftKey + formatLegend;\n    }\n    return 'add property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  modified: function(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'modify value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'modify at index ' + leftKey + formatLegend;\n    }\n    return 'modify property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  deleted: function(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, 0, 0])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'delete value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'remove index ' + leftKey + formatLegend;\n    }\n    return 'delete property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  moved: function(delta, left, key, leftKey) {\n    return 'move from <span title=\"(position to remove at original state)\">index ' +\n      leftKey + '</span> to ' +\n      '<span title=\"(position to insert at final state)\">index ' +\n      delta[1] + '</span>';\n  },\n  textdiff: function(delta, left, key, leftKey) {\n    var location = (typeof leftKey === 'undefined') ?\n      '' : (\n        (typeof leftKey === 'number') ?\n        ' at index ' + leftKey :\n        ' at property ' + wrapPropertyName(leftKey)\n      );\n    return 'text diff' + location + ', format is ' +\n      '<a href=\"https://code.google.com/p/google-diff-match-patch/wiki/Unidiff\">' +\n      'a variation of Unidiff</a>';\n  }\n};\n\nvar formatAnyChange = function(context, delta) {\n  var deltaType = this.getDeltaType(delta);\n  var annotator = deltaAnnotations[deltaType];\n  var htmlNote = annotator && annotator.apply(annotator,\n    Array.prototype.slice.call(arguments, 1));\n  var json = JSON.stringify(delta, null, 2);\n  if (deltaType === 'textdiff') {\n    // split text diffs lines\n    json = json.split('\\\\n').join('\\\\n\"+\\n   \"');\n  }\n  context.indent();\n  context.row(json, htmlNote);\n  context.indent(-1);\n};\n\nAnnotatedFormatter.prototype.format_added = formatAnyChange;\nAnnotatedFormatter.prototype.format_modified = formatAnyChange;\nAnnotatedFormatter.prototype.format_deleted = formatAnyChange;\nAnnotatedFormatter.prototype.format_moved = formatAnyChange;\nAnnotatedFormatter.prototype.format_textdiff = formatAnyChange;\n\n/* jshint camelcase: true */\n\nexports.AnnotatedFormatter = AnnotatedFormatter;\n\nvar defaultInstance;\n\nexports.format = function(delta, left) {\n  if (!defaultInstance) {\n    defaultInstance = new AnnotatedFormatter();\n  }\n  return defaultInstance.format(delta, left);\n};\n","var base = require('./base');\nvar BaseFormatter = base.BaseFormatter;\n\nvar HtmlFormatter = function HtmlFormatter() {};\n\nHtmlFormatter.prototype = new BaseFormatter();\n\nHtmlFormatter.prototype.typeFormattterErrorFormatter = function(context, err) {\n  context.out('<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n};\n\nHtmlFormatter.prototype.formatValue = function(context, value) {\n  context.out('<pre>' + JSON.stringify(value, null, 2) + '</pre>');\n};\n\nHtmlFormatter.prototype.formatTextDiffString = function(context, value) {\n  var lines = this.parseTextDiff(value);\n  context.out('<ul class=\"jsondiffpatch-textdiff\">');\n  for (var i = 0, l = lines.length; i < l; i++) {\n    var line = lines[i];\n    context.out('<li>' +\n      '<div class=\"jsondiffpatch-textdiff-location\">' +\n      '<span class=\"jsondiffpatch-textdiff-line-number\">' +\n      line.location.line +\n      '</span>' +\n      '<span class=\"jsondiffpatch-textdiff-char\">' +\n      line.location.chr +\n      '</span>' +\n      '</div>' +\n      '<div class=\"jsondiffpatch-textdiff-line\">');\n    var pieces = line.pieces;\n    for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n      var piece = pieces[pieceIndex];\n      context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' +\n        piece.text + '</span>');\n    }\n    context.out('</div></li>');\n  }\n  context.out('</ul>');\n};\n\nvar adjustArrows = function jsondiffpatchHtmlFormatterAdjustArrows(node) {\n  node = node || document;\n  var getElementText = function(el) {\n    return el.textContent || el.innerText;\n  };\n  var eachByQuery = function(el, query, fn) {\n    var elems = el.querySelectorAll(query);\n    for (var i = 0, l = elems.length; i < l; i++) {\n      fn(elems[i]);\n    }\n  };\n  var eachChildren = function(el, fn) {\n    for (var i = 0, l = el.children.length; i < l; i++) {\n      fn(el.children[i], i);\n    }\n  };\n  eachByQuery(node, '.jsondiffpatch-arrow', function(arrow) {\n    var arrowParent = arrow.parentNode;\n    var svg = arrow.children[0],\n      path = svg.children[1];\n    svg.style.display = 'none';\n    var destination = getElementText(arrowParent.querySelector('.jsondiffpatch-moved-destination'));\n    var container = arrowParent.parentNode;\n    var destinationElem;\n    eachChildren(container, function(child) {\n      if (child.getAttribute('data-key') === destination) {\n        destinationElem = child;\n      }\n    });\n    if (!destinationElem) {\n      return;\n    }\n    try {\n      var distance = destinationElem.offsetTop - arrowParent.offsetTop;\n      svg.setAttribute('height', Math.abs(distance) + 6);\n      arrow.style.top = (-8 + (distance > 0 ? 0 : distance)) + 'px';\n      var curve = distance > 0 ?\n        'M30,0 Q-10,' + Math.round(distance / 2) + ' 26,' + (distance - 4) :\n        'M30,' + (-distance) + ' Q-10,' + Math.round(-distance / 2) + ' 26,4';\n      path.setAttribute('d', curve);\n      svg.style.display = '';\n    } catch (err) {\n      return;\n    }\n  });\n};\n\nHtmlFormatter.prototype.rootBegin = function(context, type, nodeType) {\n  var nodeClass = 'jsondiffpatch-' + type +\n    (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n  context.out('<div class=\"jsondiffpatch-delta ' + nodeClass + '\">');\n};\n\nHtmlFormatter.prototype.rootEnd = function(context) {\n  context.out('</div>' + (context.hasArrows ?\n    ('<script type=\"text/javascript\">setTimeout(' +\n      adjustArrows.toString() +\n      ',10);</script>') : ''));\n};\n\nHtmlFormatter.prototype.nodeBegin = function(context, key, leftKey, type, nodeType) {\n  var nodeClass = 'jsondiffpatch-' + type +\n    (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n  context.out('<li class=\"' + nodeClass + '\" data-key=\"' + leftKey + '\">' +\n    '<div class=\"jsondiffpatch-property-name\">' + leftKey + '</div>');\n};\n\n\nHtmlFormatter.prototype.nodeEnd = function(context) {\n  context.out('</li>');\n};\n\n/* jshint camelcase: false */\n\nHtmlFormatter.prototype.format_unchanged = function(context, delta, left) {\n  if (typeof left === 'undefined') {\n    return;\n  }\n  context.out('<div class=\"jsondiffpatch-value\">');\n  this.formatValue(context, left);\n  context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_movedestination = function(context, delta, left) {\n  if (typeof left === 'undefined') {\n    return;\n  }\n  context.out('<div class=\"jsondiffpatch-value\">');\n  this.formatValue(context, left);\n  context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_node = function(context, delta, left) {\n  // recurse\n  var nodeType = (delta._t === 'a') ? 'array' : 'object';\n  context.out('<ul class=\"jsondiffpatch-node jsondiffpatch-node-type-' + nodeType + '\">');\n  this.formatDeltaChildren(context, delta, left);\n  context.out('</ul>');\n};\n\nHtmlFormatter.prototype.format_added = function(context, delta) {\n  context.out('<div class=\"jsondiffpatch-value\">');\n  this.formatValue(context, delta[0]);\n  context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_modified = function(context, delta) {\n  context.out('<div class=\"jsondiffpatch-value jsondiffpatch-left-value\">');\n  this.formatValue(context, delta[0]);\n  context.out('</div>' +\n    '<div class=\"jsondiffpatch-value jsondiffpatch-right-value\">');\n  this.formatValue(context, delta[1]);\n  context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_deleted = function(context, delta) {\n  context.out('<div class=\"jsondiffpatch-value\">');\n  this.formatValue(context, delta[0]);\n  context.out('</div>');\n};\n\nHtmlFormatter.prototype.format_moved = function(context, delta) {\n  context.out('<div class=\"jsondiffpatch-value\">');\n  this.formatValue(context, delta[0]);\n  context.out('</div><div class=\"jsondiffpatch-moved-destination\">' + delta[1] + '</div>');\n\n  // draw an SVG arrow from here to move destination\n  context.out(\n    /*jshint multistr: true */\n    '<div class=\"jsondiffpatch-arrow\" style=\"position: relative; left: -34px;\">\\\n        <svg width=\"30\" height=\"60\" style=\"position: absolute; display: none;\">\\\n        <defs>\\\n            <marker id=\"markerArrow\" markerWidth=\"8\" markerHeight=\"8\" refx=\"2\" refy=\"4\"\\\n                   orient=\"auto\" markerUnits=\"userSpaceOnUse\">\\\n                <path d=\"M1,1 L1,7 L7,4 L1,1\" style=\"fill: #339;\" />\\\n            </marker>\\\n        </defs>\\\n        <path d=\"M30,0 Q-10,25 26,50\" style=\"stroke: #88f; stroke-width: 2px; fill: none;\\\n        stroke-opacity: 0.5; marker-end: url(#markerArrow);\"></path>\\\n        </svg>\\\n        </div>');\n  context.hasArrows = true;\n};\n\nHtmlFormatter.prototype.format_textdiff = function(context, delta) {\n  context.out('<div class=\"jsondiffpatch-value\">');\n  this.formatTextDiffString(context, delta[0]);\n  context.out('</div>');\n};\n\n/* jshint camelcase: true */\n\nvar showUnchanged = function(show, node, delay) {\n  var el = node || document.body;\n  var prefix = 'jsondiffpatch-unchanged-';\n  var classes = {\n    showing: prefix + 'showing',\n    hiding: prefix + 'hiding',\n    visible: prefix + 'visible',\n    hidden: prefix + 'hidden',\n  };\n  var list = el.classList;\n  if (!list) {\n    return;\n  }\n  if (!delay) {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    list.remove(classes.visible);\n    list.remove(classes.hidden);\n    if (show === false) {\n      list.add(classes.hidden);\n    }\n    return;\n  }\n  if (show === false) {\n    list.remove(classes.showing);\n    list.add(classes.visible);\n    setTimeout(function() {\n      list.add(classes.hiding);\n    }, 10);\n  } else {\n    list.remove(classes.hiding);\n    list.add(classes.showing);\n    list.remove(classes.hidden);\n  }\n  var intervalId = setInterval(function() {\n    adjustArrows(el);\n  }, 100);\n  setTimeout(function() {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    if (show === false) {\n      list.add(classes.hidden);\n      list.remove(classes.visible);\n    } else {\n      list.add(classes.visible);\n      list.remove(classes.hidden);\n    }\n    setTimeout(function() {\n      list.remove(classes.visible);\n      clearInterval(intervalId);\n    }, delay + 400);\n  }, delay);\n};\n\nvar hideUnchanged = function(node, delay) {\n  return showUnchanged(false, node, delay);\n};\n\nexports.HtmlFormatter = HtmlFormatter;\n\nexports.showUnchanged = showUnchanged;\n\nexports.hideUnchanged = hideUnchanged;\n\nvar defaultInstance;\n\nexports.format = function(delta, left) {\n  if (!defaultInstance) {\n    defaultInstance = new HtmlFormatter();\n  }\n  return defaultInstance.format(delta, left);\n};\n","// shim for using process in browser\n\nvar process = module.exports = {};\n\nprocess.nextTick = (function () {\n    var canSetImmediate = typeof window !== 'undefined'\n    && window.setImmediate;\n    var canPost = typeof window !== 'undefined'\n    && window.postMessage && window.addEventListener\n    ;\n\n    if (canSetImmediate) {\n        return function (f) { return window.setImmediate(f) };\n    }\n\n    if (canPost) {\n        var queue = [];\n        window.addEventListener('message', function (ev) {\n            var source = ev.source;\n            if ((source === window || source === null) && ev.data === 'process-tick') {\n                ev.stopPropagation();\n                if (queue.length > 0) {\n                    var fn = queue.shift();\n                    fn();\n                }\n            }\n        }, true);\n\n        return function nextTick(fn) {\n            queue.push(fn);\n            window.postMessage('process-tick', '*');\n        };\n    }\n\n    return function nextTick(fn) {\n        setTimeout(fn, 0);\n    };\n})();\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n}\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\n","var isArray = (typeof Array.isArray === 'function') ?\n  // use native function\n  Array.isArray :\n  // use instanceof operator\n  function(a) {\n    return a instanceof Array;\n  };\n\nvar getObjectKeys = typeof Object.keys === 'function' ?\n  function(obj) {\n    return Object.keys(obj);\n  } : function(obj) {\n    var names = [];\n    for (var property in obj) {\n      if (obj.hasOwnProperty(property)) {\n        names.push(property);\n      }\n    }\n    return names;\n  };\n\nvar trimUnderscore = function(str) {\n  if (str.substr(0, 1) === '_') {\n    return str.slice(1);\n  }\n  return str;\n};\n\nvar arrayKeyToSortNumber = function(key) {\n  if (key === '_t') {\n    return -1;\n  } else {\n    if (key.substr(0, 1) === '_') {\n      return parseInt(key.slice(1), 10);\n    } else {\n      return parseInt(key, 10) + 0.1;\n    }\n  }\n};\n\nvar arrayKeyComparer = function(key1, key2) {\n  return arrayKeyToSortNumber(key1) - arrayKeyToSortNumber(key2);\n};\n\nvar BaseFormatter = function BaseFormatter() {};\n\nBaseFormatter.prototype.format = function(delta, left) {\n  var context = {};\n  this.prepareContext(context);\n  this.recurse(context, delta, left);\n  return this.finalize(context);\n};\n\nBaseFormatter.prototype.prepareContext = function(context) {\n  context.buffer = [];\n  context.out = function() {\n    this.buffer.push.apply(this.buffer, arguments);\n  };\n};\n\nBaseFormatter.prototype.typeFormattterNotFound = function(context, deltaType) {\n  throw new Error('cannot format delta type: ' + deltaType);\n};\n\nBaseFormatter.prototype.typeFormattterErrorFormatter = function(context, err) {\n  return err.toString();\n};\n\nBaseFormatter.prototype.finalize = function(context) {\n  if (isArray(context.buffer)) {\n    return context.buffer.join('');\n  }\n};\n\nBaseFormatter.prototype.recurse = function(context, delta, left, key, leftKey, movedFrom, isLast) {\n\n  var useMoveOriginHere = delta && movedFrom;\n  var leftValue = useMoveOriginHere ? movedFrom.value : left;\n\n  if (typeof delta === 'undefined' && typeof key === 'undefined') {\n    return undefined;\n  }\n\n  var type = this.getDeltaType(delta, movedFrom);\n  var nodeType = type === 'node' ? (delta._t === 'a' ? 'array' : 'object') : '';\n\n  if (typeof key !== 'undefined') {\n    this.nodeBegin(context, key, leftKey, type, nodeType, isLast);\n  } else {\n    this.rootBegin(context, type, nodeType);\n  }\n\n  var typeFormattter;\n  try {\n    typeFormattter = this['format_' + type] || this.typeFormattterNotFound(context, type);\n    typeFormattter.call(this, context, delta, leftValue, key, leftKey, movedFrom);\n  } catch (err) {\n    this.typeFormattterErrorFormatter(context, err, delta, leftValue, key, leftKey, movedFrom);\n    if (typeof console !== 'undefined' && console.error) {\n      console.error(err.stack);\n    }\n  }\n\n  if (typeof key !== 'undefined') {\n    this.nodeEnd(context, key, leftKey, type, nodeType, isLast);\n  } else {\n    this.rootEnd(context, type, nodeType);\n  }\n};\n\nBaseFormatter.prototype.formatDeltaChildren = function(context, delta, left) {\n  var self = this;\n  this.forEachDeltaKey(delta, left, function(key, leftKey, movedFrom, isLast) {\n    self.recurse(context, delta[key], left ? left[leftKey] : undefined,\n      key, leftKey, movedFrom, isLast);\n  });\n};\n\nBaseFormatter.prototype.forEachDeltaKey = function(delta, left, fn) {\n  var keys = getObjectKeys(delta);\n  var arrayKeys = delta._t === 'a';\n  var moveDestinations = {};\n  var name;\n  if (typeof left !== 'undefined') {\n    for (name in left) {\n      if (typeof delta[name] === 'undefined' &&\n        ((!arrayKeys) || typeof delta['_' + name] === 'undefined')) {\n        keys.push(name);\n      }\n    }\n  }\n  // look for move destinations\n  for (name in delta) {\n    var value = delta[name];\n    if (isArray(value) && value[2] === 3) {\n      moveDestinations[value[1].toString()] = {\n        key: name,\n        value: left[parseInt(name.substr(1))]\n      };\n      if (this.includeMoveDestinations !== false) {\n        if ((typeof left === 'undefined') &&\n          (typeof delta[value[1]] === 'undefined')) {\n          keys.push(value[1].toString());\n        }\n      }\n    }\n  }\n  if (arrayKeys) {\n    keys.sort(arrayKeyComparer);\n  } else {\n    keys.sort();\n  }\n  for (var index = 0, length = keys.length; index < length; index++) {\n    var key = keys[index];\n    if (arrayKeys && key === '_t') {\n      continue;\n    }\n    var leftKey = arrayKeys ?\n      (typeof key === 'number' ? key : parseInt(trimUnderscore(key), 10)) :\n      key;\n    var isLast = (index === length - 1);\n    fn(key, leftKey, moveDestinations[leftKey], isLast);\n  }\n};\n\nBaseFormatter.prototype.getDeltaType = function(delta, movedFrom) {\n  if (typeof delta === 'undefined') {\n    if (typeof movedFrom !== 'undefined') {\n      return 'movedestination';\n    }\n    return 'unchanged';\n  }\n  if (isArray(delta)) {\n    if (delta.length === 1) {\n      return 'added';\n    }\n    if (delta.length === 2) {\n      return 'modified';\n    }\n    if (delta.length === 3 && delta[2] === 0) {\n      return 'deleted';\n    }\n    if (delta.length === 3 && delta[2] === 2) {\n      return 'textdiff';\n    }\n    if (delta.length === 3 && delta[2] === 3) {\n      return 'moved';\n    }\n  } else if (typeof delta === 'object') {\n    return 'node';\n  }\n  return 'unknown';\n};\n\nBaseFormatter.prototype.parseTextDiff = function(value) {\n  var output = [];\n  var lines = value.split('\\n@@ ');\n  for (var i = 0, l = lines.length; i < l; i++) {\n    var line = lines[i];\n    var lineOutput = {\n      pieces: []\n    };\n    var location = /^(?:@@ )?[-+]?(\\d+),(\\d+)/.exec(line).slice(1);\n    lineOutput.location = {\n      line: location[0],\n      chr: location[1]\n    };\n    var pieces = line.split('\\n').slice(1);\n    for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n      var piece = pieces[pieceIndex];\n      if (!piece.length) {\n        continue;\n      }\n      var pieceOutput = {\n        type: 'context'\n      };\n      if (piece.substr(0, 1) === '+') {\n        pieceOutput.type = 'added';\n      } else if (piece.substr(0, 1) === '-') {\n        pieceOutput.type = 'deleted';\n      }\n      pieceOutput.text = piece.slice(1);\n      lineOutput.pieces.push(pieceOutput);\n    }\n    output.push(lineOutput);\n  }\n  return output;\n};\n\nexports.BaseFormatter = BaseFormatter;\n"]}