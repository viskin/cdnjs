!function(e,s){"use strict";var t=e.tablesorter=e.tablesorter||{};e.extend(t.css,{sticky:"tablesorter-stickyHeader",stickyVis:"tablesorter-sticky-visible",stickyHide:"tablesorter-sticky-hidden",stickyWrap:"tablesorter-sticky-wrapper"}),t.addHeaderResizeEvent=function(s,t,i){s=e(s)[0];var r,a={timer:250},d=e.extend({},a,i),l=s.config,c=l.widgetOptions,n=function(s){c.resize_flag=!0,r=[],l.$headers.each(function(){var s=e(this),t=s.data("savedSizes")||[0,0],i=this.offsetWidth,a=this.offsetHeight;(i!==t[0]||a!==t[1])&&(s.data("savedSizes",[i,a]),r.push(this))}),r.length&&s!==!1&&l.$table.trigger("resize",[r]),c.resize_flag=!1};return n(!1),clearInterval(c.resize_timer),t?(c.resize_flag=!1,!1):void(c.resize_timer=setInterval(function(){c.resize_flag||n()},d.timer))},t.addWidget({id:"stickyHeaders",priority:60,options:{stickyHeaders:"",stickyHeaders_attachTo:null,stickyHeaders_xScroll:null,stickyHeaders_yScroll:null,stickyHeaders_offset:0,stickyHeaders_filteredToTop:!0,stickyHeaders_cloneId:"-sticky",stickyHeaders_addResizeEvent:!0,stickyHeaders_includeCaption:!0,stickyHeaders_zIndex:2},format:function(i,r,a){if(!(r.$table.hasClass("hasStickyHeaders")||e.inArray("filter",r.widgets)>=0&&!r.$table.hasClass("hasFilters"))){var d,l=r.$table,c=e(a.stickyHeaders_attachTo),n=r.namespace+"stickyheaders ",o=e(a.stickyHeaders_yScroll||a.stickyHeaders_attachTo||s),h=e(a.stickyHeaders_xScroll||a.stickyHeaders_attachTo||s),f=l.children("thead:first"),p=f.children("tr").not(".sticky-false").children(),y=l.children("tfoot"),k=isNaN(a.stickyHeaders_offset)?e(a.stickyHeaders_offset):"",g=k.length?k.height()||0:parseInt(a.stickyHeaders_offset,10)||0,H=l.parent().closest("."+t.css.table).hasClass("hasStickyHeaders")?l.parent().closest("table.tablesorter")[0].config.widgetOptions.$sticky.parent():[],b=H.length?H.height():0,v=a.$sticky=l.clone().addClass("containsStickyHeaders "+t.css.sticky+" "+a.stickyHeaders).wrap('<div class="'+t.css.stickyWrap+'">'),u=v.parent().addClass(t.css.stickyHide).css({position:c.length?"absolute":"fixed",padding:parseInt(v.parent().parent().css("padding-left"),10),top:g+b,left:0,visibility:"hidden",zIndex:a.stickyHeaders_zIndex||2}),_=v.children("thead:first"),m="",z=0,x=function(t,i){t.filter(":visible").each(function(t){var r,a,d=i.filter(":visible").eq(t),l=e(this);"border-box"===l.css("box-sizing")?r=l.outerWidth():"collapse"===d.css("border-collapse")?s.getComputedStyle?r=parseFloat(s.getComputedStyle(this,null).width):(a=parseFloat(l.css("border-width")),r=l.outerWidth()-parseFloat(l.css("padding-left"))-parseFloat(l.css("padding-right"))-a):r=l.width(),d.css({"min-width":r,"max-width":r})})},T=function(){g=k.length?k.height()||0:parseInt(a.stickyHeaders_offset,10)||0,z=0,u.css({left:c.length?parseInt(c.css("padding-left"),10)||0:l.offset().left-parseInt(l.css("margin-left"),10)-h.scrollLeft()-z,width:l.outerWidth()}),x(l,v),x(p,d)};c.length&&!c.css("position")&&c.css("position","relative"),r.$extraTables&&r.$extraTables.length?r.$extraTables.add(v):r.$extraTables=v,v.attr("id")&&(v[0].id+=a.stickyHeaders_cloneId),v.find("thead:gt(0), tr.sticky-false").hide(),v.find("tbody, tfoot").remove(),v.find("caption").toggle(a.stickyHeaders_includeCaption),d=_.children().children(),v.css({height:0,width:0,margin:0}),d.find("."+t.css.resizer).remove(),l.addClass("hasStickyHeaders").bind("pagerComplete"+n,function(){T()}),t.bindEvents(i,_.children().children(".tablesorter-header")),l.after(u),r.onRenderHeader&&_.children("tr").children().each(function(s){r.onRenderHeader.apply(e(this),[s,r,v])}),h.add(o).unbind("scroll resize ".split(" ").join(n).replace(/\s+/g," ")).bind("scroll resize ".split(" ").join(n),function(s){if(l.is(":visible")){b=H.length?H.offset().top-o.scrollTop()+H.height():0;var i=l.offset(),r=e.isWindow(o[0]),a=e.isWindow(h[0]),d=(c.length?r?o.scrollTop():o.offset().top:o.scrollTop())+g+b,n=l.height()-(u.height()+(y.height()||0)),f=d>i.top&&d<i.top+n?"visible":"hidden",p={visibility:f};c.length&&(p.top=r?d-c.offset().top:c.scrollTop()),a&&(p.left=l.offset().left-parseInt(l.css("margin-left"),10)-h.scrollLeft()-z),H.length&&(p.top=(p.top||0)+g+b),u.removeClass(t.css.stickyVis+" "+t.css.stickyHide).addClass("visible"===f?t.css.stickyVis:t.css.stickyHide).css(p),(f!==m||"resize"===s.type)&&(T(),m=f)}}),a.stickyHeaders_addResizeEvent&&t.addHeaderResizeEvent(i),l.hasClass("hasFilters")&&a.filter_columnFilters&&(l.bind("filterEnd"+n,function(){var i=e(document.activeElement).closest("td"),d=i.parent().children().index(i);u.hasClass(t.css.stickyVis)&&a.stickyHeaders_filteredToTop&&(s.scrollTo(0,l.position().top),d>=0&&r.$filters&&r.$filters.eq(d).find("a, select, input").filter(":visible").focus())}),t.filter.bindSearch(l,d.find("."+t.css.filter)),a.filter_hideFilters&&t.filter.hideFilters(v,r)),l.trigger("stickyHeadersInit")}},remove:function(i,r,a){var d=r.namespace+"stickyheaders ";r.$table.removeClass("hasStickyHeaders").unbind("pagerComplete filterEnd ".split(" ").join(d).replace(/\s+/g," ")).next("."+t.css.stickyWrap).remove(),a.$sticky&&a.$sticky.length&&a.$sticky.remove(),e(s).add(a.stickyHeaders_xScroll).add(a.stickyHeaders_yScroll).add(a.stickyHeaders_attachTo).unbind("scroll resize ".split(" ").join(d).replace(/\s+/g," ")),t.addHeaderResizeEvent(i,!1)}})}(jQuery,window);