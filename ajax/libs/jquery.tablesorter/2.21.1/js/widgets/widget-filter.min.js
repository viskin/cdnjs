!function(e){"use strict";var t=e.tablesorter=e.tablesorter||{};e.extend(t.css,{filterRow:"tablesorter-filter-row",filter:"tablesorter-filter"}),t.addWidget({id:"filter",priority:50,options:{filter_childRows:!1,filter_columnFilters:!0,filter_columnAnyMatch:!0,filter_cellFilter:"",filter_cssFilter:"",filter_defaultFilter:{},filter_excludeFilter:{},filter_external:"",filter_filteredRow:"filtered",filter_formatter:null,filter_functions:null,filter_hideEmpty:!0,filter_hideFilters:!1,filter_ignoreCase:!0,filter_liveSearch:!0,filter_onlyAvail:"filter-onlyAvail",filter_placeholder:{search:"",select:""},filter_reset:null,filter_saveFilters:!1,filter_searchDelay:300,filter_searchFiltered:!0,filter_selectSource:null,filter_startsWith:!1,filter_useParsedData:!1,filter_serversideFiltering:!1,filter_defaultAttrib:"data-value",filter_selectSourceSeparator:"|"},format:function(e,r,i){r.$table.hasClass("hasFilters")||t.filter.init(e,r,i)},remove:function(r,i,l,a){var n,s,f=i.$table,o=i.$tbodies,c="addRows updateCell update updateRows updateComplete appendCache filterReset filterEnd search ".split(" ").join(i.namespace+"filter ");if(f.removeClass("hasFilters").unbind(c.replace(/\s+/g," ")).find("."+t.css.filterRow).remove(),!a){for(n=0;n<o.length;n++)s=t.processTbody(r,o.eq(n),!0),s.children().removeClass(l.filter_filteredRow).show(),t.processTbody(r,s,!1);l.filter_reset&&e(document).undelegate(l.filter_reset,"click.tsfilter")}}}),t.filter={regex:{regex:/^\/((?:\\\/|[^\/])+)\/([mig]{0,3})?$/,child:/tablesorter-childRow/,filtered:/filtered/,type:/undefined|number/,exact:/(^[\"\'=]+)|([\"\'=]+$)/g,nondigit:/[^\w,. \-()]/g,operators:/[<>=]/g,query:"(q|query)"},types:{regex:function(e,r){if(t.filter.regex.regex.test(r.iFilter)){var i,l=t.filter.regex.regex.exec(r.iFilter);try{i=new RegExp(l[1],l[2]).test(r.iExact)}catch(a){i=!1}return i}return null},operators:function(r,i){if(/^[<>]=?/.test(i.iFilter)){var l,a,n=r.table,s=i.index,f=i.parsed[s],o=t.formatFloat(i.iFilter.replace(t.filter.regex.operators,""),n),c=r.parsers[s],d=o;return(f||"numeric"===c.type)&&(a=t.filter.parseFilter(r,e.trim(""+i.iFilter.replace(t.filter.regex.operators,"")),s,f,!0),o="number"!=typeof a||""===a||isNaN(a)?o:a),l=!f&&"numeric"!==c.type||isNaN(o)||"undefined"==typeof i.cache?isNaN(i.iExact)?t.formatFloat(i.iExact.replace(t.filter.regex.nondigit,""),n):t.formatFloat(i.iExact,n):i.cache,/>/.test(i.iFilter)&&(a=/>=/.test(i.iFilter)?l>=o:l>o),/</.test(i.iFilter)&&(a=/<=/.test(i.iFilter)?o>=l:o>l),a||""!==d||(a=!0),a}return null},notMatch:function(r,i){if(/^\!/.test(i.iFilter)){var l,a=t.filter.parseFilter(r,i.iFilter.replace("!",""),i.index,i.parsed[i.index]);return t.filter.regex.exact.test(a)?(a=a.replace(t.filter.regex.exact,""),""===a?!0:e.trim(a)!==i.iExact):(l=i.iExact.search(e.trim(a)),""===a?!0:!(r.widgetOptions.filter_startsWith?0===l:l>=0))}return null},exact:function(r,i){if(t.filter.regex.exact.test(i.iFilter)){var l=t.filter.parseFilter(r,i.iFilter.replace(t.filter.regex.exact,""),i.index,i.parsed[i.index]);return i.anyMatch?e.inArray(l,i.rowArray)>=0:l==i.iExact}return null},and:function(r,i){if(t.filter.regex.andTest.test(i.filter)){for(var l=i.index,a=i.parsed[l],n=i.iFilter.split(t.filter.regex.andSplit),s=i.iExact.search(e.trim(t.filter.parseFilter(r,n[0],l,a)))>=0,f=n.length-1;s&&f;)s=s&&i.iExact.search(e.trim(t.filter.parseFilter(r,n[f],l,a)))>=0,f--;return s}return null},range:function(e,r){if(t.filter.regex.toTest.test(r.iFilter)){var i,l,a=e.table,n=r.index,s=r.parsed[n],f=r.iFilter.split(t.filter.regex.toSplit),o=t.formatFloat(t.filter.parseFilter(e,f[0].replace(t.filter.regex.nondigit,""),n,s),a),c=t.formatFloat(t.filter.parseFilter(e,f[1].replace(t.filter.regex.nondigit,""),n,s),a);return(s||"numeric"===e.parsers[n].type)&&(i=e.parsers[n].format(""+f[0],a,e.$headers.eq(n),n),o=""===i||isNaN(i)?o:i,i=e.parsers[n].format(""+f[1],a,e.$headers.eq(n),n),c=""===i||isNaN(i)?c:i),i=!s&&"numeric"!==e.parsers[n].type||isNaN(o)||isNaN(c)?isNaN(r.iExact)?t.formatFloat(r.iExact.replace(t.filter.regex.nondigit,""),a):t.formatFloat(r.iExact,a):r.cache,o>c&&(l=o,o=c,c=l),i>=o&&c>=i||""===o||""===c}return null},wild:function(r,i){if(/[\?\*\|]/.test(i.iFilter)||t.filter.regex.orReplace.test(i.filter)){var l=i.index,a=i.parsed[l],n=t.filter.parseFilter(r,i.iFilter.replace(t.filter.regex.orReplace,"|"),l,a);return!r.$headerIndexed[l].hasClass("filter-match")&&/\|/.test(n)&&("|"===n[n.length-1]&&(n+="*"),n=i.anyMatch&&e.isArray(i.rowArray)?"("+n+")":"^("+n+")$"),new RegExp(n.replace(/\?/g,"\\S{1}").replace(/\*/g,"\\S*")).test(i.iExact)}return null},fuzzy:function(e,r){if(/^~/.test(r.iFilter)){var i,l=0,a=r.iExact.length,n=t.filter.parseFilter(e,r.iFilter.slice(1),r.index,r.parsed[r.index]);for(i=0;a>i;i++)r.iExact[i]===n[l]&&(l+=1);return l===n.length?!0:!1}return null}},init:function(r,i,l){t.language=e.extend(!0,{},{to:"to",or:"or",and:"and"},t.language);var a,n,s,f,o,c,d,u,h,p=t.filter.regex;if(i.$table.addClass("hasFilters"),l.searchTimer=null,l.filter_initTimer=null,l.filter_formatterCount=0,l.filter_formatterInit=[],l.filter_anyColumnSelector='[data-column="all"],[data-column="any"]',l.filter_multipleColumnSelector='[data-column*="-"],[data-column*=","]',s="\\{"+t.filter.regex.query+"\\}",e.extend(p,{child:new RegExp(i.cssChildRow),filtered:new RegExp(l.filter_filteredRow),alreadyFiltered:new RegExp("(\\s+("+t.language.or+"|-|"+t.language.to+")\\s+)","i"),toTest:new RegExp("\\s+(-|"+t.language.to+")\\s+","i"),toSplit:new RegExp("(?:\\s+(?:-|"+t.language.to+")\\s+)","gi"),andTest:new RegExp("\\s+("+t.language.and+"|&&)\\s+","i"),andSplit:new RegExp("(?:\\s+(?:"+t.language.and+"|&&)\\s+)","gi"),orReplace:new RegExp("\\s+("+t.language.or+")\\s+","gi"),iQuery:new RegExp(s,"i"),igQuery:new RegExp(s,"ig")}),l.filter_columnFilters!==!1&&i.$headers.filter(".filter-false, .parser-false").length!==i.$headers.length&&t.filter.buildRow(r,i,l),s="addRows updateCell update updateRows updateComplete appendCache filterReset filterEnd search ".split(" ").join(i.namespace+"filter "),i.$table.bind(s,function(a,n){return d=l.filter_hideEmpty&&e.isEmptyObject(i.cache)&&!(i.delayInit&&"appendCache"===a.type),i.$table.find("."+t.css.filterRow).toggleClass(l.filter_filteredRow,d),/(search|filter)/.test(a.type)||(a.stopPropagation(),t.filter.buildDefault(r,!0)),"filterReset"===a.type?(i.$table.find("."+t.css.filter).add(l.filter_$externalFilters).val(""),t.filter.searching(r,[])):"filterEnd"===a.type?t.filter.buildDefault(r,!0):(n="search"===a.type?n:"updateComplete"===a.type?i.$table.data("lastSearch"):"",/(update|add)/.test(a.type)&&"updateComplete"!==a.type&&(i.lastCombinedFilter=null,i.lastSearch=[]),t.filter.searching(r,n,!0)),!1}),l.filter_reset&&(l.filter_reset instanceof e?l.filter_reset.click(function(){i.$table.trigger("filterReset")}):e(l.filter_reset).length&&e(document).undelegate(l.filter_reset,"click.tsfilter").delegate(l.filter_reset,"click.tsfilter",function(){i.$table.trigger("filterReset")})),l.filter_functions)for(o=0;o<i.columns;o++)if(u=t.getColumnData(r,l.filter_functions,o))if(f=i.$headerIndexed[o].removeClass("filter-select"),h=!(f.hasClass("filter-false")||f.hasClass("parser-false")),a="",u===!0&&h)t.filter.buildSelect(r,o);else if("object"==typeof u&&h){for(n in u)"string"==typeof n&&(a+=""===a?'<option value="">'+(f.data("placeholder")||f.attr("data-placeholder")||l.filter_placeholder.select||"")+"</option>":"",d=n,s=n,n.indexOf(l.filter_selectSourceSeparator)>=0&&(d=n.split(l.filter_selectSourceSeparator),s=d[1],d=d[0]),a+="<option "+(s===d?"":'data-function-name="'+n+'" ')+'value="'+d+'">'+s+"</option>");i.$table.find("thead").find("select."+t.css.filter+'[data-column="'+o+'"]').append(a)}t.filter.buildDefault(r,!0),t.filter.bindSearch(r,i.$table.find("."+t.css.filter),!0),l.filter_external&&t.filter.bindSearch(r,l.filter_external),l.filter_hideFilters&&t.filter.hideFilters(r,i),i.showProcessing&&i.$table.unbind("filterStart filterEnd ".split(" ").join(i.namespace+"filter ").replace(/\s+/g," ")).bind("filterStart filterEnd ".split(" ").join(i.namespace+"filter "),function(l,a){f=a?i.$table.find("."+t.css.header).filter("[data-column]").filter(function(){return""!==a[e(this).data("column")]}):"",t.isProcessing(r,"filterStart"===l.type,a?f:"")}),i.filteredRows=i.totalRows,i.$table.unbind("tablesorter-initialized pagerBeforeInitialized ".split(" ").join(i.namespace+"filter ").replace(/\s+/g," ")).bind("tablesorter-initialized pagerBeforeInitialized ".split(" ").join(i.namespace+"filter "),function(){var e=this.config.widgetOptions;c=t.filter.setDefaults(r,i,e)||[],c.length&&(i.delayInit&&""===c.join("")||t.setFilters(r,c,!0)),i.$table.trigger("filterFomatterUpdate"),setTimeout(function(){e.filter_initialized||t.filter.filterInitComplete(i)},100)}),i.pager&&i.pager.initialized&&!l.filter_initialized&&(i.$table.trigger("filterFomatterUpdate"),setTimeout(function(){t.filter.filterInitComplete(i)},100))},formatterUpdated:function(e,t){var r=e.closest("table")[0].config.widgetOptions;r.filter_initialized||(r.filter_formatterInit[t]=1)},filterInitComplete:function(r){var i,l,a=r.widgetOptions,n=0,s=function(){a.filter_initialized=!0,r.$table.trigger("filterInit",r),t.filter.findRows(r.table,r.$table.data("lastSearch")||[])};if(e.isEmptyObject(a.filter_formatter))s();else{for(l=a.filter_formatterInit.length,i=0;l>i;i++)1===a.filter_formatterInit[i]&&n++;clearTimeout(a.filter_initTimer),a.filter_initialized||n!==a.filter_formatterCount?a.filter_initialized||(a.filter_initTimer=setTimeout(function(){s()},500)):s()}},setDefaults:function(r,i,l){var a,n,s,f,o,c=t.getFilters(r)||[];if(l.filter_saveFilters&&t.storage&&(n=t.storage(r,"tablesorter-filters")||[],a=e.isArray(n),a&&""===n.join("")||!a||(c=n)),""===c.join(""))for(o=i.$headers.add(l.filter_$externalFilters).filter("["+l.filter_defaultAttrib+"]"),s=0;s<=i.columns;s++)f=s===i.columns?"all":s,c[s]=o.filter('[data-column="'+f+'"]').attr(l.filter_defaultAttrib)||c[s]||"";return i.$table.data("lastSearch",c),c},parseFilter:function(e,t,r,i,l){return l||i?e.parsers[r].format(t,e.table,[],r):t},buildRow:function(r,i,l){var a,n,s,f,o,c,d,u=i.columns,h=e.isArray(l.filter_cellFilter),p='<tr role="row" class="'+t.css.filterRow+'">';for(n=0;u>n;n++)p+=h?"<td"+(l.filter_cellFilter[n]?' class="'+l.filter_cellFilter[n]+'"':"")+"></td>":"<td"+(""!==l.filter_cellFilter?' class="'+l.filter_cellFilter+'"':"")+"></td>";for(i.$filters=e(p+="</tr>").appendTo(i.$table.children("thead").eq(0)).find("td"),n=0;u>n;n++)o=!1,s=i.$headerIndexed[n],d=t.getColumnData(r,l.filter_functions,n),f=l.filter_functions&&d&&"function"!=typeof d||s.hasClass("filter-select"),a=t.getColumnData(r,i.headers,n),o="false"===t.getData(s[0],a,"filter")||"false"===t.getData(s[0],a,"parser"),f?p=e("<select>").appendTo(i.$filters.eq(n)):(d=t.getColumnData(r,l.filter_formatter,n),d?(l.filter_formatterCount++,p=d(i.$filters.eq(n),n),p&&0===p.length&&(p=i.$filters.eq(n).children("input")),p&&(0===p.parent().length||p.parent().length&&p.parent()[0]!==i.$filters[n])&&i.$filters.eq(n).append(p)):p=e('<input type="search">').appendTo(i.$filters.eq(n)),p&&p.attr("placeholder",s.data("placeholder")||s.attr("data-placeholder")||l.filter_placeholder.search||"")),p&&(c=(e.isArray(l.filter_cssFilter)?"undefined"!=typeof l.filter_cssFilter[n]?l.filter_cssFilter[n]||"":"":l.filter_cssFilter)||"",p.addClass(t.css.filter+" "+c).attr("data-column",n),o&&(p.attr("placeholder","").addClass("disabled")[0].disabled=!0))},bindSearch:function(r,i,l){if(r=e(r)[0],i=e(i),i.length){var a=r.config,n=a.widgetOptions,s=n.filter_$externalFilters;l!==!0&&(n.filter_$anyMatch=i.filter(n.filter_anyColumnSelector+","+n.filter_multipleColumnSelector),n.filter_$externalFilters=s&&s.length?n.filter_$externalFilters.add(i):i,t.setFilters(r,a.$table.data("lastSearch")||[],l===!1)),i.attr("data-lastSearchTime",(new Date).getTime()).unbind("keypress keyup search change ".split(" ").join(a.namespace+"filter ").replace(/\s+/g," ")).bind("keyup"+a.namespace+"filter",function(i){if(e(this).attr("data-lastSearchTime",(new Date).getTime()),27===i.which)this.value="";else{if(n.filter_liveSearch===!1)return;if(""!==this.value&&("number"==typeof n.filter_liveSearch&&this.value.length<n.filter_liveSearch||13!==i.which&&8!==i.which&&(i.which<32||i.which>=37&&i.which<=40)))return}t.filter.searching(r,!0,!0)}).bind("search change keypress ".split(" ").join(a.namespace+"filter "),function(i){var l=e(this).data("column");(13===i.which||"search"===i.type||"change"===i.type&&this.value!==a.lastSearch[l])&&(i.preventDefault(),e(this).attr("data-lastSearchTime",(new Date).getTime()),t.filter.searching(r,!1,!0))})}},searching:function(e,r,i){var l=e.config.widgetOptions;clearTimeout(l.searchTimer),"undefined"==typeof r||r===!0?l.searchTimer=setTimeout(function(){t.filter.checkFilters(e,r,i)},l.filter_liveSearch?l.filter_searchDelay:10):t.filter.checkFilters(e,r,i)},checkFilters:function(r,i,l){var a=r.config,n=a.widgetOptions,s=e.isArray(i),f=s?i:t.getFilters(r,!0),o=(f||[]).join("");return e.isEmptyObject(a.cache)?void(a.delayInit&&a.pager&&a.pager.initialized&&a.$table.trigger("updateCache",[function(){t.filter.checkFilters(r,!1,l)}])):(s&&(t.setFilters(r,f,!1,l!==!0),n.filter_initialized||(a.lastCombinedFilter="")),n.filter_hideFilters&&a.$table.find("."+t.css.filterRow).trigger(""===o?"mouseleave":"mouseenter"),a.lastCombinedFilter!==o||i===!1?(i===!1&&(a.lastCombinedFilter=null,a.lastSearch=[]),n.filter_initialized&&a.$table.trigger("filterStart",[f]),a.showProcessing?void setTimeout(function(){return t.filter.findRows(r,f,o),!1},30):(t.filter.findRows(r,f,o),!1)):void 0)},hideFilters:function(r,i){var l,a,n;e(r).find("."+t.css.filterRow).addClass("hideme").bind("mouseenter mouseleave",function(t){var r=t;l=e(this),clearTimeout(n),n=setTimeout(function(){/enter|over/.test(r.type)?l.removeClass("hideme"):e(document.activeElement).closest("tr")[0]!==l[0]&&""===i.lastCombinedFilter&&l.addClass("hideme")},200)}).find("input, select").bind("focus blur",function(r){a=e(this).closest("tr"),clearTimeout(n);var l=r;n=setTimeout(function(){""===t.getFilters(i.$table).join("")&&a["focus"===l.type?"removeClass":"addClass"]("hideme")},200)})},defaultFilter:function(r,i){if(""===r)return r;var l=t.filter.regex.iQuery,a=i.match(t.filter.regex.igQuery).length,n=a>1?e.trim(r).split(/\s/):[e.trim(r)],s=n.length-1,f=0,o=i;for(1>s&&a>1&&(n[1]=n[0]);l.test(o);)o=o.replace(l,n[f++]||""),l.test(o)&&s>f&&""!==(n[f]||"")&&(o=i.replace(l,o));return o},getLatestSearch:function(t){return t?t.sort(function(t,r){return e(r).attr("data-lastSearchTime")-e(t).attr("data-lastSearchTime")}):e()},multipleColumns:function(r,i){var l,a,n,s,f,o,c,d,u,h=r.widgetOptions,p=h.filter_initialized||!i.filter(h.filter_anyColumnSelector).length,g=[],m=e.trim(t.filter.getLatestSearch(i).attr("data-column")||"");if(p&&/-/.test(m))for(a=m.match(/(\d+)\s*-\s*(\d+)/g),u=a.length,d=0;u>d;d++){for(n=a[d].split(/\s*-\s*/),s=parseInt(n[0],10)||0,f=parseInt(n[1],10)||r.columns-1,s>f&&(l=s,s=f,f=l),f>=r.columns&&(f=r.columns-1);f>=s;s++)g.push(s);m=m.replace(a[d],"")}if(p&&/,/.test(m))for(o=m.split(/\s*,\s*/),u=o.length,c=0;u>c;c++)""!==o[c]&&(d=parseInt(o[c],10),d<r.columns&&g.push(d));if(!g.length)for(d=0;d<r.columns;d++)g.push(d);return g},findRows:function(r,i,l){if(r.config.lastCombinedFilter!==l&&r.config.widgetOptions.filter_initialized){var a,n,s,f,o,c,d,u,h,p,g,m,_,x,F,y,b,w,C,$,v,S,R,E,A,T,D,M,O=t.filter.regex,I=r.config,j=I.widgetOptions,z={anyMatch:!1},q=["range","notMatch","operators"];for(z.parsed=I.$headers.map(function(i){return I.parsers&&I.parsers[i]&&I.parsers[i].parsed||t.getData&&"parsed"===t.getData(I.$headerIndexed[i],t.getColumnData(r,I.headers,i),"filter")||e(this).hasClass("filter-parsed")}).get(),I.debug&&(t.log("Filter: Starting filter widget search",i),y=new Date),I.filteredRows=0,I.totalRows=0,l=(i||[]).join(""),o=0;o<I.$tbodies.length;o++){if(c=t.processTbody(r,I.$tbodies.eq(o),!0),h=I.columns,n=I.cache[o].normalized,s=e(e.map(n,function(e){return e[h].$row.get()})),""===l||j.filter_serversideFiltering)s.removeClass(j.filter_filteredRow).not("."+I.cssChildRow).css("display","");else{if(s=s.not("."+I.cssChildRow),a=s.length,(j.filter_$anyMatch&&j.filter_$anyMatch.length||"undefined"!=typeof i[I.columns])&&(z.anyMatchFlag=!0,z.anyMatchFilter=j.filter_$anyMatch&&t.filter.getLatestSearch(j.filter_$anyMatch).val()||""+i[I.columns]||"",j.filter_columnAnyMatch)){for(A=z.anyMatchFilter.split(t.filter.regex.andSplit),T=!1,w=0;w<A.length;w++)D=A[w].split(":"),D.length>1&&(M=parseInt(D[0],10)-1,M>=0&&M<I.columns&&(i[M]=D[1],A.splice(w,1),w--,T=!0));T&&(z.anyMatchFilter=A.join(" && "))}if($=j.filter_searchFiltered,g=I.lastSearch||I.$table.data("lastSearch")||[],$)for(w=0;h+1>w;w++)b=i[w]||"",$||(w=h),$=!(!$||!g.length||0!==b.indexOf(g[w]||"")||O.alreadyFiltered.test(b)||/[=\"\|!]/.test(b)||/(>=?\s*-\d)/.test(b)||/(<=?\s*\d)/.test(b)||""!==b&&I.$filters&&I.$filters.eq(w).find("select").length&&!I.$headerIndexed[w].hasClass("filter-match"));for(C=s.not("."+j.filter_filteredRow).length,$&&0===C&&($=!1),I.debug&&t.log("Filter: Searching through "+($&&a>C?C:"all")+" rows"),z.anyMatchFlag&&(I.sortLocaleCompare&&(z.anyMatchFilter=t.replaceAccents(z.anyMatchFilter)),j.filter_defaultFilter&&O.iQuery.test(t.getColumnData(r,j.filter_defaultFilter,I.columns,!0)||"")&&(z.anyMatchFilter=t.filter.defaultFilter(z.anyMatchFilter,t.getColumnData(r,j.filter_defaultFilter,I.columns,!0)),$=!1),z.iAnyMatchFilter=j.filter_ignoreCase&&I.ignoreCase?z.anyMatchFilter.toLocaleLowerCase():z.anyMatchFilter),f=0;a>f;f++)if(z.cacheArray=n[f],p=s[f].className,!(O.child.test(p)||$&&O.filtered.test(p))){if(F=!0,p=s.eq(f).nextUntil("tr:not(."+I.cssChildRow+")"),z.childRowText=p.length&&j.filter_childRows?p.text():"",z.childRowText=j.filter_ignoreCase?z.childRowText.toLocaleLowerCase():z.childRowText,d=s.eq(f).children(),z.anyMatchFlag){if(h=t.filter.multipleColumns(I,j.filter_$anyMatch),z.anyMatch=!0,z.rowArray=d.map(function(r){if(e.inArray(r,h)>-1){var i;return z.parsed[r]?i=z.cacheArray[r]:(i=this?this.getAttribute(I.textAttribute)||this.textContent||e(this).text():"",i=e.trim(j.filter_ignoreCase?i.toLowerCase():i),I.sortLocaleCompare&&(i=t.replaceAccents(i))),i}}).get(),z.filter=z.anyMatchFilter,z.iFilter=z.iAnyMatchFilter,z.exact=z.rowArray.join(" "),z.iExact=j.filter_ignoreCase?z.exact.toLowerCase():z.exact,z.cache=z.cacheArray.slice(0,-1).join(" "),v=null,e.each(t.filter.types,function(t,r){return e.inArray(t,q)<0&&(_=r(I,z),null!==_)?(v=_,!1):void 0}),null!==v)F=v;else if(j.filter_startsWith)for(F=!1,h=I.columns;!F&&h>0;)h--,F=F||0===z.rowArray[h].indexOf(z.iFilter);else F=(z.iExact+z.childRowText).indexOf(z.iFilter)>=0;z.anyMatch=!1}for(h=0;h<I.columns;h++)z.filter=i[h],z.index=h,S=(t.getColumnData(r,j.filter_excludeFilter,h,!0)||"").split(/\s+/),z.filter&&(z.cache=z.cacheArray[h],j.filter_useParsedData||z.parsed[h]?z.exact=z.cache:(b=d[h],x=b?e.trim(b.getAttribute(I.textAttribute)||b.textContent||d.eq(h).text()):"",z.exact=I.sortLocaleCompare?t.replaceAccents(x):x),z.iExact=!O.type.test(typeof z.exact)&&j.filter_ignoreCase?z.exact.toLocaleLowerCase():z.exact,x=F,E=j.filter_columnFilters?I.$filters.add(I.$externalFilters).filter('[data-column="'+h+'"]').find("select option:selected").attr("data-function-name")||"":"",I.sortLocaleCompare&&(z.filter=t.replaceAccents(z.filter)),b=!0,j.filter_defaultFilter&&O.iQuery.test(t.getColumnData(r,j.filter_defaultFilter,h)||"")&&(z.filter=t.filter.defaultFilter(z.filter,t.getColumnData(r,j.filter_defaultFilter,h)),b=!1),z.iFilter=j.filter_ignoreCase?(z.filter||"").toLocaleLowerCase():z.filter,R=t.getColumnData(r,j.filter_functions,h),u=I.$headerIndexed[h],m=u.hasClass("filter-select"),R||m&&b?R===!0||m?x=u.hasClass("filter-match")?z.iExact.search(z.iFilter)>=0:z.filter===z.exact:"function"==typeof R?x=R(z.exact,z.cache,z.filter,h,s.eq(f),I):"function"==typeof R[E||z.filter]&&(x=R[E||z.filter](z.exact,z.cache,z.filter,h,s.eq(f),I)):(v=null,e.each(t.filter.types,function(t,r){return e.inArray(t,S)<0&&(_=r(I,z),null!==_)?(v=_,!1):void 0}),null!==v?x=v:(z.exact=(z.iExact+z.childRowText).indexOf(t.filter.parseFilter(I,z.iFilter,h,z.parsed[h])),x=!j.filter_startsWith&&z.exact>=0||j.filter_startsWith&&0===z.exact)),F=x?F:!1);s.eq(f).toggleClass(j.filter_filteredRow,!F)[0].display=F?"":"none",p.length&&p.toggleClass(j.filter_filteredRow,!F)}}I.filteredRows+=s.not("."+j.filter_filteredRow).length,I.totalRows+=s.length,t.processTbody(r,c,!1)}I.lastCombinedFilter=l,I.lastSearch=i,I.$table.data("lastSearch",i),j.filter_saveFilters&&t.storage&&t.storage(r,"tablesorter-filters",i),I.debug&&t.benchmark("Completed filter widget search",y),j.filter_initialized&&I.$table.trigger("filterEnd",I),setTimeout(function(){I.$table.trigger("applyWidgets")},0)}},getOptionSource:function(r,i,l){r=e(r)[0];var a,n,s,f=r.config,o=f.widgetOptions,c=[],d=!1,u=o.filter_selectSource,h=f.$table.data("lastSearch")||[],p=e.isFunction(u)?!0:t.getColumnData(r,u,i);if(l&&""!==h[i]&&(l=!1),p===!0)d=u(r,i,l);else{if(p instanceof e||"string"===e.type(p)&&p.indexOf("</option>")>=0)return p;e.isArray(p)?d=p:"object"===e.type(u)&&p&&(d=p(r,i,l))}if(d===!1&&(d=t.filter.getOptions(r,i,l)),d=e.grep(d,function(t,r){return e.inArray(t,d)===r}),f.$headerIndexed[i].hasClass("filter-select-nosort"))return d;for(s=d.length,n=0;s>n;n++)c.push({t:d[n],p:f.parsers&&f.parsers[i].format(d[n],r,[],i)});for(a=f.textSorter||"",c.sort(function(l,n){var s=l.p.toString(),f=n.p.toString();return e.isFunction(a)?a(s,f,!0,i,r):"object"==typeof a&&a.hasOwnProperty(i)?a[i](s,f,!0,i,r):t.sortNatural?t.sortNatural(s,f):!0}),d=[],s=c.length,n=0;s>n;n++)d.push(c[n].t);return d},getOptions:function(t,r,i){t=e(t)[0];var l,a,n,s,f,o,c=t.config,d=c.widgetOptions,u=[];for(a=0;a<c.$tbodies.length;a++)for(f=c.cache[a],n=c.cache[a].normalized.length,l=0;n>l;l++)s=f.row?f.row[l]:f.normalized[l][c.columns].$row[0],i&&s.className.match(d.filter_filteredRow)||(d.filter_useParsedData||c.parsers[r].parsed||c.$headerIndexed[r].hasClass("filter-parsed")?u.push(""+f.normalized[l][r]):(o=s.cells[r],o&&u.push(e.trim(o.getAttribute(c.textAttribute)||o.textContent||e(o).text()))));return u},buildSelect:function(r,i,l,a,n){if(r=e(r)[0],i=parseInt(i,10),r.config.cache&&!e.isEmptyObject(r.config.cache)){var s,f,o,c,d,u,h=r.config,p=h.widgetOptions,g=h.$headerIndexed[i],m='<option value="">'+(g.data("placeholder")||g.attr("data-placeholder")||p.filter_placeholder.select||"")+"</option>",_=h.$table.find("thead").find("select."+t.css.filter+'[data-column="'+i+'"]').val();if(("undefined"==typeof l||""===l)&&(l=t.filter.getOptionSource(r,i,n)),e.isArray(l)){for(s=0;s<l.length;s++)o=l[s]=(""+l[s]).replace(/\"/g,"&quot;"),f=o,o.indexOf(p.filter_selectSourceSeparator)>=0&&(c=o.split(p.filter_selectSourceSeparator),f=c[0],o=c[1]),m+=""!==l[s]?"<option "+(f===o?"":'data-function-name="'+l[s]+'" ')+'value="'+f+'">'+o+"</option>":"";l=[]}d=(h.$filters?h.$filters:h.$table.children("thead")).find("."+t.css.filter),p.filter_$externalFilters&&(d=d&&d.length?d.add(p.filter_$externalFilters):p.filter_$externalFilters),u=d.filter('select[data-column="'+i+'"]'),u.length&&(u[a?"html":"append"](m),e.isArray(l)||u.append(l).val(_),u.val(_))}},buildDefault:function(e,r){var i,l,a,n=e.config,s=n.widgetOptions,f=n.columns;for(i=0;f>i;i++)l=n.$headerIndexed[i],a=!(l.hasClass("filter-false")||l.hasClass("parser-false")),(l.hasClass("filter-select")||t.getColumnData(e,s.filter_functions,i)===!0)&&a&&t.filter.buildSelect(e,i,"",r,l.hasClass(s.filter_onlyAvail))}},t.getFilters=function(r,i,l,a){var n,s,f,o,c=!1,d=r?e(r)[0].config:"",u=d?d.widgetOptions:"";if(i!==!0&&u&&!u.filter_columnFilters)return e(r).data("lastSearch");if(d&&(d.$filters&&(s=d.$filters.find("."+t.css.filter)),u.filter_$externalFilters&&(s=s&&s.length?s.add(u.filter_$externalFilters):u.filter_$externalFilters),s&&s.length))for(c=l||[],n=0;n<d.columns+1;n++)o=n===d.columns?u.filter_anyColumnSelector+","+u.filter_multipleColumnSelector:'[data-column="'+n+'"]',f=s.filter(o),f.length&&(f=t.filter.getLatestSearch(f),e.isArray(l)?(a&&f.slice(1),n===d.columns&&(o=f.filter(u.filter_anyColumnSelector),f=o.length?o:f),f.val(l[n]).trigger("change.tsfilter")):(c[n]=f.val()||"",n===d.columns?f.slice(1).filter('[data-column*="'+f.attr("data-column")+'"]').val(c[n]):f.slice(1).val(c[n])),n===d.columns&&f.length&&(u.filter_$anyMatch=f));return 0===c.length&&(c=!1),c},t.setFilters=function(r,i,l,a){var n=r?e(r)[0].config:"",s=t.getFilters(r,!0,i,a);return n&&l&&(n.lastCombinedFilter=null,n.lastSearch=[],t.filter.searching(n.table,i,a),n.$table.trigger("filterFomatterUpdate")),!!s}}(jQuery);