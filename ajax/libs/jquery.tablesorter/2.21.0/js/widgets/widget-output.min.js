!function(t){"use strict";var e=t.tablesorter,o=e.output={event:"outputTable",regexQuote:/([\n\t]|<[^<]+>)/,regexBR:/(<br([\s\/])?>|\n)/g,regexIMG:/<img[^>]+alt\s*=\s*['"]([^'"]+)['"][^>]*>/i,regexHTML:/<[^<]+>/g,replaceCR:"\\n",replaceTab:"\\t",popupTitle:"Output",popupStyle:"width:100%;height:100%;",message:"Your device does not support downloading. Please try again in desktop browser.",init:function(t){t.$table.off(o.event).on(o.event,function(){o.process(t,t.widgetOptions)})},processRow:function(e,u,n,r){var a,p,i,l,s,c,d=e.widgetOptions,f=[],w=d.output_duplicateSpans,_=n&&r&&d.output_headerRows&&t.isFunction(d.output_callbackJSON),g=0;return u.each(function(e){f[e]||(f[e]=[]),g=0,t(this).children().each(function(){if(a=t(this),a.filter("[rowspan]").length)for(l=parseInt(a.attr("rowspan"),10)-1,c=o.formatData(d,a.attr(d.output_dataAttrib)||a.html(),n),p=1;l>=p;p++)f[e+p]||(f[e+p]=[]),f[e+p][g]=n?c:w?c:"";if(a.filter("[colspan]").length)for(s=parseInt(a.attr("colspan"),10)-1,c=o.formatData(d,a.attr(d.output_dataAttrib)||a.html(),n),i=1;s>=i;i++)if(a.filter("[rowspan]").length)for(l=parseInt(a.attr("rowspan"),10),p=0;l>p;p++)f[e+p]||(f[e+p]=[]),f[e+p][g+i]=_?d.output_callbackJSON(a,c,g+i)||c+"("+(g+i)+")":n?c:w?c:"";else f[e][g+i]=_?d.output_callbackJSON(a,c,g+i)||c+"("+(g+i)+")":n?c:w?c:"";if("none"!==a.css("display")){for(;"undefined"!=typeof f[e][g];)g++;f[e][g]=f[e][g]||o.formatData(d,a.attr(d.output_dataAttrib)||a.html(),n),g++}})}),f},ignoreColumns:function(e,o){return t.each(o,function(u,n){o[u]=t.grep(n,function(o,u){return t.inArray(u,e.output_ignoreColumns)<0})}),o},process:function(u,n){var r,a,p,i,l,s,c=window.JSON&&JSON.hasOwnProperty("stringify"),d=0,f=(n.output_separator||",").toLowerCase(),w="json"===f,_="array"===f,g=w||_?",":n.output_separator,h=u.$table;n.output_regex=new RegExp("("+(/\\/.test(g)?"\\":"")+g+")"),a=h.find("thead tr:visible").not("."+(e.css.filterRow||"tablesorter-filter-row")),i=o.processRow(u,a,!0,w),p=h.children("tbody").children("tr"),n.output_includeFooter&&(p=p.add(h.children("tfoot").children("tr").clone())),p=/f/.test(n.output_saveRows)?p.not("."+(n.filter_filteredRow||"filtered")):/v/.test(n.output_saveRows)?p.filter(":visible"):p,l=o.processRow(u,p),s=i.length,n.output_ignoreColumns.length&&(i=o.ignoreColumns(n,i),l=o.ignoreColumns(n,l)),w?(f=[],t.each(l,function(t,e){f.push(o.row2Hash(i[s>1&&n.output_headerRows?t%s:s-1],e))}),r=c?JSON.stringify(f):f):(f=o.row2CSV(n,n.output_headerRows?i:[i[s>1&&n.output_headerRows?d%s:s-1]],_).concat(o.row2CSV(n,l,_)),r=_&&c?JSON.stringify(f):f.join("\n")),(!t.isFunction(n.output_callback)||n.output_callback(u,r))&&(/p/.test((n.output_delivery||"").toLowerCase())?o.popup(r,n.output_popupStyle,w||_):o.download(n,r))},row2CSV:function(t,e,o){var u,n,r=[],a=e.length;for(n=0;a>n;n++)u=e[n].join("").replace(/\"/g,""),e[n].length>0&&""!==u&&(r[r.length]=o?e[n]:e[n].join(t.output_separator));return r},row2Hash:function(e,o){var u={};return t.each(o,function(t,o){t<e.length&&(u[e[t]]=o)}),u},formatData:function(e,u,n){var r,a=(e.output_separator||",").toLowerCase(),p="json"===a||"array"===a,i=u.replace(/\"/g,e.output_replaceQuote||"“");return i=e.output_trimSpaces?i.replace(o.regexBR,""):i.replace(o.regexBR,o.replaceCR).replace(/\t/g,o.replaceTab),r=i.match(o.regexIMG),e.output_includeHTML||null===r||(i=r[1]),i=e.output_includeHTML&&!n?i:i.replace(o.regexHTML,""),i=e.output_trimSpaces||n?t.trim(i):i,a=p?!1:e.output_wrapQuotes||e.output_regex.test(i)||o.regexQuote.test(i),a?'"'+i+'"':i},popup:function(t,e,u){var n=window.open("",o.popupTitle,e);return n.document.write("<html><head><title>"+o.popupTitle+'</title></head><body><textarea wrap="'+(u?"on":"off")+'" style="'+o.popupStyle+'">'+t+"\n</textarea></body></html>"),n.document.close(),n.focus(),!0},download:function(t,e){var u,n,r,a=window.navigator,p=document.createElement("a");if(/(iP)/g.test(a.userAgent))return alert(o.message),!1;try{r=!!new Blob}catch(i){r=!1}return r?(window.URL=window.webkitURL||window.URL,n=new Blob([e],{type:t.output_encoding}),a.msSaveBlob?a.msSaveBlob(n,t.output_saveFileName):(p.href=window.URL.createObjectURL(n),p.download=t.output_saveFileName,document.createEvent&&(u=document.createEvent("MouseEvents"),u.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),p.dispatchEvent(u))),!1):(window.open(t.output_encoding+encodeURIComponent(e)+"?download","_self"),!0)},remove:function(t){t.$table.off(o.event)}};e.addWidget({id:"output",options:{output_separator:",",output_ignoreColumns:[],output_includeFooter:!1,output_dataAttrib:"data-name",output_headerRows:!1,output_delivery:"popup",output_saveRows:"filtered",output_duplicateSpans:!0,output_replaceQuote:"“;",output_includeHTML:!1,output_trimSpaces:!0,output_wrapQuotes:!1,output_popupStyle:"width=500,height=300",output_saveFileName:"mytable.csv",output_callback:function(){return!0},output_callbackJSON:function(t,e,o){return e+"("+o+")"},output_encoding:"data:application/octet-stream;charset=utf8,"},init:function(t,e,u){o.init(u)},remove:function(t,e){o.remove(e)}})}(jQuery);