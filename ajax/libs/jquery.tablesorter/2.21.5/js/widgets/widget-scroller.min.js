/*! Widget: scroller - updated 4/2/2015 (v2.21.5) */
;(function(d,c){var b=d.tablesorter,a=b.css;d.extend(b.css,{scrollerWrap:"tablesorter-scroller",scrollerHeader:"tablesorter-scroller-header",scrollerTable:"tablesorter-scroller-table",scrollerFooter:"tablesorter-scroller-footer",scrollerFixed:"tablesorter-scroller-fixed",scrollerHasFix:"tablesorter-scroller-has-fixed-columns",scrollerReset:"tablesorter-scroller-reset",scrollerRtl:"tablesorter-scroller-rtl"});b.addWidget({id:"scroller",priority:60,options:{scroller_height:300,scroller_jumpToHeader:true,scroller_upAfterSort:true,scroller_fixedColumns:0,scroller_rowHighlight:"hover",scroller_barWidth:null},format:function(f,g,e){if(!g.isScrolling){b.scroller.setup(g,e)}},remove:function(f,g,e){b.scroller.remove(g,e)}});b.window_resize=function(){if(this.resize_timer){clearTimeout(this.resize_timer)}this.resize_timer=setTimeout(function(){d(this).trigger("resizeEnd")},250)};d(function(){var e="<style>."+a.scrollerWrap+"Measure { width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px; }."+a.scrollerReset+" { width: auto !important; min-width: auto !important; max-width: auto !important; }."+a.scrollerWrap+" { position: relative; overflow: hidden; }."+a.scrollerHeader+", ."+a.scrollerFooter+" { overflow: hidden; }."+a.scrollerHeader+" table."+a.table+" { margin-bottom: 0; }."+a.scrollerFooter+" table."+a.table+" thead { visibility: hidden, height: 0; overflow: hidden; }."+a.scrollerTable+" { overflow-y: scroll; }."+a.scrollerTable+" table."+a.table+" { border-top: 0; margin-top: 0; margin-bottom: 0; overflow-y: scroll; }."+a.scrollerTable+" ."+(a.filterRow||"tablesorter-filter-row")+",."+a.scrollerFooter+" ."+(a.filterRow||"tablesorter-filter-row")+",."+a.scrollerTable+" tfoot { display: none; }."+a.scrollerWrap+" ."+a.scrollerFixed+" { position: absolute; top: 0; z-index: 1; left: 0 } ."+a.scrollerWrap+" ."+a.scrollerFixed+"."+a.scrollerRtl+" { left: auto; right: 0 } ."+a.scrollerTable+" table."+a.table+" thead tr."+a.headerRow+" *, ."+a.scrollerFooter+" table."+a.table+" thead * { line-height: 0; height: 0; border: none; background-image: none; padding-top: 0; padding-bottom: 0; margin-top: 0; margin-bottom: 0; overflow: hidden; }."+a.scrollerFixed+" { pointer-events: none; }."+a.scrollerWrap+"."+a.scrollerHasFix+" > ."+a.scrollerTable+" { overflow-x: scroll; }."+a.scrollerFixed+" ."+a.scrollerFooter+" { position: absolute; bottom: 0; }."+a.scrollerFixed+" ."+a.scrollerTable+" { position: relative; left: 0; overflow-x: hidden; overflow-y: scroll; -ms-overflow-style: none; }."+a.scrollerFixed+" ."+a.scrollerTable+"::-webkit-scrollbar { display: none; }."+a.scrollerWrap+" ."+a.scrollerFixed+" table { border-right-color: transparent; padding-right: 0; }."+a.scrollerWrap+" ."+a.scrollerFixed+"."+a.scrollerRtl+" table { border-left-color: transparent; padding-left: 0; }</style>";d(e).appendTo("body")});b.scroller={isFirefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,hasScrollBar:function(e){return e.get(0).scrollHeight>e.height()},setWidth:function(e,f){e.css({width:f,"min-width":f,"max-width":f})},getBarWidth:function(){var f=d('<div class="'+a.scrollerWrap+'Measure">').appendTo("body"),g=f[0],e=g.offsetWidth-g.clientWidth;f.remove();return e},setup:function(n,p){var g,r,l,j,h,m,k,f=d(c),i=n.namespace+"tsscroller",o=d(),e=n.namespace.slice(1)+"tsscroller",q=n.$table;n.widthFixed=true;g=p.scroller_height||300;r=q.children("tbody").height();if(r!==0&&g>r){g=r+10}p.scroller_$header=l=d('<table class="'+q.attr("class")+'" cellpadding=0 cellspacing=0>'+q.children("thead")[0].outerHTML+"</table>").addClass(n.namespace.slice(1)+"_extra_table");j=q.children("tfoot");if(j.length){o=d('<table class="'+q.attr("class")+'" cellpadding=0 cellspacing=0 style="margin-top:0"></table>').addClass(n.namespace.slice(1)+"_extra_table").append(j.clone(true)).append(q.children("thead")[0].outerHTML).wrap('<div class="'+a.scrollerFooter+'"/>');m=o.children("tfoot").eq(0).children("tr").children()}p.scroller_$footer=o;q.wrap('<div id="'+e+'" class="'+a.scrollerWrap+'" />').before(l).find("."+a.filterRow).addClass(a.filterRowHide);p.scroller_$container=q.parent();if(o.length){q.after(o.parent())}h=l.wrap('<div class="'+a.scrollerHeader+'" />').find("."+a.header);q.wrap('<div class="'+a.scrollerTable+'" style="max-height:'+g+'px;" />');k=q.parent();b.bindEvents(n.table,h);if(q.hasClass("hasFilters")){b.filter.bindSearch(q,l.find("."+a.filter))}p.scroller_$container.find("."+a.scrollerFixed).remove();if(p.scroller_fixedColumns>0){b.scroller.setupFixed(n,p)}b.scroller.resize(n,p);q.find("thead").css("visibility","hidden");r=k.parent().height();k.off("scroll"+i).on("scroll"+i,function(){if(p.scroller_jumpToHeader){var s=f.scrollTop()-l.offset().top;if(d(this).scrollTop()!==0&&s<r&&s>0){f.scrollTop(l.offset().top)}}l.parent().add(o.parent()).scrollLeft(d(this).scrollLeft())});q.off("sortEnd"+i+" setFixedColumnSize"+i).on("sortEnd"+i,function(){if(p.scroller_upAfterSort){q.parent().animate({scrollTop:0},"fast")}}).on("setFixedColumnSize"+i,function(t,s){if(typeof s!=="undefined"&&!isNaN(s)){p.scroller_fixedColumns=parseInt(s,10)}p.scroller_$container.find("."+a.scrollerFixed).remove();if(s>0&&s<n.columns-1){b.scroller.setupFixed(n,p)}else{p.scroller_$container.removeClass(a.scrollerHasFix)}});f.off("resize resizeEnd ".split(" ").join(i+" ")).on("resize"+i,b.window_resize).on("resizeEnd"+i,function(){f.off("resize"+i,b.window_resize);b.scroller.resize(n,p);f.on("resize"+i,b.window_resize)});n.isScrolling=true},resize:function(q,s){var k,e,l,g,h,m,p,o,t=q.$table,j=t.parent(),i=s.scroller_$header,r=s.scroller_$footer,f=q.namespace.slice(1)+"tsscroller",n=d("div."+a.scrollerWrap+'[id != "'+f+'"]').hide();t.children("thead").show();t.add(i).add(r).children("colgroup").remove();t.addClass(a.scrollerReset).children("thead").find("."+a.headerIn).addClass(a.scrollerReset).end().find("."+a.filterRow).show();j.addClass(a.scrollerReset);e=parseInt(t.css("border-left-width"),10);s.scroller_barSetWidth=(s.scroller_barWidth||b.scroller.getBarWidth()||18)+e;j.width(j.parent().innerWidth()-(b.scroller.hasScrollBar(j.parent())?s.scroller_barSetWidth:0));l=j.innerWidth()-(b.scroller.hasScrollBar(j)?s.scroller_barSetWidth:0)+e;i.parent().add(r.parent()).width(l);g=i.children("thead").children().children("th, td").filter(":visible");h=t.children("tbody").eq(0).children().eq(0).children("th, td").filter(":visible");m=r.children("tfoot").children().children("th, td").filter(":visible");b.scroller.setWidth(g.add(h).add(m),"");p=t.children("thead").children().eq(0).children("th, td");for(k=0;k<p.length;k++){o=p.eq(k);if(o.css("box-sizing")==="border-box"){l=o.outerWidth()}else{if(g.eq(k).css("border-collapse")==="collapse"){if(o.length&&c.getComputedStyle){l=parseFloat(c.getComputedStyle(o[0],null).width)}else{e=parseFloat(o.css("border-width"))||0;l=o.outerWidth()-parseFloat(o.css("padding-left"))-parseFloat(o.css("padding-right"))-e}}else{l=o.width()}}b.scroller.setWidth(g.eq(k).add(h.eq(k)).add(m.eq(k)),l)}s.scroller_$container.find("."+a.scrollerReset).removeClass(a.scrollerReset);b.fixColumnWidth(q.table);g=t.children("colgroup");if(g.length){h=g[0].outerHTML;i.prepend(h);if(r.length){r.prepend(h)}}if(s.scroller_fixedColumns>0){b.scroller.updateFixed(q,s,true)}t.children("thead").find("."+a.filterRow).hide();n.show()},setupFixed:function(k,m){var h,j,r,i,p,n,q,e,o=k.$table,f=k.namespace+"tsscrollerFixed",g=m.scroller_$container,l=m.scroller_fixedColumns;n=g.addClass(a.scrollerHasFix).clone().addClass(a.scrollerFixed).removeClass(a.scrollerWrap).attr("id","");q=n.find("."+a.scrollerTable);q.find("table").addClass(k.namespace.slice(1)+"_extra_table").attr("id","");e=q.find("tbody");m.scroller_$fixedColumns=n;if(o.hasClass(a.scrollerRtl)){n.addClass(a.scrollerRtl)}r=n.find("tr");i=r.length;for(h=0;h<i;h++){r.eq(h).children(":gt("+(l-1)+")").remove()}n.hide().prependTo(g);if(k.$table.hasClass("hasFilters")){b.filter.bindSearch(o,n.find("."+a.filter));r=g.children("."+a.scrollerHeader).find("."+a.filter);i=r.length;for(h=0;h<i;h++){if(!r.eq(h).hasClass(a.filterDisabled||"disabled")){r.eq(h).prop("disabled",h<l)}}n.children("."+a.scrollerHeader).find("."+a.filter).css("pointer-events","all")}k.$table.children("thead").children("tr."+a.headerRow).children().attr("tabindex",-1);r=m.scroller_$header.add(n.find("."+a.scrollerTable+" table, ."+a.scrollerFooter+" table")).children("thead").children("tr."+a.headerRow);i=r.length;for(h=0;h<i;h++){p=r.eq(h).children();for(j=0;j<p.length;j++){p.eq(j).attr("tabindex",j<l?-1:0)}}b.bindEvents(k.table,n.find("."+a.header));p=("tablesorter-initialized sortEnd filterEnd ").split(" ").join(f+" ");k.$table.off(p).on(p,function(t,s){b.scroller.updateFixed(k,m,false)}).parent().off("scroll"+f).on("scroll"+f,function(){q.scrollTop(d(this).scrollTop())});q.off("scroll"+f).on("scroll"+f,function(){k.$table.parent().scrollTop(q.scrollTop())}).scroll();if(m.scroller_rowHighlight!==""){p="mouseover mouseleave ".split(" ").join(f+" ");k.$table.off(p,"tr").on(p,"tr",function(t){var s=d(this).index();e.children().eq(s).add(this).toggleClass(m.scroller_rowHighlight,t.type==="mouseover")});q.find("table").off(p,"tr").on(p,"tr",function(t){var s=d(this).index();k.$tbodies.children().eq(s).add(this).toggleClass(m.scroller_rowHighlight,t.type==="mouseover")})}if(b.scroller.isFirefox){q.wrap('<div class="scroller-firefox-hack" style="overflow:hidden;">')}b.scroller.updateFixed(k,m,true)},updateFixed:function(z,h){if(!z.isScrolling){return}z.$table.parent().width(h.scroller_$container.width());var l,s,p,u,f,t,m,q,o=z.$table,x=h.scroller_$container,B=h.scroller_$container.children("."+a.scrollerTable).children("table").children("tbody"),v=h.scroller_$header.children("thead").children("."+a.headerRow),n=h.scroller_$fixedColumns.hide(),j=n.find("."+a.scrollerTable).children("table"),w=j.children("tbody"),e=n.find("."+a.scrollerHeader).children("table").children("thead"),k=b.scroller.isFirefox,y=h.scroller_barSetWidth,D=h.scroller_fixedColumns,g=o.find("tbody td"),C=parseInt(g.css("border-right-width"),10)||1,A=parseInt(g.css("border-bottom-width"),10)||1,r=parseInt(g.css("border-spacing").split(/\s/)[0],10)/2||0,i=parseInt(o.css("padding-left"),10)+parseInt(o.css("padding-right"),10)-C;g=e.children("."+a.headerRow);for(l=0;l<g.length;l++){g.eq(l).height(v.eq(l).outerHeight())}v=(z.filteredRows>0?z.$tbodies:o.children("thead")).children("tr:visible");q=v.children(":lt("+D+")").map(function(){i+=d(this).outerWidth()+r;return d(this).outerWidth()}).get();b.scroller.setWidth(n.add(n.children()),i+C*2-r);b.scroller.setWidth(n.find("table"),i+C);n.height(x.height());if(h.scroller_$footer.length){g=x.children("."+a.scrollerFooter).find("tfoot tr");v=n.find("."+a.scrollerFooter+" tfoot tr");for(l=0;l<v.length;l++){v.eq(l).height(g.eq(l).height())}}n.find("."+a.scrollerTable).height(o.parent().height()-y+A);for(s=0;s<z.$tbodies.length;s++){u=B.eq(s);if(u.length){v=u.children();m=v.length;t=b.processTbody(j,w.eq(s),true);t.empty();for(p=0;p<m;p++){f=d(v[p].outerHTML);f.children("td, th").slice(D).remove();f.children().eq(0).height(v.eq(p).outerHeight()-(k?A*2:0));if(p===0){b.scroller.setWidth(f.children().eq(0),q[0])}t.append(f)}g=n.find("thead").children("tr."+a.headerRow);for(l=0;l<D;l++){b.scroller.setWidth(g.children(":eq("+l+")"),q[l])}b.processTbody(j,t,false)}}if(k){j.parent().css({width:i+y+C})}n.show()},remove:function(h,g){var e=g.scroller_$container,f=h.namespace+"tsscroller";h.$table.off(f).insertBefore(e).find("thead").show().css("visibility","visible").children("tr."+a.headerRow+" > *").attr("tabindex",0).end().find("."+a.filterRow).show().removeClass(a.filterRowHide);e.remove();d(c).off(f);h.isScrolling=false}}})(jQuery,window);