/*! Widget: filter, html5 formatter functions - updated 7/17/2014 (v2.17.5) */
;(function(c){var b=c.tablesorter||{},a=".compare-select",d=b.filterFormatter=c.extend({},b.filterFormatter,{addCompare:function(j,i,g){if(g.compare&&c.isArray(g.compare)&&g.compare.length>1){var h="",f=[a.slice(1)," "+a.slice(1),""],e=g.cellText?'<label class="'+f.join("-label")+i+'">'+g.cellText+"</label>":"";c.each(g.compare,function(k,l){h+="<option "+(g.selected===k?"selected":"")+">"+l+"</option>"});j.wrapInner('<div class="'+f.join("-wrapper")+i+'" />').prepend(e+'<select class="'+f.join("")+i+'" />').find("select").append(h)}},updateCompare:function(g,j,i){var h=j.val()||"",e=h.replace(/\s*?[><=]\s*?/g,""),f=h.match(/[><=]/g)||"";if(i.compare){if(c.isArray(i.compare)){f=(f||[]).join("")||i.compare[i.selected||0]}g.find(a).val(f)}return[h,e]},html5Number:function(k,g,p){var n,e=c.extend({value:0,min:0,max:100,step:1,delayed:true,disabled:false,addToggle:false,exactMatch:false,cellText:"",compare:"",skipTest:false},p),j,m=c('<input type="number" style="visibility:hidden;" value="test">').appendTo(k),f=e.skipTest||m.attr("type")==="number"&&m.val()!=="test",h=[],i=k.closest("table")[0].config,l=function(r,u){var s=e.addToggle?k.find(".toggle").is(":checked"):true,o=k.find(".number").val(),t=(c.isArray(e.compare)?k.find(a).val()||e.compare[e.selected||0]:e.compare)||"",q=i.$table[0].hasInitialized?(r?r:e.delayed)||"":true;j.val(!e.addToggle||s?(t?t:e.exactMatch?"=":"")+o:"").trigger(u?"":"search",q).end().find(".number").val(o);if(k.find(".number").length){k.find(".number")[0].disabled=(e.disabled||!s)}if(h.length){h.find(".number").val(o)[0].disabled=(e.disabled||!s);h.find(a).val(t);if(e.addToggle){h.find(".toggle")[0].checked=s}}};m.remove();if(f){n=e.addToggle?'<div class="button"><input id="html5button'+g+'" type="checkbox" class="toggle" /><label for="html5button'+g+'"></label></div>':"";n+='<input class="number" type="number" min="'+e.min+'" max="'+e.max+'" value="'+e.value+'" step="'+e.step+'" />';k.append(n+'<input type="hidden" />').find(".toggle, .number").bind("change",function(){l()}).closest("thead").find("th[data-column="+g+"]").addClass("filter-parsed").closest("table").bind("filterReset",function(){if(c.isArray(e.compare)){k.add(h).find(a).val(e.compare[e.selected||0])}if(e.addToggle){k.find(".toggle")[0].checked=false;if(h.length){h.find(".toggle")[0].checked=false}}k.find(".number").val(e.value);setTimeout(function(){l()},0)});j=k.find("input[type=hidden]").bind("change",function(){k.find(".number").val(this.value);l()});i.$table.bind("filterFomatterUpdate",function(){var o=d.updateCompare(k,j,e)[0]||e.value;k.find(".number").val(((o||"")+"").replace(/[><=]/g,""));l(false,true);b.filter.formatterUpdated(k,g)});if(e.compare){d.addCompare(k,g,e);k.find(a).bind("change",function(){l()})}i.$table.bind("stickyHeadersInit",function(){h=i.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(g).empty();h.append(n).find(".toggle, .number").bind("change",function(){k.find(".number").val(c(this).val());l()});if(e.compare){d.addCompare(h,g,e);h.find(a).bind("change",function(){k.find(a).val(c(this).val());l()})}l()});l()}return f?k.find('input[type="hidden"]'):c('<input type="search">')},html5Range:function(m,h,n){var e=c.extend({value:0,min:0,max:100,step:1,delayed:true,valueToHeader:true,exactMatch:true,cellText:"",compare:"",allText:"all",skipTest:false},n),l,g=c('<input type="range" style="visibility:hidden;" value="test">').appendTo(m),i=e.skipTest||g.attr("type")==="range"&&g.val()!=="test",j=[],k=m.closest("table")[0].config,f=function(o,q,u){o=(typeof o==="undefined"?l.val():o).toString().replace(/[<>=]/g,"")||e.value;var s=(c.isArray(e.compare)?m.find(a).val()||e.compare[e.selected||0]:e.compare)||"",r=" ("+(s?s+o:o==e.min?e.allText:o)+")",p=k.$table[0].hasInitialized?(q?q:e.delayed)||"":true;m.find("input[type=hidden]").val((s?s+o:(o==e.min?"":(e.exactMatch?"=":"")+o))).trigger(u?"":"search",p).end().find(".range").val(o);m.closest("thead").find("th[data-column="+h+"]").find(".curvalue").html(r);if(j.length){j.find(".range").val(o).end().find(a).val(s);j.closest("thead").find("th[data-column="+h+"]").find(".curvalue").html(r)}};g.remove();if(i){m.html('<input type="hidden"><input class="range" type="range" min="'+e.min+'" max="'+e.max+'" value="'+e.value+'" />').closest("thead").find("th[data-column="+h+"]").addClass("filter-parsed").find(".tablesorter-header-inner").append('<span class="curvalue" />');l=m.find("input[type=hidden]").bind("change"+k.namespace+"filter",function(){var o=this.value,p=(c.isArray(e.compare)?m.find(a).val()||e.compare[e.selected||0]:e.compare)||"";if(o!==this.lastValue){this.lastValue=(p?p+o:(o==e.min?"":(e.exactMatch?"=":"")+o));this.value=this.lastValue;f(o)}});m.find(".range").bind("change",function(){f(this.value)});k.$table.bind("filterFomatterUpdate",function(){var o=d.updateCompare(m,l,e)[0];m.find(".range").val(o);f(o,false,true);b.filter.formatterUpdated(m,h)});if(e.compare){d.addCompare(m,h,e);m.find(a).bind("change",function(){f()})}k.$table.bind("stickyHeadersInit",function(){j=k.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(h).empty();j.html('<input class="range" type="range" min="'+e.min+'" max="'+e.max+'" value="'+e.value+'" />').find(".range").bind("change",function(){f(j.find(".range").val())});f();if(e.compare){d.addCompare(j,h,e);j.find(a).bind("change",function(){m.find(a).val(c(this).val());f()})}});m.closest("table").bind("filterReset",function(){if(c.isArray(e.compare)){m.add(j).find(a).val(e.compare[e.selected||0])}setTimeout(function(){f(e.value,false,true)},0)});f()}return i?m.find('input[type="hidden"]'):c('<input type="search">')},html5Color:function(n,j,i){var p,e=c.extend({value:"#000000",disabled:false,addToggle:true,exactMatch:true,valueToHeader:false,skipTest:false},i),m,h=c('<input type="color" style="visibility:hidden;" value="test">').appendTo(n),g=e.skipTest||h.attr("type")==="color"&&h.val()!=="test",k=[],l=n.closest("table")[0].config,f=function(o,s){o=(typeof o==="undefined"?m.val():o).toString().replace("=","")||e.value;var r=true,q=" ("+o+")";if(e.addToggle){r=n.find(".toggle").is(":checked")}if(n.find(".colorpicker").length){n.find(".colorpicker").val(o)[0].disabled=(e.disabled||!r)}m.val(r?o+(e.exactMatch?"=":""):"").trigger(!l.$table[0].hasInitialized||s?"":"search");if(e.valueToHeader){n.closest("thead").find("th[data-column="+j+"]").find(".curcolor").html(q)}else{n.find(".currentColor").html(q)}if(k.length){k.find(".colorpicker").val(o)[0].disabled=(e.disabled||!r);if(e.addToggle){k.find(".toggle")[0].checked=r}if(e.valueToHeader){k.closest("thead").find("th[data-column="+j+"]").find(".curcolor").html(q)}else{k.find(".currentColor").html(q)}}};h.remove();if(g){p=""+j+Math.round(Math.random()*100);p='<div class="color-controls-wrapper">'+(e.addToggle?'<div class="button"><input id="colorbutton'+p+'" type="checkbox" class="toggle" /><label for="colorbutton'+p+'"></label></div>':"")+'<input type="hidden"><input class="colorpicker" type="color" />'+(e.valueToHeader?"":'<span class="currentColor">(#000000)</span>')+"</div>";n.html(p);if(e.valueToHeader){n.closest("thead").find("th[data-column="+j+"]").find(".tablesorter-header-inner").append('<span class="curcolor" />')}n.find(".toggle, .colorpicker").bind("change",function(){f(n.find(".colorpicker").val())});m=n.find("input[type=hidden]").bind("change"+l.namespace+"filter",function(){f(this.value)});l.$table.bind("filterFomatterUpdate",function(){f(m.val(),true);b.filter.formatterUpdated(n,j)});n.closest("table").bind("filterReset",function(){if(e.addToggle){n.find(".toggle")[0].checked=false}setTimeout(function(){f()},0)});l.$table.bind("stickyHeadersInit",function(){k=l.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(j);k.html(p).find(".toggle, .colorpicker").bind("change",function(){f(k.find(".colorpicker").val())});f(k.find(".colorpicker").val())});f(e.value)}return g?n.find('input[type="hidden"]'):c('<input type="search">')}})})(jQuery);