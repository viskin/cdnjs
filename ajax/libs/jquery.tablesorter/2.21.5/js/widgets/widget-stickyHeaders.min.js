/*! Widget: stickyHeaders - updated 3/26/2015 (v2.21.3) */
;(function(c,b){var a=c.tablesorter=c.tablesorter||{};c.extend(a.css,{sticky:"tablesorter-stickyHeader",stickyVis:"tablesorter-sticky-visible",stickyHide:"tablesorter-sticky-hidden",stickyWrap:"tablesorter-sticky-wrapper"});a.addHeaderResizeEvent=function(k,g,e){k=c(k)[0];var d,f={timer:250},l=c.extend({},f,e),h=k.config,j=h.widgetOptions,i=function(m){j.resize_flag=true;d=[];h.$headers.each(function(){var o=c(this),q=o.data("savedSizes")||[0,0],p=this.offsetWidth,n=this.offsetHeight;if(p!==q[0]||n!==q[1]){o.data("savedSizes",[p,n]);d.push(this)}});if(d.length&&m!==false){h.$table.trigger("resize",[d])}j.resize_flag=false};i(false);clearInterval(j.resize_timer);if(g){j.resize_flag=false;return false}j.resize_timer=setInterval(function(){if(j.resize_flag){return}i()},l.timer)};a.addWidget({id:"stickyHeaders",priority:60,options:{stickyHeaders:"",stickyHeaders_attachTo:null,stickyHeaders_xScroll:null,stickyHeaders_yScroll:null,stickyHeaders_offset:0,stickyHeaders_filteredToTop:true,stickyHeaders_cloneId:"-sticky",stickyHeaders_addResizeEvent:true,stickyHeaders_includeCaption:true,stickyHeaders_zIndex:2},format:function(t,u,g){if(u.$table.hasClass("hasStickyHeaders")||(c.inArray("filter",u.widgets)>=0&&!u.$table.hasClass("hasFilters"))){return}var o=u.$table,y=c(g.stickyHeaders_attachTo),q=u.namespace+"stickyheaders ",r=c(g.stickyHeaders_yScroll||g.stickyHeaders_attachTo||b),j=c(g.stickyHeaders_xScroll||g.stickyHeaders_attachTo||b),n=o.children("thead:first"),w=n.children("tr").not(".sticky-false").children(),e=o.children("tfoot"),i=isNaN(g.stickyHeaders_offset)?c(g.stickyHeaders_offset):"",l=i.length?i.height()||0:parseInt(g.stickyHeaders_offset,10)||0,v=o.parent().closest("."+a.css.table).hasClass("hasStickyHeaders")?o.parent().closest("table.tablesorter")[0].config.widgetOptions.$sticky.parent():[],s=v.length?v.height():0,z=g.$sticky=o.clone().addClass("containsStickyHeaders "+a.css.sticky+" "+g.stickyHeaders+" "+u.namespace.slice(1)+"_extra_table").wrap('<div class="'+a.css.stickyWrap+'">'),m=z.parent().addClass(a.css.stickyHide).css({position:y.length?"absolute":"fixed",padding:parseInt(z.parent().parent().css("padding-left"),10),top:l+s,left:0,visibility:"hidden",zIndex:g.stickyHeaders_zIndex||2}),x=z.children("thead:first"),k,p="",h=0,d=function(A,B){A.filter(":visible").each(function(D){var E,C,F=B.filter(":visible").eq(D),G=c(this);if(G.css("box-sizing")==="border-box"){E=G.outerWidth()}else{if(F.css("border-collapse")==="collapse"){if(b.getComputedStyle){E=parseFloat(b.getComputedStyle(this,null).width)}else{C=parseFloat(G.css("border-width"));E=G.outerWidth()-parseFloat(G.css("padding-left"))-parseFloat(G.css("padding-right"))-C}}else{E=G.width()}}F.css({"min-width":E,"max-width":E})})},f=function(){l=i.length?i.height()||0:parseInt(g.stickyHeaders_offset,10)||0;h=0;m.css({left:y.length?parseInt(y.css("padding-left"),10)||0:o.offset().left-parseInt(o.css("margin-left"),10)-j.scrollLeft()-h,width:o.outerWidth()});d(o,z);d(w,k)};if(y.length&&!y.css("position")){y.css("position","relative")}if(z.attr("id")){z[0].id+=g.stickyHeaders_cloneId}z.find("thead:gt(0), tr.sticky-false").hide();z.find("tbody, tfoot").remove();z.find("caption").toggle(g.stickyHeaders_includeCaption);k=x.children().children();z.css({height:0,width:0,margin:0});k.find("."+a.css.resizer).remove();o.addClass("hasStickyHeaders").bind("pagerComplete"+q,function(){f()});a.bindEvents(t,x.children().children("."+a.css.header));o.after(m);if(u.onRenderHeader){x.children("tr").children().each(function(A){u.onRenderHeader.apply(c(this),[A,u,z])})}j.add(r).unbind(("scroll resize ".split(" ").join(q)).replace(/\s+/g," ")).bind("scroll resize ".split(" ").join(q),function(E){if(!o.is(":visible")){return}s=v.length?v.offset().top-r.scrollTop()+v.height():0;var G=o.offset(),D=c.isWindow(r[0]),C=c.isWindow(j[0]),F=(y.length?(D?r.scrollTop():r.offset().top):r.scrollTop())+l+s,B=o.height()-(m.height()+(e.height()||0)),A=(F>G.top)&&(F<G.top+B)?"visible":"hidden",H={visibility:A};if(y.length){H.top=D?F-y.offset().top:y.scrollTop()}if(C){H.left=o.offset().left-parseInt(o.css("margin-left"),10)-j.scrollLeft()-h}if(v.length){H.top=(H.top||0)+l+s}m.removeClass(a.css.stickyVis+" "+a.css.stickyHide).addClass(A==="visible"?a.css.stickyVis:a.css.stickyHide).css(H);if(A!==p||E.type==="resize"){f();p=A}});if(g.stickyHeaders_addResizeEvent){a.addHeaderResizeEvent(t)}if(o.hasClass("hasFilters")&&g.filter_columnFilters){o.bind("filterEnd"+q,function(){var B=c(document.activeElement).closest("td"),A=B.parent().children().index(B);if(m.hasClass(a.css.stickyVis)&&g.stickyHeaders_filteredToTop){b.scrollTo(0,o.position().top);if(A>=0&&u.$filters){u.$filters.eq(A).find("a, select, input").filter(":visible").focus()}}});a.filter.bindSearch(o,k.find("."+a.css.filter));if(g.filter_hideFilters){a.filter.hideFilters(z,u)}}o.trigger("stickyHeadersInit")},remove:function(f,g,e){var d=g.namespace+"stickyheaders ";g.$table.removeClass("hasStickyHeaders").unbind(("pagerComplete filterEnd ".split(" ").join(d)).replace(/\s+/g," ")).next("."+a.css.stickyWrap).remove();if(e.$sticky&&e.$sticky.length){e.$sticky.remove()}c(b).add(e.stickyHeaders_xScroll).add(e.stickyHeaders_yScroll).add(e.stickyHeaders_attachTo).unbind(("scroll resize ".split(" ").join(d)).replace(/\s+/g," "));a.addHeaderResizeEvent(f,false)}})})(jQuery,window);