!function(e){"use strict";var t=e.tablesorter=e.tablesorter||{},r=t.css;e.extend(r,{filterRow:"tablesorter-filter-row",filter:"tablesorter-filter",filterDisabled:"disabled",filterRowHide:"hideme"}),t.addWidget({id:"filter",priority:50,options:{filter_childRows:!1,filter_columnFilters:!0,filter_columnAnyMatch:!0,filter_cellFilter:"",filter_cssFilter:"",filter_defaultFilter:{},filter_excludeFilter:{},filter_external:"",filter_filteredRow:"filtered",filter_formatter:null,filter_functions:null,filter_hideEmpty:!0,filter_hideFilters:!1,filter_ignoreCase:!0,filter_liveSearch:!0,filter_onlyAvail:"filter-onlyAvail",filter_placeholder:{search:"",select:""},filter_reset:null,filter_saveFilters:!1,filter_searchDelay:300,filter_searchFiltered:!0,filter_selectSource:null,filter_startsWith:!1,filter_useParsedData:!1,filter_serversideFiltering:!1,filter_defaultAttrib:"data-value",filter_selectSourceSeparator:"|"},format:function(e,r,i){r.$table.hasClass("hasFilters")||t.filter.init(e,r,i)},remove:function(i,l,a,n){var s,f,o=l.$table,c=l.$tbodies,d="addRows updateCell update updateRows updateComplete appendCache filterReset filterEnd search ".split(" ").join(l.namespace+"filter ");if(o.removeClass("hasFilters").unbind(d.replace(/\s+/g," ")).find("."+r.filterRow).remove(),!n){for(s=0;s<c.length;s++)f=t.processTbody(i,c.eq(s),!0),f.children().removeClass(a.filter_filteredRow).show(),t.processTbody(i,f,!1);a.filter_reset&&e(document).undelegate(a.filter_reset,"click.tsfilter")}}}),t.filter={regex:{regex:/^\/((?:\\\/|[^\/])+)\/([mig]{0,3})?$/,child:/tablesorter-childRow/,filtered:/filtered/,type:/undefined|number/,exact:/(^[\"\'=]+)|([\"\'=]+$)/g,nondigit:/[^\w,. \-()]/g,operators:/[<>=]/g,query:"(q|query)"},types:{regex:function(e,r){if(t.filter.regex.regex.test(r.iFilter)){var i,l=t.filter.regex.regex.exec(r.iFilter);try{i=new RegExp(l[1],l[2]).test(r.iExact)}catch(a){i=!1}return i}return null},operators:function(r,i){if(/^[<>]=?/.test(i.iFilter)){var l,a,n=r.table,s=i.index,f=i.parsed[s],o=t.formatFloat(i.iFilter.replace(t.filter.regex.operators,""),n),c=r.parsers[s],d=o;return(f||"numeric"===c.type)&&(a=t.filter.parseFilter(r,e.trim(""+i.iFilter.replace(t.filter.regex.operators,"")),s,f,!0),o="number"!=typeof a||""===a||isNaN(a)?o:a),l=!f&&"numeric"!==c.type||isNaN(o)||"undefined"==typeof i.cache?isNaN(i.iExact)?t.formatFloat(i.iExact.replace(t.filter.regex.nondigit,""),n):t.formatFloat(i.iExact,n):i.cache,/>/.test(i.iFilter)&&(a=/>=/.test(i.iFilter)?l>=o:l>o),/</.test(i.iFilter)&&(a=/<=/.test(i.iFilter)?o>=l:o>l),a||""!==d||(a=!0),a}return null},notMatch:function(r,i){if(/^\!/.test(i.iFilter)){var l,a=t.filter.parseFilter(r,i.iFilter.replace("!",""),i.index,i.parsed[i.index])||"";return t.filter.regex.exact.test(a)?(a=a.replace(t.filter.regex.exact,""),""===a?!0:e.trim(a)!==i.iExact):(l=i.iExact.search(e.trim(a)),""===a?!0:!(r.widgetOptions.filter_startsWith?0===l:l>=0))}return null},exact:function(r,i){if(t.filter.regex.exact.test(i.iFilter)){var l=t.filter.parseFilter(r,i.iFilter.replace(t.filter.regex.exact,""),i.index,i.parsed[i.index])||"";return i.anyMatch?e.inArray(l,i.rowArray)>=0:l==i.iExact}return null},and:function(r,i){if(t.filter.regex.andTest.test(i.filter)){for(var l=i.index,a=i.parsed[l],n=i.iFilter.split(t.filter.regex.andSplit),s=i.iExact.search(e.trim(t.filter.parseFilter(r,n[0],l,a)))>=0,f=n.length-1;s&&f;)s=s&&i.iExact.search(e.trim(t.filter.parseFilter(r,n[f],l,a)))>=0,f--;return s}return null},range:function(e,r){if(t.filter.regex.toTest.test(r.iFilter)){var i,l,a=e.table,n=r.index,s=r.parsed[n],f=r.iFilter.split(t.filter.regex.toSplit),o=t.formatFloat(t.filter.parseFilter(e,f[0].replace(t.filter.regex.nondigit,"")||"",n,s),a),c=t.formatFloat(t.filter.parseFilter(e,f[1].replace(t.filter.regex.nondigit,"")||"",n,s),a);return(s||"numeric"===e.parsers[n].type)&&(i=e.parsers[n].format(""+f[0],a,e.$headers.eq(n),n),o=""===i||isNaN(i)?o:i,i=e.parsers[n].format(""+f[1],a,e.$headers.eq(n),n),c=""===i||isNaN(i)?c:i),i=!s&&"numeric"!==e.parsers[n].type||isNaN(o)||isNaN(c)?isNaN(r.iExact)?t.formatFloat(r.iExact.replace(t.filter.regex.nondigit,""),a):t.formatFloat(r.iExact,a):r.cache,o>c&&(l=o,o=c,c=l),i>=o&&c>=i||""===o||""===c}return null},wild:function(r,i){if(/[\?\*\|]/.test(i.iFilter)||t.filter.regex.orReplace.test(i.filter)){var l=i.index,a=i.parsed[l],n=t.filter.parseFilter(r,i.iFilter.replace(t.filter.regex.orReplace,"|"),l,a)||"";return!r.$headerIndexed[l].hasClass("filter-match")&&/\|/.test(n)&&("|"===n[n.length-1]&&(n+="*"),n=i.anyMatch&&e.isArray(i.rowArray)?"("+n+")":"^("+n+")$"),new RegExp(n.replace(/\?/g,"\\S{1}").replace(/\*/g,"\\S*")).test(i.iExact)}return null},fuzzy:function(e,r){if(/^~/.test(r.iFilter)){var i,l=0,a=r.iExact.length,n=t.filter.parseFilter(e,r.iFilter.slice(1),r.index,r.parsed[r.index])||"";for(i=0;a>i;i++)r.iExact[i]===n[l]&&(l+=1);return l===n.length?!0:!1}return null}},init:function(i,l,a){t.language=e.extend(!0,{},{to:"to",or:"or",and:"and"},t.language);var n,s,f,o,c,d,u,p,h,g=t.filter.regex;if(l.$table.addClass("hasFilters"),a.searchTimer=null,a.filter_initTimer=null,a.filter_formatterCount=0,a.filter_formatterInit=[],a.filter_anyColumnSelector='[data-column="all"],[data-column="any"]',a.filter_multipleColumnSelector='[data-column*="-"],[data-column*=","]',f="\\{"+t.filter.regex.query+"\\}",e.extend(g,{child:new RegExp(l.cssChildRow),filtered:new RegExp(a.filter_filteredRow),alreadyFiltered:new RegExp("(\\s+("+t.language.or+"|-|"+t.language.to+")\\s+)","i"),toTest:new RegExp("\\s+(-|"+t.language.to+")\\s+","i"),toSplit:new RegExp("(?:\\s+(?:-|"+t.language.to+")\\s+)","gi"),andTest:new RegExp("\\s+("+t.language.and+"|&&)\\s+","i"),andSplit:new RegExp("(?:\\s+(?:"+t.language.and+"|&&)\\s+)","gi"),orReplace:new RegExp("\\s+("+t.language.or+")\\s+","gi"),iQuery:new RegExp(f,"i"),igQuery:new RegExp(f,"ig")}),a.filter_columnFilters!==!1&&l.$headers.filter(".filter-false, .parser-false").length!==l.$headers.length&&t.filter.buildRow(i,l,a),f="addRows updateCell update updateRows updateComplete appendCache filterReset filterEnd search ".split(" ").join(l.namespace+"filter "),l.$table.bind(f,function(n,s){return u=a.filter_hideEmpty&&e.isEmptyObject(l.cache)&&!(l.delayInit&&"appendCache"===n.type),l.$table.find("."+r.filterRow).toggleClass(a.filter_filteredRow,u),/(search|filter)/.test(n.type)||(n.stopPropagation(),t.filter.buildDefault(i,!0)),"filterReset"===n.type?(l.$table.find("."+r.filter).add(a.filter_$externalFilters).val(""),t.filter.searching(i,[])):"filterEnd"===n.type?t.filter.buildDefault(i,!0):(s="search"===n.type?s:"updateComplete"===n.type?l.$table.data("lastSearch"):"",/(update|add)/.test(n.type)&&"updateComplete"!==n.type&&(l.lastCombinedFilter=null,l.lastSearch=[]),t.filter.searching(i,s,!0)),!1}),a.filter_reset&&(a.filter_reset instanceof e?a.filter_reset.click(function(){l.$table.trigger("filterReset")}):e(a.filter_reset).length&&e(document).undelegate(a.filter_reset,"click.tsfilter").delegate(a.filter_reset,"click.tsfilter",function(){l.$table.trigger("filterReset")})),a.filter_functions)for(c=0;c<l.columns;c++)if(p=t.getColumnData(i,a.filter_functions,c))if(o=l.$headerIndexed[c].removeClass("filter-select"),h=!(o.hasClass("filter-false")||o.hasClass("parser-false")),n="",p===!0&&h)t.filter.buildSelect(i,c);else if("object"==typeof p&&h){for(s in p)"string"==typeof s&&(n+=""===n?'<option value="">'+(o.data("placeholder")||o.attr("data-placeholder")||a.filter_placeholder.select||"")+"</option>":"",u=s,f=s,s.indexOf(a.filter_selectSourceSeparator)>=0&&(u=s.split(a.filter_selectSourceSeparator),f=u[1],u=u[0]),n+="<option "+(f===u?"":'data-function-name="'+s+'" ')+'value="'+u+'">'+f+"</option>");l.$table.find("thead").find("select."+r.filter+'[data-column="'+c+'"]').append(n)}t.filter.buildDefault(i,!0),t.filter.bindSearch(i,l.$table.find("."+r.filter),!0),a.filter_external&&t.filter.bindSearch(i,a.filter_external),a.filter_hideFilters&&t.filter.hideFilters(i,l),l.showProcessing&&l.$table.unbind("filterStart filterEnd ".split(" ").join(l.namespace+"filter ").replace(/\s+/g," ")).bind("filterStart filterEnd ".split(" ").join(l.namespace+"filter "),function(a,n){o=n?l.$table.find("."+r.header).filter("[data-column]").filter(function(){return""!==n[e(this).data("column")]}):"",t.isProcessing(i,"filterStart"===a.type,n?o:"")}),l.filteredRows=l.totalRows,l.$table.unbind("tablesorter-initialized pagerBeforeInitialized ".split(" ").join(l.namespace+"filter ").replace(/\s+/g," ")).bind("tablesorter-initialized pagerBeforeInitialized ".split(" ").join(l.namespace+"filter "),function(){var e=this.config.widgetOptions;d=t.filter.setDefaults(i,l,e)||[],d.length&&(l.delayInit&&""===d.join("")||t.setFilters(i,d,!0)),l.$table.trigger("filterFomatterUpdate"),setTimeout(function(){e.filter_initialized||t.filter.filterInitComplete(l)},100)}),l.pager&&l.pager.initialized&&!a.filter_initialized&&(l.$table.trigger("filterFomatterUpdate"),setTimeout(function(){t.filter.filterInitComplete(l)},100))},formatterUpdated:function(e,t){var r=e.closest("table")[0].config.widgetOptions;r.filter_initialized||(r.filter_formatterInit[t]=1)},filterInitComplete:function(r){var i,l,a=r.widgetOptions,n=0,s=function(){a.filter_initialized=!0,r.$table.trigger("filterInit",r),t.filter.findRows(r.table,r.$table.data("lastSearch")||[])};if(e.isEmptyObject(a.filter_formatter))s();else{for(l=a.filter_formatterInit.length,i=0;l>i;i++)1===a.filter_formatterInit[i]&&n++;clearTimeout(a.filter_initTimer),a.filter_initialized||n!==a.filter_formatterCount?a.filter_initialized||(a.filter_initTimer=setTimeout(function(){s()},500)):s()}},setDefaults:function(r,i,l){var a,n,s,f,o,c=t.getFilters(r)||[];if(l.filter_saveFilters&&t.storage&&(n=t.storage(r,"tablesorter-filters")||[],a=e.isArray(n),a&&""===n.join("")||!a||(c=n)),""===c.join(""))for(o=i.$headers.add(l.filter_$externalFilters).filter("["+l.filter_defaultAttrib+"]"),s=0;s<=i.columns;s++)f=s===i.columns?"all":s,c[s]=o.filter('[data-column="'+f+'"]').attr(l.filter_defaultAttrib)||c[s]||"";return i.$table.data("lastSearch",c),c},parseFilter:function(e,t,r,i,l){return l||i?e.parsers[r].format(t,e.table,[],r):t},buildRow:function(i,l,a){var n,s,f,o,c,d,u,p=l.columns,h=e.isArray(a.filter_cellFilter),g='<tr role="row" class="'+r.filterRow+" "+l.cssIgnoreRow+'">';for(s=0;p>s;s++)g+=h?"<td"+(a.filter_cellFilter[s]?' class="'+a.filter_cellFilter[s]+'"':"")+"></td>":"<td"+(""!==a.filter_cellFilter?' class="'+a.filter_cellFilter+'"':"")+"></td>";for(l.$filters=e(g+="</tr>").appendTo(l.$table.children("thead").eq(0)).find("td"),s=0;p>s;s++)c=!1,f=l.$headerIndexed[s],u=t.getColumnData(i,a.filter_functions,s),o=a.filter_functions&&u&&"function"!=typeof u||f.hasClass("filter-select"),n=t.getColumnData(i,l.headers,s),c="false"===t.getData(f[0],n,"filter")||"false"===t.getData(f[0],n,"parser"),o?g=e("<select>").appendTo(l.$filters.eq(s)):(u=t.getColumnData(i,a.filter_formatter,s),u?(a.filter_formatterCount++,g=u(l.$filters.eq(s),s),g&&0===g.length&&(g=l.$filters.eq(s).children("input")),g&&(0===g.parent().length||g.parent().length&&g.parent()[0]!==l.$filters[s])&&l.$filters.eq(s).append(g)):g=e('<input type="search">').appendTo(l.$filters.eq(s)),g&&g.attr("placeholder",f.data("placeholder")||f.attr("data-placeholder")||a.filter_placeholder.search||"")),g&&(d=(e.isArray(a.filter_cssFilter)?"undefined"!=typeof a.filter_cssFilter[s]?a.filter_cssFilter[s]||"":"":a.filter_cssFilter)||"",g.addClass(r.filter+" "+d).attr("data-column",s),c&&(g.attr("placeholder","").addClass(r.filterDisabled)[0].disabled=!0))},bindSearch:function(r,i,l){if(r=e(r)[0],i=e(i),i.length){var a=r.config,n=a.widgetOptions,s=n.filter_$externalFilters;l!==!0&&(n.filter_$anyMatch=i.filter(n.filter_anyColumnSelector+","+n.filter_multipleColumnSelector),n.filter_$externalFilters=s&&s.length?n.filter_$externalFilters.add(i):i,t.setFilters(r,a.$table.data("lastSearch")||[],l===!1)),i.attr("data-lastSearchTime",(new Date).getTime()).unbind("keypress keyup search change ".split(" ").join(a.namespace+"filter ").replace(/\s+/g," ")).bind("keyup"+a.namespace+"filter",function(i){if(e(this).attr("data-lastSearchTime",(new Date).getTime()),27===i.which)this.value="";else{if(n.filter_liveSearch===!1)return;if(""!==this.value&&("number"==typeof n.filter_liveSearch&&this.value.length<n.filter_liveSearch||13!==i.which&&8!==i.which&&(i.which<32||i.which>=37&&i.which<=40)))return}t.filter.searching(r,!0,!0)}).bind("search change keypress ".split(" ").join(a.namespace+"filter "),function(i){var l=e(this).data("column");(13===i.which||"search"===i.type||"change"===i.type&&this.value!==a.lastSearch[l])&&(i.preventDefault(),e(this).attr("data-lastSearchTime",(new Date).getTime()),t.filter.searching(r,!1,!0))})}},searching:function(e,r,i){var l=e.config.widgetOptions;clearTimeout(l.searchTimer),"undefined"==typeof r||r===!0?l.searchTimer=setTimeout(function(){t.filter.checkFilters(e,r,i)},l.filter_liveSearch?l.filter_searchDelay:10):t.filter.checkFilters(e,r,i)},checkFilters:function(i,l,a){var n=i.config,s=n.widgetOptions,f=e.isArray(l),o=f?l:t.getFilters(i,!0),c=(o||[]).join("");return e.isEmptyObject(n.cache)?void(n.delayInit&&n.pager&&n.pager.initialized&&n.$table.trigger("updateCache",[function(){t.filter.checkFilters(i,!1,a)}])):(f&&(t.setFilters(i,o,!1,a!==!0),s.filter_initialized||(n.lastCombinedFilter="")),s.filter_hideFilters&&n.$table.find("."+r.filterRow).trigger(""===c?"mouseleave":"mouseenter"),n.lastCombinedFilter!==c||l===!1?(l===!1&&(n.lastCombinedFilter=null,n.lastSearch=[]),s.filter_initialized&&n.$table.trigger("filterStart",[o]),n.showProcessing?void setTimeout(function(){return t.filter.findRows(i,o,c),!1},30):(t.filter.findRows(i,o,c),!1)):void 0)},hideFilters:function(i,l){var a,n,s;e(i).find("."+r.filterRow).addClass(r.filterRowHide).bind("mouseenter mouseleave",function(t){var i=t;a=e(this),clearTimeout(s),s=setTimeout(function(){/enter|over/.test(i.type)?a.removeClass(r.filterRowHide):e(document.activeElement).closest("tr")[0]!==a[0]&&""===l.lastCombinedFilter&&a.addClass(r.filterRowHide)},200)}).find("input, select").bind("focus blur",function(i){n=e(this).closest("tr"),clearTimeout(s);var a=i;s=setTimeout(function(){""===t.getFilters(l.$table).join("")&&n["focus"===a.type?"removeClass":"addClass"](r.filterRowHide)},200)})},defaultFilter:function(r,i){if(""===r)return r;var l=t.filter.regex.iQuery,a=i.match(t.filter.regex.igQuery).length,n=a>1?e.trim(r).split(/\s/):[e.trim(r)],s=n.length-1,f=0,o=i;for(1>s&&a>1&&(n[1]=n[0]);l.test(o);)o=o.replace(l,n[f++]||""),l.test(o)&&s>f&&""!==(n[f]||"")&&(o=i.replace(l,o));return o},getLatestSearch:function(t){return t?t.sort(function(t,r){return e(r).attr("data-lastSearchTime")-e(t).attr("data-lastSearchTime")}):e()},multipleColumns:function(r,i){var l,a,n,s,f,o,c,d,u,p=r.widgetOptions,h=p.filter_initialized||!i.filter(p.filter_anyColumnSelector).length,g=[],m=e.trim(t.filter.getLatestSearch(i).attr("data-column")||"");if(h&&/-/.test(m))for(a=m.match(/(\d+)\s*-\s*(\d+)/g),u=a.length,d=0;u>d;d++){for(n=a[d].split(/\s*-\s*/),s=parseInt(n[0],10)||0,f=parseInt(n[1],10)||r.columns-1,s>f&&(l=s,s=f,f=l),f>=r.columns&&(f=r.columns-1);f>=s;s++)g.push(s);m=m.replace(a[d],"")}if(h&&/,/.test(m))for(o=m.split(/\s*,\s*/),u=o.length,c=0;u>c;c++)""!==o[c]&&(d=parseInt(o[c],10),d<r.columns&&g.push(d));if(!g.length)for(d=0;d<r.columns;d++)g.push(d);return g},findRows:function(r,i,l){if(r.config.lastCombinedFilter!==l&&r.config.widgetOptions.filter_initialized){var a,n,s,f,o,c,d,u,p,h,g,m,_,x,F,y,b,w,C,$,v,S,R,E,A,T,D,M,O=t.filter.regex,I=r.config,j=I.widgetOptions,z={anyMatch:!1},q=["range","notMatch","operators"];for(z.parsed=I.$headers.map(function(i){return I.parsers&&I.parsers[i]&&I.parsers[i].parsed||t.getData&&"parsed"===t.getData(I.$headerIndexed[i],t.getColumnData(r,I.headers,i),"filter")||e(this).hasClass("filter-parsed")}).get(),I.debug&&(t.log("Filter: Starting filter widget search",i),y=new Date),I.filteredRows=0,I.totalRows=0,l=(i||[]).join(""),o=0;o<I.$tbodies.length;o++){if(c=t.processTbody(r,I.$tbodies.eq(o),!0),p=I.columns,n=I.cache[o].normalized,s=e(e.map(n,function(e){return e[p].$row.get()})),""===l||j.filter_serversideFiltering)s.removeClass(j.filter_filteredRow).not("."+I.cssChildRow).css("display","");else{if(s=s.not("."+I.cssChildRow),a=s.length,(j.filter_$anyMatch&&j.filter_$anyMatch.length||"undefined"!=typeof i[I.columns])&&(z.anyMatchFlag=!0,z.anyMatchFilter=j.filter_$anyMatch&&t.filter.getLatestSearch(j.filter_$anyMatch).val()||""+i[I.columns]||"",j.filter_columnAnyMatch)){for(A=z.anyMatchFilter.split(t.filter.regex.andSplit),T=!1,w=0;w<A.length;w++)D=A[w].split(":"),D.length>1&&(M=parseInt(D[0],10)-1,M>=0&&M<I.columns&&(i[M]=D[1],A.splice(w,1),w--,T=!0));T&&(z.anyMatchFilter=A.join(" && "))}if($=j.filter_searchFiltered,g=I.lastSearch||I.$table.data("lastSearch")||[],$)for(w=0;p+1>w;w++)b=i[w]||"",$||(w=p),$=!(!$||!g.length||0!==b.indexOf(g[w]||"")||O.alreadyFiltered.test(b)||/[=\"\|!]/.test(b)||/(>=?\s*-\d)/.test(b)||/(<=?\s*\d)/.test(b)||""!==b&&I.$filters&&I.$filters.eq(w).find("select").length&&!I.$headerIndexed[w].hasClass("filter-match"));for(C=s.not("."+j.filter_filteredRow).length,$&&0===C&&($=!1),I.debug&&t.log("Filter: Searching through "+($&&a>C?C:"all")+" rows"),z.anyMatchFlag&&(I.sortLocaleCompare&&(z.anyMatchFilter=t.replaceAccents(z.anyMatchFilter)),j.filter_defaultFilter&&O.iQuery.test(t.getColumnData(r,j.filter_defaultFilter,I.columns,!0)||"")&&(z.anyMatchFilter=t.filter.defaultFilter(z.anyMatchFilter,t.getColumnData(r,j.filter_defaultFilter,I.columns,!0)),$=!1),z.iAnyMatchFilter=j.filter_ignoreCase&&I.ignoreCase?z.anyMatchFilter.toLocaleLowerCase():z.anyMatchFilter),f=0;a>f;f++)if(z.cacheArray=n[f],h=s[f].className,!(O.child.test(h)||$&&O.filtered.test(h))){if(F=!0,h=s.eq(f).nextUntil("tr:not(."+I.cssChildRow+")"),z.childRowText=h.length&&j.filter_childRows?h.text():"",z.childRowText=j.filter_ignoreCase?z.childRowText.toLocaleLowerCase():z.childRowText,d=s.eq(f).children(),z.anyMatchFlag){if(p=t.filter.multipleColumns(I,j.filter_$anyMatch),z.anyMatch=!0,z.rowArray=d.map(function(r){if(e.inArray(r,p)>-1){var i;return z.parsed[r]?i=z.cacheArray[r]:(i=this?this.getAttribute(I.textAttribute)||this.textContent||e(this).text():"",i=e.trim(j.filter_ignoreCase?i.toLowerCase():i),I.sortLocaleCompare&&(i=t.replaceAccents(i))),i}}).get(),z.filter=z.anyMatchFilter,z.iFilter=z.iAnyMatchFilter,z.exact=z.rowArray.join(" "),z.iExact=j.filter_ignoreCase?z.exact.toLowerCase():z.exact,z.cache=z.cacheArray.slice(0,-1).join(" "),v=null,e.each(t.filter.types,function(t,r){return e.inArray(t,q)<0&&(_=r(I,z),null!==_)?(v=_,!1):void 0}),null!==v)F=v;else if(j.filter_startsWith)for(F=!1,p=I.columns;!F&&p>0;)p--,F=F||0===z.rowArray[p].indexOf(z.iFilter);else F=(z.iExact+z.childRowText).indexOf(z.iFilter)>=0;z.anyMatch=!1}for(p=0;p<I.columns;p++)z.filter=i[p],z.index=p,S=(t.getColumnData(r,j.filter_excludeFilter,p,!0)||"").split(/\s+/),z.filter&&(z.cache=z.cacheArray[p],j.filter_useParsedData||z.parsed[p]?z.exact=z.cache:(b=d[p],x=b?e.trim(b.getAttribute(I.textAttribute)||b.textContent||d.eq(p).text()):"",z.exact=I.sortLocaleCompare?t.replaceAccents(x):x),z.iExact=!O.type.test(typeof z.exact)&&j.filter_ignoreCase?z.exact.toLocaleLowerCase():z.exact,x=F,E=j.filter_columnFilters?I.$filters.add(I.$externalFilters).filter('[data-column="'+p+'"]').find("select option:selected").attr("data-function-name")||"":"",I.sortLocaleCompare&&(z.filter=t.replaceAccents(z.filter)),b=!0,j.filter_defaultFilter&&O.iQuery.test(t.getColumnData(r,j.filter_defaultFilter,p)||"")&&(z.filter=t.filter.defaultFilter(z.filter,t.getColumnData(r,j.filter_defaultFilter,p)),b=!1),z.iFilter=j.filter_ignoreCase?(z.filter||"").toLocaleLowerCase():z.filter,R=t.getColumnData(r,j.filter_functions,p),u=I.$headerIndexed[p],m=u.hasClass("filter-select"),R||m&&b?R===!0||m?x=u.hasClass("filter-match")?z.iExact.search(z.iFilter)>=0:z.filter===z.exact:"function"==typeof R?x=R(z.exact,z.cache,z.filter,p,s.eq(f),I):"function"==typeof R[E||z.filter]&&(x=R[E||z.filter](z.exact,z.cache,z.filter,p,s.eq(f),I)):(v=null,e.each(t.filter.types,function(t,r){return e.inArray(t,S)<0&&(_=r(I,z),null!==_)?(v=_,!1):void 0}),null!==v?x=v:(z.exact=(z.iExact+z.childRowText).indexOf(t.filter.parseFilter(I,z.iFilter,p,z.parsed[p])),x=!j.filter_startsWith&&z.exact>=0||j.filter_startsWith&&0===z.exact)),F=x?F:!1);s.eq(f).toggleClass(j.filter_filteredRow,!F)[0].display=F?"":"none",h.length&&h.toggleClass(j.filter_filteredRow,!F)}}I.filteredRows+=s.not("."+j.filter_filteredRow).length,I.totalRows+=s.length,t.processTbody(r,c,!1)}I.lastCombinedFilter=l,I.lastSearch=i,I.$table.data("lastSearch",i),j.filter_saveFilters&&t.storage&&t.storage(r,"tablesorter-filters",i),I.debug&&t.benchmark("Completed filter widget search",y),j.filter_initialized&&I.$table.trigger("filterEnd",I),setTimeout(function(){I.$table.trigger("applyWidgets")},0)}},getOptionSource:function(r,i,l){r=e(r)[0];var a,n,s,f=r.config,o=f.widgetOptions,c=[],d=!1,u=o.filter_selectSource,p=f.$table.data("lastSearch")||[],h=e.isFunction(u)?!0:t.getColumnData(r,u,i);if(l&&""!==p[i]&&(l=!1),h===!0)d=u(r,i,l);else{if(h instanceof e||"string"===e.type(h)&&h.indexOf("</option>")>=0)return h;e.isArray(h)?d=h:"object"===e.type(u)&&h&&(d=h(r,i,l))}if(d===!1&&(d=t.filter.getOptions(r,i,l)),d=e.grep(d,function(t,r){return e.inArray(t,d)===r}),f.$headerIndexed[i].hasClass("filter-select-nosort"))return d;for(s=d.length,n=0;s>n;n++)c.push({t:d[n],p:f.parsers&&f.parsers[i].format(d[n],r,[],i)});for(a=f.textSorter||"",c.sort(function(l,n){var s=l.p.toString(),f=n.p.toString();return e.isFunction(a)?a(s,f,!0,i,r):"object"==typeof a&&a.hasOwnProperty(i)?a[i](s,f,!0,i,r):t.sortNatural?t.sortNatural(s,f):!0}),d=[],s=c.length,n=0;s>n;n++)d.push(c[n].t);return d},getOptions:function(t,r,i){t=e(t)[0];var l,a,n,s,f,o,c=t.config,d=c.widgetOptions,u=[];for(a=0;a<c.$tbodies.length;a++)for(f=c.cache[a],n=c.cache[a].normalized.length,l=0;n>l;l++)s=f.row?f.row[l]:f.normalized[l][c.columns].$row[0],i&&s.className.match(d.filter_filteredRow)||(d.filter_useParsedData||c.parsers[r].parsed||c.$headerIndexed[r].hasClass("filter-parsed")?u.push(""+f.normalized[l][r]):(o=s.cells[r],o&&u.push(e.trim(o.getAttribute(c.textAttribute)||o.textContent||e(o).text()))));return u},buildSelect:function(i,l,a,n,s){if(i=e(i)[0],l=parseInt(l,10),i.config.cache&&!e.isEmptyObject(i.config.cache)){var f,o,c,d,u,p,h=i.config,g=h.widgetOptions,m=h.$headerIndexed[l],_='<option value="">'+(m.data("placeholder")||m.attr("data-placeholder")||g.filter_placeholder.select||"")+"</option>",x=h.$table.find("thead").find("select."+r.filter+'[data-column="'+l+'"]').val();if(("undefined"==typeof a||""===a)&&(a=t.filter.getOptionSource(i,l,s)),e.isArray(a)){for(f=0;f<a.length;f++)c=a[f]=(""+a[f]).replace(/\"/g,"&quot;"),o=c,c.indexOf(g.filter_selectSourceSeparator)>=0&&(d=c.split(g.filter_selectSourceSeparator),o=d[0],c=d[1]),_+=""!==a[f]?"<option "+(o===c?"":'data-function-name="'+a[f]+'" ')+'value="'+o+'">'+c+"</option>":"";a=[]}u=(h.$filters?h.$filters:h.$table.children("thead")).find("."+r.filter),g.filter_$externalFilters&&(u=u&&u.length?u.add(g.filter_$externalFilters):g.filter_$externalFilters),p=u.filter('select[data-column="'+l+'"]'),p.length&&(p[n?"html":"append"](_),e.isArray(a)||p.append(a).val(x),p.val(x))}},buildDefault:function(e,r){var i,l,a,n=e.config,s=n.widgetOptions,f=n.columns;for(i=0;f>i;i++)l=n.$headerIndexed[i],a=!(l.hasClass("filter-false")||l.hasClass("parser-false")),(l.hasClass("filter-select")||t.getColumnData(e,s.filter_functions,i)===!0)&&a&&t.filter.buildSelect(e,i,"",r,l.hasClass(s.filter_onlyAvail))}},t.getFilters=function(i,l,a,n){var s,f,o,c,d=!1,u=i?e(i)[0].config:"",p=u?u.widgetOptions:"";if(l!==!0&&p&&!p.filter_columnFilters)return e(i).data("lastSearch");if(u&&(u.$filters&&(f=u.$filters.find("."+r.filter)),p.filter_$externalFilters&&(f=f&&f.length?f.add(p.filter_$externalFilters):p.filter_$externalFilters),f&&f.length))for(d=a||[],s=0;s<u.columns+1;s++)c=s===u.columns?p.filter_anyColumnSelector+","+p.filter_multipleColumnSelector:'[data-column="'+s+'"]',o=f.filter(c),o.length&&(o=t.filter.getLatestSearch(o),e.isArray(a)?(n&&o.slice(1),s===u.columns&&(c=o.filter(p.filter_anyColumnSelector),o=c.length?c:o),o.val(a[s]).trigger("change.tsfilter")):(d[s]=o.val()||"",s===u.columns?o.slice(1).filter('[data-column*="'+o.attr("data-column")+'"]').val(d[s]):o.slice(1).val(d[s])),s===u.columns&&o.length&&(p.filter_$anyMatch=o));return 0===d.length&&(d=!1),d},t.setFilters=function(r,i,l,a){var n=r?e(r)[0].config:"",s=t.getFilters(r,!0,i,a);return n&&l&&(n.lastCombinedFilter=null,n.lastSearch=[],t.filter.searching(n.table,i,a),n.$table.trigger("filterFomatterUpdate")),!!s}}(jQuery);