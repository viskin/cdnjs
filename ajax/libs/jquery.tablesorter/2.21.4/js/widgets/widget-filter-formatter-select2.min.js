/*! Widget: filter, select2 formatter function - updated 3/26/2015 (v2.21.3) */
;(function(b){var a=b.tablesorter||{};a.filterFormatter=a.filterFormatter||{};a.filterFormatter.select2=function(p,j,s){var f=b.extend({cellText:"",match:true,value:"",multiple:true,width:"100%"},s),k,h,m=p.closest("table")[0].config,r=m.widgetOptions,n=b('<input class="filter" type="hidden">').appendTo(p).bind("change"+m.namespace+"filter",function(){var c=this.value;c=c.replace(/[/()$^]/g,"").split("|");p.find(".select2").select2("val",c);t()}),d=m.$headerIndexed[j],i=d.hasClass(r.filter_onlyAvail),l=[],q=f.match?"":"^",e=f.match?"":"$",t=function(){var o=false,c=p.find(".select2").select2("val")||f.value||"";if(b.isArray(c)){o=true;c=c.join("\u0000")}c=c.replace(/[-[\]{}()*+?.,/\\^$|#\s]/g,"\\$&");if(o){c=c.split("\u0000")}n.val(b.isArray(c)&&c.length&&c.join("")!==""?"/("+q+(c||[]).join(e+"|"+q)+e+")/":"").trigger("search").end().find(".select2").select2("val",c);if(l.length){l.find(".select2").select2("val",c)}},g=function(){h=[];k=a.filter.getOptionSource(m.$table[0],j,i)||[];b.each(k,function(o,c){h.push({id:c,text:c})});f.data=h};d.toggleClass("filter-match",f.match);if(f.cellText){p.prepend("<label>"+f.cellText+"</label>")}if(!(f.ajax&&!b.isEmptyObject(f.ajax))&&!f.data){g();if(i){m.$table.bind("filterEnd",function(){g();p.add(l).find(".select2").select2(f)})}}b('<input class="select2 select2-'+j+'" type="hidden" />').val(f.value).appendTo(p).select2(f).bind("change",function(){t()});m.$table.bind("filterFomatterUpdate",function(){var c=m.$table.data("lastSearch")[j]||"";c=c.replace(/^\/\(\^?/,"").replace(/\$\|\^/g,"|").replace(/\$?\)\/$/g,"").split("|");p.find(".select2").select2("val",c);t();a.filter.formatterUpdated(p,j)});m.$table.bind("stickyHeadersInit",function(){l=m.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(j).empty();b('<input class="select2 select2-'+j+'" type="hidden">').val(f.value).appendTo(l).select2(f).bind("change",function(){p.find(".select2").select2("val",l.find(".select2").select2("val"));t()});if(f.cellText){l.prepend("<label>"+f.cellText+"</label>")}});m.$table.bind("filterReset",function(){p.find(".select2").select2("val",f.value||"");setTimeout(function(){t()},0)});t();return n}})(jQuery);