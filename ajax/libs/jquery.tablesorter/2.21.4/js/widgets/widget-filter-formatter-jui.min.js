/*! Widget: filter jQuery UI formatter functions - updated 7/17/2014 (v2.17.5) */
;(function(c){var b=c.tablesorter||{},a=".compare-select",d=b.filterFormatter=c.extend({},b.filterFormatter,{addCompare:function(j,i,g){if(g.compare&&c.isArray(g.compare)&&g.compare.length>1){var h="",f=[a.slice(1)," "+a.slice(1),""],e=g.cellText?'<label class="'+f.join("-label")+i+'">'+g.cellText+"</label>":"";c.each(g.compare,function(k,l){h+="<option "+(g.selected===k?"selected":"")+">"+l+"</option>"});j.wrapInner('<div class="'+f.join("-wrapper")+i+'" />').prepend(e+'<select class="'+f.join("")+i+'" />').find("select").append(h)}},updateCompare:function(g,j,i){var h=j.val()||"",e=h.replace(/\s*?[><=]\s*?/g,""),f=h.match(/[><=]/g)||"";if(i.compare){if(c.isArray(i.compare)){f=(f||[]).join("")||i.compare[i.selected||0]}g.find(a).val(f)}return[h,e]},uiSpinner:function(f,e,h){var j=c.extend({delayed:true,addToggle:true,exactMatch:true,value:1,cellText:"",compare:"",min:0,max:100,step:1,disabled:false},h),l=f.closest("table")[0].config,k=c('<input class="filter" type="hidden">').appendTo(f).bind("change"+l.namespace+"filter",function(){i({value:this.value,delayed:false})}),g=[],i=function(r,s){var o=true,q,m=r&&r.value&&b.formatFloat((r.value+"").replace(/[><=]/g,""))||f.find(".spinner").val()||j.value,p=(c.isArray(j.compare)?f.find(a).val()||j.compare[j.selected||0]:j.compare)||"",n=r&&typeof r.delayed==="boolean"?r.delayed:l.$table[0].hasInitialized?j.delayed||"":true;if(j.addToggle){o=f.find(".toggle").is(":checked")}q=j.disabled||!o?"disable":"enable";f.find(".filter").val(o?(p?p:j.exactMatch?"=":"")+m:"").trigger(s?"":"search",n).end().find(".spinner").spinner(q).val(m);if(g.length){g.find(".spinner").spinner(q).val(m).end().find(a).val(p);if(j.addToggle){g.find(".toggle")[0].checked=o}}};j.oldcreate=j.create;j.oldspin=j.spin;j.create=function(m,n){i();if(typeof j.oldcreate==="function"){j.oldcreate(m,n)}};j.spin=function(m,n){i(n);if(typeof j.oldspin==="function"){j.oldspin(m,n)}};if(j.addToggle){c('<div class="button"><input id="uispinnerbutton'+e+'" type="checkbox" class="toggle" /><label for="uispinnerbutton'+e+'"></label></div>').appendTo(f).find(".toggle").bind("change",function(){i()})}f.closest("thead").find("th[data-column="+e+"]").addClass("filter-parsed");c('<input class="spinner spinner'+e+'" />').val(j.value).appendTo(f).spinner(j).bind("change keyup",function(){i()});l.$table.bind("filterFomatterUpdate",function(){var m=d.updateCompare(f,k,j)[0];f.find(".spinner").val(m);i({value:m},true);b.filter.formatterUpdated(f,e)});if(j.compare){d.addCompare(f,e,j);f.find(a).bind("change",function(){i()})}l.$table.bind("stickyHeadersInit",function(){g=l.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(e).empty();if(j.addToggle){c('<div class="button"><input id="stickyuispinnerbutton'+e+'" type="checkbox" class="toggle" /><label for="stickyuispinnerbutton'+e+'"></label></div>').appendTo(g).find(".toggle").bind("change",function(){f.find(".toggle")[0].checked=this.checked;i()})}c('<input class="spinner spinner'+e+'" />').val(j.value).appendTo(g).spinner(j).bind("change keyup",function(){f.find(".spinner").val(this.value);i()});if(j.compare){d.addCompare(g,e,j);g.find(a).bind("change",function(){f.find(a).val(c(this).val());i()})}});l.$table.bind("filterReset",function(){if(c.isArray(j.compare)){f.add(g).find(a).val(j.compare[j.selected||0])}if(j.addToggle){f.find(".toggle")[0].checked=false}f.find(".spinner").spinner("value",j.value);setTimeout(function(){i()},0)});i();return k},uiSlider:function(h,g,f){var j=c.extend({delayed:true,valueToHeader:false,exactMatch:true,cellText:"",compare:"",allText:"all",value:0,min:0,max:100,step:1,range:"min"},f),l=h.closest("table")[0].config,k=c('<input class="filter" type="hidden">').appendTo(h).bind("change"+l.namespace+"filter",function(){e({value:this.value})}),i=[],e=function(q,r){var n=typeof q!=="undefined"?b.formatFloat((q.value+"").replace(/[><=]/g,""))||j.value:j.value,s=j.compare?n:n===j.min?j.allText:n,p=(c.isArray(j.compare)?h.find(a).val()||j.compare[j.selected||0]:j.compare)||"",m=p+s,o=q&&typeof q.delayed==="boolean"?q.delayed:l.$table[0].hasInitialized?j.delayed||"":true;if(j.valueToHeader){h.closest("thead").find("th[data-column="+g+"]").find(".curvalue").html(" ("+m+")")}else{h.find(".ui-slider-handle").addClass("value-popup").attr("data-value",m)}h.find(".filter").val((p?p+n:n===j.min?"":(j.exactMatch?"=":"")+n)).trigger(r?"":"search",o).end().find(".slider").slider("value",n);if(i.length){i.find(a).val(p).end().find(".slider").slider("value",n);if(j.valueToHeader){i.closest("thead").find("th[data-column="+g+"]").find(".curvalue").html(" ("+m+")")}else{i.find(".ui-slider-handle").addClass("value-popup").attr("data-value",m)}}};h.closest("thead").find("th[data-column="+g+"]").addClass("filter-parsed");if(j.valueToHeader){h.closest("thead").find("th[data-column="+g+"]").find(".tablesorter-header-inner").append('<span class="curvalue" />')}j.oldcreate=j.create;j.oldslide=j.slide;j.create=function(m,n){e();if(typeof j.oldcreate==="function"){j.oldcreate(m,n)}};j.slide=function(m,n){e(n);if(typeof j.oldslide==="function"){j.oldslide(m,n)}};c('<div class="slider slider'+g+'"/>').appendTo(h).slider(j);l.$table.bind("filterFomatterUpdate",function(){var m=d.updateCompare(h,k,j)[0];h.find(".slider").slider("value",m);e({value:m},false);b.filter.formatterUpdated(h,g)});if(j.compare){d.addCompare(h,g,j);h.find(a).bind("change",function(){e({value:h.find(".slider").slider("value")})})}l.$table.bind("filterReset",function(){if(c.isArray(j.compare)){h.add(i).find(a).val(j.compare[j.selected||0])}setTimeout(function(){e({value:j.value})},0)});l.$table.bind("stickyHeadersInit",function(){i=l.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(g).empty();c('<div class="slider slider'+g+'"/>').val(j.value).appendTo(i).slider(j).bind("change keyup",function(){h.find(".slider").slider("value",this.value);e()});if(j.compare){d.addCompare(i,g,j);i.find(a).bind("change",function(){h.find(a).val(c(this).val());e()})}});return k},uiRange:function(l,h,m){var f=c.extend({delayed:true,valueToHeader:false,values:[0,100],min:0,max:100,range:true},m),j=l.closest("table")[0].config,k=c('<input class="filter" type="hidden">').appendTo(l).bind("change"+j.namespace+"filter",function(){e()}),i=[],e=function(){var o=k.val(),n=o.split(" - ");if(o===""){n=[f.min,f.max]}if(n&&n[1]){g({values:n,delay:false},true)}},g=function(q,r){var s=q&&q.values||f.values,n=s[0]+" - "+s[1],o=s[0]===f.min&&s[1]===f.max?"":n,p=q&&typeof q.delayed==="boolean"?q.delayed:j.$table[0].hasInitialized?f.delayed||"":true;if(f.valueToHeader){l.closest("thead").find("th[data-column="+h+"]").find(".currange").html(" ("+n+")")}else{l.find(".ui-slider-handle").addClass("value-popup").eq(0).attr("data-value",s[0]).end().eq(1).attr("data-value",s[1])}l.find(".filter").val(o).trigger(r?"":"search",p).end().find(".range").slider("values",s);if(i.length){i.find(".range").slider("values",s);if(f.valueToHeader){i.closest("thead").find("th[data-column="+h+"]").find(".currange").html(" ("+n+")")}else{i.find(".ui-slider-handle").addClass("value-popup").eq(0).attr("data-value",s[0]).end().eq(1).attr("data-value",s[1])}}};l.closest("thead").find("th[data-column="+h+"]").addClass("filter-parsed");if(f.valueToHeader){l.closest("thead").find("th[data-column="+h+"]").find(".tablesorter-header-inner").append('<span class="currange"/>')}f.oldcreate=f.create;f.oldslide=f.slide;f.create=function(n,o){g();if(typeof f.oldcreate==="function"){f.oldcreate(n,o)}};f.slide=function(n,o){g(o);if(typeof f.oldslide==="function"){f.oldslide(n,o)}};c('<div class="range range'+h+'"/>').appendTo(l).slider(f);j.$table.bind("filterFomatterUpdate",function(){e();b.filter.formatterUpdated(l,h)});j.$table.bind("filterReset",function(){l.find(".range").slider("values",f.values);setTimeout(function(){g()},0)});j.$table.bind("stickyHeadersInit",function(){i=j.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(h).empty();c('<div class="range range'+h+'"/>').val(f.value).appendTo(i).slider(f).bind("change keyup",function(){l.find(".range").val(this.value);g()})});return k},uiDateCompare:function(m,i,n){var f=c.extend({cellText:"",compare:"",endOfDay:true,defaultDate:"",changeMonth:true,changeYear:true,numberOfMonths:1},n),e,k=m.closest("table")[0].config,g=m.closest("thead").find("th[data-column="+i+"]").addClass("filter-parsed"),l=c('<input class="dateCompare" type="hidden">').appendTo(m).bind("change"+k.namespace+"filter",function(){var o=this.value;if(o){f.onClose(o)}}),p,j=[],h=function(t){var q,s,u=e.datepicker("getDate")||"",r=(c.isArray(f.compare)?m.find(a).val()||f.compare[f.selected||0]:f.compare)||"",o=k.$table[0].hasInitialized?f.delayed||"":true;e.datepicker("setDate",(u===""?"":u)||null);if(u===""){t=false}q=e.datepicker("getDate");s=q?(f.endOfDay&&/<=/.test(r)?q.setHours(23,59,59):q.getTime())||"":"";if(q&&f.endOfDay&&r==="="){r="";s+=" - "+q.setHours(23,59,59);t=false}m.find(".dateCompare").val(r+s).trigger(t?"":"search",o).end();if(j.length){j.find(".dateCompare").val(r+s).end().find(a).val(r)}};p='<input type="text" class="date date'+i+'" placeholder="'+(g.data("placeholder")||g.attr("data-placeholder")||k.widgetOptions.filter_placeholder.search||"")+'" />';e=c(p).appendTo(m);f.oldonClose=f.onClose;f.onClose=function(o,q){h();if(typeof f.oldonClose==="function"){f.oldonClose(o,q)}};e.datepicker(f);k.$table.bind("filterReset",function(){if(c.isArray(f.compare)){m.add(j).find(a).val(f.compare[f.selected||0])}m.add(j).find(".date").val(f.defaultDate).datepicker("setDate",f.defaultDate||null);setTimeout(function(){h()},0)});k.$table.bind("filterFomatterUpdate",function(){var q,o=l.val();if(/\s+-\s+/.test(o)){m.find(a).val("=");q=o.split(/\s+-\s+/)[0];e.datepicker("setDate",q||null)}else{q=(d.updateCompare(m,l,f)[1]).toString()||"";q=q!==""?/\d{5}/g.test(q)?new Date(Number(q)):q||"":""}m.add(j).find(".date").datepicker("setDate",q||null);setTimeout(function(){h(true);b.filter.formatterUpdated(m,i)},0)});if(f.compare){d.addCompare(m,i,f);m.find(a).bind("change",function(){h()})}k.$table.bind("stickyHeadersInit",function(){j=k.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(i).empty();j.append(p).find(".date").datepicker(f);if(f.compare){d.addCompare(j,i,f);j.find(a).bind("change",function(){m.find(a).val(c(this).val());h()})}});return l.val(f.defaultDate?f.defaultDate:"")},uiDatepicker:function(m,h,n){var e=c.extend({endOfDay:true,textFrom:"from",textTo:"to",from:"",to:"",changeMonth:true,changeYear:true,numberOfMonths:1},n),p,k,i=[],j=m.closest("table")[0].config,f=function(o){return o instanceof Date&&isFinite(o)},l=c('<input class="dateRange" type="hidden">').appendTo(m).bind("change"+j.namespace+"filter",function(){var o=this.value;if(o.match(" - ")){o=o.split(" - ");m.find(".dateTo").val(o[1]);k(o[0])}else{if(o.match(">=")){k(o.replace(">=",""))}else{if(o.match("<=")){k(o.replace("<=",""))}}}}),g=m.closest("thead").find("th[data-column="+h+"]").addClass("filter-parsed");p="<label>"+e.textFrom+'</label><input type="text" class="dateFrom" placeholder="'+(g.data("placeholderFrom")||g.attr("data-placeholder-from")||j.widgetOptions.filter_placeholder.from||"")+'" /><label>'+e.textTo+'</label><input type="text" class="dateTo" placeholder="'+(g.data("placeholderTo")||g.attr("data-placeholder-to")||j.widgetOptions.filter_placeholder.to||"")+'" />';c(p).appendTo(m);e.oldonClose=e.onClose;k=e.onClose=function(q,r){var o,t=m.find(".dateFrom").datepicker("getDate"),s=m.find(".dateTo").datepicker("getDate");t=f(t)?t.getTime():"";s=f(s)?(e.endOfDay?s.setHours(23,59,59):s.getTime())||"":"";o=t?(s?t+" - "+s:">="+t):(s?"<="+s:"");m.add(i).find(".dateRange").val(o).trigger("search");t=t?new Date(t):"";s=s?new Date(s):"";if(/<=/.test(o)){m.add(i).find(".dateFrom").datepicker("option","maxDate",s||null).end().find(".dateTo").datepicker("option","minDate",null).datepicker("setDate",s||null)}else{if(/>=/.test(o)){m.add(i).find(".dateFrom").datepicker("option","maxDate",null).datepicker("setDate",t||null).end().find(".dateTo").datepicker("option","minDate",t||null)}else{m.add(i).find(".dateFrom").datepicker("option","maxDate",null).datepicker("setDate",t||null).end().find(".dateTo").datepicker("option","minDate",null).datepicker("setDate",s||null)}}if(typeof e.oldonClose==="function"){e.oldonClose(q,r)}};e.defaultDate=e.from||"";m.find(".dateFrom").datepicker(e);e.defaultDate=e.to||"+7d";m.find(".dateTo").datepicker(e);j.$table.bind("filterFomatterUpdate",function(){var o=l.val()||"",r="",q="";if(/\s+-\s+/.test(o)){o=o.split(/\s+-\s+/)||[];r=o[0]||"";q=o[1]||""}else{if(/>=/.test(o)){r=o.replace(/>=/,"")||""}else{if(/<=/.test(o)){q=o.replace(/<=/,"")||""}}}r=r!==""?/\d{5}/g.test(r)?new Date(Number(r)):r||"":"";q=q!==""?/\d{5}/g.test(q)?new Date(Number(q)):q||"":"";m.add(i).find(".dateFrom").datepicker("setDate",r||null);m.add(i).find(".dateTo").datepicker("setDate",q||null);setTimeout(function(){k();b.filter.formatterUpdated(m,h)},0)});j.$table.bind("stickyHeadersInit",function(){i=j.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(h).empty();i.append(p);e.defaultDate=e.from||"";i.find(".dateFrom").datepicker(e);e.defaultDate=e.to||"+7d";i.find(".dateTo").datepicker(e)});m.closest("table").bind("filterReset",function(){m.add(i).find(".dateFrom").val("").datepicker("setDate",e.from||null);m.add(i).find(".dateTo").val("").datepicker("setDate",e.to||null);setTimeout(function(){k()},0)});return l.val(e.from?(e.to?e.from+" - "+e.to:">="+e.from):(e.to?"<="+e.to:""))}})})(jQuery);