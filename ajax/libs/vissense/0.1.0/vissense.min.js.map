{"version":3,"file":"vissense.min.js","sources":["vissense.js"],"names":["window","Math","Visibility","undefined","_window","element","doc","ownerDocument","defaultView","parentWindow","fireIf","when","callback","isFunction","extend","dest","source","index","props","Object","keys","length","key","noop","identity","i","now","Date","getTime","defer","setTimeout","isObject","obj","func","defaults","n","prop","debounce","fn","delay","timer","self","this","args","arguments","clearTimeout","apply","_getBoundingClientRect","r","getBoundingClientRect","height","width","clientHeight","clientWidth","_viewport","w","innerWidth","document","documentElement","innerHeight","_isVisibleByOffsetParentCheck","offsetParent","position","_findEffectiveStyleProperty","property","computedStyleProvider","style","effectiveStyle","getComputedStyle","getPropertyValue","_isDisplayed","display","visibility","parentNode","isVisibleByStyling","displayed","_isInViewport","rect","viewport","bottom","right","top","left","percentage","isPageVisible","view","vh","vw","min","isPageVisibilityAPIAvailable","PageVisibilityAPIAvailable","hidden","onPageVisibilityChange","change","VisSense","config","nodeType","Error","_element","_config","fullyvisible","nextState","visobj","previousState","hasPercentageChanged","isHidden","VisState","isFullyVisible","visible","fireListeners","listeners","context","call","VisMon","inConfig","me","strategy","Strategy","NoopStrategy","_visobj","_lastListenerId","_status","_listeners","_strategy","_events","on","state","prev","_state","_percentage","_prev","status","isSupported","VisSenseUtils","prototype","isVisible","fireIfFullyVisible","fireIfVisible","fireIfHidden","version","of","start","stop","use","onUpdate","update","fireIfVisibilityChanged","hasVisibilityChanged","fireIfPercentageChanged","onVisibilityChange","onPercentageChange","onVisible","handler","wasHidden","onFullyVisible","onHidden","eventName","monitor","STATES","HIDDEN","VISIBLE","FULLY_VISIBLE","wasVisible","wasFullyVisible","create","PollingStrategy","interval","_started","_update","addEventListener","_timer","removeEventListener","EventStrategy"],"mappings":"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"}