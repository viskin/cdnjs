var pickout=function(){"use strict";function t(t){e(t),a()}function e(t){var e="object"==typeof t?t:{};"string"==typeof t&&(e.el=t),e.DOM=f.$$(e.el),u(e)}function a(){d.DOM.map(function(t,e){r(t,e)}),c()}function r(t,e){var a=d;t.style.display="none";var r=t.parentElement;f.attr(r,"style","position:relative;float:left;");var o=f.attr(t,"placeholder"),i=f.create("input");f.attr(i,"readonly","readonly"),f.attr(i,"class","pk-input -"+a.theme),o&&f.attr(i,"placeholder",o),r.hasAttribute("for")&&f.attr(i,"id",f.attr(r,"for"));var l=f.create("span");f.attr(l,"class","pk-arrow -"+a.theme),r.appendChild(i),r.appendChild(l),f.events(r,"click",function(t){t.preventDefault(),t.stopPropagation(),a.currentIndex=e,n(a)})}function n(t){var e,a=f.$(".pk-modal"),r=t.DOM[t.currentIndex],n=f.$(".main",a);if(f.attr(a,"class",f.attr(a,"class")+" -"+t.theme),!n.children.length){var o=f.$(".pk-overlay"),l=f.toArray(r),p=l.map(function(r,n){return e={index:n,item:r},"optgroup"===r.parentElement.localName&&(e.optGroup=r.parentElement),i(e,a,t)});f.attr(a,"class",f.attr(a,"class")+" -show"),f.attr(o,"class",f.attr(o,"class")+" -show");var c=r.hasAttribute("placeholder")?f.attr(r,"placeholder"):"Select to option";if(f.$(".head",a).innerHTML=c,t.search){var s=f.$(".pk-search",a),u=f.$("input",s);u.value="",setTimeout(function(){u.focus()},300),f.attr(s,"class",f.attr(s,"class")+" -show");var d=[];f.events(u,"keyup",function(e){function a(){var t=f.$(".pk-no_result_search",n);t&&n.removeChild(t)}function r(t){t.map(function(t){t.parentNode&&n.removeChild(t)})}if(e.preventDefault(),e.stopPropagation(),d=f.$$("li",n),r(d),!e.target.value)return a(),void p.map(function(t){Array.isArray(t)&&(n.appendChild(t[0]),t=t[1]),n.appendChild(t)});if(p.map(function(t){Array.isArray(t)&&(t=t[1]);var r=t.children[1]||t.children[0];r&&-1!==r.innerHTML.toLowerCase().indexOf(e.target.value.toLowerCase())&&(a(),n.appendChild(t))}),!n.children.length){var o=f.create("li");return f.attr(o,"class","pk-no_result_search"),o.innerHTML=t.noResults,void n.appendChild(o)}})}}}function o(t,e,a){var r=f.create("li");return f.attr(r,"class","pk-option-group -"+a.theme),f.attr(r,"data-opt-group",t.label),f.attr(r,"data-type",t.localName),r.innerHTML=t.label.toUpperCase(),e.appendChild(r),r}function i(t,e,a){var r=a.DOM[a.currentIndex],n=e.querySelector(".main"),i=[];if(t.optGroup){var p=f.$("li[data-opt-group="+t.optGroup.label+"]",n);p||i.push(o(t.optGroup,n,a))}var c=f.create("li"),u=t.item.selected?"-selected":"";f.attr(c,"class","pk-option "+u+" -"+a.theme),t.item.value||f.attr(c,"style","display:none;");var d=f.create("span");f.attr(d,"class","icon"),d.innerHTML=f.attr(t.item,"data-icon")||"";var v=f.create("span");return f.attr(v,"class","txt"),v.innerHTML=t.item.innerHTML,n.appendChild(c),c.appendChild(d),c.appendChild(v),f.events(c,"click",function(e){e.preventDefault(),e.stopPropagation(),f.toArray(r).map(function(e,a){return a===t.index?void f.attr(e,"selected","selected"):void e.removeAttribute("selected")}),l(r,v.innerHTML),s()}),i.length?(i.push(c),i):c}function l(t,e){t.parentElement.querySelector(".pk-input").value=e}function p(t){e(t),d.DOM.map(function(t){l(t,t[t.selectedIndex].innerHTML)})}function c(){if(!f.$(".pk-overlay")){var t=f.create("div");f.attr(t,"class","pk-overlay");var e=f.create("div");f.attr(e,"class","pk-modal");var a=f.create("ul");f.attr(a,"class","main");var r=f.create("div");f.attr(r,"class","head");var n=f.create("div");f.attr(n,"class","pk-search");var o=f.create("input");f.attr(o,"type","text");var i=f.create("span");f.attr(i,"class","close"),i.innerHTML="&times;",document.body.appendChild(t),document.body.appendChild(e),e.appendChild(r),e.appendChild(n),n.appendChild(o),e.appendChild(i),e.appendChild(a),f.events(t,"click",function(t){t.preventDefault(),t.stopPropagation(),s()}),f.events(i,"click",function(t){t.preventDefault(),t.stopPropagation(),s()})}}function s(){var t=f.$(".pk-overlay"),e=f.$(".pk-modal"),a=f.$(".pk-search",e);f.attr(t,"class","pk-overlay"),f.attr(e,"class","pk-modal"),f.attr(a,"class","pk-search"),setTimeout(function(){f.$(".main",e).innerHTML=""},500)}function u(t){d=JSON.parse(JSON.stringify(v));for(var e in t)t.hasOwnProperty(e)&&(d[e]=t[e])}var d={},v={theme:"clean",search:!1,noResults:"No Results"},f={create:function(t){return document.createElement(t)},attr:function(t,e,a){return a?void t.setAttribute(e,a):t.getAttribute(e)},events:function(t,e,a){t.addEventListener(e,a,!1)},toArray:function(t){return[].slice.call(t)},$:function(t,e){return(e||document).querySelector(t)},$$:function(t,e){return this.toArray((e||document).querySelectorAll(t))}};return{to:t,updated:p}}();"undefined"!=typeof module&&module.exports&&(module.exports=pickout);