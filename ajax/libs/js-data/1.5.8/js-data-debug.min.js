!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("bluebird"),function(){try{return require("js-data-schema")}catch(e){}}()):"function"==typeof define&&define.amd?define(["bluebird","js-data-schema"],t):"object"==typeof exports?exports.JSData=t(require("bluebird"),function(){try{return require("js-data-schema")}catch(e){}}()):e.JSData=t(e.bluebird,e.Schemator)}(this,function(__WEBPACK_EXTERNAL_MODULE_4__,__WEBPACK_EXTERNAL_MODULE_5__){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var n=function(e){return e&&e.__esModule?e["default"]:e},i=n(r(1)),o=n(r(2)),s=n(r(3));e.exports={DS:s,createStore:function(e){return new s(e)},DSUtils:i,DSErrors:o,version:{full:"1.5.8",major:parseInt("1",10),minor:parseInt("5",10),patch:parseInt("8",10),alpha:"false",beta:"false"}}},function(e,t,r){function n(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})})}function i(e){var t={};e=e||this,e.on=function(e,r,n){t[e]=t[e]||[],t[e].push({f:r,c:n})},e.off=function(e,r){var n=t[e];if(n)if(r){for(var i=0;i<n.length;i++)if(n[i]===r){n.splice(i,1);break}}else n.splice(0,n.length);else t={}},e.emit=function(){for(var e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];var i=t[r.shift()]||[];if(i)for(var o=0;o<i.length;o++)i[o].f.apply(i[o].c,r)}}var o=function(e){return e&&e.__esModule?e["default"]:e},s=o(r(2)),a=o(r(9)),c=o(r(10)),u=o(r(14)),f=o(r(11)),l=o(r(15)),d=o(r(19)),p=o(r(12)),h=o(r(16)),v=o(r(13)),g=o(r(20)),y=o(r(6)),b=o(r(21)),m=o(r(22)),_=void 0,w=void 0,E=void 0,O=Object.prototype,A=O.toString;b.polyfill();var j=Array.isArray||function(e){return"[object Array]"==A.call(e)||!1},x=function(e){return"[object RegExp]"==A.call(e)||!1},D=function(e){return e===!0||e===!1||e&&"object"==typeof e&&"[object Boolean]"==A.call(e)||!1},F=function(e){return"string"==typeof e||e&&"object"==typeof e&&"[object String]"==A.call(e)||!1},C=function(e){return"[object Object]"==A.call(e)||!1},S=function(e){return e&&"object"==typeof e&&"[object Date]"==A.call(e)||!1},k=function(e){var t=typeof e;return"number"==t||e&&"object"==t&&"[object Number]"==A.call(e)||!1},I=function(e){return"function"==typeof e||e&&"[object Function]"===A.call(e)||!1},M=function(e){return F(e)||k(e)},P=function(e){return new s.IA('"'+e+'" must be a string or a number!')},R=function(e){return new s.IA('"'+e+'" must be an object!')},T=function(e){return new s.IA('"'+e+'" must be an array!')},U=function(e){if(null==e)return!0;if("string"==typeof e||j(e))return!e.length;if("object"!=typeof e)return!0;var t=function(){var t=!0;return u(e,function(){return t=!1,!1}),{v:t}}();return"object"==typeof t?t.v:void 0},N=function(e,t){if(!e||!t)return[];for(var r=[],n=void 0,i=0,o=e.length;o>i;i++)n=e[i],E.contains(r,n)||E.contains(t,n)&&r.push(n);return r},H=function(e,t,r){var n=[];return a(e,function(e,r,i){t(e,r,i)&&n.push(e)},r),n};try{_=window,_.Promise.prototype["finally"]||(_.Promise.prototype["finally"]=n),w=_.Promise,_={}}catch(K){_=null,w=r(4)}var L=["beforeValidate","validate","afterValidate","beforeCreate","afterCreate","beforeUpdate","afterUpdate","beforeDestroy","afterDestroy"],Q=function(e,t,r,n){if(t){if(e===t)throw new Error("Cannot copy! Source and destination are identical.");if(r=r||[],n=n||[],C(e)){var i=r.indexOf(e);if(-1!==i)return n[i];r.push(e),n.push(t)}var o=void 0;if(j(e)){t.length=0;for(var s=0;s<e.length;s++)o=Q(e[s],null,r,n),C(e[s])&&(r.push(e[s]),n.push(o)),t.push(o)}else{j(t)?t.length=0:a(t,function(e,r){delete t[r]});for(var c in e)e.hasOwnProperty(c)&&(o=Q(e[c],null,r,n),C(e[c])&&(r.push(e[c]),n.push(o)),t[c]=o)}}else t=e,e&&(j(e)?t=Q(e,[],r,n):S(e)?t=new Date(e.getTime()):x(e)?(t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex):C(e)&&(t=Q(e,Object.create(Object.getPrototypeOf(e)),r,n)));return t},B=function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,n,i,o=typeof e,s=typeof t;if(o==s&&"object"==o){if(!j(e)){if(S(e))return S(t)?B(e.getTime(),t.getTime()):!1;if(x(e)&&x(t))return e.toString()==t.toString();if(j(t))return!1;i={};for(n in e)if("$"!==n.charAt(0)&&!I(e[n])){if(!B(e[n],t[n]))return!1;i[n]=!0}for(n in t)if(!i.hasOwnProperty(n)&&"$"!==n.charAt(0)&&void 0!==t[n]&&!I(t[n]))return!1;return!0}if(!j(t))return!1;if((r=e.length)==t.length){for(n=0;r>n;n++)if(!B(e[n],t[n]))return!1;return!0}}return!1},q=function(e,t){return F(t)||k(t)?t:t&&e?t[e.idAttribute]||t:t},V=function(e,t){return e&&(F(t)||k(t))?e.index[t]||t:t},W=function(e){return null!=e&&""!==e},Y=function(e,t){return t=t||"",H(e,W).join(t)},J=function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];var n=Y(t,"/");return n.replace(/([^:\/]|^)\/{2,}/g,"$1/")};y.setEqualityFn(B),E={_:function(e,t){var r=this;if(t=t||{},t&&t.constructor===e.constructor)return t;if(!C(t))throw new s.IA('"options" must be an object!');a(L,function(e){"function"==typeof t[e]&&-1===t[e].toString().indexOf("for (var _len = arg")&&(t[e]=r.promisify(t[e]))});var n=function(e){var t=this;u(e,function(e,r){t[r]=e})};return n.prototype=e,n.prototype.orig=function(){var e={};return u(this,function(t,r){e[r]=t}),e},new n(t)},_n:k,_s:F,_sn:M,_snErr:P,_o:C,_oErr:R,_a:j,_aErr:T,compute:function(e,t){var r=this,n=[];a(e.deps,function(e){n.push(r[e])}),r[t]=e[e.length-1].apply(r,n)},contains:f,copy:Q,deepMixIn:l,diffObjectFromOldObject:y.diffObjectFromOldObject,BinaryHeap:m,equals:B,Events:i,filter:H,forEach:a,forOwn:u,fromJson:function(e){return F(e)?JSON.parse(e):e},get:r(17),intersection:N,isArray:j,isBoolean:D,isDate:S,isEmpty:U,isFunction:I,isObject:C,isNumber:k,isRegExp:x,isString:F,makePath:J,observe:y,pascalCase:d,pick:h,Promise:w,promisify:function(e,t){var r=this;if(e){if("function"!=typeof e)throw new Error("Can only promisify functions!");return function(){for(var n=arguments.length,i=Array(n),o=0;n>o;o++)i[o]=arguments[o];return new r.Promise(function(r,n){i.push(function(e,t){e?n(e):r(t)});try{var o=e.apply(t||this,i);o&&o.then&&o.then(r,n)}catch(s){n(s)}})}}},remove:p,set:r(18),slice:c,sort:v,toJson:JSON.stringify,updateTimestamp:function(e){var t="function"==typeof Date.now?Date.now():(new Date).getTime();return e&&e>=t?e+1:t},upperCase:g,removeCircular:function(e){var t=[];return function r(e){var n=void 0,i=void 0;if(!("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)){for(n=0;n<t.length;n+=1)if(t[n]===e)return void 0;if(t.push(e),E.isArray(e))for(i=[],n=0;n<e.length;n+=1)i[n]=r(e[n]);else i={},u(e,function(t,n){i[n]=r(e[n])});return i}return e}(e)},resolveItem:V,resolveId:q,w:_},e.exports=E},function(e){var t=function a(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:a(i,t,r)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0===o?void 0:o.call(r)},r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(e){function i(e){n(this,i),t(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=e||"Illegal Argument!"}return r(i,e),i}(Error),o=function(e){function i(e){n(this,i),t(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=e||"RuntimeError Error!"}return r(i,e),i}(Error),s=function(e){function i(e){n(this,i),t(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=""+e+" is not a registered resource!"}return r(i,e),i}(Error);e.exports={IllegalArgumentError:i,IA:i,RuntimeError:o,R:o,NonexistentResourceError:s,NER:s}},function(e,t,r){function n(e,t,r){r(null,t)}function i(e,t){return t}function o(e,t,r,n){var i=!0;e:for(;i;){i=!1;var o=e,s=t,a=r,c=n;f=l=d=void 0;var f=o[s],l=u.get(a,f[0]),d=u.get(c,f[0]);if(u._s(l)&&(l=u.upperCase(l)),u._s(d)&&(d=u.upperCase(d)),"DESC"===f[1]){if(l>d)return-1;if(d>l)return 1;if(s<o.length-1){e=o,t=s+1,r=a,n=c,i=!0;continue e}return 0}if(d>l)return-1;if(l>d)return 1;if(!(s<o.length-1))return 0;e=o,t=s+1,r=a,n=c,i=!0}}var s=function(e){return e&&e.__esModule?e["default"]:e},a=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=s(r(1)),f=s(r(2)),l=s(r(7)),d=s(r(8)),p=void 0,h=function(){function e(){c(this,e)}return a(e,{errorFn:{value:function(e,t){if(this.error&&"function"==typeof this.error){try{throw"string"==typeof e?new Error(e):e}catch(r){e=r}this.error(this.name||null,e||null,t||null)}}}}),e}(),v=h.prototype;v.actions={},v.afterCreate=n,v.afterCreateInstance=i,v.afterDestroy=n,v.afterEject=i,v.afterInject=i,v.afterReap=i,v.afterUpdate=n,v.afterValidate=n,v.allowSimpleWhere=!0,v.basePath="",v.beforeCreate=n,v.beforeCreateInstance=i,v.beforeDestroy=n,v.beforeEject=i,v.beforeInject=i,v.beforeReap=i,v.beforeUpdate=n,v.beforeValidate=n,v.bypassCache=!1,v.cacheResponse=!!u.w,v.defaultAdapter="http",v.debug=!0,v.eagerEject=!1,v.eagerInject=!1,v.endpoint="",v.error=console?function(e,t,r){return console["function"==typeof console.error?"error":"log"](e,t,r)}:!1,v.fallbackAdapters=["http"],v.findBelongsTo=!0,v.findHasOne=!0,v.findHasMany=!0,v.findInverseLinks=!0,v.idAttribute="id",v.ignoredChanges=[/\$/],v.ignoreMissing=!1,v.keepChangeHistory=!1,v.loadFromServer=!1,v.log=console?function(e,t,r,n,i){return console["function"==typeof console.info?"info":"log"](e,t,r,n,i)}:!1,v.logFn=function(e,t,r,n){var i=this;i.debug&&i.log&&"function"==typeof i.log&&i.log(i.name||null,e||null,t||null,r||null,n||null)},v.maxAge=!1,v.notify=!!u.w,v.reapAction=u.w?"inject":"none",v.reapInterval=u.w?3e4:!1,v.resetHistoryOnInject=!0,v.strategy="single",v.upsert=!!u.w,v.useClass=!0,v.useFilter=!1,v.validate=n,v.defaultFilter=function(e,t,r,n){var i=e,s=null,a={skip:"",offset:"",where:"",limit:"",orderBy:"",sort:""};r=r||{},n=n||{},s=u._o(r.where)?r.where:{},n.allowSimpleWhere&&u.forOwn(r,function(e,t){t in a||t in s||(s[t]={"==":e})}),u.isEmpty(s)&&(s=null),s&&(i=u.filter(i,function(e){var t=!0,r=!0;return u.forOwn(s,function(n,i){u._s(n)?n={"===":n}:(u._n(n)||u.isBoolean(n))&&(n={"==":n}),u._o(n)&&u.forOwn(n,function(n,o){var s=void 0,a="|"===o[0],c=e[i];o=a?o.substr(1):o,"=="===o?s=c==n:"==="===o?s=c===n:"!="===o?s=c!=n:"!=="===o?s=c!==n:">"===o?s=c>n:">="===o?s=c>=n:"<"===o?s=n>c:"<="===o?s=n>=c:"isectEmpty"===o?s=!u.intersection(c||[],n||[]).length:"isectNotEmpty"===o?s=u.intersection(c||[],n||[]).length:"in"===o?s=u._s(n)?-1!==n.indexOf(c):u.contains(n,c):"notIn"===o?s=u._s(n)?-1===n.indexOf(c):!u.contains(n,c):"contains"===o?s=u._s(c)?-1!==c.indexOf(n):u.contains(c,n):"notContains"===o&&(s=u._s(c)?-1===c.indexOf(n):!u.contains(c,n)),void 0!==s&&(r=t?s:a?r||s:r&&s),t=!1})}),r}));var c=null;u._s(r.orderBy)?c=[[r.orderBy,"ASC"]]:u._a(r.orderBy)&&(c=r.orderBy),!c&&u._s(r.sort)?c=[[r.sort,"ASC"]]:!c&&u._a(r.sort)&&(c=r.sort),c&&!function(){var e=0;u.forEach(c,function(e,r){if(u._s(e))c[r]=[e,"ASC"];else if(!u._a(e))throw new f.IA('DS.filter("'+t+'"[, params][, options]): '+u.toJson(e)+": Must be a string or an array!",{params:{"orderBy[i]":{actual:typeof e,expected:"string|array"}}})}),i=u.sort(i,function(t,r){return o(c,e,t,r)})}();var l=u._n(r.limit)?r.limit:null,d=null;return u._n(r.skip)?d=r.skip:u._n(r.offset)&&(d=r.offset),l&&d?i=u.slice(i,d,Math.min(i.length,d+l)):u._n(l)?i=u.slice(i,0,Math.min(i.length,l)):u._n(d)&&(i=d<i.length?u.slice(i,d):[]),i};var g=function(){function e(t){c(this,e);var n=this;t=t||{};try{p=r(5)}catch(i){}if(!p||u.isEmpty(p))try{p=window.Schemator}catch(i){}p=p||t.schemator,"function"==typeof p&&(n.schemator=new p),n.store={},n.s=n.store,n.definitions={},n.defs=n.definitions,n.adapters={},n.defaults=new h,n.observe=u.observe,u.forOwn(t,function(e,t){n.defaults[t]=e}),n.defaults.logFn("new data store created",n.defaults)}return a(e,{getAdapter:{value:function(e){var t=!1;e=e||{},this.defaults.logFn("getAdapter",e),u._s(e)&&(t=!0,e={adapter:e});var r=this.adapters[e.adapter];if(r)return r;if(t)throw new Error(""+e.adapter+" is not a registered adapter!");return this.adapters[e.defaultAdapter]}},registerAdapter:{value:function(e,t,r){var n=this;r=r||{},n.defaults.logFn("registerAdapter",e,t,r),n.adapters[e]=u.isFunction(t)?new t(r):t,r["default"]&&(n.defaults.defaultAdapter=e),n.defaults.logFn("default adapter is "+n.defaults.defaultAdapter)}},is:{value:function(e,t){var r=this.defs[e];if(!r)throw new f.NER(e);return t instanceof r[r["class"]]}}}),e}(),y=g.prototype;y.getAdapter.shorthand=!1,y.registerAdapter.shorthand=!1,y.errors=f,y.utils=u,u.deepMixIn(y,l),u.deepMixIn(y,d),e.exports=g},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE_4__},function(e){if("undefined"==typeof __WEBPACK_EXTERNAL_MODULE_5__){var t=new Error('Cannot find module "undefined"');throw t.code="MODULE_NOT_FOUND",t}e.exports=__WEBPACK_EXTERNAL_MODULE_5__},function(module,exports,__webpack_require__){!function(global){"use strict";function detectObjectObserve(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],r={},n=[];return Object.observe(r,e),Array.observe(n,e),r.id=1,r.id=2,delete r.id,n.push(1,2),n.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(r,e),Array.unobserve(n,e),!0)}function detectEval(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;try{var e=new Function("","return true;");return e()}catch(t){return!1}}function dirtyCheck(e){for(var t=0;MAX_DIRTY_CHECK_CYCLES>t&&e.check_();)t++;return global.testingExposeCycleCount&&(global.dirtyCheckCycleCount=t),t>0}function objectIsEmpty(e){for(var t in e)return!1;return!0}function diffIsEmpty(e){return objectIsEmpty(e.added)&&objectIsEmpty(e.removed)&&objectIsEmpty(e.changed)}function isBlacklisted(e,t){if(!t||!t.length)return!1;for(var r,n=0;n<t.length;n++)if("[object RegExp]"===Object.prototype.toString.call(t[n])&&t[n].test(e)||t[n]===e)return r=e;return!!r}function diffObjectFromOldObject(e,t,r,n){var i={},o={},s={};for(var a in t){var c=e[a];isBlacklisted(a,n)||void 0!==c&&(r?r(c,t[a]):c===t[a])||(a in e?(r?r(c,t[a]):c===t[a])||(s[a]=c):o[a]=void 0)}for(var a in e)a in t||isBlacklisted(a,n)||(i[a]=e[a]);return Array.isArray(e)&&e.length!==t.length&&(s.length=e.length),{added:i,removed:o,changed:s}}function runEOMTasks(){if(!eomTasks.length)return!1;for(var e=0;e<eomTasks.length;e++)eomTasks[e]();return eomTasks.length=0,!0}function newObservedObject(){function e(e){t&&t.state_===OPENED&&!n&&t.check_(e)}var t,r,n=!1,i=!0;return{open:function(r){if(t)throw Error("ObservedObject in use");i||Object.deliverChangeRecords(e),t=r,i=!1},observe:function(t,n){r=t,n?Array.observe(r,e):Object.observe(r,e)},deliver:function(t){n=t,Object.deliverChangeRecords(e),n=!1},close:function(){t=void 0,Object.unobserve(r,e),observedObjectCache.push(this)}}}function getObservedObject(e,t,r){var n=observedObjectCache.pop()||newObservedObject();return n.open(e),n.observe(t,r),n}function Observer(){this.state_=UNOPENED,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=nextObserverId++}function addToAll(e){Observer._allObserversCount++,collectObservers&&allObservers.push(e)}function removeFromAll(){Observer._allObserversCount--}function ObjectObserver(e){Observer.call(this),this.value_=e,this.oldObject_=void 0}function diffObjectFromChangeRecords(e,t,r){for(var n={},i={},o=0;o<t.length;o++){var s=t[o];expectedRecordTypes[s.type]?(s.name in r||(r[s.name]=s.oldValue),"update"!=s.type&&("add"!=s.type?s.name in n?(delete n[s.name],delete r[s.name]):i[s.name]=!0:s.name in i?delete i[s.name]:n[s.name]=!0)):(console.error("Unknown changeRecord type: "+s.type),console.error(s))}for(var a in n)n[a]=e[a];for(var a in i)i[a]=void 0;var c={};for(var a in r)if(!(a in n||a in i)){var u=e[a];r[a]!==u&&(c[a]=u)}return{added:n,removed:i,changed:c}}var equalityFn=function(e,t){return e===t},blacklist=[],hasObserve=detectObjectObserve(),hasEval=detectEval(),createObject="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var r=Object.create(t);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r},MAX_DIRTY_CHECK_CYCLES=1e3,eomTasks=[],runEOM=hasObserve?function(){var e={pingPong:!0},t=!1;return Object.observe(e,function(){runEOMTasks(),t=!1}),function(r){eomTasks.push(r),t||(t=!0,e.pingPong=!e.pingPong)}}():function(){return function(e){eomTasks.push(e)}}(),observedObjectCache=[],UNOPENED=0,OPENED=1,CLOSED=2,nextObserverId=1;Observer.prototype={open:function(e,t){if(this.state_!=UNOPENED)throw Error("Observer has already been opened.");return addToAll(this),this.callback_=e,this.target_=t,this.connect_(),this.state_=OPENED,this.value_},close:function(){this.state_==OPENED&&(removeFromAll(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=CLOSED)},deliver:function(){this.state_==OPENED&&dirtyCheck(this)},report_:function(e){try{this.callback_.apply(this.target_,e)}catch(t){Observer._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(t.stack||t))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var collectObservers=!hasObserve,allObservers;Observer._allObserversCount=0,collectObservers&&(allObservers=[]);var runningMicrotaskCheckpoint=!1,hasDebugForceFullDelivery=hasObserve&&hasEval&&function(){try{return eval("%RunMicrotasks()"),!0}catch(ex){return!1}}();global.Platform=global.Platform||{},global.Platform.performMicrotaskCheckpoint=function(){if(!runningMicrotaskCheckpoint){if(hasDebugForceFullDelivery)return void eval("%RunMicrotasks()");if(collectObservers){runningMicrotaskCheckpoint=!0;var cycles=0,anyChanged,toCheck;do{cycles++,toCheck=allObservers,allObservers=[],anyChanged=!1;for(var i=0;i<toCheck.length;i++){var observer=toCheck[i];observer.state_==OPENED&&(observer.check_()&&(anyChanged=!0),allObservers.push(observer))}runEOMTasks()&&(anyChanged=!0)}while(MAX_DIRTY_CHECK_CYCLES>cycles&&anyChanged);global.testingExposeCycleCount&&(global.dirtyCheckCycleCount=cycles),runningMicrotaskCheckpoint=!1}}},collectObservers&&(global.Platform.clearObservers=function(){allObservers=[]}),ObjectObserver.prototype=createObject({__proto__:Observer.prototype,arrayObserve:!1,connect_:function(){hasObserve?this.directObserver_=getObservedObject(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(e){var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=e[r];return Array.isArray(e)&&(t.length=e.length),t},check_:function(e){var t,r;if(hasObserve){if(!e)return!1;r={},t=diffObjectFromChangeRecords(this.value_,e,r)}else r=this.oldObject_,t=diffObjectFromOldObject(this.value_,this.oldObject_);return diffIsEmpty(t)?!1:(hasObserve||(this.oldObject_=this.copyObject(this.value_)),this.report_([t.added||{},t.removed||{},t.changed||{},function(e){return r[e]}]),!0)},disconnect_:function(){hasObserve?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==OPENED&&(hasObserve?this.directObserver_.deliver(!1):dirtyCheck(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}});var observerSentinel={},expectedRecordTypes={add:!0,update:!0,"delete":!0};global.Observer=Observer,global.diffObjectFromOldObject=diffObjectFromOldObject,global.setEqualityFn=function(e){equalityFn=e},global.setBlacklist=function(e){blacklist=e},global.Observer.runEOM_=runEOM,global.Observer.observerSentinel_=observerSentinel,global.Observer.hasObjectObserve=hasObserve,global.ObjectObserver=ObjectObserver}(exports)},function(e,t,r){function n(e){return!(o.isEmpty(e.added)&&o.isEmpty(e.removed)&&o.isEmpty(e.changed))}var i=function(e){return e&&e.__esModule?e["default"]:e},o=i(r(1)),s=i(r(2)),a=i(r(31)),c=i(r(32)),u=i(r(33)),f=i(r(34)),l=i(r(35)),d=i(r(36)),p=i(r(37)),h=i(r(38)),v=i(r(39)),g=s.NER,y=s.IA,b=s.R;e.exports={changes:function(e,t,r){var n=this,i=n.defs[e];if(r=r||{},t=o.resolveId(i,t),!i)throw new g(e);if(!o._sn(t))throw o._snErr("id");r=o._(i,r),r.logFn("changes",t,r);var s=n.get(e,t);if(s){var a=function(){o.w&&n.s[e].observers[t].deliver();var a=o.diffObjectFromOldObject(s,n.s[e].previousAttributes[t],o.equals,r.ignoredChanges);return o.forOwn(a,function(e,t){var r=[];o.forOwn(e,function(e,t){o.isFunction(e)||r.push(t)}),a[t]=o.pick(a[t],r)}),o.forEach(i.relationFields,function(e){delete a.added[e],delete a.removed[e],delete a.changed[e]}),{v:a}}();if("object"==typeof a)return a.v}},changeHistory:function(e,t){var r=this,n=r.defs[e],i=r.s[e];if(t=o.resolveId(n,t),e&&!r.defs[e])throw new g(e);if(t&&!o._sn(t))throw o._snErr("id");if(n.logFn("changeHistory",t),n.keepChangeHistory){if(!e)return i.changeHistory;var s=r.get(e,t);if(s)return i.changeHistories[t]}else n.errorFn("changeHistory is disabled for this resource!")},compute:function(e,t){var r=this,n=r.defs[e];if(t=o.resolveItem(r.s[e],t),!n)throw new g(e);if(!t)throw new b("Item not in the store!");if(!o._o(t)&&!o._sn(t))throw new y('"instance" must be an object, string or number!');return n.logFn("compute",t),o.forOwn(n.computed,function(e,r){o.compute.call(t,e,r)}),t},createInstance:function(e,t,r){var n=this.defs[e],i=void 0;if(t=t||{},!n)throw new g(e);if(t&&!o.isObject(t))throw new y('"attrs" must be an object!');if(r=o._(n,r),r.logFn("createInstance",t,r),r.notify&&r.beforeCreateInstance(r,t),r.useClass){var s=n[n["class"]];i=new s}else i={};return o.deepMixIn(i,t),r.notify&&r.afterCreateInstance(r,t),i},defineResource:a,digest:function(){this.observe.Platform.performMicrotaskCheckpoint()},eject:c,ejectAll:u,filter:f,get:function(e,t,r){var n=this,i=n.defs[e];if(!i)throw new g(e);if(!o._sn(t))throw o._snErr("id");r=o._(i,r),r.logFn("get",t,r);var s=n.s[e].index[t];return!s&&r.loadFromServer&&n.find(e,t,r),s},getAll:function(e,t){var r=this,n=r.defs[e],i=r.s[e],s=[];if(!n)throw new g(e);if(t&&!o._a(t))throw o._aErr("ids");if(n.logFn("getAll",t),o._a(t))for(var a=t.length,c=0;a>c;c++)i.index[t[c]]&&s.push(i.index[t[c]]);else s=i.collection.slice();return s},hasChanges:function(e,t){var r=this,i=r.defs[e];if(t=o.resolveId(i,t),!i)throw new g(e);if(!o._sn(t))throw o._snErr("id");return i.logFn("hasChanges",t),r.get(e,t)?n(r.changes(e,t)):!1},inject:l,lastModified:function(e,t){var r=this.defs[e],n=this.s[e];if(t=o.resolveId(r,t),!r)throw new g(e);return r.logFn("lastModified",t),t?(t in n.modified||(n.modified[t]=0),n.modified[t]):n.collectionModified},lastSaved:function(e,t){var r=this.defs[e],n=this.s[e];if(t=o.resolveId(r,t),!r)throw new g(e);return r.logFn("lastSaved",t),t in n.saved||(n.saved[t]=0),n.saved[t]},link:d,linkAll:p,linkInverse:h,previous:function(e,t){var r=this,n=r.defs[e],i=r.s[e];if(t=o.resolveId(n,t),!n)throw new g(e);if(!o._sn(t))throw o._snErr("id");return n.logFn("previous",t),i.previousAttributes[t]?o.copy(i.previousAttributes[t]):void 0},unlinkInverse:v}},function(e,t,r){var n=function(e){return e&&e.__esModule?e["default"]:e},i=n(r(40)),o=n(r(41)),s=n(r(42)),a=n(r(43)),c=n(r(44)),u=n(r(45)),f=n(r(46)),l=n(r(47)),d=n(r(48)),p=n(r(49));e.exports={create:i,destroy:o,destroyAll:s,find:a,findAll:c,loadRelations:u,reap:f,refresh:function(e,t,r){var n=this,i=n.utils;return new i.Promise(function(o,s){var a=n.defs[e];t=i.resolveId(n.defs[e],t),a?i._sn(t)?(r=i._(a,r),r.bypassCache=!0,r.logFn("refresh",t,r),o(n.get(e,t))):s(i._snErr("id")):s(new n.errors.NER(e))}).then(function(i){return i?n.find(e,t,r):i})},save:l,update:d,updateAll:p}},function(e){function t(e,t,r){if(null!=e)for(var n=-1,i=e.length;++n<i&&t.call(r,e[n],n,e)!==!1;);}e.exports=t},function(e){function t(e,t,r){var n=e.length;t=null==t?0:0>t?Math.max(n+t,0):Math.min(t,n),r=null==r?n:0>r?Math.max(n+r,0):Math.min(r,n);for(var i=[];r>t;)i.push(e[t++]);return i}e.exports=t},function(e,t,r){function n(e,t){return-1!==i(e,t)}var i=r(23);e.exports=n},function(e,t,r){function n(e,t){var r=i(e,t);-1!==r&&e.splice(r,1)}var i=r(23);e.exports=n},function(e){function t(e,i){if(null==e)return[];if(e.length<2)return e;null==i&&(i=r);var o,s,a;return o=~~(e.length/2),s=t(e.slice(0,o),i),a=t(e.slice(o,e.length),i),n(s,a,i)}function r(e,t){return t>e?-1:e>t?1:0}function n(e,t,r){for(var n=[];e.length&&t.length;)n.push(r(e[0],t[0])<=0?e.shift():t.shift());return e.length&&n.push.apply(n,e),t.length&&n.push.apply(n,t),n}e.exports=t},function(e,t,r){function n(e,t,r){o(e,function(n,o){return i(e,o)?t.call(r,e[o],o,e):void 0})}var i=r(24),o=r(25);e.exports=n},function(e,t,r){function n(e){for(var t,r=0,n=arguments.length;++r<n;)t=arguments[r],t&&o(t,i,e);return e}function i(e,t){var r=this[t];s(e)&&s(r)?n(r,e):this[t]=e}var o=r(14),s=r(26);e.exports=n},function(e,t,r){function n(e){for(var t,r="string"!=typeof arguments[1]?arguments[1]:i(arguments,1),n={},o=0;t=r[o++];)n[t]=e[t];return n}var i=r(10);e.exports=n},function(e,t,r){function n(e,t){for(var r=t.split("."),n=r.pop();t=r.shift();)if(e=e[t],null==e)return;return e[n]}r(27);e.exports=n},function(e,t,r){function n(e,t,r){var n=/^(.+)\.(.+)$/.exec(t);n?i(e,n[1])[n[2]]=r:e[t]=r}var i=r(28);e.exports=n},function(e,t,r){function n(e){return e=i(e),o(e).replace(/^[a-z]/,s)}var i=r(29),o=r(30),s=r(20);e.exports=n},function(e,t,r){function n(e){return e=i(e),e.toUpperCase()}var i=r(29);e.exports=n},function(e,t,r){var n;(function(e,i,o){(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function c(e){return"object"==typeof e&&null!==e}function u(){}function f(){return function(){e.nextTick(h)}}function l(){var e=0,t=new B(h),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=h,function(){e.port2.postMessage(0)}}function p(){return function(){setTimeout(h,1)}}function h(){for(var e=0;K>e;e+=2){var t=V[e],r=V[e+1];t(r),V[e]=void 0,V[e+1]=void 0}K=0}function v(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return X.error=t,X}}function m(e,t,r,n){try{e.call(t,r,n)}catch(i){return i}}function _(e,t,r){L(function(e){var n=!1,i=m(r,t,function(r){n||(n=!0,t!==r?O(e,r):j(e,r))},function(t){n||(n=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,x(e,i))},e)}function w(e,t){t._state===Y?j(e,t._result):e._state===J?x(e,t._result):D(t,void 0,function(t){O(e,t)},function(t){x(e,t)})}function E(e,t){if(t.constructor===e.constructor)w(e,t);else{var r=b(t);r===X?x(e,X.error):void 0===r?j(e,t):a(r)?_(e,t,r):j(e,t)}}function O(e,t){e===t?x(e,g()):s(t)?E(e,t):j(e,t)}function A(e){e._onerror&&e._onerror(e._result),F(e)}function j(e,t){e._state===W&&(e._result=t,e._state=Y,0===e._subscribers.length||L(F,e))}function x(e,t){e._state===W&&(e._state=J,e._result=t,L(A,e))}function D(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+Y]=r,i[o+J]=n,0===o&&e._state&&L(F,e)}function F(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,s=0;s<t.length;s+=3)n=t[s],i=t[s+r],n?k(r,n,i,o):i(o);e._subscribers.length=0}}function C(){this.error=null}function S(e,t){try{return e(t)}catch(r){return $.error=r,$}}function k(e,t,r,n){var i,o,s,c,u=a(r);if(u){if(i=S(r,n),i===$?(c=!0,o=i.error,i=null):s=!0,t===i)return void x(t,y())}else i=n,s=!0;t._state!==W||(u&&s?O(t,i):c?x(t,o):e===Y?j(t,i):e===J&&x(t,i))}function I(e,t){try{t(function(t){O(e,t)},function(t){x(e,t)})}catch(r){x(e,r)}}function M(e,t,r,n){this._instanceConstructor=e,this.promise=new e(v,n),this._abortOnReject=r,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&j(this.promise,this._result))):x(this.promise,this._validationError())}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function R(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function T(e){this._id=rt++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==e&&(a(e)||P(),this instanceof T||R(),I(this,e))}var U;U=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var N,H=U,K=(Date.now||function(){return(new Date).getTime()},Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return u.prototype=e,new u},0),L=function(e,t){V[K]=e,V[K+1]=t,K+=2,2===K&&N()},Q="undefined"!=typeof window?window:{},B=Q.MutationObserver||Q.WebKitMutationObserver,q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,V=new Array(1e3);N="undefined"!=typeof e&&"[object process]"==={}.toString.call(e)?f():B?l():q?d():p();var W=void 0,Y=1,J=2,X=new C,$=new C;M.prototype._validateInput=function(e){return H(e)},M.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},M.prototype._init=function(){this._result=new Array(this.length)};var z=M;M.prototype._enumerate=function(){for(var e=this.length,t=this.promise,r=this._input,n=0;t._state===W&&e>n;n++)this._eachEntry(r[n],n)},M.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;c(e)?e.constructor===r&&e._state!==W?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(Y,t,e))},M.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===W&&(this._remaining--,this._abortOnReject&&e===J?x(n,r):this._result[t]=this._makeResult(e,t,r)),0===this._remaining&&j(n,this._result)},M.prototype._makeResult=function(e,t,r){return r},M.prototype._willSettleAt=function(e,t){var r=this;D(e,void 0,function(e){r._settledAt(Y,t,e)},function(e){r._settledAt(J,t,e)})};var Z=function(e,t){return new z(this,e,!0,t).promise},G=function(e,t){function r(e){O(o,e)}function n(e){x(o,e)}var i=this,o=new i(v,t);if(!H(e))return x(o,new TypeError("You must pass an array to race.")),o;for(var s=e.length,a=0;o._state===W&&s>a;a++)D(i.resolve(e[a]),void 0,r,n);return o},et=function(e,t){var r=this;if(e&&"object"==typeof e&&e.constructor===r)return e;var n=new r(v,t);return O(n,e),n},tt=function(e,t){var r=this,n=new r(v,t);return x(n,e),n},rt=0,nt=T;T.all=Z,T.race=G,T.resolve=et,T.reject=tt,T.prototype={constructor:T,then:function(e,t){var r=this,n=r._state;
if(n===Y&&!e||n===J&&!t)return this;var i=new this.constructor(v),o=r._result;if(n){var s=arguments[n-1];L(function(){k(n,i,s,o)})}else D(r,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var it=function(){var e;e="undefined"!=typeof i?i:"undefined"!=typeof window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),a(t)}();t||(e.Promise=nt)},ot={Promise:nt,polyfill:it};r(51).amd?(n=function(){return ot}.call(t,r,t,o),!(void 0!==n&&(o.exports=n))):"undefined"!=typeof o&&o.exports?o.exports=ot:"undefined"!=typeof this&&(this.ES6Promise=ot)}).call(this)}).call(t,r(50),function(){return this}(),r(52)(e))},function(e,t){!function(t,r){e.exports=r()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e){function t(e,t,r){for(var n=e[r],i=t(n);r>0;){var o=Math.floor((r+1)/2)-1,s=e[o];if(i>=t(s))break;e[o]=n,e[r]=s,r=o}}var r=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(e,t,r){for(var n=e.length,i=e[r],o=t(i);;){var s=2*(r+1),a=s-1,c=null;if(n>a){var u=e[a],f=t(u);o>f&&(c=a)}if(n>s){var l=e[s],d=t(l);d<(null===c?o:t(e[a]))&&(c=s)}if(null===c)break;e[r]=e[c],e[c]=i,r=c}},o=function(){function e(t,r){if(n(this,e),t||(t=function(e){return e}),r||(r=function(e,t){return e===t}),"function"!=typeof t)throw new Error('BinaryHeap([weightFunc][, compareFunc]): "weightFunc" must be a function!');if("function"!=typeof r)throw new Error('BinaryHeap([weightFunc][, compareFunc]): "compareFunc" must be a function!');this.weightFunc=t,this.compareFunc=r,this.heap=[]}return r(e,{push:{value:function(e){this.heap.push(e),t(this.heap,this.weightFunc,this.heap.length-1)}},peek:{value:function(){return this.heap[0]}},pop:{value:function(){var e=this.heap[0],t=this.heap.pop();return this.heap.length>0&&(this.heap[0]=t,i(this.heap,this.weightFunc,0)),e}},remove:{value:function(e){for(var r=this.heap.length,n=0;r>n;n++)if(this.compareFunc(this.heap[n],e)){var o=this.heap[n],s=this.heap.pop();return n!==r-1&&(this.heap[n]=s,t(this.heap,this.weightFunc,n),i(this.heap,this.weightFunc,n)),o}return null}},removeAll:{value:function(){this.heap=[]}},size:{value:function(){return this.heap.length}}}),e}();e.exports=o}])})},function(e){function t(e,t,r){if(r=r||0,null==e)return-1;for(var n=e.length,i=0>r?n+r:r;n>i;){if(e[i]===t)return i;i++}return-1}e.exports=t},function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=t},function(e,t,r){function n(){a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=!0;for(var e in{toString:null})s=!1}function i(e,t,r){var i,u=0;null==s&&n();for(i in e)if(o(t,e,i,r)===!1)break;if(s)for(var f=e.constructor,l=!!f&&e===f.prototype;(i=a[u++])&&("constructor"===i&&(l||!c(e,i))||e[i]===Object.prototype[i]||o(t,e,i,r)!==!1););}function o(e,t,r,n){return e.call(n,t[r],r,t)}var s,a,c=r(24);e.exports=i},function(e){function t(e){return!!e&&"object"==typeof e&&e.constructor===Object}e.exports=t},function(e){function t(e){switch(typeof e){case"string":case"number":case"boolean":return!0}return null==e}e.exports=t},function(e,t,r){function n(e,t){return t?(i(t.split("."),function(t){e[t]||(e[t]={}),e=e[t]}),e):e}var i=r(9);e.exports=n},function(e){function t(e){return null==e?"":e.toString()}e.exports=t},function(e,t,r){function n(e){return e=i(e),e=o(e),e=s(e).replace(/[\-_]/g," ").replace(/\s[a-z]/g,a).replace(/\s+/g,"").replace(/^[A-Z]/g,c)}var i=r(29),o=r(53),s=r(54),a=r(20),c=r(55);e.exports=n},function(module,exports,__webpack_require__){function defineResource(definition){var _this=this,definitions=_this.defs;if(DSUtils._s(definition)&&(definition={name:definition.replace(/\s/gi,"")}),!DSUtils._o(definition))throw DSUtils._oErr("definition");if(!DSUtils._s(definition.name))throw new DSErrors.IA('"name" must be a string!');if(_this.s[definition.name])throw new DSErrors.R(""+definition.name+" is already registered!");try{Resource.prototype=_this.defaults,definitions[definition.name]=new Resource(definition);var def=definitions[definition.name];if(def.n=def.name,def.logFn("Preparing resource."),!DSUtils._s(def.idAttribute))throw new DSErrors.IA('"idAttribute" must be a string!');def.relations&&(def.relationList=[],def.relationFields=[],DSUtils.forOwn(def.relations,function(e,t){DSUtils.forOwn(e,function(r,n){DSUtils._a(r)||(e[n]=[r]),DSUtils.forEach(e[n],function(e){e.type=t,e.relation=n,e.name=def.n,def.relationList.push(e),def.relationFields.push(e.localField)})})}),def.relations.belongsTo&&DSUtils.forOwn(def.relations.belongsTo,function(e,t){DSUtils.forEach(e,function(e){e.parent&&(def.parent=t,def.parentKey=e.localKey,def.parentField=e.localField)})}),"function"==typeof Object.freeze&&(Object.freeze(def.relations),Object.freeze(def.relationList))),def.getResource=function(e){return _this.defs[e]},def.getEndpoint=function(e,t){t.params=t.params||{};var r=void 0,n=def.parentKey,i=t.hasOwnProperty("endpoint")?t.endpoint:def.endpoint,o=def.parentField,s=definitions[def.parent],a=t.params[n];if(a===!1||!n||!s)return a===!1&&delete t.params[n],i;if(delete t.params[n],DSUtils._sn(e)?r=def.get(e):DSUtils._o(e)&&(r=e),r&&(a=a||r[n]||(r[o]?r[o][s.idAttribute]:null)),!a)return i;var c=function(){delete t.endpoint;var e={};return DSUtils.forOwn(t,function(t,r){e[r]=t}),{v:DSUtils.makePath(s.getEndpoint(a,DSUtils._(s,e)),a,i)}}();return"object"==typeof c?c.v:void 0},def.filter&&(def.defaultFilter=def.filter,delete def.filter);var _class=def["class"]=DSUtils.pascalCase(def.name);try{"function"==typeof def.useClass?(eval("function "+_class+"() { def.useClass.call(this); }"),def[_class]=eval(_class),def[_class].prototype=function(e){function t(){}return t.prototype=e,new t}(def.useClass.prototype)):(eval("function "+_class+"() {}"),def[_class]=eval(_class))}catch(e){def[_class]=function(){}}def.methods&&DSUtils.deepMixIn(def[_class].prototype,def.methods),def[_class].prototype.set=function(e,t){DSUtils.set(this,e,t);var r=_this.s[def.n].observers[this[def.idAttribute]];return r&&!DSUtils.observe.hasObjectObserve?r.deliver():_this.compute(def.n,this),this},def[_class].prototype.get=function(e){return DSUtils.get(this,e)},def.computed&&DSUtils.forOwn(def.computed,function(e,t){DSUtils.isFunction(e)&&(def.computed[t]=[e],e=def.computed[t]),def.methods&&t in def.methods&&def.errorFn('Computed property "'+t+'" conflicts with previously defined prototype method!');var r;if(1===e.length){var n=e[0].toString().match(/function.*?\(([\s\S]*?)\)/);r=n[1].split(","),def.computed[t]=r.concat(e),e=def.computed[t],r.length&&def.errorFn("Use the computed property array syntax for compatibility with minified code!")}r=e.slice(0,e.length-1),DSUtils.forEach(r,function(e,t){r[t]=e.trim()}),e.deps=DSUtils.filter(r,function(e){return!!e})}),definition.schema&&_this.schemator&&(def.schema=_this.schemator.defineSchema(def.n,definition.schema),definition.hasOwnProperty("validate")||(def.validate=function(e,t,r){def.schema.validate(t,{ignoreMissing:def.ignoreMissing},function(e){return e?r(e):r(null,t)})})),DSUtils.forEach(instanceMethods,function(e){def[_class].prototype["DS"+DSUtils.pascalCase(e)]=function(){for(var t=arguments.length,r=Array(t),n=0;t>n;n++)r[n]=arguments[n];return r.unshift(this[def.idAttribute]||this),r.unshift(def.n),_this[e].apply(_this,r)}}),def[_class].prototype.DSCreate=function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.unshift(this),t.unshift(def.n),_this.create.apply(_this,t)},_this.s[def.n]={collection:[],expiresHeap:new DSUtils.BinaryHeap(function(e){return e.expires},function(e,t){return e.item===t}),completedQueries:{},queryData:{},pendingQueries:{},index:{},modified:{},saved:{},previousAttributes:{},observers:{},changeHistories:{},changeHistory:[],collectionModified:0},def.reapInterval&&setInterval(function(){return _this.reap(def.n,{isInterval:!0})},def.reapInterval);var fns=["registerAdapter","getAdapter","is"];for(var key in _this)"function"==typeof _this[key]&&fns.push(key);return DSUtils.forEach(fns,function(e){var t=e;def[t]=_this[t].shorthand!==!1?function(){for(var e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];return r.unshift(def.n),_this[t].apply(_this,r)}:function(){for(var e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];return _this[t].apply(_this,r)}}),def.beforeValidate=DSUtils.promisify(def.beforeValidate),def.validate=DSUtils.promisify(def.validate),def.afterValidate=DSUtils.promisify(def.afterValidate),def.beforeCreate=DSUtils.promisify(def.beforeCreate),def.afterCreate=DSUtils.promisify(def.afterCreate),def.beforeUpdate=DSUtils.promisify(def.beforeUpdate),def.afterUpdate=DSUtils.promisify(def.afterUpdate),def.beforeDestroy=DSUtils.promisify(def.beforeDestroy),def.afterDestroy=DSUtils.promisify(def.afterDestroy),DSUtils.forOwn(def.actions,function(e,t){if(def[t]&&!def.actions[t])throw new Error('Cannot override existing method "'+t+'"!');def[t]=function(r){r=r||{};var n=_this.getAdapter(e.adapter||"http"),i=DSUtils.deepMixIn({},e);return!r.hasOwnProperty("endpoint")&&i.endpoint&&(r.endpoint=i.endpoint),i.url="function"==typeof r.getEndpoint?r.getEndpoint(def,r):DSUtils.makePath(r.basePath||n.defaults.basePath||def.basePath,def.getEndpoint(null,r),t),i.method=i.method||"GET",DSUtils.deepMixIn(i,r),n.HTTP(i)}}),DSUtils.Events(def),def.logFn("Done preparing resource."),def}catch(err){throw delete definitions[definition.name],delete _this.s[definition.name],err}}var _interopRequire=function(e){return e&&e.__esModule?e["default"]:e},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};module.exports=defineResource;var DSUtils=_interopRequire(__webpack_require__(1)),DSErrors=_interopRequire(__webpack_require__(2)),Resource=function e(t){_classCallCheck(this,e),DSUtils.deepMixIn(this,t),this.endpoint="endpoint"in t?t.endpoint:this.name},instanceMethods=["compute","refresh","save","update","destroy","loadRelations","changeHistory","changes","hasChanges","lastModified","lastSaved","link","linkInverse","previous","unlinkInverse"]},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e],s=n.s[e],a=void 0,c=!1;if(t=i.resolveId(o,t),!o)throw new n.errors.NER(e);if(!i._sn(t))throw i._snErr("id");r=i._(o,r),r.logFn("eject",t,r);for(var u=0;u<s.collection.length;u++)if(s.collection[u][o.idAttribute]==t){a=s.collection[u],s.expiresHeap.remove(a),c=!0;break}if(c){var f=function(){r.notify&&(o.beforeEject(r,a),o.emit("DS.beforeEject",o,a)),n.unlinkInverse(o.n,t),s.collection.splice(u,1),i.w&&s.observers[t].close(),delete s.observers[t],delete s.index[t],delete s.previousAttributes[t],delete s.completedQueries[t],delete s.pendingQueries[t],i.forEach(s.changeHistories[t],function(e){i.remove(s.changeHistory,e)});var e=[];return i.forOwn(s.queryData,function(t,r){t.$$injected&&i.remove(t,a),t.length||e.push(r)}),i.forEach(e,function(e){delete s.completedQueries[e],delete s.queryData[e]}),delete s.changeHistories[t],delete s.modified[t],delete s.saved[t],s.collectionModified=i.updateTimestamp(s.collectionModified),r.notify&&(o.afterEject(r,a),o.emit("DS.afterEject",o,a)),{v:a}}();if("object"==typeof f)return f.v}}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e];if(t=t||{},!o)throw new n.errors.NER(e);if(!i._o(t))throw i._oErr("params");o.logFn("ejectAll",t,r);var s=n.s[e],a=i.toJson(t),c=n.filter(o.n,t),u=[];return i.isEmpty(t)?s.completedQueries={}:delete s.completedQueries[a],i.forEach(c,function(e){e&&e[o.idAttribute]&&u.push(e[o.idAttribute])}),i.forEach(u,function(e){n.eject(o.n,e,r)}),s.collectionModified=i.updateTimestamp(s.collectionModified),c}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e],s=n.s[e];if(!o)throw new n.errors.NER(e);if(t&&!i._o(t))throw i._oErr("params");t=t||{},r=i._(o,r),r.logFn("filter",t,r);var a=i.toJson(t);return a in s.completedQueries||!r.loadFromServer||s.pendingQueries[a]||n.findAll(e,t,r),o.defaultFilter.call(n,s.collection,e,t,r)}e.exports=t},function(e,t,r){function n(e,t,r){var n=t.n;return function(i,o,s,a,u){var f=this,l=void 0,d=a&&a(t.idAttribute)?a(t.idAttribute):f[t.idAttribute];if(c.forEach(t.relationFields,function(e){delete i[e],delete o[e],delete s[e]}),(!c.isEmpty(i)||!c.isEmpty(o)||!c.isEmpty(s)||u)&&(l=e.get(n,d),r.modified[d]=c.updateTimestamp(r.modified[d]),r.collectionModified=c.updateTimestamp(r.collectionModified),t.keepChangeHistory)){var p={resourceName:n,target:l,added:i,removed:o,changed:s,timestamp:r.modified[d]};r.changeHistories[d].push(p),r.changeHistory.push(p)}t.computed&&(l=l||e.get(n,d),c.forOwn(t.computed,function(e,t){var r=!1;c.forEach(e.deps,function(e){(e in i||e in o||e in s||!(t in l))&&(r=!0)}),r=r||!e.deps.length,r&&c.compute.call(l,e,t)})),t.relations&&(l=l||e.get(n,d),c.forEach(t.relationList,function(r){l[r.localField]&&(r.localKey in i||r.localKey in o||r.localKey in s)&&e.link(n,l[t.idAttribute],[r.relation])})),t.idAttribute in s&&t.errorFn('Doh! You just changed the primary key of an object! Your data for the "'+n+'" resource is now in an undefined (probably broken) state.')}}function i(e,t,r,o){var s=this,a=n(s,e,t,r,o),f=void 0;if(c._a(r)){f=[];for(var l=0;l<r.length;l++)f.push(i.call(s,e,t,r[l],o))}else{var d=e.computed,p=e.idAttribute;if(d&&d[p]&&!function(){var e=[];c.forEach(d[p].deps,function(t){e.push(r[t])}),r[p]=d[p][d[p].length-1].apply(r,e)}(),!(p in r)){var h=new u.R(""+e.n+'.inject: "attrs" must contain the property specified by "idAttribute"!');throw o.errorFn(h),h}try{c.forEach(e.relationList,function(t){var n=t.relation,i=s.defs[n],a=r[t.localField];if(a){if(!i)throw new u.R(""+e.n+" relation is defined but the resource is not!");if(c._a(a))!function(){var u=[];c.forEach(a,function(a){if(a!==s.s[n][a[i.idAttribute]])try{var c=s.inject(n,a,o.orig());t.foreignKey&&(c[t.foreignKey]=r[e.idAttribute]),u.push(c)}catch(f){o.errorFn(f,"Failed to inject "+t.type+' relation: "'+n+'"!')}}),r[t.localField]=u}();else if(a!==s.s[n][a[i.idAttribute]])try{r[t.localField]=s.inject(n,r[t.localField],o.orig()),t.foreignKey&&(r[t.localField][t.foreignKey]=r[e.idAttribute])}catch(f){o.errorFn(f,"Failed to inject "+t.type+' relation: "'+n+'"!')}}});var v=r[p],g=s.get(e.n,v),y=g?t.modified[v]:0;g?(c.deepMixIn(g,r),e.resetHistoryOnInject&&(t.previousAttributes[v]=c.copy(g),t.changeHistories[v].length&&(c.forEach(t.changeHistories[v],function(e){c.remove(t.changeHistory,e)}),t.changeHistories[v].splice(0,t.changeHistories[v].length))),c.w&&t.observers[v].deliver()):(g=o.useClass?r instanceof e[e["class"]]?r:new e[e["class"]]:{},c.deepMixIn(g,r),t.collection.push(g),t.changeHistories[v]=[],c.w&&(t.observers[v]=new s.observe.ObjectObserver(g),t.observers[v].open(a,g)),t.index[v]=g,a.call(g,{},{},{},null,!0),t.previousAttributes[v]=c.copy(g)),t.modified[v]=y&&t.modified[v]===y?c.updateTimestamp(t.modified[v]):t.modified[v],t.expiresHeap.remove(g);var b=(new Date).getTime();t.expiresHeap.push({item:g,timestamp:b,expires:e.maxAge?b+e.maxAge:Number.MAX_VALUE}),f=g}catch(m){o.errorFn(m,r)}}return f}function o(e,t,r){var n=this;c.forEach(e.relationList,function(i){r.findBelongsTo&&"belongsTo"===i.type&&t[e.idAttribute]?n.link(e.n,t[e.idAttribute],[i.relation]):(r.findHasMany&&"hasMany"===i.type||r.findHasOne&&"hasOne"===i.type)&&n.link(e.n,t[e.idAttribute],[i.relation])})}function s(e,t,r){var n=this,s=n.defs[e],a=n.s[e],f=void 0;if(!s)throw new u.NER(e);if(!c._o(t)&&!c._a(t))throw new u.IA(""+e+'.inject: "attrs" must be an object or an array!');var l=s.n;return r=c._(s,r),r.logFn("inject",t,r),r.notify&&(r.beforeInject(r,t),s.emit("DS.beforeInject",s,t)),f=i.call(n,s,a,t,r),a.collectionModified=c.updateTimestamp(a.collectionModified),r.findInverseLinks&&(c._a(f)?f.length&&n.linkInverse(l,f[0][s.idAttribute]):n.linkInverse(l,f[s.idAttribute])),c._a(f)?c.forEach(f,function(e){o.call(n,s,e,r)}):o.call(n,s,f,r),r.notify&&(r.afterInject(r,f),s.emit("DS.afterInject",s,f)),f}var a=function(e){return e&&e.__esModule?e["default"]:e};e.exports=s;var c=a(r(1)),u=a(r(2))},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e];if(r=r||[],t=i.resolveId(o,t),!o)throw new n.errors.NER(e);if(!i._sn(t))throw i._snErr("id");if(!i._a(r))throw i._aErr("relations");o.logFn("link",t,r);var s=n.get(e,t);return s&&i.forEach(o.relationList,function(e){var t=e.relation;if(!r.length||i.contains(r,t)){var a={};if("belongsTo"===e.type){var c=s[e.localKey]?n.get(t,s[e.localKey]):null;c&&(s[e.localField]=c)}else if("hasMany"===e.type)a[e.foreignKey]=s[o.idAttribute],s[e.localField]=n.defaults.constructor.prototype.defaultFilter.call(n,n.s[t].collection,t,a,{allowSimpleWhere:!0});else if("hasOne"===e.type){a[e.foreignKey]=s[o.idAttribute];var u=n.defaults.constructor.prototype.defaultFilter.call(n,n.s[t].collection,t,a,{allowSimpleWhere:!0});u.length&&(s[e.localField]=u[0])}}}),s}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e];if(r=r||[],!o)throw new n.errors.NER(e);if(!i._a(r))throw i._aErr("relations");o.logFn("linkAll",t,r);var s=n.filter(e,t);return s&&i.forEach(o.relationList,function(e){var t=e.relation;(!r.length||i.contains(r,t))&&("belongsTo"===e.type?i.forEach(s,function(r){var i=r[e.localKey]?n.get(t,r[e.localKey]):null;i&&(r[e.localField]=i)}):"hasMany"===e.type?i.forEach(s,function(r){var i={};i[e.foreignKey]=r[o.idAttribute],r[e.localField]=n.defaults.constructor.prototype.defaultFilter.call(n,n.s[t].collection,t,i,{allowSimpleWhere:!0})}):"hasOne"===e.type&&i.forEach(s,function(r){var i={};i[e.foreignKey]=r[o.idAttribute];var s=n.defaults.constructor.prototype.defaultFilter.call(n,n.s[t].collection,t,i,{allowSimpleWhere:!0});s.length&&(r[e.localField]=s[0])}))}),s}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e];if(r=r||[],t=i.resolveId(o,t),!o)throw new n.errors.NER(e);if(!i._sn(t))throw i._snErr("id");if(!i._a(r))throw i._aErr("relations");o.logFn("linkInverse",t,r);var s=n.get(e,t);return s&&i.forOwn(n.defs,function(e){i.forOwn(e.relations,function(t){i.forOwn(t,function(t,s){(!r.length||i.contains(r,e.n))&&o.n===s&&n.linkAll(e.n,{},[o.n])})})}),s}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e];if(r=r||[],t=i.resolveId(o,t),!o)throw new n.errors.NER(e);if(!i._sn(t))throw i._snErr("id");if(!i._a(r))throw i._aErr("relations");o.logFn("unlinkInverse",t,r);var s=n.get(e,t);return s&&i.forOwn(n.defs,function(e){i.forOwn(e.relations,function(e){i.forOwn(e,function(e,t){o.n===t&&i.forEach(e,function(e){i.forEach(n.s[e.name].collection,function(t){"hasMany"===e.type&&t[e.localField]?!function(){var r=void 0;i.forEach(t[e.localField],function(e,t){e===s&&(r=t)}),void 0!==r&&t[e.localField].splice(r,1)}():t[e.localField]===s&&delete t[e.localField]})})})})}),s}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e];r=r||{},t=t||{};var s=void 0;if(o)if(i._o(t)){if(r=i._(o,r),r.upsert&&i._sn(t[o.idAttribute]))return n.update(e,t[o.idAttribute],t,r);r.logFn("create",t,r)}else s=i._oErr("attrs");else s=new n.errors.NER(e);return new i.Promise(function(e,r){s?r(s):e(t)}).then(function(e){return r.beforeValidate.call(e,r,e)}).then(function(e){return r.validate.call(e,r,e)}).then(function(e){return r.afterValidate.call(e,r,e)}).then(function(e){return r.beforeCreate.call(e,r,e)}).then(function(e){return r.notify&&o.emit("DS.beforeCreate",o,e),n.getAdapter(r).create(o,e,r)}).then(function(e){return r.afterCreate.call(e,r,e)}).then(function(t){if(r.notify&&o.emit("DS.afterCreate",o,t),r.cacheResponse){var s=n.inject(o.n,t,r.orig()),a=s[o.idAttribute],c=n.s[e];return c.completedQueries[a]=(new Date).getTime(),c.saved[a]=i.updateTimestamp(c.saved[a]),s}return n.createInstance(e,t,r)})}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e],s=void 0;return new i.Promise(function(a,c){t=i.resolveId(o,t),o?i._sn(t)?(s=n.get(e,t)||{id:t},r=i._(o,r),r.logFn("destroy",t,r),a(s)):c(i._snErr("id")):c(new n.errors.NER(e))}).then(function(e){return r.beforeDestroy.call(e,r,e)}).then(function(i){return r.notify&&o.emit("DS.beforeDestroy",o,i),r.eagerEject&&n.eject(e,t),n.getAdapter(r).destroy(o,t,r)}).then(function(){return r.afterDestroy.call(s,r,s)}).then(function(i){return r.notify&&o.emit("DS.afterDestroy",o,i),n.eject(e,t),t})["catch"](function(t){throw r&&r.eagerEject&&s&&n.inject(e,s,{notify:!1}),t})}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e],s=void 0,a=void 0;return t=t||{},new i.Promise(function(s,a){o?i._o(t)?(r=i._(o,r),r.logFn("destroyAll",t,r),s()):a(i._oErr("attrs")):a(new n.errors.NER(e))}).then(function(){return a=n.defaults.defaultFilter.call(n,e,t),r.beforeDestroy(r,a)}).then(function(){return r.notify&&o.emit("DS.beforeDestroy",o,a),r.eagerEject&&(s=n.ejectAll(e,t)),n.getAdapter(r).destroyAll(o,t,r)}).then(function(){return r.afterDestroy(r,a)}).then(function(){return r.notify&&o.emit("DS.afterDestroy",o,a),s||n.ejectAll(e,t)})["catch"](function(t){throw r&&r.eagerEject&&s&&n.inject(e,s,{notify:!1}),t})}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.defs[e],s=n.s[e];return new i.Promise(function(a,c){o?i._sn(t)?(r=i._(o,r),r.logFn("find",t,r),r.params&&(r.params=i.copy(r.params)),(r.bypassCache||!r.cacheResponse)&&delete s.completedQueries[t],t in s.completedQueries&&n.get(e,t)?a(n.get(e,t)):(delete s.completedQueries[t],a())):c(i._snErr("id")):c(new n.errors.NER(e))}).then(function(a){if(a)return a;if(!(t in s.pendingQueries)){var c=void 0,u=r.findStrategy||r.strategy;"fallback"===u?!function(){var e=function(s){return n.getAdapter((r.findFallbackAdapters||r.fallbackAdapters)[s]).find(o,t,r)["catch"](function(t){return s++,s<r.fallbackAdapters.length?e(s):i.Promise.reject(t)})};c=e(0)}():c=n.getAdapter(r).find(o,t,r),s.pendingQueries[t]=c.then(function(o){if(delete s.pendingQueries[t],r.cacheResponse){var a=n.inject(e,o,r.orig());return s.completedQueries[t]=(new Date).getTime(),s.saved[t]=i.updateTimestamp(s.saved[t]),a}return n.createInstance(e,o,r.orig())})}return s.pendingQueries[t]})["catch"](function(e){throw s&&delete s.pendingQueries[t],e})}e.exports=t},function(e){function t(e,t,r,n){var i=this,o=i.utils,s=i.s[t],a=i.defs[t].idAttribute,c=(new Date).getTime();e=e||[],delete s.pendingQueries[r],s.completedQueries[r]=c,s.collectionModified=o.updateTimestamp(s.collectionModified);var u=i.inject(t,e,n.orig());return o._a(u)?o.forEach(u,function(e){if(e){var t=e[a];t&&(s.completedQueries[t]=c,s.saved[t]=o.updateTimestamp(s.saved[t]))}}):(n.errorFn("response is expected to be an array!"),s.completedQueries[u[a]]=c),u}function r(e,r,n){var i=this,o=i.utils,s=i.defs[e],a=i.s[e],c=void 0;return new o.Promise(function(t,u){r=r||{},i.defs[e]?o._o(r)?(n=o._(s,n),c=o.toJson(r),n.logFn("findAll",r,n),n.params&&(n.params=o.copy(n.params)),(n.bypassCache||!n.cacheResponse)&&(delete a.completedQueries[c],delete a.queryData[c]),c in a.completedQueries?t(n.useFilter?i.filter(e,r,n.orig()):a.queryData[c]):t()):u(o._oErr("params")):u(new i.errors.NER(e))}).then(function(u){if(c in a.completedQueries)return u;if(!(c in a.pendingQueries)){var f=void 0,l=n.findAllStrategy||n.strategy;"fallback"===l?!function(){var e=function(t){return i.getAdapter((n.findAllFallbackAdapters||n.fallbackAdapters)[t]).findAll(s,r,n)["catch"](function(r){return t++,t<n.fallbackAdapters.length?e(t):Promise.reject(r)})};f=e(0)}():f=i.getAdapter(n).findAll(s,r,n),a.pendingQueries[c]=f.then(function(r){return delete a.pendingQueries[c],n.cacheResponse?(a.queryData[c]=t.call(i,r,e,c,n),a.queryData[c].$$injected=!0,a.queryData[c]):(o.forEach(r,function(t,o){r[o]=i.createInstance(e,t,n.orig())}),r)})}return a.pendingQueries[c]})["catch"](function(e){throw a&&delete a.pendingQueries[c],e})}e.exports=r},function(e){function t(e,t,r,n){var i=this,o=i.utils,s=i.errors,a=i.defs[e],c=[];return new o.Promise(function(u,f){o._sn(t)&&(t=i.get(e,t)),o._s(r)&&(r=[r]),a?o._o(t)?o._a(r)?!function(){var e=o._(a,n);e.hasOwnProperty("findBelongsTo")||(e.findBelongsTo=!0),e.hasOwnProperty("findHasMany")||(e.findHasMany=!0),e.logFn("loadRelations",t,r,e);var s=[];o.forEach(a.relationList,function(e){var u=e.relation,f=a.getResource(u),l=o._(f,n);if(o.contains(r,u)||o.contains(r,e.localField)){var d=void 0,p={};l.allowSimpleWhere?p[e.foreignKey]=t[a.idAttribute]:(p.where={},p.where[e.foreignKey]={"==":t[a.idAttribute]}),"hasMany"===e.type&&p[e.foreignKey]?d=i.findAll(u,p,l.orig()):"hasOne"===e.type?e.localKey&&t[e.localKey]?d=i.find(u,t[e.localKey],l.orig()):e.foreignKey&&p[e.foreignKey]&&(d=i.findAll(u,p,l.orig()).then(function(e){return e.length?e[0]:null})):t[e.localKey]&&(d=i.find(u,t[e.localKey],n)),d&&(s.push(d),c.push(e.localField))}}),u(s)}():f(new s.IA('"relations" must be a string or an array!')):f(new s.IA('"instance(id)" must be a string, number or object!')):f(new s.NER(e))}).then(function(e){return o.Promise.all(e)}).then(function(e){return o.forEach(c,function(r,n){t[r]=e[n]}),t})}e.exports=t},function(e){function t(e,t){var r=this,n=r.utils,i=r.defs[e],o=r.s[e];return new n.Promise(function(s,a){if(i){t=n._(i,t),t.hasOwnProperty("notify")||(t.notify=!1),t.logFn("reap",t);for(var c=[],u=(new Date).getTime(),f=void 0;(f=o.expiresHeap.peek())&&f.expires<u;)c.push(f.item),delete f.item,o.expiresHeap.pop();s(c)}else a(new r.errors.NER(e))}).then(function(s){if((t.isInterval||t.notify)&&(i.beforeReap(t,s),i.emit("DS.beforeReap",i,s)),"inject"===t.reapAction)!function(){var e=(new Date).getTime();n.forEach(s,function(t){o.expiresHeap.push({item:t,timestamp:e,expires:i.maxAge?e+i.maxAge:Number.MAX_VALUE})})}();else if("eject"===t.reapAction)n.forEach(s,function(t){r.eject(e,t[i.idAttribute])});else if("refresh"===t.reapAction){var a=function(){var t=[];return n.forEach(s,function(n){t.push(r.refresh(e,n[i.idAttribute]))}),{v:n.Promise.all(t)}}();if("object"==typeof a)return a.v}return s}).then(function(e){return(t.isInterval||t.notify)&&(i.afterReap(t,e),i.emit("DS.afterReap",i,e)),e})}e.exports=t},function(e){function t(e,t,r){var n=this,i=n.utils,o=n.errors,s=n.defs[e],a=void 0;return new i.Promise(function(c,u){t=i.resolveId(s,t),s?i._sn(t)?n.get(e,t)?(a=n.get(e,t),r=i._(s,r),r.logFn("save",t,r),c(a)):u(new o.R('id "'+t+'" not found in cache!')):u(i._snErr("id")):u(new o.NER(e))}).then(function(e){return r.beforeValidate.call(e,r,e)}).then(function(e){return r.validate.call(e,r,e)}).then(function(e){return r.afterValidate.call(e,r,e)}).then(function(e){return r.beforeUpdate.call(e,r,e)}).then(function(o){if(r.notify&&s.emit("DS.beforeUpdate",s,o),r.changesOnly){var a=n.s[e];i.w&&a.observers[t].deliver();var c=[],u=n.changes(e,t);for(var f in u.added)c.push(f);for(f in u.changed)c.push(f);if(u=i.pick(o,c),i.isEmpty(u))return o;o=u}return n.getAdapter(r).update(s,t,o,r)}).then(function(e){return r.afterUpdate.call(e,r,e)}).then(function(t){if(r.notify&&s.emit("DS.afterUpdate",s,t),r.cacheResponse){var o=n.inject(s.n,t,r.orig()),a=n.s[e],c=o[s.idAttribute];return a.saved[c]=i.updateTimestamp(a.saved[c]),s.resetHistoryOnInject||(a.previousAttributes[c]=i.copy(o)),o}return n.createInstance(e,t,r.orig())})}e.exports=t},function(e){function t(e,t,r,n){var i=this,o=i.utils,s=i.errors,a=i.defs[e];return new o.Promise(function(i,c){t=o.resolveId(a,t),a?o._sn(t)?(n=o._(a,n),n.logFn("update",t,r,n),i(r)):c(o._snErr("id")):c(new s.NER(e))}).then(function(e){return n.beforeValidate.call(e,n,e)}).then(function(e){return n.validate.call(e,n,e)}).then(function(e){return n.afterValidate.call(e,n,e)}).then(function(e){return n.beforeUpdate.call(e,n,e)}).then(function(e){return n.notify&&a.emit("DS.beforeUpdate",a,e),i.getAdapter(n).update(a,t,e,n)}).then(function(e){return n.afterUpdate.call(e,n,e)}).then(function(t){if(n.notify&&a.emit("DS.afterUpdate",a,t),n.cacheResponse){var r=i.inject(a.n,t,n.orig()),s=i.s[e],c=r[a.idAttribute];return s.saved[c]=o.updateTimestamp(s.saved[c]),a.resetHistoryOnInject||(s.previousAttributes[c]=o.copy(r)),r}return i.createInstance(e,t,n.orig())})}e.exports=t},function(e){function t(e,t,r,n){var i=this,o=i.utils,s=i.errors,a=i.defs[e];return new o.Promise(function(i,c){a?(n=o._(a,n),n.logFn("updateAll",t,r,n),i(t)):c(new s.NER(e))}).then(function(e){return n.beforeValidate.call(e,n,e)}).then(function(e){return n.validate.call(e,n,e)}).then(function(e){return n.afterValidate.call(e,n,e)}).then(function(e){return n.beforeUpdate.call(e,n,e)}).then(function(e){return n.notify&&a.emit("DS.beforeUpdate",a,e),i.getAdapter(n).updateAll(a,e,r,n)}).then(function(e){return n.afterUpdate.call(e,n,e)}).then(function(r){n.notify&&a.emit("DS.afterUpdate",a,t);var s=n.orig();if(n.cacheResponse){var c=function(){var t=i.inject(a.n,r,s),n=i.s[e];return o.forEach(t,function(e){var t=e[a.idAttribute];n.saved[t]=o.updateTimestamp(n.saved[t]),a.resetHistoryOnInject||(n.previousAttributes[t]=o.copy(e))}),{v:t}}();if("object"==typeof c)return c.v}else{var u=function(){var t=[];return o.forEach(r,function(r){t.push(i.createInstance(e,r,s))}),{v:t}}();if("object"==typeof u)return u.v}})}e.exports=t},function(e){function t(){}var r=e.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var n=[];if(t){var i=document.createElement("div"),o=new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})});return o.observe(i,{attributes:!0}),function(e){n.length||i.setAttribute("yes","no"),n.push(e)}}return r?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=t,r.addListener=t,r.once=t,r.off=t,r.removeListener=t,r.removeAllListeners=t,r.emit=t,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},function(e){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){function n(e){return e=i(e),e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e}var i=r(29);e.exports=n},function(e,t,r){function n(e){return e=i(e),e.replace(o,"")}var i=r(29),o=/[^\x20\x2D0-9A-Z\x5Fa-z\xC0-\xD6\xD8-\xF6\xF8-\xFF]/g;e.exports=n},function(e,t,r){function n(e){return e=i(e),e.toLowerCase()}var i=r(29);e.exports=n}])});