/*!
 * vue-validator v2.0.0-alpha.11
 * (c) 2016 kazuya kawaguchi
 * Released under the MIT License.
 */
!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):i.VueValidator=t()}(this,function(){"use strict";function i(i){return i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i}function t(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function e(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)}function n(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?i:t}function a(i,t){window.console&&(console.warn("[vue-validator] "+i),t&&console.warn(t.stack))}function s(i){if(null===i)return!0;if(Array.isArray(i)){if(i.length>0)return!1;if(0===i.length)return!0}else if(w.Vue.util.isPlainObject(i))for(var t in i)if(w.Vue.util.hasOwn(i,t))return!1;return!0}function r(i,t,e){if(Array.isArray(i))for(var n=0;n<i.length;n++)t.call(e||i[n],i[n],n);else if(w.Vue.util.isPlainObject(i)){var a=w.Vue.util.hasOwn;for(var s in i)a(i,s)&&t.call(e||i[s],i[s],s)}}function o(i,t){var e=w.Vue.util.indexOf(i,t);return~e?i.splice(e,1):null}function l(i,t){return i?i.getAttribute(t):null}function u(i,t){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1);try{i.dispatchEvent(e)}catch(e){}}function d(t){if(Array.isArray(t)){if(0!==t.length){for(var e=!0,n=0,a=t.length;a>n&&(e=d(t[n]),e);n++);return e}return!1}return"number"==typeof t||"function"==typeof t?!0:"boolean"==typeof t?t:"string"==typeof t?t.length>0:null!==t&&"object"===("undefined"==typeof t?"undefined":i(t))?Object.keys(t).length>0:null===t||void 0===t?!1:void 0}function h(i,t){if("string"!=typeof t)return!1;var e=t.match(new RegExp("^/(.*?)/([gimy]*)$"));return e?new RegExp(e[1],e[2]).test(i):!1}function c(i,t){return"string"==typeof i?m(t,10)&&i.length>=parseInt(t,10):Array.isArray(i)?i.length>=parseInt(t,10):!1}function v(i,t){return"string"==typeof i?m(t,10)&&i.length<=parseInt(t,10):Array.isArray(i)?i.length<=parseInt(t,10):!1}function f(i,t){return!isNaN(+i)&&!isNaN(+t)&&+i>=+t}function _(i,t){return!isNaN(+i)&&!isNaN(+t)&&+t>=+i}function m(i){return/^(-?[1-9]\d*|0)$/.test(i)}function p(i){i.config._assetTypes.push("validator");var t=Object.create(null);i.util.extend(t,O),i.options.validators=t;var e=i.config.optionMergeStrategies;e&&(e.validators=e.methods),i.validator=function(t,e){return e?void(i.options.validators[t]=e):i.options.validators[t]}}function g(i){var t=i.prototype._init;i.prototype._init=function(i){this._validatorMaps||(this._validatorMaps=Object.create(null)),t.call(this,i)};var e=i.prototype._destroy;i.prototype._destroy=function(){e.apply(this,arguments),this._validatorMaps=null}}function y(i){var t=i.util,e=i.directive("model");i.directive("validate",{priority:e.priority+1,params:["group","field"],bind:function(){var i=this.vm,e=i.$options._validator;if(!e)return void a("TODO: should be implemented error message");var n=this.validator=this.vm._validatorMaps[e],s=this.field=t.camelize(this.arg?this.arg:this.params.field),r=this.validation=n.manageValidation(s,i,this.el);this.params.group&&n.addGroupValidation(this.params.group,this.field);var o=l(this.el,"v-model");this.on("blur",t.bind(r.listener,r)),"checkbox"!==this.el.type&&"radio"!==this.el.type&&"SELECT"!==this.el.tagName||o?o||this.on("input",t.bind(r.listener,r)):this.on("change",t.bind(r.listener,r))},update:function(i,e){i&&(t.isPlainObject(i)?this.handleObject(i):Array.isArray(i)&&this.handleArray(i),this.validator.validate(this.validation))},handleArray:function(i){var t=this;r(i,function(i){t.validation.setValidation(i)},this)},handleObject:function(i){var e=this;r(i,function(i,n){if(t.isPlainObject(i)){if("rule"in i){var a="message"in i?i.message:null;e.validation.setValidation(n,i.rule,a)}}else e.validation.setValidation(n,i)},this)},unbind:function(){this.validator&&this.validation&&(this.params.group&&this.validator.removeGroupValidation(this.params.group,this.field),this.validator.unmanageValidation(this.field,this.el),this.validator=null,this.validation=null)}})}function k(i){var t=i.util,e=i.FragmentFactory,n=i.directive("if"),s=i.util.bind,r=i.util.camelize;i.elementDirective("validator",{params:["name","groups","lazy"],bind:function(){var i=this;if(!this.params.name)return void a("TODO: should be implemented validator:bind name params nothing error");var e=this.validatorName="$"+r(this.params.name);if(!this.vm._validatorMaps)return void a("TODO: should be implemented error message");var n=[];this.params.groups&&(t.isArray(this.params.groups)?n=this.params.groups:t.isPlainObject(this.params.groups)||"string"!=typeof this.params.groups||n.push(this.params.groups));var o=this.validator=new M(e,this,n);o.enableReactive(),o.setupScope(),o.waitFor(s(function(){i.render(o,e),o.validate()},this)),this.params.lazy||this.vm.$activateValidator()},render:function(i,e){this.anchor=t.createAnchor("vue-validator"),t.replace(this.el,this.anchor),this.insert(e)},insert:function(i){t.extend(this.vm.$options,{_validator:i}),this.factory=new e(this.vm,this.el.innerHTML),n.insert.call(this)},unbind:function(){n.unbind.call(this),this.validator.disableReactive(),this.validatorName&&(this.validatorName=null,this.validator=null)}})}function V(i){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return V.installed?void a("already installed."):(w.Vue=i,p(i),g(i),k(i),void y(i))}var b=function(){function i(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),w={},O=Object.freeze({required:d,pattern:h,minlength:c,maxlength:v,min:f,max:_}),E=function(){function i(e,n,a,s){t(this,i),this.field=e,this.touched=!1,this.dirty=!1,this.modified=!1,this._validator=s,this._vm=n,this._el=a,this._init=this._getValue(a),this._value=a.value,this._validators={}}return b(i,[{key:"_getValue",value:function(i){return i.value}},{key:"manageElement",value:function(i){var t=this,e=w.Vue.util,n=l(i,"v-model");n&&(i.value=this._vm.$get(n),this._unwatch=this._vm.$watch(n,e.bind(function(e,n){e!==n&&(i.value=e,t.handleValidate(i))},this)))}},{key:"unmanageElement",value:function(i){this._unwatch&&this._unwatch()}},{key:"setValidation",value:function(i,t,e){var n=this._validators[i];n||(n=this._validators[i]={},n.name=i),n.arg=t,e&&(n.msg=e)}},{key:"listener",value:function(i){(!i.relatedTarget||"A"!==i.relatedTarget.tagName&&"BUTTON"!==i.relatedTarget.tagName)&&this.handleValidate(i.target,i.type)}},{key:"handleValidate",value:function(i,t){t&&"blur"===t&&(this.touched=!0),!this.dirty&&this._checkModified(i)&&(this.dirty=!0),this.modified=this._checkModified(i),this._validator.validate()}},{key:"_checkModified",value:function(i){return this._init!==this._getValue(i)}},{key:"validate",value:function(){var i=this,t=w.Vue.util,e={},n={},a=!0;r(this._validators,function(s,r){var o=i._resolveValidator(r),l=null,u=null;if(t.isPlainObject(o)?(o.check&&"function"==typeof o.check&&(l=o.check),o.message&&(u=o.message)):"function"==typeof o&&(l=o),s.msg&&(u=s.msg),l){var d=l.call(i._vm,i._getValue(i._el),s.arg);d||(a=!1,u&&(n[r]="function"==typeof u?u.call(i._vm,i.field,s.arg):u)),e[r]=!d}},this),this._fireEvent(this._el,a);var o={valid:a,invalid:!a,touched:this.touched,untouched:!this.touched,dirty:this.dirty,pristine:!this.dirty,modified:this.modified};return s(n)||(o.messages=n),t.extend(e,o),e}},{key:"_fireEvent",value:function(i,t){u(i,t?"valid":"invalid")}},{key:"_resolveValidator",value:function(i){var t=w.Vue.util.resolveAsset;return t(this._vm.$options,"validators",i)}}]),i}(),x=function(i){function a(i,e,s,r){t(this,a);var o=n(this,Object.getPrototypeOf(a).call(this,i,e,s,r));return o._multiple=o._el.hasAttribute("multiple"),o}return e(a,i),b(a,[{key:"_getValue",value:function(i){for(var t=[],e=0,n=i.options.length;n>e;e++){var a=i.options[e];!a.disabled&&a.selected&&t.push(a.value)}return t}},{key:"_setOption",value:function(i,t){for(var e=0,n=i.length;n>e;e++)for(var a=i[e],s=0,r=t.options.length;r>s;s++){var o=t.options[s];o.disabled||o.value!==a||o.hasAttribute("selected")&&o.selected||(o.selected=!0)}}},{key:"manageElement",value:function(i){var t=this,e=w.Vue.util,n=l(i,"v-model");if(n){var a=this._vm.$get(n),s=Array.isArray(a)?a:[a];this._setOption(s,i),this._unwatch=this._vm.$watch(n,e.bind(function(e,n){var a=Array.isArray(e)?e:[e],s=Array.isArray(n)?n:[n];a.slice().sort().toString()!==s.slice().sort().toString()&&(t._setOption(a,i),t.handleValidate(i))},this))}}},{key:"unmanageElement",value:function(i){this._unwatch&&this._unwatch()}},{key:"_checkModified",value:function(i){var t=this._getValue(i).slice().sort();if(this._init.length!==t.length)return!0;var e=this._init.slice().sort();return e.toString()!==t.toString()}}]),a}(E),A=function(a){function s(i,e,a,r){t(this,s);var o=n(this,Object.getPrototypeOf(s).call(this,i,e,a,r));return o._inits=[],o}return e(s,a),b(s,[{key:"_addItem",value:function(i){var t={el:i,init:i.checked,value:i.value};return this._inits.push(t),t}},{key:"_setChecked",value:function(i,t,e){t.value===i&&(t.checked=!0,this._init=t.checked,e.init=t.checked,e.value=i)}},{key:"manageElement",value:function(i){var t=this,e=w.Vue.util,n=this._addItem(i),a=n.model=l(i,"v-model");if(a){var s=this._vm.$get(a);this._setChecked(s,i,n),n.unwatch=this._vm.$watch(a,e.bind(function(e,n){e!==n&&(i.value===e&&(i.checked=e),t.handleValidate(i))},this))}else this._validator.validate()}},{key:"unmanageElement",value:function(i){var t=-1;r(this._inits,function(e,n){e.el===i&&(t=n)}),-1!==t&&(this._inits.splice(t,1),this._validator.validate())}},{key:"_getValue",value:function(t){var e=this;if(!this._inits||0===this._inits.length)return t.checked;var n=function(){var i=[];return r(e._inits,function(t,e){t.el.checked&&i.push(t.el.value)}),{v:i}}();return"object"===("undefined"==typeof n?"undefined":i(n))?n.v:void 0}},{key:"_checkModified",value:function(t){var e=this;if(0===this._inits.length)return this._init!==t.checked;var n=function(){var i=!1;return r(e._inits,function(t,e){i||(i=t.init!==t.el.checked)}),{v:i}}();return"object"===("undefined"==typeof n?"undefined":i(n))?n.v:void 0}}]),s}(E),j=function(a){function s(i,e,a,r){t(this,s);var o=n(this,Object.getPrototypeOf(s).call(this,i,e,a,r));return o._inits=[],o}return e(s,a),b(s,[{key:"_addItem",value:function(i){var t={el:i,init:i.checked,value:i.value};return this._inits.push(t),t}},{key:"_setChecked",value:function(i,t){for(var e=0,n=i.length;n>e;e++){var a=i[e];t.disabled||t.value!==a||t.checked||(t.checked=!0)}}},{key:"manageElement",value:function(i){var t=this,e=w.Vue.util,n=this._addItem(i),a=n.model=l(i,"v-model");if(a){var s=this._vm.$get(a);Array.isArray(s)?(this._setChecked(s,n.el),n.unwatch=this._vm.$watch(a,e.bind(function(i,e){i!==e&&(t._setChecked(i,n.el),t.handleValidate(n.el))},this))):(i.checked=s,this._init=i.checked,n.init=i.checked,n.value=i.value,n.unwatch=this._vm.$watch(a,e.bind(function(e,n){e!==n&&(i.checked=e,t.handleValidate(i))},this)))}else this._validator.validate()}},{key:"unmanageElement",value:function(i){var t=-1;r(this._inits,function(e,n){e.el===i&&(t=n,e.unwatch&&e.model&&(e.unwatch(),e.unwatch=null,e.model=null))}),-1!==t&&(this._inits.splice(t,1),this._validator.validate())}},{key:"_getValue",value:function(t){var e=this;if(!this._inits||0===this._inits.length)return t.checked;var n=function(){var i=[];return r(e._inits,function(t,e){t.el.checked&&i.push(t.el.value)}),{v:i}}();return"object"===("undefined"==typeof n?"undefined":i(n))?n.v:void 0}},{key:"_checkModified",value:function(t){var e=this;if(0===this._inits.length)return this._init!==t.checked;var n=function(){var i=!1;return r(e._inits,function(t,e){i||(i=t.init!==t.el.checked)}),{v:i}}();return"object"===("undefined"==typeof n?"undefined":i(n))?n.v:void 0}}]),s}(E),M=function(){function i(e,n,a){var s=this;t(this,i),this.name=e,this._scope={},this._dir=n,this._validations={},this._checkboxValidations={},this._radioValidations={},this._groups=a,this._groupValidations={},r(a,function(i){s._groupValidations[i]=[]},this)}return b(i,[{key:"enableReactive",value:function(){w.Vue.util.defineReactive(this._dir.vm,this.name,this._scope),this._dir.vm._validatorMaps[this.name]=this}},{key:"disableReactive",value:function(){this._dir.vm._validatorMaps[this.name]=null,this._dir.vm[this.name]=null}},{key:"manageValidation",value:function(i,t,e){var n=null;return n="SELECT"===e.tagName?this._manageSelectValidation(i,t,e):"checkbox"===e.type?this._manageCheckboxValidation(i,t,e):"radio"===e.type?this._manageRadioValidation(i,t,e):this._manageBaseValidation(i,t,e)}},{key:"unmanageValidation",value:function(i,t){"checkbox"===t.type?this._unmanageCheckboxValidation(i,t):"radio"===t.type?this._unmanageRadioValidation(i,t):"SELECT"===t.tagName?this._unmanageSelectValidation(i,t):this._unmanageBaseValidation(i,t)}},{key:"_manageBaseValidation",value:function(i,t,e){var n=this._validations[i]=new E(i,t,e,this);return n.manageElement(e),n}},{key:"_unmanageBaseValidation",value:function(i,t){var e=this._validations[i];e&&(e.unmanageElement(t),w.Vue["delete"](this._scope,i),this._validations[i]=null)}},{key:"_manageCheckboxValidation",value:function(i,t,e){var n=this._checkboxValidations[i];if(!n){var a=new j(i,t,e,this);n={validation:a,elements:0},this._checkboxValidations[i]=n}return n.elements++,n.validation.manageElement(e),n.validation}},{key:"_unmanageCheckboxValidation",value:function(i,t){var e=this._checkboxValidations[i];e&&(e.elements--,e.validation.unmanageElement(t),0===e.elements&&(w.Vue["delete"](this._scope,i),this._checkboxValidations[i]=null))}},{key:"_manageRadioValidation",value:function(i,t,e){var n=this._radioValidations[i];if(!n){var a=new A(i,t,e,this);n={validation:a,elements:0},this._radioValidations[i]=n}return n.elements++,n.validation.manageElement(e),n.validation}},{key:"_unmanageRadioValidation",value:function(i,t){var e=this._radioValidations[i];e&&(e.elements--,e.validation.unmanageElement(t),0===e.elements&&(w.Vue["delete"](this._scope,i),this._radioValidations[i]=null))}},{key:"_manageSelectValidation",value:function(i,t,e){var n=this._validations[i]=new x(i,t,e,this);return n.manageElement(e),n}},{key:"_unmanageSelectValidation",value:function(i,t){var e=this._validations[i];e&&(e.unmanageElement(t),w.Vue["delete"](this._scope,i),this._validations[i]=null)}},{key:"addGroupValidation",value:function(i,t){var e=w.Vue.util.indexOf,n=this._validations[t]||this._checkboxValidations[t].validation||this._radioValidations[t].validation,a=this._groupValidations[i];a&&(~e(a,n)||a.push(n))}},{key:"removeGroupValidation",value:function(i,t){var e=this._validations[t]||this._checkboxValidations[t].validation||this._radioValidations[t].validation,n=this._groupValidations[i];n&&o(n,e)}},{key:"validate",value:function(i){var t=this;r(this._validations,function(i,e){var n=i.validate();w.Vue.set(t._scope,e,n)},this),r(this._checkboxValidations,function(i,e){var n=i.validation.validate();w.Vue.set(t._scope,e,n)},this),r(this._radioValidations,function(i,e){var n=i.validation.validate();w.Vue.set(t._scope,e,n)},this)}},{key:"setupScope",value:function(){var i=this,t=w.Vue.util.bind,e=t(function(){return i.validations},this),n=t(function(){return i._scope},this);this._defineProperties(e,n),r(this._groups,function(t){var e=i._groupValidations[t],n={};w.Vue.set(i._scope,t,n),i._defineProperties(function(){return e},function(){return n})},this)}},{key:"waitFor",value:function(i){var t=this._dir.vm,e="$activateValidator";this._dir.vm[e]=function(){i(),t[e]=null}}},{key:"_defineProperties",value:function(i,t){var e=this,n=w.Vue.util.bind;r({valid:{fn:this._defineValid,arg:i},invalid:{fn:this._defineInvalid,arg:t},touched:{fn:this._defineTouched,arg:i},untouched:{fn:this._defineUntouched,arg:t},modified:{fn:this._defineModified,arg:i},dirty:{fn:this._defineDirty,arg:i},pristine:{fn:this._definePristine,arg:t},messages:{fn:this._defineMessages,arg:i}},function(i,a){Object.defineProperty(t(),a,{enumerable:!0,configurable:!0,get:function(){return n(i.fn,e)(i.arg)}})},this)}},{key:"_walkValidations",value:function(i,t,e){var n=this,a=w.Vue.util.hasOwn,s=e;return r(i,function(i,r){if(s!==!e&&a(n._scope,i.field)){var o=n._scope[i.field];o&&o[t]===!e&&(s=!e)}},this),s}},{key:"_defineValid",value:function(i){return this._walkValidations(i(),"valid",!0)}},{key:"_defineInvalid",value:function(i){return!i().valid}},{key:"_defineTouched",value:function(i){return this._walkValidations(i(),"touched",!1)}},{key:"_defineUntouched",value:function(i){return!i().touched}},{key:"_defineModified",value:function(i){return this._walkValidations(i(),"modified",!1)}},{key:"_defineDirty",value:function(i){return this._walkValidations(i(),"dirty",!1)}},{key:"_definePristine",value:function(i){return!i().dirty}},{key:"_defineMessages",value:function(i){var t=this,e=w.Vue.util.extend,n=w.Vue.util.hasOwn,a={};return r(i(),function(i,r){if(n(t._scope,i.field)){var o=t._scope[i.field];o&&!s(o.messages)&&(a[i.field]=e({},o.messages))}},this),s(a)?void 0:a}},{key:"validations",get:function(){var i=w.Vue.util.extend,t={};return i(t,this._validations),r(this._checkboxValidations,function(i,e){t[e]=i.validation},this),r(this._radioValidations,function(i,e){t[e]=i.validation},this),t}}]),i}();return V.version="2.0.0-alpha.10","undefined"!=typeof window&&window.Vue&&window.Vue.use(V),V});