/*!
 * vue-validator v2.0.0-alpha.13
 * (c) 2016 kazuya kawaguchi
 * Released under the MIT License.
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.VueValidator=i()}(this,function(){"use strict";function t(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function e(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function n(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function a(t,i){window.console&&(console.warn("[vue-validator] "+t),i&&console.warn(i.stack))}function r(t){if(null===t)return!0;if(Array.isArray(t)){if(t.length>0)return!1;if(0===t.length)return!0}else if(w.Vue.util.isPlainObject(t))for(var i in t)if(w.Vue.util.hasOwn(t,i))return!1;return!0}function o(t,i,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)i.call(e||t[n],t[n],n);else if(w.Vue.util.isPlainObject(t)){var a=w.Vue.util.hasOwn;for(var r in t)a(t,r)&&i.call(e||t[r],t[r],r)}}function s(t,i){var e=w.Vue.util.indexOf(t,i);return~e?t.splice(e,1):null}function l(t,i){return t?t.getAttribute(i):null}function u(t,i){var e=document.createEvent("HTMLEvents");e.initEvent(i,!0,!1);try{t.dispatchEvent(e)}catch(e){}}function d(i){if(Array.isArray(i)){if(0!==i.length){for(var e=!0,n=0,a=i.length;a>n&&(e=d(i[n]),e);n++);return e}return!1}return"number"==typeof i||"function"==typeof i?!0:"boolean"==typeof i?i:"string"==typeof i?i.length>0:null!==i&&"object"===("undefined"==typeof i?"undefined":t(i))?Object.keys(i).length>0:null===i||void 0===i?!1:void 0}function h(t,i){if("string"!=typeof i)return!1;var e=i.match(new RegExp("^/(.*?)/([gimy]*)$"));return e?new RegExp(e[1],e[2]).test(t):!1}function c(t,i){return"string"==typeof t?p(i,10)&&t.length>=parseInt(i,10):Array.isArray(t)?t.length>=parseInt(i,10):!1}function v(t,i){return"string"==typeof t?p(i,10)&&t.length<=parseInt(i,10):Array.isArray(t)?t.length<=parseInt(i,10):!1}function f(t,i){return!isNaN(+t)&&!isNaN(+i)&&+t>=+i}function _(t,i){return!isNaN(+t)&&!isNaN(+i)&&+i>=+t}function p(t){return/^(-?[1-9]\d*|0)$/.test(t)}function m(t){var i=t.util.extend,e=Object.create(null);i(e,O),t.options.validators=e;var n=t.config.optionMergeStrategies;n&&(n.validators=function(t,e){if(!e)return t;if(!t)return e;var n=Object.create(null);i(n,t);for(var a in e)n[a]=e[a];return n}),t.validator=function(i,e){return e?void(t.options.validators[i]=e):t.options.validators[i]}}function g(t){var i=t.prototype._init;t.prototype._init=function(t){this._validatorMaps||(this._validatorMaps=Object.create(null)),i.call(this,t)};var e=t.prototype._destroy;t.prototype._destroy=function(){e.apply(this,arguments),this._validatorMaps=null}}function y(t){var i=t.util,e=t.directive("if");t.compiler.terminalDirectives.push("validate"),t.directive("validate",{priority:e.priority+1,params:["group","field"],bind:function(){var t=this.vm,e=t.$options._validator;if(!e)return void a("TODO: should be implemented error message");var n=this.validator=this.vm._validatorMaps[e],r=this.field=i.camelize(this.arg?this.arg:this.params.field),o=this.validation=n.manageValidation(r,t,this.el,this._scope);this.params.group&&n.addGroupValidation(this.params.group,this.field);var s=l(this.el,"v-model");this.on("blur",i.bind(o.listener,o)),"checkbox"!==this.el.type&&"radio"!==this.el.type&&"SELECT"!==this.el.tagName||s?s||this.on("input",i.bind(o.listener,o)):this.on("change",i.bind(o.listener,o))},update:function(t,e){t&&(i.isPlainObject(t)?this.handleObject(t):Array.isArray(t)&&this.handleArray(t),this.validator.validate(this.validation))},handleArray:function(t){var i=this;o(t,function(t){i.validation.setValidation(t)},this)},handleObject:function(t){var e=this;o(t,function(t,n){if(i.isPlainObject(t)){if("rule"in t){var a="message"in t?t.message:null;e.validation.setValidation(n,t.rule,a)}}else e.validation.setValidation(n,t)},this)},unbind:function(){this.validator&&this.validation&&(this.params.group&&this.validator.removeGroupValidation(this.params.group,this.field),this.validator.unmanageValidation(this.field,this.el),this.validator=null,this.validation=null)}})}function k(t){var i=t.util,e=t.FragmentFactory,n=t.directive("if"),r=t.util.bind,o=t.util.camelize;t.elementDirective("validator",{params:["name","groups","lazy"],bind:function(){var t=this;if(!this.params.name)return void a("TODO: should be implemented validator:bind name params nothing error");var e=this.validatorName="$"+o(this.params.name);if(!this.vm._validatorMaps)return void a("TODO: should be implemented error message");var n=[];this.params.groups&&(i.isArray(this.params.groups)?n=this.params.groups:i.isPlainObject(this.params.groups)||"string"!=typeof this.params.groups||n.push(this.params.groups));var s=this.validator=new S(e,this,n);s.enableReactive(),s.setupScope(),s.waitFor(r(function(){t.render(s,e),s.validate()},this)),this.params.lazy||this.vm.$activateValidator()},render:function(t,e){this.anchor=i.createAnchor("vue-validator"),i.replace(this.el,this.anchor),this.insert(e)},insert:function(t){i.extend(this.vm.$options,{_validator:t}),this.factory=new e(this.vm,this.el.innerHTML),n.insert.call(this)},unbind:function(){n.unbind.call(this),this.validator.disableReactive(),this.validatorName&&(this.validatorName=null,this.validator=null)}})}function V(t){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return V.installed?void a("already installed."):(w.Vue=t,m(t),g(t),k(t),void y(t))}var b=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}(),w={},O=Object.freeze({required:d,pattern:h,minlength:c,maxlength:v,min:f,max:_}),E=function(){function t(e,n,a,r,o){i(this,t),this.field=e,this.touched=!1,this.dirty=!1,this.modified=!1,this._validator=o,this._vm=n,this._el=a,this._forScope=r,this._init=this._getValue(a),this._value=a.value,this._validators={}}return b(t,[{key:"_getValue",value:function(t){return t.value}},{key:"_getScope",value:function(){return this._forScope||this._vm}},{key:"manageElement",value:function(t){var i=this,e=w.Vue.util,n=this._getScope(),a=l(t,"v-model");a&&(t.value=n.$get(a)||"",this._unwatch=n.$watch(a,e.bind(function(e,n){e!==n&&(t.value=e,i.handleValidate(t))},this)))}},{key:"unmanageElement",value:function(t){this._unwatch&&this._unwatch()}},{key:"setValidation",value:function(t,i,e){var n=this._validators[t];n||(n=this._validators[t]={},n.name=t),n.arg=i,e&&(n.msg=e)}},{key:"listener",value:function(t){(!t.relatedTarget||"A"!==t.relatedTarget.tagName&&"BUTTON"!==t.relatedTarget.tagName)&&this.handleValidate(t.target,t.type)}},{key:"handleValidate",value:function(t,i){i&&"blur"===i&&(this.touched=!0),!this.dirty&&this._checkModified(t)&&(this.dirty=!0),this.modified=this._checkModified(t),this._validator.validate()}},{key:"_checkModified",value:function(t){return this._init!==this._getValue(t)}},{key:"validate",value:function(){var t=this,i=w.Vue.util,e={},n={},a=!0;o(this._validators,function(r,o){var s=t._resolveValidator(o),l=null,u=null;if(i.isPlainObject(s)?(s.check&&"function"==typeof s.check&&(l=s.check),s.message&&(u=s.message)):"function"==typeof s&&(l=s),r.msg&&(u=r.msg),l){var d=l.call(t._vm,t._getValue(t._el),r.arg);d||(a=!1,u&&(n[o]="function"==typeof u?u.call(t._vm,t.field,r.arg):u)),e[o]=!d}},this),this._fireEvent(this._el,a);var s={valid:a,invalid:!a,touched:this.touched,untouched:!this.touched,dirty:this.dirty,pristine:!this.dirty,modified:this.modified};return r(n)||(s.messages=n),i.extend(e,s),e}},{key:"_fireEvent",value:function(t,i){u(t,i?"valid":"invalid")}},{key:"_resolveValidator",value:function(t){var i=w.Vue.util.resolveAsset;return i(this._vm.$options,"validators",t)}}]),t}(),x=function(t){function a(t,e,r,o,s){i(this,a);var l=n(this,Object.getPrototypeOf(a).call(this,t,e,r,o,s));return l._multiple=l._el.hasAttribute("multiple"),l}return e(a,t),b(a,[{key:"_getValue",value:function(t){for(var i=[],e=0,n=t.options.length;n>e;e++){var a=t.options[e];!a.disabled&&a.selected&&i.push(a.value)}return i}},{key:"_setOption",value:function(t,i){for(var e=0,n=t.length;n>e;e++)for(var a=t[e],r=0,o=i.options.length;o>r;r++){var s=i.options[r];s.disabled||s.value!==a||s.hasAttribute("selected")&&s.selected||(s.selected=!0)}}},{key:"manageElement",value:function(t){var i=this,e=w.Vue.util,n=this._getScope(),a=l(t,"v-model");if(a){var r=n.$get(a),o=Array.isArray(r)?r:[r];this._setOption(o,t),this._unwatch=n.$watch(a,e.bind(function(e,n){var a=Array.isArray(e)?e:[e],r=Array.isArray(n)?n:[n];a.slice().sort().toString()!==r.slice().sort().toString()&&(i._setOption(a,t),i.handleValidate(t))},this))}}},{key:"unmanageElement",value:function(t){this._unwatch&&this._unwatch()}},{key:"_checkModified",value:function(t){var i=this._getValue(t).slice().sort();if(this._init.length!==i.length)return!0;var e=this._init.slice().sort();return e.toString()!==i.toString()}}]),a}(E),A=function(a){function r(t,e,a,o,s){i(this,r);var l=n(this,Object.getPrototypeOf(r).call(this,t,e,a,o,s));return l._inits=[],l}return e(r,a),b(r,[{key:"_addItem",value:function(t){var i={el:t,init:t.checked,value:t.value};return this._inits.push(i),i}},{key:"_setChecked",value:function(t,i,e){i.value===t&&(i.checked=!0,this._init=i.checked,e.init=i.checked,e.value=t)}},{key:"manageElement",value:function(t){var i=this,e=w.Vue.util,n=this._addItem(t),a=this._getScope(),r=n.model=l(t,"v-model");if(r){var o=a.$get(r);this._setChecked(o,t,n),n.unwatch=a.$watch(r,e.bind(function(e,n){e!==n&&(t.value===e&&(t.checked=e),i.handleValidate(t))},this))}else this._validator.validate()}},{key:"unmanageElement",value:function(t){var i=-1;o(this._inits,function(e,n){e.el===t&&(i=n)}),-1!==i&&(this._inits.splice(i,1),this._validator.validate())}},{key:"_getValue",value:function(i){var e=this;if(!this._inits||0===this._inits.length)return i.checked;var n=function(){var t=[];return o(e._inits,function(i,e){i.el.checked&&t.push(i.el.value)}),{v:t}}();return"object"===("undefined"==typeof n?"undefined":t(n))?n.v:void 0}},{key:"_checkModified",value:function(i){var e=this;if(0===this._inits.length)return this._init!==i.checked;var n=function(){var t=!1;return o(e._inits,function(i,e){t||(t=i.init!==i.el.checked)}),{v:t}}();return"object"===("undefined"==typeof n?"undefined":t(n))?n.v:void 0}}]),r}(E),j=function(a){function r(t,e,a,o,s){i(this,r);var l=n(this,Object.getPrototypeOf(r).call(this,t,e,a,o,s));return l._inits=[],l}return e(r,a),b(r,[{key:"_addItem",value:function(t){var i={el:t,init:t.checked,value:t.value};return this._inits.push(i),i}},{key:"_setChecked",value:function(t,i){for(var e=0,n=t.length;n>e;e++){var a=t[e];i.disabled||i.value!==a||i.checked||(i.checked=!0)}}},{key:"manageElement",value:function(t){var i=this,e=w.Vue.util,n=this._addItem(t),a=this._getScope(),r=n.model=l(t,"v-model");if(r){var o=a.$get(r);Array.isArray(o)?(this._setChecked(o,n.el),n.unwatch=a.$watch(r,e.bind(function(t,e){t!==e&&(i._setChecked(t,n.el),i.handleValidate(n.el))},this))):(t.checked=o||!1,this._init=t.checked,n.init=t.checked,n.value=t.value,n.unwatch=a.$watch(r,e.bind(function(e,n){e!==n&&(t.checked=e,i.handleValidate(t))},this)))}else this._validator.validate()}},{key:"unmanageElement",value:function(t){var i=-1;o(this._inits,function(e,n){e.el===t&&(i=n,e.unwatch&&e.model&&(e.unwatch(),e.unwatch=null,e.model=null))}),-1!==i&&(this._inits.splice(i,1),this._validator.validate())}},{key:"_getValue",value:function(i){var e=this;if(!this._inits||0===this._inits.length)return i.checked;var n=function(){var t=[];return o(e._inits,function(i,e){i.el.checked&&t.push(i.el.value)}),{v:t}}();return"object"===("undefined"==typeof n?"undefined":t(n))?n.v:void 0}},{key:"_checkModified",value:function(i){var e=this;if(0===this._inits.length)return this._init!==i.checked;var n=function(){var t=!1;return o(e._inits,function(i,e){t||(t=i.init!==i.el.checked)}),{v:t}}();return"object"===("undefined"==typeof n?"undefined":t(n))?n.v:void 0}}]),r}(E),S=function(){function t(e,n,a){var r=this;i(this,t),this.name=e,this._scope={},this._dir=n,this._validations={},this._checkboxValidations={},this._radioValidations={},this._groups=a,this._groupValidations={},o(a,function(t){r._groupValidations[t]=[]},this)}return b(t,[{key:"enableReactive",value:function(){w.Vue.util.defineReactive(this._dir.vm,this.name,this._scope),this._dir.vm._validatorMaps[this.name]=this}},{key:"disableReactive",value:function(){this._dir.vm._validatorMaps[this.name]=null,this._dir.vm[this.name]=null}},{key:"manageValidation",value:function(t,i,e,n){var a=null;return a="SELECT"===e.tagName?this._manageSelectValidation(t,i,e,n):"checkbox"===e.type?this._manageCheckboxValidation(t,i,e,n):"radio"===e.type?this._manageRadioValidation(t,i,e,n):this._manageBaseValidation(t,i,e,n)}},{key:"unmanageValidation",value:function(t,i){"checkbox"===i.type?this._unmanageCheckboxValidation(t,i):"radio"===i.type?this._unmanageRadioValidation(t,i):"SELECT"===i.tagName?this._unmanageSelectValidation(t,i):this._unmanageBaseValidation(t,i)}},{key:"_manageBaseValidation",value:function(t,i,e,n){var a=this._validations[t]=new E(t,i,e,n,this);return a.manageElement(e),a}},{key:"_unmanageBaseValidation",value:function(t,i){var e=this._validations[t];e&&(e.unmanageElement(i),w.Vue["delete"](this._scope,t),this._validations[t]=null)}},{key:"_manageCheckboxValidation",value:function(t,i,e,n){var a=this._checkboxValidations[t];if(!a){var r=new j(t,i,e,n,this);a={validation:r,elements:0},this._checkboxValidations[t]=a}return a.elements++,a.validation.manageElement(e),a.validation}},{key:"_unmanageCheckboxValidation",value:function(t,i){var e=this._checkboxValidations[t];e&&(e.elements--,e.validation.unmanageElement(i),0===e.elements&&(w.Vue["delete"](this._scope,t),this._checkboxValidations[t]=null))}},{key:"_manageRadioValidation",value:function(t,i,e,n){var a=this._radioValidations[t];if(!a){var r=new A(t,i,e,n,this);a={validation:r,elements:0},this._radioValidations[t]=a}return a.elements++,a.validation.manageElement(e),a.validation}},{key:"_unmanageRadioValidation",value:function(t,i){var e=this._radioValidations[t];e&&(e.elements--,e.validation.unmanageElement(i),0===e.elements&&(w.Vue["delete"](this._scope,t),this._radioValidations[t]=null))}},{key:"_manageSelectValidation",value:function(t,i,e,n){var a=this._validations[t]=new x(t,i,e,n,this);return a.manageElement(e),a}},{key:"_unmanageSelectValidation",value:function(t,i){var e=this._validations[t];e&&(e.unmanageElement(i),w.Vue["delete"](this._scope,t),this._validations[t]=null)}},{key:"addGroupValidation",value:function(t,i){var e=w.Vue.util.indexOf,n=this._validations[i]||this._checkboxValidations[i].validation||this._radioValidations[i].validation,a=this._groupValidations[t];a&&(~e(a,n)||a.push(n))}},{key:"removeGroupValidation",value:function(t,i){var e=this._validations[i]||this._checkboxValidations[i].validation||this._radioValidations[i].validation,n=this._groupValidations[t];n&&s(n,e)}},{key:"validate",value:function(t){var i=this;o(this._validations,function(t,e){var n=t.validate();w.Vue.set(i._scope,e,n)},this),o(this._checkboxValidations,function(t,e){var n=t.validation.validate();w.Vue.set(i._scope,e,n)},this),o(this._radioValidations,function(t,e){var n=t.validation.validate();w.Vue.set(i._scope,e,n)},this)}},{key:"setupScope",value:function(){var t=this,i=w.Vue.util.bind,e=i(function(){return t.validations},this),n=i(function(){return t._scope},this);this._defineProperties(e,n),o(this._groups,function(i){var e=t._groupValidations[i],n={};w.Vue.set(t._scope,i,n),t._defineProperties(function(){return e},function(){return n})},this)}},{key:"waitFor",value:function(t){var i=this._dir.vm,e="$activateValidator";this._dir.vm[e]=function(){t(),i[e]=null}}},{key:"_defineProperties",value:function(t,i){var e=this,n=w.Vue.util.bind;o({valid:{fn:this._defineValid,arg:t},invalid:{fn:this._defineInvalid,arg:i},touched:{fn:this._defineTouched,arg:t},untouched:{fn:this._defineUntouched,arg:i},modified:{fn:this._defineModified,arg:t},dirty:{fn:this._defineDirty,arg:t},pristine:{fn:this._definePristine,arg:i},messages:{fn:this._defineMessages,arg:t}},function(t,a){Object.defineProperty(i(),a,{enumerable:!0,configurable:!0,get:function(){return n(t.fn,e)(t.arg)}})},this)}},{key:"_walkValidations",value:function(t,i,e){var n=this,a=w.Vue.util.hasOwn,r=e;return o(t,function(t,o){if(r!==!e&&a(n._scope,t.field)){var s=n._scope[t.field];s&&s[i]===!e&&(r=!e)}},this),r}},{key:"_defineValid",value:function(t){return this._walkValidations(t(),"valid",!0)}},{key:"_defineInvalid",value:function(t){return!t().valid}},{key:"_defineTouched",value:function(t){return this._walkValidations(t(),"touched",!1)}},{key:"_defineUntouched",value:function(t){return!t().touched}},{key:"_defineModified",value:function(t){return this._walkValidations(t(),"modified",!1)}},{key:"_defineDirty",value:function(t){return this._walkValidations(t(),"dirty",!1)}},{key:"_definePristine",value:function(t){return!t().dirty}},{key:"_defineMessages",value:function(t){var i=this,e=w.Vue.util.extend,n=w.Vue.util.hasOwn,a={};return o(t(),function(t,o){if(n(i._scope,t.field)){var s=i._scope[t.field];s&&!r(s.messages)&&(a[t.field]=e({},s.messages))}},this),r(a)?void 0:a}},{key:"validations",get:function(){var t=w.Vue.util.extend,i={};return t(i,this._validations),o(this._checkboxValidations,function(t,e){i[e]=t.validation},this),o(this._radioValidations,function(t,e){i[e]=t.validation},this),i}}]),t}();return V.version="2.0.0-alpha.13","undefined"!=typeof window&&window.Vue&&window.Vue.use(V),V});