/*!
 * vue-validator v2.0.0-alpha.9
 * (c) 2016 kazuya kawaguchi
 * Released under the MIT License.
 */
!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):i.VueValidator=t()}(this,function(){"use strict";function i(i,t){window.console&&(console.warn("[vue-validator] "+i),t&&console.warn(t.stack))}function t(i){if(null===i)return!0;if(Array.isArray(i)){if(i.length>0)return!1;if(0===i.length)return!0}else if(y.Vue.util.isPlainObject(i))for(var t in i)if(y.Vue.util.hasOwn(i,t))return!1;return!0}function e(i,t,e){if(Array.isArray(i))for(var n=0;n<i.length;n++)t.call(e||i[n],i[n],n);else if(y.Vue.util.isPlainObject(i)){var a=y.Vue.util.hasOwn;for(var r in i)a(i,r)&&t.call(e||i[r],i[r],r)}}function n(i,t){var e=y.Vue.util.indexOf(i,t);return~e?i.splice(e,1):null}function a(i,t){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),i.dispatchEvent(e)}function r(i){if(Array.isArray(i)){if(0!==i.length){for(var t=!0,e=0,n=i.length;n>e&&(t=r(i[e]),t);e++);return t}return!1}return"number"==typeof i||"function"==typeof i?!0:"boolean"==typeof i?i:"string"==typeof i?i.length>0:null!==i&&"object"===("undefined"==typeof i?"undefined":m["typeof"](i))?Object.keys(i).length>0:null===i||void 0===i?!1:void 0}function s(i,t){if("string"!=typeof t)return!1;var e=t.match(new RegExp("^/(.*?)/([gimy]*)$"));return e?new RegExp(e[1],e[2]).test(i):!1}function o(i,t){return"string"==typeof i?h(t,10)&&i.length>=parseInt(t,10):Array.isArray(i)?i.length>=parseInt(t,10):!1}function l(i,t){return"string"==typeof i?h(t,10)&&i.length<=parseInt(t,10):Array.isArray(i)?i.length<=parseInt(t,10):!1}function u(i,t){return!isNaN(+i)&&!isNaN(+t)&&+i>=+t}function d(i,t){return!isNaN(+i)&&!isNaN(+t)&&+t>=+i}function h(i){return/^(-?[1-9]\d*|0)$/.test(i)}function c(i){i.config._assetTypes.push("validator");var t=Object.create(null);i.util.extend(t,g),i.options.validators=t;var e=i.config.optionMergeStrategies;e&&(e.validators=e.methods),i.validator=function(t,e){return e?void(i.options.validators[t]=e):i.options.validators[t]}}function v(i){var t=i.prototype._init;i.prototype._init=function(i){this._validatorMaps||(this._validatorMaps=Object.create(null)),t.call(this,i)};var e=i.prototype._destroy;i.prototype._destroy=function(){e.apply(this,arguments),this._validatorMaps=null}}function f(t){var n=t.util;t.directive("validate",{params:["group"],bind:function(){var t=this.vm,e=t.$options._validator;if(!e)return void i("TODO: should be implemented error message");var a=this.validator=this.vm._validatorMaps[e],r=this.field=n.camelize(this.arg),s=this.validation=a.manageValidation(r,t,this.el);this.params.group&&a.addGroupValidation(this.params.group,this.field),this.on("blur",n.bind(s.listener,s)),"checkbox"===this.el.type||"radio"===this.el.type||"SELECT"===this.el.tagName?this.on("change",n.bind(s.listener,s)):this.on("input",n.bind(s.listener,s))},update:function(i,t){i&&(n.isPlainObject(i)?this.handleObject(i):Array.isArray(i)&&this.handleArray(i),this.validator.validate(this.validation))},handleArray:function(i){var t=this;e(i,function(i){t.validation.setValidation(i)},this)},handleObject:function(i){var t=this;e(i,function(i,e){if(n.isPlainObject(i)){if("rule"in i){var a="message"in i?i.message:null;t.validation.setValidation(e,i.rule,a)}}else t.validation.setValidation(e,i)},this)},unbind:function(){this.validator&&this.validation&&(this.params.group&&this.validator.removeGroupValidation(this.params.group,this.field),this.validator.unmanageValidation(this.field,this.el),this.validator=null,this.validation=null)}})}function p(t){var e=t.util,n=t.FragmentFactory,a=t.directive("if"),r=t.util.bind;t.elementDirective("validator",{params:["name","groups","lazy"],bind:function(){var t=this;if(!this.params.name)return void i("TODO: should be implemented validator:bind name params nothing error");var n=this.validatorName="$"+this.params.name;if(!this.vm._validatorMaps)return void i("TODO: should be implemented error message");var a=[];this.params.groups&&(e.isArray(this.params.groups)?a=this.params.groups:e.isPlainObject(this.params.groups)||"string"!=typeof this.params.groups||a.push(this.params.groups));var s=this.validator=new w(n,this,a);s.enableReactive(),s.setupScope(),s.waitFor(r(function(){t.render(s,n),s.validate()},this)),this.params.lazy||this.vm.$activateValidator()},render:function(i,t){this.anchor=e.createAnchor("vue-validator"),e.replace(this.el,this.anchor),this.insert(t)},insert:function(i){e.extend(this.vm.$options,{_validator:i}),this.factory=new n(this.vm,this.el.innerHTML),a.insert.call(this)},unbind:function(){a.unbind.call(this),this.validator.disableReactive(),this.validatorName&&(this.validatorName=null,this.validator=null)}})}function _(t){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _.installed?void i("already installed."):(y.Vue=t,c(t),v(t),p(t),void f(t))}var m={};m["typeof"]=function(i){return i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i},m.classCallCheck=function(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")},m.createClass=function(){function i(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),m.inherits=function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)},m.possibleConstructorReturn=function(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?i:t};var y={},g=Object.freeze({required:r,pattern:s,minlength:o,maxlength:l,min:u,max:d}),k=function(){function i(t,e,n,a){m.classCallCheck(this,i),this.field=t,this.touched=!1,this.dirty=!1,this.modified=!1,this._validator=a,this._vm=e,this._el=n,this._init=this._getValue(n),this._value=n.value,this._validators={}}return m.createClass(i,[{key:"_getValue",value:function(i){return i.value}},{key:"setValidation",value:function(i,t,e){var n=this._validators[i];n||(n=this._validators[i]={},n.name=i),n.arg=t,e&&(n.msg=e)}},{key:"listener",value:function(i){(!i.relatedTarget||"A"!==i.relatedTarget.tagName&&"BUTTON"!==i.relatedTarget.tagName)&&("blur"===i.type&&(this.touched=!0),!this.dirty&&this._checkModified(i.target)&&(this.dirty=!0),this.modified=this._checkModified(i.target),this._validator.validate())}},{key:"_checkModified",value:function(i){return this._init!==this._getValue(i)}},{key:"validate",value:function(){var i=this,n=y.Vue.util,a={},r={},s=!0;e(this._validators,function(t,e){var o=i._resolveValidator(e),l=null,u=null;if(n.isPlainObject(o)?(o.check&&"function"==typeof o.check&&(l=o.check),o.message&&(u=o.message)):"function"==typeof o&&(l=o),t.msg&&(u=t.msg),l){var d=l.call(i._vm,i._getValue(i._el),t.arg);d||(s=!1,u&&(r[e]="function"==typeof u?u.call(i._vm,i.field,t.arg):u)),a[e]=!d}},this),this._fireEvent(this._el,s);var o={valid:s,invalid:!s,touched:this.touched,untouched:!this.touched,dirty:this.dirty,pristine:!this.dirty,modified:this.modified};return t(r)||(o.messages=r),n.extend(a,o),a}},{key:"_fireEvent",value:function(i,t){a(i,t?"valid":"invalid")}},{key:"_resolveValidator",value:function(i){var t=y.Vue.util.resolveAsset;return t(this._vm.$options,"validators",i)}}]),i}(),V=function(i){function t(i,e,n,a){m.classCallCheck(this,t);var r=m.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,i,e,n,a));return r._inits=[],r}return m.inherits(t,i),m.createClass(t,[{key:"manageElement",value:function(i){var t={el:i,init:i.checked,value:i.value};this._inits.push(t),this._validator.validate()}},{key:"unmanageElement",value:function(i){var t=-1;return e(this._inits,function(e,n){e.el===i&&(t=n)}),-1===t?!1:(this._inits.splice(t,1),this._validator.validate(),!0)}},{key:"_getValue",value:function(i){var t=this;if(!this._inits||0===this._inits.length)return i.checked;var n=function(){var i=[];return e(t._inits,function(t,e){t.el.checked&&i.push(t.el.value)}),{v:i}}();return"object"===("undefined"==typeof n?"undefined":m["typeof"](n))?n.v:void 0}},{key:"_checkModified",value:function(i){var t=this;if(0===this._inits.length)return this._init!==i.checked;var n=function(){var i=!1;return e(t._inits,function(t,e){i||(i=t.init!==t.el.checked)}),{v:i}}();return"object"===("undefined"==typeof n?"undefined":m["typeof"](n))?n.v:void 0}}]),t}(k),b=function(i){function t(i,e,n,a){m.classCallCheck(this,t);var r=m.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,i,e,n,a));return r._inits=[],r}return m.inherits(t,i),m.createClass(t,[{key:"manageElement",value:function(i){var t={el:i,init:i.checked,value:i.value};this._inits.push(t),this._validator.validate()}},{key:"unmanageElement",value:function(i){var t=-1;return e(this._inits,function(e,n){e.el===i&&(t=n)}),-1===t?!1:(this._inits.splice(t,1),this._validator.validate(),!0)}},{key:"_getValue",value:function(i){var t=this;if(!this._inits||0===this._inits.length)return i.checked;var n=function(){var i=[];return e(t._inits,function(t,e){t.el.checked&&i.push(t.el.value)}),{v:i}}();return"object"===("undefined"==typeof n?"undefined":m["typeof"](n))?n.v:void 0}},{key:"_checkModified",value:function(i){var t=this;if(0===this._inits.length)return this._init!==i.checked;var n=function(){var i=!1;return e(t._inits,function(t,e){i||(i=t.init!==t.el.checked)}),{v:i}}();return"object"===("undefined"==typeof n?"undefined":m["typeof"](n))?n.v:void 0}}]),t}(k),O=function(i){function t(i,e,n,a){m.classCallCheck(this,t);var r=m.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,i,e,n,a));return r._multiple=r._el.hasAttribute("multiple"),r}return m.inherits(t,i),m.createClass(t,[{key:"_getValue",value:function(i){for(var t=[],e=0,n=i.options.length;n>e;e++){var a=i.options[e];!a.disabled&&a.selected&&t.push(a.value)}return t}},{key:"_checkModified",value:function(i){var t=this._getValue(i).sort();if(this._init.length!==t.length)return!0;var e=this._init.sort();return e.toString()!==t.toString()}}]),t}(k),w=function(){function i(t,n,a){var r=this;m.classCallCheck(this,i),this.name=t,this._scope={},this._dir=n,this._validations={},this._checkboxValidations={},this._radioValidations={},this._groups=a,this._groupValidations={},e(a,function(i){r._groupValidations[i]=[]},this)}return m.createClass(i,[{key:"enableReactive",value:function(){y.Vue.util.defineReactive(this._dir.vm,this.name,this._scope),this._dir.vm._validatorMaps[this.name]=this}},{key:"disableReactive",value:function(){this._dir.vm._validatorMaps[this.name]=null,this._dir.vm[this.name]=null}},{key:"manageValidation",value:function(i,t,e){var n=null;return n="SELECT"===e.tagName?this._validations[i]=new O(i,t,e,this):"checkbox"===e.type?this._manageCheckboxValidation(i,t,e):"radio"===e.type?this._manageRadioValidation(i,t,e):this._validations[i]=new k(i,t,e,this)}},{key:"unmanageValidation",value:function(i,t){"checkbox"===t.type?this._unmanageCheckboxValidation(i,t):"radio"===t.type?this._unmanageRadioValidation(i,t):(y.Vue["delete"](this._scope,i),this._validations[i]=null)}},{key:"_manageCheckboxValidation",value:function(i,t,e){var n=this._checkboxValidations[i];if(!n){var a=new b(i,t,e,this);n={validation:a,elements:0},this._checkboxValidations[i]=n}return n.elements++,n.validation.manageElement(e),n.validation}},{key:"_unmanageCheckboxValidation",value:function(i,t){var e=this._checkboxValidations[i];e&&(e.elements--,e.validation.unmanageElement(t),0===e.elements&&(y.Vue["delete"](this._scope,i),this._checkboxValidations[i]=null))}},{key:"_manageRadioValidation",value:function(i,t,e){var n=this._radioValidations[i];if(!n){var a=new V(i,t,e,this);n={validation:a,elements:0},this._radioValidations[i]=n}return n.elements++,n.validation.manageElement(e),n.validation}},{key:"_unmanageRadioValidation",value:function(i,t){var e=this._radioValidations[i];e&&(e.elements--,e.validation.unmanageElement(t),0===e.elements&&(y.Vue["delete"](this._scope,i),this._radioValidations[i]=null))}},{key:"addGroupValidation",value:function(i,t){var e=y.Vue.util.indexOf,n=this._validations[t]||this._checkboxValidations[t].validation||this._radioValidations[t].validation,a=this._groupValidations[i];a&&(~e(a,n)||a.push(n))}},{key:"removeGroupValidation",value:function(i,t){var e=this._validations[t]||this._checkboxValidations[t].validation||this._radioValidations[t].validation,a=this._groupValidations[i];a&&n(a,e)}},{key:"validate",value:function(i){var t=this;e(this._validations,function(i,e){var n=i.validate();y.Vue.set(t._scope,e,n)},this),e(this._checkboxValidations,function(i,e){var n=i.validation.validate();y.Vue.set(t._scope,e,n)},this),e(this._radioValidations,function(i,e){var n=i.validation.validate();y.Vue.set(t._scope,e,n)},this)}},{key:"setupScope",value:function(){var i=this,t=y.Vue.util.bind,n=t(function(){return i.validations},this),a=t(function(){return i._scope},this);this._defineProperties(n,a),e(this._groups,function(t){var e=i._groupValidations[t],n={};y.Vue.set(i._scope,t,n),i._defineProperties(function(){return e},function(){return n})},this)}},{key:"waitFor",value:function(i){var t=this._dir.vm,e="$activateValidator";this._dir.vm[e]=function(){i(),t[e]=null}}},{key:"_defineProperties",value:function(i,t){var n=this,a=y.Vue.util.bind;e({valid:{fn:this._defineValid,arg:i},invalid:{fn:this._defineInvalid,arg:t},touched:{fn:this._defineTouched,arg:i},untouched:{fn:this._defineUntouched,arg:t},modified:{fn:this._defineModified,arg:i},dirty:{fn:this._defineDirty,arg:i},pristine:{fn:this._definePristine,arg:t},messages:{fn:this._defineMessages,arg:i}},function(i,e){Object.defineProperty(t(),e,{enumerable:!0,configurable:!0,get:function(){return a(i.fn,n)(i.arg)}})},this)}},{key:"_walkValidations",value:function(i,t,n){var a=this,r=y.Vue.util.hasOwn,s=n;return e(i,function(i,e){if(s!==!n&&r(a._scope,i.field)){var o=a._scope[i.field];o&&o[t]===!n&&(s=!n)}},this),s}},{key:"_defineValid",value:function(i){return this._walkValidations(i(),"valid",!0)}},{key:"_defineInvalid",value:function(i){return!i().valid}},{key:"_defineTouched",value:function(i){return this._walkValidations(i(),"touched",!1)}},{key:"_defineUntouched",value:function(i){return!i().touched}},{key:"_defineModified",value:function(i){return this._walkValidations(i(),"modified",!1)}},{key:"_defineDirty",value:function(i){return this._walkValidations(i(),"dirty",!1)}},{key:"_definePristine",value:function(i){return!i().dirty}},{key:"_defineMessages",value:function(i){var n=this,a=y.Vue.util.extend,r=y.Vue.util.hasOwn,s={};return e(i(),function(i,e){if(r(n._scope,i.field)){var o=n._scope[i.field];o&&!t(o.messages)&&(s[i.field]=a({},o.messages))}},this),t(s)?void 0:s}},{key:"validations",get:function(){var i=y.Vue.util.extend,t={};return i(t,this._validations),e(this._checkboxValidations,function(i,e){t[e]=i.validation},this),e(this._radioValidations,function(i,e){t[e]=i.validation},this),t}}]),i}();return _.version="2.0.0-alpha.9","undefined"!=typeof window&&window.Vue&&window.Vue.use(_),_});