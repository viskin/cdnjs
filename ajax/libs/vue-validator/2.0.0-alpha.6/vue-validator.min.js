/*!
 * vue-validator v2.0.0-alpha.6
 * (c) 2015 kazuya kawaguchi
 * Released under the MIT License.
 */
!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):i.VueValidator=t()}(this,function(){"use strict";function i(i,t){window.console&&(console.warn("[vue-validator] "+i),t&&console.warn(t.stack))}function t(i){if(null===i)return!0;if(Array.isArray(i)){if(i.length>0)return!1;if(0===i.length)return!0}else if(y.Vue.util.isPlainObject(i))for(var t in i)if(y.Vue.util.hasOwn(i,t))return!1;return!0}function e(i,t,e){if(Array.isArray(i))for(var a=0;a<i.length;a++)t.call(e||i[a],i[a],a);else if(y.Vue.util.isPlainObject(i)){var n=y.Vue.util.hasOwn;for(var s in i)n(i,s)&&t.call(e||i[s],i[s],s)}}function a(i,t){var e=y.Vue.util.indexOf(i,t);return~e?i.splice(e,1):null}function n(i,t){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),i.dispatchEvent(e)}function s(i){return Array.isArray(i)?i.length>0:"number"==typeof i||"function"==typeof i?!0:"boolean"==typeof i?i:"string"==typeof i?i.length>0:null!==i&&"object"===("undefined"==typeof i?"undefined":g["typeof"](i))?Object.keys(i).length>0:null===i||void 0===i?!1:void 0}function r(i,t){if("string"!=typeof t)return!1;var e=t.match(new RegExp("^/(.*?)/([gimy]*)$"));return e?new RegExp(e[1],e[2]).test(i):!1}function o(i,t){return"string"==typeof i&&h(t,10)&&i.length>=parseInt(t,10)}function l(i,t){return"string"==typeof i&&h(t,10)&&i.length<=parseInt(t,10)}function u(i,t){return!isNaN(+i)&&!isNaN(+t)&&+i>=+t}function d(i,t){return!isNaN(+i)&&!isNaN(+t)&&+t>=+i}function h(i){return/^(-?[1-9]\d*|0)$/.test(i)}function v(i){i.config._assetTypes.push("validator"),i.options.validators=_;var t=i.config.optionMergeStrategies;t&&(t.validators=t.methods),i.validator=function(t,e){return e?void(i.options.validators[t]=e):i.options.validators[t]}}function c(i){var t=i.prototype._init;i.prototype._init=function(i){this._validatorMaps||(this._validatorMaps=Object.create(null)),t.call(this,i)};var e=i.prototype._destroy;i.prototype._destroy=function(){e.apply(this,arguments),this._validatorMaps=null}}function f(t){var a=t.util;t.directive("validate",{params:["group"],bind:function(){var t=this.vm,e=t.$options._validator;if(!e)return void i("TODO: should be implemented error message");var n=this.validator=this.vm._validatorMaps[e],s=this.validation=new b(this);n.addValidation(s),this.params.group&&n.addGroupValidation(this.params.group,s),this.on("blur",a.bind(this.validation.listener,this.validation)),this.on("input",a.bind(this.validation.listener,this.validation))},update:function(i,t){i&&(a.isPlainObject(i)?this.handleObject(i):this.handleSingle(i),this.validator.validate(this.validation))},handleSingle:function(i){var t=Object.keys(this.validation.validates)[0];this.validation.updateValidate(t,i)},handleObject:function(i){var t=this;e(i,function(i,e){a.isPlainObject(i)?"rule"in i&&t.validation.updateValidate(e,i.rule,"message"in i?i.message:null):t.validation.updateValidate(e,i)},this)},unbind:function(){this.validator&&this.validation&&(this.params.group&&this.validator.removeGroupValidation(this.params.group,this.validation),this.validator.removeValidation(this.validation),this.validator=null,this.validation=null)}})}function p(t){var e=t.util,a=t.FragmentFactory,n=t.directive("if");t.elementDirective("validator",{params:["name","groups"],bind:function(){if(!this.params.name)return void i("TODO: should be implemented validator:bind name params nothing error");var t=this.validatorName="$"+this.params.name;if(!this.vm._validatorMaps)return void i("TODO: should be implemented error message");var a=[];this.params.groups&&(e.isArray(this.params.groups)?a=this.params.groups:e.isPlainObject(this.params.groups)||"string"!=typeof this.params.groups||a.push(this.params.groups));var n=this.validator=new V(t,this,a);n.enableReactive(),n.setupScope(),this.anchor=e.createAnchor("vue-validator"),e.replace(this.el,this.anchor),this.insert(t),this.vm.$on("hook:compiled",function(){n.validate()})},insert:function(i){e.extend(this.vm.$options,{_validator:i}),this.factory=new a(this.vm,this.el.innerHTML),n.insert.call(this)},unbind:function(){n.unbind.call(this),this.validator.disableReactive(),this.validatorName&&(this.validatorName=null,this.validator=null)}})}function m(t){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return m.installed?void i("already installed."):(y.Vue=t,v(t),c(t),p(t),void f(t))}var g={};g["typeof"]=function(i){return i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i},g.classCallCheck=function(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")},g.createClass=function(){function i(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}}();var y={},_=Object.freeze({required:s,pattern:r,minlength:o,maxlength:l,min:u,max:d}),b=function(){function i(t){g.classCallCheck(this,i),this.model=t.arg,this.el=t.el,this.dir=t,this.init=t.el.value,this.touched=!1,this.dirty=!1,this.modified=!1,this.validates=this._buildValidates(t)}return g.createClass(i,[{key:"_buildValidates",value:function(i){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],e=y.Vue.util.resolveAsset,a=y.Vue.util.camelize,n=Object.create(null),s=i.modifiers;for(var r in s){var o=e(i.vm.$options,"validators",a(r));o&&(n[r]={arg:t,fn:o})}return n}},{key:"updateValidate",value:function(i,t,e,a){this.validates[i]&&(this.validates[i].arg=t,e&&(this.validates[i].msg=e),a&&(this.validates[i].fn=a))}},{key:"listener",value:function(i){(!i.relatedTarget||"A"!==i.relatedTarget.tagName&&"BUTTON"!==i.relatedTarget.tagName)&&("blur"===i.type&&(this.touched=!0),this.dirty||this.el.value===this.init||(this.dirty=!0),this.modified=this.el.value!==this.init,this.dir.validator.validate())}},{key:"validate",value:function(){var i=this,a=y.Vue.util.extend,s=Object.create(null),r=Object.create(null),o=!0;e(this.validates,function(t,e){var a=t.fn(i.el.value,t.arg);if(!a){o=!1;var n=t.msg;n&&(r[e]="function"==typeof n?n():n)}s[e]=!a},this),n(this.el,o?"valid":"invalid");var l={valid:o,invalid:!o,touched:this.touched,untouched:!this.touched,dirty:this.dirty,pristine:!this.dirty,modified:this.modified};return t(r)||(l.messages=r),a(s,l),s}}]),i}(),V=function(){function i(t,a,n){var s=this;g.classCallCheck(this,i),this.name=t,this.scope=Object.create(null),this._dir=a,this._validations=[],this._groups=n,this._groupValidations=Object.create(null),e(n,function(i){s._groupValidations[i]=[]},this)}return g.createClass(i,[{key:"enableReactive",value:function(){y.Vue.util.defineReactive(this._dir.vm,this.name,this.scope),this._dir.vm._validatorMaps[this.name]=this}},{key:"disableReactive",value:function(){this._dir.vm._validatorMaps[this.name]=null,this._dir.vm[this.name]=null}},{key:"addValidation",value:function(i){this._validations.push(i)}},{key:"removeValidation",value:function(i){y.Vue.util.del(this.scope,i.model),a(this._validations,i)}},{key:"addGroupValidation",value:function(i,t){var e=this._groupValidations[i];e&&e.push(t)}},{key:"removeGroupValidation",value:function(i,t){var e=this._groupValidations[i];e&&a(e,t)}},{key:"validate",value:function(i){var t=this;e(this._validations,function(i,e){var a=i.validate();y.Vue.util.set(t.scope,i.model,a)},this)}},{key:"setupScope",value:function(){var i=this;this._defineProperties(this._validations,this.scope),e(this._groups,function(t){var e=i._groupValidations[t],a=Object.create(null);y.Vue.util.set(i.scope,t,a),i._defineProperties(e,a)},this)}},{key:"_defineProperties",value:function(i,t){var a=this,n=y.Vue.util.bind;e({valid:{fn:this._defineValid,arg:i},invalid:{fn:this._defineInvalid,arg:t},touched:{fn:this._defineTouched,arg:i},untouched:{fn:this._defineUntouched,arg:t},modified:{fn:this._defineModified,arg:i},dirty:{fn:this._defineDirty,arg:i},pristine:{fn:this._definePristine,arg:t},messages:{fn:this._defineMessages,arg:i}},function(i,e){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return n(i.fn,a)(i.arg)}})},this)}},{key:"_walkValidations",value:function(i,t,a){var n=this,s=y.Vue.util.hasOwn,r=a;return e(i,function(i,e){if(r!==!a&&s(n.scope,i.model)){var o=n.scope[i.model];o&&o[t]===!a&&(r=!a)}},this),r}},{key:"_defineValid",value:function(i){return this._walkValidations(i,"valid",!0)}},{key:"_defineInvalid",value:function(i){return!i.valid}},{key:"_defineTouched",value:function(i){return this._walkValidations(i,"touched",!1)}},{key:"_defineUntouched",value:function(i){return!i.touched}},{key:"_defineModified",value:function(i){return this._walkValidations(i,"modified",!1)}},{key:"_defineDirty",value:function(i){return this._walkValidations(i,"dirty",!1)}},{key:"_definePristine",value:function(i){return!i.dirty}},{key:"_defineMessages",value:function(i){var a=this,n=y.Vue.util.extend,s=y.Vue.util.hasOwn,r=Object.create(null);return e(i,function(i,e){if(s(a.scope,i.model)){var o=a.scope[i.model];o&&!t(o.messages)&&(r[i.model]=n(Object.create(null),o.messages))}},this),t(r)?void 0:r}}]),i}();return m.version="2.0.0-alpha.5","undefined"!=typeof window&&window.Vue&&window.Vue.use(m),m});