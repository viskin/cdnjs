(function(){var a,b;if(!window.vex){return $.error("Vex is required to use vex.dialog")}a=function(c){var d;d={};$.each(c.serializeArray(),function(){if(d[this.name]){if(!d[this.name].push){d[this.name]=[d[this.name]]}return d[this.name].push(this.value||"")}else{return d[this.name]=this.value||""}});return d};b={};b.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary"},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(d,c){d.data().vex.value=false;return vex.close(d.data().vex.id)}}};b.defaultOptions={callback:function(c){if(console&&console.log){return console.log("Vex dialog callback:",c)}},afterOpen:function(){},message:"Message",input:'<input name="vex" type="hidden" value="_vex-empty-value" />',value:false,buttons:[b.buttons.YES,b.buttons.NO],showCloseButton:false,onSubmit:function(){var c,d;c=$(this);d=c.parent();event.preventDefault();event.stopPropagation();d.data().vex.value=b.getFormValueOnSubmit(a(c));return vex.close(d.data().vex.id)},focusFirstInput:true};b.defaultAlertOptions={message:"Alert",buttons:[b.buttons.YES]};b.defaultConfirmOptions={message:"Confirm"};b.open=function(c){var d;c=$.extend({},vex.defaultOptions,b.defaultOptions,c);c.content=b.buildDialogForm(c);c.beforeClose=function(e){return c.callback(e.data().vex.value)};d=vex.open(c);if(c.focusFirstInput){d.find('input[type="text"], input[type="submit"]').first().focus()}return d};b.alert=function(c){if(typeof c==="string"){c={message:c}}c=$.extend({},vex.dialog.defaultAlertOptions,c);return vex.dialog.open(c)};b.confirm=function(c){if(typeof c==="string"){return $.error("vex.dialog.confirm(options) requires options.callback.")}c=$.extend({},vex.dialog.defaultConfirmOptions,c);return vex.dialog.open(c)};b.prompt=function(d){var c;if(typeof d==="string"){return $.error("vex.dialog.prompt(options) requires options.callback.")}c={message:'<label for="vex">'+(d.label||"Prompt:")+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+(d.placeholder||"")+'" />'};d=$.extend({},c,d);return vex.dialog.open(d)};b.buildDialogForm=function(e){var c,f,d;c=$('<form class="vex-dialog-form" />');d=$('<div class="vex-dialog-message" />');f=$('<div class="vex-dialog-input" />');c.append(d.append(e.message)).append(f.append(e.input)).append(b.buttonsToDOM(e.buttons)).bind("submit.vex",e.onSubmit);return c};b.getFormValueOnSubmit=function(c){if(c.vex){if(c.vex==="_vex-empty-value"){return true}return c.vex}else{return c}};b.buttonsToDOM=function(d){var c;c=$('<div class="vex-dialog-buttons" />');$.each(d,function(e,f){return c.append($('<input type="'+f.type+'" />').val(f.text).addClass(f.className+" vex-dialog-button "+(e===0?"vex-first ":"")+(e===d.length-1?"vex-last ":"")).bind("click.vex",function(g){if(f.click){return f.click($(this).parents("."+vex.baseClassNames.content),g)}}))});return c};window.vex.dialog=b}).call(this);