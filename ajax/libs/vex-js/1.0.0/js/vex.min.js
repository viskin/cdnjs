(function(){var b,c,a;b=jQuery;c=false;b(function(){var d;d=(document.body||document.documentElement).style;return c=d.animation!==void 0||d.WebkitAnimation!==void 0||d.MozAnimation!==void 0||d.MsAnimation!==void 0||d.OAnimation!==void 0});a={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"vex",content:"vex-content",overlay:"vex-overlay",close:"vex-close",closing:"vex-closing"},defaultOptions:{content:"",showCloseButton:true,overlayClosesOnClick:true,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",closeCSS:{}},open:function(d){d=b.extend({},a.defaultOptions,d);d.id=a.globalID;a.globalID+=1;d.$vex=b("<div>").addClass(a.baseClassNames.vex).addClass(d.className).css(d.css).data({vex:d});d.$vexOverlay=b("<div>").addClass(a.baseClassNames.overlay).addClass(d.overlayClassName).css(d.overlayCSS).data({vex:d});if(d.overlayClosesOnClick){d.$vexOverlay.bind("click.vex",function(f){if(f.target!==this){return}return a.close(b(this).data().vex.id)})}d.$vex.append(d.$vexOverlay);d.$vexContent=b("<div>").addClass(a.baseClassNames.content).addClass(d.contentClassName).css(d.contentCSS).append(d.content).data({vex:d});d.$vex.append(d.$vexContent);if(d.showCloseButton){d.$closeButton=b("<div>").addClass(a.baseClassNames.close).addClass(d.closeClassName).css(d.closeCSS).data({vex:d}).bind("click.vex",function(){return a.close(b(this).data().vex.id)});d.$vexContent.append(d.$closeButton)}b(d.appendLocation).append(d.$vex);if(d.afterOpen){d.afterOpen(d.$vexContent,d)}setTimeout((function(){return d.$vexContent.trigger("vexOpen",d)}),0);return d.$vexContent},getAllVexes:function(){return b("."+a.baseClassNames.vex+':not(".'+a.baseClassNames.closing+'") .'+a.baseClassNames.content)},getVexByID:function(d){return a.getAllVexes().filter(function(){return b(this).data().vex.id===d})},close:function(e){var d;if(!e){d=a.getAllVexes().last();if(!d.length){return false}e=d.data().vex.id}return a.closeByID(e)},closeAll:function(){var d;d=a.getAllVexes().map(function(){return b(this).data().vex.id});if(!(d&&d.length)){return false}b.each(d.reverse(),function(e,f){return a.closeByID(f)});return true},closeByID:function(i){var g,e,f,h,d;e=a.getVexByID(i);if(!e.length){return}g=e.data().vex.$vex;d=b.extend({},e.data().vex);f=function(){if(d.beforeClose){return d.beforeClose(e,d)}};h=function(){e.trigger("vexClose",d);g.remove();if(d.afterClose){return d.afterClose(e,d)}};if(c){f();g.unbind(a.animationEndEvent).bind(a.animationEndEvent,function(){return h()}).addClass(a.baseClassNames.closing)}else{f();h()}return true},hideLoading:function(){return b(".vex-loading-spinner").remove()},showLoading:function(){a.hideLoading();return b("body").append('<div class="vex-loading-spinner '+a.defaultOptions.className+'"></div>')}};window.vex=a}).call(this);