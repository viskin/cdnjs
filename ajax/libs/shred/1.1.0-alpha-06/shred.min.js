(function(){var d,h,k,b,a,l,e,m,j,c,i,f,g=[].slice;l=require("querystring");j=(f=require("fairmont"),b=f.include,k=f.clone,i=f.type,h=f.base64,f);a=require("typely").overload;e=require("./request").request;m=(function(){var n,o;n=require("url");o=n.resolve;return function(){return decodeURIComponent(o.apply(null,arguments))}})();d={basic:function(n){var o,p;p=n.username,o=n.password;return"Basic "+h(""+p+":"+o)},bearer:function(n){return"Bearer "+n}};c=a(function(n){n("string",function(o){return c({url:o})});n("string","object",function(o,p){return c({url:o,description:p})});return n("object",function(t){var u,x,q,r,s,o,p,w,v;p=t.url,x=t.description;r=function(z,y){if(y==null){y=x}return c({url:m(p,z),description:y})};q=(function(){var y;y=(require("url-template")).parse(p);return function(A,z){if(z==null){z=x}return c({url:y.expand(A),description:z})}})();s=function(y){var z;if(y.url==null){y.url=p}if(y.headers==null){y.headers={}}z=function(){return e.apply(null,[y].concat(g.call(arguments)))};b(z,{invoke:function(){return z.apply(null,arguments)},curl:function(){var C,A,D,B;p=y.url,D=y.method,C=y.headers;return("curl -v -X"+(D.toUpperCase())+" "+p)+(function(){var E;E=[];for(A in C){B=C[A];E.push(" -H'"+A+": "+B+"'")}return E})()},authorize:function(D){var E,B,C,A;B=Object.keys(D)[0];C=(function(){var F;if(((F=y.authorization)!=null?F[B]:void 0)!=null){return y.authorization[B]}else{if(d[B]!=null){return d[B]}else{return function(G){var I,H;I=G.k,H=G.v;return""+I+": "+H}}}})();E=C(D[B]);A=k(y);A.headers.authorization=E;return s(A)}});return z};v=a(function(y){y("string",function(z){return r(z)});y("string","object",function(A,z){return r(A,z)});y("object",function(z){return q(z)});return y("object","object",function(A,z){return q(A,z)})});w=function(y,z){return v[y]=(function(){switch(i(z)){case"object":return s(k(z));case"function":return z(function(){if(arguments.length===1){return v.apply(null,g.call(arguments).concat([{}]))}else{return v.apply(null,arguments)}})}})()};for(o in x){u=x[o];w(o,u)}return v})});module.exports={resource:c}}).call(this);