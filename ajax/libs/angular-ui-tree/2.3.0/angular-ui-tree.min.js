/**
 * @license Angular UI Tree v2.1.5
 * (c) 2010-2014. https://github.com/JimLiu/angular-ui-tree
 * License: MIT
 */
!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeHolderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element","$attrs","treeConfig",function(e,n,t,o){this.scope=e,e.$element=n,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element","$attrs","treeConfig",function(e,n,t,o){this.scope=e,e.$element=n,e.$modelValue=null,e.$parentNodeScope=null,e.$childNodesScope=null,e.$parentNodesScope=null,e.$treeScope=null,e.$handleScope=null,e.$type="uiTreeNode",e.$$apply=!1,e.collapsed=!1,e.init=function(t){var o=t[0];e.$treeScope=t[1]?t[1].scope:null,e.$parentNodeScope=o.scope.$nodeScope,e.$modelValue=o.scope.$modelValue[e.$index],e.$parentNodesScope=o.scope,o.scope.initSubNode(e),n.on("$destroy",function(){o.scope.destroySubNode(e)})},e.index=function(){return e.$parentNodesScope.$modelValue.indexOf(e.$modelValue)},e.dragEnabled=function(){return!(e.$treeScope&&!e.$treeScope.dragEnabled)},e.isSibling=function(n){return e.$parentNodesScope==n.$parentNodesScope},e.isChild=function(n){var t=e.childNodes();return t&&t.indexOf(n)>-1},e.prev=function(){var n=e.index();return n>0?e.siblings()[n-1]:null},e.siblings=function(){return e.$parentNodesScope.childNodes()},e.childNodesCount=function(){return e.childNodes()?e.childNodes().length:0},e.hasChild=function(){return e.childNodesCount()>0},e.childNodes=function(){return e.$childNodesScope&&e.$childNodesScope.$modelValue?e.$childNodesScope.childNodes():null},e.accept=function(n,t){return e.$childNodesScope&&e.$childNodesScope.$modelValue&&e.$childNodesScope.accept(n,t)},e.removeNode=function(){var n=e.remove();return e.$callbacks.removed(n),n},e.remove=function(){return e.$parentNodesScope.removeNode(e)},e.toggle=function(){e.collapsed=!e.collapsed},e.collapse=function(){e.collapsed=!0},e.expand=function(){e.collapsed=!1},e.depth=function(){var n=e.$parentNodeScope;return n?n.depth()+1:1};var l=0,r=function(e){for(var n=0,t=e.childNodes(),o=0;o<t.length;o++){var a=t[o].$childNodesScope;a&&(n=1,r(a))}l+=n};e.maxSubDepth=function(){return l=0,e.$childNodesScope&&r(e.$childNodesScope),l}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element","treeConfig",function(e,n,t){this.scope=e,e.$element=n,e.$modelValue=null,e.$nodeScope=null,e.$treeScope=null,e.$type="uiTreeNodes",e.$nodesMap={},e.nodropEnabled=!1,e.maxDepth=0,e.cloneEnabled=!1,e.initSubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=n):null},e.destroySubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=null):null},e.accept=function(n,t){return e.$treeScope.$callbacks.accept(n,e,t)},e.beforeDrag=function(n){return e.$treeScope.$callbacks.beforeDrag(n)},e.isParent=function(n){return n.$parentNodesScope==e},e.hasChild=function(){return e.$modelValue.length>0},e.safeApply=function(e){var n=this.$root.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():this.$apply(e)},e.removeNode=function(n){var t=e.$modelValue.indexOf(n.$modelValue);return t>-1?(e.safeApply(function(){e.$modelValue.splice(t,1)[0]}),n):null},e.insertNode=function(n,t){e.safeApply(function(){e.$modelValue.splice(n,0,t)})},e.childNodes=function(){var n=[];if(e.$modelValue)for(var t=0;t<e.$modelValue.length;t++)n.push(e.$nodesMap[e.$modelValue[t].$$hashKey]);return n},e.depth=function(){return e.$nodeScope?e.$nodeScope.depth():0},e.outOfDepth=function(n){var t=e.maxDepth||e.$treeScope.maxDepth;return t>0?e.depth()+n.maxSubDepth()+1>t:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element","$attrs","treeConfig",function(e,n,t,o){this.scope=e,e.$element=n,e.$nodesScope=null,e.$type="uiTree",e.$emptyElm=null,e.$callbacks=null,e.dragEnabled=!0,e.emptyPlaceHolderEnabled=!0,e.maxDepth=0,e.dragDelay=0,e.cloneEnabled=!1,e.nodropEnabled=!1,e.isEmpty=function(){return e.$nodesScope&&e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length},e.place=function(n){e.$nodesScope.$element.append(n),e.$emptyElm.remove()},e.resetEmptyElement=function(){0===e.$nodesScope.$modelValue.length&&e.emptyPlaceHolderEnabled?n.append(e.$emptyElm):e.$emptyElm.remove()};var l=function(e,n){for(var t=e.childNodes(),o=0;o<t.length;o++){n?t[o].collapse():t[o].expand();var r=t[o].$childNodesScope;r&&l(r,n)}};e.collapseAll=function(){l(e.$nodesScope,!0)},e.expandAll=function(){l(e.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(e,n){return{restrict:"A",scope:!0,controller:"TreeController",link:function(t,o,l){var r={accept:null,beforeDrag:null},a={};angular.extend(a,e),a.treeClass&&o.addClass(a.treeClass),t.$emptyElm=angular.element(n.document.createElement("div")),a.emptyTreeClass&&t.$emptyElm.addClass(a.emptyTreeClass),t.$watch("$nodesScope.$modelValue.length",function(){t.$nodesScope.$modelValue&&t.resetEmptyElement()},!0),t.$watch(l.dragEnabled,function(e){"boolean"==typeof e&&(t.dragEnabled=e)}),t.$watch(l.emptyPlaceHolderEnabled,function(e){"boolean"==typeof e&&(t.emptyPlaceHolderEnabled=e)}),t.$watch(l.nodropEnabled,function(e){"boolean"==typeof e&&(t.nodropEnabled=e)}),t.$watch(l.cloneEnabled,function(e){"boolean"==typeof e&&(t.cloneEnabled=e)}),t.$watch(l.maxDepth,function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(l.dragDelay,function(e){"number"==typeof e&&(t.dragDelay=e)}),r.accept=function(e,n,t){return n.nodropEnabled||n.outOfDepth(e)?!1:!0},r.beforeDrag=function(e){return!0},r.removed=function(e){},r.dropped=function(e){},r.dragStart=function(e){},r.dragMove=function(e){},r.dragStop=function(e){},r.beforeDrop=function(e){},t.$watch(l.uiTree,function(e,n){angular.forEach(e,function(e,n){r[n]&&"function"==typeof e&&(r[n]=e)}),t.$callbacks=r},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig","$window",function(e){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(n,t,o,l){var r={};angular.extend(r,e),r.handleClass&&t.addClass(r.handleClass),n!=l.scope&&(n.$nodeScope=l.scope,l.scope.$handleScope=n)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","$uiTreeHelper","$window","$document","$timeout",function(e,n,t,o,l){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(r,a,i,d){var s={};angular.extend(s,e),s.nodeClass&&a.addClass(s.nodeClass),r.init(d),r.collapsed=!!n.getNodeAttribute(r,"collapsed"),r.$watch(i.collapsed,function(e){"boolean"==typeof e&&(r.collapsed=e)}),r.$watch("collapsed",function(e){n.setNodeAttribute(r,"collapsed",e),i.$set("collapsed",e)});var c,u,p,f,$,m,h,g,b,v="ontouchstart"in window,y=null,S=!0,N=!1,x=null,C=document.body,E=document.documentElement,w=function(e){if((v||2!=e.button&&3!=e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var l=angular.element(e.target),i=l.scope();if(i&&i.$type&&!("uiTreeNode"!=i.$type&&"uiTreeHandle"!=i.$type||"uiTreeNode"==i.$type&&i.$handleScope)){var d=l.prop("tagName").toLowerCase();if("input"!=d&&"textarea"!=d&&"button"!=d&&"select"!=d){for(;l&&l[0]&&l[0]!=a;){if(n.nodrag(l))return;l=l.parent()}if(r.beforeDrag(r)){e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault();var y=n.eventObj(e);c=!0,u=n.dragInfo(r);var S=r.$element.prop("tagName");if("tr"===S.toLowerCase()){f=angular.element(t.document.createElement(S));var N=angular.element(t.document.createElement("td")).addClass(s.placeHolderClass);f.append(N)}else f=angular.element(t.document.createElement(S)).addClass(s.placeHolderClass);$=angular.element(t.document.createElement(S)),s.hiddenClass&&$.addClass(s.hiddenClass),p=n.positionStarted(y,r.$element),f.css("height",n.height(r.$element)+"px"),m=angular.element(t.document.createElement(r.$parentNodesScope.$element.prop("tagName"))).addClass(r.$parentNodesScope.$element.attr("class")).addClass(s.dragClass),m.css("width",n.width(r.$element)+"px"),m.css("z-index",9999);var x=(r.$element[0].querySelector(".angular-ui-tree-handle")||r.$element[0]).currentStyle;x&&(document.body.setAttribute("ui-tree-cursor",o.find("body").css("cursor")||""),o.find("body").css({cursor:x.cursor+"!important"})),r.$element.after(f),r.$element.after($),m.append(r.$element),o.find("body").append(m),m.css({left:y.pageX-p.offsetX+"px",top:y.pageY-p.offsetY+"px"}),h={placeholder:f,dragging:m},angular.element(o).bind("touchend",A),angular.element(o).bind("touchcancel",A),angular.element(o).bind("touchmove",Y),angular.element(o).bind("mouseup",A),angular.element(o).bind("mousemove",Y),angular.element(o).bind("mouseleave",V),g=Math.max(C.scrollHeight,C.offsetHeight,E.clientHeight,E.scrollHeight,E.offsetHeight),b=Math.max(C.scrollWidth,C.offsetWidth,E.clientWidth,E.scrollWidth,E.offsetWidth)}}}}},T=function(e){if(!N)return void(S||(N=!0,r.$apply(function(){r.$callbacks.dragStart(u.eventArgs(h,p))})));var o,l,a,i=n.eventObj(e);if(m){e.preventDefault(),t.getSelection?t.getSelection().removeAllRanges():t.document.selection&&t.document.selection.empty(),l=i.pageX-p.offsetX,a=i.pageY-p.offsetY,0>l&&(l=0),0>a&&(a=0),a+10>g&&(a=g-10),l+10>b&&(l=b-10),m.css({left:l+"px",top:a+"px"});var d=window.pageYOffset||t.document.documentElement.scrollTop,$=d+(window.innerHeight||t.document.clientHeight||t.document.clientHeight);if($<i.pageY&&g>=$&&window.scrollBy(0,10),d>i.pageY&&window.scrollBy(0,-10),n.positionMoved(e,p,c),c)return void(c=!1);if(p.dirAx&&p.distAxX>=s.levelThreshold&&(p.distAxX=0,p.distX>0&&(o=u.prev(),o&&!o.collapsed&&o.accept(r,o.childNodesCount())&&(o.$childNodesScope.$element.append(f),u.moveTo(o.$childNodesScope,o.childNodes(),o.childNodesCount()))),p.distX<0)){var v=u.next();if(!v){var x=u.parentNode();x&&x.$parentNodesScope.accept(r,x.index()+1)&&(x.$element.after(f),u.moveTo(x.$parentNodesScope,x.siblings(),x.index()+1))}}var C,E=(n.offset(m).left-n.offset(f).left>=s.threshold,i.pageX-t.document.body.scrollLeft),w=i.pageY-(window.pageYOffset||t.document.documentElement.scrollTop);angular.isFunction(m.hide)?m.hide():(C=m[0].style.display,m[0].style.display="none"),t.document.elementFromPoint(E,w);var T=angular.element(t.document.elementFromPoint(E,w));if(angular.isFunction(m.show)?m.show():m[0].style.display=C,!p.dirAx){var D,X;X=T.scope();var Y=!1;if(!X)return;if("uiTree"==X.$type&&X.dragEnabled&&(Y=X.isEmpty()),"uiTreeHandle"==X.$type&&(X=X.$nodeScope),"uiTreeNode"!=X.$type&&!Y)return;if(y&&f.parent()[0]!=y.$element[0]&&(y.resetEmptyElement(),y=null),Y)y=X,X.$nodesScope.accept(r,0)&&(X.place(f),u.moveTo(X.$nodesScope,X.$nodesScope.childNodes(),0));else if(X.dragEnabled()){T=X.$element;var A=n.offset(T);D=X.horizontal?i.pageX<A.left+n.width(T)/2:i.pageY<A.top+n.height(T)/2,X.$parentNodesScope.accept(r,X.index())?D?(T[0].parentNode.insertBefore(f[0],T[0]),u.moveTo(X.$parentNodesScope,X.siblings(),X.index())):(T.after(f),u.moveTo(X.$parentNodesScope,X.siblings(),X.index()+1)):!D&&X.accept(r,X.childNodesCount())&&(X.$childNodesScope.$element.append(f),u.moveTo(X.$childNodesScope,X.childNodes(),X.childNodesCount()))}}r.$apply(function(){r.$callbacks.dragMove(u.eventArgs(h,p))})}},D=function(e){e.preventDefault(),m&&(r.$treeScope.$apply(function(){r.$callbacks.beforeDrop(u.eventArgs(h,p))}),$.replaceWith(r.$element),f.remove(),m.remove(),m=null,r.$$apply?r.$treeScope.$apply(function(){u.apply(),r.$callbacks.dropped(u.eventArgs(h,p))}):H(),r.$treeScope.$apply(function(){r.$callbacks.dragStop(u.eventArgs(h,p))}),r.$$apply=!1,u=null);var n=document.body.getAttribute("ui-tree-cursor");null!==n&&(o.find("body").css({cursor:n}),document.body.removeAttribute("ui-tree-cursor")),angular.element(o).unbind("touchend",A),angular.element(o).unbind("touchcancel",A),angular.element(o).unbind("touchmove",Y),angular.element(o).unbind("mouseup",A),angular.element(o).unbind("mousemove",Y),angular.element(t.document.body).unbind("mouseleave",V)},X=function(e){r.dragEnabled()&&w(e)},Y=function(e){T(e)},A=function(e){r.$$apply=!0,D(e)},V=function(e){D(e)},H=function(){a.bind("touchstart mousedown",function(e){S=!0,N=!1,X(e),x=l(function(){S=!1},r.dragDelay)}),a.bind("touchend touchcancel mouseup",function(){l.cancel(x)})};H();var k=function(e){27==e.keyCode&&(r.$$apply=!1,D(e))};angular.element(t.document.body).bind("keydown",k),r.$on("$destroy",function(){angular.element(t.document.body).unbind("keydown",k)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(e){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(n,t,o,l){var r={};angular.extend(r,e),r.nodesClass&&t.addClass(r.nodesClass);var a=l[0],i=l[1],d=l[2];i?(i.scope.$childNodesScope=n,n.$nodeScope=i.scope):d.scope.$nodesScope=n,n.$treeScope=d.scope,a&&(a.$render=function(){a.$modelValue&&angular.isArray(a.$modelValue)||(n.$modelValue=[]),n.$modelValue=a.$modelValue}),n.$watch(o.maxDepth,function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(function(){return o.nodropEnabled},function(e){"undefined"!=typeof e&&(n.nodropEnabled=!0)},!0),o.$observe("horizontal",function(e){n.horizontal="undefined"!=typeof e})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("$uiTreeHelper",["$document","$window",function(e,n){return{nodesData:{},setNodeAttribute:function(e,n,t){if(!e.$modelValue)return null;var o=this.nodesData[e.$modelValue.$$hashKey];o||(o={},this.nodesData[e.$modelValue.$$hashKey]=o),o[n]=t},getNodeAttribute:function(e,n){if(!e.$modelValue)return null;var t=this.nodesData[e.$modelValue.$$hashKey];return t?t[n]:null},nodrag:function(e){return"undefined"!=typeof e.attr("data-nodrag")?"false"===e.attr("data-nodrag")?!1:!0:!1},eventObj:function(e){var n=e;return void 0!==e.targetTouches?n=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(n=e.originalEvent.targetTouches.item(0)),n},dragInfo:function(e){return{source:e,sourceInfo:{nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,moveTo:function(e,n,t){this.parent=e,this.siblings=n.slice(0);var o=this.siblings.indexOf(this.source);o>-1&&(this.siblings.splice(o,1),this.source.index()<t&&t--),this.siblings.splice(t,0,this.source),this.index=t},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},eventArgs:function(e,n){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:n}},apply:function(){if(this.parent.$treeScope.nodropEnabled!==!0){var e=this.source.$modelValue;if(this.source.$treeScope.cloneEnabled!==!0&&this.source.remove(),this.source.$treeScope.cloneEnabled===!0&&this.source.$treeScope===this.parent.$treeScope)return!1;this.parent.insertNode(this.index,e)}}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(t){var o=t[0].getBoundingClientRect();return{width:t.prop("offsetWidth"),height:t.prop("offsetHeight"),top:o.top+(n.pageYOffset||e[0].body.scrollTop||e[0].documentElement.scrollTop),left:o.left+(n.pageXOffset||e[0].body.scrollLeft||e[0].documentElement.scrollLeft)}},positionStarted:function(e,n){var t={};return t.offsetX=e.pageX-this.offset(n).left,t.offsetY=e.pageY-this.offset(n).top,t.startX=t.lastX=e.pageX,t.startY=t.lastY=e.pageY,t.nowX=t.nowY=t.distX=t.distY=t.dirAx=0,t.dirX=t.dirY=t.lastDirX=t.lastDirY=t.distAxX=t.distAxY=0,t},positionMoved:function(e,n,t){n.lastX=n.nowX,n.lastY=n.nowY,n.nowX=e.pageX,n.nowY=e.pageY,n.distX=n.nowX-n.lastX,n.distY=n.nowY-n.lastY,n.lastDirX=n.dirX,n.lastDirY=n.dirY,n.dirX=0===n.distX?0:n.distX>0?1:-1,n.dirY=0===n.distY?0:n.distY>0?1:-1;var o=Math.abs(n.distX)>Math.abs(n.distY)?1:0;return t?(n.dirAx=o,void(n.moving=!0)):(n.dirAx!==o?(n.distAxX=0,n.distAxY=0):(n.distAxX+=Math.abs(n.distX),0!==n.dirX&&n.dirX!==n.lastDirX&&(n.distAxX=0),n.distAxY+=Math.abs(n.distY),0!==n.dirY&&n.dirY!==n.lastDirY&&(n.distAxY=0)),void(n.dirAx=o))}}}])}();