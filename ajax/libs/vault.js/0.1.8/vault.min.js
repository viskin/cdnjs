!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Vault=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a("./lib/browser").Cookie,d=a("./lib/browser").Local,e=a("./lib/browser").Session;b.exports={Cookie:c,Local:d,Session:e,set:function(a,b,c){return c&&c.expires?d.set(a,b,c):e.set(a,b,c)},get:function(a){var b=e.get(a);if(void 0!==b)return b;var f=d.get(a);return void 0!==f?f:c.get(a)},list:function(a){console.log("--== Local ==--"),d.list(a),console.log("--== Session ==--"),e.list(a),console.log("--== Cookie ==--"),c.list(a)},getLists:function(){return{Local:d.getList(),Session:e.getList(),Cookie:c.getList()}},remove:function(a){d.remove(a),e.remove(a),c.remove(a)},clear:function(){d.clear(),e.clear(),c.clear()}}},{"./lib/browser":2}],2:[function(a,b){"use strict";var c=a("./meta"),d=a("./cookie"),e=a("./prepare"),f=a("./parse"),g=function(a){var b;try{b=window[a];try{{b.foo}}catch(g){b=void 0}}catch(g){b=void 0}return b?{type:a,get:function(a,d){if(b[a]){var e=c.checkKeyMeta(b,a);if(e)return d;var g=f(b[a]);return g.value||g}return d},getAndRemove:function(a){var b=this.get(a);return this.remove(a),b},getList:function(){var a=[];for(var c in b){var d={};d[c]=this.get(c),a.push(d)}return a},set:function(d,f,g){try{return"sessionStorage"===a&&g&&g.expires&&delete g.expires,c.setKeyMeta(b,d,g),b.setItem(d,e(f))}catch(h){console.warn("Vault: I cannot write to localStoarge even though localStorage is supported. Perhaps you are using your browser in private mode? Here is the error: ",h)}},remove:function(a){return c.clearKeyMeta(b,a),b.removeItem(a)},clear:function(){return b.clear()},list:function(c){var d,e=b.length;if(0===e)return void console.log("0 items in "+a);for(d in b){var g=c?f(b[d]):this.get(d);console.log(d,"=",g)}}}:d};b.exports={Local:g("localStorage"),Session:g("sessionStorage"),Cookie:d}},{"./cookie":4,"./meta":6,"./parse":7,"./prepare":8}],3:[function(a,b){"use strict";b.exports={vaultFile:"/.vault.json",vaultData:"__vaultData"}},{}],4:[function(a,b){"use strict";var c=a("./prepare"),d=a("./parse"),e=a("./getExpires"),f={get:function(a,b){for(var c=document.cookie.split(";"),e=c.length,f=0;e>f;f++){var g=c[f].split("=");if(g[0]=g[0].replace(/^[ ]/,""),g[0]===a)return d(g[1])}return b},getAndRemove:function(a){var b=this.get(a);return this.remove(a),b},getList:function(){var a=[];if(""!==document.cookie)for(var b=document.cookie.split(";"),c=b.length,e=0;c>e;e++){var f=b[e].split("=");f[0]=f[0].replace(/^[ ]/,"");var g={};g[f[0]]=d(f[1]),a.push(g)}return a},set:function(a,b,d){var f="";if(d&&d.expires){var g=e(d);f="; expires="+g.toUTCString()}var h="";d&&d.max_age&&(h="; max-age="+d.max_age);var i="";d&&d.domain&&(i="; domain="+d.domain);var j="";d&&d.path&&(j="; path="+d.path);var k=d&&d.secure?"; secure":"";b=c(b)+j+i+h+f+k,console.log('Vault: set cookie "'+a+'": '+b),document.cookie=a+"="+b},remove:function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},clear:function(){for(var a=document.cookie.split(";"),b=a.length,c=0;b>c;c++){var d=a[c].split("=");d[0]=d[0].replace(/^[ ]/,""),this.remove(d[0])}},list:function(){var a=document.cookie.split(";"),b=a.length;if(""===document.cookie||0===b)return void console.log("0 cookies");for(var c=0;b>c;c++){var e=a[c].split("=");e[0]=e[0].replace(/^[ ]/,""),console.log(e[0],"=",d(e[1]))}}};b.exports=f},{"./getExpires":5,"./parse":7,"./prepare":8}],5:[function(a,b){"use strict";b.exports=function(a){if(a.expires.match(/^(\+|\-)\d+\s\w+/)){var b=new Date,c=a.expires.substring(0,1),d=a.expires.substring(1).split(" "),e=parseInt(d[0],10),f=d[1];switch(f){case"millisecond":case"milliseconds":f="Milliseconds";break;case"second":case"seconds":f="Seconds";break;case"minute":case"minutes":f="Minutes";break;case"hour":case"hours":f="Hours";break;case"day":case"days":f="Date";break;case"month":case"months":f="Month";break;case"year":case"years":f="FullYear"}return b["set"+f]("-"===c?b["get"+f]()-e:b["get"+f]()+e),b}return new Date(a.expires)}},{}],6:[function(a,b){"use strict";var c=a("./config"),d=a("./prepare"),e=a("./parse"),f=a("./getExpires"),g=function(a){var b=a.getItem(c.vaultData);return b||(b={}),"string"==typeof b&&(b=JSON.parse(b)),b},h=function(a,b,e){if(b===c.vaultData)return!1;e=e||{};var h=g(a);if(h[b]||(h[b]={}),e.expires){var i=f(e);h[b].expires=i&&i.valueOf()}else delete h[b].expires;e.path?h[b].path=e.path:delete h[b].path,a.setItem(c.vaultData,d(h))},i=function(a,b){if(b===c.vaultData)return!1;try{var d=g(a);return d[b]}catch(e){return void 0}},j=function(a,b){if(b===c.vaultData)return!1;try{var e=g(a);delete e[b],a.setItem(c.vaultData,d(e))}catch(f){}},k=function(a,b){if(b===c.vaultData)return!1;try{var d=e(a[b]),f=i(a,b);if(f){if(f.path&&"undefined"!=typeof window){var g=window.location.pathname||window.location.path;if(!g.match(f.path))return!0}if(!f.expires&&d&&d.expires&&(f.expires=d.expires),f.expires&&f.expires<=new Date){var h=new Date(f.expires).toString();return console.log("Removing expired item: "+b+". It expired on: "+h),j(a,b),a.removeItem(b),!0}}}catch(k){console.warn("Vault Error:",k)}return!1};b.exports={getData:g,setKeyMeta:h,getKeyMeta:i,clearKeyMeta:j,checkKeyMeta:k}},{"./config":3,"./getExpires":5,"./parse":7,"./prepare":8}],7:[function(a,b){"use strict";b.exports=function(a){return null===a||void 0===a||"undefined"===a?void 0:"null"===a?null:a===!0||"true"===a?!0:a===!1||"false"===a?!1:""===a||isNaN(a)?!a.indexOf||0!==a.indexOf("{")&&0!==a.indexOf("[")?a:JSON.parse(a):1*a}},{}],8:[function(a,b){"use strict";b.exports=function(a){return"object"==typeof a?JSON.stringify(a):a}},{}]},{},[1])(1)});