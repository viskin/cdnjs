this.modal={lastFocus:null,_valid:function(n){var a,t,l;return null!=n?(null==n.body&&(n.body=""),null==n["class"]&&(n["class"]=""),null==n.closable&&(n.closable=!0),null!=(null!=(a=n.buttons)?a.action:void 0)&&(null==n.buttons.action["class"]&&(n.buttons.action["class"]=""),null==n.buttons.action.title&&(n.buttons.action.title="OK")),null!=(null!=(t=n.buttons)?t.cancel:void 0)?null==n.buttons.cancel.title&&(n.buttons.cancel.title="Cancel"):null!=(null!=(l=n.buttons)?l.action:void 0)&&(n.buttons.action["class"]+=" button--full"),!0):!1},_build:function(n){var a,t,l,o,e;return a="<div class='modalContainer fadeIn' data-closable='"+n.closable+"'>\n	<div class='modal fadeIn "+n["class"]+'\' role="dialog">\n		'+n.body,null!=(null!=(t=n.buttons)?t.cancel:void 0)&&(a+=-1===n["class"].indexOf("login")?"<a id='cancel' class='button'>"+n.buttons.cancel.title+"</a>":"<div id='cancel' class='button' aria-label='close'><a class='ion-close'></a></div>"),null!=(null!=(l=n.buttons)?l.action:void 0)&&(a+="<a id='action' class='button "+n.buttons.action["class"]+"'>",null!=(null!=(o=n.buttons)&&null!=(e=o.action)?e.icon:void 0)&&(a+="<span class='"+n.buttons.action.icon+"'></span>"),a+=""+n.buttons.action.title+"</a>"),a+="	</div>\n</div>"},_getValues:function(){var n;return n=null,0!==$(".modalContainer input, .modalContainer .dropdown").length&&(n={},$(".modalContainer input").each(function(){var a,t;return a=$(this).attr("data-name"),t=$(this).val(),n[a]=t}),$(".modalContainer .dropdown").each(function(){var a,t;return a=$(this).attr("data-name"),t=$(this).attr("data-value"),n[a]=t})),n},_bind:function(n){var a,t,l,o,e;return null!=(null!=(t=n.buttons)&&null!=(l=t.cancel)?l.fn:void 0)&&$(".modalContainer #cancel").click(function(){return $(this).hasClass("active")?!1:($(this).addClass("active"),n.buttons.cancel.fn())}),null!=(null!=(o=n.buttons)&&null!=(e=o.action)?e.fn:void 0)&&$(".modalContainer #action").click(function(){return $(this).hasClass("active")?!1:($(this).addClass("active"),n.buttons.action.fn(modal._getValues()))}),$(".modalContainer input").keydown(function(){return $(this).removeClass("error")}),a=null,$(".modal .dropdown .front").click(function(){var n;return n=$(this).parent(),clearTimeout(a),n.find(".back").show(),n.addClass("flip")}),$('.modal .dropdown .back ul li[class!="separator"]').click(function(){var n,t;return n=$(this).parent().parent().parent(),t=$(this).clone(),t.find("span").remove(),t=t.html().trim(),n.find(".front span").html(t),n.attr("data-value",$(this).data("value")),n.removeClass("flip"),a=setTimeout(function(){return n.find(".back").hide()},3e3)})},show:function(n){return modal._valid(n)?(modal.lastFocus=document.activeElement,0!==$(".modalContainer").length?(modal.close(!0),setTimeout(function(){return modal.show(n)},301),!1):($("body").append(modal._build(n)),modal._bind(n),null!=n.callback&&callback(),!0)):!1},error:function(n){return modal.reset(),$(".modalContainer input[data-name='"+n+"'], .modalContainer .dropdown[data-name='"+n+"']").addClass("error").focus().select(),$(".modalContainer .modal").removeClass("fadeIn shake"),setTimeout(function(){return $(".modalContainer .modal").addClass("shake")},1)},visible:function(){return 0===$(".modalContainer").length?!1:!0},action:function(){return 0!==$(".modalContainer .modal #action").length?($(".modalContainer .modal #action").click(),!0):!1},cancel:function(){return 0!==$(".modalContainer .modal #cancel").length?($(".modalContainer .modal #cancel").click(),!0):!1},reset:function(){return $(".modalContainer .button").removeClass("active"),$(".modalContainer input, .modalContainer .dropdown").removeClass("error"),!0},close:function(n){return null==n||n===!0?0===$(".modalContainer[data-closable=true]").length&&n!==!0?!1:($(".modalContainer").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){return $(".modalContainer").remove()},300),null!=modal.lastFocus&&(modal.lastFocus.focus(),modal.lastFocus=null),!0):!1}};