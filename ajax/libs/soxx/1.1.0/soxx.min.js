!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,o.Soxx=e()}}(function(){return function e(o,n,t){function s(i,c){if(!n[i]){if(!o[i]){var u="function"==typeof require&&require;if(!c&&u)return u(i,!0);if(r)return r(i,!0);var _=new Error("Cannot find module '"+i+"'");throw _.code="MODULE_NOT_FOUND",_}var l=n[i]={exports:{}};o[i][0].call(l.exports,function(e){var n=o[i][1][e];return s(n?n:e)},l,l.exports,e,o,n,t)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<t.length;i++)s(t[i]);return s}({1:[function(e,o,n){function t(e,o){e=e||{};var n={};n.protocol="ws",n.hostname="echo.websocket.org",n.path="/?encoding=text",n.port=80,n.verbose=!1;for(i in e)n[i]=e[i];return n.url=n.url||n.protocol+"://"+n.hostname+":"+n.port+n.path,a._options=n,a._options.verbose&&o&&console.log("Soxx | Setting listener on Websocket:",a._options.url,"Event: Connection open"),a._userDefinedFunctions.open=o,a._socket=new WebSocket(n.url),a._socket.onopen=n.onopen||l,a._socket.onclose=n.onclose||f,a._socket.onmessage=n.onmessage||p,a._socket.onerror=n.onerror||d,a._returnObject={socket:a._socket,close:r,disconnect:s},n.onmessage||(a._returnObject.on=u,a._returnObject.off=_,a._returnObject.emit=c),a._returnObject}function s(e){return a._userDefinedFunctions.close=e,a._socket.close(),!1}function r(e){return a._options.verbose&&console.log("Soxx | Setting listener on Websocket:",a._options.url,"Event: Connection close"),a._userDefinedFunctions.close=e,a._returnObject}function c(e,o,n){if("connect"===e||"close"===e)return console.error("Soxx | 'connect' and 'close' events are reserved. Please choose another event name."),!1;var t={event:e,data:o};return a._options.verbose&&console.log("Soxx | Emitting to Websocket:",a._options.url,t),a._isOpen?a._socket.send(JSON.stringify(t)):(console.log("Soxx | Socket not yet open. Waiting",a._waitTime,"ms to try again."),setTimeout(function(){c(e,o,n)},a._waitTime)),a._returnObject}function u(e,o){return"connect"!==e&&"close"!==e&&(a._options.verbose&&console.log("Soxx | Setting listener on Websocket:",a._options.url,"Event:",e),a._userDefinedFunctions.on[e]=o),a._returnObject}function _(e){a._options.verbose&&console.log("Soxx | Removing listener from Websocket:",a._options.url,"Event:",e),a._userDefinedFunctions.on[e]&&delete a._userDefinedFunctions.on[e]}function l(e){e.data;a._isOpen=!0,a._options.verbose&&console.log("Soxx | Connected to Websocket:",a._options.url),a._userDefinedFunctions.open&&"function"==typeof a._userDefinedFunctions.open&&a._userDefinedFunctions.open(e)}function f(e){a._options.verbose&&console.log("Soxx | Closed connection to Websocket:",a._options.url),a._userDefinedFunctions.close&&"function"==typeof a._userDefinedFunctions.close&&a._userDefinedFunctions.close(),a={connect:t,_options:{},_userDefinedFunctions:{on:{},emit:{},connect:!1,close:!1},_returnObject:{},_socket:{},_isOpen:!1,_waitTime:500,__close:s,__emit:c,__on:u}}function p(e){var o=e.data;a._options.verbose&&console.log("Soxx | Receiving message from Websocket",a._options.url,o);try{o=JSON.parse(o)}catch(n){return void console.error("Soxx | Message parsing from Websocket failed.")}a._userDefinedFunctions.on[o.event]&&a._userDefinedFunctions.on[o.event](o.data)}function d(e){console.error("Soxx | An error occured while connecting to Websocket.",a._options.url,e)}var a;o.exports=a={connect:t,_options:{},_userDefinedFunctions:{on:{},emit:{},connect:!1,close:!1},_returnObject:{},_socket:{},_isOpen:!1,_waitTime:500,__close:s,__emit:c,__on:u}},{}]},{},[1])(1)});
//# sourceMappingURL=soxx.min.js.map