{"version":3,"sources":["./1.1.0/backbone.dualstorage.amd.js"],"names":["root","factory","define","amd","Backbone","DualStorage","require","module","exports","this","S4","backboneSync","callbackTranslator","dualsync","localsync","modelUpdatedWithResponse","onlineSync","parseRemoteResponse","result","Collection","prototype","syncDirty","id","ids","model","store","url","_i","_len","_results","localStorage","getItem","split","length","where","get","push","save","syncDestroyed","collection","destroy","syncDirtyAndDestroyed","Math","random","toString","substring","window","Store","name","records","recordsOn","sep","generateId","setItem","join","key","dirty","dirtyRecords","_","include","clean","from","without","destroyed","destroyedRecords","create","isObject","set","idAttribute","JSON","stringify","update","clear","_ref","removeItem","hasDirtyOrDestroyed","isEmpty","find","parse","findAll","reject","record_id","needsTranslation","VERSION","forBackboneCaller","callback","resp","options","call","forDualstorageCaller","method","isValidModel","preExisting","response","Model","Error","storeName","add","merge","attributes","ignoreCallbacks","success","error","object","property","value","isFunction","parseBeforeLocalSave","modelClone","clone","sync","local","originalModel","remote","status","xhr","modelAttributes","responseModel","isArray","constructor","updatedModel","isString"],"mappings":"CAAA,SAAUA,EAAMC,GACd,MAAsB,kBAAXC,SAAyBA,OAAOC,IAClCD,QAAQ,YAAa,SAASE,GACnC,MAAOJ,GAAKI,SAASC,YAAcJ,EAAQG,KAEjB,kBAAZE,UAA2G,OAA7D,mBAAXC,SAAqC,OAAXA,OAAkBA,OAAOC,QAAU,QACzGD,OAAOC,QAAUP,EAAQK,QAAQ,aAEjCN,EAAKI,SAASC,YAAcJ,EAAQD,EAAKI,WAEjDK,KAAM,SAASL,GAUlB,GAAIM,GAAIC,EAAcC,EAAoBC,EAAUC,EAAWC,EAA0BC,EAAYC,EAAqBC,CAE1Hd,GAASe,WAAWC,UAAUC,UAAY,WACxC,GAAIC,GAAIC,EAAKC,EAAOC,EAAOC,EAAKC,EAAIC,EAAMC,CAK1C,KAJAH,EAAMR,EAAOT,KAAM,OACnBgB,EAAQK,aAAaC,QAAQ,GAAKL,EAAM,UACxCH,EAAOE,GAASA,EAAMO,MAAM,SAC5BH,KACKF,EAAK,EAAGC,EAAOL,EAAIU,OAAaL,EAALD,EAAWA,IACzCL,EAAKC,EAAII,GACTH,EAAsB,KAAdF,EAAGW,OAAgBxB,KAAKyB,OAC9BZ,GAAIA,IACH,GAAKb,KAAK0B,IAAIb,GACjBO,EAASO,KAAKZ,EAAMa,OAEtB,OAAOR,IAGTzB,EAASe,WAAWC,UAAUkB,cAAgB,WAC5C,GAAIhB,GAAIC,EAAKC,EAAOC,EAAOC,EAAKC,EAAIC,EAAMC,CAK1C,KAJAH,EAAMR,EAAOT,KAAM,OACnBgB,EAAQK,aAAaC,QAAQ,GAAKL,EAAM,cACxCH,EAAOE,GAASA,EAAMO,MAAM,SAC5BH,KACKF,EAAK,EAAGC,EAAOL,EAAIU,OAAaL,EAALD,EAAWA,IACzCL,EAAKC,EAAII,GACTH,EAAQ,GAAIf,MAAKe,OACfF,GAAIA,IAENE,EAAMe,WAAa9B,KACnBoB,EAASO,KAAKZ,EAAMgB,UAEtB,OAAOX,IAGTzB,EAASe,WAAWC,UAAUqB,sBAAwB,WAEpD,MADAhC,MAAKY,YACEZ,KAAK6B,iBAGd5B,EAAK,WACH,OAA+B,OAArB,EAAIgC,KAAKC,UAAuB,GAAGC,SAAS,IAAIC,UAAU,IAGtEC,OAAOC,MAAQ,WAGb,QAASA,GAAMC,GACbvC,KAAKuC,KAAOA,EACZvC,KAAKwC,QAAUxC,KAAKyC,UAAUzC,KAAKuC,MA6GrC,MAjHAD,GAAM3B,UAAU+B,IAAM,GAOtBJ,EAAM3B,UAAUgC,WAAa,WAC3B,MAAO1C,KAAOA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAOA,IAAOA,KAGlFqC,EAAM3B,UAAUiB,KAAO,WACrB,MAAOP,cAAauB,QAAQ5C,KAAKuC,KAAMvC,KAAKwC,QAAQK,KAAK,OAG3DP,EAAM3B,UAAU8B,UAAY,SAASK,GACnC,GAAI9B,EAEJ,OADAA,GAAQK,aAAaC,QAAQwB,GACrB9B,GAASA,EAAMO,MAAM,UAG/Be,EAAM3B,UAAUoC,MAAQ,SAAShC,GAC/B,GAAIiC,EAMJ,OALAA,GAAehD,KAAKyC,UAAUzC,KAAKuC,KAAO,UACrCU,EAAEC,QAAQF,EAAcjC,EAAMF,GAAGsB,cACpCa,EAAarB,KAAKZ,EAAMF,IACxBQ,aAAauB,QAAQ5C,KAAKuC,KAAO,SAAUS,EAAaH,KAAK,OAExD9B,GAGTuB,EAAM3B,UAAUwC,MAAQ,SAASpC,EAAOqC,GACtC,GAAIJ,GAAchC,CAMlB,OALAA,GAAQ,GAAKhB,KAAKuC,KAAO,IAAMa,EAC/BJ,EAAehD,KAAKyC,UAAUzB,GAC1BiC,EAAEC,QAAQF,EAAcjC,EAAMF,GAAGsB,aACnCd,aAAauB,QAAQ5B,EAAOiC,EAAEI,QAAQL,EAAcjC,EAAMF,GAAGsB,YAAYU,KAAK,MAEzE9B,GAGTuB,EAAM3B,UAAU2C,UAAY,SAASvC,GACnC,GAAIwC,EAMJ,OALAA,GAAmBvD,KAAKyC,UAAUzC,KAAKuC,KAAO,cACzCU,EAAEC,QAAQK,EAAkBxC,EAAMF,GAAGsB,cACxCoB,EAAiB5B,KAAKZ,EAAMF,IAC5BQ,aAAauB,QAAQ5C,KAAKuC,KAAO,aAAcgB,EAAiBV,KAAK,OAEhE9B,GAGTuB,EAAM3B,UAAU6C,OAAS,SAASzC,GAChC,MAAKkC,GAAEQ,SAAS1C,IAGXA,EAAMF,KACTE,EAAMF,GAAKb,KAAK2C,aAChB5B,EAAM2C,IAAI3C,EAAM4C,YAAa5C,EAAMF,KAErCQ,aAAauB,QAAQ5C,KAAKuC,KAAOvC,KAAK0C,IAAM3B,EAAMF,GAAI+C,KAAKC,UAAU9C,IACrEf,KAAKwC,QAAQb,KAAKZ,EAAMF,GAAGsB,YAC3BnC,KAAK4B,OACEb,GATEA,GAYXuB,EAAM3B,UAAUmD,OAAS,SAAS/C,GAMhC,MALAM,cAAauB,QAAQ5C,KAAKuC,KAAOvC,KAAK0C,IAAM3B,EAAMF,GAAI+C,KAAKC,UAAU9C,IAChEkC,EAAEC,QAAQlD,KAAKwC,QAASzB,EAAMF,GAAGsB,aACpCnC,KAAKwC,QAAQb,KAAKZ,EAAMF,GAAGsB,YAE7BnC,KAAK4B,OACEb,GAGTuB,EAAM3B,UAAUoD,MAAQ,WACtB,GAAIlD,GAAIK,EAAIC,EAAM6C,CAElB,KADAA,EAAOhE,KAAKwC,QACPtB,EAAK,EAAGC,EAAO6C,EAAKxC,OAAaL,EAALD,EAAWA,IAC1CL,EAAKmD,EAAK9C,GACVG,aAAa4C,WAAWjE,KAAKuC,KAAOvC,KAAK0C,IAAM7B,EAGjD,OADAb,MAAKwC,WACExC,KAAK4B,QAGdU,EAAM3B,UAAUuD,oBAAsB,WACpC,OAAQjB,EAAEkB,QAAQ9C,aAAaC,QAAQtB,KAAKuC,KAAO,aAAeU,EAAEkB,QAAQ9C,aAAaC,QAAQtB,KAAKuC,KAAO,gBAG/GD,EAAM3B,UAAUyD,KAAO,SAASrD,GAC9B,MAAO6C,MAAKS,MAAMhD,aAAaC,QAAQtB,KAAKuC,KAAOvC,KAAK0C,IAAM3B,EAAMF,MAGtEyB,EAAM3B,UAAU2D,QAAU,WACxB,GAAIzD,GAAIK,EAAIC,EAAM6C,EAAM5C,CAGxB,KAFA4C,EAAOhE,KAAKwC,QACZpB,KACKF,EAAK,EAAGC,EAAO6C,EAAKxC,OAAaL,EAALD,EAAWA,IAC1CL,EAAKmD,EAAK9C,GACVE,EAASO,KAAKiC,KAAKS,MAAMhD,aAAaC,QAAQtB,KAAKuC,KAAOvC,KAAK0C,IAAM7B,IAEvE,OAAOO,IAGTkB,EAAM3B,UAAUoB,QAAU,SAAShB,GAMjC,MALAM,cAAa4C,WAAWjE,KAAKuC,KAAOvC,KAAK0C,IAAM3B,EAAMF,IACrDb,KAAKwC,QAAUS,EAAEsB,OAAOvE,KAAKwC,QAAS,SAASgC,GAC7C,MAAOA,KAAczD,EAAMF,GAAGsB,aAEhCnC,KAAK4B,OACEb,GAGFuB,KAITnC,GACEsE,iBAAuC,WAArB9E,EAAS+E,QAC3BC,kBAAmB,SAASC,GAC1B,MAAI5E,MAAKyE,iBACA,SAAS1D,EAAO8D,EAAMC,GAC3B,MAAOF,GAASG,KAAK,KAAMF,IAGtBD,GAGXI,qBAAsB,SAASJ,EAAU7D,EAAO+D,GAC9C,MAAI9E,MAAKyE,iBACA,SAASI,GACd,MAAOD,GAASG,KAAK,KAAMhE,EAAO8D,EAAMC,IAGnCF,IAKbvE,EAAY,SAAS4E,EAAQlE,EAAO+D,GAClC,GAAII,GAAcC,EAAaC,EAAUpE,CAIzC,IAHAkE,EAA2B,UAAXD,GAAmC,wBAAXA,EACxCC,IAAiBA,EAAenE,YAAiBpB,GAAS0F,OAC1DH,IAAiBA,EAAenE,YAAiBpB,GAASe,aACrDwE,EACH,KAAM,IAAII,OAAM,oEA0DlB,OAxDAtE,GAAQ,GAAIsB,OAAMwC,EAAQS,WAC1BH,EAAW,WACT,OAAQH,GACN,IAAK,OACH,MAAIlE,GAAMF,GACDG,EAAMoD,KAAKrD,GAEXC,EAAMsD,SAGjB,KAAK,sBACH,MAAOtD,GAAMkD,qBACf,KAAK,QACH,MAAOlD,GAAM+C,OACf,KAAK,SACH,MAAMe,GAAQU,MAAQV,EAAQW,QAAUN,EAAcnE,EAAMoD,KAAKrD,IAOxDoE,GANPpE,EAAQC,EAAMwC,OAAOzC,GACjB+D,EAAQ/B,OACV/B,EAAM+B,MAAMhC,GAEPA,EAKX,KAAK,SAEH,MADAC,GAAM8C,OAAO/C,GACT+D,EAAQ/B,MACH/B,EAAM+B,MAAMhC,GAEZC,EAAMmC,MAAMpC,EAAO,QAG9B,KAAK,SAEH,MADAC,GAAMe,QAAQhB,GACV+D,EAAQ/B,MACH/B,EAAMsC,UAAUvC,GAEY,KAA/BA,EAAMF,GAAGsB,WAAWX,OACfR,EAAMmC,MAAMpC,EAAO,SAEnBC,EAAMmC,MAAMpC,EAAO,kBAKpB,MAAZqE,EAAmBA,EAASM,WAAa,UAC3CN,EAAWA,EAASM,YAEjBZ,EAAQa,kBACPP,EACFN,EAAQc,QAAQR,GAEhBN,EAAQe,MAAM,qBAGXT,GAGT3E,EAAS,SAASqF,EAAQC,GACxB,GAAIC,EACJ,OAAKF,IAGLE,EAAQF,EAAOC,GACX9C,EAAEgD,WAAWD,GACRA,EAAMjB,KAAKe,GAEXE,GANA,MAUXxF,EAAsB,SAASsF,EAAQV,GACrC,MAAMU,IAAUA,EAAOI,qBAGnBjD,EAAEgD,WAAWH,EAAOI,sBACfJ,EAAOI,qBAAqBd,GADrC,OAFSA,GAOX9E,EAA2B,SAASS,EAAOqE,GACzC,GAAIe,EAGJ,OAFAA,GAAapF,EAAMqF,QACnBD,EAAWzC,IAAIyC,EAAW9B,MAAMe,IACzBe,GAGTjG,EAAeP,EAAS0G,KAExB9F,EAAa,SAAS0E,EAAQlE,EAAO+D,GAGnC,MAFAA,GAAQc,QAAUzF,EAAmBwE,kBAAkBG,EAAQc,SAC/Dd,EAAQe,MAAQ1F,EAAmBwE,kBAAkBG,EAAQe,OACtD3F,EAAa+E,EAAQlE,EAAO+D,IAGrC1E,EAAW,SAAS6E,EAAQlE,EAAO+D,GACjC,GAAIe,GAAOS,EAAOC,EAAeX,CAIjC,IAHAd,EAAQS,UAAY9E,EAAOM,EAAMe,WAAY,QAAUrB,EAAOM,EAAO,OACrE+D,EAAQc,QAAUzF,EAAmB6E,qBAAqBF,EAAQc,QAAS7E,EAAO+D,GAClFA,EAAQe,MAAQ1F,EAAmB6E,qBAAqBF,EAAQe,MAAO9E,EAAO+D,GAC1ErE,EAAOM,EAAO,WAAaN,EAAOM,EAAMe,WAAY,UACtD,MAAOvB,GAAW0E,EAAQlE,EAAO+D,EAInC,IAFAwB,EAAQ7F,EAAOM,EAAO,UAAYN,EAAOM,EAAMe,WAAY,SAC3DgD,EAAQ/B,MAAQ+B,EAAQ0B,UAAW,IAAUF,EACzCxB,EAAQ0B,UAAW,GAASF,EAC9B,MAAOjG,GAAU4E,EAAQlE,EAAO+D,EAKlC,QAHAA,EAAQa,iBAAkB,EAC1BC,EAAUd,EAAQc,QAClBC,EAAQf,EAAQe,MACRZ,GACN,IAAK,OACH,MAAI5E,GAAU,sBAAuBU,EAAO+D,GACnCc,EAAQvF,EAAU4E,EAAQlE,EAAO+D,KAExCA,EAAQc,QAAU,SAASf,EAAM4B,EAAQC,GACvC,GAAI5E,GAAY6E,EAAiBC,EAAe1F,EAAIC,CAKpD,IAJA0D,EAAOrE,EAAoBO,EAAO8D,GAC7BC,EAAQU,KACXnF,EAAU,QAASU,EAAO+D,GAExB7B,EAAE4D,QAAQhC,GAEZ,IADA/C,EAAaf,EACRG,EAAK,EAAGC,EAAO0D,EAAKrD,OAAaL,EAALD,EAAWA,IAC1CyF,EAAkB9B,EAAK3D,GACvB0F,EAAgBtG,EAAyB,GAAIwB,GAAWf,MAAO4F,GAC/DtG,EAAU,SAAUuG,EAAe9B,OAGrC8B,GAAgBtG,EAAyB,GAAIS,GAAM+F,YAAajC,GAChExE,EAAU,SAAUuG,EAAe9B,EAErC,OAAOc,GAAQf,EAAM4B,EAAQC,IAE/B5B,EAAQe,MAAQ,SAAShB,GACvB,MAAOe,GAAQvF,EAAU4E,EAAQlE,EAAO+D,KAEnCvE,EAAW0E,EAAQlE,EAAO+D,GAGrC,KAAK,SAWH,MAVAA,GAAQc,QAAU,SAASf,EAAM4B,EAAQC,GACvC,GAAIK,EAGJ,OAFAA,GAAezG,EAAyBS,EAAO8D,GAC/CxE,EAAU4E,EAAQ8B,EAAcjC,GACzBc,EAAQf,EAAM4B,EAAQC,IAE/B5B,EAAQe,MAAQ,SAAShB,GAEvB,MADAC,GAAQ/B,OAAQ,EACT6C,EAAQvF,EAAU4E,EAAQlE,EAAO+D,KAEnCvE,EAAW0E,EAAQlE,EAAO+D,EACnC,KAAK,SACH,MAAI7B,GAAE+D,SAASjG,EAAMF,KAA2B,KAApBE,EAAMF,GAAGW,QACnC+E,EAAgBxF,EAAMqF,QACtBtB,EAAQc,QAAU,SAASf,EAAM4B,EAAQC,GACvC,GAAIK,EAIJ,OAHAA,GAAezG,EAAyBS,EAAO8D,GAC/CxE,EAAU,SAAUkG,EAAezB,GACnCzE,EAAU,SAAU0G,EAAcjC,GAC3Bc,EAAQf,EAAM4B,EAAQC,IAE/B5B,EAAQe,MAAQ,SAAShB,GAEvB,MADAC,GAAQ/B,OAAQ,EACT6C,EAAQvF,EAAU4E,EAAQsB,EAAezB,KAElD/D,EAAM2C,KACJ7C,GAAI,OAECN,EAAW,SAAUQ,EAAO+D,KAEnCA,EAAQc,QAAU,SAASf,EAAM4B,EAAQC,GACvC,GAAIK,EAGJ,OAFAA,GAAezG,EAAyBS,EAAO8D,GAC/CxE,EAAU4E,EAAQ8B,EAAcjC,GACzBc,EAAQf,EAAM4B,EAAQC,IAE/B5B,EAAQe,MAAQ,SAAShB,GAEvB,MADAC,GAAQ/B,OAAQ,EACT6C,EAAQvF,EAAU4E,EAAQlE,EAAO+D,KAEnCvE,EAAW0E,EAAQlE,EAAO+D,GAGrC,KAAK,SACH,MAAI7B,GAAE+D,SAASjG,EAAMF,KAA2B,KAApBE,EAAMF,GAAGW,OAC5BnB,EAAU4E,EAAQlE,EAAO+D,IAEhCA,EAAQc,QAAU,SAASf,EAAM4B,EAAQC,GAEvC,MADArG,GAAU4E,EAAQlE,EAAO+D,GAClBc,EAAQf,EAAM4B,EAAQC,IAE/B5B,EAAQe,MAAQ,SAAShB,GAEvB,MADAC,GAAQ/B,OAAQ,EACT6C,EAAQvF,EAAU4E,EAAQlE,EAAO+D,KAEnCvE,EAAW0E,EAAQlE,EAAO+D,MAKzCnF,EAAS0G,KAAOjG","file":"./1.1.0/backbone.dualstorage.amd.min.js"}