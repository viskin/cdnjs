{"version":3,"sources":["./1.4.0/backbone.dualstorage.js"],"names":["S4","backboneSync","callbackTranslator","dualsync","getStoreName","localsync","modelUpdatedWithResponse","onlineSync","parseRemoteResponse","__indexOf","indexOf","item","i","l","this","length","Backbone","DualStorage","offlineStatusCodes","Model","prototype","hasTempId","_","isString","id","collection","model","result","Collection","syncDirty","options","ids","store","_i","_len","_ref","_results","localStorage","getItem","split","push","get","save","dirtyModels","models","call","compact","syncDestroyed","set","idAttribute","destroy","destroyedModelIds","syncDirtyAndDestroyed","Math","random","toString","substring","window","Store","name","records","recordsOn","sep","generateId","setItem","join","key","dirty","dirtyRecords","include","clean","from","without","destroyed","destroyedRecords","create","isObject","JSON","stringify","toJSON","update","clear","removeItem","hasDirtyOrDestroyed","isEmpty","find","modelAsJson","parse","findAll","reject","record_id","exists","storeName","needsTranslation","VERSION","forBackboneCaller","callback","resp","forDualstorageCaller","method","isValidModel","preExisting","response","Error","add","merge","attributes","ignoreCallbacks","success","error","object","parseBeforeLocalSave","isFunction","modelClone","originalSync","sync","hasOfflineStatusCode","local","relayErrorCallback","temporaryId","useOfflineStorage","storeExists","remote","xhr","status","online","_status","_xhr","modelAttributes","responseModel","updatedModel","silent"],"mappings":"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","file":"./1.4.0/backbone.dualstorage.min.js"}