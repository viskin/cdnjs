{"version":3,"sources":["./1.2.0/backbone.dualstorage.js"],"names":["S4","backboneSync","callbackTranslator","dualsync","getStoreName","localsync","modelUpdatedWithResponse","onlineSync","parseRemoteResponse","result","Backbone","Model","prototype","hasTempId","_","isString","this","id","length","collection","model","Collection","syncDirty","ids","store","_i","_len","_ref","_results","localStorage","getItem","split","push","get","save","dirtyModels","models","call","compact","syncDestroyed","destroy","destroyedModelIds","syncDirtyAndDestroyed","Math","random","toString","substring","window","Store","name","records","recordsOn","sep","generateId","setItem","join","key","dirty","dirtyRecords","include","clean","from","without","destroyed","destroyedRecords","create","isObject","set","idAttribute","JSON","stringify","update","clear","removeItem","hasDirtyOrDestroyed","isEmpty","find","modelAsJson","parse","findAll","reject","record_id","needsTranslation","VERSION","forBackboneCaller","callback","resp","options","forDualstorageCaller","method","isValidModel","preExisting","response","Error","storeName","add","merge","attributes","ignoreCallbacks","success","error","object","property","value","isFunction","parseBeforeLocalSave","modelClone","sync","local","temporaryId","remote","status","xhr","modelAttributes","responseModel","isArray","updatedModel","silent"],"mappings":"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","file":"./1.2.0/backbone.dualstorage.min.js"}