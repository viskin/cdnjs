{"version":3,"sources":["./1.3.0/backbone.dualstorage.js"],"names":["S4","backboneSync","callbackTranslator","dualsync","getStoreName","localsync","modelUpdatedWithResponse","onlineSync","parseRemoteResponse","result","__indexOf","indexOf","item","i","l","this","length","Backbone","DualStorage","offlineStatusCodes","Model","prototype","hasTempId","_","isString","id","collection","model","Collection","syncDirty","ids","store","_i","_len","_ref","_results","localStorage","getItem","split","push","get","save","dirtyModels","models","call","compact","syncDestroyed","destroy","destroyedModelIds","syncDirtyAndDestroyed","Math","random","toString","substring","window","Store","name","records","recordsOn","sep","generateId","setItem","join","key","dirty","dirtyRecords","include","clean","from","without","destroyed","destroyedRecords","create","isObject","set","idAttribute","JSON","stringify","update","clear","removeItem","hasDirtyOrDestroyed","isEmpty","find","modelAsJson","parse","findAll","reject","record_id","needsTranslation","VERSION","forBackboneCaller","callback","resp","options","forDualstorageCaller","method","isValidModel","preExisting","response","Error","storeName","add","merge","attributes","ignoreCallbacks","success","error","object","property","value","isFunction","parseBeforeLocalSave","modelClone","sync","local","relayErrorCallback","temporaryId","remote","offline","status","xhr","modelAttributes","responseModel","updatedModel","silent"],"mappings":"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","file":"./1.3.0/backbone.dualstorage.min.js"}