{"version":3,"sources":["./1.3.0/backbone.dualstorage.amd.js"],"names":["root","factory","define","amd","require","module","exports","Backbone","this","S4","backboneSync","callbackTranslator","dualsync","getStoreName","localsync","modelUpdatedWithResponse","onlineSync","parseRemoteResponse","result","__indexOf","indexOf","item","i","l","length","DualStorage","offlineStatusCodes","Model","prototype","hasTempId","_","isString","id","collection","model","Collection","syncDirty","ids","store","_i","_len","_ref","_results","localStorage","getItem","split","push","get","save","dirtyModels","models","call","compact","syncDestroyed","destroy","destroyedModelIds","syncDirtyAndDestroyed","Math","random","toString","substring","window","Store","name","records","recordsOn","sep","generateId","setItem","join","key","dirty","dirtyRecords","include","clean","from","without","destroyed","destroyedRecords","create","isObject","set","idAttribute","JSON","stringify","update","clear","removeItem","hasDirtyOrDestroyed","isEmpty","find","modelAsJson","parse","findAll","reject","record_id","needsTranslation","VERSION","forBackboneCaller","callback","resp","options","forDualstorageCaller","method","isValidModel","preExisting","response","Error","storeName","add","merge","attributes","ignoreCallbacks","success","error","object","property","value","isFunction","parseBeforeLocalSave","modelClone","sync","local","relayErrorCallback","temporaryId","remote","offline","status","xhr","modelAttributes","responseModel","updatedModel","silent"],"mappings":"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","file":"./1.3.0/backbone.dualstorage.amd.min.js"}