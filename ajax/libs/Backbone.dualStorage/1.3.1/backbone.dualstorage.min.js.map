{"version":3,"sources":["./1.3.1/backbone.dualstorage.js"],"names":["S4","backboneSync","callbackTranslator","dualsync","getStoreName","localsync","modelUpdatedWithResponse","onlineSync","parseRemoteResponse","__indexOf","indexOf","item","i","l","this","length","Backbone","DualStorage","offlineStatusCodes","Model","prototype","hasTempId","_","isString","id","collection","model","result","Collection","syncDirty","ids","store","_i","_len","_ref","_results","localStorage","getItem","split","push","get","save","dirtyModels","models","call","compact","syncDestroyed","set","idAttribute","destroy","destroyedModelIds","syncDirtyAndDestroyed","Math","random","toString","substring","window","Store","name","records","recordsOn","sep","generateId","setItem","join","key","dirty","dirtyRecords","include","clean","from","without","destroyed","destroyedRecords","create","isObject","JSON","stringify","update","clear","removeItem","hasDirtyOrDestroyed","isEmpty","find","modelAsJson","parse","findAll","reject","record_id","exists","storeName","needsTranslation","VERSION","forBackboneCaller","callback","resp","options","forDualstorageCaller","method","isValidModel","preExisting","response","Error","add","merge","attributes","ignoreCallbacks","success","error","object","parseBeforeLocalSave","isFunction","modelClone","sync","local","relayErrorCallback","temporaryId","storeExists","remote","offline","status","xhr","modelAttributes","responseModel","updatedModel","silent"],"mappings":"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","file":"./1.3.1/backbone.dualstorage.min.js"}