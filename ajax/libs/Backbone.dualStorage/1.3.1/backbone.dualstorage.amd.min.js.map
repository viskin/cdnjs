{"version":3,"sources":["./1.3.1/backbone.dualstorage.amd.js"],"names":["root","factory","define","amd","require","module","exports","Backbone","this","S4","backboneSync","callbackTranslator","dualsync","getStoreName","localsync","modelUpdatedWithResponse","onlineSync","parseRemoteResponse","__indexOf","indexOf","item","i","l","length","DualStorage","offlineStatusCodes","Model","prototype","hasTempId","_","isString","id","collection","model","result","Collection","syncDirty","ids","store","_i","_len","_ref","_results","localStorage","getItem","split","push","get","save","dirtyModels","models","call","compact","syncDestroyed","set","idAttribute","destroy","destroyedModelIds","syncDirtyAndDestroyed","Math","random","toString","substring","window","Store","name","records","recordsOn","sep","generateId","setItem","join","key","dirty","dirtyRecords","include","clean","from","without","destroyed","destroyedRecords","create","isObject","JSON","stringify","update","clear","removeItem","hasDirtyOrDestroyed","isEmpty","find","modelAsJson","parse","findAll","reject","record_id","exists","storeName","needsTranslation","VERSION","forBackboneCaller","callback","resp","options","forDualstorageCaller","method","isValidModel","preExisting","response","Error","add","merge","attributes","ignoreCallbacks","success","error","object","parseBeforeLocalSave","isFunction","modelClone","sync","local","relayErrorCallback","temporaryId","storeExists","remote","offline","status","xhr","modelAttributes","responseModel","updatedModel","silent"],"mappings":"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","file":"./1.3.1/backbone.dualstorage.amd.min.js"}