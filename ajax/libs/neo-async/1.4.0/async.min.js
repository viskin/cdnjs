(function(){function B(b){for(var e=-1,c=b.length,a=Array(c);++e<c;)a[e]=b[e];return a}function D(b,e){var c=-1,a=b.length-e;if(0>=a)return[];for(var d=Array(a);++c<a;)d[c]=b[c+e];return d}function I(b){for(var e=-1,c=b.length,a=-1,d=[];++e<c;){var f=b[e];f&&(d[++a]=f)}return d}function Ja(b){for(var e=-1,c=b.length,a=Array(c),d=c;++e<c;)a[--d]=b[e];return a}function fa(b,e,c){var a=-1,d=b.length;if(3===e.length)for(;++a<d;)e(b[a],a,C(c));else for(;++a<d;)e(b[a],C(c))}function ga(b,e,c,a){var d,f=
-1,g=a.length;if(3===e.length)for(;++f<g;)d=a[f],e(b[d],d,C(c));else for(;++f<g;)e(b[a[f]],C(c))}function ha(b,e,c){var a=-1,d=b.length;if(3===e.length)for(;++a<d;)e(b[a],a,c(a));else for(;++a<d;)e(b[a],c(a))}function V(b,e,c){var a,d=-1,f=b.length;if(3===e.length)for(;++d<f;)a=b[d],e(a,d,c(a));else for(;++d<f;)a=b[d],e(a,c(a))}function W(b,e,c,a){var d,f,g=-1,m=a.length;if(3===e.length)for(;++g<m;)d=a[g],f=b[d],e(f,d,c(f));else for(;++g<m;)f=b[a[g]],e(f,c(f))}function X(b,e,c){var a,d=-1,f=b.length;
if(3===e.length)for(;++d<f;)a=b[d],e(a,d,c(d,a));else for(;++d<f;)a=b[d],e(a,c(d,a))}function ia(b,e,c,a){var d,f,g=-1,m=a.length;if(3===e.length)for(;++g<m;)d=a[g],f=b[d],e(f,d,c(g,f));else for(;++g<m;)f=b[a[g]],e(f,c(g,f))}function F(b,e){for(var c=-1,a=b.length;++c<a;)e(b[c],c);return b}function Y(b,e){for(var c=b.length;c--;)e(b[c],c);return b}function J(b,e,c){c=c||Object.keys(b);for(var a=-1,d=c.length;++a<d;){var f=c[a];e(b[f],f)}return b}function E(b,e){for(var c=-1;++c<b;)e(c)}function Ka(b,
e){for(var c=b.length,a=-1;++a<c;)if(!e(b[a]))return!1;return!0}function K(b){for(var e=b.length,c=-1,a=Array(e);++c<e;)a[c]=b[c];return a}function G(b){for(var e=Object.keys(b),c=e.length,a=-1,d={};++a<c;){var f=e[a];d[f]=b[f]}return d}function P(b,e){for(var c=-1,a=b.length,d=Array(a);++c<a;)d[c]=(b[c]||{})[e];return d}function Z(b,e){return b.criteria-e.criteria}function C(b){return function(e,c){null===b&&v();b(e,c);b=null}}function ja(){function b(c,b){var e=a.test(b)?0:d.test(b)?2:1,f=c.length;
g[b]=function(){var a=B(arguments),b=a[e];switch(b.length){case 1:a[e]=function(c){x.safeNextTick(function(){b(c)})};break;case 2:a[e]=function(c,a){x.safeNextTick(function(){b(c,a)})};break;case 3:a[e]=function(c,a,d){x.safeNextTick(function(){b(c,a,d)})};break;case 4:a[e]=function(c,a,d,e){x.safeNextTick(function(){b(c,a,d,e)})};break;default:a[e]=function(){var c=B(arguments);x.safeNextTick(function(){b.apply(null,c)})}}switch(f){case 2:return c(a[0],a[1]);case 3:return c(a[0],a[1],a[2]);case 4:return c(a[0],
a[1],a[2],a[3]);case 5:return c(a[0],a[1],a[2],a[3],a[4])}}}function e(c,a){function b(){function a(c){return"function"!==typeof c?c:function(){var a=B(arguments);x.safeNextTick(function(){c.apply(null,a)})}}var e=B(arguments),f=e[0];Array.isArray(f)?F(f,function(c,b){f[b]=a(c)}):f&&"object"===typeof f&&J(f,function(c,b){f[b]=a(c)});switch(d){case 2:c(e[0],e[1]);break;case 3:c(e[0],e[1],e[2])}}if(/^waterfall$/.test(a))g[a]=La;else{var d=c.length;g[a]=b}}var c=/^(each|foreach|map|filter|select|reject|detect|pick|reduce|inject|fold|transform|sortby|some|any|every|all|concat|times)|(whilst|until|during)$|^forever$/,
a=new RegExp(/^do|^forever$/),d=new RegExp(/^reduce|Limit$/),f=new RegExp(/^parallel|^(series|waterfall|auto)$/),g={};J(x,function(a,d){if("function"===typeof a){if(f.test(d))return e(a,d);if(c.test(d.toLowerCase()))return b(a,d)}g[d]=a});g.safe=ja;return g}function ka(b,e,c){return function(a,d,f){function g(a,b){return function(d){null===a&&v();!!d===c&&(k[a]=b);a=null;++n===l&&f(I(k))}}function m(a,b){return function(d,e){null===a&&v();d?(f(d,I(k)),f=u,a=null):(!!e===c&&(k[a]=b),a=null,++n===l&&
f(void 0,I(k)))}}f=f||u;var l,h,k,n=0,p=2===f.length,r=p?m:g;Array.isArray(a)?(l=a.length,k=Array(l),b(a,d,r)):a&&"object"===typeof a&&(h=Object.keys(a),l=h.length,k=Array(l),e(a,d,r,h));if(!l)return p?f(void 0,[]):f([])}}function la(b){return function(e,c,a){function d(){p=e[y];c(p,L)}function f(){p=e[y];c(p,y,L)}function g(){n=r[y];p=e[n];c(p,L)}function m(){n=r[y];p=e[n];c(p,n,L)}function l(c){!!c===b&&(t[++A]=p);++y>=k?(a(I(t)),a=v):w?x.nextTick(q):q()}function h(c,d){c?(a(c,I(t)),a=v):(!!d===
b&&(t[++A]=p),++y>=k?(a(void 0,I(t)),a=v):w?x.nextTick(q):q())}a=a||u;var k,n,p,r,q,t,w=!0,y=0,A=-1,H=2===a.length,L=H?h:l;Array.isArray(e)?(k=e.length,q=3===c.length?f:d):e&&"object"===typeof e&&(r=Object.keys(e),k=r.length,q=3===c.length?m:g);if(!k)return H?a(void 0,[]):a([]);t=Array(k);q();w=!1}}function ma(b){return function(e,c,a,d){function f(){p=H++;p<n&&(q=e[p],a(q,B(q,p)))}function g(){p=H++;p<n&&(q=e[p],a(q,p,B(q,p)))}function m(){p=H++;p<n&&(q=e[t[p]],a(q,B(q,p)))}function l(){p=H++;p<
n&&(r=t[p],q=e[r],a(q,r,B(q,p)))}function h(c,a){return function(e){null===a&&v();!!e===b&&(y[a]=c);a=null;++L>=n?(d(I(y)),d=v):A?x.nextTick(w):w()}}function k(a,c){return function(e,f){null===c&&v();e?(d(e,I(y)),w=d=u,c=null):(!!f===b&&(y[c]=a),c=null,++L===n?(d(void 0,I(y)),d=v):A?x.nextTick(w):w())}}d=d||u;var n,p,r,q,t,w,y,A=!0,H=0,L=0,z=2===d.length,B=z?k:h;Array.isArray(e)?(n=e.length,w=3===a.length?g:f):e&&"object"===typeof e&&(t=Object.keys(e),n=t.length,w=3===a.length?l:m);if(!n||isNaN(c)||
1>c)return z?d(void 0,[]):d([]);y=Array(n);E(c>n?n:c,w);A=!1}}function N(b,e,c){function a(){e(b[r],m)}function d(){e(b[r],r,m)}function f(){e(b[k[r]],m)}function g(){h=k[r];e(b[h],h,m)}function m(a,b){a?c(a):++r>=l?(c(),c=v):!1===b?c():p?x.nextTick(n):(p=!0,n());p=!1}c=c||u;var l,h,k,n,p=!0,r=0;Array.isArray(b)?(l=b.length,n=3===e.length?d:a):b&&"object"===typeof b&&(k=Object.keys(b),l=k.length,n=3===e.length?g:f);if(!l)return c();n();p=!1}function Q(b,e,c,a){function d(){t<h&&c(b[t++],l)}function f(){k=
t++;k<h&&c(b[k],k,l)}function g(){t<h&&c(b[p[t++]],l)}function m(){k=t++;k<h&&(n=p[k],c(b[n],n,l))}function l(c,b){c?(a(c),r=a=u):++w>=h?(a(),a=v):!1===b?(a(),a=u):q?x.nextTick(r):(q=!0,r());q=!1}a=a||u;var h,k,n,p,r,q=!1,t=0,w=0;if(Array.isArray(b))h=b.length,r=3===c.length?f:d;else if(b&&"object"===typeof b)p=Object.keys(b),h=p.length,r=3===c.length?m:g;else return a();if(!h||isNaN(e)||1>e)return a();E(e>h?h:e,r);q=!0}function na(b,e,c){return function(a,d,f){function g(a){var b=!1;return function(d){b&&
v();b=!0;!!d===c?(f(a),f=u):++k===l&&(f(),f=v)}}function m(a){var b=!1;return function(d,e){b&&v();b=!0;d?(f(d),f=u):!!e===c?(f(void 0,a),f=u):++k===l&&(f(),f=v)}}f=f||u;var l,h,k=0,n=2===f.length?m:g;Array.isArray(a)?(l=a.length,b(a,d,n)):a&&"object"===typeof a&&(h=Object.keys(a),l=h.length,e(a,d,n,h));l||f()}}function oa(b){return function(e,c,a){function d(){p=e[w];c(p,y)}function f(){p=e[w];c(p,w,y)}function g(){p=e[r[w]];c(p,y)}function m(){n=r[w];p=e[n];c(p,n,y)}function l(c){!!c===b?(a(p),
a=v):++w>=k?(a(),a=v):t?x.nextTick(q):(t=!0,q());t=!1}function h(c,d){c?(a(c),a=v):!!d===b?(a(void 0,p),a=v):++w>=k?(a(),a=v):t?x.nextTick(q):(t=!0,q());t=!1}a=a||u;var k,n,p,r,q,t=!0,w=0,y=2===a.length?h:l;Array.isArray(e)?(k=e.length,q=3===c.length?f:d):e&&"object"===typeof e&&(r=Object.keys(e),k=r.length,q=3===c.length?m:g);if(!k)return a();q();t=!1}}function pa(b){return function(e,c,a,d){function f(){p=A++;p<n&&(q=e[p],a(q,z(q)))}function g(){p=A++;p<n&&(q=e[p],a(q,p,z(q)))}function m(){p=A++;
p<n&&(q=e[t[p]],a(q,z(q)))}function l(){A<n&&(r=t[A++],q=e[r],a(q,r,z(q)))}function h(c){var a=!1;return function(e){a&&v();a=!0;!!e===b?(d(c),w=d=u):++H>=n?(d(),d=v):y?x.nextTick(w):(y=!0,w());y=!1}}function k(c){var a=!1;return function(e,f){a&&v();a=!0;e?(d(e),w=d=u):!!f===b?(d(void 0,c),d=u):++H>=n?(d(),d=v):y?x.nextTick(w):(y=!0,w());y=!1}}d=d||u;var n,p,r,q,t,w,y=!0,A=0,H=0,z=2===d.length?k:h;Array.isArray(e)?(n=e.length,w=3===a.length?g:f):e&&"object"===typeof e&&(t=Object.keys(e),n=t.length,
w=3===a.length?l:m);if(!n||isNaN(c)||1>c)return d();E(c>n?n:c,w);y=!1}}function R(b,e,c,a){function d(a){n=b[t];c(a,n,l)}function f(a){n=b[t];c(a,n,t,l)}function g(a){k=p[t];n=b[k];c(a,n,l)}function m(a){k=p[t];n=b[k];c(a,n,k,l)}function l(c,b){c?(a(c,b),a=v):++t>=h?(a(void 0,b),a=v):q?x.nextTick(function(){r(b)}):(q=!0,r(b));q=!1}a=a||u;var h,k,n,p,r,q=!0,t=0;Array.isArray(b)?(h=b.length,r=4===c.length?f:d):b&&"object"===typeof b&&(p=Object.keys(b),h=p.length,r=4===c.length?m:g);if(!h)return a(void 0,
e);r(e);q=!1}function qa(b,e,c,a){function d(a){p=b[--h];c(a,p,l)}function f(a){k=--h;p=b[k];c(a,p,k,l)}function g(a){n=r[--h];p=b[n];c(a,p,l)}function m(a){n=r[--h];p=b[n];c(a,p,n,l)}function l(c,b){c?(a(c,b),a=v):0>=h?(a(void 0,b),a=v):t?x.nextTick(function(){q(b)}):(t=!0,q(b));t=!1}a=a||u;var h,k,n,p,r,q,t=!0;Array.isArray(b)?(h=b.length,q=4===c.length?f:d):b&&"object"===typeof b&&(r=Object.keys(b),h=r.length,q=4===c.length?m:g);if(!h)return a(void 0,e);q(e);t=!1}function ra(b,e,c){function a(a){c(!!a)}
function d(a,b){c(a,!!b)}c=c||u;sa(b,e,2===c.length?d:a)}function ta(b,e){function c(){g=n;b[n](d)}function a(){g=m[n];b[g](d)}function d(a,c){a?(e(a,l),h=e=v):(l[g]=2>=arguments.length?c:D(arguments,1),++n>=f?(e(void 0,l),e=v):k?x.nextTick(h):(k=!0,h()),k=!1)}e=e||u;var f,g,m,l,h,k=!0,n=0;if(Array.isArray(b))f=b.length,l=Array(f),h=c;else if(b&&"object"===typeof b)m=Object.keys(b),f=m.length,l={},h=a;else return e();if(!f)return e(void 0,l);h();k=!1}function aa(b,e,c){function a(){m=r++;if(m<g)b[m](f(m))}
function d(){r<g&&(l=h[r++],b[l](f(l)))}function f(a){return function(b,d){null===a&&v();b?(c(b,k),c=u,a=null):(k[a]=2>=arguments.length?d:D(arguments,1),a=null,++q>=g?c(void 0,k):p?x.nextTick(n):(p=!0,n()),p=!1)}}c=c||u;var g,m,l,h,k,n,p=!0,r=0,q=0;Array.isArray(b)?(g=b.length,k=Array(g),n=a):b&&"object"===typeof b&&(h=Object.keys(b),g=h.length,k={},n=d);if(!g||isNaN(e)||1>e)return c(void 0,k);E(e>g?g:e,n);p=!1}function ba(b,e){return Array.isArray(b)?0===b.length?(e(),!1):!0:(e(Error("First argument to waterfall must be an array of functions")),
!1)}function La(b,e){function c(g){function m(b){a&&v();a=!0;if(b)e(b);else if(++g>=d)e.apply(null,B(arguments));else{f=arguments;x.safeNextTick(function(){c(g)});return}e=c=v}a=!1;var l=b[g];switch(f.length){case 0:case 1:return l(m);case 2:return l(f[1],m);case 3:return l(f[1],f[2],m);case 4:return l(f[1],f[2],f[3],m);case 5:return l(f[1],f[2],f[3],f[4],m);case 6:return l(f[1],f[2],f[3],f[4],f[5],m);default:return f=D(f,1),f.push(m),l.apply(null,f)}}e=e||u;if(ba(b,e)){var a,d=b.length,f=[];c(0)}}
function ua(b,e){function c(){switch(m.length){case 1:return m(a);case 2:return m(l[1],a);case 3:return m(l[1],l[2],a);case 4:return m(l[1],l[2],l[3],a);case 5:return m(l[1],l[2],l[3],l[4],a);default:return l=D(l,1),l[m.length-1]=a,m.apply(null,l)}}function a(a){a?(e(a),e=v):++d>=g?(e.apply(null,B(arguments)),e=v):(m=b[d],l=arguments,f?x.nextTick(c):(f=!0,c()),f=!1)}e=e||u;if(ba(b,e)){var d=0,f=!0,g=b.length,m=b[d],l=[];c();f=!1}}function va(){var b=B(arguments);return function(){var e=this,c=B(arguments),
a=c.pop();R(b,c,function(a,c,b){a.push(function(a){var c=D(arguments,1);b(a,c)});c.apply(e,a)},function(c,b){b=Array.isArray(b)?b:[b];b.unshift(c);a.apply(e,b)})}}function wa(b){return function(e){var c=function(){var a=this,c=B(arguments),g=c.pop()||u;return b(e,function(b,e){b.apply(a,c.concat([e]))},g)};if(1<arguments.length){var a=D(arguments,1);return c.apply(this,a)}return c}}function xa(b,e){function c(a,c,b){function e(a){var c=d.tasks,b=c.length;if(!b)return 0;for(var f=-1;++f<b&&!(a<c[f].priority););
return f}d.started=!0;var h=Array.isArray(a)?a:[a];if(void 0!==a&&h.length){b="function"===typeof b?b:u;var k=e(c);F(h,function(a){a={task:a,priority:c,callback:b};d.tasks.splice(k++,0,a);"function"===typeof d.saturated&&d.length()===d.concurrency&&d.saturated();x.nextTick(d.process)})}else d.idle()&&x.nextTick(function(){"function"===typeof d.drain&&d.drain()})}if(void 0===e)e=1;else if(isNaN(e)||1>e)throw Error("concurrency must be more than 1");var a=0,d={tasks:[],concurrency:e,saturated:u,empty:u,
drain:u,started:!1,paused:!1,push:function(a,b,d){c(a,b,d)},kill:function(){d.drain=u;d.tasks=[]},process:function(){function c(){a--;b.callback&&b.callback.apply(b,B(arguments));"function"===typeof d.drain&&d.idle()&&d.drain();d.process()}if(!(d.paused||a>=d.concurrency)&&d.length()){var b=d.tasks.shift();"function"!==typeof d.empty||d.length()||d.empty();a++;d._worker(b.task,C(c))}},length:function(){return d.tasks.length},running:function(){return a},idle:function(){return 0===d.length()+a},pause:function(){d.paused=
!0},resume:function(){!1!==d.paused&&(d.paused=!1,E(d.concurrency,function(){x.setImmediate(d.process)}))},_worker:b};return d}function ya(b,e,c){function a(){e(m,d)}function d(d,e){f[m]=e;d?(c(d),c=v):++m>=b?(c(void 0,f),c=v):g?x.nextTick(a):(g=!0,a());g=!1}c=c||u;b=+b;if(isNaN(b)||1>b)return c(void 0,[]);var f=Array(b),g=!0,m=0;a();g=!1}function za(b){return function(){var e=B(arguments),c=e.pop(),a;try{a=b.apply(this,e)}catch(d){return c(d)}if("object"===typeof a&&"function"===typeof a.then)a.then(function(a){c(null,
a)})["catch"](c);else c(null,a)}}function ca(b){function e(c){if(S[typeof console])if(c)console.error&&console.error(c);else if(console[b]){var a=D(arguments,1);F(a,function(a){console[b](a)})}}return function(c){var a=D(arguments,1);a.push(e);c.apply(null,a)}}function z(b,e){this._emitter=b||ta;this._limit=e||4;this._events={};this._runing={};this._queue={}}function Aa(b){b=b||u;if(b.ONCE===da)return b;var e=function(c){if(b.length)return b(c);b();c()};e.func=b;return e}function Ba(b){b=b||u;var e=
function(c){if(b.length)return b(c);b();c()};e.func=b;e.ONCE=da;return e}var M=this,Ma=M&&M.async,u=function(){},v=function(){throw Error("Callback was already called.");},S={"function":!0,object:!0},T,ea,U;(function(){var b=function(b){setTimeout(b,0)};U="function"===typeof setImmediate?setImmediate:b;"object"===typeof process&&"function"===typeof process.nextTick?(T=process.nextTick,ea=/^v0.10/.test(process.version)?U:T):T=ea=U})();var O=function(b,e){return function(c,a,d){function f(a,c){a?(d(a),
d=u):++l===g?d():!1===c&&(d(),d=u)}d=d||u;var g,m,l=0;Array.isArray(c)?(g=c.length,b(c,a,f)):c&&"object"===typeof c&&(m=Object.keys(c),g=m.length,e(c,a,f,m));g||d()}}(fa,ga),Na=function(b,e){return function(c,a,d){function f(a){return function(c,b){null===a&&v();l[a]=b;a=null;c?(d(c,K(l)),d=u):++h===g&&d(void 0,l)}}d=d||u;var g,m,l,h=0;Array.isArray(c)?(g=c.length,l=Array(g),b(c,a,f)):c&&"object"===typeof c&&(m=Object.keys(c),g=m.length,l=Array(g),e(c,a,f,m));g||d(void 0,[])}}(ha,function(b,e,c,a){var d,
f=-1,g=a.length;if(3===e.length)for(;++f<g;)d=a[f],e(b[d],d,c(f));else for(;++f<g;)e(b[a[f]],c(f))}),Oa=function(b,e){return function(c,a,d){function f(a){return function(c,b){null===a&&v();h[a]=b;a=null;c?(d(c,G(h)),d=u):++l===g&&(d(void 0,h),d=v)}}d=d||u;var g,m,l=0,h={};Array.isArray(c)?(g=c.length,b(c,a,f)):c&&"object"===typeof c&&(m=Object.keys(c),g=m.length,e(c,a,f,m));g||d(void 0,h)}}(ha,function(b,e,c,a){var d,f=-1,g=a.length;if(3===e.length)for(;++f<g;)d=a[f],e(b[d],d,c(d));else for(;++f<
g;)d=a[f],e(b[d],c(d))}),Ca=ka(X,ia,!0),Da=la(!0),Ea=ma(!0),Pa=ka(X,ia,!1),Qa=la(!1),Ra=ma(!1),sa=na(V,W,!0),Fa=oa(!0),Ga=pa(!0),Ha=function(b,e){var c=na(b,e,!1);return function(a,b,e){function g(a){e(!a)}function m(a,c){e(a,!c)}e=e||u;c(a,b,2===e.length?m:g)}}(V,W),Sa=function(){var b=oa(!1);return function(e,c,a){function d(c){a(!c)}function f(c,b){a(c,!b)}a=a||u;b(e,c,2===a.length?f:d)}}(),Ta=function(){var b=pa(!1);return function(e,c,a,d){function f(a){d(!a)}function g(a,c){d(a,!c)}d=d||u;b(e,
c,a,2===d.length?g:f)}}(),Ua=function(b,e){return function(c,a,d){function f(a,c){return function(b){null===a&&v();b&&(k[a]=c);a=null;++h===m&&d(k)}}function g(a,c){return function(b,e){null===a&&v();b?(d(b,G(k)),d=u,a=null):(e&&(k[a]=c),a=null,++h===m&&(d(void 0,k),d=v))}}d=d||u;var m,l,h=0,k={},n=2===d.length,p=n?g:f;Array.isArray(c)?(m=c.length,b(c,a,p)):c&&"object"===typeof c&&(l=Object.keys(c),m=l.length,e(c,a,p,l));if(!m)return n?d(void 0,{}):d({})}}(X,function(b,e,c,a){var d,f,g=-1,m=a.length;
if(3===e.length)for(;++g<m;)d=a[g],f=b[d],e(f,d,c(d,f));else for(;++g<m;)d=a[g],f=b[d],e(f,c(d,f))}),Va=function(b,e){return function(c,a,d,f){function g(a,c){a?(d(a,Array.isArray(h)?K(h):G(h)),d=u):++k===m?d(void 0,h):!1===c&&(d(void 0,Array.isArray(h)?K(h):G(h)),d=u)}d=d||u;var m,l,h,k=0;Array.isArray(c)?(m=c.length,h=void 0!==f?f:[],b(c,h,a,g)):c&&"object"===typeof c&&(l=Object.keys(c),m=l.length,h=void 0!==f?f:{},e(c,h,a,g,l));m||d(void 0,void 0!==f?f:h||{})}}(function(b,e,c,a){var d=-1,f=b.length;
if(4===c.length)for(;++d<f;)c(e,b[d],d,C(a));else for(;++d<f;)c(e,b[d],C(a))},function(b,e,c,a,d){var f,g=-1,m=d.length;if(4===c.length)for(;++g<m;)f=d[g],c(e,b[f],f,C(a));else for(;++g<m;)c(e,b[d[g]],C(a))}),Wa=function(b,e){return function(c,a,d){function f(a){var c=!1;return function(b,e){c&&v();c=!0;m[l]={value:a,criteria:e};b?(d(b),d=u):++l===g&&(m.sort(Z),d(void 0,P(m,"value")),d=v)}}d=d||u;var g,m,l=0;if(Array.isArray(c))g=c.length,m=Array(g),b(c,a,f);else if(c&&"object"===typeof c){var h=
Object.keys(c);g=h.length;m=Array(g);e(c,a,f,h)}g||d(void 0,[])}}(V,W),Xa=function(b,e){return function(c,a,d){function f(a,c){void 0!==c&&Array.prototype.push.apply(l,Array.isArray(c)?c:[c]);a?(d(a,K(l)),d=u):++m===g&&d(void 0,l)}d=d||u;var g,m=0,l=[];if(Array.isArray(c))g=c.length,b(c,a,f);else if(c&&"object"===typeof c){var h=Object.keys(c);g=h.length;e(c,a,f,h)}g||d(void 0,l)}}(fa,ga),Ia=function(b,e){return function(c,a){function d(c){return function(b,d){null===c&&v();b?(a(b,m),a=u,c=null):
(m[c]=2>=arguments.length?d:D(arguments,1),c=null,++l===f&&(a(void 0,m),a=v))}}a=a||u;var f,g,m,l=0;Array.isArray(c)?(f=c.length,m=Array(f),b(c,d)):c&&"object"===typeof c&&(g=Object.keys(c),f=g.length,m={},e(c,d,g));f||a(void 0,m)}}(function(b,e){for(var c=-1,a=b.length;++c<a;)b[c](e(c))},function(b,e,c){for(var a,d=-1,f=c.length;++d<f;)a=c[d],b[a](e(a))}),x={VERSION:"1.4.0",each:O,eachSeries:N,eachLimit:Q,forEach:O,forEachSeries:N,forEachLimit:Q,eachOf:O,eachOfSeries:N,eachOfLimit:Q,forEachOf:O,
forEachOfSeries:N,forEachOfLimit:Q,map:Na,mapSeries:function(b,e,c){function a(){e(b[q],m)}function d(){e(b[q],q,m)}function f(){e(b[k[q]],m)}function g(){h=k[q];e(b[h],h,m)}function m(a,b){n[q]=b;a?(c(a,K(n)),c=v):++q>=l?(c(void 0,n),c=v):r?x.nextTick(p):(r=!0,p());r=!1}c=c||u;var l,h,k,n,p,r=!0,q=0;Array.isArray(b)?(l=b.length,p=3===e.length?d:a):b&&"object"===typeof b&&(k=Object.keys(b),l=k.length,p=3===e.length?g:f);if(!l)return c(void 0,[]);n=Array(l);p();r=!1},mapLimit:function(b,e,c,a){function d(){k=
w++;k<h&&c(b[k],l(k))}function f(){k=w++;k<h&&c(b[k],k,l(k))}function g(){k=w++;k<h&&c(b[p[k]],l(k))}function m(){k=w++;k<h&&(n=p[k],c(b[n],n,l(k)))}function l(c){return function(b,d){null===c&&v();r[c]=d;c=null;b?(a(b,K(r)),q=a=u):++y>=h?(a(void 0,r),a=v):t?x.nextTick(q):(t=!0,q());t=!1}}a=a||u;var h,k,n,p,r,q,t=!0,w=0,y=0;Array.isArray(b)?(h=b.length,q=3===c.length?f:d):b&&"object"===typeof b&&(p=Object.keys(b),h=p.length,q=3===c.length?m:g);if(!h||isNaN(e)||1>e)return a(void 0,[]);r=Array(h);E(e>
h?h:e,q);t=!1},mapValues:Oa,mapValuesSeries:function(b,e,c){function a(){h=q;e(b[q],m)}function d(){h=q;e(b[q],q,m)}function f(){h=k[q];e(b[h],m)}function g(){h=k[q];e(b[h],h,m)}function m(a,b){r[h]=b;a?(c(a,G(r)),c=v):++q>=l?(c(void 0,r),c=v):p?x.nextTick(n):(p=!0,n());p=!1}c=c||u;var l,h,k,n,p=!0,r={},q=0;Array.isArray(b)?(l=b.length,n=3===e.length?d:a):b&&"object"===typeof b&&(k=Object.keys(b),l=k.length,n=3===e.length?g:f);if(!l)return c(void 0,r);n();p=!1},mapValuesLimit:function(b,e,c,a){function d(){k=
w++;k<h&&c(b[k],l(k))}function f(){k=w++;k<h&&c(b[k],k,l(k))}function g(){k=w++;k<h&&(n=p[k],c(b[n],l(n)))}function m(){k=w++;k<h&&(n=p[k],c(b[n],n,l(n)))}function l(c){return function(b,d){null===c&&v();t[c]=d;c=null;b?(a(b,G(t)),r=a=u):++y>=h?(a(void 0,t),a=v):q?x.nextTick(r):(q=!0,r());q=!1}}a=a||u;var h,k,n,p,r,q=!0,t={},w=0,y=0;Array.isArray(b)?(h=b.length,r=3===c.length?f:d):b&&"object"===typeof b&&(p=Object.keys(b),h=p.length,r=3===c.length?m:g);if(!h||isNaN(e)||1>e)return a(void 0,t);E(e>
h?h:e,r);q=!1},filter:Ca,filterSeries:Da,filterLimit:Ea,select:Ca,selectSeries:Da,selectLimit:Ea,reject:Pa,rejectSeries:Qa,rejectLimit:Ra,detect:sa,detectSeries:Fa,detectLimit:Ga,pick:Ua,pickSeries:function(b,e,c){function a(){k=w;n=b[w];e(n,A)}function d(){k=w;n=b[w];e(n,w,A)}function f(){k=p[w];n=b[k];e(n,A)}function g(){k=p[w];n=b[k];e(n,k,A)}function m(a){a&&(t[k]=n);++w>=h?(c(t),c=v):q?x.nextTick(r):(q=!0,r());q=!1}function l(a,b){a?(c(a,t),c=v):(b&&(t[k]=n),++w>=h?(c(void 0,t),c=v):q?x.nextTick(r):
(q=!0,r()),q=!1)}c=c||u;var h,k,n,p,r,q=!0,t={},w=0,y=2===c.length,A=y?l:m;Array.isArray(b)?(h=b.length,r=3===e.length?d:a):b&&"object"===typeof b&&(p=Object.keys(b),h=p.length,r=3===e.length?g:f);if(!h)return y?c(void 0,{}):c({});r();q=!1},pickLimit:function(b,e,c,a){function d(){n=A++;n<k&&(r=b[n],c(r,C(r,n)))}function f(){n=A++;n<k&&(r=b[n],c(r,n,C(r,n)))}function g(){A<k&&(p=q[A++],r=b[p],c(r,C(r,p)))}function m(){A<k&&(p=q[A++],r=b[p],c(r,p,C(r,p)))}function l(c,b){return function(d){null===
b&&v();d&&(y[b]=c);b=null;++z>=k?(a(y),a=v):w?x.nextTick(t):(w=!0,t());w=!1}}function h(c,b){return function(d,e){null===b&&v();d?(a(d,G(y)),t=a=u,b=null):(e&&(y[b]=c),b=null,++z>=k?(a(void 0,y),a=v):w?x.nextTick(t):(w=!0,t()),w=!1)}}a=a||u;var k,n,p,r,q,t,w=!0,y={},A=0,z=0,B=2===a.length,C=B?h:l;Array.isArray(b)?(k=b.length,t=3===c.length?f:d):b&&"object"===typeof b&&(q=Object.keys(b),k=q.length,t=3===c.length?m:g);if(!k||isNaN(e)||1>e)return B?a(void 0,{}):a({});E(e>k?k:e,t);w=!1},reduce:R,inject:R,
foldl:R,reduceRight:qa,foldr:qa,transform:Va,transformSeries:function(b,e,c,a){function d(){e(r,b[t],l)}function f(){e(r,b[t],t,l)}function g(){e(r,b[n[t]],l)}function m(){k=n[t];e(r,b[k],k,l)}function l(a,b){a?(c(a,r),c=v):++t>=h?(c(void 0,r),c=v):!1===b?(c(void 0,r),c=v):q?x.nextTick(p):(q=!0,p());q=!1}c=c||u;var h,k,n,p,r,q=!0,t=0;Array.isArray(b)?(h=b.length,r=void 0!==a?a:[],p=4===e.length?f:d):b&&"object"===typeof b&&(n=Object.keys(b),h=n.length,r=void 0!==a?a:{},p=4===e.length?m:g);if(!h)return c(void 0,
void 0!==a?a:r||{});p();q=!1},transformLimit:function(b,e,c,a,d){function f(){n=y++;n<k&&c(t,b[n],C(h))}function g(){n=y++;n<k&&c(t,b[n],n,C(h))}function m(){n=y++;n<k&&c(t,b[r[n]],C(h))}function l(){n=y++;n<k&&(p=r[n],c(t,b[p],p,C(h)))}function h(c,b){c?(a(c,Array.isArray(t)?K(t):G(t)),q=a=u):++A>=k?(a(void 0,t),a=v):!1===b?(a(void 0,Array.isArray(t)?K(t):G(t)),q=a=u):w?x.nextTick(q):(w=!0,q());w=!1}a=a||u;var k,n,p,r,q,t,w=!0,y=0,A=0;Array.isArray(b)?(k=b.length,t=void 0!==d?d:[],q=4===c.length?
g:f):b&&"object"===typeof b&&(r=Object.keys(b),k=r.length,t=void 0!==d?d:{},q=4===c.length?l:m);if(!k||isNaN(e)||1>e)return a(void 0,void 0!==d?d:t||{});E(e>k?k:e,q);w=!1},sortBy:Wa,sortBySeries:function(b,e,c){function a(){k=b[t];e(k,m)}function d(){k=b[t];e(k,t,m)}function f(){k=b[n[t]];e(k,m)}function g(){h=n[t];k=b[h];e(k,h,m)}function m(a,b){p[t]={value:k,criteria:b};a?(c(a),c=v):++t>=l?(p.sort(Z),c(void 0,P(p,"value")),c=v):q?x.nextTick(r):(q=!0,r());q=!1}c=c||u;var l,h,k,n,p,r,q=!0,t=0;Array.isArray(b)?
(l=b.length,r=3===e.length?d:a):b&&"object"===typeof b&&(n=Object.keys(b),l=n.length,r=3===e.length?g:f);if(!l)return c(void 0,[]);p=Array(l);r();q=!1},sortByLimit:function(b,e,c,a){function d(){y<h&&(p=b[y++],c(p,l(p)))}function f(){k=y++;k<h&&(p=b[k],c(p,k,l(p)))}function g(){y<h&&(p=b[r[y++]],c(p,l(p)))}function m(){y<h&&(n=r[y++],p=b[n],c(p,n,l(p)))}function l(c){var b=!1;return function(d,e){b&&v();b=!0;q[A]={value:c,criteria:e};d?(a(d),t=a=u):++A>=h?(q.sort(Z),a(void 0,P(q,"value")),a=v):w?
x.nextTick(t):(w=!0,t());w=!1}}a=a||u;var h,k,n,p,r,q,t,w=!1,y=0,A=0;Array.isArray(b)?(h=b.length,t=3===c.length?f:d):b&&"object"===typeof b&&(r=Object.keys(b),h=r.length,t=3===c.length?m:g);if(!h||isNaN(e)||1>e)return a(void 0,[]);q=Array(h);E(e>h?h:e,t)},some:ra,someSeries:function(b,e,c){function a(a){c(!!a)}function d(a,b){c(a,!!b)}c=c||u;Fa(b,e,2===c.length?d:a)},someLimit:function(b,e,c,a){function d(c){a(!!c)}function f(c,b){a(c,!!b)}a=a||u;Ga(b,e,c,2===a.length?f:d)},any:ra,every:Ha,all:Ha,
everySeries:Sa,everyLimit:Ta,concat:Xa,concatSeries:function(b,e,c){function a(){e(b[q],m)}function d(){e(b[q],q,m)}function f(){e(b[k[q]],m)}function g(){h=k[q];e(b[h],h,m)}function m(a,b){b&&Array.prototype.push.apply(r,Array.isArray(b)?b:[b]);a?(c(a,r),c=v):++q>=l?(c(void 0,r),c=v):p?x.nextTick(n):(p=!0,n());p=!1}c=c||u;var l,h,k,n,p=!0,r=[],q=0;Array.isArray(b)?(l=b.length,n=3===e.length?d:a):b&&"object"===typeof b&&(k=Object.keys(b),l=k.length,n=3===e.length?g:f);if(!l)return c(void 0,r);n();
p=!1},concatLimit:function(b,e,c,a){function d(){t<k&&c(b[t++],C(l))}function f(){n=t++;n<k&&c(b[n],n,C(l))}function g(){t<k&&c(b[y[t++]],C(l))}function m(){t<k&&(p=y[t++],c(b[p],p,C(l)))}function l(c,b){b&&Array.prototype.push.apply(h,Array.isArray(b)?b:[b]);c?(a(c,h),a=u):++w>=k?(a(void 0,h),a=v):q?x.nextTick(r):(q=!0,r());q=!1}a=a||u;var h=[],k,n,p,r,q=!0,t=0,w=0;if(Array.isArray(b))k=b.length,r=3===c.length?f:d;else if(b&&"object"===typeof b){var y=Object.keys(b);k=y.length;r=3===c.length?m:g}if(!k||
isNaN(e)||1>e)return a(void 0,h);E(e>k?k:e,r);q=!1},parallel:Ia,series:ta,parallelLimit:aa,waterfall:function(b,e){function c(){f=!1;switch(h.length){case 0:case 1:return l(a);case 2:return l(h[1],a);case 3:return l(h[1],h[2],a);case 4:return l(h[1],h[2],h[3],a);case 5:return l(h[1],h[2],h[3],h[4],a);case 6:return l(h[1],h[2],h[3],h[4],h[5],a);default:return h=D(h,1),h.push(a),l.apply(null,h)}}function a(a){f&&v();a?(e(a),e=v):(f=!0,++d>=m?(e.apply(null,B(arguments)),e=v):(l=b[d],h=arguments,g?x.nextTick(c):
(g=!0,c()),g=!1))}e=e||u;if(ba(b,e)){var d=0,f=!1,g=!0,m=b.length,l=b[d],h=[];c();g=!1}},angelFall:ua,angelfall:ua,whilst:function(b,e,c){function a(){b()?e(function(b){if(b)return c(b);d?x.nextTick(a):(d=!0,a());d=!1}):c()}c=c||u;var d=!0;a();d=!1},doWhilst:function(b,e,c){function a(){b(function(b,g){if(b)return c(b);(2>=arguments.length?e(g):e.apply(null,D(arguments,1)))?(d?x.nextTick(a):(d=!0,a()),d=!1):c()})}c=c||u;var d=!0;a();d=!1},until:function(b,e,c){function a(){b()?c():e(function(b){if(b)return c(b);
d?x.nextTick(a):(d=!0,a());d=!1})}c=c||u;var d=!0;a();d=!1},doUntil:function(b,e,c){function a(){b(function(b,g){if(b)return c(b);(2>=arguments.length?e(g):e.apply(null,D(arguments,1)))?c():(d?x.nextTick(a):(d=!0,a()),d=!1)})}c=c||u;var d=!0;a();d=!1},during:function(b,e,c){function a(a,b){if(a)return c(a);b?e(d):c()}function d(d){if(d)return c(d);b(a)}c=c||u;b(a)},doDuring:function(b,e,c){function a(a,e){if(a)return c(a);e?b(d):c()}function d(b,d){if(b)return c(b);switch(arguments.length){case 0:case 1:e(a);
break;case 2:e(d,a);break;default:var m=D(arguments,1);m.push(a);e.apply(null,m)}}c=c||u;a(null,!0)},forever:function(b,e){function c(){b(a)}function a(a){if(a){if(e)return e(a);throw a;}d?x.nextTick(c):(d=!0,c());d=!1}var d=!0;c();d=!1},compose:function(){return va.apply(null,Ja(arguments))},seq:va,applyEach:wa(O),applyEachSeries:wa(N),queue:function(b,e){function c(c,b,e){a.started=!0;var m=Array.isArray(c)?c:[c];void 0!==c&&m.length?(b="function"===typeof b?b:null,F(m,function(c){c={task:c,callback:b};
e?a.tasks.unshift(c):a.tasks.push(c);"function"===typeof a.saturated&&a.length()===a.concurrency&&a.saturated();x.nextTick(a.process)})):a.idle()&&x.nextTick(function(){"function"===typeof a.drain&&a.drain()})}var a=xa(b,e);a.unshift=function(a,b){c(a,b,!0)};a.push=function(a,b){c(a,b)};return a},priorityQueue:xa,cargo:function(b,e){var c=!1,a={tasks:[],payload:e,saturated:u,empty:u,drain:u,drained:!0,push:function(c,b){c=Array.isArray(c)?c:[c];b="function"===typeof b?b:u;F(c,function(c){a.tasks.push({data:c,
callback:b});a.drained=!1;"function"===typeof a.saturated&&a.length()===a.payload&&a.saturated()});x.nextTick(a.process)},process:function(){if(!c)if(a.length()){var d="number"===typeof a.payload?a.tasks.splice(0,e):a.tasks,f=P(d,"data");a.length()||"function"!==typeof a.empty||a.empty();c=!0;b(f,function(){c=!1;var b=B(arguments);F(d,function(a){a.callback&&a.callback.apply(null,b)});a.process()})}else"function"!==typeof a.drain||a.drained||a.drain(),a.drained=!0},length:function(){return a.tasks.length},
running:function(){return c}};return a},auto:function(b,e){function c(a){g.unshift(a)}function a(){f--;F(g.slice(0),function(a){a()})}e=e?C(e):u;var d=Object.keys(b),f=d.length;if(!f)return e();var g=[],m={};c(function(){f||e(void 0,m)});J(b,function(b,d){function f(c){var b=D(arguments,1);1>=b.length&&(b=b[0]);if(c){var g=G(m);g[d]=b;e(c,g);e=u}else m[d]=b,x.nextTick(a)}function n(){return!m.hasOwnProperty(d)&&Ka(q,function(a){return m.hasOwnProperty(a)})}function p(){if(n()){var a;a:{a=-1;for(var b=
g.length;++a<b;)if(g[a]===p)break a;a=void 0}0<=a&&g.splice(a,1);t(f,m)}}b=Array.isArray(b)?b:[b];var r=b.length,q=b.slice(0,r-1),t=b[r-1];if(n())return t(f,m);c(p)},d)},retry:function(b,e,c){function a(a,f){c=a||c||u;var g,m;ya(b,function(a,c){e(function(d,e){g=d;m=e;if(!d)return c(!0);c(d&&a===b-1)},f)},function(){c(g,m)})}"function"===typeof b&&(c=e,e=b,b=5);b=parseInt(b,10)||5;return"function"===typeof c?a():a},iterator:function(b){function e(d){var f=function(){c&&b[a[d]||d].apply(null,B(arguments));
return f.next()};f.next=function(){return d<c-1?e(d+1):null};return f}var c=0,a=[];Array.isArray(b)?c=b.length:(a=Object.keys(b),c=a.length);return e(0)},apply:function(b){var e=D(arguments,1);return function(){return b.apply(this,e.concat(B(arguments)))}},nextTick:T,safeNextTick:ea,setImmediate:U,times:function(b,e,c){function a(a){return function(e,m){null===a&&v();d[a]=m;a=null;e?(c(e),c=u):0===--b&&c(void 0,d)}}c=c||u;b=+b;if(isNaN(b)||1>b)return c(void 0,[]);var d=Array(b);E(b,function(b){e(b,
a(b))})},timesSeries:ya,timesLimit:function(b,e,c,a){function d(){var a=l++;a<b&&c(a,f(a))}function f(c){return function(e,f){null===c&&v();g[c]=f;c=null;e?(a(e),a=u):++h>=b?(a(void 0,g),a=v):m?x.nextTick(d):(m=!0,d());m=!1}}a=a||u;b=+b;if(isNaN(b)||1>b||isNaN(e)||1>e)return a(void 0,[]);var g=Array(b),m=!0,l=0,h=0;E(e>b?b:e,d);m=!1},memoize:function(b,e){e=e||function(a){return a};var c={},a={},d=function(){function d(){var b=B(arguments);c[l]=b;var e=a[l];delete a[l];for(var f=-1,g=e.length;++f<
g;)e[f].apply(null,b)}var g=B(arguments),m=g.pop(),l=e.apply(null,g);if(c.hasOwnProperty(l))x.nextTick(function(){m.apply(null,c[l])});else{if(a.hasOwnProperty(l))return a[l].push(m);a[l]=[m];g.push(d);b.apply(null,g)}};d.memo=c;d.unmemoized=b;return d},unmemoize:function(b){return function(){return(b.unmemoized||b).apply(null,arguments)}},ensureAsync:function(b){return function(){var e=!0,c=B(arguments),a=c.pop();c.push(function(){var b=arguments;e?x.safeNextTick(function(){a.apply(null,b)}):a.apply(null,
b)});b.apply(this,c);e=!1}},constant:function(){var b=[null].concat(B(arguments));return function(e){e.apply(this,b)}},asyncify:za,wrapSync:za,log:ca("log"),dir:ca("dir"),createLogger:ca,noConflict:function(){M.async=Ma;return x},eventEmitter:function(b){b=b||{};var e=b.limit;return b.parallel&&!e?new z(Ia):b.parallel||b.parallelLimit?new z(aa,e):new z(b.emitter)},EventEmitter:z,safe:void 0};x.safe=ja();S[typeof define]&&define&&define.amd?define([],function(){return x}):S[typeof module]&&module&&
module.exports?module.exports=x:M&&S[typeof M.async]?M.neo_async=x:M.async=x;var da={__ONCE__:!0};z.prototype.getListeners=function(b){function e(a){a=a||[];var b=Array(a.length);F(a,function(a,c){b[c]=a.func});return b}var c=this._events;if(b)return e(c[b]);var a={};J(c,function(b,c){a[c]=e(b)});return a};z.prototype.addListener=function e(c,a){var d=this;if("object"===typeof c)return J(c,function(a,c){e.call(d,c,a)}),d;if(d.running(c))return d.queue(c,"addListener",a);d._events[c]=d._events[c]||
[];Array.isArray(a)?F(a,function(a){d._events[c].push(Aa(a))}):d._events[c].push(Aa(a));return d};z.prototype.addOnceListener=function c(a,d){var f=this;if("object"===typeof a)return J(a,function(a,d){c.call(f,d,a)}),f;Array.isArray(d)?F(d,function(a,c){d[c]=Ba(a)}):d=Ba(d);return f.addListener(a,d)};z.prototype.removeListener=function a(d,f){var g=this;if("object"===typeof d)return J(d,function(d,f){a.call(g,f,d)}),g;if(g.running(d))return g.queue(d,"removeListener",f);var m=g._events[d]||[];if(!m.length)return g;
if(Array.isArray(f))return Y(f,function(f){a.call(g,f,d)}),g;Y(m,function(a,d){a.func===f&&m.splice(d,1)});return g};z.prototype.removeEvent=function d(f){var g=this;if(!f)return J(g._events,function(f,l){d.call(g,l)}),g;(g._events[f]||[]).length&&delete g._events[f];return g};z.prototype.running=function(d){return this._runing[d]};z.prototype.queue=function(d,f,g,m){this._queue[d]=this._queue[d]||[];this._queue[d].push([f,g,m]);return this};z.prototype.resolve=function(d){if(this._runing[d])return this;
var f=this._queue[d]||[];if(!f.length)return this;f=f.shift();this[f[0]](d,f[1],f[2]);return this.resolve(d)};z.prototype.emit=function(d,f,g){function m(g,k){g?f(g):(Y(h,function(d,f){d.ONCE===da&&h.splice(f,1)}),f(void 0,k));l._runing[d]=!1;l.resolve(d)}f=f||u;var l=this;if(l.running(d))return l.queue(d,"emit",f,g);var h=l._events[d]||[];if(!h.length)return f(),l;l._runing[d]=!0;var k=l._emitter,k=g?k.bind(g):k;k===aa?k(h,l._limit,m):k(h,m);return l};z.prototype.on=z.prototype.addListener;z.prototype.once=
z.prototype.addOnceListener;z.prototype.off=z.prototype.removeListener;z.prototype.removeAllListener=z.prototype.removeEvent;z.prototype.trigger=z.prototype.emit}).call(this);
