(function(){function B(c){for(var e=-1,b=c.length,a=Array(b);++e<b;)a[e]=c[e];return a}function D(c,e){var b=-1,a=c.length-e;if(0>=a)return[];for(var d=Array(a);++b<a;)d[b]=c[b+e];return d}function L(c){for(var e=-1,b=c.length,a=[];++e<b;){var d=c[e];d&&(a[a.length]=d)}return a}function Ia(c){for(var e=-1,b=c.length,a=Array(b),d=b;++e<b;)a[--d]=c[e];return a}function ea(c,e,b){var a=-1,d=c.length;if(3===e.length)for(;++a<d;)e(c[a],a,C(b));else for(;++a<d;)e(c[a],C(b))}function fa(c,e,b,a){var d,f=
-1,g=a.length;if(3===e.length)for(;++f<g;)d=a[f],e(c[d],d,C(b));else for(;++f<g;)e(c[a[f]],C(b))}function ga(c,e,b){var a=-1,d=c.length;if(3===e.length)for(;++a<d;)e(c[a],a,b(a));else for(;++a<d;)e(c[a],b(a))}function U(c,e,b){var a,d=-1,f=c.length;if(3===e.length)for(;++d<f;)a=c[d],e(a,d,b(a));else for(;++d<f;)a=c[d],e(a,b(a))}function V(c,e,b,a){var d,f,g=-1,m=a.length;if(3===e.length)for(;++g<m;)d=a[g],f=c[d],e(f,d,b(f));else for(;++g<m;)f=c[a[g]],e(f,b(f))}function W(c,e,b){var a,d=-1,f=c.length;
if(3===e.length)for(;++d<f;)a=c[d],e(a,d,b(d,a));else for(;++d<f;)a=c[d],e(a,b(d,a))}function ha(c,e,b,a){var d,f,g=-1,m=a.length;if(3===e.length)for(;++g<m;)d=a[g],f=c[d],e(f,d,b(g,f));else for(;++g<m;)f=c[a[g]],e(f,b(g,f))}function G(c,e){for(var b=-1,a=c.length;++b<a;)e(c[b],b);return c}function X(c,e){for(var b=c.length;b--;)e(c[b],b);return c}function I(c,e,b){b=b||Object.keys(c);for(var a=-1,d=b.length;++a<d;){var f=b[a];e(c[f],f)}return c}function E(c,e){for(var b=-1;++b<c;)e(b)}function Ja(c,
e){for(var b=c.length,a=-1;++a<b;)if(!e(c[a]))return!1;return!0}function J(c){for(var e=c.length,b=-1,a=Array(e);++b<e;)a[b]=c[b];return a}function H(c){for(var e=Object.keys(c),b=e.length,a=-1,d={};++a<b;){var f=e[a];d[f]=c[f]}return d}function O(c,e){for(var b=-1,a=c.length,d=Array(a);++b<a;)d[b]=(c[b]||{})[e];return d}function Y(c,e){return c.criteria-e.criteria}function C(c){return function(e,b){null===c&&v();c(e,b);c=null}}function ia(){function c(b,c){var e=a.test(c)?0:d.test(c)?2:1,f=b.length;
g[c]=function(){var a=B(arguments),c=a[e];switch(c.length){case 1:a[e]=function(b){x.safeNextTick(function(){c(b)})};break;case 2:a[e]=function(b,a){x.safeNextTick(function(){c(b,a)})};break;case 3:a[e]=function(b,a,d){x.safeNextTick(function(){c(b,a,d)})};break;case 4:a[e]=function(b,a,d,e){x.safeNextTick(function(){c(b,a,d,e)})};break;default:a[e]=function(){var b=B(arguments);x.safeNextTick(function(){c.apply(null,b)})}}switch(f){case 2:return b(a[0],a[1]);case 3:return b(a[0],a[1],a[2]);case 4:return b(a[0],
a[1],a[2],a[3]);case 5:return b(a[0],a[1],a[2],a[3],a[4])}}}function e(b,a){function c(){function a(b){return"function"!==typeof b?b:function(){var a=B(arguments);x.safeNextTick(function(){b.apply(null,a)})}}var e=B(arguments),f=e[0];Array.isArray(f)?G(f,function(b,c){f[c]=a(b)}):f&&"object"===typeof f&&I(f,function(b,c){f[c]=a(b)});switch(d){case 2:b(e[0],e[1]);break;case 3:b(e[0],e[1],e[2])}}if(/^waterfall$/.test(a))g[a]=Ka;else{var d=b.length;g[a]=c}}var b=/^(each|foreach|map|filter|select|reject|detect|pick|reduce|inject|fold|transform|sortby|some|any|every|all|concat|times)|(whilst|until|during)$|^forever$/,
a=new RegExp(/^do|^forever$/),d=new RegExp(/^reduce|Limit$/),f=new RegExp(/^parallel|^(series|waterfall|auto)$/),g={};I(x,function(a,d){if("function"===typeof a){if(f.test(d))return e(a,d);if(b.test(d.toLowerCase()))return c(a,d)}g[d]=a});g.safe=ia;return g}function ja(c,e,b){return function(a,d,f){function g(a,c){return function(d){null===a&&v();!!d===b&&(k[a]=c);a=null;++n===l&&f(L(k))}}function m(a,c){return function(d,e){null===a&&v();d?(f(d,L(k)),f=u,a=null):(!!e===b&&(k[a]=c),a=null,++n===l&&
f(void 0,L(k)))}}f=f||u;var l,h,k,n=0,p=2===f.length,r=p?m:g;Array.isArray(a)?(l=a.length,k=Array(l),c(a,d,r)):a&&"object"===typeof a&&(h=Object.keys(a),l=h.length,k=Array(l),e(a,d,r,h));if(!l)return p?f(void 0,[]):f([])}}function ka(c){return function(e,b,a){function d(){p=e[w];b(p,F)}function f(){p=e[w];b(p,w,F)}function g(){n=r[w];p=e[n];b(p,F)}function m(){n=r[w];p=e[n];b(p,n,F)}function l(b){!!b===c&&(y[y.length]=p);++w>=k?(a(y),a=v):t?x.nextTick(q):q()}function h(b,d){b?(a(b,y),a=v):(!!d===
c&&(y[y.length]=p),++w>=k?(a(void 0,y),a=v):t?x.nextTick(q):q())}a=a||u;var k,n,p,r,q,t=!0,w=0,y=[],A=2===a.length,F=A?h:l;Array.isArray(e)?(k=e.length,q=3===b.length?f:d):e&&"object"===typeof e&&(r=Object.keys(e),k=r.length,q=3===b.length?m:g);if(!k)return A?a(void 0,[]):a([]);q();t=!1}}function la(c){return function(e,b,a,d){function f(){p=F++;p<n&&(q=e[p],a(q,C(q,p)))}function g(){p=F++;p<n&&(q=e[p],a(q,p,C(q,p)))}function m(){p=F++;p<n&&(q=e[t[p]],a(q,C(q,p)))}function l(){p=F++;p<n&&(r=t[p],
q=e[r],a(q,r,C(q,p)))}function h(a,b){return function(e){null===b&&v();!!e===c&&(y[b]=a);b=null;++z>=n?(d(L(y)),d=v):A?x.nextTick(w):w()}}function k(b,a){return function(e,f){null===a&&v();e?(d(e,L(y)),w=d=u,a=null):(!!f===c&&(y[a]=b),a=null,++z===n?(d(void 0,L(y)),d=v):A?x.nextTick(w):w())}}d=d||u;var n,p,r,q,t,w,y,A=!0,F=0,z=0,B=2===d.length,C=B?k:h;Array.isArray(e)?(n=e.length,w=3===a.length?g:f):e&&"object"===typeof e&&(t=Object.keys(e),n=t.length,w=3===a.length?l:m);if(!n||isNaN(b)||1>b)return B?
d(void 0,[]):d([]);y=Array(n);E(b>n?n:b,w);A=!1}}function M(c,e,b){function a(){e(c[r],m)}function d(){e(c[r],r,m)}function f(){e(c[k[r]],m)}function g(){h=k[r];e(c[h],h,m)}function m(a,c){a?b(a):++r>=l?(b(),b=v):!1===c?b():p?x.nextTick(n):(p=!0,n());p=!1}b=b||u;var l,h,k,n,p=!0,r=0;Array.isArray(c)?(l=c.length,n=3===e.length?d:a):c&&"object"===typeof c&&(k=Object.keys(c),l=k.length,n=3===e.length?g:f);if(!l)return b();n();p=!1}function P(c,e,b,a){function d(){t<h&&b(c[t++],l)}function f(){k=t++;
k<h&&b(c[k],k,l)}function g(){t<h&&b(c[p[t++]],l)}function m(){k=t++;k<h&&(n=p[k],b(c[n],n,l))}function l(b,c){b?(a(b),r=a=u):++w>=h?(a(),a=v):!1===c?(a(),a=u):q?x.nextTick(r):(q=!0,r());q=!1}a=a||u;var h,k,n,p,r,q=!1,t=0,w=0;if(Array.isArray(c))h=c.length,r=3===b.length?f:d;else if(c&&"object"===typeof c)p=Object.keys(c),h=p.length,r=3===b.length?m:g;else return a();if(!h||isNaN(e)||1>e)return a();E(e>h?h:e,r);q=!0}function ma(c,e,b){return function(a,d,f){function g(a){var c=!1;return function(d){c&&
v();c=!0;!!d===b?(f(a),f=u):++k===l&&(f(),f=v)}}function m(a){var c=!1;return function(d,e){c&&v();c=!0;d?(f(d),f=u):!!e===b?(f(void 0,a),f=u):++k===l&&(f(),f=v)}}f=f||u;var l,h,k=0,n=2===f.length?m:g;Array.isArray(a)?(l=a.length,c(a,d,n)):a&&"object"===typeof a&&(h=Object.keys(a),l=h.length,e(a,d,n,h));l||f()}}function na(c){return function(e,b,a){function d(){p=e[w];b(p,y)}function f(){p=e[w];b(p,w,y)}function g(){p=e[r[w]];b(p,y)}function m(){n=r[w];p=e[n];b(p,n,y)}function l(b){!!b===c?(a(p),
a=v):++w>=k?(a(),a=v):t?x.nextTick(q):(t=!0,q());t=!1}function h(b,d){b?(a(b),a=v):!!d===c?(a(void 0,p),a=v):++w>=k?(a(),a=v):t?x.nextTick(q):(t=!0,q());t=!1}a=a||u;var k,n,p,r,q,t=!0,w=0,y=2===a.length?h:l;Array.isArray(e)?(k=e.length,q=3===b.length?f:d):e&&"object"===typeof e&&(r=Object.keys(e),k=r.length,q=3===b.length?m:g);if(!k)return a();q();t=!1}}function oa(c){return function(e,b,a,d){function f(){p=A++;p<n&&(q=e[p],a(q,z(q)))}function g(){p=A++;p<n&&(q=e[p],a(q,p,z(q)))}function m(){p=A++;
p<n&&(q=e[t[p]],a(q,z(q)))}function l(){A<n&&(r=t[A++],q=e[r],a(q,r,z(q)))}function h(a){var b=!1;return function(e){b&&v();b=!0;!!e===c?(d(a),w=d=u):++F>=n?(d(),d=v):y?x.nextTick(w):(y=!0,w());y=!1}}function k(a){var b=!1;return function(e,f){b&&v();b=!0;e?(d(e),w=d=u):!!f===c?(d(void 0,a),d=u):++F>=n?(d(),d=v):y?x.nextTick(w):(y=!0,w());y=!1}}d=d||u;var n,p,r,q,t,w,y=!0,A=0,F=0,z=2===d.length?k:h;Array.isArray(e)?(n=e.length,w=3===a.length?g:f):e&&"object"===typeof e&&(t=Object.keys(e),n=t.length,
w=3===a.length?l:m);if(!n||isNaN(b)||1>b)return d();E(b>n?n:b,w);y=!1}}function Q(c,e,b,a){function d(a){n=c[t];b(a,n,l)}function f(a){n=c[t];b(a,n,t,l)}function g(a){k=p[t];n=c[k];b(a,n,l)}function m(a){k=p[t];n=c[k];b(a,n,k,l)}function l(b,c){b?(a(b,c),a=v):++t>=h?(a(void 0,c),a=v):q?x.nextTick(function(){r(c)}):(q=!0,r(c));q=!1}a=a||u;var h,k,n,p,r,q=!0,t=0;Array.isArray(c)?(h=c.length,r=4===b.length?f:d):c&&"object"===typeof c&&(p=Object.keys(c),h=p.length,r=4===b.length?m:g);if(!h)return a(void 0,
e);r(e);q=!1}function pa(c,e,b,a){function d(a){p=c[--h];b(a,p,l)}function f(a){k=--h;p=c[k];b(a,p,k,l)}function g(a){n=r[--h];p=c[n];b(a,p,l)}function m(a){n=r[--h];p=c[n];b(a,p,n,l)}function l(b,c){b?(a(b,c),a=v):0>=h?(a(void 0,c),a=v):t?x.nextTick(function(){q(c)}):(t=!0,q(c));t=!1}a=a||u;var h,k,n,p,r,q,t=!0;Array.isArray(c)?(h=c.length,q=4===b.length?f:d):c&&"object"===typeof c&&(r=Object.keys(c),h=r.length,q=4===b.length?m:g);if(!h)return a(void 0,e);q(e);t=!1}function qa(c,e,b){function a(a){b(!!a)}
function d(a,c){b(a,!!c)}b=b||u;ra(c,e,2===b.length?d:a)}function sa(c,e){function b(){g=n;c[n](d)}function a(){g=m[n];c[g](d)}function d(a,b){a?(e(a,l),h=e=v):(l[g]=2>=arguments.length?b:D(arguments,1),++n>=f?(e(void 0,l),e=v):k?x.nextTick(h):(k=!0,h()),k=!1)}e=e||u;var f,g,m,l,h,k=!0,n=0;if(Array.isArray(c))f=c.length,l=Array(f),h=b;else if(c&&"object"===typeof c)m=Object.keys(c),f=m.length,l={},h=a;else return e();if(!f)return e(void 0,l);h();k=!1}function Z(c,e,b){function a(){m=r++;if(m<g)c[m](f(m))}
function d(){r<g&&(l=h[r++],c[l](f(l)))}function f(a){return function(c,d){null===a&&v();c?(b(c,k),b=u,a=null):(k[a]=2>=arguments.length?d:D(arguments,1),a=null,++q>=g?b(void 0,k):p?x.nextTick(n):(p=!0,n()),p=!1)}}b=b||u;var g,m,l,h,k,n,p=!0,r=0,q=0;Array.isArray(c)?(g=c.length,k=Array(g),n=a):c&&"object"===typeof c&&(h=Object.keys(c),g=h.length,k={},n=d);if(!g||isNaN(e)||1>e)return b(void 0,k);E(e>g?g:e,n);p=!1}function aa(c,e){return Array.isArray(c)?0===c.length?(e(),!1):!0:(e(Error("First argument to waterfall must be an array of functions")),
!1)}function Ka(c,e){function b(g){function m(c){a&&v();a=!0;if(c)e(c);else if(++g>=d)e.apply(null,B(arguments));else{f=arguments;x.safeNextTick(function(){b(g)});return}e=b=v}a=!1;var l=c[g];switch(f.length){case 0:case 1:return l(m);case 2:return l(f[1],m);case 3:return l(f[1],f[2],m);case 4:return l(f[1],f[2],f[3],m);case 5:return l(f[1],f[2],f[3],f[4],m);case 6:return l(f[1],f[2],f[3],f[4],f[5],m);default:return f=D(f,1),f.push(m),l.apply(null,f)}}e=e||u;if(aa(c,e)){var a,d=c.length,f=[];b(0)}}
function ta(c,e){function b(){switch(m.length){case 1:return m(a);case 2:return m(l[1],a);case 3:return m(l[1],l[2],a);case 4:return m(l[1],l[2],l[3],a);case 5:return m(l[1],l[2],l[3],l[4],a);default:return l=D(l,1),l[m.length-1]=a,m.apply(null,l)}}function a(a){a?(e(a),e=v):++d>=g?(e.apply(null,B(arguments)),e=v):(m=c[d],l=arguments,f?x.nextTick(b):(f=!0,b()),f=!1)}e=e||u;if(aa(c,e)){var d=0,f=!0,g=c.length,m=c[d],l=[];b();f=!1}}function ua(){var c=B(arguments);return function(){var e=this,b=B(arguments),
a=b.pop();Q(c,b,function(a,b,c){a.push(function(a){var b=D(arguments,1);c(a,b)});b.apply(e,a)},function(b,c){c=Array.isArray(c)?c:[c];c.unshift(b);a.apply(e,c)})}}function va(c){return function(e){var b=function(){var a=this,b=B(arguments),g=b.pop()||u;return c(e,function(c,e){c.apply(a,b.concat([e]))},g)};if(1<arguments.length){var a=D(arguments,1);return b.apply(this,a)}return b}}function wa(c,e){function b(a,b,c){function e(a){var b=d.tasks,c=b.length;if(!c)return 0;for(var f=-1;++f<c&&!(a<b[f].priority););
return f}d.started=!0;var h=Array.isArray(a)?a:[a];if(void 0!==a&&h.length){c="function"===typeof c?c:u;var k=e(b);G(h,function(a){a={task:a,priority:b,callback:c};d.tasks.splice(k++,0,a);"function"===typeof d.saturated&&d.length()===d.concurrency&&d.saturated();x.nextTick(d.process)})}else d.idle()&&x.nextTick(function(){"function"===typeof d.drain&&d.drain()})}if(void 0===e)e=1;else if(isNaN(e)||1>e)throw Error("concurrency must be more than 1");var a=0,d={tasks:[],concurrency:e,saturated:u,empty:u,
drain:u,started:!1,paused:!1,push:function(a,c,d){b(a,c,d)},kill:function(){d.drain=u;d.tasks=[]},process:function(){function b(){a--;c.callback&&c.callback.apply(c,B(arguments));"function"===typeof d.drain&&d.idle()&&d.drain();d.process()}if(!(d.paused||a>=d.concurrency)&&d.length()){var c=d.tasks.shift();"function"!==typeof d.empty||d.length()||d.empty();a++;d._worker(c.task,C(b))}},length:function(){return d.tasks.length},running:function(){return a},idle:function(){return 0===d.length()+a},pause:function(){d.paused=
!0},resume:function(){!1!==d.paused&&(d.paused=!1,E(d.concurrency,function(){x.setImmediate(d.process)}))},_worker:c};return d}function xa(c,e,b){function a(){e(m,d)}function d(d,e){f[m]=e;d?(b(d),b=v):++m>=c?(b(void 0,f),b=v):g?x.nextTick(a):(g=!0,a());g=!1}b=b||u;c=+c;if(isNaN(c)||1>c)return b(void 0,[]);var f=Array(c),g=!0,m=0;a();g=!1}function ya(c){return function(){var e=B(arguments),b=e.pop(),a;try{a=c.apply(this,e)}catch(d){return b(d)}if("object"===typeof a&&"function"===typeof a.then)a.then(function(a){b(null,
a)})["catch"](b);else b(null,a)}}function ba(c){function e(b){if(R[typeof console])if(b)console.error&&console.error(b);else if(console[c]){var a=D(arguments,1);G(a,function(a){console[c](a)})}}return function(b){var a=D(arguments,1);a.push(e);b.apply(null,a)}}function z(c,e){this._emitter=c||sa;this._limit=e||4;this._events={};this._runing={};this._queue={}}function za(c){c=c||u;if(c.ONCE===ca)return c;var e=function(b){if(c.length)return c(b);c();b()};e.func=c;return e}function Aa(c){c=c||u;var e=
function(b){if(c.length)return c(b);c();b()};e.func=c;e.ONCE=ca;return e}var K=this,La=K&&K.async,u=function(){},v=function(){throw Error("Callback was already called.");},R={"function":!0,object:!0},S,da,T;(function(){var c=function(c){setTimeout(c,0)};T="function"===typeof setImmediate?setImmediate:c;"object"===typeof process&&"function"===typeof process.nextTick?(S=process.nextTick,da=/^v0.10/.test(process.version)?T:S):S=da=T})();var N=function(c,e){return function(b,a,d){function f(a,b){a?(d(a),
d=u):++l===g?d():!1===b&&(d(),d=u)}d=d||u;var g,m,l=0;Array.isArray(b)?(g=b.length,c(b,a,f)):b&&"object"===typeof b&&(m=Object.keys(b),g=m.length,e(b,a,f,m));g||d()}}(ea,fa),Ma=function(c,e){return function(b,a,d){function f(a){return function(b,c){null===a&&v();l[a]=c;a=null;b?(d(b,J(l)),d=u):++h===g&&d(void 0,l)}}d=d||u;var g,m,l,h=0;Array.isArray(b)?(g=b.length,l=Array(g),c(b,a,f)):b&&"object"===typeof b&&(m=Object.keys(b),g=m.length,l=Array(g),e(b,a,f,m));g||d(void 0,[])}}(ga,function(c,e,b,a){var d,
f=-1,g=a.length;if(3===e.length)for(;++f<g;)d=a[f],e(c[d],d,b(f));else for(;++f<g;)e(c[a[f]],b(f))}),Na=function(c,e){return function(b,a,d){function f(a){return function(b,c){null===a&&v();h[a]=c;a=null;b?(d(b,H(h)),d=u):++l===g&&(d(void 0,h),d=v)}}d=d||u;var g,m,l=0,h={};Array.isArray(b)?(g=b.length,c(b,a,f)):b&&"object"===typeof b&&(m=Object.keys(b),g=m.length,e(b,a,f,m));g||d(void 0,h)}}(ga,function(c,e,b,a){var d,f=-1,g=a.length;if(3===e.length)for(;++f<g;)d=a[f],e(c[d],d,b(d));else for(;++f<
g;)d=a[f],e(c[d],b(d))}),Ba=ja(W,ha,!0),Ca=ka(!0),Da=la(!0),Oa=ja(W,ha,!1),Pa=ka(!1),Qa=la(!1),ra=ma(U,V,!0),Ea=na(!0),Fa=oa(!0),Ga=function(c,e){var b=ma(c,e,!1);return function(a,c,e){function g(a){e(!a)}function m(a,b){e(a,!b)}e=e||u;b(a,c,2===e.length?m:g)}}(U,V),Ra=function(){var c=na(!1);return function(e,b,a){function d(b){a(!b)}function f(b,c){a(b,!c)}a=a||u;c(e,b,2===a.length?f:d)}}(),Sa=function(){var c=oa(!1);return function(e,b,a,d){function f(a){d(!a)}function g(a,b){d(a,!b)}d=d||u;c(e,
b,a,2===d.length?g:f)}}(),Ta=function(c,e){return function(b,a,d){function f(a,b){return function(c){null===a&&v();c&&(k[a]=b);a=null;++h===m&&d(k)}}function g(a,b){return function(c,e){null===a&&v();c?(d(c,H(k)),d=u,a=null):(e&&(k[a]=b),a=null,++h===m&&(d(void 0,k),d=v))}}d=d||u;var m,l,h=0,k={},n=2===d.length,p=n?g:f;Array.isArray(b)?(m=b.length,c(b,a,p)):b&&"object"===typeof b&&(l=Object.keys(b),m=l.length,e(b,a,p,l));if(!m)return n?d(void 0,{}):d({})}}(W,function(c,e,b,a){var d,f,g=-1,m=a.length;
if(3===e.length)for(;++g<m;)d=a[g],f=c[d],e(f,d,b(d,f));else for(;++g<m;)d=a[g],f=c[d],e(f,b(d,f))}),Ua=function(c,e){return function(b,a,d,f){function g(a,b){a?(d(a,Array.isArray(h)?J(h):H(h)),d=u):++k===m?d(void 0,h):!1===b&&(d(void 0,Array.isArray(h)?J(h):H(h)),d=u)}d=d||u;var m,l,h,k=0;Array.isArray(b)?(m=b.length,h=void 0!==f?f:[],c(b,h,a,g)):b&&"object"===typeof b&&(l=Object.keys(b),m=l.length,h=void 0!==f?f:{},e(b,h,a,g,l));m||d(void 0,void 0!==f?f:h||{})}}(function(c,e,b,a){var d=-1,f=c.length;
if(4===b.length)for(;++d<f;)b(e,c[d],d,C(a));else for(;++d<f;)b(e,c[d],C(a))},function(c,e,b,a,d){var f,g=-1,m=d.length;if(4===b.length)for(;++g<m;)f=d[g],b(e,c[f],f,C(a));else for(;++g<m;)b(e,c[d[g]],C(a))}),Va=function(c,e){return function(b,a,d){function f(a){var b=!1;return function(c,e){b&&v();b=!0;m[l]={value:a,criteria:e};c?(d(c),d=u):++l===g&&(m.sort(Y),d(void 0,O(m,"value")),d=v)}}d=d||u;var g,m,l=0;if(Array.isArray(b))g=b.length,m=Array(g),c(b,a,f);else if(b&&"object"===typeof b){var h=
Object.keys(b);g=h.length;m=Array(g);e(b,a,f,h)}g||d(void 0,[])}}(U,V),Wa=function(c,e){return function(b,a,d){function f(a,b){b&&Array.prototype.push.apply(l,Array.isArray(b)?b:[b]);a?(d(a,J(l)),d=u):++m===g&&d(void 0,l)}d=d||u;var g,m=0,l=[];if(Array.isArray(b))g=b.length,c(b,a,f);else if(b&&"object"===typeof b){var h=Object.keys(b);g=h.length;e(b,a,f,h)}g||d(void 0,l)}}(ea,fa),Ha=function(c,e){return function(b,a){function d(b){return function(c,d){null===b&&v();c?(a(c,m),a=u,b=null):(m[b]=2>=
arguments.length?d:D(arguments,1),b=null,++l===f&&(a(void 0,m),a=v))}}a=a||u;var f,g,m,l=0;Array.isArray(b)?(f=b.length,m=Array(f),c(b,d)):b&&"object"===typeof b&&(g=Object.keys(b),f=g.length,m={},e(b,d,g));f||a(void 0,m)}}(function(c,e){for(var b=-1,a=c.length;++b<a;)c[b](e(b))},function(c,e,b){for(var a,d=-1,f=b.length;++d<f;)a=b[d],c[a](e(a))}),x={VERSION:"1.4.1",each:N,eachSeries:M,eachLimit:P,forEach:N,forEachSeries:M,forEachLimit:P,eachOf:N,eachOfSeries:M,eachOfLimit:P,forEachOf:N,forEachOfSeries:M,
forEachOfLimit:P,map:Ma,mapSeries:function(c,e,b){function a(){e(c[q],m)}function d(){e(c[q],q,m)}function f(){e(c[k[q]],m)}function g(){h=k[q];e(c[h],h,m)}function m(a,c){n[q]=c;a?(b(a,J(n)),b=v):++q>=l?(b(void 0,n),b=v):r?x.nextTick(p):(r=!0,p());r=!1}b=b||u;var l,h,k,n,p,r=!0,q=0;Array.isArray(c)?(l=c.length,p=3===e.length?d:a):c&&"object"===typeof c&&(k=Object.keys(c),l=k.length,p=3===e.length?g:f);if(!l)return b(void 0,[]);n=Array(l);p();r=!1},mapLimit:function(c,e,b,a){function d(){k=w++;k<
h&&b(c[k],l(k))}function f(){k=w++;k<h&&b(c[k],k,l(k))}function g(){k=w++;k<h&&b(c[p[k]],l(k))}function m(){k=w++;k<h&&(n=p[k],b(c[n],n,l(k)))}function l(b){return function(c,d){null===b&&v();r[b]=d;b=null;c?(a(c,J(r)),q=a=u):++y>=h?(a(void 0,r),a=v):t?x.nextTick(q):(t=!0,q());t=!1}}a=a||u;var h,k,n,p,r,q,t=!0,w=0,y=0;Array.isArray(c)?(h=c.length,q=3===b.length?f:d):c&&"object"===typeof c&&(p=Object.keys(c),h=p.length,q=3===b.length?m:g);if(!h||isNaN(e)||1>e)return a(void 0,[]);r=Array(h);E(e>h?h:
e,q);t=!1},mapValues:Na,mapValuesSeries:function(c,e,b){function a(){h=q;e(c[q],m)}function d(){h=q;e(c[q],q,m)}function f(){h=k[q];e(c[h],m)}function g(){h=k[q];e(c[h],h,m)}function m(a,c){r[h]=c;a?(b(a,H(r)),b=v):++q>=l?(b(void 0,r),b=v):p?x.nextTick(n):(p=!0,n());p=!1}b=b||u;var l,h,k,n,p=!0,r={},q=0;Array.isArray(c)?(l=c.length,n=3===e.length?d:a):c&&"object"===typeof c&&(k=Object.keys(c),l=k.length,n=3===e.length?g:f);if(!l)return b(void 0,r);n();p=!1},mapValuesLimit:function(c,e,b,a){function d(){k=
w++;k<h&&b(c[k],l(k))}function f(){k=w++;k<h&&b(c[k],k,l(k))}function g(){k=w++;k<h&&(n=p[k],b(c[n],l(n)))}function m(){k=w++;k<h&&(n=p[k],b(c[n],n,l(n)))}function l(b){return function(c,d){null===b&&v();t[b]=d;b=null;c?(a(c,H(t)),r=a=u):++y>=h?(a(void 0,t),a=v):q?x.nextTick(r):(q=!0,r());q=!1}}a=a||u;var h,k,n,p,r,q=!0,t={},w=0,y=0;Array.isArray(c)?(h=c.length,r=3===b.length?f:d):c&&"object"===typeof c&&(p=Object.keys(c),h=p.length,r=3===b.length?m:g);if(!h||isNaN(e)||1>e)return a(void 0,t);E(e>
h?h:e,r);q=!1},filter:Ba,filterSeries:Ca,filterLimit:Da,select:Ba,selectSeries:Ca,selectLimit:Da,reject:Oa,rejectSeries:Pa,rejectLimit:Qa,detect:ra,detectSeries:Ea,detectLimit:Fa,pick:Ta,pickSeries:function(c,e,b){function a(){k=w;n=c[w];e(n,A)}function d(){k=w;n=c[w];e(n,w,A)}function f(){k=p[w];n=c[k];e(n,A)}function g(){k=p[w];n=c[k];e(n,k,A)}function m(a){a&&(t[k]=n);++w>=h?(b(t),b=v):q?x.nextTick(r):(q=!0,r());q=!1}function l(a,c){a?(b(a,t),b=v):(c&&(t[k]=n),++w>=h?(b(void 0,t),b=v):q?x.nextTick(r):
(q=!0,r()),q=!1)}b=b||u;var h,k,n,p,r,q=!0,t={},w=0,y=2===b.length,A=y?l:m;Array.isArray(c)?(h=c.length,r=3===e.length?d:a):c&&"object"===typeof c&&(p=Object.keys(c),h=p.length,r=3===e.length?g:f);if(!h)return y?b(void 0,{}):b({});r();q=!1},pickLimit:function(c,e,b,a){function d(){n=A++;n<k&&(r=c[n],b(r,B(r,n)))}function f(){n=A++;n<k&&(r=c[n],b(r,n,B(r,n)))}function g(){A<k&&(p=q[A++],r=c[p],b(r,B(r,p)))}function m(){A<k&&(p=q[A++],r=c[p],b(r,p,B(r,p)))}function l(b,c){return function(d){null===
c&&v();d&&(y[c]=b);c=null;++z>=k?(a(y),a=v):w?x.nextTick(t):(w=!0,t());w=!1}}function h(b,c){return function(d,e){null===c&&v();d?(a(d,H(y)),t=a=u,c=null):(e&&(y[c]=b),c=null,++z>=k?(a(void 0,y),a=v):w?x.nextTick(t):(w=!0,t()),w=!1)}}a=a||u;var k,n,p,r,q,t,w=!0,y={},A=0,z=0,C=2===a.length,B=C?h:l;Array.isArray(c)?(k=c.length,t=3===b.length?f:d):c&&"object"===typeof c&&(q=Object.keys(c),k=q.length,t=3===b.length?m:g);if(!k||isNaN(e)||1>e)return C?a(void 0,{}):a({});E(e>k?k:e,t);w=!1},reduce:Q,inject:Q,
foldl:Q,reduceRight:pa,foldr:pa,transform:Ua,transformSeries:function(c,e,b,a){function d(){e(r,c[t],l)}function f(){e(r,c[t],t,l)}function g(){e(r,c[n[t]],l)}function m(){k=n[t];e(r,c[k],k,l)}function l(a,c){a?(b(a,r),b=v):++t>=h?(b(void 0,r),b=v):!1===c?(b(void 0,r),b=v):q?x.nextTick(p):(q=!0,p());q=!1}b=b||u;var h,k,n,p,r,q=!0,t=0;Array.isArray(c)?(h=c.length,r=void 0!==a?a:[],p=4===e.length?f:d):c&&"object"===typeof c&&(n=Object.keys(c),h=n.length,r=void 0!==a?a:{},p=4===e.length?m:g);if(!h)return b(void 0,
void 0!==a?a:r||{});p();q=!1},transformLimit:function(c,e,b,a,d){function f(){n=y++;n<k&&b(t,c[n],C(h))}function g(){n=y++;n<k&&b(t,c[n],n,C(h))}function m(){n=y++;n<k&&b(t,c[r[n]],C(h))}function l(){n=y++;n<k&&(p=r[n],b(t,c[p],p,C(h)))}function h(b,c){b?(a(b,Array.isArray(t)?J(t):H(t)),q=a=u):++A>=k?(a(void 0,t),a=v):!1===c?(a(void 0,Array.isArray(t)?J(t):H(t)),q=a=u):w?x.nextTick(q):(w=!0,q());w=!1}a=a||u;var k,n,p,r,q,t,w=!0,y=0,A=0;Array.isArray(c)?(k=c.length,t=void 0!==d?d:[],q=4===b.length?
g:f):c&&"object"===typeof c&&(r=Object.keys(c),k=r.length,t=void 0!==d?d:{},q=4===b.length?l:m);if(!k||isNaN(e)||1>e)return a(void 0,void 0!==d?d:t||{});E(e>k?k:e,q);w=!1},sortBy:Va,sortBySeries:function(c,e,b){function a(){k=c[t];e(k,m)}function d(){k=c[t];e(k,t,m)}function f(){k=c[n[t]];e(k,m)}function g(){h=n[t];k=c[h];e(k,h,m)}function m(a,c){p[t]={value:k,criteria:c};a?(b(a),b=v):++t>=l?(p.sort(Y),b(void 0,O(p,"value")),b=v):q?x.nextTick(r):(q=!0,r());q=!1}b=b||u;var l,h,k,n,p,r,q=!0,t=0;Array.isArray(c)?
(l=c.length,r=3===e.length?d:a):c&&"object"===typeof c&&(n=Object.keys(c),l=n.length,r=3===e.length?g:f);if(!l)return b(void 0,[]);p=Array(l);r();q=!1},sortByLimit:function(c,e,b,a){function d(){y<h&&(p=c[y++],b(p,l(p)))}function f(){k=y++;k<h&&(p=c[k],b(p,k,l(p)))}function g(){y<h&&(p=c[r[y++]],b(p,l(p)))}function m(){y<h&&(n=r[y++],p=c[n],b(p,n,l(p)))}function l(b){var c=!1;return function(d,e){c&&v();c=!0;q[A]={value:b,criteria:e};d?(a(d),t=a=u):++A>=h?(q.sort(Y),a(void 0,O(q,"value")),a=v):w?
x.nextTick(t):(w=!0,t());w=!1}}a=a||u;var h,k,n,p,r,q,t,w=!1,y=0,A=0;Array.isArray(c)?(h=c.length,t=3===b.length?f:d):c&&"object"===typeof c&&(r=Object.keys(c),h=r.length,t=3===b.length?m:g);if(!h||isNaN(e)||1>e)return a(void 0,[]);q=Array(h);E(e>h?h:e,t)},some:qa,someSeries:function(c,e,b){function a(a){b(!!a)}function d(a,c){b(a,!!c)}b=b||u;Ea(c,e,2===b.length?d:a)},someLimit:function(c,e,b,a){function d(b){a(!!b)}function f(b,c){a(b,!!c)}a=a||u;Fa(c,e,b,2===a.length?f:d)},any:qa,every:Ga,all:Ga,
everySeries:Ra,everyLimit:Sa,concat:Wa,concatSeries:function(c,e,b){function a(){e(c[q],m)}function d(){e(c[q],q,m)}function f(){e(c[k[q]],m)}function g(){h=k[q];e(c[h],h,m)}function m(a,c){c&&Array.prototype.push.apply(r,Array.isArray(c)?c:[c]);a?(b(a,r),b=v):++q>=l?(b(void 0,r),b=v):p?x.nextTick(n):(p=!0,n());p=!1}b=b||u;var l,h,k,n,p=!0,r=[],q=0;Array.isArray(c)?(l=c.length,n=3===e.length?d:a):c&&"object"===typeof c&&(k=Object.keys(c),l=k.length,n=3===e.length?g:f);if(!l)return b(void 0,r);n();
p=!1},concatLimit:function(c,e,b,a){function d(){t<k&&b(c[t++],C(l))}function f(){n=t++;n<k&&b(c[n],n,C(l))}function g(){t<k&&b(c[y[t++]],C(l))}function m(){t<k&&(p=y[t++],b(c[p],p,C(l)))}function l(b,c){c&&Array.prototype.push.apply(h,Array.isArray(c)?c:[c]);b?(a(b,h),a=u):++w>=k?(a(void 0,h),a=v):q?x.nextTick(r):(q=!0,r());q=!1}a=a||u;var h=[],k,n,p,r,q=!0,t=0,w=0;if(Array.isArray(c))k=c.length,r=3===b.length?f:d;else if(c&&"object"===typeof c){var y=Object.keys(c);k=y.length;r=3===b.length?m:g}if(!k||
isNaN(e)||1>e)return a(void 0,h);E(e>k?k:e,r);q=!1},parallel:Ha,series:sa,parallelLimit:Z,waterfall:function(c,e){function b(){f=!1;switch(h.length){case 0:case 1:return l(a);case 2:return l(h[1],a);case 3:return l(h[1],h[2],a);case 4:return l(h[1],h[2],h[3],a);case 5:return l(h[1],h[2],h[3],h[4],a);case 6:return l(h[1],h[2],h[3],h[4],h[5],a);default:return h=D(h,1),h.push(a),l.apply(null,h)}}function a(a){f&&v();a?(e(a),e=v):(f=!0,++d>=m?(e.apply(null,B(arguments)),e=v):(l=c[d],h=arguments,g?x.nextTick(b):
(g=!0,b()),g=!1))}e=e||u;if(aa(c,e)){var d=0,f=!1,g=!0,m=c.length,l=c[d],h=[];b();g=!1}},angelFall:ta,angelfall:ta,whilst:function(c,e,b){function a(){c()?e(function(c){if(c)return b(c);d?x.nextTick(a):(d=!0,a());d=!1}):b()}b=b||u;var d=!0;a();d=!1},doWhilst:function(c,e,b){function a(){c(function(c,g){if(c)return b(c);(2>=arguments.length?e(g):e.apply(null,D(arguments,1)))?(d?x.nextTick(a):(d=!0,a()),d=!1):b()})}b=b||u;var d=!0;a();d=!1},until:function(c,e,b){function a(){c()?b():e(function(c){if(c)return b(c);
d?x.nextTick(a):(d=!0,a());d=!1})}b=b||u;var d=!0;a();d=!1},doUntil:function(c,e,b){function a(){c(function(c,g){if(c)return b(c);(2>=arguments.length?e(g):e.apply(null,D(arguments,1)))?b():(d?x.nextTick(a):(d=!0,a()),d=!1)})}b=b||u;var d=!0;a();d=!1},during:function(c,e,b){function a(a,c){if(a)return b(a);c?e(d):b()}function d(d){if(d)return b(d);c(a)}b=b||u;c(a)},doDuring:function(c,e,b){function a(a,e){if(a)return b(a);e?c(d):b()}function d(c,d){if(c)return b(c);switch(arguments.length){case 0:case 1:e(a);
break;case 2:e(d,a);break;default:var m=D(arguments,1);m.push(a);e.apply(null,m)}}b=b||u;a(null,!0)},forever:function(c,e){function b(){c(a)}function a(a){if(a){if(e)return e(a);throw a;}d?x.nextTick(b):(d=!0,b());d=!1}var d=!0;b();d=!1},compose:function(){return ua.apply(null,Ia(arguments))},seq:ua,applyEach:va(N),applyEachSeries:va(M),queue:function(c,e){function b(b,c,e){a.started=!0;var m=Array.isArray(b)?b:[b];void 0!==b&&m.length?(c="function"===typeof c?c:null,G(m,function(b){b={task:b,callback:c};
e?a.tasks.unshift(b):a.tasks.push(b);"function"===typeof a.saturated&&a.length()===a.concurrency&&a.saturated();x.nextTick(a.process)})):a.idle()&&x.nextTick(function(){"function"===typeof a.drain&&a.drain()})}var a=wa(c,e);a.unshift=function(a,c){b(a,c,!0)};a.push=function(a,c){b(a,c)};return a},priorityQueue:wa,cargo:function(c,e){var b=!1,a={tasks:[],payload:e,saturated:u,empty:u,drain:u,drained:!0,push:function(b,c){b=Array.isArray(b)?b:[b];c="function"===typeof c?c:u;G(b,function(b){a.tasks.push({data:b,
callback:c});a.drained=!1;"function"===typeof a.saturated&&a.length()===a.payload&&a.saturated()});x.nextTick(a.process)},process:function(){if(!b)if(a.length()){var d="number"===typeof a.payload?a.tasks.splice(0,e):a.tasks,f=O(d,"data");a.length()||"function"!==typeof a.empty||a.empty();b=!0;c(f,function(){b=!1;var c=B(arguments);G(d,function(a){a.callback&&a.callback.apply(null,c)});a.process()})}else"function"!==typeof a.drain||a.drained||a.drain(),a.drained=!0},length:function(){return a.tasks.length},
running:function(){return b}};return a},auto:function(c,e){function b(a){g.unshift(a)}function a(){f--;G(g.slice(0),function(a){a()})}e=e?C(e):u;var d=Object.keys(c),f=d.length;if(!f)return e();var g=[],m={};b(function(){f||e(void 0,m)});I(c,function(c,d){function f(b){var c=D(arguments,1);1>=c.length&&(c=c[0]);if(b){var g=H(m);g[d]=c;e(b,g);e=u}else m[d]=c,x.nextTick(a)}function n(){return!m.hasOwnProperty(d)&&Ja(q,function(a){return m.hasOwnProperty(a)})}function p(){if(n()){var a;a:{a=-1;for(var c=
g.length;++a<c;)if(g[a]===p)break a;a=void 0}0<=a&&g.splice(a,1);t(f,m)}}c=Array.isArray(c)?c:[c];var r=c.length,q=c.slice(0,r-1),t=c[r-1];if(n())return t(f,m);b(p)},d)},retry:function(c,e,b){function a(a,f){b=a||b||u;var g,m;xa(c,function(a,b){e(function(d,e){g=d;m=e;if(!d)return b(!0);b(d&&a===c-1)},f)},function(){b(g,m)})}"function"===typeof c&&(b=e,e=c,c=5);c=parseInt(c,10)||5;return"function"===typeof b?a():a},iterator:function(c){function e(d){var f=function(){b&&c[a[d]||d].apply(null,B(arguments));
return f.next()};f.next=function(){return d<b-1?e(d+1):null};return f}var b=0,a=[];Array.isArray(c)?b=c.length:(a=Object.keys(c),b=a.length);return e(0)},apply:function(c){var e=D(arguments,1);return function(){return c.apply(this,e.concat(B(arguments)))}},nextTick:S,safeNextTick:da,setImmediate:T,times:function(c,e,b){function a(a){return function(e,m){null===a&&v();d[a]=m;a=null;e?(b(e),b=u):0===--c&&b(void 0,d)}}b=b||u;c=+c;if(isNaN(c)||1>c)return b(void 0,[]);var d=Array(c);E(c,function(b){e(b,
a(b))})},timesSeries:xa,timesLimit:function(c,e,b,a){function d(){var a=l++;a<c&&b(a,f(a))}function f(b){return function(e,f){null===b&&v();g[b]=f;b=null;e?(a(e),a=u):++h>=c?(a(void 0,g),a=v):m?x.nextTick(d):(m=!0,d());m=!1}}a=a||u;c=+c;if(isNaN(c)||1>c||isNaN(e)||1>e)return a(void 0,[]);var g=Array(c),m=!0,l=0,h=0;E(e>c?c:e,d);m=!1},memoize:function(c,e){e=e||function(a){return a};var b={},a={},d=function(){function d(){var c=B(arguments);b[l]=c;var e=a[l];delete a[l];for(var f=-1,g=e.length;++f<
g;)e[f].apply(null,c)}var g=B(arguments),m=g.pop(),l=e.apply(null,g);if(b.hasOwnProperty(l))x.nextTick(function(){m.apply(null,b[l])});else{if(a.hasOwnProperty(l))return a[l].push(m);a[l]=[m];g.push(d);c.apply(null,g)}};d.memo=b;d.unmemoized=c;return d},unmemoize:function(c){return function(){return(c.unmemoized||c).apply(null,arguments)}},ensureAsync:function(c){return function(){var e=!0,b=B(arguments),a=b.pop();b.push(function(){var b=arguments;e?x.safeNextTick(function(){a.apply(null,b)}):a.apply(null,
b)});c.apply(this,b);e=!1}},constant:function(){var c=[null].concat(B(arguments));return function(e){e.apply(this,c)}},asyncify:ya,wrapSync:ya,log:ba("log"),dir:ba("dir"),createLogger:ba,noConflict:function(){K.async=La;return x},eventEmitter:function(c){c=c||{};var e=c.limit;return c.parallel&&!e?new z(Ha):c.parallel||c.parallelLimit?new z(Z,e):new z(c.emitter)},EventEmitter:z,safe:void 0};x.safe=ia();R[typeof define]&&define&&define.amd?define([],function(){return x}):R[typeof module]&&module&&
module.exports?module.exports=x:K&&R[typeof K.async]?K.neo_async=x:K.async=x;var ca={__ONCE__:!0};z.prototype.getListeners=function(c){function e(a){a=a||[];var b=Array(a.length);G(a,function(a,c){b[c]=a.func});return b}var b=this._events;if(c)return e(b[c]);var a={};I(b,function(b,c){a[c]=e(b)});return a};z.prototype.addListener=function e(b,a){var d=this;if("object"===typeof b)return I(b,function(a,b){e.call(d,b,a)}),d;if(d.running(b))return d.queue(b,"addListener",a);d._events[b]=d._events[b]||
[];Array.isArray(a)?G(a,function(a){d._events[b].push(za(a))}):d._events[b].push(za(a));return d};z.prototype.addOnceListener=function b(a,d){var f=this;if("object"===typeof a)return I(a,function(a,d){b.call(f,d,a)}),f;Array.isArray(d)?G(d,function(a,b){d[b]=Aa(a)}):d=Aa(d);return f.addListener(a,d)};z.prototype.removeListener=function a(d,f){var g=this;if("object"===typeof d)return I(d,function(d,f){a.call(g,f,d)}),g;if(g.running(d))return g.queue(d,"removeListener",f);var m=g._events[d]||[];if(!m.length)return g;
if(Array.isArray(f))return X(f,function(f){a.call(g,f,d)}),g;X(m,function(a,d){a.func===f&&m.splice(d,1)});return g};z.prototype.removeEvent=function d(f){var g=this;if(!f)return I(g._events,function(f,l){d.call(g,l)}),g;(g._events[f]||[]).length&&delete g._events[f];return g};z.prototype.running=function(d){return this._runing[d]};z.prototype.queue=function(d,f,g,m){this._queue[d]=this._queue[d]||[];this._queue[d].push([f,g,m]);return this};z.prototype.resolve=function(d){if(this._runing[d])return this;
var f=this._queue[d]||[];if(!f.length)return this;f=f.shift();this[f[0]](d,f[1],f[2]);return this.resolve(d)};z.prototype.emit=function(d,f,g){function m(g,k){g?f(g):(X(h,function(d,f){d.ONCE===ca&&h.splice(f,1)}),f(void 0,k));l._runing[d]=!1;l.resolve(d)}f=f||u;var l=this;if(l.running(d))return l.queue(d,"emit",f,g);var h=l._events[d]||[];if(!h.length)return f(),l;l._runing[d]=!0;var k=l._emitter,k=g?k.bind(g):k;k===Z?k(h,l._limit,m):k(h,m);return l};z.prototype.on=z.prototype.addListener;z.prototype.once=
z.prototype.addOnceListener;z.prototype.off=z.prototype.removeListener;z.prototype.removeAllListener=z.prototype.removeEvent;z.prototype.trigger=z.prototype.emit}).call(this);
