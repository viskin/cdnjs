define(function(){var pattern={};var DELIM_SIZE=4;var regexp=new RegExp("{{([^}]+)}}","g");var getMatches=function(pattern){var matches=[],match;while(match=regexp.exec(pattern)){matches.push(match)}return matches};pattern.parse=function(pattern){var info={inpts:{},chars:{}};var matches=getMatches(pattern),pLength=pattern.length;var mCount=0,iCount=0,i=0;var processMatch=function(val){var valLength=val.length;for(var j=0;j<valLength;j++){info.inpts[iCount]=val.charAt(j);iCount++}mCount++;i+=val.length+DELIM_SIZE-1};for(i;i<pLength;i++){if(mCount<matches.length&&i===matches[mCount].index){processMatch(matches[mCount][1])}else{info.chars[i-mCount*DELIM_SIZE]=pattern.charAt(i)}}info.mLength=i-mCount*DELIM_SIZE;return info};return pattern});
