var pattern=require("pattern");var utils=require("utils");var parseMatcher=function(matcher){if(matcher==="*"){return/.*/}return new RegExp(matcher)};function patternMatcher(patternSpec){var matchers=[],patterns=[];utils.forEach(patternSpec,function(patternMatcher){utils.forEach(patternMatcher,function(patternStr,matcherStr){var parsedPattern=pattern.parse(patternStr),regExpMatcher=parseMatcher(matcherStr);matchers.push(regExpMatcher);patterns.push(parsedPattern);return false})});var getPattern=function(input){var matchedIndex;utils.forEach(matchers,function(matcher,index){if(matcher.test(input)){matchedIndex=index;return false}});return matchedIndex===undefined?null:patterns[matchedIndex]};return{getPattern:getPattern,patterns:patterns,matchers:matchers}}module.exports=patternMatcher;
