/*
 * bootstrap-filestyle
 * http://dev.tudosobreweb.com.br/bootstrap-filestyle/
 *
 * Copyright (c) 2013 Markus Vinicius da Silva Lima
 * Version 1.0.2
 * Licensed under the MIT license.
 */
(function(c){var d=function(e,f){this.options=f;this.$elementFilestyle=[];this.$element=c(e)};d.prototype={clear:function(){this.$element.val("");this.$elementFilestyle.find(":text").val("")},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val("");this.$elementFilestyle.remove()},icon:function(e){if(e===true){if(!this.options.icon){this.options.icon=true;this.$elementFilestyle.find("label").prepend(this.htmlIcon())}}else{if(e===false){if(this.options.icon){this.options.icon=false;this.$elementFilestyle.find("i").remove()}}else{return this.options.icon}}},input:function(e){if(e===true){if(!this.options.input){this.options.input=true;this.$elementFilestyle.prepend(this.htmlInput());var f="",g=[];if(this.$element[0].files===undefined){g[0]={name:this.$element[0].value}}else{g=this.$element[0].files}for(var h=0;h<g.length;h++){f+=g[h].name.split("\\").pop()+", "}if(f!==""){this.$elementFilestyle.find(":text").val(f.replace(/\, $/g,""))}}}else{if(e===false){if(this.options.input){this.options.input=false;this.$elementFilestyle.find(":text").remove()}}else{return this.options.input}}},buttonText:function(e){if(e!==undefined){this.options.buttonText=e;this.$elementFilestyle.find("label span").html(this.options.buttonText)}else{return this.options.buttonText}},classButton:function(e){if(e!==undefined){this.options.classButton=e;this.$elementFilestyle.find("label").attr({"class":this.options.classButton});if(this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)!==-1){this.$elementFilestyle.find("label i").addClass("icon-white")}else{this.$elementFilestyle.find("label i").removeClass("icon-white")}}else{return this.options.classButton}},classIcon:function(e){if(e!==undefined){this.options.classIcon=e;if(this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)!==-1){this.$elementFilestyle.find("label").find("i").attr({"class":"icon-white "+this.options.classIcon})}else{this.$elementFilestyle.find("label").find("i").attr({"class":this.options.classIcon})}}else{return this.options.classIcon}},classInput:function(e){if(e!==undefined){this.options.classInput=e;this.$elementFilestyle.find(":text").addClass(this.options.classInput)}else{return this.options.classInput}},htmlIcon:function(){if(this.options.icon){var e="";if(this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)!==-1){e=" icon-white "}return'<i class="'+e+this.options.classIcon+'"></i> '}else{return""}},htmlInput:function(){if(this.options.input){return'<input type="text" class="'+this.options.classInput+'" disabled> '}else{return""}},constructor:function(){var g=this,e="",h=this.$element.attr("id"),f=[];if(h===""||!h){h="filestyle-"+c(".bootstrap-filestyle").length;this.$element.attr({id:h})}e=this.htmlInput()+'<label for="'+h+'" class="'+this.options.classButton+'">'+this.htmlIcon()+"<span>"+this.options.buttonText+"</span></label>";this.$elementFilestyle=c('<div class="bootstrap-filestyle" style="display: inline;">'+e+"</div>");this.$element.css({position:"fixed",top:"-500px",left:"-500px"}).after(this.$elementFilestyle);this.$element.change(function(){var j="";if(this.files===undefined){f[0]={name:this.value}}else{f=this.files}for(var k=0;k<f.length;k++){j+=f[k].name.split("\\").pop()+", "}if(j!==""){g.$elementFilestyle.find(":text").val(j.replace(/\, $/g,""))}});if(window.navigator.userAgent.search(/firefox/i)>-1){this.$elementFilestyle.find("label").click(function(){g.$element.click();return false})}}};var b=c.fn.filestyle;c.fn.filestyle=function(f,e){var h="",g=this.each(function(){if(c(this).attr("type")==="file"){var j=c(this),k=j.data("filestyle"),i=c.extend({},c.fn.filestyle.defaults,f,typeof f==="object"&&f);if(!k){j.data("filestyle",(k=new d(this,i)));k.constructor()}if(typeof f==="string"){h=k[f](e)}}});if(typeof h!==undefined){return h}else{return g}};c.fn.filestyle.defaults={buttonText:"Choose file",input:true,icon:true,classButton:"btn",classInput:"input-large",classIcon:"icon-folder-open"};c.fn.filestyle.noConflict=function(){c.fn.filestyle=b;return this};var a=c(".filestyle");a.each(function(){var f=c(this),e={buttonText:f.attr("data-buttonText"),input:f.attr("data-input")==="false"?false:true,icon:f.attr("data-icon")==="false"?false:true,classButton:f.attr("data-classButton"),classInput:f.attr("data-classInput"),classIcon:f.attr("data-classIcon")};f.filestyle(e)})})(window.jQuery);