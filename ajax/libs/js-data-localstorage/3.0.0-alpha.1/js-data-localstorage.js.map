{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fbe6266b96afe5f0f650","webpack:///./src/index.js","webpack:///external {\"amd\":\"js-data\",\"commonjs\":\"js-data\",\"commonjs2\":\"js-data\",\"root\":\"JSData\"}","webpack:///./~/mout/random/guid.js","webpack:///./~/mout/random/randHex.js","webpack:///./~/mout/random/choice.js","webpack:///./~/mout/random/randInt.js","webpack:///./~/mout/number/MIN_INT.js","webpack:///./~/mout/number/MAX_INT.js","webpack:///./~/mout/random/rand.js","webpack:///./~/mout/random/random.js","webpack:///./~/mout/lang/isArray.js","webpack:///./~/mout/lang/isKind.js","webpack:///./~/mout/lang/kindOf.js"],"names":[],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;AChBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACZA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AChBA;AACA;AACA;;AAEA;;;;;;;;ACJA;AACA;AACA;;AAEA;;;;;;;;ACJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACLA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA","file":"./dist/js-data-localstorage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"js-data\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"js-data\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LocalStorageAdapter\"] = factory(require(\"js-data\"));\n\telse\n\t\troot[\"LocalStorageAdapter\"] = factory(root[\"JSData\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fbe6266b96afe5f0f650\n **/","/* global: localStorage */\nconst JSData = require('js-data')\nconst guid = require('mout/random/guid')\n\nconst {\n  Query,\n  utils\n} = JSData\n\nconst {\n  addHiddenPropsToTarget,\n  copy,\n  deepMixIn,\n  extend,\n  fillIn,\n  forOwn,\n  fromJson,\n  get,\n  isArray,\n  isUndefined,\n  resolve,\n  reject,\n  set,\n  toJson\n} = utils\n\nfunction isValidString (value) {\n  return (value != null && value !== '')\n}\nfunction join (items, separator) {\n  separator || (separator = '')\n  return items.filter(isValidString).join(separator)\n}\nfunction makePath (...args) {\n  let result = join(args, '/')\n  return result.replace(/([^:\\/]|^)\\/{2,}/g, '$1/')\n}\nfunction unique (array) {\n  const seen = {}\n  const final = []\n  array.forEach(function (item) {\n    if (item in seen) {\n      return\n    }\n    final.push(item)\n    seen[item] = 0\n  })\n  return final\n}\nlet queue = []\nlet taskInProcess = false\n\nfunction enqueue (task) {\n  queue.push(task)\n}\n\nfunction dequeue () {\n  if (queue.length && !taskInProcess) {\n    taskInProcess = true\n    queue[0]()\n  }\n}\n\nfunction queueTask (task) {\n  if (!queue.length) {\n    enqueue(task)\n    dequeue()\n  } else {\n    enqueue(task)\n  }\n}\n\nfunction createTask (fn) {\n  return new Promise(fn).then(function (result) {\n    taskInProcess = false\n    queue.shift()\n    setTimeout(dequeue, 0)\n    return result\n  }, function (err) {\n    taskInProcess = false\n    queue.shift()\n    setTimeout(dequeue, 0)\n    return reject(err)\n  })\n}\n\nconst noop = function (...args) {\n  const self = this\n  const opts = args[args.length - 1]\n  self.dbg(opts.op, ...args)\n  return resolve()\n}\n\nconst noop2 = function (...args) {\n  const self = this\n  const opts = args[args.length - 2]\n  self.dbg(opts.op, ...args)\n  return resolve()\n}\n\nconst DEFAULTS = {\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#basePath\n   * @type {string}\n   */\n  basePath: '',\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#debug\n   * @type {boolean}\n   * @default false\n   */\n  debug: false,\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#storage\n   * @type {Object}\n   * @default localStorage\n   */\n  storage: localStorage\n}\n\n/**\n * LocalStorageAdapter class.\n *\n * @example\n * import {DataStore} from 'js-data'\n * import LocalStorageAdapter from 'js-data-localstorage'\n * const store = new DataStore()\n * const adapter = new LocalStorageAdapter()\n * store.registerAdapter('ls', adapter, { 'default': true })\n *\n * @class LocalStorageAdapter\n * @param {Object} [opts] Configuration opts.\n * @param {string} [opts.basePath=''] TODO\n * @param {boolean} [opts.debug=false] TODO\n * @param {Object} [opts.storeage=localStorage] TODO\n */\nfunction LocalStorageAdapter (opts) {\n  fillIn(this, opts || {})\n  fillIn(this, DEFAULTS)\n}\n\n/**\n * Alternative to ES6 class syntax for extending `LocalStorageAdapter`.\n *\n * @name LocalStorageAdapter.extend\n * @method\n * @param {Object} [instanceProps] Properties that will be added to the\n * prototype of the subclass.\n * @param {Object} [classProps] Properties that will be added as static\n * properties to the subclass itself.\n * @return {Object} Subclass of `LocalStorageAdapter`.\n */\nLocalStorageAdapter.extend = extend\n\naddHiddenPropsToTarget(LocalStorageAdapter.prototype, {\n  /**\n   * @name LocalStorageAdapter#afterCreate\n   * @method\n   */\n  afterCreate: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterCreateMany\n   * @method\n   */\n  afterCreateMany: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterDEL\n   * @method\n   */\n  afterDEL: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterDestroy\n   * @method\n   */\n  afterDestroy: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterDestroyAll\n   * @method\n   */\n  afterDestroyAll: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterFind\n   * @method\n   */\n  afterFind: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterFindAll\n   * @method\n   */\n  afterFindAll: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterGET\n   * @method\n   */\n  afterGET: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterPUT\n   * @method\n   */\n  afterPUT: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterUpdate\n   * @method\n   */\n  afterUpdate: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterUpdateAll\n   * @method\n   */\n  afterUpdateAll: noop2,\n\n  /**\n   * @name LocalStorageAdapter#afterUpdateMany\n   * @method\n   */\n  afterUpdateMany: noop2,\n\n  /**\n   * @name LocalStorageAdapter#beforeCreate\n   * @method\n   */\n  beforeCreate: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeCreateMany\n   * @method\n   */\n  beforeCreateMany: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeDEL\n   * @method\n   */\n  beforeDEL: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeDestroy\n   * @method\n   */\n  beforeDestroy: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeDestroyAll\n   * @method\n   */\n  beforeDestroyAll: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeFind\n   * @method\n   */\n  beforeFind: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeFindAll\n   * @method\n   */\n  beforeFindAll: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeGET\n   * @method\n   */\n  beforeGET: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforePUT\n   * @method\n   */\n  beforePUT: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeUpdate\n   * @method\n   */\n  beforeUpdate: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeUpdateAll\n   * @method\n   */\n  beforeUpdateAll: noop,\n\n  /**\n   * @name LocalStorageAdapter#beforeUpdateMany\n   * @method\n   */\n  beforeUpdateMany: noop,\n\n  /**\n   * Create a new record.\n   *\n   * @name LocalStorageAdapter#create\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} props The record to be created.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] TODO\n   * @return {Promise}\n   */\n  create (mapper, props, opts) {\n    const self = this\n    props || (props = {})\n    opts || (opts = {})\n\n    return createTask(function (success, failure) {\n      queueTask(function () {\n        let op\n        // beforeCreate lifecycle hook\n        op = opts.op = 'beforeCreate'\n        return resolve(self[op](mapper, props, opts)).then(function (_props) {\n          // Allow for re-assignment from lifecycle hook\n          let record = isUndefined(_props) ? props : _props\n          const id = get(record, mapper.idAttribute) || guid()\n          set(record, mapper.idAttribute, id)\n          const key = self.getIdPath(mapper, opts, id)\n\n          // Create the record\n          // TODO: Create related records when the \"with\" option is provided\n          self.storage.setItem(key, toJson(record))\n          self.ensureId(id, mapper, opts)\n\n          // afterCreate lifecycle hook\n          op = opts.op = 'afterCreate'\n          return self[op](mapper, props, opts, record).then(function (_record) {\n            // Allow for re-assignment from lifecycle hook\n            record = isUndefined(_record) ? record : _record\n            return opts.raw ? {\n              data: record,\n              created: 1\n            } : record\n          })\n        }).then(success, failure)\n      })\n    })\n  },\n\n  /**\n   * Create multiple records in a single batch.\n   *\n   * @name LocalStorageAdapter#createMany\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Array} props Array of records to be created.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] TODO\n   * @return {Promise}\n   */\n  createMany (mapper, props, opts) {\n    const self = this\n    props || (props = {})\n    opts || (opts = {})\n\n    return createTask(function (success, failure) {\n      queueTask(function () {\n        let op\n        // beforeCreateMany lifecycle hook\n        op = opts.op = 'beforeCreateMany'\n        return resolve(self[op](mapper, props, opts)).then(function (_props) {\n          // Allow for re-assignment from lifecycle hook\n          let records = isUndefined(_props) ? props : _props\n          const idAttribute = mapper.idAttribute\n\n          // Create the record\n          // TODO: Create related records when the \"with\" option is provided\n          records.forEach(function (record) {\n            const id = get(record, idAttribute) || guid()\n            set(record, idAttribute, id)\n            const key = self.getIdPath(mapper, opts, id)\n            self.storage.setItem(key, toJson(record))\n            self.ensureId(id, mapper, opts)\n          })\n\n          // afterCreateMany lifecycle hook\n          op = opts.op = 'afterCreateMany'\n          return self[op](mapper, props, opts, records).then(function (_records) {\n            // Allow for re-assignment from lifecycle hook\n            records = isUndefined(_records) ? records : _records\n            return opts.raw ? {\n              data: records,\n              created: records.length\n            } : records\n          })\n        }).then(success, failure)\n      })\n    })\n  },\n\n  /**\n   * @name LocalStorageAdapter#dbg\n   * @method\n   */\n  dbg (...args) {\n    this.log('debug', ...args)\n  },\n\n  /**\n   * Destroy the record with the given primary key.\n   *\n   * @name LocalStorageAdapter#destroy\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {(string|number)} id Primary key of the record to destroy.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] TODO\n   * @return {Promise}\n   */\n  destroy (mapper, id, opts) {\n    const self = this\n    opts || (opts = {})\n\n    return createTask(function (success, failure) {\n      queueTask(function () {\n        let op\n        // beforeDestroy lifecycle hook\n        op = opts.op = 'beforeDestroy'\n        return resolve(self[op](mapper, id, opts)).then(function () {\n          op = opts.op = 'destroy'\n          self.dbg(op, id, opts)\n          // Destroy the record\n          // TODO: Destroy related records when the \"with\" option is provided\n          self.storage.removeItem(self.getIdPath(mapper, opts, id))\n          self.removeId(id, mapper, opts)\n\n          // afterDestroy lifecycle hook\n          op = opts.op = 'afterDestroy'\n          return self[op](mapper, id, opts).then(function (_id) {\n            // Allow for re-assignment from lifecycle hook\n            id = isUndefined(_id) ? id : _id\n            return opts.raw ? {\n              data: id,\n              deleted: 1\n            } : id\n          })\n        }).then(success, failure)\n      })\n    })\n  },\n\n  /**\n   * Destroy the records that match the selection `query`.\n   *\n   * @name LocalStorageAdapter#destroyAll\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} query Selection query.\n   * @param {Object} [opts] Configuration opts.\n   * @param {boolean} [opts.raw=false] TODO\n   * @return {Promise}\n   */\n  destroyAll (mapper, query, opts) {\n    const self = this\n    query || (query = {})\n    opts || (opts = {})\n\n    return createTask(function (success, failure) {\n      queueTask(function () {\n        let op\n        // beforeDestroyAll lifecycle hook\n        op = opts.op = 'beforeDestroyAll'\n        return resolve(self[op](mapper, query, opts)).then(function () {\n          op = opts.op = 'destroyAll'\n          self.dbg(op, query, opts)\n          // Find the records that are to be destroyed\n          return self.findAll(mapper, query, opts)\n        }).then(function (records) {\n          const idAttribute = mapper.idAttribute\n          // Gather IDs of records to be destroyed\n          let ids = records.map(function (record) {\n            return get(record, idAttribute)\n          })\n          // Destroy each record\n          // TODO: Destroy related records when the \"with\" option is provided\n          ids.forEach(function (id) {\n            self.storage.removeItem(self.getIdPath(mapper, opts, id))\n          })\n          self.removeId(ids, mapper, opts)\n\n          // afterDestroyAll lifecycle hook\n          op = opts.op = 'afterDestroyAll'\n          return self[op](mapper, query, opts, ids).then(function (_ids) {\n            // Allow for re-assignment from lifecycle hook\n            ids = isUndefined(_ids) ? ids : _ids\n            return opts.raw ? {\n              data: ids,\n              deleted: records.length\n            } : ids\n          })\n        }).then(success, failure)\n      })\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#ensureId\n   * @method\n   */\n  ensureId (id, mapper, opts) {\n    const ids = this.getIds(mapper, opts)\n    if (isArray(id)) {\n      if (!id.length) {\n        return\n      }\n      id.forEach(function (_id) {\n        ids[_id] = 1\n      })\n    } else {\n      ids[id] = 1\n    }\n    this.saveKeys(ids, mapper, opts)\n  },\n\n  /**\n   * Retrieve the record with the given primary key.\n   *\n   * @name LocalStorageAdapter#find\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {(string|number)} id Primary key of the record to retrieve.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] TODO\n   * @param {string[]} [opts.with=[]] TODO\n   * @return {Promise}\n   */\n  find (mapper, id, opts) {\n    const self = this\n    let record, op\n    opts || (opts = {})\n    opts.with || (opts.with = [])\n\n    // beforeFind lifecycle hook\n    op = opts.op = 'beforeFind'\n    return resolve(self[op](mapper, id, opts)).then(function () {\n      op = opts.op = 'find'\n      self.dbg(op, id, opts)\n      const key = self.getIdPath(mapper, opts, id)\n      record = self.storage.getItem(key)\n      if (isUndefined(record)) {\n        record = undefined\n        return\n      }\n      record = fromJson(record)\n      const tasks = []\n      const relationList = mapper.relationList || []\n\n      relationList.forEach(function (def) {\n        const relationName = def.relation\n        const relatedMapper = def.getRelation()\n        let containedName = null\n        if (opts.with.indexOf(relationName) !== -1) {\n          containedName = relationName\n        } else if (opts.with.indexOf(def.localField) !== -1) {\n          containedName = def.localField\n        }\n        if (!containedName) {\n          return\n        }\n        let __opts = copy(opts)\n        __opts.with = opts.with.slice()\n        fillIn(__opts, relatedMapper)\n        const index = __opts.with.indexOf(containedName)\n        if (index >= 0) {\n          __opts.with.splice(index, 1)\n        }\n        __opts.with.forEach(function (relation, i) {\n          if (relation && relation.indexOf(containedName) === 0 && relation.length >= containedName.length && relation[containedName.length] === '.') {\n            __opts.with[i] = relation.substr(containedName.length + 1)\n          } else {\n            __opts.with[i] = ''\n          }\n        })\n\n        let task\n\n        if ((def.type === 'hasOne' || def.type === 'hasMany') && def.foreignKey) {\n          task = self.findAll(relatedMapper, {\n            [def.foreignKey]: get(record, mapper.idAttribute)\n          }, __opts).then(function (relatedItems) {\n            if (def.type === 'hasOne' && relatedItems.length) {\n              set(record, def.localField, relatedItems[0])\n            } else {\n              set(record, def.localField, relatedItems)\n            }\n            return relatedItems\n          })\n        } else if (def.type === 'hasMany' && def.localKeys) {\n          let localKeys = []\n          let itemKeys = get(record, def.localKeys) || []\n          itemKeys = Array.isArray(itemKeys) ? itemKeys : Object.keys(itemKeys)\n          localKeys = localKeys.concat(itemKeys || [])\n          task = self.findAll(relatedMapper, {\n            where: {\n              [relatedMapper.idAttribute]: {\n                'in': unique(localKeys).filter(function (x) { return x })\n              }\n            }\n          }, __opts).then(function (relatedItems) {\n            set(record, def.localField, relatedItems)\n            return relatedItems\n          })\n        } else if (def.type === 'belongsTo') {\n          task = self.find(relatedMapper, get(record, def.foreignKey), __opts).then(function (relatedItem) {\n            set(record, def.localField, relatedItem)\n            return relatedItem\n          })\n        }\n\n        if (task) {\n          tasks.push(task)\n        }\n      })\n\n      return Promise.all(tasks)\n    }).then(function () {\n      // afterFind lifecycle hook\n      op = opts.op = 'afterFind'\n      return resolve(self[op](mapper, id, opts, record)).then(function (_record) {\n        // Allow for re-assignment from lifecycle hook\n        record = isUndefined(_record) ? record : _record\n        return opts.raw ? {\n          data: record,\n          found: record ? 1 : 0\n        } : record\n      })\n    })\n  },\n\n  /**\n   * Retrieve the records that match the selection `query`.\n   *\n   * @name LocalStorageAdapter#findAll\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} query Selection query.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] TODO\n   * @param {string[]} [opts.with=[]] TODO\n   * @return {Promise}\n   */\n  findAll (mapper, query, opts) {\n    const self = this\n    let records = []\n    let op\n    opts || (opts = {})\n    opts.with || (opts.with = [])\n\n    // beforeFindAll lifecycle hook\n    op = opts.op = 'beforeFindAll'\n    return resolve(self[op](mapper, query, opts)).then(function () {\n      op = opts.op = 'findAll'\n      self.dbg(op, query, opts)\n\n      // Load all records into memory...\n      const ids = self.getIds(mapper, opts)\n      forOwn(ids, function (value, id) {\n        const json = self.storage.getItem(self.getIdPath(mapper, opts, id))\n        if (json) {\n          records.push(fromJson(json))\n        }\n      })\n      const idAttribute = mapper.idAttribute\n      // TODO: Verify that this collection gets properly garbage collected\n      // TODO: Or, find a way to filter without using Collection\n      const _query = new Query({\n        index: {\n          getAll () {\n            return records\n          }\n        }\n      })\n      records = _query.filter(query).run()\n      const tasks = []\n      const relationList = mapper.relationList || []\n\n      relationList.forEach(function (def) {\n        const relationName = def.relation\n        const relatedMapper = def.getRelation()\n        let containedName = null\n        if (opts.with.indexOf(relationName) !== -1) {\n          containedName = relationName\n        } else if (opts.with.indexOf(def.localField) !== -1) {\n          containedName = def.localField\n        }\n        if (!containedName) {\n          return\n        }\n        let __opts = copy(opts)\n        __opts.with = opts.with.slice()\n        fillIn(__opts, relatedMapper)\n        const index = __opts.with.indexOf(containedName)\n        if (index >= 0) {\n          __opts.with.splice(index, 1)\n        }\n        __opts.with.forEach(function (relation, i) {\n          if (relation && relation.indexOf(containedName) === 0 && relation.length >= containedName.length && relation[containedName.length] === '.') {\n            __opts.with[i] = relation.substr(containedName.length + 1)\n          } else {\n            __opts.with[i] = ''\n          }\n        })\n\n        let task\n\n        if ((def.type === 'hasOne' || def.type === 'hasMany') && def.foreignKey) {\n          task = self.findAll(relatedMapper, {\n            where: {\n              [def.foreignKey]: {\n                'in': records.map(function (item) {\n                  return get(item, idAttribute)\n                }).filter(function (x) { return x })\n              }\n            }\n          }, __opts).then(function (relatedItems) {\n            records.forEach(function (item) {\n              const attached = []\n              relatedItems.forEach(function (relatedItem) {\n                if (get(relatedItem, def.foreignKey) === get(item, idAttribute)) {\n                  attached.push(relatedItem)\n                }\n              })\n              if (def.type === 'hasOne' && attached.length) {\n                set(item, def.localField, attached[0])\n              } else {\n                set(item, def.localField, attached)\n              }\n            })\n            return relatedItems\n          })\n        } else if (def.type === 'hasMany' && def.localKeys) {\n          let localKeys = []\n          records.forEach(function (item) {\n            let itemKeys = get(item, def.localKeys) || []\n            itemKeys = Array.isArray(itemKeys) ? itemKeys : Object.keys(itemKeys)\n            localKeys = localKeys.concat(itemKeys || [])\n          })\n          task = self.findAll(relatedMapper, {\n            where: {\n              [relatedMapper.idAttribute]: {\n                'in': unique(localKeys).filter(function (x) { return x })\n              }\n            }\n          }, __opts).then(function (relatedItems) {\n            records.forEach(function (item) {\n              const attached = []\n              let itemKeys = get(item, def.localKeys) || []\n              itemKeys = Array.isArray(itemKeys) ? itemKeys : Object.keys(itemKeys)\n              relatedItems.forEach(function (relatedItem) {\n                if (itemKeys && itemKeys.indexOf(relatedItem[relatedMapper.idAttribute]) !== -1) {\n                  attached.push(relatedItem)\n                }\n              })\n              set(item, def.localField, attached)\n            })\n            return relatedItems\n          })\n        } else if (def.type === 'belongsTo') {\n          task = self.findAll(relatedMapper, {\n            where: {\n              [relatedMapper.idAttribute]: {\n                'in': records.map(function (item) {\n                  return get(item, def.foreignKey)\n                }).filter(function (x) { return x })\n              }\n            }\n          }, __opts).then(function (relatedItems) {\n            records.forEach(function (item) {\n              relatedItems.forEach(function (relatedItem) {\n                if (relatedItem[relatedMapper.idAttribute] === get(item, def.foreignKey)) {\n                  set(item, def.localField, relatedItem)\n                }\n              })\n            })\n            return relatedItems\n          })\n        }\n\n        if (task) {\n          tasks.push(task)\n        }\n      })\n      return Promise.all(tasks)\n    }).then(function () {\n      // afterFindAll lifecycle hook\n      op = opts.op = 'afterFindAll'\n      return resolve(self[op](mapper, query, opts, records)).then(function (_records) {\n        // Allow for re-assignment from lifecycle hook\n        records = isUndefined(_records) ? records : _records\n        return opts.raw ? {\n          data: records,\n          found: records.length\n        } : records\n      })\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#getPath\n   * @method\n   */\n  getPath (mapper, opts) {\n    opts = opts || {}\n    return makePath(opts.basePath === undefined ? (mapper.basePath === undefined ? this.basePath : mapper.basePath) : opts.basePath, mapper.name)\n  },\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#getIdPath\n   * @method\n   */\n  getIdPath (mapper, opts, id) {\n    opts = opts || {}\n    return makePath(opts.basePath || this.basePath || mapper.basePath, mapper.endpoint, id)\n  },\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#getIds\n   * @method\n   */\n  getIds (mapper, opts) {\n    let ids\n    const idsPath = this.getPath(mapper, opts)\n    const idsJson = this.storage.getItem(idsPath)\n    if (idsJson) {\n      ids = fromJson(idsJson)\n    } else {\n      ids = {}\n    }\n    return ids\n  },\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#log\n   * @method\n   */\n  log (level, ...args) {\n    if (level && !args.length) {\n      args.push(level)\n      level = 'debug'\n    }\n    if (level === 'debug' && !this.debug) {\n      return\n    }\n    const prefix = `${level.toUpperCase()}: (LocalStorageAdapter)`\n    if (console[level]) {\n      console[level](prefix, ...args)\n    } else {\n      console.log(prefix, ...args)\n    }\n  },\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#removeId\n   * @method\n   */\n  removeId (id, mapper, opts) {\n    const ids = this.getIds(mapper, opts)\n    if (isArray(id)) {\n      if (!id.length) {\n        return\n      }\n      id.forEach(function (_id) {\n        delete ids[_id]\n      })\n    } else {\n      delete ids[id]\n    }\n    this.saveKeys(ids, mapper, opts)\n  },\n\n  /**\n   * TODO\n   *\n   * @name LocalStorageAdapter#saveKeys\n   * @method\n   */\n  saveKeys (ids, mapper, opts) {\n    ids = ids || {}\n    const idsPath = this.getPath(mapper, opts)\n    if (Object.keys(ids).length) {\n      this.storage.setItem(idsPath, toJson(ids))\n    } else {\n      this.storage.removeItem(idsPath)\n    }\n  },\n\n  /**\n   * Update the records that match the selection `query`. If a record with the\n   * specified primary key cannot be found then no update is performed and the\n   * promise is resolved with `undefined`.\n   *\n   * @name LocalStorageAdapter#update\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {(string|number)} id The primary key of the record to be updated.\n   * @param {Object} props The update to apply to the record.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] TODO\n   * @return {Promise}\n   */\n  update (mapper, id, props, opts) {\n    const self = this\n    props || (props = {})\n    opts || (opts = {})\n\n    return createTask(function (success, failure) {\n      queueTask(function () {\n        let op\n        // beforeUpdate lifecycle hook\n        op = opts.op = 'beforeUpdate'\n        return resolve(self[op](mapper, id, props, opts)).then(function (_props) {\n          // Allow for re-assignment from lifecycle hook\n          props = isUndefined(_props) ? props : _props\n          const key = self.getIdPath(mapper, opts, id)\n          let record = self.storage.getItem(key)\n          record = record ? fromJson(record) : undefined\n          let updated = 0\n\n          // Update the record\n          // TODO: Update related records when the \"with\" option is provided\n          if (record) {\n            deepMixIn(record, props)\n            self.storage.setItem(key, toJson(record))\n            updated++\n          }\n\n          // afterUpdate lifecycle hook\n          op = opts.op = 'afterUpdate'\n          return self[op](mapper, id, props, opts, record).then(function (_record) {\n            // Allow for re-assignment from lifecycle hook\n            record = isUndefined(_record) ? record : _record\n            return opts.raw ? {\n              data: record,\n              updated\n            } : record\n          })\n        }).then(success, failure)\n      })\n    })\n  },\n\n  /**\n   * Update the records that match the selection `query`.\n   *\n   * @name LocalStorageAdapter#updateAll\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} props The update to apply to the selected records.\n   * @param {Object} query Selection query.\n   * @param {Object} [opts] Configuration options.\n   * @return {Promise}\n   */\n  updateAll (mapper, props, query, opts) {\n    const self = this\n    props || (props = {})\n    query || (query = {})\n    opts || (opts = {})\n\n    return createTask(function (success, failure) {\n      queueTask(function () {\n        let op\n        // beforeUpdateAll lifecycle hook\n        op = opts.op = 'beforeUpdateAll'\n        return resolve(self[op](mapper, props, query, opts)).then(function (_props) {\n          // Allow for re-assignment from lifecycle hook\n          props = isUndefined(_props) ? props : _props\n          op = opts.op = 'updateAll'\n          self.dbg(op, query, opts)\n\n          // Find the records that are to be updated\n          return self.findAll(mapper, query, opts)\n        }).then(function (records) {\n          const idAttribute = mapper.idAttribute\n          let updated = 0\n\n          // Update each record\n          // TODO: Update related records when the \"with\" option is provided\n          records.forEach(function (record) {\n            record || (record = {})\n            const id = get(record, idAttribute)\n            const key = self.getIdPath(mapper, opts, id)\n            deepMixIn(record, props)\n            self.storage.setItem(key, toJson(record))\n            updated++\n          })\n\n          // afterUpdateAll lifecycle hook\n          op = opts.op = 'afterUpdateAll'\n          return self[op](mapper, props, query, opts, records).then(function (_records) {\n            // Allow for re-assignment from lifecycle hook\n            records = isUndefined(_records) ? records : _records\n            return opts.raw ? {\n              data: records,\n              updated\n            } : records\n          })\n        }).then(success, failure)\n      })\n    })\n  },\n\n  /**\n   * Update the given records in a single batch.\n   *\n   * @name LocalStorageAdapter#updateMany\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} records The records to update.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] TODO\n   * @return {Promise}\n   */\n  updateMany (mapper, records, opts) {\n    const self = this\n    records || (records = [])\n    opts || (opts = {})\n\n    return createTask(function (success, failure) {\n      queueTask(function () {\n        let op\n        let updatedRecords = []\n        // beforeUpdateMany lifecycle hook\n        op = opts.op = 'beforeUpdateMany'\n        return resolve(self[op](mapper, records, opts)).then(function (_records) {\n          // Allow for re-assignment from lifecycle hook\n          records = isUndefined(_records) ? records : _records\n          op = opts.op = 'updateMany'\n          self.dbg(op, records, opts)\n\n          const idAttribute = mapper.idAttribute\n\n          // Update each record\n          // TODO: Update related records when the \"with\" option is provided\n          records.forEach(function (record) {\n            if (!record) {\n              return\n            }\n            const id = get(record, idAttribute)\n            if (isUndefined(id)) {\n              return\n            }\n            const key = self.getIdPath(mapper, opts, id)\n            let json = self.storage.getItem(key)\n            const existingRecord = json ? fromJson(json) : undefined\n            if (!existingRecord) {\n              return\n            }\n            deepMixIn(existingRecord, record)\n            self.storage.setItem(key, toJson(existingRecord))\n            updatedRecords.push(existingRecord)\n          })\n\n          // afterUpdateMany lifecycle hook\n          op = opts.op = 'afterUpdateMany'\n          return self[op](mapper, records, opts, updatedRecords).then(function (_records) {\n            // Allow for re-assignment from lifecycle hook\n            records = isUndefined(_records) ? updatedRecords : _records\n            return opts.raw ? {\n              data: records,\n              updated: updatedRecords.length\n            } : records\n          })\n        }).then(success, failure)\n      })\n    })\n  }\n})\n\n/**\n * Details of the current version of the `js-data-localstorage` module.\n *\n * @name LocalStorageAdapter.version\n * @type {Object}\n * @property {string} version.full The full semver value.\n * @property {number} version.major The major version number.\n * @property {number} version.minor The minor version number.\n * @property {number} version.patch The patch version number.\n * @property {(string|boolean)} version.alpha The alpha version value,\n * otherwise `false` if the current version is not alpha.\n * @property {(string|boolean)} version.beta The beta version value,\n * otherwise `false` if the current version is not beta.\n */\nLocalStorageAdapter.version = {\n  full: '<%= pkg.version %>',\n  major: parseInt('<%= major %>', 10),\n  minor: parseInt('<%= minor %>', 10),\n  patch: parseInt('<%= patch %>', 10),\n  alpha: '<%= alpha %>' !== 'false' ? '<%= alpha %>' : false,\n  beta: '<%= beta %>' !== 'false' ? '<%= beta %>' : false\n}\n\n/**\n * Registered as `js-data-localstorage` in NPM and Bower.\n *\n * __Script tag__:\n * ```javascript\n * window.LocalStorageAdapter\n * ```\n * __CommonJS__:\n * ```javascript\n * var LocalStorageAdapter = require('js-data-localstorage')\n * ```\n * __ES6 Modules__:\n * ```javascript\n * import LocalStorageAdapter from 'js-data-localstorage'\n * ```\n * __AMD__:\n * ```javascript\n * define('myApp', ['js-data-localstorage'], function (LocalStorageAdapter) { ... })\n * ```\n *\n * @module js-data-localstorage\n */\n\nmodule.exports = LocalStorageAdapter\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"js-data\",\"commonjs\":\"js-data\",\"commonjs2\":\"js-data\",\"root\":\"JSData\"}\n ** module id = 1\n ** module chunks = 0\n **/","var randHex = require('./randHex');\nvar choice = require('./choice');\n\n  /**\n   * Returns pseudo-random guid (UUID v4)\n   * IMPORTANT: it's not totally \"safe\" since randHex/choice uses Math.random\n   * by default and sequences can be predicted in some cases. See the\n   * \"random/random\" documentation for more info about it and how to replace\n   * the default PRNG.\n   */\n  function guid() {\n    return (\n        randHex(8)+'-'+\n        randHex(4)+'-'+\n        // v4 UUID always contain \"4\" at this position to specify it was\n        // randomly generated\n        '4' + randHex(3) +'-'+\n        // v4 UUID always contain chars [a,b,8,9] at this position\n        choice(8, 9, 'a', 'b') + randHex(3)+'-'+\n        randHex(12)\n    );\n  }\n  module.exports = guid;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/random/guid.js\n ** module id = 2\n ** module chunks = 0\n **/","var choice = require('./choice');\n\n    var _chars = '0123456789abcdef'.split('');\n\n    /**\n     * Returns a random hexadecimal string\n     */\n    function randHex(size){\n        size = size && size > 0? size : 6;\n        var str = '';\n        while (size--) {\n            str += choice(_chars);\n        }\n        return str;\n    }\n\n    module.exports = randHex;\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/random/randHex.js\n ** module id = 3\n ** module chunks = 0\n **/","var randInt = require('./randInt');\nvar isArray = require('../lang/isArray');\n\n    /**\n     * Returns a random element from the supplied arguments\n     * or from the array (if single argument is an array).\n     */\n    function choice(items) {\n        var target = (arguments.length === 1 && isArray(items))? items : arguments;\n        return target[ randInt(0, target.length - 1) ];\n    }\n\n    module.exports = choice;\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/random/choice.js\n ** module id = 4\n ** module chunks = 0\n **/","var MIN_INT = require('../number/MIN_INT');\nvar MAX_INT = require('../number/MAX_INT');\nvar rand = require('./rand');\n\n    /**\n     * Gets random integer inside range or snap to min/max values.\n     */\n    function randInt(min, max){\n        min = min == null? MIN_INT : ~~min;\n        max = max == null? MAX_INT : ~~max;\n        // can't be max + 0.5 otherwise it will round up if `rand`\n        // returns `max` causing it to overflow range.\n        // -0.5 and + 0.49 are required to avoid bias caused by rounding\n        return Math.round( rand(min - 0.5, max + 0.499999999999) );\n    }\n\n    module.exports = randInt;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/random/randInt.js\n ** module id = 5\n ** module chunks = 0\n **/","/**\n * @constant Minimum 32-bit signed integer value (-2^31).\n */\n\n    module.exports = -2147483648;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/number/MIN_INT.js\n ** module id = 6\n ** module chunks = 0\n **/","/**\n * @constant Maximum 32-bit signed integer value. (2^31 - 1)\n */\n\n    module.exports = 2147483647;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/number/MAX_INT.js\n ** module id = 7\n ** module chunks = 0\n **/","var random = require('./random');\nvar MIN_INT = require('../number/MIN_INT');\nvar MAX_INT = require('../number/MAX_INT');\n\n    /**\n     * Returns random number inside range\n     */\n    function rand(min, max){\n        min = min == null? MIN_INT : min;\n        max = max == null? MAX_INT : max;\n        return min + (max - min) * random();\n    }\n\n    module.exports = rand;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/random/rand.js\n ** module id = 8\n ** module chunks = 0\n **/","\n\n    /**\n     * Just a wrapper to Math.random. No methods inside mout/random should call\n     * Math.random() directly so we can inject the pseudo-random number\n     * generator if needed (ie. in case we need a seeded random or a better\n     * algorithm than the native one)\n     */\n    function random(){\n        return random.get();\n    }\n\n    // we expose the method so it can be swapped if needed\n    random.get = Math.random;\n\n    module.exports = random;\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/random/random.js\n ** module id = 9\n ** module chunks = 0\n **/","var isKind = require('./isKind');\n    /**\n     */\n    var isArray = Array.isArray || function (val) {\n        return isKind(val, 'Array');\n    };\n    module.exports = isArray;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/lang/isArray.js\n ** module id = 10\n ** module chunks = 0\n **/","var kindOf = require('./kindOf');\n    /**\n     * Check if value is from a specific \"kind\".\n     */\n    function isKind(val, kind){\n        return kindOf(val) === kind;\n    }\n    module.exports = isKind;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/lang/isKind.js\n ** module id = 11\n ** module chunks = 0\n **/","\n\n    var _rKind = /^\\[object (.*)\\]$/,\n        _toString = Object.prototype.toString,\n        UNDEF;\n\n    /**\n     * Gets the \"kind\" of value. (e.g. \"String\", \"Number\", etc)\n     */\n    function kindOf(val) {\n        if (val === null) {\n            return 'Null';\n        } else if (val === UNDEF) {\n            return 'Undefined';\n        } else {\n            return _rKind.exec( _toString.call(val) )[1];\n        }\n    }\n    module.exports = kindOf;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mout/lang/kindOf.js\n ** module id = 12\n ** module chunks = 0\n **/"],"sourceRoot":""}