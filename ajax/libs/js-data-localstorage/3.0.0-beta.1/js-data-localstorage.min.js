/*!
* js-data-localstorage
* @version 3.0.0-beta.1 - Homepage <https://github.com/js-data/js-data-localstorage>
* @author Jason Dobry <jason.dobry@gmail.com>
* @copyright (c) 2014-2016 Jason Dobry
* @license MIT <https://github.com/js-data/js-data-localstorage/blob/master/LICENSE>
*
* @overview localStorage adapter for js-data.
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("js-data")):"function"==typeof define&&define.amd?define("js-data-localstorage",["exports","js-data"],e):e(t.JSDataLocalStorage=t.JSDataLocalStorage||{},t.JSData)}(this,function(t,e){"use strict";function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var n=this;t||(t={}),e.utils.fillIn(t,b),e.utils.fillIn(n,t)}function o(t,n,r){var o=this;n||(n={}),o.data=t,e.utils.fillIn(o,n),o.op=r}function i(t){return null!=t&&""!==t}function u(t,e){return e||(e=""),t.filter(i).join(e)}function a(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=u(e,"/");return r.replace(/([^:\/]|^)\/{2,}/g,"$1/")}function s(t){q.push(t)}function l(){q.length&&!$&&($=!0,q[0]())}function f(t){q.length?s(t):(s(t),l())}function c(t){return new Promise(t).then(function(t){return $=!1,q.shift(),setTimeout(l,0),t},function(t){return $=!1,q.shift(),setTimeout(l,0),e.utils.reject(t)})}function d(t){var n=this;e.utils.classCallCheck(n,d),t||(t={}),e.utils.fillIn(t,N),r.call(n,t)}var h={};h.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},h.defineProperty=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},h.slicedToArray=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var y=function(){for(var t=this,n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=r[r.length-1];return t.dbg.apply(t,[i.op].concat(r)),e.utils.resolve()},p=function(){for(var t=this,n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=r[r.length-2];return t.dbg.apply(t,[i.op].concat(r)),e.utils.resolve()},v=function(t){var e={},n=[];return t.forEach(function(t){t in e||(n.push(t),e[t]=0)}),n},g=function(t,n){return e.utils.omit(n,t.relationFields||[])},b={debug:!1,raw:!1};r.extend=e.utils.extend,e.utils.addHiddenPropsToTarget(r.prototype,{afterCount:p,afterCreate:p,afterCreateMany:p,afterDestroy:p,afterDestroyAll:p,afterFind:p,afterFindAll:p,afterSum:p,afterUpdate:p,afterUpdateAll:p,afterUpdateMany:p,beforeCount:y,beforeCreate:y,beforeCreateMany:y,beforeDestroy:y,beforeDestroyAll:y,beforeFind:y,beforeFindAll:y,beforeSum:y,beforeUpdate:y,beforeUpdateAll:y,beforeUpdateMany:y,dbg:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];this.log.apply(this,["debug"].concat(e))},count:function(t,n,r){var i=this,u=void 0;return n||(n={}),r||(r={}),u=r.op="beforeCount",e.utils.resolve(i[u](t,n,r)).then(function(){return u=r.op="count",i.dbg(u,t,n,r),e.utils.resolve(i._count(t,n,r))}).then(function(a){var s=h.slicedToArray(a,2),l=s[0],f=s[1];f||(f={});var c=new o(l,f,u);return c=i.respond(c,r),u=r.op="afterCount",e.utils.resolve(i[u](t,n,r,c)).then(function(t){return e.utils.isUndefined(t)?c:t})})},create:function(t,n,r){var i=this,u=void 0;return n||(n={}),r||(r={}),u=r.op="beforeCreate",e.utils.resolve(i[u](t,n,r)).then(function(o){return n=e.utils.isUndefined(o)?n:o,n=g(t,n),u=r.op="create",i.dbg(u,t,n,r),e.utils.resolve(i._create(t,n,r))}).then(function(a){var s=h.slicedToArray(a,2),l=s[0],f=s[1];f||(f={});var c=new o(l,f,"create");return c.created=l?1:0,c=i.respond(c,r),u=r.op="afterCreate",e.utils.resolve(i[u](t,n,r,c)).then(function(t){return e.utils.isUndefined(t)?c:t})})},createMany:function(t,n,r){var i=this,u=void 0;return n||(n={}),r||(r={}),u=r.op="beforeCreateMany",e.utils.resolve(i[u](t,n,r)).then(function(o){return n=e.utils.isUndefined(o)?n:o,n=n.map(function(e){return g(t,e)}),u=r.op="createMany",i.dbg(u,t,n,r),e.utils.resolve(i._createMany(t,n,r))}).then(function(a){var s=h.slicedToArray(a,2),l=s[0],f=s[1];l||(l=[]),f||(f={});var c=new o(l,f,"createMany");return c.created=l.length,c=i.respond(c,r),u=r.op="afterCreateMany",e.utils.resolve(i[u](t,n,r,c)).then(function(t){return e.utils.isUndefined(t)?c:t})})},destroy:function(t,n,r){var i=this,u=void 0;return r||(r={}),u=r.op="beforeDestroy",e.utils.resolve(i[u](t,n,r)).then(function(){return u=r.op="destroy",i.dbg(u,t,n,r),e.utils.resolve(i._destroy(t,n,r))}).then(function(a){var s=h.slicedToArray(a,2),l=s[0],f=s[1];f||(f={});var c=new o(l,f,"destroy");return c=i.respond(c,r),u=r.op="afterDestroy",e.utils.resolve(i[u](t,n,r,c)).then(function(t){return e.utils.isUndefined(t)?c:t})})},destroyAll:function(t,n,r){var i=this,u=void 0;return n||(n={}),r||(r={}),u=r.op="beforeDestroyAll",e.utils.resolve(i[u](t,n,r)).then(function(){return u=r.op="destroyAll",i.dbg(u,t,n,r),e.utils.resolve(i._destroyAll(t,n,r))}).then(function(a){var s=h.slicedToArray(a,2),l=s[0],f=s[1];f||(f={});var c=new o(l,f,"destroyAll");return c=i.respond(c,r),u=r.op="afterDestroyAll",e.utils.resolve(i[u](t,n,r,c)).then(function(t){return e.utils.isUndefined(t)?c:t})})},loadBelongsTo:function(t,n,r,o){var i=this,u=n.getRelation();if(!e.utils.isObject(r)||e.utils.isArray(r)){var a=r.map(function(e){return i.makeBelongsToForeignKey(t,n,e)}).filter(function(t){return t});return i.findAll(u,{where:h.defineProperty({},u.idAttribute,{in:a})},o).then(function(t){r.forEach(function(e){t.forEach(function(t){t[u.idAttribute]===e[n.foreignKey]&&n.setLocalField(e,t)})})})}var s=function(){var e=r;return{v:i.find(u,i.makeBelongsToForeignKey(t,n,e),o).then(function(t){n.setLocalField(e,t)})}}();return"object"===("undefined"==typeof s?"undefined":h.typeof(s))?s.v:void 0},find:function(t,n,r){var i=this,u=void 0,a=void 0;return r||(r={}),r.with||(r.with=[]),a=r.op="beforeFind",e.utils.resolve(i[a](t,n,r)).then(function(){return a=r.op="find",i.dbg(a,t,n,r),e.utils.resolve(i._find(t,n,r))}).then(function(n){var o=h.slicedToArray(n,1),a=o[0];if(a){u=a;var s=[];return e.utils.forEachRelation(t,r,function(e,n){var r=void 0;!e.foreignKey||"hasOne"!==e.type&&"hasMany"!==e.type?"hasMany"===e.type&&e.localKeys?r=i.loadHasManyLocalKeys(t,e,u,n):"hasMany"===e.type&&e.foreignKeys?r=i.loadHasManyForeignKeys(t,e,u,n):"belongsTo"===e.type&&(r=i.loadBelongsTo(t,e,u,n)):r="hasOne"===e.type?i.loadHasOne(t,e,u,n):i.loadHasMany(t,e,u,n),r&&s.push(r)}),Promise.all(s)}}).then(function(){var s=new o(u,{},"find");return s.found=u?1:0,s=i.respond(s,r),a=r.op="afterFind",e.utils.resolve(i[a](t,n,r,s)).then(function(t){return e.utils.isUndefined(t)?s:t})})},findAll:function(t,n,r){var i=this;r||(r={}),r.with||(r.with=[]);var u=[],a=void 0,s=r._activeWith;if(e.utils.isObject(s)){var l=s.query||{};s.replace?n=l:e.utils.deepFillIn(n,l)}return a=r.op="beforeFindAll",e.utils.resolve(i[a](t,n,r)).then(function(){return a=r.op="findAll",i.dbg(a,t,n,r),e.utils.resolve(i._findAll(t,n,r))}).then(function(n){var o=h.slicedToArray(n,1),a=o[0];a||(a=[]),u=a;var s=[];return e.utils.forEachRelation(t,r,function(e,n){var r=void 0;!e.foreignKey||"hasOne"!==e.type&&"hasMany"!==e.type?"hasMany"===e.type&&e.localKeys?r=i.loadHasManyLocalKeys(t,e,u,n):"hasMany"===e.type&&e.foreignKeys?r=i.loadHasManyForeignKeys(t,e,u,n):"belongsTo"===e.type&&(r=i.loadBelongsTo(t,e,u,n)):r="hasMany"===e.type?i.loadHasMany(t,e,u,n):i.loadHasOne(t,e,u,n),r&&s.push(r)}),Promise.all(s)}).then(function(){var s=new o(u,{},"findAll");return s.found=u.length,s=i.respond(s,r),a=r.op="afterFindAll",e.utils.resolve(i[a](t,n,r,s)).then(function(t){return e.utils.isUndefined(t)?s:t})})},getOpt:function(t,n){return n||(n={}),e.utils.isUndefined(n[t])?e.utils.plainCopy(this[t]):e.utils.plainCopy(n[t])},loadHasMany:function(t,n,r,o){var i=this,u=!1;e.utils.isObject(r)&&!e.utils.isArray(r)&&(u=!0,r=[r]);var a=r.map(function(e){return i.makeHasManyForeignKey(t,n,e)}),s={where:{}},l=s.where[n.foreignKey]={};return u?l["=="]=a[0]:l.in=a.filter(function(t){return t}),i.findAll(n.getRelation(),s,o).then(function(o){r.forEach(function(r){var i=[];u?i=o:o.forEach(function(o){e.utils.get(o,n.foreignKey)===r[t.idAttribute]&&i.push(o)}),n.setLocalField(r,i)})})},loadHasManyLocalKeys:function(t,n,r,o){var i=this,u=void 0,a=n.getRelation();if(e.utils.isObject(r)&&!e.utils.isArray(r)&&(u=r),u)return i.findAll(a,{where:h.defineProperty({},a.idAttribute,{in:i.makeHasManyLocalKeys(t,n,u)})},o).then(function(t){n.setLocalField(u,t)});var s=function(){var u=[];return r.forEach(function(e){u=u.concat(i.self.makeHasManyLocalKeys(t,n,e))}),{v:i.findAll(a,{where:h.defineProperty({},a.idAttribute,{in:v(u).filter(function(t){return t})})},o).then(function(t){return r.forEach(function(r){var o=[],i=e.utils.get(r,n.localKeys)||[];i=e.utils.isArray(i)?i:Object.keys(i),t.forEach(function(t){i&&-1!==i.indexOf(t[a.idAttribute])&&o.push(t)}),n.setLocalField(r,o)}),t})}}();return"object"===("undefined"==typeof s?"undefined":h.typeof(s))?s.v:void 0},loadHasManyForeignKeys:function(t,n,r,o){var i=this,u=n.getRelation(),a=t.idAttribute,s=void 0;return e.utils.isObject(r)&&!e.utils.isArray(r)&&(s=r),s?i.findAll(n.getRelation(),{where:h.defineProperty({},n.foreignKeys,{contains:i.makeHasManyForeignKeys(t,n,s)})},o).then(function(t){n.setLocalField(s,t)}):i.findAll(u,{where:h.defineProperty({},n.foreignKeys,{isectNotEmpty:r.map(function(e){return i.makeHasManyForeignKeys(t,n,e)})})},o).then(function(t){var o=n.foreignKeys;r.forEach(function(r){var i=[],u=e.utils.get(r,a);t.forEach(function(n){var r=e.utils.get(t,o)||[];-1!==r.indexOf(u)&&i.push(n)}),n.setLocalField(r,i)})})},loadHasOne:function(t,n,r,o){return e.utils.isObject(r)&&!e.utils.isArray(r)&&(r=[r]),this.loadHasMany(t,n,r,o).then(function(){r.forEach(function(t){var r=n.getLocalField(t);e.utils.isArray(r)&&r.length&&n.setLocalField(t,r[0])})})},log:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];if(t&&!n.length&&(n.push(t),t="debug"),"debug"!==t||this.debug){var o=t.toUpperCase()+": (Adapter)";if(console[t]){var i;(i=console)[t].apply(i,[o].concat(n))}else{var u;(u=console).log.apply(u,[o].concat(n))}}},makeHasManyForeignKey:function(t,e,n){return e.getForeignKey(n)},makeHasManyLocalKeys:function(t,n,r){var o=[],i=e.utils.get(r,n.localKeys)||[];return i=e.utils.isArray(i)?i:Object.keys(i),o=o.concat(i),v(o).filter(function(t){return t})},makeHasManyForeignKeys:function(t,n,r){return e.utils.get(r,t.idAttribute)},makeBelongsToForeignKey:function(t,e,n){return e.getForeignKey(n)},sum:function(t,n,r,i){var u=this,a=void 0;if(!e.utils.isString(n))throw new Error("field must be a string!");return r||(r={}),i||(i={}),a=i.op="beforeSum",e.utils.resolve(u[a](t,n,r,i)).then(function(){return a=i.op="sum",u.dbg(a,t,n,r,i),e.utils.resolve(u._sum(t,n,r,i))}).then(function(s){var l=h.slicedToArray(s,2),f=l[0],c=l[1];c||(c={});var d=new o(f,c,a);return d=u.respond(d,i),a=i.op="afterSum",e.utils.resolve(u[a](t,n,r,i,d)).then(function(t){return e.utils.isUndefined(t)?d:t})})},respond:function(t,e){return this.getOpt("raw",e)?t:t.data},update:function(t,n,r,i){var u=this;r||(r={}),i||(i={});var a=void 0;return a=i.op="beforeUpdate",e.utils.resolve(u[a](t,n,r,i)).then(function(o){return r=e.utils.isUndefined(o)?r:o,r=g(t,r),a=i.op="update",u.dbg(a,t,n,r,i),e.utils.resolve(u._update(t,n,r,i))}).then(function(s){var l=h.slicedToArray(s,2),f=l[0],c=l[1];c||(c={});var d=new o(f,c,"update");return d.updated=f?1:0,d=u.respond(d,i),a=i.op="afterUpdate",e.utils.resolve(u[a](t,n,r,i,d)).then(function(t){return e.utils.isUndefined(t)?d:t})})},updateAll:function(t,n,r,i){var u=this;n||(n={}),r||(r={}),i||(i={});var a=void 0;return a=i.op="beforeUpdateAll",e.utils.resolve(u[a](t,n,r,i)).then(function(o){return n=e.utils.isUndefined(o)?n:o,n=g(t,n),a=i.op="updateAll",u.dbg(a,t,n,r,i),e.utils.resolve(u._updateAll(t,n,r,i))}).then(function(s){var l=h.slicedToArray(s,2),f=l[0],c=l[1];f||(f=[]),c||(c={});var d=new o(f,c,"updateAll");return d.updated=f.length,d=u.respond(d,i),a=i.op="afterUpdateAll",e.utils.resolve(u[a](t,n,r,i,d)).then(function(t){return e.utils.isUndefined(t)?d:t})})},updateMany:function(t,n,r){var i=this;n||(n=[]),r||(r={});var u=void 0,a=t.idAttribute;return n=n.filter(function(t){return e.utils.get(t,a)}),u=r.op="beforeUpdateMany",e.utils.resolve(i[u](t,n,r)).then(function(o){return n=e.utils.isUndefined(o)?n:o,n=n.map(function(e){return g(t,e)}),u=r.op="updateMany",i.dbg(u,t,n,r),e.utils.resolve(i._updateMany(t,n,r))}).then(function(a){var s=h.slicedToArray(a,2),l=s[0],f=s[1];l||(l=[]),f||(f={});var c=new o(l,f,"updateMany");return c.updated=l.length,c=i.respond(c,r),u=r.op="afterUpdateMany",e.utils.resolve(i[u](t,n,r,c)).then(function(t){return e.utils.isUndefined(t)?c:t})})}});var A=n(function(t){function e(t){return null===t?"Null":t===n?"Undefined":r.exec(o.call(t))[1]}var n,r=/^\[object (.*)\]$/,o=Object.prototype.toString;t.exports=e}),m=A&&"object"==typeof A&&"default"in A?A.default:A,M=n(function(t){function e(t,e){return n(t)===e}var n=m;t.exports=e}),w=M&&"object"==typeof M&&"default"in M?M.default:M,I=n(function(t){var e=w,n=Array.isArray||function(t){return e(t,"Array")};t.exports=n}),P=I&&"object"==typeof I&&"default"in I?I.default:I,K=n(function(t){t.exports=2147483647}),j=K&&"object"==typeof K&&"default"in K?K.default:K,F=n(function(t){t.exports=-2147483648}),_=F&&"object"==typeof F&&"default"in F?F.default:F,U=n(function(t){function e(){return e.get()}e.get=Math.random,t.exports=e}),x=U&&"object"==typeof U&&"default"in U?U.default:U,T=n(function(t){function e(t,e){return t=null==t?r:t,e=null==e?o:e,t+(e-t)*n()}var n=x,r=_,o=j;t.exports=e}),O=T&&"object"==typeof T&&"default"in T?T.default:T,H=n(function(t){function e(t,e){return t=null==t?n:~~t,e=null==e?r:~~e,Math.round(o(t-.5,e+.499999999999))}var n=_,r=j,o=O;t.exports=e}),E=H&&"object"==typeof H&&"default"in H?H.default:H,S=n(function(t){function e(t){var e=1===arguments.length&&r(t)?t:arguments;return e[n(0,e.length-1)]}var n=E,r=P;t.exports=e}),L=S&&"object"==typeof S&&"default"in S?S.default:S,C=n(function(t){function e(t){t=t&&t>0?t:6;for(var e="";t--;)e+=n(r);return e}var n=L,r="0123456789abcdef".split("");t.exports=e}),k=C&&"object"==typeof C&&"default"in C?C.default:C,J=n(function(t){function e(){return n(8)+"-"+n(4)+"-4"+n(3)+"-"+r(8,9,"a","b")+n(3)+"-"+n(12)}var n=k,r=L;t.exports=e}),D=J&&"object"==typeof J&&"default"in J?J.default:J,R=D,B=r.prototype,N={basePath:"",storage:localStorage},q=[],$=!1;d.prototype=Object.create(r.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),Object.defineProperty(d,"__super__",{configurable:!0,value:r}),d.extend=e.utils.extend,e.utils.addHiddenPropsToTarget(d.prototype,{_count:function(t,e,n){var r=this;return r._findAll(t,e,n).then(function(t){return t[0]=t[0].length,t})},_createHelper:function(t,n,r){var o=this,i={},u=t.relationFields||[];e.utils.forOwn(n,function(t,e){-1===u.indexOf(e)&&(i[e]=t)});var a=e.utils.get(i,t.idAttribute)||R();e.utils.set(i,t.idAttribute,a);var s=o.getIdPath(t,r,a);return o.storage.setItem(s,e.utils.toJson(i)),o.ensureId(a,t,r),e.utils.fromJson(o.storage.getItem(s))},_create:function(t,e,n){var r=this;return new Promise(function(o){return o([r._createHelper(t,e,n),{}])})},_createMany:function(t,e,n){var r=this;return new Promise(function(o){return e||(e=[]),o([e.map(function(e){return r._createHelper(t,e,n)}),{}])})},_destroy:function(t,e,n){var r=this;return new Promise(function(o){return r.storage.removeItem(r.getIdPath(t,n,e)),r.removeId(e,t,n),o([void 0,{}])})},_destroyAll:function(t,n,r){var o=this;return o._findAll(t,n).then(function(n){var i=h.slicedToArray(n,1),u=i[0],a=t.idAttribute,s=u.map(function(t){return e.utils.get(t,a)});return s.forEach(function(e){o.storage.removeItem(o.getIdPath(t,r,e))}),o.removeId(s,t,r),[void 0,{}]})},_find:function(t,n,r){var o=this;return new Promise(function(i){var u=o.getIdPath(t,r,n),a=o.storage.getItem(u);return i([a?e.utils.fromJson(a):void 0,{}])})},_findAll:function(t,n,r){var o=this;return n||(n={}),new Promise(function(i){var u=[],a=o.getIds(t,r);e.utils.forOwn(a,function(n,i){var a=o.storage.getItem(o.getIdPath(t,r,i));a&&u.push(e.utils.fromJson(a))});var s=new e.Query({index:{getAll:function(){return u}}});return i([s.filter(n).run(),{}])})},_sum:function(t,n,r,o){var i=this;return i._findAll(t,r,o).then(function(t){var r=0;return t[0].forEach(function(t){r+=e.utils.get(t,n)||0}),t[0]=r,t})},_update:function(t,n,r,o){var i=this;return r||(r={}),new Promise(function(u,a){var s=i.getIdPath(t,o,n),l=i.storage.getItem(s);return l?(l=e.utils.fromJson(l),e.utils.deepMixIn(l,r),i.storage.setItem(s,e.utils.toJson(l)),u([l,{}])):a(new Error("Not Found"))})},_updateAll:function(t,n,r,o){var i=this,u=t.idAttribute;return i._findAll(t,r,o).then(function(r){var a=h.slicedToArray(r,1),s=a[0];return s.forEach(function(r){r||(r={});var a=e.utils.get(r,u),s=i.getIdPath(t,o,a);e.utils.deepMixIn(r,n),i.storage.setItem(s,e.utils.toJson(r))}),[s,{}]})},_updateMany:function(t,n,r){var o=this;return n||(n=[]),new Promise(function(i){var u=[],a=t.idAttribute;return n.forEach(function(n){if(n){var i=e.utils.get(n,a);if(!e.utils.isUndefined(i)){var s=o.getIdPath(t,r,i),l=o.storage.getItem(s);if(l){var f=e.utils.fromJson(l);e.utils.deepMixIn(f,n),o.storage.setItem(s,e.utils.toJson(f)),u.push(f)}}}}),i([n,{}])})},create:function(t,e,n){var r=this;return c(function(o,i){f(function(){B.create.call(r,t,e,n).then(o,i)})})},createMany:function(t,e,n){var r=this;return c(function(o,i){f(function(){B.createMany.call(r,t,e,n).then(o,i)})})},destroy:function(t,e,n){var r=this;return c(function(o,i){f(function(){B.destroy.call(r,t,e,n).then(o,i)})})},destroyAll:function(t,e,n){var r=this;return c(function(o,i){f(function(){B.destroyAll.call(r,t,e,n).then(o,i)})})},ensureId:function(t,n,r){var o=this.getIds(n,r);if(e.utils.isArray(t)){if(!t.length)return;t.forEach(function(t){o[t]=1})}else o[t]=1;this.saveKeys(o,n,r)},getPath:function(t,e){return e=e||{},a(void 0===e.basePath?void 0===t.basePath?this.basePath:t.basePath:e.basePath,t.name)},getIdPath:function(t,e,n){return e=e||{},a(e.basePath||this.basePath||t.basePath,t.endpoint,n)},getIds:function(t,n){var r=void 0,o=this.getPath(t,n),i=this.storage.getItem(o);return r=i?e.utils.fromJson(i):{}},removeId:function(t,n,r){var o=this.getIds(n,r);if(e.utils.isArray(t)){if(!t.length)return;t.forEach(function(t){delete o[t]})}else delete o[t];this.saveKeys(o,n,r)},saveKeys:function(t,n,r){t=t||{};var o=this.getPath(n,r);Object.keys(t).length?this.storage.setItem(o,e.utils.toJson(t)):this.storage.removeItem(o)},update:function(t,e,n,r){var o=this;return c(function(i,u){f(function(){B.update.call(o,t,e,n,r).then(i,u)})})},updateAll:function(t,e,n,r){var o=this;return c(function(i,u){f(function(){B.updateAll.call(o,t,e,n,r).then(i,u)})})},updateMany:function(t,e,n){var r=this;return c(function(o,i){f(function(){B.updateMany.call(r,t,e,n).then(o,i)})})}});var Q={beta:1,full:"3.0.0-beta.1",major:3,minor:0,patch:0};t.LocalStorageAdapter=d,t.version=Q,t.default=d});
//# sourceMappingURL=js-data-localstorage.min.map