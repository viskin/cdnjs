!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Hls=e()}}(function(){return function e(t,r,i){function s(a,o){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(n)return n(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return s(r?r:e)},d,d.exports,e,t,r,i)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)s(i[a]);return s}({"/Users/g.dupontavice/workdir/github/mse-hls/node_modules/browserify/node_modules/events/events.js":[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,s,o,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,o=new Array(s-1),l=1;s>l;l++)o[l-1]=arguments[l];r.apply(this,o)}else if(n(r)){for(s=arguments.length,o=new Array(s-1),l=1;s>l;l++)o[l-1]=arguments[l];for(u=r.slice(),s=u.length,l=0;s>l;l++)u[l].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var s;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned){var s;s=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),s||(s=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var s=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,s,a,o;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,s=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(r)){for(o=a;o-->0;)if(r[o]===t||r[o].listener&&r[o].listener===t){s=o;break}if(0>s)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],"/Users/g.dupontavice/workdir/github/mse-hls/src/controller/buffer-controller.js":[function(e,t){"use strict";var r=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},i=function(e){return e&&(e.default||e)},s=i(e("../events")),n=i(e("../loader/fragment-loader")),a=i(e("../observer")),o=e("../utils/logger").logger,l=i(e("../demux/tsdemuxer")),u=0,d=1,h=2,c=5,f=function(){function e(e){this.video=e,this.fragmentLoader=new n,this.demuxer=new l,this.mp4segments=[],this.onsbue=this.onSourceBufferUpdateEnd.bind(this),this.onsbe=this.onSourceBufferError.bind(this),this.onll=this.onLevelLoaded.bind(this),this.onfl=this.onFragmentLoaded.bind(this),this.onfp=this.onFragmentParsed.bind(this),this.ontick=this.tick.bind(this),this.state=h}return r(e,null,{destroy:{value:function(){this.stop(),this.fragmentLoader.destroy(),this.demuxer.destroy(),this.mp4segments=[],this.sourceBuffer.removeEventListener("updateend",this.onsbue),this.sourceBuffer.removeEventListener("error",this.onsbe),this.state=h},writable:!0,enumerable:!0,configurable:!0},start:{value:function(e,t){this.levels=e,this.sourceBuffer=t,this.stop(),this.timer=setInterval(this.ontick,100),a.on(s.FRAGMENT_LOADED,this.onfl),a.on(s.FRAGMENT_PARSED,this.onfp),a.on(s.LEVEL_LOADED,this.onll),t.addEventListener("updateend",this.onsbue),t.addEventListener("error",this.onsbe)},writable:!0,enumerable:!0,configurable:!0},stop:{value:function(){this.timer&&clearInterval(this.ontick),this.timer=void 0,a.removeListener(s.FRAGMENT_LOADED,this.onfl),a.removeListener(s.FRAGMENT_PARSED,this.onfp),a.removeListener(s.LEVEL_LOADED,this.onll)},writable:!0,enumerable:!0,configurable:!0},tick:{value:function(){if(this.state===u&&!this.sourceBuffer.updating){var e,t,r,i=this.video,n=i.currentTime,l=i.buffered;for(r=0,e=0,t=n;r<l.length;r++)n>=l.start(r)&&n<l.end(r)&&(t=l.end(r),e=t-n);if(60>e){var h=this.levels[this.level].fragments;for(r=0;r<h.length&&!(h[r].start<=t+.1&&h[r].start+h[r].duration>t+.1);r++);r<h.length?(o.log("loading frag "+r),this.fragmentLoader.load(h[r].url),this.state=d):(o.log("last fragment loaded"),a.trigger(s.LAST_FRAGMENT_LOADED),this.state=c)}}},writable:!0,enumerable:!0,configurable:!0},onLevelLoaded:{value:function(e,t){this.level=t.level,this.demuxer.duration=this.levels[this.level].totalduration,this.fragmentIndex=0;var r=t.stats;o.log("level loaded,RTT(ms)/load(ms)/duration:"+(r.tfirst-r.trequest)+"/"+(r.tend-r.trequest)+"/"+this.demuxer.duration),this.state=u},writable:!0,enumerable:!0,configurable:!0},onFragmentLoaded:{value:function(e,t){this.demuxer.push(new Uint8Array(t.payload)),this.demuxer.end(),this.state=u;var r,i,s,n;r=t.stats,i=r.tfirst-r.trequest,s=r.tend-r.trequest,n=8*r.length/(1e3*s)},writable:!0,enumerable:!0,configurable:!0},onFragmentParsed:{value:function(e,t){this.mp4segments.push(t),this.appendSegments()},writable:!0,enumerable:!0,configurable:!0},appendSegments:{value:function(){this.sourceBuffer&&!this.sourceBuffer.updating&&this.mp4segments.length&&this.sourceBuffer.appendBuffer(this.mp4segments.shift().data)},writable:!0,enumerable:!0,configurable:!0},onSourceBufferUpdateEnd:{value:function(){this.appendSegments()},writable:!0,enumerable:!0,configurable:!0},onSourceBufferError:{value:function(){o.log(" buffer append error:"+event)},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=f},{"../demux/tsdemuxer":"/Users/g.dupontavice/workdir/github/mse-hls/src/demux/tsdemuxer.js","../events":"/Users/g.dupontavice/workdir/github/mse-hls/src/events.js","../loader/fragment-loader":"/Users/g.dupontavice/workdir/github/mse-hls/src/loader/fragment-loader.js","../observer":"/Users/g.dupontavice/workdir/github/mse-hls/src/observer.js","../utils/logger":"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/logger.js"}],"/Users/g.dupontavice/workdir/github/mse-hls/src/demux/exp-golomb.js":[function(e,t){"use strict";var r=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},i=e("../utils/logger").logger,s=function(){function e(e){this.workingData=e,this.workingBytesAvailable=this.workingData.byteLength,this.workingWord=0,this.workingBitsAvailable=0}return r(e,null,{loadWord:{value:function(){var e=this.workingData.byteLength-this.workingBytesAvailable,t=new Uint8Array(4),r=Math.min(4,this.workingBytesAvailable);if(0===r)throw new Error("no bytes available");t.set(this.workingData.subarray(e,e+r)),this.workingWord=new DataView(t.buffer).getUint32(0),this.workingBitsAvailable=8*r,this.workingBytesAvailable-=r},writable:!0,enumerable:!0,configurable:!0},skipBits:{value:function(e){var t;this.workingBitsAvailable>e?(this.workingWord<<=e,this.workingBitsAvailable-=e):(e-=this.workingBitsAvailable,t=e/8,e-=8*t,this.workingBytesAvailable-=t,this.loadWord(),this.workingWord<<=e,this.workingBitsAvailable-=e)},writable:!0,enumerable:!0,configurable:!0},readBits:{value:function(e){var t=Math.min(this.workingBitsAvailable,e),r=this.workingWord>>>32-t;return e>32&&i.error("Cannot read more than 32 bits at a time"),this.workingBitsAvailable-=t,this.workingBitsAvailable>0?this.workingWord<<=t:this.workingBytesAvailable>0&&this.loadWord(),t=e-t,t>0?r<<t|this.readBits(t):r},writable:!0,enumerable:!0,configurable:!0},skipLeadingZeros:{value:function(){var e;for(e=0;e<this.workingBitsAvailable;++e)if(0!==(this.workingWord&2147483648>>>e))return this.workingWord<<=e,this.workingBitsAvailable-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},writable:!0,enumerable:!0,configurable:!0},skipUnsignedExpGolomb:{value:function(){this.skipBits(1+this.skipLeadingZeros())},writable:!0,enumerable:!0,configurable:!0},skipExpGolomb:{value:function(){this.skipBits(1+this.skipLeadingZeros())},writable:!0,enumerable:!0,configurable:!0},readUnsignedExpGolomb:{value:function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},writable:!0,enumerable:!0,configurable:!0},readExpGolomb:{value:function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},writable:!0,enumerable:!0,configurable:!0},readBoolean:{value:function(){return 1===this.readBits(1)},writable:!0,enumerable:!0,configurable:!0},readUnsignedByte:{value:function(){return this.readBits(8)},writable:!0,enumerable:!0,configurable:!0},skipScalingList:{value:function(e){var t,r,i=8,s=8;for(t=0;e>t;t++)0!==s&&(r=this.readExpGolomb(),s=(i+r+256)%256),i=0===s?i:s},writable:!0,enumerable:!0,configurable:!0},readSequenceParameterSet:{value:function(){var e,t,r,i,s,n,a,o,l,u,d,h=0,c=0,f=0,g=0;if(e=this.readUnsignedByte(),r=this.readBits(5),this.skipBits(3),t=this.readUnsignedByte(),this.skipUnsignedExpGolomb(),(100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e)&&(i=this.readUnsignedExpGolomb(),3===i&&this.skipBits(1),this.skipUnsignedExpGolomb(),this.skipUnsignedExpGolomb(),this.skipBits(1),this.readBoolean()))for(u=3!==i?8:12,d=0;u>d;d++)this.readBoolean()&&this.skipScalingList(6>d?16:64);if(this.skipUnsignedExpGolomb(),s=this.readUnsignedExpGolomb(),0===s)this.readUnsignedExpGolomb();else if(1===s)for(this.skipBits(1),this.skipExpGolomb(),this.skipExpGolomb(),n=this.readUnsignedExpGolomb(),d=0;n>d;d++)this.skipExpGolomb();return this.skipUnsignedExpGolomb(),this.skipBits(1),a=this.readUnsignedExpGolomb(),o=this.readUnsignedExpGolomb(),l=this.readBits(1),0===l&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(h=this.readUnsignedExpGolomb(),c=this.readUnsignedExpGolomb(),f=this.readUnsignedExpGolomb(),g=this.readUnsignedExpGolomb()),{profileIdc:e,levelIdc:t,profileCompatibility:r,width:16*(a+1)-2*h-2*c,height:(2-l)*(o+1)*16-2*f-2*g}},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=s},{"../utils/logger":"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/logger.js"}],"/Users/g.dupontavice/workdir/github/mse-hls/src/demux/tsdemuxer.js":[function(e,t){"use strict";var r,i,s,n,a,o,l,u,d,h,c,f,g,b=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},p=function e(t,r,i){var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,i)}if("value"in s&&s.writable)return s.value;var a=s.get;return void 0===a?void 0:a.call(i)},v=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},m=function(e){return e&&(e.default||e)},y=m(e("../events")),w=m(e("./exp-golomb")),L=m(e("../remux/mp4-generator")),E=m(e("../observer")),A=m(e("../utils/stream")),k=e("../utils/logger").logger,U=188,x=27,S=15,_=0,D=function(e){function t(){p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.buffer=new Uint8Array(U),this.end=0}return v(t,e),b(t,null,{push:{value:function(e){var t,r;if(this.end>0){if(t=U-this.end,this.buffer.set(e.subarray(0,t),this.end),e.byteLength<t)return void(this.end+=e.byteLength);e=e.subarray(t),this.end=0,this.trigger("data",this.buffer)}if(e.byteLength<U)return this.buffer.set(e.subarray(r),this.end),void(this.end+=e.byteLength);r=0;do this.trigger("data",e.subarray(r,r+U)),r+=U,t=e.byteLength-r;while(r<e.byteLength&&t>=U);t>0&&(this.buffer.set(e.subarray(r)),this.end=t)},writable:!0,enumerable:!0,configurable:!0}}),t}(A),T=function(e){function t(){p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.programMapTable={}}return v(t,e),b(t,null,{parsePsi:{value:function(e,t){var r=0;t.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===t.type?this.parsePat(e.subarray(r),t):this.parsePmt(e.subarray(r),t)},writable:!0,enumerable:!0,configurable:!0},parsePat:{value:function(e,t){t.sectionNumber=e[7],t.lastSectionNumber=e[8],t.pmtPid=this.pmtPid=(31&e[10])<<8|e[11]},writable:!0,enumerable:!0,configurable:!0},parsePmt:{value:function(e,t){var r,i,s,n;if(1&e[5]){for(this.programMapTable={},r=(15&e[1])<<8|e[2],i=3+r-4,s=(15&e[10])<<8|e[11],n=12+s;i>n;)this.programMapTable[(31&e[n+1])<<8|e[n+2]]=e[n],n+=((15&e[n+3])<<8|e[n+4])+5;t.programMapTable=this.programMapTable}},writable:!0,enumerable:!0,configurable:!0},parsePes:{value:function(e,t){var r;return t.payloadUnitStartIndicator?(t.dataAlignmentIndicator=0!==(4&e[6]),r=e[7],192&r&&(t.pts=(14&e[9])<<28|(255&e[10])<<21|(254&e[11])<<13|(255&e[12])<<6|(254&e[13])>>>2,t.pts/=45,t.dts=t.pts,64&r&&(t.dts=(14&e[14])<<28|(255&e[15])<<21|(254&e[16])<<13|(255&e[17])<<6|(254&e[18])>>>2,t.dts/=45)),void(t.data=e.subarray(9+e[8]))):void(t.data=e)},writable:!0,enumerable:!0,configurable:!0},push:{value:function(e){var t={},r=4;if(71!==e[0])return this.trigger("error","mis-aligned packet");if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],(48&e[3])>>>4>1&&(r+=e[r]+1),t.pid===_)t.type="pat",this.parsePsi(e.subarray(r),t);else if(t.pid===this.pmtPid)t.type="pmt",this.parsePsi(e.subarray(r),t);else{if(t.streamType=this.programMapTable[t.pid],void 0===t.streamType)return;t.type="pes",this.parsePes(e.subarray(r),t)}this.trigger("data",t)},writable:!0,enumerable:!0,configurable:!0}}),t}(A),O=function(e){function t(){p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.audio={data:[],size:0},this.video={data:[],size:0}}return v(t,e),b(t,null,{flushStream:{value:function(e,t){var r,i={type:t,data:new Uint8Array(e.size)},s=0;if(e.data.length){for(i.trackId=e.data[0].pid,i.pts=e.data[0].pts,i.dts=e.data[0].dts;e.data.length;)r=e.data.shift(),i.data.set(r.data,s),s+=r.data.byteLength;e.size=0,this.trigger("data",i)}},writable:!0,enumerable:!0,configurable:!0},push:{value:function(e){switch(e.type){case"pat":break;case"pmt":var t,r,i={type:"metadata",tracks:[]},s=e.programMapTable;for(t in s)s.hasOwnProperty(t)&&(r={},r.id=+t,s[t]===x?(r.codec="avc",r.type="video"):s[t]===S&&(r.codec="adts",r.type="audio"),i.tracks.push(r));this.trigger("data",i);break;case"pes":var n,a;e.streamType===x?(n=this.video,a="video"):(n=this.audio,a="audio"),e.payloadUnitStartIndicator&&this.flushStream(n,a),n.data.push(e),n.size+=e.data.byteLength}},writable:!0,enumerable:!0,configurable:!0},end:{value:function(){this.flushStream(this.video,"video"),this.flushStream(this.audio,"audio")},writable:!0,enumerable:!0,configurable:!0}}),t}(A),R=function(e){function t(){p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.adtsSampleingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3]}return v(t,e),b(t,null,{getAudioSpecificConfig:{value:function(e){var t,r,i,s,n,a,o;t=!!(1&e[1]),r=((192&e[2])>>>6)+1,i=(60&e[2])>>>2,s=(1&e[2])<<2,s|=(192&e[3])>>>6,n=(3&e[3])<<11,n|=e[4]<<3,n|=(224&e[5])>>>5,n-=t?7:9,a=1024*((3&e[6])+1),o=1e3*a/this.adtsSampleingRates[i],this.config=new Uint8Array(2),this.config[0]=r<<3,this.config[0]|=(14&i)>>1,this.config[1]|=(1&i)<<7,this.config[1]|=s<<3,this.stereo=2===s,this.audiosamplerate=this.adtsSampleingRates[i]},writable:!0,enumerable:!0,configurable:!0},push:{value:function(e){if("audio"===e.type&&void 0!==e.data){var t,r=e.pts,i=e.data;255!==i[0]&&k.error("Error no ATDS header found"),void 0===this.config&&this.getAudioSpecificConfig(i),t={},t.pts=r,t.dts=r,t.bytes=new Uint8Array,t.audiocodecid=10,t.stereo=this.stereo,t.audiosamplerate=this.audiosamplerate,t.audiosamplesize=16,t.bytes=e.data.subarray(7,e.data.length),e.frame=t,e.config=this.config,this.trigger("data",e)}},writable:!0,enumerable:!0,configurable:!0}}),t}(A),P=function(e){function t(){p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.index=6,this.syncPoint=1,this.buffer=null}return v(t,e),b(t,null,{push:{value:function(e){var t;this.buffer?(t=new Uint8Array(this.buffer.byteLength+e.data.byteLength),t.set(this.buffer),t.set(e.data,this.buffer.byteLength),this.buffer=t):this.buffer=e.data;for(var r=this.index,i=this.syncPoint,s=this.buffer;r<s.byteLength;)switch(s[r]){case 0:if(0!==s[r-1]){r+=2;break}if(0!==s[r-2]){r++;break}this.trigger("data",s.subarray(i+3,r-2));do r++;while(1!==s[r]);i=r-2,r+=3;break;case 1:if(0!==s[r-1]||0!==s[r-2]){r+=3;break}this.trigger("data",s.subarray(i+3,r-2)),i=r-2,r+=3;break;default:r+=3}this.buffer=s.subarray(i),r-=i,this.index=r,this.syncPoint=0},writable:!0,enumerable:!0,configurable:!0},end:{value:function(){this.buffer.byteLength>3&&this.trigger("data",this.buffer.subarray(this.syncPoint+3)),this.buffer=null,this.index=6,this.syncPoint=1},writable:!0,enumerable:!0,configurable:!0}}),t}(A),B=function(e){function t(){p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.nalByteStream=new P,this.nalByteStream.on("data",function(e){var t={trackId:this.trackId,pts:this.currentPts,dts:this.currentDts,data:e};switch(31&e[0]){case 5:t.nalUnitType="IDR";break;case 7:t.nalUnitType="SPS";var r=new w(e.subarray(1));t.config=r.readSequenceParameterSet();break;case 8:t.nalUnitType="PPS";break;case 9:t.nalUnitType="AUD"}this.trigger("data",t)}.bind(this))}return v(t,e),b(t,null,{push:{value:function(e){"video"===e.type&&(this.trackId=e.trackId,this.currentPts=e.pts,this.currentDts=e.dts,this.nalByteStream.push(e))},writable:!0,enumerable:!0,configurable:!0},end:{value:function(){this.nalByteStream.end()},writable:!0,enumerable:!0,configurable:!0}}),t}(A),M=function(e){function t(e){p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.sequenceNumber=0,this.nalUnits=[],this.nalUnitsLength=0,this.track=e}return v(t,e),b(t,null,{push:{value:function(e){this.nalUnits.push(e),this.nalUnitsLength+=e.data.byteLength},writable:!0,enumerable:!0,configurable:!0},end:{value:function(){var e,t,r,i,s,n,a,o,l,u;for(a=new Uint8Array(this.nalUnitsLength+4*this.nalUnits.length),o=new DataView(a.buffer),this.track.samples=[],l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,isNonSyncSample:1,degradationPriority:0}},n=0,u=this.nalUnits[0].dts,void 0===this.initDts&&(this.initDts=u);this.nalUnits.length;)t=this.nalUnits[0],"AUD"===t.nalUnitType&&(e&&(l.duration=90*(t.dts-e.dts),this.track.samples.push(l)),l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,isNonSyncSample:1,degradationPriority:0},compositionTimeOffset:t.pts-t.dts},e=t),"IDR"===t.nalUnitType&&(l.flags.dependsOn=2,l.flags.isNonSyncSample=0),l.size+=4,l.size+=t.data.byteLength,o.setUint32(n,t.data.byteLength),n+=4,a.set(t.data,n),n+=t.data.byteLength,this.nalUnits.shift();this.track.samples.length&&(l.duration=this.track.samples[this.track.samples.length-1].duration),this.track.samples.push(l),this.nalUnitsLength=0,i=L.mdat(a),r=L.moof(this.sequenceNumber,90*(u-this.initDts),this.track),s=new Uint8Array(r.byteLength+i.byteLength),this.sequenceNumber++,s.set(r),s.set(i,r.byteLength),this.trigger("data",s)},writable:!0,enumerable:!0,configurable:!0}}),t}(A),N=function(e){function t(e){p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.sequenceNumber=0,this.aacUnits=[],this.aacUnitsLength=0,this.track=e}return v(t,e),b(t,null,{push:{value:function(e){e.data=e.data.subarray(7),this.aacUnits.push(e),this.aacUnitsLength+=e.data.byteLength},writable:!0,enumerable:!0,configurable:!0},end:{value:function(){var e,t,r,i,s,n,a,o,l;e=new Uint8Array(this.aacUnitsLength),t=new DataView(e.buffer),this.track.samples=[];var u={size:this.aacUnits[0].data.byteLength,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0},compositionTimeOffset:0};for(r=0,s=this.aacUnits[0].dts,void 0===this.initDts&&(this.initDts=s),n=null;this.aacUnits.length;)i=this.aacUnits[0],null!=n&&(u.duration=90*(i.dts-n.dts),this.track.samples.push(u),u={size:i.data.byteLength,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0},compositionTimeOffset:0}),e.set(i.data,r),r+=i.data.byteLength,this.aacUnits.shift(),n=i;this.track.samples.length&&(u.duration=this.track.samples[this.track.samples.length-1].duration,this.track.samples.push(u)),this.aacUnitsLength=0,a=L.mdat(e),o=L.moof(this.sequenceNumber,90*(s-this.initDts),this.track),l=new Uint8Array(o.byteLength+a.byteLength),this.sequenceNumber++,l.set(o),l.set(a,o.byteLength),this.trigger("data",l)},writable:!0,enumerable:!0,configurable:!0}}),t}(A),j=function(){function e(){r=new D,i=new T,s=new O,n=new R,a=new B,r.pipe(i),i.pipe(s),s.pipe(n),s.pipe(a),n.on("data",function(e){u||(c.config=u=e.config,c.audiosamplerate=e.audiosamplerate,c.duration=9e4*f,d&&E.trigger(y.FRAGMENT_PARSED,{data:L.initSegment([h,c])}))}),a.on("data",function(e){"SPS"!==e.nalUnitType||d||(d=e.config,h.width=d.width,h.height=d.height,h.sps=[e.data],h.profileIdc=d.profileIdc,h.levelIdc=d.levelIdc,h.profileCompatibility=d.profileCompatibility,h.duration=9e4*f,g&&E.trigger(y.FRAGMENT_PARSED,{data:L.initSegment([h,c])})),"PPS"!==e.nalUnitType||g||(g=e.data,h.pps=[e.data],d&&u&&E.trigger(y.FRAGMENT_PARSED,{data:L.initSegment([h,c])}))}),s.on("data",function(e){var t,r=function(e){E.trigger(y.FRAGMENT_PARSED,{data:e})};if("metadata"===e.type)for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?(h=e.tracks[t],l||(l=new M(h),a.pipe(l),l.on("data",r))):"audio"===e.tracks[t].type&&(c=e.tracks[t],o||(o=new N(c),n.pipe(o),o.on("data",r)))})}return b(e,null,{duration:{set:function(e){f=e},get:function(){return f},enumerable:!0,configurable:!0},push:{value:function(e){r.push(e)},writable:!0,enumerable:!0,configurable:!0},end:{value:function(){s.end(),a.end(),l.end(),o.end()},writable:!0,enumerable:!0,configurable:!0},destroy:{value:function(){o=l=null,u=d=h=c=g=null,f=0},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=j},{"../events":"/Users/g.dupontavice/workdir/github/mse-hls/src/events.js","../observer":"/Users/g.dupontavice/workdir/github/mse-hls/src/observer.js","../remux/mp4-generator":"/Users/g.dupontavice/workdir/github/mse-hls/src/remux/mp4-generator.js","../utils/logger":"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/logger.js","../utils/stream":"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/stream.js","./exp-golomb":"/Users/g.dupontavice/workdir/github/mse-hls/src/demux/exp-golomb.js"}],"/Users/g.dupontavice/workdir/github/mse-hls/src/events.js":[function(e,t){"use strict";t.exports={FRAMEWORK_READY:"hlsFrameworkReady",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_ENDLIST:"hlsLevelEndList",FRAGMENT_LOADING:"hlsFragmentLoading",FRAGMENT_LOADED:"hlsFragmentLoaded",LAST_FRAGMENT_LOADED:"hlsLastFragmentLoaded",FRAGMENT_PARSED:"hlsFragmentParsed",LOAD_ERROR:"hlsLoadError",LEVEL_ERROR:"hlsLevelError",MEDIA_TIME:"hlsMediaTime",PLAYBACK_STATE:"hlsPlaybackState",SEEK_STATE:"hlsSeekState",PLAYBACK_COMPLETE:"hlsPlayBackComplete"}},{}],"/Users/g.dupontavice/workdir/github/mse-hls/src/hls.js":[function(e,t){"use strict";var r=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},i=function(e){return e&&(e.default||e)},s=i(e("./events")),n=i(e("./observer")),a=i(e("./loader/playlist-loader")),o=i(e("./controller/buffer-controller")),l=e("./utils/logger").logger,u=e("./utils/logger").enableLogs,d=function(){function e(e){this.playlistLoader=new a,this.bufferController=new o(e),this.Events=s,this.debug=u,this.logEvt=this.logEvt,this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),this.onml=this.onManifestLoaded.bind(this),this.on=n.on.bind(n),this.off=n.removeListener.bind(n),this.video=e,this.attachView(e)}return r(e,{isSupported:{value:function(){return window.MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},writable:!0,enumerable:!0,configurable:!0}},{destroy:{value:function(){this.detachSource(),this.detachView()},writable:!0,enumerable:!0,configurable:!0},attachView:{value:function(e){var t=this.mediaSource=new MediaSource;t.addEventListener("sourceopen",this.onmso),t.addEventListener("sourceended",this.onmse),t.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(t);var r=function(e){this.logEvt(e)}.bind(this);this.videoListenerBind=r,e.addEventListener("loadstart",r),e.addEventListener("suspend",r),e.addEventListener("abort",r),e.addEventListener("error",r),e.addEventListener("emptied",r),e.addEventListener("stalled",r),e.addEventListener("loadedmetadata",r),e.addEventListener("loadeddata",r),e.addEventListener("canplay",r),e.addEventListener("canplaythrough",r),e.addEventListener("playing",r),e.addEventListener("waiting",r),e.addEventListener("seeking",r),e.addEventListener("seeked",r),e.addEventListener("durationchange",r),e.addEventListener("play",r),e.addEventListener("pause",r),e.addEventListener("ratechange",r),e.addEventListener("resize",r),e.addEventListener("volumechange",r)},writable:!0,enumerable:!0,configurable:!0},detachView:{value:function(){var e=this.video,t=this.videoListenerBind,r=this.mediaSource;if(r){var i=this.sourceBuffer;i&&(r.removeSourceBuffer(i),this.sourceBuffer=null),r.removeEventListener("sourceopen",this.onmso),r.removeEventListener("sourceended",this.onmse),r.removeEventListener("sourceclose",this.onmsc),e.src="",this.mediaSource=null}this.video=null,e.removeEventListener("loadstart",t),e.removeEventListener("suspend",t),e.removeEventListener("abort",t),e.removeEventListener("error",t),e.removeEventListener("emptied",t),e.removeEventListener("stalled",t),e.removeEventListener("loadedmetadata",t),e.removeEventListener("loadeddata",t),e.removeEventListener("canplay",t),e.removeEventListener("canplaythrough",t),e.removeEventListener("playing",t),e.removeEventListener("waiting",t),e.removeEventListener("seeking",t),e.removeEventListener("seeked",t),e.removeEventListener("durationchange",t),e.removeEventListener("play",t),e.removeEventListener("pause",t),e.removeEventListener("ratechange",t),e.removeEventListener("resize",t),e.removeEventListener("volumechange",t)},writable:!0,enumerable:!0,configurable:!0},attachSource:{value:function(e){this.url=e,l.log("attachSource:"+e),this.sourceBuffer=this.mediaSource.addSourceBuffer("video/mp4;codecs=avc1.4d400d,mp4a.40.5"),n.on(s.MANIFEST_LOADED,this.onml),this.playlistLoader.load(e)},writable:!0,enumerable:!0,configurable:!0},detachSource:{value:function(){this.url=null,this.playlistLoader.destroy(),this.bufferController.destroy(),n.removeListener(s.MANIFEST_LOADED,this.onml)},writable:!0,enumerable:!0,configurable:!0},onManifestLoaded:{value:function(e,t){this.levels=t.levels;var r=t.stats;l.log("manifest loaded,RTT(ms)/load(ms):"+(r.tfirst-r.trequest)+"/"+(r.tend-r.trequest)),this.levels.length>1&&(this.playlistLoader.level=this.levels.length-1),this.bufferController.start(this.levels,this.sourceBuffer)},writable:!0,enumerable:!0,configurable:!0},onMediaSourceOpen:{value:function(){n.trigger(s.FRAMEWORK_READY)},writable:!0,enumerable:!0,configurable:!0},onMediaSourceClose:{value:function(){l.log("media source closed")},writable:!0,enumerable:!0,configurable:!0},onMediaSourceEnded:{value:function(){l.log("media source ended")},writable:!0,enumerable:!0,configurable:!0},logEvt:{value:function(e){var t="";switch(e.type){case"durationchange":t=event.target.duration;break;case"resize":t="videoWidth:"+e.target.videoWidth+"/videoHeight:"+e.target.videoHeight;break;case"loadedmetadata":t="duration:"+e.target.duration+"/videoWidth:"+e.target.videoWidth+"/videoHeight:"+e.target.videoHeight;break;case"loadeddata":case"canplay":case"canplaythrough":case"timeupdate":case"seeking":case"seeked":case"pause":case"play":case"stalled":t="currentTime:"+e.target.currentTime}l.log(e.type+":"+t)},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=d},{"./controller/buffer-controller":"/Users/g.dupontavice/workdir/github/mse-hls/src/controller/buffer-controller.js","./events":"/Users/g.dupontavice/workdir/github/mse-hls/src/events.js","./loader/playlist-loader":"/Users/g.dupontavice/workdir/github/mse-hls/src/loader/playlist-loader.js","./observer":"/Users/g.dupontavice/workdir/github/mse-hls/src/observer.js","./utils/logger":"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/logger.js"}],"/Users/g.dupontavice/workdir/github/mse-hls/src/loader/fragment-loader.js":[function(e,t){"use strict";var r=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},i=function(e){return e&&(e.default||e)},s=i(e("../events")),n=i(e("../observer")),a=e("../utils/logger").logger,o=function(){function e(){}return r(e,null,{destroy:{value:function(){this.xhr&&4!==this.xhr.readyState&&(this.xhr.abort(),this.xhr=null)},writable:!0,enumerable:!0,configurable:!0},load:{value:function(e){this.url=e,this.trequest=Date.now(),this.tfirst=null;var t=this.xhr=new XMLHttpRequest;t.onload=this.loadsuccess.bind(this),t.onerror=this.loaderror.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType="arraybuffer",t.open("GET",e,!0),t.send(),n.trigger(s.FRAGMENT_LOADING,{url:this.url})},writable:!0,enumerable:!0,configurable:!0},loadsuccess:{value:function(e){n.trigger(s.FRAGMENT_LOADED,{payload:e.currentTarget.response,url:this.url,stats:{trequest:this.trequest,tfirst:this.tfirst,tend:Date.now(),length:e.currentTarget.response.byteLength}})},writable:!0,enumerable:!0,configurable:!0},loaderror:{value:function(e){a.log("error loading "+this.url),n.trigger(s.LOAD_ERROR,{url:this.url,event:e})},writable:!0,enumerable:!0,configurable:!0},loadprogress:{value:function(){null===this.tfirst&&(this.tfirst=Date.now())},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=o},{"../events":"/Users/g.dupontavice/workdir/github/mse-hls/src/events.js","../observer":"/Users/g.dupontavice/workdir/github/mse-hls/src/observer.js","../utils/logger":"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/logger.js"}],"/Users/g.dupontavice/workdir/github/mse-hls/src/loader/playlist-loader.js":[function(e,t){"use strict";
var r=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},i=function(e){return e&&(e.default||e)},s=i(e("../events")),n=i(e("../observer")),a=e("../utils/logger").logger,o=function(){function e(){this.levels=[],this._level=void 0}return r(e,null,{destroy:{value:function(){this.xhr&&4!==this.xhr.readyState&&(this.xhr.abort(),this.xhr=null),this.levels=[],this._level=void 0},writable:!0,enumerable:!0,configurable:!0},load:{value:function(e){n.trigger(s.MANIFEST_LOADING,{url:this.url}),this._load(e)},writable:!0,enumerable:!0,configurable:!0},_load:{value:function(e){this.url=e,this.stats={trequest:Date.now()};var t=this.xhr=new XMLHttpRequest;t.onload=this.loadsuccess.bind(this),t.onerror=this.loaderror.bind(this),t.onprogress=this.loadprogress.bind(this),t.open("GET",e,!0),t.send()},writable:!0,enumerable:!0,configurable:!0},level:{get:function(){return this._level},set:function(e){this._level!==e&&(e>=0&&e<this.levels.length?(this._level=e,void 0===this.levels[e].fragments&&(n.trigger(s.LEVEL_LOADING,{level:e}),this._load(this.levels[e].url))):n.trigger(s.LEVEL_ERROR,{level:e,event:"invalid level idx"}))},enumerable:!0,configurable:!0},resolve:{value:function(e,t){var r,i=document,s=i.getElementsByTagName("base")[0],n=s&&s.href,a=i.head||i.getElementsByTagName("head")[0],o=s||a.appendChild(i.createElement("base")),l=i.createElement("a");return o.href=t,l.href=e,r=l.href,s?s.href=n:a.removeChild(o),r},writable:!0,enumerable:!0,configurable:!0},parseManifest:{value:function(e,t){0===e.indexOf("#EXTM3U")?e.indexOf("#EXTINF:")>0?(this._level=0,this.levels.length=1,this.levels[0]={},this.parseLevelPlaylist(e,t,0),n.trigger(s.MANIFEST_LOADED,{levels:this.levels,url:t,stats:this.stats}),n.trigger(s.LEVEL_LOADED,{level:this._level,url:t,stats:this.stats})):(this.levels=this.parseMasterPlaylist(e,t),n.trigger(s.MANIFEST_LOADED,{levels:this.levels,url:t,stats:this.stats})):n.trigger(s.LOAD_ERROR,{url:t,event:"not an HLS playlist"})},writable:!0,enumerable:!0,configurable:!0},parseMasterPlaylist:{value:function(e,t){for(var r,i=[],s={},n=/#EXT-X-STREAM-INF:[^\n\r]*(BANDWIDTH)=(\d+)*[^\n\r](RESOLUTION)=(\d+)x(\d+)[^\r\n]*[\r\n]+([^\r\n]+)/g;null!=(r=n.exec(e));){for(r.shift(),r=r.filter(function(e){return void 0!==e}),s.url=this.resolve(r.pop(),t);r.length>0;)switch(r.shift()){case"RESOLUTION":s.width=r.shift(),s.height=r.shift();break;case"BANDWIDTH":s.bitrate=r.shift()}i.push(s),s={}}return i},writable:!0,enumerable:!0,configurable:!0},parseLevelPlaylist:{value:function(e,t,r){var i,s=0,n=this.levels[r];n.url=t,n.fragments=[],n.endList=!1;for(var o,l=/(?:#EXT-X-(MEDIA-SEQUENCE):(\d+))|(?:#EXT-X-(TARGETDURATION):(\d+))|(?:#EXT(INF):(\d+)[^\r\n]*[\r\n]+([^\r\n]+)|(?:#EXT-X-(ENDLIST)))/g;null!==(o=l.exec(e));)switch(o.shift(),o=o.filter(function(e){return void 0!==e}),o[0]){case"MEDIA-SEQUENCE":i=n.startSN=parseInt(o[1]);break;case"TARGETDURATION":n.targetduration=parseFloat(o[1]);break;case"ENDLIST":n.endList=!0;break;case"INF":var u=parseFloat(o[1]);n.fragments.push({url:this.resolve(o[2],t),duration:u,start:s,sn:i++}),s+=u}a.log("found "+n.fragments.length+" fragments"),n.totalduration=s,n.endSN=i-1},writable:!0,enumerable:!0,configurable:!0},loadsuccess:{value:function(){this.stats.tend=Date.now(),0===this.levels.length?this.parseManifest(event.currentTarget.responseText,this.url):(this.parseLevelPlaylist(event.currentTarget.responseText,this.url,this._level),n.trigger(s.LEVEL_LOADED,{level:this._level,url:this.url,stats:this.stats}))},writable:!0,enumerable:!0,configurable:!0},loaderror:{value:function(e){n.trigger(s.LOAD_ERROR,{url:this.url,event:e})},writable:!0,enumerable:!0,configurable:!0},loadprogress:{value:function(){void 0===this.stats.tfirst&&(this.stats.tfirst=Date.now())},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=o},{"../events":"/Users/g.dupontavice/workdir/github/mse-hls/src/events.js","../observer":"/Users/g.dupontavice/workdir/github/mse-hls/src/observer.js","../utils/logger":"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/logger.js"}],"/Users/g.dupontavice/workdir/github/mse-hls/src/observer.js":[function(e,t){"use strict";var r=function(e){return Array.isArray(e)?e:Array.from(e)},i=function(e){return e&&(e.default||e)},s=i(e("events")),n=new s;n.trigger=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;t>s;s++)i[s-1]=arguments[s];n.emit.apply(n,[e,e].concat(r(i)))},t.exports=n},{events:"/Users/g.dupontavice/workdir/github/mse-hls/node_modules/browserify/node_modules/events/events.js"}],"/Users/g.dupontavice/workdir/github/mse-hls/src/remux/mp4-generator.js":[function(e,t){"use strict";var r=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},i=function(){function e(){}return r(e,{init:{value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);e.MAJOR_BRAND=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),e.AVC1_BRAND=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),e.MINOR_VERSION=new Uint8Array([0,0,0,1]),e.VIDEO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),e.AUDIO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),e.HDLR_TYPES={video:e.VIDEO_HDLR,audio:e.AUDIO_HDLR},e.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),e.STCO=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSC=e.STCO,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.STTS=e.STCO,e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),e.MEDIAHEADER_TYPES={video:e.VMHD,audio:e.SMHD},e.FTYP=e.box(e.types.ftyp,e.MAJOR_BRAND,e.MINOR_VERSION,e.MAJOR_BRAND,e.AVC1_BRAND),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,e.DREF))},writable:!0,enumerable:!0,configurable:!0},box:{value:function(e){for(var t,r,i=Array.prototype.slice.call(arguments,1),s=0,n=i.length;n--;)s+=i[n].byteLength;for(t=new Uint8Array(s+8),r=new DataView(t.buffer),r.setUint32(0,t.byteLength),t.set(e,4),n=0,s=8;n<i.length;n++)t.set(i[n],s),s+=i[n].byteLength;return t},writable:!0,enumerable:!0,configurable:!0},hdlr:{value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},writable:!0,enumerable:!0,configurable:!0},mdat:{value:function(t){return e.box(e.types.mdat,t)},writable:!0,enumerable:!0,configurable:!0},mdhd:{value:function(t){return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,85,196,0,0]))},writable:!0,enumerable:!0,configurable:!0},mdia:{value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration),e.hdlr(t.type),e.minf(t))},writable:!0,enumerable:!0,configurable:!0},mfhd:{value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},writable:!0,enumerable:!0,configurable:!0},minf:{value:function(t){return e.box(e.types.minf,e.box(e.types.vmhd,e.MEDIAHEADER_TYPES[t.type]),e.DINF,e.stbl(t))},writable:!0,enumerable:!0,configurable:!0},moof:{value:function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},writable:!0,enumerable:!0,configurable:!0},moov:{value:function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].duration)].concat(i).concat(e.mvex(t)))},writable:!0,enumerable:!0,configurable:!0},mvex:{value:function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))},writable:!0,enumerable:!0,configurable:!0},mvhd:{value:function(t){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,r)},writable:!0,enumerable:!0,configurable:!0},sdtp:{value:function(t){var r,i,s=t.samples||[],n=new Uint8Array(4+s.length);for(i=0;i<s.length;i++)r=s[i],n[i+4]=r.flags.dependsOn<<4|r.flags.isDependedOn<<2|r.flags.hasRedundancy;return e.box(e.types.sdtp,n)},writable:!0,enumerable:!0,configurable:!0},stbl:{value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},writable:!0,enumerable:!0,configurable:!0},avc1:{value:function(t){var r,i=[],s=[];for(r=0;r<t.sps.length;r++)i.push((65280&t.sps[r].byteLength)>>>8),i.push(255&t.sps[r].byteLength),i=i.concat(Array.prototype.slice.call(t.sps[r]));for(r=0;r<t.pps.length;r++)s.push((65280&t.pps[r].byteLength)>>>8),s.push(255&t.pps[r].byteLength),s=s.concat(Array.prototype.slice.call(t.pps[r]));return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e.box(e.types.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([t.sps.length]).concat(i).concat([t.pps.length]).concat(s))),e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},writable:!0,enumerable:!0,configurable:!0},esds:{value:function(e){return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,e.config[0],e.config[1]])},writable:!0,enumerable:!0,configurable:!0},mp4a:{value:function(t){return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,(65280&t.audiosamplerate)>>8,255&t.audiosamplerate,0,0]),e.box(e.types.esds,e.esds(t)))},writable:!0,enumerable:!0,configurable:!0},stsd:{value:function(t){return"audio"===t.type?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},writable:!0,enumerable:!0,configurable:!0},tkhd:{value:function(t){return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]))},writable:!0,enumerable:!0,configurable:!0},traf:{value:function(t,r){var i=e.sdtp(t);return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])),e.trun(t,i.length+16+16+8+16+8+8),i)},writable:!0,enumerable:!0,configurable:!0},trak:{value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},writable:!0,enumerable:!0,configurable:!0},trex:{value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},writable:!0,enumerable:!0,configurable:!0},trun:{value:function(t,r){var i,s,n,a;for(s=t.samples||[],r+=20+16*s.length,i=[0,0,15,1,(4278190080&s.length)>>>24,(16711680&s.length)>>>16,(65280&s.length)>>>8,255&s.length,(4278190080&r)>>>24,(16711680&r)>>>16,(65280&r)>>>8,255&r],a=0;a<s.length;a++)n=s[a],i=i.concat([(4278190080&n.duration)>>>24,(16711680&n.duration)>>>16,(65280&n.duration)>>>8,255&n.duration,(4278190080&n.size)>>>24,(16711680&n.size)>>>16,(65280&n.size)>>>8,255&n.size,n.flags.isLeading<<2|n.flags.dependsOn,n.flags.isDependedOn<<6|n.flags.hasRedundancy<<4|n.flags.paddingValue<<1|n.flags.isNonSyncSample,61440&n.flags.degradationPriority,15&n.flags.degradationPriority,(4278190080&n.compositionTimeOffset)>>>24,(16711680&n.compositionTimeOffset)>>>16,(65280&n.compositionTimeOffset)>>>8,255&n.compositionTimeOffset]);return e.box(e.types.trun,new Uint8Array(i))},writable:!0,enumerable:!0,configurable:!0},initSegment:{value:function(t){e.types||e.init();var r,i=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+i.byteLength),r.set(e.FTYP),r.set(i,e.FTYP.byteLength),r},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=i},{}],"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/logger.js":[function(e,t,r){"use strict";function i(){}{var s={log:i,warn:i,info:i,error:i},n=s;r.enableLogs=function(e){if(e===!0||"object"==typeof e){n.log=e.log?e.log.bind(e):console.log.bind(console),n.info=e.info?e.info.bind(e):console.info.bind(console),n.error=e.error?e.error.bind(e):console.error.bind(console),n.warn=e.warn?e.warn.bind(e):console.warn.bind(console);try{n.log()}catch(e){n.log=i,n.info=i,n.error=i,n.warn=i}}else n=s},r.logger=n}},{}],"/Users/g.dupontavice/workdir/github/mse-hls/src/utils/stream.js":[function(e,t){"use strict";var r=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},i=function(){function e(){this.listeners={}}return r(e,null,{on:{value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},writable:!0,enumerable:!0,configurable:!0},off:{value:function(e,t){var r;return this.listeners[e]?(r=this.listeners[e].indexOf(t),this.listeners[e].splice(r,1),r>-1):!1},writable:!0,enumerable:!0,configurable:!0},trigger:{value:function(e){var t,r,i,s;if(t=this.listeners[e])if(2===arguments.length)for(i=t.length,r=0;i>r;++r)t[r].call(this,arguments[1]);else for(s=Array.prototype.slice.call(arguments,1),i=t.length,r=0;i>r;++r)t[r].apply(this,s)},writable:!0,enumerable:!0,configurable:!0},dispose:{value:function(){this.listeners={}},writable:!0,enumerable:!0,configurable:!0},pipe:{value:function(e){this.on("data",function(t){e.push(t)})},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=i},{}]},{},["/Users/g.dupontavice/workdir/github/mse-hls/src/hls.js"])("/Users/g.dupontavice/workdir/github/mse-hls/src/hls.js")});