(function(a){if(typeof define==="function"&&define.amd){define(["load-image"],a)}else{if(typeof module==="object"&&module.exports){a(require("./load-image"))}else{a(window.loadImage)}}}(function(b){var a=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);b.blobSlice=a&&function(){var c=this.slice||this.webkitSlice||this.mozSlice;return c.apply(this,arguments)};b.metaDataParsers={jpeg:{65505:[]}};b.parseMetaData=function(d,i,c){c=c||{};var f=this,h=c.maxMetaDataSize||262144,g={},e=!(window.DataView&&d&&d.size>=12&&d.type==="image/jpeg"&&b.blobSlice);if(e||!b.readFile(b.blobSlice.call(d,0,h),function(q){if(q.target.error){console.log(q.target.error);i(g);return}var n=q.target.result,r=new DataView(n),l=2,k=r.byteLength-4,p=l,j,m,s,o;if(r.getUint16(0)===65496){while(l<k){j=r.getUint16(l);if((j>=65504&&j<=65519)||j===65534){m=r.getUint16(l+2)+2;if(l+m>r.byteLength){console.log("Invalid meta data: Invalid segment size.");break}s=b.metaDataParsers.jpeg[j];if(s){for(o=0;o<s.length;o+=1){s[o].call(f,r,l,m,g,c)}}l+=m;p=l}else{break}}if(!c.disableImageHead&&p>6){if(n.slice){g.imageHead=n.slice(0,p)}else{g.imageHead=new Uint8Array(n).subarray(0,p)}}}else{console.log("Invalid JPEG file: Missing JPEG marker.")}i(g)},"readAsArrayBuffer")){i(g)}}}));