!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.falcor=e()}}(function(){return function e(t,r,o){function s(a,i){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+a+"'")}var p=r[a]={exports:{}};t[a][0].call(p.exports,function(e){var r=t[a][1][e];return s(r?r:e)},p,p.exports,e,t,r,o)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<o.length;a++)s(o[a]);return s}({1:[function(e,t){t.exports=e("./operations")},{"./operations":121}],2:[function(e,t){var r={NOOP:function(){},__GENERATION_GUID:0,__GENERATION_VERSION:0,__CONTAINER:"__reference_container",__CONTEXT:"__context",__GENERATION:"__generation",__GENERATION_UPDATED:"__generation_updated",__INVALIDATED:"__invalidated",__KEY:"__key",__KEYS:"__keys",__IS_KEY_SET:"__is_key_set",__NULL:"__null",__SELF:"./",__PARENT:"../",__REF:"__ref",__REF_INDEX:"__ref_index",__REFS_LENGTH:"__refs_length",__ROOT:"/",__OFFSET:"__offset",__FALKOR_EMPTY_OBJECT:"__FALKOR_EMPTY_OBJECT",$TYPE:"$type",$SIZE:"$size",$EXPIRES:"$expires",$TIMESTAMP:"$timestamp",SENTINEL:"sentinel",ERROR:"error",VALUE:"value",EXPIRED:"expired",LEAF:"leaf"};r.__INTERNAL_KEYS=[r.__CONTAINER,r.__CONTEXT,r.__GENERATION,r.__GENERATION_UPDATED,r.__INVALIDATED,r.__KEY,r.__KEYS,r.__IS_KEY_SET,r.__NULL,r.__SELF,r.__PARENT,r.__REF,r.__REF_INDEX,r.__REFS_LENGTH,r.__OFFSET,r.__ROOT],t.exports=r},{}],3:[function(e,t){if("undefined"==typeof r)var r={};var o=e("./rx.ultralite");r.__Internals={},r.Observable=o.Observable,r.EXPIRES_NOW=0,r.EXPIRES_NEVER=1,r.dataVersion="0.1.0",r.now=function(){return Date.now()},r.NOOP=function(){},t.exports=r},{"./rx.ultralite":37}],4:[function(e,t){var r=e("./Falcor"),o=e("./Constants"),s=e("./request/RequestQueue"),n=e("./scheduler/ImmediateScheduler"),a=e("./scheduler/TimeoutScheduler"),i=o.$TYPE,u=o.$TYPE,p=(e("./ModelResponse"),e("./operations/call")),l=e("./operations"),c=e("./../get/getBoundValue"),f=t.exports=r.Model=function h(e){e||(e={}),this._materialized=e.materialized||!1,this._boxed=e.boxed||!1,this._treatErrorsAsValues=e.treatErrorsAsValues||!1,this._dataSource=e.source,this._maxSize=e.maxSize||Math.pow(2,53)-1,this._collectRatio=e.collectRatio||.75,this._scheduler=new n,this._request=new s(this,this._scheduler),this._errorSelector=e.errorSelector||h.prototype._errorSelector,this._router=e.router,this._root=e.root||{expired:[],allowSync:!1,unsafeMode:!0},e.cache&&"object"==typeof e.cache?this.setCache(e.cache):this._cache={},this._path=[]};f.EXPIRES_NOW=r.EXPIRES_NOW,f.EXPIRES_NEVER=r.EXPIRES_NEVER,f.prototype={_boxed:!1,_progressive:!1,_errorSelector:function(e,t){return t},get:l("get"),set:l("set"),invalidate:l("invalidate"),call:p,getValue:function(e){return this.get(e,function(e){return e})},setValue:function(e,t){return this.set(Array.isArray(e)?{path:e,value:t}:e,function(e){return e})},bind:function(e){for(var t=this,o=t._root,s=new Array(arguments.length-1),n=-1,a=arguments.length-1;++n<a;)s[n]=arguments[n+1];if(0===a)throw new Error("Model#bind requires at least one value path.");return r.Observable.create(function(r){var n;try{if(o.allowSync=!0,!(n=t.bindSync(t._path.concat(e))))throw!1;o.allowSync=!1,r.onNext(n),r.onCompleted()}catch(a){return o.allowSync=!1,t.get.apply(t,s.map(function(t){return e.concat(t)}).concat(function(){})).subscribe(function(){},function(e){r.onError(e)},function(){try{(n=t.bindSync(e))&&r.onNext(n),r.onCompleted()}catch(o){r.onError(o)}})}})},setCache:function(e){return(this._cache={})&&this._setCache(this,e)},getValueSync:function(e){if(Array.isArray(e)===!1)throw new Error("Model#getValueSync must be called with an Array path.");return this._path.length&&(e=this._path.concat(e)),this.syncCheck("getValueSync")&&this._getValueSync(this,e).value},setValueSync:function(e,t,r){if(Array.isArray(e)===!1&&("function"!=typeof r&&(r=t||this._errorSelector),t=e.value,e=e.path),Array.isArray(e)===!1)throw new Error("Model#setValueSync must be called with an Array path.");if(this._dataSource)throw new Error("Model#setValueSync can not be invoked on a Model with a DataSource. Please use the withoutDataSource() method followed by setValueSync if you would like to modify only the local cache.");if(this.syncCheck("setValueSync")){var o={},s=this._treatErrorsAsValues,n=this._boxed;if(this._treatErrorsAsValues=!0,this._boxed=!0,this._setPathSetsAsJSON(this,[{path:e,value:t}],[o],r),this._treatErrorsAsValues=s,this._boxed=n,o=o.json,o&&o[i]===u&&!this._treatErrorsAsValues)throw this._boxed?o:o.value;return this._boxed?o:o&&o.value}},bindSync:function(e){if(Array.isArray(e)===!1)throw new Error("Model#bindSync must be called with an Array path.");var t=this.syncCheck("bindSync")&&c(this,this._path.concat(e)),r=t.value;if(e=t.path,t.shorted){if(r&&r[i]===u){if(this._boxed)throw r;throw r.value}return void 0}if(r&&r[i]===u){if(this._boxed)throw r;throw r.value}return this.clone(["_path",t.path])},clone:function(){var e=this,t=new f;return Object.keys(e).forEach(function(r){t[r]=e[r]}),Array.prototype.slice.call(arguments).forEach(function(e){t[e[0]]=e[1]}),t},batch:function(e){return"number"==typeof e?e=new a(Math.round(Math.abs(e))):e&&e.schedule||(e=new n),this.clone(["_request",new s(this,e)])},unbatch:function(){return this.clone(["_request",new s(this,new n)])},treatErrorsAsValues:function(){return this.clone(["_treatErrorsAsValues",!0])},materialize:function(){return this.clone(["_materialized",!0])},boxValues:function(){return this.clone(["_boxed",!0])},unboxValues:function(){return this.clone(["_boxed",!1])},withoutDataSource:function(){return this.clone(["_dataSource",null])},syncCheck:function(e){if(this._root.allowSync===!1&&this._root.unsafeMode===!1)throw new Error("Model#"+e+" may only be called within the context of a request selector.");return!0}}},{"./../get/getBoundValue":45,"./Constants":2,"./Falcor":3,"./ModelResponse":5,"./operations":12,"./operations/call":7,"./request/RequestQueue":36,"./scheduler/ImmediateScheduler":38,"./scheduler/TimeoutScheduler":39}],5:[function(e,t){function r(e){this._subscribe=e}function o(){}function s(e){var t=Array.prototype.slice.call(arguments,1);return new r(function(r){return e.subscribe(t.reduce(function(e,t){return Object.create(e,t)},r))})}var n=e("./Falcor"),a=n.Observable,i={format:{value:"AsValues"}},u={format:{value:"AsPathMap"}},p={format:{value:"AsJSONG"}};r.create=function(e){return new r(e)},r.fromOperation=function(e,t,o,s){return new r(function(r){return s(Object.create(r,{operationModel:{value:e},operationArgs:{value:t},operationSelector:{value:o}}))})},r.prototype=a.create(o),r.prototype.format="AsPathMap",r.prototype.toPathValues=function(){return s(this,i)},r.prototype.toJSON=function(){return s(this,u)},r.prototype.toJSONG=function(){return s(this,p)},t.exports=r},{"./Falcor":3}],6:[function(e,t){var r=e("./Falcor"),o=e("./Model");r.Model=o,t.exports=r},{"./Falcor":3,"./Model":4}],7:[function(e,t){function r(e,t,r,n,a){var i=this;return t&&Array.isArray(t)||(t=[]),r&&Array.isArray(r)||(r=[]),n=Array.prototype.slice.call(arguments,3),"function"!=typeof(a=n[n.length-1])?a=void 0:n=n.slice(0,-1),s.create(function(s){var u=i.clone(["_path",[]]),p=u.withoutDataSource(),l=i._dataSource,c=i._path,f=c.concat(e),h=f.slice(0,-1),d=i.getValue(e).flatMap(function(e){return"function"==typeof e?o.Observable.return(e.apply(u.bindSync(h),t).map(function(e){return{path:h.concat(e.path),value:e.value}}).toArray().flatMap(function(e){return p.set.apply(p,e).toJSONG()}).flatMap(function(e){return u.get.apply(u,e.paths.reduce(function(e,t){return e.concat(r.map(function(e){return t.concat(e)}))},[]).concat(n.reduce(function(e,t){return e.concat(h.concat(t))},[]))).toJSONG()})):o.Observable.empty()}).defaultIfEmpty(l.call(e,t,r,n)).mergeAll().subscribe(function(e){var t=e.invalidated;t&&t.length&&invalidatePaths(u,t,void 0,i._errorSelector),d=p.set(e,function(){return i}).subscribe(function(t){var r=e.paths.map(function(e){return e.slice(c.length)});a&&(r[r.length]=function(){return a.call(t,r)}),d=t.get.apply(t,r).subscribe(s)})});return{dispose:function(){d&&d.dispose(),d=void 0}}})}t.exports=r;var o=e("../../Falcor"),s=e("./../../ModelResponse")},{"../../Falcor":3,"./../../ModelResponse":5}],8:[function(e,t){var r=e("./../support/combineOperations"),o=e("./../support/setSeedsOrOnNext");t.exports=function(e,t,s){var n="AsValues"!==e.format,a=r(e.operationArgs,e.format,"get");return o(a,n,t,s,e.operationSelector),[a,t,!!e.operationModel._dataSource]}},{"./../support/combineOperations":21,"./../support/setSeedsOrOnNext":35}],9:[function(e,t){function r(e,t,r,a,i,u){var p=i.requestedMissingPaths,l=e.operationModel,c=l._path;return l._request.get(p,i.optimizedMissingPaths,o(l,p,function(r,o){if(r)return void u(r);c.length&&(o=n(o,l._path));var i=s(o,p,e.format,a,t);u(null,i)}))}var o=e("./../support/getSourceObserever"),s=e("./../support/partitionOperations"),n=e("./../support/mergeBoundPath");t.exports=r},{"./../support/getSourceObserever":23,"./../support/mergeBoundPath":27,"./../support/partitionOperations":30}],10:[function(e,t){var r=e("./getInitialArgs"),o=e("./getSourceRequest"),s=e("./shouldRequest"),n=e("./../request"),a=e("./../support/processOperations"),i=n(r,o,a,s);t.exports=i},{"./../request":15,"./../support/processOperations":32,"./getInitialArgs":8,"./getSourceRequest":9,"./shouldRequest":11}],11:[function(e,t){t.exports=function(e,t){return e._dataSource&&t.requestedMissingPaths.length>0}},{}],12:[function(e,t){var r=e("../ModelResponse"),o=e("./get"),s=e("./set"),n=e("./invalidate");t.exports=function(e){return function(){var t=this,a=(t._root,Array.prototype.slice.call(arguments)),i=a[a.length-1];"function"==typeof i?a.pop():i=!1;var u;switch(e){case"get":u=o;break;case"set":u=s;break;case"invalidate":u=n}return r.fromOperation(t,a,i,u)}}},{"../ModelResponse":5,"./get":10,"./invalidate":13,"./set":16}],13:[function(e,t){var r=e("./invalidateInitialArgs"),o=e("./../request"),s=e("./../support/processOperations"),n=o(r,null,s);t.exports=n},{"./../request":15,"./../support/processOperations":32,"./invalidateInitialArgs":14}],14:[function(e,t){var r=e("./../support/combineOperations"),o=e("./../support/setSeedsOrOnNext");t.exports=function(e,t,s){var n="AsValues"!==e.format,a=r(e.operationArgs,e.format,"inv");return o(a,n,t,s,e.operationSelector),[a,t,!1]}},{"./../support/combineOperations":21,"./../support/setSeedsOrOnNext":35}],15:[function(e,t){function r(e,t,r,i){return i||(i=a),function(a){function u(e,n,v,g){var m=r(l,e,d,g);x=x||m.valuesReceived,m.errors.length&&(_=_.concat(m.errors)),v&&i(l,m)?t(a,c,b,n,m,function(e,t){return e?(_=_.concat(e),void u([],b)):void u.apply(null,t)}):(!y&&x&&o(l,c,b,p),s(h,f,_))}var p=a.operationSelector,l=a.operationModel,c=(a.operationArgs,a.onNext.bind(a)),f=a.onError.bind(a),h=a.onCompleted.bind(a),d=l._errorSelector,v=(a.isProgressive,p&&p.length||0),_=[],g=a.format=p&&"AsJSON"||a.format||"AsPathMap",y="AsValues"===g,x=(l._path,!1),b=n(p,v);try{u.apply(null,e(a,b,c))}catch(m){_=[m],s(h,f,_)}}}var o=(e("./support/setSeedsOrOnNext"),e("./support/onNextValue")),s=e("./support/onCompletedOrError"),n=e("./support/primeSeeds"),a=function(){return!0};t.exports=r},{"./support/onCompletedOrError":28,"./support/onNextValue":29,"./support/primeSeeds":31,"./support/setSeedsOrOnNext":35}],16:[function(e,t){var r=e("./setInitialArgs"),o=e("./setSourceRequest"),s=e("./../request"),n=e("./setProcessOperations"),a=s(r,o,n);t.exports=a},{"./../request":15,"./setInitialArgs":17,"./setProcessOperations":18,"./setSourceRequest":19}],17:[function(e,t){var r=e("./../support/combineOperations"),o=e("./../support/setSeedsOrOnNext");t.exports=function(e,t,s){var n,a="AsValues"!==e.format,i=!!e.operationModel._dataSource,u=e.format,p=e.operationArgs,l=e.operationSelector,c=i&&"AsJSONG"||u,f=r(p,c,"set",i&&l);if(i&&l){var h={};n=[],f.forEach(function(e){var t={jsong:h,paths:[]};e.seeds=[t],n.push(t)})}else i?(n=[{}],o(f,a,n,!1,e.selector)):(n=t,f=r(p,u,"set"),o(f,a,t,s,e.selector));return[f,n,i,{setWithBind:!i}]}},{"./../support/combineOperations":21,"./../support/setSeedsOrOnNext":35}],18:[function(e,t){function r(e,t,r,n){var a=e._path,i=a.length>0,u=n.setWithBind;if(!u&&i){e._path=[];for(var p=0,l=t.length;l>p;p++)for(var c=t[p].args,f=0,h=c.length;h>f;f++)c[p]=s(c[p],a)}var d=o(e,t,r);return!u&&i&&(e._path=a),d}var o=e("./../support/processOperations"),s=e("./../support/mergeBoundPath");t.exports=r},{"./../support/mergeBoundPath":27,"./../support/processOperations":32}],19:[function(e,t){function r(e,t,r,a,u,p){var l=a[0].jsong,c=a[0].paths,f=r&&r.length>0,h=e.operationModel;for(i=1;i<a.length;i++)c=c.concat(a[i].paths);var d={jsong:l,paths:c};return h._request.set(d,o(h,d.paths,function(o,a){o&&p(o),h._setJSONGsAsJSON(h,[a],[]);var i=s(e.operationArgs,e.format,"get");n(i,f,r,t,e.operationSelector),p(null,[i,r,!1,{setWithBind:!0}])}))}var o=e("./../support/getSourceObserever"),s=e("./../support/combineOperations"),n=e("./../support/setSeedsOrOnNext");t.exports=r},{"./../support/combineOperations":21,"./../support/getSourceObserever":23,"./../support/setSeedsOrOnNext":35}],20:[function(e,t){t.exports=function(e,t,r,o,s){return{methodName:"_setJSONGs"+e,format:e,isValues:"AsValues"===e,onNext:s,seeds:t,seedsOffset:o,args:[r]}}},{}],21:[function(e,t){var r=e("./seedRequired"),o=e("./isJSONG"),s=e("./isPathOrPathValue");t.exports=function(e,t,n,a){var i=r(t),u=!i,p=i&&"AsJSON"===t,l=0;return e.reduce(function(e,r){var i=e[e.length-1],c=s(r)?"PathSets":o(r)?"JSONGs":"PathMaps",f=i&&i.type,h="_"+n+c+t;return(!f||c!==f||a)&&(i={methodName:h,format:t,type:c,isValues:u,seeds:[],onNext:null,seedsOffset:l,args:[]},e.push(i),p&&l++),i.args.push(r),e},[])}},{"./isJSONG":25,"./isPathOrPathValue":26,"./seedRequired":33}],22:[function(e,t){t.exports=function(e){return e.reduce(function(e,t){var r=e[0];return r?t.forEach(function(e,t){"object"==typeof e&&e.forEach(function(e){r[t][r[t].length]=e})}):e[0]=t,e},[])}},{}],23:[function(e,t){function r(e,t,r){var s;return{onNext:function(e){s={jsong:e.jsong,paths:t}},onError:function(s){r(o(e,t,s))},onCompleted:function(){r(!1,s)}}}var o=e("./insertErrors.js");t.exports=r},{"./insertErrors.js":24}],24:[function(e,t){t.exports=function(e,t,r){var o=e._setPathSetsAsJSON.apply(null,[e].concat(t.reduce(function(e,t){return e[0].push({path:t,value:r}),e},[[]]),[],e._errorSelector));return o.errors}},{}],25:[function(e,t){t.exports=function(e){return e.hasOwnProperty("jsong")}},{}],26:[function(e,t){t.exports=function(e){return!!Array.isArray(e)||e.hasOwnProperty("path")&&e.hasOwnProperty("value")}},{}],27:[function(e,t){function r(e,t){return a(e)&&o(e,t)||u(e)&&n(e,t)||s(e,t)}function o(e,t){var r={jsong:e.jsong,paths:e.paths};if(t.length){var o=[];for(i=0,len=e.paths.length;len>i;i++)o[i]=t.concat(e.paths[i]);r.paths=o}return r}function s(e,t){var r=e;if(t.length){r={};for(var o=0,s=t.length-1;s>o;o++)r[t[o]]={};r[t[o]]=e}return r}function n(e,t){return{path:t.concat(e.path),value:e.value}}var a=e("./isJSONG"),u=e("./isPathOrPathValue");t.exports=r},{"./isJSONG":25,"./isPathOrPathValue":26}],28:[function(e,t){t.exports=function(e,t,r){r.length?t(r):e()}},{}],29:[function(e,t){t.exports=function(e,t,r,o){var s=e._root;s.allowSync=!0,t(o?r.length?o.apply(e,r.map(function(e){return e.json})):o.call(e):r[0]),s.allowSync=!1}},{}],30:[function(e,t){function r(e,t,r,n,a){var i=[],u=[];if("AsJSON"===r){for(var p=[],l=null,c=0,f=t.length;f>c;c++){var h=t[c];l&&l.idx===h.pathSetIndex||(l&&(l.paths=o(l.paths)),l={idx:h.pathSetIndex,paths:[]},p.push(l)),l.paths.push(h)}l.paths=o(l.paths),p.forEach(function(t,o){var p=[n[t.idx]];i.push(s(r,p,e,o,a)),u.push(p)})}else i[0]=s(r,n,e,0,a);return[i,u]}var o=e("./fastCollapse.js"),s=e("./buildJSONGOperation");t.exports=r},{"./buildJSONGOperation":20,"./fastCollapse.js":22}],31:[function(e,t){t.exports=function(e,t){var r=[];if(e)for(i=0;t>i;i++)r.push({});else r[0]={};return r}},{}],32:[function(e,t){t.exports=function(e,t,r,o){return t.reduce(function(t,s){for(var n=e[s.methodName],a=s.isValues?s.onNext:s.seeds,i=n(e,s.args,a,s.onNext,r,o),u=i.requestedMissingPaths,p=s.seedsOffset,l=0,c=u.length;c>l;l++)u[l].boundPath=o,u[l].pathSetIndex+=p;return t.requestedMissingPaths=t.requestedMissingPaths.concat(u),t.optimizedMissingPaths=t.optimizedMissingPaths.concat(i.optimizedMissingPaths),t.errors=t.errors.concat(i.errors),t.valuesReceived=t.valuesReceived||i.requestedPaths.length>0,t},{errors:[],requestedMissingPaths:[],optimizedMissingPaths:[],valuesReceived:!1})}},{}],33:[function(e,t){t.exports=function(e){return"AsJSON"===e||"AsJSONG"===e||"AsPathMap"===e}},{}],34:[function(e,t){t.exports=function(e,t,r){var o,s,n,a,i=0,u=t.length,p=e.length;if(r)for(s=0;p>s&&u>i;s++)for(a=e[s],n=n=a.args.length,o=0;n>o&&u>i;o++,i++)a.seeds.push(t[i]);else for(s=0;p>s&&u>i;s++)e[s].seeds=t}},{}],35:[function(e,t){var r=e("./setSeedsOnGroups");t.exports=function(e,t,o,s,n){if(t)r(e,o,n);else for(i=0;i<e.length;i++)e[i].onNext=s}},{"./setSeedsOnGroups":34}],36:[function(e,t){function r(e,t,s,n){var a=e[t];if("object"==typeof a)if(Array.isArray(a))a.forEach(function(a){o(s,a,n),e.length>t+1&&r(e,t+1,s[a],n)});else for(var i=a.from||0,u=a.to>=0?a.to:a.length,p=i;u>=p;p++)o(s,p,n),e.length>t+1&&r(e,t+1,s[p],n);else o(s,a,n),e.length>t+1&&r(e,t+1,s[a],n)}function o(e,t,r){return null===t?(e.__observers=e.__observers||[],!s(e.__observers,r)&&e.__observers.push(r),e):(e[t]||(e[t]={__observers:[]}),!s(e[t].__observers,r)&&e[t].__observers.push(r),e)}function s(e,t){return t?e.reduce(function(e,r){return e||r.__observerId===t.__observerId},!1):void 0}function n(e){return a(i(e))}function a(e){return e.forEach(function(e){e.forEach(function(t,r){var o;Array.isArray(t)&&t.every(p)&&l(t)&&(t.sort(function(e,t){return e-t}),t[t.length-1]-t[0]===t.length-1&&(o={},o.from=t[0],o.to=t[t.length-1],e[r]=o))})}),e}function i(e){if(null==e||"object"!=typeof e)return[[]];var t,r,o,s,n,a,p,l,c,h,d,v,_,g=Object.keys(e).filter(u),y=-1,b=g.length;if(0===b||Array.isArray(e)===!0)return[[]];for(r={};++y<b;)t=g[y],o=i(e[t]),s=f(o),n="string"==typeof t&&!x.test(t),(a=r[s])&&(p=a.head)?p[p.length]=n?parseInt(t,10):t:r[s]={head:[n?parseInt(t,10):t],tail:o};h=[];for(_ in r)for(p=(a=r[_]).head,l=a.tail,y=-1,b=l.length;++y<b;){if(a=l[y],d=-1,v=a.length,""===p[0])c=[];else for(c=[1===p.length?p[0]:p];++d<v;)c[d+1]=a[d];h[h.length]=c}return h}function u(e){return"__observers"!==e&&"__pending"!==e&&"__batchID"!==e}function p(e){return"number"==typeof e}function l(e){var t,r,o={};for(t=0,r=e.length;r>t;t++){if(o[e[t]])return!1;o[e[t]]=!0}return!0}function c(e){return e.reduce(function(e,t){return t instanceof Array?(e.push(c(t).slice(0).sort()),e):e.concat(t)},[]).slice(0).sort()}function f(e){return JSON.stringify(c(e))}var h=e("./../Falcor"),d=h.NOOP,v=function(e,t){this._scheduler=t,this._jsongModel=e,this._scheduled=!1,this._requests=[]};v.prototype={_get:function(){for(var e=-1,t=this._requests;++e<t.length;)if(!t[e].pending&&t[e].isGet)return t[e];return t[t.length]=new y(this._jsongModel,this)},_set:function(){for(var e=-1,t=this._requests;++e<t.length;)if(!t[e].pending&&t[e].isSet)return t[e];return t[t.length]=new g(this._jsongModel,this)},remove:function(e){for(var t=this._requests.length-1;t>-1&&(this._requests[t].id!==e.id||!this._requests.splice(t,1));t--);},set:function(e,t){var r=this,o=r._set().batch(e,t).flush();return{dispose:function(){o.dispose()}}},get:function(e,t,r){var o=this,s=null;return o._get().batch(e,t,r),o._scheduled||(o._scheduled=!0,s=o._scheduler.schedule(o._flush.bind(o))),{dispose:function(){s.dispose()}}},_flush:function(){this._scheduled=!1;for(var e=this._requests,t=-1,r=[];++t<e.length;)e[t].pending||(r[r.length]=e[t].flush());return{dispose:function(){r.forEach(function(e){e.dispose()})}}}};var _=0,g=function(e,t){var r=this;r._jsongModel=e,r._queue=t,r.observers=[],r.jsongEnvs=[],r.pending=!1,r.id=++_,r.isSet=!0};g.prototype={batch:function(e,t){var r=this;return t.onNext=t.onNext||d,t.onError=t.onError||d,t.onCompleted=t.onCompleted||d,t.__observerId||(t.__observerId=++_),t._requestId=r.id,r.observers[r.observers.length]=t,r.jsongEnvs[r.jsongEnvs.length]=e,r},flush:function(){var e,t=this,r=t.jsongEnvs,o=t.observers,s=t._jsongModel;return t.pending=!0,s._dataSource.set(r[0]).subscribe(function(t){e=t},function(e){for(var t=-1,r=o.length;++t<r;)obs=o[t],obs.onError&&obs.onError(e)},function(){var r,s,n;for(t._queue.remove(t),r=-1,s=o.length;++r<s;)n=o[r],n.onNext&&n.onNext({jsong:e.jsong||e.value,paths:e.paths}),n.onCompleted&&n.onCompleted()})}};var y=function(e,t){var r=this;r._jsongModel=e,r._queue=t,r.observers=[],r.optimizedPaths=[],r.requestedPaths=[],r.pending=!1,r.id=++_,r.isGet=!0};y.prototype={batch:function(e,t,r){var o=this;return r.onNext=r.onNext||d,r.onError=r.onError||d,r.onCompleted=r.onCompleted||d,r.__observerId||(r.__observerId=++_),r._requestId=o.id,o.observers[o.observers.length]=r,o.optimizedPaths[o.optimizedPaths.length]=t,o.requestedPaths[o.requestedPaths.length]=e,o},flush:function(){var e,t,s=this,a=s.requestedPaths,i=s.optimizedPaths,u=s.observers,p=s._jsongModel;s._scheduled=!1,s.pending=!0;var l,c,f,h,d,v={},_={};for(f=0,t=a.length;t>f;f++)for(l=a[f],c=i[f],d=u[f],h=0;h<l.length;h++)r(l[h],0,o(_,null,d),d),r(c[h],0,o(v,null,d),d);return p._dataSource.get(n(v)).subscribe(function(t){e=t},function(e){for(var t=-1,r=u.length;++t<r;)d=u[t],d.onError&&d.onError(e)},function(){var t,r,o;for(s._queue.remove(s),t=-1,r=u.length;++t<r;)o=u[t],o.onNext&&o.onNext({jsong:e.jsong||e.value,paths:e.paths}),o.onCompleted&&o.onCompleted()})},contains:function(){}};var x=/\D/i;h.__Internals.buildQueries=i,t.exports=v},{"./../Falcor":3}],37:[function(e,t){(function(r){var o;if("undefined"!=typeof window&&"undefined"!=typeof window.Rx)o=window.Rx;else if("undefined"!=typeof r&&"undefined"!=typeof r.Rx)o=r.Rx;else if("undefined"!=typeof e||"undefined"!=typeof window&&window.require){var s="undefined"!=typeof e&&e||window.require;try{o=s("rx")}catch(n){o=void 0}}void 0===o&&(o={I:function(){return arguments[0]},Disposable:function(){function e(e){this.action=e}return e.create=function(t){return new e(t)},e.empty=new e(function(){}),e.prototype.dispose=function(){"function"==typeof this.action&&this.action()},e}(),Observable:function(){function e(e){this._subscribe=e}return e.create=e.createWithDisposable=function(t){return new e(t)},e.fastCreateWithDisposable=e.create,e.fastReturnValue=function(t){return e.create(function(e){e.onNext(t),e.onCompleted()})},e.prototype.from,e.prototype.materialize,e.prototype.reduce,e.of=function(){for(var t=arguments.length,r=new Array(t),o=0;t>o;o++)r[o]=arguments[o];return e.create(function(e){var o=!1;try{for(var s=0;t>s;++s)e.onNext(r[s])}catch(n){o=!0,e.onError(n)}o!==!0&&e.onCompleted()})},e.prototype.subscribe=function(e,t,r){return this._subscribe(null!=e&&"object"==typeof e?e:o.Observer.create(e,t,r))},e.prototype.forEach=e.prototype.subscribe,e.prototype.catchException=function(t){var r=this;return e.create(function(e){return r.subscribe(function(t){e.onNext(t)},function(r){return("function"==typeof t?t(r):t).subscribe(e)},function(){e.onCompleted()})})},e}(),Observer:function(){function e(e,t,r){this.onNext=e||o.I,this.onError=t||o.I,this.onCompleted=r||o.I}return e.create=function(t,r,o){return new e(t,r,o)},e}(),Subject:function(){function e(){this.observers=[]}e.prototype.subscribe=function(e){var t=this.observers,r=t.length;return t[r]=e,{dispose:function(){t.splice(r,1)}}},e.prototype.onNext=function(e){for(var t=this.observers.concat(),r=-1,o=t.length;++r<o;)t[r].onNext(e)},e.prototype.onError=function(e){var t=this.observers.concat(),r=-1,o=t.length;for(this.observers.length=0;++r<o;)t[r].onError(e)},e.prototype.onCompleted=function(){var e=this.observers.concat(),t=-1,r=e.length;for(this.observers.length=0;++t<r;)e[t].onCompleted()}}()}),t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,t){function r(){}r.prototype={schedule:function(e){e()}},t.exports=r},{}],39:[function(e,t){function r(e){this.delay=e}r.prototype={schedule:function(e){setTimeout(e,this.delay)}},t.exports=r},{}],40:[function(e,t){function r(e,t,r,o,u,p,l){for(var c,f,h=0;;){if(0===h&&o.__context?(h=u.length,f=o.__context):(c=u[h++],f=r[c]),f){var d=f.$type,v=d&&f.value||f;if(h<u.length){if(d){r=f;break}r=f;continue}if(r=f,d&&a(f))break;if(o.__context||s(o,f),d===i){"JSONG"===l&&n(e,f,p,null,null,u,null,l),h=0,u=v,o=f,r=t;continue}break}r=void 0;break}if(h<u.length){for(var _=[],g=0;h>g;g++)_[g]=u[g];u=_}return[r,u]}var o=e("./util/hardlink"),s=o.create,n=e("./onValue"),a=e("./util/isExpired"),i=e("./../types/$path.js");t.exports=r},{"./../types/$path.js":114,"./onValue":52,"./util/hardlink":54,"./util/isExpired":55}],41:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i,u,p,l,c,f,h={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},d=h.requestedMissingPaths,v=Array.isArray(s[0])||o(s[0])?"Paths":"JSON",_=t._cache,g=t._path,y=0;if(h.values=n,n||(n=[]),g.length){var x=r(t,g);a=x.value,u=i=x.path}else a=_,u=i=[];for(p=0,c=s.length;c>p;p++){var b=void 0,m=s[p];if(n[p]&&(b=n[p]),c>1)for(u=[],l=0,f=i.length;f>l;l++)u[p]=i[p];if(m.path&&(m=m.path),e(t,_,a,m,0,b,[],h,u,[],v,"JSON"),y<d.length){for(l=y,length=d.length;length>l;l++)d[l].pathSetIndex=p;y=length}}return h}}},{"./getBoundValue":45,"./util/isPathValue":57}],42:[function(e,t){var r=(e("./getBoundValue"),e("./util/isPathValue"));t.exports=function(e){return function(t,o,s){var n={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},a=Array.isArray(o[0])||r(o[0])?"Paths":"JSON";n.values=s;var i,u=t._cache,p=t._path;if(p.length)throw"It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.";i=u;for(var l=0,c=o.length;c>l;l++){var f=o[l];f.path&&(f=f.path),e(t,u,i,f,0,s[0],[],n,[],[],a,"JSONG")}return n}}},{"./getBoundValue":45,"./util/isPathValue":57}],43:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},u=Array.isArray(s[0])||o(s[0])?"Paths":"JSON";a=n[0],i.values=n;var p,l,c,f=t._cache,h=t._path;if(h.length){var d=r(t,h);p=d.value,l=c=d.path}else p=f,l=c=[];for(var v=0,_=s.length;_>v;v++){if(_>1)for(l=[],j=0,bLen=c.length;bLen>j;j++)l[v]=c[v];var g=s[v];g.path&&(g=g.path),e(t,f,p,g,0,a,[],i,l,[],u,"PathMap")}return i}}},{"./getBoundValue":45,"./util/isPathValue":57}],44:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i,u,p={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},l=Array.isArray(s[0])||o(s[0])?"Paths":"JSON",c=t._cache,f=t._path;if(f.length){var h=r(t,f);a=h.value,i=u=h.path}else a=c,i=u=[];for(var d=0,v=s.length;v>d;d++){if(v>1)for(i=[],j=0,bLen=u.length;bLen>j;j++)i[d]=u[d];var _=s[d];_.path&&(_=_.path),e(t,c,a,_,0,n,null,p,i,[],l,"Values")}return p}}},{"./getBoundValue":45,"./util/isPathValue":57}],45:[function(e,t){var r=e("./getValueSync");t.exports=function(e,t){var o,s,n;for(o=e._boxed,e._boxed=!0,s=r(e,t.concat(null)),e._boxed=o,t=s.optimizedPath,n=s.shorted,s=s.value;t.length&&null===t[t.length-1];)t.pop();return{path:t,value:s,shorted:n}}},{"./getValueSync":46}],46:[function(e,t){var r=e("./followReference"),o=e("./util/clone"),s=e("./util/isExpired"),n=e("./util/lru").promote,a=e("./../types/$path.js"),i=e("./../types/$sentinel.js"),u=e("./../types/$error.js");t.exports=function(e,t){var p,l,c,f,h,d=e._cache,v=t.length,_=[],g=!1,y=!1,x=0,b=d,m=d;do{if(p=t[x++],null!==p&&(b=m[p]),!b){c=void 0,g=!0;break}if(l=b.$type,_.push(p),v>x){if(l===a){if(f=r(e,d,d,b,b.value),h=f[0],!h){c=void 0;break}l=h.$type,b=h,_=f[1]}if(l)break}else c=b;m=b}while(b&&v>x);if(v>x){for(;v>x;++x)if(null!==t[x]){y=!0;break}y?(g=!0,c=void 0):c=b}if(c&&(s(c)?c=void 0:n(e,c)),c&&c.$type===u&&!e._treatErrorsAsValues)throw{path:t,value:c.value};return c&&e._boxed?c=l?o(c):c:!c&&e._materialized?c={$type:i}:c&&(c=c.value),{value:c,shorted:g,optimizedPath:_}}},{"./../types/$error.js":113,"./../types/$path.js":114,"./../types/$sentinel.js":115,"./followReference":40,"./util/clone":53,"./util/isExpired":55,"./util/lru":58}],47:[function(e,t){function r(e,t,n,u,p,c,f,_,g,y,x,b,m){if(!(!n||n&&n.$type)||!o(e,n,u,p,c,y,g,f,_,b,m)){var P,j,S,A="JSON"===x,O=!1;if(A?u&&"object"==typeof u?Array.isArray(u)?O=!0:(P=Object.keys(u),1===P.length&&(P=P[0])):O=!0:P=u[p],O||!A&&p===u.length)return l(e)?void i(e,n,c,_,y,g,f,b,m):void a(e,n,u,p,c,_,y,g,f,b);var $={done:!1},w=f,N=y,k=g,M="JSONG"===b,E="JSON"===b,z=!1,V=!1;m=!1,p++;var q;if(P&&"object"==typeof P?($.isArray=Array.isArray(P),$.arrOffset=0,q=d(P,$),z=!0):(q=P,$.done=!0),E&&z){for(w=[],j=0,S=f.length;S>j;j++)w[j]=f[j];w.push(p-1)}do{if(!$.done){for(k=[],N=[],j=0,S=y.length;S>j;j++)N[j]=y[j];for(j=0,S=g.length;S>j;j++)k[j]=g[j]}var J=A?u[q]:u;A&&J&&("object"!=typeof J||Array.isArray(J)||(V=Object.keys(J).length>0));var R;if(null===q||A&&"__null"===q?R=n:(R=n[q],k.push(q),N.push(q)),R){var G=R.$type,I=G&&R.value||R;if((A&&V||!A&&p<u.length)&&G&&G===v&&!h(R)){M&&i(e,R,c,_,!1,k,w,b);var C=s(e,t,t,R,I,c,b);m=!0,R=C[0];var T=C[1];for(k=[],j=0,S=T.length;S>j;j++)k[j]=T[j]}}r(e,t,R,J,p,c,w,_,k,N,x,b,m),$.done||(q=d(P,$))}while(!$.done)}}function o(e,t,r,o,s,u,p,d,v,g,y){if(!t)return l(e)?i(e,t,s,v,u,p,d,g,y):a(e,t,r,o,s,v,u,p,d,g),!0;var x=t.$type;return d=d||[],x===_?(y&&u.push(null),"JSONG"===g||e._treatErrorsAsValues?i(e,t,s,v,u,p,d,g,y):n(e,t,u,p,v)):h(t)?(t.__invalidated||(f(e,t),c(t)),a(e,t,r,o,s,v,u,p,d,g)):i(e,t,s,v,u,p,d,g,y),!0}var s=e("./followReference"),n=e("./onError"),a=e("./onMissing"),i=e("./onValue"),u=e("./util/lru"),p=e("./util/hardlink"),l=e("./util/isMaterialzed"),c=p.remove,f=u.splice,h=e("./util/isExpired"),d=e("./util/permuteKey"),v=e("./../types/$path.js"),_=e("./../types/$error.js");t.exports=r},{"./../types/$error.js":113,"./../types/$path.js":114,"./followReference":40,"./onError":50,"./onMissing":51,"./onValue":52,"./util/hardlink":54,"./util/isExpired":55,"./util/isMaterialzed":56,"./util/lru":58,"./util/permuteKey":59}],48:[function(e,t){var r=e("./getWalk");t.exports={getAsJSON:e("./getAsJSON")(r),getAsJSONG:e("./getAsJSONG")(r),getAsValues:e("./getAsValues")(r),getAsPathMap:e("./getAsPathMap")(r),getValueSync:e("./getValueSync"),getBoundValue:e("./getBoundValue"),setCache:e("./legacy_setCache")}},{"./getAsJSON":41,"./getAsJSONG":42,"./getAsPathMap":43,"./getAsValues":44,"./getBoundValue":45,"./getValueSync":46,"./getWalk":47,"./legacy_setCache":49}],49:[function(e,t){var r=0,o=0,s="__reference_container",n="__context",a="__generation",i="__generation_updated",u="__invalidated",p="__key",l="__null",c="./",f="../",h="__ref",d="__ref_index",v="__refs_length",_="/",g="$type",y="$size",x="$expires",b="sentinel",m="ref",P="error",j="value";t.exports=function(e,t){var S,A,O,$,w=e._root,N=w.expired,k=0,M=0,E=[],z=[],V=e._cache,q=V,J=q;for(E[0]=t,z[-1]=q;k>-1;){var R=!1,G=0,I=void 0,C=void 0,T=void 0,B=!1;J=q=z[k-1],k=k;e:for(;;){if(M=k,S=J&&J[g]||void 0,A=S===b?J[j]:J,(R=!(null!=(t=E[G=4*k])&&"object"==typeof t)||void 0!==t[g]||Array.isArray(t)||!((I=E[G+1]||(E[G+1]=Object.keys(t)))&&((B=I.length>1)||I.length>0)))||null==J||void 0!==S||"object"!=typeof J||Array.isArray(A)){if((($=null!=(J&&J[x]))&&1!==$&&(0===$||$<now())||null!=J&&J[u]===!0)&&(S=void 0,A=void 0,J=(N[N.length]=J)&&(J[u]=!0)&&void 0),R||S&&S!==b||!Array.isArray(A)){if(null!=T){var F,D,L=J&&J[y]||0;
if(S=t&&t[g]||void 0,nV2=S?t[j]:void 0,A=S===b?t[j]:t,F=t,S&&S!==b&&S!==m||!Array.isArray(A)?S===b||S===m?F[y]=O=50+(nV2&&"number"==typeof nV2.length?nV2.length:1):S===P?F[y]=O=t&&t[y]||0||51:null==t||"object"!=typeof t?(O=50+("string"==typeof A&&A.length||1),S="sentinel",F={},F[j]=A,F[g]=S,F[y]=O):(S=F[g]=S||GROUP,F[y]=O=t&&t[y]||0||51):(delete A[y],O=S?50+(A.length||1):A.length||1,F[y]=O,A[s]=F),J!==F&&null!=J&&"object"==typeof J){for(var X,Y=J[v]||0,K=F[v]||0,W=-1;++W<Y;)void 0!==(X=J[h+W])&&(X[n]=F,F[h+(K+W)]=X,J[h+W]=void 0);F[v]=Y+K,J[v]=X=void 0;for(var U,Q,H,Z,et,tt,rt=q,ot=J,st=T,nt=[q,st,J],at=0;at>-1;){if(q=nt[H=8*at],st=nt[H+1],J=nt[H+2],(void 0===(Z=nt[H+3])||(Z=void 0))&&(Z=nt[H+3]=J&&J[g]||void 0||null),et=nt[H+4]||(nt[H+4]=Z===b?J[j]:J),void 0===(tt=nt[H+5])&&(tt=nt[H+5]=!Z&&null!=J&&"object"==typeof J&&!Array.isArray(et)),tt===!0){if(void 0===(U=nt[H+6])){U=nt[H+6]=[],Q=-1;for(var it in J)!("_"===it[0]&&"_"===it[1]||it===c||it===f||it===_||"$"===it[0])&&(U[++Q]=it)}if(Q=nt[H+7]||(nt[H+7]=0),Q<U.length){nt[H+7]=Q+1,nt[H=8*++at]=J,nt[H+1]=st=U[Q],nt[H+2]=J[st];continue}}var ut,pt=J[g]===b?J[j]:J;if(pt&&Array.isArray(pt)&&(ut=pt[n])){for(var lt=(pt[d]||0)-1,ct=(ut[v]||0)-1;++lt<=ct;)ut[h+lt]=ut[h+(lt+1)];ut[v]=ct,pt[d]=pt[n]=ut=void 0}if(null!=J&&"object"==typeof J){for(var ft,ht=-1,dt=J[v]||0;++ht<dt;)void 0!==(ft=J[h+ht])&&(ft[n]=J[h+ht]=void 0);J[v]=void 0;var vt=w,_t=vt.__head,gt=vt.__tail,yt=J.__next,xt=J.__prev;null!=yt&&"object"==typeof yt&&(yt.__prev=xt),null!=xt&&"object"==typeof xt&&(xt.__next=yt),J===_t&&(vt.__head=vt.__next=yt),J===gt&&(vt.__tail=vt.__prev=xt),J.__next=J.__prev=void 0,_t=gt=yt=xt=void 0,q[st]=J[c]=J[f]=J[_]=void 0}delete nt[H+0],delete nt[H+1],delete nt[H+2],delete nt[H+3],delete nt[H+4],delete nt[H+5],delete nt[H+6],delete nt[H+7],--at}q=rt,J=ot}q[T]=J=F,S=J&&J[g]||void 0,J=!((J[c]||!(J[a]||(J[a]=++r)&&J)||S&&S!==b||!Array.isArray(A)||!(A[s]=J))&&!J),D=L-O;for(var bt=q,mt=J;J=q;)if(q=J[f],(J[y]=(J[y]||0)-D)<=0&&q){var Pt,jt=J[g]===b?J[j]:J;if(jt&&Array.isArray(jt)&&(Pt=jt[n])){for(var St=(jt[d]||0)-1,At=(Pt[v]||0)-1;++St<=At;)Pt[h+St]=Pt[h+(St+1)];Pt[v]=At,jt[d]=jt[n]=Pt=void 0}if(null!=J&&"object"==typeof J){for(var Ot,$t=-1,wt=J[v]||0;++$t<wt;)void 0!==(Ot=J[h+$t])&&(Ot[n]=J[h+$t]=void 0);J[v]=void 0;var Nt=w,kt=Nt.__head,Mt=Nt.__tail,Et=J.__next,zt=J.__prev;null!=Et&&"object"==typeof Et&&(Et.__prev=zt),null!=zt&&"object"==typeof zt&&(zt.__next=Et),J===kt&&(Nt.__head=Nt.__next=Et),J===Mt&&(Nt.__tail=Nt.__prev=zt),J.__next=J.__prev=void 0,kt=Mt=Et=zt=void 0,q[J[p]]=J[c]=J[f]=J[_]=void 0}}else if(J[i]!==o){for(var Vt,qt,Jt,Rt,Gt,It=J,Ct=[],Tt=0;Tt>-1;){if(void 0===(Vt=Ct[Tt]))for(Jt=Rt=-1,Gt=J[v]||0,J[i]=o,J[a]=++r,void 0!==(qt=J[f])&&qt[i]!==o?(Ct[Tt]=Vt=new Array(Gt+1),Vt[++Rt]=qt):Gt>0&&(Ct[Tt]=Vt=new Array(Gt));++Jt<Gt;)void 0!==(qt=J[h+Jt])&&qt[i]!==o&&(Vt[++Rt]=qt);void 0!==(J=Vt&&Vt.pop())?++Tt:Ct[Tt--]=void 0}J=It}q=bt,J=mt}J=J;break e}if(null==J||void 0!==S||"object"!=typeof J||Array.isArray(A)){T=null,J=J,k=k;continue e}}if(null==(T=I[C])){J=J;break e}if(T===l||("_"!==T[0]||"_"!==T[1])&&T!==c&&T!==f&&T!==_&&"$"!==T[0]){if(E[4*(k+1)+3]=T,z[k-1]=q=J,null!=T){if(J=q&&q[T],"object"==typeof t){for(var Bt in t)"$"===Bt[0]&&Bt!==y&&(q&&(q[Bt]=t[Bt])||!0);t=t[T]}var Ft=t&&t[g]||void 0,Dt=Ft===b?t[j]:t;if((null==J||"object"!=typeof J||S&&S!==b&&!Array.isArray(A))&&!Ft&&null!=t&&"object"==typeof t&&!Array.isArray(Dt)){if(S=void 0,A={},O=J&&J[y]||0,J!==A&&null!=J&&"object"==typeof J){for(var Lt,Xt=J[v]||0,Yt=A[v]||0,Kt=-1;++Kt<Xt;)void 0!==(Lt=J[h+Kt])&&(Lt[n]=A,A[h+(Yt+Kt)]=Lt,J[h+Kt]=void 0);A[v]=Xt+Yt,J[v]=Lt=void 0;for(var Wt,Ut,Qt,Ht,Zt,er,tr=q,rr=J,or=T,sr=[q,or,J],nr=0;nr>-1;){if(q=sr[Qt=8*nr],or=sr[Qt+1],J=sr[Qt+2],(void 0===(Ht=sr[Qt+3])||(Ht=void 0))&&(Ht=sr[Qt+3]=J&&J[g]||void 0||null),Zt=sr[Qt+4]||(sr[Qt+4]=Ht===b?J[j]:J),void 0===(er=sr[Qt+5])&&(er=sr[Qt+5]=!Ht&&null!=J&&"object"==typeof J&&!Array.isArray(Zt)),er===!0){if(void 0===(Wt=sr[Qt+6])){Wt=sr[Qt+6]=[],Ut=-1;for(var ar in J)!("_"===ar[0]&&"_"===ar[1]||ar===c||ar===f||ar===_||"$"===ar[0])&&(Wt[++Ut]=ar)}if(Ut=sr[Qt+7]||(sr[Qt+7]=0),Ut<Wt.length){sr[Qt+7]=Ut+1,sr[Qt=8*++nr]=J,sr[Qt+1]=or=Wt[Ut],sr[Qt+2]=J[or];continue}}var ir,ur=J[g]===b?J[j]:J;if(ur&&Array.isArray(ur)&&(ir=ur[n])){for(var pr=(ur[d]||0)-1,lr=(ir[v]||0)-1;++pr<=lr;)ir[h+pr]=ir[h+(pr+1)];ir[v]=lr,ur[d]=ur[n]=ir=void 0}if(null!=J&&"object"==typeof J){for(var cr,fr=-1,hr=J[v]||0;++fr<hr;)void 0!==(cr=J[h+fr])&&(cr[n]=J[h+fr]=void 0);J[v]=void 0;var dr=w,vr=dr.__head,_r=dr.__tail,gr=J.__next,yr=J.__prev;null!=gr&&"object"==typeof gr&&(gr.__prev=yr),null!=yr&&"object"==typeof yr&&(yr.__next=gr),J===vr&&(dr.__head=dr.__next=gr),J===_r&&(dr.__tail=dr.__prev=yr),J.__next=J.__prev=void 0,vr=_r=gr=yr=void 0,q[or]=J[c]=J[f]=J[_]=void 0}delete sr[Qt+0],delete sr[Qt+1],delete sr[Qt+2],delete sr[Qt+3],delete sr[Qt+4],delete sr[Qt+5],delete sr[Qt+6],delete sr[Qt+7],--nr}q=tr,J=rr}q[T]=J=A,J=!((J[c]||!(J[a]||(J[a]=++r)&&J)||S&&S!==b||!Array.isArray(A)||!(A[s]=J))&&!J);for(var xr,br=J;xr=J;){if(J[i]!==o){for(var mr,Pr,jr,Sr,Ar,Or=J,$r=[],wr=0;wr>-1;){if(void 0===(mr=$r[wr]))for(jr=Sr=-1,Ar=J[v]||0,J[i]=o,J[a]=++r,void 0!==(Pr=J[f])&&Pr[i]!==o?($r[wr]=mr=new Array(Ar+1),mr[++Sr]=Pr):Ar>0&&($r[wr]=mr=new Array(Ar));++jr<Ar;)void 0!==(Pr=J[h+jr])&&Pr[i]!==o&&(mr[++Sr]=Pr);void 0!==(J=mr&&mr.pop())?++wr:$r[wr--]=void 0}J=Or}J=xr[f]}J=br}}J=J,k+=1}else E[G+2]=C+1,J=J,k=k}J=J;var Nr,kr,Mr=4*k;do delete E[Mr+0],delete E[Mr+1],delete E[Mr+2],delete E[Mr+3];while((Nr=E[(Mr=4*--k)+1])&&(E[Mr+2]=++kr)>=Nr.length)}return V}},{}],50:[function(e,t){var r=e("./util/lru"),o=(e("./util/clone"),r.promote);t.exports=function(e,t,r,s,n){n.errors.push({path:r,value:t.value}),o(e,t),s&&(n.requestedPaths.push(r),n.optimizedPaths.push(s))}},{"./util/clone":53,"./util/lru":58}],51:[function(e,t){function r(e,t,r,o,a,i,u){var p,l=0;if(u)for(l=0,p=e.length;p>l;l++)"__null"===e[l]&&(e[l]=null);if("JSON"===i){for(r=s(r,e),l=0,p=a.length;p>l;l++){var c=a[l],f=r[c];r[c]=[f]}t.requestedMissingPaths.push(r),t.optimizedMissingPaths.push(n(o,e))}else t.requestedMissingPaths.push(s(r,e)),t.optimizedMissingPaths.push(n(o,e))}{var o=e("./util/support"),s=o.fastCat,n=o.fastCatSkipNulls,a=o.fastCopy,i=(e("./util/isExpired"),e("./util/spreadJSON"));e("./util/clone")}t.exports=function(e,t,o,s,n,u,p,l,c,f){var h;if(Array.isArray(o))h=s<o.length?a(o,s):[],r(h,u,p,l,c,f);else{h=[],i(o,h);for(var d=0,v=h.length;v>d;d++)r(h[d],u,p,l,c,f,!0)}}},{"./util/clone":53,"./util/isExpired":55,"./util/spreadJSON":60,"./util/support":61}],52:[function(e,t){var r=e("./util/lru"),o=e("./util/clone"),s=r.promote,n=e("./../types/$path.js"),a=e("./../types/$sentinel.js"),i=e("./../types/$error.js");t.exports=function(e,t,r,u,p,l,c,f,h){var d,v,_,g,y,x,b,m,P=!1;switch(t&&s(e,t),t&&void 0!==t.value||(P=e._materialized),m=P?{$type:a}:e._boxed?o(t):t.$type===n||t.$type===i?"JSONG"===f?o(t):t.value:"JSONG"===f&&"object"==typeof t.value?o(t):t.value,p&&(h&&null!==p[p.length-1]&&p.push(null),u.requestedPaths.push(p),u.optimizedPaths.push(l)),f){case"Values":r({path:p,value:m});break;case"PathMap":if(v=p.length-1,-1===v)r.json=m;else{for(y=r.json,y||(y=r.json={}),d=0;v>d;d++)_=p[d],y[_]||(y[_]={}),x=y,b=_,y=y[_];_=p[d],null!==_?y[_]=m:x[b]=m}break;case"JSON":if(r)if(c.length){for(r.json||(r.json={}),y=r.json,d=0,v=c.length-1;v>d;d++)_=c[d],g=p[_],y[g]||(y[g]={}),y=y[g];_=c[d],g=p[_],y[g]=m}else r.json=m;break;case"JSONG":for(y=r.jsong,y||(y=r.jsong={},r.paths=[]),d=0,v=l.length-1;v>d;d++)g=l[d],y[g]||(y[g]={}),y=y[g];g=l[d],y[g]=P?{$type:a}:m,p&&r.paths.push(p)}}},{"./../types/$error.js":113,"./../types/$path.js":114,"./../types/$sentinel.js":115,"./util/clone":53,"./util/lru":58}],53:[function(e,t){t.exports=function(e){var t,r,o,s=Object.keys(e);for(t={},r=0,o=s.length;o>r;r++){var n=s[r];0!==n.indexOf("__")&&"/"!==n&&"./"!==n&&"../"!==n&&(t[n]=e[n])}return t}},{}],54:[function(e,t){function r(e,t){var r=t.__refs_length||0;t["__ref"+r]=e,t.__refs_length=r+1,e.__ref_index=r,e.__context=t}function o(e){var t=e.__context;if(t){for(var r=e.__ref_index,o=t.__refs_length;o>r;)t["__ref"+r]=t[__REF+r+1],++r;t.__refs_length=o-1,e.__context=void 0,e.__ref_index=void 0}}t.exports={create:r,remove:o}},{}],55:[function(e,t){var r=e("../../support/now");t.exports=function(e){var t=void 0===e.$expires&&-1||e.$expires;return-1!==t&&1!==t&&(0===t||t<r())}},{"../../support/now":101}],56:[function(e,t){t.exports=function(e){return e._materialized&&!(e._router||e._dataSource)}},{}],57:[function(e,t){t.exports=function(e){return e.path&&e.value}},{}],58:[function(e,t){function r(e,t){var r=e._root,o=r.__head;if(o!==t){if(!o)return void(r.__head=t);if(!r.__tail)return r.__head=t,r.__tail=o,t.__next=o,void(o.__prev=t);var s=t.__prev,n=t.__next;n&&(n.__prev=s),s&&(s.__next=n),t.__prev=void 0,r.__head=t,t.__next=o,o.__prev=t}}function o(e,t){var r=e._root,o=t.__prev,s=t.__next;s&&(s.__prev=o),o&&(o.__next=s),t.__prev=void 0,t===r.__head&&(r.__head=void 0),t===r.__tail&&(r.__tail=void 0),t.__invalidated=!0,r.expired.push(t)}t.exports={promote:r,splice:o}},{}],59:[function(e,t){t.exports=function(e,t){if(t.isArray){t.loaded&&t.rangeOffset>t.to&&(t.arrOffset++,t.loaded=!1);var r=t.arrOffset;if(r===e.length)return t.done=!0,"";var o=e[t.arrOffset],s=typeof o;return"object"===s?(t.loaded||(t.from=o.from||0,t.to=o.to||o.length&&t.from+o.length-1||0,t.rangeOffset=t.from,t.loaded=!0),t.rangeOffset++):(t.arrOffset++,o)}return t.loaded||(t.from=e.from||0,t.to=e.to||e.length&&t.from+e.length-1||0,t.rangeOffset=t.from,t.loaded=!0),t.rangeOffset>t.to?(t.done=!0,""):t.rangeOffset++}},{}],60:[function(e,t){var r=e("./support").fastCopy;t.exports=function o(e,t,s){if(s=s||[],t.length||t.push(s),null==e||"object"!=typeof e)return[];var n=Object.keys(e);if(1===n.length)s.push(n[0]),o(e[n[0]],t,s);else for(var a=0,i=n.length;i>a;a++){var u=n[a],p=r(s);p.push(u),t.push(p),o(e[u],t,p)}}},{"./support":61}],61:[function(e,t){function r(e,t){var r,o,s=[];for(o=0,t=t||0,r=e.length;r>t;o++,t++)s[o]=e[t];return s}function o(e,t){var r,o,s,n=[];for(r=0,o=e.length;o>r;r++)n[r]=e[r];for(s=0,o=t.length;o>s;s++)null!==t[s]&&(n[r++]=t[s]);return n}function s(e,t){var r,o,s,n=[];for(r=0,o=e.length;o>r;r++)n[r]=e[r];for(s=0,o=t.length;o>s;s++)n[r++]=t[s];return n}t.exports={fastCat:s,fastCatSkipNulls:o,fastCopy:r}},{}],62:[function(e,t){t.exports={invPathSetsAsJSON:e("./invalidate-path-sets-as-json-dense"),invPathSetsAsJSONG:e("./invalidate-path-sets-as-json-graph"),invPathSetsAsPathMap:e("./invalidate-path-sets-as-json-sparse"),invPathSetsAsValues:e("./invalidate-path-sets-as-json-values")}},{"./invalidate-path-sets-as-json-dense":63,"./invalidate-path-sets-as-json-graph":64,"./invalidate-path-sets-as-json-sparse":65,"./invalidate-path-sets-as-json-values":66}],63:[function(e,t){function r(e,t,r){var n,i=u([],e),c=-1,f=t.length,h=i.nodes,v=a(h),_=[],g=[];for(i[0]=i.root;++c<f;){n=r&&r[c],i[3]=v[3]=h[3]=l(n)?n.json||(n.json={}):void 0;var y=t[c];i.index=c,p(o,s,y,i,v,h,_,g),l(n)&&(n.json=i.json),delete i.json}return d(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:i.errors,hasValue:!0,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u,p,d){var v,_;if(null==u){if(null==(u=c(a)))return;_=r[3],v=r[0]}else _=d&&o[3]||r[3],v=o[0];var g=v[u];if(!i)return r[0]=v,void(o[0]=g);if(e.length>1)return r[0]=o[0]=g,void(d&&(r[3]=_)&&(o[3]=_[p]||(_[p]={})));if(o[0]=g,_){var y=l(g)&&g.$type||void 0,x=p;null==x&&(_=t,x=3),_[x]=n(t,g,y,g&&g.value)}var b=t.lru,m=g.$size||0,P=t.version;h(v,g,u,t.lru),f(v,m,P,b)}function s(e,t,r,o,s){t.json=t[3],t.hasValue=!0,t.requestedPaths.push(i(s,t.offset))}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/update-graph"),h=e("../support/invalidate-node"),d=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/array-slice":81,"../support/clone-dense-json":82,"../support/get-valid-key":91,"../support/invalidate-node":95,"../support/is-object":97,"../support/options":102,"../support/update-graph":111,"../walk/walk-path-set":119}],64:[function(e,t){function r(e,t,r){var n=u([],e),a=-1,l=t.length,c=n.nodes,f=i(c),h=[],d=[],_=r[0];for(n[0]=n.root,n[1]=f[1]=c[1]=_.jsong||(_.jsong={}),n.requestedPaths=_.paths||(_.paths=n.requestedPaths);++a<l;){var g=t[a];p(o,s,g,n,f,c,h,d)}return v(n.lru,n.expired,n.version,n.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:n.errors,hasValue:!0,requestedPaths:n.requestedPaths,optimizedPaths:n.optimizedPaths,requestedMissingPaths:n.requestedMissingPaths,optimizedMissingPaths:n.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var d,v;if(null==p){if(null==(p=c(i)))return;v=r[1],d=r[0]}else v=o[1],d=o[0];var _=p,g=d[p];if(!u)return r[0]=d,o[0]=g,r[1]=v,void(o[1]=v[_]||(v[_]={}));var y=l(g)&&g.$type||void 0;if(e.length>1)return r[0]=o[0]=g,r[1]=v,void(y==n?v[_]=a(t,g,y,g.value):o[1]=v[_]||(v[_]={}));o[0]=g,v[_]=a(t,g,y,g&&g.value);var x=t.lru,b=g.$size||0,m=t.version;h(d,g,p,t.lru),f(d,b,m,x)}function s(e,t,r,o,s,n){d(t,s,n),t.json=t[1],t.hasValue=!0}t.exports=r;var n=e("../types/$path"),a=e("../support/clone-dense-json"),i=e("../support/array-clone"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/update-graph"),h=e("../support/invalidate-node"),d=e("../support/clone-success-paths"),v=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/clone-dense-json":82,"../support/clone-success-paths":87,"../support/get-valid-key":91,"../support/invalidate-node":95,"../support/is-object":97,"../support/options":102,"../support/update-graph":111,"../types/$path":114,"../walk/walk-path-set-soft-link":118}],65:[function(e,t){function r(e,t,r){var n=u([],e),i=-1,l=t.length,c=n.nodes,f=a(c),h=[],v=[],_=r[0];for(n[0]=n.root,n[3]=f[3]=c[3]=_.json||(_.json={});++i<l;){var g=t[i];p(o,s,g,n,f,c,h,v)}return d(n.lru,n.expired,n.version,n.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:n.errors,hasValue:!0,requestedPaths:n.requestedPaths,optimizedPaths:n.optimizedPaths,requestedMissingPaths:n.requestedMissingPaths,optimizedMissingPaths:n.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u){var p,d,v;if(null==u){if(null==(u=c(a)))return;v=c(s),d=r[3],p=r[0]}else v=u,d=o[3],p=o[0];var _=p[u];if(!i)return r[0]=p,void(o[0]=_);if(e.length>1)return r[0]=o[0]=_,r[3]=d,void(o[3]=d[v]||(d[v]={}));o[0]=_;var g=l(_)&&_.$type||void 0;d[v]=n(t,_,g,_&&_.value);var y=t.lru,x=_.$size||0,b=t.version;h(p,_,u,t.lru),f(p,x,b,y)}function s(e,t,r,o,s){t.json=t[3],t.hasValue=!0,t.requestedPaths.push(i(s,t.offset))}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/update-graph"),h=e("../support/invalidate-node"),d=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/array-slice":81,"../support/clone-dense-json":82,"../support/get-valid-key":91,"../support/invalidate-node":95,"../support/is-object":97,"../support/options":102,"../support/update-graph":111,"../walk/walk-path-set":119}],66:[function(e,t){function r(e,t,r){var n=u([],e),i=-1,l=t.length,c=n.nodes,f=a(c),h=[],v=[];for(n[0]=n.root,n.onNext=r;++i<l;){var _=t[i];p(o,s,_,n,f,c,h,v)}return d(n.lru,n.expired,n.version,n.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:n.errors,requestedPaths:n.requestedPaths,optimizedPaths:n.optimizedPaths,requestedMissingPaths:n.requestedMissingPaths,optimizedMissingPaths:n.optimizedMissingPaths}}function o(e,t,r,o,s,n,a,i){var u;if(null==i){if(null==(i=c(n)))return;u=r[0]}else u=o[0];var p=u[i];if(!a)return r[0]=u,void(o[0]=p);if(e.length>1)return void(r[0]=o[0]=p);o[0]=p;var l=t.lru,d=p.$size||0,v=t.version;h(u,p,i,t.lru),f(u,d,v,l)}function s(e,t,r,o,s){var u=o[0],p=l(u)&&u.$type||void 0,c=t.onNext;p&&c&&c({path:a(s),value:n(t,u,p,u&&u.value)}),t.requestedPaths.push(i(s,t.offset))}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/update-graph"),h=e("../support/invalidate-node"),d=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/array-slice":81,"../support/clone-dense-json":82,"../support/get-valid-key":91,"../support/invalidate-node":95,"../support/is-object":97,"../support/options":102,"../support/update-graph":111,"../walk/walk-path-set":119}],67:[function(e,t){var r=e("../support/update-graph");t.exports=function(e,t,o,s,n,a){for(var i,u,p=n*a;i=t.pop();)u=i.$size||0,s-=u,r(i,u,o,e);if(s>=n){for(var l=e.__tail;s>=p&&(i=l);)l=l.__prev,u=i.$size||0,s-=u,r(i,u,o,e);null==(e.__tail=e.__prev=l)?e.__head=e.__next=void 0:l.__next=void 0}}},{"../support/update-graph":111}],68:[function(e,t){var r=1,o=e("../support/is-object");t.exports=function(e,t){if(o(t)&&t.$expires!==r){var s=e.__head,n=e.__tail,a=t.__next,i=t.__prev;t!==s&&(null!=a&&"object"==typeof a&&(a.__prev=i),null!=i&&"object"==typeof i&&(i.__next=a),(a=s)&&null!=s&&"object"==typeof s&&(s.__prev=t),e.__head=e.__next=s=t,s.__next=a,s.__prev=void 0),(null==n||t===n)&&(e.__tail=e.__prev=n=i||t)}return t}},{"../support/is-object":97}],69:[function(e,t){t.exports=function(e,t){var r=e.__head,o=e.__tail,s=t.__next,n=t.__prev;null!=s&&"object"==typeof s&&(s.__prev=n),null!=n&&"object"==typeof n&&(n.__next=s),t===r&&(e.__head=e.__next=s),t===o&&(e.__tail=e.__prev=n),t.__next=t.__prev=void 0,r=o=s=n=void 0}},{}],70:[function(e,t){t.exports={setPathSetsAsJSON:e("./set-json-values-as-json-dense"),setPathSetsAsJSONG:e("./set-json-values-as-json-graph"),setPathSetsAsPathMap:e("./set-json-values-as-json-sparse"),setPathSetsAsValues:e("./set-json-values-as-json-values"),setJSONGsAsJSON:e("./set-json-graph-as-json-dense"),setJSONGsAsJSONG:e("./set-json-graph-as-json-graph"),setJSONGsAsPathMap:e("./set-json-graph-as-json-sparse"),setJSONGsAsValues:e("./set-json-graph-as-json-values")}},{"./set-json-graph-as-json-dense":71,"./set-json-graph-as-json-graph":72,"./set-json-graph-as-json-sparse":73,"./set-json-graph-as-json-values":74,"./set-json-values-as-json-dense":75,"./set-json-values-as-json-graph":76,"./set-json-values-as-json-sparse":77,"./set-json-values-as-json-values":78}],71:[function(e,t){function r(e,t,r,n){var l=[];l.offset=e._path.length,l.bound=[],l=i(l,e,n);var c,f,h,d=-1,_=-1,g=t.length,y=l.nodes,x=a(y),b=[],m=[];for(l[0]=l.root;++d<g;){var P=t[d],j=P.paths,S=P.jsong||P.values||P.value,A=-1,O=j.length;for(l[2]=S,y[2]=S;++A<O;){c=r&&r[++_],l.json=l[3]=x[3]=y[3]=p(c)?c.json||(c.json={}):void 0;var $=j[A];l.index=A,u(o,s,$,l,x,y,b,m),f=l.hasValue,f?(h=!0,p(c)&&(c.json=l.json),delete l.json,delete l.hasValue):p(c)&&delete c.json}}return v(l.lru,l.expired,l.version,l.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:l.errors,requestedPaths:l.requestedPaths,optimizedPaths:l.optimizedPaths,requestedMissingPaths:l.requestedMissingPaths,optimizedMissingPaths:l.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u,f,h){var d,v,_;if(null==u){if(null==(u=l(a)))return;_=r[3],d=r[0],v=r[2]}else _=h&&o[3]||r[3],d=o[0],v=o[2];var g=d[u],y=v&&v[u];if(o[2]=y,o[0]=g=c(t,d,g,v,y,u),!i)return r[0]=d,void(r[2]=v);var x=s.length,b=t.offset;if(e.length>1)return r[0]=g,r[2]=y,void(x>b&&h&&(r[3]=_)&&(o[3]=_[f]||(_[f]={})));if(_&&null!=f){var m=p(g)&&g.$type||void 0;_[f]=n(t,g,m,g&&g.value)}}function s(e,t,r,o,s,a,i,u){var l=o[0],c=p(l)&&l.$type||(l=void 0);f(t,l,c,e,s,a)===!1&&(d(t,s,a),h(t,l,c,s)===!1&&(null==u&&(t.json=n(t,l,c,l&&l.value)),t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../support/clone-dense-json")),a=e("../support/array-clone"),i=e("../support/options"),u=e("../walk/walk-path-set-soft-link"),p=e("../support/is-object"),l=e("../support/get-valid-key"),c=e("../support/merge-node"),f=e("../support/treat-node-as-miss"),h=e("../support/treat-node-as-error"),d=e("../support/clone-success-paths"),v=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/clone-dense-json":82,"../support/clone-success-paths":87,"../support/get-valid-key":91,"../support/is-object":97,"../support/merge-node":100,"../support/options":102,"../support/treat-node-as-error":107,"../support/treat-node-as-miss":108,"../types/$path":114,"../walk/walk-path-set-soft-link":118}],72:[function(e,t){function r(e,t,r,n){var a=[];a.offset=0,a.bound=[],a=u(a,e,n);var l,c=-1,f=t.length,h=a.nodes,d=i(h),v=[],g=[],y=r[0];for(a[0]=a.root,a[1]=d[1]=h[1]=y.jsong||(y.jsong={}),a.requestedPaths=y.paths||(y.paths=a.requestedPaths);++c<f;){var x=t[c],b=x.paths,m=x.jsong||x.values||x.value,P=-1,j=b.length;for(a[2]=m,h[2]=m;++P<j;){var S=b[P];p(o,s,S,a,d,h,v,g)}}return l=a.hasValue,l?y.jsong=a[1]:(delete y.jsong,delete y.paths),_(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var h,d,v,_;if(null==p){if(null==(p=c(i)))return;v=r[1],h=r[0],d=r[2]}else v=o[1],h=o[0],d=o[2];var _=p,g=h[p],y=d&&d[p];if(o[2]=y,o[0]=g=f(t,h,g,d,y,p),!u)return r[0]=h,r[2]=d,r[1]=v,void(o[1]=v[_]||(v[_]={}));var x=l(g)&&g.$type||void 0;return e.length>1?(r[0]=g,r[2]=y,r[1]=v,void(x==n?(v[_]=a(t,g,x,g.value),t.hasValue=!0):o[1]=v[_]||(v[_]={}))):(v[_]=a(t,g,x,g&&g.value),void(t.hasValue=!0))}function s(e,t,r,o,s,n,i,u){var p,f=o[0],_=l(f)&&f.$type||(f=void 0);h(t,f,_,e,s,n)===!1&&(d(t,s,n),v(t.lru,f),null!=u||t.hasValue||null!=(u=c(n))||(f=a(t,f,_,f&&f.value),p=t[1],p.$type=f.$type,p.value=f.value),t.hasValue=!0)}t.exports=r;var n=e("../types/$path"),a=e("../support/clone-graph-json"),i=e("../support/array-clone"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),h=e("../support/treat-node-as-miss"),d=(e("../support/treat-node-as-error"),e("../support/clone-success-paths")),v=e("../lru/promote"),_=e("../lru/collect")},{"../lru/collect":67,"../lru/promote":68,"../support/array-clone":80,"../support/clone-graph-json":83,"../support/clone-success-paths":87,"../support/get-valid-key":91,"../support/is-object":97,"../support/merge-node":100,"../support/options":102,"../support/treat-node-as-error":107,"../support/treat-node-as-miss":108,"../types/$path":114,"../walk/walk-path-set-soft-link":118}],73:[function(e,t){function r(e,t,r,n){var a=[];a.offset=e._path.length,a.bound=[],a=u(a,e,n);var l,c=-1,f=t.length,h=a.nodes,d=i(h),v=[],g=[],y=r[0];for(a[0]=a.root,a[3]=d[3]=h[3]=y.json||(y.json={});++c<f;){var x=t[c],b=x.paths,m=x.jsong||x.values||x.value,P=-1,j=b.length;for(a[2]=m,h[2]=m;++P<j;){var S=b[P];p(o,s,S,a,d,h,v,g)}}return l=a.hasValue,l?y.json=a[3]:delete y.json,_(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var h,d,v,_;if(null==p){if(null==(p=c(i)))return;_=c(s),v=r[3],h=r[0],d=r[2]}else _=p,v=o[3],h=o[0],d=o[2];var g=h[p],y=d&&d[p];if(o[2]=y,o[0]=g=f(t,h,g,d,y,p),!u)return r[0]=h,void(r[2]=d);var x=s.length,b=t.offset,m=l(g)&&g.$type||void 0;return e.length>1?(r[0]=g,r[2]=y,void(x>b&&(!m||m==n)&&(r[3]=v,o[3]=v[_]||(v[_]={})))):void(v[_]=a(t,g,m,g&&g.value))}function s(e,t,r,o,s,n,i,u){var p,f=o[0],_=l(f)&&f.$type||(f=void 0);h(t,f,_,e,s,n)===!1&&(v(t,s,n),d(t,f,_,s)===!1&&(null!=u||t.hasValue||null!=(u=c(n))||(f=a(t,f,_,f&&f.value),p=t[3],p.$type=f.$type,p.value=f.value),t.hasValue=!0))}t.exports=r;var n=e("../types/$path"),a=e("../support/clone-dense-json"),i=e("../support/array-clone"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),h=e("../support/treat-node-as-miss"),d=e("../support/treat-node-as-error"),v=e("../support/clone-success-paths"),_=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/clone-dense-json":82,"../support/clone-success-paths":87,"../support/get-valid-key":91,"../support/is-object":97,"../support/merge-node":100,"../support/options":102,"../support/treat-node-as-error":107,"../support/treat-node-as-miss":108,"../types/$path":114,"../walk/walk-path-set-soft-link":118}],74:[function(e,t){function r(e,t,r,n){var i=[];i.offset=e._path.length,i.bound=[],i=u(i,e,n);var l=-1,c=t.length,f=i.nodes,h=a(f),d=[],v=[];for(i[0]=i.root,i.onNext=r;++l<c;){var g=t[l],y=g.paths,x=g.jsong||g.values||g.value,b=-1,m=y.length;for(i[2]=x,f[2]=x;++b<m;){var P=y[b];p(o,s,P,i,h,f,d,v)}}return _(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:i.errors,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,n,a,i){var u,p;if(null==i){if(null==(i=c(n)))return;u=r[0],p=r[2]}else u=o[0],p=o[2];var l=u[i],h=p&&p[i];return o[2]=h,o[0]=l=f(t,u,l,p,h,i),a?void(e.length>1&&(r[0]=l,r[2]=h)):(r[0]=u,void(r[2]=p))}function s(e,t,r,o,s,a){var u=o[0],p=l(u)&&u.$type||(u=void 0);h(t,u,p,e,s,a)===!1&&(v(t,s,a),d(t,u,p,s)===!1&&t.onNext({path:i(s,t.offset),value:n(t,u,p,u&&u.value)}))}t.exports=r;var n=(e("../types/$path"),e("../support/clone-dense-json")),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),h=e("../support/treat-node-as-miss"),d=e("../support/treat-node-as-error"),v=e("../support/clone-success-paths"),_=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/array-slice":81,"../support/clone-dense-json":82,"../support/clone-success-paths":87,"../support/get-valid-key":91,"../support/is-object":97,"../support/merge-node":100,"../support/options":102,"../support/treat-node-as-error":107,"../support/treat-node-as-miss":108,"../types/$path":114,"../walk/walk-path-set-soft-link":118}],75:[function(e,t){function r(e,t,r,n){var a,i,f,h=p([],e,n),d=-1,v=t.length,_=h.nodes,g=u(_),y=[],x=[];for(h[0]=h.root;++d<v;){a=r&&r[d],h.json=h[3]=g[3]=_[3]=c(a)?a.json||(a.json={}):void 0;var b=t[d],m=b.path;h.value=b.value,h.index=d,l(o,s,m,h,g,_,y,x),i=h.hasValue,i?(f=!0,c(a)&&(a.json=h.json),delete h.json,delete h.hasValue):c(a)&&delete a.json}return P(h.lru,h.expired,h.version,h.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:h.errors,hasValue:f,requestedPaths:h.requestedPaths,optimizedPaths:h.optimizedPaths,requestedMissingPaths:h.requestedMissingPaths,optimizedMissingPaths:h.optimizedMissingPaths}}function o(e,t,r,o,s,u,p,l,x,b){var m,P;if(null==l){if(null==(l=f(u)))return;P=r[3],m=r[0]}else P=b&&o[3]||r[3],m=o[0];var j,S=m[l];if(!p)return j=c(S)&&S.$type||void 0,j=j&&e.length>1&&"."||j,S=h(t,m,S,j,l),r[0]=m,void(o[0]=S);if(e.length>1)return j=c(S)&&S.$type||void 0,S=h(t,m,S,j,l),r[0]=o[0]=S,void(b&&(r[3]=P)&&(o[3]=P[x]||(P[x]={})));var A=t.error_selector,O=t[0],$=c(S)&&S.$size||0,w=t.value;j=c(w)&&w.$type||void 0,w=d(w,j,j?w.value:w),j||(j=a),j==n&&A&&(w=A(s,w)),S=v(m,S,w,l,t.lru),S=_(O,m,S,l,y()),g(m,$-S.$size,t.version,t.lru),o[0]=S,P&&null!=x&&(P[x]=i(t,S,j,S&&S.value))}function s(e,t,r,o,s,n,a,u){var p=o[0],l=c(p)&&p.$type||(p=void 0);x(t,p,l,e,s,n)===!1&&(m(t,s,n),b(t,p,l,s)===!1&&(null==u&&(t.json=i(t,p,l,p&&p.value)),t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../types/$error")),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),h=e("../support/create-branch"),d=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),m=e("../support/clone-success-paths"),P=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/clone-dense-json":82,"../support/clone-success-paths":87,"../support/create-branch":89,"../support/get-valid-key":91,"../support/graph-node":92,"../support/inc-generation":93,"../support/is-object":97,"../support/options":102,"../support/replace-node":105,"../support/treat-node-as-error":107,"../support/treat-node-as-miss":108,"../support/update-back-refs":110,"../support/update-graph":111,"../support/wrap-node":112,"../types/$error":113,"../types/$path":114,"../types/$sentinel":115,"../walk/walk-path-set":119}],76:[function(e,t){function r(e,t,r,n){var a,i=l([],e,n),u=-1,f=t.length,h=i.nodes,d=p(h),v=[],_=[],g=r[0];for(i[0]=i.root,i[1]=d[1]=h[1]=g.jsong||(g.jsong={}),i.requestedPaths=g.paths||(g.paths=i.requestedPaths);++u<f;){var y=t[u],x=y.path;i.value=y.value,c(o,s,x,i,d,h,v,_)}return a=i.hasValue,a?g.jsong=i[1]:(delete g.jsong,delete g.paths),j(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:i.errors,hasValue:a,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,p,l,c){var b,m;if(null==c){if(null==(c=h(p)))return;m=r[1],b=r[0]}else m=o[1],b=o[0];var P,j=c,S=b[c];if(!l)return P=f(S)&&S.$type||void 0,P=P&&e.length>1&&"."||P,S=d(t,b,S,P,c),r[0]=b,o[0]=S,r[1]=m,void(P==n?(m[j]=u(t,S,P,S.value),t.hasValue=!0):o[1]=m[j]||(m[j]={}));if(e.length>1)return P=f(S)&&S.$type||void 0,S=d(t,b,S,P,c),P=S.$type,r[0]=o[0]=S,r[1]=m,void(P==n?(m[j]=u(t,S,P,S.value),t.hasValue=!0):o[1]=m[j]||(m[j]={}));var A=t.error_selector,O=t[0],$=f(S)&&S.$size||0,w=t.value;P=f(w)&&w.$type||void 0,w=v(w,P,P?w.value:w),P||(P=i),P==a&&A&&(w=A(s,w)),S=_(b,S,w,c,t.lru),S=g(O,b,S,c,x()),y(b,$-S.$size,t.version,t.lru),o[0]=S,m[j]=u(t,S,P,S&&S.value),t.hasValue=!0}function s(e,t,r,o,s,n,a,i){var p,l=o[0],c=f(l)&&l.$type||(l=void 0);b(t,l,c,e,s,n)===!1&&(m(t,s,n),P(t.lru,l),null!=i||t.hasValue||null!=(i=h(n))||(l=u(t,l,c,l&&l.value),p=t[1],p.$type=l.$type,p.value=l.value),t.hasValue=!0)}t.exports=r;var n=e("../types/$path"),a=e("../types/$error"),i=e("../types/$sentinel"),u=e("../support/clone-graph-json"),p=e("../support/array-clone"),l=e("../support/options"),c=e("../walk/walk-path-set-soft-link"),f=e("../support/is-object"),h=e("../support/get-valid-key"),d=e("../support/create-branch"),v=e("../support/wrap-node"),_=e("../support/replace-node"),g=e("../support/graph-node"),y=(e("../support/update-back-refs"),e("../support/update-graph")),x=e("../support/inc-generation"),b=e("../support/treat-node-as-miss"),m=(e("../support/treat-node-as-error"),e("../support/clone-success-paths")),P=e("../lru/promote"),j=e("../lru/collect")},{"../lru/collect":67,"../lru/promote":68,"../support/array-clone":80,"../support/clone-graph-json":83,"../support/clone-success-paths":87,"../support/create-branch":89,"../support/get-valid-key":91,"../support/graph-node":92,"../support/inc-generation":93,"../support/is-object":97,"../support/options":102,"../support/replace-node":105,"../support/treat-node-as-error":107,"../support/treat-node-as-miss":108,"../support/update-back-refs":110,"../support/update-graph":111,"../support/wrap-node":112,"../types/$error":113,"../types/$path":114,"../types/$sentinel":115,"../walk/walk-path-set-soft-link":118}],77:[function(e,t){function r(e,t,r,n){var a,i=p([],e,n),c=-1,f=t.length,h=i.nodes,d=u(h),v=[],_=[],g=r[0];
for(i[0]=i.root,i[3]=d[3]=h[3]=g.json||(g.json={});++c<f;){var y=t[c],x=y.path;i.value=y.value,l(o,s,x,i,d,h,v,_)}return a=i.hasValue,a?g.json=i[3]:delete g.json,P(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:i.errors,hasValue:a,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,u,p,l){var x,b,m;if(null==l){if(null==(l=f(u)))return;m=f(s),b=r[3],x=r[0]}else m=l,b=o[3],x=o[0];var P,j=x[l];if(!p)return P=c(j)&&j.$type||void 0,P=P&&e.length>1&&"."||P,j=h(t,x,j,P,l),r[0]=x,void(o[0]=j);if(e.length>1)return P=c(j)&&j.$type||void 0,j=h(t,x,j,P,l),r[0]=o[0]=j,r[3]=b,void(o[3]=b[m]||(b[m]={}));var S=t.error_selector,A=t[0],O=c(j)&&j.$size||0,$=t.value;P=c($)&&$.$type||void 0,$=d($,P,P?$.value:$),P||(P=a),P==n&&S&&($=S(s,$)),j=v(x,j,$,l,t.lru),j=_(A,x,j,l,y()),g(x,O-j.$size,t.version,t.lru),o[0]=j,b[m]=i(t,j,P,j&&j.value)}function s(e,t,r,o,s,n,a,u){var p,l=o[0],h=c(l)&&l.$type||(l=void 0);x(t,l,h,e,s,n)===!1&&(m(t,s,n),b(t,l,h,s)===!1&&(null!=u||t.hasValue||null!=(u=f(n))||(l=i(t,l,h,l&&l.value),p=t[3],p.$type=l.$type,p.value=l.value),t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../types/$error")),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),h=e("../support/create-branch"),d=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),m=e("../support/clone-success-paths"),P=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/clone-dense-json":82,"../support/clone-success-paths":87,"../support/create-branch":89,"../support/get-valid-key":91,"../support/graph-node":92,"../support/inc-generation":93,"../support/is-object":97,"../support/options":102,"../support/replace-node":105,"../support/treat-node-as-error":107,"../support/treat-node-as-miss":108,"../support/update-back-refs":110,"../support/update-graph":111,"../support/wrap-node":112,"../types/$error":113,"../types/$path":114,"../types/$sentinel":115,"../walk/walk-path-set":119}],78:[function(e,t){function r(e,t,r,n){var a=p([],e,n),i=-1,c=t.length,f=a.nodes,h=u(f),d=[],v=[];for(a[0]=a.root,a.onNext=r;++i<c;){var _=t[i],g=_.path;a.value=_.value,l(o,s,g,a,h,f,d,v)}return P(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var l;if(null==p){if(null==(p=f(i)))return;l=r[0]}else l=o[0];var x,b=l[p];if(!u)return x=c(b)&&b.$type||void 0,x=x&&e.length>1&&"."||x,b=h(t,l,b,x,p),r[0]=l,void(o[0]=b);if(e.length>1)return x=c(b)&&b.$type||void 0,b=h(t,l,b,x,p),void(r[0]=o[0]=b);var m=t.error_selector,P=t[0],j=c(b)&&b.$size||0,S=t.value;x=c(S)&&S.$type||void 0,S=d(S,x,x?S.value:S),x||(x=a),x==n&&m&&(S=m(s,S)),b=v(l,b,S,p,t.lru),b=_(P,l,b,p,y()),g(l,j-b.$size,t.version,t.lru),o[0]=b}function s(e,t,r,o,s,n){var a=o[0],p=c(a)&&a.$type||(a=void 0);x(t,a,p,e,s,n)===!1&&(m(t,s,n),b(t,a,p,s)===!1&&t.onNext({path:u(s),value:i(t,a,p,a&&a.value)}))}t.exports=r;var n=e("../types/$error"),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),h=e("../support/create-branch"),d=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),m=e("../support/clone-success-paths"),P=e("../lru/collect")},{"../lru/collect":67,"../support/array-clone":80,"../support/clone-dense-json":82,"../support/clone-success-paths":87,"../support/create-branch":89,"../support/get-valid-key":91,"../support/graph-node":92,"../support/inc-generation":93,"../support/is-object":97,"../support/options":102,"../support/replace-node":105,"../support/treat-node-as-error":107,"../support/treat-node-as-miss":108,"../support/update-back-refs":110,"../support/update-graph":111,"../support/wrap-node":112,"../types/$error":113,"../types/$sentinel":115,"../walk/walk-path-set":119}],79:[function(e,t){t.exports=function(e,t){for(var r=-1,o=e.length,s=new Array(o+1);++r<o;)s[r]=e[r];return s[r]=t,s}},{}],80:[function(e,t){t.exports=function(e){for(var t=-1,r=e.length,o=new Array(r);++t<r;)o[t]=e[t];return o}},{}],81:[function(e,t){t.exports=function(e,t){for(var r=-1,o=e.length-t,s=new Array(o);++r<o;)s[r]=e[r+t];return s}},{}],82:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone");t.exports=function(e,t,s,n){return null==t||void 0===n?{$type:r}:1==e.boxed?!!s&&o(t)||t:n}},{"../types/$sentinel":115,"./clone":88}],83:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone"),s=e("./is-primitive");t.exports=function(e,t,n,a){return null==t||void 0===a?{$type:r}:1==e.boxed?!!n&&o(t)||t:!n||n===r&&s(a)?a:o(t)}},{"../types/$sentinel":115,"./clone":88,"./is-primitive":98}],84:[function(e,t){var r=e("./clone-requested-path"),o=e("./clone-optimized-path");t.exports=function(e,t,s,n){e.requestedMissingPaths.push(r(e.bound,s,t,e.index)),e.optimizedMissingPaths.push(o(n,t))}},{"./clone-optimized-path":85,"./clone-requested-path":86}],85:[function(e,t){t.exports=function(e,t){for(var r,o=-1,s=-1,n=e.length,a=t.length,i=[];++o<n;)i[o]=e[o];for(;++s<a;)null!=(r=t[s])&&(i[o++]=r);return i}},{}],86:[function(e,t){t.exports=function(e,t,r,o){for(var s,n=-1,a=-1,i=-1,u=e.length,p=t.length,l=r.length,c=new Array(u+p+l);++n<u;)c[n]=e[n];for(;++a<p;)null!=(s=t[a])&&(c[n++]=t[a]);for(;++i<l;)null!=(s=r[i])&&(c[n++]=r[i]);return null!=o&&(c.pathSetIndex=o),c}},{}],87:[function(e,t){var r=e("./array-slice"),o=e("./array-clone");t.exports=function(e,t,s){e.requestedPaths.push(r(t,e.offset)),e.optimizedPaths.push(o(s))}},{"./array-clone":80,"./array-slice":81}],88:[function(e,t){var r=e("./is-object");t.exports=function(e){var t,o,s,n=e,a=n,i=-1;if(r(n))for(n={},o=Object.keys(a),t=o.length;++i<t;)s=o[i],"_"===s[0]&&"_"===s[1]||"/"===s||"./"===s||"../"===s||(n[s]=a[s]);return n}},{"./is-object":97}],89:[function(e,t){var r=e("../types/$path"),o="expired",s=e("./replace-node"),n=e("./graph-node"),a=e("./update-back-refs"),i=e("./is-primitive"),u=e("./is-expired");t.exports=function(e,t,p,l,c){return l&&u(e,p)&&(l=o),(l&&l!=r||i(p))&&(p=s(t,p,{},c,e.lru),p=n(e[0],t,p,c,0),p=a(p,e.version)),p}},{"../types/$path":114,"./graph-node":92,"./is-expired":96,"./is-primitive":98,"./replace-node":105,"./update-back-refs":110}],90:[function(e,t){var r="__ref";t.exports=function(e){for(var t,o=-1,s=e.__refs_length||0;++o<s;)void 0!==(t=e[r+o])&&(t.__context=t.__ref_index=e[r+o]=void 0);e.__refs_length=void 0}},{}],91:[function(e,t){t.exports=function(e){var t,r=e.length-1;do if(null!=(t=e[r]))return t;while(--r>-1);return null}},{}],92:[function(e,t){var r="/",o="./",s="../",n="__key",a="__generation";t.exports=function(e,t,i,u,p){return i[r]=e,i[o]=i,i[s]=t,i[n]=u,i[a]=p,i}},{}],93:[function(e,t){var r=0;t.exports=function(){return r++}},{}],94:[function(e,t){var r=0;t.exports=function(){return r++}},{}],95:[function(e,t){function r(e,t,n,a){if(s(e,t,n,a)){var i=o(t)&&t.$type||void 0;if(null==i)for(var u=Object.keys(t),p=-1,l=u.length;++p<l;){var n=u[p];"_"===n[0]&&"_"===n[1]||"/"===n||"./"===n||"../"===n||r(t,t[n],n,a)}return!0}return!1}t.exports=r;var o=e("./is-object"),s=e("./remove-node")},{"./is-object":97,"./remove-node":104}],96:[function(e,t){var r=e("../values/$expires-now"),o=e("../values/$expires-never"),s=e("./now"),n=e("../lru/splice");t.exports=function(e,t){var a=t.$expires;return null!=a&&a!=o&&(a==r||a<s())?(t.__invalidated||(t.__invalidated=!0,e.expired.push(t),n(e.lru,t)),!0):!1}},{"../lru/splice":69,"../values/$expires-never":116,"../values/$expires-now":117,"./now":101}],97:[function(e,t){var r="object";t.exports=function(e){return null!=e&&typeof e==r}},{}],98:[function(e,t){var r="object";t.exports=function(e){return null==e||typeof e!=r}},{}],99:[function(e,t){function r(e,t){return t?o(e)?(e=e[e.__offset||(e.__offset=0)],r(e,null!=e&&"object"==typeof e)):(void 0===e.__offset&&(e.__offset=e.from||(e.from=0)),e.__offset):e}t.exports=r;var o=Array.isArray},{}],100:[function(e,t){var r="./",o=e("../types/$path"),s=(e("../types/$sentinel"),e("../values/$expires-now"),e("./is-object")),n=(e("./is-primitive"),e("./is-expired")),a=e("../lru/promote"),i=e("./wrap-node"),u=e("./graph-node"),p=e("../support/replace-node"),l=e("../support/update-graph"),c=e("./inc-generation"),f=e("./invalidate-node");t.exports=function(e,t,h,d,v,_){var g,y,x,b;if(h==v){if(null==h)return null;if((x=s(h))&&(g=h.$type,null==g))return null==h[r]?u(e[0],t,h,_,0):h}else(x=s(h))&&(g=h.$type);var m,P;if(g==o){if(null==v)return n(e,h)?void f(t,h,_,e.lru):h;if((b=s(v))&&(y=v.$type,y==o))if(h===v){if(null!=h[r])return h}else if(n(e,v)===!1&&v.$timestamp<h.$timestamp==!1){m=h.value,P=v.value;var j=m.length;if(j===P.length){for(;--j>-1&&m[j]===P[j];);if(-1===j)return h}}}else if((b=s(v))&&(y=v.$type),x&&!g&&(null==v||b&&!y))return h;if(y&&v[r]&&n(e,v))return x&&h!=v&&f(t,h,_,e.lru),v;if(g&&b&&!y)return h=p(t,h,v,_,e.lru),u(e[0],t,h,_,0);if(!b||y){var S=0;if(h!=v){P||(P=y?v.value:v),v=i(v,y,P);var A=x&&h.$size||0,O=v.$size;S=A-O,h=p(t,h,v,_,e.lru),l(t,S,e.version,e.lru),h=u(e[0],t,h,_,c())}else x&&null==h[r]?(h=t[_]=i(h,g,h.value),S=-h.$size,l(t,S,e.version,e.lru),h=u(e[0],t,h,_,c())):(h=t[_]=i(h,g,h),S=-h.$size,l(t,S,e.version,e.lru),h=u(e[0],t,h,_,c()));a(e.lru,h)}else null==h&&(h=t[_]=u(e[0],t,v,_,0));return h}},{"../lru/promote":68,"../support/replace-node":105,"../support/update-graph":111,"../types/$path":114,"../types/$sentinel":115,"../values/$expires-now":117,"./graph-node":92,"./inc-generation":93,"./invalidate-node":95,"./is-expired":96,"./is-object":97,"./is-primitive":98,"./wrap-node":112}],101:[function(e,t){t.exports=Date.now},{}],102:[function(e,t){var r=e("../support/inc-version"),o=e("../get/getBoundValue");t.exports=function(e,t,s){{var n=(e.version=r(),e.lru||(e.lru=t._root)),a=e.root||(e.root=t._cache),i=(e.expired||(e.expired=n.expired),e.bound||(e.bound=t._path||[])),u=(e.errors||(e.errors=[]),e.requestedPaths||(e.requestedPaths=[]),e.optimizedPaths||(e.optimizedPaths=[]),e.requestedMissingPaths||(e.requestedMissingPaths=[]),e.optimizedMissingPaths||(e.optimizedMissingPaths=[]),e.nodes||(e.nodes=[]));e.boxed=t._boxed||!1,e.materialized=t._materialized,e.errorsAsValues=t._treatErrorsAsValues||!1}return e.offset||(e.offset=0),e.error_selector=s||t._errorSelector,u[0]=i.length?o(t,i).value:a,e}},{"../get/getBoundValue":45,"../support/inc-version":94}],103:[function(e,t){function r(e){return o(e)?++e.__offset===e.length?r(e[e.__offset=0]):!0:null!=e&&"object"==typeof e?++e.__offset>(e.to||(e.to=e.from+(e.length||1)-1))?(e.__offset=e.from,!1):!0:!1}t.exports=r;var o=Array.isArray},{}],104:[function(e,t){var r=e("../types/$path"),o="/",s="./",n="../",a=e("./unlink"),i=e("./delete-back-refs"),u=e("../lru/splice"),p=e("./is-object");t.exports=function(e,t,l,c){if(p(t)){var f=t.$type;return f&&(f==r&&a(t),u(c,t)),i(t),e[l]=t[o]=t[n]=t[s]=void 0,!0}return!1}},{"../lru/splice":69,"../types/$path":114,"./delete-back-refs":90,"./is-object":97,"./unlink":109}],105:[function(e,t){var r=e("./transfer-back-refs"),o=e("./invalidate-node");t.exports=function(e,t,s,n,a){return null!=t&&t!==s&&"object"==typeof t&&(r(t,s),o(e,t,n,a)),e[n]=s}},{"./invalidate-node":95,"./transfer-back-refs":106}],106:[function(e,t){var r="__ref",o="__refs_length";t.exports=function(e,t){for(var s,n=e[o]||0,a=t[o]||0,i=-1;++i<n;)s=e[r+i],void 0!==s&&(s.__context=t,t[r+(a+i)]=s,e[r+i]=void 0);t[o]=n+a,e[o]=s=void 0}},{}],107:[function(e,t){var r=e("../types/$error"),o=e("../lru/promote"),s=e("./array-clone");t.exports=function(e,t,n,a){return null==t?!1:(o(e.lru,t),n!=r||e.errorsAsValues?!1:(e.errors.push({path:s(a),value:t.value}),!0))}},{"../lru/promote":68,"../types/$error":113,"./array-clone":80}],108:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone-missing-paths"),s=e("./is-expired");t.exports=function(e,t,n,a,i,u){var p=!e.materialized;if(null==t&&p)return o(e,a,i,u),!0;if(n){if(n==r&&void 0===t.value&&p&&!e.boxed)return!0;if(s(e,t))return o(e,a,i,u),!0}return!1}},{"../types/$sentinel":115,"./clone-missing-paths":84,"./is-expired":96}],109:[function(e,t){var r="__ref";t.exports=function(e){var t=e.__context;if(t){for(var o=(e.__ref_index||0)-1,s=(t.__refs_length||0)-1;++o<=s;)t[r+o]=t[r+(o+1)];t.__refs_length=s,e.__ref_index=e.__context=t=void 0}}},{}],110:[function(e,t){function r(e,t){if(e&&e.__version!==t){e.__version=t,e.__generation=o(),r(e["../"],t);for(var s=-1,n=e.__refs_length||0;++s<n;)r(e["__ref"+s],t)}return e}t.exports=r;var o=e("./inc-generation")},{"./inc-generation":93}],111:[function(e,t){var r=e("./remove-node"),o=e("./update-back-refs");t.exports=function(e,t,s,n){for(var a;a=e;)e=a["../"],(a.$size=(a.$size||0)-t)<=0&&null!=e?r(e,a,a.__key,n):a.__version!==s&&o(a,s)}},{"./remove-node":104,"./update-back-refs":110}],112:[function(e,t){var r=(e("../types/$path"),e("../types/$error"),e("../types/$sentinel")),o=e("./now"),s=e("./clone"),n=Array.isArray,a=e("./is-object");t.exports=function(e,t,i){var u=e,p=0;if(t?(u=s(e),p=u.$size):(u={value:i},t=r),0>=p||null==p)switch(typeof i){case"number":case"boolean":case"function":case"undefined":p=51;break;case"object":p=n(i)&&50+i.length||51;break;case"string":p=50+i.length}var l=a(e)&&e.$expires||void 0;return"number"==typeof l&&0>l&&(u.$expires=o()+-1*l),u.$type=t,u.$size=p,u}},{"../types/$error":113,"../types/$path":114,"../types/$sentinel":115,"./clone":88,"./is-object":97,"./now":101}],113:[function(e,t){t.exports="error"},{}],114:[function(e,t){t.exports="ref"},{}],115:[function(e,t){t.exports="sentinel"},{}],116:[function(e,t){t.exports=1},{}],117:[function(e,t){t.exports=0},{}],118:[function(e,t){function r(e,t,d,v,_,g,y,x,b,m){var P=g[0];if(0==d.length||l(P))return t(d,v,_,g,y,x,b,m);for(var j=P.$type;j===o;){if(p(v,P))return g[0]=void 0,t(d,v,_,g,y,x,b,m);var S=P,A=P.value;if(g[0]=_[0]=v[0],g[1]=_[1]=v[1],g[2]=_[2]=v[2],n(e,S,A,v,_,g,y,x),P=g[0],null==P)return t(d,v,_,g,y,x,b,m);if(l(P)||(j=P.$type)&&j!=o)return e(s,v,_,g,y,x,!0,null,m,!1),t(d,v,_,g,u(y,null),x,b,m)}if(null!=j)return t(d,v,_,g,y,x,b,m);var O=d[0],$=c(O);do{var w,N;$===!0?(w=f(O,!0),N=w):(w=O,N=m);var k,M,E=i(g),z=i(_);null==w?(k=u(y,null),M=i(x),w=b,N=m,e(d,v,z,E,k,M,!0,null,N,!1)):(k=u(y,w),M=u(x,w),e(d,v,z,E,k,M,!0,w,N,$)),r(e,t,a(d,1),v,z,E,k,M,w,N,$)}while($&&h(O))}t.exports=r;var o=e("../types/$path"),s=new Array(0),n=e("./walk-reference"),a=e("../support/array-slice"),i=e("../support/array-clone"),u=e("../support/array-append"),p=e("../support/is-expired"),l=e("../support/is-primitive"),c=e("../support/is-object"),f=e("../support/keyset-to-key"),h=e("../support/permute-keyset")},{"../support/array-append":79,"../support/array-clone":80,"../support/array-slice":81,"../support/is-expired":96,"../support/is-object":97,"../support/is-primitive":98,"../support/keyset-to-key":99,"../support/permute-keyset":103,"../types/$path":114,"./walk-reference":120}],119:[function(e,t){function r(e,t,d,v,_,g,y,x,b,m){var P=g[0];if(0==d.length||l(P))return t(d,v,_,g,y,x,b,m);for(var j=P.$type;j===o;){if(p(v,P))return g[0]=void 0,t(d,v,_,g,y,x,b,m);var S=P,A=P.value;if(P=P.__context,null!=P)j=P.$type,x=i(A),g[0]=P;else{if(g[0]=_[0]=v[0],n(e,S,A,v,_,g,y,x),P=g[0],null==P)return t(d,v,_,g,y,x,b,m);if(l(P)||(j=P.$type)&&j!=o)return e(s,v,_,g,y,x,!0,null,m,!1),t(d,v,_,g,u(y,null),x,b,m)}}if(null!=j)return t(d,v,_,g,y,x,b,m);var O=d[0],$=c(O);do{var w,N;$===!0?(w=f(O,!0),N=w):(w=O,N=m);var k,M,E=i(g),z=i(_);null==w?(k=u(y,null),M=i(x),w=b,N=m,e(d,v,z,E,k,M,!0,null,N,!1)):(k=u(y,w),M=u(x,w),e(d,v,z,E,k,M,!0,w,N,$)),r(e,t,a(d,1),v,z,E,k,M,w,N,$)}while($&&h(O))}t.exports=r;var o=e("../types/$path"),s=new Array(0),n=e("./walk-reference"),a=e("../support/array-slice"),i=e("../support/array-clone"),u=e("../support/array-append"),p=e("../support/is-expired"),l=e("../support/is-primitive"),c=e("../support/is-object"),f=e("../support/keyset-to-key"),h=e("../support/permute-keyset")},{"../support/array-append":79,"../support/array-clone":80,"../support/array-slice":81,"../support/is-expired":96,"../support/is-object":97,"../support/is-primitive":98,"../support/keyset-to-key":99,"../support/permute-keyset":103,"../types/$path":114,"./walk-reference":120}],120:[function(e,t){function r(e,t,r,u,p,l,c,f){f.length=0;for(var h,d,v,_=-1,g=r.length;++_<g;){if(h=l[0],null==h)return l;if(a(h)||h.$type)return e(s,u,p,l,c,f,!1,v,null,!1),l;do if(d=r[_],null!=d){v=d,f.push(d),e(i(r,_),u,p,l,c,f,!1,d,null,!1);break}while(++_<g)}if(h=l[0],n(h)&&t.__context!==h){var y=h.__refs_length||0;h.__refs_length=y+1,h[o+y]=t,t.__context=h,t.__ref_index=y}return l}t.exports=r;{var o="__ref",s=new Array(0),n=e("../support/is-object"),a=e("../support/is-primitive"),i=e("../support/array-slice");e("../support/array-append")}},{"../support/array-append":79,"../support/array-slice":81,"../support/is-object":97,"../support/is-primitive":98}],121:[function(e,t){var r=e("./lib/falcor"),o=e("./lib/get"),s=e("./lib/set"),n=e("./lib/invalidate"),a=r.Model.prototype;a._getBoundValue=o.getBoundValue,a._getValueSync=o.getValueSync,a._getPathSetsAsValues=o.getAsValues,a._getPathSetsAsJSON=o.getAsJSON,a._getPathSetsAsPathMap=o.getAsPathMap,a._getPathSetsAsJSONG=o.getAsJSONG,a._getPathMapsAsValues=o.getAsValues,a._getPathMapsAsJSON=o.getAsJSON,a._getPathMapsAsPathMap=o.getAsPathMap,a._getPathMapsAsJSONG=o.getAsJSONG,a._setPathSetsAsJSON=s.setPathSetsAsJSON,a._setPathSetsAsJSONG=s.setPathSetsAsJSONG,a._setPathSetsAsPathMap=s.setPathSetsAsPathMap,a._setPathSetsAsValues=s.setPathSetsAsValues,a._setJSONGsAsJSON=s.setJSONGsAsJSON,a._setJSONGsAsJSONG=s.setJSONGsAsJSONG,a._setJSONGsAsPathMap=s.setJSONGsAsPathMap,a._setJSONGsAsValues=s.setJSONGsAsValues,a._invPathSetsAsJSON=n.invPathSetsAsJSON,a._invPathSetsAsJSONG=n.invPathSetsAsJSONG,a._invPathSetsAsPathMap=n.invPathSetsAsPathMap,a._invPathSetsAsValues=n.invPathSetsAsValues,a._setCache=o.setCache,t.exports=r},{"./lib/falcor":6,"./lib/get":48,"./lib/invalidate":62,"./lib/set":70}]},{},[1])(1)});