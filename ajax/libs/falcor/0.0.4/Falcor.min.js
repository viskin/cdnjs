!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.falcor=e()}}(function(){return function e(t,r,o){function s(a,i){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+a+"'")}var p=r[a]={exports:{}};t[a][0].call(p.exports,function(e){var r=t[a][1][e];return s(r?r:e)},p,p.exports,e,t,r,o)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<o.length;a++)s(o[a]);return s}({1:[function(e,t){t.exports=e("./operations")},{"./operations":115}],2:[function(e,t){var r={NOOP:function(){},__GENERATION_GUID:0,__GENERATION_VERSION:0,__CONTAINER:"__reference_container",__CONTEXT:"__context",__GENERATION:"__generation",__GENERATION_UPDATED:"__generation_updated",__INVALIDATED:"__invalidated",__KEY:"__key",__KEYS:"__keys",__IS_KEY_SET:"__is_key_set",__NULL:"__null",__SELF:"./",__PARENT:"../",__REF:"__ref",__REF_INDEX:"__ref_index",__REFS_LENGTH:"__refs_length",__ROOT:"/",__OFFSET:"__offset",__FALKOR_EMPTY_OBJECT:"__FALKOR_EMPTY_OBJECT",$TYPE:"$type",$SIZE:"$size",$EXPIRES:"$expires",$TIMESTAMP:"$timestamp",SENTINEL:"sentinel",ERROR:"error",VALUE:"value",EXPIRED:"expired",LEAF:"leaf"};r.__INTERNAL_KEYS=[r.__CONTAINER,r.__CONTEXT,r.__GENERATION,r.__GENERATION_UPDATED,r.__INVALIDATED,r.__KEY,r.__KEYS,r.__IS_KEY_SET,r.__NULL,r.__SELF,r.__PARENT,r.__REF,r.__REF_INDEX,r.__REFS_LENGTH,r.__OFFSET,r.__ROOT],t.exports=r},{}],3:[function(e,t){if("undefined"==typeof r)var r={};var o=e("./rx.ultralite");r.__Internals={},r.Observable=o.Observable,r.EXPIRES_NOW=0,r.EXPIRES_NEVER=1,r.now=function(){return Date.now()},t.exports=r},{"./rx.ultralite":31}],4:[function(e,t){var r=e("./Falcor"),o=e("./Constants"),s=e("./request/RequestQueue"),n=e("./scheduler/ImmediateScheduler"),a=e("./scheduler/TimeoutScheduler"),i=o.$TYPE,u=o.$TYPE,p=(e("./ModelResponse"),e("./operations/call")),l=e("./operations"),c=e("./../get/getBoundValue"),f=t.exports=r.Model=function d(e){e||(e={}),this._dataSource=e.source,this._maxSize=e.maxSize||Math.pow(2,53)-1,this._collectRatio=e.collectRatio||.75,this._scheduler=new n,this._request=new s(this,this._scheduler),this._errorSelector=e.errorSelector||d.prototype._errorSelector,this._router=e.router,this._root=e.root||{expired:[],allowSync:!1,unsafeMode:!0},e.cache&&"object"==typeof e.cache?this.setCache(e.cache):this._cache={},this._path=[]};f.EXPIRES_NOW=r.EXPIRES_NOW,f.EXPIRES_NEVER=r.EXPIRES_NEVER,f.prototype={_boxed:!1,_progressive:!1,_errorSelector:function(e,t){return t},get:l("get"),set:l("set"),invalidate:l("invalidate"),call:p,getValue:function(e){return this.get(e,function(e){return e})},setValue:function(e,t){return this.set(Array.isArray(e)?{path:e,value:t}:e,function(e){return e})},bind:function(e){for(var t=this,o=t._root,s=new Array(arguments.length-1),n=-1,a=arguments.length-1;++n<a;)s[n]=arguments[n+1];if(0===a)throw new Error("Model#bind requires at least one value path.");return r.Observable.create(function(r){var n;try{if(o.allowSync=!0,!(n=t.bindSync(t._path.concat(e))))throw!1;o.allowSync=!1,r.onNext(n),r.onCompleted()}catch(a){return o.allowSync=!1,t.get.apply(t,s.map(function(t){return e.concat(t)}).concat(function(){})).subscribe(function(){},function(e){r.onError(e)},function(){try{(n=t.bindSync(e))&&r.onNext(n),r.onCompleted()}catch(o){r.onError(o)}})}})},setCache:function(e){return(this._cache={})&&this._setCache(this,e)},getValueSync:function(e){if(Array.isArray(e)===!1)throw new Error("Model#getValueSync must be called with an Array path.");return this._path.length&&(e=this._path.concat(e)),this.syncCheck("getValueSync")&&this._getValueSync(this,e).value},setValueSync:function(e,t,r){if(Array.isArray(e)===!1&&("function"!=typeof r&&(r=t||this._errorSelector),t=e.value,e=e.path),Array.isArray(e)===!1)throw new Error("Model#setValueSync must be called with an Array path.");if(this._dataSource)throw new Error("Model#setValueSync can not be invoked on a Model with a DataSource. Please use the withoutDataSource() method followed by setValueSync if you would like to modify only the local cache.");var t=this.syncCheck("setValueSync")&&this._setValueSync(this,this._path.concat(e),t,r);if(t[i]===u&&!this._treatErrorsAsValues)throw t;return t},bindSync:function(e){if(Array.isArray(e)===!1)throw new Error("Model#bindSync must be called with an Array path.");var t=this.syncCheck("bindSync")&&c(this,this._path.concat(e));if(t.shorted){if((t=t.value)&&t[i]===u)throw t;return void 0}if(t.value&&t.value[i]===u)throw t.value;return this.clone(["_path",t.path])},clone:function(){var e=this,t=new f;return Object.keys(e).forEach(function(r){t[r]=e[r]}),Array.prototype.slice.call(arguments).forEach(function(e){t[e[0]]=e[1]}),t},batch:function(e){return"number"==typeof e?e=new a(Math.round(Math.abs(e))):e&&e.schedule||(e=new n),this.clone(["_request",new s(this,e)])},unbatch:function(){return this.clone(["_request",new s(this,new n)])},treatErrorsAsValues:function(){return this.clone(["_treatErrorsAsValues",!0])},materialize:function(){return this.clone(["_materialized",!0])},boxValues:function(){return this.clone(["_boxed",!0])},unboxValues:function(){return this.clone(["_boxed",!1])},withoutDataSource:function(){return this.clone(["_dataSource",null])},syncCheck:function(e){if(this._root.allowSync===!1&&this._root.unsafeMode===!1)throw new Error("Model#"+e+" may only be called within the context of a request selector.");return!0}}},{"./../get/getBoundValue":39,"./Constants":2,"./Falcor":3,"./ModelResponse":5,"./operations":10,"./operations/call":7,"./request/RequestQueue":30,"./scheduler/ImmediateScheduler":32,"./scheduler/TimeoutScheduler":33}],5:[function(e,t){function r(e){this._subscribe=e}function o(){}function s(e){var t=Array.prototype.slice.call(arguments,1);return new r(function(r){return e.subscribe(t.reduce(function(e,t){return Object.create(e,t)},r))})}var n=e("./Falcor"),a=n.Observable,i={format:{value:"AsValues"}},u={format:{value:"AsPathMap"}},p={format:{value:"AsJSONG"}};r.create=function(e){return new r(e)},r.prototype=a.create(o),r.prototype.format="AsPathMap",r.prototype.toPathValues=function(){return s(this,i)},r.prototype.toJSON=function(){return s(this,u)},r.prototype.toJSONG=function(){return s(this,p)},t.exports=r},{"./Falcor":3}],6:[function(e,t){var r=e("./Falcor"),o=e("./Model");r.Model=o,t.exports=r},{"./Falcor":3,"./Model":4}],7:[function(e){e("./../../ModelResponse")},{"./../../ModelResponse":5}],8:[function(e,t){function r(e,t,r,s){return e._request.get(t,r,o(e,t,s))}var o=e("./../support/getSourceObserever");t.exports=r},{"./../support/getSourceObserever":17}],9:[function(e,t){var r=e("../support/combineOperations"),o=e("../support/partitionOperations"),s=e("./getSourceRequest"),n=e("../support/processOperations"),a=e("../support/setSeedsOrOnNext"),i=e("../support/onNextValue"),u=e("../support/onCompletedOrError"),p=e("../support/primeSeeds"),l=e("../support/mergeBoundPath");t.exports=function(e,t,c){return function(f){function d(t,r){var a=n(e,t,y),p=a.requestedMissingPaths,f=p.length;N=N||a.valuesReceived,b&&f&&e._dataSource?s(e,p,a.optimizedMissingPaths,function(t,s){if(b=!1,t)return P=P.concat(t),void d([],h);s.paths=l(e,s);var n=o(s,p,m,r,v);d.apply(null,n)}):(!A&&N&&i(e,v,h,c),u(g,_,P))}var h,v=f.onNext.bind(f),_=f.onError.bind(f),g=f.onCompleted.bind(f),y=e._errorSelector,x=(f.isProgressive,c&&c.length||0),b=!0,P=[],m=c&&"AsJSON"||f.format||"AsPathMap",j="AsJSONG"===m,S="AsPathMap"===m,A="AsValues"===m,O=S||j||c,N=!1;O&&(h=p(c,x));try{var $=r(t,m,"get");a($,O,h,v,c),d($,h)}catch(w){P=[w],u(g,_,P)}}}},{"../support/combineOperations":15,"../support/mergeBoundPath":21,"../support/onCompletedOrError":22,"../support/onNextValue":23,"../support/partitionOperations":24,"../support/primeSeeds":25,"../support/processOperations":26,"../support/setSeedsOrOnNext":29,"./getSourceRequest":8}],10:[function(e,t){var r=e("../ModelResponse"),o=e("./get"),s=e("./set"),n=e("./invalidate");t.exports=function(e){return function(){var t=this,a=(t._root,Array.prototype.slice.call(arguments)),i=a[a.length-1];"function"==typeof i?a.pop():i=!1;var u;return"get"===e?u=o(t,a,i):"set"===e?u=s(t,a,i):"invalidate"===e&&(u=n(t,a,i)),r.create(u)}}},{"../ModelResponse":5,"./get":9,"./invalidate":11,"./set":12}],11:[function(e,t){function r(e,t,r){return function(p){var l,c=p.onNext.bind(p),f=p.onError.bind(p),d=p.onCompleted.bind(p),h=r&&r.length||0,v=r&&"AsJSON"||p.format||"AsPathMap",_="AsJSONG"===v,g="AsPathMap"===v,y="AsValues"===v,x=g||_||r,b=!1;x&&(l=u(r,h));try{var P=o(t,v,"inv");n(P,x,l,c,r);var m=s(e,P);b=b||m.valuesReceived,!y&&b&&a(e,c,l,r),i(d,f,[])}catch(j){i(d,f,[j])}}}var o=e("../support/combineOperations"),s=e("../support/processOperations"),n=e("../support/setSeedsOrOnNext"),a=e("../support/onNextValue"),i=e("../support/onCompletedOrError"),u=e("../support/primeSeeds");t.exports=r},{"../support/combineOperations":15,"../support/onCompletedOrError":22,"../support/onNextValue":23,"../support/primeSeeds":25,"../support/processOperations":26,"../support/setSeedsOrOnNext":29}],12:[function(e,t){var r=e("../support/combineOperations"),o=e("./setSourceRequest"),s=e("../support/processOperations"),n=e("../support/setSeedsOrOnNext"),a=e("../support/onNextValue"),i=e("../support/onCompletedOrError"),u=(e("../support/mergeBoundPath"),e("../support/primeSeeds"));t.exports=function(e,t,p){return function(l){function c(u,l){var g=s(e,u,_);if(A=A||g.valuesReceived,y){var P=l[0].jsong,m=l[0].paths;for(f=1;f<l.length;f++)m=m.concat(l[f].paths);var N={jsong:P,paths:m};o(e,N,function(o,s){if(y=!1,o)return x=x.concat(o),void c([],O);e._setJSONGsAsJSON(e,[s],[]);var a=r(t,b,"get");n(a,S,O,d,p),c(a,O)})}else!j&&A&&a(e,d,O,p),i(v,h,x)}var f,d=l.onNext.bind(l),h=l.onError.bind(l),v=l.onCompleted.bind(l),_=e._errorSelector,g=(l.isProgressive,p&&p.length||0),y=!!e._dataSource,x=[],b=p&&"AsJSON"||l.format||"AsPathMap",P="AsJSONG"===b,m="AsPathMap"===b,j="AsValues"===b,S=m||P||p,A=(e._path,!1),O=u(p,g);try{var N=y&&"AsJSONG"||b,$=r(t,N,"set",y&&p),w=O;if(y&&p){var k={};w=[],$.forEach(function(e){var t={jsong:k,paths:[]};e.seeds=[t],w.push(t)})}else y?(w=[{}],n($,S,w,!1,p)):($=r(t,b,"set"),n($,S,O,d,p),w=O);c($,w)}catch(E){x=[E],i(v,h,x)}}}},{"../support/combineOperations":15,"../support/mergeBoundPath":21,"../support/onCompletedOrError":22,"../support/onNextValue":23,"../support/primeSeeds":25,"../support/processOperations":26,"../support/setSeedsOrOnNext":29,"./setSourceRequest":13}],13:[function(e,t){function r(e,t,r){return e._request.set(t,o(e,t.paths,r))}var o=e("./../support/getSourceObserever");t.exports=r},{"./../support/getSourceObserever":17}],14:[function(e,t){t.exports=function(e,t,r,o,s){return{methodName:"_setJSONGs"+e,format:e,isValues:"AsValues"===e,onNext:s,seeds:t,seedsOffset:o,args:[r]}}},{}],15:[function(e,t){var r=e("./seedRequired"),o=e("./isJSONG"),s=e("./isPathOrPathValue");t.exports=function(e,t,n,a){var i=r(t),u=!i,p=i&&"AsJSON"===t,l=0;return e.reduce(function(e,r){var i=e[e.length-1],c=s(r)?"PathSets":o(r)?"JSONGs":"PathMaps",f=i&&i.type,d="_"+n+c+t;return(!f||c!==f||a)&&(i={methodName:d,format:t,type:c,isValues:u,seeds:[],onNext:null,seedsOffset:l,args:[]},e.push(i),p&&l++),i.args.push(r),e},[])}},{"./isJSONG":19,"./isPathOrPathValue":20,"./seedRequired":27}],16:[function(e,t){t.exports=function(e){return e.reduce(function(e,t){var r=e[0];return r?t.forEach(function(e,t){"object"==typeof e&&e.forEach(function(e){r[t][r[t].length]=e})}):e[0]=t,e},[])}},{}],17:[function(e,t){function r(e,t,r){var s;return{onNext:function(e){s={jsong:e.jsong,paths:t}},onError:function(s){r(o(e,t,s))},onCompleted:function(){r(!1,s)}}}var o=e("./insertErrors.js");t.exports=r},{"./insertErrors.js":18}],18:[function(e,t){t.exports=function(e,t,r){var o=e._setPathSetsAsJSON.apply(null,[e].concat(t.reduce(function(e,t){return e[0].push({path:t,value:r}),e},[[]]),[],e._errorSelector));return o.errors}},{}],19:[function(e,t){t.exports=function(e){return e.hasOwnProperty("jsong")}},{}],20:[function(e,t){t.exports=function(e){return!!Array.isArray(e)||e.hasOwnProperty("path")&&e.hasOwnProperty("value")}},{}],21:[function(e,t){t.exports=function(e,t){var r=e._path,o=[];if(r.length)for(i=0,len=t.paths.length;len>i;i++)o[i]=r.concat(t.paths[i]);else o=t.paths;return o}},{}],22:[function(e,t){t.exports=function(e,t,r){r.length?t(r):e()}},{}],23:[function(e,t){t.exports=function(e,t,r,o){var s=e._root;s.allowSync=!0,t(o?r.length?o.apply(e,r.map(function(e){return e.json})):o.call(e):r[0]),s.allowSync=!1}},{}],24:[function(e,t){function r(e,t,r,n,a){var i=[],u=[];if("AsJSON"===r){for(var p=[],l=null,c=0,f=t.length;f>c;c++){var d=t[c];l&&l.idx===d.pathSetIndex||(l&&(l.paths=o(l.paths)),l={idx:d.pathSetIndex,paths:[]},p.push(l)),l.paths.push(d)}l.paths=o(l.paths),p.forEach(function(t,o){var p=[n[t.idx]];i.push(s(r,p,e,o,a)),u.push(p)})}else i[0]=s(r,n,e,0,a);return[i,u]}var o=e("./fastCollapse.js"),s=e("./buildJSONGOperation");t.exports=r},{"./buildJSONGOperation":14,"./fastCollapse.js":16}],25:[function(e,t){t.exports=function(e,t){var r=[];if(e)for(i=0;t>i;i++)r.push({});else r[0]={};return r}},{}],26:[function(e,t){t.exports=function(e,t,r,o){return t.reduce(function(t,s){for(var n=e[s.methodName],a=s.isValues?s.onNext:s.seeds,i=n(e,s.args,a,s.onNext,r,o),u=i.requestedMissingPaths,p=s.seedsOffset,l=0,c=u.length;c>l;l++)u[l].boundPath=o,u[l].pathSetIndex+=p;return t.requestedMissingPaths=t.requestedMissingPaths.concat(u),t.optimizedMissingPaths=t.optimizedMissingPaths.concat(i.optimizedMissingPaths),t.errors=t.errors.concat(i.errors),t.valuesReceived=t.valuesReceived||i.requestedPaths.length>0,t},{errors:[],requestedMissingPaths:[],optimizedMissingPaths:[],valuesReceived:!1})}},{}],27:[function(e,t){t.exports=function(e){return"AsJSON"===e||"AsJSONG"===e||"AsPathMap"===e}},{}],28:[function(e,t){t.exports=function(e,t,r){var o,s,n,a,i=0,u=t.length,p=e.length;if(r)for(s=0;p>s&&u>i;s++)for(a=e[s],n=n=a.args.length,o=0;n>o&&u>i;o++,i++)a.seeds.push(t[i]);else for(s=0;p>s&&u>i;s++)e[s].seeds=t}},{}],29:[function(e,t){var r=e("./setSeedsOnGroups");t.exports=function(e,t,o,s,n){if(t)r(e,o,n);else for(i=0;i<e.length;i++)e[i].onNext=s}},{"./setSeedsOnGroups":28}],30:[function(e,t){function r(e,t,s,n){var a=e[t];if("object"==typeof a)if(Array.isArray(a))a.forEach(function(a){o(s,a,n),e.length>t+1&&r(e,t+1,s[a],n)});else for(var i=a.from||0,u=a.to>=0?a.to:a.length,p=i;u>=p;p++)o(s,p,n),e.length>t+1&&r(e,t+1,s[p],n);else o(s,a,n),e.length>t+1&&r(e,t+1,s[a],n)}function o(e,t,r){return null===t?(e.__observers=e.__observers||[],!s(e.__observers,r)&&e.__observers.push(r),e):(e[t]||(e[t]={__observers:[]}),!s(e[t].__observers,r)&&e[t].__observers.push(r),e)}function s(e,t){return t?e.reduce(function(e,r){return e||r.__observerId===t.__observerId},!1):void 0}function n(e){return a(i(e))}function a(e){return e.forEach(function(e){e.forEach(function(t,r){var o;Array.isArray(t)&&t.every(p)&&l(t)&&(t.sort(function(e,t){return e-t}),t[t.length-1]-t[0]===t.length-1&&(o={},o.from=t[0],o.to=t[t.length-1],e[r]=o))})}),e}function i(e){if(null==e||"object"!=typeof e)return[[]];var t,r,o,s,n,a,p,l,c,d,h,v,_,g=Object.keys(e).filter(u),x=-1,b=g.length;if(0===b||Array.isArray(e)===!0)return[[]];for(r={};++x<b;)t=g[x],o=i(e[t]),s=f(o),n="string"==typeof t&&!y.test(t),(a=r[s])&&(p=a.head)?p[p.length]=n?parseInt(t,10):t:r[s]={head:[n?parseInt(t,10):t],tail:o};d=[];for(_ in r)for(p=(a=r[_]).head,l=a.tail,x=-1,b=l.length;++x<b;){if(a=l[x],h=-1,v=a.length,""===p[0])c=[];else for(c=[1===p.length?p[0]:p];++h<v;)c[h+1]=a[h];d[d.length]=c}return d}function u(e){return"__observers"!==e&&"__pending"!==e&&"__batchID"!==e}function p(e){return"number"==typeof e}function l(e){var t,r,o={};for(t=0,r=e.length;r>t;t++){if(o[e[t]])return!1;o[e[t]]=!0}return!0}function c(e){return e.reduce(function(e,t){return t instanceof Array?(e.push(c(t).slice(0).sort()),e):e.concat(t)},[]).slice(0).sort()}function f(e){return JSON.stringify(c(e))}var d=e("./../Falcor"),h=function(e,t){this._scheduler=t,this._jsongModel=e,this._scheduled=!1,this._requests=[]};h.prototype={_get:function(){for(var e=-1,t=this._requests;++e<t.length;)if(!t[e].pending&&t[e].isGet)return t[e];return t[t.length]=new g(this._jsongModel,this)},_set:function(){for(var e=-1,t=this._requests;++e<t.length;)if(!t[e].pending&&t[e].isSet)return t[e];return t[t.length]=new _(this._jsongModel,this)},remove:function(e){for(var t=this._requests.length-1;t>-1&&(this._requests[t].id!==e.id||!this._requests.splice(t,1));t--);},set:function(e,t){var r=this,o=r._set().batch(e,t).flush();return{dispose:function(){o.dispose()}}},get:function(e,t,r){var o=this,s=null;return o._get().batch(e,t,r),o._scheduled||(o._scheduled=!0,s=o._scheduler.schedule(o._flush.bind(o))),{dispose:function(){s.dispose()}}},_flush:function(){this._scheduled=!1;for(var e=this._requests,t=-1,r=[];++t<e.length;)e[t].pending||(r[r.length]=e[t].flush());return{dispose:function(){r.forEach(function(e){e.dispose()})}}}};var v=0,_=function(e,t){var r=this;r._jsongModel=e,r._queue=t,r.observers=[],r.jsongEnvs=[],r.pending=!1,r.id=++v,r.isSet=!0};_.prototype={batch:function(e,t){var r=this;return t.onNext=t.onNext||NOOP,t.onError=t.onError||NOOP,t.onCompleted=t.onCompleted||NOOP,t.__observerId||(t.__observerId=++v),t._requestId=r.id,r.observers[r.observers.length]=t,r.jsongEnvs[r.jsongEnvs.length]=e,r},flush:function(){var e,t=this,r=t.jsongEnvs,o=t.observers,s=t._jsongModel;return t.pending=!0,s._dataSource.set(r[0]).subscribe(function(t){e=t},function(e){for(var t=-1,r=o.length;++t<r;)obs=o[t],obs.onError&&obs.onError(e)},function(){var r,s,n;for(t._queue.remove(t),r=-1,s=o.length;++r<s;)n=o[r],n.onNext&&n.onNext({jsong:e.jsong||e.value,paths:e.paths}),n.onCompleted&&n.onCompleted()})}};var g=function(e,t){var r=this;r._jsongModel=e,r._queue=t,r.observers=[],r.optimizedPaths=[],r.requestedPaths=[],r.pending=!1,r.id=++v,r.isGet=!0};g.prototype={batch:function(e,t,r){var o=this;return r.onNext=r.onNext||NOOP,r.onError=r.onError||NOOP,r.onCompleted=r.onCompleted||NOOP,r.__observerId||(r.__observerId=++v),r._requestId=o.id,o.observers[o.observers.length]=r,o.optimizedPaths[o.optimizedPaths.length]=t,o.requestedPaths[o.requestedPaths.length]=e,o},flush:function(){var e,t,s=this,a=s.requestedPaths,i=s.optimizedPaths,u=s.observers,p=s._jsongModel;s._scheduled=!1,s.pending=!0;var l,c,f,d,h,v={},_={};for(f=0,t=a.length;t>f;f++)for(l=a[f],c=i[f],h=u[f],d=0;d<l.length;d++)r(l[d],0,o(_,null,h),h),r(c[d],0,o(v,null,h),h);return p._dataSource.get(n(v)).subscribe(function(t){e=t},function(e){for(var t=-1,r=u.length;++t<r;)h=u[t],h.onError&&h.onError(e)},function(){var t,r,o;for(s._queue.remove(s),t=-1,r=u.length;++t<r;)o=u[t],o.onNext&&o.onNext({jsong:e.jsong||e.value,paths:e.paths}),o.onCompleted&&o.onCompleted()})},contains:function(){}};var y=/\D/i;d.__Internals.buildQueries=i,t.exports=h},{"./../Falcor":3}],31:[function(e,t){(function(r){var o;if("undefined"!=typeof window&&"undefined"!=typeof window.Rx)o=window.Rx;else if("undefined"!=typeof r&&"undefined"!=typeof r.Rx)o=r.Rx;else if("undefined"!=typeof e||"undefined"!=typeof window&&window.require){var s="undefined"!=typeof e&&e||window.require;try{o=s("rx")}catch(n){o=void 0}}void 0===o&&(o={I:function(){return arguments[0]},Disposable:function(){function e(e){this.action=e}return e.create=function(t){return new e(t)},e.empty=new e(function(){}),e.prototype.dispose=function(){"function"==typeof this.action&&this.action()},e}(),Observable:function(){function e(e){this.s=e}return e.create=e.createWithDisposable=function(t){return new e(t)},e.fastCreateWithDisposable=e.create,e.fastReturnValue=function(t){return e.create(function(e){e.onNext(t),e.onCompleted()})},e.prototype.from,e.prototype.materialize,e.prototype.reduce,e.prototype.subscribe=function(e,t,r){return this.s(null!=e&&"object"==typeof e?e:o.Observer.create(e,t,r))},e.prototype.forEach=e.prototype.subscribe,e.prototype.catchException=function(t){var r=this;return e.create(function(e){return r.subscribe(function(t){e.onNext(t)},function(r){return("function"==typeof t?t(r):t).subscribe(e)},function(){e.onCompleted()})})},e}(),Observer:function(){function e(e,t,r){this.onNext=e||o.I,this.onError=t||o.I,this.onCompleted=r||o.I}return e.create=function(t,r,o){return new e(t,r,o)},e}(),Subject:function(){function e(){this.observers=[]}e.prototype.subscribe=function(e){var t=this.observers,r=t.length;return t[r]=e,{dispose:function(){t.splice(r,1)}}},e.prototype.onNext=function(e){for(var t=this.observers.concat(),r=-1,o=t.length;++r<o;)t[r].onNext(e)},e.prototype.onError=function(e){var t=this.observers.concat(),r=-1,o=t.length;for(this.observers.length=0;++r<o;)t[r].onError(e)},e.prototype.onCompleted=function(){var e=this.observers.concat(),t=-1,r=e.length;for(this.observers.length=0;++t<r;)e[t].onCompleted()}}()}),t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,t){function r(){}r.prototype={schedule:function(e){e()}},t.exports=r},{}],33:[function(e,t){function r(e){this.delay=e}r.prototype={schedule:function(e){setTimeout(e,this.delay)}},t.exports=r},{}],34:[function(e,t){function r(e,t,r,o,i,u,p){for(var l,c,f=0;;){if(0===f&&o.__context?(f=i.length,c=o.__context):(l=i[f++],c=r[l]),c){var d=c.$type,h=d&&c.value||c;if(f<i.length){if(d){r=c;break}r=c;continue}if(r=c,d&&a(c))break;if(o.__context||s(o,c),"path"===d){"JSONG"===p&&n(e,c,u,null,null,i,null,p),f=0,i=h,o=c,r=t;continue}break}r=void 0;break}if(f<i.length){for(var v=[],_=0;f>_;_++)v[_]=i[_];i=v}return[r,i]}var o=e("./util/hardlink"),s=o.create,n=e("./onValue"),a=e("./util/isExpired");t.exports=r},{"./onValue":46,"./util/hardlink":48,"./util/isExpired":49}],35:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i,u,p,l,c,f,d={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},h=d.requestedMissingPaths,v=Array.isArray(s[0])||o(s[0])?"Paths":"JSON",_=t._cache,g=t._path,y=0;if(d.values=n,n||(n=[]),g.length){var x=r(t,g);a=x.value,u=i=x.path}else a=_,u=i=[];for(p=0,c=s.length;c>p;p++){var b,P=s[p];if(n[p]&&(b=n[p]),c>1)for(u=[],l=0,f=i.length;f>l;l++)u[p]=i[p];if(P.path&&(P=P.path),e(t,_,a,P,0,b,[],d,u,[],v,"JSON"),y<h.length){for(l=y,length=h.length;length>l;l++)h[l].pathSetIndex=p;y=length}}return d}}},{"./getBoundValue":39,"./util/isPathValue":51}],36:[function(e,t){var r=(e("./getBoundValue"),e("./util/isPathValue"));t.exports=function(e){return function(t,o,s){var n={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},a=Array.isArray(o[0])||r(o[0])?"Paths":"JSON";n.values=s;var i,u=t._cache,p=t._path;if(p.length)throw"It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.";i=u;for(var l=0,c=o.length;c>l;l++){var f=o[l];f.path&&(f=f.path),e(t,u,i,f,0,s[0],[],n,[],[],a,"JSONG")}return n}}},{"./getBoundValue":39,"./util/isPathValue":51}],37:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},u=Array.isArray(s[0])||o(s[0])?"Paths":"JSON";a=n[0],i.values=n;var p,l,c,f=t._cache,d=t._path;if(d.length){var h=r(t,d);p=h.value,l=c=h.path}else p=f,l=c=[];for(var v=0,_=s.length;_>v;v++){if(_>1)for(l=[],j=0,bLen=c.length;bLen>j;j++)l[v]=c[v];var g=s[v];g.path&&(g=g.path),e(t,f,p,g,0,a,[],i,l,[],u,"PathMap")}return i}}},{"./getBoundValue":39,"./util/isPathValue":51}],38:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i,u,p={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},l=Array.isArray(s[0])||o(s[0])?"Paths":"JSON",c=t._cache,f=t._path;if(f.length){var d=r(t,f);a=d.value,i=u=d.path}else a=c,i=u=[];for(var h=0,v=s.length;v>h;h++){if(v>1)for(i=[],j=0,bLen=u.length;bLen>j;j++)i[h]=u[h];var _=s[h];_.path&&(_=_.path),e(t,c,a,_,0,n,null,p,i,[],l,"Values")}return p}}},{"./getBoundValue":39,"./util/isPathValue":51}],39:[function(e,t){var r=e("./getValueSync");t.exports=function(e,t){var o,s,n;for(o=e._boxed,e._boxed=!0,s=r(e,t.concat(null)),e._boxed=o,t=s.optimizedPath,n=s.shorted,s=s.value;t.length&&null===t[t.length-1];)t.pop();return{path:t,value:s,shorted:n}}},{"./getValueSync":40}],40:[function(e,t){var r=e("./followReference"),o=e("./util/clone"),s=e("./util/isExpired"),n=e("./util/lru").promote;t.exports=function(e,t){var a,i,u,p,l,c,f=e._cache,d=t.length,h=[],v=!1,_=!1,g=0,y=f;do{if(a=t[g++],null!==a&&(i=y[a]),!i){p=void 0;break}if(u=i.$type,h.push(a),d>g){if("path"===u){if(l=r(e,f,f,i,i.value),c=l[0],!c){p=void 0;break}u=c.$type,i=c,h=l[1]}if(u){for(;d>g;++g)if(null!==t[g]){_=!0;break}_?(v=!0,p=void 0):p=i;break}}else p=i;y=i}while(i&&d>g);if(p&&(s(p)?p=void 0:n(e,p)),p&&"error"===p.$type&&!e._treatErrorsAsValues)throw{path:t,value:p.value};return p&&e._boxed?p=u?o(p):p:!p&&e._materialized?p={$type:"sentinel"}:p&&(p=p.value),{value:p,shorted:v,optimizedPath:h}}},{"./followReference":34,"./util/clone":47,"./util/isExpired":49,"./util/lru":52}],41:[function(e,t){function r(e,t,n,u,p,c,f,v,_,g,y,x,b){if(!(!n||n&&n.$type)||!o(e,n,u,p,c,g,_,f,v,x,b)){var P,m,j,S="JSON"===y,A=!1;if(S?u&&"object"==typeof u?Array.isArray(u)?A=!0:(P=Object.keys(u),1===P.length&&(P=P[0])):A=!0:P=u[p],A||!S&&p===u.length)return l(e)?void i(e,n,c,v,g,_,f,x,b):void a(e,n,u,p,c,v,g,_,f,x);var O={done:!1},N=f,$=g,w=_,k="JSONG"===x,E="JSON"===x,M=!1,z=!1;b=!1,p++;var V;if(P&&"object"==typeof P?(O.isArray=Array.isArray(P),O.arrOffset=0,V=h(P,O),M=!0):(V=P,O.done=!0),E&&M){for(N=[],m=0,j=f.length;j>m;m++)N[m]=f[m];N.push(p-1)}do{if(!O.done){for(w=[],$=[],m=0,j=g.length;j>m;m++)$[m]=g[m];for(m=0,j=_.length;j>m;m++)w[m]=_[m]}var q=S?u[V]:u;S&&q&&("object"!=typeof q||Array.isArray(q)||(z=Object.keys(q).length>0));var J;if(null===V||S&&"__null"===V?J=n:(J=n[V],w.push(V),$.push(V)),J){var R=J.$type,G=R&&J.value||J;if((S&&z||!S&&p<u.length)&&R&&"path"===R&&!d(J)){k&&i(e,J,c,v,!1,w,N,x);var C=s(e,t,t,J,G,c,x);b=!0,J=C[0];var I=C[1];for(w=[],m=0,j=I.length;j>m;m++)w[m]=I[m]}}r(e,t,J,q,p,c,N,v,w,$,y,x,b),O.done||(V=h(P,O))}while(!O.done)}}function o(e,t,r,o,s,u,p,h,v,_,g){if(!t)return l(e)?i(e,t,s,v,u,p,h,_,g):a(e,t,r,o,s,v,u,p,h,_),!0;var y=t.$type;return h=h||[],"error"===y?(g&&u.push(null),"JSONG"===_||e._treatErrorsAsValues?i(e,t,s,v,u,p,h,_,g):n(e,t,u,p,v)):d(t)?(t.__invalidated||(f(e,t),c(t)),a(e,t,r,o,s,v,u,p,h,_)):i(e,t,s,v,u,p,h,_,g),!0}var s=e("./followReference"),n=e("./onError"),a=e("./onMissing"),i=e("./onValue"),u=e("./util/lru"),p=e("./util/hardlink"),l=e("./util/isMaterialzed"),c=p.remove,f=u.splice,d=e("./util/isExpired"),h=e("./util/permuteKey");t.exports=r},{"./followReference":34,"./onError":44,"./onMissing":45,"./onValue":46,"./util/hardlink":48,"./util/isExpired":49,"./util/isMaterialzed":50,"./util/lru":52,"./util/permuteKey":53}],42:[function(e,t){var r=e("./getWalk");t.exports={getAsJSON:e("./getAsJSON")(r),getAsJSONG:e("./getAsJSONG")(r),getAsValues:e("./getAsValues")(r),getAsPathMap:e("./getAsPathMap")(r),getValueSync:e("./getValueSync"),getBoundValue:e("./getBoundValue"),setCache:e("./legacy_setCache")}},{"./getAsJSON":35,"./getAsJSONG":36,"./getAsPathMap":37,"./getAsValues":38,"./getBoundValue":39,"./getValueSync":40,"./getWalk":41,"./legacy_setCache":43}],43:[function(e,t){var r=0,o=0,s="__reference_container",n="__context",a="__generation",i="__generation_updated",u="__invalidated",p="__key",l="__null",c="./",f="../",d="__ref",h="__ref_index",v="__refs_length",_="/",g="$type",y="$size",x="$expires",b="sentinel",P="error",m="value";t.exports=function(e,t){var j,S,A,O,N=e._root,$=N.expired,w=0,k=0,E=[],M=[],z=e._cache,V=z,q=V;for(E[0]=t,M[-1]=V;w>-1;){var J=!1,R=0,G=void 0,C=void 0,I=void 0,T=!1;q=V=M[w-1],w=w;e:for(;;){if(k=w,j=q&&q[g]||void 0,S=j===b?q[m]:q,(J=!(null!=(t=E[R=4*w])&&"object"==typeof t)||void 0!==t[g]||Array.isArray(t)||!((G=E[R+1]||(E[R+1]=Object.keys(t)))&&((T=G.length>1)||G.length>0)))||null==q||void 0!==j||"object"!=typeof q||Array.isArray(S)){if(((O=null!=(q&&q[x]))&&1!==O&&(0===O||O<now())||null!=q&&q[u]===!0)&&(j=void 0,S=void 0,q=($[$.length]=q)&&(q[u]=!0)&&void 0),J||j&&j!==b||!Array.isArray(S)){if(null!=I){var F,B,D=q&&q[y]||0;if(j=t&&t[g]||void 0,nV2=j?t[m]:void 0,S=j===b?t[m]:t,F=t,j&&j!==b&&"path"!==j||!Array.isArray(S)?j===b||"path"===j?F[y]=A=50+(nV2&&"number"==typeof nV2.length?nV2.length:1):j===P?F[y]=A=t&&t[y]||0||51:null==t||"object"!=typeof t?(A=50+("string"==typeof S&&S.length||1),j="sentinel",F={},F[m]=S,F[g]=j,F[y]=A):(j=F[g]=j||GROUP,F[y]=A=t&&t[y]||0||51):(delete S[y],console.log(1),A=j?50+(S.length||1):S.length||1,F[y]=A,S[s]=F),q!==F&&null!=q&&"object"==typeof q){for(var L,X=q[v]||0,Y=F[v]||0,K=-1;++K<X;)void 0!==(L=q[d+K])&&(L[n]=F,F[d+(Y+K)]=L,q[d+K]=void 0);F[v]=X+Y,q[v]=L=void 0;for(var U,W,Q,H,Z,et,tt=V,rt=q,ot=I,st=[V,ot,q],nt=0;nt>-1;){if(V=st[Q=8*nt],ot=st[Q+1],q=st[Q+2],(void 0===(H=st[Q+3])||(H=void 0))&&(H=st[Q+3]=q&&q[g]||void 0||null),Z=st[Q+4]||(st[Q+4]=H===b?q[m]:q),void 0===(et=st[Q+5])&&(et=st[Q+5]=!H&&null!=q&&"object"==typeof q&&!Array.isArray(Z)),et===!0){if(void 0===(U=st[Q+6])){U=st[Q+6]=[],W=-1;for(var at in q)!("_"===at[0]&&"_"===at[1]||at===c||at===f||at===_||"$"===at[0])&&(U[++W]=at)}if(W=st[Q+7]||(st[Q+7]=0),W<U.length){st[Q+7]=W+1,st[Q=8*++nt]=q,st[Q+1]=ot=U[W],st[Q+2]=q[ot];continue}}var it,ut=q[g]===b?q[m]:q;if(ut&&Array.isArray(ut)&&(it=ut[n])){for(var pt=(ut[h]||0)-1,lt=(it[v]||0)-1;++pt<=lt;)it[d+pt]=it[d+(pt+1)];it[v]=lt,ut[h]=ut[n]=it=void 0}if(null!=q&&"object"==typeof q){for(var ct,ft=-1,dt=q[v]||0;++ft<dt;)void 0!==(ct=q[d+ft])&&(ct[n]=q[d+ft]=void 0);q[v]=void 0;var ht=N,vt=ht.__head,_t=ht.__tail,gt=q.__next,yt=q.__prev;null!=gt&&"object"==typeof gt&&(gt.__prev=yt),null!=yt&&"object"==typeof yt&&(yt.__next=gt),q===vt&&(ht.__head=ht.__next=gt),q===_t&&(ht.__tail=ht.__prev=yt),q.__next=q.__prev=void 0,vt=_t=gt=yt=void 0,V[ot]=q[c]=q[f]=q[_]=void 0}delete st[Q+0],delete st[Q+1],delete st[Q+2],delete st[Q+3],delete st[Q+4],delete st[Q+5],delete st[Q+6],delete st[Q+7],--nt}V=tt,q=rt}V[I]=q=F,j=q&&q[g]||void 0,q=!((q[c]||!(q[a]||(q[a]=++r)&&q)||j&&j!==b||!Array.isArray(S)||!(S[s]=q))&&!q),B=D-A;for(var xt=V,bt=q;q=V;)if(V=q[f],(q[y]=(q[y]||0)-B)<=0&&V){var Pt,mt=q[g]===b?q[m]:q;if(mt&&Array.isArray(mt)&&(Pt=mt[n])){for(var jt=(mt[h]||0)-1,St=(Pt[v]||0)-1;++jt<=St;)Pt[d+jt]=Pt[d+(jt+1)];Pt[v]=St,mt[h]=mt[n]=Pt=void 0}if(null!=q&&"object"==typeof q){for(var At,Ot=-1,Nt=q[v]||0;++Ot<Nt;)void 0!==(At=q[d+Ot])&&(At[n]=q[d+Ot]=void 0);q[v]=void 0;var $t=N,wt=$t.__head,kt=$t.__tail,Et=q.__next,Mt=q.__prev;null!=Et&&"object"==typeof Et&&(Et.__prev=Mt),null!=Mt&&"object"==typeof Mt&&(Mt.__next=Et),q===wt&&($t.__head=$t.__next=Et),q===kt&&($t.__tail=$t.__prev=Mt),q.__next=q.__prev=void 0,wt=kt=Et=Mt=void 0,V[q[p]]=q[c]=q[f]=q[_]=void 0}}else if(q[i]!==o){for(var zt,Vt,qt,Jt,Rt,Gt=q,Ct=[],It=0;It>-1;){if(void 0===(zt=Ct[It]))for(qt=Jt=-1,Rt=q[v]||0,q[i]=o,q[a]=++r,void 0!==(Vt=q[f])&&Vt[i]!==o?(Ct[It]=zt=new Array(Rt+1),zt[++Jt]=Vt):Rt>0&&(Ct[It]=zt=new Array(Rt));++qt<Rt;)void 0!==(Vt=q[d+qt])&&Vt[i]!==o&&(zt[++Jt]=Vt);void 0!==(q=zt&&zt.pop())?++It:Ct[It--]=void 0}q=Gt}V=xt,q=bt}q=q;break e}if(null==q||void 0!==j||"object"!=typeof q||Array.isArray(S)){I=null,q=q,w=w;continue e}}if(null==(I=G[C])){q=q;break e}if(I===l||("_"!==I[0]||"_"!==I[1])&&I!==c&&I!==f&&I!==_&&"$"!==I[0]){if(E[4*(w+1)+3]=I,M[w-1]=V=q,null!=I){if(q=V&&V[I],"object"==typeof t){for(var Tt in t)"$"===Tt[0]&&Tt!==y&&(V&&(V[Tt]=t[Tt])||!0);t=t[I]}var Ft=t&&t[g]||void 0,Bt=Ft===b?t[m]:t;
if((null==q||"object"!=typeof q||j&&j!==b&&!Array.isArray(S))&&!Ft&&null!=t&&"object"==typeof t&&!Array.isArray(Bt)){if(j=void 0,S={},A=q&&q[y]||0,q!==S&&null!=q&&"object"==typeof q){for(var Dt,Lt=q[v]||0,Xt=S[v]||0,Yt=-1;++Yt<Lt;)void 0!==(Dt=q[d+Yt])&&(Dt[n]=S,S[d+(Xt+Yt)]=Dt,q[d+Yt]=void 0);S[v]=Lt+Xt,q[v]=Dt=void 0;for(var Kt,Ut,Wt,Qt,Ht,Zt,er=V,tr=q,rr=I,or=[V,rr,q],sr=0;sr>-1;){if(V=or[Wt=8*sr],rr=or[Wt+1],q=or[Wt+2],(void 0===(Qt=or[Wt+3])||(Qt=void 0))&&(Qt=or[Wt+3]=q&&q[g]||void 0||null),Ht=or[Wt+4]||(or[Wt+4]=Qt===b?q[m]:q),void 0===(Zt=or[Wt+5])&&(Zt=or[Wt+5]=!Qt&&null!=q&&"object"==typeof q&&!Array.isArray(Ht)),Zt===!0){if(void 0===(Kt=or[Wt+6])){Kt=or[Wt+6]=[],Ut=-1;for(var nr in q)!("_"===nr[0]&&"_"===nr[1]||nr===c||nr===f||nr===_||"$"===nr[0])&&(Kt[++Ut]=nr)}if(Ut=or[Wt+7]||(or[Wt+7]=0),Ut<Kt.length){or[Wt+7]=Ut+1,or[Wt=8*++sr]=q,or[Wt+1]=rr=Kt[Ut],or[Wt+2]=q[rr];continue}}var ar,ir=q[g]===b?q[m]:q;if(ir&&Array.isArray(ir)&&(ar=ir[n])){for(var ur=(ir[h]||0)-1,pr=(ar[v]||0)-1;++ur<=pr;)ar[d+ur]=ar[d+(ur+1)];ar[v]=pr,ir[h]=ir[n]=ar=void 0}if(null!=q&&"object"==typeof q){for(var lr,cr=-1,fr=q[v]||0;++cr<fr;)void 0!==(lr=q[d+cr])&&(lr[n]=q[d+cr]=void 0);q[v]=void 0;var dr=N,hr=dr.__head,vr=dr.__tail,_r=q.__next,gr=q.__prev;null!=_r&&"object"==typeof _r&&(_r.__prev=gr),null!=gr&&"object"==typeof gr&&(gr.__next=_r),q===hr&&(dr.__head=dr.__next=_r),q===vr&&(dr.__tail=dr.__prev=gr),q.__next=q.__prev=void 0,hr=vr=_r=gr=void 0,V[rr]=q[c]=q[f]=q[_]=void 0}delete or[Wt+0],delete or[Wt+1],delete or[Wt+2],delete or[Wt+3],delete or[Wt+4],delete or[Wt+5],delete or[Wt+6],delete or[Wt+7],--sr}V=er,q=tr}V[I]=q=S,q=!((q[c]||!(q[a]||(q[a]=++r)&&q)||j&&j!==b||!Array.isArray(S)||!(S[s]=q))&&!q);for(var yr,xr=q;yr=q;){if(q[i]!==o){for(var br,Pr,mr,jr,Sr,Ar=q,Or=[],Nr=0;Nr>-1;){if(void 0===(br=Or[Nr]))for(mr=jr=-1,Sr=q[v]||0,q[i]=o,q[a]=++r,void 0!==(Pr=q[f])&&Pr[i]!==o?(Or[Nr]=br=new Array(Sr+1),br[++jr]=Pr):Sr>0&&(Or[Nr]=br=new Array(Sr));++mr<Sr;)void 0!==(Pr=q[d+mr])&&Pr[i]!==o&&(br[++jr]=Pr);void 0!==(q=br&&br.pop())?++Nr:Or[Nr--]=void 0}q=Ar}q=yr[f]}q=xr}}q=q,w+=1}else E[R+2]=C+1,q=q,w=w}q=q;var $r,wr,kr=4*w;do delete E[kr+0],delete E[kr+1],delete E[kr+2],delete E[kr+3];while(($r=E[(kr=4*--w)+1])&&(E[kr+2]=++wr)>=$r.length)}return z}},{}],44:[function(e,t){var r=e("./util/lru"),o=(e("./util/clone"),r.promote);t.exports=function(e,t,r,s,n){n.errors.push({path:r,value:t.value}),o(e,t),s&&(n.requestedPaths.push(r),n.optimizedPaths.push(s))}},{"./util/clone":47,"./util/lru":52}],45:[function(e,t){function r(e,t,r,o,a,i,u){var p,l=0;if(u)for(l=0,p=e.length;p>l;l++)"__null"===e[l]&&(e[l]=null);if("JSON"===i){for(r=s(r,e),l=0,p=a.length;p>l;l++){var c=a[l],f=r[c];r[c]=[f]}t.requestedMissingPaths.push(r),t.optimizedMissingPaths.push(n(o,e))}else t.requestedMissingPaths.push(s(r,e)),t.optimizedMissingPaths.push(n(o,e))}{var o=e("./util/support"),s=o.fastCat,n=o.fastCatSkipNulls,a=o.fastCopy,i=(e("./util/isExpired"),e("./util/spreadJSON"));e("./util/clone")}t.exports=function(e,t,o,s,n,u,p,l,c,f){var d;if(Array.isArray(o))d=s<o.length?a(o,s):[],r(d,u,p,l,c,f);else{d=[],i(o,d);for(var h=0,v=d.length;v>h;h++)r(d[h],u,p,l,c,f,!0)}}},{"./util/clone":47,"./util/isExpired":49,"./util/spreadJSON":54,"./util/support":55}],46:[function(e,t){var r=e("./util/lru"),o=e("./util/clone"),s=r.promote,n={$type:"sentinel"};t.exports=function(e,t,r,a,i,u,p,l,c){var f,d,h,v,_,g,y,x,b=!1;switch(t&&s(e,t),t&&void 0!==t.value||(b=e._materialized),x=b?n:e._boxed?o(t):"path"===t.$type||"error"===t.$type?"JSONG"===l?o(t):t.value:"JSONG"===l&&"object"==typeof t.value?o(t):t.value,i&&(c&&null!==i[i.length-1]&&i.push(null),a.requestedPaths.push(i),a.optimizedPaths.push(u)),l){case"Values":r({path:i,value:x});break;case"PathMap":if(d=i.length-1,-1===d)r.json=x;else{for(_=r.json,_||(_=r.json={}),f=0;d>f;f++)h=i[f],_[h]||(_[h]={}),g=_,y=h,_=_[h];h=i[f],null!==h?_[h]=x:g[y]=x}break;case"JSON":if(r)if(p.length){for(r.json||(r.json={}),_=r.json,f=0,d=p.length-1;d>f;f++)h=p[f],v=i[h],_[v]||(_[v]={}),_=_[v];h=p[f],v=i[h],_[v]=x}else r.json=x;break;case"JSONG":for(_=r.jsong,_||(_=r.jsong={},r.paths=[]),f=0,d=u.length-1;d>f;f++)v=u[f],_[v]||(_[v]={}),_=_[v];v=u[f],_[v]=b?n:x,i&&r.paths.push(i)}}},{"./util/clone":47,"./util/lru":52}],47:[function(e,t){t.exports=function(e){var t,r,o,s=Object.keys(e);for(t={},r=0,o=s.length;o>r;r++){var n=s[r];0!==n.indexOf("__")&&"/"!==n&&"./"!==n&&"../"!==n&&(t[n]=e[n])}return t}},{}],48:[function(e,t){function r(e,t){var r=t.__refs_length||0;t["__ref"+r]=e,t.__refs_length=r+1,e.__ref_index=r,e.__context=t}function o(e){var t=e.__context;if(t){for(var r=e.__ref_index,o=t.__refs_length;o>r;)t["__ref"+r]=t[__REF+r+1],++r;t.__refs_length=o-1,e.__context=void 0,e.__ref_index=void 0}}t.exports={create:r,remove:o}},{}],49:[function(e,t){var r=e("../../support/now");t.exports=function(e){var t=void 0===e.$expires&&-1||e.$expires;return-1!==t&&1!==t&&(0===t||t<r())}},{"../../support/now":95}],50:[function(e,t){t.exports=function(e){return e._materialized&&!(e._router||e._dataSource)}},{}],51:[function(e,t){t.exports=function(e){return e.path&&e.value}},{}],52:[function(e,t){function r(e,t){var r=e._root,o=r.__head;if(o!==t){if(!o)return void(r.__head=t);if(!r.__tail)return r.__head=t,r.__tail=o,t.__next=o,void(o.__prev=t);var s=t.__prev,n=t.__next;n&&(n.__prev=s),s&&(s.__next=n),t.__prev=void 0,r.__head=t,t.__next=o,o.__prev=t}}function o(e,t){var r=e._root,o=t.__prev,s=t.__next;s&&(s.__prev=o),o&&(o.__next=s),t.__prev=void 0,t===r.__head&&(r.__head=void 0),t===r.__tail&&(r.__tail=void 0),t.__invalidated=!0,r.expired.push(t)}t.exports={promote:r,splice:o}},{}],53:[function(e,t){t.exports=function(e,t){if(t.isArray){t.loaded&&t.rangeOffset>t.to&&(t.arrOffset++,t.loaded=!1);var r=t.arrOffset;if(r===e.length)return t.done=!0,"";var o=e[t.arrOffset],s=typeof o;return"object"===s?(t.loaded||(t.from=o.from||0,t.to=o.to||o.length&&t.from+o.length-1||0,t.rangeOffset=t.from,t.loaded=!0),t.rangeOffset++):(t.arrOffset++,o)}return t.loaded||(t.from=e.from||0,t.to=e.to||e.length&&t.from+e.length-1||0,t.rangeOffset=t.from,t.loaded=!0),t.rangeOffset>t.to?(t.done=!0,""):t.rangeOffset++}},{}],54:[function(e,t){var r=e("./support").fastCopy;t.exports=function o(e,t,s){if(s=s||[],t.length||t.push(s),null==e||"object"!=typeof e)return[];var n=Object.keys(e);if(1===n.length)s.push(n[0]),o(e[n[0]],t,s);else for(var a=0,i=n.length;i>a;a++){var u=n[a],p=r(s);p.push(u),t.push(p),o(e[u],t,p)}}},{"./support":55}],55:[function(e,t){function r(e,t){var r,o,s=[];for(o=0,t=t||0,r=e.length;r>t;o++,t++)s[o]=e[t];return s}function o(e,t){var r,o,s,n=[];for(r=0,o=e.length;o>r;r++)n[r]=e[r];for(s=0,o=t.length;o>s;s++)null!==t[s]&&(n[r++]=t[s]);return n}function s(e,t){var r,o,s,n=[];for(r=0,o=e.length;o>r;r++)n[r]=e[r];for(s=0,o=t.length;o>s;s++)n[r++]=t[s];return n}t.exports={fastCat:s,fastCatSkipNulls:o,fastCopy:r}},{}],56:[function(e,t){t.exports={invPathSetsAsJSON:e("./invalidate-path-sets-as-json-dense"),invPathSetsAsJSONG:e("./invalidate-path-sets-as-json-graph"),invPathSetsAsPathMap:e("./invalidate-path-sets-as-json-sparse"),invPathSetsAsValues:e("./invalidate-path-sets-as-json-values")}},{"./invalidate-path-sets-as-json-dense":57,"./invalidate-path-sets-as-json-graph":58,"./invalidate-path-sets-as-json-sparse":59,"./invalidate-path-sets-as-json-values":60}],57:[function(e,t){function r(e,t,r){var n,l,c,f=i([],e),h=-1,v=t.length,_=f.nodes,g=a(_),y=[],x=[];for(f[0]=f.root;++h<v;){n=r&&r[h],f[3]=g[3]=_[3]=p(n)?n.json||(n.json={}):void 0;var b=t[h];u(o,s,b,f,g,_,y,x),l=f.hasValue,l?(c=!0,p(n)&&(n.json=f.json),delete f.json,delete f.hasValue):p(n)&&delete n.json}return d(f.lru,f.expired,f.version,f.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:f.errors,hasValue:c,requestedPaths:f.requestedPaths.concat([y]),optimizedPaths:f.optimizedPaths,requestedMissingPaths:f.requestedMissingPaths,optimizedMissingPaths:f.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u,d,h){var v,_;if(null==u){if(null==(u=l(a)))return;_=r[3],v=r[0]}else _=h&&o[3]||r[3],v=o[0];var g=v[u];if(!i)return r[0]=v,void(o[0]=g);if(e.length>1)return r[0]=o[0]=g,void(h&&(r[3]=_)&&(o[3]=_[d]||(_[d]={})));if(o[0]=g,_){var y=p(g)&&g.$type||void 0,x=d;null==x&&(_=t,x=3),_[x]=n(t,g,y,g&&g.value)}var b=t.lru,P=g.$size||0,m=t.version;f(v,g,u,t.lru),c(v,P,m,b)}function s(e,t){t.json=t[3],t.hasValue=!0}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/options"),u=e("../walk/walk-path-set"),p=e("../support/is-object"),l=e("../support/get-valid-key"),c=e("../support/update-graph"),f=e("../support/invalidate-node"),d=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/get-valid-key":85,"../support/invalidate-node":89,"../support/is-object":91,"../support/options":96,"../support/update-graph":105,"../walk/walk-path-set":113}],58:[function(e,t){function r(e,t,r){var n,p=i([],e),l=-1,c=t.length,f=p.nodes,d=a(f),v=[],_=[],g=r[0];for(p[0]=p.root,p[1]=d[1]=f[1]=g.jsong||(g.jsong={}),p.requestedPaths=g.paths||(g.paths=p.requestedPaths);++l<c;){var y=t[l];u(o,s,y,p,d,f,v,_)}var n=p.hasValue;return h(p.lru,p.expired,p.version,p.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:p.errors,hasValue:n,requestedPaths:p.requestedPaths.concat([v]),optimizedPaths:p.optimizedPaths,requestedMissingPaths:p.requestedMissingPaths,optimizedMissingPaths:p.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u){var d,h;if(null==u){if(null==(u=l(a)))return;h=r[1],d=r[0]}else h=o[1],d=o[0];var v=u,_=d[u];if(!i)return r[0]=d,o[0]=_,void((r[1]=h)&&(o[1]=h[v]||(h[v]={})));var g=p(_)&&_.$type||void 0;if(e.length>1)return r[0]=o[0]=_,void((r[1]=h)&&(g==$path?h[v]=n(t,_,g,_.value):o[1]=h[v]||(h[v]={})));o[0]=_,h&&(h[v]=n(t,_,g,_&&_.value));var y=t.lru,x=_.$size||0,b=t.version;f(d,_,u,t.lru),c(d,x,b,y)}function s(e,t,r,o,s,n){d(t,s,n),t.json=t[1],t.hasValue=!0}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/options"),u=e("../walk/walk-path-set-soft-link"),p=e("../support/is-object"),l=e("../support/get-valid-key"),c=e("../support/update-graph"),f=e("../support/invalidate-node"),d=e("../support/clone-success-paths"),h=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/clone-success-paths":81,"../support/get-valid-key":85,"../support/invalidate-node":89,"../support/is-object":91,"../support/options":96,"../support/update-graph":105,"../walk/walk-path-set-soft-link":112}],59:[function(e,t){function r(e,t,r){var n,p=i([],e),l=-1,c=t.length,f=p.nodes,h=a(f),v=[],_=[],g=r[0];for(p[0]=p.root,p[3]=h[3]=f[3]=g.json||(g.json={});++l<c;){var y=t[l];u(o,s,y,p,h,f,v,_)}var n=p.hasValue;return n||delete g.json,d(p.lru,p.expired,p.version,p.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:p.errors,hasValue:n,requestedPaths:p.requestedPaths.concat([v]),optimizedPaths:p.optimizedPaths,requestedMissingPaths:p.requestedMissingPaths,optimizedMissingPaths:p.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u){var d,h,v;if(null==u){if(null==(u=l(a)))return;v=l(s),h=r[3],d=r[0]}else v=u,h=o[3],d=o[0];var _=d[u];if(!i)return r[0]=d,void(o[0]=_);if(e.length>1)return r[0]=o[0]=_,void((r[3]=h)&&(o[3]=h[v]||(h[v]={})));if(o[0]=_,h){var g=p(_)&&_.$type||void 0;h[v]=n(t,_,g,_&&_.value)}var y=t.lru,x=_.$size||0,b=t.version;f(d,_,u,t.lru),c(d,x,b,y)}function s(e,t){t.json=t[3],t.hasValue=!0}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/options"),u=e("../walk/walk-path-set"),p=e("../support/is-object"),l=e("../support/get-valid-key"),c=e("../support/update-graph"),f=e("../support/invalidate-node"),d=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/get-valid-key":85,"../support/invalidate-node":89,"../support/is-object":91,"../support/options":96,"../support/update-graph":105,"../walk/walk-path-set":113}],60:[function(e,t){function r(e,t,r){var n=i([],e),p=-1,l=t.length,c=n.nodes,f=a(c),h=[],v=[];for(n[0]=n.root,n.onNext=r;++p<l;){var _=t[p];u(o,s,_,n,f,c,h,v)}return d(n.lru,n.expired,n.version,n.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:n.errors,requestedPaths:n.requestedPaths.concat([h]),optimizedPaths:n.optimizedPaths,requestedMissingPaths:n.requestedMissingPaths,optimizedMissingPaths:n.optimizedMissingPaths}}function o(e,t,r,o,s,n,a,i){var u;if(null==i){if(null==(i=l(n)))return;u=r[0]}else u=o[0];var p=u[i];if(!a)return r[0]=u,void(o[0]=p);if(e.length>1)return void(r[0]=o[0]=p);o[0]=p;var d=t.lru,h=p.$size||0,v=t.version;f(u,p,i,t.lru),c(u,h,v,d)}function s(e,t,r,o,s){var i=o[0],u=p(i)&&i.$type||void 0,l=t.onNext;l&&l({path:a(s),value:n(t,i,u,i&&i.value)})}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/options"),u=e("../walk/walk-path-set"),p=e("../support/is-object"),l=e("../support/get-valid-key"),c=e("../support/update-graph"),f=e("../support/invalidate-node"),d=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/get-valid-key":85,"../support/invalidate-node":89,"../support/is-object":91,"../support/options":96,"../support/update-graph":105,"../walk/walk-path-set":113}],61:[function(e,t){var r=e("../support/update-graph");t.exports=function(e,t,o,s,n,a){for(var i,u,p=n*a;i=t.pop();)u=i.$size||0,s-=u,r(i,u,o,e);if(s>=n){for(var l=e.__tail;s>=p&&(i=l);)l=l.__prev,u=i.$size||0,s-=u,r(i,u,o,e);null==(e.__tail=e.__prev=l)?e.__head=e.__next=void 0:l.__next=void 0}}},{"../support/update-graph":105}],62:[function(e,t){var r=1,o=e("../support/is-object");t.exports=function(e,t){if(o(t)&&t.$expires!==r){var s=e.__head,n=e.__tail,a=t.__next,i=t.__prev;t!==s&&(null!=a&&"object"==typeof a&&(a.__prev=i),null!=i&&"object"==typeof i&&(i.__next=a),(a=s)&&null!=s&&"object"==typeof s&&(s.__prev=t),e.__head=e.__next=s=t,s.__next=a,s.__prev=void 0),(null==n||t===n)&&(e.__tail=e.__prev=n=i||t)}return t}},{"../support/is-object":91}],63:[function(e,t){t.exports=function(e,t){var r=e.__head,o=e.__tail,s=t.__next,n=t.__prev;null!=s&&"object"==typeof s&&(s.__prev=n),null!=n&&"object"==typeof n&&(n.__next=s),t===r&&(e.__head=e.__next=s),t===o&&(e.__tail=e.__prev=n),t.__next=t.__prev=void 0,r=o=s=n=void 0}},{}],64:[function(e,t){t.exports={setPathSetsAsJSON:e("./set-json-values-as-json-dense"),setPathSetsAsJSONG:e("./set-json-values-as-json-graph"),setPathSetsAsPathMap:e("./set-json-values-as-json-sparse"),setPathSetsAsValues:e("./set-json-values-as-json-values"),setJSONGsAsJSON:e("./set-json-graph-as-json-dense"),setJSONGsAsJSONG:e("./set-json-graph-as-json-graph"),setJSONGsAsPathMap:e("./set-json-graph-as-json-sparse"),setJSONGsAsValues:e("./set-json-graph-as-json-values")}},{"./set-json-graph-as-json-dense":65,"./set-json-graph-as-json-graph":66,"./set-json-graph-as-json-sparse":67,"./set-json-graph-as-json-values":68,"./set-json-values-as-json-dense":69,"./set-json-values-as-json-graph":70,"./set-json-values-as-json-sparse":71,"./set-json-values-as-json-values":72}],65:[function(e,t){function r(e,t,r,n){var l=[];l.offset=e._path.length,l.bound=[],l=i(l,e,n);var c,f,d,h=-1,_=-1,g=t.length,y=l.nodes,x=a(y),b=[],P=[];for(l[0]=l.root;++h<g;){var m=t[h],j=m.paths,S=m.jsong||m.values||m.value,A=-1,O=j.length;for(l[2]=S,y[2]=S;++A<O;){c=r&&r[++_],l[3]=x[3]=y[3]=p(c)?c.json||(c.json={}):void 0;var N=j[A];l.index=A,u(o,s,N,l,x,y,b,P),f=l.hasValue,f?(d=!0,p(c)&&(c.json=l.json),delete l.json,delete l.hasValue):p(c)&&delete c.json}}return v(l.lru,l.expired,l.version,l.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:l.errors,requestedPaths:l.requestedPaths,optimizedPaths:l.optimizedPaths,requestedMissingPaths:l.requestedMissingPaths,optimizedMissingPaths:l.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u,f,d){var h,v,_;if(null==u){if(null==(u=l(a)))return;_=r[3],h=r[0],v=r[2]}else _=d&&o[3]||r[3],h=o[0],v=o[2];var g=h[u],y=v&&v[u];if(o[2]=y,o[0]=g=c(t,h,g,v,y,u),!i)return r[0]=h,void(r[2]=v);var x=s.length,b=t.offset;if(e.length>1)return r[0]=g,r[2]=y,void(x>b&&d&&(r[3]=_)&&(o[3]=_[f]||(_[f]={})));if(_){var P=p(g)&&g.$type||void 0,m=f;null==m&&(_=t,m=3),_[m]=n(t,g,P,g&&g.value)}}function s(e,t,r,o,s,n){var a=o[0],i=p(a)&&a.$type||void 0;f(t,a,i,e,s,n)===!1&&(h(t,s,n),d(t,a,i,s)===!1&&(t.json=t[3],t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../support/clone-dense-json")),a=e("../support/array-clone"),i=e("../support/options"),u=e("../walk/walk-path-set-soft-link"),p=e("../support/is-object"),l=e("../support/get-valid-key"),c=e("../support/merge-node"),f=e("../support/treat-node-as-miss"),d=e("../support/treat-node-as-error"),h=e("../support/clone-success-paths"),v=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/clone-success-paths":81,"../support/get-valid-key":85,"../support/is-object":91,"../support/merge-node":94,"../support/options":96,"../support/treat-node-as-error":101,"../support/treat-node-as-miss":102,"../types/$path":108,"../walk/walk-path-set-soft-link":112}],66:[function(e,t){function r(e,t,r,n){var a=[];a.offset=0,a.bound=[],a=u(a,e,n);var l=-1,c=t.length,f=a.nodes,d=i(f),h=[],_=[],g=r[0];for(a[0]=a.root,a[1]=d[1]=f[1]=g.jsong||(g.jsong={}),a.requestedPaths=g.paths||(g.paths=a.requestedPaths);++l<c;){var y=t[l],x=y.paths,b=y.jsong||y.values||y.value,P=-1,m=x.length;for(a[2]=b,f[2]=b;++P<m;){var j=x[P];p(o,s,j,a,d,f,h,_)}}a.hasValue;return v(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var d,h,v,_;if(null==p){if(null==(p=c(i)))return;v=r[1],d=r[0],h=r[2]}else v=o[1],d=o[0],h=o[2];var _=p,g=d[p],y=h&&h[p];if(o[2]=y,o[0]=g=f(t,d,g,h,y,p),!u)return r[0]=d,r[2]=h,void((r[1]=v)&&(o[1]=v[_]||(v[_]={})));var x=l(g)&&g.$type||void 0;return e.length>1?(r[0]=g,r[2]=y,void((r[1]=v)&&(x==n?v[_]=a(t,g,x,g.value):o[1]=v[_]||(v[_]={})))):void(v&&(v[_]=a(t,g,x,g&&g.value)))}function s(e,t,r,o,s,n){var a=o[0],i=l(a)&&a.$type||void 0;d(t,a,i,e,s,n)===!1&&(h(t,s,n),t.hasValue=!0)}t.exports=r;var n=e("../types/$path"),a=e("../support/clone-graph-json"),i=e("../support/array-clone"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),d=e("../support/treat-node-as-miss"),h=(e("../support/treat-node-as-error"),e("../support/clone-success-paths")),v=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-graph-json":77,"../support/clone-success-paths":81,"../support/get-valid-key":85,"../support/is-object":91,"../support/merge-node":94,"../support/options":96,"../support/treat-node-as-error":101,"../support/treat-node-as-miss":102,"../types/$path":108,"../walk/walk-path-set-soft-link":112}],67:[function(e,t){function r(e,t,r,n){var a=[];a.offset=e._path.length,a.bound=[],a=u(a,e,n);var l,c=-1,f=t.length,d=a.nodes,h=i(d),v=[],g=[],y=r[0];for(a[0]=a.root,a[3]=h[3]=d[3]=y.json||(y.json={});++c<f;){var x=t[c],b=x.paths,P=x.jsong||x.values||x.value,m=-1,j=b.length;for(a[2]=P,d[2]=P;++m<j;){var S=b[m];p(o,s,S,a,h,d,v,g)}}var l=a.hasValue;return l||delete y.json,_(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var d,h,v,_;if(null==p){if(null==(p=c(i)))return;_=c(s),v=r[3],d=r[0],h=r[2]}else _=p,v=o[3],d=o[0],h=o[2];var g=d[p],y=h&&h[p];if(o[2]=y,o[0]=g=f(t,d,g,h,y,p),!u)return r[0]=d,void(r[2]=h);var x=s.length,b=t.offset,P=l(g)&&g.$type||void 0;return e.length>1?(r[0]=g,r[2]=y,void(x>b&&(r[3]=v)&&(!P||P==n)&&(o[3]=v[_]||(v[_]={})))):void(v&&(v[_]=a(t,g,P,g&&g.value)))}function s(e,t,r,o,s,n){var a=o[0],i=l(a)&&a.$type||void 0;d(t,a,i,e,s,n)===!1&&(v(t,s,n),h(t,a,i,s)===!1&&(t.hasValue=!0))}t.exports=r;var n=e("../types/$path"),a=e("../support/clone-dense-json"),i=e("../support/array-clone"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),d=e("../support/treat-node-as-miss"),h=e("../support/treat-node-as-error"),v=e("../support/clone-success-paths"),_=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/clone-success-paths":81,"../support/get-valid-key":85,"../support/is-object":91,"../support/merge-node":94,"../support/options":96,"../support/treat-node-as-error":101,"../support/treat-node-as-miss":102,"../types/$path":108,"../walk/walk-path-set-soft-link":112}],68:[function(e,t){function r(e,t,r,n){var i=[];i.offset=e._path.length,i.bound=[],i=u(i,e,n);var l=-1,c=t.length,f=i.nodes,d=a(f),h=[],v=[];for(i[0]=i.root,i.onNext=r;++l<c;){var g=t[l],y=g.paths,x=g.jsong||g.values||g.value,b=-1,P=y.length;for(i[2]=x,f[2]=x;++b<P;){var m=y[b];p(o,s,m,i,d,f,h,v)}}return _(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:i.errors,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,n,a,i){var u,p;if(null==i){if(null==(i=c(n)))return;u=r[0],p=r[2]}else u=o[0],p=o[2];var l=u[i],d=p&&p[i];return o[2]=d,o[0]=l=f(t,u,l,p,d,i),a?void(e.length>1&&(r[0]=l,r[2]=d)):(r[0]=u,void(r[2]=p))}function s(e,t,r,o,s,a){var u=o[0],p=l(u)&&u.$type||void 0;if(d(t,u,p,e,s,a)===!1&&(v(t,s,a),h(t,u,p,s)===!1)){var c=t.onNext;c&&c({path:i(s,t.offset),value:n(t,u,p,u&&u.value)})}}t.exports=r;var n=(e("../types/$path"),e("../support/clone-dense-json")),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),d=e("../support/treat-node-as-miss"),h=e("../support/treat-node-as-error"),v=e("../support/clone-success-paths"),_=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/array-slice":75,"../support/clone-dense-json":76,"../support/clone-success-paths":81,"../support/get-valid-key":85,"../support/is-object":91,"../support/merge-node":94,"../support/options":96,"../support/treat-node-as-error":101,"../support/treat-node-as-miss":102,"../types/$path":108,"../walk/walk-path-set-soft-link":112}],69:[function(e,t){function r(e,t,r,n){var a,i,f,d=p([],e,n),h=-1,v=t.length,_=d.nodes,g=u(_),y=[],x=[];for(d[0]=d.root;++h<v;){a=r&&r[h],d[3]=g[3]=_[3]=c(a)?a.json||(a.json={}):void 0;var b=t[h],P=b.path;d.value=b.value,d.index=h,l(o,s,P,d,g,_,y,x),i=d.hasValue,i?(f=!0,c(a)&&(a.json=d.json),delete d.json,delete d.hasValue):c(a)&&delete a.json}return m(d.lru,d.expired,d.version,d.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:d.errors,hasValue:f,requestedPaths:d.requestedPaths,optimizedPaths:d.optimizedPaths,requestedMissingPaths:d.requestedMissingPaths,optimizedMissingPaths:d.optimizedMissingPaths}}function o(e,t,r,o,s,u,p,l,x,b){var P,m;if(null==l){if(null==(l=f(u)))return;m=r[3],P=r[0]}else m=b&&o[3]||r[3],P=o[0];var j,S=P[l];if(!p)return j=c(S)&&S.$type&&"."||void 0,S=d(t,P,S,j,l),r[0]=P,void(o[0]=S);if(e.length>1)return j=c(S)&&S.$type||void 0,S=d(t,P,S,j,l),r[0]=o[0]=S,void(b&&(r[3]=m)&&(o[3]=m[x]||(m[x]={})));var A=t.error_selector,O=t[0],N=c(S)&&S.$size||0,$=t.value;if(j=c($)&&$.$type||void 0,$=h($,j,j?$.value:$),j||(j=a),j==n&&A&&($=A(s,$)),S=v(P,S,$,l,t.lru),S=_(O,P,S,l,y()),g(P,N-S.$size,t.version,t.lru),o[0]=S,m){var w=x;null==w&&(m=t,w=3),m[w]=i(t,S,j,S&&S.value)}}function s(e,t,r,o,s,n){var a=o[0],i=c(a)&&a.$type||void 0;x(t,a,i,e,s,n)===!1&&(P(t,s,n),b(t,a,i,s)===!1&&(t.json=t[3],t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../types/$error")),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),d=e("../support/create-branch"),h=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),P=e("../support/clone-success-paths"),m=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/clone-success-paths":81,"../support/create-branch":83,"../support/get-valid-key":85,"../support/graph-node":86,"../support/inc-generation":87,"../support/is-object":91,"../support/options":96,"../support/replace-node":99,"../support/treat-node-as-error":101,"../support/treat-node-as-miss":102,"../support/update-back-refs":104,"../support/update-graph":105,"../support/wrap-node":106,"../types/$error":107,"../types/$path":108,"../types/$sentinel":109,"../walk/walk-path-set":113}],70:[function(e,t){function r(e,t,r,n){var a,i=l([],e,n),u=-1,f=t.length,d=i.nodes,h=p(d),v=[],_=[],g=r[0];for(i[0]=i.root,i[1]=h[1]=d[1]=g.jsong||(g.jsong={}),i.requestedPaths=g.paths||(g.paths=i.requestedPaths);++u<f;){var y=t[u],x=y.path;i.value=y.value,c(o,s,x,i,h,d,v,_)}var a=i.hasValue;return m(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:i.errors,hasValue:a,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,p,l,c){var b,P;if(null==c){if(null==(c=d(p)))return;P=r[1],b=r[0]}else P=o[1],b=o[0];var m,j=c,S=b[c];if(!l)return m=f(S)&&S.$type&&"."||void 0,S=h(t,b,S,m,c),r[0]=b,o[0]=S,void((r[1]=P)&&(o[1]=P[j]||(P[j]={})));if(e.length>1)return m=f(S)&&S.$type||void 0,S=h(t,b,S,m,c),m=S.$type,r[0]=o[0]=S,void((r[1]=P)&&(m==n?P[j]=u(t,S,m,S.value):o[1]=P[j]||(P[j]={})));var A=t.error_selector,O=t[0],N=f(S)&&S.$size||0,$=t.value;m=f($)&&$.$type||void 0,$=v($,m,m?$.value:$),m||(m=i),m==a&&A&&($=A(s,$)),S=_(b,S,$,c,t.lru),S=g(O,b,S,c,x()),y(b,N-S.$size,t.version,t.lru),o[0]=S,P&&(P[j]=u(t,S,m,S&&S.value))}function s(e,t,r,o,s,n){var a=o[0],i=f(a)&&a.$type||void 0;b(t,a,i,e,s,n)===!1&&(P(t,s,n),t.hasValue=!0)}t.exports=r;var n=e("../types/$path"),a=e("../types/$error"),i=e("../types/$sentinel"),u=e("../support/clone-graph-json"),p=e("../support/array-clone"),l=e("../support/options"),c=e("../walk/walk-path-set-soft-link"),f=e("../support/is-object"),d=e("../support/get-valid-key"),h=e("../support/create-branch"),v=e("../support/wrap-node"),_=e("../support/replace-node"),g=e("../support/graph-node"),y=(e("../support/update-back-refs"),e("../support/update-graph")),x=e("../support/inc-generation"),b=e("../support/treat-node-as-miss"),P=(e("../support/treat-node-as-error"),e("../support/clone-success-paths")),m=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-graph-json":77,"../support/clone-success-paths":81,"../support/create-branch":83,"../support/get-valid-key":85,"../support/graph-node":86,"../support/inc-generation":87,"../support/is-object":91,"../support/options":96,"../support/replace-node":99,"../support/treat-node-as-error":101,"../support/treat-node-as-miss":102,"../support/update-back-refs":104,"../support/update-graph":105,"../support/wrap-node":106,"../types/$error":107,"../types/$path":108,"../types/$sentinel":109,"../walk/walk-path-set-soft-link":112}],71:[function(e,t){function r(e,t,r,n){var a,i=p([],e,n),c=-1,f=t.length,d=i.nodes,h=u(d),v=[],_=[],g=r[0];for(i[0]=i.root,i[3]=h[3]=d[3]=g.json||(g.json={});++c<f;){var y=t[c],x=y.path;i.value=y.value,l(o,s,x,i,h,d,v,_)}var a=i.hasValue;return a||delete g.json,m(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:i.errors,hasValue:a,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,u,p,l){var x,b,P;if(null==l){if(null==(l=f(u)))return;P=f(s),b=r[3],x=r[0]}else P=l,b=o[3],x=o[0];var m,j=x[l];if(!p)return m=c(j)&&j.$type&&"."||void 0,j=d(t,x,j,m,l),r[0]=x,void(o[0]=j);if(e.length>1)return m=c(j)&&j.$type||void 0,j=d(t,x,j,m,l),r[0]=o[0]=j,void((r[3]=b)&&(o[3]=b[P]||(b[P]={})));var S=t.error_selector,A=t[0],O=c(j)&&j.$size||0,N=t.value;m=c(N)&&N.$type||void 0,N=h(N,m,m?N.value:N),m||(m=a),m==n&&S&&(N=S(s,N)),j=v(x,j,N,l,t.lru),j=_(A,x,j,l,y()),g(x,O-j.$size,t.version,t.lru),o[0]=j,b&&(b[P]=i(t,j,m,j&&j.value))}function s(e,t,r,o,s,n){var a=o[0],i=c(a)&&a.$type||void 0;x(t,a,i,e,s,n)===!1&&(P(t,s,n),b(t,a,i,s)===!1&&(t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../types/$error")),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),d=e("../support/create-branch"),h=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),P=e("../support/clone-success-paths"),m=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/clone-success-paths":81,"../support/create-branch":83,"../support/get-valid-key":85,"../support/graph-node":86,"../support/inc-generation":87,"../support/is-object":91,"../support/options":96,"../support/replace-node":99,"../support/treat-node-as-error":101,"../support/treat-node-as-miss":102,"../support/update-back-refs":104,"../support/update-graph":105,"../support/wrap-node":106,"../types/$error":107,"../types/$path":108,"../types/$sentinel":109,"../walk/walk-path-set":113}],72:[function(e,t){function r(e,t,r,n){var a=p([],e,n),i=-1,c=t.length,f=a.nodes,d=u(f),h=[],v=[];for(a[0]=a.root,a.onNext=r;++i<c;){var _=t[i],g=_.path;a.value=_.value,l(o,s,g,a,d,f,h,v)}return m(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var l;if(null==p){if(null==(p=f(i)))return;l=r[0]}else l=o[0];var x,b=l[p];if(!u)return x=c(b)&&b.$type&&"."||void 0,b=d(t,l,b,x,p),r[0]=l,void(o[0]=b);if(e.length>1)return x=c(b)&&b.$type||void 0,b=d(t,l,b,x,p),void(r[0]=o[0]=b);var P=t.error_selector,m=t[0],j=c(b)&&b.$size||0,S=t.value;x=c(S)&&S.$type||void 0,S=h(S,x,x?S.value:S),x||(x=a),x==n&&P&&(S=P(s,S)),b=v(l,b,S,p,t.lru),b=_(m,l,b,p,y()),g(l,j-b.$size,t.version,t.lru),o[0]=b}function s(e,t,r,o,s,n){var a=o[0],p=c(a)&&a.$type||void 0;if(x(t,a,p,e,s,n)===!1&&(P(t,s,n),b(t,a,p,s)===!1)){var l=t.onNext;l&&l({path:u(s),value:i(t,a,p,a&&a.value)})}}t.exports=r;var n=e("../types/$error"),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),d=e("../support/create-branch"),h=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),P=e("../support/clone-success-paths"),m=e("../lru/collect")},{"../lru/collect":61,"../support/array-clone":74,"../support/clone-dense-json":76,"../support/clone-success-paths":81,"../support/create-branch":83,"../support/get-valid-key":85,"../support/graph-node":86,"../support/inc-generation":87,"../support/is-object":91,"../support/options":96,"../support/replace-node":99,"../support/treat-node-as-error":101,"../support/treat-node-as-miss":102,"../support/update-back-refs":104,"../support/update-graph":105,"../support/wrap-node":106,"../types/$error":107,"../types/$sentinel":109,"../walk/walk-path-set":113}],73:[function(e,t){t.exports=function(e,t){for(var r=-1,o=e.length,s=new Array(o+1);++r<o;)s[r]=e[r];
return s[r]=t,s}},{}],74:[function(e,t){t.exports=function(e){for(var t=-1,r=e.length,o=new Array(r);++t<r;)o[t]=e[t];return o}},{}],75:[function(e,t){t.exports=function(e,t){for(var r=-1,o=e.length-t,s=new Array(o);++r<o;)s[r]=e[r+t];return s}},{}],76:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone");t.exports=function(e,t,s,n){var a;return a=null==t||void 0===n?{$type:r}:1==e.boxed?o(t):n}},{"../types/$sentinel":109,"./clone":82}],77:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone"),s=e("./is-primitive");t.exports=function(e,t,n,a){var i;return i=null==t||void 0===a?{$type:r}:1==e.boxed?o(t):n==r?s(a)?a:o(t):n?o(t):a}},{"../types/$sentinel":109,"./clone":82,"./is-primitive":92}],78:[function(e,t){var r=e("./clone-requested-path"),o=e("./clone-optimized-path");t.exports=function(e,t,s,n){e.requestedMissingPaths.push(r(e.bound,s,t,e.index)),e.optimizedMissingPaths.push(o(n,t))}},{"./clone-optimized-path":79,"./clone-requested-path":80}],79:[function(e,t){t.exports=function(e,t){for(var r,o=-1,s=-1,n=e.length,a=t.length,i=[];++o<n;)i[o]=e[o];for(;++s<a;)null!=(r=t[s])&&(i[o++]=r);return i}},{}],80:[function(e,t){t.exports=function(e,t,r,o){for(var s=-1,n=-1,a=-1,i=e.length,u=t.length,p=r.length,l=new Array(i+u+p);++s<i;)l[s]=e[s];for(;++n<u;)l[s++]=t[n];for(;++a<p;)l[s++]=r[a];return null!=o&&(l.pathSetIndex=o),l}},{}],81:[function(e,t){var r=e("./array-slice"),o=e("./array-clone");t.exports=function(e,t,s){e.requestedPaths.push(r(t,e.offset)),e.optimizedPaths.push(o(s))}},{"./array-clone":74,"./array-slice":75}],82:[function(e,t){var r=e("./is-object");t.exports=function(e){var t,o,s,n=e,a=n,i=-1;if(r(n))for(n={},o=Object.keys(a),t=o.length;++i<t;)s=o[i],"_"===s[0]&&"_"===s[1]||"/"===s||"./"===s||"../"===s||(n[s]=a[s]);return n}},{"./is-object":91}],83:[function(e,t){var r=e("../types/$path"),o="expired",s=e("./replace-node"),n=e("./graph-node"),a=e("./update-back-refs"),i=e("./is-primitive"),u=e("./is-expired");t.exports=function(e,t,p,l,c){return l&&u(e,p)&&(l=o),(l&&l!=r||i(p))&&(p=s(t,p,{},c,e.lru),p=n(e[0],t,p,c,0),p=a(p,e.version)),p}},{"../types/$path":108,"./graph-node":86,"./is-expired":90,"./is-primitive":92,"./replace-node":99,"./update-back-refs":104}],84:[function(e,t){var r="__ref";t.exports=function(e){for(var t,o=-1,s=e.__refs_length||0;++o<s;)void 0!==(t=e[r+o])&&(t.__context=t.__ref_index=e[r+o]=void 0);e.__refs_length=void 0}},{}],85:[function(e,t){t.exports=function(e){var t,r=e.length-1;do if(null!=(t=e[r]))return t;while(--r>-1);return null}},{}],86:[function(e,t){var r="/",o="./",s="../",n="__key",a="__generation";t.exports=function(e,t,i,u,p){return i[r]=e,i[o]=i,i[s]=t,i[n]=u,i[a]=p,i}},{}],87:[function(e,t){var r=0;t.exports=function(){return r++}},{}],88:[function(e,t){var r=0;t.exports=function(){return r++}},{}],89:[function(e,t){function r(e,t,n,a){if(s(e,t,n,a)){var i=o(t)&&t.$type||void 0;if(null==i)for(var u=Object.keys(t),p=-1,l=u.length;++p<l;){var n=u[p];"_"===n[0]&&"_"===n[1]||"/"===n||"./"===n||"../"===n||r(t,t[n],n,a)}return!0}return!1}t.exports=r;var o=e("./is-object"),s=e("./remove-node")},{"./is-object":91,"./remove-node":98}],90:[function(e,t){var r=e("../values/$expires-now"),o=e("../values/$expires-never"),s=e("./now"),n=e("../lru/splice");t.exports=function(e,t){var a=t.$expires;return null!=a&&a!=o&&(a==r||a<s())?(t.__invalidated||(t.__invalidated=!0,e.expired.push(t),n(e.lru,t)),!0):!1}},{"../lru/splice":63,"../values/$expires-never":110,"../values/$expires-now":111,"./now":95}],91:[function(e,t){var r="object";t.exports=function(e){return null!=e&&typeof e==r}},{}],92:[function(e,t){var r="object";t.exports=function(e){return null==e||typeof e!=r}},{}],93:[function(e,t){function r(e,t){return t?o(e)?(e=e[e.__offset||(e.__offset=0)],r(e,null!=e&&"object"==typeof e)):(void 0===e.__offset&&(e.__offset=e.from||(e.from=0)),e.__offset):e}t.exports=r;var o=Array.isArray},{}],94:[function(e,t){var r="./",o=e("../types/$path"),s=(e("../types/$sentinel"),e("../values/$expires-now"),e("./is-object")),n=(e("./is-primitive"),e("./is-expired")),a=e("../lru/promote"),i=e("./wrap-node"),u=e("./graph-node"),p=e("../support/replace-node"),l=e("../support/update-graph"),c=e("./inc-generation"),f=e("./invalidate-node");t.exports=function(e,t,d,h,v,_){var g,y,x,b;if(d==v){if(null==d)return null;if((x=s(d))&&(g=d.$type,null==g))return null==d[r]?u(e[0],t,d,_,0):d}else(x=s(d))&&(g=d.$type);var P,m;if(g==o){if(null==v)return n(e,d)?void f(t,d,_,e.lru):d;if((b=s(v))&&(y=v.$type,y==o))if(d===v){if(null!=d[r])return d}else if(n(e,v)===!1&&v.$timestamp<d.$timestamp==!1){P=d.value,m=v.value;var j=P.length;if(j===m.length){for(;--j>-1&&P[j]===m[j];);if(-1===j)return d}}}else if((b=s(v))&&(y=v.$type),x&&!g&&(null==v||b&&!y))return d;if(y&&v[r]&&n(e,v))return x&&d!=v&&f(t,d,_,e.lru),v;if(g&&b&&!y)return d=p(t,d,v,_,e.lru),u(e[0],t,d,_,0);if(!b||y){var S=0;if(d!=v){m||(m=y?v.value:v),v=i(v,y,m);var A=x&&d.$size||0,O=v.$size;S=A-O,d=p(t,d,v,_,e.lru),l(t,S,e.version,e.lru),d=u(e[0],t,d,_,c())}else x&&null==d[r]?(d=i(d,g,d.value),S=-d.$size,l(t,S,e.version,e.lru),d=u(e[0],t,d,_,c())):(d=t[_]=i(d,g,d),S=-d.$size,l(t,S,e.version,e.lru),d=u(e[0],t,d,_,c()));a(e.lru,d)}else null==d&&(d=t[_]=u(e[0],t,v,_,0));return d}},{"../lru/promote":62,"../support/replace-node":99,"../support/update-graph":105,"../types/$path":108,"../types/$sentinel":109,"../values/$expires-now":111,"./graph-node":86,"./inc-generation":87,"./invalidate-node":89,"./is-expired":90,"./is-object":91,"./is-primitive":92,"./wrap-node":106}],95:[function(e,t){t.exports=Date.now},{}],96:[function(e,t){var r=e("../support/inc-version"),o=e("../get/getBoundValue");t.exports=function(e,t,s){{var n=(e.version=r(),e.lru||(e.lru=t._root)),a=e.root||(e.root=t._cache),i=(e.expired||(e.expired=n.expired),e.bound||(e.bound=t._path||[])),u=(e.errors||(e.errors=[]),e.requestedPaths||(e.requestedPaths=[]),e.optimizedPaths||(e.optimizedPaths=[]),e.requestedMissingPaths||(e.requestedMissingPaths=[]),e.optimizedMissingPaths||(e.optimizedMissingPaths=[]),e.nodes||(e.nodes=[]));e.boxed=t._boxed||!1,e.materialized=t._materialized,e.errorsAsValues=t._treatErrorsAsValues||!1}return e.offset||(e.offset=0),e.error_selector=s||t._errorSelector,u[0]=i.length?o(t,i).value:a,e}},{"../get/getBoundValue":39,"../support/inc-version":88}],97:[function(e,t){function r(e){return o(e)?++e.__offset===e.length?r(e[e.__offset=0]):!0:null!=e&&"object"==typeof e?++e.__offset>(e.to||(e.to=e.from+(e.length||1)-1))?(e.__offset=e.from,!1):!0:!1}t.exports=r;var o=Array.isArray},{}],98:[function(e,t){var r=e("../types/$path"),o="/",s="./",n="../",a=e("./unlink"),i=e("./delete-back-refs"),u=e("../lru/splice"),p=e("./is-object");t.exports=function(e,t,l,c){if(p(t)){var f=t.$type;return f&&(f==r&&a(t),u(c,t)),i(t),e[l]=t[o]=t[n]=t[s]=void 0,!0}return!1}},{"../lru/splice":63,"../types/$path":108,"./delete-back-refs":84,"./is-object":91,"./unlink":103}],99:[function(e,t){var r=e("./transfer-back-refs"),o=e("./invalidate-node");t.exports=function(e,t,s,n,a){return null!=t&&t!==s&&"object"==typeof t&&(r(t,s),o(e,t,n,a)),e[n]=s}},{"./invalidate-node":89,"./transfer-back-refs":100}],100:[function(e,t){var r="__ref",o="__refs_length";t.exports=function(e,t){for(var s,n=e[o]||0,a=t[o]||0,i=-1;++i<n;)s=e[r+i],void 0!==s&&(s.__context=t,t[r+(a+i)]=s,e[r+i]=void 0);t[o]=n+a,e[o]=s=void 0}},{}],101:[function(e,t){var r=e("../types/$error"),o=e("../lru/promote"),s=e("./array-clone");t.exports=function(e,t,n,a){return null==t?!1:(o(e.lru,t),n!=r||e.errorsAsValues?!1:(e.errors.push({path:s(a),value:t.value}),!0))}},{"../lru/promote":62,"../types/$error":107,"./array-clone":74}],102:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone-missing-paths"),s=e("./is-expired");t.exports=function(e,t,n,a,i,u){var p=!e.materialized;if(null==t&&p)return o(e,a,i,u),!0;if(n){if(n==r&&void 0===t.value&&p&&!e.boxed)return!0;if(s(e,t))return o(e,a,i,u),!0}return!1}},{"../types/$sentinel":109,"./clone-missing-paths":78,"./is-expired":90}],103:[function(e,t){var r="__ref";t.exports=function(e){var t=e.__context;if(t){for(var o=(e.__ref_index||0)-1,s=(t.__refs_length||0)-1;++o<=s;)t[r+o]=t[r+(o+1)];t.__refs_length=s,e.__ref_index=e.__context=t=void 0}}},{}],104:[function(e,t){function r(e,t){if(e&&e.__version!==t){e.__version=t,e.__generation=o(),r(e["../"],t);for(var s=-1,n=e.__refs_length||0;++s<n;)r(e["__ref"+s],t)}return e}t.exports=r;var o=e("./inc-generation")},{"./inc-generation":87}],105:[function(e,t){var r=e("./remove-node"),o=e("./update-back-refs");t.exports=function(e,t,s,n){for(var a;a=e;)e=a["../"],(a.$size=(a.$size||0)-t)<=0&&null!=e?r(e,a,a.__key,n):a.__version!==s&&o(a,s)}},{"./remove-node":98,"./update-back-refs":104}],106:[function(e,t){var r=e("../types/$path"),o=e("../types/$error"),s=e("../types/$sentinel"),n=e("./now"),a=(e("./clone"),e("./is-object"));t.exports=function(e,t,i){var u=e,p=1;t==r?p=50+(i.length||1):t==s?p=50+("string"==typeof i&&i.length||1):t==o?p=e.$size||51:a(e)&&(t||(t=e.$type))?p=e.$size||51:(u={value:i},p=50+("string"==typeof i&&i.length||1),t=s);var l=e.$expires;return"number"==typeof l&&0>l&&(e.$expires=n()+-1*l),u.$type=t,u.$size=p,u}},{"../types/$error":107,"../types/$path":108,"../types/$sentinel":109,"./clone":82,"./is-object":91,"./now":95}],107:[function(e,t){t.exports="error"},{}],108:[function(e,t){t.exports="path"},{}],109:[function(e,t){t.exports="sentinel"},{}],110:[function(e,t){t.exports=1},{}],111:[function(e,t){t.exports=0},{}],112:[function(e,t){function r(e,t,h,v,_,g,y,x,b,P){var m=g[0];if(0==h.length||l(m))return t(h,v,_,g,y,x,b,P);for(var j=m.$type;j===o;){if(p(v,m))return g[0]=void 0,t(h,v,_,g,y,x,b,P);var S=m,A=m.value;if(g[0]=_[0]=v[0],g[1]=_[1]=v[1],g[2]=_[2]=v[2],n(e,S,A,v,_,g,y,x),m=g[0],null==m)return t(h,v,_,g,y,x,b,P);if(l(m)||(j=m.$type)&&j!=o)return e(s,v,_,g,y,x,!0,null,P,!1),t(h,v,_,g,u(y,null),x,b,P)}if(null!=j)return t(h,v,_,g,y,x,b,P);var O=h[0],N=c(O);do{var $,w;N===!0?($=f(O,!0),w=$):($=O,w=P);var k,E,M=i(g),z=i(_);null==$?(k=u(y,null),E=i(x),$=b,w=P,e(h,v,z,M,k,E,!0,null,w,!1)):(k=u(y,$),E=u(x,$),e(h,v,z,M,k,E,!0,$,w,N)),r(e,t,a(h,1),v,z,M,k,E,$,w,N)}while(N&&d(O))}t.exports=r;var o=e("../types/$path"),s=new Array(0),n=e("./walk-reference"),a=e("../support/array-slice"),i=e("../support/array-clone"),u=e("../support/array-append"),p=e("../support/is-expired"),l=e("../support/is-primitive"),c=e("../support/is-object"),f=e("../support/keyset-to-key"),d=e("../support/permute-keyset")},{"../support/array-append":73,"../support/array-clone":74,"../support/array-slice":75,"../support/is-expired":90,"../support/is-object":91,"../support/is-primitive":92,"../support/keyset-to-key":93,"../support/permute-keyset":97,"../types/$path":108,"./walk-reference":114}],113:[function(e,t){function r(e,t,h,v,_,g,y,x,b,P){var m=g[0];if(0==h.length||l(m))return t(h,v,_,g,y,x,b,P);for(var j=m.$type;j===o;){if(p(v,m))return g[0]=void 0,t(h,v,_,g,y,x,b,P);var S=m,A=m.value;if(m=m.__context,null!=m)j=m.$type,x=i(A),g[0]=m;else{if(g[0]=_[0]=v[0],n(e,S,A,v,_,g,y,x),m=g[0],null==m)return t(h,v,_,g,y,x,b,P);if(l(m)||(j=m.$type)&&j!=o)return e(s,v,_,g,y,x,!0,null,P,!1),t(h,v,_,g,u(y,null),x,b,P)}}if(null!=j)return t(h,v,_,g,y,x,b,P);var O=h[0],N=c(O);do{var $,w;N===!0?($=f(O,!0),w=$):($=O,w=P);var k,E,M=i(g),z=i(_);null==$?(k=u(y,null),E=i(x),$=b,w=P,e(h,v,z,M,k,E,!0,null,w,!1)):(k=u(y,$),E=u(x,$),e(h,v,z,M,k,E,!0,$,w,N)),r(e,t,a(h,1),v,z,M,k,E,$,w,N)}while(N&&d(O))}t.exports=r;var o=e("../types/$path"),s=new Array(0),n=e("./walk-reference"),a=e("../support/array-slice"),i=e("../support/array-clone"),u=e("../support/array-append"),p=e("../support/is-expired"),l=e("../support/is-primitive"),c=e("../support/is-object"),f=e("../support/keyset-to-key"),d=e("../support/permute-keyset")},{"../support/array-append":73,"../support/array-clone":74,"../support/array-slice":75,"../support/is-expired":90,"../support/is-object":91,"../support/is-primitive":92,"../support/keyset-to-key":93,"../support/permute-keyset":97,"../types/$path":108,"./walk-reference":114}],114:[function(e,t){function r(e,t,r,u,p,l,c,f){f.length=0;for(var d,h,v,_=-1,g=r.length;++_<g;){if(d=l[0],null==d)return l;if(a(d)||d.$type)return e(s,u,p,l,c,f,!1,v,null,!1),l;do if(h=r[_],null!=h){v=h,f.push(h),e(i(r,_),u,p,l,c,f,!1,h,null,!1);break}while(++_<g)}if(d=l[0],n(d)&&t.__context!==d){var y=d.__refs_length||0;d.__refs_length=y+1,d[o+y]=t,t.__context=d,t.__ref_index=y}return l}t.exports=r;{var o="__ref",s=new Array(0),n=e("../support/is-object"),a=e("../support/is-primitive"),i=e("../support/array-slice");e("../support/array-append")}},{"../support/array-append":73,"../support/array-slice":75,"../support/is-object":91,"../support/is-primitive":92}],115:[function(e,t){var r=e("./lib/falcor"),o=e("./lib/get"),s=e("./lib/set"),n=e("./lib/invalidate"),a=r.Model.prototype;a._getBoundValue=o.getBoundValue,a._getValueSync=o.getValueSync,a._getPathSetsAsValues=o.getAsValues,a._getPathSetsAsJSON=o.getAsJSON,a._getPathSetsAsPathMap=o.getAsPathMap,a._getPathSetsAsJSONG=o.getAsJSONG,a._getPathMapsAsValues=o.getAsValues,a._getPathMapsAsJSON=o.getAsJSON,a._getPathMapsAsPathMap=o.getAsPathMap,a._getPathMapsAsJSONG=o.getAsJSONG,a._setPathSetsAsJSON=s.setPathSetsAsJSON,a._setPathSetsAsJSONG=s.setPathSetsAsJSONG,a._setPathSetsAsPathMap=s.setPathSetsAsPathMap,a._setPathSetsAsValues=s.setPathSetsAsValues,a._setJSONGsAsJSON=s.setJSONGsAsJSON,a._setJSONGsAsJSONG=s.setJSONGsAsJSONG,a._setJSONGsAsPathMap=s.setJSONGsAsPathMap,a._setJSONGsAsValues=s.setJSONGsAsValues,a._invPathSetsAsJSON=n.invPathSetsAsJSON,a._invPathSetsAsJSONG=n.invPathSetsAsJSONG,a._invPathSetsAsPathMap=n.invPathSetsAsPathMap,a._invPathSetsAsValues=n.invPathSetsAsValues,a._setCache=o.setCache,t.exports=r},{"./lib/falcor":6,"./lib/get":42,"./lib/invalidate":56,"./lib/set":64}]},{},[1])(1)});