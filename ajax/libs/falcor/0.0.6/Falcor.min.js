!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.falcor=e()}}(function(){return function e(t,r,o){function s(a,i){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+a+"'")}var p=r[a]={exports:{}};t[a][0].call(p.exports,function(e){var r=t[a][1][e];return s(r?r:e)},p,p.exports,e,t,r,o)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<o.length;a++)s(o[a]);return s}({1:[function(e,t){t.exports=e("./operations")},{"./operations":118}],2:[function(e,t){var r={NOOP:function(){},__GENERATION_GUID:0,__GENERATION_VERSION:0,__CONTAINER:"__reference_container",__CONTEXT:"__context",__GENERATION:"__generation",__GENERATION_UPDATED:"__generation_updated",__INVALIDATED:"__invalidated",__KEY:"__key",__KEYS:"__keys",__IS_KEY_SET:"__is_key_set",__NULL:"__null",__SELF:"./",__PARENT:"../",__REF:"__ref",__REF_INDEX:"__ref_index",__REFS_LENGTH:"__refs_length",__ROOT:"/",__OFFSET:"__offset",__FALKOR_EMPTY_OBJECT:"__FALKOR_EMPTY_OBJECT",$TYPE:"$type",$SIZE:"$size",$EXPIRES:"$expires",$TIMESTAMP:"$timestamp",SENTINEL:"sentinel",ERROR:"error",VALUE:"value",EXPIRED:"expired",LEAF:"leaf"};r.__INTERNAL_KEYS=[r.__CONTAINER,r.__CONTEXT,r.__GENERATION,r.__GENERATION_UPDATED,r.__INVALIDATED,r.__KEY,r.__KEYS,r.__IS_KEY_SET,r.__NULL,r.__SELF,r.__PARENT,r.__REF,r.__REF_INDEX,r.__REFS_LENGTH,r.__OFFSET,r.__ROOT],t.exports=r},{}],3:[function(e,t){if("undefined"==typeof r)var r={};var o=e("./rx.ultralite");r.__Internals={},r.Observable=o.Observable,r.EXPIRES_NOW=0,r.EXPIRES_NEVER=1,r.now=function(){return Date.now()},r.NOOP=function(){},t.exports=r},{"./rx.ultralite":34}],4:[function(e,t){var r=e("./Falcor"),o=e("./Constants"),s=e("./request/RequestQueue"),n=e("./scheduler/ImmediateScheduler"),a=e("./scheduler/TimeoutScheduler"),i=o.$TYPE,u=o.$TYPE,p=(e("./ModelResponse"),e("./operations/call")),l=e("./operations"),c=e("./../get/getBoundValue"),f=t.exports=r.Model=function d(e){e||(e={}),this._materialized=e.materialized||!1,this._boxed=e.boxed||!1,this._treatErrorsAsValues=e.treatErrorsAsValues||!1,this._dataSource=e.source,this._maxSize=e.maxSize||Math.pow(2,53)-1,this._collectRatio=e.collectRatio||.75,this._scheduler=new n,this._request=new s(this,this._scheduler),this._errorSelector=e.errorSelector||d.prototype._errorSelector,this._router=e.router,this._root=e.root||{expired:[],allowSync:!1,unsafeMode:!0},e.cache&&"object"==typeof e.cache?this.setCache(e.cache):this._cache={},this._path=[]};f.EXPIRES_NOW=r.EXPIRES_NOW,f.EXPIRES_NEVER=r.EXPIRES_NEVER,f.prototype={_boxed:!1,_progressive:!1,_errorSelector:function(e,t){return t},get:l("get"),set:l("set"),invalidate:l("invalidate"),call:p,getValue:function(e){return this.get(e,function(e){return e})},setValue:function(e,t){return this.set(Array.isArray(e)?{path:e,value:t}:e,function(e){return e})},bind:function(e){for(var t=this,o=t._root,s=new Array(arguments.length-1),n=-1,a=arguments.length-1;++n<a;)s[n]=arguments[n+1];if(0===a)throw new Error("Model#bind requires at least one value path.");return r.Observable.create(function(r){var n;try{if(o.allowSync=!0,!(n=t.bindSync(t._path.concat(e))))throw!1;o.allowSync=!1,r.onNext(n),r.onCompleted()}catch(a){return o.allowSync=!1,t.get.apply(t,s.map(function(t){return e.concat(t)}).concat(function(){})).subscribe(function(){},function(e){r.onError(e)},function(){try{(n=t.bindSync(e))&&r.onNext(n),r.onCompleted()}catch(o){r.onError(o)}})}})},setCache:function(e){return(this._cache={})&&this._setCache(this,e)},getValueSync:function(e){if(Array.isArray(e)===!1)throw new Error("Model#getValueSync must be called with an Array path.");return this._path.length&&(e=this._path.concat(e)),this.syncCheck("getValueSync")&&this._getValueSync(this,e).value},setValueSync:function(e,t,r){if(Array.isArray(e)===!1&&("function"!=typeof r&&(r=t||this._errorSelector),t=e.value,e=e.path),Array.isArray(e)===!1)throw new Error("Model#setValueSync must be called with an Array path.");if(this._dataSource)throw new Error("Model#setValueSync can not be invoked on a Model with a DataSource. Please use the withoutDataSource() method followed by setValueSync if you would like to modify only the local cache.");if(this.syncCheck("setValueSync")){var o={},s=this._treatErrorsAsValues,n=this._boxed;if(this._treatErrorsAsValues=!0,this._boxed=!0,this._setPathSetsAsJSON(this,[{path:e,value:t}],[o],r),this._treatErrorsAsValues=s,this._boxed=n,o=o.json,o&&o[i]===u&&!this._treatErrorsAsValues)throw this._boxed?o:o.value;return this._boxed?o:o&&o.value}},bindSync:function(e){if(Array.isArray(e)===!1)throw new Error("Model#bindSync must be called with an Array path.");var t=this.syncCheck("bindSync")&&c(this,this._path.concat(e)),r=t.value;if(e=t.path,t.shorted){if(r&&r[i]===u){if(this._boxed)throw r;throw r.value}return void 0}if(r&&r[i]===u){if(this._boxed)throw r;throw r.value}return this.clone(["_path",t.path])},clone:function(){var e=this,t=new f;return Object.keys(e).forEach(function(r){t[r]=e[r]}),Array.prototype.slice.call(arguments).forEach(function(e){t[e[0]]=e[1]}),t},batch:function(e){return"number"==typeof e?e=new a(Math.round(Math.abs(e))):e&&e.schedule||(e=new n),this.clone(["_request",new s(this,e)])},unbatch:function(){return this.clone(["_request",new s(this,new n)])},treatErrorsAsValues:function(){return this.clone(["_treatErrorsAsValues",!0])},materialize:function(){return this.clone(["_materialized",!0])},boxValues:function(){return this.clone(["_boxed",!0])},unboxValues:function(){return this.clone(["_boxed",!1])},withoutDataSource:function(){return this.clone(["_dataSource",null])},syncCheck:function(e){if(this._root.allowSync===!1&&this._root.unsafeMode===!1)throw new Error("Model#"+e+" may only be called within the context of a request selector.");return!0}}},{"./../get/getBoundValue":42,"./Constants":2,"./Falcor":3,"./ModelResponse":5,"./operations":11,"./operations/call":7,"./request/RequestQueue":33,"./scheduler/ImmediateScheduler":35,"./scheduler/TimeoutScheduler":36}],5:[function(e,t){function r(e){this._subscribe=e}function o(){}function s(e){var t=Array.prototype.slice.call(arguments,1);return new r(function(r){return e.subscribe(t.reduce(function(e,t){return Object.create(e,t)},r))})}var n=e("./Falcor"),a=n.Observable,i={format:{value:"AsValues"}},u={format:{value:"AsPathMap"}},p={format:{value:"AsJSONG"}};r.create=function(e){return new r(e)},r.prototype=a.create(o),r.prototype.format="AsPathMap",r.prototype.toPathValues=function(){return s(this,i)},r.prototype.toJSON=function(){return s(this,u)},r.prototype.toJSONG=function(){return s(this,p)},t.exports=r},{"./Falcor":3}],6:[function(e,t){var r=e("./Falcor"),o=e("./Model");r.Model=o,t.exports=r},{"./Falcor":3,"./Model":4}],7:[function(e,t){function r(e,t,r,n,a){var i=this;return t&&Array.isArray(t)||(t=[]),r&&Array.isArray(r)||(r=[]),n=Array.prototype.slice.call(arguments,3),"function"!=typeof(a=n[n.length-1])?a=void 0:n=n.slice(0,-1),s.create(function(s){var u=i.clone(["_path",[]]),p=u.withoutDataSource(),l=i._dataSource,c=i._path,f=c.concat(e),d=f.slice(0,-1),h=i.getValue(e).flatMap(function(e){return"function"==typeof e?o.Observable.return(e.apply(u.bindSync(d),t).map(function(e){return{path:d.concat(e.path),value:e.value}}).toArray().flatMap(function(e){return p.set.apply(p,e).toJSONG()}).flatMap(function(e){return u.get.apply(u,e.paths.reduce(function(e,t){return e.concat(r.map(function(e){return t.concat(e)}))},[]).concat(n.reduce(function(e,t){return e.concat(d.concat(t))},[]))).toJSONG()})):o.Observable.empty()}).defaultIfEmpty(l.call(e,t,r,n)).mergeAll().subscribe(function(e){var t=e.invalidated;t&&t.length&&invalidatePaths(u,t,void 0,i._errorSelector),h=p.set(e,function(){return i}).subscribe(function(t){var r=e.paths.map(function(e){return e.slice(c.length)});a&&(r[r.length]=function(){return a.call(t,r)}),h=t.get.apply(t,r).subscribe(s)})});return{dispose:function(){h&&h.dispose(),h=void 0}}})}t.exports=r;var o=e("../../Falcor"),s=e("./../../ModelResponse")},{"../../Falcor":3,"./../../ModelResponse":5}],8:[function(e,t){var r=e("./../support/combineOperations"),o=e("./../support/setSeedsOrOnNext");t.exports=function(e,t,s,n,a,i){return function(u){var p=r(t,n,"get");return o(p,u,s,i,a),[p,s,!!e._dataSource]}}},{"./../support/combineOperations":18,"./../support/setSeedsOrOnNext":32}],9:[function(e,t){function r(e,t,r,a,i,u){return function(t,r,i){var p=r.requestedMissingPaths;return e._request.get(p,r.optimizedMissingPaths,o(e,p,function(r,o){r&&i(r),o.paths=n(e,o);var l=s(o,p,a,t,u);i(null,l)}))}}var o=e("./../support/getSourceObserever"),s=e("./../support/partitionOperations"),n=e("./../support/mergeBoundPath");t.exports=r},{"./../support/getSourceObserever":20,"./../support/mergeBoundPath":24,"./../support/partitionOperations":27}],10:[function(e,t){t.exports=function(e,t){return e._dataSource&&t.requestedMissingPaths.length>0}},{}],11:[function(e,t){var r=e("../ModelResponse"),o=e("./request"),s=e("./set/buildInitialArgs"),n=e("./set/modelSourceRequest"),a=e("./get/buildInitialArgs"),i=e("./get/modelSourceRequest"),u=e("./get/shouldRequest"),p=e("./invalidate/invalidateInitialArgs"),l=e("./invalidate/modelSourceRequest");t.exports=function(e){return function(){var t=this,c=(t._root,Array.prototype.slice.call(arguments)),f=c[c.length-1];"function"==typeof f?c.pop():f=!1;var d;return"get"===e?d=o(t,c,f,a,i,u):"set"===e?d=o(t,c,f,s,n):"invalidate"===e&&(d=o(t,c,f,p,l)),r.create(d)}}},{"../ModelResponse":5,"./get/buildInitialArgs":8,"./get/modelSourceRequest":9,"./get/shouldRequest":10,"./invalidate/invalidateInitialArgs":12,"./invalidate/modelSourceRequest":13,"./request":14,"./set/buildInitialArgs":15,"./set/modelSourceRequest":16}],12:[function(e,t){var r=e("./../support/combineOperations"),o=e("./../support/setSeedsOrOnNext");t.exports=function(e,t,s,n,a,i){return function(e){var u=r(t,n,"inv");return o(u,e,s,i,a),[u,s,!1]}}},{"./../support/combineOperations":18,"./../support/setSeedsOrOnNext":32}],13:[function(e,t){var r=function(){};t.exports=function(){return r}},{}],14:[function(e,t){function r(e,t,r,u,p,l){return l||(l=i),function(i){function c(t,a,i){var u=o(e,t,v);j=j||u.valuesReceived,u.errors.length&&(g=g.concat(u.errors)),i&&l(e,u)?O(a,u,function(e,t){return e?(g=g.concat(e),void c([],S)):void c.apply(null,t)}):(!m&&j&&s(e,f,S,r),n(h,d,g))}var f=i.onNext.bind(i),d=i.onError.bind(i),h=i.onCompleted.bind(i),v=e._errorSelector,_=(i.isProgressive,r&&r.length||0),g=[],y=r&&"AsJSON"||i.format||"AsPathMap",x="AsJSONG"===y,b="AsPathMap"===y,m="AsValues"===y,P=b||x||r,j=(e._path,!1),S=a(r,_),A=u(e,t,S,y,r,f),O=p(e,t,S,y,r,f);try{c.apply(null,A(P))}catch($){g=[$],n(h,d,g)}}}var o=e("./support/processOperations"),s=(e("./support/setSeedsOrOnNext"),e("./support/onNextValue")),n=e("./support/onCompletedOrError"),a=e("./support/primeSeeds"),i=function(){return!0};t.exports=r},{"./support/onCompletedOrError":25,"./support/onNextValue":26,"./support/primeSeeds":28,"./support/processOperations":29,"./support/setSeedsOrOnNext":32}],15:[function(e,t){var r=e("./../support/combineOperations"),o=e("./../support/setSeedsOrOnNext");t.exports=function(e,t,s,n,a,i){return function(u){var p=!!e._dataSource,l=p&&"AsJSONG"||n,c=r(t,l,"set",p&&a),f=s;if(p&&a){var d={};f=[],c.forEach(function(e){var t={jsong:d,paths:[]};e.seeds=[t],f.push(t)})}else p?(f=[{}],o(c,u,f,!1,a)):(c=r(t,n,"set"),o(c,u,s,i,a),f=s);return[c,f,p]}}},{"./../support/combineOperations":18,"./../support/setSeedsOrOnNext":32}],16:[function(e,t){function r(e,t,r,a,u,p){return function(l,c,f){var d=l[0].jsong,h=l[0].paths,v=r&&r.length>0;for(i=1;i<l.length;i++)h=h.concat(l[i].paths);var _={jsong:d,paths:h};return e._request.set(_,o(e,_.paths,function(o,i){o&&f(o),e._setJSONGsAsJSON(e,[i],[]);var l=s(t,a,"get");n(l,v,r,p,u),f(null,[l,r])}))}}var o=e("./../support/getSourceObserever"),s=e("./../support/combineOperations"),n=e("./../support/setSeedsOrOnNext");t.exports=r},{"./../support/combineOperations":18,"./../support/getSourceObserever":20,"./../support/setSeedsOrOnNext":32}],17:[function(e,t){t.exports=function(e,t,r,o,s){return{methodName:"_setJSONGs"+e,format:e,isValues:"AsValues"===e,onNext:s,seeds:t,seedsOffset:o,args:[r]}}},{}],18:[function(e,t){var r=e("./seedRequired"),o=e("./isJSONG"),s=e("./isPathOrPathValue");t.exports=function(e,t,n,a){var i=r(t),u=!i,p=i&&"AsJSON"===t,l=0;return e.reduce(function(e,r){var i=e[e.length-1],c=s(r)?"PathSets":o(r)?"JSONGs":"PathMaps",f=i&&i.type,d="_"+n+c+t;return(!f||c!==f||a)&&(i={methodName:d,format:t,type:c,isValues:u,seeds:[],onNext:null,seedsOffset:l,args:[]},e.push(i),p&&l++),i.args.push(r),e},[])}},{"./isJSONG":22,"./isPathOrPathValue":23,"./seedRequired":30}],19:[function(e,t){t.exports=function(e){return e.reduce(function(e,t){var r=e[0];return r?t.forEach(function(e,t){"object"==typeof e&&e.forEach(function(e){r[t][r[t].length]=e})}):e[0]=t,e},[])}},{}],20:[function(e,t){function r(e,t,r){var s;return{onNext:function(e){s={jsong:e.jsong,paths:t}},onError:function(s){r(o(e,t,s))},onCompleted:function(){r(!1,s)}}}var o=e("./insertErrors.js");t.exports=r},{"./insertErrors.js":21}],21:[function(e,t){t.exports=function(e,t,r){var o=e._setPathSetsAsJSON.apply(null,[e].concat(t.reduce(function(e,t){return e[0].push({path:t,value:r}),e},[[]]),[],e._errorSelector));return o.errors}},{}],22:[function(e,t){t.exports=function(e){return e.hasOwnProperty("jsong")}},{}],23:[function(e,t){t.exports=function(e){return!!Array.isArray(e)||e.hasOwnProperty("path")&&e.hasOwnProperty("value")}},{}],24:[function(e,t){t.exports=function(e,t){var r=e._path,o=[];if(r.length)for(i=0,len=t.paths.length;len>i;i++)o[i]=r.concat(t.paths[i]);else o=t.paths;return o}},{}],25:[function(e,t){t.exports=function(e,t,r){r.length?t(r):e()}},{}],26:[function(e,t){t.exports=function(e,t,r,o){var s=e._root;s.allowSync=!0,t(o?r.length?o.apply(e,r.map(function(e){return e.json})):o.call(e):r[0]),s.allowSync=!1}},{}],27:[function(e,t){function r(e,t,r,n,a){var i=[],u=[];if("AsJSON"===r){for(var p=[],l=null,c=0,f=t.length;f>c;c++){var d=t[c];l&&l.idx===d.pathSetIndex||(l&&(l.paths=o(l.paths)),l={idx:d.pathSetIndex,paths:[]},p.push(l)),l.paths.push(d)}l.paths=o(l.paths),p.forEach(function(t,o){var p=[n[t.idx]];i.push(s(r,p,e,o,a)),u.push(p)})}else i[0]=s(r,n,e,0,a);return[i,u]}var o=e("./fastCollapse.js"),s=e("./buildJSONGOperation");t.exports=r},{"./buildJSONGOperation":17,"./fastCollapse.js":19}],28:[function(e,t){t.exports=function(e,t){var r=[];if(e)for(i=0;t>i;i++)r.push({});else r[0]={};return r}},{}],29:[function(e,t){t.exports=function(e,t,r,o){return t.reduce(function(t,s){for(var n=e[s.methodName],a=s.isValues?s.onNext:s.seeds,i=n(e,s.args,a,s.onNext,r,o),u=i.requestedMissingPaths,p=s.seedsOffset,l=0,c=u.length;c>l;l++)u[l].boundPath=o,u[l].pathSetIndex+=p;return t.requestedMissingPaths=t.requestedMissingPaths.concat(u),t.optimizedMissingPaths=t.optimizedMissingPaths.concat(i.optimizedMissingPaths),t.errors=t.errors.concat(i.errors),t.valuesReceived=t.valuesReceived||i.requestedPaths.length>0,t},{errors:[],requestedMissingPaths:[],optimizedMissingPaths:[],valuesReceived:!1})}},{}],30:[function(e,t){t.exports=function(e){return"AsJSON"===e||"AsJSONG"===e||"AsPathMap"===e}},{}],31:[function(e,t){t.exports=function(e,t,r){var o,s,n,a,i=0,u=t.length,p=e.length;if(r)for(s=0;p>s&&u>i;s++)for(a=e[s],n=n=a.args.length,o=0;n>o&&u>i;o++,i++)a.seeds.push(t[i]);else for(s=0;p>s&&u>i;s++)e[s].seeds=t}},{}],32:[function(e,t){var r=e("./setSeedsOnGroups");t.exports=function(e,t,o,s,n){if(t)r(e,o,n);else for(i=0;i<e.length;i++)e[i].onNext=s}},{"./setSeedsOnGroups":31}],33:[function(e,t){function r(e,t,s,n){var a=e[t];if("object"==typeof a)if(Array.isArray(a))a.forEach(function(a){o(s,a,n),e.length>t+1&&r(e,t+1,s[a],n)});else for(var i=a.from||0,u=a.to>=0?a.to:a.length,p=i;u>=p;p++)o(s,p,n),e.length>t+1&&r(e,t+1,s[p],n);else o(s,a,n),e.length>t+1&&r(e,t+1,s[a],n)}function o(e,t,r){return null===t?(e.__observers=e.__observers||[],!s(e.__observers,r)&&e.__observers.push(r),e):(e[t]||(e[t]={__observers:[]}),!s(e[t].__observers,r)&&e[t].__observers.push(r),e)}function s(e,t){return t?e.reduce(function(e,r){return e||r.__observerId===t.__observerId},!1):void 0}function n(e){return a(i(e))}function a(e){return e.forEach(function(e){e.forEach(function(t,r){var o;Array.isArray(t)&&t.every(p)&&l(t)&&(t.sort(function(e,t){return e-t}),t[t.length-1]-t[0]===t.length-1&&(o={},o.from=t[0],o.to=t[t.length-1],e[r]=o))})}),e}function i(e){if(null==e||"object"!=typeof e)return[[]];var t,r,o,s,n,a,p,l,c,d,h,v,_,g=Object.keys(e).filter(u),y=-1,b=g.length;if(0===b||Array.isArray(e)===!0)return[[]];for(r={};++y<b;)t=g[y],o=i(e[t]),s=f(o),n="string"==typeof t&&!x.test(t),(a=r[s])&&(p=a.head)?p[p.length]=n?parseInt(t,10):t:r[s]={head:[n?parseInt(t,10):t],tail:o};d=[];for(_ in r)for(p=(a=r[_]).head,l=a.tail,y=-1,b=l.length;++y<b;){if(a=l[y],h=-1,v=a.length,""===p[0])c=[];else for(c=[1===p.length?p[0]:p];++h<v;)c[h+1]=a[h];d[d.length]=c}return d}function u(e){return"__observers"!==e&&"__pending"!==e&&"__batchID"!==e}function p(e){return"number"==typeof e}function l(e){var t,r,o={};for(t=0,r=e.length;r>t;t++){if(o[e[t]])return!1;o[e[t]]=!0}return!0}function c(e){return e.reduce(function(e,t){return t instanceof Array?(e.push(c(t).slice(0).sort()),e):e.concat(t)},[]).slice(0).sort()}function f(e){return JSON.stringify(c(e))}var d=e("./../Falcor"),h=d.NOOP,v=function(e,t){this._scheduler=t,this._jsongModel=e,this._scheduled=!1,this._requests=[]};v.prototype={_get:function(){for(var e=-1,t=this._requests;++e<t.length;)if(!t[e].pending&&t[e].isGet)return t[e];return t[t.length]=new y(this._jsongModel,this)},_set:function(){for(var e=-1,t=this._requests;++e<t.length;)if(!t[e].pending&&t[e].isSet)return t[e];return t[t.length]=new g(this._jsongModel,this)},remove:function(e){for(var t=this._requests.length-1;t>-1&&(this._requests[t].id!==e.id||!this._requests.splice(t,1));t--);},set:function(e,t){var r=this,o=r._set().batch(e,t).flush();return{dispose:function(){o.dispose()}}},get:function(e,t,r){var o=this,s=null;return o._get().batch(e,t,r),o._scheduled||(o._scheduled=!0,s=o._scheduler.schedule(o._flush.bind(o))),{dispose:function(){s.dispose()}}},_flush:function(){this._scheduled=!1;for(var e=this._requests,t=-1,r=[];++t<e.length;)e[t].pending||(r[r.length]=e[t].flush());return{dispose:function(){r.forEach(function(e){e.dispose()})}}}};var _=0,g=function(e,t){var r=this;r._jsongModel=e,r._queue=t,r.observers=[],r.jsongEnvs=[],r.pending=!1,r.id=++_,r.isSet=!0};g.prototype={batch:function(e,t){var r=this;return t.onNext=t.onNext||h,t.onError=t.onError||h,t.onCompleted=t.onCompleted||h,t.__observerId||(t.__observerId=++_),t._requestId=r.id,r.observers[r.observers.length]=t,r.jsongEnvs[r.jsongEnvs.length]=e,r},flush:function(){var e,t=this,r=t.jsongEnvs,o=t.observers,s=t._jsongModel;return t.pending=!0,s._dataSource.set(r[0]).subscribe(function(t){e=t},function(e){for(var t=-1,r=o.length;++t<r;)obs=o[t],obs.onError&&obs.onError(e)},function(){var r,s,n;for(t._queue.remove(t),r=-1,s=o.length;++r<s;)n=o[r],n.onNext&&n.onNext({jsong:e.jsong||e.value,paths:e.paths}),n.onCompleted&&n.onCompleted()})}};var y=function(e,t){var r=this;r._jsongModel=e,r._queue=t,r.observers=[],r.optimizedPaths=[],r.requestedPaths=[],r.pending=!1,r.id=++_,r.isGet=!0};y.prototype={batch:function(e,t,r){var o=this;return r.onNext=r.onNext||h,r.onError=r.onError||h,r.onCompleted=r.onCompleted||h,r.__observerId||(r.__observerId=++_),r._requestId=o.id,o.observers[o.observers.length]=r,o.optimizedPaths[o.optimizedPaths.length]=t,o.requestedPaths[o.requestedPaths.length]=e,o},flush:function(){var e,t,s=this,a=s.requestedPaths,i=s.optimizedPaths,u=s.observers,p=s._jsongModel;s._scheduled=!1,s.pending=!0;var l,c,f,d,h,v={},_={};for(f=0,t=a.length;t>f;f++)for(l=a[f],c=i[f],h=u[f],d=0;d<l.length;d++)r(l[d],0,o(_,null,h),h),r(c[d],0,o(v,null,h),h);return p._dataSource.get(n(v)).subscribe(function(t){e=t},function(e){for(var t=-1,r=u.length;++t<r;)h=u[t],h.onError&&h.onError(e)},function(){var t,r,o;for(s._queue.remove(s),t=-1,r=u.length;++t<r;)o=u[t],o.onNext&&o.onNext({jsong:e.jsong||e.value,paths:e.paths}),o.onCompleted&&o.onCompleted()})},contains:function(){}};var x=/\D/i;d.__Internals.buildQueries=i,t.exports=v},{"./../Falcor":3}],34:[function(e,t){(function(r){var o;if("undefined"!=typeof window&&"undefined"!=typeof window.Rx)o=window.Rx;else if("undefined"!=typeof r&&"undefined"!=typeof r.Rx)o=r.Rx;else if("undefined"!=typeof e||"undefined"!=typeof window&&window.require){var s="undefined"!=typeof e&&e||window.require;try{o=s("rx")}catch(n){o=void 0}}void 0===o&&(o={I:function(){return arguments[0]},Disposable:function(){function e(e){this.action=e}return e.create=function(t){return new e(t)},e.empty=new e(function(){}),e.prototype.dispose=function(){"function"==typeof this.action&&this.action()},e}(),Observable:function(){function e(e){this.s=e}return e.create=e.createWithDisposable=function(t){return new e(t)},e.fastCreateWithDisposable=e.create,e.fastReturnValue=function(t){return e.create(function(e){e.onNext(t),e.onCompleted()})},e.prototype.from,e.prototype.materialize,e.prototype.reduce,e.prototype.subscribe=function(e,t,r){return this.s(null!=e&&"object"==typeof e?e:o.Observer.create(e,t,r))},e.prototype.forEach=e.prototype.subscribe,e.prototype.catchException=function(t){var r=this;return e.create(function(e){return r.subscribe(function(t){e.onNext(t)},function(r){return("function"==typeof t?t(r):t).subscribe(e)},function(){e.onCompleted()})})},e}(),Observer:function(){function e(e,t,r){this.onNext=e||o.I,this.onError=t||o.I,this.onCompleted=r||o.I}return e.create=function(t,r,o){return new e(t,r,o)},e}(),Subject:function(){function e(){this.observers=[]}e.prototype.subscribe=function(e){var t=this.observers,r=t.length;return t[r]=e,{dispose:function(){t.splice(r,1)}}},e.prototype.onNext=function(e){for(var t=this.observers.concat(),r=-1,o=t.length;++r<o;)t[r].onNext(e)},e.prototype.onError=function(e){var t=this.observers.concat(),r=-1,o=t.length;for(this.observers.length=0;++r<o;)t[r].onError(e)},e.prototype.onCompleted=function(){var e=this.observers.concat(),t=-1,r=e.length;for(this.observers.length=0;++t<r;)e[t].onCompleted()}}()}),t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,t){function r(){}r.prototype={schedule:function(e){e()}},t.exports=r},{}],36:[function(e,t){function r(e){this.delay=e}r.prototype={schedule:function(e){setTimeout(e,this.delay)}},t.exports=r},{}],37:[function(e,t){function r(e,t,r,o,i,u,p){for(var l,c,f=0;;){if(0===f&&o.__context?(f=i.length,c=o.__context):(l=i[f++],c=r[l]),c){var d=c.$type,h=d&&c.value||c;if(f<i.length){if(d){r=c;break}r=c;continue}if(r=c,d&&a(c))break;if(o.__context||s(o,c),"path"===d){"JSONG"===p&&n(e,c,u,null,null,i,null,p),f=0,i=h,o=c,r=t;continue}break}r=void 0;break}if(f<i.length){for(var v=[],_=0;f>_;_++)v[_]=i[_];i=v}return[r,i]}var o=e("./util/hardlink"),s=o.create,n=e("./onValue"),a=e("./util/isExpired");t.exports=r},{"./onValue":49,"./util/hardlink":51,"./util/isExpired":52}],38:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i,u,p,l,c,f,d={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},h=d.requestedMissingPaths,v=Array.isArray(s[0])||o(s[0])?"Paths":"JSON",_=t._cache,g=t._path,y=0;if(d.values=n,n||(n=[]),g.length){var x=r(t,g);a=x.value,u=i=x.path}else a=_,u=i=[];for(p=0,c=s.length;c>p;p++){var b=void 0,m=s[p];if(n[p]&&(b=n[p]),c>1)for(u=[],l=0,f=i.length;f>l;l++)u[p]=i[p];if(m.path&&(m=m.path),e(t,_,a,m,0,b,[],d,u,[],v,"JSON"),y<h.length){for(l=y,length=h.length;length>l;l++)h[l].pathSetIndex=p;y=length}}return d}}},{"./getBoundValue":42,"./util/isPathValue":54}],39:[function(e,t){var r=(e("./getBoundValue"),e("./util/isPathValue"));t.exports=function(e){return function(t,o,s){var n={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},a=Array.isArray(o[0])||r(o[0])?"Paths":"JSON";n.values=s;var i,u=t._cache,p=t._path;if(p.length)throw"It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.";i=u;for(var l=0,c=o.length;c>l;l++){var f=o[l];f.path&&(f=f.path),e(t,u,i,f,0,s[0],[],n,[],[],a,"JSONG")}return n}}},{"./getBoundValue":42,"./util/isPathValue":54}],40:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},u=Array.isArray(s[0])||o(s[0])?"Paths":"JSON";a=n[0],i.values=n;var p,l,c,f=t._cache,d=t._path;if(d.length){var h=r(t,d);p=h.value,l=c=h.path}else p=f,l=c=[];for(var v=0,_=s.length;_>v;v++){if(_>1)for(l=[],j=0,bLen=c.length;bLen>j;j++)l[v]=c[v];var g=s[v];g.path&&(g=g.path),e(t,f,p,g,0,a,[],i,l,[],u,"PathMap")}return i}}},{"./getBoundValue":42,"./util/isPathValue":54}],41:[function(e,t){var r=e("./getBoundValue"),o=e("./util/isPathValue");t.exports=function(e){return function(t,s,n){var a,i,u,p={values:[],errors:[],requestedPaths:[],optimizedPaths:[],requestedMissingPaths:[],optimizedMissingPaths:[]},l=Array.isArray(s[0])||o(s[0])?"Paths":"JSON",c=t._cache,f=t._path;if(f.length){var d=r(t,f);a=d.value,i=u=d.path}else a=c,i=u=[];for(var h=0,v=s.length;v>h;h++){if(v>1)for(i=[],j=0,bLen=u.length;bLen>j;j++)i[h]=u[h];var _=s[h];_.path&&(_=_.path),e(t,c,a,_,0,n,null,p,i,[],l,"Values")}return p}}},{"./getBoundValue":42,"./util/isPathValue":54}],42:[function(e,t){var r=e("./getValueSync");t.exports=function(e,t){var o,s,n;for(o=e._boxed,e._boxed=!0,s=r(e,t.concat(null)),e._boxed=o,t=s.optimizedPath,n=s.shorted,s=s.value;t.length&&null===t[t.length-1];)t.pop();return{path:t,value:s,shorted:n}}},{"./getValueSync":43}],43:[function(e,t){var r=e("./followReference"),o=e("./util/clone"),s=e("./util/isExpired"),n=e("./util/lru").promote;t.exports=function(e,t){var a,i,u,p,l,c=e._cache,f=t.length,d=[],h=!1,v=!1,_=0,g=c,y=c;do{if(a=t[_++],null!==a&&(g=y[a]),!g){u=void 0,h=!0;break}if(i=g.$type,d.push(a),f>_){if("path"===i){if(p=r(e,c,c,g,g.value),l=p[0],!l){u=void 0;break}i=l.$type,g=l,d=p[1]}if(i)break}else u=g;y=g}while(g&&f>_);if(f>_){for(;f>_;++_)if(null!==t[_]){v=!0;break}v?(h=!0,u=void 0):u=g}if(u&&(s(u)?u=void 0:n(e,u)),u&&"error"===u.$type&&!e._treatErrorsAsValues)throw{path:t,value:u.value};return u&&e._boxed?u=i?o(u):u:!u&&e._materialized?u={$type:"sentinel"}:u&&(u=u.value),{value:u,shorted:h,optimizedPath:d}}},{"./followReference":37,"./util/clone":50,"./util/isExpired":52,"./util/lru":55}],44:[function(e,t){function r(e,t,n,u,p,c,f,v,_,g,y,x,b){if(!(!n||n&&n.$type)||!o(e,n,u,p,c,g,_,f,v,x,b)){var m,P,j,S="JSON"===y,A=!1;if(S?u&&"object"==typeof u?Array.isArray(u)?A=!0:(m=Object.keys(u),1===m.length&&(m=m[0])):A=!0:m=u[p],A||!S&&p===u.length)return l(e)?void i(e,n,c,v,g,_,f,x,b):void a(e,n,u,p,c,v,g,_,f,x);var O={done:!1},$=f,w=g,N=_,k="JSONG"===x,E="JSON"===x,M=!1,z=!1;b=!1,p++;var V;if(m&&"object"==typeof m?(O.isArray=Array.isArray(m),O.arrOffset=0,V=h(m,O),M=!0):(V=m,O.done=!0),E&&M){for($=[],P=0,j=f.length;j>P;P++)$[P]=f[P];$.push(p-1)}do{if(!O.done){for(N=[],w=[],P=0,j=g.length;j>P;P++)w[P]=g[P];for(P=0,j=_.length;j>P;P++)N[P]=_[P]}var q=S?u[V]:u;S&&q&&("object"!=typeof q||Array.isArray(q)||(z=Object.keys(q).length>0));var J;if(null===V||S&&"__null"===V?J=n:(J=n[V],N.push(V),w.push(V)),J){var R=J.$type,G=R&&J.value||J;if((S&&z||!S&&p<u.length)&&R&&"path"===R&&!d(J)){k&&i(e,J,c,v,!1,N,$,x);var I=s(e,t,t,J,G,c,x);b=!0,J=I[0];var C=I[1];for(N=[],P=0,j=C.length;j>P;P++)N[P]=C[P]}}r(e,t,J,q,p,c,$,v,N,w,y,x,b),O.done||(V=h(m,O))}while(!O.done)}}function o(e,t,r,o,s,u,p,h,v,_,g){if(!t)return l(e)?i(e,t,s,v,u,p,h,_,g):a(e,t,r,o,s,v,u,p,h,_),!0;var y=t.$type;return h=h||[],"error"===y?(g&&u.push(null),"JSONG"===_||e._treatErrorsAsValues?i(e,t,s,v,u,p,h,_,g):n(e,t,u,p,v)):d(t)?(t.__invalidated||(f(e,t),c(t)),a(e,t,r,o,s,v,u,p,h,_)):i(e,t,s,v,u,p,h,_,g),!0}var s=e("./followReference"),n=e("./onError"),a=e("./onMissing"),i=e("./onValue"),u=e("./util/lru"),p=e("./util/hardlink"),l=e("./util/isMaterialzed"),c=p.remove,f=u.splice,d=e("./util/isExpired"),h=e("./util/permuteKey");t.exports=r},{"./followReference":37,"./onError":47,"./onMissing":48,"./onValue":49,"./util/hardlink":51,"./util/isExpired":52,"./util/isMaterialzed":53,"./util/lru":55,"./util/permuteKey":56}],45:[function(e,t){var r=e("./getWalk");t.exports={getAsJSON:e("./getAsJSON")(r),getAsJSONG:e("./getAsJSONG")(r),getAsValues:e("./getAsValues")(r),getAsPathMap:e("./getAsPathMap")(r),getValueSync:e("./getValueSync"),getBoundValue:e("./getBoundValue"),setCache:e("./legacy_setCache")}},{"./getAsJSON":38,"./getAsJSONG":39,"./getAsPathMap":40,"./getAsValues":41,"./getBoundValue":42,"./getValueSync":43,"./getWalk":44,"./legacy_setCache":46}],46:[function(e,t){var r=0,o=0,s="__reference_container",n="__context",a="__generation",i="__generation_updated",u="__invalidated",p="__key",l="__null",c="./",f="../",d="__ref",h="__ref_index",v="__refs_length",_="/",g="$type",y="$size",x="$expires",b="sentinel",m="error",P="value";t.exports=function(e,t){var j,S,A,O,$=e._root,w=$.expired,N=0,k=0,E=[],M=[],z=e._cache,V=z,q=V;for(E[0]=t,M[-1]=V;N>-1;){var J=!1,R=0,G=void 0,I=void 0,C=void 0,T=!1;q=V=M[N-1],N=N;e:for(;;){if(k=N,j=q&&q[g]||void 0,S=j===b?q[P]:q,(J=!(null!=(t=E[R=4*N])&&"object"==typeof t)||void 0!==t[g]||Array.isArray(t)||!((G=E[R+1]||(E[R+1]=Object.keys(t)))&&((T=G.length>1)||G.length>0)))||null==q||void 0!==j||"object"!=typeof q||Array.isArray(S)){if(((O=null!=(q&&q[x]))&&1!==O&&(0===O||O<now())||null!=q&&q[u]===!0)&&(j=void 0,S=void 0,q=(w[w.length]=q)&&(q[u]=!0)&&void 0),J||j&&j!==b||!Array.isArray(S)){if(null!=C){var F,D,B=q&&q[y]||0;if(j=t&&t[g]||void 0,nV2=j?t[P]:void 0,S=j===b?t[P]:t,F=t,j&&j!==b&&"path"!==j||!Array.isArray(S)?j===b||"path"===j?F[y]=A=50+(nV2&&"number"==typeof nV2.length?nV2.length:1):j===m?F[y]=A=t&&t[y]||0||51:null==t||"object"!=typeof t?(A=50+("string"==typeof S&&S.length||1),j="sentinel",F={},F[P]=S,F[g]=j,F[y]=A):(j=F[g]=j||GROUP,F[y]=A=t&&t[y]||0||51):(delete S[y],A=j?50+(S.length||1):S.length||1,F[y]=A,S[s]=F),q!==F&&null!=q&&"object"==typeof q){for(var L,X=q[v]||0,Y=F[v]||0,K=-1;++K<X;)void 0!==(L=q[d+K])&&(L[n]=F,F[d+(Y+K)]=L,q[d+K]=void 0);F[v]=X+Y,q[v]=L=void 0;for(var U,W,Q,H,Z,et,tt=V,rt=q,ot=C,st=[V,ot,q],nt=0;nt>-1;){if(V=st[Q=8*nt],ot=st[Q+1],q=st[Q+2],(void 0===(H=st[Q+3])||(H=void 0))&&(H=st[Q+3]=q&&q[g]||void 0||null),Z=st[Q+4]||(st[Q+4]=H===b?q[P]:q),void 0===(et=st[Q+5])&&(et=st[Q+5]=!H&&null!=q&&"object"==typeof q&&!Array.isArray(Z)),et===!0){if(void 0===(U=st[Q+6])){U=st[Q+6]=[],W=-1;for(var at in q)!("_"===at[0]&&"_"===at[1]||at===c||at===f||at===_||"$"===at[0])&&(U[++W]=at)}if(W=st[Q+7]||(st[Q+7]=0),W<U.length){st[Q+7]=W+1,st[Q=8*++nt]=q,st[Q+1]=ot=U[W],st[Q+2]=q[ot];continue}}var it,ut=q[g]===b?q[P]:q;if(ut&&Array.isArray(ut)&&(it=ut[n])){for(var pt=(ut[h]||0)-1,lt=(it[v]||0)-1;++pt<=lt;)it[d+pt]=it[d+(pt+1)];it[v]=lt,ut[h]=ut[n]=it=void 0}if(null!=q&&"object"==typeof q){for(var ct,ft=-1,dt=q[v]||0;++ft<dt;)void 0!==(ct=q[d+ft])&&(ct[n]=q[d+ft]=void 0);q[v]=void 0;var ht=$,vt=ht.__head,_t=ht.__tail,gt=q.__next,yt=q.__prev;null!=gt&&"object"==typeof gt&&(gt.__prev=yt),null!=yt&&"object"==typeof yt&&(yt.__next=gt),q===vt&&(ht.__head=ht.__next=gt),q===_t&&(ht.__tail=ht.__prev=yt),q.__next=q.__prev=void 0,vt=_t=gt=yt=void 0,V[ot]=q[c]=q[f]=q[_]=void 0}delete st[Q+0],delete st[Q+1],delete st[Q+2],delete st[Q+3],delete st[Q+4],delete st[Q+5],delete st[Q+6],delete st[Q+7],--nt}V=tt,q=rt}V[C]=q=F,j=q&&q[g]||void 0,q=!((q[c]||!(q[a]||(q[a]=++r)&&q)||j&&j!==b||!Array.isArray(S)||!(S[s]=q))&&!q),D=B-A;
for(var xt=V,bt=q;q=V;)if(V=q[f],(q[y]=(q[y]||0)-D)<=0&&V){var mt,Pt=q[g]===b?q[P]:q;if(Pt&&Array.isArray(Pt)&&(mt=Pt[n])){for(var jt=(Pt[h]||0)-1,St=(mt[v]||0)-1;++jt<=St;)mt[d+jt]=mt[d+(jt+1)];mt[v]=St,Pt[h]=Pt[n]=mt=void 0}if(null!=q&&"object"==typeof q){for(var At,Ot=-1,$t=q[v]||0;++Ot<$t;)void 0!==(At=q[d+Ot])&&(At[n]=q[d+Ot]=void 0);q[v]=void 0;var wt=$,Nt=wt.__head,kt=wt.__tail,Et=q.__next,Mt=q.__prev;null!=Et&&"object"==typeof Et&&(Et.__prev=Mt),null!=Mt&&"object"==typeof Mt&&(Mt.__next=Et),q===Nt&&(wt.__head=wt.__next=Et),q===kt&&(wt.__tail=wt.__prev=Mt),q.__next=q.__prev=void 0,Nt=kt=Et=Mt=void 0,V[q[p]]=q[c]=q[f]=q[_]=void 0}}else if(q[i]!==o){for(var zt,Vt,qt,Jt,Rt,Gt=q,It=[],Ct=0;Ct>-1;){if(void 0===(zt=It[Ct]))for(qt=Jt=-1,Rt=q[v]||0,q[i]=o,q[a]=++r,void 0!==(Vt=q[f])&&Vt[i]!==o?(It[Ct]=zt=new Array(Rt+1),zt[++Jt]=Vt):Rt>0&&(It[Ct]=zt=new Array(Rt));++qt<Rt;)void 0!==(Vt=q[d+qt])&&Vt[i]!==o&&(zt[++Jt]=Vt);void 0!==(q=zt&&zt.pop())?++Ct:It[Ct--]=void 0}q=Gt}V=xt,q=bt}q=q;break e}if(null==q||void 0!==j||"object"!=typeof q||Array.isArray(S)){C=null,q=q,N=N;continue e}}if(null==(C=G[I])){q=q;break e}if(C===l||("_"!==C[0]||"_"!==C[1])&&C!==c&&C!==f&&C!==_&&"$"!==C[0]){if(E[4*(N+1)+3]=C,M[N-1]=V=q,null!=C){if(q=V&&V[C],"object"==typeof t){for(var Tt in t)"$"===Tt[0]&&Tt!==y&&(V&&(V[Tt]=t[Tt])||!0);t=t[C]}var Ft=t&&t[g]||void 0,Dt=Ft===b?t[P]:t;if((null==q||"object"!=typeof q||j&&j!==b&&!Array.isArray(S))&&!Ft&&null!=t&&"object"==typeof t&&!Array.isArray(Dt)){if(j=void 0,S={},A=q&&q[y]||0,q!==S&&null!=q&&"object"==typeof q){for(var Bt,Lt=q[v]||0,Xt=S[v]||0,Yt=-1;++Yt<Lt;)void 0!==(Bt=q[d+Yt])&&(Bt[n]=S,S[d+(Xt+Yt)]=Bt,q[d+Yt]=void 0);S[v]=Lt+Xt,q[v]=Bt=void 0;for(var Kt,Ut,Wt,Qt,Ht,Zt,er=V,tr=q,rr=C,or=[V,rr,q],sr=0;sr>-1;){if(V=or[Wt=8*sr],rr=or[Wt+1],q=or[Wt+2],(void 0===(Qt=or[Wt+3])||(Qt=void 0))&&(Qt=or[Wt+3]=q&&q[g]||void 0||null),Ht=or[Wt+4]||(or[Wt+4]=Qt===b?q[P]:q),void 0===(Zt=or[Wt+5])&&(Zt=or[Wt+5]=!Qt&&null!=q&&"object"==typeof q&&!Array.isArray(Ht)),Zt===!0){if(void 0===(Kt=or[Wt+6])){Kt=or[Wt+6]=[],Ut=-1;for(var nr in q)!("_"===nr[0]&&"_"===nr[1]||nr===c||nr===f||nr===_||"$"===nr[0])&&(Kt[++Ut]=nr)}if(Ut=or[Wt+7]||(or[Wt+7]=0),Ut<Kt.length){or[Wt+7]=Ut+1,or[Wt=8*++sr]=q,or[Wt+1]=rr=Kt[Ut],or[Wt+2]=q[rr];continue}}var ar,ir=q[g]===b?q[P]:q;if(ir&&Array.isArray(ir)&&(ar=ir[n])){for(var ur=(ir[h]||0)-1,pr=(ar[v]||0)-1;++ur<=pr;)ar[d+ur]=ar[d+(ur+1)];ar[v]=pr,ir[h]=ir[n]=ar=void 0}if(null!=q&&"object"==typeof q){for(var lr,cr=-1,fr=q[v]||0;++cr<fr;)void 0!==(lr=q[d+cr])&&(lr[n]=q[d+cr]=void 0);q[v]=void 0;var dr=$,hr=dr.__head,vr=dr.__tail,_r=q.__next,gr=q.__prev;null!=_r&&"object"==typeof _r&&(_r.__prev=gr),null!=gr&&"object"==typeof gr&&(gr.__next=_r),q===hr&&(dr.__head=dr.__next=_r),q===vr&&(dr.__tail=dr.__prev=gr),q.__next=q.__prev=void 0,hr=vr=_r=gr=void 0,V[rr]=q[c]=q[f]=q[_]=void 0}delete or[Wt+0],delete or[Wt+1],delete or[Wt+2],delete or[Wt+3],delete or[Wt+4],delete or[Wt+5],delete or[Wt+6],delete or[Wt+7],--sr}V=er,q=tr}V[C]=q=S,q=!((q[c]||!(q[a]||(q[a]=++r)&&q)||j&&j!==b||!Array.isArray(S)||!(S[s]=q))&&!q);for(var yr,xr=q;yr=q;){if(q[i]!==o){for(var br,mr,Pr,jr,Sr,Ar=q,Or=[],$r=0;$r>-1;){if(void 0===(br=Or[$r]))for(Pr=jr=-1,Sr=q[v]||0,q[i]=o,q[a]=++r,void 0!==(mr=q[f])&&mr[i]!==o?(Or[$r]=br=new Array(Sr+1),br[++jr]=mr):Sr>0&&(Or[$r]=br=new Array(Sr));++Pr<Sr;)void 0!==(mr=q[d+Pr])&&mr[i]!==o&&(br[++jr]=mr);void 0!==(q=br&&br.pop())?++$r:Or[$r--]=void 0}q=Ar}q=yr[f]}q=xr}}q=q,N+=1}else E[R+2]=I+1,q=q,N=N}q=q;var wr,Nr,kr=4*N;do delete E[kr+0],delete E[kr+1],delete E[kr+2],delete E[kr+3];while((wr=E[(kr=4*--N)+1])&&(E[kr+2]=++Nr)>=wr.length)}return z}},{}],47:[function(e,t){var r=e("./util/lru"),o=(e("./util/clone"),r.promote);t.exports=function(e,t,r,s,n){n.errors.push({path:r,value:t.value}),o(e,t),s&&(n.requestedPaths.push(r),n.optimizedPaths.push(s))}},{"./util/clone":50,"./util/lru":55}],48:[function(e,t){function r(e,t,r,o,a,i,u){var p,l=0;if(u)for(l=0,p=e.length;p>l;l++)"__null"===e[l]&&(e[l]=null);if("JSON"===i){for(r=s(r,e),l=0,p=a.length;p>l;l++){var c=a[l],f=r[c];r[c]=[f]}t.requestedMissingPaths.push(r),t.optimizedMissingPaths.push(n(o,e))}else t.requestedMissingPaths.push(s(r,e)),t.optimizedMissingPaths.push(n(o,e))}{var o=e("./util/support"),s=o.fastCat,n=o.fastCatSkipNulls,a=o.fastCopy,i=(e("./util/isExpired"),e("./util/spreadJSON"));e("./util/clone")}t.exports=function(e,t,o,s,n,u,p,l,c,f){var d;if(Array.isArray(o))d=s<o.length?a(o,s):[],r(d,u,p,l,c,f);else{d=[],i(o,d);for(var h=0,v=d.length;v>h;h++)r(d[h],u,p,l,c,f,!0)}}},{"./util/clone":50,"./util/isExpired":52,"./util/spreadJSON":57,"./util/support":58}],49:[function(e,t){var r=e("./util/lru"),o=e("./util/clone"),s=r.promote,n={$type:"sentinel"};t.exports=function(e,t,r,a,i,u,p,l,c){var f,d,h,v,_,g,y,x,b=!1;switch(t&&s(e,t),t&&void 0!==t.value||(b=e._materialized),x=b?n:e._boxed?o(t):"path"===t.$type||"error"===t.$type?"JSONG"===l?o(t):t.value:"JSONG"===l&&"object"==typeof t.value?o(t):t.value,i&&(c&&null!==i[i.length-1]&&i.push(null),a.requestedPaths.push(i),a.optimizedPaths.push(u)),l){case"Values":r({path:i,value:x});break;case"PathMap":if(d=i.length-1,-1===d)r.json=x;else{for(_=r.json,_||(_=r.json={}),f=0;d>f;f++)h=i[f],_[h]||(_[h]={}),g=_,y=h,_=_[h];h=i[f],null!==h?_[h]=x:g[y]=x}break;case"JSON":if(r)if(p.length){for(r.json||(r.json={}),_=r.json,f=0,d=p.length-1;d>f;f++)h=p[f],v=i[h],_[v]||(_[v]={}),_=_[v];h=p[f],v=i[h],_[v]=x}else r.json=x;break;case"JSONG":for(_=r.jsong,_||(_=r.jsong={},r.paths=[]),f=0,d=u.length-1;d>f;f++)v=u[f],_[v]||(_[v]={}),_=_[v];v=u[f],_[v]=b?n:x,i&&r.paths.push(i)}}},{"./util/clone":50,"./util/lru":55}],50:[function(e,t){t.exports=function(e){var t,r,o,s=Object.keys(e);for(t={},r=0,o=s.length;o>r;r++){var n=s[r];0!==n.indexOf("__")&&"/"!==n&&"./"!==n&&"../"!==n&&(t[n]=e[n])}return t}},{}],51:[function(e,t){function r(e,t){var r=t.__refs_length||0;t["__ref"+r]=e,t.__refs_length=r+1,e.__ref_index=r,e.__context=t}function o(e){var t=e.__context;if(t){for(var r=e.__ref_index,o=t.__refs_length;o>r;)t["__ref"+r]=t[__REF+r+1],++r;t.__refs_length=o-1,e.__context=void 0,e.__ref_index=void 0}}t.exports={create:r,remove:o}},{}],52:[function(e,t){var r=e("../../support/now");t.exports=function(e){var t=void 0===e.$expires&&-1||e.$expires;return-1!==t&&1!==t&&(0===t||t<r())}},{"../../support/now":98}],53:[function(e,t){t.exports=function(e){return e._materialized&&!(e._router||e._dataSource)}},{}],54:[function(e,t){t.exports=function(e){return e.path&&e.value}},{}],55:[function(e,t){function r(e,t){var r=e._root,o=r.__head;if(o!==t){if(!o)return void(r.__head=t);if(!r.__tail)return r.__head=t,r.__tail=o,t.__next=o,void(o.__prev=t);var s=t.__prev,n=t.__next;n&&(n.__prev=s),s&&(s.__next=n),t.__prev=void 0,r.__head=t,t.__next=o,o.__prev=t}}function o(e,t){var r=e._root,o=t.__prev,s=t.__next;s&&(s.__prev=o),o&&(o.__next=s),t.__prev=void 0,t===r.__head&&(r.__head=void 0),t===r.__tail&&(r.__tail=void 0),t.__invalidated=!0,r.expired.push(t)}t.exports={promote:r,splice:o}},{}],56:[function(e,t){t.exports=function(e,t){if(t.isArray){t.loaded&&t.rangeOffset>t.to&&(t.arrOffset++,t.loaded=!1);var r=t.arrOffset;if(r===e.length)return t.done=!0,"";var o=e[t.arrOffset],s=typeof o;return"object"===s?(t.loaded||(t.from=o.from||0,t.to=o.to||o.length&&t.from+o.length-1||0,t.rangeOffset=t.from,t.loaded=!0),t.rangeOffset++):(t.arrOffset++,o)}return t.loaded||(t.from=e.from||0,t.to=e.to||e.length&&t.from+e.length-1||0,t.rangeOffset=t.from,t.loaded=!0),t.rangeOffset>t.to?(t.done=!0,""):t.rangeOffset++}},{}],57:[function(e,t){var r=e("./support").fastCopy;t.exports=function o(e,t,s){if(s=s||[],t.length||t.push(s),null==e||"object"!=typeof e)return[];var n=Object.keys(e);if(1===n.length)s.push(n[0]),o(e[n[0]],t,s);else for(var a=0,i=n.length;i>a;a++){var u=n[a],p=r(s);p.push(u),t.push(p),o(e[u],t,p)}}},{"./support":58}],58:[function(e,t){function r(e,t){var r,o,s=[];for(o=0,t=t||0,r=e.length;r>t;o++,t++)s[o]=e[t];return s}function o(e,t){var r,o,s,n=[];for(r=0,o=e.length;o>r;r++)n[r]=e[r];for(s=0,o=t.length;o>s;s++)null!==t[s]&&(n[r++]=t[s]);return n}function s(e,t){var r,o,s,n=[];for(r=0,o=e.length;o>r;r++)n[r]=e[r];for(s=0,o=t.length;o>s;s++)n[r++]=t[s];return n}t.exports={fastCat:s,fastCatSkipNulls:o,fastCopy:r}},{}],59:[function(e,t){t.exports={invPathSetsAsJSON:e("./invalidate-path-sets-as-json-dense"),invPathSetsAsJSONG:e("./invalidate-path-sets-as-json-graph"),invPathSetsAsPathMap:e("./invalidate-path-sets-as-json-sparse"),invPathSetsAsValues:e("./invalidate-path-sets-as-json-values")}},{"./invalidate-path-sets-as-json-dense":60,"./invalidate-path-sets-as-json-graph":61,"./invalidate-path-sets-as-json-sparse":62,"./invalidate-path-sets-as-json-values":63}],60:[function(e,t){function r(e,t,r){var n,i=u([],e),c=-1,f=t.length,d=i.nodes,v=a(d),_=[],g=[];for(i[0]=i.root;++c<f;){n=r&&r[c],i[3]=v[3]=d[3]=l(n)?n.json||(n.json={}):void 0;var y=t[c];i.index=c,p(o,s,y,i,v,d,_,g),l(n)&&(n.json=i.json),delete i.json}return h(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:i.errors,hasValue:!0,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u,p,h){var v,_;if(null==u){if(null==(u=c(a)))return;_=r[3],v=r[0]}else _=h&&o[3]||r[3],v=o[0];var g=v[u];if(!i)return r[0]=v,void(o[0]=g);if(e.length>1)return r[0]=o[0]=g,void(h&&(r[3]=_)&&(o[3]=_[p]||(_[p]={})));if(o[0]=g,_){var y=l(g)&&g.$type||void 0,x=p;null==x&&(_=t,x=3),_[x]=n(t,g,y,g&&g.value)}var b=t.lru,m=g.$size||0,P=t.version;d(v,g,u,t.lru),f(v,m,P,b)}function s(e,t,r,o,s){t.json=t[3],t.hasValue=!0,t.requestedPaths.push(i(s,t.offset))}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/update-graph"),d=e("../support/invalidate-node"),h=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/array-slice":78,"../support/clone-dense-json":79,"../support/get-valid-key":88,"../support/invalidate-node":92,"../support/is-object":94,"../support/options":99,"../support/update-graph":108,"../walk/walk-path-set":116}],61:[function(e,t){function r(e,t,r){var n=u([],e),a=-1,l=t.length,c=n.nodes,f=i(c),d=[],h=[],_=r[0];for(n[0]=n.root,n[1]=f[1]=c[1]=_.jsong||(_.jsong={}),n.requestedPaths=_.paths||(_.paths=n.requestedPaths);++a<l;){var g=t[a];p(o,s,g,n,f,c,d,h)}return v(n.lru,n.expired,n.version,n.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:n.errors,hasValue:!0,requestedPaths:n.requestedPaths,optimizedPaths:n.optimizedPaths,requestedMissingPaths:n.requestedMissingPaths,optimizedMissingPaths:n.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var h,v;if(null==p){if(null==(p=c(i)))return;v=r[1],h=r[0]}else v=o[1],h=o[0];var _=p,g=h[p];if(!u)return r[0]=h,o[0]=g,r[1]=v,void(o[1]=v[_]||(v[_]={}));var y=l(g)&&g.$type||void 0;if(e.length>1)return r[0]=o[0]=g,r[1]=v,void(y==n?v[_]=a(t,g,y,g.value):o[1]=v[_]||(v[_]={}));o[0]=g,v[_]=a(t,g,y,g&&g.value);var x=t.lru,b=g.$size||0,m=t.version;d(h,g,p,t.lru),f(h,b,m,x)}function s(e,t,r,o,s,n){h(t,s,n),t.json=t[1],t.hasValue=!0}t.exports=r;var n=e("../types/$path"),a=e("../support/clone-dense-json"),i=e("../support/array-clone"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/update-graph"),d=e("../support/invalidate-node"),h=e("../support/clone-success-paths"),v=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/clone-dense-json":79,"../support/clone-success-paths":84,"../support/get-valid-key":88,"../support/invalidate-node":92,"../support/is-object":94,"../support/options":99,"../support/update-graph":108,"../types/$path":111,"../walk/walk-path-set-soft-link":115}],62:[function(e,t){function r(e,t,r){var n=u([],e),i=-1,l=t.length,c=n.nodes,f=a(c),d=[],v=[],_=r[0];for(n[0]=n.root,n[3]=f[3]=c[3]=_.json||(_.json={});++i<l;){var g=t[i];p(o,s,g,n,f,c,d,v)}return h(n.lru,n.expired,n.version,n.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:n.errors,hasValue:!0,requestedPaths:n.requestedPaths,optimizedPaths:n.optimizedPaths,requestedMissingPaths:n.requestedMissingPaths,optimizedMissingPaths:n.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u){var p,h,v;if(null==u){if(null==(u=c(a)))return;v=c(s),h=r[3],p=r[0]}else v=u,h=o[3],p=o[0];var _=p[u];if(!i)return r[0]=p,void(o[0]=_);if(e.length>1)return r[0]=o[0]=_,r[3]=h,void(o[3]=h[v]||(h[v]={}));o[0]=_;var g=l(_)&&_.$type||void 0;h[v]=n(t,_,g,_&&_.value);var y=t.lru,x=_.$size||0,b=t.version;d(p,_,u,t.lru),f(p,x,b,y)}function s(e,t,r,o,s){t.json=t[3],t.hasValue=!0,t.requestedPaths.push(i(s,t.offset))}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/update-graph"),d=e("../support/invalidate-node"),h=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/array-slice":78,"../support/clone-dense-json":79,"../support/get-valid-key":88,"../support/invalidate-node":92,"../support/is-object":94,"../support/options":99,"../support/update-graph":108,"../walk/walk-path-set":116}],63:[function(e,t){function r(e,t,r){var n=u([],e),i=-1,l=t.length,c=n.nodes,f=a(c),d=[],v=[];for(n[0]=n.root,n.onNext=r;++i<l;){var _=t[i];p(o,s,_,n,f,c,d,v)}return h(n.lru,n.expired,n.version,n.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:n.errors,requestedPaths:n.requestedPaths,optimizedPaths:n.optimizedPaths,requestedMissingPaths:n.requestedMissingPaths,optimizedMissingPaths:n.optimizedMissingPaths}}function o(e,t,r,o,s,n,a,i){var u;if(null==i){if(null==(i=c(n)))return;u=r[0]}else u=o[0];var p=u[i];if(!a)return r[0]=u,void(o[0]=p);if(e.length>1)return void(r[0]=o[0]=p);o[0]=p;var l=t.lru,h=p.$size||0,v=t.version;d(u,p,i,t.lru),f(u,h,v,l)}function s(e,t,r,o,s){var u=o[0],p=l(u)&&u.$type||void 0,c=t.onNext;p&&c&&c({path:a(s),value:n(t,u,p,u&&u.value)}),t.requestedPaths.push(i(s,t.offset))}t.exports=r;var n=e("../support/clone-dense-json"),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/update-graph"),d=e("../support/invalidate-node"),h=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/array-slice":78,"../support/clone-dense-json":79,"../support/get-valid-key":88,"../support/invalidate-node":92,"../support/is-object":94,"../support/options":99,"../support/update-graph":108,"../walk/walk-path-set":116}],64:[function(e,t){var r=e("../support/update-graph");t.exports=function(e,t,o,s,n,a){for(var i,u,p=n*a;i=t.pop();)u=i.$size||0,s-=u,r(i,u,o,e);if(s>=n){for(var l=e.__tail;s>=p&&(i=l);)l=l.__prev,u=i.$size||0,s-=u,r(i,u,o,e);null==(e.__tail=e.__prev=l)?e.__head=e.__next=void 0:l.__next=void 0}}},{"../support/update-graph":108}],65:[function(e,t){var r=1,o=e("../support/is-object");t.exports=function(e,t){if(o(t)&&t.$expires!==r){var s=e.__head,n=e.__tail,a=t.__next,i=t.__prev;t!==s&&(null!=a&&"object"==typeof a&&(a.__prev=i),null!=i&&"object"==typeof i&&(i.__next=a),(a=s)&&null!=s&&"object"==typeof s&&(s.__prev=t),e.__head=e.__next=s=t,s.__next=a,s.__prev=void 0),(null==n||t===n)&&(e.__tail=e.__prev=n=i||t)}return t}},{"../support/is-object":94}],66:[function(e,t){t.exports=function(e,t){var r=e.__head,o=e.__tail,s=t.__next,n=t.__prev;null!=s&&"object"==typeof s&&(s.__prev=n),null!=n&&"object"==typeof n&&(n.__next=s),t===r&&(e.__head=e.__next=s),t===o&&(e.__tail=e.__prev=n),t.__next=t.__prev=void 0,r=o=s=n=void 0}},{}],67:[function(e,t){t.exports={setPathSetsAsJSON:e("./set-json-values-as-json-dense"),setPathSetsAsJSONG:e("./set-json-values-as-json-graph"),setPathSetsAsPathMap:e("./set-json-values-as-json-sparse"),setPathSetsAsValues:e("./set-json-values-as-json-values"),setJSONGsAsJSON:e("./set-json-graph-as-json-dense"),setJSONGsAsJSONG:e("./set-json-graph-as-json-graph"),setJSONGsAsPathMap:e("./set-json-graph-as-json-sparse"),setJSONGsAsValues:e("./set-json-graph-as-json-values")}},{"./set-json-graph-as-json-dense":68,"./set-json-graph-as-json-graph":69,"./set-json-graph-as-json-sparse":70,"./set-json-graph-as-json-values":71,"./set-json-values-as-json-dense":72,"./set-json-values-as-json-graph":73,"./set-json-values-as-json-sparse":74,"./set-json-values-as-json-values":75}],68:[function(e,t){function r(e,t,r,n){var l=[];l.offset=e._path.length,l.bound=[],l=i(l,e,n);var c,f,d,h=-1,_=-1,g=t.length,y=l.nodes,x=a(y),b=[],m=[];for(l[0]=l.root;++h<g;){var P=t[h],j=P.paths,S=P.jsong||P.values||P.value,A=-1,O=j.length;for(l[2]=S,y[2]=S;++A<O;){c=r&&r[++_],l.json=l[3]=x[3]=y[3]=p(c)?c.json||(c.json={}):void 0;var $=j[A];l.index=A,u(o,s,$,l,x,y,b,m),f=l.hasValue,f?(d=!0,p(c)&&(c.json=l.json),delete l.json,delete l.hasValue):p(c)&&delete c.json}}return v(l.lru,l.expired,l.version,l.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:l.errors,requestedPaths:l.requestedPaths,optimizedPaths:l.optimizedPaths,requestedMissingPaths:l.requestedMissingPaths,optimizedMissingPaths:l.optimizedMissingPaths}}function o(e,t,r,o,s,a,i,u,f,d){var h,v,_;if(null==u){if(null==(u=l(a)))return;_=r[3],h=r[0],v=r[2]}else _=d&&o[3]||r[3],h=o[0],v=o[2];var g=h[u],y=v&&v[u];if(o[2]=y,o[0]=g=c(t,h,g,v,y,u),!i)return r[0]=h,void(r[2]=v);var x=s.length,b=t.offset;if(e.length>1)return r[0]=g,r[2]=y,void(x>b&&d&&(r[3]=_)&&(o[3]=_[f]||(_[f]={})));if(_&&null!=f){var m=p(g)&&g.$type||void 0;_[f]=n(t,g,m,g&&g.value)}}function s(e,t,r,o,s,a,i,u){var l=o[0],c=p(l)&&l.$type||(l=void 0);f(t,l,c,e,s,a)===!1&&(h(t,s,a),d(t,l,c,s)===!1&&(null==u&&(t.json=n(t,l,c,l&&l.value)),t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../support/clone-dense-json")),a=e("../support/array-clone"),i=e("../support/options"),u=e("../walk/walk-path-set-soft-link"),p=e("../support/is-object"),l=e("../support/get-valid-key"),c=e("../support/merge-node"),f=e("../support/treat-node-as-miss"),d=e("../support/treat-node-as-error"),h=e("../support/clone-success-paths"),v=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/clone-dense-json":79,"../support/clone-success-paths":84,"../support/get-valid-key":88,"../support/is-object":94,"../support/merge-node":97,"../support/options":99,"../support/treat-node-as-error":104,"../support/treat-node-as-miss":105,"../types/$path":111,"../walk/walk-path-set-soft-link":115}],69:[function(e,t){function r(e,t,r,n){var a=[];a.offset=0,a.bound=[],a=u(a,e,n);var l,c=-1,f=t.length,d=a.nodes,h=i(d),v=[],g=[],y=r[0];for(a[0]=a.root,a[1]=h[1]=d[1]=y.jsong||(y.jsong={}),a.requestedPaths=y.paths||(y.paths=a.requestedPaths);++c<f;){var x=t[c],b=x.paths,m=x.jsong||x.values||x.value,P=-1,j=b.length;for(a[2]=m,d[2]=m;++P<j;){var S=b[P];p(o,s,S,a,h,d,v,g)}}return l=a.hasValue,l?y.jsong=a[1]:(delete y.jsong,delete y.paths),_(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var d,h,v,_;if(null==p){if(null==(p=c(i)))return;v=r[1],d=r[0],h=r[2]}else v=o[1],d=o[0],h=o[2];var _=p,g=d[p],y=h&&h[p];if(o[2]=y,o[0]=g=f(t,d,g,h,y,p),!u)return r[0]=d,r[2]=h,r[1]=v,void(o[1]=v[_]||(v[_]={}));var x=l(g)&&g.$type||void 0;return e.length>1?(r[0]=g,r[2]=y,r[1]=v,void(x==n?(v[_]=a(t,g,x,g.value),t.hasValue=!0):o[1]=v[_]||(v[_]={}))):(v[_]=a(t,g,x,g&&g.value),void(t.hasValue=!0))}function s(e,t,r,o,s,n,i,u){var p,f=o[0],_=l(f)&&f.$type||(f=void 0);d(t,f,_,e,s,n)===!1&&(h(t,s,n),v(t.lru,f),null!=u||t.hasValue||null!=(u=c(n))||(f=a(t,f,_,f&&f.value),p=t[1],p.$type=f.$type,p.value=f.value),t.hasValue=!0)}t.exports=r;var n=e("../types/$path"),a=e("../support/clone-graph-json"),i=e("../support/array-clone"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),d=e("../support/treat-node-as-miss"),h=(e("../support/treat-node-as-error"),e("../support/clone-success-paths")),v=e("../lru/promote"),_=e("../lru/collect")},{"../lru/collect":64,"../lru/promote":65,"../support/array-clone":77,"../support/clone-graph-json":80,"../support/clone-success-paths":84,"../support/get-valid-key":88,"../support/is-object":94,"../support/merge-node":97,"../support/options":99,"../support/treat-node-as-error":104,"../support/treat-node-as-miss":105,"../types/$path":111,"../walk/walk-path-set-soft-link":115}],70:[function(e,t){function r(e,t,r,n){var a=[];a.offset=e._path.length,a.bound=[],a=u(a,e,n);var l,c=-1,f=t.length,d=a.nodes,h=i(d),v=[],g=[],y=r[0];for(a[0]=a.root,a[3]=h[3]=d[3]=y.json||(y.json={});++c<f;){var x=t[c],b=x.paths,m=x.jsong||x.values||x.value,P=-1,j=b.length;for(a[2]=m,d[2]=m;++P<j;){var S=b[P];p(o,s,S,a,h,d,v,g)}}return l=a.hasValue,l?y.json=a[3]:delete y.json,_(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var d,h,v,_;if(null==p){if(null==(p=c(i)))return;_=c(s),v=r[3],d=r[0],h=r[2]}else _=p,v=o[3],d=o[0],h=o[2];var g=d[p],y=h&&h[p];if(o[2]=y,o[0]=g=f(t,d,g,h,y,p),!u)return r[0]=d,void(r[2]=h);var x=s.length,b=t.offset,m=l(g)&&g.$type||void 0;return e.length>1?(r[0]=g,r[2]=y,void(x>b&&(!m||m==n)&&(r[3]=v,o[3]=v[_]||(v[_]={})))):void(v[_]=a(t,g,m,g&&g.value))}function s(e,t,r,o,s,n,i,u){var p,f=o[0],_=l(f)&&f.$type||(f=void 0);d(t,f,_,e,s,n)===!1&&(v(t,s,n),h(t,f,_,s)===!1&&(null!=u||t.hasValue||null!=(u=c(n))||(f=a(t,f,_,f&&f.value),p=t[3],p.$type=f.$type,p.value=f.value),t.hasValue=!0))}t.exports=r;var n=e("../types/$path"),a=e("../support/clone-dense-json"),i=e("../support/array-clone"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),d=e("../support/treat-node-as-miss"),h=e("../support/treat-node-as-error"),v=e("../support/clone-success-paths"),_=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/clone-dense-json":79,"../support/clone-success-paths":84,"../support/get-valid-key":88,"../support/is-object":94,"../support/merge-node":97,"../support/options":99,"../support/treat-node-as-error":104,"../support/treat-node-as-miss":105,"../types/$path":111,"../walk/walk-path-set-soft-link":115}],71:[function(e,t){function r(e,t,r,n){var i=[];i.offset=e._path.length,i.bound=[],i=u(i,e,n);var l=-1,c=t.length,f=i.nodes,d=a(f),h=[],v=[];for(i[0]=i.root,i.onNext=r;++l<c;){var g=t[l],y=g.paths,x=g.jsong||g.values||g.value,b=-1,m=y.length;for(i[2]=x,f[2]=x;++b<m;){var P=y[b];p(o,s,P,i,d,f,h,v)}}return _(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:i.errors,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,n,a,i){var u,p;if(null==i){if(null==(i=c(n)))return;u=r[0],p=r[2]}else u=o[0],p=o[2];var l=u[i],d=p&&p[i];return o[2]=d,o[0]=l=f(t,u,l,p,d,i),a?void(e.length>1&&(r[0]=l,r[2]=d)):(r[0]=u,void(r[2]=p))}function s(e,t,r,o,s,a){var u=o[0],p=l(u)&&u.$type||(u=void 0);d(t,u,p,e,s,a)===!1&&(v(t,s,a),h(t,u,p,s)===!1&&t.onNext({path:i(s,t.offset),value:n(t,u,p,u&&u.value)}))}t.exports=r;var n=(e("../types/$path"),e("../support/clone-dense-json")),a=e("../support/array-clone"),i=e("../support/array-slice"),u=e("../support/options"),p=e("../walk/walk-path-set-soft-link"),l=e("../support/is-object"),c=e("../support/get-valid-key"),f=e("../support/merge-node"),d=e("../support/treat-node-as-miss"),h=e("../support/treat-node-as-error"),v=e("../support/clone-success-paths"),_=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/array-slice":78,"../support/clone-dense-json":79,"../support/clone-success-paths":84,"../support/get-valid-key":88,"../support/is-object":94,"../support/merge-node":97,"../support/options":99,"../support/treat-node-as-error":104,"../support/treat-node-as-miss":105,"../types/$path":111,"../walk/walk-path-set-soft-link":115}],72:[function(e,t){function r(e,t,r,n){var a,i,f,d=p([],e,n),h=-1,v=t.length,_=d.nodes,g=u(_),y=[],x=[];for(d[0]=d.root;++h<v;){a=r&&r[h],d.json=d[3]=g[3]=_[3]=c(a)?a.json||(a.json={}):void 0;var b=t[h],m=b.path;d.value=b.value,d.index=h,l(o,s,m,d,g,_,y,x),i=d.hasValue,i?(f=!0,c(a)&&(a.json=d.json),delete d.json,delete d.hasValue):c(a)&&delete a.json}return P(d.lru,d.expired,d.version,d.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:d.errors,hasValue:f,requestedPaths:d.requestedPaths,optimizedPaths:d.optimizedPaths,requestedMissingPaths:d.requestedMissingPaths,optimizedMissingPaths:d.optimizedMissingPaths}}function o(e,t,r,o,s,u,p,l,x,b){var m,P;if(null==l){if(null==(l=f(u)))return;P=r[3],m=r[0]}else P=b&&o[3]||r[3],m=o[0];var j,S=m[l];if(!p)return j=c(S)&&S.$type||void 0,j=j&&e.length>1&&"."||j,S=d(t,m,S,j,l),r[0]=m,void(o[0]=S);if(e.length>1)return j=c(S)&&S.$type||void 0,S=d(t,m,S,j,l),r[0]=o[0]=S,void(b&&(r[3]=P)&&(o[3]=P[x]||(P[x]={})));var A=t.error_selector,O=t[0],$=c(S)&&S.$size||0,w=t.value;j=c(w)&&w.$type||void 0,w=h(w,j,j?w.value:w),j||(j=a),j==n&&A&&(w=A(s,w)),S=v(m,S,w,l,t.lru),S=_(O,m,S,l,y()),g(m,$-S.$size,t.version,t.lru),o[0]=S,P&&null!=x&&(P[x]=i(t,S,j,S&&S.value))}function s(e,t,r,o,s,n,a,u){var p=o[0],l=c(p)&&p.$type||(p=void 0);x(t,p,l,e,s,n)===!1&&(m(t,s,n),b(t,p,l,s)===!1&&(null==u&&(t.json=i(t,p,l,p&&p.value)),t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../types/$error")),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),d=e("../support/create-branch"),h=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),m=e("../support/clone-success-paths"),P=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/clone-dense-json":79,"../support/clone-success-paths":84,"../support/create-branch":86,"../support/get-valid-key":88,"../support/graph-node":89,"../support/inc-generation":90,"../support/is-object":94,"../support/options":99,"../support/replace-node":102,"../support/treat-node-as-error":104,"../support/treat-node-as-miss":105,"../support/update-back-refs":107,"../support/update-graph":108,"../support/wrap-node":109,"../types/$error":110,"../types/$path":111,"../types/$sentinel":112,"../walk/walk-path-set":116}],73:[function(e,t){function r(e,t,r,n){var a,i=l([],e,n),u=-1,f=t.length,d=i.nodes,h=p(d),v=[],_=[],g=r[0];for(i[0]=i.root,i[1]=h[1]=d[1]=g.jsong||(g.jsong={}),i.requestedPaths=g.paths||(g.paths=i.requestedPaths);++u<f;){var y=t[u],x=y.path;i.value=y.value,c(o,s,x,i,h,d,v,_)}return a=i.hasValue,a?g.jsong=i[1]:(delete g.jsong,delete g.paths),j(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:i.errors,hasValue:a,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,p,l,c){var b,m;if(null==c){if(null==(c=d(p)))return;m=r[1],b=r[0]}else m=o[1],b=o[0];var P,j=c,S=b[c];if(!l)return P=f(S)&&S.$type||void 0,P=P&&e.length>1&&"."||P,S=h(t,b,S,P,c),r[0]=b,o[0]=S,r[1]=m,void(P==n?(m[j]=u(t,S,P,S.value),t.hasValue=!0):o[1]=m[j]||(m[j]={}));if(e.length>1)return P=f(S)&&S.$type||void 0,S=h(t,b,S,P,c),P=S.$type,r[0]=o[0]=S,r[1]=m,void(P==n?(m[j]=u(t,S,P,S.value),t.hasValue=!0):o[1]=m[j]||(m[j]={}));var A=t.error_selector,O=t[0],$=f(S)&&S.$size||0,w=t.value;P=f(w)&&w.$type||void 0,w=v(w,P,P?w.value:w),P||(P=i),P==a&&A&&(w=A(s,w)),S=_(b,S,w,c,t.lru),S=g(O,b,S,c,x()),y(b,$-S.$size,t.version,t.lru),o[0]=S,m[j]=u(t,S,P,S&&S.value),t.hasValue=!0}function s(e,t,r,o,s,n,a,i){var p,l=o[0],c=f(l)&&l.$type||(l=void 0);b(t,l,c,e,s,n)===!1&&(m(t,s,n),P(t.lru,l),null!=i||t.hasValue||null!=(i=d(n))||(l=u(t,l,c,l&&l.value),p=t[1],p.$type=l.$type,p.value=l.value),t.hasValue=!0)}t.exports=r;var n=e("../types/$path"),a=e("../types/$error"),i=e("../types/$sentinel"),u=e("../support/clone-graph-json"),p=e("../support/array-clone"),l=e("../support/options"),c=e("../walk/walk-path-set-soft-link"),f=e("../support/is-object"),d=e("../support/get-valid-key"),h=e("../support/create-branch"),v=e("../support/wrap-node"),_=e("../support/replace-node"),g=e("../support/graph-node"),y=(e("../support/update-back-refs"),e("../support/update-graph")),x=e("../support/inc-generation"),b=e("../support/treat-node-as-miss"),m=(e("../support/treat-node-as-error"),e("../support/clone-success-paths")),P=e("../lru/promote"),j=e("../lru/collect")},{"../lru/collect":64,"../lru/promote":65,"../support/array-clone":77,"../support/clone-graph-json":80,"../support/clone-success-paths":84,"../support/create-branch":86,"../support/get-valid-key":88,"../support/graph-node":89,"../support/inc-generation":90,"../support/is-object":94,"../support/options":99,"../support/replace-node":102,"../support/treat-node-as-error":104,"../support/treat-node-as-miss":105,"../support/update-back-refs":107,"../support/update-graph":108,"../support/wrap-node":109,"../types/$error":110,"../types/$path":111,"../types/$sentinel":112,"../walk/walk-path-set-soft-link":115}],74:[function(e,t){function r(e,t,r,n){var a,i=p([],e,n),c=-1,f=t.length,d=i.nodes,h=u(d),v=[],_=[],g=r[0];for(i[0]=i.root,i[3]=h[3]=d[3]=g.json||(g.json={});++c<f;){var y=t[c],x=y.path;i.value=y.value,l(o,s,x,i,h,d,v,_)}return a=i.hasValue,a?g.json=i[3]:delete g.json,P(i.lru,i.expired,i.version,i.root.$size||0,e._maxSize,e._collectRatio),{values:r,errors:i.errors,hasValue:a,requestedPaths:i.requestedPaths,optimizedPaths:i.optimizedPaths,requestedMissingPaths:i.requestedMissingPaths,optimizedMissingPaths:i.optimizedMissingPaths}}function o(e,t,r,o,s,u,p,l){var x,b,m;if(null==l){if(null==(l=f(u)))return;m=f(s),b=r[3],x=r[0]}else m=l,b=o[3],x=o[0];var P,j=x[l];if(!p)return P=c(j)&&j.$type||void 0,P=P&&e.length>1&&"."||P,j=d(t,x,j,P,l),r[0]=x,void(o[0]=j);if(e.length>1)return P=c(j)&&j.$type||void 0,j=d(t,x,j,P,l),r[0]=o[0]=j,r[3]=b,void(o[3]=b[m]||(b[m]={}));var S=t.error_selector,A=t[0],O=c(j)&&j.$size||0,$=t.value;P=c($)&&$.$type||void 0,$=h($,P,P?$.value:$),P||(P=a),P==n&&S&&($=S(s,$)),j=v(x,j,$,l,t.lru),j=_(A,x,j,l,y()),g(x,O-j.$size,t.version,t.lru),o[0]=j,b[m]=i(t,j,P,j&&j.value)}function s(e,t,r,o,s,n,a,u){var p,l=o[0],d=c(l)&&l.$type||(l=void 0);x(t,l,d,e,s,n)===!1&&(m(t,s,n),b(t,l,d,s)===!1&&(null!=u||t.hasValue||null!=(u=f(n))||(l=i(t,l,d,l&&l.value),p=t[3],p.$type=l.$type,p.value=l.value),t.hasValue=!0))}t.exports=r;var n=(e("../types/$path"),e("../types/$error")),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),d=e("../support/create-branch"),h=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),m=e("../support/clone-success-paths"),P=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/clone-dense-json":79,"../support/clone-success-paths":84,"../support/create-branch":86,"../support/get-valid-key":88,"../support/graph-node":89,"../support/inc-generation":90,"../support/is-object":94,"../support/options":99,"../support/replace-node":102,"../support/treat-node-as-error":104,"../support/treat-node-as-miss":105,"../support/update-back-refs":107,"../support/update-graph":108,"../support/wrap-node":109,"../types/$error":110,"../types/$path":111,"../types/$sentinel":112,"../walk/walk-path-set":116}],75:[function(e,t){function r(e,t,r,n){var a=p([],e,n),i=-1,c=t.length,f=a.nodes,d=u(f),h=[],v=[];
for(a[0]=a.root,a.onNext=r;++i<c;){var _=t[i],g=_.path;a.value=_.value,l(o,s,g,a,d,f,h,v)}return P(a.lru,a.expired,a.version,a.root.$size||0,e._maxSize,e._collectRatio),{values:null,errors:a.errors,requestedPaths:a.requestedPaths,optimizedPaths:a.optimizedPaths,requestedMissingPaths:a.requestedMissingPaths,optimizedMissingPaths:a.optimizedMissingPaths}}function o(e,t,r,o,s,i,u,p){var l;if(null==p){if(null==(p=f(i)))return;l=r[0]}else l=o[0];var x,b=l[p];if(!u)return x=c(b)&&b.$type||void 0,x=x&&e.length>1&&"."||x,b=d(t,l,b,x,p),r[0]=l,void(o[0]=b);if(e.length>1)return x=c(b)&&b.$type||void 0,b=d(t,l,b,x,p),void(r[0]=o[0]=b);var m=t.error_selector,P=t[0],j=c(b)&&b.$size||0,S=t.value;x=c(S)&&S.$type||void 0,S=h(S,x,x?S.value:S),x||(x=a),x==n&&m&&(S=m(s,S)),b=v(l,b,S,p,t.lru),b=_(P,l,b,p,y()),g(l,j-b.$size,t.version,t.lru),o[0]=b}function s(e,t,r,o,s,n){var a=o[0],p=c(a)&&a.$type||(a=void 0);x(t,a,p,e,s,n)===!1&&(m(t,s,n),b(t,a,p,s)===!1&&t.onNext({path:u(s),value:i(t,a,p,a&&a.value)}))}t.exports=r;var n=e("../types/$error"),a=e("../types/$sentinel"),i=e("../support/clone-dense-json"),u=e("../support/array-clone"),p=e("../support/options"),l=e("../walk/walk-path-set"),c=e("../support/is-object"),f=e("../support/get-valid-key"),d=e("../support/create-branch"),h=e("../support/wrap-node"),v=e("../support/replace-node"),_=e("../support/graph-node"),g=(e("../support/update-back-refs"),e("../support/update-graph")),y=e("../support/inc-generation"),x=e("../support/treat-node-as-miss"),b=e("../support/treat-node-as-error"),m=e("../support/clone-success-paths"),P=e("../lru/collect")},{"../lru/collect":64,"../support/array-clone":77,"../support/clone-dense-json":79,"../support/clone-success-paths":84,"../support/create-branch":86,"../support/get-valid-key":88,"../support/graph-node":89,"../support/inc-generation":90,"../support/is-object":94,"../support/options":99,"../support/replace-node":102,"../support/treat-node-as-error":104,"../support/treat-node-as-miss":105,"../support/update-back-refs":107,"../support/update-graph":108,"../support/wrap-node":109,"../types/$error":110,"../types/$sentinel":112,"../walk/walk-path-set":116}],76:[function(e,t){t.exports=function(e,t){for(var r=-1,o=e.length,s=new Array(o+1);++r<o;)s[r]=e[r];return s[r]=t,s}},{}],77:[function(e,t){t.exports=function(e){for(var t=-1,r=e.length,o=new Array(r);++t<r;)o[t]=e[t];return o}},{}],78:[function(e,t){t.exports=function(e,t){for(var r=-1,o=e.length-t,s=new Array(o);++r<o;)s[r]=e[r+t];return s}},{}],79:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone");t.exports=function(e,t,s,n){return null==t||void 0===n?{$type:r}:1==e.boxed?!!s&&o(t)||t:n}},{"../types/$sentinel":112,"./clone":85}],80:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone"),s=e("./is-primitive");t.exports=function(e,t,n,a){return null==t||void 0===a?{$type:r}:1==e.boxed?!!n&&o(t)||t:!n||n===r&&s(a)?a:o(t)}},{"../types/$sentinel":112,"./clone":85,"./is-primitive":95}],81:[function(e,t){var r=e("./clone-requested-path"),o=e("./clone-optimized-path");t.exports=function(e,t,s,n){e.requestedMissingPaths.push(r(e.bound,s,t,e.index)),e.optimizedMissingPaths.push(o(n,t))}},{"./clone-optimized-path":82,"./clone-requested-path":83}],82:[function(e,t){t.exports=function(e,t){for(var r,o=-1,s=-1,n=e.length,a=t.length,i=[];++o<n;)i[o]=e[o];for(;++s<a;)null!=(r=t[s])&&(i[o++]=r);return i}},{}],83:[function(e,t){t.exports=function(e,t,r,o){for(var s,n=-1,a=-1,i=-1,u=e.length,p=t.length,l=r.length,c=new Array(u+p+l);++n<u;)c[n]=e[n];for(;++a<p;)null!=(s=t[a])&&(c[n++]=t[a]);for(;++i<l;)null!=(s=r[i])&&(c[n++]=r[i]);return null!=o&&(c.pathSetIndex=o),c}},{}],84:[function(e,t){var r=e("./array-slice"),o=e("./array-clone");t.exports=function(e,t,s){e.requestedPaths.push(r(t,e.offset)),e.optimizedPaths.push(o(s))}},{"./array-clone":77,"./array-slice":78}],85:[function(e,t){var r=e("./is-object");t.exports=function(e){var t,o,s,n=e,a=n,i=-1;if(r(n))for(n={},o=Object.keys(a),t=o.length;++i<t;)s=o[i],"_"===s[0]&&"_"===s[1]||"/"===s||"./"===s||"../"===s||(n[s]=a[s]);return n}},{"./is-object":94}],86:[function(e,t){var r=e("../types/$path"),o="expired",s=e("./replace-node"),n=e("./graph-node"),a=e("./update-back-refs"),i=e("./is-primitive"),u=e("./is-expired");t.exports=function(e,t,p,l,c){return l&&u(e,p)&&(l=o),(l&&l!=r||i(p))&&(p=s(t,p,{},c,e.lru),p=n(e[0],t,p,c,0),p=a(p,e.version)),p}},{"../types/$path":111,"./graph-node":89,"./is-expired":93,"./is-primitive":95,"./replace-node":102,"./update-back-refs":107}],87:[function(e,t){var r="__ref";t.exports=function(e){for(var t,o=-1,s=e.__refs_length||0;++o<s;)void 0!==(t=e[r+o])&&(t.__context=t.__ref_index=e[r+o]=void 0);e.__refs_length=void 0}},{}],88:[function(e,t){t.exports=function(e){var t,r=e.length-1;do if(null!=(t=e[r]))return t;while(--r>-1);return null}},{}],89:[function(e,t){var r="/",o="./",s="../",n="__key",a="__generation";t.exports=function(e,t,i,u,p){return i[r]=e,i[o]=i,i[s]=t,i[n]=u,i[a]=p,i}},{}],90:[function(e,t){var r=0;t.exports=function(){return r++}},{}],91:[function(e,t){var r=0;t.exports=function(){return r++}},{}],92:[function(e,t){function r(e,t,n,a){if(s(e,t,n,a)){var i=o(t)&&t.$type||void 0;if(null==i)for(var u=Object.keys(t),p=-1,l=u.length;++p<l;){var n=u[p];"_"===n[0]&&"_"===n[1]||"/"===n||"./"===n||"../"===n||r(t,t[n],n,a)}return!0}return!1}t.exports=r;var o=e("./is-object"),s=e("./remove-node")},{"./is-object":94,"./remove-node":101}],93:[function(e,t){var r=e("../values/$expires-now"),o=e("../values/$expires-never"),s=e("./now"),n=e("../lru/splice");t.exports=function(e,t){var a=t.$expires;return null!=a&&a!=o&&(a==r||a<s())?(t.__invalidated||(t.__invalidated=!0,e.expired.push(t),n(e.lru,t)),!0):!1}},{"../lru/splice":66,"../values/$expires-never":113,"../values/$expires-now":114,"./now":98}],94:[function(e,t){var r="object";t.exports=function(e){return null!=e&&typeof e==r}},{}],95:[function(e,t){var r="object";t.exports=function(e){return null==e||typeof e!=r}},{}],96:[function(e,t){function r(e,t){return t?o(e)?(e=e[e.__offset||(e.__offset=0)],r(e,null!=e&&"object"==typeof e)):(void 0===e.__offset&&(e.__offset=e.from||(e.from=0)),e.__offset):e}t.exports=r;var o=Array.isArray},{}],97:[function(e,t){var r="./",o=e("../types/$path"),s=(e("../types/$sentinel"),e("../values/$expires-now"),e("./is-object")),n=(e("./is-primitive"),e("./is-expired")),a=e("../lru/promote"),i=e("./wrap-node"),u=e("./graph-node"),p=e("../support/replace-node"),l=e("../support/update-graph"),c=e("./inc-generation"),f=e("./invalidate-node");t.exports=function(e,t,d,h,v,_){var g,y,x,b;if(d==v){if(null==d)return null;if((x=s(d))&&(g=d.$type,null==g))return null==d[r]?u(e[0],t,d,_,0):d}else(x=s(d))&&(g=d.$type);var m,P;if(g==o){if(null==v)return n(e,d)?void f(t,d,_,e.lru):d;if((b=s(v))&&(y=v.$type,y==o))if(d===v){if(null!=d[r])return d}else if(n(e,v)===!1&&v.$timestamp<d.$timestamp==!1){m=d.value,P=v.value;var j=m.length;if(j===P.length){for(;--j>-1&&m[j]===P[j];);if(-1===j)return d}}}else if((b=s(v))&&(y=v.$type),x&&!g&&(null==v||b&&!y))return d;if(y&&v[r]&&n(e,v))return x&&d!=v&&f(t,d,_,e.lru),v;if(g&&b&&!y)return d=p(t,d,v,_,e.lru),u(e[0],t,d,_,0);if(!b||y){var S=0;if(d!=v){P||(P=y?v.value:v),v=i(v,y,P);var A=x&&d.$size||0,O=v.$size;S=A-O,d=p(t,d,v,_,e.lru),l(t,S,e.version,e.lru),d=u(e[0],t,d,_,c())}else x&&null==d[r]?(d=t[_]=i(d,g,d.value),S=-d.$size,l(t,S,e.version,e.lru),d=u(e[0],t,d,_,c())):(d=t[_]=i(d,g,d),S=-d.$size,l(t,S,e.version,e.lru),d=u(e[0],t,d,_,c()));a(e.lru,d)}else null==d&&(d=t[_]=u(e[0],t,v,_,0));return d}},{"../lru/promote":65,"../support/replace-node":102,"../support/update-graph":108,"../types/$path":111,"../types/$sentinel":112,"../values/$expires-now":114,"./graph-node":89,"./inc-generation":90,"./invalidate-node":92,"./is-expired":93,"./is-object":94,"./is-primitive":95,"./wrap-node":109}],98:[function(e,t){t.exports=Date.now},{}],99:[function(e,t){var r=e("../support/inc-version"),o=e("../get/getBoundValue");t.exports=function(e,t,s){{var n=(e.version=r(),e.lru||(e.lru=t._root)),a=e.root||(e.root=t._cache),i=(e.expired||(e.expired=n.expired),e.bound||(e.bound=t._path||[])),u=(e.errors||(e.errors=[]),e.requestedPaths||(e.requestedPaths=[]),e.optimizedPaths||(e.optimizedPaths=[]),e.requestedMissingPaths||(e.requestedMissingPaths=[]),e.optimizedMissingPaths||(e.optimizedMissingPaths=[]),e.nodes||(e.nodes=[]));e.boxed=t._boxed||!1,e.materialized=t._materialized,e.errorsAsValues=t._treatErrorsAsValues||!1}return e.offset||(e.offset=0),e.error_selector=s||t._errorSelector,u[0]=i.length?o(t,i).value:a,e}},{"../get/getBoundValue":42,"../support/inc-version":91}],100:[function(e,t){function r(e){return o(e)?++e.__offset===e.length?r(e[e.__offset=0]):!0:null!=e&&"object"==typeof e?++e.__offset>(e.to||(e.to=e.from+(e.length||1)-1))?(e.__offset=e.from,!1):!0:!1}t.exports=r;var o=Array.isArray},{}],101:[function(e,t){var r=e("../types/$path"),o="/",s="./",n="../",a=e("./unlink"),i=e("./delete-back-refs"),u=e("../lru/splice"),p=e("./is-object");t.exports=function(e,t,l,c){if(p(t)){var f=t.$type;return f&&(f==r&&a(t),u(c,t)),i(t),e[l]=t[o]=t[n]=t[s]=void 0,!0}return!1}},{"../lru/splice":66,"../types/$path":111,"./delete-back-refs":87,"./is-object":94,"./unlink":106}],102:[function(e,t){var r=e("./transfer-back-refs"),o=e("./invalidate-node");t.exports=function(e,t,s,n,a){return null!=t&&t!==s&&"object"==typeof t&&(r(t,s),o(e,t,n,a)),e[n]=s}},{"./invalidate-node":92,"./transfer-back-refs":103}],103:[function(e,t){var r="__ref",o="__refs_length";t.exports=function(e,t){for(var s,n=e[o]||0,a=t[o]||0,i=-1;++i<n;)s=e[r+i],void 0!==s&&(s.__context=t,t[r+(a+i)]=s,e[r+i]=void 0);t[o]=n+a,e[o]=s=void 0}},{}],104:[function(e,t){var r=e("../types/$error"),o=e("../lru/promote"),s=e("./array-clone");t.exports=function(e,t,n,a){return null==t?!1:(o(e.lru,t),n!=r||e.errorsAsValues?!1:(e.errors.push({path:s(a),value:t.value}),!0))}},{"../lru/promote":65,"../types/$error":110,"./array-clone":77}],105:[function(e,t){var r=e("../types/$sentinel"),o=e("./clone-missing-paths"),s=e("./is-expired");t.exports=function(e,t,n,a,i,u){var p=!e.materialized;if(null==t&&p)return o(e,a,i,u),!0;if(n){if(n==r&&void 0===t.value&&p&&!e.boxed)return!0;if(s(e,t))return o(e,a,i,u),!0}return!1}},{"../types/$sentinel":112,"./clone-missing-paths":81,"./is-expired":93}],106:[function(e,t){var r="__ref";t.exports=function(e){var t=e.__context;if(t){for(var o=(e.__ref_index||0)-1,s=(t.__refs_length||0)-1;++o<=s;)t[r+o]=t[r+(o+1)];t.__refs_length=s,e.__ref_index=e.__context=t=void 0}}},{}],107:[function(e,t){function r(e,t){if(e&&e.__version!==t){e.__version=t,e.__generation=o(),r(e["../"],t);for(var s=-1,n=e.__refs_length||0;++s<n;)r(e["__ref"+s],t)}return e}t.exports=r;var o=e("./inc-generation")},{"./inc-generation":90}],108:[function(e,t){var r=e("./remove-node"),o=e("./update-back-refs");t.exports=function(e,t,s,n){for(var a;a=e;)e=a["../"],(a.$size=(a.$size||0)-t)<=0&&null!=e?r(e,a,a.__key,n):a.__version!==s&&o(a,s)}},{"./remove-node":101,"./update-back-refs":107}],109:[function(e,t){var r=(e("../types/$path"),e("../types/$error"),e("../types/$sentinel")),o=e("./now"),s=e("./clone"),n=Array.isArray,a=e("./is-object");t.exports=function(e,t,i){var u=e,p=0;if(t?(u=s(e),p=u.$size):(u={value:i},t=r),0>=p||null==p)switch(typeof i){case"number":case"boolean":case"function":case"undefined":p=51;break;case"object":p=n(i)&&50+i.length||51;break;case"string":p=50+i.length}var l=a(e)&&e.$expires||void 0;return"number"==typeof l&&0>l&&(u.$expires=o()+-1*l),u.$type=t,u.$size=p,u}},{"../types/$error":110,"../types/$path":111,"../types/$sentinel":112,"./clone":85,"./is-object":94,"./now":98}],110:[function(e,t){t.exports="error"},{}],111:[function(e,t){t.exports="path"},{}],112:[function(e,t){t.exports="sentinel"},{}],113:[function(e,t){t.exports=1},{}],114:[function(e,t){t.exports=0},{}],115:[function(e,t){function r(e,t,h,v,_,g,y,x,b,m){var P=g[0];if(0==h.length||l(P))return t(h,v,_,g,y,x,b,m);for(var j=P.$type;j===o;){if(p(v,P))return g[0]=void 0,t(h,v,_,g,y,x,b,m);var S=P,A=P.value;if(g[0]=_[0]=v[0],g[1]=_[1]=v[1],g[2]=_[2]=v[2],n(e,S,A,v,_,g,y,x),P=g[0],null==P)return t(h,v,_,g,y,x,b,m);if(l(P)||(j=P.$type)&&j!=o)return e(s,v,_,g,y,x,!0,null,m,!1),t(h,v,_,g,u(y,null),x,b,m)}if(null!=j)return t(h,v,_,g,y,x,b,m);var O=h[0],$=c(O);do{var w,N;$===!0?(w=f(O,!0),N=w):(w=O,N=m);var k,E,M=i(g),z=i(_);null==w?(k=u(y,null),E=i(x),w=b,N=m,e(h,v,z,M,k,E,!0,null,N,!1)):(k=u(y,w),E=u(x,w),e(h,v,z,M,k,E,!0,w,N,$)),r(e,t,a(h,1),v,z,M,k,E,w,N,$)}while($&&d(O))}t.exports=r;var o=e("../types/$path"),s=new Array(0),n=e("./walk-reference"),a=e("../support/array-slice"),i=e("../support/array-clone"),u=e("../support/array-append"),p=e("../support/is-expired"),l=e("../support/is-primitive"),c=e("../support/is-object"),f=e("../support/keyset-to-key"),d=e("../support/permute-keyset")},{"../support/array-append":76,"../support/array-clone":77,"../support/array-slice":78,"../support/is-expired":93,"../support/is-object":94,"../support/is-primitive":95,"../support/keyset-to-key":96,"../support/permute-keyset":100,"../types/$path":111,"./walk-reference":117}],116:[function(e,t){function r(e,t,h,v,_,g,y,x,b,m){var P=g[0];if(0==h.length||l(P))return t(h,v,_,g,y,x,b,m);for(var j=P.$type;j===o;){if(p(v,P))return g[0]=void 0,t(h,v,_,g,y,x,b,m);var S=P,A=P.value;if(P=P.__context,null!=P)j=P.$type,x=i(A),g[0]=P;else{if(g[0]=_[0]=v[0],n(e,S,A,v,_,g,y,x),P=g[0],null==P)return t(h,v,_,g,y,x,b,m);if(l(P)||(j=P.$type)&&j!=o)return e(s,v,_,g,y,x,!0,null,m,!1),t(h,v,_,g,u(y,null),x,b,m)}}if(null!=j)return t(h,v,_,g,y,x,b,m);var O=h[0],$=c(O);do{var w,N;$===!0?(w=f(O,!0),N=w):(w=O,N=m);var k,E,M=i(g),z=i(_);null==w?(k=u(y,null),E=i(x),w=b,N=m,e(h,v,z,M,k,E,!0,null,N,!1)):(k=u(y,w),E=u(x,w),e(h,v,z,M,k,E,!0,w,N,$)),r(e,t,a(h,1),v,z,M,k,E,w,N,$)}while($&&d(O))}t.exports=r;var o=e("../types/$path"),s=new Array(0),n=e("./walk-reference"),a=e("../support/array-slice"),i=e("../support/array-clone"),u=e("../support/array-append"),p=e("../support/is-expired"),l=e("../support/is-primitive"),c=e("../support/is-object"),f=e("../support/keyset-to-key"),d=e("../support/permute-keyset")},{"../support/array-append":76,"../support/array-clone":77,"../support/array-slice":78,"../support/is-expired":93,"../support/is-object":94,"../support/is-primitive":95,"../support/keyset-to-key":96,"../support/permute-keyset":100,"../types/$path":111,"./walk-reference":117}],117:[function(e,t){function r(e,t,r,u,p,l,c,f){f.length=0;for(var d,h,v,_=-1,g=r.length;++_<g;){if(d=l[0],null==d)return l;if(a(d)||d.$type)return e(s,u,p,l,c,f,!1,v,null,!1),l;do if(h=r[_],null!=h){v=h,f.push(h),e(i(r,_),u,p,l,c,f,!1,h,null,!1);break}while(++_<g)}if(d=l[0],n(d)&&t.__context!==d){var y=d.__refs_length||0;d.__refs_length=y+1,d[o+y]=t,t.__context=d,t.__ref_index=y}return l}t.exports=r;{var o="__ref",s=new Array(0),n=e("../support/is-object"),a=e("../support/is-primitive"),i=e("../support/array-slice");e("../support/array-append")}},{"../support/array-append":76,"../support/array-slice":78,"../support/is-object":94,"../support/is-primitive":95}],118:[function(e,t){var r=e("./lib/falcor"),o=e("./lib/get"),s=e("./lib/set"),n=e("./lib/invalidate"),a=r.Model.prototype;a._getBoundValue=o.getBoundValue,a._getValueSync=o.getValueSync,a._getPathSetsAsValues=o.getAsValues,a._getPathSetsAsJSON=o.getAsJSON,a._getPathSetsAsPathMap=o.getAsPathMap,a._getPathSetsAsJSONG=o.getAsJSONG,a._getPathMapsAsValues=o.getAsValues,a._getPathMapsAsJSON=o.getAsJSON,a._getPathMapsAsPathMap=o.getAsPathMap,a._getPathMapsAsJSONG=o.getAsJSONG,a._setPathSetsAsJSON=s.setPathSetsAsJSON,a._setPathSetsAsJSONG=s.setPathSetsAsJSONG,a._setPathSetsAsPathMap=s.setPathSetsAsPathMap,a._setPathSetsAsValues=s.setPathSetsAsValues,a._setJSONGsAsJSON=s.setJSONGsAsJSON,a._setJSONGsAsJSONG=s.setJSONGsAsJSONG,a._setJSONGsAsPathMap=s.setJSONGsAsPathMap,a._setJSONGsAsValues=s.setJSONGsAsValues,a._invPathSetsAsJSON=n.invPathSetsAsJSON,a._invPathSetsAsJSONG=n.invPathSetsAsJSONG,a._invPathSetsAsPathMap=n.invPathSetsAsPathMap,a._invPathSetsAsValues=n.invPathSetsAsValues,a._setCache=o.setCache,t.exports=r},{"./lib/falcor":6,"./lib/get":45,"./lib/invalidate":59,"./lib/set":67}]},{},[1])(1)});