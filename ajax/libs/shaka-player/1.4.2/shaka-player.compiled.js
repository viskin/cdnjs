(function(){var g={};
(function(window){var h,aa=this;function m(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.ef=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.bf=function(a,c,g){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ba(a,b){this.id=a;this.lang=b||"unknown";this.enabled=this.active=!1}m("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0});function ca(a,b,c,d){this.id=a;this.bandwidth=b||0;this.width=c||0;this.height=d||0;this.active=!1}function da(a,b){var c=a.width*a.height,d=b.width*b.height;return c<d?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}m("shaka.player.VideoTrack.compare",da);function ea(a,b,c){this.id=a;this.bandwidth=b||0;this.lang=c||"unknown";this.active=!1}m("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0});function s(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;return c};function x(a,b){return b.bind(a)};function fa(a){return Object.keys(a).map(function(b){return a[b]})};function ga(a,b){for(var c={},d=0;d<a.length;++d){var e=b?b(a[d]):a[d].toString();c[e]=a[d]}var d=[],g;for(g in c)d.push(c[g]);return d};function ha(a){return String.fromCharCode.apply(null,a)}m("shaka.util.Uint8ArrayUtils.toString",ha);function ia(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}m("shaka.util.Uint8ArrayUtils.fromString",ia);function ja(a,b){var c=void 0==b?!0:b,d=window.btoa(ha(a)).replace(/\+/g,"-").replace(/\//g,"_");return c?d:d.replace(/=*$/,"")}m("shaka.util.Uint8ArrayUtils.toBase64",ja);function ka(a){return ia(window.atob(a.replace(/-/g,"+").replace(/_/g,"/")))}
m("shaka.util.Uint8ArrayUtils.fromBase64",ka);m("shaka.util.Uint8ArrayUtils.fromHex",function(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b});function la(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}m("shaka.util.Uint8ArrayUtils.toHex",la);function ma(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function z(a){this.l=a;this.Ya=new na(a,oa);pa||(pa=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var pa;z.prototype.Qa=function(){return this.Ya.Qa()};
function A(a){var b;b=qa(a);if(7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=qa(a);a:{for(d=0;d<pa.length;d++)if(ma(c,pa[d])){d=!0;break a}d=!1}if(d)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==c.length&&c[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d;c=
a.Ya.i+c<=a.l.byteLength?c:a.l.byteLength-a.Ya.i;d=new DataView(a.l.buffer,a.l.byteOffset+a.Ya.i,c);B(a.Ya,c);return new ra(b,d)}function qa(a){var b=sa(a.Ya),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=sa(a.Ya);return d}function ra(a,b){this.id=a;this.l=b}
function ta(a){if(8<a.l.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.l.byteLength&&a.l.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.l.byteLength;c++)var d=a.l.getUint8(c),b=256*b+d;return b};function C(){this.da={}}h=C.prototype;h.push=function(a,b){this.da.hasOwnProperty(a)?this.da[a].push(b):this.da[a]=[b]};h.set=function(a,b){this.da[a]=b};h.has=function(a){return this.da.hasOwnProperty(a)};h.get=function(a){return(a=this.da[a])?a.slice():null};function ua(a){var b=[],c;for(c in a.da)b.push.apply(b,a.da[c]);return b}h.remove=function(a,b){var c=this.da[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)};h.keys=function(){var a=[],b;for(b in this.da)a.push(b);return a};
h.clear=function(){this.da={}};function D(){return Date.now()+va}var va=0;function wa(a,b,c,d,e,g,f,k,l,p,n){this.keySystem=a;this.de=b;this.withCredentials=c;this.Sa=[];this.qd=e||null;this.rd=g||null;this.Rd=f==xa;this.He=k==ya;this.Nd=l||"";this.$e=p||"";this.Ed=n||null;d&&this.Sa.push(d)}m("shaka.player.DrmSchemeInfo",wa);var xa=1;wa.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:xa};var ya=1;wa.PersistentState={OPTIONAL:0,REQUIRED:ya};function za(a){this.body=a;this.headers={}}function Aa(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null}
Aa.prototype.clone=function(){var a=new Aa;a.maxHeight=this.maxHeight;a.maxWidth=this.maxWidth;a.maxBandwidth=this.maxBandwidth;a.minBandwidth=this.minBandwidth;return a};function Ba(){return new wa("","",!1,null)}wa.createUnencrypted=Ba;function Ca(a,b){a.Sa=ga(a.Sa.concat(b.Sa),function(a){return Array.prototype.join.apply(a.initData)})}wa.combine=Ca;wa.prototype.key=function(){return JSON.stringify(this)};function Da(a){this.bd=Math.exp(Math.log(.5)/a);this.vc=this.Cc=0}Da.prototype.sample=function(a,b){var c=Math.pow(this.bd,a);this.Cc=b*(1-c)+c*this.Cc;this.vc+=a};function Ea(a){return a.Cc/(1-Math.pow(a.bd,a.vc))};function E(a){var b=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles}),c;for(c in a)c in b||(b[c]=a[c]);return b}function G(a){return new CustomEvent("error",{detail:a,bubbles:!0})};function Fa(a,b,c){Ga(b);Ga(c);return c==b||a>=Ha&&c==b.split("-")[0]||a>=Ia&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Ha=1,Ia=2;function Ga(a){a=a.toLowerCase().split("-");var b=Ja[a[0]];b&&(a[0]=b);return a.join("-")}
var Ja={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function H(a){this.Kc=new C;this.parent=a}m("shaka.util.FakeEventTarget",H);H.prototype.addEventListener=function(a,b,c){c||this.Kc.push(a,b)};H.prototype.removeEventListener=function(a,b,c){c||this.Kc.remove(a,b)};H.prototype.dispatchEvent=function(a){delete a.srcElement;delete a.target;delete a.currentTarget;Object.defineProperties(a,{srcElement:{value:null,writable:!0},target:{value:this,writable:!0},currentTarget:{value:null,writable:!0}});return Ka(this,a)};
function Ka(a,b){b.currentTarget=a;for(var c=a.Kc.get(b.type)||[],d=0;d<c.length;++d){var e=c[d];try{e.handleEvent?e.handleEvent(b):e.call(a,b)}catch(g){}}a.parent&&b.bubbles&&Ka(a.parent,b);return b.defaultPrevented};function La(){H.call(this,null);this.Dc=new Da(3);this.Hd=new Da(10);this.ge=50;this.Qd=5E5;this.he=.5;this.fe=65536;this.pd=0}q(La,H);m("shaka.util.EWMABandwidthEstimator",La);La.prototype.sample=function(a,b){if(!(b<this.fe)){a=Math.max(a,this.ge);var c=8E3*b/a,d=a/1E3;this.Dc.sample(d,c);this.Hd.sample(d,c);this.dispatchEvent(E({type:"bandwidth"}));this.pd=Date.now()}};La.prototype.getBandwidth=function(){return this.Dc.vc<this.he?this.Qd:Math.min(Ea(this.Dc),Ea(this.Hd))};
La.prototype.getDataAge=function(){return(Date.now()-this.pd)/1E3};La.prototype.supportsCaching=function(){return!1};function na(a,b){this.l=a;this.Lc=b==Ma;this.i=0}var oa=0,Ma=1;na.prototype.Qa=function(){return this.i<this.l.byteLength};function sa(a){var b=a.l.getUint8(a.i);a.i+=1;return b}function I(a){var b=a.l.getUint32(a.i,a.Lc);a.i+=4;return b}function Na(a){var b,c;a.Lc?(b=a.l.getUint32(a.i,!0),c=a.l.getUint32(a.i+4,!0)):(c=a.l.getUint32(a.i,!1),b=a.l.getUint32(a.i+4,!1));if(2097151<c)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");a.i+=8;return c*Math.pow(2,32)+b}
function Oa(a){if(a.i+16>a.l.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.l.buffer,a.i,16);a.i+=16;return b}function B(a,b){if(a.i+b>a.l.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.i+=b};function Pa(){this.tc=new s;this.ga=!1;this.za=null;this.La=[];this.Ma=null}Pa.prototype.append=function(a){if(this.ga)throw Error("Cannot append to a running task!");this.La.push(a)};Pa.prototype.start=function(){if(this.ga)throw Error("Task already started!");this.ga=!0;this.La.unshift(function(){});Qa(this,void 0)};Pa.prototype.abort=function(){if(this.za)return this.za;if(!this.ga)return this.ga=!0,Promise.resolve();this.Ma&&this.Ma();return this.za=new s};Pa.prototype.end=function(){this.La.splice(1)};
function Qa(a,b){var c=a.La[0](b),d;c?(d=c[0],a.Ma=c[1]):(d=Promise.resolve(),a.Ma=null);d.then(x(a,function(a){this.za?(this.La=[],this.Ma=null,Ra(this)):(this.La.shift(),this.La.length?Qa(this,a):(this.tc.resolve(a),this.Ma=null))})).catch(x(a,function(a){this.La=[];this.Ma=null;this.za?Ra(this):this.tc.reject(a)}))}function Ra(a){var b=Error("Task aborted.");b.type="aborted";a.tc.reject(b);window.setTimeout(function(){this.za.resolve();this.za=null}.bind(a),5)};function Sa(){this.fb=new C}Sa.prototype.destroy=function(){Ta(this);this.fb=null};function J(a,b,c,d){b=new Ua(b,c,d);a.fb.push(c,b)}Sa.prototype.Zb=function(a,b){for(var c=this.fb.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.Zb(),this.fb.remove(b,e))}};function Ta(a){for(var b=ua(a.fb),c=0;c<b.length;++c)b[c].Zb();a.fb.clear()}function Ua(a,b,c){this.target=a;this.type=b;this.sd=c;this.target.addEventListener(b,c,!1)}
Ua.prototype.Zb=function(){this.target&&(this.target.removeEventListener(this.type,this.sd,!1),this.sd=this.target=null)};function Va(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}Va("error");Va("warn");Va("info");Va("log");Va("debug");function Wa(a){this.systemIds=[];this.cencKeyIds=[];a=new na(new DataView(a.buffer),oa);try{for(;a.Qa();){var b=a.i,c=I(a),d=I(a);1==c?c=Na(a):0==c&&(c=a.l.byteLength-b);if(1886614376!=d)B(a,c-(a.i-b));else{var e=sa(a);if(1<e)B(a,c-(a.i-b));else{B(a,3);var g=la(Oa(a)),f=[];if(0<e)for(var k=I(a),l=0;l<k;++l){var p=la(Oa(a));f.push(p)}var n=I(a);B(a,n);this.cencKeyIds.push.apply(this.cencKeyIds,f);this.systemIds.push(g);a.i!=b+c&&B(a,c-(a.i-b))}}}}catch(y){}};function Xa(a){Ya[a]={Db:Za(),end:NaN}}function $a(a){if(a=Ya[a])a.end=Za()}function ab(a){return(a=Ya[a])&&a.end?a.end-a.Db:NaN}var Za=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,Ya={};function bb(){var a="CustomEvent"in window;if(a)try{new CustomEvent("")}catch(b){a=!1}a||(window.CustomEvent=cb)}m("shaka.polyfill.CustomEvent.install",bb);function cb(a,b){var c=document.createEvent("CustomEvent"),d=b||{bubbles:!1,cancelable:!1,detail:null};c.initCustomEvent(a,!!d.bubbles,!!d.cancelable,d.detail);return c};function db(){var a=HTMLVideoElement.prototype;a.getVideoPlaybackQuality||(a.getVideoPlaybackQuality=function(){return"webkitDroppedFrameCount"in this?{corruptedVideoFrames:0,droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,creationTime:null,totalFrameDelay:null}:null})}m("shaka.polyfill.VideoPlaybackQuality.install",db);function eb(){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen;"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}});document.addEventListener("webkitfullscreenchange",
fb);document.addEventListener("webkitfullscreenerror",fb);document.addEventListener("mozfullscreenchange",fb);document.addEventListener("mozfullscreenerror",fb);document.addEventListener("MSFullscreenChange",fb);document.addEventListener("MSFullscreenError",fb)}m("shaka.polyfill.Fullscreen.install",eb);function fb(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)};function gb(){return Promise.reject(Error("The key system specified is not supported."))}function hb(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function ib(){throw new TypeError("Illegal constructor.");}ib.prototype.createSession=function(){};ib.prototype.setServerCertificate=function(){};function jb(){throw new TypeError("Illegal constructor.");}jb.prototype.getConfiguration=function(){};jb.prototype.createMediaKeys=function(){};function kb(a,b){try{var c=new lb(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function mb(a){var b=this.mediaKeys;b&&b!=a&&ob(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&ob(a,this);return Promise.resolve()}
function lb(a,b){this.jb=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.jb="webkit-org.w3.clearkey",c=!1);var d=!1,e;e=document.getElementsByTagName("video");e=e.length?e[0]:document.createElement("video");for(var g=0;g<b.length;++g){var f=b[g],k={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:f.initDataTypes,sessionTypes:["temporary"]},l=!1;if(f.audioCapabilities)for(var p=0;p<f.audioCapabilities.length;++p){var n=f.audioCapabilities[p];
n.contentType&&(l=!0,e.canPlayType(n.contentType.split(";")[0],this.jb)&&(k.audioCapabilities.push(n),d=!0))}if(f.videoCapabilities)for(p=0;p<f.videoCapabilities.length;++p)n=f.videoCapabilities[p],n.contentType&&(l=!0,e.canPlayType(n.contentType,this.jb)&&(k.videoCapabilities.push(n),d=!0));l||(d=e.canPlayType("video/mp4",this.jb)||e.canPlayType("video/webm",this.jb));"required"==f.persistentState&&(c?(k.persistentState="required",k.sessionTypes=["persistent-license"]):d=!1);if(d){this.Pd=k;return}}throw Error("None of the requested configurations were supported.");
}lb.prototype.createMediaKeys=function(){var a=new pb(this.jb);return Promise.resolve(a)};lb.prototype.getConfiguration=function(){return this.Pd};function pb(a){this.Ta=a;this.Ia=null;this.j=new Sa;this.wd=[];this.Fd={}}function ob(a,b){a.Ia=b;Ta(a.j);b&&(J(a.j,b,"webkitneedkey",a.Ge.bind(a)),J(a.j,b,"webkitkeymessage",a.Fe.bind(a)),J(a.j,b,"webkitkeyadded",a.De.bind(a)),J(a.j,b,"webkitkeyerror",a.Ee.bind(a)))}h=pb.prototype;
h.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=this.Ia||document.createElement("video");a.src||(a.src="about:blank");b=new qb(a,this.Ta,b);this.wd.push(b);return b};h.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};h.Ge=function(a){a=E({type:"encrypted",initDataType:"webm",initData:a.initData});this.Ia.dispatchEvent(a)};
h.Fe=function(a){var b=rb(this,a.sessionId);b&&(a=E({type:"message",messageType:void 0==b.keyStatuses.wa?"licenserequest":"licenserenewal",message:a.message}),b.ba&&(b.ba.resolve(),b.ba=null),b.dispatchEvent(a))};h.De=function(a){(a=rb(this,a.sessionId))&&a.ready()};h.Ee=function(a){var b=rb(this,a.sessionId);b&&b.handleError(a)};function rb(a,b){var c=a.Fd[b];return c?c:(c=a.wd.shift())?(c.sessionId=b,a.Fd[b]=c):null}
function qb(a,b,c){H.call(this,null);this.Ia=a;this.od=!1;this.S=this.ba=null;this.Ta=b;this.wc=c;this.sessionId="";this.expiration=NaN;this.closed=new s;this.keyStatuses=new sb}q(qb,H);h=qb.prototype;h.ready=function(){tb(this,"usable");this.S&&this.S.resolve();this.S=null};
h.handleError=function(a){var b=Error("EME v0.1b key error");b.errorCode=a.errorCode;b.errorCode.systemCode=a.systemCode;!a.sessionId&&this.ba?(b.method="generateRequest",45==a.systemCode&&(b.message="Unsupported session type."),this.ba.reject(b),this.ba=null):a.sessionId&&this.S?(b.method="update",this.S.reject(b),this.S=null):(b=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?tb(this,"output-restricted"):1==b?tb(this,"expired"):tb(this,"internal-error"))};
function ub(a,b,c){if(a.od)return Promise.reject(Error("The session is already initialized."));a.od=!0;try{var d;if("persistent-license"==a.wc)if(c)d=ia("LOAD_SESSION|"+c);else{var e=new Uint8Array(b);d=ia("PERSISTENT|"+ha(e))}else d=new Uint8Array(b)}catch(g){return Promise.reject(g)}a.ba=new s;try{a.Ia.webkitGenerateKeyRequest(a.Ta,d)}catch(f){if("InvalidStateError"!=f.name)return a.ba=null,Promise.reject(f);setTimeout(function(){try{this.Ia.webkitGenerateKeyRequest(this.Ta,d)}catch(a){this.ba.reject(a),
this.ba=null}}.bind(a),10)}return a.ba}
h.$c=function(a,b){if(this.S)this.S.then(this.$c.bind(this,a,b)).catch(this.$c.bind(this,a,b));else{this.S=a;var c,d;if("webkit-org.w3.clearkey"==this.Ta){c=ha(new Uint8Array(b));d=JSON.parse(c);c=d.keys[0].kty;if("A128KW"!=d.keys[0].alg||"oct"!=c)this.S.reject(Error("Response is not a valid JSON Web Key Set.")),this.S=null;c=ka(d.keys[0].k);d=ka(d.keys[0].kid)}else c=new Uint8Array(b),d=null;try{this.Ia.webkitAddKey(this.Ta,c,d,this.sessionId)}catch(e){this.S.reject(e),this.S=null}}};
function tb(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1;c.wa=b;c=E({type:"keystatuseschange"});a.dispatchEvent(c)}h.generateRequest=function(a,b){return ub(this,b,null)};h.load=function(a){return"persistent-license"==this.wc?ub(this,null,a):Promise.reject(Error("Not a persistent session."))};h.update=function(a){var b=new s;this.$c(b,a);return b};
h.close=function(){if("persistent-license"!=this.wc){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.Ia.webkitCancelKeyRequest(this.Ta,this.sessionId)}this.closed.resolve();return this.closed};h.remove=function(){return"persistent-license"!=this.wc?Promise.reject(Error("Not a persistent session.")):this.close()};function vb(a){this.Ld=a;this.nd=0}
vb.prototype.next=function(){return this.nd>=this.Ld.length?{value:void 0,done:!0}:{value:this.Ld[this.nd++],done:!1}};function sb(){this.size=0;this.wa=void 0}var wb;h=sb.prototype;h.forEach=function(a){this.wa&&a(this.wa)};h.get=function(a){if(this.has(a))return this.wa};h.has=function(a){var b=wb;return this.wa&&ma(new Uint8Array(a),b)?!0:!1};h.keys=function(){var a=wb,b=[];this.wa&&b.push(a);return new vb(b)};h.values=function(){var a=[];this.wa&&a.push(this.wa);return new vb(a)};function xb(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(wb=ia("FAKE_KEY_ID"),Navigator.prototype.requestMediaKeySystemAccess=kb,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=mb,window.MediaKeys=pb,window.MediaKeySystemAccess=lb):(Navigator.prototype.requestMediaKeySystemAccess=gb,delete HTMLMediaElement.prototype.mediaKeys,
HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=hb,window.MediaKeys=ib,window.MediaKeySystemAccess=jb))}m("shaka.polyfill.MediaKeys.install",xb);m("shaka.polyfill.installAll",function(){bb();eb();xb();db()});var yb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function K(a){var b;a instanceof K?(zb(this,a.Ja),this.cb=a.cb,this.ra=a.ra,Ab(this,a.vb),this.ja=a.ja,Bb(this,a.Xa.clone()),this.Pa=a.Pa):a&&(b=String(a).match(yb))?(zb(this,b[1]||"",!0),this.cb=Cb(b[2]||""),this.ra=Cb(b[3]||"",!0),Ab(this,b[4]),this.ja=Cb(b[5]||"",!0),Bb(this,b[6]||"",!0),this.Pa=Cb(b[7]||"")):this.Xa=new Db(null)}h=K.prototype;h.Ja="";h.cb="";h.ra="";h.vb=null;h.ja="";h.Pa="";
h.toString=function(){var a=[],b=this.Ja;b&&a.push(Eb(b,Fb,!0),":");if(b=this.ra){a.push("//");var c=this.cb;c&&a.push(Eb(c,Fb,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.vb;null!=b&&a.push(":",String(b))}if(b=this.ja)this.ra&&"/"!=b.charAt(0)&&a.push("/"),a.push(Eb(b,"/"==b.charAt(0)?Gb:Hb,!0));(b=this.Xa.toString())&&a.push("?",b);(b=this.Pa)&&a.push("#",Eb(b,Ib));return a.join("")};
h.resolve=function(a){var b=this.clone(),c=!!a.Ja;c?zb(b,a.Ja):c=!!a.cb;c?b.cb=a.cb:c=!!a.ra;c?b.ra=a.ra:c=null!=a.vb;var d=a.ja;if(c)Ab(b,a.vb);else if(c=!!a.ja){if("/"!=d.charAt(0))if(this.ra&&!this.ja)d="/"+d;else{var e=b.ja.lastIndexOf("/");-1!=e&&(d=b.ja.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),g=[],f=0;f<d.length;){var k=d[f++];"."==k?e&&f==d.length&&g.push(""):".."==k?((1<g.length||1==g.length&&
""!=g[0])&&g.pop(),e&&f==d.length&&g.push("")):(g.push(k),e=!0)}d=g.join("/")}}c?b.ja=d:c=""!==a.Xa.toString();c?Bb(b,a.Xa.clone()):c=!!a.Pa;c&&(b.Pa=a.Pa);return b};h.clone=function(){return new K(this)};function zb(a,b,c){a.Ja=c?Cb(b,!0):b;a.Ja&&(a.Ja=a.Ja.replace(/:$/,""))}function Ab(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.vb=b}else a.vb=null}function Bb(a,b,c){b instanceof Db?a.Xa=b:(c||(b=Eb(b,Jb)),a.Xa=new Db(b))}
function Cb(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Eb(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Kb),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Kb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Fb=/[#\/\?@]/g,Hb=/[\#\?:]/g,Gb=/[\#\?]/g,Jb=/[\#\?@]/g,Ib=/#/g;function Db(a){this.Ea=a||null}h=Db.prototype;h.U=null;h.ec=null;
h.add=function(a,b){if(!this.U&&(this.U={},this.ec=0,this.Ea))for(var c=this.Ea.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),g=null,f=null;0<=e?(g=c[d].substring(0,e),f=c[d].substring(e+1)):g=c[d];g=decodeURIComponent(g.replace(/\+/g," "));f=f||"";this.add(g,decodeURIComponent(f.replace(/\+/g," ")))}this.Ea=null;(c=this.U.hasOwnProperty(a)&&this.U[a])||(this.U[a]=c=[]);c.push(b);this.ec++;return this};
h.toString=function(){if(this.Ea)return this.Ea;if(!this.U)return"";var a=[],b;for(b in this.U)for(var c=encodeURIComponent(b),d=this.U[b],e=0;e<d.length;e++){var g=c;""!==d[e]&&(g+="="+encodeURIComponent(d[e]));a.push(g)}return this.Ea=a.join("&")};h.clone=function(){var a=new Db;a.Ea=this.Ea;if(this.U){var b={},c;for(c in this.U)b[c]=this.U[c].concat();a.U=b;a.ec=this.ec}return a};function L(a,b,c,d,e){this.startTime=a;this.endTime=b;this.ab=c;this.Hb=d;this.url=e}function Lb(a,b,c){return new L(b,c,a.ab,a.Hb,a.url)}function Mb(a,b){for(var c=a.length-1;0<=c;--c){var d=a[c];if(b>=d.startTime&&(null==d.endTime||b<d.endTime))return c}return-1}function Nb(a,b){return a.map(function(a){return Lb(a,a.startTime+b,null!=a.endTime?a.endTime+b:null)})};function Ob(){}Ob.prototype.parse=function(a,b,c){var d=null;try{d=this.Rc(a,b,c)}catch(e){if(!(e instanceof RangeError))throw e;}return d};
Ob.prototype.Rc=function(a,b,c){var d=[];a=new na(a,oa);var e=I(a);if(1936286840!=I(a))return null;1==e&&(e=Na(a));var g=sa(a);B(a,3);B(a,4);var f=I(a);if(0==f)return null;var k,l;0==g?(k=I(a),l=I(a)):(k=Na(a),l=Na(a));B(a,2);g=a.l.getUint16(a.i,a.Lc);a.i+=2;b=b+e+l;for(e=0;e<g;e++){var p=I(a);l=(p&2147483648)>>>31;var p=p&2147483647,n=I(a);I(a);if(1==l)return null;d.push(new L(k/f,(k+n)/f,b,b+p-1,c));k+=n;b+=p}return d};function Pb(){}Pb.prototype.parse=function(a,b,c){var d=null;try{d=this.Rc(a,b,c)}catch(e){if(!(e instanceof RangeError))throw e;}return d};
Pb.prototype.Rc=function(a,b,c){b=new z(b);if(440786851!=A(b).id)b=null;else{var d=A(b);if(408125543!=d.id)b=null;else{b=d.l.byteOffset;for(var d=new z(d.l),e=null;d.Qa();){var g=A(d);if(357149030==g.id){e=g;break}}if(e){d=new z(e.l);for(e=1E6;d.Qa();)if(g=A(d),2807729==g.id){e=ta(g);break}d=e/1E9}else d=null;b=d?{Me:b,Xe:d}:null}}if(!b)return null;e=A(new z(a));if(475249515!=e.id)return null;a=b.Me;b=b.Xe;for(var d=[],e=new z(e.l),f=g=-1;e.Qa();){var k=A(e);if(187==k.id){var l;l=new z(k.l);k=A(l);
if(179!=k.id)l=null;else if(k=ta(k),l=A(l),183!=l.id)l=null;else{l=new z(l.l);for(var p=0;l.Qa();){var n=A(l);if(241==n.id){p=ta(n);break}}l={Ze:k,Ie:p}}l&&(k=b*l.Ze,l=a+l.Ie,0<=g&&d.push(new L(g,k,f,l-1,c)),g=k,f=l)}}0<=g&&d.push(new L(g,null,f,null,c));return d};function M(a){this.g=a;this.na=0}M.prototype.destroy=function(){this.g=null};h=M.prototype;h.length=function(){return this.g.length};h.first=function(){if(0==this.g.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return this.g[0]};function N(a){if(0==a.g.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return a.g[a.g.length-1]}
h.get=function(a){if(0>a||a>=this.g.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.g[a]};h.find=function(a){a=Mb(this.g,a);return 0<=a?this.g[a]:null};h.Jc=function(a){Qb(this,a);return!0};
function Qb(a,b){a.na!=b.na&&(b=new M(Nb(b.g,a.na-b.na)));if(0==a.length())a.g=b.g.slice(0);else if(0!=b.length()&&null!=N(a).endTime&&!(null!=N(b).endTime&&N(b).endTime<N(a).endTime)){if(N(a).endTime<=b.first().startTime)var c=Lb(N(a),N(a).startTime,b.first().startTime),c=a.g.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.g.length&&!(a.g[d].endTime>=b.first().startTime);++d);a.g[d].startTime<b.first().startTime?(c=Lb(a.g[d],a.g[d].startTime,b.first().startTime),c=a.g.slice(0,d).concat([c])):(a.first().startTime>
b.first().startTime||b.first(),c=a.g.slice(0,d))}a.g=c.concat(b.g)}}h.Ba=function(a){var b=a-this.na;if(0==b)return 0;this.g=Nb(this.g,b);this.na=a;return b};h.Hc=function(){return 0<this.length()?{start:this.first().startTime,end:N(this).endTime}:{start:0,end:0}};function Rb(a){this.We=a;this.b=null}Rb.prototype.destroy=function(){this.b&&(this.b.destroy(),this.b=null)};Rb.prototype.create=function(){if(this.b)return Promise.resolve(this.b);var a=new L(0,null,0,null,this.We);this.b=new M([a]);return Promise.resolve(this.b)};function Sb(a){this.url=a;this.h=new Tb;this.Ub=this.Id=this.Ac=0;this.m=null;this.B=new s;this.L=null}function Tb(){this.body=null;this.Pb=1;this.dd=1E3;this.Ke=2;this.Le=.5;this.kc=0;this.method="GET";this.responseType="arraybuffer";this.jc={};this.Jd=this.withCredentials=!1}function Ub(a){Vb(a);a.h.body=null;a.B=null;a.L=null}function Vb(a){a.m&&(a.m.onload=null,a.m.onreadystatechange=null,a.m.onerror=null,a.m.ontimeout=null);a.m=null}h=Sb.prototype;
h.pc=function(){if(this.m)return this.B;if(0==this.url.lastIndexOf("data:",0)){var a=this.url.split(":")[1].split(";").pop().split(","),b=a.pop(),b="base64"==a.pop()?window.atob(b.replace(/-/g,"+").replace(/_/g,"/")):window.decodeURIComponent(b);"arraybuffer"==this.h.responseType&&(b=ia(b).buffer);a=JSON.parse(JSON.stringify(new XMLHttpRequest));a.response=b;a.responseText=b.toString();b=this.B;b.resolve(a);Ub(this);return b}if(0==this.url.lastIndexOf("idb:",0))return Wb(this);this.Ac++;this.Id=Date.now();
this.Ub||(this.Ub=this.h.dd);this.m=new XMLHttpRequest;a=this.url;this.L&&!this.L.supportsCaching()&&(a=new K(a),a.Xa.add("_",Date.now()),a=a.toString());this.m.open(this.h.method,a,!0);this.m.responseType=this.h.responseType;this.m.timeout=this.h.kc;this.m.withCredentials=this.h.withCredentials;this.m.onload=this.me.bind(this);this.h.Jd&&(this.m.onreadystatechange=this.qe.bind(this));this.m.onerror=this.Pc.bind(this);this.m.ontimeout=this.ye.bind(this);for(b in this.h.jc)this.m.setRequestHeader(b,
this.h.jc[b]);this.m.send(this.h.body);return this.B};function Wb(a){var b=a.url.split("/"),c=parseInt(b[2],10),d=parseInt(b[3],10),e=new Xb(null,null);return Yb(e).then(function(){return Zb(e,c,d)}).then(x(a,function(a){var b=JSON.parse(JSON.stringify(new XMLHttpRequest));b.response=a;a=this.B;a.resolve(b);O(e);Ub(this);return a})).catch(x(a,function(a){O(e);Ub(this);return Promise.reject(a)}))}
function $b(a,b,c){b=Error(b);b.type=c;b.status=a.m.status;b.url=a.url;b.method=a.h.method;b.body=a.h.body;b.af=a.m;return b}h.abort=function(){if(this.m&&this.m.readyState!=XMLHttpRequest.DONE){this.m.abort();var a=$b(this,"Request aborted.","aborted");this.B.reject(a);Ub(this)}};h.me=function(a){this.L&&this.L.sample(Date.now()-this.Id,a.loaded);200<=this.m.status&&299>=this.m.status?(this.B.resolve(this.m),Ub(this)):this.Ac<this.h.Pb?ac(this):(a=$b(this,"HTTP error.","net"),this.B.reject(a),Ub(this))};
h.qe=function(){if(this.m.readyState==XMLHttpRequest.HEADERS_RECEIVED){var a=Date.parse(this.m.getResponseHeader("Date"));a&&(va=a-Date.now())}};h.Pc=function(){var a=$b(this,"Network failure.","net");this.B.reject(a);Ub(this)};h.ye=function(){if(this.Ac<this.h.Pb)ac(this);else{var a=$b(this,"Request timed out.","net");this.B.reject(a);Ub(this)}};function ac(a){Vb(a);window.setTimeout(a.pc.bind(a),a.Ub*(1+(2*Math.random()-1)*a.h.Le));a.Ub*=a.h.Ke};function bc(a,b,c,d){Sb.call(this,a);this.h.body=b;this.h.method="POST";this.h.Pb=3;this.h.withCredentials=c;this.h.kc=cc;a=d||{};for(var e in a)this.h.jc[e]=a[e]}q(bc,Sb);var cc=0;bc.prototype.send=function(){return this.pc().then(function(a){return Promise.resolve(new Uint8Array(a.response))})};function dc(a,b,c,d,e){Sb.call(this,a);if(b||c)this.h.jc.Range="bytes="+(b+"-"+(null!=c?c:""));d&&(this.h.Pb=d);e&&(this.h.dd=e);this.h.kc=ec}q(dc,Sb);var ec=0;dc.prototype.send=function(){return this.pc().then(x(this,function(a){return Promise.resolve(a.response)}))};function fc(a,b,c){this.td=a;this.la=b;this.P=c;this.j=new Sa;this.ca=[];this.ya=0;this.Va=this.C=null;J(this.j,this.la,"updateend",this.ve.bind(this))}var gc=1/60;fc.prototype.destroy=function(){this.abort();this.ca=this.C=this.Va=null;this.j.destroy();this.td=this.la=this.j=null};function hc(a,b){for(var c=a.la.buffered,d=0;d<c.length;++d){var e=c.start(d)-gc,g=c.end(d)+gc;if(b>=e&&b<=g)return c.end(d)-b}return 0}h=fc.prototype;
h.Ib=function(a,b){if(this.C){var c=Error("Cannot fetch: previous operation not complete.");c.type="stream";return Promise.reject(c)}this.C=new Pa;b&&this.C.append(function(){return[ic(this,b),this.yc.bind(this)]}.bind(this));this.C.append(function(){var b=new dc(a.url.toString(),a.ab,a.Hb,3,1E3*(a.endTime?a.endTime-a.startTime:1));b.L=this.P;return[b.send(),b.abort.bind(b)]}.bind(this));this.C.append(function(a){this.P.getBandwidth();return[ic(this,a),this.yc.bind(this)]}.bind(this));var d=0==this.la.buffered.length&&
0==this.ca.length,e=null;this.C.append(function(){if(d){var b=a.startTime;e=this.la.buffered.start(0)-b}b=Mb(this.ca,a.startTime);0<=b?this.ca.splice(b+1,0,a):this.ca.push(a)}.bind(this));return jc(this).then(function(){return Promise.resolve(e)}.bind(this))};
h.clear=function(){if(this.C){var a=Error("Cannot clear: previous operation not complete.");a.type="stream";return Promise.reject(a)}this.C=new Pa;this.C.append(function(){var a;a:if(0==this.la.buffered.length)a=Promise.resolve();else{try{this.la.remove(0,Number.POSITIVE_INFINITY)}catch(c){a=Promise.reject(c);break a}this.ca=[];a=this.Va=new s}return[a,this.yc.bind(this)]}.bind(this));return jc(this)};h.abort=function(){return this.C?this.C.abort():Promise.resolve()};
h.Ba=function(a){var b=a-this.ya;0!=b&&(this.ca=Nb(this.ca,b),this.ya=a)};function jc(a){a.C.start();return a.C.tc.then(x(a,function(){this.C=null})).catch(x(a,function(a){this.C=null;return Promise.reject(a)}))}function ic(a,b){try{a.la.appendBuffer(b)}catch(c){return Promise.reject(c)}a.Va=new s;return a.Va}h.yc=function(){"open"==this.td.readyState&&this.la.abort()};h.ve=function(){this.Va.resolve();this.Va=null};function kc(a,b,c){this.url=a;this.ab=b;this.Hb=c;this.wb=this.$a=null}kc.prototype.Ib=function(){if(this.wb)return this.wb;this.$a=new dc(this.url.toString(),this.ab,this.Hb);var a=this.$a.send().then(x(this,function(a){this.$a=null;return Promise.resolve(a)}));return this.wb=a=a.catch(x(this,function(a){this.wb=this.$a=null;return Promise.reject(a)}))};function lc(a){a.$a&&(a.$a.abort(),a.$a=null,a.wb=null)};function mc(a){this.Rb=a}mc.prototype.destroy=function(){this.Rb&&(lc(this.Rb),this.Rb=null)};mc.prototype.create=function(){return this.Rb?this.Rb.Ib():Promise.resolve(null)};function nc(){this.K=oc++;this.id=this.I=this.N=null;this.timestampOffset=0;this.height=this.width=this.bandwidth=null;this.aa=this.n="";this.enabled=!0}var oc=0;nc.prototype.destroy=function(){this.N&&(this.N.destroy(),this.N=null);this.I&&(this.I.destroy(),this.I=null)};function pc(a){var b=a.n||"";a.aa&&(b+='; codecs="'+a.aa+'"');return b}function qc(){this.K=rc++;this.id=null;this.contentType=this.lang="";this.Mb=!1;this.f=[];this.Na=[]}var rc=0;
qc.prototype.destroy=function(){for(var a=0;a<this.f.length;++a)this.f[a].destroy();this.Na=this.f=null};qc.prototype.Fc=function(){for(var a=[],b=0;b<this.Na.length;++b){var c=new sc;c.id=this.K;c.T=this.Na[b];c.contentType=this.contentType;c.Fa=this.f.length?pc(this.f[0]):"";a.push(c)}return a};function tc(){this.id=null;this.start=0;this.duration=null;this.u=[]}tc.prototype.Fc=function(){for(var a=[],b=0;b<this.u.length;++b)a.push.apply(a,this.u[b].Fc());return a};
tc.prototype.destroy=function(){for(var a=0;a<this.u.length;++a)this.u[a].destroy();this.u=null};function uc(){this.ia=!1;this.$b=this.Bb=null;this.F=0;this.t=[]}uc.prototype.destroy=function(){for(var a=0;a<this.t.length;++a)this.t[a].destroy();this.t=null};function sc(){this.id=0;this.T=null;this.Fa=this.contentType=""};function vc(a,b){H.call(this,a);this.a=b;this.Gb=!0;this.oa=this.b=this.O=null}q(vc,H);vc.prototype.destroy=function(){this.oa&&this.a.removeChild(this.oa);this.parent=this.a=this.O=this.b=this.oa=null};h=vc.prototype;h.md=function(){return!0};h.ld=function(){return!0};
h.Yb=function(a){a.N.create().then(x(this,function(b){if(this.a){this.O=a;this.b=b;if(0==b.length())return Promise.reject(Error("No subtitles URL available."));b=b.first().url.toString();var c=this.Gc();this.oa&&(this.rc(!1),this.a.removeChild(this.oa));this.oa=document.createElement("track");this.a.appendChild(this.oa);this.oa.src=b;this.rc(c)}}))};h.Dd=function(){};h.rc=function(a){this.Gb=a;this.oa&&(this.oa.track.mode=a?"showing":"disabled")};h.Gc=function(){return this.Gb};function wc(a,b,c,d,e){H.call(this,a);this.a=b;this.$=new fc(c,d,e);this.P=e;this.Ic=this.b=this.O=null;this.ud=0;this.Xc=!1;this.ha=null;this.Tb=!1;this.ya=null;this.Nc=this.fc=this.ga=!1}q(wc,H);var xc=15;wc.prototype.destroy=function(){this.cc();this.P=this.O=null;this.$.destroy();this.parent=this.a=this.$=null};h=wc.prototype;h.md=function(){return this.ga};h.ld=function(){return this.fc};
h.Yb=function(a,b,c){if(a!=this.O){var d=[a.N.create(),a.I.create()];Promise.all(d).then(x(this,function(d){if(this.a){var g=this.O;this.O=a;this.b=d[0];this.Ic=d[1];this.ud=b;this.Xc=!0;this.Tb||(g?c&&yc(this,!0):this.ea(0))}})).catch(x(this,function(a){"aborted"!=a.type&&(a=G(a),this.dispatchEvent(a))}))}};h.Dd=function(){return yc(this,!1)};
function yc(a,b){a.O&&!a.Tb&&(a.Tb=!0,a.cc(),a.$.abort().then(x(a,function(){var a=this.a.currentTime;if(!b&&0<hc(this.$,a)&&0<=Mb(this.$.ca,a))return Promise.resolve();this.Nc=!0;return this.$.clear()})).then(x(a,function(){this.Tb=!1;this.ea(0)})).catch(x(a,function(a){this.Tb=!1;a=G(a);this.dispatchEvent(a)})))}h.rc=function(){};h.Gc=function(){return!0};
h.Be=function(){var a;a=1<this.$.la.buffered.length?!0:!1;if(a&&this.ga)yc(this,!0);else{this.ha=null;a=this.O;var b=this.b,c=this.a.currentTime,d=hc(this.$,c),e=this.ga?xc:Math.min(this.ud,xc)+(this.ya||0);d>=e?(zc(this),this.ea(1E3/(Math.abs(this.a.playbackRate)||1))):(b=Ac(this,c,b))?(b=this.$.Ib(b,this.Ic),this.Ic=null,this.Xc&&(this.Xc=!1,Bc(this,a)),b.then(x(this,function(a){this.fc=!1;null==this.ya&&(this.ya=a);this.Nc&&0<hc(this.$,c)&&(this.Nc=!1,this.a.currentTime+=.001);this.ea(0)})).catch(x(this,
function(a){if("aborted"!=a.type){var b=G(a);this.dispatchEvent(b);b=[0,404,410];"net"==a.type&&-1!=b.indexOf(a.af.status)&&this.O&&this.ea(5E3)}}))):(zc(this),this.fc||(this.fc=!0,Cc(this)),this.ea(1E3))}};function Ac(a,b,c){a=a.$;var d=a.ca.length;a=0<d?a.ca[d-1]:null;return null!=a?null!=a.endTime?c.find(a.endTime):null:c.find(b)}function zc(a){if(!a.ga&&null!=a.ya){a.ga=!0;a.$.Ba(a.ya);var b=E({type:"started",bubbles:!1,na:a.ya});a.dispatchEvent(b)}}
function Bc(a,b){var c=b.n.split("/")[0],c=E({type:"adaptation",bubbles:!0,contentType:c,size:"video"!=c?null:{width:b.width,height:b.height},bandwidth:b.bandwidth});a.dispatchEvent(c)}function Cc(a){var b=E({type:"ended"});a.dispatchEvent(b)}h.ea=function(a){this.ha=window.setTimeout(this.Be.bind(this),a)};h.cc=function(){null!=this.ha&&(window.clearTimeout(this.ha),this.ha=null)};function Dc(a,b,c){H.call(this,a);this.a=b;this.c=c;this.D=this.ob=null;this.j=new Sa;this.Sb={};this.zb=[];this.xd=0;this.eb=new s;this.ad=null}q(Dc,H);Dc.prototype.destroy=function(){this.parent=null;for(var a=0;a<this.zb.length;++a)this.zb[a].close().catch(function(){});this.zb=[];this.Sb=this.D=this.ob=null;this.j.destroy();this.a=this.c=this.j=null};
function Ec(a){for(var b=new C,c=a.c.hd(),d=0;d<c.length;++d){var e=c[d];e.T.keySystem||e.Fa&&!Fc(e.Fa)||b.push(e.contentType,e)}for(var d={},e=!1,g=0;g<c.length;++g){var f=c[g];if(f.T.keySystem&&!b.has(f.contentType)){var k=f.T.keySystem,l=d[k];l||(l=f.T,l={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:l.Rd?"required":"optional",persistentState:l.He||a.c.lb()?"required":"optional",sessionTypes:[a.c.lb()?"persistent-license":"temporary"]},d[k]=l);if(f.Fa&&
(k=f.contentType+"Capabilities",k in l)){e=!0;l[k]||(l[k]=[]);var p;"audio"==f.contentType?p=f.T.Nd:"video"==f.contentType&&(p=f.T.$e);l[k].push({contentType:f.Fa,robustness:p})}}}if(!e)if(c.length)a.D=c[0].T;else throw a=Error("No DRM scheme info provided!"),a.type="drm",a;if(0==Object.keys(d).length)return a.c.Uc(b),a.eb.resolve(),Promise.resolve();p=new s;d=Gc(a,d,p);d=d.then(a.Od.bind(a,c,b));d=d.then(a.Ue.bind(a));p.reject(null);return d}
function Hc(a,b){null==a.ad&&(a.ad=window.setTimeout(function(){var a=Error("Timeout waiting for sessions.");a.type="storage";this.eb.reject(a)}.bind(a),b));return a.eb}function Gc(a,b,c){for(var d in b){var e=b[d];c=c.catch(function(){return navigator.requestMediaKeySystemAccess(d,[e])})}a.c.lb()&&(c=c.catch(function(){throw Error("Either none of the requested key systems are supported or none of the requested key systems support persistent state.");}));return c}h=Dc.prototype;
h.Od=function(a,b,c){for(var d=c.keySystem,e=c.getConfiguration(),g=["audio","video"],f=0;f<g.length;++f){var k=g[f];if(!b.has(k)){var l=e[k+"Capabilities"];if(l&&l.length){for(var l=l[0],p=[],n={},y=0;y<a.length;++y){var r=a[y];r.T.keySystem!=d||r.Fa!=l.contentType||r.id in n||(p.push(r),n[r.id]=!0,this.D?Ca(this.D,r.T):this.D=r.T)}b.set(k,p)}}}this.c.Uc(b);return c.createMediaKeys()};
h.Ue=function(a){this.ob=a;return this.a.setMediaKeys(this.ob).then(x(this,function(){return this.D.Ed?this.ob.setServerCertificate(this.D.Ed):Promise.resolve()})).then(x(this,function(){if(0<this.c.gc().length)Ic(this);else{for(var a=0;a<this.D.Sa.length;++a){var c=this.D.Sa[a];this.yd({type:"encrypted",initDataType:c.initDataType,initData:c.initData})}0==this.D.Sa.length&&J(this.j,this.a,"encrypted",this.yd.bind(this))}}))};
h.yd=function(a){var b=new Uint8Array(a.initData),c=Array.prototype.join.apply(b);if(!this.Sb[c]){try{var d=Jc(this)}catch(e){d=G(e);this.dispatchEvent(d);this.eb.reject(e);return}a=d.generateRequest(a.initDataType,a.initData);this.Sb[c]=!0;a.catch(x(this,function(a){if(this.Sb){this.Sb[c]=!1;var b=G(a);this.dispatchEvent(b);this.eb.reject(a)}}));this.zb.push(d)}};
function Ic(a){for(var b=a.c.gc(),c=0;c<b.length;++c){var d=Jc(a),e=d.load(b[c]);a.zb.push(d);e.catch(x(a,function(a){a=G(a);this.dispatchEvent(a)}))}}function Jc(a){var b=null;if(a.c.lb())try{b=a.ob.createSession("persistent-license")}catch(c){throw Error("Persistent licenses are not supported by this key system or platform.");}else b=a.ob.createSession();J(a.j,b,"message",a.te.bind(a));J(a.j,b,"keystatuseschange",a.le.bind(a));return b}h.te=function(a){Kc(this,a.target,this.D,a.message)};
h.le=function(a){var b=a.target.keyStatuses.values();for(a=b.next();!a.done;a=b.next()){var c;if(c=Lc[a.value])c=Error(c),c.type=a.value,a=G(c),this.dispatchEvent(a)}};
function Kc(a,b,c,d){d=new za(d);c.rd&&c.rd(d);(new bc(c.de,d.body,c.withCredentials,d.headers)).send().then(x(a,function(a){c.qd&&(a=c.qd(a));return b.update(a)})).then(x(a,function(){var a=E({type:"sessionReady",detail:b});this.dispatchEvent(a);this.xd++;this.xd>=this.zb.length&&this.eb.resolve()})).catch(x(a,function(a){a.cf=b;a=G(a);this.dispatchEvent(a)}))}
var Lc={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"A required key has expired and the content cannot be decrypted.","internal-error":"An unknown error has occurred in the CDM."};function Mc(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[]}function Nc(a,b){var c=new Oc(b);a.streamHistory.push(new Pc(c));if(c.videoHeight||!a.streamStats)a.streamStats=c}function Oc(a){this.videoWidth=a.width;this.videoHeight=a.height;this.videoMimeType=a.n;this.videoBandwidth=a.bandwidth}
function Pc(a){this.timestamp=D()/1E3;this.value=a};function P(a){H.call(this,null);this.a=a;this.c=null;this.j=new Sa;this.Oa=null;this.ta="en";this.xb=null;this.Sc=0;this.xc=null;this.gb=!1;this.J=new Mc;this.zc=!0;this.ic=1;this.lc=new Aa}q(P,H);m("shaka.player.Player",P);P.version="v1.4.2";
P.isBrowserSupported=function(){return!!window.MediaSource&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration&&!!window.Promise&&!!HTMLVideoElement.prototype.getVideoPlaybackQuality&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement"in document&&!!window.Uint8Array};
function Fc(a){return"text/vtt"==a?!!window.VTTCue:MediaSource.isTypeSupported(a)}P.isTypeSupported=Fc;P.prototype.destroy=function(){return this.Yc().then(x(this,function(){this.j.destroy();this.a=this.j=null})).catch(function(){})};P.prototype.destroy=P.prototype.destroy;
P.prototype.Yc=function(){if(!this.c)return Promise.resolve();this.gb&&Qc(this);this.a.pause();Ta(this.j);Rc(this);Sc(this);this.Oa.destroy();this.Oa=null;this.a.src="";var a=this.a.setMediaKeys(null);this.c&&(this.c.destroy(),this.c=null);this.gb=!1;this.J=new Mc;return a};P.prototype.unload=P.prototype.Yc;
P.prototype.load=function(a){var b=this.Yc();this.a.autoplay&&(Xa("load"),J(this.j,this.a,"timeupdate",this.ke.bind(this)));a.Eb(this.zc);return b.then(x(this,function(){return a.load(this.ta)})).then(x(this,function(){this.c=a;this.c.Ab(this.lc);J(this.j,this.c,"seekrangechanged",this.re.bind(this));this.Oa=new Dc(this,this.a,this.c);return Ec(this.Oa)})).then(x(this,function(){J(this.j,this.a,"error",this.Pc.bind(this));J(this.j,this.a,"playing",this.pe.bind(this));J(this.j,this.a,"pause",this.oe.bind(this));
return this.c.cd(this,this.a)})).then(x(this,function(){Tc(this)})).catch(x(this,function(b){a.destroy();this.c=null;this.Oa&&(this.Oa.destroy(),this.Oa=null);var d=G(b);this.dispatchEvent(d);return Promise.reject(b)}))};P.prototype.load=P.prototype.load;h=P.prototype;h.ke=function(){$a("load");this.J.playbackLatency=ab("load")/1E3;this.j.Zb(this.a,"timeupdate")};
h.Pc=function(a){this.a.error&&(a=this.a.error.code,a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(Uc[a]||"Unknown playback error."),a.type="playback",a=G(a),this.dispatchEvent(a)))};h.pe=function(){Xa("playing");!this.xb&&0>this.ic&&(this.a.playbackRate=0,this.Qc(this.a.currentTime,Date.now(),this.ic));this.gb&&Qc(this)};h.oe=function(){$a("playing");var a=ab("playing");if(!isNaN(a)){var b=this.J;b.playTime+=a/1E3}};h.re=function(a){this.Sc=a.start};
h.getStats=function(){if(!this.a.paused){$a("playing");var a=ab("playing");if(!isNaN(a)){var b=this.J;b.playTime+=a/1E3;Xa("playing")}}a=this.J;if(b=this.a.getVideoPlaybackQuality())a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames;return this.J};P.prototype.getStats=P.prototype.getStats;P.prototype.Td=function(){var a=this.a.videoWidth,b=this.a.videoHeight;return a&&b?{width:a,height:b}:null};P.prototype.getCurrentResolution=P.prototype.Td;
P.prototype.getVideoTracks=function(){return this.c?this.c.getVideoTracks():[]};P.prototype.getVideoTracks=P.prototype.getVideoTracks;P.prototype.getAudioTracks=function(){return this.c?this.c.getAudioTracks():[]};P.prototype.getAudioTracks=P.prototype.getAudioTracks;P.prototype.Jb=function(){return this.c?this.c.Jb():[]};P.prototype.getTextTracks=P.prototype.Jb;P.prototype.Wb=function(a,b){return this.c?this.c.Wb(a,void 0==b?!0:b):!1};P.prototype.selectVideoTrack=P.prototype.Wb;
P.prototype.nc=function(a,b){return this.c?this.c.nc(a,void 0==b?!0:b):!1};P.prototype.selectAudioTrack=P.prototype.nc;P.prototype.oc=function(a){return this.c?this.c.oc(a,!1):!1};P.prototype.selectTextTrack=P.prototype.oc;P.prototype.Fb=function(a){this.c&&this.c.Fb(a)};P.prototype.enableTextTrack=P.prototype.Fb;P.prototype.Eb=function(a){this.zc=a;this.c&&this.c.Eb(a)};P.prototype.enableAdaptation=P.prototype.Eb;P.prototype.Sd=function(){return this.zc};P.prototype.getAdaptationEnabled=P.prototype.Sd;
P.prototype.Ud=function(){return this.a.currentTime};P.prototype.getCurrentTime=P.prototype.Ud;P.prototype.Vd=function(){return this.a.duration};P.prototype.getDuration=P.prototype.Vd;P.prototype.Wd=function(){return this.a.muted};P.prototype.getMuted=P.prototype.Wd;P.prototype.$d=function(){return this.a.volume};P.prototype.getVolume=P.prototype.$d;P.prototype.play=function(){this.Gd(1);this.a.play()};P.prototype.play=P.prototype.play;P.prototype.pause=function(){this.a.pause()};
P.prototype.pause=P.prototype.pause;P.prototype.requestFullscreen=function(){this.a.requestFullscreen()};P.prototype.requestFullscreen=P.prototype.requestFullscreen;P.prototype.seek=function(a){this.a.currentTime=a};P.prototype.seek=P.prototype.seek;P.prototype.Se=function(a){xc=0>a?0:a};P.prototype.setStreamBufferSize=P.prototype.Se;P.prototype.Zd=function(){return xc};P.prototype.getStreamBufferSize=P.prototype.Zd;P.prototype.Ne=function(a){cc=a};P.prototype.setLicenseRequestTimeout=P.prototype.Ne;
P.prototype.Oe=function(a){Vc=a};P.prototype.setMpdRequestTimeout=P.prototype.Oe;P.prototype.Re=function(a){ec=a};P.prototype.setRangeRequestTimeout=P.prototype.Re;P.prototype.Pe=function(a){this.a.muted=a};P.prototype.setMuted=P.prototype.Pe;P.prototype.Te=function(a){this.a.volume=a};P.prototype.setVolume=P.prototype.Te;P.prototype.Qe=function(a){this.ta=Ga(a)};P.prototype.setPreferredLanguage=P.prototype.Qe;
P.prototype.Gd=function(a){Sc(this);0<=a?this.a.playbackRate=a:this.a.paused||(this.a.playbackRate=0,this.Qc(this.a.currentTime,Date.now(),a));this.ic=a};P.prototype.setPlaybackRate=P.prototype.Gd;P.prototype.Xd=function(){return this.ic};P.prototype.getPlaybackRate=P.prototype.Xd;P.prototype.Ab=function(a){if(!(a instanceof Aa))throw new TypeError("Argument must be a Restrictions instance.");this.lc=a.clone();this.c&&this.c.Ab(this.lc)};P.prototype.setRestrictions=P.prototype.Ab;P.prototype.Yd=function(){return this.lc.clone()};
P.prototype.getRestrictions=P.prototype.Yd;P.prototype.Kb=function(){return this.c?this.c.Kb():!1};P.prototype.isLive=P.prototype.Kb;function Sc(a){a.xb&&(window.clearTimeout(a.xb),a.xb=null)}function Tc(a){Rc(a);a.xc=window.setTimeout(a.Ce.bind(a),100)}function Rc(a){a.xc&&(window.clearTimeout(a.xc),a.xc=null)}
P.prototype.Qc=function(a,b,c){this.xb=null;var d=(Date.now()-b)/1E3*c;this.a.currentTime<this.Sc+(this.Kb()?1:.05)?this.a.pause():(d=Math.max(this.Sc,a+d),this.a.currentTime=d,this.xb=window.setTimeout(this.Qc.bind(this,a,b,c),250))};function Qc(a){$a("buffering");var b=a.J;b.bufferingTime+=ab("buffering")/1E3;a.gb=!1;a.dispatchEvent(E({type:"bufferingEnd"}))}
P.prototype.Ce=function(){Tc(this);if(!this.a.ended&&!this.a.seeking){var a=this.a.buffered,b=a.length?a.end(a.length-1):0,a=b-this.a.currentTime,b=b+.05;this.gb?a>this.c.jd()&&(Qc(this),this.a.play()):b<this.a.duration&&.1>a&&!this.a.paused&&(this.gb=!0,this.a.pause(),this.J.bufferingHistory.push(D()/1E3),Xa("buffering"),this.dispatchEvent(E({type:"bufferingStart"})))}};var Uc={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function Wc(){}Wc.prototype.Wa=function(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.u.length;++d){for(var e=c.u[d],g=e,f=0;f<g.f.length;++f)Fc(pc(g.f[f]))||(g.f.splice(f,1),--f);0==e.f.length&&(c.u.splice(d,1),--d)}for(b=0;b<a.length;++b)for(c=a[b],d=0;d<c.u.length;++d)c.u[d].f.sort(Xc)};function Xc(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return c<d?-1:c>d?1:0};function Yc(a){this.va=a}Yc.prototype.destroy=function(){this.va.destroy();this.va=null};Yc.prototype.update=function(a){var b=Zc(a),c=Zc(this.va);return Promise.all([b,c]).then(function(b){var c=b[0];b=b[1];var g=new Wc;g.Wa(this.va.t);a.Bb=this.va.Bb;a.$b=this.va.$b?new K(this.va.$b):null;a.F=this.va.F;var f=[];$c(a,this.va,c,b,f);g.Wa(a.t);return Promise.resolve(f)}.bind(this))};
function Zc(a){function b(a,b){return a.concat(b)}var c=a.t.map(function(a){return a.u}).reduce(b,[]).map(function(a){return a.f}).reduce(b,[]);a=c.map(function(a){return a.N.create()});return Promise.all(a).then(function(a){for(var b={},g=0;g<c.length;++g)b[c[g].K]=a[g];return Promise.resolve(b)})}
function $c(a,b,c,d,e){var g=new C;a.t.forEach(function(a,b){g.push(a.id||""+b,a)});var f=new C;b.t.forEach(function(a,b){f.push(a.id||""+b,a)});a=g.keys();for(b=0;b<a.length;++b){var k=a[b],l=g.get(k);1<l.length||(k=f.get(k))&&0!=k.length&&1==k.length&&(ad(l[0],k[0],c,d,e),l[0].duration=k[0].duration)}}
function ad(a,b,c,d,e){var g=new C;a.u.forEach(function(a,b){g.push(a.id||""+b,a)});var f=new C;b.u.forEach(function(a,b){f.push(a.id||""+b,a)});a=g.keys();for(b=0;b<a.length;++b){var k=a[b],l=g.get(k);1<l.length||(k=f.get(k))&&0!=k.length&&1==k.length&&bd(l[0],k[0],c,d,e)}}
function bd(a,b,c,d,e){var g=new C;a.f.forEach(function(a,b){g.push(a.id||""+b,a)});var f=new C;b.f.forEach(function(a,b){f.push(a.id||""+b,a)});b={};for(var k=g.keys(),l=0;l<k.length;++l){var p=k[l];b[p]=p;var n=g.get(p);1<n.length||((p=f.get(p))&&0!=p.length?1==p.length&&(cd(n[0],p[0],c,d),n[0].I=p[0].I,p[0].I=null,n[0].timestampOffset=p[0].timestampOffset):(e.push(n[0]),a.f.splice(a.f.indexOf(n[0]),1)))}k=f.keys();for(l=0;l<k.length;++l)p=k[l],b[p]||(b[p]=p,p=f.get(p),a.f.push(p[0]))}
function cd(a,b,c,d){a=c[a.K];b=d[b.K];a.length();a.Jc(b)&&a.length()};function Q(){this.c=this.P=null;this.j=new Sa;this.rb=Number.POSITIVE_INFINITY;this.Gb=!0}m("shaka.media.SimpleAbrManager",Q);Q.prototype.destroy=function(){this.j.destroy();this.c=this.P=this.j=null};Q.prototype.start=function(a,b){this.P&&this.c||(this.P=a,this.c=b,this.rb=Date.now()+4E3,J(this.j,this.P,"bandwidth",this.Oc.bind(this)),J(this.j,this.c,"adaptation",this.je.bind(this)))};Q.prototype.enable=function(a){this.Gb=a};
Q.prototype.getInitialVideoTrackId=function(){if(!this.c||!this.P)return null;var a=dd(this);return a?a.id:null};Q.prototype.Oc=function(){if(this.Gb&&!(Date.now()<this.rb)){var a=dd(this);if(a){if(a.active){this.rb=Date.now()+3E3;return}this.c.Wb(a.id,!1)}this.rb=Number.POSITIVE_INFINITY}};Q.prototype.je=function(){this.rb==Number.POSITIVE_INFINITY&&(this.rb=Date.now()+3E4)};
function dd(a){var b=a.c.getVideoTracks();if(0==b.length)return null;b.sort(da);var c;a:{c=a.c.getAudioTracks();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0;a=a.P.getBandwidth();for(var d=b[0],e=0;e<b.length;++e){var g=b[e],f=e+1<b.length?b[e+1]:{bandwidth:Number.POSITIVE_INFINITY};if(g.bandwidth&&(f=(f.bandwidth+c)/.85,a>=(g.bandwidth+c)/.95&&a<=f&&(d=g,d.active)))break}return d};function ed(a,b,c){H.call(this,null);this.ee=a;this.Kd=b;this.D=c?c:Ba();this.ma=null}q(ed,H);m("shaka.player.HttpVideoSource",ed);ed.prototype.destroy=function(){this.ma&&(this.ma.parentElement.removeChild(this.ma),this.ma=null);this.parent=this.D=null};h=ed.prototype;h.cd=function(a,b){this.parent=a;var c=b.mediaKeys;b.src=this.ee;c=b.setMediaKeys(c);this.Kd&&(this.ma=document.createElement("track"),this.ma.src=this.Kd,b.appendChild(this.ma),this.ma.track.mode="showing");return c};h.load=function(){return Promise.resolve()};
h.getVideoTracks=function(){return[]};h.getAudioTracks=function(){return[]};h.Jb=function(){return[]};h.jd=function(){return 5};h.hd=function(){var a=new sc;a.T=this.D;return[a]};h.Uc=function(){};h.Wb=function(){return!1};h.nc=function(){return!1};h.oc=function(){return!1};h.Fb=function(a){this.ma&&(this.ma.track.mode=a?"showing":"disabled")};h.Eb=function(){};h.Ab=function(){};h.gc=function(){return[]};h.lb=function(){return!1};h.Kb=function(){return!1};function R(a,b,c){H.call(this,null);this.d=a;this.L=b;this.sa=new Sa;this.W=new MediaSource;this.video=null;this.r=new C;this.Cb=c;this.mb=!1;this.ta="";this.sc=!1;this.J=null;this.ac=new s;this.Ra=this.bc=null;this.Ad=1;this.s={};this.vd=Number.POSITIVE_INFINITY;this.nb=Number.NEGATIVE_INFINITY;this.Lb=0;this.ed=!1;this.Da={};this.Vb=this.ha=null}q(R,H);m("shaka.player.StreamVideoSource",R);
R.prototype.destroy=function(){this.Vb&&(window.clearTimeout(this.Vb),this.Vb=null);this.cc();this.Da=null;this.sa.destroy();this.sa=null;fa(this.s).forEach(function(a){a.destroy()});this.r=this.s=null;this.d&&(this.d.destroy(),this.d=null);this.Cb.destroy();this.parent=this.bc=this.ac=this.J=this.video=this.W=this.L=this.Cb=null};h=R.prototype;
h.cd=function(a,b){if(!this.mb){var c=Error("Cannot call attach() right now.");c.type="stream";return Promise.reject(c)}this.parent=a;this.video=b;this.J=a.getStats();J(this.sa,this.W,"sourceopen",this.ne.bind(this));J(this.sa,this.L,"bandwidth",this.Oc.bind(this));c=this.video.mediaKeys;this.video.src=window.URL.createObjectURL(this.W);c=this.video.setMediaKeys(c);return Promise.all([this.ac,c])};
h.load=function(a){if(this.mb)return a=Error("Cannot call load() right now."),a.type="stream",Promise.reject(a);if(!this.d||0==this.d.t.length)return a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a);this.ta=a;(new Wc).Wa(this.d.t);if(0==this.d.t.length||0==this.d.t[0].u.length)return a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a);this.mb=!0;return Promise.resolve()};
h.ze=function(){var a=Date.now(),b=this.ha=null;this.zd(this.d.$b).then(x(this,function(a){b=new Yc(a);return b.update(this.d)})).then(x(this,function(c){b.destroy();b=null;for(var d=0;d<c.length;++d)fd(this,c[d]);this.bc&&this.Ab(this.bc);0==Object.keys(this.s).length?gd(this):this.ea((Date.now()-a)/1E3)})).catch(x(this,function(a){b&&(b.destroy(),b=null);"aborted"!=a.type&&(a=G(a),this.dispatchEvent(a),this.d&&this.ea(0))}))};h.zd=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};
function fd(a,b){var c=b.n.split("/")[0],d=a.s[c];if(d&&d.O==b){var e=a.r.get(b.n.split("/")[0]),g=e.map(function(a){return a.f}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.enabled});if(0==g.length){e.push(b);return}a.Da[c].Vc==b&&delete a.Da[c];d.Yb(g[0],a.d.F,!0);b.destroy()}b.destroy()}
h.getVideoTracks=function(){if(!this.r.has("video"))return[];for(var a=this.s.video,a=(a=a?a.O:null)?a.K:0,b=[],c=this.r.get("video"),d=0;d<c.length;++d)for(var e=c[d],g=0;g<e.f.length;++g){var f=e.f[g];if(f.enabled){var k=f.K,f=new ca(k,f.bandwidth,f.width,f.height);k==a&&(f.active=!0);b.push(f)}}return b};R.prototype.getVideoTracks=R.prototype.getVideoTracks;
R.prototype.getAudioTracks=function(){if(!this.r.has("audio"))return[];for(var a=this.s.audio,a=(a=a?a.O:null)?a.K:0,b=[],c=this.r.get("audio"),d=0;d<c.length;++d)for(var e=c[d],g=e.lang,f=0;f<e.f.length;++f){var k=e.f[f],l=k.K,k=new ea(l,k.bandwidth,g);l==a&&(k.active=!0);b.push(k)}return b};R.prototype.getAudioTracks=R.prototype.getAudioTracks;
R.prototype.Jb=function(){if(!this.r.has("text"))return[];for(var a=this.s.text,b=a?a.O:null,b=b?b.K:0,c=[],d=this.r.get("text"),e=0;e<d.length;++e)for(var g=d[e],f=g.lang,k=0;k<g.f.length;++k){var l=g.f[k].K,p=new ba(l,f);l==b&&(p.active=!0,p.enabled=a.Gc());c.push(p)}return c};R.prototype.getTextTracks=R.prototype.Jb;h=R.prototype;h.jd=function(){return this.d&&this.d.F||0};h.hd=function(){return this.mb?this.d.t[0].Fc():[]};
h.Uc=function(a){if(this.mb){for(var b={},c=this.d.t[0],d=0;d<c.u.length;++d){var e=c.u[d];b[e.K]=e}this.r.clear();c=a.keys();for(d=0;d<c.length;++d){var e=c[d],g=a.get(e);if("video"==e){var f=g[0].id;this.r.push(e,b[f])}else if("audio"==e)for(var f=g[0].Fa.split(";")[0],k=0;k<g.length;++k){var l=g[k];l.Fa.split(";")[0]==f&&this.r.push(e,b[l.id])}else for(k=0;k<g.length;++k)f=g[k].id,this.r.push(e,b[f])}this.sc=!0;if(a=this.r.get("audio"))hd(this,a),this.r.set("audio",a),a=a[0].lang||this.ta,Fa(2,
this.ta,a)&&(this.sc=!1);if(a=this.r.get("text"))hd(this,a),this.r.set("text",a),a=a[0].lang||this.ta,Fa(2,this.ta,a)||(this.sc=!1)}};h.Wb=function(a,b){return id(this,"video",a,b)};h.nc=function(a,b){return id(this,"audio",a,b)};h.oc=function(a,b){return id(this,"text",a,b)};h.Fb=function(a){var b=this.s.text;b&&b.rc(a)};h.Eb=function(a){this.Cb.enable(a)};
h.Ab=function(a){if(this.mb){this.bc=a;for(var b=0;b<this.d.t.length;++b)for(var c=this.d.t[b],d=0;d<c.u.length;++d)for(var e=c.u[d],g=0;g<e.f.length;++g){var f=e.f[g];f.enabled=!0;a.maxWidth&&f.width>a.maxWidth&&(f.enabled=!1);a.maxHeight&&f.height>a.maxHeight&&(f.enabled=!1);a.maxBandwidth&&f.bandwidth>a.maxBandwidth&&(f.enabled=!1);a.minBandwidth&&f.bandwidth<a.minBandwidth&&(f.enabled=!1)}}};h.gc=function(){return[]};h.lb=function(){return!1};h.Kb=function(){return this.d?this.d.ia:!1};
function id(a,b,c,d){if(!a.r.has(b)||!a.s[b])return!1;for(var e=a.r.get(b),g=0;g<e.length;++g)for(var f=e[g],k=0;k<f.f.length;++k){var l=f.f[k];if(l.K==c){if("text"!=b&&!a.ed)return c=a.Da[b],a.Da[b]={Vc:l,fd:null!=c&&c.fd||d},!0;Nc(a.J,l);a.s[b].Yb(l,a.d.F,d);return!0}}return!1}function hd(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var e=b[d];if(Fa(c,a.ta,e.lang)){b.splice(d,1);b.splice(0,0,e);return}}for(d=0;d<b.length;++d)if(e=b[d],e.Mb){b.splice(d,1);b.splice(0,0,e);break}}
h.ne=function(){this.sa.Zb(this.W,"sourceopen");gd(this).then(x(this,function(){this.ac.resolve()})).catch(x(this,function(a){this.ac.reject(a)}))};
function gd(a){for(var b=[],c=["audio","video","text"],d=0;d<c.length;++d){var e=c[d];a.r.has(e)&&b.push(a.r.get(e)[0])}a.Cb.start(a.L,a);var g=jd(a,b),b=fa(g).map(function(a){return a.N.create()});return Promise.all(b).then(x(a,function(a){if(!a.every(function(a){return a.length()}))return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);a=kd(this,a);if(!a)return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);if(!ld(this,g))return a=Error("Failed to create Stream objects."),
a.type="stream",Promise.reject(a);md(this,g,a);return Promise.resolve()})).catch(x(a,function(a){if("aborted"!=a.type)return Object.keys(this.s),this.d.ia?(this.ea(0),Promise.resolve()):Promise.reject(a)}))}function jd(a,b){for(var c={},d=0;d<b.length;++d){var e=b[d],g=e.f[0];if("video"==e.contentType)for(var f=a.Cb.getInitialVideoTrackId(),k=0;k<e.f.length&&(g=e.f[k],g.K!=f);++k);else"audio"==e.contentType&&(g=e.f[Math.floor(e.f.length/2)]);c[e.contentType]=g}return c}
function ld(a,b){var c={},d;for(d in b){var e=b[d],e="text"==d?new vc(a,a.video):nd(a,e);if(!e)return fa(c).forEach(function(a){a.destroy()}),!1;c[d]=e}a.s=c;return!0}function nd(a,b){var c;try{c=a.W.addSourceBuffer(pc(b))}catch(d){return null}try{c.timestampOffset=b.timestampOffset}catch(e){return null}return new wc(a,a.video,a.W,c,a.L)}
function md(a,b,c){a.Ad=a.video.playbackRate;a.video.playbackRate=0;var d;a.d.ia?(a.W.duration=c.end+2592E3,d=c.end):(a.W.duration=c.end-c.start,d=c.start);J(a.sa,a.video,"seeking",a.se.bind(a));a.video.currentTime!=d&&(a.video.currentTime=d,a.Ra=d);od(a,c.start,c.end);for(var e in a.s)c=a.s[e],J(a.sa,c,"started",a.xe.bind(a)),J(a.sa,c,"ended",a.we.bind(a)),d=b[e],Nc(a.J,d),c.Yb(d,a.d.F,!1);a.Fb(a.sc)}
h.xe=function(a){this.vd=Math.min(this.vd,a.na);this.nb=Math.max(this.nb,a.na);for(var b in this.s)if(!this.s[b].md())return;pd(this)};
function pd(a){for(var b=qd(a),c=0;c<b.length;++c)b[c].Ba(a.nb);rd(a,b);b=ua(a.r).map(function(a){return a.f}).reduce(function(a,b){return a.concat(b)},[]).map(function(a){var b=[a.N.create()];a.I&&b.push(a.I.create());return Promise.all(b)});Promise.all(b).then(x(a,function(a){for(var b=0;b<a.length;++b)a[b][0].Ba(this.nb);this.ed=!0;for(var c in this.Da)a=this.Da[c],b=this.s[c],Nc(this.J,a.Vc),b.Yb(a.Vc,this.d.F,a.fd);this.Da={}})).catch(x(a,function(a){"aborted"!=a.type&&(a=G(a),this.dispatchEvent(a))}))}
function rd(a,b){var c=kd(a,b);c&&od(a,c.start,c.end);var d;0!=a.nb?(d=a.video.currentTime+a.nb,a.video.currentTime=d,a.Ra=d):d=a.video.currentTime;a.d.ia&&c&&(a.Lb=c.end-d,a.Lb=Math.max(a.Lb,0));a.video.playbackRate=a.Ad;null!=a.d.Bb&&a.ea(a.Lb);sd(a)}h.Ae=function(){this.Vb=null;sd(this);var a=kd(this,qd(this));a&&(od(this,a.start,a.end),this.video.paused||td(this,this.video.currentTime,a.start,a.end))};
function od(a,b,c){b=E({type:"seekrangechanged",bubbles:!0,start:b,end:c});a.dispatchEvent(b)}h.se=function(){var a=this.video.currentTime;if(null!=this.Ra){if(a>=this.Ra-.01&&a<=this.Ra+.01){this.Ra=null;return}this.Ra=null}var b=kd(this,qd(this));if(b){var c=b.end;(b=td(this,a,b.start,c))||(a<=c+.01?b=!1:(this.video.currentTime=c,b=!0));if(!b)for(var d in this.s)this.s[d].Dd()}};function td(a,b,c,d){if(b>=c-.01)return!1;a.video.currentTime=Math.min(c+(a.d.ia?a.d.F:0),d);return!0}
h.we=function(){if(!this.d.ia){for(var a in this.s)if(!this.s[a].ld())return;"open"==this.W.readyState&&this.W.endOfStream()}};h.Oc=function(){var a=this.J,b=this.L.getBandwidth();a.estimatedBandwidth=b;a.bandwidthHistory.push(new Pc(b))};function qd(a){return fa(a.s).map(function(a){return a.b}).filter(function(a){return null!=a})}
function kd(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,e=0;e<b.length;++e){var g=b[e].Hc(),c=Math.max(c,g.start);null!=g.end&&(d=Math.min(d,g.end))}if(d==Number.POSITIVE_INFINITY)if(d=a.d.t[0],d.duration)d=(d.start||0)+d.duration;else return null;a.d.ia&&(d=Math.max(d-(a.d.F+a.Lb),c));return c>d?null:{start:c,end:d}}h.ea=function(a){if(null!=this.d.Bb){var b=Math.max(this.d.Bb,3);a=Math.max(b-a,0);this.ha=window.setTimeout(this.ze.bind(this),1E3*a)}};
h.cc=function(){this.ha&&(window.clearTimeout(this.ha),this.ha=null)};function sd(a){a.d.ia&&(a.Vb=window.setTimeout(a.Ae.bind(a),1E3))};function Xb(a,b){H.call(this,b);this.Ca=null;this.P=a}q(Xb,H);
function Yb(a){if(!window.indexedDB)return Promise.reject(Error("Offline storage requires IndexedDB support."));var b=new s,c=window.indexedDB.open("content_database",1);c.onupgradeneeded=x(a,function(a){this.Ca=a.target.result;ud(this,"group_store",{keyPath:"group_id"});ud(this,"stream_index_store",{keyPath:"stream_id"});a=ud(this,"content_store",{autoIncrement:"true"});a.createIndex("segment",["stream_id","segment_id"],{unique:!0});a.createIndex("stream","stream_id",{unique:!1})});c.onsuccess=x(a,
function(a){this.Ca=a.target.result;b.resolve()});c.onerror=function(){b.reject(c.error)};return b}function O(a){a.Ca&&a.Ca.close()}function ud(a,b,c){a.Ca.objectStoreNames.contains(b)&&a.Ca.deleteObjectStore(b);return a.Ca.createObjectStore(b,c)}
function vd(a,b,c,d,e){for(var g=[],f=[],k=0,l=0,p=[],n=b.map(function(a){return a.N.create()}),n=Promise.all(n),y=b.map(function(a){return a.I.create()}),y=Promise.all(y),n=Promise.all([n,y]).then(function(a){g=a[0];f=a[1];k=g.reduce(function(a,b){return a+b.length()},0)}),y=0;y<b.length;++y)n=n.then(function(a){return wd(this,b[a],g[a],f[a],k,l)}.bind(a,y)),n=n.then(function(a,b){l+=g[a].length();p.push(b)}.bind(a,y));return n.then(x(a,function(){return xd(yd(this))})).then(x(a,function(a){var b=
new s;c=ga(c);var g={group_id:a,stream_ids:p,session_ids:c,duration:d,key_system:e.keySystem},f=yd(this).put(g);f.onsuccess=function(){b.resolve(a)};f.onerror=function(){b.reject(f.error)};return b}))}function wd(a,b,c,d,e,g){var f=[xd(zd(a)),xd(Ad(a).index("stream"))],f=Promise.all(f).then(x(a,function(a){return{Xb:Math.max(a[0],a[1]),yb:new ArrayBuffer(0),Tc:0,g:[],Ec:null,Ye:e,Cd:g}})),f=f.then(a.ae.bind(a,c));return f=f.then(a.be.bind(a,b,d))}
function xd(a){var b=new s,c=a.openCursor(null,"prev");c.onsuccess=function(a){a.target.result?b.resolve(a.target.result.key+1):b.resolve(0)};c.onerror=function(){b.reject(c.error)};return b}h=Xb.prototype;h.be=function(a,b,c){var d=new s;a={stream_id:c.Xb,mime_type:a.n,codecs:a.aa,init_segment:b,references:c.g};var e=zd(this).put(a);e.onsuccess=function(){d.resolve(c.Xb)};e.onerror=function(){d.reject(e.error)};return d};
h.ae=function(a,b){for(var c=Promise.resolve(),d=0;d<a.length();++d)var e=a.get(d),g=this.Je.bind(this,e),f=d==a.length()-1,e=this.Md.bind(this,e,b,f),c=c.then(g),c=c.then(e);return c.then(function(){return Promise.resolve(b)}).catch(x(this,function(a){Bd(this,b.Xb);return Promise.reject(a)}))};
h.Md=function(a,b,c,d){var e=new s;0==b.yb.byteLength&&(b.Ec=a);b.yb=Cd(b.yb,d);b.Cd++;var g=E({type:"progress",detail:b.Cd/b.Ye*100,bubbles:!0});if(1048576<=b.yb.byteLength||c){c={stream_id:b.Xb,segment_id:b.Tc,content:b.yb};var f=Ad(this).put(c);b.g.push({start_time:b.Ec.startTime,start_byte:b.Ec.ab,end_time:a.endTime,url:"idb://"+b.Xb+"/"+b.Tc});b.Tc++;b.yb=new ArrayBuffer(0);f.onerror=function(){e.reject(f.error)};f.onsuccess=x(this,function(){this.dispatchEvent(g);e.resolve()})}else this.dispatchEvent(g),
e.resolve();return e};function Cd(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(new Uint8Array(a),0);c.set(new Uint8Array(b),a.byteLength);return c.buffer}h.Je=function(a){a=new dc(a.url.toString(),a.ab,a.Hb);a.L=this.P;return a.send()};function Zb(a,b,c){return Dd(Ad(a).index("segment"),[b,c]).then(function(a){return Promise.resolve(a.content)})}function Ed(a,b){return Dd(zd(a),b)}
function Fd(a,b){return Dd(yd(a),b).then(function(a){a.session_ids=ga(a.session_ids);return a.hasOwnProperty("duration")||a.hasOwnProperty("key_system")?Promise.resolve(a):Ed(this,a.df[0]).then(function(b){a.duration=b.duration;a.ce=b.ce;return Promise.resolve(a)})}.bind(a))}function Gd(a){var b=new s,c=[],d=yd(a).openCursor();d.onerror=function(){b.reject(d.error)};d.onsuccess=function(a){(a=a.target.result)?(c.push(a.key),a.continue()):b.resolve(c)};return b}
function Dd(a,b){var c=new s,d=a.get(b);d.onerror=function(){c.reject(d.error)};d.onsuccess=function(){if(d.result)c.resolve(d.result);else{var a=Error("Item not found.");a.type="storage";c.reject(a)}};return c}
function Bd(a,b){var c=new s,d=zd(a).delete(b);d.onerror=function(){c.reject(d.error)};var e=Ad(a);e.index("stream").openKeyCursor(IDBKeyRange.only(b)).onsuccess=function(a){if(a=a.target.result)e.delete(a.primaryKey),a.continue()};e.transaction.oncomplete=function(){c.resolve()};return c}h.Bc=function(a){return Fd(this,a).then(x(this,function(b){var c=[],d;for(d in b.stream_ids)c.push(Bd(this,b.stream_ids[d]));b=yd(this);c.push(b.delete(a));return Promise.all(c)}))};
function Ad(a){return Hd(a,"content_store")}function zd(a){return Hd(a,"stream_index_store")}function yd(a){return Hd(a,"group_store")}function Hd(a,b){return a.Ca.transaction([b],"readwrite").objectStore(b)};function Id(a){this.mc=a;this.b=null}Id.prototype.destroy=function(){this.mc=null;this.b&&(this.b.destroy(),this.b=null)};Id.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=[],b=0;b<this.mc.length;++b){var c=this.mc[b];a.push(new L(c.start_time,c.end_time,c.start_byte,null,new K(c.url)))}this.mc=null;this.b=new M(a);return Promise.resolve(this.b)};function S(a,b,c,d){M.call(this,a);this.Ua=b;this.Bd=c;this.Nb=d;this.ka=this.ub=this.R=null;Jd(this)}q(S,M);S.prototype.destroy=function(){this.Bd=this.Ua=null;M.prototype.destroy.call(this)};S.prototype.find=function(a){Kd(this,D()/1E3);return M.prototype.find.call(this,a)};S.prototype.Jc=function(a){Qb(this,a);null==this.R&&Jd(this);return!0};
function Jd(a){if(0!=a.length()){a.length();var b=null!=N(a).endTime?N(a).endTime:N(a).startTime;if(a.Ua.pa>a.Nb)a.R=b;else{var c=a.Nb-(a.Ua.pa+a.Bd.start);0>c?a.R=b:c<Math.max(N(a).startTime,N(a).endTime||0)?(N(a),a.R=b):a.R=c}a.ub=N(a).startTime;a.ka=a.first().startTime}}S.prototype.Ba=function(a){a=M.prototype.Ba.call(this,a);null!=this.R&&(this.ub+=a,this.ka+=a,this.ub>this.R&&(this.R+=a));return a};S.prototype.Hc=function(){return Ld(this,D()/1E3)};
function Ld(a,b){Kd(a,b);if(null==a.R||null==a.ub||null==a.ka)return{start:0,end:0};var c=b-a.Nb,d=a.R+c;null!=a.Ua.bb&&(d=d-a.ka-a.Ua.bb,0<d&&(a.ka+=d));c=a.ub+c;c=0<a.length()?null!=N(a).endTime?Math.min(c,N(a).endTime):c:a.ka;c=Math.max(c,a.ka);return{start:a.ka,end:c}}
function Kd(a,b){if(null!=a.Ua.bb)if(null==a.R)a.length();else{for(var c=a.R+(b-a.Nb),d=0,e=0;e<a.g.length;++e){var g=null;e<a.g.length-1?g=a.g[e+1].endTime:(g=a.g[e],g=null!=g.endTime?g.endTime+(g.endTime-g.startTime):null);if(null!=g&&g<c-a.Ua.bb)++d;else break}0<d&&a.g.splice(0,d)}};function Md(a,b,c,d,e,g){this.Q=a;this.X=b;this.dc=c;this.hb=d;this.hc=e;this.Ob=g;this.b=this.B=null}Md.prototype.destroy=function(){this.X=this.Q=null;lc(this.hb);this.hb=null;this.hc&&(lc(this.hc),this.hc=null);this.b&&(this.b.destroy(),this.b=null);this.B=null};
Md.prototype.create=function(){if(this.B)return this.B;var a=[this.hb.Ib()];"webm"==this.dc&&a.push(this.hc.Ib());return this.B=Promise.all(a).then(x(this,function(a){var c=a[0];a=a[1]||null;var d=null;"mp4"==this.dc?(d=new Ob,d=d.parse(new DataView(c),this.hb.ab,this.hb.url)):"webm"==this.dc&&(d=new Pb,d=d.parse(new DataView(c),new DataView(a),this.hb.url));if(!d)return c=Error("Failed to parse segment references from",this.dc,"container."),c.type="stream",Promise.reject(c);c="dynamic"==this.Q.type?
new S(d,this.Q,this.X,this.Ob):new M(d);return Promise.resolve(c)}))};function Nd(a,b,c,d){this.Q=a;this.X=b;this.G=c;this.Ob=d;this.b=null}Nd.prototype.destroy=function(){this.G=this.X=this.Q=null;this.b&&(this.b.destroy(),this.b=null)};
Nd.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=this.G.p,b=a.xa.uc,c=0,d=[],e=0;e<b.length&&b[e].duration;++e)for(var g=null!=b[e].startTime?b[e].startTime:c,f=b[e].repeat||0,k=0;k<=f;++k){var l=g+b[e].duration;0<d.length&&g!=c&&(d[d.length-1].end=g);d.push({start:g,end:l});c=g=l}b=[];for(c=0;c<d.length;++c){f=d[c].start;e=f/a.o;g=d[c].end/a.o;f=Od(this.G,c+a.fa,f);if(!f)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);b.push(new L(e,
g,0,null,new K(f)))}this.b="dynamic"==this.Q.type?new S(b,this.Q,this.X,this.Ob):new M(b);return Promise.resolve(this.b)};function Pd(){this.id=this.url=null;this.type="static";this.ua=this.Zc=this.e=null;this.F=5;this.bb=this.pa=this.Mc=null;this.Wc=1;this.v=[]}function Qd(){this.p=this.A=this.H=this.e=this.duration=this.start=this.id=null;this.Aa=[]}function Rd(){this.aa=this.n=this.height=this.width=this.contentType=this.lang=this.id=null;this.Mb=!1;this.p=this.A=this.H=this.e=null;this.qa=[];this.Z=[]}function Sd(){this.value=null}function Td(){this.contentType=this.lang=this.id=null}
function Ud(){this.p=this.A=this.H=this.e=this.aa=this.n=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.qa=[]}function Vd(){this.value=this.schemeIdUri=null;this.children=[];this.pssh=null}function Wd(){this.parsedPssh=this.psshBox=null}function Xd(){this.url=null}function Yd(){this.url=null}function Zd(){this.e=null;this.o=1;this.M=this.Za=this.Ga=this.w=null}
Zd.prototype.clone=function(){var a=new Zd;a.e=this.e?new K(this.e):null;a.o=this.o;a.w=this.w;a.Ga=T(this.Ga);a.Za=T(this.Za);a.M=T(this.M);return a};function $d(){this.Y=this.url=null}$d.prototype.clone=function(){var a=new $d;a.url=this.url?new K(this.url):null;a.Y=T(this.Y);return a};function ae(){this.Y=this.url=null}ae.prototype.clone=function(){var a=new ae;a.url=this.url?new K(this.url):null;a.Y=T(this.Y);return a};
function be(){this.e=null;this.o=1;this.q=this.w=null;this.fa=1;this.M=null;this.Ka=[]}be.prototype.clone=function(){var a=new be;a.e=this.e?new K(this.e):null;a.o=this.o;a.w=this.w;a.q=this.q;a.fa=this.fa;a.M=T(this.M);a.Ka=this.Ka.map(function(a){return a.clone()});return a};function ce(){this.pb=this.Qb=null}ce.prototype.clone=function(){var a=new ce;a.Qb=this.Qb?new K(this.Qb):null;a.pb=T(this.pb);return a};
function de(){this.o=1;this.q=this.w=null;this.fa=1;this.xa=this.ib=this.Ha=this.qb=null}de.prototype.clone=function(){var a=new de;a.o=this.o;a.w=this.w;a.q=this.q;a.fa=this.fa;a.qb=this.qb;a.Ha=this.Ha;a.ib=this.ib;a.xa=T(this.xa);return a};function ee(){this.uc=[]}ee.prototype.clone=function(){var a=new ee;a.uc=this.uc.map(function(a){return a.clone()});return a};function fe(){this.repeat=this.duration=this.startTime=null}
fe.prototype.clone=function(){var a=new fe;a.startTime=this.startTime;a.duration=this.duration;a.repeat=this.repeat;return a};function ge(a,b){this.Db=a;this.end=b}ge.prototype.clone=function(){return new ge(this.Db,this.end)};Pd.TAG_NAME="MPD";Qd.TAG_NAME="Period";Rd.TAG_NAME="AdaptationSet";Sd.TAG_NAME="Role";Td.TAG_NAME="ContentComponent";Ud.TAG_NAME="Representation";Vd.TAG_NAME="ContentProtection";Wd.TAG_NAME="cenc:pssh";Xd.TAG_NAME="BaseURL";Yd.TAG_NAME="Location";Zd.TAG_NAME="SegmentBase";
$d.TAG_NAME="RepresentationIndex";ae.TAG_NAME="Initialization";be.TAG_NAME="SegmentList";ce.TAG_NAME="SegmentURL";de.TAG_NAME="SegmentTemplate";ee.TAG_NAME="SegmentTimeline";fe.TAG_NAME="S";
Pd.prototype.parse=function(a,b){this.url=new K(a.e);this.id=U(b,"id",V);this.type=U(b,"type",V)||"static";this.ua=U(b,"mediaPresentationDuration",he);this.F=U(b,"minBufferTime",he,this.F);this.Mc=U(b,"minimumUpdatePeriod",he,this.Mc);this.pa=U(b,"availabilityStartTime",ie,this.pa);this.bb=U(b,"timeShiftBufferDepth",he,this.bb);this.Wc=U(b,"suggestedPresentationDelay",he,this.Wc);var c=W(this,b,Xd);this.e=je(a.e,c?c.url:null);if(c=W(this,b,Yd))this.Zc=je(a.e,c.url);this.v=ke(this,b,Qd)};
Qd.prototype.parse=function(a,b){this.id=U(b,"id",V);this.start=U(b,"start",he);this.duration=U(b,"duration",he);var c=W(this,b,Xd);this.e=je(a.e,c?c.url:null);this.H=W(this,b,Zd);this.A=W(this,b,be);this.p=W(this,b,de);this.Aa=ke(this,b,Rd)};
Rd.prototype.parse=function(a,b){var c=W(this,b,Td)||{},d=W(this,b,Sd);this.id=U(b,"id",V);this.lang=U(b,"lang",V,c.lang);this.contentType=U(b,"contentType",V,c.contentType);this.width=U(b,"width",X);this.height=U(b,"height",X);this.n=U(b,"mimeType",V);this.aa=U(b,"codecs",V);this.Mb=d&&"main"==d.value;this.lang&&(this.lang=Ga(this.lang));c=W(this,b,Xd);this.e=je(a.e,c?c.url:null);this.qa=ke(this,b,Vd);!this.contentType&&this.n&&(this.contentType=this.n.split("/")[0]);this.H=a.H?le(this,b,a.H):W(this,
b,Zd);this.A=a.A?le(this,b,a.A):W(this,b,be);this.p=a.p?le(this,b,a.p):W(this,b,de);this.Z=ke(this,b,Ud);!this.n&&this.Z.length&&(this.n=this.Z[0].n,!this.contentType&&this.n&&(this.contentType=this.n.split("/")[0]))};Sd.prototype.parse=function(a,b){this.value=U(b,"value",V)};Td.prototype.parse=function(a,b){this.id=U(b,"id",V);this.lang=U(b,"lang",V);this.contentType=U(b,"contentType",V);this.lang&&(this.lang=Ga(this.lang))};
Ud.prototype.parse=function(a,b){this.id=U(b,"id",V);this.bandwidth=U(b,"bandwidth",X);this.width=U(b,"width",X,a.width);this.height=U(b,"height",X,a.height);this.n=U(b,"mimeType",V,a.n);this.aa=U(b,"codecs",V,a.aa);this.lang=a.lang;var c=W(this,b,Xd);this.e=je(a.e,c?c.url:null);this.qa=ke(this,b,Vd);this.H=a.H?le(this,b,a.H):W(this,b,Zd);this.A=a.A?le(this,b,a.A):W(this,b,be);this.p=a.p?le(this,b,a.p):W(this,b,de);0==this.qa.length&&(this.qa=a.qa)};
Vd.prototype.parse=function(a,b){this.schemeIdUri=U(b,"schemeIdUri",V);this.value=U(b,"value",V);this.pssh=W(this,b,Wd);this.children=Array.prototype.slice.call(b.childNodes)};Wd.prototype.parse=function(a,b){var c=me(b);if(c){this.psshBox=ka(c);try{this.parsedPssh=new Wa(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d;}}};Xd.prototype.parse=function(a,b){this.url=me(b)};Yd.prototype.parse=function(a,b){this.url=me(b)};
Zd.prototype.parse=function(a,b){this.e=a.e||this.e;this.o=U(b,"timescale",X,this.o);this.w=U(b,"presentationTimeOffset",Z,this.w);this.Ga=U(b,"indexRange",ne,this.Ga);this.Za=W(this,b,$d)||this.Za;this.M=W(this,b,ae)||this.M};$d.prototype.parse=function(a,b){var c=U(b,"sourceURL",V);this.url=je(a.e,c);this.Y=U(b,"range",ne,T(a.Ga))};ae.prototype.parse=function(a,b){var c=U(b,"sourceURL",V);this.url=je(a.e,c);this.Y=U(b,"range",ne)};
be.prototype.parse=function(a,b){this.e=a.e||this.e;this.o=U(b,"timescale",X,this.o);this.w=U(b,"presentationTimeOffset",Z,this.w);this.q=U(b,"duration",X,this.q);this.fa=U(b,"startNumber",Z,this.fa);this.M=W(this,b,ae)||this.M;this.Ka=ke(this,b,ce)||this.Ka};ce.prototype.parse=function(a,b){var c=U(b,"media",V);this.Qb=je(a.e,c);this.pb=U(b,"mediaRange",ne)};
de.prototype.parse=function(a,b){this.o=U(b,"timescale",X,this.o);this.w=U(b,"presentationTimeOffset",Z,this.w);this.q=U(b,"duration",X,this.q);this.fa=U(b,"startNumber",Z,this.fa);this.qb=U(b,"media",V,this.qb);this.Ha=U(b,"index",V,this.Ha);this.ib=U(b,"initialization",V,this.ib);this.xa=W(this,b,ee)||this.xa};ee.prototype.parse=function(a,b){this.uc=ke(this,b,fe)};fe.prototype.parse=function(a,b){this.startTime=U(b,"t",Z);this.duration=U(b,"d",Z);this.repeat=U(b,"r",Z)};
function je(a,b){var c=b?new K(b):null;return a?c?a.resolve(c):a:c}function le(a,b,c){var d=T(c);(b=oe(b,c.constructor.TAG_NAME))&&d.parse(a,b);return d}function W(a,b,c){var d=null;if(b=oe(b,c.TAG_NAME))d=new c,d.parse(a,b);return d}function oe(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}
function ke(a,b,c){for(var d=[],e=0;e<b.childNodes.length;e++)if(b.childNodes[e].tagName==c.TAG_NAME){var g=new c;g.parse.call(g,a,b.childNodes[e]);d.push(g)}return d}function me(a){a=a.firstChild;return a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function T(a){return a?a.clone():null}function U(a,b,c,d){a=c(a.getAttribute(b));return null!=a?a:void 0!==d?d:null}function ie(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function he(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return null;a=0;var c=Z(b[1]);c&&(a+=31536E3*c);(c=Z(b[2]))&&(a+=2592E3*c);(c=Z(b[3]))&&(a+=86400*c);(c=Z(b[4]))&&(a+=3600*c);(c=Z(b[5]))&&(a+=60*c);b=window.parseFloat(b[6]);(b=isNaN(b)?null:b)&&(a+=b);return a}
function ne(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Z(b[1]);if(null==a)return null;b=Z(b[2]);return null==b?null:new ge(a,b)}function X(a){a=window.parseInt(a,10);return 0<a?a:null}function Z(a){a=window.parseInt(a,10);return 0<=a?a:null}function V(a){return a};function pe(a,b,c){for(var d=a.p,e=[],g=0;g<c;++g){var f=g+b,k=(f-1)*d.q,l=k/d.o,k=(k+d.q)/d.o,f=Od(a,f-1+d.fa,(f-1)*d.q);if(!f)return null;e.push(new L(l,k,0,null,new K(f)))}return e}function Od(a,b,c){if(!a.p)return null;var d=a.p.qb;return d?(b=qe(d,a.id,b,a.bandwidth,c))?a.e?a.e.resolve(b):b:null:a.e?new K(a.e):null}
function qe(a,b,c,d,e){var g={RepresentationID:b,Number:c,Bandwidth:d,Time:e};a=a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=g[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;c=Math.max(0,c-a.length);return Array(c+1).join("0")+a});try{return new K(a)}catch(f){if(f instanceof URIError)return null;throw f;}};function re(a){Sb.call(this,a);this.h.responseType="text";this.h.Pb=3;this.h.kc=Vc;this.h.Jd=!0}q(re,Sb);var Vc=0;re.prototype.send=function(){var a=this.url;return this.pc().then(function(b){b=b.responseText;if(b=(new DOMParser).parseFromString(b,"text/xml")){var c={e:new K(a)};b=W(c,b,Pd)}else b=null;if(b)return Promise.resolve(b);b=Error("MPD parse failure.");b.type="mpd";return Promise.reject(b)})};function se(a,b,c){this.Q=a;this.X=b;this.G=c;this.b=null}se.prototype.destroy=function(){this.G=this.X=this.Q=null;this.b&&(this.b.destroy(),this.b=null)};se.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=this.G.A,b=0,c=[],d=0;d<a.Ka.length;++d){var e=a.Ka[d],b=0==d?0:b,g=null,f=null,k=b/a.o;a.q?(g=b+a.q,f=g/a.o):(f=k+this.X.duration,g=f*a.o);var b=g,g=0,l=null;e.pb&&(g=e.pb.Db,l=e.pb.end);c.push(new L(k,f,g,l,new K(e.Qb)))}this.b=new M(c);return Promise.resolve(this.b)};function te(a,b,c,d){var e=1,g=0,f;if(a.pa>d)f=null;else{var k=a.Wc||0,l=a.bb||0;f=c.p;f=f.q/f.o;var p=d-(a.pa+b.start);0>p?f=null:(l=p-2*f-l,0>l&&(l=0),l=Math.ceil(l/f)*f,p-=f,0>p?f=null:(k=Math.floor(p/f)*f-k,0>k&&(k=0),k=Math.floor(k/f)*f,f={gd:l/f+1,current:(k>=l?k:l)/f+1}))}f&&(e=f.gd,g=f.current-f.gd+1);e=pe(c,e,g);if(null==e)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;S.call(this,e,a,b,d);this.G=c;this.tb=this.V=0<this.length()?a.pa+b.start+N(this).endTime:null;
this.sb=f?f.current+1:null}q(te,S);te.prototype.destroy=function(){this.G=null;S.prototype.destroy.call(this)};te.prototype.find=function(a){var b=D()/1E3;ue(this,b);Kd(this,b);return M.prototype.find.call(this,a)};te.prototype.Jc=function(a){if(null!=this.V||!(a instanceof te)||null==a.V)return!1;this.V=a.V;this.tb=a.tb;this.sb=a.sb;Qb(this,a);ue(this,D()/1E3);Jd(this);return!0};te.prototype.Ba=function(a){a=S.prototype.Ba.call(this,a);null!=this.V&&(this.V+=a,this.tb+=a);return a};
te.prototype.Hc=function(){var a=D()/1E3;ue(this,a);return Ld(this,a)};function ue(a,b){if(null!=a.V&&null!=a.tb&&null!=a.sb){var c=a.G.p,c=c.q/c.o,d=Math.floor((a.tb+(b-a.Nb)-a.V)/c);if(0!=d){var e=pe(a.G,a.sb,d);Array.prototype.push.apply(a.g,Nb(e,a.na));a.V+=d*c;a.sb+=d}}};function ve(a,b,c,d){this.Q=a;this.X=b;this.G=c;this.Ob=d;this.b=null}ve.prototype.destroy=function(){this.G=this.X=this.Q=null;this.b&&(this.b.destroy(),this.b=null)};
ve.prototype.create=function(){if(this.b)return Promise.resolve(this.b);if("dynamic"==this.Q.type)try{this.b=new te(this.Q,this.X,this.G,this.Ob)}catch(a){return Promise.reject(a)}else{var b=this.G.p,b=pe(this.G,1,Math.ceil(this.X.duration/(b.q/b.o)));if(!b)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b);this.b=new M(b)}return Promise.resolve(this.b)};function we(a){this.kb=a}
we.prototype.Wa=function(a){for(var b=D()/1E3,c=0;c<a.v.length;++c)for(var d=a.v[c],e=0;e<d.Aa.length;++e){var g=d.Aa[e];if("text"!=g.contentType)for(var f=0;f<g.Z.length;++f){var k=g.Z[f],l=0,l=l+(k.H?1:0),l=l+(k.A?1:0),l=l+(k.p?1:0);0==l?(g.Z.splice(f,1),--f):1!=l&&(k.H?(k.A=null,k.p=null):k.A&&(k.p=null))}}xe(a);for(c=0;c<a.v.length;++c)for(d=a.v[c],e=0;e<d.Aa.length;++e){f=g=d.Aa[e];k=null;for(l=0;l<f.Z.length;++l){var p=f.Z[l].n||"";k?p!=k&&(f.Z.splice(l,1),--l):k=p}0==g.Z.length&&(d.Aa.splice(e,
1),--e)}"dynamic"==a.type&&null==a.pa&&(a.pa=b);c=new uc;"dynamic"==a.type&&(c.ia=!0,c.Bb=a.Mc,c.$b=a.Zc?new K(a.Zc):new K(a.url));c.F=a.F||5;for(d=0;d<a.v.length;++d){e=a.v[d];if(null==e.start)break;g=new tc;g.id=e.id;g.start=e.start||0;g.duration=e.duration;for(f=0;f<e.Aa.length;++f){k=e.Aa[f];l=new qc;l.id=k.id;l.lang=k.lang||"";l.contentType=k.contentType||"";l.Mb=k.Mb;for(p=0;p<k.Z.length;++p){var n=k.Z[p],y=l.Na.slice(0),r=n,v=y,F=[];if(0==r.qa.length)F.push(Ba());else if(this.kb)for(var u=
0;u<r.qa.length;++u){var t=this.kb(r.qa[u]);t&&F.push(t)}if(0==v.length)Array.prototype.push.apply(v,F);else for(r=0;r<v.length;++r){u=!1;for(t=0;t<F.length;++t)if(v[r].key()==F[t].key()){u=!0;break}u||(v.splice(r,1),--r)}if(!(0==y.length&&0<l.Na.length)){F=a;v=e;r=b;if(n.e){var u=null,t=1,w=0;if(n.H)u=n.n.split("/")[1],"mp4"!=u&&"webm"!=u?u=null:(t=n.H,"webm"!=u||t.M?t.Ga||t.Za&&t.Za.Y?(w=t.Za,w||(w=new $d,w.url=new K(n.e),w.Y=t.Ga?t.Ga.clone():null),w=ye(w),t=t.M?ye(t.M):null,v=new Md(F,v,u,w,t,
r),F=new mc(t),r=new nc,r.N=v,r.I=F,u=r):u=null:u=null),t=n.H.o,w=n.H.w;else if(n.A)r=n.A,!r.q&&1<r.Ka.length?u=null:r.q||v.duration||1!=r.Ka.length?(r=r.M?ye(r.M):null,v=new se(F,v,n),F=new mc(r),r=new nc,r.N=v,r.I=F,u=r):u=null,t=n.A.o,w=n.A.w;else if(n.p){b:if(u=n.p,t=u,w=0,w+=t.Ha?1:0,w+=t.xa?1:0,w+=t.q?1:0,0==w?t=!1:(1!=w&&(t.Ha?(t.xa=null,t.q=null):t.xa&&(t.q=null)),t=!0),t){t=null;if(u.ib&&(t=(u=n.p.ib)?ze(n,u,ae):null,!t)){u=null;break b}u=t?ye(t):null;var Y=v,t=n,w=r,v=t.p;if(v.Ha)if(v=F,
F=Y,r=t,t=w,w=u,Y=r.n.split("/")[1],"mp4"!=Y&&"webm"!=Y||"webm"==Y&&!w||!Od(r,1,0))v=null;else{var nb=void 0;(nb=(nb=r.p.Ha)?ze(r,nb,$d):null)?(r=ye(nb),v=new Md(v,F,Y,r,w,t)):v=null}else v=v.qb?v.xa?new Nd(F,Y,t,w):v.q?"dynamic"!=F.type&&null==Y.duration?null:new ve(F,Y,t,w):void 0:null;v?(F=new mc(u),r=new nc,r.N=v,r.I=F,u=r):u=null}else u=null;t=n.p.o;w=n.p.w}else"text"==n.n.split("/")[0]&&(u=new nc,u.N=new Rb(new K(n.e)));u?(u.id=n.id,w&&(u.timestampOffset=-1*w/t),u.bandwidth=n.bandwidth,u.width=
n.width,u.height=n.height,u.n=n.n||"",u.aa=n.aa||"",n=u):n=null}else n=null;n&&(l.f.push(n),l.Na=y)}}g.u.push(l)}c.t.push(g)}return c};
function xe(a){if(a.v.length){null==a.v[0].start&&(a.v[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.ua=null);b(a.ua)&&1==a.v.length&&!b(a.v[0].duration)&&(a.v[0].duration=a.ua);for(var c=0,d=!0,e=0;e<a.v.length;++e){var g=a.v[e-1],f=a.v[e],k=a.v[e+1]||{start:a.ua};!b(f.start)&&g&&b(g.start)&&b(g.duration)&&(f.start=g.start+g.duration);!b(f.duration)&&b(k.start)&&(f.duration=k.start-f.start);null!=f.start&&null!=f.duration?c+=f.duration:d=!1}b(a.ua)||(e=a.v[a.v.length-1],d?
a.ua=c:b(e.start)&&b(e.duration)?a.ua=e.start+e.duration:"dynamic"!=a.type&&(a.ua=c))}}function ze(a,b,c){b=qe(b,a.id,null,a.bandwidth,null);if(!b)return null;c=new c;c.url=a.e&&b?a.e.resolve(b):b;return c}function ye(a){var b=new K(a.url),c=0,d=null;a.Y&&(c=a.Y.Db,d=a.Y.end);return new kc(b,c,d)};function $(a,b,c){b||(b=new La);c||(c=new Q);R.call(this,null,b,c);this.kd=a;this.qc=[];this.timeoutMs=3E4}q($,R);m("shaka.player.OfflineVideoSource",$);$.retrieveGroupIds=function(){var a=new Xb(null,null),b=Yb(a).then(function(){return Gd(a)});b.then(function(){O(a)}).catch(function(){O(a)});return b};
$.prototype.Ve=function(a,b,c,d){var e,g={},f=[];a=new re(a);var k=Ga(b);return a.send().then(x(this,function(a){this.d=(new we(c)).Wa(a);return this.d.ia?Promise.reject(Error("Unable to store live streams offline.")):R.prototype.load.call(this,k)})).then(x(this,function(){var a=document.createElement("video");a.src=window.URL.createObjectURL(this.W);e=new Dc(null,a,this);J(this.sa,e,"sessionReady",this.ue.bind(this));return Ec(e)})).then(x(this,function(){for(var a=ua(this.r),b=0;b<a.length;++b)for(var c=
a[b],e=0;e<c.f.length;++e){var f=c.f[e];g[f.K]=f}return d()})).then(x(this,function(a){for(var b=0;b<a.length;++b){var c=a[b],d=g[c];if(d)f.push(d);else return Promise.reject(Error("Invalid stream ID chosen: "+c))}var e=["audio","video"];f=f.filter(function(a){return 0>e.indexOf(a.n.split("/")[0])?!1:!0});a=f.map(function(a){return a.I.create()});return Promise.all(a)})).then(x(this,function(a){for(var b=f,c=[],d=0;d<b.length;++d)try{c[d]=this.W.addSourceBuffer(pc(b[d]))}catch(e){}if(b.length!=c.length)a=
Error("Error initializing streams."),a.type="storage",a=Promise.reject(a);else{for(d=0;d<a.length;++d)(b=a[d])&&c[d].appendBuffer(b);a=Promise.resolve()}return a})).then(x(this,function(){return Hc(e,this.timeoutMs)})).then(x(this,function(){return Ae(this,f,e.D,this.d.t[0].duration)}))};$.prototype.store=$.prototype.Ve;$.prototype.ue=function(a){this.qc.push(a.detail.sessionId)};
function Ae(a,b,c,d){var e=new Xb(a.L,a),g=Yb(e);return g=g.then(x(a,function(){return vd(e,b,this.qc,d,c)})).then(function(a){O(e);return Promise.resolve(a)}).catch(function(a){O(e);return Promise.reject(a)})}
$.prototype.load=function(a){var b=new Xb(null,null),c,d;return Yb(b).then(x(this,function(){return Fd(b,this.kd)})).then(x(this,function(a){var g=[];this.qc=a.session_ids;c=a.duration;d=a.key_system;for(var f=0;f<a.stream_ids.length;++f)g.push(Ed(b,a.stream_ids[f]));return Promise.all(g)})).then(x(this,function(b){var g=c,f=d,k=new uc;k.F=5;for(var l=new tc,p=0;p<b.length;++p){var n=b[p],y=new nc,r=new Id(n.references),v=new Uint8Array(n.init_segment),v=new K("data:application/octet-stream;base64,"+
ja(v)),v=new mc(new kc(v,0,null));y.N=r;y.I=v;y.n=n.mime_type;y.aa=n.codecs;n=new wa(f,"",!1,null);r=new qc;r.f.push(y);r.Na.push(n);r.contentType=y.n.split("/")[0];l.u.push(r);l.duration=g}k.t.push(l);this.d=k;return R.prototype.load.call(this,a)})).then(function(){O(b);return Promise.resolve()}).catch(function(a){O(b);return Promise.reject(a)})};
$.prototype.Bc=function(){var a=new Xb(null,null);return Yb(a).then(a.Bc.bind(a,this.kd)).then(function(){O(a);return Promise.resolve()}).catch(function(b){O(a);return Promise.reject(b)})};$.prototype.deleteGroup=$.prototype.Bc;$.prototype.gc=function(){return this.qc};$.prototype.lb=function(){return!0};function Be(a,b,c,d){c||(c=new La);d||(d=new Q);R.call(this,null,c,d);this.ie=a;this.kb=b}q(Be,R);m("shaka.player.DashVideoSource",Be);Be.prototype.destroy=function(){this.kb=null;R.prototype.destroy.call(this)};Be.prototype.load=function(a){return(new re(this.ie)).send().then(x(this,function(b){this.d=(new we(this.kb)).Wa(b);return R.prototype.load.call(this,a)}))};Be.prototype.zd=function(a){return(new re(a.toString())).send().then(x(this,function(a){a=(new we(this.kb)).Wa(a);return Promise.resolve(a)}))};}.bind(g,this))();
if (typeof(module)!="undefined"&&module.exports)module.exports=g.shaka;
else if (typeof(define)!="undefined" && define.amd)define(function(){return g.shaka});
else this.shaka=g.shaka;
})();

