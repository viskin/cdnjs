// Peity jQuery plugin version 0.5.0
// (c) 2011 Ben Pickles
//
// http://benpickles.github.com/peity/
//
// Released under MIT license.
(function(h,k){function n(a,i){var b=k.createElement("canvas");b.setAttribute("width",a*l);b.setAttribute("height",i*l);l!=1&&b.setAttribute("style","width:"+a+"px;height:"+i+"px");return b}var f=h.fn.peity=function(a,i){k.createElement("canvas").getContext&&this.each(function(){h(this).change(function(){var b=h.extend({},i),d=this;h.each(b,function(a,e){h.isFunction(e)&&(b[a]=e.call(d))});var g=h(this).html();f.graphers[a].call(this,h.extend({},f.defaults[a],b));h(this).trigger("chart:changed",g)}).trigger("change")});
return this};f.graphers={};f.defaults={};f.add=function(a,i,b){f.graphers[a]=b;f.defaults[a]=i};var l=window.devicePixelRatio||1;f.add("pie",{colours:["#FFF4DD","#FF9900"],delimeter:"/",diameter:16},function(a){var i=h(this),b=i.text().split(a.delimeter),d=parseFloat(b[0]),g=parseFloat(b[1]),b=-Math.PI/2,d=d/g*Math.PI*2,g=n(a.diameter,a.diameter),c=g.getContext("2d"),e=g.width/2;c.beginPath();c.moveTo(e,e);c.arc(e,e,e,d+b,d==0?Math.PI*2:b,!1);c.fillStyle=a.colours[0];c.fill();c.beginPath();c.moveTo(e,
e);c.arc(e,e,e,b,d+b,!1);c.fillStyle=a.colours[1];c.fill();i.wrapInner(h("<span>").hide()).append(g)});f.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",strokeWidth:1,delimeter:",",height:16,max:null,width:32},function(a){var i=h(this),b=n(a.width,a.height),d=i.text().split(a.delimeter);d.length==1&&d.push(d[0]);var g=Math.max.apply(Math,d.concat([a.max])),c=b.getContext("2d"),e=b.width,f=b.height,g=f/g,p=e/(d.length-1),m=[],j;c.beginPath();c.moveTo(0,f);for(j=0;j<d.length;j++){var k=j*p,o=f-
g*d[j];m.push({x:k,y:o});c.lineTo(k,o)}c.lineTo(e,f);c.fillStyle=a.colour;c.fill();if(a.strokeWidth){c.beginPath();c.moveTo(0,m[0].y);for(j=0;j<m.length;j++)c.lineTo(m[j].x,m[j].y);c.lineWidth=a.strokeWidth*l;c.strokeStyle=a.strokeColour;c.stroke()}i.wrapInner(h("<span>").hide()).append(b)});f.add("bar",{colour:"#4D89F9",delimeter:",",height:16,max:null,width:32},function(a){var f=h(this),b=f.text().split(a.delimeter),d=Math.max.apply(Math,b.concat([a.max])),g=n(a.width,a.height),c=g.getContext("2d"),
e=g.height,d=e/d,k=g.width/b.length;c.fillStyle=a.colour;for(a=0;a<b.length;a++){var l=d*b[a];c.fillRect(a*k,e-l,k,l)}f.wrapInner(h("<span>").hide()).append(g)})})(jQuery,document);
