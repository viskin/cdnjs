// Peity jQuery plugin version 3.0.0
// (c) 2014 Ben Pickles
//
// http://benpickles.github.io/peity
//
// Released under MIT license.
(function(g,v,h){var p=function(a,b){var d=v.createElementNS("http://www.w3.org/2000/svg",a);g(d).attr(b);return d},x="createElementNS"in v&&p("svg").createSVGRect,e=g.fn.peity=function(a,b){x&&this.each(function(){var d=g(this),c=d.data("peity");c?(a&&(c.type=a),g.extend(c.opts,b)):(c=new w(d,a,g.extend({},e.defaults[a],b)),d.change(function(){c.draw()}).data("peity",c));c.draw()});return this},w=function(a,b,d){this.$el=a;this.type=b;this.opts=d},r=w.prototype;r.draw=function(){e.graphers[this.type].call(this,
this.opts)};r.fill=function(){var a=this.opts.fill;return g.isFunction(a)?a:function(b,d){return a[d%a.length]}};r.prepare=function(a,b){this.svg||this.$el.hide().after(this.svg=p("svg",{"class":"peity"}));return g(this.svg).empty().data("peity",this).attr({height:b,width:a})};r.values=function(){return g.map(this.$el.text().split(this.opts.delimiter),function(a){return parseFloat(a)})};e.defaults={};e.graphers={};e.register=function(a,b,d){this.defaults[a]=b;this.graphers[a]=d};e.register("pie",
{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},function(a){if(!a.delimiter){var b=this.$el.text().match(/[^0-9\.]/);a.delimiter=b?b[0]:","}b=this.values();if("/"==a.delimiter)var d=b[0],b=[d,h.max(0,b[1]-d)];for(var c=0,d=b.length,n=0;c<d;c++)n+=b[c];for(var c=2*a.radius,f=this.prepare(a.width||c,a.height||c),c=f.width(),f=f.height(),s=c/2,k=f/2,f=h.min(s,k),a=a.innerRadius,e=h.PI,m=this.fill(),i=this.scale=function(a,b){var c=2*a/n*e-e/2;return[b*h.cos(c)+s,b*h.sin(c)+k]},q=0,c=0;c<d;c++){var t=
b[c],j=t/n;if(0!=j){if(1==j)if(a)var j=s-0.01,o=k-f,l=k-a,j=p("path",{d:["M",s,o,"A",f,f,0,1,1,j,o,"L",j,l,"A",a,a,0,1,0,s,l].join(" ")});else j=p("circle",{cx:s,cy:k,r:f});else o=q+t,l=["M"].concat(i(q,f),"A",f,f,0,0.5<j?1:0,1,i(o,f),"L"),a?l=l.concat(i(o,a),"A",a,a,0,0.5<j?1:0,0,i(q,a)):l.push(s,k),q+=t,j=p("path",{d:l.join(" ")});g(j).attr("fill",m.call(this,t,c,b));this.svg.appendChild(j)}}});e.register("donut",g.extend(!0,{},e.defaults.pie),function(a){a.innerRadius||(a.innerRadius=0.5*a.radius);
e.graphers.pie.call(this,a)});e.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(a){var b=this.values();1==b.length&&b.push(b[0]);for(var d=h.max.apply(h,"number"==typeof a.max?b.concat(a.max):b),c=h.min.apply(h,"number"==typeof a.min?b.concat(a.min):b),n=this.prepare(a.width,a.height),f=n.width(),e=n.height()-a.strokeWidth,k=d-c,d=this.x=function(a){return a*(f/(b.length-1))},n=this.y=function(b){var d=e;k&&(d-=(b-c)/k*e);return d+a.strokeWidth/
2},g=n(h.max(c,0)),m=[0,g],i=0;i<b.length;i++)m.push(d(i),n(b[i]));m.push(f,g);this.svg.appendChild(p("polygon",{fill:a.fill,points:m.join(" ")}));a.strokeWidth&&this.svg.appendChild(p("polyline",{fill:"transparent",points:m.slice(2,m.length-2).join(" "),stroke:a.stroke,"stroke-width":a.strokeWidth,"stroke-linecap":"square"}))});e.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:0.1,width:32},function(a){for(var b=this.values(),d=h.max.apply(h,"number"==typeof a.max?b.concat(a.max):
b),c=h.min.apply(h,"number"==typeof a.min?b.concat(a.min):b),e=this.prepare(a.width,a.height),f=e.width(),g=e.height(),k=d-c,a=a.padding,e=this.fill(),r=this.x=function(a){return a*f/b.length},m=this.y=function(a){return g-(k?(a-c)/k*g:1)},i=0;i<b.length;i++){var q=r(i+a),t=r(i+1-a)-q,j=b[i],o=m(j),l=o,u;k?0>j?l=m(h.min(d,0)):o=m(h.max(c,0)):u=1;u=o-l;0==u&&(u=1,0<d&&k&&l--);this.svg.appendChild(p("rect",{fill:e.call(this,j,i,b),x:q,y:l,width:t,height:u}))}})})(jQuery,document,Math);
