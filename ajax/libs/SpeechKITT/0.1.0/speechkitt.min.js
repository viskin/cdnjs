//! Speech KITT
//! version : 0.1.0
//! author  : Tal Ater @TalAter
//! license : MIT
//! https://github.com/TalAter/SpeechKITT
(function(a){"use strict";var b,c,d,e,f,g=this,h=!1,i="Activate Voice Control",j="What can I help you with?",k=[],l=function(){f=document.createElement("div"),f.id="skitt-ui",f.innerHTML='<a id="skitt-toggle-button">&nbsp;</a><label for="skitt-toggle-button" id="skitt-toggle-button__label">'+i+'</label><div id="skitt-listening-box"><div id="skitt-listening-text"><span id="skitt-listening-text__instructions">'+j+"</span></div></div>",f.style.display="none",document.body.appendChild(f),n(),m(),document.getElementById("skitt-toggle-button").addEventListener("click",function(){g.SpeechKITT.toggleRecognition()})},m=function(){d&&f&&(e?e.href=d:(e=document.createElement("link"),e.rel="stylesheet",e.href=d,e.id="skitt-style-sheet",document.body.appendChild(e)))},n=function(){if(k.length&&f){var a=document.getElementById("skitt-listening-text__samples");if(!a){var b=document.getElementById("skitt-listening-text__instructions");a=document.createElement("span"),a.id="skitt-listening-text__samples",b.parentNode.insertBefore(a,b.nextSibling)}a.innerText=k.join(". ")+"."}},o=function(){f!==a&&(f.classList.remove("skitt-ui--not-listening"),f.classList.add("skitt-ui--listening"))},p=function(){f!==a&&(f.classList.add("skitt-ui--not-listening"),f.classList.remove("skitt-ui--listening"))},q=function(){h||(h=!0,o())},r=function(){h&&(h=!1,p())},s=function(a,b){f&&(document.getElementById(b).innerText=a)};g.SpeechKITT={setStartCommand:function(a,c){if(a=g[a]||a,"function"!=typeof a)throw new TypeError("invalid callback function");c=c||this,b={callback:a,context:c}},setAbortCommand:function(a,b){if(a=g[a]||a,"function"!=typeof a)throw new TypeError("invalid callback function");b=b||this,c={callback:a,context:b}},startRecognition:function(){if(!b)throw new TypeError("cannot start recognition. Start command not defined");b.callback.apply(b.context),q()},abortRecognition:function(){if(!c)throw new TypeError("cannot abort recognition. Abort command not defined");c.callback.apply(c.context),r()},toggleRecognition:function(){h?this.abortRecognition():this.startRecognition()},onStart:function(){q()},onEnd:function(){r()},setStylesheet:function(a){d=a,m()},render:function(){f===a&&l(),this.isListening()?o():p()},vroom:function(){this.render()},hide:function(){if(f===a)throw new TypeError("cannot hide interface. Must be rendered first");f.classList.add("skitt-ui--hidden")},show:function(){if(f===a)throw new TypeError("cannot show interface. Must be rendered first");f.classList.remove("skitt-ui--hidden")},isListening:function(){return h},setToggleLabelText:function(a){i=a,s(a,"skitt-toggle-button__label")},setInstructionsText:function(a){j=a,s(a,"skitt-listening-text__instructions")},setSampleCommands:function(a){k=a,n()},annyang:function(){this.setStartCommand(annyang.start),this.setAbortCommand(annyang.abort),annyang.addCallback("start",this.onStart),annyang.addCallback("end",this.onEnd)}}}).call(this);