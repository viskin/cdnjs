/*! Backstretch - v2.1.3 - 2016-02-18\n* Copyright (c) 2016 Scott Robbin; Licensed MIT */!function(a,b,c){"use strict";var d=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/i;a.fn.backstretch=function(c,d){var e=arguments;return 0===a(b).scrollTop()&&b.scrollTo(0,0),this.each(function(){var b=a(this),f=b.data("backstretch");if(f){if("string"==typeof e[0]&&"function"==typeof f[e[0]])return void f[e[0]](d);d=a.extend(f.options,d),f.hasOwnProperty("destroy")&&f.destroy(!0)}if(!c||c&&0===c.length){var g=b.css("background-image");g&&"none"!==g?c=[{url:b.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:a.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")}f=new k(this,c,d||{}),b.data("backstretch",f)})},a.backstretch=function(b,c){return a("body").backstretch(b,c).data("backstretch")},a.expr[":"].backstretch=function(b){return a(b).data("backstretch")!==c},a.fn.backstretch.defaults={duration:5e3,fade:0,fadeFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioTreshold:.1};var e={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxWidth:"none",zIndex:-999999}},f=function(){var c=function(a){for(var b=1;b<a.length;b++){for(var c=a[b],d=b;a[d-1]&&parseInt(a[d-1].width,10)>parseInt(c.width,10);)a[d]=a[d-1],--d;a[d]=c}return a},d=function(a,c){for(var d,e,f=b.devicePixelRatio||1,g=0,h=0;h<c.length&&(e=c[h],"string"==typeof e&&(e=c[h]={url:e}),e.pixelRatio&&parseFloat(e.pixelRatio)!==f||(g=h,d=a,"auto"===e.pixelRatio&&(a*=f),!(e.width>=d)));h++);return c[Math.min(h,g)]},e=function(a,b){if("string"==typeof a)a=a.replace(/{{(width|height)}}/g,b);else if(a instanceof Array)for(var c=0;c<a.length;c++)a[c].src?a[c].src=e(a[c].src,b):a[c]=e(a[c],b);return a};return function(b,f){for(var g=b.width(),h=b.height(),i=[],j=function(a,b){return"width"===b?g:"height"===b?h:a},k=0;k<f.length;k++)if(a.isArray(f[k])){f[k]=c(f[k]);var l=d(g,f[k]);i.push(l)}else{"string"==typeof f[k]&&(f[k]={url:f[k]});var m=a.extend({},f[k]);m.url=e(m.url,j),i.push(m)}return i}}(),g=function(a){return d.test(a.url)||a.isVideo},h=function(b,c,d,e,f){var h=[],i=function(a){for(var b=0;b<h.length;b++)if(h[b].src===a.src)return h[b];return h.push(a),a},j=function(a,b,c){"function"==typeof b&&b.call(a,c)};return function k(b,c,d,e,f){if("undefined"!=typeof b){a.isArray(b)||(b=[b]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(f=arguments[arguments.length-1]),c="function"!=typeof c&&c?c:0,d="function"==typeof d||!d||0>d?b.length:Math.min(d,b.length),e="function"!=typeof e&&e?e:1,c>=b.length&&(c=0,d=0),0>e&&(e=d),e=Math.min(e,d);var h=b.slice(c+e,d-e);if(b=b.slice(c,e),d=b.length,!d)return void j(b,f,!0);for(var l,m=0,n=function(){m++,m===d&&(j(b,f,!h),k(h,0,0,e,f))},o=0;o<b.length;o++)g(b[o])||(l=new Image,l.src=b[o].url,l=i(l),l.complete?n():a(l).on("load error",n))}}}(),i=function(b){for(var c=[],d=0;d<b.length;d++)"string"==typeof b[d]?c.push({url:b[d]}):a.isArray(b[d])?c.push(i(b[d])):c.push(j(b[d]));return c},j=function(a,b){return"left"===a.alignX?a.alignX=0:"center"===a.alignX?a.alignX=.5:"right"===a.alignX?a.alignX=1:(a.alignX!==c||b)&&(a.alignX=parseFloat(a.alignX),isNaN(a.alignX)&&(a.alignX=.5)),"top"===a.alignY?a.alignY=0:"center"===a.alignY?a.alignY=.5:"bottom"===a.alignY?a.alignY=1:(a.alignX!==c||b)&&(a.alignY=parseFloat(a.alignY),isNaN(a.alignY)&&(a.alignY=.5)),a},k=function(c,d,g){this.options=a.extend({},a.fn.backstretch.defaults,g||{}),this.firstShow=!0,(this.options.centeredX||this.options.centeredY)&&(b.console&&b.console.log&&b.console.log("jquery.backstretch: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),this.options.centeredX&&(this.options.alignX=.5),this.options.centeredY&&(this.options.alignY=.5)),j(this.options,!0),this.images=i(a.isArray(d)?d:[d]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=c===document.body;var k=a(b);this.$container=a(c),this.$root=this.isBody?m?k:a(document):this.$container,this.originalImages=this.images,this.images=f(this.options.alwaysTestWindowResolution?k:this.$root,this.originalImages),h(this.images,this.options.start||0,this.options.preload||1);var l=this.$container.children(".backstretch").first();if(this.$wrap=l.length?l:a('<div class="backstretch"></div>').css(this.options.bypassCss?{}:e.wrap).appendTo(this.$container),!this.options.bypassCss){if(!this.isBody){var n=this.$container.css("position"),o=this.$container.css("zIndex");this.$container.css({position:"static"===n?"relative":n,zIndex:"auto"===o?0:o,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&m?"fixed":"absolute"})}this.index=this.options.start,this.show(this.index),k.on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===b.pageYOffset&&(b.scrollTo(0,1),this.resize())},this))};k.prototype={resize:function(){try{var d=this.options.alwaysTestWindowResolution?a(b):this.$root,e=d.width(),g=d.height(),i=e/(this._lastResizeContainerWidth||0),j=g/(this._lastResizeContainerHeight||0),k=this.options.resolutionChangeRatioTreshold||0;if((e!==this._lastResizeContainerWidth||g!==this._lastResizeContainerHeight)&&(Math.abs(i-1)>=k||isNaN(i)||Math.abs(j-1)>=k||isNaN(j))&&(this._lastResizeContainerWidth=e,this._lastResizeContainerHeight=g,this.images=f(d,this.originalImages),this.options.preload&&h(this.images,(this.index+1)%this.images.length,this.options.preload),1===this.images.length&&this._currentImage!==this.images[0])){var l=this;clearTimeout(l._selectAnotherResolutionTimeout),l._selectAnotherResolutionTimeout=setTimeout(function(){l.show(0)},this.options.resolutionRefreshRate)}var m,n={left:0,top:0,right:"auto",bottom:"auto"},o=this.isBody?this.$root.width():this.$root.innerWidth(),p=o,q=this.isBody?b.innerHeight?b.innerHeight:this.$root.height():this.$root.innerHeight(),r=p/this.$img.data("ratio"),s=a.Event("backstretch.resize",{relatedTarget:this.$container[0]}),t=this._currentImage.alignX===c?this.options.alignX:this._currentImage.alignX,u=this._currentImage.alignY===c?this.options.alignY:this._currentImage.alignY;r>=q?n.top=-(r-q)*u:(r=q,p=r*this.$img.data("ratio"),m=(p-o)/2,n.left=-(p-o)*t),this.options.bypassCss||this.$wrap.css({width:o,height:q}).find("img,video,iframe").not(".deleteable").css({width:p,height:r}).css(n),this.$container.trigger(s,this)}catch(v){}return this},show:function(b){if(!(Math.abs(b)>this.images.length-1)){var d=this,f=d.$wrap.find("img,video,iframe").addClass("deleteable"),h=d.videoWrapper,i={relatedTarget:d.$container[0]};d.$container.trigger(a.Event("backstretch.before",i),[d,b]),this.index=b;var j=d.images[b];clearTimeout(d._cycleTimeout),delete d.videoWrapper;var k=g(j);return k?(d.videoWrapper=new l(j),d.$img=d.videoWrapper.$video.css("pointer-events","none")):d.$img=a("<img />"),this.options.bypassCss?d.$img.css({display:"none"}):d.$img.css(e.img),d.$img.bind(k?"canplay":"load",function(e){var g=a(this),j=this.naturalWidth||this.videoWidth||this.width||a(e.target).width(),l=this.naturalHeight||this.videoHeight||this.height||a(e.target).height();g.data("ratio",j/l);var m=g.data("options").fade!==c?g.data("options").fade:d.options.speed||d.options.fade,n=function(){h&&h.stop(),f.remove(),!d.paused&&d.images.length>1&&d.cycle(),a(["after","show"]).each(function(){d.$container.trigger(a.Event("backstretch."+this,i),[d,b])}),k&&d.videoWrapper.play()};d.firstShow&&!d.options.fadeFirst||!m?(a(this).show(),n()):a(this).fadeIn(m,n),d.firstShow=!1,d.resize()}).appendTo(d.$wrap),k||d.$img.attr("src",j.url),d.$img.attr("alt",j.alt||""),d.$img.data("options",j),d._currentImage=j,d}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this.videoWrapper&&this.videoWrapper.pause(),this},resume:function(){return this.paused=!1,this.videoWrapper&&this.videoWrapper.play(),this.cycle(),this},cycle:function(){if(this.images.length>1){clearTimeout(this._cycleTimeout);var b=this._currentImage&&this._currentImage.duration||this.options.duration,c=g(this._currentImage),d=function(){this.$img.off(".cycle"),this.paused||this.next()};if(c){if(!this._currentImage.loop){var e=0;this.$img.on("playing.cycle",function(){var b=a(this).data("player");clearTimeout(e),e=setTimeout(function(){b.pause(),b.$video.trigger("ended")},1e3*(b.getDuration()-b.getCurrentTime()))}).on("ended.cycle",function(){clearTimeout(e)})}this.$img.on("error.cycle initerror.cycle",a.proxy(d,this))}c&&!this._currentImage.duration?this.$img.on("ended.cycle",a.proxy(d,this)):this._cycleTimeout=setTimeout(a.proxy(d,this),b)}return this},destroy:function(c){a(b).off("resize.backstretch orientationchange.backstretch"),this.videoWrapper&&this.videoWrapper.stop(),clearTimeout(this._cycleTimeout),c||this.$wrap.remove(),this.$container.removeData("backstretch")}};var l=function(){this.init.apply(this,arguments)};l.prototype.init=function(e){var f,g=this,h=function(){g.$video=f,g.video=f[0]},i="video";if(e.url instanceof Array||!d.test(e.url)||(i="youtube"),g.type=i,"youtube"===i){l.loadYoutubeAPI(),g.ytId=e.url.match(d)[2];var j="https://www.youtube.com/embed/"+g.ytId+"?rel=0&autoplay=0&showinfo=0&controls=0&modestbranding=1&cc_load_policy=0&disablekb=1&iv_load_policy=3&loop=0&enablejsapi=1&origin="+encodeURIComponent(b.location.origin);g.__ytStartMuted=!!e.mute||e.mute===c,f=a("<iframe />").attr({src_to_load:j}).css({border:0,margin:0,padding:0}).data("player",g),e.loop&&f.on("ended.loop",function(){g.__manuallyStopped||g.play()}),g.ytReady=!1,h(),b.YT?(g._initYoutube(),f.trigger("initsuccess")):a(b).one("youtube_api_load",function(){g._initYoutube(),f.trigger("initsuccess")})}else{f=a("<video>").prop("autoplay",!1).prop("controls",!1).prop("loop",!!e.loop).prop("muted",!!e.mute||e.mute===c).prop("preload","auto").prop("poster",e.poster||"");for(var k=e.url instanceof Array?e.url:[e.url],m=0;m<k.length;m++){var n=k[m];"string"==typeof n&&(n={src:n}),a("<src>").attr("src",n.src).attr("type",n.type||null).appendTo(f)}f[0].canPlayType&&k.length?f.trigger("initsuccess"):f.trigger("initerror"),h()}},l.prototype._initYoutube=function(){var c=this,d=b.YT;c.$video.attr("src",c.$video.attr("src_to_load")).removeAttr("src_to_load");var e=!!c.$video[0].parentNode;if(!e){var f=a("<div>").css("display","none !important").appendTo(document.body);c.$video.appendTo(f)}var g=new d.Player(c.video,{events:{onReady:function(){c.__ytStartMuted&&g.mute(),e||(c.$video[0].parentNode===f[0]&&c.$video.detach(),f.remove()),c.ytReady=!0,c._updateYoutubeSize(),c.$video.trigger("canplay")},onStateChange:function(a){switch(a.data){case d.PlayerState.PLAYING:c.$video.trigger("playing");break;case d.PlayerState.ENDED:c.$video.trigger("ended");break;case d.PlayerState.PAUSED:c.$video.trigger("pause");break;case d.PlayerState.BUFFERING:c.$video.trigger("waiting");break;case d.PlayerState.CUED:c.$video.trigger("canplay")}},onPlaybackQualityChange:function(){c._updateYoutubeSize(),c.$video.trigger("resize")},onError:function(a){c.hasError=!0,c.$video.trigger({type:"error",error:a})}}});return c.ytPlayer=g,c},l.prototype._updateYoutubeSize=function(){var a=this;switch(a.ytPlayer.getPlaybackQuality()||"medium"){case"small":a.video.videoWidth=426,a.video.videoHeight=240;break;case"medium":a.video.videoWidth=640,a.video.videoHeight=360;break;default:case"large":a.video.videoWidth=854,a.video.videoHeight=480;break;case"hd720":a.video.videoWidth=1280,a.video.videoHeight=720;break;case"hd1080":a.video.videoWidth=1920,a.video.videoHeight=1080;break;case"highres":a.video.videoWidth=2560,a.video.videoHeight=1440}return a},l.prototype.play=function(){var a=this;return a.__manuallyStopped=!1,"youtube"===a.type?a.ytReady&&(a.$video.trigger("play"),a.ytPlayer.playVideo()):a.video.play(),a},l.prototype.pause=function(){var a=this;return a.__manuallyStopped=!1,"youtube"===a.type?a.ytReady&&a.ytPlayer.pauseVideo():a.video.pause(),a},l.prototype.stop=function(){var a=this;return a.__manuallyStopped=!0,"youtube"===a.type?a.ytReady&&(a.ytPlayer.pauseVideo(),a.ytPlayer.seekTo(0)):(a.video.pause(),a.video.currentTime=0),a},l.prototype.getCurrentTime=function(a){var b=this;return"youtube"!==b.type?b.video.currentTime:b.ytReady?b.ytPlayer.getCurrentTime():0},l.prototype.setCurrentTime=function(a){var b=this;return"youtube"===b.type?b.ytReady&&b.ytPlayer.seekTo(a,!0):b.video.currentTime=a,b},l.prototype.getDuration=function(){var a=this;return"youtube"!==a.type?a.video.duration:a.ytReady?a.ytPlayer.getDuration():0},l.loadYoutubeAPI=function(){if(!b.YT){a("script[src*=www\\.youtube\\.com\\/iframe_api]").length||a('<script type="text/javascript" src="https://www.youtube.com/iframe_api">').appendTo("body");var c=setInterval(function(){b.YT&&b.YT.loaded&&(a(b).trigger("youtube_api_load"),clearTimeout(c))},50)}};var m=function(){var a=navigator.userAgent,c=navigator.platform,d=a.match(/AppleWebKit\/([0-9]+)/),e=!!d&&d[1],f=a.match(/Fennec\/([0-9]+)/),g=!!f&&f[1],h=a.match(/Opera Mobi\/([0-9]+)/),i=!!h&&h[1],j=a.match(/MSIE ([0-9]+)/),k=!!j&&j[1];return!((c.indexOf("iPhone")>-1||c.indexOf("iPad")>-1||c.indexOf("iPod")>-1)&&e&&534>e||b.operamini&&"[object OperaMini]"==={}.toString.call(b.operamini)||h&&7458>i||a.indexOf("Android")>-1&&e&&533>e||g&&6>g||"palmGetResource"in b&&e&&534>e||a.indexOf("MeeGo")>-1&&a.indexOf("NokiaBrowser/8.5.0")>-1||k&&6>=k)}()}(jQuery,window);