Object.observe||function(d,x,p){var h,g,C="add update delete reconfigure setPrototype preventExtensions".split(" "),D=p.Node?function(a){return a&&a instanceof p.Node}:function(a){return a&&"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName},E=x.isArray||function(a){return function(b){return"[object Array]"===a.call(b)}}(d.prototype.toString),l=x.prototype.indexOf?function(a,b,c){return b.indexOf(a,c)}:function(a,b,c){for(c=c||0;c<b.length;c++)if(b[c]===a)return c;return-1},
r="undefined"!==typeof p.Map&&Map.prototype.forEach?function(){return new Map}:function(){var a=[],b=[];return{size:0,has:function(c){return-1<l(c,a)},get:function(c){return b[l(c,a)]},set:function(c,e){var f=l(c,a);-1===f?(a.push(c),b.push(e),this.size++):b[f]=e},"delete":function(c){c=l(c,a);-1<c&&(a.splice(c,1),b.splice(c,1),this.size--)},forEach:function(c,e){for(var f=0;f<a.length;f++)c.call(e,b[f],a[f],this)}}},y=d.keys||function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},
u=p.requestAnimationFrame||p.webkitRequestAnimationFrame||function(){var a=+new Date;return function(b){return setTimeout(function(){b(+new Date-a)},17)}}(),t=function(a,b,c){if(a.handlers.size){var e,f,k,v=a.values,d=0,h,g,m,n;e=a.properties.slice();f=e.length;for(k=y(b);d<k.length;)if(g=k[d++],h=l(g,e),m=b[g],-1===h)q(b,a,{name:g,type:"add",object:b},c),a.properties.push(g),v.push(m);else if(n=v[h],e[h]=null,f--,n===m?0===n&&1/n!==1/m:n===n||m===m)q(b,a,{name:g,type:"update",object:b,oldValue:n},
c),a.values[h]=m;for(d=e.length;f&&d--;)null!==e[d]&&(q(b,a,{name:e[d],type:"delete",object:b,oldValue:v[d]},c),a.properties.splice(d,1),a.values.splice(d,1),f--)}},z=function(){h.size&&(h.forEach(t),g.forEach(w),u(z))},w=function(a,b){a.changeRecords.length&&(b(a.changeRecords),a.changeRecords=[])},A=function(a,b){2>arguments.length&&(b=h.get(a));return b&&b.notifier||{notify:function(c){c.type;var b=h.get(a);if(b){var f={object:a},k;for(k in c)"object"!==k&&(f[k]=c[k]);q(a,b,f)}},performChange:function(c,
b,f){if("string"!==typeof c)throw new TypeError("Invalid non-string changeType");if("function"!==typeof b)throw new TypeError("Cannot perform non-function");var k=h.get(a),d;b=b.call(f);k&&t(k,a,c);if(k&&b&&"object"===typeof b){c={object:a,type:c};for(d in b)"object"!==d&&"type"!==d&&(c[d]=b[d]);q(a,k,c)}}}},B=function(a,b,c,e){var f=g.get(c);f||g.set(c,f={observed:r(),changeRecords:[]});f.observed.set(a,{acceptList:e.slice(),data:b});b.handlers.set(c,f)},q=function(a,b,c,e){b.handlers.forEach(function(b){var d=
b.observed.get(a).acceptList;("string"!==typeof e||-1===l(e,d))&&-1<l(c.type,d)&&b.changeRecords.push(c)})};h=r();g=r();d.observe=function(a,b,c){if(null===a||"object"!==typeof a)throw new TypeError("Object.observe cannot observe non-object");if("function"!==typeof b)throw new TypeError("Object.observe cannot deliver to non-function");if(d.isFrozen&&d.isFrozen(b))throw new TypeError("Object.observe cannot deliver to a frozen function object");E(c)||(c=C);var e=h.get(a);if(e)B(a,e,b,c);else{for(var e=
void 0,f=D(a)?[]:y(a),k=[],g=0,e={handlers:r(),properties:f,values:k,notifier:A(a,e)};g<f.length;)k[g]=a[f[g++]];h.set(a,e);B(a,e,b,c);1===h.size&&u(z)}return a};d.unobserve=function(a,b){if(null===a||"object"!==typeof a)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!==typeof b)throw new TypeError("Object.unobserve cannot deliver to non-function");var c=g.get(b),e;if(c&&(e=c.observed.get(a))){c.observed.forEach(function(a,b){t(a.data,b)});u(function(){w(c,b)});if(1===
c.observed.size&&c.observed.has(a))g["delete"](b);else c.observed["delete"](a);if(1===e.data.handlers.size)h["delete"](a);else e.data.handlers["delete"](b)}return a};d.getNotifier=function(a){if(null===a||"object"!==typeof a)throw new TypeError("Object.getNotifier cannot getNotifier non-object");return d.isFrozen&&d.isFrozen(a)?null:A(a)};d.deliverChangeRecords=function(a){if("function"!==typeof a)throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var b=g.get(a);b&&
(b.observed.forEach(function(a,b){t(a.data,b)}),w(b,a))}}(Object,Array,this);
