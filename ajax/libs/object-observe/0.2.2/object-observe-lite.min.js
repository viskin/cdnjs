Object.observe||function(d,x,p){var k,h,C="add update delete reconfigure setPrototype preventExtensions".split(" "),D=p.Node?function(a){return a&&a instanceof p.Node}:function(a){return a&&"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName},E=x.isArray||function(a){return function(b){return"[object Array]"===a.call(b)}}(d.prototype.toString),l=x.prototype.indexOf?function(a,b,c){return b.indexOf(a,c)}:function(a,b,c){for(c=c||0;c<b.length;c++)if(b[c]===a)return c;return-1},
r="undefined"!==typeof p.Map&&Map.prototype.forEach?function(){return new Map}:function(){var a=[],b=[];return{size:0,has:function(c){return-1<l(c,a)},get:function(c){return b[l(c,a)]},set:function(c,f){var e=l(c,a);-1===e?(a.push(c),b.push(f),this.size++):b[e]=f},"delete":function(c){c=l(c,a);-1<c&&(a.splice(c,1),b.splice(c,1),this.size--)},forEach:function(c,f){for(var e=0;e<a.length;e++)c.call(f,b[e],a[e],this)}}},y=d.getOwnPropertyNames?function(){var a=d.getOwnPropertyNames;try{arguments.callee}catch(b){var c=
(a(l).join(" ")+" ").replace(/prototype |length |name /g,"").slice(0,-1).split(" ");c.length&&(a=function(a){var b=d.getOwnPropertyNames(a);if("function"===typeof a){a=0;for(var g;a<c.length;)-1<(g=l(c[a++],b))&&b.splice(g,1)}return b})}return a}():function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},u=p.requestAnimationFrame||p.webkitRequestAnimationFrame||function(){var a=+new Date;return function(b){return setTimeout(function(){b(+new Date-a)},17)}}(),t=function(a,b,c){if(a.handlers.size){var f,
e,g,v=a.values,d=0,k,h,m,n;f=a.properties.slice();e=f.length;for(g=y(b);d<g.length;)if(h=g[d++],k=l(h,f),m=b[h],-1===k)q(b,a,{name:h,type:"add",object:b},c),a.properties.push(h),v.push(m);else if(n=v[k],f[k]=null,e--,n===m?0===n&&1/n!==1/m:n===n||m===m)q(b,a,{name:h,type:"update",object:b,oldValue:n},c),a.values[k]=m;for(d=f.length;e&&d--;)null!==f[d]&&(q(b,a,{name:f[d],type:"delete",object:b,oldValue:v[d]},c),a.properties.splice(d,1),a.values.splice(d,1),e--)}},z=function(){k.size&&(k.forEach(t),
h.forEach(w),u(z))},w=function(a,b){a.changeRecords.length&&(b(a.changeRecords),a.changeRecords=[])},A=function(a,b){2>arguments.length&&(b=k.get(a));return b&&b.notifier||{notify:function(c){c.type;var b=k.get(a);if(b){var e={object:a},g;for(g in c)"object"!==g&&(e[g]=c[g]);q(a,b,e)}},performChange:function(c,b,e){if("string"!==typeof c)throw new TypeError("Invalid non-string changeType");if("function"!==typeof b)throw new TypeError("Cannot perform non-function");var g=k.get(a),d;b=b.call(e);g&&
t(g,a,c);if(g&&b&&"object"===typeof b){c={object:a,type:c};for(d in b)"object"!==d&&"type"!==d&&(c[d]=b[d]);q(a,g,c)}}}},B=function(a,b,c,f){var e=h.get(c);e||h.set(c,e={observed:r(),changeRecords:[]});e.observed.set(a,{acceptList:f.slice(),data:b});b.handlers.set(c,e)},q=function(a,b,c,f){b.handlers.forEach(function(b){var d=b.observed.get(a).acceptList;("string"!==typeof f||-1===l(f,d))&&-1<l(c.type,d)&&b.changeRecords.push(c)})};k=r();h=r();d.observe=function(a,b,c){if(null===a||"object"!==typeof a&&
"function"!==typeof a)throw new TypeError("Object.observe cannot observe non-object");if("function"!==typeof b)throw new TypeError("Object.observe cannot deliver to non-function");if(d.isFrozen&&d.isFrozen(b))throw new TypeError("Object.observe cannot deliver to a frozen function object");E(c)||(c=C);var f=k.get(a);if(f)B(a,f,b,c);else{for(var f=void 0,e=D(a)?[]:y(a),g=[],h=0,f={handlers:r(),properties:e,values:g,notifier:A(a,f)};h<e.length;)g[h]=a[e[h++]];k.set(a,f);B(a,f,b,c);1===k.size&&u(z)}return a};
d.unobserve=function(a,b){if(null===a||"object"!==typeof a&&"function"!==typeof a)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!==typeof b)throw new TypeError("Object.unobserve cannot deliver to non-function");var c=h.get(b),d;if(c&&(d=c.observed.get(a))){c.observed.forEach(function(a,b){t(a.data,b)});u(function(){w(c,b)});if(1===c.observed.size&&c.observed.has(a))h["delete"](b);else c.observed["delete"](a);if(1===d.data.handlers.size)k["delete"](a);else d.data.handlers["delete"](b)}return a};
d.getNotifier=function(a){if(null===a||"object"!==typeof a&&"function"!==typeof a)throw new TypeError("Object.getNotifier cannot getNotifier non-object");return d.isFrozen&&d.isFrozen(a)?null:A(a)};d.deliverChangeRecords=function(a){if("function"!==typeof a)throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var b=h.get(a);b&&(b.observed.forEach(function(a,b){t(a.data,b)}),w(b,a))}}(Object,Array,this);
