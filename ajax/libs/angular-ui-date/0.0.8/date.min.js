angular.module("ui.date",[]).constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig","uiDateConverter",function(c,b){var a;a={};angular.extend(a,c);return{require:"?ngModel",link:function(h,g,e,d){var f=function(){return angular.extend({},c,h.$eval(e.uiDate))};var i=function(){var n=false;var l=f();function m(){var r=["Hours","Minutes","Seconds","Milliseconds"],q=angular.isDate(d.$modelValue),p={};if(q){angular.forEach(r,function(s){p[s]=d.$modelValue["get"+s]()})}d.$setViewValue(g.datepicker("getDate"));if(q){angular.forEach(r,function(s){d.$viewValue["set"+s](p[s])})}}if(d){var j=l.onSelect||angular.noop;l.onSelect=function(q,p){h.$apply(function(){n=true;m();j(q,p);g.blur()})};var k=l.beforeShow||angular.noop;l.beforeShow=function(p,q){n=true;k(p,q)};var o=l.onClose||angular.noop;l.onClose=function(q,p){n=false;o(q,p)};g.off("blur.datepicker").on("blur.datepicker",function(){if(!n){h.$apply(function(){g.datepicker("setDate",g.datepicker("getDate"));m()})}});d.$render=function(){var p=d.$modelValue;if(angular.isDefined(p)&&p!==null&&!angular.isDate(p)){if(angular.isString(d.$modelValue)){p=b.stringToDate(e.uiDateFormat,d.$modelValue)}else{throw new Error("ng-Model value must be a Date, or a String object with a date formatter - currently it is a "+typeof p+" - use ui-date-format to convert it from a string")}}g.datepicker("setDate",p)}}if(g.data("datepicker")){g.datepicker("option",l);g.datepicker("refresh")}else{g.datepicker(l);g.on("$destroy",function(){g.datepicker("destroy")})}if(d){d.$render()}};h.$watch(f,i,true)}}}]).factory("uiDateConverter",["uiDateFormatConfig",function(a){function c(d,e){d=d||a;if(e){if(d){return jQuery.datepicker.formatDate(d,e)}if(e.toISOString){return e.toISOString()}}return null}function b(d,f){d=d||a;if(angular.isString(f)){if(d){return jQuery.datepicker.parseDate(d,f)}var e=new Date(f);return isNaN(e.getTime())?null:e}return null}return{stringToDate:b,dateToString:c}}]).constant("uiDateFormatConfig","").directive("uiDateFormat",["uiDateConverter",function(a){var b={require:"ngModel",link:function(g,e,d,f){var c=d.uiDateFormat;f.$formatters.unshift(function(h){return a.stringToDate(c,h)});f.$parsers.push(function(h){return a.dateToString(c,h)})}};return b}]);