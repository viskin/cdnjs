!function(e){"use strict";function t(e,t){this.version="2.0.0",this.$link=e,this.options=t,this.isPlaying=!1,this.isPlayed=!1,this.totalTime=0,this.fullyLoaded=!1,this.fullTimeDisplayed=!1,this.waitForLoad=!1,this.seekTime=0,this.preloaderTimeout=null,this.isSeeking=!1,this.init()}var n=!1,o=function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==(e.firstChild&&e.firstChild.namespaceURI)},i=function(){return("object"==typeof Modernizr&&"boolean"==typeof Modernizr.inlinesvg&&Modernizr.inlinesvg||o())&&(n=!0),this},a=function(e){if("number"!=typeof e)return e;var t=Math.round(e)%60,n=(Math.round(e)-t)%3600/60,o=(Math.round(e)-t-60*n)/3600;return(o?o+":":"")+(o&&10>n?"0"+n:n)+":"+(10>t?"0"+t:t)},l=function(e){if("number"==typeof e)return e;for(var t=e.split(":").reverse(),n=0,o=0;o<t.length;o++)n+=t[o]*Math.pow(60,o);return n},s=function(e,t){if(e.preloaderTimeout||e.isSeeking||!e.waitForLoad)return e;var t=t||50;return e.preloaderTimeout=setTimeout(function(){return e.isSeeking?(e.preloaderTimeout=null,e):void e.$container.find(".jouele-play-lift").addClass("jouele-play-lift_buffering")},t),e},r=function(e){return e.preloaderTimeout?(clearTimeout(e.preloaderTimeout),e.preloaderTimeout=null,e.$container.find(".jouele-play-lift").removeClass("jouele-play-lift_buffering"),e):e},u=function(e,t){if(e.fullyLoaded&&e.totalTime||!e.isPlayed)return e;var n=Math.round(t.seekPercent);return n>=100?(e.fullyLoaded=!0,e.totalTime=t.duration):n>0?e.totalTime=t.duration:e.totalTime=0,e.$container.find(".jouele-load-bar").css({width:Math.floor(Math.min(100,n))+"%"}),e},d=function(e,t){return e.seekTime&&!e.isSeeking?e:(e.$container.find(".jouele-play-lift").css("left",t+"%"),e.$container.find(".jouele-play-bar").css("width",t+"%"),e)},c=function(e,t){if(e.totalTime<=0&&!e.options.length)return e;var n="";return e.fullyLoaded&&e.totalTime?e.fullTimeDisplayed||(n=a(e.totalTime),e.$container.find(".jouele-total-time").html(n),e.fullTimeDisplayed=!0):e.options.length?(n=a(l(e.options.length)),e.$container.find(".jouele-total-time").html(n)):(n=e.options.length?e.options.length:'<span class="jouele-total-time__approx">~</span>'+a(e.totalTime),e.$container.find(".jouele-total-time").html(n)),(e.isPlaying||e.waitForLoad)&&(e.totalTime||e.seekTime)&&e.$container.find(".jouele-play-time").html(a(e.seekTime?e.seekTime:t)),e},p=function(e,t){var n=t.toFixed(2);return 0>n?n=0:n>100&&(n=100),d(e,n),s(e),e.waitForLoad=!0,e.$jPlayer.jPlayer("playHead",n),e.pseudoPlay(),e.fullTimeDisplayed?(e.seekTime=e.totalTime/100*n,c(e,e.seekTime)):e.options.length?(e.seekTime=l(e.options.length)/100*n,c(e,e.seekTime)):e.seekTime=.01,e};e.fn.jouele=function(n){return this.each(function(){var o=e(this),i=o.attr("class"),a=i.indexOf("jouele-skin-"),l=o.data("jouele"),s="";l||(a>0&&(s=i.substr(a+12,i.indexOf(" ",a)>0?i.indexOf(" ",a):i.length)),new t(o,e.extend({},e.fn.jouele.defaults,n,o.data(),{skin:s})))})},e.fn.jouele.defaults={swfPath:"./dist/",swfFilename:"jquery.jplayer.swf",supplied:"mp3",volume:1,length:0,scrollOnSpace:!1,pauseOnSpace:!0,hideTimelineOnPause:!1,skin:""},t.prototype.init=function(){this.checkOptions(),this.createDOM(),this.initPlayerPlugin(),this.bindEvents(),this.insertDOM()},t.prototype.destroy=function(){var t=this.$container.attr("id");return this.$container.after(this.$link).remove(),e(document).off("."+t),this.$link.removeData("jouele"),this.$link},t.prototype.pause=function(){return r(this),this.seekTime||(this.waitForLoad=!1),"undefined"!=typeof this.$jPlayer&&this.$jPlayer.jPlayer&&(this.isPlaying||this.waitForLoad)&&(this.isPlaying=!1,this.waitForLoad=!1,this.$jPlayer.jPlayer("pause")),this.isPlaying||this.pseudoPause(),this},t.prototype.pseudoPause=function(){this.$container.removeClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_play").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden")},t.prototype.stop=function(){return"undefined"!=typeof this.$jPlayer&&this.$jPlayer.jPlayer&&this.isPlaying&&this.$jPlayer.jPlayer("stop"),this},t.prototype.play=function(){return s(this,this.seekTime?!1:500),this.isPlayed=!0,"undefined"!=typeof this.$jPlayer&&this.$jPlayer.jPlayer&&(this.isPlaying||this.$jPlayer.jPlayer("play")),this},t.prototype.pseudoPlay=function(){e(document).trigger("jouele-pause",this),this.isPlayed=!0,this.$container.addClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_pause").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_play").addClass("jouele-hidden")},t.prototype.onPause=function(){this.isPlaying=!1,this.isSeeking=!1,this.waitForLoad=!1,this.$container.removeClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_play").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden")},t.prototype.onStop=function(){this.isPlaying=!1,this.seekTime=0,this.isSeeking=!1,this.waitForLoad=!1,this.$container.removeClass("jouele-status-playing")},t.prototype.onPlay=function(){e(document).trigger("jouele-pause",this),this.$container.addClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_pause").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_play").addClass("jouele-hidden"),this.waitForLoad=!1,this.isPlaying=!0,this.isPlayed=!0},t.prototype.checkOptions=function(){parseInt(this.options.length)||(this.options.length=0)},t.prototype.createDOM=function(){var t=e(document.createElement("div")),o=e(document.createElement("div")),i=e(document.createElement("div")),s=e(document.createElement("div")),r=this.$link.text(),u=this,d=function(){return[e(document.createElement("div")).addClass("jouele-time").append(e(document.createElement("div")).addClass("jouele-play-time").text(u.options.length?"0:00":""),e(document.createElement("div")).addClass("jouele-total-time").text(u.options.length?a(l(u.options.length)):"")),e(document.createElement("div")).addClass("jouele-control").append(e(document.createElement("div")).addClass("jouele-control-button"+(n?"":" jouele-control-button_nosvg")).append(e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_unavailable").html(n?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><g class="jouele-svg-color"><path d="m4 6.7l3.8 3.7-3.8 2.1z"/><path d="m.2 2.2l.6-.5 11 11.1-.5.5z"/><path d="m4 4.3v-.8l8 4.5-2.7 1.5z"/></g></svg>':""),e(document.createElement("a")).attr("href",u.$link.attr("href")).addClass("jouele-control-link jouele-hidden").append(e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_play jouele-hidden").html(n?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><path class="jouele-svg-color" d="m4 3.5l8 4.5-8 4.5z"/></svg>':""),e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_pause jouele-hidden").html(n?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><path class="jouele-svg-color" d="m4 3.5l8 4.5-8 4.5z"/></svg>':""))),e(document.createElement("div")).addClass("jouele-control-text").html(r))]},c=function(){return e(document.createElement("div")).addClass("jouele-mine").append(e(document.createElement("div")).addClass("jouele-mine-bar"),e(document.createElement("div")).addClass("jouele-load-bar jouele-hidden"),e(document.createElement("div")).addClass("jouele-play-bar"),e(document.createElement("div")).addClass("jouele-play-lift jouele-hidden").append())};return this.$container=t.data("jouele",this).addClass("jouele"+(this.options.hideTimelineOnPause?" jouele_timeline_hide":"")+(this.options.skin?" jouele-skin-"+this.options.skin:"")).attr("id","jouele-ui-zone-"+(1e3+Math.round(8999*Math.random()))).append(o.addClass("jouele-invisible-object"),i.addClass("jouele-info-area").append(d()),s.addClass("jouele-progress-area").append(c())),this},t.prototype.initPlayerPlugin=function(){var t=this,n=t.$container.find(".jouele-invisible-object");return this.$jPlayer=n.jPlayer({solution:"html",wmode:"window",preload:"metadata",swfPath:t.options.swfPath+t.options.swfFilename,supplied:t.options.supplied,volume:t.options.volume,ready:function(){var o=t.$link.attr("href"),i=t.$container.attr("id");n.jPlayer("setMedia",{mp3:o}),t.$container.find(".jouele-hidden").removeClass("jouele-hidden"),t.$container.find(".jouele-control-button-icon_unavailable").addClass("jouele-hidden"),t.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden"),t.$container.find(".jouele-control-link").on("click",function(e){e.preventDefault(),e.stopPropagation()}),t.$container.find(".jouele-control-button-icon_play").on("click",function(){t.waitForLoad=!0,t.pseudoPlay.call(t),t.play.call(t)}),t.$container.find(".jouele-control-button-icon_pause").on("click",function(){t.pseudoPause.call(t),t.pause.call(t)}),t.$container.find(".jouele-mine").on("mousedown."+i,function(n){if(1!==n.which)return!1;n.stopPropagation(),n.preventDefault(),t.isSeeking=!0;var o=e(this),a=(n.pageX-o.offset().left)/o.width()*100;e(document).off("mouseup."+i).one("mouseup."+i,function(){t.isSeeking=!1,s(t)}),e(document).off("mousemove."+i).on("mousemove."+i,function(e){if(e.stopPropagation(),e.preventDefault(),!t.isSeeking)return!1;var n=(e.pageX-o.offset().left)/o.width()*100;p(t,n)}),p(t,a)})},pause:function(){t.onPause.call(t)},stop:function(){t.onStop.call(t)},play:function(){t.onPlay.call(t)},progress:function(e){u(t,e.jPlayer.status),c(t,e.jPlayer.status.currentTime)},timeupdate:function(e){u(t,e.jPlayer.status),c(t,e.jPlayer.status.currentTime),d(t,e.jPlayer.status.currentPercentAbsolute.toFixed(2)),r(t),t.waitForLoad&&(t.waitForLoad=!1,t.seekTime=0,t.play(),r(t))}}),this},t.prototype.insertDOM=function(){return this.$link.after(this.$container),this.$link.data("jouele",this),this.$link.detach(),this},t.prototype.bindEvents=function(){var t=this,n=t.$container.attr("id");return e(document).on("jouele-pause."+n,function(e,n){t!==n&&t.pause()}),e(document).on("keydown."+n,function(e){32===e.keyCode&&t.isPlaying&&t.options.pauseOnSpace&&(t.options.scrollOnSpace||(e.stopPropagation(),e.preventDefault()),t.$jPlayer.jPlayer("pause"))}),this},i();var h=function(){e(".jouele").jouele()};e(h)}(jQuery);