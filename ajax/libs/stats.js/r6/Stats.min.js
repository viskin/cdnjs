var Stats=function(){var g=0,r=2,o,z=0,D=new Date().getTime(),u=D,e=D,j=0,d=1000,f=0,E,n,b,c,y,h=0,F=1000,a=0,x,q,m,A,i,t=0,p=1000,s=0,l,I,C,B,k,w={fps:{bg:{r:16,g:16,b:48},fg:{r:0,g:255,b:255}},ms:{bg:{r:16,g:48,b:16},fg:{r:0,g:255,b:0}},mb:{bg:{r:48,g:16,b:26},fg:{r:255,g:0,b:128}}};o=document.createElement("div");o.style.cursor="pointer";o.style.width="80px";o.style.opacity="0.9";o.style.zIndex="10001";o.addEventListener("click",G,false);E=document.createElement("div");E.style.backgroundColor="rgb("+Math.floor(w.fps.bg.r/2)+","+Math.floor(w.fps.bg.g/2)+","+Math.floor(w.fps.bg.b/2)+")";E.style.padding="2px 0px 3px 0px";o.appendChild(E);n=document.createElement("div");n.style.fontFamily="Helvetica, Arial, sans-serif";n.style.textAlign="left";n.style.fontSize="9px";n.style.color="rgb("+w.fps.fg.r+","+w.fps.fg.g+","+w.fps.fg.b+")";n.style.margin="0px 0px 1px 3px";n.innerHTML='<span style="font-weight:bold">FPS</span>';E.appendChild(n);b=document.createElement("canvas");b.width=74;b.height=30;b.style.display="block";b.style.marginLeft="3px";E.appendChild(b);c=b.getContext("2d");c.fillStyle="rgb("+w.fps.bg.r+","+w.fps.bg.g+","+w.fps.bg.b+")";c.fillRect(0,0,b.width,b.height);y=c.getImageData(0,0,b.width,b.height);x=document.createElement("div");x.style.backgroundColor="rgb("+Math.floor(w.ms.bg.r/2)+","+Math.floor(w.ms.bg.g/2)+","+Math.floor(w.ms.bg.b/2)+")";x.style.padding="2px 0px 3px 0px";x.style.display="none";o.appendChild(x);q=document.createElement("div");q.style.fontFamily="Helvetica, Arial, sans-serif";q.style.textAlign="left";q.style.fontSize="9px";q.style.color="rgb("+w.ms.fg.r+","+w.ms.fg.g+","+w.ms.fg.b+")";q.style.margin="0px 0px 1px 3px";q.innerHTML='<span style="font-weight:bold">MS</span>';x.appendChild(q);m=document.createElement("canvas");m.width=74;m.height=30;m.style.display="block";m.style.marginLeft="3px";x.appendChild(m);A=m.getContext("2d");A.fillStyle="rgb("+w.ms.bg.r+","+w.ms.bg.g+","+w.ms.bg.b+")";A.fillRect(0,0,m.width,m.height);i=A.getImageData(0,0,m.width,m.height);try{if(performance&&performance.memory&&performance.memory.totalJSHeapSize){r=3}}catch(v){}l=document.createElement("div");l.style.backgroundColor="rgb("+Math.floor(w.mb.bg.r/2)+","+Math.floor(w.mb.bg.g/2)+","+Math.floor(w.mb.bg.b/2)+")";l.style.padding="2px 0px 3px 0px";l.style.display="none";o.appendChild(l);I=document.createElement("div");I.style.fontFamily="Helvetica, Arial, sans-serif";I.style.textAlign="left";I.style.fontSize="9px";I.style.color="rgb("+w.mb.fg.r+","+w.mb.fg.g+","+w.mb.fg.b+")";I.style.margin="0px 0px 1px 3px";I.innerHTML='<span style="font-weight:bold">MB</span>';l.appendChild(I);C=document.createElement("canvas");C.width=74;C.height=30;C.style.display="block";C.style.marginLeft="3px";l.appendChild(C);B=C.getContext("2d");B.fillStyle="#301010";B.fillRect(0,0,C.width,C.height);k=B.getImageData(0,0,C.width,C.height);function H(N,M,K){var J,O,L;for(O=0;O<30;O++){for(J=0;J<73;J++){L=(J+O*74)*4;N[L]=N[L+4];N[L+1]=N[L+5];N[L+2]=N[L+6]}}for(O=0;O<30;O++){L=(73+O*74)*4;if(O<M){N[L]=w[K].bg.r;N[L+1]=w[K].bg.g;N[L+2]=w[K].bg.b}else{N[L]=w[K].fg.r;N[L+1]=w[K].fg.g;N[L+2]=w[K].fg.b}}}function G(){g++;g==r?g=0:g;E.style.display="none";x.style.display="none";l.style.display="none";switch(g){case 0:E.style.display="block";break;case 1:x.style.display="block";break;case 2:l.style.display="block";break}}return{domElement:o,update:function(){z++;D=new Date().getTime();h=D-u;F=Math.min(F,h);a=Math.max(a,h);H(i.data,Math.min(30,30-(h/200)*30),"ms");q.innerHTML='<span style="font-weight:bold">'+h+" MS</span> ("+F+"-"+a+")";A.putImageData(i,0,0);u=D;if(D>e+1000){j=Math.round((z*1000)/(D-e));d=Math.min(d,j);f=Math.max(f,j);H(y.data,Math.min(30,30-(j/100)*30),"fps");n.innerHTML='<span style="font-weight:bold">'+j+" FPS</span> ("+d+"-"+f+")";c.putImageData(y,0,0);if(r==3){t=performance.memory.usedJSHeapSize*9.54e-7;p=Math.min(p,t);s=Math.max(s,t);H(k.data,Math.min(30,30-(t/2)),"mb");I.innerHTML='<span style="font-weight:bold">'+Math.round(t)+" MB</span> ("+Math.round(p)+"-"+Math.round(s)+")";B.putImageData(k,0,0)}e=D;z=0}}}};