"use strict";var frzr=function(){function t(t,e){var n=document.createElement(t);if("undefined"!=typeof e)for(var r in e)n.setAttribute(r,e[r]);return n}function e(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);if("undefined"!=typeof e)for(var r in e)n.setAttribute(e,e[r]);return n}function n(){this.listeners={}}function r(t){h.length||(v.trigger("render"),p(i)),h.push(t)}function i(){for(var t=h.splice(0,h.length),e=0,n=t.length;n>e;e++)t[e]();return 0===h.length?void v.trigger("rendered"):void i()}function o(t,e){for(var n=t.length,r=0;n>r;r++)e(t[r],r,n)}function s(t,e){for(var n,r=[],i=t.length,o=0;i>o;o++)n=t[o],e(n,o,i)&&r.push(n);return r}function u(t){if(!t||!t.length)return t;for(var e,n,r=t.length-1;r>0;r--)e=Math.random()*r|0,n=t[r],t[r]=t[e],t[e]=n;return t}function f(t,e){for(var n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e(t[i],i,n);return r}function l(t,e){t["super"]=e,t.prototype=Object.create(e.prototype,{constructor:{configurable:!0,value:t,writable:!0}})}function a(n,r,i){var o=r&&r.svg||!1;a["super"].call(this),this.$el=o?e(n):t(n),this.attrs={},this["class"]={},this.data={},this.style={},r&&this.setOptions(r),this.trigger("init",this),i&&this.set(i),this.trigger("inited",this)}function c(t,e,n){this.view=new a(e,n),this.views=[],this.lookup={},this.ChildView=t||a}n.prototype.on=function(t,e,n,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({once:r||!1,cb:e,ctx:n||this})},n.prototype.one=function(t,e,n){this.on(t,e,n,!0)},n.prototype.off=function(t,e){if("undefined"==typeof t)return void(this.listeners={});if("undefined"==typeof e)return void(this.listeners[t]=[]);var n=this.listeners[t];if(n)for(var r=0,i=n.length;i>r;r++)n[r].cb===e&&(n.splice(r--,1),i--)},n.prototype.trigger=function(t){for(var e=this.listeners[t],n=arguments.length-1,r=new Array(n),i=0;n>i;i++)r[i]=arguments[i+1];if(e){var o;for(i=0;i<e.length;i++)o=e[i],o.cb.apply(o.ctx||this,r),o.once&&(e.splice(i--,1),n--)}};var h=[],p=window.requestAnimationFrame||function(t){setTimeout(t,1e3/60)},v=new n;l(a,n),a.extend=function(t,e){return function(n,r){if(!r)return new a(n||t,e);var i={};for(var o in e)i[o]=e[o];for(o in r)i[o]=r[o];return new a(n||t,i)}},a.prototype.mount=function(t){var e=this,n=e.$el;e.root=t,r(function(){e.trigger("mount"),t.appendChild(n),e.trigger("mounted")})},a.prototype.unmount=function(){var t=this,e=t.$el;t.root&&r(function(){t.trigger("unmount"),t.root.removeChild(e),t.root=null,t.trigger("unmounted")})},a.prototype.destroy=function(){var t=this;t.trigger("destroy"),t.off(),t.unmount(),t.trigger("destroyed")},a.prototype.mountBefore=function(t,e){var n=this.$el;this.root=t,r(function(){t.insertBefore(n,e)})},a.prototype.set=function(t){var e=this;r(function(){e.trigger("render")}),e.trigger("update",t);for(var n in t)e.data[n]=t[n];e.trigger("updated"),r(function(){e.trigger("rendered")})},a.prototype.setOptions=function(t){if(t){var e;for(e in t)if("attrs"===e)this.setAttributes(t.attrs);else if("style"===e){if("string"==typeof t.style){this.setAttributes({style:t.style});continue}this.setStyle(t.style)}else if("class"===e){if("string"==typeof t["class"]){this.setAttributes({"class":t["class"]});continue}this.setClass(t["class"])}else"textContent"===e?this.textContent(t.textContent):"init"===e?this.on("init",t.init):"update"===e?this.on("update",t.update):this[e]=t[e]}},a.prototype.textContent=function(t){var e=this,n=e.$el;t!==e.text&&(e.text=t,r(function(){t===e.text&&(n.textContent=t)}))},a.prototype.setClass=function(t){var e,n,i=this,o=i.$el;for(e in t)n=t[e],i["class"][e]!==n&&(i["class"][e]=n,r(function(){i["class"][e]===n&&(n?o.classList.add(e):o.classList.remove(e))}))},a.prototype.setStyle=function(t){var e,n,i=this,o=i.$el;for(e in t)n=t[e],i.style[e]!==n&&(i.style[e]=n,r(function(){i.style[e]===t[e]&&(o.style[e]=n)}))},a.prototype.setAttributes=function(t){var e,n,i=this,o=i.$el,s=i.attrs;for(n in t)e=t[n],e!==s[n]&&(i.attrs[n]=e,e===i.attrs[n]&&r(function(){o.setAttribute(n,e)}))},l(c,n),c.prototype.mount=function(t){this.view.mount(t)},c.prototype.mountBefore=function(t,e){this.view.mountBefore(t,e)},c.prototype.unmount=function(){this.view.unmount()},c.prototype.reset=function(t,e){var n=this,r=n.ChildView,i=new Array(t.length),s={},u=n.lookup;o(t,function(t,n){var o=e?t[e]:n,f=u[o];f||(f=new r),s[o]=f,f.set(t),i[n]=f});for(var f in u)s[f]||s[f].destroy();n.views=i,n.lookup=s,n.reorder()},c.prototype.reorder=function(){var t=this,e=t.view.$el;r(function(){var n=e.firstChild;o(t.views,function(t,r){return n===t.$el?void(n=n.nextSibling):void(n?(t.root=e,e.insertBefore(t.$el,n)):(t.root=e,e.appendChild(t.$el)))});for(var r;n;)r=n.nextSibling,e.removeChild(n),n=r})};var d={batchAnimationFrame:r,each:o,element:t,filter:s,inherits:l,map:f,shuffle:u,renderer:v,SVGelement:e,View:a,Views:c};return d}();