!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.frzr=t.frzr||{})}(this,function(t){"use strict";function e(t){return t}function n(t){return Math.pow(t,2)}function i(t){return 1-n(1-t)}function r(t){return.5>t?n(2*t)/2:1-n(2*(1-t))/2}function s(t){return Math.pow(t,3)}function o(t){return 1-s(1-t)}function u(t){return.5>t?s(2*t)/2:1-s(2*(1-t))/2}function a(t){return Math.pow(t,4)}function l(t){return 1-a(1-t)}function h(t){return.5>t?a(2*t)/2:1-a(2*(1-t))/2}function f(t){return Math.pow(t,5)}function c(t){return 1-c(1-t)}function d(t){return.5>t?f(2*t)/2:1-f(2*(1-t))/2}function p(t){var e=7.5625,n=2.75;return 1/n>t?e*t*t:2/n>t?(t-=1.5/n,e*t*t+.75):2.5/n>t?(t-=2.25/n,e*t*t+.9375):(t-=2.625/n,e*t*t+.984375)}function v(t){return 1-p(1-t)}function g(t){return.5>t?v(2*t)/2:1-v(2*(1-t))/2}function m(t,e){for(var n=0;n<t.length;n++)e(t[n],n)}function y(t){if(!t||!t.length)return t;for(var e=t.length-1;e>0;e--){var n=Math.random()*e|0,i=t[e];t[e]=t[n],t[n]=i}return t}function w(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t}})}function x(t,e){for(var n in e)Object.defineProperty(t,n,{value:e[n]})}function L(t,e){for(var n in e)t[n]=e[n];return t}function b(t){t.extend=function(e){function n(i){return this instanceof n?void t.call(this,e,i):new n(i)}return w(n,t),n}}function C(t){if("undefined"!=typeof J[t])return J[t];if("undefined"!=typeof U[t])return J[t]=t,t;for(var e=t[0].toUpperCase()+t.slice(1),n=0,i=G.length;i>n;n++){var r=G[n]+e;if("undefined"!=typeof U[r])return J[t]=r,r}}function A(t,e){if(e=e||{},e.svg)var n=document.createElementNS("http://www.w3.org/2000/svg","svg");else var n=document.createElement(t||"div");for(var i in e)if("text"===i)n.textContent=e.text;else{if("svg"===i)continue;if("style"===i)for(var r=e.style.split(";"),s=0;s<r.length;s++){var o=r[s].split(":");o.length>1&&(n.style[o[0].trim()]=o[1].trim())}else"html"===i?n.innerHTML=e[i]:null!=n[i]?n[i]=e[i]:n.setAttribute(i,e[i])}return n}function T(t){if(!(this instanceof T))return new T(t);if(Object.defineProperty(this,"listeners",{value:{},writable:!0}),Object.defineProperty(this,"asyncListeners",{value:{},writable:!0}),t)for(var e in t)this[e]=t[e]}function O(t){return function(e,n,i){var r=this.listeners[e];return r||(r=this.listeners[e]=[]),r.push({one:t,handler:n,ctx:i}),this}}function M(t,e,n){t?e||(this.listeners[t]=[]):this.listeners={};var i=this.listeners[t];if(!i)return this;for(var r=0;r<i.length;r++){var s=i[r];s.handler===e&&(n&&s.ctx!==n||i.splice(r--,1))}}function q(t){for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i=this.listeners[t];if(!i)return this;for(var n=0;n<i.length;n++){var r=i[n];r.one&&i.splice(n--,1),r.handler.apply(r.ctx||this,e)}}function E(t){return function(e,n,i){var r=this.asyncListeners[e];return r||(r=this.asyncListeners[e]=[]),r.push({one:t,handler:n,ctx:i}),this}}function I(t,e,n){if(!t)return this.asyncListeners={},this;if(!e)return this.asyncListeners[t]=[],this;for(var i=this.asyncListeners[t],r=0;r<i.length;r++){var s=i[r];s.handler===e&&(n&&s.ctx!==n||i.splice(r--,1))}}function B(t,e,n){function i(t,n){if(t)return void e(t);if(s>r.length-1)return void e(null,n);var o=r[s++];o.one&&r.splice(s--,1),o.handler.call(o.ctx||this,n,i)}var r=this.asyncListeners[t];if(!r)return void e(null,n);var s=0;return i(null,n),this}function H(t,e){if(!(this instanceof H))return new H(t,e);if(T.call(this),t=t||{},this.el=null,this.eventListeners=[],this.listeners={},window.HTMLElement&&t instanceof window.HTMLElement)this.el=t;else for(var n in t)K[n]?this.on(n,t[n]):"text"!==n||t.el?"el"===n?"string"==typeof t.el?(this.el=document.createElement(t.el),t.text&&(this.el.textContent=t.text),t.html&&(this.el.innerHTML=t.html)):t.el instanceof Array?this.el=A(t.el[0],t.el[1]):this.el=t.el:this[n]=t[n]:this.el=document.createTextNode(t.text||"");this.trigger(K.init,e),this.el||(this.el=document.createElement("div")),this.el.view=this,this.trigger(K.inited,e)}function k(t,e){if(!(this instanceof k))return new k(t,e);if(T.call(this),this.lookup={},this.views=[],"function"==typeof t)this.View=t;else for(var n in t)R[n]?this.on(n,t[n]):W[n]?this.onAsync(n,t[n]):this[n]=t[n];this.trigger(R.init,e),this.trigger(R.inited,e),e&&this.update(e)}function P(t){return Z?requestAnimationFrame(t):setTimeout(t,1e3/60)}function S(t){_.push(t),$||($=P(function(){$=!1;for(var t=_.splice(0,_.length),e=0;e<t.length;e++)t[e]()}))}function j(t){if(!(this instanceof j))return new j(t);T.call(this);var e=t.delay||0,n=t.duration||0,i=t.easing||"quadOut",r=t.init,s=t.start,o=t.progress,u=t.end,a=Date.now();this.startTime=a+e,this.endTime=this.startTime+n,this.easing=N[i],this.started=!1,r&&this.on("init",r),s&&this.on("start",s),o&&this.on("progress",o),u&&this.on("end",u),et.push(this),this.trigger("init"),tt||(tt=!0,S(z))}function z(){var t=Date.now();if(!et.length)return void(tt=!1);for(var e=0;e<et.length;e++){var n=et[e];if(!(t<n.startTime)){n.started||(n.started=!0,n.trigger("start"));var i=(t-n.startTime)/(n.endTime-n.startTime);i>1&&(i=1),n.trigger("progress",n.easing(i),i),t>n.endTime&&(n.trigger("end"),et.splice(e--,1))}}S(z)}function V(t){var e=null,n=!1,i=!1;return function r(s){return n?(i=!0,void(e=s)):(n=!0,i=!1,e=null,void t(function(){n=!1,i&&r(e)},s))}}function F(t,e,n){return"undefined"==typeof nt&&(nt=D()),nt||n?"translate3d("+(t||0)+", "+(e||0)+", "+(n||0)+")":"translate("+(t||0)+", "+(e||0)+")"}function D(){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(!t)return!1;var e=C("transform"),n=document.createElement("p");return document.body.appendChild(n),n.style[e]="translate3d(1px,1px,1px)",nt=n.style[e],nt="undefined"!=typeof nt&&null!==nt&&nt.length&&"none"!==nt?!0:!1,document.body.removeChild(n),nt}var N={linear:e,quadIn:n,quadOut:i,quadInOut:r,cubicIn:s,cubicOut:o,cubicInOut:u,quartIn:a,quartOut:l,quartInOut:h,quintIn:f,quintOut:c,quintInOut:d,bounceIn:v,bounceOut:p,bounceInOut:g},U="undefined"!=typeof document?document.createElement("p").style:{},G=["webkit","moz","Moz","ms","o"],J={};T.prototype.on=O(!1),T.prototype.one=O(!0),T.prototype.off=M,T.prototype.trigger=q,T.prototype.onAsync=E(!1),T.prototype.oneAsync=E(!0),T.prototype.offAsync=I,T.prototype.triggerAsync=B;var K="init inited mount mounted unmount unmounted sort sorted update updated destroy".split(" ").reduce(function(t,e){return t[e]=e,t},{});w(H,T),x(H.prototype,{setAttr:function(t,e){return null!=this.el[t]?this.el[t]!==e&&(this.el[t]=e):this.el.getAttribute(t)!==e&&this.el.setAttribute(t),this},setClass:function(t,e){return this.el.classList.contains(t)!==e&&(e?this.el.classList.add(t):this.el.classList.remove(t)),this},setStyle:function(t,e){return this.el.style[t]!==e&&(this.el.style[t]=e),this},setText:function(t){return this.el.textContent!==t&&(this.el.textContent=t),this},setHTML:function(t){return this.el.innerHTML!==t&&(this.el.innerHTML=t),this},addListener:function(t,e,n){var i=this,r={name:t,handler:e,proxy:function(t){e.call(i,t)}};return this.eventListeners||(this.eventListeners=[]),this.eventListeners.push(r),this.el.addEventListener(t,r.proxy,n),this},removeListener:function(t,e){var n=this.eventListeners;if(!n)return this;if("undefined"==typeof t){for(var i=0;i<n.length;i++)this.el.removeEventListener(n[i].proxy);this.listeners=[]}else if("undefined"==typeof e)for(var i=0;i<n.length;i++)n[i].name===t&&n.splice(i--,1);else for(var i=0;i<n.length;i++){var r=n[i];r.name===t&&e===r.handler&&n.splice(i--,1)}return this},appendChild:function(t){if(t.views)return t.parent=this,this.setChildren(t.views);var e=!1;return t.parent?(e=!0,t.trigger(K.sort)):t.trigger(K.mount),this.el.appendChild(t.el),t.parent=this,e?t.trigger(K.sorted):t.trigger(K.mounted),this},addChild:function(t){return this.appendChild(t)},insertBefore:function(t,e){var n=!1;return t.parent?(n=!0,t.trigger(K.sort)):t.trigger(K.mount),this.el.insertBefore(t.el,e.el||e),t.parent=this,n?t.trigger(K.sorted):t.trigger(K.mounted),this},addBefore:function(t,e){return this.insertBefore(t,e)},insertAfter:function(t,e){var n=e.el||e,i=n.nextSibling;i?this.addBefore(t,i):this.addChild(t)},addAfter:function(t,e){return this.insertAfter(t,e)},setChildren:function(t){if(t.views)return t.parent=this,this.setChildren(t.views);for(var e=this.el.firstChild,n=0;n<t.length;n++){var i=t[n];e!==i.el?e?this.addBefore(i,e):this.addChild(i):e=e.nextSibling}for(;e;){var r=e.nextSibling;e.view?e.view.parent.removeChild(e.view):this.el.removeChild(e),e=r}return this},removeChild:function(t){return t.parent?(t.trigger(K.unmount),this.el.removeChild(t.el),t.parent=null,t.trigger(K.unmounted),this):this},update:function(t){this.trigger(K.update,t)},destroy:function(){this.trigger(K.destroy),this.parent&&this.parent.removeChild(this);for(var t=this.el.firstChild;t;)t.view?t.view.destroy():this.el.removeChild(t),t=this.el.firstChild;this.off(),this.removeListener()}}),b(H);var Q=H,R="init inited update updated destroy".split(" ").reduce(function(t,e){return t[e]=e,t},{}),W="preremove".split(" ").reduce(function(t,e){return t[e]=e,t},{});w(k,T),x(k.prototype,{update:function(t){var e=this;e.trigger(R.update,t);for(var n=new Array(t.length),i={},r=e.views,s=e.lookup,o=e.key,u=0;u<t.length;u++){var a=t[u],l=o&&a[o],h=e.View||e.view||H,f=(o?s[l]:r[u])||new h;o&&(i[l]=f),n[u]=f,f.update(a)}var c=[];if(o)for(var l in s)i[l]||c.push(s[l]);else for(var u=n.length;u<r.length;u++)c.push(n[u]);e.parent&&e.parent.setChildren(n.concat(c)),this.triggerAsync(W.preremove,function(){for(var t=0;t<c.length;t++)c[t].destroy()},c),e.views=n,e.lookup=i,e.trigger(R.updated)},destroy:function(){this.trigger(R.destroy),this.update([]),this.off()}}),b(k);var X=k,Y=k,Z="undefined"!=typeof requestAnimationFrame;P.cancel=function(t){Z?cancelAnimationFrame(t):clearTimeout(t)};var $,_=[];S.cancel=function(t){for(var e=0;e<_.length;e++)_[e]===t&&_.splice(e--,1)};var tt,et=[];w(j,T),x(j.prototype,{destroy:function(){for(var t=0;t<et.length;t++)if(et[t]===this)return void et.splice(t,1)}});var nt,it=j;t.ease=N,t.el=A,t.prefix=C,t.View=H,t.view=Q,t.ViewList=k,t.viewlist=X,t.viewList=Y,t.Animation=j,t.animation=it,t.Observable=T,t.each=m,t.shuffle=y,t.inherits=w,t.define=x,t.extend=L,t.extendable=b,t.renderer=V,t.translate=F,t.baf=S,t.raf=P});