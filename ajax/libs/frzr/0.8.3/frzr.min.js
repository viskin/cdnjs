!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.frzr={})}(this,function(t){"use strict";function e(t){return t}function n(t){return Math.pow(t,2)}function i(t){return 1-n(1-t)}function r(t){return.5>t?n(2*t)/2:1-n(2*(1-t))/2}function s(t){return Math.pow(t,3)}function o(t){return 1-s(1-t)}function u(t){return.5>t?s(2*t)/2:1-s(2*(1-t))/2}function a(t){return Math.pow(t,4)}function l(t){return 1-a(1-t)}function h(t){return.5>t?a(2*t)/2:1-a(2*(1-t))/2}function f(t){return Math.pow(t,5)}function d(t){return 1-d(1-t)}function c(t){return.5>t?f(2*t)/2:1-f(2*(1-t))/2}function p(t){var e=7.5625,n=2.75;return 1/n>t?e*t*t:2/n>t?(t-=1.5/n,e*t*t+.75):2.5/n>t?(t-=2.25/n,e*t*t+.9375):(t-=2.625/n,e*t*t+.984375)}function v(t){return 1-p(1-t)}function g(t){return.5>t?v(2*t)/2:1-v(2*(1-t))/2}function m(t,e){for(var n=0;n<t.length;n++)e(t[n],n)}function y(t){return"undefined"!=typeof t||null!==t}function w(t){if(!t||!t.length)return t;for(var e=t.length-1;e>0;e--){var n=Math.random()*e|0,i=t[e];t[e]=t[n],t[n]=i}return t}function C(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t}})}function x(t,e){for(var n in e)Object.defineProperty(t,n,{value:e[n]})}function b(t,e){for(var n in e)t[n]=e[n];return t}function L(t){t.extend=function(e){function n(n){t.call(this,e,n)}return C(n,t),n}}function O(t){if("undefined"!=typeof D[t])return D[t];if("undefined"!=typeof F[t])return D[t]=t,t;for(var e=t[0].toUpperCase()+t.slice(1),n=0,i=V.length;i>n;n++){var r=V[n]+e;if("undefined"!=typeof F[r])return D[t]=r,r}}function T(t,e){var n=document.createElement(t||"div");if(e)for(var i in e)if("text"===i)n.textContent=e[i];else if("style"===i)if(frzr.server)for(var r in e.style)n.style[r]=e.style[r];else n.style=e.style;else"html"===i?n.innerHTML=e[i]:n[i]=e[i];return n}function q(){this.listeners={}}function M(t,e){q.call(this),this.el=null,this.eventListeners=[],this.listeners={};for(var n in t)U[n]?this.on(n,t[n]):"el"===n?"string"==typeof t.el?this.el=document.createElement(t.el):t.el instanceof Array?this.el=T(t.el[0],t.el[1]):this.el=t.el:this[n]=t[n];this.trigger(U.init,e),this.el||(this.el=document.createElement("div")),this.el.view=this,this.trigger(U.inited,e)}function A(t,e){return new M(t,e)}function I(t){q.call(this),this.lookup={},this.views=[];for(var e in t)G[e]?this.on(e,t[e]):this[e]=t[e]}function E(t){return new I(t)}function k(t){return J?requestAnimationFrame(t):setTimeout(t,1e3/60)}function B(t){N.push(t),K||(K=k(function(){K=!1;for(var t=N.splice(0,N.length),e=0;e<t.length;e++)t[e]()}))}function S(t){q.call(this);var e=t.delay||0,n=t.duration||0,i=t.easing||"quadOut",r=t.init,s=t.start,o=t.progress,u=t.end,a=Date.now();this.startTime=a+e,this.endTime=this.startTime+n,this.easing=j[i],this.started=!1,r&&this.on("init",r),s&&this.on("start",s),o&&this.on("progress",o),u&&this.on("end",u),R.push(this),this.trigger("init"),Q||(Q=!0,B(z))}function z(){var t=Date.now();if(!R.length)return void(Q=!1);for(var e=0;e<R.length;e++){var n=R[e];if(!(t<n.startTime)){n.started||(n.started=!0,n.trigger("start"));var i=(t-n.startTime)/(n.endTime-n.startTime);i>1&&(i=1),n.trigger("progress",n.easing(i),i),t>n.endTime&&(n.trigger("end"),R.splice(e--,1))}}B(z)}function H(t,e,n){return"undefined"==typeof W&&(W=P()),W||n?"translate3d("+(t||0)+", "+(e||0)+", "+(n||0)+")":"translate("+(t||0)+", "+(e||0)+")"}function P(){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(!t)return!1;var e=O("transform"),n=document.createElement("p");return document.body.appendChild(n),n.style[e]="translate3d(1px,1px,1px)",W=n.style[e],W=y(W)&&W.length&&"none"!==W?!0:!1,document.body.removeChild(n),W}var j={linear:e,quadIn:n,quadOut:i,quadInOut:r,cubicIn:s,cubicOut:o,cubicInOut:u,quartIn:a,quartOut:l,quartInOut:h,quintIn:f,quintOut:d,quintInOut:c,bounceIn:v,bounceOut:p,bounceInOut:g},F="undefined"!=typeof document?document.createElement("p").style:{},V=["webkit","moz","Moz","ms","o"],D={};b(q.prototype,{on:function(t,e){return"undefined"==typeof this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].push({handler:e,one:!1}),this},one:function(t,e){return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({handler:e,one:!0}),this},trigger:function(t){var e=this.listeners[t];if(!e)return this;for(var n=new Array(arguments.length-1),i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(i=0;i<e.length;i++)e[i].handler.apply(this,n),e[i].one&&e.splice(i--,1);return this},off:function(t,e){if("undefined"==typeof t)this.listeners={};else if("undefined"==typeof e)this.listeners[t]=[];else{var n=this.listeners[t];if(!n)return this;for(var i=0;i<n.length;i++)n[i].handler===e&&n.splice(i--,1)}return this}});var U="init inited mount mounted unmount unmounted sort sorted update updated destroy".split(" ").reduce(function(t,e){return t[e]=e,t},{});C(M,q),x(M.prototype,{setAttr:function(t,e){return this.el[t]!==e&&(this.el[t]=e),this},setClass:function(t,e){return this.el.classList.contains(t)!==e&&(e?this.el.classList.add(t):this.el.classList.remove(t)),this},setStyle:function(t,e){return this.el.style[t]!==e&&(this.el.style[t]=e),this},setText:function(t){return this.el.textContent!==t&&(this.el.textContent=t),this},setHTML:function(t){return this.el.innerHTML!==t&&(this.el.innerHTML=t),this},addListener:function(t,e,n){var i=this,r={name:t,handler:e,proxy:function(t){e.call(i,t)}};return this.eventListeners||(this.eventListeners=[]),this.eventListeners.push(r),this.el.addEventListener(t,r.proxy,n),this},removeListener:function(t,e){var n=this.eventListeners;if(!n)return this;if("undefined"==typeof t){for(var i=0;i<n.length;i++)this.el.removeEventListener(n[i].proxy);this.listeners=[]}else if("undefined"==typeof e)for(var i=0;i<n.length;i++)n[i].name===t&&n.splice(i--,1);else for(var i=0;i<n.length;i++){var r=n[i];r.name===t&&e===r.handler&&n.splice(i--,1)}return this},addChild:function(t){if(t.views)return t.parent=this,this.setChildren(t.views);var e=!1;return t.parent?(e=!0,t.trigger(U.sort)):t.trigger(U.mount),this.el.appendChild(t.el),t.parent=this,e?t.trigger(U.sorted):t.trigger(U.mounted),this},addBefore:function(t,e){var n=!1;return t.parent?(n=!0,t.trigger(U.sort)):t.trigger(U.mount),this.el.insertBefore(t.el,e.el||e),t.parent=this,n?t.trigger(U.sorted):t.trigger(U.mounted),this},addAfter:function(t,e){var n=e.el||e,i=n.nextSibling;i?this.addBefore(t,i):this.addChild(t)},setChildren:function(t){if(t.views)return t.parent=this,this.setChildren(t.views);for(var e=this.el.firstChild,n=0;n<t.length;n++){var i=t[n];e!==i.el?e?this.addBefore(i,e):this.addChild(i):e=e.nextSibling}for(;e;){var r=e.nextSibling;e.view?e.view.parent.removeChild(e.view):this.el.removeChild(e),e=r}return this},removeChild:function(t){return t.parent?(t.trigger(U.unmount),this.el.removeChild(t.el),t.parent=null,t.trigger(U.unmounted),this):this},update:function(t){this.trigger(U.update,t)},destroy:function(){this.trigger(U.destroy),this.parent&&this.parent.removeChild(this);for(var t=this.el.firstChild;t;)t.view?t.view.destroy():this.el.removeChild(t),t=this.el.firstChild;this.off(),this.removeListener()}}),L(M),A.extend=function(t){return function(e){return new M(t,e)}};var G="init inited mount mounted unmount unmounted sort sorted update updated destroy".split(" ").reduce(function(t,e){return t[e]=!0,t},{});C(I,q),x(I.prototype,{update:function(t){for(var e=this,n=new Array(t.length),i={},r=this.views,s=this.lookup,o=this.key,u=0;u<t.length;u++){for(var a=t[u],l=o&&a[o],h=this.View||M,f=(o?s[l]:r[u])||new h,d=0;d<G.length;d++){var c=G[d];f.on(c,function(t){e.trigger(c,f,t)})}o&&(i[l]=f),n[u]=f,f.update(a)}if(o)for(var l in s)i[l]||s[l].destroy();else for(var u=n.length;u<r.length;u++)r[u].destroy();this.views=n,this.lookup=i,this.parent&&this.parent.setChildren(n)},destroy:function(){this.update([]),this.off()}}),L(I),E.extend=function(t){return function(e){return new I(t,e)}};var J="undefined"!=typeof requestAnimationFrame;k.cancel=function(t){J?cancelAnimationFrame(t):clearTimeout(t)};var K,N=[];B.cancel=function(t){for(var e=0;e<N.length;e++)N[e]===t&&N.splice(e--,1)};var Q,R=[];C(S,q),b(S.prototype,{destroy:function(){for(var t=0;t<R.length;t++)if(R[t]===this)return void R.splice(t,1)}});var W;t.ease=j,t.el=T,t.prefix=O,t.view=A,t.View=M,t.viewList=E,t.ViewList=I,t.Animation=S,t.Observable=q,t.define=x,t.each=m,t.extend=b,t.extendable=L,t.inherits=C,t.shuffle=w,t.translate=H,t.baf=B,t.raf=k});