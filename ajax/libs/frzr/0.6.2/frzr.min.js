"use strict";var frzr=function(){function t(t,e){var n=document.createElement(t);if("undefined"!=typeof e)for(var r in e)n.setAttribute(r,e[r]);return n}function e(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);if("undefined"!=typeof e)for(var r in e)n.setAttribute(e,e[r]);return n}function n(){this.listeners={}}function r(t){g.length||(y.trigger("render"),v(o)),g.push(t)}function o(){for(var t=g.splice(0,g.length),e=0,n=t.length;n>e;e++)t[e]();return 0===g.length?void y.trigger("rendered"):void o()}function i(t,e){for(var n=t.length,r=0;n>r;r++)e(t[r],r,n)}function s(t,e){for(var n,r=[],o=t.length,i=0;o>i;i++)n=t[i],e(n,i,o)&&r.push(n);return r}function u(t){if(!t||!t.length)return t;for(var e,n,r=t.length-1;r>0;r--)e=Math.random()*r|0,n=t[r],t[r]=t[e],t[e]=n;return t}function f(t,e){for(var n=t.length,r=new Array(n),o=0;n>o;o++)r[o]=e(t[o],o,n);return r}function a(t,e){t["super"]=e,t.prototype=Object.create(e.prototype,{constructor:{configurable:!0,value:t,writable:!0}})}function l(n){var r=this,o=r instanceof l;if(!o)return new l(n);var i=n&&n.svg||!1,s=n.data;n.data=null,l["super"].call(r),r.$el=i?e(n.el||"svg"):t(n.el||"div"),r.$root=null,r.parent=null,r._attrs={},r._class={},r._data={},r._style={},r._text="",n&&r.opt(n),r.trigger("init",r),s&&r.set(s),r.trigger("inited",r)}function p(){this.trigger("parentmount")}function c(){this.trigger("parentmounted")}function d(){this.$el.focus()}function h(t,e){var n=this instanceof h;return n?(this.view=new l(e),this.views=[],this.lookup={},void(this.ChildView=t||l)):new h(t,e)}n.prototype.on=function(t,e,n,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({once:r||!1,cb:e,ctx:n})},n.prototype.one=function(t,e,n){this.on(t,e,n,!0)},n.prototype.off=function(t,e,n){if("undefined"==typeof t)return void(this.listeners={});if("undefined"==typeof e)return void(this.listeners[t]=[]);var r=this.listeners[t];if(r)for(var o=0,i=r.length;i>o;o++)n?r[o].ctx===n&&(r.splice(o--,1),i--):r[o].cb===e&&(r.splice(o--,1),i--)},n.prototype.trigger=function(t){for(var e=this.listeners[t],n=arguments.length-1,r=new Array(n),o=0;n>o;o++)r[o]=arguments[o+1];if(e){var i;for(o=0;o<e.length;o++)i=e[o],i.cb.apply(i.ctx||this,r),i.once&&(e.splice(o--,1),n--)}};var g=[],v=window.requestAnimationFrame||function(t){setTimeout(t,1e3/60)},y=new n;a(l,n),l.extend=function(t){return function(e){if(!e)return new l(t);var n={};for(var r in t)n[r]=t[r];for(r in e)n[r]=e[r];return new l(n)}},l.prototype.mount=function(t){var e=this;e.parent&&(e.parent.off("mount",p,e),e.parent.off("mounted",c,e)),e.$root&&(e.trigger("unmount"),e.trigger("unmounted")),t instanceof l?(e.parent=t,e.$root=t.$el):e.$root=t,r(function(){e.parent&&(e.parent.on("mount",p,e),e.parent.on("mounted",c,e)),e.trigger("mount"),e.$root.appendChild(e.$el),e.trigger("mounted")})},l.prototype.unmount=function(){var t=this,e=t.$el;t.$root&&(t.parent&&(t.parent.off("mount",p,t),t.parent.off("mounted",c,t)),r(function(){t.trigger("unmount"),t.$root.removeChild(e),t.$root=null,t.parent=null,t.trigger("unmounted")}))},l.prototype.destroy=function(){var t=this;t.trigger("destroy"),t.off(),t.unmount(),t.trigger("destroyed")},l.prototype.mountBefore=function(t,e){var n=this,o=n.$el;n.$root=t,r(function(){t.insertBefore(o,e)})},l.prototype.set=function(t,e){var n=this,o={};"string"==typeof t?o[t]=e:null!=t&&(o=t),r(function(){n.trigger("render")}),n.trigger("update",o);for(var t in o)n._data[t]=o[t];n.trigger("updated"),r(function(){n.trigger("rendered")})},l.prototype.opt=function(t,e){var n=this,r={};if("undefined"!=typeof t){"string"==typeof t?r[t]=e:null!=t&&(r=t);for(t in r)if("attrs"===t)n.attr(r.attrs);else if("attr"===t)n.attr(r.attr);else if("href"===t)n.attr({href:r.href});else if("id"===t)n.attr({id:r.id});else if("data"===t)n.set(r.data);else if("style"===t){if("string"==typeof r.style){n.attr({style:r.style});continue}n.style(r.style)}else if("class"===t){if("string"==typeof r["class"]){n.attr({"class":r["class"]});continue}n["class"](r["class"])}else"text"===t?n.text(r.text):"listen"===t?n.addListeners(r.listen):"init"===t?n.on("init",r.init):"update"===t?n.on("update",r.update):"parent"===t?n.mount(r.parent):"$root"===t?n.mount(r.$root):n[t]=r[t]}},l.prototype.textContent=function(t,e){console.error("DEPRECATED! Please use .text instead.."),this.text(t,e)},l.prototype.setOptions=function(t,e){console.error("DEPRECATED! Please use .opt instead.."),this.opt(t,e)},l.prototype.setAttributes=function(t,e){console.error("DEPRECATED! Please use .attr instead.."),this.attr(t,e)},l.prototype.setClass=function(t,e){console.error("DEPRECATED! Please use .class instead.."),this["class"](t,e)},l.prototype.setStyle=function(t,e){console.error("DEPRECATED! Please use .style instead.."),this.style(t,e)},l.prototype.text=function(t){var e=this,n=e.$el;t!==e._text&&(e._text=t,r(function(){t===e._text&&(n.textContent=t)}))},l.prototype.listen=function(t,e){function n(t,e){r.on(t,e),o.addEventListener(t,function(e){r.trigger(t,e)})}var r=this,o=r.$el,i={};"string"==typeof t?i[t]=e:null!=t&&(i=t);for(t in i)e=i[t],n(t,e)},l.prototype["class"]=function(t,e){function n(t,e){r(function(){o._class[t]===e&&(e?i.classList.add(t):i.classList.remove(t))})}var o=this,i=o.$el,s={};"string"==typeof t?s[t]=e:null!=t&&(s=t);for(t in s)e=s[t],o._class[t]!==e&&(o._class[t]=e,n(t,e))},l.prototype.style=function(t,e){function n(t,e){r(function(){o._style[t]===s[t]&&(i.style[t]=e)})}var o=this,i=o.$el,s={};"string"==typeof t?s[t]=e:null!=t&&(s=t);for(t in s)e=s[t],o._style[t]!==e&&(o._style[t]=e,n(t,e))},l.prototype.attr=function(t,e){function n(t,e){r(function(){if(e===i._attrs[t]){if(e===!1||null==e)return void s.removeAttribute(t);s.setAttribute(t,e),"autofocus"===t&&(e?(s.focus(),i.on("mounted",d),i.on("parentmounted",d,i)):(i.off("mounted",d),i.off("parentmounted",d,i)))}})}var o,i=this,s=i.$el,u=i._attrs,f={};"string"==typeof t?f[t]=e:null!=t&&(f=t);for(o in f)e=f[o],e!==u[o]&&(i._attrs[o]=e,e===i._attrs[o]&&n(o,e))},a(h,n),h.prototype.mount=function(t){this.view.mount(t)},h.prototype.mountBefore=function(t,e){this.view.mountBefore(t,e)},h.prototype.unmount=function(){this.view.unmount()},h.prototype.reset=function(t,e){var n=this,r=n.ChildView,o=new Array(t.length),s={},u=n.lookup;i(t,function(t,i){var f=e?t[e]:i,a=u[f];a||(a=new r({parent:n.view})),s[f]=a,a.set(t),o[i]=a});for(var f in u)s[f]||u[f].destroy();n.views=o,n.lookup=s,n.reorder()},h.prototype.reorder=function(){var t=this,e=t.view.$el;r(function(){var n=e.firstChild;i(t.views,function(t,r){return n===t.$el?void(n=n.nextSibling):void(n?(t.$root=e,e.insertBefore(t.$el,n)):(t.$root=e,e.appendChild(t.$el)))});for(var r;n;)r=n.nextSibling,e.removeChild(n),n=r})};var m={batchAnimationFrame:r,each:i,element:t,filter:s,inherits:a,map:f,shuffle:u,renderer:y,Observable:n,SVGelement:e,View:l,Views:h};return m}();