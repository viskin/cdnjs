!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.frzr={})}(this,function(t){"use strict";function e(){var t=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=document.createElement(t);for(var n in e)"text"===n?r.textContent=e[n]:"html"===n?r.innerHTML=e[n]:r.setAttribute(n,e[n]);return r}function r(t,e){for(var r=0;r<t.length;r++)e(t[r],r)}function n(t){if(!t||!t.length)return t;for(var e=t.length-1;e>0;e--){var r=Math.random()*e|0,n=t[e];t[e]=t[r],t[r]=n}return t}function i(t){t.extend=function(e){return function(t){function r(){s.classCallCheck(this,r);for(var n=arguments.length,i=Array(n),o=0;n>o;o++)i[o]=arguments[o];return s.possibleConstructorReturn(this,t.call.apply(t,[this,e].concat(i)))}return s.inherits(r,t),r}(t)}}var s={};s.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},s.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};var o=function(){function t(){s.classCallCheck(this,t),this.listeners={}}return t.prototype.on=function(t,e){return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({callback:e,one:!1}),this},t.prototype.one=function(t,e){return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({callback:e,one:!0}),this},t.prototype.trigger=function(t){var e=this.listeners[t];if(!e)return this;for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;r>i;i++)n[i-1]=arguments[i];for(var s=0;s<e.length;s++)e[s].callback.apply(this,n),e[s].one&&e.splice(s--,1);return this},t.prototype.off=function(t,e){if("undefined"==typeof t)this.listeners={};else if("undefined"==typeof e)this.listeners[t]=[];else{var r=this.listeners[t];if(!r)return this;for(var n=0;n<r.length;n++)r[n].callback===e&&r.splice(n--,1)}return this},t}(),l="init inited mount mounted unmount unmounted update updated destroy".split(" ").reduce(function(t,e){return t[e]=e,t},{}),h=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1];s.classCallCheck(this,e);var i=s.possibleConstructorReturn(this,t.call(this));i.attrs={},i.classes={},i.el=null,i.eventListeners=[],i.html="",i.listeners={},i.styles={},i.text="";for(var o in r)l[o]?i.on(o,r[o]):i[o]=r[o];return i.trigger(l.init,n),i.el||(i.el=document.createElement("div")),i.el.view=i,i.trigger(l.inited,n),i}return s.inherits(e,t),e.prototype.setAttr=function(t,e){return this.attrs||(this.attrs={}),this.attrs[t]===e?this:(e||""===e?(this.el.setAttribute(t,e),this.attrs[t]=e):(this.el.removeAttribute(t),this.attrs[t]=null),this)},e.prototype.setClass=function(t,e){return this.classes||(this.classes={}),this.classes[t]===e?this:(e?this.el.classList.add(t):this.el.classList.remove(t),this.classes[t]=e,this)},e.prototype.setStyle=function(t,e){return this.styles||(this.styles={}),this.styles[t]===e?this:(this.el.style[t]=e,this.styles[t]=e,this)},e.prototype.setText=function(t){return this.text===t?this:(this.el.textContent=t,this.text=t,this)},e.prototype.setHTML=function(t){return this.html===t?this:(this.el.innerHTML=t,this.html=t,this)},e.prototype.addListener=function(t,e,r){var n=this,i={name:t,callback:e,proxy:function(){for(var t=arguments.length,r=Array(t),i=0;t>i;i++)r[i]=arguments[i];e.apply(n,r)}};return this.eventListeners||(this.eventListeners=[]),this.eventListeners.push(i),this.el.addEventListener(t,i.proxy,r),this},e.prototype.removeListener=function(t,e){var r=this.eventListeners;if(!r)return this;if("undefined"==typeof t){for(var n=0;n<r.length;n++)this.el.removeEventListener(r[n].proxy);this.listeners=[]}else if("undefined"==typeof e)for(var n=0;n<r.length;n++)r[n].name===t&&r.splice(n--,1);else for(var n=0;n<r.length;n++){var i=r[n];i.name===t&&e===i.callback&&r.splice(n--,1)}return this},e.prototype.addChild=function(t){if(t.views)return t.parent=this,this.setChildren.apply(this,t.views);var e=!1;return t.parent?(e=!0,t.trigger(l.sort)):t.trigger(l.mount),this.el.appendChild(t.el),t.parent=this,e?t.trigger(l.sorted):t.trigger(l.mounted),this},e.prototype.addBefore=function(t,e){var r=!1;return t.parent?(r=!0,t.trigger(l.sort)):t.trigger(l.mount),this.el.insertBefore(t.el,e.el||e),t.parent=this,r?t.trigger(l.sorted):t.trigger(l.mounted),this},e.prototype.setChildren=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];if(e[0].views){if(e[0].parent=this,!e[0].views.length)return this;this.setChildren.apply(this,e[0].views)}for(var n=this.el.firstChild,i=0;i<e.length;i++){var s=e[i];n!==s.el?n?this.addBefore(s,n):this.addChild(s):n=n.nextSibling}for(;n;){var o=n.nextSibling;n.view?n.view.parent.removeChild(n.view):this.el.removeChild(n),n=o}return this},e.prototype.removeChild=function(t){return t.parent?(t.trigger(l.unmount),this.el.removeChild(t.el),t.parent=null,t.trigger(l.unmounted),this):this},e.prototype.update=function(t){this.trigger(l.update,t)},e.prototype.destroy=function(){this.trigger(l.destroy),this.setChildren([]),this.parent.removeChild(this),this.off(),this.removeListener()},e}(o);i(h);var u="init inited mount mounted unmount unmounted sort sorted update updated destroy".split(" ").reduce(function(t,e){return t[e]=!0,t},{}),a=function(t){function e(r){s.classCallCheck(this,e);var n=s.possibleConstructorReturn(this,t.call(this));n.lookup={},n.views=[];for(var i in r)u[i]?n.on(i,r[i]):n[i]=r[i];return n}return s.inherits(e,t),e.prototype.setData=function(t){for(var e,r=this,n=new Array(t.length),i={},s=this.views,o=this.lookup,l=this.key,a=function(e){for(var a=t[e],f=l&&a[l],p=r.View||h,c=(l?o[f]:s[e])||new p,d=function(t){var e=u[t];c.on(e,function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];r.trigger(e,[c].concat(n))})},g=0;g<u.length;g++)d(g);l&&(i[l]=c),n[e]=c,c.update(a)},f=0;f<t.length;f++)a(f);if(l)for(var p in o)i[p]||o[p].destroy();else for(var f=n.length;f<s.length;f++)s[f].destroy();this.views=n,this.lookup=i,this.parent&&(e=this.parent).setChildren.apply(e,n)},e}(o);i(a),t.el=e,t.View=h,t.ViewList=a,t.Observable=o,t.each=r,t.extendable=i,t.shuffle=n});