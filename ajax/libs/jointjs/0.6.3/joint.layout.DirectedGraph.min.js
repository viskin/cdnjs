/*! JointJS v0.6.0 - JavaScript diagramming library  2013-09-10 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
!function(){function a(a){var b={};return a.forEach(function(a,c){b[a]=c}),b}function b(a,b){Object.keys(a).forEach(function(c){b[c]=a[c]})}function c(a){return Math.min.apply(null,a)}function d(a){return Math.max.apply(null,a)}function f(a){return Array.prototype.concat.apply([],a)}function g(a){return Object.keys(a).map(function(b){return a[b]})}function h(a){for(var b={},c=0;c<a.length;++c)for(var d=a[c],e=0;e<d.length;++e){var f=d[e];b[f]=f}var g=[];for(var h in b)g.push(b[h]);return g}function i(a,b,c,d){return function(e){return arguments.length?(b[c]=e,d&&d(e),a):b[c]}}function j(){function a(b){var d=l,e=2*b,f=e+1,g=b;e<d.length&&(g=d[e].pri<d[g].pri?e:g,f<d.length&&(g=d[f].pri<d[g].pri?f:g),g!==b&&(c(b,g),a(g)))}function b(a){for(var b,d=l,e=d[a].pri;a>0&&(b=a>>1,!(d[b].pri<e));)c(a,b),a=b}function c(a,b){var c=l,d=m,e=c[a];c[a]=c[b],c[b]=e,d[c[a].key]=a,d[c[b].key]=b}function d(){return l.length}function e(){return Object.keys(m)}function f(a){return a in m}function g(a){var b=m[a];return void 0!==b?l[b].pri:void 0}function h(a,c){if(!(a in m)){var d={key:a,pri:c},e=l.length;return m[a]=e,l.push(d),b(e),!0}return!1}function i(){return d()>0?l[0].key:void 0}function j(){c(0,l.length-1);var b=l.pop();return delete m[b.key],a(0),b.key}function k(a,c){var d=m[a];if(c>l[d].pri)throw new Error("New priority is greater than current priority. Key: "+a+" Old: "+l[d].pri+" New: "+c);l[d].pri=c,b(d)}var l=[],m={};return{size:d,keys:e,has:f,priority:g,add:h,min:i,removeMin:j,decrease:k}}dagre={},dagre.version="0.0.6",dagre.graph={},dagre.graph=function(){function a(a,b,c){var d=a[b];d||(d=a[b]={count:0,edges:{}}),d.count++,d.edges[c]=!0}function b(a,b,c){var d=a[b];0===--d.count?delete a[b]:delete d.edges[c]}function c(a){var b=e[a];if(!(a in e))throw new Error("Node '"+a+"' is not in graph:\n"+l.toString());return b}function d(a){var b=k[a];if(!b)throw new Error("Edge '"+a+"' is not in graph:\n"+l.toString());return b}var e={},i={},j={},k={},l={},m=0;return l.addNode=function(a,b){if(l.hasNode(a))throw new Error("Graph already has node '"+a+"':\n"+l.toString());e[a]={id:a,value:b},i[a]={},j[a]={}},l.delNode=function(a){c(a),l.edges(a).forEach(function(a){l.delEdge(a)}),delete i[a],delete j[a],delete e[a]},l.node=function(a){return c(a).value},l.hasNode=function(a){return a in e},l.addEdge=function(b,d,e,f){if(c(d),c(e),null===b)b="_ANON-"+ ++m;else if(l.hasEdge(b))throw new Error("Graph already has edge '"+b+"':\n"+l.toString());k[b]={id:b,source:d,target:e,value:f},a(i[e],d,b),a(j[d],e,b)},l.delEdge=function(a){var c=d(a);b(i[c.target],c.source,a),b(j[c.source],c.target,a),delete k[a]},l.edge=function(a){return d(a).value},l.source=function(a){return d(a).source},l.target=function(a){return d(a).target},l.hasEdge=function(a){return a in k},l.successors=function(a){return c(a),n(j[a]).map(function(a){return e[a].id})},l.predecessors=function(a){return c(a),n(i[a]).map(function(a){return e[a].id})},l.neighbors=function(a){c(a);var b={};return n(j[a]).map(function(a){b[a]=!0}),n(i[a]).map(function(a){b[a]=!0}),n(b).map(function(a){return e[a].id})},l.nodes=function(){var a=[];return l.eachNode(function(b){a.push(b)}),a},l.eachNode=function(a){for(var b in e){var c=e[b];a(c.id,c.value)}},l.edges=function(a,b){var d,e;return arguments.length?1===arguments.length?h([l.inEdges(a),l.outEdges(a)]):2===arguments.length?(c(a),c(b),e=j[a],d=b in e?n(e[b].edges):[],d.map(function(a){return k[a].id})):void 0:(d=[],l.eachEdge(function(a){d.push(a)}),d)},l.eachEdge=function(a){for(var b in k){var c=k[b];a(c.id,c.source,c.target,c.value)}},l.inEdges=function(a){return c(a),f(g(i[a]).map(function(a){return n(a.edges)}))},l.outEdges=function(a){return c(a),f(g(j[a]).map(function(a){return n(a.edges)}))},l.subgraph=function(a){var b=dagre.graph();return a.forEach(function(a){b.addNode(a,l.node(a))}),g(k).forEach(function(a){b.hasNode(a.source)&&b.hasNode(a.target)&&b.addEdge(a.id,a.source,a.target,l.edge(a.id))}),b},l.toString=function(){var a="GRAPH:\n";return a+="    Nodes:\n",n(e).forEach(function(b){a+="        "+b+": "+JSON.stringify(e[b].value)+"\n"}),a+="    Edges:\n",n(k).forEach(function(b){var c=k[b];a+="        "+b+" ("+c.source+" -> "+c.target+"): "+JSON.stringify(k[b].value)+"\n"}),a},l},dagre.layout=function(){function a(){function a(a,c){var d=c[a].dagre.id;if(!b.hasNode(d))throw new Error(a+" node for '"+e+"' not in node list");return d}var b=dagre.graph(),c=0;return h.nodes.forEach(function(a){var d="id"in a?a.id:"_N"+c++;a.dagre={id:d,width:a.width,height:a.height},b.addNode(d,a.dagre)}),h.edges.forEach(function(d){var e=a("source",d),f=a("target",d);if(d.dagre={points:[]},e!==f){var g="id"in d?d.id:"_E"+c++;d.dagre.id=g,d.dagre.minLen=d.minLen||1,d.dagre.width=d.width||0,d.dagre.height=d.height||0,b.addEdge(g,e,f,d.dagre)}}),b}function b(){var b=o.rankSep();try{if(!h.nodes.length)return;var e=a();e.eachEdge(function(a,b,c,d){d.minLen*=2}),o.rankSep(b/2),k.run(e),l.run(e),c(e),m.run(e),n.run(e),d(e),f(e),k.undo(e)}finally{o.rankSep(b)}return o}function c(a){var b=0;a.eachEdge(function(c,d,e,f){var g=a.node(d).rank,h=a.node(e).rank;if(h>g+1){for(var i=d,j=g+1,k=0;h>j;++j,++k){var l="_D"+ ++b,m={width:f.width,height:f.height,edge:{id:c,source:d,target:e,attrs:f},rank:j,dummy:!0};0===k?m.index=0:j+1===h&&(m.index=1),a.addNode(l,m),a.addEdge(null,i,l,{}),i=l}a.addEdge(null,i,e,{}),a.delEdge(c)}})}function d(a){a.eachNode(function(b,c){if(c.dummy&&"index"in c){var d=c.edge;a.hasEdge(d.id)||a.addEdge(d.id,d.source,d.target,d.attrs);var e=a.edge(d.id).points;e[c.index]={x:c.x,y:c.y,ul:c.ul,ur:c.ur,dl:c.dl,dr:c.dr},a.delNode(b)}})}function f(a){a.eachEdge(function(a,b,c,d){d.reversed&&d.points.reverse()})}function g(a){return function(){return arguments.length?(a.apply(null,arguments),o):a()}}var h={nodes:[],edges:[],debugLevel:0},j=p(),k=dagre.layout.acyclic(),l=dagre.layout.rank(),m=dagre.layout.order(),n=dagre.layout.position(),o={};return o.nodes=i(o,h,"nodes"),o.edges=i(o,h,"edges"),o.orderIters=g(m.iterations),o.nodeSep=g(n.nodeSep),o.edgeSep=g(n.edgeSep),o.universalSep=g(n.universalSep),o.rankSep=g(n.rankSep),o.rankDir=g(n.rankDir),o.debugAlignment=g(n.debugAlignment),o.debugLevel=i(o,h,"debugLevel",function(a){j.enabled(a),k.debugLevel(a),l.debugLevel(a),m.debugLevel(a),n.debugLevel(a)}),o.run=j.wrap("Total layout",b),o._normalize=c,o},dagre.layout.acyclic=function(){function a(a){function c(b){b in e||(e[b]=d[b]=!0,a.outEdges(b).forEach(function(e){var g,h=a.target(e);h in d?(g=a.edge(e),a.delEdge(e),g.reversed=!0,++f,a.addEdge(e,h,b,g)):c(h)}),delete d[b])}var d={},e={},f=0;a.eachNode(function(a){c(a)}),b.debugLevel>=2&&console.log("Acyclic Phase: reversed "+f+" edge(s)")}var b={debugLevel:0},c=p(),d={};return d.debugLevel=i(d,b,"debugLevel",function(a){c.enabled(a)}),d.run=c.wrap("Acyclic Phase",a),d.undo=function(a){a.eachEdge(function(b,c,d,e){e.reversed&&(delete e.reversed,a.delEdge(b),a.addEdge(b,d,c,e))})},d},dagre.layout.rank=function(){function a(a){b(a),o(a).forEach(function(b){var c=a.subgraph(b);d(c),e(c)})}function b(a){var b={},c=j();for(a.eachNode(function(d){c.add(d,a.inEdges(d).length),b[d]=0});c.size()>0;){var d=c.min();if(c.priority(d)>0)throw new Error("Input graph is not acyclic: "+a.toString());c.removeMin();var e=b[d];a.node(d).rank=e,a.outEdges(d).forEach(function(d){var f=a.target(d);b[f]=Math.max(b[f],e+(a.edge(d).minLen||1)),c.decrease(f,c.priority(f)-1)})}}function d(a){function b(g,h){e[g]=!0,a.node(g).rank=h,d[g].forEach(function(d){if(!(d in e)){var i=c[f(g,d)];b(d,h+(a.edges(g,d).length?i:-i))}})}var c={};a.eachEdge(function(a,b,d,e){var g=f(b,d);c[g]=Math.max(c[g]||1,e.minLen||1)});var d=dagre.util.prim(a,function(b,d){return Math.abs(a.node(b).rank-a.node(d).rank)-c[f(b,d)]}),e={};return b(a.nodes()[0],0),d}function e(a){var b=c(a.nodes().map(function(b){return a.node(b).rank}));a.eachNode(function(a,c){c.rank-=b})}function f(a,b){return b>a?a.length+":"+a+"-"+b:b.length+":"+b+"-"+a}var g={debugLevel:0},h=p(),k={};return k.debugLevel=i(k,g,"debugLevel",function(a){h.enabled(a)}),k.run=h.wrap("Rank Phase",a),k},dagre.layout.order=function(){function b(a){var b=c(a),d=j(b),e=k(a,b);l.debugLevel>=2&&console.log("Order phase start cross count: "+e);var g,h,i;for(h=0,i=0;4>i&&h<l.iterations;++h,++i)g=f(a,h,b),e>g&&(d=j(b),e=g,i=0),l.debugLevel>=3&&console.log("Order phase iter "+h+" cross count: "+e);return d.forEach(function(b){b.forEach(function(b,c){a.node(b).order=c})}),l.debugLevel>=2&&(console.log("Order iterations: "+h),console.log("Order phase best cross count: "+e)),d}function c(a){var b=[];return a.eachNode(function(a,c){var d=b[c.rank]||(b[c.rank]=[]);d.push(a)}),b}function d(a){return function(b){var c=[];return a.inEdges(b).forEach(function(b){c.push(a.source(b))}),c}}function e(a){return function(b){var c=[];return a.outEdges(b).forEach(function(b){c.push(a.target(b))}),c}}function f(b,c,f){var h;if(0===c%2)for(h=1;h<f.length;++h)g(f[h],d(b),a(f[h-1]));else for(h=f.length-2;h>=0;--h)g(f[h],e(b),a(f[h+1]));return k(b,f)}function g(b,c,d){var e=a(b),f=h(b,c,d),g=b.filter(function(a){return-1!==f[a]});g.sort(function(a,b){return f[a]-f[b]||e[a]-e[b]});for(var i=b.length-1;i>=0;--i)-1!==f[b[i]]&&(b[i]=g.pop())}function h(a,b,c){var d={};return a.forEach(function(a){var e=b(a),f=-1;e.length>0&&(f=m(e.map(function(a){return c[a]}))/e.length),d[a]=f}),d}function j(a){return a.map(function(a){return a.slice(0)})}var l={iterations:24,debugLevel:0},n=p(),o={};return o.iterations=i(o,l,"iterations"),o.debugLevel=i(o,l,"debugLevel",function(a){n.enabled(a)}),o.run=n.wrap("Order Phase",b),o};var k=dagre.layout.order.crossCount=function(a,b){var c,d=0;return b.forEach(function(b){c&&(d+=l(a,c,b)),c=b}),d},l=dagre.layout.order.bilayerCrossCount=function(b,c,d){var e=a(d),f=[];c.forEach(function(a){var c=[];b.outEdges(a).forEach(function(a){c.push(e[b.target(a)])}),c.sort(function(a,b){return a-b}),f=f.concat(c)});for(var g=1;g<d.length;)g<<=1;var h=2*g-1;g-=1;for(var i=[],j=0;h>j;++j)i[j]=0;var k=0;return f.forEach(function(a){var b=a+g;for(++i[b];b>0;)b%2&&(k+=i[b+1]),b=b-1>>1,++i[b]}),k};dagre.layout.position=function(){function a(a){var b=[];a.eachNode(function(a,c){var d=b[c.rank]||(b[c.rank]=[]);d[c.order]=a});var g=e(a,b),i={};["u","d"].forEach(function(c){"d"===c&&b.reverse(),["l","r"].forEach(function(d){"r"===d&&n(b);var e=c+d,j=f(a,b,g,"u"===c?"predecessors":"successors");i[e]=h(a,b,j.pos,j.root,j.align),"r"===d&&m(i[e]),"r"===d&&n(b)}),"d"===c&&b.reverse()}),l(a,b,i),a.eachNode(function(b){var c=[];for(var d in i)t(d,a,b,i[d][b]),c.push(i[d][b]);c.sort(function(a,b){return a-b}),s(a,b,(c[1]+c[2])/2)});var j=c(a.nodes().map(function(b){return s(a,b)-o(a,b)/2}));a.eachNode(function(b){s(a,b,s(a,b)-j)});var k=0;b.forEach(function(b){var c=d(b.map(function(b){return q(a,b)}));k+=c/2,b.forEach(function(b){u(a,b,k)}),k+=c/2+v.rankSep})}function b(a,b){return b>a?a.toString().length+":"+a+"-"+b:b.toString().length+":"+b+"-"+a}function e(a,c){var d={},e={};if(c.length<=2)return d;c[1].forEach(function(a,b){e[a]=b});for(var f=1;f<c.length-1;++f)for(var g=c[f],h=c[f+1],i=0,j=0,k=0;k<h.length;++k){var l=h[k];e[l]=k;var m=void 0;if(a.node(l).dummy){var n=a.predecessors(l)[0];a.node(n).dummy&&(m=e[n])}if(void 0===m&&k===h.length-1&&(m=g.length-1),void 0!==m){for(;k>=j;++j)a.predecessors(h[j]).forEach(function(a){var c=e[a];(i>c||c>m)&&(d[b(h[j],a)]=!0)});i=m}}return d}function f(a,c,d,e){var f={},g={},h={};return c.forEach(function(a){a.forEach(function(a,b){g[a]=a,h[a]=a,f[a]=b})}),c.forEach(function(c){var i=-1;c.forEach(function(c){var j,k=a[e](c);k.length>0&&(k.sort(function(a,b){return f[a]-f[b]}),j=(k.length-1)/2,k.slice(Math.floor(j),Math.ceil(j)+1).forEach(function(a){h[c]===c&&!d[b(a,c)]&&i<f[a]&&(h[a]=c,h[c]=g[c]=g[a],i=f[a])}))})}),{pos:f,root:g,align:h}}function h(a,b,c,d,e){function f(b){if(!(b in k)){k[b]=0;var g=b;do{if(c[g]>0){var l=d[j[g]];f(l),h[b]===b&&(h[b]=h[l]);var m=r(a,j[g])+r(a,g);h[b]!==h[l]?i[h[l]]=Math.min(i[h[l]]||Number.POSITIVE_INFINITY,k[b]-k[l]-m):k[b]=Math.max(k[b],k[l]+m)}g=e[g]}while(g!==b)}}var h={},i={},j={},k={};return b.forEach(function(a){a.forEach(function(b,c){h[b]=b,c>0&&(j[b]=a[c-1])})}),g(d).forEach(function(a){f(a)}),b.forEach(function(a){a.forEach(function(a){k[a]=k[d[a]];var b=i[h[a]];d[a]===a&&b<Number.POSITIVE_INFINITY&&(k[a]+=b)})}),k}function j(a,b,d){return c(b.map(function(a){var b=a[0];return d[b]}))}function k(a,b,c){return d(b.map(function(a){var b=a[a.length-1];return c[b]}))}function l(a,b,c){var d,e={},f={},g={},h=Number.POSITIVE_INFINITY;for(var i in c){var l=c[i];e[i]=j(a,b,l),f[i]=k(a,b,l);var m=f[i]-e[i];h>m&&(h=m,d=i)}["u","d"].forEach(function(a){["l","r"].forEach(function(b){var c=a+b;g[c]="l"===b?e[d]-e[c]:f[d]-f[c]})});for(var i in c)a.eachNode(function(a){c[i][a]+=g[i]})}function m(a){for(var b in a)a[b]=-a[b]}function n(a){a.forEach(function(a){a.reverse()})}function o(a,b){switch(v.rankDir){case"LR":return a.node(b).height;default:return a.node(b).width}}function q(a,b){switch(v.rankDir){case"LR":return a.node(b).width;default:return a.node(b).height}}function r(a,b){if(null!==v.universalSep)return v.universalSep;var c=o(a,b),d=a.node(b).dummy?v.edgeSep:v.nodeSep;return(c+d)/2}function s(a,b,c){switch(v.rankDir){case"LR":if(arguments.length<3)return a.node(b).y;a.node(b).y=c;break;default:if(arguments.length<3)return a.node(b).x;a.node(b).x=c}}function t(a,b,c,d){switch(v.rankDir){case"LR":if(arguments.length<3)return b.node(c)[a];b.node(c)[a]=d;break;default:if(arguments.length<3)return b.node(c)[a];b.node(c)[a]=d}}function u(a,b,c){switch(v.rankDir){case"LR":if(arguments.length<3)return a.node(b).x;a.node(b).x=c;break;default:if(arguments.length<3)return a.node(b).y;a.node(b).y=c}}var v={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30,rankDir:"TB",debugLevel:0},w=p(),x={};return x.nodeSep=i(x,v,"nodeSep"),x.edgeSep=i(x,v,"edgeSep"),x.universalSep=i(x,v,"universalSep"),x.rankSep=i(x,v,"rankSep"),x.rankDir=i(x,v,"rankDir"),x.debugLevel=i(x,v,"debugLevel",function(a){w.enabled(a)}),x.run=w.wrap("Position Phase",a),x},dagre.util={};var m=dagre.util.sum=function(a){return a.reduce(function(a,b){return a+b},0)},n=dagre.util.keys=Object.keys,o=dagre.util.components=function(a){function b(c,e){c in d||(d[c]=!0,e.push(c),a.neighbors(c).forEach(function(a){b(a,e)}))}var c=[],d={};return a.eachNode(function(a){var d=[];b(a,d),d.length>0&&c.push(d)}),c};dagre.util.prim=function(a,b){var c={},d={},e=j();if(0===a.nodes().length)return c;a.eachNode(function(a){e.add(a,Number.POSITIVE_INFINITY),c[a]=[]}),e.decrease(a.nodes()[0],0);for(var f,g=!1;e.size()>0;){if(f=e.removeMin(),f in d)c[f].push(d[f]),c[d[f]].push(f);else{if(g)throw new Error("Input graph is not connected:\n"+a.toString());g=!0}a.neighbors(f).forEach(function(a){var c=e.priority(a);if(void 0!==c){var g=b(f,a);c>g&&(d[a]=f,e.decrease(a,g))}})}return c},dagre.util.intersectRect=function(a,b){var c,d,e=a.x,f=a.y,g=b.x-e,h=b.y-f,i=a.width/2,j=a.height/2;return Math.abs(h)*i>Math.abs(g)*j?(0>h&&(j=-j),c=0===h?0:j*g/h,d=j):(0>g&&(i=-i),c=i,d=0===g?0:i*h/g),{x:e+c,y:f+d}},dagre.util.pointStr=function(a){return a.x+","+a.y};var p=function(){var a={},b=!1;return a.enabled=function(c){return arguments.length?(b=c,a):b},a.wrap=function(a,c){return function(){var d=b?(new Date).getTime():null;try{return c.apply(null,arguments)}finally{d&&console.log(a+" time: "+((new Date).getTime()-d)+"ms")}}},a};dagre.dot={},dagre.dot.toGraph=function(a){function c(a,c){h.hasNode(a)||(h.addNode(a,k.get("node",{id:a})),void 0===h.node(a).label&&(h.node(a).label=a)),c&&b(c,h.node(a))}function d(a,c,d){var e=a+"-"+c,f=j[e];f||(f=j[e]=0),j[e]++;var g=d.id||e+"-"+f,i={};b(k.get("edge",d),i),b({id:g},i),h.addEdge(g,a,c,i)}function e(a){function b(a){e.push(a)}var c,d={},e=[];for(b(a);0!==e.length;)switch(c=e.pop(),c.type){case"node":d[c.id]=!0;break;case"edge":c.elems.forEach(b);break;case"subgraph":c.stmts.forEach(b)}return dagre.util.keys(d)}function f(a){var b=a.attrs;switch(a.type){case"node":c(a.id,b);break;case"edge":var g,h;a.elems.forEach(function(a){switch(f(a),a.type){case"node":h=[a.id];break;case"subgraph":h=e(a);break;default:throw new Error("Unsupported type incident on edge: "+a.type)}g&&g.forEach(function(a){h.forEach(function(c){d(a,c,b),i&&d(c,a,b)})}),g=h});break;case"subgraph":k.enterSubGraph(),a.stmts.forEach(function(a){f(a)}),k.exitSubGraph();break;case"attr":k.set(a.attrType,b);break;default:throw new Error("Unsupported statement type: "+a.type)}}var g=dot_parser.parse(a),h=dagre.graph(),i="graph"===g.type,j={},k={_default:{},get:function(a,c){if("undefined"!=typeof this._default[a]){var d={};return b(this._default[a],d),b(c,d),d}return c},set:function(a,b){this._default[a]=this.get(a,b)},enterSubGraph:function(){function a(){}a.prototype=this._default;var b=new a;this._default=b},exitSubGraph:function(){this._default=Object.getPrototypeOf(this._default)}};return g.stmts&&g.stmts.forEach(function(a){f(a)}),h},dagre.dot.toObjects=function(a){var b=dagre.dot.toGraph(a),c=b.nodes().map(function(a){return b.node(a)}),d=b.edges().map(function(a){var c=b.edge(a);return c.source=b.node(b.source(a)),c.target=b.node(b.target(a)),c});return{nodes:c,edges:d}},dot_parser=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var b={parse:function(b,c){function d(a){N>L||(L>N&&(N=L,O=[]),O.push(a))}function e(){var a,c,e,g,h,i,j,k,l,m,n,o,p,q,r,s;for(q=L,r=L,a=[],c=F();null!==c;)a.push(c),c=F();if(null!==a)if(s=L,c=B(),null!==c?(e=F(),null!==e?c=[c,e]:(c=null,L=s)):(c=null,L=s),c=null!==c?c:"",null!==c)if(e=C(),null!==e){for(g=[],h=F();null!==h;)g.push(h),h=F();if(null!==g)if(h=v(),h=null!==h?h:"",null!==h){for(i=[],j=F();null!==j;)i.push(j),j=F();if(null!==i)if(123===b.charCodeAt(L)?(j="{",L++):(j=null,0===M&&d('"{"')),null!==j){for(k=[],l=F();null!==l;)k.push(l),l=F();if(null!==k)if(l=f(),l=null!==l?l:"",null!==l){for(m=[],n=F();null!==n;)m.push(n),n=F();if(null!==m)if(125===b.charCodeAt(L)?(n="}",L++):(n=null,0===M&&d('"}"')),null!==n){for(o=[],p=F();null!==p;)o.push(p),p=F();null!==o?a=[a,c,e,g,h,i,j,k,l,m,n,o]:(a=null,L=r)}else a=null,L=r;else a=null,L=r}else a=null,L=r;else a=null,L=r}else a=null,L=r;else a=null,L=r}else a=null,L=r;else a=null,L=r}else a=null,L=r;else a=null,L=r;else a=null,L=r;return null!==a&&(a=function(a,b,c,d){return{type:b,id:c,stmts:d}}(q,a[2],a[4],a[8])),null===a&&(L=q),a}function f(){var a,c,e,f,h,i,j,k,l,m,n;if(l=L,m=L,a=g(),null!==a){for(c=[],e=F();null!==e;)c.push(e),e=F();if(null!==c)if(59===b.charCodeAt(L)?(e=";",L++):(e=null,0===M&&d('";"')),e=null!==e?e:"",null!==e){for(f=[],n=L,h=[],i=F();null!==i;)h.push(i),i=F();if(null!==h)if(i=g(),null!==i){for(j=[],k=F();null!==k;)j.push(k),k=F();null!==j?(59===b.charCodeAt(L)?(k=";",L++):(k=null,0===M&&d('";"')),k=null!==k?k:"",null!==k?h=[h,i,j,k]:(h=null,L=n)):(h=null,L=n)}else h=null,L=n;else h=null,L=n;for(;null!==h;){for(f.push(h),n=L,h=[],i=F();null!==i;)h.push(i),i=F();if(null!==h)if(i=g(),null!==i){for(j=[],k=F();null!==k;)j.push(k),k=F();null!==j?(59===b.charCodeAt(L)?(k=";",L++):(k=null,0===M&&d('";"')),k=null!==k?k:"",null!==k?h=[h,i,j,k]:(h=null,L=n)):(h=null,L=n)}else h=null,L=n;else h=null,L=n}null!==f?a=[a,c,e,f]:(a=null,L=m)}else a=null,L=m;else a=null,L=m}else a=null,L=m;return null!==a&&(a=function(a,b,c){for(var d=[b],e=0;e<c.length;++e)d.push(c[e][1]);return d}(l,a[0],a[3])),null===a&&(L=l),a}function g(){var a;return a=h(),null===a&&(a=k(),null===a&&(a=l(),null===a&&(a=i(),null===a&&(a=j())))),a}function h(){var a,b,c,d,e;if(d=L,e=L,a=y(),null===a&&(a=w(),null===a&&(a=x())),null!==a){for(b=[],c=F();null!==c;)b.push(c),c=F();null!==b?(c=m(),null!==c?a=[a,b,c]:(a=null,L=e)):(a=null,L=e)}else a=null,L=e;return null!==a&&(a=function(a,b,c){return{type:"attr",attrType:b,attrs:c||{}}}(d,a[0],a[2])),null===a&&(L=d),a}function i(){var a,c,e,f,g,h,i;if(h=L,i=L,a=v(),null!==a){for(c=[],e=F();null!==e;)c.push(e),e=F();if(null!==c)if(61===b.charCodeAt(L)?(e="=",L++):(e=null,0===M&&d('"="')),null!==e){for(f=[],g=F();null!==g;)f.push(g),g=F();null!==f?(g=v(),null!==g?a=[a,c,e,f,g]:(a=null,L=i)):(a=null,L=i)}else a=null,L=i;else a=null,L=i}else a=null,L=i;return null!==a&&(a=function(a,b,c){var d={};return d[b]=c,{type:"inlineAttr",attrs:d}}(h,a[0],a[4])),null===a&&(L=h),a}function j(){var a,b,c,d,e;if(d=L,e=L,a=s(),null!==a){for(b=[],c=F();null!==c;)b.push(c),c=F();null!==b?(c=m(),c=null!==c?c:"",null!==c?a=[a,b,c]:(a=null,L=e)):(a=null,L=e)}else a=null,L=e;return null!==a&&(a=function(a,b,c){return{type:"node",id:b,attrs:c||{}}}(d,a[0],a[2])),null===a&&(L=d),a}function k(){var a,b,c,d,e,f,g;if(f=L,g=L,a=r(),null!==a){for(b=[],c=F();null!==c;)b.push(c),c=F();if(null!==b)if(c=p(),null!==c){for(d=[],e=F();null!==e;)d.push(e),e=F();null!==d?(e=m(),e=null!==e?e:"",null!==e?a=[a,b,c,d,e]:(a=null,L=g)):(a=null,L=g)}else a=null,L=g;else a=null,L=g}else a=null,L=g;return null!==a&&(a=function(a,b,c,d){for(var e=[b],f=0;f<c.length;++f)e.push(c[f]);return{type:"edge",elems:e,attrs:d||{}}}(f,a[0],a[2],a[4])),null===a&&(L=f),a}function l(){var a,c,e,g,h,i,j,k,l,m;if(j=L,k=L,l=L,a=A(),null!==a){for(c=[],e=F();null!==e;)c.push(e),e=F();if(null!==c){if(m=L,e=v(),null!==e){for(g=[],h=F();null!==h;)g.push(h),h=F();null!==g?e=[e,g]:(e=null,L=m)}else e=null,L=m;e=null!==e?e:"",null!==e?a=[a,c,e]:(a=null,L=l)}else a=null,L=l}else a=null,L=l;if(a=null!==a?a:"",null!==a)if(123===b.charCodeAt(L)?(c="{",L++):(c=null,0===M&&d('"{"')),null!==c){for(e=[],g=F();null!==g;)e.push(g),g=F();if(null!==e)if(g=f(),null!==g){for(h=[],i=F();null!==i;)h.push(i),i=F();null!==h?(125===b.charCodeAt(L)?(i="}",L++):(i=null,0===M&&d('"}"')),null!==i?a=[a,c,e,g,h,i]:(a=null,L=k)):(a=null,L=k)}else a=null,L=k;else a=null,L=k}else a=null,L=k;else a=null,L=k;return null!==a&&(a=function(a,b,c){return b=b[2]||[],{type:"subgraph",id:b[0],stmts:c}}(j,a[0],a[3])),null===a&&(L=j),a}function m(){var a,b,c,d,e,f,g;if(e=L,f=L,a=n(),null!==a){for(b=[],g=L,c=[],d=F();null!==d;)c.push(d),d=F();for(null!==c?(d=n(),null!==d?c=[c,d]:(c=null,L=g)):(c=null,L=g);null!==c;){for(b.push(c),g=L,c=[],d=F();null!==d;)c.push(d),d=F();null!==c?(d=n(),null!==d?c=[c,d]:(c=null,L=g)):(c=null,L=g)}null!==b?a=[a,b]:(a=null,L=f)}else a=null,L=f;return null!==a&&(a=function(a,b,c){for(var d=b,e=0;e<c.length;++e)d=I(d,c[e][1]);return d}(e,a[0],a[1])),null===a&&(L=e),a}function n(){var a,c,e,f,g,h,i;if(h=L,i=L,91===b.charCodeAt(L)?(a="[",L++):(a=null,0===M&&d('"["')),null!==a){for(c=[],e=F();null!==e;)c.push(e),e=F();if(null!==c)if(e=o(),e=null!==e?e:"",null!==e){for(f=[],g=F();null!==g;)f.push(g),g=F();null!==f?(93===b.charCodeAt(L)?(g="]",L++):(g=null,0===M&&d('"]"')),null!==g?a=[a,c,e,f,g]:(a=null,L=i)):(a=null,L=i)}else a=null,L=i;else a=null,L=i}else a=null,L=i;return null!==a&&(a=function(a,b){return b}(h,a[2])),null===a&&(L=h),a}function o(){var a,c,e,f,g,h,i,j,k;if(i=L,j=L,a=q(),null!==a){for(c=[],k=L,e=[],f=F();null!==f;)e.push(f),f=F();if(null!==e)if(44===b.charCodeAt(L)?(f=",",L++):(f=null,0===M&&d('","')),f=null!==f?f:"",null!==f){for(g=[],h=F();null!==h;)g.push(h),h=F();null!==g?(h=q(),null!==h?e=[e,f,g,h]:(e=null,L=k)):(e=null,L=k)}else e=null,L=k;else e=null,L=k;for(;null!==e;){for(c.push(e),k=L,e=[],f=F();null!==f;)e.push(f),f=F();if(null!==e)if(44===b.charCodeAt(L)?(f=",",L++):(f=null,0===M&&d('","')),f=null!==f?f:"",null!==f){for(g=[],h=F();null!==h;)g.push(h),h=F();null!==g?(h=q(),null!==h?e=[e,f,g,h]:(e=null,L=k)):(e=null,L=k)}else e=null,L=k;else e=null,L=k}null!==c?a=[a,c]:(a=null,L=j)}else a=null,L=j;return null!==a&&(a=function(a,b,c){for(var d=b,e=0;e<c.length;++e)d=I(d,c[e][3]);return d}(i,a[0],a[1])),null===a&&(L=i),a}function p(){var a,c,e,f,g,h,i,j;if(h=L,i=L,j=L,"--"===b.substr(L,2)?(a="--",L+=2):(a=null,0===M&&d('"--"')),null!==a?(c=function(){return K}(L)?null:"",null!==c?a=[a,c]:(a=null,L=j)):(a=null,L=j),null===a&&(j=L,"->"===b.substr(L,2)?(a="->",L+=2):(a=null,0===M&&d('"->"')),null!==a?(c=function(){return K}(L)?"":null,null!==c?a=[a,c]:(a=null,L=j)):(a=null,L=j)),null!==a){for(c=[],e=F();null!==e;)c.push(e),e=F();if(null!==c)if(e=r(),null!==e){for(f=[],g=F();null!==g;)f.push(g),g=F();null!==f?(g=p(),g=null!==g?g:"",null!==g?a=[a,c,e,f,g]:(a=null,L=i)):(a=null,L=i)}else a=null,L=i;else a=null,L=i}else a=null,L=i;return null!==a&&(a=function(a,b,c){for(var d=[b],e=0;e<c.length;++e)d.push(c[e]);return d}(h,a[2],a[4])),null===a&&(L=h),a}function q(){var a,c,e,f,g,h,i,j;if(h=L,i=L,a=v(),null!==a){for(j=L,c=[],e=F();null!==e;)c.push(e),e=F();if(null!==c)if(61===b.charCodeAt(L)?(e="=",L++):(e=null,0===M&&d('"="')),null!==e){for(f=[],g=F();null!==g;)f.push(g),g=F();null!==f?(g=v(),null!==g?c=[c,e,f,g]:(c=null,L=j)):(c=null,L=j)}else c=null,L=j;else c=null,L=j;c=null!==c?c:"",null!==c?a=[a,c]:(a=null,L=i)}else a=null,L=i;return null!==a&&(a=function(a,b,c){var d={};return d[b]=c[3],d}(h,a[0],a[1])),null===a&&(L=h),a}function r(){var a,b;return a=l(),null===a&&(b=L,a=s(),null!==a&&(a=function(a,b){return{type:"node",id:b,attrs:{}}}(b,a)),null===a&&(L=b)),a}function s(){var a,b,c,d,e;if(d=L,e=L,a=v(),null!==a){for(b=[],c=F();null!==c;)b.push(c),c=F();null!==b?(c=t(),c=null!==c?c:"",null!==c?a=[a,b,c]:(a=null,L=e)):(a=null,L=e)}else a=null,L=e;return null!==a&&(a=function(a,b){return b}(d,a[0])),null===a&&(L=d),a}function t(){var a,c,e,f,g,h,i,j,k;if(j=L,58===b.charCodeAt(L)?(a=":",L++):(a=null,0===M&&d('":"')),null!==a){for(c=[],e=F();null!==e;)c.push(e),e=F();if(null!==c)if(e=v(),null!==e){for(f=[],g=F();null!==g;)f.push(g),g=F();if(null!==f){if(k=L,58===b.charCodeAt(L)?(g=":",L++):(g=null,0===M&&d('":"')),null!==g){for(h=[],i=F();null!==i;)h.push(i),i=F();null!==h?(i=u(),null!==i?g=[g,h,i]:(g=null,L=k)):(g=null,L=k)}else g=null,L=k;g=null!==g?g:"",null!==g?a=[a,c,e,f,g]:(a=null,L=j)}else a=null,L=j}else a=null,L=j;else a=null,L=j}else a=null,L=j;return a}function u(){var a;return 110===b.charCodeAt(L)?(a="n",L++):(a=null,0===M&&d('"n"')),null===a&&("ne"===b.substr(L,2)?(a="ne",L+=2):(a=null,0===M&&d('"ne"')),null===a&&(101===b.charCodeAt(L)?(a="e",L++):(a=null,0===M&&d('"e"')),null===a&&("se"===b.substr(L,2)?(a="se",L+=2):(a=null,0===M&&d('"se"')),null===a&&(115===b.charCodeAt(L)?(a="s",L++):(a=null,0===M&&d('"s"')),null===a&&("sw"===b.substr(L,2)?(a="sw",L+=2):(a=null,0===M&&d('"sw"')),null===a&&(119===b.charCodeAt(L)?(a="w",L++):(a=null,0===M&&d('"w"')),null===a&&("nw"===b.substr(L,2)?(a="nw",L+=2):(a=null,0===M&&d('"nw"')),null===a&&(99===b.charCodeAt(L)?(a="c",L++):(a=null,0===M&&d('"c"')),null===a&&(95===b.charCodeAt(L)?(a="_",L++):(a=null,0===M&&d('"_"'))))))))))),a}function v(){var a,c,e,f,g,h,i,j,k;if(M++,h=L,i=L,/^[a-zA-Z\u0200-\u0377_]/.test(b.charAt(L))?(a=b.charAt(L),L++):(a=null,0===M&&d("[a-zA-Z\\u0200-\\u0377_]")),null!==a){for(c=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(b.charAt(L))?(e=b.charAt(L),L++):(e=null,0===M&&d("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==e;)c.push(e),/^[a-zA-Z\u0200-\u0377_0-9]/.test(b.charAt(L))?(e=b.charAt(L),L++):(e=null,0===M&&d("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==c?a=[a,c]:(a=null,L=i)}else a=null,L=i;if(null!==a&&(a=function(a,b,c){return b+c.join("")}(h,a[0],a[1])),null===a&&(L=h),null===a){if(h=L,i=L,45===b.charCodeAt(L)?(a="-",L++):(a=null,0===M&&d('"-"')),a=null!==a?a:"",null!==a)if(46===b.charCodeAt(L)?(c=".",L++):(c=null,0===M&&d('"."')),null!==c){if(/^[0-9]/.test(b.charAt(L))?(f=b.charAt(L),L++):(f=null,0===M&&d("[0-9]")),null!==f)for(e=[];null!==f;)e.push(f),/^[0-9]/.test(b.charAt(L))?(f=b.charAt(L),L++):(f=null,0===M&&d("[0-9]"));else e=null;null!==e?a=[a,c,e]:(a=null,L=i)}else a=null,L=i;else a=null,L=i;if(null!==a&&(a=function(a,b,c,d){return b+c+d.join("")}(h,a[0],a[1],a[2])),null===a&&(L=h),null===a){if(h=L,i=L,45===b.charCodeAt(L)?(a="-",L++):(a=null,0===M&&d('"-"')),a=null!==a?a:"",null!==a){if(/^[0-9]/.test(b.charAt(L))?(e=b.charAt(L),L++):(e=null,0===M&&d("[0-9]")),null!==e)for(c=[];null!==e;)c.push(e),/^[0-9]/.test(b.charAt(L))?(e=b.charAt(L),L++):(e=null,0===M&&d("[0-9]"));else c=null;if(null!==c){if(j=L,46===b.charCodeAt(L)?(e=".",L++):(e=null,0===M&&d('"."')),null!==e){for(f=[],/^[0-9]/.test(b.charAt(L))?(g=b.charAt(L),L++):(g=null,0===M&&d("[0-9]"));null!==g;)f.push(g),/^[0-9]/.test(b.charAt(L))?(g=b.charAt(L),L++):(g=null,0===M&&d("[0-9]"));null!==f?e=[e,f]:(e=null,L=j)}else e=null,L=j;e=null!==e?e:"",null!==e?a=[a,c,e]:(a=null,L=i)}else a=null,L=i}else a=null,L=i;if(null!==a&&(a=function(a,b,c,d){return b+c.join("")+(d[0]||"")+(d[1]||[]).join("")}(h,a[0],a[1],a[2])),null===a&&(L=h),null===a){if(h=L,i=L,34===b.charCodeAt(L)?(a='"',L++):(a=null,0===M&&d('"\\""')),null!==a){for(c=[],j=L,'\\"'===b.substr(L,2)?(e='\\"',L+=2):(e=null,0===M&&d('"\\\\\\""')),null!==e&&(e=function(){return'"'}(j)),null===e&&(L=j),null===e&&(j=L,k=L,92===b.charCodeAt(L)?(e="\\",L++):(e=null,0===M&&d('"\\\\"')),null!==e?(/^[^"]/.test(b.charAt(L))?(f=b.charAt(L),L++):(f=null,0===M&&d('[^"]')),null!==f?e=[e,f]:(e=null,L=k)):(e=null,L=k),null!==e&&(e=function(a,b){return"\\"+b}(j,e[1])),null===e&&(L=j),null===e&&(/^[^"]/.test(b.charAt(L))?(e=b.charAt(L),L++):(e=null,0===M&&d('[^"]'))));null!==e;)c.push(e),j=L,'\\"'===b.substr(L,2)?(e='\\"',L+=2):(e=null,0===M&&d('"\\\\\\""')),null!==e&&(e=function(){return'"'}(j)),null===e&&(L=j),null===e&&(j=L,k=L,92===b.charCodeAt(L)?(e="\\",L++):(e=null,0===M&&d('"\\\\"')),null!==e?(/^[^"]/.test(b.charAt(L))?(f=b.charAt(L),L++):(f=null,0===M&&d('[^"]')),null!==f?e=[e,f]:(e=null,L=k)):(e=null,L=k),null!==e&&(e=function(a,b){return"\\"+b}(j,e[1])),null===e&&(L=j),null===e&&(/^[^"]/.test(b.charAt(L))?(e=b.charAt(L),L++):(e=null,0===M&&d('[^"]'))));null!==c?(34===b.charCodeAt(L)?(e='"',L++):(e=null,0===M&&d('"\\""')),null!==e?a=[a,c,e]:(a=null,L=i)):(a=null,L=i)}else a=null,L=i;null!==a&&(a=function(a,b){return b.join("")}(h,a[1])),null===a&&(L=h)}}}return M--,0===M&&null===a&&d("identifier"),a}function w(){var a,c;return c=L,"node"===b.substr(L,4).toLowerCase()?(a=b.substr(L,4),L+=4):(a=null,0===M&&d('"node"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(L=c),a}function x(){var a,c;return c=L,"edge"===b.substr(L,4).toLowerCase()?(a=b.substr(L,4),L+=4):(a=null,0===M&&d('"edge"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(L=c),a}function y(){var a,c;return c=L,"graph"===b.substr(L,5).toLowerCase()?(a=b.substr(L,5),L+=5):(a=null,0===M&&d('"graph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(L=c),a}function z(){var a,c;return c=L,"digraph"===b.substr(L,7).toLowerCase()?(a=b.substr(L,7),L+=7):(a=null,0===M&&d('"digraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(L=c),a}function A(){var a,c;return c=L,"subgraph"===b.substr(L,8).toLowerCase()?(a=b.substr(L,8),L+=8):(a=null,0===M&&d('"subgraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(L=c),a}function B(){var a,c;return c=L,"strict"===b.substr(L,6).toLowerCase()?(a=b.substr(L,6),L+=6):(a=null,0===M&&d('"strict"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(L=c),a}function C(){var a,b;return a=y(),null===a&&(b=L,a=z(),null!==a&&(a=function(a,b){return K="digraph"===b,b}(b,a)),null===a&&(L=b)),a}function D(){var a,c;if(M++,/^[ \t\r\n]/.test(b.charAt(L))?(c=b.charAt(L),L++):(c=null,0===M&&d("[ \\t\\r\\n]")),null!==c)for(a=[];null!==c;)a.push(c),/^[ \t\r\n]/.test(b.charAt(L))?(c=b.charAt(L),L++):(c=null,0===M&&d("[ \\t\\r\\n]"));else a=null;return M--,0===M&&null===a&&d("whitespace"),a}function E(){var a,c,e,f,g,h,i;if(M++,g=L,"//"===b.substr(L,2)?(a="//",L+=2):(a=null,0===M&&d('"//"')),null!==a){for(c=[],/^[^\n]/.test(b.charAt(L))?(e=b.charAt(L),L++):(e=null,0===M&&d("[^\\n]"));null!==e;)c.push(e),/^[^\n]/.test(b.charAt(L))?(e=b.charAt(L),L++):(e=null,0===M&&d("[^\\n]"));null!==c?a=[a,c]:(a=null,L=g)}else a=null,L=g;if(null===a)if(g=L,"/*"===b.substr(L,2)?(a="/*",L+=2):(a=null,0===M&&d('"/*"')),null!==a){for(c=[],h=L,i=L,M++,"*/"===b.substr(L,2)?(e="*/",L+=2):(e=null,0===M&&d('"*/"')),M--,null===e?e="":(e=null,L=i),null!==e?(b.length>L?(f=b.charAt(L),L++):(f=null,0===M&&d("any character")),null!==f?e=[e,f]:(e=null,L=h)):(e=null,L=h);null!==e;)c.push(e),h=L,i=L,M++,"*/"===b.substr(L,2)?(e="*/",L+=2):(e=null,0===M&&d('"*/"')),M--,null===e?e="":(e=null,L=i),null!==e?(b.length>L?(f=b.charAt(L),L++):(f=null,0===M&&d("any character")),null!==f?e=[e,f]:(e=null,L=h)):(e=null,L=h);
null!==c?("*/"===b.substr(L,2)?(e="*/",L+=2):(e=null,0===M&&d('"*/"')),null!==e?a=[a,c,e]:(a=null,L=g)):(a=null,L=g)}else a=null,L=g;return M--,0===M&&null===a&&d("comment"),a}function F(){var a;return a=D(),null===a&&(a=E()),a}function G(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}function H(){for(var a=1,c=1,d=!1,e=0;e<Math.max(L,N);e++){var f=b.charAt(e);"\n"===f?(d||a++,c=1,d=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(a++,c=1,d=!0):(c++,d=!1)}return{line:a,column:c}}function I(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}var J={start:e,stmtList:f,stmt:g,attrStmt:h,inlineAttrStmt:i,nodeStmt:j,edgeStmt:k,subgraphStmt:l,attrList:m,attrListBlock:n,aList:o,edgeRHS:p,idDef:q,nodeIdOrSubgraph:r,nodeId:s,port:t,compassPt:u,id:v,node:w,edge:x,graph:y,digraph:z,subgraph:A,strict:B,graphType:C,whitespace:D,comment:E,_:F};if(void 0!==c){if(void 0===J[c])throw new Error("Invalid rule name: "+a(c)+".")}else c="start";var K,L=0,M=0,N=0,O=[],P=J[c]();if(null===P||L!==b.length){var Q=Math.max(L,N),R=Q<b.length?b.charAt(Q):null,S=H();throw new this.SyntaxError(G(O),R,Q,S.line,S.column)}return P},toSource:function(){return this._source}};return b.SyntaxError=function(b,c,d,e,f){function g(b,c){var d,e;switch(b.length){case 0:d="end of input";break;case 1:d=b[0];break;default:d=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}return e=c?a(c):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=b,this.found=c,this.message=g(b,c),this.offset=d,this.line=e,this.column=f},b.SyntaxError.prototype=Error.prototype,b}()}(),joint.layout.DirectedGraph={layout:function(a,b){b=b||{};var c=this._prepareData(a);dagre.layout().nodes(c.nodeData).edges(c.edgeData).debugLevel(3).run(),_.each(c.nodeData,function(b){a.get("cells").get(b.id).set("position",{x:b.dagre.x,y:b.dagre.y})}),b.setLinkVertices&&_.each(c.edgeData,function(b){a.get("cells").get(b.id).set("vertices",b.dagre.points)})},_prepareData:function(){var a=[],b=[],c={},d={};return graph.get("cells").each(function(b){if(b instanceof joint.dia.Element&&!c[b.id]){var d={id:b.id,inEdges:[],outEdges:[],width:b.get("size").width,height:b.get("size").height};a.push(d),c[b.id]=d}}),graph.get("cells").each(function(a){if(a instanceof joint.dia.Link){var e,f=a.get("source").id,g=a.get("target").id,h=c[f],i=c[g];d[a.id]?e=d[a.id]:(e={id:a.id,source:h,target:i,label:"fooedge"},d[a.id]=e,b.push(e)),_.contains(h.outEdges,e)||h.outEdges.push(e),_.contains(i.inEdges,e)||i.inEdges.push(e)}}),{nodeData:a,edgeData:b}}};