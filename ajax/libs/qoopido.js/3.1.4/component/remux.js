(function(t){window.qoopido.registerSingleton("component/remux",t,["../emitter"])})(function(t,e,n,r,i,o){"use strict";function a(){var t=this;return f.fontsize=parseInt(i.getComputedStyle(l).getPropertyValue("font-size"),10),f.layout=i.getComputedStyle(l,":after").getPropertyValue("content")||null,(f.fontsize!==d.fontsize||f.layout!==d.layout)&&(d.fontsize=f.fontsize,d.layout=f.layout,f.ratio.device=i.devicePixelRatio||1,f.ratio.fontsize=f.fontsize/c,f.ratio.total=f.ratio.device*f.ratio.fontsize,t.emit("statechange",f)),t}var s,u,l=o.getElementsByTagName("html")[0],c=16,f={fontsize:null,layout:null,ratio:{}},d={fontsize:null,layout:null},p=null;return s=t.emitter.extend({_constructor:function(){var t=this,e=parseInt(l.getAttribute("data-base"),10),n=function n(){null!==p&&i.clearTimeout(p),p=i.setTimeout(function(){a.call(t)},20)};s._parent._constructor.call(t),isNaN(e)===!1&&(c=e),u=o.createElement("style"),u.type="text/css",o.getElementsByTagName("head")[0].appendChild(u),i.addEventListener("resize",n,!1),i.addEventListener("orientationchange",n,!1),a.call(t)},getState:function(){return f},addLayout:function(t,e){var n,r,i,s,l,f,d=this;arguments.length>1?(n={},n[t]=e):n=arguments[0];for(r in n)for(i=n[r],s=i.min;i.max>=s;s++)l=Math.round(i.width*(s/c)),f="@media screen and (min-width: "+l+"px) { html { font-size: "+s+'px; } html:after { content: "'+r+'"; display: none; } }',u.styleSheet?u.styleSheet.cssText+=f:u.appendChild(o.createTextNode(f));return a.call(d),d}})});