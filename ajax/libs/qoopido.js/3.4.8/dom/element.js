/*!
* Qoopido.js library v3.4.8, 2014-7-24
* https://github.com/dlueth/qoopido.js
* (c) 2014 Dirk Lueth
* Dual licensed under MIT and GPL
*/
!function(e){var t=["../base","../support","../function/unique/uuid","./event"];window.CustomEvent||t.push("../polyfill/window/customevent"),window.addEventListener||t.push("../polyfill/window/addeventlistener"),window.removeEventListener||t.push("../polyfill/window/removeeventlistener"),window.dispatchEvent||t.push("../polyfill/window/dispatchevent"),window.getComputedStyle||t.push("../polyfill/window/getcomputedstyle"),Element.prototype.matches||t.push("../polyfill/element/matches"),document.querySelector||t.push("../polyfill/document/queryselector"),document.querySelectorAll||t.push("../polyfill/document/queryselectorall"),window.qoopido.register("dom/element",e,t)}(function(e,t,n,r,i,l,o){"use strict";function s(e,t,n){var r=this;e=new i.CustomEvent(e,{bubbles:"load"===e?!1:!0,cancelable:!0,detail:t}),n&&(e._quid=n,e.isDelegate=!0),r.element.dispatchEvent(e)}function u(e){var t;if("string"==typeof e)try{v.test(e)===!0?(t=e.replace(v,"$1").toLowerCase(),e=l.createElement(t)):e=l.querySelector(e)}catch(n){e=null}if(!e)throw new Error("[Qoopido.js] Element could not be resolved");return e}function a(e,t,n,r){var i;if(n=b.getCssProperty(n,t)[0]||null)switch(i=S[n],e){case"get":return i&&i.getValue&&i.getValue(t)||m(t,null).getPropertyValue(n);case"set":i&&i.setValue&&i.setValue(t,r)||(t.style[n]=r)}}var f=function(){if(l.documentMode)return l.documentMode;for(var e=7;e>0;e--){var t=l.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return e}return o}(),p="object",c="string",m=i.getComputedStyle||e["polyfill/window/getcomputedstyle"],d=e["function/unique/uuid"],h="textContent"in l.createElement("a")?"textContent":"innerText",v=new RegExp("^<(\\w+)\\s*/>$"),g=new RegExp("^[^-]+"),y=e["pool/module"]&&e["pool/module"].create(e["dom/event"],null,!0)||null,b=e.support,w={},S={opacity:8>=f?{regex:new RegExp("alpha\\(opacity=(.*)\\)","i"),getValue:function(e){var t=m(e,null).getPropertyValue("filter").toString().match(this.regex);return t=t?t[1]/100:1},setValue:function(e,t){var n=e.style;n.zoom=1,n.opacity=t,n.filter="alpha(opacity="+(100*t+.5>>0)+")"}}:null};return e.base.extend({type:null,element:null,_listener:null,_constructor:function(e,t,n){var r=this;e=u(e),r.type=e.tagName,r.element=e,r._listener=r._listener||{},"object"==typeof t&&null!==t&&r.setAttributes(t),"object"==typeof n&&null!==n&&r.setStyles(n)},_obtain:function(e,t,n){this._constructor(e,t,n)},_dispose:function(){var e,t,n=this;for(e in n._listener)t=e.match(g),n.element.removeEventListener(t,n._listener[e]),delete n._listener[e];n.type=null,n.element=null},getContent:function(e){var t=this.element;return e&&e!==!1?t.innerHTML:t[h]},setContent:function(e,t){var n=this,r=n.element;return t&&t!==!1?r.innerHTML=e:r[h]=e,n},getAttribute:function(e){var t=this;return e&&typeof e===c?t.element.getAttribute(e):void 0},getAttributes:function(e){var t,n=this,r={},i=0;if(e)for(e=typeof e===c?e.split(" "):e;(t=e[i])!==o;i++)r[t]=n.element.getAttributes(t);return r},setAttribute:function(e,t){var n=this;return e&&typeof e===c&&n.element.setAttribute(e,t),n},setAttributes:function(e){var t,n=this;if(e&&typeof e===p&&!e.length)for(t in e)n.element.setAttribute(t,e[t]);return n},removeAttribute:function(e){var t=this;return e&&typeof e===c&&t.element.removeAttribute(e),t},removeAttributes:function(e){var t,n=this,r=0;if(e)for(e=typeof e===c?e.split(" "):e;(t=e[r])!==o;r++)n.element.removeAttribute(t);return n},getStyle:function(e){var t=this;return e&&typeof e===c?a("get",t.element,e):void 0},getStyles:function(e){var t,n=this,r={},i=0;if(e)for(e=typeof e===c?e.split(" "):e;(t=e[i])!==o;i++)r[t]=a("get",n.element,t);return r},setStyle:function(e,t){var n=this;return e&&typeof e===c&&a("set",n.element,e,t),n},setStyles:function(e){var t,n=this;if(e&&typeof e===p&&!e.length)for(t in e)a("set",n.element,t,e[t]);return n},removeStyle:function(e){var t=this;return e&&typeof e===c&&t.setStyle(e,""),t},removeStyles:function(e){var t,n=this,r=0;if(e)for(e=typeof e===c?e.split(" "):e;(t=e[r])!==o;r++)n.setStyle(t,"");return n},siblings:function(e){for(var t=this.element,n=t.parentNode.firstChild,r=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&(!e||n.matches(e))&&r.push(n);return r},siblingsBefore:function(e){for(var t=this.element.previousSibling,n=[];t;t=t.previousSibling)1===t.nodeType&&(!e||t.matches(e))&&n.push(t);return n},siblingsAfter:function(e){for(var t=this.element.nextSibling,n=[];t;t=t.nextSibling)1===t.nodeType&&(!e||t.matches(e))&&n.push(t);return n},previous:function(e){var t;if(!e)return this.element.previousSibling;for(t=this.element.previousSibling;t;t=t.previousSibling)if(1===t.nodeType&&t.matches(e))return t},next:function(e){var t;if(!e)return this.element.nextSibling;for(t=this.element.nextSibling;t;t=t.nextSibling)if(1===t.nodeType&&t.matches(e))return t},find:function(e){return this.element.querySelectorAll(e)},parent:function(e){var t;if(!e)return this.element.parentNode;for(t=this.element;t;t=t.parentNode)if(t.matches(e))return t},parents:function(e){for(var t=this.element.parentNode,n=[];t;t=t.parentNode){if(9===t.nodeType)return n;1===t.nodeType&&(!e||t.matches(e))&&n.push(t)}},isVisible:function(){var e=this.element;return!(e.offsetWidth<=0&&e.offsetHeight<=0)},hasClass:function(e){return e?new RegExp("(?:^|\\s)"+e+"(?:\\s|$)").test(this.element.className):!1},addClass:function(e){var t,n=this;return e&&!n.hasClass(e)&&(t=n.element.className.split(" "),t.push(e),n.element.className=t.join(" ")),n},removeClass:function(e){var t=this;return e&&t.hasClass(e)&&(t.element.className=t.element.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)"))),t},toggleClass:function(e){var t=this;return e&&(t.hasClass(e)?t.removeClass(e):t.addClass(e)),t},prepend:function(e){var t=this,n=t.element;if(e)try{e=e.element||u(e),n.firstChild?n.insertBefore(e,n.firstChild):t.append(e)}catch(r){n.insertAdjacentHTML("afterBegin",e)}return t},append:function(e){var t=this,n=t.element;if(e)try{n.appendChild(e.element||u(e))}catch(r){n.insertAdjacentHTML("beforeEnd",e)}return t},prependTo:function(e){var t=this,n=t.element;return e&&((e=e.element||u(e)).firstChild?e.insertBefore(n,e.firstChild):t.appendTo(e)),t},appendTo:function(e){var t=this;return e&&(e.element||u(e)).appendChild(t.element),t},insertBefore:function(e){var t=this,n=t.element;return e&&(e=e.element||u(e)).parentNode.insertBefore(n,e),t},insertAfter:function(e){var t=this,n=t.element;return e&&((e=e.element||u(e)).nextSibling?e.parentNode.insertBefore(n,e.nextSibling):t.appendTo(e.parentNode)),t},replace:function(e){var t=this,n=t.element;return e&&(e=e.element||u(e)).parentNode.replaceChild(n,e),t},replaceWith:function(e){var t=this,n=t.element;return e&&(e=e.element||u(e),n.parentNode.replaceChild(e,n)),t},hide:function(){return this.setStyle("display","none")},show:function(){return this.removeStyle("display")},remove:function(){var e=this,t=e.element;return t.parentNode.removeChild(t),e},on:function(t){var n,r=this,l=r.element,u=arguments.length>2?arguments[1]:null,a=arguments.length>2?arguments[2]:arguments[1],f=a._quid||(a._quid=d()),p=0;for(t=t.split(" ");(n=t[p])!==o;p++){var c=n+"-"+f,m=function(t){var n,l=t._quid||(t._quid=d());w[l]||(w[l]=y&&y.obtain(t)||e["dom/event"].create(t)),t=w[l],n=t.delegate,i.clearTimeout(t._timeout),(!u||t.target.matches(u))&&a.call(t.target,t,t.originalEvent.detail),n&&(delete t.delegate,s.call(r,n,null,t._quid)),t._timeout=i.setTimeout(function(){delete w[l],delete t._timeout,t.dispose&&t.dispose()},5e3)};m.type=n,r._listener[c]=m,l.addEventListener(n,m)}return r},one:function(e){var t=this,n=arguments.length>3||"string"==typeof arguments[1]?arguments[1]:null,r=arguments.length>3||"function"==typeof arguments[2]?arguments[2]:arguments[1],i=(arguments.length>3?arguments[3]:arguments[2])!==!1,l=function(n){t.off(i===!0?n.type:e,l),r.call(t,n,n.originalEvent.detail)};return r._quid=l._quid=d(),n?t.on(e,n,l):t.on(e,l),t},off:function(e,t){var n,r,i,l=this,s=l.element,u=0;for(e=e.split(" ");(n=e[u])!==o;u++)r=t._quid&&n+"-"+t._quid||null,i=r&&l._listener[r]||null,i?(s.removeEventListener(n,i),delete l._listener[r]):s.removeEventListener(n,t);return l},emit:function(e,t){var n=this;return s.call(n,e,t),n}})});