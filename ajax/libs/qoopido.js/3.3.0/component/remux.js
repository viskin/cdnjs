/*!
* Qoopido.js library v3.3.0, 2014-5-24
* https://github.com/dlueth/qoopido.js
* (c) 2014 Dirk Lueth
* Dual licensed under MIT and GPL
*/
!function(t){window.qoopido.registerSingleton("component/remux",t,["../emitter","../dom/element"])}(function(t,e,n,o,a,i){"use strict";function l(t,e){var n=this;return f.fontsize=t||parseInt(a.getComputedStyle(s).getPropertyValue("font-size"),10),f.layout=e||a.getComputedStyle(s,":after").getPropertyValue("content")||null,null!==f.layout&&(f.layout=f.layout.replace(y,"")),(f.fontsize!==d.fontsize||f.layout!==d.layout)&&(d.fontsize=f.fontsize,d.layout=f.layout,f.ratio.device=a.devicePixelRatio||1,f.ratio.fontsize=f.fontsize/c,f.ratio.total=f.ratio.device*f.ratio.fontsize,n.emit("statechange",f)),n}var r,u,s=i.getElementsByTagName("html")[0],c=16,f={fontsize:null,layout:null,ratio:{}},d={fontsize:null,layout:null},m=null,y=new RegExp("[\"']","g");return r=t.emitter.extend({_constructor:function(){var e=this,n=parseInt(s.getAttribute("data-base"),10),o=function(){null!==m&&a.clearTimeout(m),m=a.setTimeout(function(){l.call(e)},20)};r._parent._constructor.call(e),isNaN(n)===!1&&(c=n),u=i.createElement("style"),u.type="text/css","undefined"!=typeof u.sheet&&u.appendChild(i.createTextNode("")),i.getElementsByTagName("head")[0].appendChild(u),u=u.sheet||u.styleSheet,t["dom/element"].create(a).on("resize orientationchange",o),l.call(e)},getState:function(){return f},getLayout:function(){return f.layout},forceLayout:function(t,e){var n=this;return l.call(n,t,e),n},addLayout:function(t,e){var n=this;if("undefined"!=typeof u.insertRule){var o,a,i,r,s;arguments.length>1?(o={},o[t]=e):o=arguments[0];for(a in o)for(i=o[a],r=i.min;r<=i.max;r++)s=Math.round(i.width*(r/c)),u.insertRule("@media screen and (min-width: "+s+"px) { html { font-size: "+r+'px; } html:after { content: "'+a+'"; display: none; } }',u.cssRules.length);l.call(n)}return n}})});