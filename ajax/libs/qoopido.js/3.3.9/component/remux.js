/*!
* Qoopido.js library v3.3.9, 2014-6-3
* https://github.com/dlueth/qoopido.js
* (c) 2014 Dirk Lueth
* Dual licensed under MIT and GPL
*/
!function(e){var t=["../emitter","../dom/element"];window.getComputedStyle||t.push("../polyfill/window/getcomputedstyle"),window.qoopido.registerSingleton("component/remux",e,t)}(function(e,t,n,o,l,a){"use strict";function i(e){s.styleSheet&&s.styleSheet.insertRule?s.styleSheet.insertRule(e,s.styleSheet.cssRules.length):s.sheet&&s.appendChild(a.createTextNode(e))}function r(e,t){var n=this;return e=e||parseInt(g(f).getPropertyValue("font-size"),10),t=t||("font-family"===c?g(f).getPropertyValue(c):g(f,":after").getPropertyValue(c))||null,"font-family"===c&&"sans-serif"===t&&(m.layout=null),t&&(t=t.replace(h,"")),e&&t&&(m.fontsize=e,m.layout=t,null===m.layout||m.fontsize===y.fontsize&&m.layout===y.layout||(y.fontsize=m.fontsize,y.layout=m.layout,m.ratio.device=l.devicePixelRatio||1,m.ratio.fontsize=m.fontsize/d,m.ratio.total=m.ratio.device*m.ratio.fontsize,n.emit("statechange",m))),n}var u,s,c,f=a.getElementsByTagName("html")[0],d=16,m={fontsize:null,layout:null,ratio:{}},y={fontsize:null,layout:null},p=null,h=new RegExp("[\"']","g"),g=l.getComputedStyle||e["polyfill/window/getcomputedstyle"];return u=e.emitter.extend({_constructor:function(){var t,n=this,o=parseInt(f.getAttribute("data-base"),10),m=function(){null!==p&&l.clearTimeout(p),p=l.setTimeout(function(){r.call(n)},20)};u._parent._constructor.call(n),isNaN(o)===!1&&(d=o),s=a.createElement("style"),s.type="text/css","undefined"!=typeof s.sheet&&s.appendChild(a.createTextNode("")),a.getElementsByTagName("head")[0].appendChild(s),i('html:before { content: "remux"; display: none; }'),t=g(f,":before").getPropertyValue("content"),null!==t&&(t=t.replace(h,"")),c="remux"===t?"content":"font-family",e["dom/element"].create(l).on("resize orientationchange",m),r.call(n)},getState:function(){return m},getLayout:function(){return m.layout},forceLayout:function(e,t){var n=this;return r.call(n,e,t),n},addLayout:function(e,t){var n,o,l,a,u,s=this;arguments.length>1?(n={},n[e]=t):n=arguments[0];for(o in n)for(l=n[o],a=l.min;a<=l.max;a++)switch(u=Math.round(l.width*(a/d)),c){case"font-family":i("@media screen and (min-width: "+u+"px) { html { font-size: "+a+"px; "+c+': "'+o+'"; }');break;default:i("@media screen and (min-width: "+u+"px) { html { font-size: "+a+"px; } html:after { "+c+': "'+o+'"; display: none; } }')}return r.call(s),s}})});