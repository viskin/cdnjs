(function(t){window.qoopido.registerSingleton("component/remux",t,["../emitter"])})(function(t,e,n,r,o,i){"use strict";function a(){var t=this;return d.fontsize=parseInt(o.getComputedStyle(c).getPropertyValue("font-size"),10),d.layout=o.getComputedStyle(c,":after").getPropertyValue("content")||null,(d.fontsize!==f.fontsize||d.layout!==f.layout)&&(f.fontsize=d.fontsize,f.layout=d.layout,d.ratio.device=o.devicePixelRatio||1,d.ratio.fontsize=d.fontsize/l,d.ratio.total=d.ratio.device*d.ratio.fontsize,t.emit("statechange",d)),t}var s,u,c=i.getElementsByTagName("html")[0],l=16,d={fontsize:null,layout:null,ratio:{}},f={fontsize:null,layout:null},p=null;return s=t.emitter.extend({_constructor:function(){var t=this,e=parseInt(c.getAttribute("data-base"),10),n=function n(){null!==p&&o.clearTimeout(p),p=o.setTimeout(function(){a.call(t)},20)};s._parent._constructor.call(t),isNaN(e)===!1&&(l=e),u=i.createElement("style"),u.type="text/css",i.getElementsByTagName("head")[0].appendChild(u),o.addEventListener("resize",n,!1),o.addEventListener("orientationchange",n,!1),a.call(t)},getState:function(){return d},addLayout:function(t,e){var n,r,o,s,c,d,f=this;arguments.length>1?(n={},n[t]=e):n=arguments[0];for(r in n)for(o=n[r],s=o.min;o.max>=s;s++)c=Math.round(o.width*(s/l)),d="@media screen and (min-width: "+c+"px) { html { font-size: "+s+'px; } html:after { content: "'+r+'"; display: none; } }',u.styleSheet?u.styleSheet.cssText+=d:u.appendChild(i.createTextNode(d));return a.call(f),f}})});