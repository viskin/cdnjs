(function(t){var e=["./base","./pool/dom","q"];String.prototype.ucfirst||e.push("./polyfill/string/ucfirst"),window.qoopido.registerSingleton("support",t,e)})(function(t,e,r,n,o,i,s){"use strict";var u=t.q||o.Q,l=RegExp("^(Moz|WebKit|Khtml|ms|O|Icab)(?=[A-Z])"),a=RegExp("-([a-z])","gi"),c=RegExp("([A-Z])","g"),p=function(){return arguments[1].ucfirst()},f={prefix:null,method:{},property:{},css:{},element:{},promises:{prefix:null,method:{},property:{},css:{},test:{}}};return t.base.extend({test:{},testMultiple:function(){var t,e=[],r=0;for(r;(t=arguments[r])!==s;r++)switch(typeof t){case"string":e.push(this.test[t]());break;case"boolean":var n=u.defer();t?n.resolve():n.reject(),e.push(n.promise);break;default:e.push(t)}return u.all(e)},getPrefix:function(){var t,r=f.prefix||null;if(null===r){var n=e.pool.dom.obtain("div"),o=n.style;r=!1;for(t in o)l.test(t)&&(r=t.match(l)[0]);r===!1&&"WebkitOpacity"in o&&(r="WebKit"),r===!1&&"KhtmlOpacity"in o&&(r="Khtml"),r=f.prefix=r===!1?!1:[r.toLowerCase(),r.toLowerCase().ucfirst(),r],n.dispose()}return r},getMethod:function(t,e){e=e||o;var r=e.tagName,n=f.method[r]=f.method[r]||{},i=n[t]=f.method[r][t]||null;if(null===i){i=!1;var u,l,a=0,c=t.ucfirst(),p=this.getPrefix();for(u=p!==!1?(t+" "+p.join(c+" ")+c).split(" "):[t],a;(l=u[a])!==s;a++)if(e[l]!==s&&("function"==typeof e[l]||"object"==typeof e[l])){i=l;break}f.method[r][t]=i}return i},getProperty:function(t,e){e=e||o;var r=e.tagName,n=f.property[r]=f.property[r]||{},i=n[t]=f.property[r][t]||null;if(null===i){i=!1;var u,l,a=0,c=t.ucfirst(),p=this.getPrefix();for(u=p!==!1?(t+" "+p.join(c+" ")+c).split(" "):[t],a;(l=u[a])!==s;a++)if(e[l]!==s){i=l;break}f.property[r][t]=i}return i},getCssProperty:function(t){t=t.replace(a,p);var r=f.css[t]||null;if(null===r){r=!1;var n,o=0,i=e.pool.dom.obtain("div"),u=t.ucfirst(),l=this.getPrefix()||[],d=(t+" "+l.join(u+" ")+u).split(" "),h="";for(o;(n=d[o])!==s;o++)if(i.style[n]!==s){r=n,o>0&&(h="-");break}f.css[t]=r!==!1?[h+r.replace(c,"-$1").toLowerCase(),r]:!1,i.dispose()}return r},supportsPrefix:function(){return!!this.getPrefix()},supportsMethod:function(t,e){return!!this.getMethod(t,e)},supportsProperty:function(t,e){return!!this.getProperty(t,e)},supportsCssProperty:function(t){return!!this.getCssProperty(t)},testPrefix:function(){var t=f.promises.prefix;if(null===t){var e=u.defer(),r=this.getPrefix();r?e.resolve(r):e.reject(),t=f.promises.prefix=e.promise}return t},testMethod:function(t,e){e=e||o;var r=e.tagName,n=f.promises.method[r]=f.promises.method[r]||{},i=n[t]=f.promises.method[r][t]||null;if(null===i){var s=u.defer(),l=this.getMethod(t,e);l?s.resolve(l):s.reject(),i=f.promises.method[r][t]=s.promise}return i},testProperty:function(t,e){e=e||o;var r=e.tagName,n=f.promises.property[r]=f.promises.property[r]||{},i=n[t]=f.promises.property[r][t]||null;if(null===i){var s=u.defer(),l=this.getProperty(t,e);l?s.resolve(l):s.reject(),i=f.promises.property[r][t]=s.promise}return i},testCssProperty:function(t){var e=f.promises.css[t]||null;if(null===e){var r=u.defer(),n=this.getCssProperty(t);n?r.resolve(n):r.reject(),e=f.promises.css[t]=r.promise}return e},addTest:function(t,e){return this.test[t]=function(){var r=f.promises.test[t]||null;if(null===r){var n=u.defer(),o=Array.prototype.slice.call(arguments);o.splice(0,0,n),e.apply(null,o),r=f.promises.test[t]=n.promise}return r}}})});