(function(t){var e=["../proxy"];window.getComputedStyle||e.push("../polyfill/window/getcomputedstyle"),window.qoopido.register("dom/element",t,e)})(function(t,e,n,r,i,o,a){"use strict";function s(t){return t.target||(t.target=t.srcElement||o),3===t.target.nodeType&&(t.target=t.target.parentNode),!t.relatedTarget&&t.fromElement&&(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t}var l,u,c,f="object",p="string";return l=i.addEventListener?function(t,e){var n=this,r=n.element,i="".concat("listener[",t,"][",e._quid||e,"]");r[i]=function(t){e.call(this,s(t))},r.addEventListener(t,r[i],!1)}:function(t,e){var n,r=this,o=r.element;o["on"+t]!==a?(n="".concat("listener[",t,"][",e._quid||e,"]"),o[n]=function(){e.call(this,s(i.event))},o.attachEvent("on"+t,o[n])):(t="".concat("fake[",t,"]"),o[t]=null,o.attachEvent("onpropertychange",function(n){n.propertyName===t&&e.call(this,s(o[t]))}))},u=i.removeEventListener?function(t,e){var n=this,r=n.element,i="".concat("listener[",t,"][",e._quid||e,"]");r.removeEventListener(t,r[i],!1),delete r[i]}:function(t,e){var n=this,r=n.element,i="".concat("listener[",t,"][",e._quid||e,"]");r.detachEvent("on"+t,r[i]),delete r[i]},c=o.createEvent?function(t,e){var n=this,r=n.element,i=o.createEvent("HTMLEvents");i.initEvent(t,!0,!0),i.data=e,r.dispatchEvent(i)}:function(t,e){var n=this,r=n.element,i=o.createEventObject();i.type=i.eventType=t,i.data=e;try{r.fireEvent("on"+i.eventType,i)}catch(s){var l="".concat("fake[",t,"]");r[l]!==a&&(r[l]=i)}},t.base.extend({type:null,element:null,listener:null,_constructor:function(t){var e=this;if(!t)throw Error("Missing element argument");e.type=t.tagName,e.element=t,e.listener={}},getAttribute:function(t){if(t&&typeof t===p){var e=this;return t=t.split(" "),1===t.length?e.element.getAttribute(t[0]):e.getAttributes(t)}},getAttributes:function(t){var e=this,n={};if(t&&(t=typeof t===p?t.split(" "):t,typeof t===f&&t.length)){var r,i;for(r=0;(i=t[r])!==a;r++)n[i]=e.element.getAttributes(i)}return n},setAttribute:function(t,e){var n=this;return t&&typeof t===p&&n.element.setAttribute(t,e),n},setAttributes:function(t){var e=this;if(t&&typeof t===f&&!t.length){var n;for(n in t)e.element.setAttribute(n,t[n])}return e},removeAttribute:function(t){var e=this;return t&&typeof t===p&&(t=t.split(" "),1===t.length?e.element.removeAttribute(t[0]):e.removeAttributes(t)),e},removeAttributes:function(t){var e=this;if(t&&(t=typeof t===p?t.split(" "):t,typeof t===f&&t.length)){var n,r;for(n=0;(r=t[n])!==a;n++)e.element.removeAttribute(r)}return e},getStyle:function(t){if(t&&typeof t===p){var e=this;return t=t.split(" "),1===t.length?i.getComputedStyle(e.element,null).getPropertyValue(t[0]):e.getStyles(t)}},getStyles:function(t){var e=this,n={};if(t&&(t=typeof t===p?t.split(" "):t,typeof t===f&&t.length)){var r,o;for(r=0;(o=t[r])!==a;r++)n[o]=i.getComputedStyle(e.element,null).getPropertyValue(o)}return n},setStyle:function(t,e){var n=this;return t&&typeof t===p&&(n.element.style[t]=e),n},setStyles:function(t){var e=this;if(t&&typeof t===f&&!t.length){var n;for(n in t)e.element.style[n]=t[n]}return e},isVisible:function(){var t=this.element;return!(0>=t.offsetWidth&&0>=t.offsetHeight)},on:function(t,e){var n,r,i=this;for(t=t.split(" "),n=0;(r=t[n])!==a;n++)(i.listener[r]=i.listener[r]||[]).push(e),l.call(i,r,e);return i},one:function(e,n,r){r=r!==!1;var i=this,o=t.proxy.create(i,function(t){i.off(r===!0?t.type:e,o),n.call(i,t)});return i.on(e,o),i},off:function(t,e){var n,r,i,o,s=this;if(t)for(t=t.split(" "),n=0;(r=t[n])!==a;n++)if(s.listener[r]=s.listener[r]||[],e)for(i=0;(o=s.listener[r][i])!==a;i++)o===e&&(s.listener[r].splice(i,1),u.call(s,r,o),i--);else for(;s.listener[r].length>0;)u.call(s,r,s.listener[r].pop());else for(r in s.listener)for(;s.listener[r].length>0;)u.call(s,r,s.listener[r].pop());return s},emit:function(t,e){var n=this;return c.call(n,t,e),n}})});