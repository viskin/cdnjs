(function(t){window.qoopido.register("dom/element/lazyimage",t,["./emerge","../../function/merge"])})(function(t){"use strict";function e(){var t=this,e=t._settings.attribute;i+=1,t.emit(o).one(f,function(e){e.type===u?t.emit(l):t.emit(a),i-=1},!1).setAttribute("src",t.getAttribute(e)).removeAttribute(e)}var n,r={interval:50,threshold:"auto",attribute:"data-lazyimage"},i=0,o="requested",l="loaded",a="failed",s="emerged",u="load",c="error",f="".concat(u," ",c);return n=t["dom/element/emerge"].extend({_constructor:function(o,l){var a=this;n._parent._constructor.call(a,o,t["function/merge"]({},r,l||{})),a.on(s,function u(t){(0===i||1===t.data)&&(a.remove(),a.off(s,u),e.call(a))})}})});