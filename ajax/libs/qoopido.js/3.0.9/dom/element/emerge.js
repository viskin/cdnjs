(function(t,e){"use strict";function n(){return e.qoopido.initialize("dom/element/emerge",t,arguments)}"function"==typeof define&&define.amd?define(["../element","../../function/merge","../../function/unique/uuid"],n):n()})(function(t,e,n,i,r,o){"use strict";function l(t){var e,n=g[t];for(e in n)"length"!==e&&u.call(n[e]);0===n.length&&(i.element.clearInterval(m[t]),delete m[t])}function a(){h.left=0,h.top=0,h.right=d.clientWidth,h.bottom=d.clientHeight}function s(){var t=this,e=t._settings.threshold||d.clientWidth*t._settings.auto,n=t._settings.threshold||d.clientHeight*t._settings.auto;t._viewport.left=h.left-e,t._viewport.top=h.top-n,t._viewport.right=h.right+e,t._viewport.bottom=h.bottom+n}function u(){var t,e=this,n=!1,i=2;!e.isVisible()||"hidden"===e.getStyle("visibility")&&e._settings.visibility!==!1||(t=e.element.getBoundingClientRect(),(t.left>=e._viewport.left&&t.top>=e._viewport.top&&t.left<=e._viewport.right&&t.top<=e._viewport.bottom||t.right>=e._viewport.left&&t.bottom>=e._viewport.top&&t.right<=e._viewport.right&&t.bottom<=e._viewport.bottom)&&((t.left>=h.left&&t.top>=h.top&&t.left<=h.right&&t.top<=h.bottom||t.right>=h.left&&t.bottom>=h.top&&t.right<=h.right&&t.bottom<=h.bottom)&&(i=1),n=!0)),(n!==e._state||n===!0&&i!==e._priority)&&c.call(e,n,i)}function c(t,e){var n=this;n._state=t,n._priority=e,n._settings.recur!==!0&&n.remove(),t===!0?n.emit(v,e):n.emit(y)}var f,p={interval:50,threshold:"auto",recur:!0,auto:.5,visibility:!0},d=i.document.documentElement,h={},m={},g={},v="emerged",y="demerged",_="resize orientationchange";if(i=t["dom/element"].create(i),"CSS1Compat"!==r.compatMode)throw"This script requires your browser to work in standards mode";return f=t["dom/element"].extend({_quid:null,_viewport:null,_element:null,_settings:null,_state:null,_priority:null,_constructor:function(e,n){var r=this;f._parent._constructor.call(r,e),n=t["function/merge"]({},p,n||{}),"auto"===n.threshold&&delete n.threshold,m[n.interval]===o&&(g[n.interval]=g[n.interval]||{length:0},m[n.interval]=i.element.setInterval(function(){l(n.interval)},n.interval)),r._quid=t["function/unique/uuid"](),r._viewport={},r._settings=n,r._state=!1,r._priority=2,g[n.interval][r._quid]=r,g[n.interval].length++,i.on(_,function(){s.call(r)}),s.call(r)},remove:function(){var t=this;delete g[t._settings.interval][t._quid],g[t._settings.interval].length--}}),i.on(_,a),a(),f},window);