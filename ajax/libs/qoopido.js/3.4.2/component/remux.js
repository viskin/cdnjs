/*!
* Qoopido.js library v3.4.2, 2014-6-10
* https://github.com/dlueth/qoopido.js
* (c) 2014 Dirk Lueth
* Dual licensed under MIT and GPL
*/!function(e){var t=["../emitter","../dom/element"];window.getComputedStyle||t.push("../polyfill/window/getcomputedstyle"),window.qoopido.registerSingleton("component/remux",e,t)}(function(e,t,n,o,a,l){"use strict";function i(e){s.styleSheet&&s.styleSheet.insertRule?s.styleSheet.insertRule(e,s.styleSheet.cssRules.length):s.sheet&&s.appendChild(l.createTextNode(e))}function r(e,t){var n=this;return e=e||parseInt(g(c).getPropertyValue("font-size"),10),t=t||("font-family"===d?g(c).getPropertyValue(d):g(c,":after").getPropertyValue(d))||null,"font-family"===d&&"sans-serif"===t&&(t=null),"content"===d&&"none"===t&&(t=null),t&&(t=t.replace(p,"")),e&&t&&(f.fontsize=e,f.layout=t,null===f.layout||f.fontsize===h.fontsize&&f.layout===h.layout||(h.fontsize=f.fontsize,h.layout=f.layout,f.ratio.device=a.devicePixelRatio||1,f.ratio.fontsize=f.fontsize/m,f.ratio.total=f.ratio.device*f.ratio.fontsize,n.emit("statechange",f))),n}var u,s,d,c=l.getElementsByTagName("html")[0],m=16,f={fontsize:null,layout:null,ratio:{}},h={fontsize:null,layout:null},y=null,p=new RegExp("[\"']","g"),g=a.getComputedStyle||e["polyfill/window/getcomputedstyle"];return u=e.emitter.extend({_constructor:function(){var t,n=this,o=parseInt(c.getAttribute("data-base"),10),f=function(){null!==y&&a.clearTimeout(y),y=a.setTimeout(function(){r.call(n)},20)};u._parent._constructor.call(n),isNaN(o)===!1&&(m=o),s=l.createElement("style"),s.type="text/css","undefined"!=typeof s.sheet&&s.appendChild(l.createTextNode("")),l.getElementsByTagName("head")[0].appendChild(s),i('html:before { content: "remux"; display: none; }'),i("html:after { display: none; }"),t=g(c,":before").getPropertyValue("content"),null!==t&&(t=t.replace(p,"")),d="remux"===t?"content":"font-family",e["dom/element"].create(a).on("resize orientationchange",f),r.call(n)},getState:function(){return f},getLayout:function(){return f.layout},forceLayout:function(e,t){var n=this;return r.call(n,e,t),n},addLayout:function(e,t){var n,o,l,u,s,c,f=this;arguments.length>1?(n={},n[e]=t):n=arguments[0];for(o in n){switch(l=n[o],s=Math.round(l.width*(l.min/m)),c=Math.round(l.width*(l.max/m))-1,d){case"font-family":i("@media screen and (min-width: "+s+"px) and (max-width: "+c+"px ) { html { "+d+': "'+o+'"; } }');break;default:i("@media screen and (min-width: "+s+"px) and (max-width: "+c+"px ) { html:after { "+d+': "'+o+'"; } }')}for(u=l.min;u<=l.max;u++)i("@media screen and (min-width: "+Math.round(l.width*(u/m))+"px) and (max-width: "+(Math.round(l.width*((u+1)/m))-1)+"px ) { html { font-size: "+u+"px; } }")}return r.call(f),a.setTimeout(function(){r.call(f)},50),f}})});