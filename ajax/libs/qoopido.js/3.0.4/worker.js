(function(t,e){"use strict";function n(){return e.qoopido.initialize("worker",t,arguments,!0)}"function"==typeof define&&define.amd?define(["./base","./support","q"],n):n()})(function(t,e){"use strict";var n=window.Q||e[2],i=t.support.supportsMethod("Worker");return t.base.extend({execute:function(t,e,o){var r=n.defer();if(o=o||[],i===!0){var s=new Worker(t);s.addEventListener("message",function(t){switch(t.data.type){case"progress":r.notify(t.data.progress);break;case"result":r.resolve(t.data.result)}},!1),s.addEventListener("error",function(t){r.reject(t)},!1),s.postMessage({func:""+e,args:o})}else setTimeout(function(){try{r.resolve(e.apply(null,o))}catch(t){r.reject()}},0);return r.promise}})},window);