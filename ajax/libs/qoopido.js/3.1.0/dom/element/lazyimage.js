(function(t,e){"use strict";function n(){return e.qoopido.initialize("dom/element/lazyimage",t,arguments)}"function"==typeof define&&define.amd?define(["./emerge","../../function/merge"],n):n()})(function(t){"use strict";function e(){var t=this,e=t._settings.attribute;r+=1,t.emit(o).one(f,function(e){e.type===u?t.emit(l):t.emit(a),r-=1},!1).setAttribute("src",t.getAttribute(e)).removeAttribute(e)}var n,i={interval:50,threshold:"auto",attribute:"data-lazyimage"},r=0,o="requested",l="loaded",a="failed",s="emerged",u="load",c="error",f="".concat(u," ",c);return n=t["dom/element/emerge"].extend({_constructor:function(o,l){var a=this;n._parent._constructor.call(a,o,t["function/merge"]({},i,l||{})),a.on(s,function u(t){(0===r||1===t.data)&&(a.remove(),a.off(s,u),e.call(a))})}})},window);