(function(t){window.qoopido.register("worker",t,["./base","./support","q"])})(function(t,e,o,n,r){"use strict";var i=t.q||r.Q,s=RegExp("Blob$","i"),u=t.support.supportsMethod("Worker"),a=t.support.supportsMethod("URL")?r[t.support.getMethod("URL")]:null,c=t.support.getMethod("Blob")||t.support.getMethod("BlobBuilder"),l="var self = this, regex = new RegExp(',\\s+', 'g'); self.addEventListener('message', function(pEvent) { self.postMessage({ type: 'result', result: self.process(pEvent.data.func).apply(null, pEvent.data.args)}); }, false); self.postProgress = function(pProgress) { self.postMessage({ type: 'progress', progress: pProgress}); }; self.process = function(pFunction) { var functionArguments = pFunction.substring(pFunction.indexOf('(') + 1, pFunction.indexOf(')')).replace(regex, ',').split(','); functionArguments.push(pFunction.substring(pFunction.indexOf('{') + 1, pFunction.lastIndexOf('}'))); return Function.apply(null, functionArguments); };",p=null;return u&&a&&c&&(p=s.test(c)===!0?a.createObjectURL(new r[c]([l],{type:"text/javascript"})):a.createObjectURL((new r[c]).append(l).getBlob("text/javascript"))),t.base.extend({execute:function(t,e){var o=i.defer();if(e=e||[],p){var n=new Worker(p);n.addEventListener("message",function(t){switch(t.data.type){case"progress":o.notify(t.data.progress);break;case"result":o.resolve(t.data.result)}},!1),n.addEventListener("error",function(t){o.reject(t)},!1),n.postMessage({func:""+t,args:e})}else setTimeout(function(){try{o.resolve(t.apply(null,e))}catch(n){o.reject()}},0);return o.promise}})});