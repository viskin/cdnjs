(function(b,a){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=b.document?a(b,true):function(c){if(!c.document){throw new Error("Avalon requires a window with a document")}return a(c)}}else{a(b)}}(typeof window!=="undefined"?window:this,function(ck,bc){var aL=new Date()-0;var cW=ck.document;var a=cW.getElementsByTagName("head")[0];var aH=a.insertBefore(document.createElement("avalon"),a.firstChild);aH.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>";aH.setAttribute("ms-skip","1");aH.className="avalonHide";var ar=/\[native code\]/;function cK(){if(ck.console&&avalon.config.debug){Function.apply.call(console.log,console,arguments)}}var c5="$"+aL;var au=ck.require;var an=ck.define;var q;var L=false;var v={};var b7=/[^, ]+/g;var d=/\w+/g;var B=/^(?:object|array)$/;var az=/^\[object SVG\w*Element\]$/;var I=/^\[object (?:Window|DOMWindow|global)\]$/;var bI=Object.prototype;var cq=bI.hasOwnProperty;var cZ=bI.toString;var dc=Array.prototype;var aa=dc.slice;var aW=ck.dispatchEvent;var dp=cW.documentElement;var cw=cW.createDocumentFragment();var dE=cW.createElement("div");var aK={};"Boolean Number String Function Array Date RegExp Object Error".replace(b7,function(e){aK["[object "+e+"]"]=e.toLowerCase()});function k(){}function dH(dT,dR){if(typeof dT==="string"){dT=dT.match(b7)||[]}var e={},dQ=dR!==void 0?dR:1;for(var ap=0,dS=dT.length;ap<dS;ap++){e[dT[ap]]=dQ}return e}var bT=function(e){e=e||"avalon";return String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)};function ds(){if(ck.VBArray){var e=document.documentMode;return e?e:ck.XMLHttpRequest?7:6}else{return NaN}}var cf=ds();avalon=function(e){return new avalon.init(e)};avalon.profile=function(){if(ck.console&&avalon.config.profile){Function.apply.call(console.log,console,arguments)}};avalon.nextTick=new function(){var dR=ck.setImmediate;var dQ=ck.MutationObserver;if(dR){return dR.bind(ck)}var e=[];function dT(){var dV=e.length;for(var dU=0;dU<dV;dU++){e[dU]()}e=e.slice(dV)}if(dQ){var dS=document.createTextNode("avalon");new dQ(dT).observe(dS,{characterData:true});var ap=false;return function(dU){e.push(dU);ap=!ap;dS.data=ap}}return function(dU){setTimeout(dU,4)}};avalon.init=function(e){this[0]=this.element=e};avalon.fn=avalon.prototype=avalon.init.prototype;avalon.type=function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?aK[cZ.call(e)]||"object":typeof e};var G=typeof alert==="object"?function(ap){try{return/^\s*\bfunction\b/.test(ap+"")}catch(dQ){return false}}:function(e){return cZ.call(e)==="[object Function]"};avalon.isFunction=G;avalon.isWindow=function(e){if(!e){return false}return e==e.document&&e.document!=e};function bn(e){return I.test(cZ.call(e))}if(bn(ck)){avalon.isWindow=bn}var aM;for(aM in avalon({})){break}var dM=aM!=="0";avalon.isPlainObject=function(dR,ap){if(!dR||avalon.type(dR)!=="object"||dR.nodeType||avalon.isWindow(dR)){return false}try{if(dR.constructor&&!cq.call(dR,"constructor")&&!cq.call(dR.constructor.prototype,"isPrototypeOf")){return false}}catch(dQ){return false}if(dM){for(ap in dR){return cq.call(dR,ap)}}for(ap in dR){}return ap===void 0||cq.call(dR,ap)};if(ar.test(Object.getPrototypeOf)){avalon.isPlainObject=function(e){return cZ.call(e)==="[object Object]"&&Object.getPrototypeOf(e)===bI}}avalon.mix=avalon.fn.mix=function(){var dZ,dR,ap,dQ,dW,dX,dV=arguments[0]||{},dT=1,dS=arguments.length,dY=false;if(typeof dV==="boolean"){dY=dV;dV=arguments[1]||{};dT++}if(typeof dV!=="object"&&!G(dV)){dV={}}if(dT===dS){dV=this;dT--}for(;dT<dS;dT++){if((dZ=arguments[dT])!=null){for(dR in dZ){ap=dV[dR];try{dQ=dZ[dR]}catch(dU){continue}if(dV===dQ){continue}if(dY&&dQ&&(avalon.isPlainObject(dQ)||(dW=Array.isArray(dQ)))){if(dW){dW=false;dX=ap&&Array.isArray(ap)?ap:[]}else{dX=ap&&avalon.isPlainObject(ap)?ap:{}}dV[dR]=avalon.mix(dY,dX,dQ)}else{if(dQ!==void 0){dV[dR]=dQ}}}}}return dV};function bq(ap,e){ap=Math.floor(ap)||0;return ap<0?Math.max(e+ap,0):Math.min(ap,e)}avalon.mix({rword:b7,subscribers:c5,version:1.51,ui:{},log:cK,slice:aW?function(ap,dQ,e){return aa.call(ap,dQ,e)}:function(dQ,dT,ap){var dR=[];var e=dQ.length;if(ap===void 0){ap=e}if(typeof ap==="number"&&isFinite(ap)){dT=bq(dT,e);ap=bq(ap,e);for(var dS=dT;dS<ap;++dS){dR[dS-dT]=dQ[dS]}}return dR},noop:k,error:function(dQ,ap){throw (ap||Error)(dQ)},oneObject:dH,range:function(dT,ap,dS){dS||(dS=1);if(ap==null){ap=dT||0;dT=0}var dQ=-1,dR=Math.max(0,Math.ceil((ap-dT)/dS)),e=new Array(dR);while(++dQ<dR){e[dQ]=dT;dT+=dS}return e},eventHooks:[],bind:function(dS,dR,dQ,ap){var e=avalon.eventHooks;var dT=e[dR];if(typeof dT==="object"){dR=dT.type;if(dT.deel){dQ=dT.deel(dS,dR,dQ,ap)}}var dU=aW?dQ:function(dV){dQ.call(dS,cG(dV))};if(aW){dS.addEventListener(dR,dU,!!ap)}else{dS.attachEvent("on"+dR,dU)}return dU},unbind:function(dS,dR,dQ,ap){var e=avalon.eventHooks;var dT=e[dR];var dU=dQ||k;if(typeof dT==="object"){dR=dT.type;if(dT.deel){dQ=dT.deel(dS,dR,dQ,false)}}if(aW){dS.removeEventListener(dR,dU,!!ap)}else{dS.detachEvent("on"+dR,dU)}},css:function(dQ,e,dR){if(dQ instanceof avalon){dQ=dQ[0]}var dT=/[_-]/.test(e)?l(e):e,ap;e=avalon.cssName(dT)||dT;if(dR===void 0||typeof dR==="boolean"){ap=x[dT+":get"]||x["@:get"];if(e==="background"){e="backgroundColor"}var dS=ap(dQ,e);return dR===true?parseFloat(dS)||0:dS}else{if(dR===""){dQ.style[e]=""}else{if(dR==null||dR!==dR){return}if(isFinite(dR)&&!avalon.cssNumber[dT]){dR+="px"}ap=x[dT+":set"]||x["@:set"];ap(dQ,e,dR)}}},each:function(dQ,ap){if(dQ){var e=0;if(a7(dQ)){for(var dR=dQ.length;e<dR;e++){if(ap(e,dQ[e])===false){break}}}else{for(e in dQ){if(dQ.hasOwnProperty(e)&&ap(e,dQ[e])===false){break}}}}},getWidgetData:function(dR,dS){var ap=avalon(dR).data();var e={};for(var dQ in ap){if(dQ.indexOf(dS)===0){e[dQ.replace(dS,"").replace(/\w/,function(dT){return dT.toLowerCase()})]=ap[dQ]}}return e},Array:{ensure:function(ap,e){if(ap.indexOf(e)===-1){return ap.push(e)}},removeAt:function(ap,e){return !!ap.splice(e,1).length},remove:function(dQ,ap){var e=dQ.indexOf(ap);if(~e){return avalon.Array.removeAt(dQ,e)}return false}}});var dG=avalon.bindingHandlers={};var al=avalon.bindingExecutors={};var F=avalon.directives={};avalon.directive=function(e,ap){dG[e]=ap.init=(ap.init||k);al[e]=ap.update=(ap.update||k);return F[e]=ap};function a7(dR){if(!dR){return false}var dS=dR.length;if(dS===(dS>>>0)){var ap=cZ.call(dR).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(ap)){return false}if(ap==="Array"){return true}try{if({}.propertyIsEnumerable.call(dR,"length")===false){return/^\s?function/.test(dR.item||dR.callee)}return true}catch(dQ){return !dR.window}}return false}var h=new function(){function e(dQ){this.size=0;this.limit=dQ;this.head=this.tail=void 0;this._keymap={}}var ap=e.prototype;ap.put=function(dQ,dS){var dR={key:dQ,value:dS};this._keymap[dQ]=dR;if(this.tail){this.tail.newer=dR;dR.older=this.tail}else{this.head=dR}this.tail=dR;if(this.size===this.limit){this.shift()}else{this.size++}return dS};ap.shift=function(){var dQ=this.head;if(dQ){this.head=this.head.newer;this.head.older=dQ.newer=dQ.older=this._keymap[dQ.key]=void 0;delete this._keymap[dQ.key]}};ap.get=function(dQ){var dR=this._keymap[dQ];if(dR===void 0){return}if(dR===this.tail){return dR.value}if(dR.newer){if(dR===this.head){this.head=dR.newer}dR.newer.older=dR.older}if(dR.older){dR.older.newer=dR.newer}dR.newer=void 0;dR.older=this.tail;if(this.tail){this.tail.newer=dR}this.tail=dR;return dR.value};return e};if(!"司徒正美".trim){var Q=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(Q,"")}}var dO=!({toString:null}).propertyIsEnumerable("toString"),bz=(function(){}).propertyIsEnumerable("prototype"),C=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],aD=C.length;if(!Object.keys){Object.keys=function(dQ){var dS=[];var dW=bz&&typeof dQ==="function";if(typeof dQ==="string"||(dQ&&dQ.callee)){for(var dU=0;dU<dQ.length;++dU){dS.push(String(dU))}}else{for(var e in dQ){if(!(dW&&e==="prototype")&&cq.call(dQ,e)){dS.push(String(e))}}}if(dO){var dV=dQ.constructor,ap=dV&&dV.prototype===dQ;for(var dT=0;dT<aD;dT++){var dR=C[dT];if(!(ap&&dR==="constructor")&&cq.call(dQ,dR)){dS.push(dR)}}}return dS}}if(!Array.isArray){Array.isArray=function(e){return cZ.call(e)==="[object Array]"}}if(!k.bind){Function.prototype.bind=function(dQ){if(arguments.length<2&&dQ===void 0){return this}var ap=this,e=arguments;return function(){var dR=[],dS;for(dS=1;dS<e.length;dS++){dR.push(e[dS])}for(dS=0;dS<arguments.length;dS++){dR.push(arguments[dS])}return ap.apply(dQ,dR)}}}function bN(dR,e,dQ){var ap="for(var "+dR+"i=0,n = this.length; i < n; i++){"+e.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+dQ;return Function("fn,scope",ap)}if(!ar.test([].map)){avalon.mix(dc,{indexOf:function(dQ,e){var dR=this.length,ap=~~e;if(ap<0){ap+=dR}for(;ap<dR;ap++){if(this[ap]===dQ){return ap}}return -1},lastIndexOf:function(dQ,e){var dR=this.length,ap=e==null?dR-1:e;if(ap<0){ap=Math.max(0,dR+ap)}for(;ap>=0;ap--){if(this[ap]===dQ){return ap}}return -1},forEach:bN("","_",""),filter:bN("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:bN("r=[],","r[i]=_","return r"),some:bN("","if(_)return true","return false"),every:bN("","if(!_)return false","return true")})}function t(ap,dQ){try{while((dQ=dQ.parentNode)){if(dQ===ap){return true}}return false}catch(dR){return false}}avalon.contains=t;if(!cW.contains){cW.contains=function(e){return t(cW,e)}}function r(){return new XMLSerializer().serializeToString(this)}if(ck.SVGElement){if(!cW.createTextNode("x").contains){Node.prototype.contains=function(e){return !!(this.compareDocumentPosition(e)&16)}}var br="http://www.w3.org/2000/svg";var b5=cW.createElementNS(br,"svg");b5.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />';if(!az.test(b5.firstChild)){function ce(dS,dT){if(dS&&dS.childNodes){var ap=dS.childNodes;for(var dQ=0,dR;dR=ap[dQ++];){if(dR.tagName){var e=cW.createElementNS(br,dR.tagName.toLowerCase());dc.forEach.call(dR.attributes,function(dU){e.setAttribute(dU.name,dU.value)});ce(dR,e);dT.appendChild(e)}}}}Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:true,configurable:true,get:r,set:function(ap){var e=this.tagName.toLowerCase(),dQ=this.parentNode,dS=avalon.parseHTML(ap);if(e==="svg"){dQ.insertBefore(dS,this)}else{var dR=cW.createDocumentFragment();ce(dS,dR);dQ.insertBefore(dR,this)}dQ.removeChild(this)}},innerHTML:{enumerable:true,configurable:true,get:function(){var ap=this.outerHTML;var e=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i");var dQ=new RegExp("</"+this.nodeName+">$","i");return ap.replace(e,"").replace(dQ,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var ap=avalon.parseHTML(e);ce(ap,this)}}}})}}if(!dp.outerHTML&&ck.HTMLElement){HTMLElement.prototype.__defineGetter__("outerHTML",r)}var dj=/^(?:mouse|contextmenu|drag)|click/;function cG(dR){var e={};for(var ap in dR){e[ap]=dR[ap]}var dT=e.target=dR.srcElement;if(dR.type.indexOf("key")===0){e.which=dR.charCode!=null?dR.charCode:dR.keyCode}else{if(dj.test(dR.type)){var dS=dT.ownerDocument||cW;var dQ=dS.compatMode==="BackCompat"?dS.body:dS.documentElement;e.pageX=dR.clientX+(dQ.scrollLeft>>0)-(dQ.clientLeft>>0);e.pageY=dR.clientY+(dQ.scrollTop>>0)-(dQ.clientTop>>0);e.wheelDeltaY=e.wheelDelta;e.wheelDeltaX=0}}e.timeStamp=new Date()-0;e.originalEvent=dR;e.preventDefault=function(){dR.returnValue=false};e.stopPropagation=function(){dR.cancelBubble=true};return e}var bJ=avalon.eventHooks;if(!("onmouseenter" in dp)){avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(ap,e){bJ[ap]={type:e,deel:function(dS,dQ,dR){return function(dU){var dT=dU.relatedTarget;if(!dT||(dT!==dS&&!(dS.compareDocumentPosition(dT)&16))){delete dU.type;dU.type=ap;return dR.call(dS,dU)}}}}})}avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,ap){if(ck[e]&&!bJ.animationend){bJ.animationend={type:ap}}});if(!("oninput" in cW.createElement("input"))){bJ.input={type:"propertychange",deel:function(dQ,e,ap){return function(dR){if(dR.propertyName==="value"){dR.type="input";return ap.call(dQ,dR)}}}}}if(cW.onmousewheel===void 0){var cv=cW.onwheel!==void 0?"wheel":"DOMMouseScroll";var bH=cv==="wheel"?"deltaY":"detail";bJ.mousewheel={type:cv,deel:function(dQ,e,ap){return function(dR){dR.wheelDeltaY=dR.wheelDelta=dR[bH]>0?-120:120;dR.wheelDeltaX=0;if(Object.defineProperty){Object.defineProperty(dR,"type",{value:"mousewheel"})}ap.call(dQ,dR)}}}}function aA(e){for(var ap in e){if(!cq.call(e,ap)){continue}var dQ=e[ap];if(typeof aA.plugins[ap]==="function"){aA.plugins[ap](dQ)}else{if(typeof aA[ap]==="object"){avalon.mix(aA[ap],dQ)}else{aA[ap]=dQ}}}return this}var c0,bC,am,aP,bj,ac=/[-.*+?^${}()|[\]\/\\]/g;function cp(e){return(e+"").replace(ac,"\\$&")}var dL={loader:function(ap){var e=q&&ap;ck.require=e?q:au;ck.define=e?q.define:an},interpolate:function(dR){c0=dR[0];bC=dR[1];if(c0===bC){throw new SyntaxError("openTag!==closeTag");var dQ=c0+"test"+bC;dE.innerHTML=dQ;if(dE.innerHTML!==dQ&&dE.innerHTML.indexOf("&lt;")>-1){throw new SyntaxError("此定界符不合法")}dE.innerHTML=""}aA.openTag=c0;aA.closeTag=bC;var e=cp(c0),ap=cp(bC);am=new RegExp(e+"(.*?)"+ap);aP=new RegExp(e+"(.*?)"+ap,"g");bj=new RegExp(e+".*?"+ap+"|\\sms-")}};aA.async=true;aA.debug=true;aA.plugins=dL;aA.plugins.interpolate(["{{","}}"]);aA.paths={};aA.shim={};aA.maxRepeatSize=100;avalon.config=aA;function a3(dR,dS){var dQ=this.$events||(this.$events={});var e=dQ[dR]||(dQ[dR]=[]);if(typeof dS==="function"){var ap=dS;ap.uuid=Math.random();dS={element:dp,type:"user-watcher",handler:k,vmodels:[this],expr:dR,uuid:ap.uuid};dS.wildcard=/\*/.test(dR)}if(!dS.update){if(/\w\.*\B/.test(dR)){dS.getter=k;dS.update=function(dT){var dU=this.fireArgs||[];if(dU[2]){dS.handler.apply(this,dU)}delete this.fireArgs};e.sync=true;avalon.Array.ensure(e,dS)}else{avalon.injectBinding(dS)}if(ap){dS.handler=ap}}else{if(!dS.oneTime){avalon.Array.ensure(e,dS)}}return function(){dS.update=dS.getter=dS.handler=k;dS.element=cW.createElement("a")}}function bb(dQ,ap){var dS=this.$events;if(dS&&dS[dQ]){if(ap){ap[2]=dQ}db(dS[dQ],ap);var dR=this.$up;if(dR&&dR.$event){if(this.$pathname){bb.call(dR,this.$pathname+"."+dQ,ap)}bb.call(dR,"*."+dQ,ap)}}else{dR=this.$up;if(dR){var dT=this.$pathname+"."+dQ;var e=dT.split(".");if(e.indexOf("*")===-1){bb.call(dR,dT,ap);e[1]="*";bb.call(dR,e.join("."),ap)}else{bb.call(dR,dT,ap)}}}}function dy(dQ,ap){do{if(dQ.$watch){var dR=dQ.$events||(dQ.$events={});var dS=dR[ap]||(dR[ap]=[]);cP.collectDependency(dS);return}dQ=dQ.$up;if(dQ){ap=dQ.$pathname+"."+ap}else{break}}while(true)}function db(dQ,e){if(!dQ){return}if(new Date()-ci>444&&typeof dQ[0]==="object"){a8()}var dU=[],dT=[];for(var ap=0,dS;dS=dQ[ap++];){if(dS.type==="user-watcher"){dU.push(dS)}else{dT.push(dS)}}if(aA.async){dF.render();for(ap=0;dS=dT[ap++];){if(dS.update){var dR=O(dS);if(!dF.queue[dR]){dF.queue[dR]=1;dF.queue.push(dS)}}}}else{for(ap=0;dS=dT[ap++];){if(dS.update){dS.update()}}}for(ap=0;dS=dU[ap++];){if(e&&e[2]===dS.expr||dS.wildcard){dS.fireArgs=e}dS.update()}}var dl=avalon.vmodels={};avalon.define=function(e){var dQ=e.$id;if(!dQ){cK("warning: vm必须指定$id")}var ap=cE(e);ap.$id=dQ;return dl[dQ]=ap};var cg=dH("$id,$watch,$fire,$events,$model,$skipArray,$active,$pathname,$up,$track,$accessors");var c1=Object.defineProperty;var bF=true;try{c1({},"_",{value:"x"});var s=Object.defineProperties}catch(cy){bF=false}function cE(ap,e){e=e||{};e.watch=true;return dD(ap,e)}function bx(){}function dD(e,d2){if(!e||(e.$id&&e.$accessors)){return e}d2=d2||v;var dR=d2.force||v;var dS=d2.old;var dY=typeof dS==="object"?dS.$accessors:v;var dT=new bx();var dV={};var dW={};var d0=[];var dQ=[];var d1={};if(e.$skipArray){d1=dH(e.$skipArray);delete e.$skipArray}var dU=e.$computed;if(dU){delete e.$computed;for(var ap in dU){dW[ap]=true;(function(d4,d5){var d3;dV[d4]={get:function(){return d3=d5.get.call(this)},set:function(d6){if(typeof d5.set==="function"){var d8=d3;d5.set.call(this,d6);var d7=this[d4];if(this.$fire&&(d7!==d8)){this.$fire(d4,d7,d8)}}},enumerable:true,configurable:true}})(ap,dU[ap])}}for(ap in e){var dZ=e[ap];if(!cg[ap]){dW[ap]=true}if(typeof dZ==="function"||(dZ&&dZ.nodeType)||(!dR[ap]&&(ap.charAt(0)==="$"||cg[ap]||d1[ap]))){d0.push(ap)}else{if(dn(dZ)){cK("warning:计算属性建议放在$computed对象中统一定义");(function(d4,d5){var d3;dV[d4]={get:function(){return d3=d5.get.call(this)},set:function(d6){if(typeof d5.set==="function"){var d8=d3;d5.set.call(this,d6);var d7=this[d4];if(this.$fire&&(d7!==d8)){this.$fire(d4,d7,d8)}}},enumerable:true,configurable:true}})(ap,dZ)}else{dQ.push(ap);if(dY[ap]){dV[ap]=dY[ap]}else{dV[ap]=b0(ap,dZ)}}}}dV["$model"]=aQ;dT=s(dT,dV,e);function dX(d3){return dW[d3]===true}d0.forEach(function(d3){dT[d3]=e[d3]});dt(dT,"$id","anonymous");dt(dT,"$up",dS?dS.$up:null);dt(dT,"$track",Object.keys(dW));dt(dT,"$active",false);dt(dT,"$pathname",dS?dS.$pathname:"");dt(dT,"$accessors",dV);dt(dT,"hasOwnProperty",dX);if(d2.watch){dt(dT,"$watch",function(){return a3.apply(dT,arguments)});dt(dT,"$fire",function(d7,d4){if(d7.indexOf("all!")===0){var d3=d7.slice(4);for(var d6 in avalon.vmodels){var d5=avalon.vmodels[d6];d5.$fire&&d5.$fire.apply(d5,[d3,d4])}}else{bb.call(dT,d7,[d4])}})}dQ.forEach(function(d3){var d4=dT[d3]=e[d3];if(d4&&typeof d4==="object"){d4.$up=dT;d4.$pathname=d3}bb.call(dT,d3)});for(ap in dU){dZ=dT[ap]}dT.$active=true;return dT}function dn(ap){if(ap&&typeof ap==="object"){for(var e in ap){if(e!=="get"&&e!=="set"){return false}}return typeof ap.get==="function"}}function b0(ap,dQ){var e;dQ=NaN;return{get:function(){if(this.$active){dy(this,ap)}return dQ},set:function(dS){if(dQ===dS){return}var dR=dQ;e=aB(dS,dQ);if(e){dQ=e}else{e=void 0;dQ=dS}if(Object(e)===e){e.$pathname=ap;e.$up=this}if(this.$active){bb.call(this,ap,[dQ,dR])}},enumerable:true,configurable:true}}function aB(dT,ap,dU,dS){if(Array.isArray(dT)){return cY(dT,ap,dS)}else{if(avalon.isPlainObject(dT)){if(ap){var dR=cO(dT);var e=cO(ap);if(dR.join(";")===e.join(";")){for(var dQ in dT){if(dT.hasOwnProperty(dQ)){ap[dQ]=dT[dQ]}}return ap}ap.$active=false}return dD(dT,{old:ap,watch:dS})}}if(dU){return dT}}var cO=ar.test(Object.key)?Object.key:function(e){var ap=[];for(var dQ in e){if(e.hasOwnProperty(dQ)&&!cg[dQ]){ap.push(dQ)}}return ap};function cY(dV,e,dT){if(e){var dQ=[0,e.length].concat(dV);e.splice.apply(e,dQ);return e}else{for(var dR in bd){dV[dR]=bd[dR]}dt(dV,"$up",null);dt(dV,"$pathname","");dt(dV,"$track",c3(dV.length));dV._=dD({length:NaN},{watch:true});dV._.length=dV.length;dV._.$watch("length",function(dX,dW){bb.call(dV.$up,dV.$pathname+".length",[dX,dW])});if(dT){dt(dV,"$watch",function(){return a3.apply(dV,arguments)})}if(aW){Object.defineProperty(dV,"$model",aQ)}else{dV.$model=cX(dV)}for(var ap=0,dU=dV.length;ap<dU;ap++){var dS=dV[ap]=aB(dV[ap],0,1,1);if(Object(dS)){dS.$up=dV}}return dV}}function dt(ap,e,dQ){if(bF){Object.defineProperty(ap,e,{value:dQ,writable:true,enumerable:false,configurable:true})}else{ap[e]=dQ}}function cX(dQ){var dS=avalon.type(dQ);if(dS==="array"){var dR=[];for(var e=0;e<dQ.length;e++){dR[e]=cX(dQ[e])}return dR}else{if(dS==="object"){var ap={};for(e in dQ){if(dQ.hasOwnProperty(e)){ap[e]=cX(dQ[e])}}return ap}}return dQ}var aQ={get:function(){return cX(this)},set:k,enumerable:false,configurable:true};if(!bF){if("__defineGetter__" in avalon){c1=function(e,dQ,ap){if("value" in ap){e[dQ]=ap.value}if("get" in ap){e.__defineGetter__(dQ,ap.get)}if("set" in ap){e.__defineSetter__(dQ,ap.set)}return e};s=function(ap,e){for(var dQ in e){if(e.hasOwnProperty(dQ)){c1(ap,dQ,e[dQ])}}return ap}}if(cf){var H={};ck.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript");function cC(ap,dR,dQ,dS){var e=dR[dQ];if(arguments.length===4){e.set.call(ap,dS)}else{return e.get.call(ap)}}s=function(dS,dR,dT){var ap=[];ap.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d"+aL+", p"+aL+")","\t\tSet [__data__] = d"+aL+": set [__proxy__] = p"+aL,"\t\tSet [__const__] = Me","\tEnd Function");var dV={};for(dS in dR){dV[dS]=true;ap.push("\tPublic Property Let ["+dS+"](val"+aL+")",'\t\tCall [__proxy__](Me,[__data__], "'+dS+'", val'+aL+")","\tEnd Property","\tPublic Property Set ["+dS+"](val"+aL+")",'\t\tCall [__proxy__](Me,[__data__], "'+dS+'", val'+aL+")","\tEnd Property","\tPublic Property Get ["+dS+"]","\tOn Error Resume Next","\t\tSet["+dS+'] = [__proxy__](Me,[__data__],"'+dS+'")',"\tIf Err.Number <> 0 Then","\t\t["+dS+'] = [__proxy__](Me,[__data__],"'+dS+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property")}for(dS in dT){if(dV[dS]!==true){dV[dS]=true;ap.push("\tPublic ["+dS+"]")}}for(dS in cg){if(dV[dS]!==true){dV[dS]=true;ap.push("\tPublic ["+dS+"]")}}ap.push("\tPublic [hasOwnProperty]");ap.push("End Class");var e=ap.join("\r\n");var dU=H[e];if(!dU){dU=bT("VBClass");ck.parseVB("Class "+dU+e);ck.parseVB(["Function "+dU+"Factory(a, b)","\tDim o","\tSet o = (New "+dU+")(a, b)","\tSet "+dU+"Factory = o","End Function"].join("\r\n"));H[e]=dU}var dQ=ck[dU+"Factory"](dR,cC);return dQ}}}var dh=["push","pop","shift","unshift","splice"];var dP=Array.prototype;var bd={notify:function(){bb.call(this.$up,this.$pathname)},set:function(e,ap){if(((e>>>0)===e)&&this[e]!==ap){if(e>this.length){throw Error(e+"set方法的第一个参数不能大于原数组长度")}bb.call(this.$up,this.$pathname+".*",[ap,this[e]]);this.splice(e,1,ap)}},contains:function(e){return this.indexOf(e)!==-1},ensure:function(e){if(!this.contains(e)){this.push(e)}return this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){if((e>>>0)===e){return this.splice(e,1)}return[]},size:function(){return this._.length},removeAll:function(dQ){if(Array.isArray(dQ)){for(var e=this.length-1;e>=0;e--){if(dQ.indexOf(this[e])!==-1){b1.call(this,e,1);b1.call(this.$track,e,1)}}}else{if(typeof dQ==="function"){for(e=this.length-1;e>=0;e--){var ap=this[e];if(dQ(ap,e)){b1.call(this,e,1);b1.call(this.$track,e,1)}}}else{b1.call(this,0,this.length);b1.call(this.$track,0,this.length)}}if(!aW){this.$model=cX(this)}this.notify();this._.length=this.length},clear:function(){return this.removeAll()}};var b1=dP.splice;dh.forEach(function(ap){var e=dP[ap];bd[ap]=function(){var dR=[];for(var dS=0,dT=arguments.length;dS<dT;dS++){dR[dS]=aB(arguments[dS],0,1,1)}var dQ=e.apply(this,dR);f(this.$track,ap,dR);if(!aW){this.$model=cX(this)}this.notify();this._.length=this.length;return dQ}});"sort,reverse".replace(b7,function(e){bd[e]=function(){var dU=this.concat();var dV=this;var dY=Math.random();var dS=[];var dX=false;dP[e].apply(dV,arguments);for(var dR=0,dQ=dU.length;dR<dQ;dR++){var dW=dV[dR];var ap=dU[dR];if(dW===ap){dS.push(dR)}else{var dT=dU.indexOf(dW);dS.push(dT);dU[dT]=dY;dX=true}}if(dX){bv(this.$track,dS);if(!aW){this.$model=cX(this)}this.notify()}return this}});function bv(dT,ap){var dR={};for(var dQ=0,dS=ap.length;dQ<dS;dQ++){dR[dQ]=dT[dQ];var e=ap[dQ];if(e in dR){dT[dQ]=dR[e];delete dR[e]}else{dT[dQ]=dT[e]}}}function c3(dQ){var e=[];for(var ap=0;ap<dQ;ap++){e[ap]=bT("$proxy$each")}return e}function f(ap,dS,dQ){switch(dS){case"push":case"unshift":dQ=c3(dQ.length);break;case"splice":if(dQ.length>2){var e=dQ[1];var dR=dQ.length-2;dQ=[dQ[0],dQ[1]].concat(c3(dQ.length-2))}break}Array.prototype[dS].apply(ap,dQ)}var cP=(function(){var e=[];var ap;return{begin:function(dQ){e.push(ap);ap=dQ},end:function(){ap=e.pop()},collectDependency:function(dQ){if(ap){ap.callback(dQ)}}}})();var cm=/^on$/;function dA(){return new Date()-0}avalon.injectBinding=function(e){e.handler=e.handler||F[e.type].update||k;e.update=function(){var ap=false;if(!e.getter){ap=true;cP.begin({callback:function(dY){ag(dY,e)}});e.getter=cs(e.expr,e.vmodels,e);e.observers.forEach(function(dY){dY.v.$watch(dY.p,e)});delete e.observers}try{var dV=e.fireArgs,dX,dW;delete e.fireArgs;if(!dV){if(e.type==="on"){dX=e.getter+""}else{dX=e.getter.apply(0,e.args)}}else{dX=dV[0];dW=dV[1]}dW=typeof dW==="undefined"?e.oldValue:dW;if(e._filters){dX=bs.$filter.apply(0,[dX].concat(e._filters))}if(e.signature){var dR=avalon.type(dX);if(dR!=="array"&&dR!=="object"){throw Error("warning:"+e.expr+"只能是对象或数组")}e.xtype=dR;var dS=cn(e.proxies||[],dR);var dU=dX.$track||(dR==="array"?c3(dX.length):Object.keys(dX));e.track=dU;if(dS!==dU.join(";")){e.handler(dX,dW);e.oldValue=1}}else{if(Array.isArray(dX)?dX.length!==(dW&&dW.length):false){e.handler(dX,dW);e.oldValue=dX.concat()}else{if(dX!==dW){e.handler(dX,dW);e.oldValue=dX}}}}catch(dT){delete e.getter;cK("warning:exception throwed in [avalon.injectBinding] ",dT);var dQ=e.element;if(dQ&&dQ.nodeType===3){dQ.nodeValue=c0+(e.oneTime?"::":"")+e.expr+bC}}finally{ap&&cP.end()}};e.update()};function ag(e,ap){if(ap.oneTime){return}if(e&&avalon.Array.ensure(e,ap)&&ap.element){cQ(ap,e);if(new Date()-ci>444){a8()}}}function cn(ap,e){var dQ=[];for(var dR=0,dS;dS=ap[dR++];){dQ.push(e?dS.$id:dS.$key)}return dQ.join(";")}var dw=0;var dm=avalon.$$subscribers=[];var ci=new Date();var aO={};function O(ap){if(!ap.uuid){var e=ap.element;if(e){if(e.nodeType!==1){ap.uuid=ap.type+(ap.pos||0)+"-"+O(e.parentNode)}else{ap.uuid=ap.name+"-"+O(e)}}else{ap.uuid=++dw}}return ap.uuid}function cQ(dR,dQ){var e=dR.lists||(dR.lists=[]);var ap=O(dR);avalon.Array.ensure(e,dQ);dQ.$uuid=dQ.$uuid||bT();if(!dm[ap]){dm[ap]=1;dm.push(dR)}}function a8(dQ){var dS=dm.length;var e=dS;var dT=[];var dR={};var dW={};while(dQ=dm[--dS]){var dV=dQ.type;if(dW[dV]){dW[dV]++}else{dW[dV]=1;dT.push(dV)}}var dX=false;dT.forEach(function(dZ){if(aO[dZ]!==dW[dZ]){dR[dZ]=1;dX=true}});dS=e;if(dX){while(dQ=dm[--dS]){if(dQ.element===null){dm.splice(dS,1);continue}if(dR[dQ.type]&&g(dQ.element)){dm.splice(dS,1);delete dm[dQ.uuid];var dY=dQ.lists;for(var ap=0,dU;dU=dY[ap++];){avalon.Array.remove(dY,dU);avalon.Array.remove(dU,dQ)}b9(dQ)}}}aO=dW;ci=new Date()}function b9(ap){delete dm[ap.uuid];ap.element=null;ap.rollback&&ap.rollback();for(var e in ap){ap[e]=null}}function g(dQ){try{var ap=dQ.parentNode.nodeType}catch(dR){return true}if(dQ.ifRemove){if(!dp.contains(dQ.ifRemove)&&(aH===dQ.parentNode)){dQ.parentNode&&dQ.parentNode.removeChild(dQ);return true}}return dQ.msRetain?0:(dQ.nodeType===1?!dp.contains(dQ):!avalon.contains(dp,dQ))}var bO={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:aW?[0,"",""]:[1,"X<div>","</div>"]};bO.th=bO.td;bO.optgroup=bO.option;bO.tbody=bO.tfoot=bO.colgroup=bO.caption=bO.thead;String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(b7,function(e){bO[e]=bO.g});var w=/<([\w:]+)/;var dv=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig;var b8=aW?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/ig;var di=dH(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);var cb=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/;var bX=cW.createElement("script");var ab=/<|&#?\w+;/;avalon.parseHTML=function(dU){var dW=cw.cloneNode(false);if(typeof dU!=="string"){return dW}if(!ab.test(dU)){dW.appendChild(cW.createTextNode(dU));return dW}dU=dU.replace(dv,"<$1></$2>").trim();var dZ=(w.exec(dU)||["",""])[1].toLowerCase(),ap=bO[dZ]||bO._default,e=dE,dX,dY;if(!aW){dU=dU.replace(b8,"<br class=msNoScope>$1")}e.innerHTML=ap[1]+dU+ap[2];var dS=e.getElementsByTagName("script");if(dS.length){for(var dT=0,dQ;dQ=dS[dT++];){if(di[dQ.type]){dY=bX.cloneNode(false);dc.forEach.call(dQ.attributes,function(d0){if(d0&&d0.specified){dY[d0.name]=d0.value;dY.setAttribute(d0.name,d0.value)}});dY.text=dQ.text;dQ.parentNode.replaceChild(dY,dQ)}}}if(!aW){var dV=ap[1]==="X<div>"?e.lastChild.firstChild:e.lastChild;if(dV&&dV.tagName==="TABLE"&&dZ!=="tbody"){for(dS=dV.childNodes,dT=0;dQ=dS[dT++];){if(dQ.tagName==="TBODY"&&!dQ.innerHTML){dV.removeChild(dQ);break}}}dS=e.getElementsByTagName("br");var dR=dS.length;while(dQ=dS[--dR]){if(dQ.className==="msNoScope"){dQ.parentNode.removeChild(dQ)}}for(dS=e.all,dT=0;dQ=dS[dT++];){if(y(dQ)){bi(dQ)}}}for(dT=ap[0];dT--;e=e.lastChild){}while(dX=e.firstChild){dW.appendChild(dX)}return dW};function y(e){var ap=e.nodeName;return ap.toLowerCase()===ap&&e.scopeName&&e.outerText===""}function bi(e){if(e.currentStyle.behavior!=="url(#default#VML)"){e.style.behavior="url(#default#VML)";e.style.display="inline-block";e.style.zoom=1}}avalon.innerHTML=function(dR,dQ){if(!aW&&(!b8.test(dQ)&&!cb.test(dQ))){try{dR.innerHTML=dQ;return}catch(dS){}}var ap=this.parseHTML(dQ);this.clearHTML(dR).appendChild(ap)};avalon.clearHTML=function(e){e.textContent="";while(e.firstChild){e.removeChild(e.firstChild)}return e};function bK(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function l(e){if(!e||e.indexOf("-")<0&&e.indexOf("_")<0){return e}return e.replace(/[-_][^-_]/g,function(ap){return ap.charAt(1).toUpperCase()})}var Z={_toString:function(){var ap=this.node;var e=ap.className;var dQ=typeof e==="string"?e:e.baseVal;return dQ.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){if(!this.contains(e)){this._set(this+" "+e)}},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var ap=this.node;if(az.test(ap)){ap.setAttribute("class",e)}else{ap.className=e}}};function bD(ap){if(!("classList" in ap)){ap.classList={node:ap};for(var e in Z){ap.classList[e.slice(1)]=Z[e]}}return ap.classList}"add,remove".replace(b7,function(e){avalon.fn[e+"Class"]=function(ap){var dQ=this[0];if(ap&&typeof ap==="string"&&dQ&&dQ.nodeType===1){ap.replace(/\S+/g,function(dR){bD(dQ)[e](dR)})}return this}});avalon.fn.mix({hasClass:function(e){var ap=this[0]||{};return ap.nodeType===1&&bD(ap).contains(e)},toggleClass:function(dT,dQ){var dR,ap=0;var dU=String(dT).split(/\s+/);var e=typeof dQ==="boolean";while((dR=dU[ap++])){var dS=e?dQ:!this.hasClass(dR);this[dS?"addClass":"removeClass"](dR)}return this},attr:function(e,ap){if(arguments.length===2){this[0].setAttribute(e,ap);return this}else{return this[0].getAttribute(e)}},data:function(ap,dQ){ap="data-"+bK(ap||"");switch(arguments.length){case 2:this.attr(ap,dQ);return this;case 1:var dR=this.attr(ap);return dz(dR);case 0:var e={};dc.forEach.call(this[0].attributes,function(dS){if(dS){ap=dS.name;if(!ap.indexOf("data-")){ap=l(ap.slice(5));e[ap]=dz(dS.value)}}});return e}},removeData:function(e){e="data-"+bK(e);this[0].removeAttribute(e);return this},css:function(ap,dR){if(avalon.isPlainObject(ap)){for(var dQ in ap){avalon.css(this,dQ,ap[dQ])}}else{var e=avalon.css(this,ap,dR)}return e!==void 0?e:this},position:function(){var dQ,dR,ap=this[0],e={top:0,left:0};if(!ap){return}if(this.css("position")==="fixed"){dR=ap.getBoundingClientRect()}else{dQ=this.offsetParent();dR=this.offset();if(dQ[0].tagName!=="HTML"){e=dQ.offset()}e.top+=avalon.css(dQ[0],"borderTopWidth",true);e.left+=avalon.css(dQ[0],"borderLeftWidth",true);e.top-=dQ.scrollTop();e.left-=dQ.scrollLeft()}return{top:dR.top-e.top-avalon.css(ap,"marginTop",true),left:dR.left-e.left-avalon.css(ap,"marginLeft",true)}},offsetParent:function(){var e=this[0].offsetParent;while(e&&avalon.css(e,"position")==="static"){e=e.offsetParent}return avalon(e||dp)},bind:function(dQ,ap,e){if(this[0]){return avalon.bind(this[0],dQ,ap,e)}},unbind:function(dQ,ap,e){if(this[0]){avalon.unbind(this[0],dQ,ap,e)}return this},val:function(dS){var dR=this[0];if(dR&&dR.nodeType===1){var ap=arguments.length===0;var e=ap?":get":":set";var dQ=aY[dr(dR)+e];if(dQ){var dT=dQ(dR,dS)}else{if(ap){return(dR.value||"").replace(/\r/g,"")}else{dR.value=dS}}}return ap?dT:this}});function dz(ap){try{if(typeof ap==="object"){return ap}ap=ap==="true"?true:ap==="false"?false:ap==="null"?null:+ap+""===ap?+ap:cR.test(ap)?avalon.parseJSON(ap):ap}catch(dQ){}return ap}var cR=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,cB=/^[\],:{}\s]*$/,cF=/(?:^|:|,)(?:\s*\[)+/g,c4=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,cc=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=ck.JSON?JSON.parse:function(e){if(typeof e==="string"){e=e.trim();if(e){if(cB.test(e.replace(c4,"@").replace(cc,"]").replace(cF,""))){return(new Function("return "+e))()}}avalon.error("Invalid JSON: "+e)}return e};avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(ap,e){avalon.fn[ap]=function(dT){var dQ=this[0]||{},dS=cM(dQ),dR=ap==="scrollTop";if(!arguments.length){return dS?(e in dS)?dS[e]:dp[ap]:dQ[ap]}else{if(dS){dS.scrollTo(!dR?dT:avalon(dS).scrollLeft(),dR?dT:avalon(dS).scrollTop())}else{dQ[ap]=dT}}}});function cM(e){return e.window&&e.document?e:e.nodeType===9?e.defaultView||e.parentWindow:false}var x=avalon.cssHooks={};var bS=["","-webkit-","-o-","-moz-","-ms-"];var ca={"float":aW?"cssFloat":"styleFloat"};avalon.cssNumber=dH("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");avalon.cssName=function(e,dR,dQ){if(ca[e]){return ca[e]}dR=dR||dp.style;for(var ap=0,dS=bS.length;ap<dS;ap++){dQ=l(bS[ap]+e);if(dQ in dR){return(ca[e]=dQ)}}return null};x["@:set"]=function(dQ,ap,dR){try{dQ.style[ap]=dR}catch(dS){}};if(ck.getComputedStyle){x["@:get"]=function(dR,ap){if(!dR||!dR.style){throw new Error("getComputedStyle要求传入一个节点 "+dR)}var e,dQ=getComputedStyle(dR,null);if(dQ){e=ap==="filter"?dQ.getPropertyValue(ap):dQ[ap];if(e===""){e=dR.style[ap]}}return e};x["opacity:get"]=function(ap){var e=x["@:get"](ap,"opacity");return e===""?"1":e}}else{var av=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i;var cH=/^(top|right|bottom|left)$/;var cA=/alpha\([^)]*\)/i;var Y=!!ck.XDomainRequest;var dN="DXImageTransform.Microsoft.Alpha";var ah={thin:Y?"1px":"2px",medium:Y?"3px":"4px",thick:Y?"5px":"6px"};x["@:get"]=function(dT,dR){var dQ=dT.currentStyle;var ap=dQ[dR];if((av.test(ap)&&!cH.test(ap))){var dS=dT.style,dU=dS.left,e=dT.runtimeStyle.left;dT.runtimeStyle.left=dQ.left;dS.left=dR==="fontSize"?"1em":(ap||0);ap=dS.pixelLeft+"px";dS.left=dU;dT.runtimeStyle.left=e}if(ap==="medium"){dR=dR.replace("Width","Style");if(dQ[dR]==="none"){ap="0px"}}return ap===""?"auto":ah[ap]||ap};x["opacity:set"]=function(dS,ap,dT){var dR=dS.style;var e=isFinite(dT)&&dT<=1?"alpha(opacity="+dT*100+")":"";var dQ=dR.filter||"";dR.zoom=1;dR.filter=(cA.test(dQ)?dQ.replace(cA,e):dQ+" "+e).trim();if(!dR.filter){dR.removeAttribute("filter")}};x["opacity:get"]=function(e){var ap=e.filters.alpha||e.filters[dN],dQ=ap&&ap.enabled?ap.opacity:100;return(dQ/100)+""}}"top,left".replace(b7,function(e){x[e+":get"]=function(dQ){var ap=x["@:get"](dQ,e);return/px$/.test(ap)?ap:avalon(dQ).position()[e]+"px"}});var ct={position:"absolute",visibility:"hidden",display:"block"};var V=/^(none|table(?!-c[ea]).+)/;function ad(dQ,dS){if(dQ.offsetWidth<=0){if(V.test(x["@:get"](dQ,"display"))){var dR={node:dQ};for(var e in ct){dR[e]=dQ.style[e];dQ.style[e]=ct[e]}dS.push(dR)}var ap=dQ.parentNode;if(ap&&ap.nodeType===1){ad(ap,dS)}}}"Width,Height".replace(b7,function(dQ){var dS=dQ.toLowerCase(),ap="client"+dQ,e="scroll"+dQ,dR="offset"+dQ;x[dS+":get"]=function(dV,dW,dU){var dX=-4;if(typeof dU==="number"){dX=dU}dW=dQ==="Width"?["Left","Right"]:["Top","Bottom"];var dT=dV[dR];if(dX===2){return dT+avalon.css(dV,"margin"+dW[0],true)+avalon.css(dV,"margin"+dW[1],true)}if(dX<0){dT=dT-avalon.css(dV,"border"+dW[0]+"Width",true)-avalon.css(dV,"border"+dW[1]+"Width",true)}if(dX===-4){dT=dT-avalon.css(dV,"padding"+dW[0],true)-avalon.css(dV,"padding"+dW[1],true)}return dT};x[dS+"&get"]=function(dU){var dV=[];ad(dU,dV);var dX=x[dS+":get"](dU);for(var dT=0,dW;dW=dV[dT++];){dU=dW.node;for(var dY in dW){if(typeof dW[dY]==="string"){dU.style[dY]=dW[dY]}}}return dX};avalon.fn[dS]=function(dU){var dT=this[0];if(arguments.length===0){if(dT.setTimeout){return dT["inner"+dQ]||dT.document.documentElement[ap]}if(dT.nodeType===9){var dV=dT.documentElement;return Math.max(dT.body[e],dV[e],dT.body[dR],dV[dR],dV[ap])}return x[dS+"&get"](dT)}else{return this.css(dS,dU)}};avalon.fn["inner"+dQ]=function(){return x[dS+":get"](this[0],void 0,-2)};avalon.fn["outer"+dQ]=function(dT){return x[dS+":get"](this[0],void 0,dT===true?2:0)}});avalon.fn.offset=function(){var ap=this[0],dS={left:0,top:0};if(!ap||!ap.tagName||!ap.ownerDocument){return dS}var dX=ap.ownerDocument,dT=dX.body,dW=dX.documentElement,dU=dX.defaultView||dX.parentWindow;if(!avalon.contains(dW,ap)){return dS}if(ap.getBoundingClientRect){dS=ap.getBoundingClientRect()}var dR=dW.clientTop||dT.clientTop,dV=dW.clientLeft||dT.clientLeft,e=Math.max(dU.pageYOffset||0,dW.scrollTop,dT.scrollTop),dQ=Math.max(dU.pageXOffset||0,dW.scrollLeft,dT.scrollLeft);return{top:dS.top+e-dR,left:dS.left+dQ-dV}};function dr(ap){var e=ap.tagName.toLowerCase();return e==="input"&&/checkbox|radio/.test(ap.type)?"checked":e}var dg=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i;var aY={"option:get":cf?function(e){return dg.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,dV){var dQ,dX=e.options,dS=e.selectedIndex,dT=aY["option:get"],dR=e.type==="select-one"||dS<0,dW=dR?null:[],dU=dR?dS+1:dX.length,ap=dS<0?dU:dR?dS:0;for(;ap<dU;ap++){dQ=dX[ap];if((dQ.selected||ap===dS)&&!dQ.disabled){dV=dT(dQ);if(dR){return dV}dW.push(dV)}}return dW},"select:set":function(dS,ap,dT){ap=[].concat(ap);var e=aY["option:get"];for(var dQ=0,dR;dR=dS.options[dQ++];){if((dR.selected=ap.indexOf(e(dR))>-1)){dT=true}}if(!dT){dS.selectedIndex=-1}}};var dJ={};var cd=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");cd.replace(/\w+/g,function(e){dJ[e]=true});var b3=/\[(['"]?)([^'"]+)\1\]/;var cz=function(e){return(e===36)||(e===95)||(e>=65&&e<=90)||(e>=97&&e<=122)};function aX(ap,dR,e,dQ){return ap.slice(0,dR)+"."+ap.slice(dR).replace("["+e+"]",dQ)}function S(dY){var d8=0;var d1=0;var d3={};var e="";var d7=[];var d6=false;var dV=function(ee){if(d1<0){return}var eb=d8;var ed=dY.slice(d1,eb);var ec=d1+"-"+(eb-1);d3[ec]=ed;if(dJ[ed]&&dY.charAt(d1-1)!=="."){delete d3[ec]}if(ee){d3[d1]="*"}d1=-1};var dU=function(ec){var ee=d7.pop();var eb=ec?d8-1:d8;var ed=dY.slice(ee,eb);try{var eg=Function("return "+ed)();eg+="";dY=aX(dY,ee-1,ed,eg);d8=ee+eg.length-1;d3[ee+"-"+d8]=eg;dS="word";d1=-1}catch(ef){dY=aX(dY,ee-1,ed,"*");d8=ee;d3[ee]="*";dS="word";d1=-1}};var dS="unknown";var dT={unknown:function(){if(cz(dZ)){dS="word";d1=d8}else{if(dZ===34||dZ===39){dS="string";e=dZ}else{if(dZ===93){dU()}}}},word:function(){if(/\B/.test(dR)){dS="unknown";dY=dY.slice(0,d8)+dY.slice(d8).replace(/\s*(\.|\[)\s*/,function(ec,eb){return eb});dR=dY.charAt(d8);if(dZ===46){dS="dot";dV();d3[d8]="."}else{if(dZ===91){d3[d8]=".";dV();d7.push(d8+1)}else{if(dZ===93){if(d1>0){dV(true)}else{dU(true)}}else{dV()}}}}},dot:function(){dS="unknown";if(dZ>=48&&dZ<=57||dZ===42||cz(dZ)){dS="word";d1=d8}},string:function(){if(d6){d6=false}else{if(dZ===92){d6=true}if(dZ===e){dS="unknown"}}}};var ea=dY.length;do{var dZ=dY.charCodeAt(d8);if(dZ!==dZ){dV();break}if(ea--===0){break}var dR=dY.charAt(d8);dT[dS]();d8++}while(true);var ap=[];for(d8 in d3){var d5=d3[d8];var dQ=d8.split("-");ap.push({first:~~dQ[0],last:~~dQ[1]||~~dQ[0],text:d5})}ap.sort(function(ec,eb){return ec.first-eb.first});var d9={};do{var d4=ap.shift();if(!d4){break}var d0=true;loop:for(d8 in d9){dQ=d8.split("-");if(Number(dQ[1])+1===d4.first){d9[dQ[0]+"-"+d4.last]=d9[d8]+d4.text;delete d9[d8];d0=false;break loop}}if(d0){d9[d4.first+"-"+d4.last]=d4.text}}while(1);var dW=[];var d2={};for(d8 in d9){var dX=d9[d8];if(!d2[dX]){d2[dX]=true;dW.push(dX)}}return dW}function b4(dV,dW,ap,dX){var dU=[],dT=" = "+ap+".";for(var dQ=dV.length,e;e=dV[--dQ];){var dS=e.split("."),dY;var dR=dS[0];while(dY=dS.shift()){if(dW.hasOwnProperty(dY)){dU.push(dR+dT+dR);dX.observers.push({v:dW,p:e});dV.splice(dQ,1)}}}return dU}var dI=/(\$proxy\$[a-z]+)\d+$/;var cL=new h(218);var by=new h(128);function cJ(ap){ap=ap.trim();var e=cL.get(ap);if(e){return e.concat()}e=S(ap);return cL.put(ap,e).concat()}function cs(e,d5,dY){var dR=dY.filters;if(typeof dR==="string"&&dR.trim()&&!dY._filters){dY._filters=p(dR.trim())}var dW=cJ(e);var dT=new Date()-0;var dS=[];var dU=[];var ap=[];dY.observers=[];for(var d1=0,d4=d5.length;d1<d4;d1++){if(dW.length){var d8="vm"+dT+"_"+d1;dU.push(d8);ap.push(d5[d1]);dS.push.apply(dS,b4(dW,d5[d1],d8,dY))}}dY.args=ap;var dZ=dY.type;var d6=d5.map(function(d9){return String(d9.$id).replace(dI,"$1")})+e+dZ;var dQ=by.get(d6);if(dQ){if(dZ==="duplex"){var d7=by.get(d6+"setter");dY.setter=d7.apply(d7,dY.args)}return dY.getter=dQ}if(!dS.length){dS.push("fix"+dT)}if(dZ==="duplex"){var dV={};dS.forEach(function(ea){var d9=ea.split("=");dV[d9[0].trim()]=d9[1].trim()});e=e.replace(/[\$\w]+/,function(d9){return dV[d9]?dV[d9]:d9});var d3=Function.apply(k,dU.concat("'use strict';return function(vvv){"+e+" = vvv\n}\n"));by.put(d6+"setter",d3);dY.setter=d3.apply(d3,dY.args)}if(dZ==="on"){if(e.indexOf("(")===-1){e+=".call(this, $event)"}else{e=e.replace("(",".call(this,")}dU.push("$event");e="\nreturn "+e+";";var d2=e.lastIndexOf("\nreturn");var d0=e.slice(0,d2);var dX=e.slice(d2);e=d0+"\n"+dX}else{e="\nreturn "+e+";"}dQ=Function.apply(k,dU.concat("'use strict';\nvar "+dS.join(",\n")+e));return by.put(d6,dQ)}function aC(ap){var e=am.test(ap);if(e){var dQ=c9(ap);if(dQ.length===1){return dQ[0].expr}return dQ.map(function(dR){return dR.type?"("+dR.expr+")":ay(dR.expr)}).join(" + ")}else{return ap}}function dx(dQ,ap,dR){avalon.log("parseExprProxy方法即将被废弃");var e=dR.evaluator=cs(dQ,ap,dR);if(e){dR.handler=al[dR.handlerName||dR.type];avalon.injectBinding(dR)}}var aT=/\)\s*$/;var bV=/\)\s*\|/g;var j=/\|\s*([$\w]+)/g;var cl=/"\s*\["/g;var J=/"\s*\(/g;function p(e){e=e.replace(aT,"").replace(bV,function(){return"],|"}).replace(j,function(dQ,ap){return"["+ay(ap)}).replace(cl,function(){return'"],["'}).replace(J,function(){return'",'})+"]";return Function("return ["+e+"]")()}var bQ={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var ay=ck.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(ap){var dQ=bQ[ap];return typeof dQ==="string"?dQ:"\\u"+("0000"+ap.charCodeAt(0).toString(16)).slice(-4)})+'"'};avalon.scan=function(ap,dQ){ap=ap||dp;var e=dQ?[].concat(dQ):[];bP(ap,e)};var bk=dH("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase());function c(e,dR,dQ){var ap=setTimeout(function(){var dS=e.innerHTML;clearTimeout(ap);if(dS===dQ){dR()}else{c(e,dR,dS)}})}function U(e,ap){var dQ=e.getAttribute("avalonctrl")||ap.$id;e.setAttribute("avalonctrl",dQ);if(ap.$events){ap.$events.expr=e.tagName+'[avalonctrl="'+dQ+'"]'}}var a2=function(dS,ap,e){var dT=dS.getAttribute(ap);if(dT){for(var dQ=0,dR;dR=e[dQ++];){if(dR.hasOwnProperty(dT)&&typeof dR[dT]==="function"){return dR[dT]}}}};function da(dR,e){for(var ap=0,dQ;dQ=dR[ap++];){dQ.vmodels=e;F[dQ.type].init(dQ);avalon.injectBinding(dQ);if(dQ.getter&&dQ.element.nodeType===1){dQ.element.removeAttribute(dQ.name)}}dR.length=0}var bf=cf&&ck.MutationObserver?function(dQ){var ap=dQ.firstChild,dR;while(ap){var e=ap.nextSibling;if(ap.nodeType===3){if(dR){dR.nodeValue+=ap.nodeValue;dQ.removeChild(ap)}else{dR=ap}}else{dR=null}ap=e}}:0;var aG=/^\s*::/;var ba=/ms-(\w+)-?(.*)/;var dC=dH("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");var cU=dH("value,title,alt,checked,selected,disabled,readonly,enabled,href,src");function M(ap,e){return ap.priority-e.priority}function cj(d4,d3,dT){var ap=true;if(d3.length){var dU=P?P(d4):d4.attributes;var d6=[];var d5=[];var dX={};var dY={};for(var d2=0,d1;d1=dU[d2++];){if(d1.specified){if(dT=d1.name.match(ba)){var dR=dT[1];var dS=dT[2]||"";var d0=d1.value;var d7=d1.name;if(dY[d7]){continue}dY[d7]=1;if(dC[dR]){dS=dR;dR="on"}else{if(cU[dR]){if(dR==="enabled"){cK("warning!ms-enabled或ms-attr-enabled已经被废弃");dR="disabled";d0="!("+d0+")"}dS=dR;dR="attr";d7="ms-"+dR+"-"+dS;d5.push([d1.name,d7,d0])}}dX[d7]=d0;if(F[dR]){var dW=d0.replace(aG,"");var dQ=d0!==dW;var dZ={type:dR,param:dS,element:d4,name:d7,expr:dW,oneTime:dQ,uuid:d1.name+"-"+O(d4),priority:(F[dR].priority||dR.charCodeAt(0)*10)+(Number(dS.replace(/\D/g,""))||0)};if(dR==="html"||dR==="text"){var dV=o(d0).filters;dZ.expr=dZ.expr.replace(dV,"");dZ.filters=dV.replace(dK,function(){dZ.type="html";dZ.group=1;return""}).trim()}else{if(dR==="duplex"){var e=d7}else{if(d7==="ms-if-loop"){dZ.priority+=100}}}d6.push(dZ);if(dR==="widget"){d4.msData=d4.msData||dX}}}}}if(d6.length){d6.sort(M);d5.forEach(function(d8){cK("warning!请改用"+d8[1]+"代替"+d8[0]+"!");d4.removeAttribute(d8[0]);d4.setAttribute(d8[1],d8[2])});if(e&&dX["ms-attr-value"]&&d4.nodeName==="INPUT"&&d4.type==="text"){cK("warning!一个控件不能同时定义ms-attr-value与"+e)}for(d2=0;dZ=d6[d2];d2++){dR=dZ.type;if(bw.test(dR)){return da(d6.slice(0,d2+1),d3)}else{if(ap){ap=!dB.test(dR)}}}da(d6,d3)}}if(ap&&!bk[d4.tagName]&&(bZ(d4)?d4.msResolved:1)){bf&&bf(d4);aR(d4,d3)}}var bw=/^if|widget|repeat$/;var dB=/^each|with|html|include$/;if(!aW){var c8=new h(512);var bU=/\s+([^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,co=/^['"]/,bE=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,T=/&amp;/g;var P=function(ap){var dS=ap.outerHTML;if(dS.slice(0,2)==="</"||!dS.trim()){return[]}var dV=dS.match(bE)[0];var dR=[],dQ,dW;var dT=c8.get(dV);if(dT){return dT}while(dQ=bU.exec(dV)){dW=dQ[2];if(dW){dW=(co.test(dW)?dW.slice(1,-1):dW).replace(T,"&")}var e=dQ[1].toLowerCase();match=e.match(ba);var dU={name:e,specified:true,value:dW||""};dR.push(dU)}return c8.put(dV,dR)}}var c2=/^(ms-\S+|data-\S+|on[a-z]+|id|style|class|tabindex)$/;function u(dS){var ap=P?P(dS):dS.attributes;var dQ={};for(var dR=0,e;e=ap[dR++];){if(e.specified&&!c2.test(e.name)){dQ[l(e.name)]=dz(e.value)}}return dQ}function aR(dQ,ap){var e=avalon.slice(dQ.childNodes);a0(e,ap)}function a0(e,ap){for(var dT=0,dQ;dQ=e[dT++];){switch(dQ.nodeType){case 1:var dR=dQ,dV;bP(dQ,ap);if(!dR.msResolved&&dR.parentNode&&dR.parentNode.nodeType===1){var dW=bZ(dR);if(dW){var dU=dR.localName?dR.localName.replace(dW+":",""):dR.nodeName;var dS=dW+":"+l(dU);aq.push({library:dW,element:dR,fullName:dS,widget:dU,vmodels:ap,name:"widget"});if(avalon.components[dS]){avalon.component(dS)}}}if(dQ.msHasEvent){avalon.fireDom(dQ,"datasetchanged",{bubble:dQ.msHasEvent})}break;case 3:if(am.test(dQ.nodeValue)){D(dQ,ap,dT)}break}}}function bP(dT,dR,dS){var ap=dT.getAttribute("ms-skip");if(!dT.getAttributeNode){return cK("warning "+dT.tagName+" no getAttributeNode method")}var e=dT.getAttributeNode("ms-important");var dV=dT.getAttributeNode("ms-controller");if(typeof ap==="string"){return}else{if(dS=e||dV){var dU=avalon.vmodels[dS.value];if(!dU){return}dR=dS===e?[dU]:[dU].concat(dR);var dQ=dS.name;dT.removeAttribute(dQ);avalon(dT).removeClass(dQ);U(dT,dU)}}cj(dT,dR)}var dK=/\|\s*html(?:\b|$)/,bM=/\|\|/g,du=/&lt;/g,aw=/&gt;/g,bh=/(['"])(\\\1|.)+?\1/g;function o(dQ){if(dQ.indexOf("|")>0){var e=dQ.replace(bh,function(dR){return Array(dR.length+1).join("1")});var ap=e.replace(bM,"\u1122\u3344").indexOf("|");if(ap>-1){return{type:"text",filters:dQ.slice(ap).trim(),expr:dQ.slice(0,ap)}}}return{type:"text",expr:dQ,filters:""}}function c9(dR){var dQ=[],ap,dS=0,e;do{e=dR.indexOf(c0,dS);if(e===-1){break}ap=dR.slice(dS,e);if(ap){dQ.push({expr:ap})}dS=e+c0.length;e=dR.indexOf(bC,dS);if(e===-1){break}ap=dR.slice(dS,e);if(ap){dQ.push(o(ap,dS))}dS=e+bC.length}while(1);ap=dR.slice(dS);if(ap){dQ.push({expr:ap})}return dQ}function D(dS,ap,e){var dT=[];tokens=c9(dS.data);if(tokens.length){for(var dQ=0;token=tokens[dQ++];){var dR=cW.createTextNode(token.expr);if(token.type){token.expr=token.expr.replace(aG,function(){token.oneTime=true;return""});token.element=dR;token.filters=token.filters.replace(dK,function(){token.type="html";return""});token.pos=e*1000+dQ;dT.push(token)}cw.appendChild(dR)}dS.parentNode.replaceChild(cw,dS);if(dT.length){da(dT,ap)}}}var cN=function(){this.queue=[]};cN.prototype={render:function(ap){if(!this.locked){this.locked=ap?dp.offsetHeight+10:1;var e=this;avalon.nextTick(function(){e.flush()})}},flush:function(){for(var e=0,ap;ap=this.queue[e++];){ap.update()}this.locked=0;this.queue=[]}};var dF=new cN();var aq=[];var X={$construct:function(){return avalon.mix.apply(null,arguments)},$ready:k,$init:k,$dispose:k,$container:null,$childReady:k,$replace:false,$extends:null,$$template:function(e){return e}};avalon.components={};avalon.component=function(e,dQ){if(dQ){avalon.components[e]=avalon.mix({},X,dQ)}for(var ap=0,dR;dR=aq[ap];ap++){if(e===dR.fullName){aq.splice(ap,1);ap--;(function(ea,dW,ei,dZ){var d6=1;var ee=ea.library;var eg=avalon.libraries[ee]||X;var d4=u(ei);var d8=cV(ea.vmodels,d4.config||ea.fullName);var d7=d4.$id||d4.identifier||bT(dZ);delete d4.config;delete d4.$id;delete d4.identifier;var d1={};var ej=avalon.components[dW.$extends];if(ej){avalon.mix(true,d1,ej);d1=ej.$construct.call(ei,d1,{},{})}else{avalon.mix(true,d1,dW)}d1=avalon.components[e].$construct.call(ei,d1,d8,d4);d1.$refs={};d1.$id=d7;var ek=d1.$slot;var d3=d1.$replace;var eh=d1.$container;var dS=d1.$template;delete d1.$slot;delete d1.$replace;delete d1.$container;delete d1.$template;delete d1.$construct;var ef=avalon.define(d1)||{};ei.msResolved=1;ef.$init(ef,ei);eg.$init(ef,ei);var ec=ei.childNodes;var d5={},eb;for(var d9=0,dV;dV=ec[d9++];){var dX=dV.nodeType===1&&dV.getAttribute("slot")||ek;if(dX){if(d5[dX]){d5[dX].push(dV)}else{d5[dX]=[dV]}}}if(ef.$$template){avalon.clearHTML(ei);ei.innerHTML=ef.$$template(dS)}for(d9 in d5){if(ef.hasOwnProperty(d9)){var ed=d5[d9];if(ed.length){var dT=cw.cloneNode(true);for(var em=0;eb=ed[em++];){dT.appendChild(eb)}ef[d9]=dT}d5[d9]=null}}d5=null;var d2=ei.firstChild;if(d3){d2=ei.firstChild;ei.parentNode.replaceChild(d2,ei);d2.msResolved=1;ei=ea.element=d2}if(eh){eh.appendChild(ei)}avalon.fireDom(ei,"datasetchanged",{library:ee,vm:ef,childReady:1});var d0=0;var dY=avalon.bind(ei,"datasetchanged",function(en){if(en.childReady&&en.library===ee){d6+=en.childReady;if(ef!==en.vm){ef.$refs[en.vm.$id]=en.vm;if(en.childReady===-1){d0++;ef.$childReady(ef,ei,en)}en.stopPropagation()}}if(d6===0){var el=setTimeout(function(){clearTimeout(el);ef.$ready(ef,ei);eg.$ready(ef,ei)},d0?Math.max(d0*17,100):17);avalon.unbind(ei,"datasetchanged",dY);ea.rollback=function(){try{ef.$dispose(ef,ei);eg.$dispose(ef,ei)}catch(eo){}delete avalon.vmodels[ef.$id]};cQ(ea,bG);if(ck.chrome){ei.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(a8)})}}});bP(ei,[ef].concat(ea.vmodels));avalon.vmodels[ef.$id]=ef;if(!ei.childNodes.length){avalon.fireDom(ei,"datasetchanged",{library:ee,vm:ef,childReady:-1})}else{var dU=setTimeout(function(){clearTimeout(dU);avalon.fireDom(ei,"datasetchanged",{library:ee,vm:ef,childReady:-1})},17)}})(dR,avalon.components[e],dR.element,dR.widget)}}};avalon.fireDom=function(dR,ap,dQ){if(cW.createEvent){var e=cW.createEvent("Events");e.initEvent(ap,true,true,dQ);avalon.mix(e,dQ);dR.dispatchEvent(e)}else{if(dp.contains(dR)){e=cW.createEventObject();avalon.mix(e,dQ);dR.fireEvent("on"+ap,e)}}};function cV(dQ,dS){if(dS){for(var dR=0,ap;ap=dQ[dR++];){if(ap.hasOwnProperty(dS)&&typeof ap[dS]==="object"){var e=ap[dS];return e.$model||e;break}}}return{}}avalon.libraries=[];avalon.library=function(e,ap){if(cW.namespaces){cW.namespaces.add(e,"http://www.w3.org/1999/xhtml")}avalon.libraries[e]=avalon.mix({$init:k,$ready:k,$dispose:k},ap||{})};avalon.library("ms");function bZ(ap){if(ap.scopeName&&ap.scopeName!=="HTML"){return ap.scopeName}var dQ=ap.nodeName.toLowerCase();var e=dQ.indexOf(":");if(e>0){return dQ.slice(0,e)}}var dd=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");var A={};dd.replace(b7,function(e){A[e.toLowerCase()]=e});var bu={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};var i=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");i.replace(b7,function(e){bu[e.toLowerCase()]=e});var ao=avalon.directive("attr",{init:function(dQ){dQ.expr=aC(dQ.expr.trim());if(dQ.type==="include"){var ap=dQ.element;c6(ap,dQ);dQ.includeRendered=a2(ap,"data-include-rendered",dQ.vmodels);dQ.includeLoaded=a2(ap,"data-include-loaded",dQ.vmodels);var e=dQ.includeReplace=!!avalon(ap).data("includeReplace");if(avalon(ap).data("includeCache")){dQ.templateCache={}}dQ.start=cW.createComment("ms-include");dQ.end=cW.createComment("ms-include-end");if(e){dQ.element=dQ.end;dQ._element=ap;ap.parentNode.insertBefore(dQ.end,ap);ap.parentNode.insertBefore(dQ.start,dQ.end)}else{ap.insertBefore(dQ.start,ap.firstChild);ap.appendChild(dQ.end)}}},update:function(dT){var dS=this.element;var ap=this.param;if(ap==="href"||ap==="src"){if(typeof dT==="string"&&!dp.hasAttribute){dT=dT.replace(/&amp;/g,"&")}dS[ap]=dT;if(ck.chrome&&dS.tagName==="EMBED"){var dR=dS.parentNode;var dV=document.createComment("ms-src");dR.replaceChild(dV,dS);dR.replaceChild(dS,dV)}}else{var dQ=(dT===false)||(dT===null)||(dT===void 0);if(!aW&&bu[ap]){ap=bu[ap]}var e=A[ap];if(typeof dS[e]==="boolean"){dS[e]=!!dT;if(!dT){dQ=true}}if(dQ){return dS.removeAttribute(ap)}var dU=az.test(dS)?false:(cW.namespaces&&y(dS))?true:ap in dS.cloneNode(false);if(dU){dS[ap]=dT+""}else{dS.setAttribute(ap,dT)}}}});"title,alt,src,value,css,include,href".replace(b7,function(e){F[e]=ao});avalon.directive("class",{init:function(dT){var dR=dT.param;var e=dT.type;if(!dR||isFinite(dR)){dT.param="";F.effect.init(dT)}else{cK("ms-"+e+'-xxx="yyy"这种用法已经过时,请使用ms-'+e+'="xxx:yyy"');dT.expr="["+ay(dR)+","+dT.expr+"]";dT.oldStyle=dR}if(e==="hover"||e==="active"){if(!dT.hasBindEvent){var dQ=dT.element;var ap=avalon(dQ);var dS="mouseenter";var dX="mouseleave";if(e==="active"){dQ.tabIndex=dQ.tabIndex||-1;dS="mousedown";dX="mouseup";var dW=ap.bind("mouseleave",function(){dT.toggleClass&&ap.removeClass(dT.newClass)})}}var dV=ap.bind(dS,function(){dT.toggleClass&&ap.addClass(dT.newClass)});var dU=ap.bind(dX,function(){dT.toggleClass&&ap.removeClass(dT.newClass)});dT.rollback=function(){ap.unbind("mouseleave",dW);ap.unbind(dS,dV);ap.unbind(dX,dU)};dT.hasBindEvent=true}},update:function(e){var dQ=this;var ap=avalon(this.element);dQ.newClass=e[0];dQ.toggleClass=!!e[1];if(dQ.oldClass&&dQ.newClass!==dQ.oldClass){ap.removeClass(dQ.oldClass)}dQ.oldClass=dQ.newClass;if(dQ.type==="class"){if(dQ.oldStyle){ap.toggleClass(dQ.oldStyle,!!e[1])}else{ap.toggleClass(dQ.newClass,dQ.toggleClass)}}}});"hover,active".replace(b7,function(e){F[e]=F["class"]});avalon.directive("css",{init:F.attr.init,update:function(e){avalon(this.element).css(this.param,e)}});avalon.directive("data",{priority:100,update:function(dQ){var ap=this.element;var e="data-"+this.param;if(dQ&&typeof dQ==="object"){ap[e]=dQ}else{ap.setAttribute(e,String(dQ))}}});var b2=/^(?:checkbox|radio)$/;var bl=/^(?:radio|checked)$/;var df=avalon.directive("duplex",{priority:2000,init:function(dW,dX){var dQ=dW.element;var ap=dW.vmodels;dW.changed=a2(dQ,"data-duplex-changed",ap)||k;var dR=[];var dS=dH("string,number,boolean,checked");if(dQ.type==="radio"&&dW.param===""){dW.param="checked"}if(dQ.msData){dQ.msData["ms-duplex"]=dW.expr}dW.param.replace(d,function(d2){if(b2.test(dQ.type)&&bl.test(d2)){if(d2==="radio"){cK("ms-duplex-radio已经更名为ms-duplex-checked")}d2="checked";dW.isChecked=true;dW.xtype="radio"}if(d2==="bool"){d2="boolean";cK("ms-duplex-bool已经更名为ms-duplex-boolean")}else{if(d2==="text"){d2="string";cK("ms-duplex-text已经更名为ms-duplex-string")}}if(dS[d2]){dX=true}avalon.Array.ensure(dR,d2)});if(dQ.type==="radio"){dW.xtype="radio"}if(!dX){dR.push("string")}dW.param=dR.join("-");dW.changed=a2(dQ,"binding-duplex-changed",ap)||k;if(!dW.xtype){dW.xtype=dQ.tagName==="SELECT"?"select":dQ.type==="checkbox"?"checkbox":/^change/.test(dQ.getAttribute("data-duplex-event"))?"change":"input"}dW.bound=function(d3,d4){if(dQ.addEventListener){dQ.addEventListener(d3,d4,false)}else{dQ.attachEvent("on"+d3,d4)}var d2=dW.rollback;dW.rollback=function(){dQ.avalonSetter=null;avalon.unbind(dQ,d3,d4);d2&&d2()}};var d0=false;function d1(d2){dW.changed.call(this,d2,dW)}function e(){d0=true}function dU(){d0=false}var dZ=function(){var d4=dQ.value;if(d0||d4===dW.oldValue){return}var d2=dW.pipe(d4,dW,"get");try{dW.setter(d2);d1.call(dQ,d2)}catch(d3){cK(d3)}};switch(dW.xtype){case"radio":dW.bound("click",function(){var d2=dW.pipe(dQ.value,dW,"get");try{dW.setter(d2);d1.call(dQ,d2)}catch(d3){cK(d3)}});break;case"checkbox":dW.bound(aW?"change":"click",function(){var d4=dQ.checked?"ensure":"remove";var d3=dW.getter.apply(0,dW.vmodels);if(!Array.isArray(d3)){cK("ms-duplex应用于checkbox上要对应一个数组");d3=[d3]}var d2=dW.pipe(dQ.value,dW,"get");avalon.Array[d4](d3,d2);d1.call(dQ,d3)});break;case"change":dW.bound("change",dZ);break;case"input":if(!cf){dW.bound("input",dZ);dW.bound("compositionstart",e);dW.bound("compositionend",dU);dW.bound("DOMAutoComplete",dZ)}else{if(cf>8){dW.bound("input",dZ)}else{dW.bound("propertychange",function(d2){if(d2.propertyName==="value"){dZ()}})}dW.bound("dragend",function(){setTimeout(function(){dZ()},17)})}break;case"select":dW.bound("change",function(){var d3=avalon(dQ).val();if(Array.isArray(d3)){d3=d3.map(function(d4){return dW.pipe(d4,dW,"get")})}else{d3=dW.pipe(d3,dW,"get")}if(d3+""!==dW.oldValue){try{dW.setter(d3);d1.call(dQ,d3)}catch(d2){cK(d2)}}});break}if(dW.xtype==="input"&&/^(text|password|hidden)/.test(dQ.type)){dQ.avalonSetter=dZ;bt(function(){if(dp.contains(dQ)){if(dW.oldValue!==dQ.value){dZ()}}else{if(!dQ.msRetain){return false}}})}for(var dT in avalon.vmodels){var dY=avalon.vmodels[dT];dY.$fire("avalon-ms-duplex-init",dW)}var dV=dW.pipe||(dW.pipe=bp);dV(null,dW,"init")},update:function(ap){var e=this.element,dR=this,dQ;switch(this.xtype){case"input":case"change":dQ=this.pipe(ap,this,"set")+"";if(dQ!==this.oldValue){e.value=this.oldValue=dQ}break;case"radio":dQ=dR.isChecked?!!ap:ap+""===e.value;if(cf===6){setTimeout(function(){e.defaultChecked=dQ;e.checked=dQ},31)}else{e.checked=dQ}break;case"checkbox":var dS=[].concat(ap);dQ=this.pipe(e.value,this,"get");e.checked=dS.indexOf(dQ)>-1;break;case"select":dR._value=ap;e.msHasEvent="selectDuplex";avalon.bind(e,"datasetchanged",function(dV){if(dV.bubble==="selectDuplex"){var dT=dR._value;var dU=Array.isArray(dT)?dT.map(String):dT+"";avalon(e).val(dU);e.oldValue=dU+"";dR.changed.call(e,dU)}});break}if(dR.xtype!=="select"){dR.changed.call(e,dQ)}}});if(cf){avalon.bind(cW,"selectionchange",function(dQ){var ap=cW.activeElement;if(ap&&typeof ap.avalonSetter==="function"){ap.avalonSetter()}})}function af(e){return e==null?"":e}avalon.duplexHooks={checked:{get:function(ap,e){return !e.oldValue}},string:{get:function(e){return e},set:af},"boolean":{get:function(e){return e==="true"},set:af},number:{get:function(dR,dQ){var ap=parseFloat(dR+"");if(-dR===-ap){return ap}var e=/strong|medium|weak/.exec(dQ.element.getAttribute("data-duplex-number"))||["medium"];switch(e[0]){case"strong":return 0;case"medium":return dR===""?"":0;case"weak":return dR}},set:af}};function bp(dQ,ap,e){ap.param.replace(d,function(dR){var dS=avalon.duplexHooks[dR];if(dS&&typeof dS[e]==="function"){dQ=dS[e](dQ,ap)}});return dQ}var N,c7=[];avalon.tick=function(e){if(c7.push(e)===1){N=setInterval(cT,60)}};function cT(){for(var ap=c7.length-1;ap>=0;ap--){var e=c7[ap];if(e()===false){c7.splice(ap,1)}}if(!c7.length){clearInterval(N)}}var bt=k;new function(){try{var dQ={};var dU=HTMLInputElement.prototype;var dS=HTMLTextAreaElement.prototype;function ap(e){dQ[this.tagName].call(this,e);if((typeof this.avalonSetter==="function")&&this.oldValue!==e){this.avalonSetter()}}var dT=HTMLInputElement.prototype;Object.getOwnPropertyNames(dT);dQ.INPUT=Object.getOwnPropertyDescriptor(dU,"value").set;Object.defineProperty(dU,"value",{set:ap});dQ.TEXTAREA=Object.getOwnPropertyDescriptor(dS,"value").set;Object.defineProperty(dS,"value",{set:ap})}catch(dR){bt=avalon.tick}};avalon.directive("effect",{priority:5,init:function(dS){var dR=dS.expr,dQ,ap;var e=dR.replace(aP,function(dT){return dT.replace(/./g,"0")}).indexOf(":");if(e===-1){dQ=dR;ap=true}else{dQ=dR.slice(0,e);ap=dR.slice(e+1)}if(!am.test(dR)){dQ=ay(dQ)}else{dQ=aC(dQ)}dS.expr="["+dQ+","+ap+"]"},update:function(e){var ap=e[0];var dS=this.element;if(dS.getAttribute("data-effect-name")===ap){return}else{dS.removeAttribute("data-effect-driver")}var dU=dS.style;var dR=ck.getComputedStyle?ck.getComputedStyle(dS):null;var dQ=false;if(dR&&(bY||W)){var dT=dU[cS]||dR[cS];if(dT&&dT!=="0s"){dS.setAttribute("data-effect-driver","t");dQ=true}if(!dQ){dT=dU[aS]||dR[aS];if(dT&&dT!=="0s"){dS.setAttribute("data-effect-driver","a");dQ=true}}}if(!dQ){if(avalon.effects[ap]){dS.setAttribute("data-effect-driver","j");dQ=true}}if(dQ){dS.setAttribute("data-effect-name",ap)}}});avalon.effects={};avalon.effect=function(e,ap){avalon.effects[e]=ap};var bY=false;var W=false;var K;var cD;var cS=avalon.cssName("transition-duration");var aS=avalon.cssName("animation-duration");new function(){var dS={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"};var dT;for(var dR in dS){if(ck[dR]){dT=dS[dR];break}try{var dQ=document.createEvent(dR);dT=dS[dR];break}catch(dU){}}if(typeof dT==="string"){bY=true;K=dT}dS={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};var ap;for(dR in dS){if(ck[dR]){ap=dS[dR];break}}if(typeof ap==="string"){bY=true;cD=ap}}();var m=[];function dk(dQ,dR){if(!dQ||dQ.nodeType!==1){return null}if(dR){var ap=dR.effectName;var dS=dR.effectDriver}else{ap=dQ.getAttribute("data-effect-name");dS=dQ.getAttribute("data-effect-driver")}if(!ap||!dS){return null}var e=m.pop()||new a9();e.el=dQ;e.driver=dS;e.useCss=dS!=="j";if(e.useCss){dR&&avalon(dQ).addClass(dR.effectClass);e.cssEvent=dS==="t"?K:cD}e.name=ap;e.callbacks=avalon.effects[ap]||{};return e}function c6(dQ,dR){var e=dQ.getAttribute("data-effect-name");if(e){dR.effectName=e;dR.effectDriver=dQ.getAttribute("data-effect-driver");var ap=+dQ.getAttribute("data-effect-stagger");dR.effectLeaveStagger=+dQ.getAttribute("data-effect-leave-stagger")||ap;dR.effectEnterStagger=+dQ.getAttribute("data-effect-enter-stagger")||ap;dR.effectClass=dQ.className||NaN}}function R(e){return e.replace(/^[\S]/g,function(ap){return ap.toUpperCase()})}var dq=new cN();function a9(){}a9.prototype={contrustor:a9,enterClass:function(){return ax(this,"enter")},leaveClass:function(){return ax(this,"leave")},actionFun:function(e,dU,dV){if(document.hidden){return}var dS=this;var dR=dS.el;var dQ=e==="leave";e=dQ?"leave":"enter";var dT=dQ?"enter":"leave";aZ(dS,"abort"+R(dT));aZ(dS,"before"+R(e));if(!dQ){dU(dR)}var ap=function(dW){dR.removeEventListener(dS.cssEvent,dS.cssCallback);if(dQ){dU(dR);avalon(dR).removeClass(dS.cssClass)}else{if(dS.driver==="a"){avalon(dR).removeClass(dS.cssClass)}}if(dW!==true){aZ(dS,"after"+R(e));dV&&dV(dR)}dS.dispose()};if(dS.useCss){if(dS.cssCallback){dS.cssCallback(true)}dS.cssClass=ax(dS,e);dS.cssCallback=ap;dS.update=function(){dR.addEventListener(dS.cssEvent,dS.cssCallback);if(!dQ&&dS.driver==="t"){avalon(dR).removeClass(dS.cssClass)}};avalon(dR).addClass(dS.cssClass);dq.render(true);dq.queue.push(dS)}else{aZ(dS,e,ap)}},enter:function(e,ap){this.actionFun.apply(this,["enter"].concat(avalon.slice(arguments)))},leave:function(e,ap){this.actionFun.apply(this,["leave"].concat(avalon.slice(arguments)))},dispose:function(){this.update=this.cssCallback=null;if(m.unshift(this)>100){m.pop()}}};function ax(e,dQ){var ap=e.callbacks[dQ+"Class"];if(typeof ap==="string"){return ap}if(typeof ap==="function"){return ap()}return e.name+"-"+dQ}function aZ(dQ,ap,e){var dR=dQ.callbacks[ap];if(dR){dR.call(dQ,dQ.el,e)}}var at=function(dR,ap){var e=aa.call(arguments,0);if(typeof e[2]!=="function"){e.splice(2,0,k)}if(typeof e[3]!=="function"){e.splice(3,0,k)}var dT=e[2];var dU=e[3];var dS=e[4];var dQ=dk(dR,dS);if(!dQ){dT();dU();return false}else{var dV=ap?"enter":"leave";dQ[dV](dT,dU)}};avalon.mix(avalon.effect,{apply:at,append:function(ap,e,dR,dQ){return at(ap,1,function(){e.appendChild(ap)},dR,dQ)},before:function(e,dQ,dR,ap){return at(e,1,function(){dQ.parentNode.insertBefore(e,dQ)},dR,ap)},remove:function(ap,e,dR,dQ){return at(ap,0,function(){if(ap.parentNode===e){e.removeChild(ap)}},dR,dQ)}});avalon.directive("html",{update:function(ap){var dU=this;var dS=this.element;var dW=dS.nodeType!==1;var dX=dW?dS.parentNode:dS;if(!dX){return}ap=ap==null?"":ap;if(dS.nodeType===3){var dQ=bT("html");dX.insertBefore(cW.createComment(dQ),dS);dU.element=cW.createComment(dQ+":end");dX.replaceChild(dU.element,dS);dS=dU.element}if(typeof ap!=="object"){var dT=avalon.parseHTML(String(ap))}else{if(ap.nodeType===11){dT=ap}else{if(ap.nodeType===1||ap.item){var e=ap.nodeType===1?ap.childNodes:ap.item;dT=cw.cloneNode(true);while(e[0]){dT.appendChild(e[0])}}}}e=avalon.slice(dT.childNodes);if(dW){var dV=dS.nodeValue.slice(0,-4);while(true){var dR=dS.previousSibling;if(!dR||dR.nodeType===8&&dR.nodeValue===dV){break}else{dX.removeChild(dR)}}dX.insertBefore(dT,dS)}else{avalon.clearHTML(dS).appendChild(dT)}a0(e,dU.vmodels)}});avalon.directive("if",{priority:10,update:function(dT){var dZ=this;var dW=this.element;var dR=dZ.stamp=+new Date();var dY;var dS=function(){if(dR!==dZ.stamp){return}dZ.recoverNode=null};if(dZ.recoverNode){dZ.recoverNode()}try{if(!dW.parentNode){return}dY=dW.parentNode}catch(dX){return}if(dT){function dV(){if(dW.getAttribute(dZ.name)){dW.removeAttribute(dZ.name);cj(dW,dZ.vmodels)}dZ.rollback=null}if(dW.nodeType===8){var dQ=dZ.keep;var ap=avalon.effect.apply(dQ,1,function(){if(dR!==dZ.stamp){return}dW.parentNode.replaceChild(dQ,dW);dW=dZ.element=dQ;dV()},dS);ap=ap===false}if(!ap){dV()}}else{if(dW.nodeType===1){var dU=dZ.element=cW.createComment("ms-if"),d0=dW.nextSibling;dZ.recoverNode=function(){dZ.recoverNode=null;if(dU.parentNode!==dY){dY.insertBefore(dU,d0);dZ.keep=dW}};avalon.effect.apply(dW,0,function(){dZ.recoverNode=null;if(dR!==dZ.stamp){return}dW.parentNode.replaceChild(dU,dW);dZ.keep=dW;aH.appendChild(dW);dZ.rollback=function(){if(dW.parentNode===aH){aH.removeChild(dW)}}},dS)}}}});var aV=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/img;var bg=/<noscript.*?>([\s\S]+?)<\/noscript>/im;var aF=function(){return new (ck.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};var a5=avalon.templateCache={};function a4(dR,dT,dQ){var dS=dR.templateCache&&dR.templateCache[dT];if(dS){var ap=cW.createDocumentFragment(),e;while(e=dS.firstChild){ap.appendChild(e)}return ap}return avalon.parseHTML(dQ)}function ae(ap){var dR=cW.createDocumentFragment();for(var dQ=0,e=ap.length;dQ<e;dQ++){dR.appendChild(ap[dQ])}return dR}avalon.directive("include",{init:F.attr.init,update:function(d7){var dV=this;var d0=this.element;var dY=dV.vmodels;var d3=dV.includeRendered;var dZ=dV.effectName&&dV.effectClass;var dQ=dV.templateCache;var e=dV.includeReplace;var dW=dV.includeLoaded;var d2=e?d0.parentNode:d0;var dT=dV._element;dV.recoverNodes=dV.recoverNodes||avalon.noop;var d6=e&&dT.cloneNode();var d1=function(ej){var ea=dV._stamp=+(new Date());if(dW){var ed=dW.apply(d2,[ej].concat(dY));if(typeof ed==="string"){ej=ed}}if(d3){c(d2,function(){d3.call(d2)},NaN)}var ee=dV.includeLastID||"_default";dV.includeLastID=d7;var eg=dQ&&dQ[ee]||cW.createElement(d0.tagName||dV._element.tagName);if(dZ){eg.className=dZ;d2.insertBefore(eg,dV.start)}if(dZ||dQ){(dQ||{})[ee]=eg;var ei=dV.recoverNodes();if(ei){d2.insertBefore(ei,dV.end)}while(true){var eb=dV.start.nextSibling;if(eb&&eb!==eg&&eb!==dV.end){eg.appendChild(eb)}else{break}}}avalon.effect.remove(eg,d2,function(){if(dQ){if(ea===dV._stamp){aH.appendChild(eg)}eg.setAttribute("sb",ee)}},dV);var ec=d2,eh=avalon.noop,d9=avalon.noop;var ef=a4(dV,d7,ej);var d8=avalon.slice(ef.childNodes);if(e&&dZ){ec=dT;ec.innerHTML="";ec.setAttribute("ms-skip","true");d2.insertBefore(ec,dV.end.nextSibling);eh=function(){ec.insertBefore(ef,null)};d9=function(){dV.recoverNodes=avalon.noop;if(ea===dV._stamp){ef=ae(d8);d2.insertBefore(ef,dV.end);a0(d8,dY)}if(ec.parentNode===d2){d2.removeChild(ec)}};dV.recoverNodes=function(){dV.recoverNodes=avalon.noop;return ae(d8)}}else{eh=function(){d2.insertBefore(ef,dV.end);a0(d8,dY)}}avalon.effect.apply(ec,"enter",eh,d9)};if(dV.param==="src"){if(typeof a5[d7]==="string"){avalon.nextTick(function(){d1(a5[d7])})}else{if(Array.isArray(a5[d7])){a5[d7].push(d1)}else{var dS=aF();dS.onreadystatechange=function(){if(dS.readyState===4){var d9=dS.status;if(d9>=200&&d9<300||d9===304||d9===1223){var eb=dS.responseText;for(var ea=0,d8;d8=a5[d7][ea++];){d8(eb)}a5[d7]=eb}}};a5[d7]=[d1];dS.open("GET",d7,true);if("withCredentials" in dS){dS.withCredentials=true}dS.setRequestHeader("X-Requested-With","XMLHttpRequest");dS.send(null)}}}else{var ap=d7&&d7.nodeType===1?d7:cW.getElementById(d7);if(ap){if(ap.tagName==="NOSCRIPT"&&!(ap.innerHTML||ap.fixIE78)){dS=aF();dS.open("GET",location,false);dS.send(null);var d4=cW.getElementsByTagName("noscript");var dR=(dS.responseText||"").match(aV)||[];var dU=dR.length;for(var dX=0;dX<dU;dX++){var d5=d4[dX];if(d5){d5.style.display="none";d5.fixIE78=(dR[dX].match(bg)||["","&nbsp;"])[1]}}}avalon.nextTick(function(){d1(ap.fixIE78||ap.value||ap.innerText||ap.innerHTML)})}}}});var bR=/\(([^)]*)\)/;var E=avalon.directive("on",{priority:3000,init:function(dR){var dQ=dR.expr;dR.type="on";var ap=dR.param.replace(/-\d+$/,"");if(typeof E[ap+"Hook"]==="function"){E[ap+"Hook"](dR)}if(dQ.indexOf("(")>0&&dQ.indexOf(")")>-1){var e=(dQ.match(bR)||["",""])[1].trim();if(e===""||e==="$event"){dQ=dQ.replace(bR,"")}}dR.expr=dQ},update:function(dS){var dR=this;var dQ=this.element;dS=function(dU){var dT=dR.getter||k;return dT.apply(this,dR.args.concat(dU))};var e=dR.param.replace(/-\d+$/,"");if(e==="scan"){dS.call(dQ,{type:e})}else{if(typeof dR.specialBind==="function"){dR.specialBind(dQ,dS)}else{var ap=avalon.bind(dQ,e,dS)}}dR.rollback=function(){if(typeof dR.specialUnbind==="function"){dR.specialUnbind()}else{avalon.unbind(dQ,e,ap)}}}});avalon.directive("repeat",{priority:90,init:function(dU){var dV=dU.type;dU.cache={};dU.enterCount=0;var dS=dU.element;if(dS.nodeType===1){dS.removeAttribute(dU.name);c6(dS,dU);dU.param=dU.param||"el";dU.sortedCallback=a2(dS,"data-with-sorted",dU.vmodels);var dR=a2(dS,"data-"+dV+"-rendered",dU.vmodels);var dQ=bT(dV);var ap=cW.createComment(dQ+":start");var dT=dU.element=cW.createComment(dQ+":end");dU.signature=dQ;dU.start=ap;dU.template=cw.cloneNode(false);if(dV==="repeat"){var dW=dS.parentNode;dW.replaceChild(dT,dS);dW.insertBefore(ap,dT);dU.template.appendChild(dS)}else{while(dS.firstChild){dU.template.appendChild(dS.firstChild)}dS.appendChild(ap);dS.appendChild(dT);dW=dS}dU.element=dT;if(dR){var e=avalon.bind(dW,"datasetchanged",function(){dR.apply(dW,dW.args);avalon.unbind(dW,"datasetchanged",e);dW.msRendered=dR})}}},update:function(d7,dZ){var d4=this;var dT=this.xtype;this.enterCount+=1;var ea=!dZ;if(ea){d4.$outer={};var dX="$key";var dW="$val";if(dT==="array"){dX="$first";dW="$last"}for(var eb=0,dY;dY=d4.vmodels[eb++];){if(dY.hasOwnProperty(dX)&&dY.hasOwnProperty(dW)){d4.$outer=dY;break}}}var d2=this.track;if(d4.sortedCallback){var e=d4.sortedCallback.call(dV,d2);if(e&&Array.isArray(e)){d2=e}}var d8="move";d4.$repeat=d7;var ee=[];var ed=ea&&cw.cloneNode(false);var dR=[];var dU=this.param;var d5=avalon.mix({},this.cache);var ec=this.element;var dS=d2.length;var dV=ec.parentNode;for(eb=0;eb<dS;eb++){var d3=d2[eb];var d9=d5[d3];if(!d9){d9=bB(this);if(dT==="array"){d8="add";d9.$id=d3;d9[dU]=d7[eb]}else{d8="append";d9.$key=d3;d9.$val=d7[d3]}this.cache[d3]=d9;var d6=d9.$anchor||(d9.$anchor=ec.cloneNode(false));d6.nodeValue=this.signature;bo(d4,ed,d9,ee,ea&&!d4.effectDriver);bA(d9,d4,dT)}else{ee.push({});d5[d3]=true}if(this.enterCount===1){d9.$active=false;d9.$oldIndex=d9.$index;d9.$active=true;d9.$index=eb}if(dT==="array"){d9.$first=eb===0;d9.$last=eb===dS-1}else{d9.$val=cX(d7[d3])}dR.push(d9)}this.proxies=dR;if(ea&&!d4.effectDriver){dV.insertBefore(ed,ec);ee.forEach(function(ef){a0(ef.nodes||[],ef.vmodels);ef.nodes=ef.vmodels=null})}else{var ap=d4.staggerIndex=0;for(d3 in d5){if(d5[d3]!==true){d8="del";cx(d5[d3].$anchor,d4);b(this.cache,d3,dU);d5[d3]=null}}for(eb=0;eb<dS;eb++){d9=dR[eb];d3=dT==="array"?d9.$id:d9.$key;var d1=dR[eb-1];var dQ=d1?d1.$anchor:d4.start;if(!d5[d3]){(function(eh,ei){var ef=eh.nodes;var eg=eh.vmodels;if(ef){ap=a6(d4.effectEnterStagger,function(){dV.insertBefore(eh.content,ei.nextSibling);a0(ef,eg);cu(ef,1,d4)},ap)}eh.nodes=eh.vmodels=null})(ee[eb],dQ)}else{if(d9.$index!==d9.$oldIndex){(function(ef,eg){ap=a6(d4.effectEnterStagger,function(){var ei=cx(ef.$anchor);var eh=avalon.slice(ei.childNodes);dV.insertBefore(ei,eg.nextSibling);cu(eh,1,d4)},ap)})(d9,dQ)}}}}if(!d7.$track){for(d3 in this.cache){b(this.cache,d3,dU)}}(function(ef){dV.args=ef;if(dV.msRendered){dV.msRendered.apply(dV,ef)}})(aA.newWatch?arguments:[d8]);var d0=setTimeout(function(){clearTimeout(d0);avalon.fireDom(dV,"datasetchanged",{bubble:dV.msHasEvent})});this.enterCount-=1}});"with,each".replace(b7,function(e){F[e]=avalon.mix({},F.repeat,{priority:1400})});function cu(ap,e,dS){for(var dQ=0,dR;dR=ap[dQ++];){if(dR.className===dS.effectClass){avalon.effect.apply(dR,e,k,k,dS)}}}function a6(e,dQ,ap){if(e){setTimeout(dQ,(++ap)*e)}else{dQ()}return ap}function cx(ap,dV){var dU=cw.cloneNode(false);var dW=ap;var dR=dW.nodeValue;var dT=dV&&Math.max(+dV.staggerIndex,0);var e=avalon.slice(dW.parentNode.childNodes);var dS=e.indexOf(dW);while(true){var dQ=e[--dS];if(!dQ||String(dQ.nodeValue).indexOf(dR)===0){break}if(dV&&(dQ.className===dV.effectClass)){ap=dQ;(function(dX){dV.staggerIndex=a6(dV.effectLeaveStagger,function(){avalon.effect.apply(dX,0,k,function(){dU.appendChild(dX)},dV)},dT)})(dQ)}else{dU.insertBefore(dQ,dU.firstChild)}}dU.appendChild(dW);return dU}function bo(dQ,ap,dU,dV,dW){var dS=dQ.template.cloneNode(true);var e=avalon.slice(dS.childNodes);dS.appendChild(dU.$anchor);dW&&ap.appendChild(dS);var dT=[dU].concat(dQ.vmodels);var dR={nodes:e,vmodels:dT,content:dS};dV.push(dR)}function bB(dR){var ap=dR.xtype==="object"?bL:b6;var e=ap(dR);var dQ=e.$anchor||(e.$anchor=dR.element.cloneNode(false));dQ.nodeValue=dR.signature;e.$outer=dR.$outer;return e}var aU=[];function b6(dS,ap){var dR=dS.param||"el";for(var e=0,dT=aU.length;e<dT;e++){var dQ=aU[e];if(dQ&&dQ.hasOwnProperty(dR)){aU.splice(e,1);ap=dQ;break}}if(!ap){ap=cr(dR)}return ap}function cr(dR){var dQ={$outer:{},$index:0,$oldIndex:0,$anchor:null,$first:false,$last:false,$remove:avalon.noop};dQ[dR]=NaN;var ap={$last:1,$first:1,$index:1};ap[dR]=1;var e=cE(dQ,{force:ap});e.$id=bT("$proxy$each");return e}function bA(e,dS,dQ){if(dQ==="array"){e.$remove=function(){dS.$repeat.removeAt(e.$index)};var dR=dS.param;e.$watch(dR,function(dT){var dU=e.$index;dS.$repeat[dU]=dT})}else{e.$watch("$val",function ap(dT){dS.$repeat[e.$key]=dT})}}var aE=[];function bL(){return aE.pop()||be()}function be(){var e=cE({$key:"",$val:NaN,$index:0,$oldIndex:0,$outer:{},$anchor:null},{force:{$key:1,$val:1,$index:1}});e.$id=bT("$proxy$with");return e}function b(dQ,dT,dU){var dS=dQ[dT];if(dS){var e=dS.$id.indexOf("$proxy$each")===0?aU:aE;dS.$outer={};for(var dR in dS.$events){var ap=dS.$events[dR];if(Array.isArray(ap)){ap.length=0;if(dR===dU){dS[dU]=NaN}else{if(dR==="$val"){dS.$val=NaN}}}}if(e.unshift(dS)>aA.maxRepeatSize){e.pop()}delete dQ[dT]}}avalon.directive("text",{update:function(dQ){var ap=this.element;dQ=dQ==null?"":dQ;if(ap.nodeType===3){try{ap.data=dQ}catch(dR){}}else{if("textContent" in ap){ap.textContent=dQ}else{ap.innerText=dQ}}}});function aJ(dR,dQ){var e="_"+dR;if(!aJ[e]){var ap=cW.createElement(dR);dp.appendChild(ap);if(aW){dQ=getComputedStyle(ap,null).display}else{dQ=ap.currentStyle.display}dp.removeChild(ap);aJ[e]=dQ}return aJ[e]}avalon.parseDisplay=aJ;avalon.directive("visible",{init:function(e){},update:function(dR){var ap=this.element,dQ=this,e=dQ.stamp=+new Date();if(dR){ap.style.display="none";avalon.effect.apply(ap,1,function(){if(e!==dQ.stamp){return}var dS=ap.getAttribute("data-effect-driver")||"a";if(/^[atn]/.test(dS)){if(!this.effectName){ap.style.display=""}if(avalon(ap).css("display")==="none"){ap.style.display=aJ(ap.nodeName)}}})}else{avalon.effect.apply(ap,0,function(){if(e!==dQ.stamp){return}ap.style.display="none"})}}});avalon.directive("widget",{priority:110,init:function(dV){var dZ=dV.expr.match(b7);var dS=dV.element;var dR=dV.vmodels;var dW=dZ[0];var dQ=dZ[1];if(!dQ||dQ==="$"){dQ=bT(dW)}var d2=dZ[2]||dW;var dT=avalon.ui[dW];if(typeof dT==="function"){dR=dS.vmodels||dR;for(var dU=0,d1;d1=dR[dU++];){if(d1.hasOwnProperty(d2)&&typeof d1[d2]==="object"){var ap=d1[d2];ap=ap.$model||ap;break}}if(ap){var d4=ap[dW+"Id"];if(typeof d4==="string"){cK("warning!不再支持"+dW+"Id");dQ=d4}}var d0=avalon.getWidgetData(dS,dW);dV.expr=[dW,dQ,d2].join(",");dV[dW+"Id"]=dQ;dV.evaluator=k;dS.msData["ms-widget-id"]=dQ;var d3=dV[dW+"Options"]=avalon.mix({},dT.defaults,ap||{},d0);dS.removeAttribute("ms-widget");var dY=dT(dS,dV,dR)||{};if(dY.$id){avalon.vmodels[dQ]=dY;U(dS,dY);try{dY.$init(function(){avalon.scan(dS,[dY].concat(dR));if(typeof d3.onInit==="function"){d3.onInit.call(dS,dY,d3,dR)}})}catch(dX){}dV.rollback=function(){try{dY.$remove();dY.widgetElement=null}catch(d5){}dS.msData={};delete avalon.vmodels[dY.$id]};cQ(dV,bG);if(ck.chrome){dS.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(a8)})}}else{avalon.scan(dS,dR)}}else{if(dR.length){dS.vmodels=dR}}},update:function(e){}});var bG=[];var z=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim;var ch=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g;var a1=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig;var de={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig};var cI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var bm=/([^\#-~| |!])/g;function n(dS,dQ,dV,dU){dS=(dS+"").replace(/[^0-9+\-Ee.]/g,"");var ap=!isFinite(+dS)?0:+dS,e=!isFinite(+dQ)?3:Math.abs(dQ),dX=dU||",",dR=dV||".",dW="",dT=function(d0,dZ){var dY=Math.pow(10,dZ);return""+(Math.round(d0*dY)/dY).toFixed(dZ)};dW=(e?dT(ap,e):""+Math.round(ap)).split(".");if(dW[0].length>3){dW[0]=dW[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,dX)}if((dW[1]||"").length<e){dW[1]=dW[1]||"";dW[1]+=new Array(e-dW[1].length+1).join("0")}return dW.join(dR)}var bs=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(dQ,ap,e){ap=ap||30;e=typeof e==="string"?e:"...";return dQ.length>ap?dQ.slice(0,ap-e.length)+e:String(dQ)},$filter:function(dR){for(var ap=1,dT=arguments.length;ap<dT;ap++){var dS=arguments[ap];var dQ=avalon.filters[dS.shift()];if(typeof dQ==="function"){var e=[dR].concat(dS);dR=dQ.apply(null,e)}}return dR},camelize:l,sanitize:function(e){return e.replace(z,"").replace(a1,function(dQ,ap){var dR=dQ.toLowerCase().match(/<(\w+)\s/);if(dR){var dS=de[dR[1]];if(dS){dQ=dQ.replace(dS,function(dV,dU,dW){var dT=dW.charAt(0);return dU+"="+dT+"javascript:void(0)"+dT})}}return dQ.replace(ch," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(cI,function(dR){var dQ=dR.charCodeAt(0);var ap=dR.charCodeAt(1);return"&#"+(((dQ-55296)*1024)+(ap-56320)+65536)+";"}).replace(bm,function(ap){return"&#"+ap.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,ap,dQ){return(ap||"\uFFE5")+n(e,isFinite(dQ)?dQ:2)},number:n};new function(){function dR(dY){return parseInt(dY,10)||0}function dS(dZ,d0,dY){var d1="";if(dZ<0){d1="-";dZ=-dZ}dZ=""+dZ;while(dZ.length<d0){dZ="0"+dZ}if(dY){dZ=dZ.substr(dZ.length-d0)}return d1+dZ}function dV(dZ,d0,d1,dY){return function(d2){var d3=d2["get"+dZ]();if(d1>0||d3>-d1){d3+=d1}if(d3===0&&d1===-12){d3=12}return dS(d3,d0,dY)}}function ap(dZ,dY){return function(d2,d0){var d3=d2["get"+dZ]();var d1=(dY?("SHORT"+dZ):dZ).toUpperCase();return d0[d1][d3]}}function dX(dZ){var dY=-1*dZ.getTimezoneOffset();var d0=(dY>=0)?"+":"";d0+=dS(Math[dY>0?"floor":"ceil"](dY/60),2)+dS(Math.abs(dY%60),2);return d0}function dU(dZ,dY){return dZ.getHours()<12?dY.AMPMS[0]:dY.AMPMS[1]}var dT={yyyy:dV("FullYear",4),yy:dV("FullYear",2,0,true),y:dV("FullYear",1),MMMM:ap("Month"),MMM:ap("Month",true),MM:dV("Month",2,1),M:dV("Month",1,1),dd:dV("Date",2),d:dV("Date",1),HH:dV("Hours",2),H:dV("Hours",1),hh:dV("Hours",2,-12),h:dV("Hours",1,-12),mm:dV("Minutes",2),m:dV("Minutes",1),ss:dV("Seconds",2),s:dV("Seconds",1),sss:dV("Milliseconds",3),EEEE:ap("Day"),EEE:ap("Day",true),a:dU,Z:dX};var e=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/;var dQ=/^\/Date\((\d+)\)\/$/;bs.date=function(dZ,d7){var eb=bs.date.locate,d9="",d1=[],d6,d2;d7=d7||"mediumDate";d7=eb[d7]||d7;if(typeof dZ==="string"){if(/^\d+$/.test(dZ)){dZ=dR(dZ)}else{if(dQ.test(dZ)){dZ=+RegExp.$1}else{var d0=dZ.trim();var dY=[0,0,0,0,0,0,0];var ea=new Date(0);d0=d0.replace(/^(\d+)\D(\d+)\D(\d+)/,function(ee,ed,ec,eg){var ef=eg.length===4?[eg,ed,ec]:[ed,ec,eg];dY[0]=dR(ef[0]);dY[1]=dR(ef[1])-1;dY[2]=dR(ef[2]);return""});var d4=ea.setFullYear;var d8=ea.setHours;d0=d0.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(ee,ed,ec,eg,ef){dY[3]=dR(ed);dY[4]=dR(ec);dY[5]=dR(eg);if(ef){dY[6]=Math.round(parseFloat("0."+ef)*1000)}return""});var d5=0;var d3=0;d0=d0.replace(/Z|([+-])(\d\d):?(\d\d)/,function(ee,ec,ef,ed){d4=ea.setUTCFullYear;d8=ea.setUTCHours;if(ec){d5=dR(ec+ef);d3=dR(ec+ed)}return""});dY[3]-=d5;dY[4]-=d3;d4.apply(ea,dY.slice(0,3));d8.apply(ea,dY.slice(3));dZ=ea}}}if(typeof dZ==="number"){dZ=new Date(dZ)}if(avalon.type(dZ)!=="date"){return}while(d7){d2=e.exec(d7);if(d2){d1=d1.concat(d2.slice(1));d7=d1.pop()}else{d1.push(d7);d7=null}}d1.forEach(function(ec){d6=dT[ec];d9+=d6?d6(dZ,eb):ec.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return d9};var dW={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{"0":"周日","1":"周一","2":"周二","3":"周三","4":"周四","5":"周五","6":"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};dW.SHORTMONTH=dW.MONTH;bs.date.locate=dW};var aN=[],aj;var ak=function(e){aj=true;if(q){modules["domReady!"].state=4;q.checkDeps()}while(e=aN.shift()){e(avalon)}};function bW(){try{dp.doScroll("left");ak()}catch(ap){setTimeout(bW)}}if(cW.readyState==="complete"){setTimeout(ak)}else{if(aW){cW.addEventListener("DOMContentLoaded",ak)}else{cW.attachEvent("onreadystatechange",function(){if(cW.readyState==="complete"){ak()}});try{var ai=ck.frameElement===null}catch(cy){}if(dp.doScroll&&ai&&ck.external){bW()}}}avalon.bind(ck,"load",ak);avalon.ready=function(e){if(!aj){aN.push(e)}else{e(avalon)}};avalon.config({loader:true});avalon.ready(function(){avalon.scan(cW.body)});if(typeof define==="function"&&define.amd){define("avalon",[],function(){return avalon})}var aI=ck.avalon;avalon.noConflict=function(e){if(e&&ck.avalon===avalon){ck.avalon=aI}return avalon};if(bc===void 0){ck.avalon=avalon}return avalon}));