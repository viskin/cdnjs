!function(b){var a=function(g,f,d){this.parentEl="body";this.element=b(g);var e='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>';this.parentEl=(typeof f=="object"&&f.parentEl&&b(f.parentEl))||b(this.parentEl);this.container=b(e).appendTo(this.parentEl);if(typeof f!="object"){f={}}this.setOptions(f,d);var h=this.container;b.each(this.buttonClasses,function(c,i){h.find("button").addClass(i)});this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel);this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel);if(this.applyClass.length){this.container.find(".applyBtn").addClass(this.applyClass)}if(this.cancelClass.length){this.container.find(".cancelBtn").addClass(this.cancelClass)}this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.on("mousedown",b.proxy(this.mousedown,this));this.container.find(".calendar").on("click",".prev",b.proxy(this.clickPrev,this)).on("click",".next",b.proxy(this.clickNext,this)).on("click","td.available",b.proxy(this.clickDate,this)).on("mouseenter","td.available",b.proxy(this.enterDate,this)).on("mouseleave","td.available",b.proxy(this.updateFormInputs,this)).on("change","select.yearselect",b.proxy(this.updateMonthYear,this)).on("change","select.monthselect",b.proxy(this.updateMonthYear,this)).on("change","select.hourselect,select.minuteselect,select.ampmselect",b.proxy(this.updateTime,this));this.container.find(".ranges").on("click","button.applyBtn",b.proxy(this.clickApply,this)).on("click","button.cancelBtn",b.proxy(this.clickCancel,this)).on("click",".daterangepicker_start_input,.daterangepicker_end_input",b.proxy(this.showCalendars,this)).on("click","li",b.proxy(this.clickRange,this)).on("mouseenter","li",b.proxy(this.enterRange,this)).on("mouseleave","li",b.proxy(this.updateFormInputs,this));if(this.element.is("input")){this.element.on({"click.daterangepicker":b.proxy(this.show,this),"focus.daterangepicker":b.proxy(this.show,this),"keyup.daterangepicker":b.proxy(this.updateFromControl,this)})}else{this.element.on("click.daterangepicker",b.proxy(this.show,this))}};a.prototype={constructor:a,setOptions:function(m,l){this.startDate=moment().startOf("day");this.endDate=moment().startOf("day");this.minDate=false;this.maxDate=false;this.dateLimit=false;this.showDropdowns=false;this.showWeekNumbers=false;this.timePicker=false;this.timePickerIncrement=30;this.timePicker12Hour=true;this.singleDatePicker=false;this.ranges={};this.opens="right";if(this.element.hasClass("pull-right")){this.opens="left"}this.buttonClasses=["btn","btn-small"];this.applyClass="btn-success";this.cancelClass="btn-default";this.format="MM/DD/YYYY";this.separator=" - ";this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment()._lang._weekdaysMin.slice(),monthNames:moment()._lang._monthsShort.slice(),firstDay:0};this.cb=function(){};if(typeof m.format=="string"){this.format=m.format}if(typeof m.separator=="string"){this.separator=m.separator}if(typeof m.startDate=="string"){this.startDate=moment(m.startDate,this.format)}if(typeof m.endDate=="string"){this.endDate=moment(m.endDate,this.format)}if(typeof m.minDate=="string"){this.minDate=moment(m.minDate,this.format)}if(typeof m.maxDate=="string"){this.maxDate=moment(m.maxDate,this.format)}if(typeof m.startDate=="object"){this.startDate=moment(m.startDate)}if(typeof m.endDate=="object"){this.endDate=moment(m.endDate)}if(typeof m.minDate=="object"){this.minDate=moment(m.minDate)}if(typeof m.maxDate=="object"){this.maxDate=moment(m.maxDate)}if(typeof m.applyClass=="string"){this.applyClass=m.applyClass}if(typeof m.cancelClass=="string"){this.cancelClass=m.cancelClass}if(typeof m.dateLimit=="object"){this.dateLimit=m.dateLimit}if(typeof m.locale=="object"){if(typeof m.locale.daysOfWeek=="object"){this.locale.daysOfWeek=m.locale.daysOfWeek.slice()}if(typeof m.locale.monthNames=="object"){this.locale.monthNames=m.locale.monthNames.slice()}if(typeof m.locale.firstDay=="number"){this.locale.firstDay=m.locale.firstDay;var g=m.locale.firstDay;while(g>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());g--}}if(typeof m.locale.applyLabel=="string"){this.locale.applyLabel=m.locale.applyLabel}if(typeof m.locale.cancelLabel=="string"){this.locale.cancelLabel=m.locale.cancelLabel}if(typeof m.locale.fromLabel=="string"){this.locale.fromLabel=m.locale.fromLabel}if(typeof m.locale.toLabel=="string"){this.locale.toLabel=m.locale.toLabel}if(typeof m.locale.weekLabel=="string"){this.locale.weekLabel=m.locale.weekLabel}if(typeof m.locale.customRangeLabel=="string"){this.locale.customRangeLabel=m.locale.customRangeLabel}}if(typeof m.opens=="string"){this.opens=m.opens}if(typeof m.showWeekNumbers=="boolean"){this.showWeekNumbers=m.showWeekNumbers}if(typeof m.buttonClasses=="string"){this.buttonClasses=[m.buttonClasses]}if(typeof m.buttonClasses=="object"){this.buttonClasses=m.buttonClasses}if(typeof m.showDropdowns=="boolean"){this.showDropdowns=m.showDropdowns}if(typeof m.singleDatePicker=="boolean"){this.singleDatePicker=m.singleDatePicker}if(typeof m.timePicker=="boolean"){this.timePicker=m.timePicker}if(typeof m.timePickerIncrement=="number"){this.timePickerIncrement=m.timePickerIncrement}if(typeof m.timePicker12Hour=="boolean"){this.timePicker12Hour=m.timePicker12Hour}if(typeof m.startDate=="undefined"&&typeof m.endDate=="undefined"){if(b(this.element).is("input[type=text]")){var d=b(this.element).val();var j=d.split(this.separator);var c,f;if(j.length==2){c=moment(j[0],this.format);f=moment(j[1],this.format)}else{if(this.singleDatePicker){c=moment(d,this.format);f=moment(d,this.format)}}if(c!=null&&f!=null){this.startDate=c;this.endDate=f}}}if(typeof m.ranges=="object"){for(var h in m.ranges){var c=moment(m.ranges[h][0]);var f=moment(m.ranges[h][1]);if(this.minDate&&c.isBefore(this.minDate)){c=moment(this.minDate)}if(this.maxDate&&f.isAfter(this.maxDate)){f=moment(this.maxDate)}if((this.minDate&&f.isBefore(this.minDate))||(this.maxDate&&c.isAfter(this.maxDate))){continue}this.ranges[h]=[c,f]}var i="<ul>";for(var h in this.ranges){i+="<li>"+h+"</li>"}i+="<li>"+this.locale.customRangeLabel+"</li>";i+="</ul>";this.container.find(".ranges ul").remove();this.container.find(".ranges").prepend(i)}if(typeof l=="function"){this.cb=l}if(!this.timePicker){this.startDate=this.startDate.startOf("day");this.endDate=this.endDate.startOf("day")}if(this.singleDatePicker){this.opens="right";this.container.find(".calendar.right").show();this.container.find(".calendar.left").hide();this.container.find(".ranges").hide();if(!this.container.find(".calendar.right").hasClass("single")){this.container.find(".calendar.right").addClass("single")}}else{this.container.find(".calendar.right").removeClass("single");this.container.find(".ranges").show()}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]};this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]};if(this.opens=="right"){var e=this.container.find(".calendar.left");var k=this.container.find(".calendar.right");e.removeClass("left").addClass("right");k.removeClass("right").addClass("left")}if(typeof m.ranges=="undefined"&&!this.singleDatePicker){this.container.find(".calendar").show()}this.container.addClass("opens"+this.opens);this.updateView();this.updateCalendars()},setStartDate:function(c){if(typeof c=="string"){this.startDate=moment(c,this.format)}if(typeof c=="object"){this.startDate=moment(c)}if(!this.timePicker){this.startDate=this.startDate.startOf("day")}this.oldStartDate=this.startDate.clone();this.updateView();this.updateCalendars()},setEndDate:function(c){if(typeof c=="string"){this.endDate=moment(c,this.format)}if(typeof c=="object"){this.endDate=moment(c)}if(!this.timePicker){this.endDate=this.endDate.startOf("day")}this.oldEndDate=this.endDate.clone();this.updateView();this.updateCalendars()},mousedown:function(c){c.stopPropagation()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year());this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format));this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format));if(this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)){this.container.find("button.applyBtn").removeAttr("disabled")}else{this.container.find("button.applyBtn").attr("disabled","disabled")}},updateFromControl:function(){if(!this.element.is("input")){return}if(!this.element.val().length){return}var d=this.element.val().split(this.separator);var e=moment(d[0],this.format);var c=moment(d[1],this.format);if(this.singleDatePicker){e=moment(this.element.val(),this.format);c=e}if(e==null||c==null){return}if(c.isBefore(e)){return}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.startDate=e;this.endDate=c;if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)){this.notify()}this.updateCalendars()},notify:function(){this.updateView();this.cb(this.startDate,this.endDate)},move:function(){var c={top:0,left:0};if(!this.parentEl.is("body")){c={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()}}if(this.opens=="left"){this.container.css({top:this.element.offset().top+this.element.outerHeight()-c.top,right:b(window).width()-this.element.offset().left-this.element.outerWidth()-c.left,left:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})}}else{this.container.css({top:this.element.offset().top+this.element.outerHeight()-c.top,left:this.element.offset().left-c.left,right:"auto"});if(this.container.offset().left+this.container.outerWidth()>b(window).width()){this.container.css({left:"auto",right:0})}}},show:function(c){this.container.show();this.move();if(c){c.stopPropagation();c.preventDefault()}b(document).on("mousedown",b.proxy(this.hide,this));this.element.trigger("show",this)},hide:function(c){this.container.hide();if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)){this.notify()}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();b(document).off("mousedown",this.hide);this.element.trigger("hide",this)},enterRange:function(f){var c=f.target.innerHTML;if(c==this.locale.customRangeLabel){this.updateView()}else{var d=this.ranges[c];this.container.find("input[name=daterangepicker_start]").val(d[0].format(this.format));this.container.find("input[name=daterangepicker_end]").val(d[1].format(this.format))}},showCalendars:function(){this.container.find(".calendar").show();this.move()},updateInputText:function(){if(this.element.is("input")&&!this.singleDatePicker){this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))}else{if(this.element.is("input")){this.element.val(this.startDate.format(this.format))}}},clickRange:function(f){var c=f.target.innerHTML;if(c==this.locale.customRangeLabel){this.showCalendars()}else{var d=this.ranges[c];this.startDate=d[0];this.endDate=d[1];if(!this.timePicker){this.startDate.startOf("day");this.endDate.startOf("day")}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateCalendars();this.updateInputText();this.container.find(".calendar").hide();this.hide();this.element.trigger("apply",this)}},clickPrev:function(d){var c=b(d.target).parents(".calendar");if(c.hasClass("left")){this.leftCalendar.month.subtract("month",1)}else{this.rightCalendar.month.subtract("month",1)}this.updateCalendars()},clickNext:function(d){var c=b(d.target).parents(".calendar");if(c.hasClass("left")){this.leftCalendar.month.add("month",1)}else{this.rightCalendar.month.add("month",1)}this.updateCalendars()},enterDate:function(f){var h=b(f.target).attr("data-title");var g=h.substr(1,1);var c=h.substr(3,1);var d=b(f.target).parents(".calendar");if(d.hasClass("left")){this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[g][c].format(this.format))}else{this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[g][c].format(this.format))}},clickDate:function(j){var k=b(j.target).attr("data-title");var l=k.substr(1,1);var g=k.substr(3,1);var d=b(j.target).parents(".calendar");if(d.hasClass("left")){var f=this.leftCalendar.calendar[l][g];var i=this.endDate;if(typeof this.dateLimit=="object"){var c=moment(f).add(this.dateLimit).startOf("day");if(i.isAfter(c)){i=c}}}else{var f=this.startDate;var i=this.rightCalendar.calendar[l][g];if(typeof this.dateLimit=="object"){var h=moment(i).subtract(this.dateLimit).startOf("day");if(f.isBefore(h)){f=h}}}if(this.singleDatePicker&&d.hasClass("left")){i=f}else{if(this.singleDatePicker&&d.hasClass("right")){f=i}}d.find("td").removeClass("active");if(f.isSame(i)||f.isBefore(i)){b(j.target).addClass("active");this.startDate=f;this.endDate=i}else{if(f.isAfter(i)){b(j.target).addClass("active");this.startDate=f;this.endDate=moment(f).add("day",1).startOf("day")}}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year());this.updateCalendars();if(this.singleDatePicker){this.clickApply()}},clickApply:function(c){this.updateInputText();this.hide();this.element.trigger("apply",this)},clickCancel:function(c){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.updateView();this.updateCalendars();this.hide();this.element.trigger("cancel",this)},updateMonthYear:function(g){var h=b(g.target).closest(".calendar").hasClass("left");var f=this.container.find(".calendar.left");if(!h){f=this.container.find(".calendar.right")}var d=parseInt(f.find(".monthselect").val(),10);var c=f.find(".yearselect").val();if(h){this.leftCalendar.month.month(d).year(c)}else{this.rightCalendar.month.month(d).year(c)}this.updateCalendars()},updateTime:function(h){var j=b(h.target).closest(".calendar").hasClass("left");var g=this.container.find(".calendar.left");if(!j){g=this.container.find(".calendar.right")}var d=parseInt(g.find(".hourselect").val());var i=parseInt(g.find(".minuteselect").val());if(this.timePicker12Hour){var f=g.find(".ampmselect").val();if(f=="PM"&&d<12){d+=12}if(f=="AM"&&d==12){d=0}}if(j){var k=this.startDate.clone();k.hour(d);k.minute(i);this.startDate=k;this.leftCalendar.month.hour(d).minute(i)}else{var c=this.endDate.clone();c.hour(d);c.minute(i);this.endDate=c;this.rightCalendar.month.hour(d).minute(i)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left");this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right");this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate));this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate));this.container.find(".ranges li").removeClass("active");var c=true;var e=0;for(var d in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[d][0])&&this.endDate.isSame(this.ranges[d][1])){c=false;this.container.find(".ranges li:eq("+e+")").addClass("active")}}else{if(this.startDate.format("YYYY-MM-DD")==this.ranges[d][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[d][1].format("YYYY-MM-DD")){c=false;this.container.find(".ranges li:eq("+e+")").addClass("active")}}e++}if(c){this.container.find(".ranges li:last").addClass("active")}},buildCalendar:function(o,q,h,g,p){var c=moment([q,o,1]);var m=moment(c).subtract("month",1).month();var l=moment(c).subtract("month",1).year();var r=moment([l,m]).daysInMonth();var e=c.day();var k=[];for(var j=0;j<6;j++){k[j]=[]}var n=r-e+this.locale.firstDay+1;if(n>r){n-=7}if(e==this.locale.firstDay){n=r-6}var f=moment([l,m,n,12,g]);for(var j=0,d=0,s=0;j<42;j++,d++,f=moment(f).add("hour",24)){if(j>0&&d%7==0){d=0;s++}k[s][d]=f.clone().hour(h);f.hour(12)}return k},renderDropdowns:function(h,g,c){var k=h.month();var f='<select class="monthselect">';var d=false;var p=false;for(var e=0;e<12;e++){if((!d||e>=g.month())&&(!p||e<=c.month())){f+="<option value='"+e+"'"+(e===k?" selected='selected'":"")+">"+this.locale.monthNames[e]+"</option>"}}f+="</select>";var j=h.year();var i=(c&&c.year())||(j+5);var o=(g&&g.year())||(j-50);var n='<select class="yearselect">';for(var l=o;l<=i;l++){n+='<option value="'+l+'"'+(l===j?' selected="selected"':"")+">"+l+"</option>"}n+="</select>";return f+n},renderCalendar:function(m,k,j,d){var p='<div class="calendar-date">';p+='<table class="table-condensed">';p+="<thead>";p+="<tr>";if(this.showWeekNumbers){p+="<th></th>"}if(!j||j.isBefore(m[1][1])){p+='<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>'}else{p+="<th></th>"}var f=this.locale.monthNames[m[1][1].month()]+m[1][1].format(" YYYY");if(this.showDropdowns){f=this.renderDropdowns(m[1][1],j,d)}p+='<th colspan="5" class="month">'+f+"</th>";if(!d||d.isAfter(m[1][1])){p+='<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>'}else{p+="<th></th>"}p+="</tr>";p+="<tr>";if(this.showWeekNumbers){p+='<th class="week">'+this.locale.weekLabel+"</th>"}b.each(this.locale.daysOfWeek,function(s,i){p+="<th>"+i+"</th>"});p+="</tr>";p+="</thead>";p+="<tbody>";for(var r=0;r<6;r++){p+="<tr>";if(this.showWeekNumbers){p+='<td class="week">'+m[r][0].week()+"</td>"}for(var g=0;g<7;g++){var o="available ";o+=(m[r][g].month()==m[1][1].month())?"":"off";if((j&&m[r][g].isBefore(j))||(d&&m[r][g].isAfter(d))){o=" off disabled "}else{if(m[r][g].format("YYYY-MM-DD")==k.format("YYYY-MM-DD")){o+=" active ";if(m[r][g].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")){o+=" start-date "}if(m[r][g].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")){o+=" end-date "}}else{if(m[r][g]>=this.startDate&&m[r][g]<=this.endDate){o+=" in-range ";if(m[r][g].isSame(this.startDate)){o+=" start-date "}if(m[r][g].isSame(this.endDate)){o+=" end-date "}}}}var q="r"+r+"c"+g;p+='<td class="'+o.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+q+'">'+m[r][g].date()+"</td>"}p+="</tr>"}p+="</tbody>";p+="</table>";p+="</div>";if(this.timePicker){p+='<div class="calendar-time">';p+='<select class="hourselect">';var e=0;var h=23;var c=k.hour();if(this.timePicker12Hour){e=1;h=12;if(c>=12){c-=12}if(c==0){c=12}}for(var l=e;l<=h;l++){if(l==c){p+='<option value="'+l+'" selected="selected">'+l+"</option>"}else{p+='<option value="'+l+'">'+l+"</option>"}}p+="</select> : ";p+='<select class="minuteselect">';for(var l=0;l<60;l+=this.timePickerIncrement){var n=l;if(n<10){n="0"+n}if(l==k.minute()){p+='<option value="'+l+'" selected="selected">'+n+"</option>"}else{p+='<option value="'+l+'">'+n+"</option>"}}p+="</select> ";if(this.timePicker12Hour){p+='<select class="ampmselect">';if(k.hour()>=12){p+='<option value="AM">AM</option><option value="PM" selected="selected">PM</option>'}else{p+='<option value="AM" selected="selected">AM</option><option value="PM">PM</option>'}p+="</select>"}p+="</div>"}return p},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData("daterangepicker")}};b.fn.daterangepicker=function(d,c){this.each(function(){var e=b(this);if(e.data("daterangepicker")){e.data("daterangepicker").remove()}e.data("daterangepicker",new a(e,d,c))});return this}}(window.jQuery);