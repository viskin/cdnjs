"use strict";function loadStateFromLocalStorage(t,e){function a(){t.__stateLoadedFromLS=!0,e()}if(ls){var o=getLocalStorageKey(t),r=!1;try{var s=JSON.parse(ls.getItem(o));s&&(r=!0,t.setState(s,a))}catch(l){console&&console.warn("Unable to load state for",getDisplayName(t),"from localStorage.")}r||a()}}function getDisplayName(t){return t.displayName||t.constructor.displayName||t.constructor.name}function getLocalStorageKey(t){return t.getLocalStorageKey?t.getLocalStorageKey():t.props.localStorageKey||getDisplayName(t)||"react-localstorage"}function getStateFilterKeys(t){return t.getStateFilterKeys?"string"==typeof t.getStateFilterKeys()?[t.getStateFilterKeys()]:t.getStateFilterKeys():"string"==typeof t.props.stateFilterKeys?[t.props.stateFilterKeys]:t.props.stateFilterKeys}function getSyncState(t,e){var a=getStateFilterKeys(t);if(!a)return e;var o={};return a.forEach(function(t){for(var a in e)e.hasOwnProperty(a)&&t===a&&(o[a]=e[a])}),o}var React=require("react"),warn=require("./lib/warning"),hasLocalStorage="localStorage"in global,ls,testKey;if(hasLocalStorage){testKey="react-localstorage.mixin.test-key";try{ls=global.localStorage,ls.setItem(testKey,"foo"),ls.removeItem(testKey)}catch(e){hasLocalStorage=!1}}process.browser&&warn(hasLocalStorage,"localStorage not found. Component state will not be stored to localStorage.");var Mixin=module.exports={componentWillUpdate:function(t,e){if(hasLocalStorage&&this.__stateLoadedFromLS){var a=getLocalStorageKey(this),o=ls.getItem(a);o&&"production"!==process.env.NODE_ENV&&warn(o===JSON.stringify(getSyncState(this,this.state)),"While component "+getDisplayName(this)+" was saving state to localStorage, the localStorage entry was modified by another actor. This can happen when multiple components are using the same localStorage key. Set the property `localStorageKey` on "+getDisplayName(this)+"."),ls.setItem(a,JSON.stringify(getSyncState(this,e)))}},componentDidMount:function(){if(hasLocalStorage){var t=this;loadStateFromLocalStorage(this,function(){ls.setItem(getLocalStorageKey(t),JSON.stringify(getSyncState(t,t.state)))})}}};