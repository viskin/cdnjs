/*! Gray v1.4.3 https://github.com/karlhorky/gray) | MIT */
/*! Modernizr 2.8.3 (Custom Build) | MIT & BSD */
window.Modernizr=window.Modernizr||function(t,e,i){function r(t){h.cssText=t}function n(t,e){return typeof t===e}var s,o,a,d="2.8.3",l={},g=e.documentElement,u="modernizr",c=e.createElement(u),h=c.style,f=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),p={svg:"http://www.w3.org/2000/svg"},m={},v=[],y=v.slice,w={}.hasOwnProperty;a=n(w,"undefined")||n(w.call,"undefined")?function(t,e){return e in t&&n(t.constructor.prototype[e],"undefined")}:function(t,e){return w.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=y.call(arguments,1),r=function(){if(this instanceof r){var n=function(){};n.prototype=e.prototype;var s=new n,o=e.apply(s,i.concat(y.call(arguments)));return Object(o)===o?o:s}return e.apply(t,i.concat(y.call(arguments)))};return r}),m.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==p.svg};for(var b in m)a(m,b)&&(o=b.toLowerCase(),l[o]=m[b](),v.push((l[o]?"":"no-")+o));return l.addTest=function(t,e){if("object"==typeof t)for(var r in t)a(t,r)&&l.addTest(r,t[r]);else{if(t=t.toLowerCase(),l[t]!==i)return l;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(g.className+=" "+(e?"":"no-")+t),l[t]=e}return l},r(""),c=s=null,l._version=d,l._prefixes=f,l}(this,this.document),Modernizr.addTest("cssfilters",function(){var t=document.createElement("div");return t.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!t.style.length&&(void 0===document.documentMode||document.documentMode>9)}),Modernizr.addTest("svgfilters",function(){var t=!1;try{t=void 0!==typeof SVGFEColorMatrixElement&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(e){}return t}),function(t,e){function i(e,i){var s,o;i=i||{},s=i.classes||{},o=s.fade||n.classes.fade,i.fade=i.fade||e.className.indexOf(o)>-1,this.element=e,this.settings=t.extend({},n,i),this._defaults=n,this._name=r,this.init()}var r="gray",n={fade:!1,classes:{fade:"grayscale-fade"}};t.extend(i.prototype,{init:function(){var e;!Modernizr.cssfilters&&Modernizr.inlinesvg&&Modernizr.svgfilters&&(e=t(this.element),(this.cssFilterDeprecated(e)||this.settings.fade)&&this.switchImage(e))},cssFilterDeprecated:function(t){return"none"===t.css("filter")},elementType:function(t){var e;return e="IMG"===t.prop("tagName")?"Img":"Bg"},pxToNumber:function(t){return t.replace("px","")},getComputedStyle:function(t){var i={},r={};i=e.getComputedStyle(t,null);for(var n=0,s=i.length;s>n;n++){var o=i[n],a=i.getPropertyValue(o);r[o]=a}return r},extractUrl:function(t){var e;return startRegex=/^url\(["']?/,endRegex=/["']?\)$/,e=t.replace(startRegex,"").replace(endRegex,"")},positionToNegativeMargin:function(t){var e,i,r;return e=t.match(/^(-?\d+\S+)/)[0],i=t.match(/\s(-?\d+\S+)$/)[0],r="margin:"+i+" 0 0 "+e},getBgSize:function(e,i){var r,n,s,o,a,d,l;if(r=new Image,r.src=e,"auto"!==i&&"cover"!==i&&"contain"!==i&&"inherit"!==i){var g=t(this.element);n=r.width/r.height,o=parseInt((i.match(/^(\d+)px/)||[0,0])[1]),d=parseInt((i.match(/\s(\d+)px$/)||[0,0])[1]),s=g.height()*n,a=g.width()/n,o=o||s,d=d||a}return l=o||d?{width:o,height:d}:{width:r.width,height:r.height}},getParams:function(t){var e=this.elementType(t);return this["get"+e+"Params"](t)},getImgParams:function(t){var e={svg:{}};e.styles=this.getComputedStyle(t[0]);var i={top:this.pxToNumber(e.styles["padding-top"]),right:this.pxToNumber(e.styles["padding-right"]),bottom:this.pxToNumber(e.styles["padding-bottom"]),left:this.pxToNumber(e.styles["padding-left"])},r={top:this.pxToNumber(e.styles["border-top-width"]),right:this.pxToNumber(e.styles["border-right-width"]),bottom:this.pxToNumber(e.styles["border-bottom-width"]),left:this.pxToNumber(e.styles["border-left-width"])};return e.svg={url:t[0].src,padding:i,borderWidth:r,width:this.pxToNumber(e.styles.width)-i.left-i.right-r.left-r.right,height:this.pxToNumber(e.styles.height)-i.top-i.bottom-r.top-r.bottom,offset:""},e},getBgParams:function(e){var i,r={};return i=this.extractUrl(e.css("background-image")),bgSize=this.getBgSize(i,e.css("background-size")),offset=this.positionToNegativeMargin(e.css("background-position")),r.styles=this.getComputedStyle(e[0]),r.svg=t.extend({url:i},bgSize,{offset:offset}),r},setStyles:function(t,e){return t.display="inline-block",t.overflow=t["overflow-x"]=t["overflow-y"]="hidden",t["background-image"]='url("'+e.url+'")',t["background-size"]=e.width+"px "+e.height+"px",t["background-repeat"]="no-repeat",t["background-position"]=e.padding.left+"px "+e.padding.top+"px",delete t.filter,t},addSVGFilterOnce:function(){$body=t("body"),$body.data("plugin_"+r+"_has_filter")||$body.data("plugin_"+r+"_has_filter","true").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0" style="position:absolute"><defs><filter id="gray"><feColorMatrix type="saturate" values="0"/></filter></defs></svg>')},switchImage:function(e){var i,r,n;i=this.getParams(e),r=this.settings.fade?this.settings.classes.fade:"",n=t('<div class="grayscale grayscale-replaced '+r+'"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+i.svg.width+" "+i.svg.height+'" width="'+i.svg.width+'" height="'+i.svg.height+'" style="'+i.svg.offset+'"><image filter="url(&quot;#gray&quot;)" x="0" y="0" width="'+i.svg.width+'" height="'+i.svg.height+'" preserveAspectRatio="none" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+i.svg.url+'" /></svg></div>'),i.styles=this.setStyles(i.styles,i.svg),n.css(i.styles),this.addSVGFilterOnce(),e.replaceWith(n)}}),t.fn[r]=function(e){return this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new i(this,e))}),this},t(e).on("load",function(){t(".grayscale:not(.grayscale-replaced)")[r]()})}(jQuery,window,document);
