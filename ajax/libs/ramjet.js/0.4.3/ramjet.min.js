!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ramjet=e()}(this,function(){"use strict";function t(e){var n=e.cloneNode(),i=void 0,o=void 0,r=void 0;if(1===e.nodeType)for(i=window.getComputedStyle(e),m.forEach(function(t){n.style[t]=i[t]}),o=e.childNodes.length,r=0;o>r;r+=1)n.appendChild(t(e.childNodes[r]));return n}function e(e){var n=e.namespaceURI===y,i=e.getBoundingClientRect(),o=i.left,r=i.right,a=i.top,s=i.bottom,l=window.getComputedStyle(e),c=t(e),d={node:e,clone:c,isSvg:n,cx:(o+r)/2,cy:(a+s)/2,width:r-o,height:s-a};if(n){var f=e.getScreenCTM();d.transform="matrix("+[f.a,f.b,f.c,f.d,f.e,f.f].join(",")+")",h.appendChild(c)}else{var u=e.offsetParent,m=window.getComputedStyle(u),p=u.getBoundingClientRect();c.style.position="absolute",c.style.top=a-parseInt(l.marginTop,10)-(p.top-parseInt(m.marginTop,10))+"px",c.style.left=o-parseInt(l.marginLeft,10)-(p.left-parseInt(m.marginLeft,10))+"px",d.transform="",e.parentNode.appendChild(c)}return d}function n(t){t.__ramjetOriginalTransition__=t.style.transition,t.style.transition="",t.style.opacity=0}function i(t){t.style.transition="",t.style.opacity=1,t.__ramjetOriginalTransition__&&setTimeout(function(){t.style.transition=t.__ramjetOriginalTransition__})}function o(t,e,n,i,o,r,a,s){var l=t?"translate("+e+" "+n+") scale("+(1+s*r)+" "+(1+s*a)+") translate("+-e+" "+-n+") translate("+s*i+" "+s*o+")":"translate("+s*i+"px,"+s*o+"px) scale("+(1+s*r)+","+(1+s*a)+")";return l}function r(t){return t}function a(t){return Math.pow(t,3)}function s(t){return Math.pow(t-1,3)+1}function l(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}function c(t){var e=document.createElement("style");e.type="text/css";var n=document.getElementsByTagName("head")[0],i=e.styleSheet;return i?i.cssText=t:e.innerHTML=t,n.appendChild(e),function(){return n.removeChild(e)}}function d(t,e,n){var i,o=e.cx-t.cx,a=e.cy-t.cy,s=e.width/t.width-1,l=e.height/t.height-1,c=t.width/e.width-1,d=t.height/e.height-1,f=n.easing||r,u=n.duration/50,m=[],y=[];for(i=0;u>i;i+=1){var h=100*(i/u),v=f(i/u),g=t.cx+o*v,w=t.cy+a*v,b=p(t.isSvg,g,w,o,a,s,l,v)+" "+t.transform,C=p(e.isSvg,g,w,-o,-a,c,d,1-v)+" "+e.transform;m.push(""+h+"% { opacity: "+(1-v)+"; "+x+": "+b+"; }"),y.push(""+h+"% { opacity: "+v+"; "+x+": "+C+"; }")}var S=t.cx+o,T=t.cy+a,k=p(t.isSvg,S,T,o,a,s,l,1)+" "+t.transform,A=p(e.isSvg,S,T,-o,-a,c,d,0)+" "+e.transform;return m.push("100% { opacity: 0; "+x+": "+k+"; }"),y.push("100% { opacity: 1; "+x+": "+A+"; }"),m=m.join("\n"),y=y.join("\n"),{fromKeyframes:m,toKeyframes:y}}var f=["length","parentRule"],u=void 0;u="undefined"!=typeof CSS2Properties?Object.keys(CSS2Properties.prototype):Object.keys(document.createElement("div").style).filter(function(t){return!~f.indexOf(t)});var m=u,y="http://www.w3.org/2000/svg",h=document.createElementNS(y,"svg");h.style.position="fixed",h.style.top=h.style.left="0",h.style.width=h.style.height="100%",h.style.overflow="visible",h.style.pointerEvents="none",h.setAttribute("class","mogrify-svg"),document.body.appendChild(h);var p=o,v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)},g=v,w=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},b=function(t,e,n){function i(){var r=Date.now(),y=r-f;if(y>u)return t.clone.parentNode.removeChild(t.clone),e.clone.parentNode.removeChild(e.clone),void(n.done&&n.done());var h=m(y/u);t.clone.style.opacity=1-h,e.clone.style.opacity=h;var v=t.cx+o*h,w=t.cy+a*h,b=p(t.isSvg,v,w,o,a,s,l,h)+" "+t.transform,C=p(e.isSvg,v,w,-o,-a,c,d,1-h)+" "+e.transform;t.isSvg?t.clone.setAttribute("transform",b):t.clone.style.transform=t.clone.style.webkitTransform=b,e.isSvg?e.clone.setAttribute("transform",C):e.clone.style.transform=e.clone.style.webkitTransform=C,g(i)}w(this,b);var o=e.cx-t.cx,a=e.cy-t.cy,s=e.width/t.width-1,l=e.height/t.height-1,c=t.width/e.width-1,d=t.height/e.height-1,f=Date.now(),u=n.duration||400,m=n.easing||r;i()},C=b,S=document.createElement("div"),T=!0,x=void 0,k=void 0,A=void 0,E=void 0,_=void 0,N=void 0,j=void 0,I=void 0;("transform"in S.style||"webkitTransform"in S.style)&&("animation"in S.style||"webkitAnimation"in S.style)?(T=!0,x="transform"in S.style?"transform":"-webkit-transform","animation"in S.style?(k="@keyframes",A="animationDirection",E="animationDuration",_="animationIterationCount",N="animationName",j="animationTimingFunction",I="animationend"):(k="@-webkit-keyframes",A="webkitAnimationDirection",E="webkitAnimationDuration",_="webkitAnimationIterationCount",N="webkitAnimationName",j="webkitAnimationTimingFunction",I="webkitAnimationEnd")):T=!1;var M=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},O=function(t,e,n){function i(){m&&y&&(t.clone.parentNode.removeChild(t.clone),e.clone.parentNode.removeChild(e.clone),n.done&&n.done(),u())}M(this,O);var o=d(t,e,n),r=o.fromKeyframes,a=o.toKeyframes,s="_"+~~(1e6*Math.random()),l="_"+~~(1e6*Math.random()),f=""+k+" "+s+" { "+r+" } "+k+" "+l+" { "+a+" }",u=c(f);t.clone.style[A]="alternate",t.clone.style[E]=""+n.duration/1e3+"s",t.clone.style[_]=1,t.clone.style[N]=s,t.clone.style[j]="linear",e.clone.style[A]="alternate",e.clone.style[E]=""+n.duration/1e3+"s",e.clone.style[_]=1,e.clone.style[N]=l,e.clone.style[j]="linear";var m=void 0,y=void 0;t.clone.addEventListener(I,function(){m=!0,i()}),e.clone.addEventListener(I,function(){y=!0,i()})},D=O,L={transform:function(t,n){var i=void 0===arguments[2]?{}:arguments[2];"function"==typeof i&&(i={done:i}),"duration"in i||(i.duration=400);var o=e(t),r=e(n);return!T||i.useTimer||o.isSvg||r.isSvg?new C(o,r,i):new D(o,r,i)},hide:function(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];e.forEach(n)},show:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];e.forEach(i)},linear:r,easeIn:a,easeOut:s,easeInOut:l};return L});
