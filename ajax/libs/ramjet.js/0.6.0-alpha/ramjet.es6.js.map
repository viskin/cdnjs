{"version":3,"file":"ramjet.es6.js","sources":["../src/ramjet.js","../src/transformer.js","../src/utils/rAF.js","../src/utils/generateId.js","../src/utils/getKeyframes.js","../src/utils/addCss.js","../src/easing.js","../src/interpolators/transform.js","../src/interpolators/borderRadius.js","../src/interpolators/array.js","../src/interpolators/rgba.js","../src/interpolators/opacity.js","../src/Wrapper.js","../src/utils/matrix.js","../src/utils/detect.js","../src/utils/findParent.js","../src/utils/parseBorderRadius.js","../src/utils/parseColor.js","../src/utils/node.js","../src/utils/svg.js","../node_modules/stacking-order/src/index.js","../node_modules/stacking-order/src/utils/last.js","../node_modules/stacking-order/src/utils/getZIndex.js","../node_modules/stacking-order/src/utils/getAncestors.js","../node_modules/stacking-order/src/utils/findStackingContext.js"],"sourcesContent":["import { compare } from 'stacking-order';\nimport { showNode, hideNode } from './utils/node.js';\nimport Wrapper from './Wrapper.js';\nimport transformer from './transformer.js';\n\nexport function transform ( fromNode, toNode, options = {} ) {\n\tif ( typeof options === 'function' ) {\n\t\toptions = { done: options };\n\t}\n\n\tif ( !( 'duration' in options ) ) {\n\t\toptions.duration = 400;\n\t}\n\n\tconst from = new Wrapper( fromNode, options );\n\tconst to = new Wrapper( toNode, options );\n\n\tconst order = compare( from._node, to._node );\n\n\tfrom.setOpacity( 1 );\n\tto.setOpacity( 0 );\n\n\t// in many cases, the stacking order of `from` and `to` is\n\t// determined by their relative location in the document â€“\n\t// so we need to preserve it\n\tif ( order === 1 ) {\n\t\tto.insert();\n\t\tfrom.insert();\n\t} else {\n\t\tfrom.insert();\n\t\tto.insert();\n\t}\n\n\treturn transformer( from, to, options );\n}\n\nexport function hide ( ...nodes ) {\n\tnodes.forEach( hideNode );\n}\n\nexport function show ( ...nodes ) {\n\tnodes.forEach( showNode );\n}\n\n// expose some basic easing functions\nexport { linear, easeIn, easeOut, easeInOut } from './easing.js';\n","import { compare } from 'stacking-order';\nimport getOpacityInterpolator from './interpolators/opacity.js';\nimport getRgbaInterpolator from './interpolators/rgba.js';\nimport getBorderRadiusInterpolator from './interpolators/borderRadius.js';\nimport getTransformInterpolator from './interpolators/transform.js';\nimport { linear } from './easing.js';\nimport addCss from './utils/addCss.js';\nimport getKeyframes from './utils/getKeyframes.js';\nimport generateId from './utils/generateId.js';\nimport {\n\tKEYFRAMES,\n\tANIMATION_END,\n\tkeyframesSupported\n} from './utils/detect.js';\nimport rAF from './utils/rAF.js';\n\nexport default function transformer ( from, to, options ) {\n\tconst duration = options.duration || 400;\n\tconst easing = options.easing || linear;\n\n\tconst useTimer = !keyframesSupported || !!options.useTimer;\n\n\tconst order = compare( from._node, to._node );\n\n\tconst interpolators = {\n\t\topacity: getOpacityInterpolator( from.opacity, to.opacity, order ),\n\t\tbackgroundColor: options.interpolateBackgroundColor ? getRgbaInterpolator( from.rgba, to.rgba, order ) : null,\n\t\tborderRadius: options.interpolateBorderRadius ? getBorderRadiusInterpolator( from, to ) : null,\n\t\ttransformFrom: getTransformInterpolator( from, to ),\n\t\ttransformTo: getTransformInterpolator( to, from )\n\t};\n\n\tlet running;\n\tlet disposeCss;\n\tlet torndown;\n\n\tlet remaining = duration;\n\tlet endTime;\n\n\tfunction tick () {\n\t\tif ( !running ) return;\n\n\t\tconst timeNow = Date.now();\n\t\tremaining = endTime - timeNow;\n\n\t\tif ( remaining < 0 ) {\n\t\t\ttransformer.teardown();\n\t\t\tif ( options.done ) options.done();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst t = easing( 1 - ( remaining / duration ) );\n\t\ttransformer.goto( t );\n\n\t\trAF( tick );\n\t}\n\n\tconst transformer = {\n\t\tteardown () {\n\t\t\tif ( torndown ) return transformer;\n\n\t\t\trunning = false;\n\t\t\ttorndown = true;\n\n\t\t\tfrom.detach();\n\t\t\tto.detach();\n\n\t\t\tfrom = null;\n\t\t\tto = null;\n\n\t\t\treturn transformer;\n\t\t},\n\n\t\tgoto ( pos ) {\n\t\t\ttransformer.pause();\n\n\t\t\tconst t = easing( pos );\n\n\t\t\t// opacity\n\t\t\tconst opacity = interpolators.opacity( t );\n\t\t\tfrom.setOpacity( opacity.from );\n\t\t\tto.setOpacity( opacity.to );\n\n\t\t\t// transform\n\t\t\tconst transformFrom = interpolators.transformFrom( t );\n\t\t\tconst transformTo = interpolators.transformTo( 1 - t );\n\t\t\tfrom.setTransform( transformFrom );\n\t\t\tto.setTransform( transformTo );\n\n\t\t\t// background color\n\t\t\tif ( interpolators.backgroundColor ) {\n\t\t\t\tconst backgroundColor = interpolators.backgroundColor( t );\n\t\t\t\tfrom.setBackgroundColor( backgroundColor.from );\n\t\t\t\tto.setBackgroundColor( backgroundColor.to );\n\t\t\t}\n\n\t\t\t// border radius\n\t\t\tif ( interpolators.borderRadius ) {\n\t\t\t\tconst borderRadius = interpolators.borderRadius( t );\n\t\t\t\tfrom.setBorderRadius( borderRadius.from );\n\t\t\t\tto.setBorderRadius( borderRadius.to );\n\t\t\t}\n\n\t\t\treturn transformer;\n\t\t},\n\n\t\tpause () {\n\t\t\tif ( !running ) return transformer;\n\t\t\trunning = false;\n\n\t\t\tif ( !useTimer ) {\n\t\t\t\t// TODO derive current position somehow, use that rather than\n\t\t\t\t// current computed style (from and to get out of sync in\n\t\t\t\t// some browsers?)\n\t\t\t\tremaining = endTime - Date.now();\n\n\t\t\t\tfrom.freeze();\n\t\t\t\tto.freeze();\n\t\t\t\tdisposeCss();\n\t\t\t}\n\n\t\t\treturn transformer;\n\t\t},\n\n\t\tplay () {\n\t\t\tif ( running ) return transformer;\n\t\t\trunning = true;\n\n\t\t\tendTime = Date.now() + remaining;\n\n\t\t\tif ( useTimer ) {\n\t\t\t\trAF( tick );\n\t\t\t} else {\n\t\t\t\tconst { fromKeyframes, toKeyframes } = getKeyframes( from, to, interpolators, options.easing || linear, remaining, duration );\n\n\t\t\t\tconst fromId = generateId();\n\t\t\t\tconst toId = generateId();\n\n\t\t\t\tconst css = `\n\t\t\t\t\t${KEYFRAMES} ${fromId} { ${fromKeyframes} }\n\t\t\t\t\t${KEYFRAMES} ${toId}   { ${toKeyframes} }`;\n\n\t\t\t\tdisposeCss = addCss( css );\n\n\t\t\t\tfrom.animateWithKeyframes( fromId, remaining );\n\t\t\t\tto.animateWithKeyframes( toId, remaining );\n\t\t\t}\n\n\t\t\treturn transformer;\n\t\t}\n\t};\n\n\t// handle animation end\n\tif ( !useTimer ) {\n\t\tlet animating = 2;\n\n\t\tconst done = () => {\n\t\t\tif ( !--animating ) {\n\t\t\t\ttransformer.teardown();\n\n\t\t\t\tif ( options.done ) options.done();\n\n\t\t\t\tdisposeCss();\n\t\t\t}\n\t\t};\n\n\t\tfrom._clone.addEventListener( ANIMATION_END, done );\n\t\tto._clone.addEventListener( ANIMATION_END, done );\n\t}\n\n\treturn transformer.play();\n}\n","const rAF = window.requestAnimationFrame       ||\n            window.webkitRequestAnimationFrame ||\n            ( fn => setTimeout( fn, 16 ) );\n\nexport default rAF;","export default function generateId () {\n\treturn 'ramjet' + ~~( Math.random() * 1000000 );\n}\n","import { TRANSFORM_CSS } from './detect.js';\n\nexport default function getKeyframes ( from, to, interpolators, easing, remaining, duration ) {\n\tconst numFrames = remaining / 16;\n\n\tlet fromKeyframes = '';\n\tlet toKeyframes = '';\n\n\tfunction addKeyframes ( pc, t ) {\n\t\tconst opacity = interpolators.opacity( t );\n\t\tconst backgroundColor = interpolators.backgroundColor ? interpolators.backgroundColor( t ) : null;\n\t\tconst borderRadius = interpolators.borderRadius ? interpolators.borderRadius( t ) : null;\n\t\tconst transformFrom = interpolators.transformFrom( t );\n\t\tconst transformTo = interpolators.transformTo( 1 - t );\n\n\t\tfromKeyframes += '\\n' +\n\t\t\t`${pc}% {` +\n\t\t\t\t`opacity: ${opacity.from};` +\n\t\t\t\t`${TRANSFORM_CSS}: ${transformFrom};` +\n\t\t\t\t( backgroundColor ? `background-color: ${backgroundColor.from};` : '' ) +\n\t\t\t\t( borderRadius ? `border-radius: ${borderRadius.from};` : '' ) +\n\t\t\t`}`;\n\n\t\ttoKeyframes += '\\n' +\n\t\t\t`${pc}% {` +\n\t\t\t\t`opacity: ${opacity.to};` +\n\t\t\t\t`${TRANSFORM_CSS}: ${transformTo};` +\n\t\t\t\t( backgroundColor ? `background-color: ${backgroundColor.to};` : '' ) +\n\t\t\t\t( borderRadius ? `border-radius: ${borderRadius.to};` : '' ) +\n\t\t\t`}`;\n\t}\n\n\tlet i;\n\tlet startPos = 1 - ( remaining / duration );\n\n\tfor ( i = 0; i < numFrames; i += 1 ) {\n\t\tconst relPos = i / numFrames;\n\t\tconst absPos = startPos + ( ( remaining / duration ) * relPos );\n\n\t\tconst pc = 100 * relPos;\n\t\tconst t = easing( absPos );\n\n\t\taddKeyframes( pc, t );\n\t}\n\n\taddKeyframes( 100, 1 );\n\n\treturn { fromKeyframes, toKeyframes };\n}\n","const head = document.getElementsByTagName( 'head' )[0];\n\nexport default function addCss ( css ) {\n\tlet styleElement = document.createElement( 'style' );\n\tstyleElement.type = 'text/css';\n\n\t// Internet Exploder won't let you use styleSheet.innerHTML - we have to\n\t// use styleSheet.cssText instead\n\tlet styleSheet = styleElement.styleSheet;\n\n\tif ( styleSheet ) {\n\t\tstyleSheet.cssText = css;\n\t} else {\n\t\tstyleElement.innerHTML = css;\n\t}\n\n\thead.appendChild( styleElement );\n\n\treturn () => head.removeChild( styleElement );\n}\n","export function linear ( pos ) {\n\treturn pos;\n}\n\nexport function easeIn ( pos ) {\n\treturn Math.pow( pos, 3 );\n}\n\nexport function easeOut ( pos ) {\n\treturn ( Math.pow( ( pos - 1 ), 3 ) + 1 );\n}\n\nexport function easeInOut ( pos ) {\n\tif ( ( pos /= 0.5 ) < 1 ) {\n\t\treturn ( 0.5 * Math.pow( pos, 3 ) );\n\t}\n\n\treturn ( 0.5 * ( Math.pow( ( pos - 2 ), 3 ) + 2 ) );\n}","import { IDENTITY, decompose, multiply } from '../utils/matrix';\n\nfunction interpolateMatrices ( a, b ) {\n\tlet transform = [];\n\n\treturn t => {\n\t\tlet i = a.length;\n\t\twhile ( i-- ) {\n\t\t\tconst from = a[i];\n\t\t\tconst to = b[i];\n\t\t\ttransform[i] = from + t * ( to - from );\n\t\t}\n\n\t\treturn `matrix(${transform.join(',')})`;\n\t};\n}\n\nfunction interpolate ( a, b ) {\n\tconst d = b - a;\n\treturn t => a + t * d;\n}\n\nfunction getRotation ( radians ) {\n\twhile ( radians > Math.PI ) radians -= Math.PI * 2;\n\twhile ( radians < -Math.PI ) radians += Math.PI * 2;\n\treturn radians;\n}\n\nfunction interpolateDecomposedTransforms ( a, b ) {\n\tconst rotate = interpolate( getRotation( a.rotate ), getRotation( b.rotate ) );\n\tconst skewX = interpolate( a.skewX, b.skewX );\n\tconst scaleX = interpolate( a.scaleX, b.scaleX );\n\tconst scaleY = interpolate( a.scaleY, b.scaleY );\n\tconst translateX = interpolate( a.translateX, b.translateX );\n\tconst translateY = interpolate( a.translateY, b.translateY );\n\n\treturn t => {\n\t\tconst transform = `translate(${translateX(t)}px, ${translateY(t)}px) rotate(${rotate(t)}rad) skewX(${skewX(t)}rad) scale(${scaleX(t)}, ${scaleY(t)})`;\n\t\treturn transform;\n\t};\n}\n\nexport default function getTransformInterpolator ( a, b ) {\n\tconst scale_x = b.width / a.width;\n\tconst scale_y = b.height / a.height;\n\tconst d_x = b.left - a.left;\n\tconst d_y = b.top - a.top;\n\n\tconst a_start = a.transform;\n\n\tconst move_a_to_b = [ 1, 0, 0, 1, d_x, d_y ];\n\tconst scale_a_to_b = [ scale_x, 0, 0, scale_y, 0, 0 ];\n\n\tlet matrix = IDENTITY;\n\n\tmatrix = multiply( matrix, a.invertedParentCTM );\n\tmatrix = multiply( matrix, move_a_to_b );\n\tmatrix = multiply( matrix, b.ctm );\n\tmatrix = multiply( matrix, scale_a_to_b );\n\n\tconst decomposed_start = decompose( a_start );\n\tconst decomposed_end = decompose( matrix );\n\n\tif ( !decomposed_start || !decomposed_end ) return interpolateMatrices( a_start, matrix );\n\treturn interpolateDecomposedTransforms( decomposed_start, decomposed_end );\n}\n","import interpolateArray from './array.js';\n\n// Border radius is given as a string in the following form\n//\n//     tl.x tr.x br.x bl.x / tl.y tr.y br.y bl.y\n//\n// ...where t, r, b and l are top, right, bottom, left, and\n// x and y are self-explanatory. Each value is followed by 'px'\n\n// TODO it must be possible to do this more simply. Maybe have\n// a flat array from the start?\n\nexport default function getBorderRadiusInterpolator ( a, b ) {\n\t// TODO fast path - no transition needed\n\n\tconst aWidth = a.width;\n\tconst aHeight = a.height;\n\n\tconst bWidth = b.width;\n\tconst bHeight = b.height;\n\n\ta = a.borderRadius;\n\tb = b.borderRadius;\n\n\tconst a_x_t0 = [ a.tl.x, a.tr.x, a.br.x, a.bl.x ];\n\tconst a_y_t0 = [ a.tl.y, a.tr.y, a.br.y, a.bl.y ];\n\n\tconst b_x_t1 = [ b.tl.x, b.tr.x, b.br.x, b.bl.x ];\n\tconst b_y_t1 = [ b.tl.y, b.tr.y, b.br.y, b.bl.y ];\n\n\tconst a_x_t1 = b_x_t1.map( x => x * aWidth / bWidth );\n\tconst a_y_t1 = b_y_t1.map( y => y * aHeight / bHeight );\n\n\tconst b_x_t0 = a_x_t0.map( x => x * bWidth / aWidth );\n\tconst b_y_t0 = a_y_t0.map( y => y * bHeight / aHeight );\n\n\tconst ax = interpolateArray( a_x_t0, a_x_t1 );\n\tconst ay = interpolateArray( a_y_t0, a_y_t1 );\n\n\tconst bx = interpolateArray( b_x_t0, b_x_t1 );\n\tconst by = interpolateArray( b_y_t0, b_y_t1 );\n\n\tlet borderRadius = {};\n\n\treturn t => {\n\t\tlet x = ax( t );\n\t\tlet y = ay( t );\n\n\t\tborderRadius.from = `${x.join('px ')}px / ${y.join('px ')}px`;\n\n\t\tx = bx( t );\n\t\ty = by( t );\n\n\t\tborderRadius.to = `${x.join('px ')}px / ${y.join('px ')}px`;\n\n\t\treturn borderRadius;\n\t};\n}\n","export default function interpolateArray ( a, b ) {\n\tconst len = a.length;\n\tlet array = new Array( len );\n\n\treturn t => {\n\t\tlet i = len;\n\t\twhile ( i-- ) {\n\t\t\tarray[i] = a[i] + t * ( b[i] - a[i] );\n\t\t}\n\n\t\treturn array;\n\t};\n}\n","import getOpacityInterpolator from './opacity';\n\nexport default function getRgbaInterpolator ( a, b, order ) {\n\tif ( a.alpha === 1 && b.alpha === 1 ) {\n\t\t// no need to animate anything\n\t\treturn null;\n\t}\n\n\tlet rgba = {};\n\tlet opacityAt = getOpacityInterpolator( a.alpha, b.alpha, order );\n\n\treturn t => {\n\t\tconst opacity = opacityAt( t );\n\n\t\trgba.from = `rgba(${a.r},${a.g},${a.b},${opacity.from})`;\n\t\trgba.to = `rgba(${b.r},${b.g},${b.b},${opacity.to})`;\n\n\t\treturn rgba;\n\t};\n}\n","export default function getOpacityInterpolator ( from, to, order ) {\n\tlet opacity = {};\n\n\treturn t => {\n\t\tconst targetOpacity = ( to - from ) * t + from;\n\n\t\t// Based on the blending formula here. (http://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\n\t\t// This is a quadratic blending function that makes the top layer and bottom layer blend linearly.\n\t\t// However there is an asymptote at target=1 so that needs to be handled with an if else statement.\n\t\tif ( targetOpacity === 1 ) {\n\t\t\tif ( order === 1 ) {\n\t\t\t\topacity.from = 1 - t;\n\t\t\t\topacity.to = 1;\n\t\t\t} else {\n\t\t\t\topacity.from = 1;\n\t\t\t\topacity.to = t;\n\t\t\t}\n\t\t} else {\n\t\t\topacity.from = targetOpacity - ( t * t * targetOpacity );\n\t\t\topacity.to = ( targetOpacity - opacity.from ) / ( 1 - opacity.from );\n\t\t}\n\n\t\treturn opacity;\n\t};\n}\n","import { cloneNode } from './utils/node.js';\nimport parseColor from './utils/parseColor.js';\nimport parseBorderRadius from './utils/parseBorderRadius.js';\nimport { svgns } from './utils/svg.js';\nimport { findTransformParent, findParentByTagName } from './utils/findParent.js';\nimport {\n\tANIMATION,\n\tANIMATION_DIRECTION,\n\tANIMATION_DURATION,\n\tANIMATION_ITERATION_COUNT,\n\tANIMATION_NAME,\n\tANIMATION_TIMING_FUNCTION,\n\tTRANSFORM,\n\tTRANSFORM_ORIGIN\n} from './utils/detect.js';\nimport {\n\tinvert,\n\tgetCumulativeTransformMatrix,\n\tgetTransformMatrix,\n\tmultiply,\n\tIDENTITY\n} from './utils/matrix.js';\n\nfunction getBoundingClientRect ( node, invertedParentCTM ) {\n\tconst originalTransformOrigin = node.style[ TRANSFORM_ORIGIN ];\n\tconst originalTransform = node.style[ TRANSFORM ];\n\tconst originalTransformAttribute = node.getAttribute( 'transform' ); // SVG\n\n\tnode.style[ TRANSFORM_ORIGIN ] = '0 0';\n\tnode.style[ TRANSFORM ] = `matrix(${invertedParentCTM.join(',')})`;\n\n\tconst bcr = node.getBoundingClientRect();\n\n\t// reset\n\tnode.style[ TRANSFORM_ORIGIN ] = originalTransformOrigin;\n\tnode.style[ TRANSFORM ] = originalTransform;\n\tnode.setAttribute( 'transform', originalTransformAttribute || '' ); // TODO remove attribute altogether if null?\n\n\treturn bcr;\n}\n\nexport default class Wrapper {\n\tconstructor ( node, options ) {\n\t\tthis.init( node, options );\n\t}\n\n\tinit ( node ) {\n\t\tthis._node = node;\n\n\t\tthis._clone = cloneNode( node );\n\n\t\tconst style = window.getComputedStyle( node );\n\t\tthis.style = style;\n\n\t\t// we need to get the 'naked' boundingClientRect, i.e.\n\t\t// without any transforms\n\t\t// TODO what if the node is the root <svg> node?\n\t\tconst parentCTM = node.namespaceURI === 'svg' ? node.parentNode.getScreenCTM() : getCumulativeTransformMatrix( node.parentNode );\n\t\tthis.invertedParentCTM = invert( parentCTM );\n\t\tthis.transform = getTransformMatrix( node ) || IDENTITY;\n\t\tthis.ctm = multiply( parentCTM, this.transform );\n\n\t\tconst bcr = getBoundingClientRect( node, this.invertedParentCTM );\n\t\tthis.bcr = bcr;\n\n\t\tconst opacity = +( style.opacity );\n\n\t\tconst rgba = parseColor( style.backgroundColor );\n\n\n\n\t\t// TODO create a flat array? easier to work with later?\n\t\tconst borderRadius = {\n\t\t\ttl: parseBorderRadius( style.borderTopLeftRadius ),\n\t\t\ttr: parseBorderRadius( style.borderTopRightRadius ),\n\t\t\tbr: parseBorderRadius( style.borderBottomRightRadius ),\n\t\t\tbl: parseBorderRadius( style.borderBottomLeftRadius )\n\t\t};\n\n\t\tthis.borderRadius = borderRadius;\n\t\tthis.opacity = opacity;\n\t\tthis.rgba = rgba;\n\n\t\tthis.left = bcr.left;\n\t\tthis.top = bcr.top;\n\t\tthis.width = bcr.width;\n\t\tthis.height = bcr.height;\n\t}\n\n\tinsert () {\n\t\tconst bcr = this.bcr;\n\n\t\tlet clone;\n\t\tlet container;\n\n\t\tif ( this._node.namespaceURI === svgns ) { // TODO what if it's the <svg> itself, not a child?\n\t\t\tconst svg = findParentByTagName( this._node, 'svg' ); // TODO should be the namespace boundary - could be SVG inside SVG\n\t\t\tcontainer = findTransformParent( svg );\n\n\t\t\tclone = svg.cloneNode( false );\n\t\t\tclone.appendChild( this._clone ); // TODO what about transforms?\n\t\t} else {\n\t\t\tcontainer = findTransformParent( this._node );\n\t\t\tclone = this._clone;\n\t\t}\n\n\t\tconst containerStyle = window.getComputedStyle( container );\n\t\tconst containerBcr = getBoundingClientRect( container, invert( getCumulativeTransformMatrix( container.parentNode ) ) );\n\n\t\tclone.style.position = 'absolute';\n\t\tclone.style[ TRANSFORM_ORIGIN ] = '0 0';\n\t\tclone.style.top = ( bcr.top - parseInt( this.style.marginTop, 10 ) - ( containerBcr.top - parseInt( containerStyle.marginTop, 10 ) ) ) + 'px';\n\t\tclone.style.left = ( bcr.left - parseInt( this.style.marginLeft, 10 ) - ( containerBcr.left - parseInt( containerStyle.marginLeft, 10 ) ) ) + 'px';\n\n\t\tcontainer.appendChild( clone );\n\t}\n\n\tdetach () {\n\t\tthis._clone.parentNode.removeChild( this._clone );\n\t}\n\n\tsetOpacity ( opacity ) {\n\t\tthis._clone.style.opacity = opacity;\n\t}\n\n\tsetTransform( transform ) {\n\t\tthis._clone.style.transform = this._clone.style.webkitTransform = this._clone.style.msTransform = transform;\n\t}\n\n\tsetBackgroundColor ( color ) {\n\t\tthis._clone.style.backgroundColor = color;\n\t}\n\n\tsetBorderRadius ( borderRadius ) {\n\t\tthis._clone.style.borderRadius = borderRadius;\n\t}\n\n\tanimateWithKeyframes ( id, duration ) {\n\t\tthis._clone.style[ ANIMATION_DIRECTION ] = 'alternate';\n\t\tthis._clone.style[ ANIMATION_DURATION ] = `${duration/1000}s`;\n\t\tthis._clone.style[ ANIMATION_ITERATION_COUNT ] = 1;\n\t\tthis._clone.style[ ANIMATION_NAME ] = id;\n\t\tthis._clone.style[ ANIMATION_TIMING_FUNCTION ] = 'linear';\n\t}\n\n\tfreeze () {\n\t\tconst computedStyle = getComputedStyle( this._clone );\n\n\t\tthis.setOpacity( computedStyle.opacity );\n\t\tthis.setTransform( computedStyle.transform );\n\t\tthis.setBackgroundColor( computedStyle.backgroundColor );\n\t\tthis.setBorderRadius( computedStyle.borderRadius );\n\n\t\tthis._clone.style[ ANIMATION ] = 'none';\n\t}\n}\n","import { svgns } from './svg.js';\nimport { TRANSFORM, TRANSFORM_ORIGIN } from './detect.js';\nimport { findTransformParent } from './findParent.js';\n\nexport const IDENTITY = [ 1, 0, 0, 1, 0, 0 ];\n\nexport function multiply ( [ a1, b1, c1, d1, e1, f1 ], [ a2, b2, c2, d2, e2, f2 ] ) {\n\treturn [\n\t\t( a1 * a2 ) + ( c1 * b2 ),      // a\n\t\t( b1 * a2 ) + ( d1 * b2 ),      // b\n\t\t( a1 * c2 ) + ( c1 * d2 ),      // c\n\t\t( b1 * c2 ) + ( d1 * d2 ),      // d\n\t\t( a1 * e2 ) + ( c1 * f2 ) + e1, // e\n\t\t( b1 * e2 ) + ( d1 * f2 ) + f1  // f\n\t];\n}\n\nexport function invert ( [ a, b, c, d, e, f ] ) {\n\tconst determinant = ( a * d ) - ( c * b );\n\n\treturn [\n\t\td /  determinant,\n\t\tb / -determinant,\n\t\tc / -determinant,\n\t\ta /  determinant,\n\t\t( ( c * f ) - ( e * d ) ) / determinant,\n\t\t( ( e * b ) - ( a * f ) ) / determinant\n\t];\n}\n\nfunction pythag ( a, b ) {\n\treturn Math.sqrt( a * a + b * b );\n}\n\nexport function decompose ( [ a, b, c, d, e, f ] ) {\n\t// If determinant equals zero (e.g. x scale or y scale equals zero),\n\t// the matrix cannot be decomposed\n\tif ( ( ( a * d ) - ( b * c ) ) === 0 ) return null;\n\n\t// See https://github.com/Rich-Harris/Neo/blob/master/Neo.js for\n\t// an explanation of the following\n\tconst scaleX = pythag( a, b );\n\ta /= scaleX;\n\tb /= scaleX;\n\n\tlet scaledShear = a * c + b * d;\n\tconst desheared = [ a * -scaledShear + c, b * -scaledShear + d ];\n\n\tconst scaleY = pythag( desheared[0], desheared[1] );\n\n\tconst skewX = scaledShear / scaleY;\n\n\tconst rotate = b > 0 ?\n\t\tMath.acos( a ) :\n\t\t( ( 2 * Math.PI ) - Math.acos( a ) );\n\n\treturn {\n\t\trotate,\n\t\tscaleX,\n\t\tscaleY,\n\t\tskewX,\n\t\ttranslateX: e,\n\t\ttranslateY: f\n\t};\n}\n\nexport function parseMatrixTransformString ( transform ) {\n\tif ( transform.slice( 0, 7 ) !== 'matrix(' ) {\n\t\tthrow new Error( `Could not parse transform string (${transform})` );\n\t}\n\n\treturn transform.slice( 7, -1 ).split( ' ' ).map( parseFloat );\n}\n\nexport function getCumulativeTransformMatrix ( node ) {\n\tif ( node.namespaceURI === svgns ) {\n\t\tconst { a, b, c, d, e, f } = node.getCTM();\n\t\treturn [ a, b, c, d, e, f ];\n\t}\n\n\tlet matrix = [ 1, 0, 0, 1, 0, 0 ];\n\n\twhile ( node instanceof Element ) {\n\t\tconst parentMatrix = getTransformMatrix( node );\n\n\t\tif ( parentMatrix ) {\n\t\t\tmatrix = multiply( parentMatrix, matrix );\n\t\t}\n\n\t\tnode = findTransformParent( node );\n\t}\n\n\treturn matrix;\n}\n\nexport function getTransformMatrix ( node ) {\n\tif ( node.namespaceURI === svgns ) {\n\t\tconst ctm = getCumulativeTransformMatrix( node );\n\t\tconst parentCTM = getCumulativeTransformMatrix( node.parentNode );\n\t\treturn multiply( invert( parentCTM ), ctm );\n\t}\n\n\tconst style = getComputedStyle( node );\n\tconst transform = style[ TRANSFORM ];\n\n\tif ( transform === 'none' ) {\n\t\treturn null;\n\t}\n\n\tconst origin = ( style[ TRANSFORM_ORIGIN ] ).split( ' ' ).map( parseFloat );\n\n\tlet matrix = parseMatrixTransformString( transform );\n\n\t// compensate for the transform origin (we want to express everything in [0,0] terms)\n\tmatrix = multiply( [ 1, 0, 0, 1, origin[0], origin[1] ], matrix );\n\tmatrix = multiply( matrix, [ 1, 0, 0, 1, -origin[0], -origin[1] ] );\n\n\t// TODO if is SVG, multiply by CTM, to account for viewBox\n\n\treturn matrix;\n}\n","const div = document.createElement( 'div' );\n\nlet keyframesSupported = true;\nlet TRANSFORM;\nlet TRANSFORM_ORIGIN;\nlet TRANSFORM_CSS;\nlet KEYFRAMES;\nlet ANIMATION;\nlet ANIMATION_DIRECTION;\nlet ANIMATION_DURATION;\nlet ANIMATION_ITERATION_COUNT;\nlet ANIMATION_NAME;\nlet ANIMATION_TIMING_FUNCTION;\nlet ANIMATION_END;\n\n// We have to browser-sniff for IE11, because it was apparently written\n// by a barrel of stoned monkeys - http://jsfiddle.net/rich_harris/oquLu2qL/\n\n// http://stackoverflow.com/questions/17907445/how-to-detect-ie11\nconst isIe11 = !window.ActiveXObject && 'ActiveXObject' in window;\n\nif (\n\t!isIe11 &&\n\t( 'transform' in div.style || 'webkitTransform' in div.style ) &&\n\t( 'animation' in div.style || 'webkitAnimation' in div.style )\n) {\n\tkeyframesSupported = true;\n\n\tif ( 'webkitTransform' in div.style ) {\n\t\tTRANSFORM = 'webkitTransform';\n\t\tTRANSFORM_CSS = '-webkit-transform';\n\t\tTRANSFORM_ORIGIN = 'webkitTransformOrigin';\n\t} else {\n\t\tTRANSFORM = TRANSFORM_CSS = 'transform';\n\t\tTRANSFORM_ORIGIN = 'transformOrigin';\n\t}\n\n\tif ( 'animation' in div.style ) {\n\t\tKEYFRAMES = '@keyframes';\n\n\t\tANIMATION                 = 'animation';\n\t\tANIMATION_DIRECTION       = 'animationDirection';\n\t\tANIMATION_DURATION        = 'animationDuration';\n\t\tANIMATION_ITERATION_COUNT = 'animationIterationCount';\n\t\tANIMATION_NAME            = 'animationName';\n\t\tANIMATION_TIMING_FUNCTION = 'animationTimingFunction';\n\n\t\tANIMATION_END             = 'animationend';\n\t} else {\n\t\tKEYFRAMES = '@-webkit-keyframes';\n\n\t\tANIMATION                 = 'webkitAnimation';\n\t\tANIMATION_DIRECTION       = 'webkitAnimationDirection';\n\t\tANIMATION_DURATION        = 'webkitAnimationDuration';\n\t\tANIMATION_ITERATION_COUNT = 'webkitAnimationIterationCount';\n\t\tANIMATION_NAME            = 'webkitAnimationName';\n\t\tANIMATION_TIMING_FUNCTION = 'webkitAnimationTimingFunction';\n\n\t\tANIMATION_END             = 'webkitAnimationEnd';\n\t}\n} else {\n\tkeyframesSupported = false;\n}\n\nexport {\n\tkeyframesSupported,\n\tTRANSFORM,\n\tTRANSFORM_ORIGIN,\n\tTRANSFORM_CSS,\n\tKEYFRAMES,\n\tANIMATION,\n\tANIMATION_DIRECTION,\n\tANIMATION_DURATION,\n\tANIMATION_ITERATION_COUNT,\n\tANIMATION_NAME,\n\tANIMATION_TIMING_FUNCTION,\n\tANIMATION_END\n};\n","import { svgns } from './svg';\n\nexport function findParentByTagName ( node, tagName ) {\n\twhile ( node ) {\n\t\tif ( node.tagName === tagName ) {\n\t\t\treturn node;\n\t\t}\n\n\t\tnode = node.parentNode;\n\t}\n}\n\nexport function findTransformParent ( node ) {\n\tconst isSvg = node.namespaceURI === svgns && node.tagName !== 'svg';\n\treturn isSvg ? findParentByTagName( node, 'svg' ) : node.parentNode;\n}","var borderRadiusRegex = /^(\\d+)px(?: (\\d+)px)?$/;\n\nexport default function parseBorderRadius ( str ) {\n\tconst match = borderRadiusRegex.exec( str );\n\n\treturn match[2] ?\n\t\t{ x: +match[1], y: +match[2] } :\n\t\t{ x: +match[1], y: +match[1] };\n}","const bgColorRegexp= /^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d?.\\d+))?\\)$/;\n\nexport default function parseColor ( str ) {\n\tconst match = bgColorRegexp.exec( str );\n\n\tif ( !match ) return null;\n\n\treturn {\n\t\tr: +match[1],\n\t\tg: +match[2],\n\t\tb: +match[3],\n\t\talpha: match[4] ? +match[4] : 1\n\t};\n}","import { svgns } from './svg.js';\n\nexport function hideNode ( node ) {\n\tnode.__ramjetOriginalTransition__ = node.style.webkitTransition || node.style.transition;\n\tnode.__ramjetOriginalOpacity__ = node.style.opacity;\n\n\tnode.style.webkitTransition = node.style.transition = '';\n\n\tnode.style.opacity = 0;\n}\n\nexport function showNode ( node ) {\n\tif ( '__ramjetOriginalOpacity__' in node ) {\n\t\tnode.style.transition = '';\n\t\tnode.style.opacity = node.__ramjetOriginalOpacity__;\n\n\t\tif ( node.__ramjetOriginalTransition__ ) {\n\t\t\tsetTimeout( () => {\n\t\t\t\tnode.style.transition = node.__ramjetOriginalTransition__;\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function cloneNode ( node ) {\n\tconst clone = node.cloneNode();\n\n\tconst isSvg = node.parentNode && node.parentNode.namespaceURI === svgns;\n\n\tif ( node.nodeType === 1 ) {\n\t\tconst width = node.style.width;\n\t\tconst height = node.style.height;\n\n\t\tclone.setAttribute( 'style', window.getComputedStyle( node ).cssText );\n\n\t\tif ( isSvg ) {\n\t\t\tclone.style.width = width;\n\t\t\tclone.style.height = height;\n\t\t}\n\n\t\tconst len = node.childNodes.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tclone.appendChild( cloneNode( node.childNodes[i] ) );\n\t\t}\n\t}\n\n\treturn clone;\n}\n","export const svgns = 'http://www.w3.org/2000/svg';\n","import findStackingContext from './utils/findStackingContext.js';\nimport getAncestors from './utils/getAncestors.js';\nimport getZIndex from './utils/getZIndex.js';\nimport last from './utils/last.js';\n\nexport function compare ( a, b ) {\n\tif ( a === b ) throw new Error( 'Cannot compare node with itself' );\n\n\tlet ancestors = {\n\t\ta: getAncestors( a ),\n\t\tb: getAncestors( b )\n\t};\n\n\tlet commonAncestor;\n\n\t// remove shared ancestors\n\twhile ( last( ancestors.a ) === last( ancestors.b ) ) {\n\t\ta = ancestors.a.pop();\n\t\tb = ancestors.b.pop();\n\n\t\tcommonAncestor = a;\n\t}\n\n\tlet stackingContexts = {\n\t\ta: findStackingContext( ancestors.a ),\n\t\tb: findStackingContext( ancestors.b )\n\t};\n\n\tlet zIndexes = {\n\t\ta: getZIndex( stackingContexts.a ),\n\t\tb: getZIndex( stackingContexts.b )\n\t};\n\n\tif ( zIndexes.a === zIndexes.b ) {\n\t\tconst children = commonAncestor.childNodes;\n\n\t\tconst furthestAncestors = {\n\t\t\ta: last( ancestors.a ),\n\t\t\tb: last( ancestors.b )\n\t\t};\n\n\t\tlet i = children.length;\n\t\twhile ( i-- ) {\n\t\t\tconst child = children[i];\n\t\t\tif ( child === furthestAncestors.a ) return 1;\n\t\t\tif ( child === furthestAncestors.b ) return -1;\n\t\t}\n\t}\n\n\treturn Math.sign( zIndexes.a - zIndexes.b );\n}\n","export default function last ( array ) {\n\treturn array[ array.length - 1 ];\n}\n","export default function getZIndex ( node ) {\n\treturn node && Number( getComputedStyle( node ).zIndex ) || 0;\n}\n","export default function getAncestors ( node ) {\n\tlet ancestors = [];\n\n\twhile ( node ) {\n\t\tancestors.push( node );\n\t\tnode = node.parentNode;\n\t}\n\n\treturn ancestors; // [ node, ... <body>, <html>, document ]\n}\n","const props = /\\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\\b/;\n\nfunction isFlexItem ( node ) {\n\tconst display = getComputedStyle( node.parentNode ).display;\n\treturn display === 'flex' || display === 'inline-flex';\n}\n\nfunction createsStackingContext ( node ) {\n\tconst style = getComputedStyle( node );\n\n\t// https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context\n\tif ( style.position === 'fixed' ) return true;\n\tif ( style.zIndex !== 'auto' && style.position !== 'static' || isFlexItem( node ) ) return true;\n\tif ( +style.opacity < 1 ) return true;\n\tif ( 'transform' in style && style.transform !== 'none' ) return true;\n\tif ( 'webkitTransform' in style && style.webkitTransform !== 'none' ) return true;\n\tif ( 'mixBlendMode' in style && style.mixBlendMode !== 'normal' ) return true;\n\tif ( 'filter' in style && style.filter !== 'none' ) return true;\n\tif ( 'webkitFilter' in style && style.webkitFilter !== 'none' ) return true;\n\tif ( 'isolation' in style && style.isolation === 'isolate' ) return true;\n\tif ( props.test( style.willChange ) ) return true;\n\tif ( style.webkitOverflowScrolling === 'touch' ) return true;\n\n\treturn false;\n}\n\nexport default function findStackingContext ( nodes ) {\n\tlet i = nodes.length;\n\n\twhile ( i-- ) {\n\t\tif ( createsStackingContext( nodes[i] ) ) return nodes[i];\n\t}\n\n\treturn null;\n}\n"],"names":[],"mappings":"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"}