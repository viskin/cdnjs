angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(b,a){return{require:"ngModel",scope:{min:"=min",max:"=max",currencySymbol:"@",ngRequired:"=ngRequired"},link:function(k,f,j,e){function d(l){return RegExp("\\d|\\-|\\"+l,"g")}function c(l){return RegExp("\\-{0,1}((\\"+l+")|([0-9]{1,}\\"+l+"?))&?[0-9]{0,2}","g")}function g(n){n=String(n);var m=a.NUMBER_FORMATS.DECIMAL_SEP;var l=null;if(RegExp("^-[\\s]*$","g").test(n)){n="-0"}if(d(m).test(n)){l=n.match(d(m)).join("").match(c(m));l=l?l[0].replace(m,"."):null}return l}function i(){if(angular.isDefined(k.currencySymbol)){return k.currencySymbol}else{return a.NUMBER_FORMATS.CURRENCY_SYM}}function h(){var m=e.$formatters,l=m.length;var n=e.$modelValue;while(l--){n=m[l](n)}e.$setViewValue(n);e.$render()}e.$parsers.push(function(m){var l=g(m);return parseFloat(l)});f.on("blur",function(){e.$commitViewValue();h()});e.$formatters.unshift(function(l){return b("currency")(l,i())});e.$validators.min=function(l){if(!k.ngRequired&&isNaN(l)){return true}if(k.min){return l>=parseFloat(k.min)}return true};e.$validators.max=function(l){if(!k.ngRequired&&isNaN(l)){return true}if(k.max){return l<=parseFloat(k.max)}return true}}}}]);