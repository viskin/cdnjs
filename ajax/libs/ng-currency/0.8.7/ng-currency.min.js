angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(b,a){return{require:"ngModel",scope:{min:"=min",max:"=max",currencySymbol:"@",ngRequired:"=ngRequired",fraction:"=fraction"},link:function(k,f,j,e){if(j.ngCurrency==="false"){return}var l=(typeof k.fraction!=="undefined")?k.fraction:2;function d(m){return RegExp("\\d|\\-|\\"+m,"g")}function c(m){return RegExp("\\-{0,1}((\\"+m+")|([0-9]{1,}\\"+m+"?))&?[0-9]{0,"+l+"}","g")}function g(r){r=String(r);var n=a.NUMBER_FORMATS.DECIMAL_SEP;var m=null;var q=b("currency")("-1",i(),k.fraction);var p=q.indexOf("1");var o=q.substring(0,p);r=r.replace(o,"-");if(RegExp("^-[\\s]*$","g").test(r)){r="-0"}if(d(n).test(r)){m=r.match(d(n)).join("").match(c(n));m=m?m[0].replace(n,"."):null}return m}function i(){if(angular.isDefined(k.currencySymbol)){return k.currencySymbol}else{return a.NUMBER_FORMATS.CURRENCY_SYM}}function h(){var n=e.$formatters,m=n.length;var o=e.$$rawModelValue;while(m--){o=n[m](o)}e.$setViewValue(o);e.$render()}e.$parsers.push(function(n){var m=g(n);if(m=="."||m=="-."){m=".0"}return parseFloat(m)});f.on("blur",function(){e.$commitViewValue();h()});e.$formatters.unshift(function(m){return b("currency")(m,i(),k.fraction)});e.$validators.min=function(m){if(!k.ngRequired&&isNaN(m)){return true}if(typeof k.min!=="undefined"){return m>=parseFloat(k.min)}return true};e.$validators.max=function(m){if(!k.ngRequired&&isNaN(m)){return true}if(typeof k.max!=="undefined"){return m<=parseFloat(k.max)}return true};e.$validators.fraction=function(m){if(!!m&&isNaN(m)){return false}return true}}}}]);