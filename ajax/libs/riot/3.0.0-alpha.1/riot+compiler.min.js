/* Riot v3.0.0-alpha.1, @license MIT, (c) 2015 Muut Inc. + contributors */
(function(e,t){"use strict";var r={version:"v3.0.0-alpha.1",settings:{}},n=0,i=[],o={},a="riot-",f=a+"tag",u="string",s="object",c="undefined",l="function",p=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,d=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],h=(e&&e.document||{}).documentMode|0;r.observable=function(e){e=e||{};var t={},r=Array.prototype.slice,n=function(e,t){e.replace(/\S+/g,t)},i=function(t,r){Object.defineProperty(e,t,{value:r,enumerable:false,writable:false,configurable:false})};i("on",function(r,i){if(typeof i!="function")return e;n(r,function(e,r){(t[e]=t[e]||[]).push(i);i.typed=r>0});return e});i("off",function(r,i){if(r=="*"&&!i)t={};else{n(r,function(e){if(i){var r=t[e];for(var n=0,o;o=r&&r[n];++n){if(o==i)r.splice(n--,1)}}else delete t[e]})}return e});i("one",function(t,r){function n(){e.off(t,n);r.apply(e,arguments)}return e.on(t,n)});i("trigger",function(i){var o=r.call(arguments,1),a;n(i,function(n){a=r.call(t[n]||[],0);for(var i=0,f;f=a[i];++i){if(f.busy)return;f.busy=1;f.apply(e,f.typed?[n].concat(o):o);if(a[i]!==f){i--}f.busy=0}if(t["*"]&&n!="*")e.trigger.apply(e,["*",n].concat(o))});return e});return e};(function(t){var r=/^.+?\/+[^\/]+/,n="EventListener",i="remove"+n,o="add"+n,a="hasAttribute",f="replace",u="popstate",s="hashchange",c="trigger",l=3,p=typeof e!="undefined"&&e,d=typeof document!="undefined"&&document,h=p&&history,g=p&&(h.location||p.location),v=A.prototype,m=d&&d.ontouchstart?"touchstart":"click",x=false,y=t.observable(),b=false,w,S,_,C,E,N=[],O=0;function R(e){return e.split(/[\/?#]/)}function j(e,t){var r=new RegExp("^"+t[f](/\*/g,"([^/?#]+?)")[f](/\.\./,".*")+"$"),n=e.match(r);if(n)return n.slice(1)}function L(e,t){var r;return function(){clearTimeout(r);r=setTimeout(e,t)}}function T(e){w=L(H,1);p[o](u,w);p[o](s,w);d[o](m,F);if(e)H(true)}function A(){this.$=[];t.observable(this);y.on("stop",this.s.bind(this));y.on("emit",this.e.bind(this))}function M(e){return e[f](/^\/|\/$/,"")}function I(e){return typeof e=="string"}function $(e){return(e||g.href||"")[f](r,"")}function k(e){return S[0]=="#"?(e||g.href||"").split(S)[1]||"":$(e)[f](S,"")}function H(e){var t=O==0;if(l<=O)return;O++;N.push(function(){var t=k();if(e||t!=_){y[c]("emit",t);_=t}});if(t){while(N.length){N[0]();N.shift()}O=0}}function F(e){if(e.which!=1||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;var t=e.target;while(t&&t.nodeName!="A")t=t.parentNode;if(!t||t.nodeName!="A"||t[a]("download")||!t[a]("href")||t.target&&t.target!="_self"||t.href.indexOf(g.href.match(r)[0])==-1)return;if(t.href!=g.href){if(t.href.split("#")[0]==g.href.split("#")[0]||S!="#"&&$(t.href).indexOf(S)!==0||!B(k(t.href),t.title||d.title))return}e.preventDefault()}function B(e,t,r){if(h){e=S+M(e);t=t||d.title;r?h.replaceState(null,t,e):h.pushState(null,t,e);d.title=t;b=false;H();return b}return y[c]("emit",k(e))}v.m=function(e,t,r){if(I(e)&&(!t||I(t)))B(e,t,r||false);else if(t)this.r(e,t);else this.r("@",e)};v.s=function(){this.off("*");this.$=[]};v.e=function(e){this.$.concat("@").some(function(t){var r=(t=="@"?C:E)(M(e),M(t));if(typeof r!="undefined"){this[c].apply(null,[t].concat(r));return b=true}},this)};v.r=function(e,t){if(e!="@"){e="/"+M(e);this.$.push(e)}this.on(e,t)};var P=new A;var K=P.m.bind(P);K.create=function(){var e=new A;e.m.stop=e.s.bind(e);return e.m.bind(e)};K.base=function(e){S=e||"#";_=k()};K.exec=function(){H(true)};K.parser=function(e,t){if(!e&&!t){C=R;E=j}if(e)C=e;if(t)E=t};K.query=function(){var e={};var t=g.href||_;t[f](/[?&](.+?)=([^&]*)/g,function(t,r,n){e[r]=n});return e};K.stop=function(){if(x){if(p){p[i](u,w);p[i](s,w);d[i](m,F)}y[c]("stop");x=false}};K.start=function(e){if(!x){if(p){if(document.readyState=="complete")T(e);else p[o]("load",function(){setTimeout(function(){T(e)},1)})}x=true}};K.base();K.parser();t.route=K})(r);var g=function(e){var t="g",n=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,i=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,o=i.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,a={"(":RegExp("([()])|"+o,t),"[":RegExp("([[\\]])|"+o,t),"{":RegExp("([{}])|"+o,t)},f="{ }";var u=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+o,t),f,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/];var s=e,c,l=[],p;function d(e){return e}function h(e,r){if(!r)r=l;return new RegExp(e.source.replace(/{/g,r[2]).replace(/}/g,r[3]),e.global?t:"")}function g(e){if(e===f)return u;var r=e.split(" ");if(r.length!==2||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(e)){throw new Error('Unsupported brackets "'+e+'"')}r=r.concat(e.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" "));r[4]=h(r[1].length>1?/{[\S\s]*?}/:u[4],r);r[5]=h(e.length>3?/\\({|})/g:u[5],r);r[6]=h(u[6],r);r[7]=RegExp("\\\\("+r[3]+")|([[({])|("+r[3]+")|"+o,t);r[8]=e;return r}function v(e){return e instanceof RegExp?c(e):l[e]}v.split=function y(e,t,r){if(!r)r=l;var n=[],i,o,f,u,s=r[6];o=f=s.lastIndex=0;while(i=s.exec(e)){u=i.index;if(o){if(i[2]){s.lastIndex=p(e,i[2],s.lastIndex);continue}if(!i[3])continue}if(!i[1]){c(e.slice(f,u));f=s.lastIndex;s=r[6+(o^=1)];s.lastIndex=f}}if(e&&f<e.length){c(e.slice(f))}return n;function c(e){if(t||o)n.push(e&&e.replace(r[5],"$1"));else n.push(e)}function p(e,t,r){var n,i=a[t];i.lastIndex=r;r=1;while(n=i.exec(e)){if(n[1]&&!(n[1]===t?++r:--r))break}return r?e.length:i.lastIndex}};v.hasExpr=function b(e){return l[4].test(e)};v.loopKeys=function w(e){var t=e.match(l[9]);return t?{key:t[1],pos:t[2],val:l[0]+t[3].trim()+l[1]}:{val:e.trim()}};v.hasRaw=function(e){return l[10].test(e)};v.array=function S(e){return e?g(e):l};function m(e){if((e||(e=f))!==l[8]){l=g(e);c=e===f?d:h;l[9]=c(u[9]);l[10]=c(u[10])}s=e}function x(e){var t;e=e||{};t=e.brackets;Object.defineProperty(e,"brackets",{set:m,get:function(){return s},enumerable:true});p=e;m(t)}Object.defineProperty(v,"settings",{set:x,get:function(){return p}});v.settings=typeof r!=="undefined"&&r.settings||{};v.set=m;v.R_STRINGS=i;v.R_MLCOMMS=n;v.S_QBLOCKS=o;return v}();var v=function(){var t={};function r(e,r){if(!e)return e;return(t[e]||(t[e]=i(e))).call(r,n)}r.haveRaw=g.hasRaw;r.hasExpr=g.hasExpr;r.loopKeys=g.loopKeys;r.errorHandler=null;function n(e,t){if(r.errorHandler){e.riotData={tagName:t&&t.root&&t.root.tagName,_riot_id:t&&t._riot_id};r.errorHandler(e)}}function i(e){var t=f(e);if(t.slice(0,11)!=="try{return ")t="return "+t;return new Function("E",t+";")}var o=RegExp(g.S_QBLOCKS,"g"),a=/\x01(\d+)~/g;function f(e){var t=[],r,n=g.split(e.replace(/\u2057/g,'"'),1);if(n.length>2||n[0]){var i,o,f=[];for(i=o=0;i<n.length;++i){r=n[i];if(r&&(r=i&1?c(r,1,t):'"'+r.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"'))f[o++]=r}r=o<2?f[0]:"["+f.join(",")+'].join("")'}else{r=c(n[1],0,t)}if(t[0])r=r.replace(a,function(e,r){return t[r].replace(/\r/g,"\\r").replace(/\n/g,"\\n")});return r}var u={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},s=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/;function c(e,t,r){if(e[0]==="=")e=e.slice(1);e=e.replace(o,function(e,t){return e.length>2&&!t?""+(r.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1");if(e){var n=[],i=0,a;while(e&&(a=e.match(s))&&!a.index){var f,c,l=/,|([[{(])|$/g;e=RegExp.rightContext;f=a[2]?r[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];while(c=(a=l.exec(e))[1])p(c,l);c=e.slice(0,a.index);e=RegExp.rightContext;n[i++]=h(c,1,f)}e=!i?h(e,t):i>1?"["+n.join(",")+'].join(" ").trim()':n[0]}return e;function p(t,r){var n,i=1,o=u[t];o.lastIndex=r.lastIndex;while(n=o.exec(e)){if(n[0]===t)++i;else if(!--i)break}r.lastIndex=i?e.length:o.lastIndex}}var l='"in this?this:'+(typeof e!=="object"?"global":"window")+").",p=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,d=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function h(e,t,r){var n;e=e.replace(p,function(e,t,r,i,o){if(r){i=n?0:i+e.length;if(r!=="this"&&r!=="global"&&r!=="window"){e=t+'("'+r+l+r;if(i)n=(o=o[i])==="."||o==="("||o==="["}else if(i){n=!d.test(o.slice(i))}}return e});if(n){e="try{return "+e+"}catch(e){E(e,this)}"}if(r){e=(n?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+r+'":""'}else if(t){e="function(v){"+(n?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'}return e}r.parse=function(e){return e};r.version=g.version="v2.3.21";return r}();var m=function(e){var t=/<yield\s+to=(['"])?@\1\s*>([\S\s]+?)<\/yield\s*>/.source,r={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},n="div";e=e&&e<10;var i=e?p:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;function o(e,t){var r=e&&e.match(/^\s*<([-\w]+)/),o=r&&r[1].toLowerCase(),u=ee(n);e=f(e,t||"");if(i.test(o))u=a(u,e,o);else u.innerHTML=e;u.stub=true;return u}function a(e,t,n){var i=n[0]==="o",o=i?"select>":"table>";e.innerHTML="<"+o+t.trim()+"</"+o;o=e.firstChild;if(i){o.selectedIndex=-1}else{var a=r[n];if(a&&o.children.length===1)o=re(a,o)}return o}function f(e,r){if(!/<yield\b/i.test(e))return e;var n=0;e=e.replace(/<yield\s+from=['"]([-\w]+)['"]\s*(?:\/>|>\s*<\/yield\s*>)/gi,function(e,i){var o=r.match(RegExp(t.replace("@",i),"i"));++n;return o&&o[2]||""});return n?e:e.replace(/<yield\s*(?:\/>|>\s*<\/yield\s*>)/gi,r)}return o}(h);function x(e,t,r){var n={};n[e.key]=t;if(e.pos)n[e.pos]=r;return n}function y(e,t){var r=t.length,n=e.length,i;while(r>n){i=t[--r];t.splice(r,1);i.unmount()}}function b(e,t){Object.keys(e.tags).forEach(function(r){var n=e.tags[r];if(Q(n))M(n,function(e){K(e,r,t)});else K(n,r,t)})}function w(e,t,r){var n=e._root,i;e._virts=[];while(n){i=n.nextSibling;if(r)t.insertBefore(n,r._root);else t.appendChild(n);e._virts.push(n);n=i}}function S(e,t,r,n){var i=e._root,o,a=0;for(;a<n;a++){o=i.nextSibling;t.insertBefore(i,r._root);i=o}}function _(e,t,r){$(e,"each");var n=typeof H(e,"no-reorder")!==u||$(e,"no-reorder"),i=U(e),a=o[i]||{tmpl:e.outerHTML},f=p.test(i),s=e.parentNode,c=document.createTextNode(""),l=B(e),d=/^option$/i.test(i),h=[],g=[],m,_=e.tagName=="VIRTUAL";r=v.loopKeys(r);r.isLoop=true;s.insertBefore(c,e);t.one("before-mount",function(){e.parentNode.removeChild(e);if(s.stub)s=t.root});r.update=function(){var u=v(r.val,t),p=document.createDocumentFragment();if(!Q(u)){m=u||false;u=m?Object.keys(u).map(function(e){return x(r,e,u[e])}):[]}u.forEach(function(u,c){var d=n&&u instanceof Object,v=g.indexOf(u),y=~v&&d?v:c,C=h[y],E;u=!m&&r.key?x(r,u,c):u;if(!d&&!C||d&&!~v||!C){C=new N(a,{parent:t,isLoop:true,hasImpl:!!o[i],root:f?s:e.cloneNode(),item:u},e.innerHTML);C.mount();E=C.stub||C.root;if(_)C._root=C.root.firstChild;if(c==h.length){if(_)w(C,p);else p.appendChild(E)}else{if(_)w(C,s,h[c]);else s.insertBefore(E,h[c].root);g.splice(c,0,u)}h.splice(c,0,C);y=c}else C.update(u);if(y!==c&&d){if(_)S(C,s,h[c],e.childNodes.length);else s.insertBefore(C.root,h[c].root);if(r.pos)C[r.pos]=c;h.splice(c,0,h.splice(y,1)[0]);g.splice(c,0,g.splice(y,1)[0]);if(!l&&C.tags)b(C,c)}C._item=u;z(C,"_parent",t)});y(u,h);if(d)s.appendChild(p);else s.insertBefore(p,c);if(l)t.tags[i]=h;g=u.slice()};return r}var C=function(t){if(!e)return{add:function(){},inject:function(){}};var r=function(){var e=ee("style");F(e,"type","text/css");var t=re("style[type=riot]");if(t){if(t.id)e.id=t.id;t.parentNode.replaceChild(e,t)}else document.getElementsByTagName("head")[0].appendChild(e);return e}();var n=r.styleSheet,i="";Object.defineProperty(t,"styleNode",{value:r,writable:true});return{add:function(e){i+=e},inject:function(){if(i){if(n)n.cssText+=i;else r.innerHTML+=i;i=""}}}}(r);function E(e,t,r){var n={parent:{children:r}};X(e,function(r,n){var i=r.nodeType,o=n.parent,a,f;if(i==3&&r.parentNode.tagName!="STYLE"&&v.hasExpr(r.nodeValue))o.children.push({dom:r,expr:r.nodeValue});if(i!=1)return n;if(a=H(r,"each")){o.children.push(_(r,t,a));return false}if(f=H(r,"if")){$(r,"if");a={isIf:true,expr:f,dom:r,children:[]};o.children.push(a);o=a}if(f=ie(r)){o.children.push({isNamed:true,dom:r,expr:f})}var u=[],s=false;M(r.attributes,function(e){var t=e.name,n=t.split("__")[1];var i=v.hasExpr(e.value);if(t==="if")return;if(t==="name"&&i)s=true;f={dom:r,expr:e.value,attr:n||e.name,bool:n};u.push(f);if(!i)return;o.children.push(f);if(n){$(r,t);return false}});var c=B(r);if(c&&r!==e){o.children.push({isTag:true,dom:r,impl:c,ownAttrs:u,nameHasExpression:s});return false}return{parent:o}},n)}function N(e,o,a){var f=r.observable(this),l=ne(o.opts)||{},p=o.parent,h=o.isLoop,g=o.hasImpl,x=o.ownAttrs,y=J(o.item),b=[],w=[],S=o.root,_=e.fn,C=S.tagName.toLowerCase(),N=[],O;if(_&&S._tag)S._tag.unmount(true);this.isMounted=false;S.isLoop=h;S._tag=this;z(this,"_riot_id",++n);V(this,{parent:p,root:S,opts:l,tags:{}},y);O=m(e.tmpl,a);function R(){var e=g&&h?f:p||f;if(x){M(x||[],function(e){var t=e.hasOwnProperty("value")?e.value:e.expr;l[k(e.attr)]=t})}else{M(S.attributes,function(t){var r=t.value,n=v.hasExpr(r);if(n&&x)return;l[k(t.name)]=n?v(r,e):r})}}function L(e){for(var t in y){if(typeof f[t]!==c&&Z(f,t))f[t]=e[t]}}function T(){if(!f.parent||!h)return;M(Object.keys(f.parent),function(e){var t=!G(d,e)&&G(N,e);if(typeof f[e]===c||t){if(!t)N.push(e);f[e]=f.parent[e]}})}z(this,"update",function(e){e=J(e);T();if(e&&typeof y===s){L(e);y=e}V(f,e);R();f.trigger("update",e);j(b,f);fe(function(){f.trigger("updated")});return this});z(this,"mixin",function(){M(arguments,function(e){var t;e=typeof e===u?r.mixin(e):e;if(I(e)){t=new e;e=e.prototype}else t=e;M(Object.getOwnPropertyNames(e),function(e){if(e!="init")f[e]=I(t[e])?t[e].bind(f):t[e]});if(t.init)t.init.bind(f)()});return this});z(this,"mount",function(){R();if(_)_.call(f,l);if(e.attrs||g){W(e.attrs,function(e,t){F(S,e,t)});E(f.root,f,b)}E(O,f,b);if(p)p.on("unmount",f.unmount);if(!f.parent||h)f.update(y);f.trigger("before-mount");if(h&&!g){f.root=S=O.firstChild}else{while(O.firstChild)S.appendChild(O.firstChild);if(S.stub)f.root=S=p.root}if(!f.parent||f.parent.isMounted){f.isMounted=true;f.trigger("mount")}else f.parent.one("mount",function(){if(!Y(f.root)){f.parent.isMounted=f.isMounted=true;f.trigger("mount")}})});z(this,"unmount",function(e){var r=S,n=r.parentNode,o,a=i.indexOf(f);f.trigger("before-unmount");if(~a)i.splice(a,1);if(this._virts){M(this._virts,function(e){if(e.parentNode)e.parentNode.removeChild(e)})}if(n){if(p){o=D(p);if(Q(o.tags[C]))M(o.tags[C],function(e,t){if(e._riot_id==f._riot_id)o.tags[C].splice(t,1)});else o.tags[C]=t}else while(r.firstChild)r.removeChild(r.firstChild);if(!e)n.removeChild(r);else $(n,"riot-tag")}f.trigger("unmount");if(p)p.off("unmount",f.unmount);f.off("*");f.isMounted=false;delete S._tag})}function O(t,r,n,i){n[t]=function(t){var o=i._parent,a=i._item,f;if(!a)while(o&&!a){a=o._item;o=o._parent}t=t||e.event;if(Z(t,"currentTarget"))t.currentTarget=n;if(Z(t,"target"))t.target=t.srcElement;if(Z(t,"which"))t.which=t.charCode||t.keyCode;t.item=a;if(r.call(i,t)!==true&&!/radio|check/.test(n.type)){if(t.preventDefault)t.preventDefault();t.returnValue=false}if(!t.preventUpdate){f=a?D(o):i;f.update()}}}function R(e,t,r){if(!e)return;e.insertBefore(r,t);e.removeChild(t)}function j(e,t){M(e,function(e,r){var n=e.dom,i=e.attr,o=v(e.expr,t),u=n&&n.parentNode;if(e.bool)o=o?i:false;else if(o==null)o="";if(u&&u.tagName=="TEXTAREA"){o=(""+o).replace(/riot-/g,"");u.value=o}var c=e.value;e.value=o;if(e.isIf)return A(e,c,o,t);if(e.isTag)return T(e,t);if(e.isLoop)return e.update();if(e.isNamed)return L(e,c,o,t);if(c===o)return;if(!i){n.nodeValue=""+o;return}$(n,i);if(I(o)){O(i,o,n,t)}else if(/^(show|hide)$/.test(i)){if(i=="hide")o=!o;n.style.display=o?"":"none"}else if(i=="value"){n.value=o}else if(ae(i,a)&&i!=f){if(o)F(n,i.slice(a.length),o)}else{if(e.bool){n[i]=o;if(!o)return}if(o===0||o&&typeof o!==s)F(n,i,o)}})}function L(e,t,r,n){if(e.done)return;var i=D(n);oe(e.dom,i,r);e.done=true}function T(e,t){if(e.tag){e.tag.update();return}var r={root:e.dom,parent:t,hasImpl:true,ownAttrs:e.ownAttrs};e.tag=q(e.impl,r,e.dom.innerHTML,t,e.nameHasExpression);e.tag.mount();e.tag.update()}function A(e,t,r,n){if(e.started&&!r==!t){if(r)j(e.children,n);return}var i,o=e.dom;i=e.stub=e.stub||document.createTextNode("");if(r){j(e.children,n);R(i.parentNode,i,o)}else{if(o.parentNode)R(o.parentNode,o,i);else n.stub=i}e.started=true}function M(e,t){var r=e?e.length:0;for(var n=0,i;n<r;n++){i=e[n];if(i!=null&&t(i,n)===false)n--}return e}function I(e){return typeof e===l||false}function $(e,t){e.removeAttribute(t)}function k(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function H(e,t){return e.getAttribute(t)}function F(e,t,r){e.setAttribute(t,r)}function B(e){return e.tagName&&o[H(e,f)||e.tagName.toLowerCase()]}function P(e,t,r){var n=r.tags[t];if(n){if(!Q(n))if(n!==e)r.tags[t]=[n];if(!G(r.tags[t],e))r.tags[t].push(e)}else{r.tags[t]=e}}function K(e,t,r){var n=e.parent,i;if(!n)return;i=n.tags[t];if(Q(i))i.splice(r,0,i.splice(i.indexOf(e),1)[0]);else P(e,t,n)}function q(e,t,r,n,i){var o=new N(e,t,r),a=U(t.root,i),f=D(n);o.parent=f;o._parent=n;P(o,a,f);if(f!==n)P(o,a,n);t.root.innerHTML="";return o}function D(e){var t=e;while(!B(t.root)){if(!t.parent)break;t=t.parent}return t}function z(e,t,r,n){Object.defineProperty(e,t,V({value:r,enumerable:false,writable:false,configurable:false},n));return e}function U(e,t){var r=B(e),n=!t&&H(e,"name"),i=n&&!v.hasExpr(n)?n:r?r.name:e.tagName.toLowerCase();return i}function V(e){var t,r=arguments;for(var n=1;n<r.length;++n){if(t=r[n]){for(var i in t){if(Z(e,i))e[i]=t[i]}}}return e}function G(e,t){return~e.indexOf(t)}function Q(e){return Array.isArray(e)||e instanceof Array}function Z(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return typeof e[t]===c||r&&r.writable}function J(e){if(!(e instanceof N)&&!(e&&typeof e.trigger==l))return e;var t={};for(var r in e){if(!G(d,r))t[r]=e[r]}return t}function X(e,t,r){if(e){var n=t(e,r);if(n===false)return;else{e=e.firstChild;while(e){X(e,t,n);e=e.nextSibling}}}}function W(e,t){var r,n=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;while(r=n.exec(e)){t(r[1].toLowerCase(),r[2]||r[3]||r[4])}}function Y(e){while(e){if(e.inStub)return true;e=e.parentNode}return false}function ee(e){return document.createElement(e)}function te(e,t){return(t||document).querySelectorAll(e)}function re(e,t){return(t||document).querySelector(e)}function ne(e){function t(){}t.prototype=e;return new t}function ie(e){return H(e,"id")||H(e,"name")}function oe(e,t,r){r=r||ie(e);if(!r)return;var n=t[r];var i=Q(n);if(!n)t[r]=e;else if(!i||i&&!G(n,e)){if(i)n.push(e);else t[r]=[n,e]}}function ae(e,t){return e.slice(0,t.length)===t}var fe=function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame;if(!t||/iP(ad|hone|od).*OS 6/.test(e.navigator.userAgent)){var r=0;t=function(e){var t=Date.now(),n=Math.max(16-(t-r),0);setTimeout(function(){e(r=t+n)},n)}}return t}(e||{});function ue(e,t,r){var n=o[t],a=e._innerHTML=e._innerHTML||e.innerHTML;e.innerHTML="";if(n&&e)n=new N(n,{root:e,opts:r},a);if(n&&n.mount){n.mount();if(!G(i,n))i.push(n)}return n}r.util={brackets:g,tmpl:v};r.mixin=function(){var e={};return function(t,r){if(!r)return e[t];e[t]=r}}();r.tag=function(e,t,r,n,i){if(I(n)){i=n;if(/^[\w\-]+\s?=/.test(r)){n=r;r=""}else n=""}if(r){if(I(r))i=r;else C.add(r)}o[e]={name:e,tmpl:t,attrs:n,fn:i};return e};r.tag2=function(e,t,r,n,i,a){if(r)C.add(r);o[e]={name:e,tmpl:t,attrs:n,fn:i};return e};r.mount=function(e,t,r){var n,i,a=[];function c(e){var t="";M(e,function(e){if(!/[^-\w]/.test(e))t+=",*["+f+"="+e.trim()+"]"});return t}function l(){var e=Object.keys(o);return e+c(e)}function p(e){var n;if(e.tagName){if(t&&(!(n=H(e,f))||n!=t))F(e,f,t);var i=ue(e,t||e.getAttribute(f)||e.tagName.toLowerCase(),r);if(i)a.push(i)}else if(e.length)M(e,p)}C.inject();if(typeof t===s){r=t;t=0}if(typeof e===u){if(e==="*")e=i=l();else e+=c(e.split(","));n=e?te(e):[]}else n=e;if(t==="*"){t=i||l();if(n.tagName)n=te(t,n);else{var d=[];M(n,function(e){d.push(te(t,e))});n=d}t=0}if(n.tagName)p(n);else M(n,p);return a};r.update=function(){return M(i,function(e){e.update()})};r.Tag=N;var se=function(){function t(t){var r=e[t];if(r)return r;throw new Error(t+" parser not found.")}function r(e,t){if(t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}}return e}var n={html:{jade:function(e,n,i){n=r({pretty:true,filename:i,doctype:"html"},n);return t("jade").render(e,n)}},css:{less:function(e,n,i,o){var a;i=r({sync:true,syncImport:true,filename:o},i);t("less").render(n,i,function(e,t){if(e)throw e;a=t.css});return a}},js:{es6:function(e,n){n=r({blacklist:["useStrict","strict","react"],sourceMaps:false,comments:false},n);return t("babel").transform(e,n).code},babel:function(e,n,i){return t("babel").transform(e,r({filename:i},n)).code},coffee:function(e,n){return t("CoffeeScript").compile(e,r({bare:true},n))},livescript:function(e,n){return t("livescript").compile(e,r({bare:true,header:false},n))},typescript:function(e,r){return t("typescript")(e,r)},none:function(e){return e}}};n.js.javascript=n.js.none;n.js.coffeescript=n.js.coffee;return n}();r.parsers=se;var ce=function(){var e=/"[^"\n\\]*(?:\\[\S\s][^"\n\\]*)*"|'[^'\n\\]*(?:\\[\S\s][^'\n\\]*)*'/.source;var t=g.R_STRINGS.source;var n=/ *([-\w:\xA0-\xFF]+) ?(?:= ?('[^']*'|"[^"]*"|\S+))?/g;var i=RegExp(/<!--(?!>)[\S\s]*?-->/.source+"|"+e,"g");var o=/<([-\w]+)(?:\s+([^"'\/>]*(?:(?:"[^"]*"|'[^']*'|\/[^>])[^'"\/>]*)*)|\s*)(\/?)>/g;var a=RegExp("^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|"+"compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|"+"multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|"+"selected|sortable|truespeed|typemustmatch)$");var f=["style","src","d"];var u=/^(?:input|img|br|wbr|hr|area|base|col|embed|keygen|link|meta|param|source|track)$/;var s=/<pre(?:\s+(?:[^">]*|"[^"]*")*)?>([\S\s]+?)<\/pre\s*>/gi;var c=/^"(?:number|date(?:time)?|time|month|email|color)\b/i;var l=/[ \t]+$/gm;var p='"',d="'";function h(e){var t,r=i;if(~e.indexOf("\r")){e=e.replace(/\r\n?/g,"\n")}r.lastIndex=0;while(t=r.exec(e)){if(t[0][0]==="<"){e=RegExp.leftContext+RegExp.rightContext;r.lastIndex=t[3]+1}}return e}function v(e,t){var r=[],i,o,u;n.lastIndex=0;e=e.replace(/\s+/g," ");while(i=n.exec(e)){var s=i[1].toLowerCase(),l=i[2];if(!l){r.push(s)}else{if(l[0]!==p){l=p+(l[0]===d?l.slice(1,-1):l)+p}if(s==="type"&&c.test(l)){o=l}else{if(/\u0001\d/.test(l)){if(s==="value")u=1;else if(a.test(s))s="__"+s;else if(~f.indexOf(s))s="riot-"+s}r.push(s+"="+l)}}}if(o){if(u)o=p+t._bp[0]+d+o.slice(1,-1)+d+t._bp[1]+p;r.push("type="+o)}return r.join(" ")}function m(e,t,r){var n=r._bp;if(e&&n[4].test(e)){var i=t.expr&&(t.parser||t.type)?E:0,o=g.split(e,0,n),a,f;for(var u=1;u<o.length;u+=2){a=o[u];if(a[0]==="^"){a=a.slice(1)}else if(i){f=a[0]==="=";a=i(f?a.slice(1):a,t).trim();if(a.slice(-1)===";")a=a.slice(0,-1);if(f)a="="+a}o[u]=""+(r.push(a)-1)+n[1]}e=o.join("")}return e}function x(e,t){if(t.length){e=e.replace(/\u0001(\d+)/g,function(e,r){var n=t[r];if(n[0]==="="){n=n.replace(g.R_STRINGS,function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")})}return t._bp[0]+n.trim().replace(/[\r\n]+/g," ").replace(/"/g,"⁗")})}return e}function y(e,t,r){e=m(e,t,r).replace(o,function(e,t,n,i){t=t.toLowerCase();i=i&&!u.test(t)?"></"+t:"";if(n)t+=" "+v(n,r);return"<"+t+i+">"});if(!t.whitespace){var n=[];if(/<pre[\s>]/.test(e)){e=e.replace(s,function(e){n.push(e);return""})}e=e.trim().replace(/\s+/g," ");if(n.length)e=e.replace(/\u0002/g,function(){return n.shift()})}if(t.compact)e=e.replace(/>[ \t]+<([-\w\/])/g,"><$1");return x(e,r).replace(l,"")}function b(e,t,r){if(Array.isArray(t)){r=t;t={}}else{if(!r)r=[];if(!t)t={}}r._bp=g.array(t.brackets);return y(h(e),t,r)}var w=/^[ \t]*([$_A-Za-z][$\w]*)\s*\([^()]*\)\s*{/m;var S=RegExp("[{}]|"+g.S_QBLOCKS,"g");var _=RegExp(g.R_MLCOMMS.source+"|//[^\r\n]*|"+g.S_QBLOCKS,"g");function C(e){var t=[],r,n,i,o,a=RegExp;if(~e.indexOf("/"))e=f(e,_);while(r=e.match(w)){t.push(a.leftContext);e=a.rightContext;i=u(e,S);o=r[1];n=!/^(?:if|while|for|switch|catch|function)$/.test(o);o=n?r[0].replace(o,"this."+o+" = function"):r[0];t.push(o,e.slice(0,i));e=e.slice(i);if(n&&!/^\s*.\s*bind\b/.test(e))t.push(".bind(this)")}return t.length?t.join("")+e:e;function f(e,t,r){t.lastIndex=0;while(r=t.exec(e)){if(r[0][0]==="/"&&!r[1]&&!r[2]){e=a.leftContext+" "+a.rightContext;t.lastIndex=r[3]+1}}return e}function u(e,t){var r,n=1;t.lastIndex=0;while(n&&(r=t.exec(e))){if(r[0]==="{")++n;else if(r[0]==="}")--n}return n?e.length:t.lastIndex}}function E(e,t,r,n,i){if(!/\S/.test(e))return"";if(!r)r=t.type;var o=t.parser||(r?se.js[r]:C);if(!o){throw new Error('JS parser not found: "'+r+'"')}return o(e,n,i).replace(/\r\n?/g,"\n").replace(l,"")}function N(e,t,r,n){if(typeof t==="string"){n=r;r=t;t={}}if(r&&typeof r==="object"){n=r;r=""}if(!n)n={};return E(e,t||{},r,n.parserOptions,n.url)}var O=RegExp("([{}]|^)[ ;]*([^@ ;{}][^{}]*)(?={)|"+e,"g");function R(e,t){var r=":scope";return t.replace(O,function(t,n,i){if(!i)return t;i=i.replace(/[^,]+/g,function(t){var n=t.trim();if(!n||n==="from"||n==="to"||n.slice(-1)==="%"){return t}if(n.indexOf(r)<0){n=e+" "+n+',[riot-tag="'+e+'"] '+n}else{n=n.replace(r,e)+","+n.replace(r,'[riot-tag="'+e+'"]')}return t.slice(-1)===" "?n+" ":n});return n?n+" "+i:i})}function j(e,t,r,n){var i=(n||(n={})).scoped;if(r){if(r==="scoped-css"){i=true}else if(se.css[r]){e=se.css[r](t,e,n.parserOpts||{},n.url)}else if(r!=="css"){throw new Error('CSS parser not found: "'+r+'"')}}e=e.replace(g.R_MLCOMMS,"").replace(/\s+/g," ").trim();if(i){if(!t){throw new Error("Can not parse scoped CSS without a tagName")}e=R(t,e)}return e}function L(e,t,r){if(t&&typeof t==="object"){r=t;t=""}else if(!r)r={};return j(e,r.tagName,t,r)}var T=/\stype\s*=\s*(?:(['"])(.+?)\1|(\S+))/i;var A="\\s*=\\s*("+t+"|{[^}]+}|\\S+)";var M=/\/>\n|^<(?:\/?[-\w]+\s*|[-\w]+\s+[-\w:\xA0-\xFF][\S\s]*?)>\n/;function I(e,t){if(!e)return"''";e=d+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+d;return t&&~e.indexOf("\n")?e.replace(/\n/g,"\\n"):e}function $(e,t,r,n,i,o){var a=", ",f="}"+(o.length?", "+I(o._bp[8]):"")+");";if(i&&i.slice(-1)!=="\n")f="\n"+f;return"riot.tag2('"+e+d+a+I(t,1)+a+I(r)+a+I(n)+", function(opts) {\n"+i+f}function k(e){if(/<[-\w]/.test(e)){var t,r=e.lastIndexOf("<"),n=e.length;while(~r){t=e.slice(r,n).match(M);if(t){r+=t.index+t[0].length;return[e.slice(0,r),e.slice(r)]}n=r;r=e.lastIndexOf("<",r-1)}}return["",e]}function H(e){if(e){var t=e.match(T);t=t&&(t[2]||t[3]);if(t){return t.replace("text/","")}}return""}function F(e,t){if(e){var r=e.match(RegExp("\\s"+t+A,"i"));r=r&&r[1];if(r){return/^['"]/.test(r)?r.slice(1,-1):r}}return""}function B(e){var t=F(e,"options");return t?JSON.parse(t):null}function P(e,t,r,n){var i=H(r);return E(e,t,i,B(r),n)}function K(e,t,r,n,i){var o={parserOpts:B(r),scoped:r&&/\sscoped(\s|=|$)/i.test(r),url:n};return j(e,i,H(r)||t.style,o)}function q(e,t,r,n){var i=se.html[r];if(!i){throw new Error('Template parser not found: "'+r+'"')}return i(e,n,t)}var D=RegExp(/^([ \t]*)<([-\w]+)(?:\s+([^'"\/>]+(?:(?:@|\/[^>])[^'"\/>]*)*)|\s*)?(?:\/>|>[ \t]*\n?([\S\s]*)^\1<\/\2\s*>|>(.*)<\/\2\s*>)/.source.replace("@",t),"gim"),z=/<script(\s+[^>]*)?>\n?([\S\s]*?)<\/script\s*>/gi,U=/<style(\s+[^>]*)?>\n?([\S\s]*?)<\/style\s*>/gi;function V(e,t,r){var n=[],i;if(!t)t={};i=t.exclude?function(e){return t.exclude.indexOf(e)<0}:function(){return 1};if(!r)r="";var o=g.array(t.brackets);if(t.template){e=q(e,r,t.template,t.templateOptions)}e=h(e).replace(D,function(e,a,f,u,s,c){var p="",d="",h="",g=[];g._bp=o;f=f.toLowerCase();u=u&&i("attribs")?x(v(m(u,t,g),g),g):"";if((s||(s=c))&&/\S/.test(s)){if(c){if(i("html"))h=y(c,t,g)}else{s=s.replace(RegExp("^"+a,"gm"),"");s=s.replace(U,function(e,n,o){if(i("css")){d+=(d?" ":"")+K(o,t,n,r,f)}return""});s=s.replace(z,function(e,n,o){if(i("js")){var a=P(o,t,n,r);if(a)p+=(p?"\n":"")+a}return""});var b=k(s.replace(l,""));if(i("html")){h=y(b[0],t,g)}if(i("js")){s=E(b[1],t,null,null,r);if(s)p+=(p?"\n":"")+s}}}p=/\S/.test(p)?p.replace(/\n{3,}/g,"\n\n"):"";if(t.entities){n.push({tagName:f,html:h,css:d,attribs:u,js:p});return""}return $(f,h,d,u,p,g)});if(t.entities)return n;return e}r.util.compiler={compile:V,html:b,css:L,js:N,version:"v2.3.22"};return V}();r.compile=function(){var e,n;function i(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4&&(n.status===200||!n.status&&n.responseText.length)){t(n.responseText,r,e)}};n.open("GET",e,true);n.send("")}function o(e,t){if(typeof e===u){var r=ee("script"),n=document.documentElement;if(t)e+="\n//# sourceURL="+t+".js";r.text=e;n.appendChild(r);n.removeChild(r)}}function a(t,r){var a=te('script[type="riot/tag"]'),f=a.length;function u(){e.trigger("ready");n=true;if(t)t()}function s(e,t,r){var n=ce(e,t,r);o(n,r);if(!--f)u()}if(!f)u();else{for(var c=0;c<a.length;++c){var l=a[c],p=V({template:H(l,"template")},r),d=H(l,"src");d?i(d,s,p):s(l.innerHTML,p)}}}return function(f,c,l){if(typeof f===u){if(c&&typeof c===s){l=c;c=false}if(/^\s*</m.test(f)){var p=ce(f,l);if(c!==true)o(p);if(I(c))c(p,f,l);return p}i(f,function(e,t,r){var n=ce(e,t,r);o(n,r);if(c)c(n,e,t)})}else{if(I(f)){l=c;c=f}else{l=f;c=t}if(n){return c&&c()}if(e){if(c)e.on("ready",c)}else{e=r.observable();a(c,l)}}}}();var le=r.mount;r.mount=function(e,t,n){var i;r.compile(function(){i=le(e,t,n)});return i};if(typeof exports===s)module.exports=r;else if(typeof define===l&&typeof define.amd!==c)define(function(){return r});else e.riot=r})(typeof window!="undefined"?window:void 0);
