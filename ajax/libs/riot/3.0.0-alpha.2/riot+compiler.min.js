/* Riot v3.0.0-alpha.2, @license MIT, (c) 2015 Muut Inc. + contributors */
!function(e,t){"use strict";function n(e,t,n){var r={};return r[e.key]=t,e.pos&&(r[e.pos]=n),r}function r(e,t){for(var n,r=t.length,i=e.length;r>i;)n=t[--r],t.splice(r,1),n.unmount()}function i(e,t){Object.keys(e.tags).forEach(function(n){var r=e.tags[n];L(r)?g(r,function(e){S(e,n,t)}):S(r,n,t)})}function o(e,t,o){v(e,"each");var a,s=typeof y(e,"no-reorder")!==Y||v(e,"no-reorder"),c=O(e),f=Z[c]||{tmpl:e.outerHTML},l=re.test(c),p=e.parentNode,d=document.createTextNode(""),g=w(e),h=/^option$/i.test(c),m=[],x=[],b="VIRTUAL"==e.tagName;return o=ue.loopKeys(o),o.isLoop=!0,p.insertBefore(d,e),t.one("before-mount",function(){e.parentNode.removeChild(e),p.stub&&(p=t.root)}),o.update=function(){var v=ue(o.val,t),y=document.createDocumentFragment();L(v)||(a=v||!1,v=a?Object.keys(v).map(function(e){return n(o,e,v[e])}):[]),v.forEach(function(r,d){var h,v=s&&r instanceof Object,w=x.indexOf(r),_=~w&&v?w:d,S=m[_];r=!a&&o.key?n(o,r,d):r,!v&&!S||v&&!~w||!S?(S=new u(f,{parent:t,isLoop:!0,hasImpl:!!Z[c],root:l?p:e.cloneNode(),item:r},e.innerHTML),S.mount(),h=S.stub||S.root,d==m.length?b?V(S,y):y.appendChild(h):(b?V(S,p,m[d]):p.insertBefore(h,m[d].root),x.splice(d,0,r)),m.splice(d,0,S),_=d):S.update(r),_!==d&&v&&(b?U(S,p,m[d]):p.insertBefore(S.root,m[d].root),o.pos&&(S[o.pos]=d),m.splice(d,0,m.splice(_,1)[0]),x.splice(d,0,x.splice(_,1)[0]),!g&&S.tags&&i(S,d)),S._item=r,N(S,"_parent",t)}),r(v,m),h?p.appendChild(y):p.insertBefore(y,d),g&&(t.tags[c]=m),x=v.slice()},o}function a(e,t,n){var r={parent:{children:n}};I(e,function(n,r){var i,a,u=n.nodeType,s=r.parent;if(3==u&&"STYLE"!=n.parentNode.tagName&&ue.hasExpr(n.nodeValue)&&s.children.push({dom:n,expr:n.nodeValue}),1!=u)return r;if(i=y(n,"each"))return s.children.push(o(n,t,i)),!1;(a=y(n,"if"))&&(v(n,"if"),i={isIf:!0,expr:a,dom:n,children:[]},s.children.push(i),s=i),(a=P(n))&&s.children.push({isNamed:!0,dom:n,expr:a});var c=[],f=!1;g(n.attributes,function(e){var t=e.name,r=t.split("__")[1],i=ue.hasExpr(e.value);return"if"!==t&&("name"===t&&i&&(f=!0),a={dom:n,expr:e.value,attr:r||e.name,bool:r},c.push(a),i)?(s.children.push(a),r?(v(n,t),!1):void 0):void 0});var l=w(n);return l&&n!==e?(i={dom:n,impl:l,isTag:!0,ownAttrs:c,nameHasExpression:f},"VIRTUAL"==n.tagName&&(i.isVirtual=!0),s.children.push(i),!1):{parent:s}},r)}function u(e,n,r){function i(){var e=m&&d?c:p||c;y?g(y||[],function(e){var t=e.hasOwnProperty("value")?e.value:e.expr;l[x(e.attr)]=t}):g(S.attributes,function(t){var n=t.value,r=ue.hasExpr(n);r&&y||(l[x(t.name)]=r?ue(n,e):n)})}function o(e){for(var t in w)typeof c[t]!==te&&j(c,t)&&(c[t]=e[t])}function u(){c.parent&&d&&g(Object.keys(c.parent),function(e){var t=!T(ie,e)&&T(H,e);(typeof c[e]===te||t)&&(t||H.push(e),c[e]=c.parent[e])})}var s,c=z.observable(this),l=B(n.opts)||{},p=n.parent,d=n.isLoop,m=n.hasImpl,y=n.ownAttrs,w=A(n.item),_=[],S=n.root,E=e.fn,O=S.tagName.toLowerCase(),I={},k={},H=[];E&&S._tag&&S._tag.unmount(!0),this.isMounted=!1,S.isLoop=d,S._tag=this,N(this,"_riot_id",++G),R(this,{parent:p,root:S,opts:l,tags:{}},w),g(S.attributes,function(e){var t=e.value;ue.hasExpr(t)&&(I[e.name]=t)}),s=se(e,r,k),k=k.attrs||"",N(this,"update",function(e){return e=A(e),u(),e&&typeof w===ee&&(o(e),w=e),R(c,e),i(),c.trigger("update",e),f(_,c),fe(function(){c.trigger("updated")}),this}),N(this,"mixin",function(){return g(arguments,function(e){var t;e=typeof e===Y?z.mixin(e):e,h(e)?(t=new e,e=e.prototype):t=e,g(Object.getOwnPropertyNames(e),function(e){"init"!=e&&(c[e]=h(t[e])?t[e].bind(c):t[e])}),t.init&&t.init.bind(c)()}),this}),N(this,"mount",function(){i();var e=z.mixin(J);if(e&&c.mixin(e),E&&E.call(c,l),(k||m)&&(M(k,function(e,t){b(S,e,t)}),a(c.root,c,_)),a(s,c,_),p&&p.on("unmount",c.unmount),(!c.parent||d)&&c.update(w),c.trigger("before-mount"),d&&!m)c.root=S=s.firstChild;else{for(;s.firstChild;)S.appendChild(s.firstChild);S.stub&&(c.root=S=p.root)}!c.parent||c.parent.isMounted?(c.isMounted=!0,c.trigger("mount")):c.parent.one("mount",function(){$(c.root)||(c.parent.isMounted=c.isMounted=!0,c.trigger("mount"))})}),N(this,"unmount",function(e){var n,r=S,i=r.parentNode,o=Q.indexOf(c);if(c.trigger("before-unmount"),~o&&Q.splice(o,1),this._virts&&g(this._virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),i){if(p)n=C(p),L(n.tags[O])?g(n.tags[O],function(e,t){e._riot_id==c._riot_id&&n.tags[O].splice(t,1)}):n.tags[O]=t;else for(;r.firstChild;)r.removeChild(r.firstChild);e?v(i,"riot-tag"):i.removeChild(r)}c.trigger("unmount"),p&&p.off("unmount",c.unmount),c.off("*"),c.isMounted=!1,delete S._tag})}function s(t,n,r,i){r[t]=function(t){var o,a=i._parent,u=i._item;if(!u)for(;a&&!u;)u=a._item,a=a._parent;t=t||e.event,j(t,"currentTarget")&&(t.currentTarget=r),j(t,"target")&&(t.target=t.srcElement),j(t,"which")&&(t.which=t.charCode||t.keyCode),t.item=u,n.call(i,t)===!0||/radio|check/.test(r.type)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1),t.preventUpdate||(o=u?C(a):i,o.update())}}function c(e,t,n){e&&(e.insertBefore(n,t),e.removeChild(t))}function f(e,t){g(e,function(e,n){var r=e.dom,i=e.attr,o=ue(e.expr,t),a=r&&r.parentNode;e.bool?o=o?i:!1:null==o&&(o=""),a&&"TEXTAREA"==a.tagName&&(o=(""+o).replace(/riot-/g,""),a.value=o);var u=e.value;if(e.value=o,e.isIf)return d(e,u,o,t);if(e.isTag)return p(e,t);if(e.isLoop)return e.update();if(e.isNamed)return l(e,u,o,t);if(u!==o){if(!i)return void(r.nodeValue=""+o);if(v(r,i),h(o))s(i,o,r,t);else if(/^(show|hide)$/.test(i))"hide"==i&&(o=!o),r.style.display=o?"":"none";else if("value"==i)r.value=o;else if(D(i,X)&&i!=W)o&&b(r,i.slice(X.length),o);else{if("selected"==i&&a&&/^(SELECT|OPTGROUP)$/.test(a.nodeName)&&o&&(a.value=r.value),e.bool&&(r[i]=o,!o))return;(0===o||o&&typeof o!==ee)&&b(r,i,o)}}})}function l(e,t,n,r){if(!e.done){var i=C(r);K(e.dom,i,n),e.done=!0}}function p(e,t){if(e.tag)return void e.tag.update();var n={root:e.dom,parent:t,hasImpl:!0,ownAttrs:e.ownAttrs};if(e.tag=E(e.impl,n,e.dom.innerHTML,t,e.nameHasExpression),e.tag.mount(),e.isVirtual){var r=document.createDocumentFragment();V(e.tag,r),e.tag.root.parentElement.replaceChild(r,e.tag.root)}e.tag.update()}function d(e,t,n,r){if(e.started&&!n==!t)return void(n&&f(e.children,r));var i,o=e.dom;i=e.stub=e.stub||document.createTextNode(""),n?(f(e.children,r),c(i.parentNode,i,o)):o.parentNode?c(o.parentNode,o,i):r.stub=i,e.started=!0}function g(e,t){for(var n,r=e?e.length:0,i=0;r>i;i++)n=e[i],null!=n&&t(n,i)===!1&&i--;return e}function h(e){return typeof e===ne||!1}function m(e){return typeof e===ee||!1}function v(e,t){e.removeAttribute(t)}function x(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function y(e,t){return e.getAttribute(t)}function b(e,t,n){e.setAttribute(t,n)}function w(e){return e.tagName&&Z[y(e,W)||e.tagName.toLowerCase()]}function _(e,t,n){var r=n.tags[t];r?(L(r)||r!==e&&(n.tags[t]=[r]),T(n.tags[t],e)||n.tags[t].push(e)):n.tags[t]=e}function S(e,t,n){var r,i=e.parent;i&&(r=i.tags[t],L(r)?r.splice(n,0,r.splice(r.indexOf(e),1)[0]):_(e,t,i))}function E(e,t,n,r,i){var o=new u(e,t,n),a=O(t.root,i),s=C(r);return o.parent=s,o._parent=r,_(o,a,s),s!==r&&_(o,a,r),t.root.innerHTML="",o}function C(e){for(var t=e;!w(t.root)&&t.parent;)t=t.parent;return t}function N(e,t,n,r){return Object.defineProperty(e,t,R({value:n,enumerable:!1,writable:!1,configurable:!1},r)),e}function O(e,t){var n=w(e),r=!t&&y(e,"name"),i=r&&!ue.hasExpr(r)?r:n?n.name:e.tagName.toLowerCase();return i}function R(e){for(var t,n=arguments,r=1;r<n.length;++r)if(t=n[r])for(var i in t)j(e,i)&&(e[i]=t[i]);return e}function T(e,t){return~e.indexOf(t)}function L(e){return Array.isArray(e)||e instanceof Array}function j(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return typeof e[t]===te||n&&n.writable}function A(e){if(!(e instanceof u||e&&typeof e.trigger==ne))return e;var t={};for(var n in e)T(ie,n)||(t[n]=e[n]);return t}function I(e,t,n){if(e){var r=t(e,n);if(r===!1)return;for(e=e.firstChild;e;)I(e,t,r),e=e.nextSibling}}function M(e,t){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(e);)t(n[1].toLowerCase(),n[2]||n[3]||n[4])}function $(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function k(e){return document.createElement(e)}function H(e,t){return(t||document).querySelectorAll(e)}function F(e,t){return(t||document).querySelector(e)}function B(e){function t(){}return t.prototype=e,new t}function P(e){return y(e,"id")||y(e,"name")}function K(e,t,n){if(n=n||P(e)){var r=t[n],i=L(r);r?(!i||i&&!T(r,e))&&(i?r.push(e):t[n]=[r,e]):t[n]=e}}function D(e,t){return e.slice(0,t.length)===t}function q(e,t,n){var r=Z[t],i=e._innerHTML=e._innerHTML||e.innerHTML;return e.innerHTML="",r&&e&&(r=new u(r,{root:e,opts:n},i)),r&&r.mount&&(r.mount(),T(Q,r)||Q.push(r)),r}function V(e,t,n){var r,i,o=document.createTextNode(""),a=document.createTextNode("");for(e._head=e.root.insertBefore(o,e.root.firstChild),e._tail=e.root.appendChild(a),i=e._head,e._virts=[];i;)r=i.nextSibling,n?t.insertBefore(i,n._head):t.appendChild(i),e._virts.push(i),i=r}function U(e,t,n){for(var r,i=e._head;i;)if(r=i.nextSibling,t.insertBefore(i,n._head),i=r,i==e._tail){t.insertBefore(i,n._head);break}}var z={version:"v3.0.0-alpha.2",settings:{}},G=0,Q=[],Z={},J="__global_mixin",X="riot-",W=X+"tag",Y="string",ee="object",te="undefined",ne="function",re=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,ie=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],oe=0|(e&&e.document||{}).documentMode;z.observable=function(e){e=e||{};var t={},n=Array.prototype.slice,r=function(e,t){e.replace(/\S+/g,t)},i=function(t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!1,configurable:!1})};return i("on",function(n,i){return"function"!=typeof i?e:(r(n,function(e,n){(t[e]=t[e]||[]).push(i),i.typed=n>0}),e)}),i("off",function(n,i){return"*"!=n||i?r(n,function(e){if(i)for(var n,r=t[e],o=0;n=r&&r[o];++o)n==i&&r.splice(o--,1);else delete t[e]}):t={},e}),i("one",function(t,n){function r(){e.off(t,r),n.apply(e,arguments)}return e.on(t,r)}),i("trigger",function(i){var o,a=n.call(arguments,1);return r(i,function(r){o=n.call(t[r]||[],0);for(var i,u=0;i=o[u];++u){if(i.busy)return;i.busy=1,i.apply(e,i.typed?[r].concat(a):a),o[u]!==i&&u--,i.busy=0}t["*"]&&"*"!=r&&e.trigger.apply(e,["*",r].concat(a))}),e}),e},function(t){function n(e){return e.split(/[\/?#]/)}function r(e,t){var n=new RegExp("^"+t[E](/\*/g,"([^/?#]+?)")[E](/\.\./,".*")+"$"),r=e.match(n);return r?r.slice(1):void 0}function i(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function o(e){g=i(l,1),T[_](C,g),T[_](N,g),L[_](M,p),e&&l(!0)}function a(){this.$=[],t.observable(this),k.on("stop",this.s.bind(this)),k.on("emit",this.e.bind(this))}function u(e){return e[E](/^\/|\/$/,"")}function s(e){return"string"==typeof e}function c(e){return(e||A.href||"")[E](y,"")}function f(e){return"#"==h[0]?(e||A.href||"").split(h)[1]||"":c(e)[E](h,"")}function l(e){var t=0==B;if(!(B>=R)&&(B++,F.push(function(){var t=f();(e||t!=m)&&(k[O]("emit",t),m=t)}),t)){for(;F.length;)F[0](),F.shift();B=0}}function p(e){if(!(1!=e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!=t.nodeName;)t=t.parentNode;!t||"A"!=t.nodeName||t[S]("download")||!t[S]("href")||t.target&&"_self"!=t.target||-1==t.href.indexOf(A.href.match(y)[0])||(t.href==A.href||t.href.split("#")[0]!=A.href.split("#")[0]&&("#"==h||0===c(t.href).indexOf(h))&&d(f(t.href),t.title||L.title))&&e.preventDefault()}}function d(e,t,n){return j?(e=h+u(e),t=t||L.title,n?j.replaceState(null,t,e):j.pushState(null,t,e),L.title=t,H=!1,l(),H):k[O]("emit",f(e))}var g,h,m,v,x,y=/^.+?\/+[^\/]+/,b="EventListener",w="remove"+b,_="add"+b,S="hasAttribute",E="replace",C="popstate",N="hashchange",O="trigger",R=3,T="undefined"!=typeof e&&e,L="undefined"!=typeof document&&document,j=T&&history,A=T&&(j.location||T.location),I=a.prototype,M=L&&L.ontouchstart?"touchstart":"click",$=!1,k=t.observable(),H=!1,F=[],B=0;I.m=function(e,t,n){!s(e)||t&&!s(t)?t?this.r(e,t):this.r("@",e):d(e,t,n||!1)},I.s=function(){this.off("*"),this.$=[]},I.e=function(e){this.$.concat("@").some(function(t){var n=("@"==t?v:x)(u(e),u(t));return"undefined"!=typeof n?(this[O].apply(null,[t].concat(n)),H=!0):void 0},this)},I.r=function(e,t){"@"!=e&&(e="/"+u(e),this.$.push(e)),this.on(e,t)};var P=new a,K=P.m.bind(P);K.create=function(){var e=new a;return e.m.stop=e.s.bind(e),e.m.bind(e)},K.base=function(e){h=e||"#",m=f()},K.exec=function(){l(!0)},K.parser=function(e,t){e||t||(v=n,x=r),e&&(v=e),t&&(x=t)},K.query=function(){var e={},t=A.href||m;return t[E](/[?&](.+?)=([^&]*)/g,function(t,n,r){e[n]=r}),e},K.stop=function(){$&&(T&&(T[w](C,g),T[w](N,g),L[w](M,p)),k[O]("stop"),$=!1)},K.start=function(e){$||(T&&("complete"==document.readyState?o(e):T[_]("load",function(){setTimeout(function(){o(e)},1)})),$=!0)},K.base(),K.parser(),t.route=K}(z);var ae=function(e){function t(e){return e}function n(e,t){return t||(t=v),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?c:"")}function r(e){if(e===g)return h;var t=e.split(" ");if(2!==t.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(e))throw new Error('Unsupported brackets "'+e+'"');return t=t.concat(e.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),t[4]=n(t[1].length>1?/{[\S\s]*?}/:h[4],t),t[5]=n(e.length>3?/\\({|})/g:h[5],t),t[6]=n(h[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+p,c),t[8]=e,t}function i(e){return e instanceof RegExp?u(e):v[e]}function o(e){(e||(e=g))!==v[8]&&(v=r(e),u=e===g?t:n,v[9]=u(h[9]),v[10]=u(h[10])),m=e}function a(e){var t;e=e||{},t=e.brackets,Object.defineProperty(e,"brackets",{set:o,get:function(){return m},enumerable:!0}),s=e,o(t)}var u,s,c="g",f=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,l=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,p=l.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,d={"(":RegExp("([()])|"+p,c),"[":RegExp("([[\\]])|"+p,c),"{":RegExp("([{}])|"+p,c)},g="{ }",h=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+p,c),g,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],m=e,v=[];return i.split=function(e,t,n){function r(e){t||a?c.push(e&&e.replace(n[5],"$1")):c.push(e)}function i(e,t,n){var r,i=d[t];for(i.lastIndex=n,n=1;(r=i.exec(e))&&(!r[1]||(r[1]===t?++n:--n)););return n?e.length:i.lastIndex}n||(n=v);var o,a,u,s,c=[],f=n[6];for(a=u=f.lastIndex=0;o=f.exec(e);){if(s=o.index,a){if(o[2]){f.lastIndex=i(e,o[2],f.lastIndex);continue}if(!o[3])continue}o[1]||(r(e.slice(u,s)),u=f.lastIndex,f=n[6+(a^=1)],f.lastIndex=u)}return e&&u<e.length&&r(e.slice(u)),c},i.hasExpr=function(e){return v[4].test(e)},i.loopKeys=function(e){var t=e.match(v[9]);return t?{key:t[1],pos:t[2],val:v[0]+t[3].trim()+v[1]}:{val:e.trim()}},i.hasRaw=function(e){return v[10].test(e)},i.array=function(e){return e?r(e):v},Object.defineProperty(i,"settings",{set:a,get:function(){return s}}),i.settings="undefined"!=typeof z&&z.settings||{},i.set=o,i.R_STRINGS=l,i.R_MLCOMMS=f,i.S_QBLOCKS=p,i}(),ue=function(){function t(e,t){return e?(u[e]||(u[e]=r(e))).call(t,n):e}function n(e,n){t.errorHandler&&(e.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},t.errorHandler(e))}function r(e){var t=i(e);return"try{return "!==t.slice(0,11)&&(t="return "+t),new Function("E",t+";")}function i(e){var t,n=[],r=ae.split(e.replace(/\u2057/g,'"'),1);if(r.length>2||r[0]){var i,a,u=[];for(i=a=0;i<r.length;++i)t=r[i],t&&(t=1&i?o(t,1,n):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(u[a++]=t);t=2>a?u[0]:"["+u.join(",")+'].join("")'}else t=o(r[1],0,n);return n[0]&&(t=t.replace(c,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),t}function o(e,t,n){function r(t,n){var r,i=1,o=f[t];for(o.lastIndex=n.lastIndex;r=o.exec(e);)if(r[0]===t)++i;else if(!--i)break;n.lastIndex=i?e.length:o.lastIndex}if("="===e[0]&&(e=e.slice(1)),e=e.replace(s,function(e,t){return e.length>2&&!t?""+(n.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var i,o=[],u=0;e&&(i=e.match(l))&&!i.index;){var c,p,d=/,|([[{(])|$/g;for(e=RegExp.rightContext,c=i[2]?n[i[2]].slice(1,-1).trim().replace(/\s+/g," "):i[1];p=(i=d.exec(e))[1];)r(p,d);p=e.slice(0,i.index),e=RegExp.rightContext,o[u++]=a(p,1,c)}e=u?u>1?"["+o.join(",")+'].join(" ").trim()':o[0]:a(e,t)}return e}function a(e,t,n){var r;return e=e.replace(d,function(e,t,n,i,o){return n&&(i=r?0:i+e.length,"this"!==n&&"global"!==n&&"window"!==n?(e=t+'("'+n+p+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!g.test(o.slice(i)))),e}),r&&(e="try{return "+e+"}catch(e){E(e,this)}"),n?e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""':t&&(e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}var u={};t.haveRaw=ae.hasRaw,t.hasExpr=ae.hasExpr,t.loopKeys=ae.loopKeys,t.errorHandler=null;var s=RegExp(ae.S_QBLOCKS,"g"),c=/\x01(\d+)~/g,f={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},l=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,p='"in this?this:'+("object"!=typeof e?"global":"window")+").",d=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,g=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return t.parse=function(e){return e},t.version=ae.version="v2.3.21",t}(),se=function(e){function t(e,t,i){var o=e.tmpl,a=o&&o.match(/^\s*<([-\w]+)/),u=a&&a[1].toLowerCase(),s=k(f);return t||(t=""),e.attrs&&(i.attrs=r(e.attrs,t)),o=r(o,t),l.test(u)?s=n(s,o,u):s.innerHTML=o,s.stub=!0,s}function n(e,t,n){var r="o"===n[0],i=r?"select>":"table>";if(e.innerHTML="<"+i+t.trim()+"</"+i,i=e.firstChild,r)i.selectedIndex=-1;else{var o=c[n];o&&1===i.children.length&&(i=F(o,i))}return i}function r(e,t){if(!i.test(e))return e;var n=1;return e=e.replace(u,function(e,r,i){var o=t.match(RegExp(s.replace("@",r),"i"));return n=0,(o?o[1]:i)||""}),(n||i.test(e))&&(t&&(t=t.replace(a,"").trim()),e=e.replace(o,function(e,n){return t||n||""})),e}var i=/<yield\b/i,o=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,a=/<yield\s+to=[^>]+>[\S\s]*?<\/yield\s*>\s*/gi,u=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,s="<yield\\s+to=['\"]@['\"]\\s*>([\\S\\s]*?)</yield\\s*>",c={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},f="div";e=e&&10>e;var l=e?re:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return t}(oe),ce=function(t){if(!e)return{add:function(){},inject:function(){}};var n=function(){var e=k("style");b(e,"type","text/css");var t=F("style[type=riot]");return t?(t.id&&(e.id=t.id),t.parentNode.replaceChild(e,t)):document.getElementsByTagName("head")[0].appendChild(e),e}(),r=n.styleSheet,i="";return Object.defineProperty(t,"styleNode",{value:n,writable:!0}),{add:function(e){i+=e},inject:function(){i&&(r?r.cssText+=i:n.innerHTML+=i,i="")}}}(z),fe=function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame;if(!t||/iP(ad|hone|od).*OS 6/.test(e.navigator.userAgent)){var n=0;t=function(e){var t=Date.now(),r=Math.max(16-(t-n),0);setTimeout(function(){e(n=t+r)},r)}}return t}(e||{});z.util={brackets:ae,tmpl:ue},z.mixin=function(){var e={};return function(t,n){return m(t)?(n=t,void(e[J]=R(e[J]||{},n))):n?void(e[t]=n):e[t]}}(),z.tag=function(e,t,n,r,i){return h(r)&&(i=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(h(n)?i=n:ce.add(n)),Z[e]={name:e,tmpl:t,attrs:r,fn:i},e},z.tag2=function(e,t,n,r,i,o){return n&&ce.add(n),Z[e]={name:e,tmpl:t,attrs:r,fn:i},e},z.mount=function(e,t,n){function r(e){var t="";return g(e,function(e){/[^-\w]/.test(e)||(t+=",*["+W+"="+e.trim()+"]")}),t}function i(){var e=Object.keys(Z);return e+r(e)}function o(e){if(e.tagName){var r=y(e,W);t&&r!==t&&(r=t,b(e,W,t));var i=q(e,r||e.tagName.toLowerCase(),n);i&&s.push(i)}else e.length&&g(e,o)}var a,u,s=[];if(ce.inject(),typeof t===ee&&(n=t,t=0),typeof e===Y?("*"===e?e=u=i():e+=r(e.split(/, ?/)),a=e?H(e):[]):a=e,"*"===t){if(t=u||i(),a.tagName)a=H(t,a);else{var c=[];g(a,function(e){c.push(H(t,e))}),a=c}t=0}return o(a),s},z.update=function(){return g(Q,function(e){e.update()})},z.Tag=u;var le=function(){function t(t){var n=e[t];if(n)return n;throw new Error(t+" parser not found.")}function n(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var r={html:{jade:function(e,r,i){return r=n({pretty:!0,filename:i,doctype:"html"},r),t("jade").render(e,r)}},css:{less:function(e,r,i,o){var a;return i=n({sync:!0,syncImport:!0,filename:o},i),t("less").render(r,i,function(e,t){if(e)throw e;a=t.css}),a}},js:{es6:function(e,r){return r=n({blacklist:["useStrict","strict","react"],sourceMaps:!1,comments:!1},r),t("babel").transform(e,r).code},babel:function(e,r,i){return t("babel").transform(e,n({filename:i},r)).code},coffee:function(e,r){return t("CoffeeScript").compile(e,n({bare:!0},r))},livescript:function(e,r){return t("livescript").compile(e,n({bare:!0,header:!1},r))},typescript:function(e,n){return t("typescript")(e,n)},none:function(e){return e}}};return r.js.javascript=r.js.none,r.js.coffeescript=r.js.coffee,r}();z.parsers=le;var pe=function(){function e(e){var t,n=C;for(~e.indexOf("\r")&&(e=e.replace(/\r\n?/g,"\n")),n.lastIndex=0;t=n.exec(e);)"<"===t[0][0]&&(e=RegExp.leftContext+RegExp.rightContext,n.lastIndex=t[3]+1);return e}function t(e,t){var n,r,i,o=[];for(E.lastIndex=0,e=e.replace(/\s+/g," ");n=E.exec(e);){var a=n[1].toLowerCase(),u=n[2];u?(u[0]!==I&&(u=I+(u[0]===M?u.slice(1,-1):u)+I),"type"===a&&j.test(u)?r=u:(/\u0001\d/.test(u)&&("value"===a?i=1:O.test(a)?a="__"+a:~R.indexOf(a)&&(a="riot-"+a)),o.push(a+"="+u))):o.push(a)}return r&&(i&&(r=I+t._bp[0]+M+r.slice(1,-1)+M+t._bp[1]+I),o.push("type="+r)),o.join(" ")}function n(e,t,n){var r=n._bp;if(e&&r[4].test(e)){for(var i,o,a=t.expr&&(t.parser||t.type)?u:0,s=ae.split(e,0,r),c=1;c<s.length;c+=2)i=s[c],"^"===i[0]?i=i.slice(1):a&&(o="="===i[0],i=a(o?i.slice(1):i,t).trim(),";"===i.slice(-1)&&(i=i.slice(0,-1)),o&&(i="="+i)),s[c]=""+(n.push(i)-1)+r[1];e=s.join("")}return e}function r(e,t){return t.length&&(e=e.replace(/\u0001(\d+)/g,function(e,n){var r=t[n];return"="===r[0]&&(r=r.replace(ae.R_STRINGS,function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")})),t._bp[0]+r.trim().replace(/[\r\n]+/g," ").replace(/"/g,"⁗")})),e}function i(e,i,o){if(e=n(e,i,o).replace(N,function(e,n,r,i){return n=n.toLowerCase(),i=i&&!T.test(n)?"></"+n:"",r&&(n+=" "+t(r,o)),"<"+n+i+">"}),!i.whitespace){var a=[];/<pre[\s>]/.test(e)&&(e=e.replace(L,function(e){return a.push(e),""})),e=e.trim().replace(/\s+/g," "),a.length&&(e=e.replace(/\u0002/g,function(){return a.shift()}))}return i.compact&&(e=e.replace(/>[ \t]+<([-\w\/])/g,"><$1")),r(e,o).replace(A,"")}function o(t,n,r){return Array.isArray(n)?(r=n,n={}):(r||(r=[]),n||(n={})),r._bp=ae.array(n.brackets),i(e(t),n,r)}function a(e){function t(e,t,n){for(t.lastIndex=0;n=t.exec(e);)"/"!==n[0][0]||n[1]||n[2]||(e=s.leftContext+" "+s.rightContext,t.lastIndex=n[3]+1);return e}function n(e,t){var n,r=1;for(t.lastIndex=0;r&&(n=t.exec(e));)"{"===n[0]?++r:"}"===n[0]&&--r;return r?e.length:t.lastIndex}var r,i,o,a,u=[],s=RegExp;for(~e.indexOf("/")&&(e=t(e,H));r=e.match($);)u.push(s.leftContext),e=s.rightContext,o=n(e,k),a=r[1],i=!/^(?:if|while|for|switch|catch|function)$/.test(a),a=i?r[0].replace(a,"this."+a+" = function"):r[0],u.push(a,e.slice(0,o)),e=e.slice(o),i&&!/^\s*.\s*bind\b/.test(e)&&u.push(".bind(this)");return u.length?u.join("")+e:e}function u(e,t,n,r,i){if(!/\S/.test(e))return"";n||(n=t.type);var o=t.parser||(n?le.js[n]:a);if(!o)throw new Error('JS parser not found: "'+n+'"');return o(e,r,i).replace(/\r\n?/g,"\n").replace(A,"")}function s(e,t,n,r){return"string"==typeof t&&(r=n,n=t,t={}),n&&"object"==typeof n&&(r=n,n=""),r||(r={}),u(e,t||{},n,r.parserOptions,r.url)}function c(e,t){var n=":scope";return t.replace(F,function(t,r,i){return i?(i=i.replace(/[^,]+/g,function(t){var r=t.trim();return r&&"from"!==r&&"to"!==r&&"%"!==r.slice(-1)?(r=r.indexOf(n)<0?e+" "+r+',[riot-tag="'+e+'"] '+r:r.replace(n,e)+","+r.replace(n,'[riot-tag="'+e+'"]')," "===t.slice(-1)?r+" ":r):t}),r?r+" "+i:i):t})}function f(e,t,n,r){var i=(r||(r={})).scoped;if(n)if("scoped-css"===n)i=!0;else if(le.css[n])e=le.css[n](t,e,r.parserOpts||{},r.url);else if("css"!==n)throw new Error('CSS parser not found: "'+n+'"');if(e=e.replace(ae.R_MLCOMMS,"").replace(/\s+/g," ").trim(),i){if(!t)throw new Error("Can not parse scoped CSS without a tagName");e=c(t,e)}return e}function l(e,t,n){return t&&"object"==typeof t?(n=t,t=""):n||(n={}),f(e,n.tagName,t,n)}function p(e,t){return e?(e=M+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+M,t&&~e.indexOf("\n")?e.replace(/\n/g,"\\n"):e):"''"}function d(e,t,n,r,i,o){var a=", ",u="}"+(o.length?", "+p(o._bp[8]):"")+");";return i&&"\n"!==i.slice(-1)&&(u="\n"+u),"riot.tag2('"+e+M+a+p(t,1)+a+p(n)+a+p(r)+", function(opts) {\n"+i+u}function g(e){if(/<[-\w]/.test(e))for(var t,n=e.lastIndexOf("<"),r=e.length;~n;){if(t=e.slice(n,r).match(K))return n+=t.index+t[0].length,[e.slice(0,n),e.slice(n)];r=n,n=e.lastIndexOf("<",n-1)}return["",e]}function h(e){if(e){var t=e.match(B);if(t=t&&(t[2]||t[3]))return t.replace("text/","")}return""}function m(e,t){if(e){var n=e.match(RegExp("\\s"+t+P,"i"));if(n=n&&n[1])return/^['"]/.test(n)?n.slice(1,-1):n}return""}function v(e){var t=m(e,"options");return t?JSON.parse(t):null}function x(e,t,n,r){var i=h(n);return u(e,t,i,v(n),r)}function y(e,t,n,r,i){var o={parserOpts:v(n),scoped:n&&/\sscoped(\s|=|$)/i.test(n),url:r};return f(e,i,h(n)||t.style,o)}function b(e,t,n,r){var i=le.html[n];if(!i)throw new Error('Template parser not found: "'+n+'"');return i(e,r,t)}function w(o,a,s){var c,f=[];a||(a={}),c=a.exclude?function(e){return a.exclude.indexOf(e)<0}:function(){return 1},s||(s="");var l=ae.array(a.brackets);return a.template&&(o=b(o,s,a.template,a.templateOptions)),o=e(o).replace(D,function(e,o,p,h,m,v){var b="",w="",_="",S=[];if(S._bp=l,p=p.toLowerCase(),h=h&&c("attribs")?r(t(n(h,a,S),S),S):"",(m||(m=v))&&/\S/.test(m))if(v)c("html")&&(_=i(v,a,S));else{m=m.replace(RegExp("^"+o,"gm"),""),m=m.replace(V,function(e,t,n){return c("css")&&(w+=(w?" ":"")+y(n,a,t,s,p)),""}),m=m.replace(q,function(e,t,n){if(c("js")){var r=x(n,a,t,s);r&&(b+=(b?"\n":"")+r)}return""});var E=g(m.replace(A,""));c("html")&&(_=i(E[0],a,S)),c("js")&&(m=u(E[1],a,null,null,s),m&&(b+=(b?"\n":"")+m))}return b=/\S/.test(b)?b.replace(/\n{3,}/g,"\n\n"):"",a.entities?(f.push({tagName:p,html:_,css:w,attribs:h,js:b}),""):d(p,_,w,h,b,S)}),a.entities?f:o}var _=/"[^"\n\\]*(?:\\[\S\s][^"\n\\]*)*"|'[^'\n\\]*(?:\\[\S\s][^'\n\\]*)*'/.source,S=ae.R_STRINGS.source,E=/ *([-\w:\xA0-\xFF]+) ?(?:= ?('[^']*'|"[^"]*"|\S+))?/g,C=RegExp(/<!--(?!>)[\S\s]*?-->/.source+"|"+_,"g"),N=/<([-\w]+)(?:\s+([^"'\/>]*(?:(?:"[^"]*"|'[^']*'|\/[^>])[^'"\/>]*)*)|\s*)(\/?)>/g,O=RegExp("^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$"),R=["style","src","d"],T=/^(?:input|img|br|wbr|hr|area|base|col|embed|keygen|link|meta|param|source|track)$/,L=/<pre(?:\s+(?:[^">]*|"[^"]*")*)?>([\S\s]+?)<\/pre\s*>/gi,j=/^"(?:number|date(?:time)?|time|month|email|color)\b/i,A=/[ \t]+$/gm,I='"',M="'",$=/^[ \t]*([$_A-Za-z][$\w]*)\s*\([^()]*\)\s*{/m,k=RegExp("[{}]|"+ae.S_QBLOCKS,"g"),H=RegExp(ae.R_MLCOMMS.source+"|//[^\r\n]*|"+ae.S_QBLOCKS,"g"),F=RegExp("([{}]|^)[ ;]*([^@ ;{}][^{}]*)(?={)|"+_,"g"),B=/\stype\s*=\s*(?:(['"])(.+?)\1|(\S+))/i,P="\\s*=\\s*("+S+"|{[^}]+}|\\S+)",K=/\/>\n|^<(?:\/?[-\w]+\s*|[-\w]+\s+[-\w:\xA0-\xFF][\S\s]*?)>\n/,D=RegExp(/^([ \t]*)<([-\w]+)(?:\s+([^'"\/>]+(?:(?:@|\/[^>])[^'"\/>]*)*)|\s*)?(?:\/>|>[ \t]*\n?([\S\s]*)^\1<\/\2\s*>|>(.*)<\/\2\s*>)/.source.replace("@",S),"gim"),q=/<script(\s+[^>]*)?>\n?([\S\s]*?)<\/script\s*>/gi,V=/<style(\s+[^>]*)?>\n?([\S\s]*?)<\/style\s*>/gi;return z.util.compiler={compile:w,html:o,css:l,js:s,version:"v2.3.22"},w}();z.compile=function(){function e(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status||!r.status&&r.responseText.length)&&t(r.responseText,n,e)},r.open("GET",e,!0),r.send("")}function n(e,t){if(typeof e===Y){var n=k("script"),r=document.documentElement;t&&(e+="\n//# sourceURL="+t+".js"),n.text=e,r.appendChild(n),r.removeChild(n)}}function r(t,r){function a(){i.trigger("ready"),o=!0,t&&t()}function u(e,t,r){var i=pe(e,t,r);n(i,r),--c||a()}var s=H('script[type="riot/tag"]'),c=s.length;if(c)for(var f=0;f<s.length;++f){var l=s[f],p=R({template:y(l,"template")},r),d=y(l,"src");d?e(d,u,p):u(l.innerHTML,p)}else a()}var i,o;return function(a,u,s){if(typeof a===Y){if(u&&typeof u===ee&&(s=u,u=!1),/^\s*</m.test(a)){var c=pe(a,s);return u!==!0&&n(c),h(u)&&u(c,a,s),c}e(a,function(e,t,r){var i=pe(e,t,r);n(i,r),u&&u(i,e,t)})}else{if(h(a)?(s=u,u=a):(s=a,u=t),o)return u&&u();i?u&&i.on("ready",u):(i=z.observable(),r(u,s))}}}();var de=z.mount;z.mount=function(e,t,n){var r;return z.compile(function(){r=de(e,t,n)}),r},typeof exports===ee?module.exports=z:typeof define===ne&&typeof define.amd!==te?define(function(){return z}):e.riot=z}("undefined"!=typeof window?window:void 0);
