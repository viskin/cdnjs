!function(Ta){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=Ta();else if("function"==typeof define&&define.amd)define([],Ta);else{var G;"undefined"!=typeof window?G=window:"undefined"!=typeof global?G=global:"undefined"!=typeof self&&(G=self);G.ForerunnerDBAutoBind=Ta()}}(function(){return function G(ea,O,q){function a(f,Ua){if(!O[f]){if(!ea[f]){var t="function"==typeof require&&require;if(!Ua&&t)return t(f,!0);if(b)return b(f,!0);t=Error("Cannot find module '"+f+"'");throw t.code=
"MODULE_NOT_FOUND",t;}t=O[f]={exports:{}};ea[f][0].call(t.exports,function(b){var t=ea[f][1][b];return a(t?t:b)},t,t.exports,G,ea,O,q)}return O[f].exports}for(var b="function"==typeof require&&require,f=0;f<q.length;f++)a(q[f]);return a}({1:[function(G,ea,O){G=G("../lib/AutoBind");ea.exports=G},{"../lib/AutoBind":2}],2:[function(G,ea,O){O=ForerunnerDB.shared;var q={};O.addModule("AutoBind",q);q.extendCollection=function(b){var a=b.prototype.init,Ra=b.prototype._dataReplace,Ua=b.prototype._dataInsertIndex,
t=b.prototype._dataRemoveIndex,q=b.prototype._updateProperty,P=b.prototype._updateIncrement,G=b.prototype._updateSpliceMove,O=b.prototype._updateSplicePush,da=b.prototype._updatePush,pa=b.prototype._updatePull,qa=b.prototype._updateMultiply,ea=b.prototype._updateRename,Da=b.prototype._updateUnset,$=b.prototype._updatePop;b.prototype.init=function(){this._linked=0;a.apply(this,arguments)};b.prototype.isLinked=function(){return Boolean(this._linked)};b.prototype.link=function(b,a){if(window.jQuery){this._links=
this._links||{};var x,f;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(x=this.objectId(a.template),f=a.template):x=a;if(!this._links[x]){if(jQuery(b).length){if(!jQuery.templates[x]){if(!f)if(f=jQuery(a),f.length)f=jQuery(f[0]).html();else throw"Unable to bind collection to target because template does not exist: "+a;jQuery.views.templates(x,f)}jQuery.templates[x].link(b,this._data);this._links[x]=b;this._linked++;this.debug()&&console.log('ForerunnerDB.Collection: Added binding collection "'+
this.name()+'" to output target: '+b);return this}throw'Cannot bind view data to output target selector "'+b+'" because it does not exist in the DOM!';}throw"Cannot create a duplicate link to the target: "+b+" with the template: "+x;}throw"Cannot data-bind without jQuery, please add jQuery to your page!";};b.prototype.unlink=function(b,a){if(window.jQuery){this._links=this._links||{};var f;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(f=this.objectId(a.template)):f=a;if(this._links[f])return jQuery.templates[f].unlink(b),
delete this._links[f],this._linked--,this.debug()&&console.log('ForerunnerDB.Collection: Removed binding collection "'+this.name()+'" to output target: '+b),this;console.log("Cannot remove link, one does not exist to the target: "+b+" with the template: "+a)}else throw"Cannot data-bind without jQuery, please add jQuery to your page!";return this};b.prototype._dataReplace=function(b){this._linked?jQuery.observable(this._data).refresh(b):Ra.apply(this,arguments)};b.prototype._dataInsertIndex=function(b,
a){this._linked?jQuery.observable(this._data).insert(b,a):Ua.apply(this,arguments)};b.prototype._dataRemoveIndex=function(b){this._linked?jQuery.observable(this._data).remove(b):t.apply(this,arguments)};b.prototype._updateProperty=function(b,a,f){this._linked?(jQuery.observable(b).setProperty(a,f),this.debug()&&console.log('ForerunnerDB.Collection: Setting data-bound document property "'+a+'" for collection "'+this.name()+'"')):q.apply(this,arguments)};b.prototype._updateIncrement=function(b,a,f){this._linked?
jQuery.observable(b).setProperty(a,b[a]+f):P.apply(this,arguments)};b.prototype._updateSpliceMove=function(b,a,f){this._linked?(jQuery.observable(b).move(a,f),this.debug()&&console.log('ForerunnerDB.Collection: Moving data-bound document array index from "'+a+'" to "'+f+'" for collection "'+this.name()+'"')):G.apply(this,arguments)};b.prototype._updateSplicePush=function(b,a,f){this._linked?b.length>a?jQuery.observable(b).insert(a,f):jQuery.observable(b).insert(f):O.apply(this,arguments)};b.prototype._updatePush=
function(b,a){this._linked?jQuery.observable(b).insert(a):da.apply(this,arguments)};b.prototype._updatePull=function(b,a){this._linked?jQuery.observable(b).remove(a):pa.apply(this,arguments)};b.prototype._updateMultiply=function(b,a,f){this._linked?jQuery.observable(b).setProperty(a,b[a]*f):qa.apply(this,arguments)};b.prototype._updateRename=function(b,a,f){this._linked?(jQuery.observable(b).setProperty(f,b[a]),jQuery.observable(b).removeProperty(a)):ea.apply(this,arguments)};b.prototype._updateUnset=
function(b,a){this._linked?jQuery.observable(b).removeProperty(a):Da.apply(this,arguments)};b.prototype._updatePop=function(b,a){var f,Ra=!1;this._linked?0<b.length&&(1===a?f=b.length-1:-1===a&&(f=0),-1<f&&(jQuery.observable(arr).remove(f),Ra=!0)):Ra=$.apply(this,arguments);return Ra}};q.extendView=function(b){var a=b.prototype.init;b.prototype.init=function(){this._linked=0;a.apply(this,arguments)};b.prototype.isLinked=function(){return this.data().isLinked()};b.prototype.link=function(b,a){var f=
this.publicData();this.debug()&&console.log('ForerunnerDB.View: Setting up data binding on view "'+this.name()+'" in underlying (internal) view collection "'+f.name()+'" for output target: '+b);f.link(b,a);return this};b.prototype.unlink=function(b,a){var f=this.publicData();this.debug()&&console.log('ForerunnerDB.View: Removing data binding on view "'+this.name()+'" in underlying (internal) view collection "'+f.name()+'" for output target: '+b);f.unlink(b,a);return this}};q.extendOverview=function(b){b.prototype.isLinked=
function(){return this.data().isLinked()};b.prototype.link=function(b,a){this._data.link.apply(this._data,arguments);this._refresh()};b.prototype.unlink=function(b,a){this._data.unlink.apply(this._data,arguments);this._refresh()}};q.extendDocument=function(b){b.prototype.isLinked=function(){return Boolean(this._linked)};b.prototype.link=function(b,a){if(window.jQuery){this._links=this._links||{};this._linked||(this._linked=0);var q,t;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&
(q=this.objectId(a.template),t=a.template):q=a;if(!this._links[q]){if(jQuery(b).length){if(!jQuery.templates[q]){if(!t)if(t=jQuery(a),t.length)t=jQuery(t[0]).html();else throw"Unable to bind document to target because template does not exist: "+a;jQuery.views.templates(q,t)}jQuery.templates[q].link(b,this._data);this._links[q]=b;this._linked++;this.debug()&&console.log('ForerunnerDB.Document: Added binding document "'+this.name()+'" to output target: '+b);return this}throw'Cannot bind view data to output target selector "'+
b+'" because it does not exist in the DOM!';}throw"Cannot create a duplicate link to the target: "+b+" with the template: "+q;}throw"Cannot data-bind without jQuery, please add jQuery to your page!";};b.prototype.unlink=function(b,a){if(window.jQuery){this._links=this._links||{};var q;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(q=this.objectId(a.template)):q=a;if(this._links[q])return jQuery.templates[q].unlink(b),delete this._links[q],this._linked--,this.debug()&&console.log('ForerunnerDB.Document: Removed binding document "'+
this.name()+'" to output target: '+b),this;console.log("Cannot remove link, one does not exist to the target: "+b+" with the template: "+a)}else throw"Cannot data-bind without jQuery, please add jQuery to your page!";}};if("undefined"!==typeof jQuery)if(G("../lib/vendor/jsviews"),"undefined"!==typeof jQuery.views){G=["Collection","View","Overview","Document"];var a;for(a=0;a<G.length;a++)O.moduleFinished(G[a],function(b,a){if(q["extend"+b])q["extend"+b](a)});O.finishModule("AutoBind")}else throw"AutoBind plugin cannot continue because jsViews is not loaded - check your error log for url errors.";
else throw"Cannot use AutoBind plugin without jQuery - please ensure jQuery is loaded first!";O.finishModule("AutoBind");ea.exports=q},{"../lib/vendor/jsviews":3}],3:[function(G,ea,O){window.jQuery&&(this.jQuery=window.jQuery,function(){(function(q,a,b){function f(b,m){for(var a in m.props)H.test(a)&&(b[a]=m.props[a])}function G(b){return b}function O(b){debugger;return b}function t(b){K=(ya._dbgMode=b)?"Unavailable (nested view): use #getIndex()":"";Ia("dbg",Ja.dbg=za.dbg=b?O:G)}function ea(b){this.name=
(r.link?"JsViews":"JsRender")+" Error";this.message=b||this.name}function P(b,m){for(var a in m)b[a]=m[a];return b}function fa(b){return"function"===typeof b}function Fa(b,m,a){if(!Aa.rTag||b)N=b?b.charAt(0):N,M=b?b.charAt(1):M,D=m?m.charAt(0):D,I=m?m.charAt(1):I,V=a||V,b="\\"+N+"(\\"+V+")?\\"+M,m="\\"+D+"\\"+I,u="(?:(?:(\\w+(?=[\\/\\s\\"+D+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+D+"]|\\"+D+"(?!\\"+I+"))*?)",Aa.rTag=u+")",u=RegExp(b+u+"(\\/)?|(?:\\/(\\w+)))"+m,"g"),z=RegExp("<.*>|([^\\\\]|^)[{}]|"+
b+".*"+m);return[N,M,D,I,V]}function da(T,m){m||(m=T,T=b);var a,g,w,e;w=this;a=!m||"root"===m;if(T){if(e=w.type===m?w:b,!e)if(a=w.views,w._.useKey)for(g in a){if(e=a[g].get(T,m))break}else for(g=0,w=a.length;!e&&g<w;g++)e=a[g].get(T,m)}else if(a)for(;w.parent.parent;)e=w=w.parent;else for(;w&&!e;)e=w.type===m?w:b,w=w.parent;return e}function pa(){var T=this.get("item");return T?T.index:b}function qa(){return this.index}function Ga(T){var m,a=this,g=a.linkCtx,w=(a.ctx||{})[T];w===b&&g&&g.ctx&&(w=g.ctx[T]);
w===b&&(w=Ja[T]);w&&fa(w)&&!w._wrp&&(m=function(){return w.apply(this&&this!==q?this:a,arguments)},m._wrp=!0,P(m,w));return m||w}function Da(T,m,a,g){var w,e,l=+a===a&&m.tmpl.bnds[a-1],d=m.linkCtx;a=(g=g!==b&&{props:{},args:[g]})||(l?l(m.data,m,J):a);e=a.args[0];if(T||l)w=d&&d.tag,w||(w={_:{inline:!d,bnd:l},tagName:":",cvt:T,flow:!0,tagCtx:a,_is:"tag"},d&&(d.tag=w,w.linkCtx=d,a.ctx=E(a.ctx,d.view.ctx)),Aa._lnk(w)),w._er=g&&e,f(w,a),a.view=m,w.ctx=a.ctx||{},delete a.ctx,m._.tag=w,e=$(w,w.convert||
"true"!==T&&T)[0],e=l&&m._.onRender?m._.onRender(e,m,l):e,m._.tag=b;return e!=b?e:""}function $(b,m){var a=b.tagCtx,g=a.view,w=a.args;m=m&&(""+m===m?g.getRsc("converters",m)||S("Unknown converter: '"+m+"'"):m);w=w.length||a.index?m?w.slice():w:[g.data];m&&(m.depends&&(b.depends=Aa.getDeps(b.depends,b,m.depends,m)),w[0]=m.apply(b,w));return w}function Ha(a,m){for(var g,e=this;g===b&&e;)g=(g=e.tmpl[a])&&g[m],e=e.parent;return g||J[a][m]}function va(a,m,g,e,w,d){var l,c,p,r,k,F,q,W,D,x="",aa=m.linkCtx||
0,z=m.ctx,C=g||m.tmpl,u=+e===e&&C.bnds[e-1];"tag"===a._is&&(l=a,a=l.tagName,e=l.tagCtxs);l=l||aa.tag;e=(d=d!==b&&(x+=d,[{props:{},args:[]}]))||(u?u(m.data,m,J):e);F=e.length;for(k=0;k<F;k++){k||g&&l||(W=m.getRsc("tags",a)||S("Unknown tag: {{"+a+"}}"));c=e[k];if(!aa.tag||l._er)g=c.tmpl,g=c.content=g&&C.tmpls[g-1],P(c,{tmpl:(l?l:W).template||g,render:ma,index:k,view:m,ctx:E(c.ctx,z)});if(g=c.props.tmpl)g=""+g===g?m.getRsc("templates",g)||U(g):g,c.tmpl=g;l||(W._ctr?(l=new W._ctr,D=!!l.init):Aa._lnk(l=
{render:W.render}),l._={inline:!aa},aa&&(aa.tag=l,l.linkCtx=aa),(l._.bnd=u||aa.fn)?l._.arrVws={}:l.dataBoundOnly&&S("{^{"+a+"}} tag must be data-bound"),l.tagName=a,l.parent=r=z&&z.tag,l._is="tag",l._def=W,l.tagCtxs=e);c.tag=l;l.dataMap&&l.tagCtxs&&(c.map=l.tagCtxs[k].map);l.flow||(q=c.ctx=c.ctx||{},c=l.parents=q.parentTags=z&&E(q.parentTags,z.parentTags)||{},r&&(c[r.tagName]=r),c[l.tagName]=q.tag=l)}m._.tag=l;if(!(l._er=d)){f(l,e[0]);l.rendering={};for(k=0;k<F;k++){c=l.tagCtx=l.tagCtxs[k];r=c.props;
a=$(l,l.convert);if(e=r.dataMap||l.dataMap)if(a.length||r.dataMap){d=c.map;if(!d||d.src!==a[0]||w)d&&d.src&&d.unmap(),d=c.map=e.map(a[0],r);a=[d.tgt]}l.ctx=c.ctx;!k&&D&&(e=l.template,l.init(c,aa,l.ctx),D=b,l.template!==e&&(l._.tmpl=l.template),aa&&(aa.attr=l.attr=aa.attr||l.attr));e=b;l.render&&(e=l.render.apply(l,a));a=a.length?a:[m];e=e!==b?e:c.render(a[0],!0)||(w?b:"");x=x?x+(e||""):e}delete l.rendering}l.tagCtx=l.tagCtxs[0];l.ctx=l.tagCtx.ctx;l._.inline&&(p=l.attr)&&p!==B&&(x="text"===p?za.html(x):
"");return u&&m._.onRender?m._.onRender(x,m,u):x}function x(b,a,g,e,w,d,l,c){var f="array"===a,p={key:0,useKey:f?0:1,id:""+ba++,onRender:c,bnds:{}};this.data=e;this.tmpl=w;this.content=l;this.views=f?[]:{};this.parent=g;this.type=a||"top";this._=p;this.linked=!!c;g?(a=g.views,e=g._,e.useKey?(a[p.key="_"+e.useKey++]=this,this.index=K,this.getIndex=pa,d=e.tag,p.bnd=f&&(!d||!!d._.bnd&&d)):a.splice(p.key=this.index=d,0,this),this.ctx=b||g.ctx):this.ctx=b}function La(b){var a,g,e,w,d,l;for(a in Ma)if(w=
Ma[a],(d=w.compile)&&(g=b[a+"s"]))for(e in g)(w=g[e]=d(e,g[e],b))&&(l=Aa.onStore[a])&&l(e,w,d)}function Ba(a,m,g){fa(m)?m={depends:m.depends,render:m}:(m.baseTag&&(m.flow=!!m.flow,m=P(P({},m.baseTag),m)),(a=m.template)!==b&&(m.template=""+a===a?U[a]||U(a):a),!1!==m.init&&(a=m._ctr=function(){},(a.prototype=m).constructor=a));g&&(m._parentTmpl=g);return m}function na(g,m,e,d){function w(m){if(""+m===m||0<m.nodeType){try{l=0<m.nodeType?m:!z.test(m)&&a&&a(q.document).find(m)[0]}catch(w){}l&&(m=U[g=g||
l.getAttribute(X)],m||(g=g||"_"+ga++,l.setAttribute(X,g),m=U[g]=na(g,l.innerHTML,e,d)),l=b);return m}}var c,l;m=m||"";c=w(m);d=d||(m.markup?m:{});d.tmplName=g;e&&(d._parentTmpl=e);!c&&m.markup&&(c=w(m.markup))&&c.fn&&(c.debug!==m.debug||c.allowCode!==m.allowCode)&&(c=c.markup);if(c!==b)return g&&!e&&(Na[g]=function(){return m.render.apply(m,arguments)}),c.fn||m.fn?c.fn&&(m=g&&g!==c.tmplName?E(d,c):c):(m=ja(c,d),Ea(c.replace(Q,"\\$&"),m)),La(d),m}function Oa(b){function a(g,m){this.tgt=b.getTgt(g,
m)}fa(b)&&(b={getTgt:b});b.baseMap&&(b=P(P({},b.baseMap),b));b.map=function(b,g){return new a(b,g)};return b}function ja(b,a){var g,e=ya.wrapMap||{},d=P({markup:b,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:ca},a);a.htmlTag||(g=$a.exec(b),d.htmlTag=g?g[1].toLowerCase():"");(g=e[d.htmlTag])&&g!==e.div&&(d.markup=r.trim(d.markup));return d}function wa(a,g){function e(c,f,l){var p,k,r;if(c&&"object"===typeof c&&!c.nodeType&&!c.markup&&!c.getTgt){for(k in c)e(k,c[k],f);return J}f===b&&(f=
c,c=b);c&&""+c!==c&&(l=f,f=c,c=b);r=l?l[d]=l[d]||{}:e;k=g.compile;null===f?c&&delete r[c]:(f=k?f=k(c,f,l):f,c&&(r[c]=f));k&&f&&(f._is=a);f&&(p=Aa.onStore[a])&&p(c,f,k);return f}var d=a+"s";J[d]=e;Ma[a]=g}function sa(b,a,g){var e=this.jquery&&(this[0]||S('Unknown template: "'+this.selector+'"')),c=e.getAttribute(X);return ca.call(c?U[c]:U(e),b,a,g)}function ra(b,a,g){if(ya._dbgMode)try{return b.fn(a,g,J)}catch(e){return S(e,g)}return b.fn(a,g,J)}function ca(b,a,g,e,c,d){return e||!this.fn._nvw||r.isArray(b)?
ma.call(this,b,a,g,e,c,d):ra(this,b,{tmpl:this})}function ma(a,g,e,c,d,f){var l,p,k,F,q,D,z,W,C;k=this;var u="";!!g===g&&(e=g,g=b);!0===d&&(l=!0,d=0);k.tag?(D=k,k=k.tag,p=k._,q=k.tagName,W=p.tmpl||D.tmpl,C=k.attr&&k.attr!==B,g=E(g,k.ctx),z=D.content,!1===D.props.link&&(g=g||{},g.link=!1),c=c||D.view,a=arguments.length?a:c):W=k;if(W&&(!c&&a&&"view"===a._is&&(c=a),c&&(z=z||c.content,f=f||c._.onRender,a===c&&(a=c.data),g=E(g,c.ctx)),c&&"top"!==c.type||((g=g||{}).root=a),W.fn||(W=U[W]||U(W)),W)){D=f=
!1!==(g&&g.link)&&!C&&f;!0===f&&(D=b,f=c._.onRender);g=W.helpers?E(W.helpers,g):g;if(r.isArray(a)&&!e)for(F=l?c:d!==b&&c||new x(g,"array",c,a,W,d,z,f),l=0,p=a.length;l<p;l++)k=a[l],q=new x(g,"item",F,k,W,(d||0)+l,z,f),k=ra(W,k,q),u+=F._.onRender?F._.onRender(k,q):k;else{if(c||!W.fn._nvw)F=l?c:new x(g,q||"data",c,a,W,d,z,f),p&&!k.flow&&(F.tag=k);u+=ra(W,a,F)}return D?D(u,F):u}return""}function S(b,a,g){g=ya.onError(b,a,g);if(""+b===b)throw new Aa.Err(g);return!a.linkCtx&&a.linked?za.html(g):g}function ka(b){S("Syntax error\n"+
b)}function Ea(b,a,e,f){function w(a){(a-=D)&&z.push(b.substr(D,a).replace(C,"\\n"))}function k(a){a&&ka('Unmatched or missing tag: "{{/'+a+'}}" in template:\n'+b)}var l,p,r,F=a&&a.allowCode,E=[],D=0,q=[],z=E,x=[,,E];e&&(b=N+b+I);k(q[0]&&q[0][2].pop()[0]);b.replace(u,function(g,c,l,E,u,M,I,J,t,K,L,n){M&&(u=":",E=B);K=K||e;c=(c||e)&&[[]];var s="",v="",h="",A="",ha="",xa="",Ka="",Sa="";I=!K&&!u&&!I;l=l||(t=t||"#data",u);w(n);D=n+g.length;J?F&&z.push(["*","\n"+t.replace(y,"$1")+"\n"]):l?("else"===l&&
(R.test(t)&&ka('for "{{else if expr}}" use "{{else expr}}"'),c=x[7],x[8]=b.substring(x[8],n),x=q.pop(),z=x[2],I=!0),t&&(d(t.replace(C," "),c,a).replace(Y,function(n,b,a,g,e,c,m,d){m?(v+=c+",",A+="'"+d+"',"):a?(h+=g+c+",",xa+=g+"'"+d+"',"):b?Ka+=c:("trigger"===e&&(Sa+=c),s+=g+c+",",ha+=g+"'"+d+"',",r=r||H.test(e));return""}).slice(0,-1),c&&c[0]&&c.pop()),p=[l,E||!!f||r||"",I&&[],[A.slice(0,-1),ha.slice(0,-1),xa.slice(0,-1)],[v.slice(0,-1),s.slice(0,-1),h.slice(0,-1)],Ka,Sa,c||0],z.push(p),I&&(q.push(x),
x=p,x[8]=D)):L&&(k(L!==x[0]&&"else"!==x[0]&&L),x[8]=b.substring(x[8],n),x=q.pop());k(!x&&L);z=x[2]});w(b.length);(D=E[E.length-1])&&k(""+D!==D&&+D[8]===D[8]&&D[0]);e?(l=c(E,b,e),g(l,E[0][7])):l=c(E,a);l._nvw&&(l._nvw=!/[~#]/.test(b));return l}function g(b,a){b.deps=[];for(var g in a)"_jsvto"!==g&&a[g].length&&(b.deps=b.deps.concat(a[g]));b.paths=a}function e(b,a){return"\n\t"+(a?a+":{":"")+"args:["+b[0]+"]"+(b[1]||!a?",\n\tprops:{"+b[1]+"}":"")+(b[2]?",\n\tctx:{"+b[2]+"}":"")}function d(b,a,g){var e,
c,d,l,f,k=a&&a[0],p=0,E=g?g.links:k&&(k.links=k.links||{}),r={},x={0:-1},F=0;return(b+(g?" ":"")).replace(/\)\^/g,").").replace(ia,function(q,z,u,B,C,I,t,L,K,J,y,H,n,s,v,h,A,ha,xa,Ka){function Sa(n,s,b,g,v,h,A,ha){return b&&(k&&("linkTo"===e&&(c=a._jsvto=a._jsvto||[],c.push(C)),e&&!d||k.push(C.slice(s.length))),"."!==b)?(n=(g?'view.hlp("'+g+'")':v?"view":"data")+(ha?(h?"."+h:g?"":v?"":"."+b)+(A||""):(ha=g?"":v?h||"":b,"")),n+=ha?"."+ha:"",s+("view.data"===n.slice(0,9)?n.slice(5):n)):n}I=I||"";u=u||
z||H;C=C||K;J=J||A||"";K=Ka.length-1;if(!t||f||l)return!k||!h||f||l||e&&!d&&!c||(h=x[F],K>xa-h&&(h=Ka.slice(h,xa+1),h=M+":"+h+D,t=E[h],t||(E[h]=!0,E[h]=t=Ea(h,g||k,!0),t.paths.push({_jsvOb:t})),!0!==t&&(c||k).push({_jsvOb:t}))),f?(f=!n,f?q:'"'):l?(l=!s,l?q:'"'):(u?(F++,x[F]=xa++,u):"")+(ha?F?"":(p=Ka.slice(p,xa),e?(e=d=c=!1,"\b"):"\b,")+p+(p=xa+q.length,k&&a.push(k=[]),"\b"):L?(F&&ka(b),k&&a.pop(),e=C,d=B,p=xa+q.length,B&&(k=a[e]=[]),C+":"):C?C.split("^").join(".").replace(la,Sa)+(J?(r[++F]=!0,"."!==
C.charAt(0)&&(x[F]=xa),J):I):I?I:v?(r[F--]=!1,v)+(J?(r[++F]=!0,J):""):y?(r[F]||ka(b),","):z?"":(f=n,l=s,'"'));ka(b)})}function c(a,d,f){var k,p,E,l,r,F,x,D,q,z,u,t,I,J,K,L,M,y,H,N,Q,P,U,n,s,v,h=0,A="",ha={},xa=a.length;""+d===d?(y=f?'data-link="'+d.replace(C," ").slice(1,-1)+'"':d,d=0):(y=d.tmplName||"unnamed",d.allowCode&&(ha.allowCode=!0),d.debug&&(ha.debug=!0),u=d.bnds,M=d.tmpls);for(k=0;k<xa;k++)if(p=a[k],""+p===p)A+='\n+"'+p+'"';else if(E=p[0],"*"===E)A+=";\n"+p[1]+"\nret=ret";else{l=p[1];Q=
p[2];r=e(p[3],"params")+"},"+e(I=p[4]);n=p[5];v=p[6];K=p[8];(J="else"===E)||(h=0,u&&(t=p[7])&&(h=u.push(t)));(p=":"===E)?l&&(E=l===B?">":l+E):(Q&&(H=ja(K,ha),H.tmplName=y+"/"+E,c(Q,H),M.push(H)),J||(N=E,P=A,A=""),H=(H=a[k+1])&&"else"===H[0]);s=n?";\ntry{\nret+=":"\n+";K=J="";if(p&&(t||v||l&&l!==B)){U="return {"+r+"};";L='c("'+l+'",view,';U=new Function("data,view,j,u"," // "+y+" "+h+" "+E+"\n"+U);U._er=n;J=L+h+",";K=")";U._tag=E;if(f)return U;g(U,t);z=!0}A+=p?(f?(n?"\ntry{\n":"")+"return ":s)+(z?
(z=b,q=D=!0,L+(t?(u[h-1]=U,h):"{"+r+"}")+")"):">"===E?(x=!0,"h("+I[0]+")"):"((v="+I[0]+')!=null?v:"")'):(q=F=!0,"\n{view:view,tmpl:"+(Q?M.length:"0")+","+r+"},");if(N&&!H){A="["+A.slice(0,-1)+"]";L='t("'+N+'",view,this,';if(f||t){A=new Function("data,view,j,u"," // "+y+" "+h+" "+N+"\nreturn "+A+";");A._er=n;A._tag=E;t&&g(u[h-1]=A,t);if(f)return A;J=L+h+",undefined,";K=")"}A=P+s+L+(h||A)+")";N=t=0}n&&(q=!0,A+=";\n}catch(e){ret"+(f?"urn ":"+=")+J+"j._err(e,view,"+n+")"+K+";}\n"+(f?"":"ret=ret"))}A=
"// "+y+"\nvar v"+(F?",t=j._tag":"")+(D?",c=j._cnvt":"")+(x?",h=j.converters.html":"")+(f?";\n":',ret=""\n')+(ha.debug?"debugger;":"")+A+(f?"\n":";\nreturn ret;");try{A=new Function("data,view,j,u",A)}catch(Ka){ka("Compiled template code:\n\n"+A+'\n: "'+Ka.message+'"')}d&&(d.fn=A);q||(A._nvw=!0);return A}function E(b,a){return b&&b!==a?a?P(P({},a),b):b:a&&P({},a)}function k(b){return Z[b]||(Z[b]="&#"+b.charCodeAt(0)+";")}function F(b){var a,g,e=[];if("object"===typeof b)for(a in b)(g=b[a])&&g.toJSON&&
!g.toJSON()||fa(g)||e.push({key:a,prop:g});return e}function p(b){return null!=b?oa.test(b)&&(""+b).replace(Qa,k)||b:""}if(!(a&&a.render||q.jsviews)){var r,L,u,z,K,N="{",M="{",D="}",I="}",V="^",la=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,ia=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,
C=/[ \t]*(\r\n|\n|\r)/g,y=/\\(['"])/g,Q=/['"\\]/g,Y=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,R=/^if\s/,$a=/<(\w+)[>\s]/,oa=/[\x00`><\"'&]/,H=/^on[A-Z]|^convert(Back)?$/,Qa=/[\x00`><"'&]/g,ga=0,ba=0,Z={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},B="html",X="data-jsv-tmpl",Na={},Ma={template:{compile:na},tag:{compile:Ba},helper:{},converter:{}},J={jsviews:"v1.0.0-beta",settings:function(b){P(ya,b);t(ya._dbgMode);ya.jsv&&ya.jsv()},
sub:{View:x,Err:ea,tmplFn:Ea,cvt:$,parse:d,extend:P,syntaxErr:ka,onStore:{},_lnk:G,_ths:f},map:Oa,_cnvt:Da,_tag:va,_err:S};(ea.prototype=Error()).constructor=ea;pa.depends=function(){return[this.get("item"),"index"]};qa.depends=function(){return["index"]};x.prototype={get:da,getIndex:qa,getRsc:Ha,hlp:Ga,_is:"view"};for(L in Ma)wa(L,Ma[L]);var U=J.templates,za=J.converters,Ja=J.helpers,Ia=J.tags,Aa=J.sub,ya=J.settings;a?(r=a,r.fn.render=sa,r.observable&&(P(Aa,r.views.sub),J.map=r.views.map)):(r=q.jsviews=
{},r.isArray=Array&&Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)});r.render=Na;r.views=J;r.templates=U=J.templates;ya({debugMode:t,delimiters:Fa,onError:function(a,g,e){g&&(a=e===b?"{Error: "+a+"}":fa(e)?e(a,g):e);return a==b?"":a},_dbgMode:!0});Ia({"else":function(){},"if":{render:function(b){return this.rendering.done||!b&&(arguments.length||!this.tagCtx.index)?"":(this.rendering.done=!0,this.selected=this.tagCtx.index,this.tagCtx.render(this.tagCtx.view,
!0))},onUpdate:function(b,a,g){var e;for(b=0;(e=this.tagCtxs[b])&&e.args.length;b++)if(e=e.args[0],a=!e!==!g[b].args[0],!this.convert&&e||a)return a;return!1},flow:!0},"for":{render:function(a){var g,e=this.tagCtx,c="",d=0;if(!this.rendering.done){if(g=!arguments.length)a=e.view.data;a!==b&&(c+=e.render(a,g),d+=r.isArray(a)?a.length:1);if(this.rendering.done=d)this.selected=e.index}return c},flow:!0},include:{flow:!0},"*":{render:G,flow:!0}});Ia("props",{baseTag:Ia["for"],dataMap:Oa(F)});za({html:p,
attr:p,url:function(a){return a!=b?encodeURI(""+a):null===a?a:""}});Fa()}})(this,this.jQuery);(function(q,a,b){function f(b){return x(b)?new O(b):new G(b)}function G(b){this._data=b;return this}function O(b){this._data=b;return this}function t(b,a){b=x(b)?b:[b];var d,c,f=a,k=f,F=b.length,p=[];for(d=0;d<F;d++)c=b[d],ca(c)?p=p.concat(t(c.call(a,a),a)):""+c!==c?(a=k=c,k!==f&&p.push(f=k)):(k!==f&&p.push(f=k),p.push(c));return p}function ea(b,a){var d,c;for(d in b){c=!0;break}c||delete sa[a]}function P(a,
e){if(!a.data||!a.data.off){var d,c,f,k,F,p=e.oldValue,r=e.value,q=a.data,u=q.observeAll,z=!q.cb.noArray,t=q.paths;if(a.type===wa)(q.cb.array||q.cb).call(q,a,e);else if(q.prop===e.path||"*"===q.prop)k=typeof p===Ba&&(t[0]||z&&x(p)),F=typeof r===Ba&&(t[0]||z&&x(r)),u?(d=u._path+"."+e.path,c=u.filter,f=[a.target].concat(u.parents()),k&&da(z,u.ns,[p],t,q.cb,!0,c,[f],d),F&&da(z,u.ns,[r],t,q.cb,b,c,[f],d)):(k&&da(z,[p],t,q.cb,!0),F&&da(z,[r],t,q.cb)),q.cb(a,e)}}function fa(){function g(b,g,e,c){var d,
f=ka(B),k=x(B)?[B]:B;b=R?b+"."+R:b;if(u||c)f&&a(k).off(b,P);else{if(D=f&&a._data(B))for(N=(D=(D=D&&D.events)&&D[e?wa:ja])&&D.length;N--;)if((M=D[N].data)&&M.cb._cId===z._cId&&M.ns===R){if(e)return;("*"===g&&M.prop!==g||M.prop===p)&&a(B).off(b,P)}g=e?{}:{fullPath:r,paths:g?[g]:[],prop:p};g.ns=R;g.cb=z;Q&&(g.observeAll={_path:Q,path:function(){d=y.length;return Q.replace(/[[.]/g,function(b){d--;return"["===b?"["+a.inArray(y[d-1],y[d]):"."})},parents:function(){return y},filter:O,ns:R});a(k).on(b,null,
g,P);la&&(la[a.data(B,"obId")||a.data(B,"obId",ma++)]=B)}}function e(b,a){b._ob=I(b,Z);var g=Z;return function(e,c){var f=b._ob,k=a.length;typeof f===Ba&&(d(f,!0),(k||H&&x(f))&&da(H,[f],a,z,I,!0));f=b._ob=I(b,g);typeof f===Ba&&(d(f),(k||H&&x(f))&&da(H,[f],a,z,I,[g]));z(e,c)}}function d(a,e,c,d){if(H){var k=B,p=Q;B=a;d&&(B=a[d],Q+="."+d);O&&B&&(B=f._fltr(Q,B,d?[a].concat(y):y,O));B&&(c||x(B))&&g(wa+".observe"+(z?".obs"+(K=z._cId=z._cId||S++):""),b,!0,e);B=k;Q=p}}var c,q,k,F,p,r,L,u,z,K,N,M,D,I,G,la,
ia,C,y,Q,O,R,$,fa,H=!1!=this,na=!0,ga=ra,ba=Array.apply(0,arguments);c=ba.pop();var Z=ba.shift(),B=C=Z,X=ba.length;Z+""===Z&&H&&(R=Z,Z=B=C=ba.shift(),X--);if(ca(c))z=c;else if(c+""===c&&(Q=c,y=ba.pop(),O=ba.pop(),c=ba.pop(),X-=3),!0===c?u=c:c&&(Z=c,na=b),c=ba[X-1],X&&c===b||ca(c))z=ba.pop(),X--;X&&ca(ba[X-1])&&(I=z,z=ba.pop(),X--);ga+=u?z?".obs"+z._cId:"":".obs"+(K=z._cId=z._cId||S++);u||(la=sa[K]=sa[K]||{});$=R&&R.match(Oa)||[""];for(fa=$.length;fa--;)for(R=$[fa],x(C)?d(C,u,!0):u&&0===X&&C&&g(ga,
""),c=ia=0;c<X;c++)if(r=ba[c],""!==r){B=C;if(""+r===r){F=r.split("^");F[1]&&(ia=F[0].split(".").length,r=F.join("."),ia=r.split(".").length-ia);if(I&&(G=I(r,C))){X+=G.length-1;va.apply(ba,[c--,1].concat(G));continue}F=r.split(".")}else na&&!ca(r)&&(r&&r._jsvOb&&(C=e(r,ba.slice(c+1)),C.noArray=!H,C._cId=z._cId,da(H,[Z],ba.slice(0,c),C,I),C=b,r=r._ob),B=r),C=r,F=[C];for(;B&&(p=F.shift())!==b;)if(typeof B===Ba){if(""+p===p){if(""===p)continue;if(F.length<ia+1&&!B.nodeType){if(!u&&(D=ka(B)&&a._data(B))){N=
(D=(D=D.events)&&D[ja])&&D.length;for(k=0;N--;)!(M=D[N].data)||M.cb!==z||M.ns!==R||M.prop!==p&&"*"!==M.prop||((q=F.join("."))&&M.paths.push(q),k++);if(k){B=B[p];continue}}if("*"===p){!u&&D&&D.length&&g(ga,"",!1,!0);ca(B)?(L=B.depends)&&da(H,[L],z,u||Z):g(ga,"");for(q in B)d(B,u,b,q);break}else p&&g(ga+"."+p,F.join("^"))}Q&&(Q+="."+p);p=B[p]}if(ca(p)){(L=p.depends)&&da(H,[B],t(L,B),z,I,u||[Z]);break}B=p}d(B,u)}K&&ea(la,K);return{cbId:K,bnd:la}}function Fa(){[].push.call(arguments,!0);return fa.apply(this,
arguments)}function da(){var b=[].concat.apply([],arguments);return fa.apply(b.shift(),b)}function pa(b,a,d,c){b+""!==b&&(d=a,a=b,b="");Ga(b,this._data,a,d,[],"root",c)}function qa(b,a,d){pa.call(this,b,a,d,!0)}function Ga(a,e,d,c,q,k,F){function p(b,a){u=b.length;N=[[b]].concat(N);for(K=k+"[]";u--;)r(b,u,a,1)}function r(e,k,p,q){var r;k!==La&&(r=f._fltr(K,e[k],N,c))&&Ga(a,r,d,c||(q?b:0),N.slice(),K,p)}function t(b,a){var g=q;k=b.data.observeAll._path;N=[b.target].concat(q);switch(a.change){case "insert":p(a.items);
break;case "remove":p(a.items,!0);break;case "refresh":p(a.oldItems,!0);p(b.target);break;case "set":K=k+"."+a.path,r(a,"oldValue",!0),r(a,"value")}d.apply(this,arguments);q=g}var u,z,K,N;if(typeof e===Ba){z=x(e)?"":"*";if(d){if(z||0!==c)t._cId=d._cId=d._cId||S++,fa(a,e,z,t,F,c,q,k)}else fa(a,e,z,b,F,c,q,k);if(z)for(u in N=[e].concat(q),e)K=k+"."+u,r(e,u,F);else p(e,F)}}function Da(b){return 0>b.indexOf(".")&&0>b.indexOf("[")}if(!a)throw"jsViews/jsObservable require jQuery";if(!a.observable){q=a.views=
a.views||{jsviews:"v1.0.0-alpha",sub:{}};var $=q.sub,Ha=a.event.special,va=[].splice,x=a.isArray,La=a.expando,Ba="object",na=parseInt,Oa=/\S+/g,ja=$.propChng=$.propChng||"propertyChange",wa=$.arrChng=$.arrChng||"arrayChange",sa=$._cbBnds=$._cbBnds||{},ra=ja+".observe",ca=a.isFunction,ma=1,S=1,ka=a.hasData,Ea={};$.getDeps=function(){var b=arguments;return function(){for(var a,d,c=[],f=b.length;f--;)a=b[f--],(d=b[f])&&(c=c.concat(ca(d)?d(a,a):d));return c}};a.observable=f;f._fltr=function(b,a,d,c){if(c&&
ca(c)?c(b,a,d):1)return a=ca(a)?a.set&&a.call(d[0]):a,typeof a===Ba&&a};f.Object=G;f.Array=O;a.observe=f.observe=fa;a.unobserve=f.unobserve=Fa;f._apply=da;G.prototype={_data:null,observeAll:pa,unobserveAll:qa,data:function(){return this._data},setProperty:function(a,e,d){var c,f=this._data;a=a||"";if(f)if(x(a))for(c=a.length;c--;)e=a[c],this.setProperty(e.name,e.value,d===b||d);else if(""+a!==a)for(c in a)this.setProperty(c,a[c],e);else if(a!==La){for(a=a.split(".");f&&1<a.length;)f=f[a.shift()];
f&&this._setProperty(f,a[0],e,d)}return this},removeProperty:function(a){this.setProperty(a,Ea);return this},_setProperty:function(a,e,d,c){var f,k,q,p=e?a[e]:a;ca(p)&&p.set&&(k=p,f=!0===p.set?p:p.set,p=p.call(a));if(p!==d||c&&p!=d)if(!(p instanceof Date)||p>d||p<d)f?(f.call(a,d),d=k.call(a)):(q=d===Ea)?(delete a[e],d=b):e&&(a[e]=d),this._trigger(a,{change:"set",path:e,value:d,oldValue:p,remove:q})},_trigger:function(b,e){a(b).triggerHandler(ja,e)}};O.prototype={_data:null,observeAll:pa,unobserveAll:qa,
data:function(){return this._data},insert:function(a,b){var d=this._data;1===arguments.length&&(b=a,a=d.length);a=na(a);-1<a&&a<=d.length&&(b=x(b)?b:[b],b.length&&this._insert(a,b));return this},_insert:function(a,b){var d=this._data,c=d.length;va.apply(d,[a,0].concat(b));this._trigger({change:"insert",index:a,items:b},c)},remove:function(a,e){var d;d=this._data;a===b&&(a=d.length-1);a=na(a);e=e?na(e):0===e?0:1;-1<e&&-1<a&&(d=d.slice(a,a+e),(e=d.length)&&this._remove(a,e,d));return this},_remove:function(a,
b,d){var c=this._data,f=c.length;c.splice(a,b);this._trigger({change:"remove",index:a,items:d},f)},move:function(a,b,d){d=d?na(d):0===d?0:1;a=na(a);b=na(b);if(0<d&&-1<a&&-1<b&&a!==b){var c=this._data.slice(a,a+d);(d=c.length)&&this._move(a,b,d,c)}return this},_move:function(a,b,d,c){var f=this._data,k=f.length;f.splice(a,d);f.splice.apply(f,[b,0].concat(c));this._trigger({change:"move",oldIndex:a,index:b,items:c},k)},refresh:function(a){var b=this._data.slice();this._refresh(b,a);return this},_refresh:function(a,
b){var d=this._data,c=d.length;va.apply(d,[0,d.length].concat(b));this._trigger({change:"refresh",oldItems:a},c)},_trigger:function(b,e){var d=this._data,c=d.length,d=a([d]);d.triggerHandler(wa,b);c!==e&&d.triggerHandler(ja,{change:"set",path:"length",value:c,oldValue:e})}};Ha[ja]=Ha[wa]={remove:function(b){var e,d,c,f,k=b.data;if(k&&(k.off=!0,k=k.cb)&&(e=sa[k._cId])){b=a._data(this).events[b.type];for(c=b.length;c--&&!d;)d=(f=b[c].data)&&f.cb===k;d||(delete e[a.data(this,"obId")],ea(e,k._cId))}}};
q.map=function(g){function e(a,c,e){var k,q=this;this.src&&this.unmap();"object"===typeof a&&(q.src=a,q.tgt=e||q.tgt||[],q.options=c||q.options,q.update(),g.obsSrc&&f(q.src).observeAll(q.obs=function(a,c){k||(k=!0,g.obsSrc(q,a,c),k=b)},q.srcFlt),g.obsTgt&&f(q.tgt).observeAll(q.obt=function(a,c){k||(k=!0,g.obsTgt(q,a,c),k=b)},q.tgtFlt))}ca(g)&&(g={getTgt:g});g.baseMap&&(g=a.extend({},g.baseMap,g));g.map=function(a,b,g){return new e(a,b,g)};(e.prototype={srcFlt:g.srcFlt||Da,tgtFlt:g.tgtFlt||Da,update:function(a){f(this.tgt).refresh(g.getTgt(this.src,
this.options=a||this.options))},unmap:function(){this.src&&(this.obs&&f(this.src).unobserveAll(this.obs,this.srcFlt),this.obt&&f(this.tgt).unobserveAll(this.obt,this.tgtFlt),this.src=b)},map:e,_def:g}).constructor=e;return g}}})(this,this.jQuery);(function(q,a,b){function f(n,s,v){var h,A,c,g,d,e,f,m,k,l=n.target,q=l._jsvBnd,p=/&(\d+)\+?/g;if(q)for(;c=p.exec(q);)if(c=aa[c[1]])if(s=c.to){c=c.linkCtx;f=c.view;k=c.tag;e=a(l);d=f.hlp(X);m=f.hlp(Na);A=P(l);h=Va[A];v===b&&(v=R(A)?A(l):h?e[h]():e.attr(A));
h=s[1];s=s[0];h&&(g=R(h)?h:f.getRsc("converters",h));g&&(v=g.call(k,v));h=f.linkCtx;f.linkCtx=c;A={change:"change",oldValue:c._val,value:v};if(!(d&&!1===d.call(c,n,A)||k&&k.onBeforeChange&&!1===k.onBeforeChange(n,A)||v===b)&&(d=s[0],v!==b&&d)){d=d._jsvOb?d._ob:d;k&&(k._.chging=!0);H(d).setProperty(s[2]||s[1],v);m&&m.call(c,n,A);if(k){if(k.onAfterChange)k.onAfterChange(n,A);delete k._.chging}c._val=v}f.linkCtx=h}}function G(n,s,v){var h,A,c,g,d,e=this.tag,f=this.data,k=this.elem;c=this.convert;var e=
k.parentNode,l=this.view,q=l.linkCtx,p=l.hlp(X);l.linkCtx=this;if(e&&!(p&&s&&!1===p.call(this,n,s)||s&&"*"!==n.data.prop&&n.data.prop!==s.path)){s&&(this.eventArgs=s);if(s||this._initVal){delete this._initVal;if(v._er)try{A=v(f,l)}catch(r){g=v._er,d=K(r,l,(new Function("data,view","return "+g+";"))(f,l)),A=[{props:{},args:[d]}]}else A=v(f,l,C);a:{var x=A,w=e=this.tag;h=this.attr||P(k,!0,c!==b);var t,z,u=w&&w.parentElem||this.elem;if(x!==b){z=a(u);h=w&&w.attr||h;R(x)&&K(this.expr+": missing parens");
if(w=/^css-/.test(h)&&h.slice(4))t=a.style(u,w),+x===x&&(t=parseInt(t));else if("link"!==h){if("value"===h)u.type===U&&(t=z.prop(h=J));else if(h===za)if(u.value===""+x)t=z.prop(J);else break a;t===b&&(t=(t=Va[h])?z[t]():z.attr(h))}this._val=t}}if(e){c=g||e._er;A=A[0]?A:[A];v=!c&&s&&e.onUpdate&&!1===e.onUpdate(n,s,A);sa(e,A,c);if(v||h===Ja){h===m&&e.onBeforeLink&&e.onBeforeLink();na(e,e.tagCtx);da(this,f,k);l.linkCtx=q;return}if(e._.chging)return;A=":"===e.tagName?C._cnvt(e.cvt,l,A[0]):C._tag(e,l,
l.tmpl,A,!0,d)}else v._tag&&(A=(c=""===c?Ia:c)?C._cnvt(c,l,A[0]||A):C._tag(v._tag,l,l.tmpl,A,!0,d),e=this.tag,h=this.attr||h);O(A,this,h,e)&&s&&(p=l.hlp(Na))&&p.call(this,n,s);e&&(e._er=g,na(e,e.tagCtx))}da(this,f,k);l.linkCtx=q}}function O(n,s,v,h){var c,d,f,l,k,p,r=n!==b,x=s.data,t=h&&h.parentElem||s.elem,w=a(t),Pa=s.view;p=s._val;var z=Pa.linkCtx,u=h||v===m;h&&(h.parentElem=h.parentElem||s.expr||h._elCnt?t:t.parentNode,d=h._prv,f=h._nxt);if(r){"visible"===v&&(v="css-display");if(/^css-/.test(v))"visible"===
s.attr&&(s=(t.currentStyle||gb.call(q,t,"")).display,n?(n=t._jsvd||s,n!==Ja||(n=cb[c=t.nodeName])||(s=ia.createElement(c),ia.body.appendChild(s),n=cb[c]=(s.currentStyle||gb.call(q,s,"")).display,ia.body.removeChild(s))):(t._jsvd=s,n=Ja)),(u=u||p!==n)&&a.style(t,v.slice(4),n);else if("link"!==v){if(v===J)k=!0,n=n&&"false"!==n;else if(v===za)if(t.value===""+n)n=k=!0,v=J;else{da(s,x,t);return}else if("selected"===v||"disabled"===v||"multiple"===v||"readonly"===v)n=n&&"false"!==n?v:null;if(c=Va[v])if(v===
m){Pa.linkCtx=s;if(h&&h._.inline){v=h.nodes(!0);if(h._elCnt){if(d&&d!==f)g(d,f,t,h._tgId,"^",!0);else if(l=t._dfr)p=h._tgId+"^",c=l.indexOf("#"+p)+1,k=l.indexOf("/"+p),c&&0<k&&(c+=p.length,k>c&&(t._dfr=l.slice(0,c)+l.slice(k),e(l.slice(c,k))));d=d?d.previousSibling:f?f.previousSibling:t.lastChild}a(v).remove();if(h&&h.onBeforeLink)h.onBeforeLink();l=Pa.link(Pa.data,t,d,f,n,h&&{tag:h._tgId,lazyLink:h.tagCtx.props.lazyLink})}else{r&&w.empty();if(h&&h.onBeforeLink)h.onBeforeLink();r&&(l=Pa.link(x,t,
d,f,n,h&&{tag:h._tgId}))}Pa.linkCtx=z}else{if(u=u||p!==n)if("text"===v&&t.children&&!t.children[0])t.textContent!==b?t.textContent=n:t.innerText=null===n?"":n;else w[c](n)}else if(u=u||p!==n)w[k?"prop":"attr"](v,n!==b||k?n:null);s._val=n}return l||u}if(v===m&&h&&h.onBeforeLink)h.onBeforeLink()}function t(a,b){var v=this.hlp(X),h=this.hlp(Na);if(!v||!1!==v.call(this,a,b)){if(b){var v=b.index,c=b.items;switch(b.change){case "insert":this.addViews(v,c);break;case "remove":this.removeViews(v,c.length);
break;case "move":this.refresh();break;case "refresh":this.refresh()}}h&&h.call(this,a,b)}}function ea(n){var s,v=n.type,h=n.data,c=n._.bnd;if(!n._.useKey&&c){if(s=n._.bndArr)a([s[1]]).off(Z,s[0]),n._.bndArr=b;c!==!!c&&c._.inline?v?c._.arrVws[n._.id]=n:delete c._.arrVws[n._.id]:v&&h&&(s=function(a){a.data&&a.data.off||t.apply(n,arguments)},a([h]).on(Z,s),n._.bndArr=[s,h])}}function P(a,b,v){var h=a.nodeName.toLowerCase(),c=Q.merge[h]||a.contentEditable===Ia&&{to:m,from:m};return c?b?"input"===h&&
a.type===za?za:c.to:c.from:b?v?"text":m:""}function fa(n,s,v,h,c,d,e){var f,l,k,m=n.parentElem,p=n._prv,q=n._nxt,t=n._elCnt;p&&p.parentNode!==m&&K("Missing parentNode");if(e)for(k in l=n.nodes(),t&&p&&p!==q&&g(p,q,m,n._.id,"_",!0),n.removeViews(b,b,!0),h=q,t&&(p=p?p.previousSibling:q?q.previousSibling:m.lastChild),a(l).remove(),n._.bnds)ca(k);else{if(s){f=h[s-1];if(!f)return!1;p=f._nxt}t?p=(h=p)?h.previousSibling:m.lastChild:h=p.nextSibling}s=v.render(c,d,n._.useKey&&e,n,e||s,!0);n.link(c,m,p,h,s,
f)}function Fa(a,s,v){var h;v?(h="^`",s=s._.tag,v=s._tgId,v||(aa[v=db++]=s,s._tgId=""+v)):(h="_`",la[v=s._.id]=s);return"#"+v+h+(a!=b?a:"")+"/"+v+h}function da(a,s,v){var h,c=a.tag,e=a.convertBack,d=[],g=a._bndId||""+db++,f=a._hdlr;delete a._bndId;c&&(d=c.depends||d,d=R(d)?c.depends(c):d,h=c.linkedElem);if(!a._depends||""+a._depends!==""+d)if(a._depends&&H._apply(!1,[s],a._depends,f,!0),s=H._apply(!1,[s],a.fn.deps,d,f,a._ctxCb),s.elem=v,s.linkCtx=a,s._tgId=g,v._jsvBnd=v._jsvBnd||"",v._jsvBnd+="&"+
g,a._depends=d,a.view._.bnds[g]=g,aa[g]=s,h&&(s.to=[[],e]),(h||e!==b)&&wa(s,c&&c.convertBack||e),c){if(c.onAfterBind)c.onAfterBind(s);c.flow||c._.inline||(v.setAttribute(ga,(v.getAttribute(ga)||"")+"#"+g+"^/"+g+"^"),c._tgId=""+g)}if(h&&h[0])for(c._.radio&&(h=h.children("input[type=radio]")),a=h.length;a--;)h[a]._jsvBnd=h[a]._jsvBnd||v._jsvBnd+"+",h[a]._jsvLkEl=c}function pa(a,b,c,h,d,e,g){return qa(this,a,b,c,h,d,e,g)}function qa(n,s,c,h,d,e,g,l){if(n&&s){s=s.jquery?s:a(s);k||(k=ia.body,a(k).on(B,
f).on("blur","[contenteditable]",f));for(var m,p,q,t,r,w,u,z,D=Fa,C=h&&"replace"===h.target,I=s.length;I--;)if(u=s[I],""+n===n)Da(n,u,F(u),b,!0,c,h);else{e=e||F(u);if(n.markup!==b)!1===e.link&&(h=h||{},h.link=D=!1),C&&(w=u.parentNode),q=n.render(c,h,d,e,b,D),w?(g=u.previousSibling,l=u.nextSibling,a.cleanData([u],!0),w.removeChild(u),u=w):(g=l=b,a(u).empty());else if(!0===n&&e===V)z={lnk:1};else break;if(u._dfr&&!l){t=x(u._dfr,!0,eb);m=0;for(p=t.length;m<p;m++)r=t[m],(r=la[r.id])&&r.data!==b&&r.parent.removeViews(r._.key,
b,!0);u._dfr=""}e.link(c,u,g,l,q,z,h)}}return s}function Ga(n,s,c,h,e,d,g,f){function l(a,n,s,c,h,v,d,g,f,k,m,p,t){var ha,u="";if(t)return q=0,a;r=g||f||"";c=c||k;s=s||p;ja&&!s&&(c||r||v)&&(ja=b,S=ma.shift());if(c=c||s)q=0,ja=b,fa&&(s||p?Za[S]||/;svg;|;math;/.test(";"+ma.join(";")+";")||(ha="'<"+S+".../"):Za[c]?ha="'</"+c:ma.length&&c===S||(ha="Mismatch: '</"+c),ha&&Wa(ha+">' in:\n"+e)),pa=ua,S=ma.shift(),ua=Ya[S],k=k?"</"+k+">":"",pa&&(ta+=Ca,Ca="",ua?ta+="-":(u=k+ya+"@"+ta+Aa+(m||""),ta=Ea.shift()));
ua?(v?Ca+=v:n=k||p||"",r&&(n+=r,Ca&&(n+=" "+ga+'="'+Ca+'"',Ca=""))):n=v?n+u+h+ya+v+Aa+d+r:u||a;q&&v&&Wa(" No {^{ tags within elem markup ("+q+' ). Use data-link="..."');r&&(q=r,ma.unshift(S),S=r.slice(1),ma[0]&&ma[0]===W[S]&&K("Parent of <tr> must be <tbody>"),ja=Za[S],(ua=Ya[S])&&!pa&&(Ea.unshift(ta),ta=""),pa=ua,ta&&ua&&(ta+="+"));return n}function k(a,n){var c,h,v,d,e=[];if(a){"@"===a._tkns.charAt(0)&&(n=y.previousSibling,y.parentNode.removeChild(y),y=b);for(H=a.length;H--;){G=a[H];v=G.ch;if(c=
G.path)for(B=c.length-1;h=c.charAt(B--);)"+"===h?"-"===c.charAt(B)?(B--,n=n.previousSibling):n=n.parentNode:n=n.lastChild;if("^"===v){if(r=aa[c=G.id]){h=n&&(!y||y.parentNode!==n);if(!y||h)r.parentElem=n;G.elCnt&&h&&(n._dfr=(G.open?"#":"/")+c+v+(n._dfr||""));e.push([h?null:y,G])}}else if(E=la[c=G.id])(E.parentElem||(E.parentElem=n||y&&y.parentNode||s,E._.onRender=Fa,E._.onArrayChange=t,ea(E)),h=E.parentElem,G.open)?(E._elCnt=G.elCnt,n&&!y?n._dfr="#"+c+v+(n._dfr||""):(E._prv||(h._dfr=Ha(h._dfr,"#"+
c+v)),E._prv=y)):(!n||y&&y.parentNode===n?y&&(E._nxt||(h._dfr=Ha(h._dfr,"/"+c+v)),E._nxt=y):(n._dfr="/"+c+v+(n._dfr||""),E._nxt=b),u=E.linkCtx,(d=E.ctx&&E.ctx.onAfterCreate||Ja)&&d.call(u,E))}for(H=e.length;H--;)sa.push(e[H])}return!a||a.elCnt}function m(a){var b,n;if(a)for(H=a.length,B=0;B<H;B++)if(G=a[B],R.id)R.id=R.id!==G.id&&R.id;else if(n=r=aa[G.id].linkCtx.tag,!r.flow){if(!$){for(b=1;n=n.parent;)b++;da=da||b}!$&&b!==da||ba&&r.tagName!==ba||X.push(r)}}function p(){J=Xa?s.querySelectorAll(D):
a(D,s).get();C=J.length;c&&c.innerHTML&&(O=Xa?c.querySelectorAll(D):a(D,c).get(),c=O.length?O[O.length-1]:c);for(w=da=0;w<C;w++)if(y=J[w],c&&!wa)wa=y===c;else if(h&&y===h)break;else y.parentNode&&(va&&(G=x(y,b,fb))&&(G=G[0])&&(ra=ra?G.id!==ra&&ra:G.open&&G.id),!ra&&Ga(x(y,b,X&&nb))&&!R&&y.getAttribute(N)&&sa.push([y]));e===b&&s.getAttribute(N)&&sa.push([s]);La(c,ua);La(h,ua);if(!R){if(ua&&ta+Ca&&(y=h,ta&&(h?k(x(ta+"+",!0),h):k(x(ta,!0),s)),k(x(Ca,!0),s),h)){Y=h.getAttribute(ga);if(C=Y.indexOf(qa)+
1)Y=Y.slice(C+qa.length-1);h.setAttribute(ga,Ca+Y)}C=sa.length;for(w=0;w<C;w++)if(y=sa[w],M=y[1],y=y[0],M){if(r=aa[M.id]){if(u=r.linkCtx)r=u.tag,r.linkCtx=u;M.open?(y&&(r.parentElem=y.parentNode,r._prv=y),r._elCnt=M.elCnt,!r||r.onBeforeLink&&!1===r.onBeforeLink()||r._.bound||(r._.bound=!0,E=r.tagCtx.view,Da(b,r._prv,E,M.id)),r._.linking=!0):(r._nxt=y,r._.linking&&(ca=r.tagCtx,E=ca.view,delete r._.linking,r._.bound||(r._.bound=!0,Da(b,r._prv,E,M.id)),na(r,ca)))}}else Da(y.getAttribute(N),y,F(y),b,
va,n,g)}oa&&oa.resolve()}var q,u,r,w,C,B,H,J,y,E,G,M,O,L,P,U,T,X,$,ba,ca,fa,da,R,Z,V,S,ja,ka,Y,ua,pa,Ca,qa,wa,ra,oa,va,za=this._.id+"_",ta="",sa=[],ma=[],Ea=[],Ja=this.hlp(Ma),Ga=k;d&&(oa=d.lazyLink&&a.Deferred(),d.tmpl?P="/"+d._.id+"_":(va=d.lnk,R=d.get,d.tag&&(za=d.tag+"^",d=!0)),d=!0===d);R&&(Ga=m,X=R.tags,$=R.deep,ba=R.name);s=s?""+s===s?a(s)[0]:s.jquery?s[0]:s:this.parentElem||ia.body;fa=!Q.noValidate&&s.contentEditable!==Ia;S=s.tagName.toLowerCase();ua=!!Ya[S];c=c&&Ba(c,ua);h=h&&Ba(h,ua)||null;
if(e!=b){ka=Z=ia.createElement("div");qa=Ca="";V="http://www.w3.org/2000/svg"===s.namespaceURI?"svg_ns":(L=ib.exec(e))&&L[1]||"";z&&L&&L[2]&&K("Unsupported: "+L[2]);if(ua){for(T=h;T&&!(U=x(T));)T=T.nextSibling;if(Y=U?U._tkns:s._dfr){L=P||"";if(d||!P)L+="#"+za;B=Y.indexOf(L);B+1&&(B+=L.length,qa=Ca=Y.slice(0,B),Y=Y.slice(B),U?T.setAttribute(ga,Y):s._dfr=Y)}}ja=b;e=(""+e).replace(lb,l);fa&&ma.length&&Wa("Mismatched '<"+S+"...>' in:\n"+e);if(f)return;bb.appendChild(Z);V=I[V]||I.div;d=V[0];for(ka.innerHTML=
V[1]+e+V[2];d--;)ka=ka.lastChild;bb.removeChild(Z);for(Z=ia.createDocumentFragment();V=ka.firstChild;)Z.appendChild(V);s.insertBefore(Z,h)}oa?setTimeout(p,0):p();return oa&&oa.promise()}function Da(n,s,c,h,d,e,g){var f,k,l,q,t,u,w;if(h)d=aa[h],d=d.linkCtx?d.linkCtx.tag:d,u=d.linkCtx||{data:c.data,elem:d._elCnt?d.parentElem:s,view:c,ctx:c.ctx,attr:m,fn:d._.bnd,tag:d,_bndId:h},$(u,u.fn);else if(n&&s)for(e=d?e:c.data,h=c.tmpl,k=P(s),n=a.trim(n).replace(jb,"\\$&"),n=n.slice(-1)!==L?r+":"+n+(k?":":"")+
L:n,p.lastIndex=0;f=p.exec(n);)w=p.lastIndex,k=f[1],t=f[3],q=f[10],l=b,u={data:e,elem:s,view:c,ctx:g,attr:k,isLk:d,_initVal:!f[2]},f[6]&&(!k&&(l=/:([\w$]*)$/.exec(q))&&(l=l[1],l!==b&&(q=-l.length-1,t=t.slice(0,q-1)+L)),null===l&&(l=b),u.convert=f[5]||""),u.expr=k+t,(f=h.links[t])||(h.links[t]=f=y.tmplFn(t,h,!0,l)),u.fn=f,k||l===b||(u.convertBack=l),$(u,f),p.lastIndex=w}function $(a,s){function c(b,v){G.call(a,b,v,s)}c.noArray=!0;a.isLk&&(a.view=new y.View(a.ctx,"link",V,a.data,V.tmpl,b,b,Fa));a._ctxCb=
ka(a.view);a._hdlr=c;c(!0)}function Ha(a,b){var c;return a?(c=a.indexOf(b),c+1?a.slice(0,c)+a.slice(c+b.length):a):""}function va(a){return a&&(""+a===a?a:"SCRIPT"===a.tagName?a.type.slice(3):1===a.nodeType&&a.getAttribute(ga)||"")}function x(a,b,c){function h(a,b,n,c,s,h){e.push({elCnt:d,id:c,ch:s,open:b,close:n,path:h,token:a})}var d,e=[];if(b=b?a:va(a))return e.elCnt=!a.type,d="@"===b.charAt(0)||!a.type,e._tkns=b,b.replace(c||ob,h),e}function La(a,b){a&&("jsv"===a.type?a.parentNode.removeChild(a):
b&&""===a.getAttribute(N)&&a.removeAttribute(N))}function Ba(a,b){for(var c=a;b&&c&&1!==c.nodeType;)c=c.previousSibling;c&&(1!==c.nodeType?(c=ia.createElement("SCRIPT"),c.type="jsv",a.parentNode.insertBefore(c,a)):va(c)||c.getAttribute(N)||c.setAttribute(N,""));return c}function na(n,c){var d,h,e,g,f,l,k;d=c.view;var m=n.linkCtx=n.linkCtx||{tag:n,data:d.data,view:d,ctx:d.ctx};if(n.onAfterLink)n.onAfterLink(c,m);if(h=(d=n.targetTag?n.targetTag.linkedElem:n.linkedElem)&&d[0]){if(e=n._.radio)d=d.children("input[type=radio]");
if(e||!n._.chging){g=y.cvt(n,n.convert)[0];if(e||h!==m.elem){for(k=d.length;k--;){h=d[k];f=h._jsvLkEl;if(n._.inline&&(!f||f!==n&&f.targetTag!==n))for(h._jsvLkEl=n,f=m.elem?m.elem._jsvBnd:n._prv._jsvBnd,h._jsvBnd=f+"+",f=f.slice(1).split("&"),l=f.length;l--;)wa(aa[f[l]],n.convertBack);e&&(h[J]=g===h.value)}m._val=g}g!==b&&(e||h.value===b?h.contentEditable===Ia&&(h.innerHTML=g):h.type===U?h[J]=g&&"false"!==g:d.val(g))}}if(h=h||":"===n.tagName&&m.elem)e=h._jsvTr,g=c.props.trigger,e!==g&&(h._jsvTr=g,
d=d||a(h),ja(d,e,"off"),ja(d,g,"on"))}function Oa(a){setTimeout(function(){f(a)},0)}function ja(a,b,c){b&&a[c](!0===b?"keydown":b,!0===b?Oa:f)}function wa(a,b){var c,h,d,e,g,f=a.linkCtx,l=f.data,k=f.fn.paths;if(a&&k){for(h=(k=(c=k._jsvto)||k[0])&&k.length;h&&""+(e=k[--h])!==e;);!e||f.tag&&!f.tag.tagCtx.args.length?a.to=[[],b]:(e=e.split("^").join("."),a.to="."===e.charAt(0)?[[g=k[h-1],e.slice(1)],b]:[f._ctxCb(d=h?k[0].split("^").join("."):e)||[l,d],b],c&&g&&(a.to[0][0]=f._ctxCb(g,l)))}}function sa(a,
b,c){var h;h=a.tagCtx.view;var d=a.tagCtxs||[a.tagCtx],e=d.length,g=!b;b=b||a._.bnd.call(h.tmpl,(a.linkCtx||h).data,h,C);if(c)d=a.tagCtxs=b,a.tagCtx=d[0];else for(;e--;)c=d[e],h=b[e],H(c.props).setProperty(h.props),Y(c.ctx,h.ctx),c.args=h.args,g&&(c.tmpl=h.tmpl);y._ths(a,d[0]);return d}function ra(a){for(var b,c,d=[],g=b=a.length;g--;)d.push(a[g]);for(g=b;g--;)if(b=d[g],b.parentNode){if(c=b._jsvBnd)for(c=c.slice(1).split("&"),b._jsvBnd="",a=c.length;a--;)ca(c[a],b._jsvLkEl,b);e(va(b)+(b._dfr||""))}}
function ca(c,d,e){var h,g,f,k=aa[c];if(d)e===d.linkedElem[0]&&(delete e._jsvLkEl,delete d.linkedElem);else if(k){delete aa[c];for(h in k.bnd)d=k.bnd[h],e=".obs"+k.cbId,a.isArray(d)?a([d]).off(Z+e).off(ba+e):a(d).off(ba+e),delete k.bnd[h];if(h=k.linkCtx){if(d=h.tag){if(e=d.tagCtxs)for(g=e.length;g--;)(f=e[g].map)&&f.unmap();if(g=(e=(f=d.linkedElem)&&f[0]||h.elem)&&e._jsvTr)ja(f||a(e),g,"off"),e._jsvTr=b;if(d.onDispose)d.onDispose();d._elCnt||(d._prv&&d._prv.parentNode.removeChild(d._prv),d._nxt&&
d._nxt.parentNode.removeChild(d._nxt))}delete h.view._.bnds[c]}delete y._cbBnds[k.cbId]}}function ma(c,d){c===b?(k&&(a(k).off(B,f).off("blur","[contenteditable]",f),k=b),c=!0,V.removeViews(),ra(ia.body.getElementsByTagName("*"))):d&&!0===c&&(d=d.jquery?d:a(d),d.each(function(){for(var a;(a=F(this,!0))&&a.parent;)a.parent.removeViews(a._.key,b,!0);ra(this.getElementsByTagName("*"));ra([this])}));return d}function S(a,b){return ma(this,a,b)}function ka(a){return function(b,c){var d,e,g=[c];if(a&&b){if(b._jsvOb)return b._jsvOb.call(a.tmpl,
c,a,C);if("~"===b.charAt(0)){if("~tag"===b.slice(0,4)&&(e=a.ctx,"."===b.charAt(4)&&(d=b.slice(5).split("."),e=e.tag),d))return e?[e,d.join("."),c]:[];b=b.slice(1).split(".");if(c=a.hlp(b.shift()))b.length&&g.unshift(b.join(".")),g.unshift(c);return c?g:[]}if("#"===b.charAt(0))return"#data"===b?[]:[a,b.replace(kb,""),c]}}}function Ea(a){return a.type===U?a[J]:a.value}function g(a,b,c,d,e,g){var f,k,l,m,p,q,r=0,t=a===b;if(a){l=x(a)||[];f=0;for(k=l.length;f<k;f++){m=l[f];q=m.id;if(q===d&&m.ch===e)if(g)k=
0;else break;t||(p="_"===m.ch?la[q]:aa[q].linkCtx.tag,m.open?p._prv=b:m.close&&(p._nxt=b));r+=q.length+2}r&&a.setAttribute(ga,a.getAttribute(ga).slice(r));a=b?b.getAttribute(ga):c._dfr;if(k=a.indexOf("/"+d+e)+1)a=l._tkns.slice(0,r)+a.slice(k+(g?-1:d.length+1));a&&(b?b.setAttribute(ga,a):c._dfr=a)}else c._dfr=Ha(c._dfr,"#"+d+e),g||b||(c._dfr=Ha(c._dfr,"/"+d+e))}function e(a){var c,d,e;if(e=x(a,!0,mb))for(a=0,c=e.length;a<c;a++)d=e[a],"_"===d.ch?(d=la[d.id])&&d.type&&d.parent.removeViews(d._.key,b,
!0):ca(d.id)}function d(a,b,c){if("set"===c.change){a=a.tgt;for(b=a.length;b--&&a[b].key!==c.path;);-1===b?c.path&&H(a).insert({key:c.path,prop:c.value}):c.remove?H(a).remove(b):H(a[b]).setProperty("prop",c.value)}}function c(a,b,c){a=a.src;var d=c.change;"set"===d?"prop"===c.path?H(a).setProperty(b.target.key,c.value):(H(a).setProperty(c.oldValue,null),delete a[c.oldValue],H(a).setProperty(c.value,b.target.prop)):"remove"===d?(b=c.items[0],H(a).removeProperty(b.key),delete a[b.key]):"insert"===d&&
(b=c.items[0],b.key&&H(a).setProperty(b.key,b.prop))}function E(a){return 0>a.indexOf(".")}var k,F,p,r,L,u,z,K,N,M,D,I,V,la,ia=q.document,C=a.views,y=C.sub,Q=C.settings,Y=y.extend,R=a.isFunction,$a=C.converters,oa=C.tags,H=a.observable,Qa=H.observe,ga="data-jsv",ba=y.propChng=y.propChng||"propertyChange",Z=y.arrChng=y.arrChng||"arrayChange",B="change.jsv",X="onBeforeChange",Na="onAfterChange",Ma="onAfterCreate",J="checked",U="checkbox",za="radio",Ja="none",Ia="true",Aa='">\x3c/script>',ya='<script type="jsv',
T="script,["+ga+"]",m="html",Va={value:"val",input:"val",html:m,text:"text"},ab={from:"value",to:"value"},w=0,hb=a.cleanData,l=Q.delimiters,Wa=y.syntaxErr,ib=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,jb=/['"\\]/g,bb=ia.createDocumentFragment(),Xa=ia.querySelector,Ya={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},W={tr:"table"},Za={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},
cb={},aa={},db=1,kb=/^#(view\.?)?/,lb=/(^|(\/>)|<\/(\w+)>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>))/g,eb=/(#)()(\d+)(_)/g,mb=/(#)()(\d+)([_^])/g,fb=/(?:(#)|(\/))(\d+)(_)/g,nb=/(#)()(\d+)(\^)/g,ob=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,gb=q.getComputedStyle;if(!a)throw"JsViews requires jQuery";if(!C)throw"JsViews requires JsRender";if(!H)throw"JsViews requires jquery.observable";a.link||(M={contents:function(c,d){c!==!!c&&(d=c,c=b);var e,h=a(this.nodes());
h[0]&&(e=d?h.filter(d):h,h=c&&d?e.add(h.find(d)):e);return h},nodes:function(a,b,c){var d=this._elCnt,e=!b&&d,g=[];b=b||this._prv;c=c||this._nxt;for(b=e?b===this._nxt?this.parentElem.lastSibling:b:!1===this._.inline?b||this.linkCtx.elem.firstChild:b&&b.nextSibling;b&&(!c||b!==c);)(a||d||"SCRIPT"!==b.tagName)&&g.push(b),b=b.nextSibling;return g},childTags:function(a,c){a!==!!a&&(c=a,a=b);var d=this.link?this:this.tagCtx.view,e=this._prv,g=this._elCnt,f=[];e&&d.link(b,this.parentElem,g?e.previousSibling:
e,this._nxt,b,{get:{tags:f,deep:a,name:c,id:g&&this._tgId}});return f},refresh:function(a){var c,d=this.linkCtx,e=this.tagCtx.view;this.disposed&&K("Removed tag");a===b&&(a=C._tag(this,e,e.tmpl,sa(this),!0));a+""===a&&(c=this._.inline?m:d.attr||P(this.parentElem,!0),c=O(a,d,c,this));na(this,this.tagCtx);return c||this},update:function(a){var c=this.linkedElem;c&&f({target:c[0]},b,a)}},y.onStore.template=function(b,c){c.link=pa;c.unlink=S;b&&(a.link[b]=function(){return pa.apply(c,arguments)},a.unlink[b]=
function(){return S.apply(c,arguments)})},y.onStore.tag=function(a,b){y._lnk(b)},y._lnk=function(a){return Y(a,M)},y.viewInfos=x,(Q.delimiters=function(){var a=l.apply(C,arguments);r=a[1];L=a[2];u=a[4];p=RegExp("(?:^|\\s*)([\\w-]*)(\\"+u+")?(\\"+r+y.rTag+"\\"+L+")","g");return this})(),Y(y._lnk(y.View.prototype),{addViews:function(a,b,c){var d,e=b.length,g=this.views;if(!this._.useKey&&e&&(c=this.tmpl)&&(d=g.length+e,!1!==fa(this,a,c,g,b,this.ctx)))for(a+=e;a<d;a++)H(g[a]).setProperty("index",a);
return this},removeViews:function(c,d,e){function h(c){var d,f,h,n,k,l=m[c];if(l&&l.link){c=l._.id;e||(k=l.nodes());l.removeViews(b,b,!0);l.type=b;h=l._prv;n=l._nxt;f=l.parentElem;e||(l._elCnt&&g(h,n,f,c,"_"),a(k).remove());if(!l._elCnt)try{h.parentNode.removeChild(h),n.parentNode.removeChild(n)}catch(s){}ea(l);for(d in l._.bnds)ca(d);delete la[c]}}var f,k,l=!this._.useKey,m=this.views;l&&(k=m.length);if(c===b)if(l){for(f=k;f--;)h(f);this.views=[]}else{for(f in m)h(f);this.views={}}else if(d===b&&
(l?d=1:(h(c),delete m[c])),l&&d){for(f=c+d;f-- >c;)h(f);m.splice(c,d);if(k=m.length)for(;c<k;)H(m[c]).setProperty("index",c++)}return this},refresh:function(a){var b=this.parent;b&&(fa(this,this.index,this.tmpl,b.views,this.data,a,!0),ea(this));return this},link:Ga}),la={0:V=new y.View},$a.merge=function(a){var b,c=this.linkCtx._val||"",d=this.tagCtx.props.toggle;d&&(b=d.replace(/[\\^$.|?*+()[{]/g,"\\$&"),c=c.replace(RegExp("(\\s(?="+b+"$)|(\\s)|^)("+b+"(\\s|$))"),"$2"),a=c+(a?(c&&" ")+d:""));return a},
oa("on",{attr:Ja,onAfterLink:function(c,d){for(var e,g,f=0,k=c.args,l=k.length,m=c.props.data,p=c.view,q=c.props.context;f<l&&!(g=R(e=k[f++])););if(g){g=k.slice(f);k=k.slice(0,f-1);q||(q=(q=/^(.*)[\.^][\w$]+$/.exec(c.params.args.slice(-g.length-1)[0]))&&y.tmplFn("{:"+q[1]+"}",p.tmpl,!0)(d.data,p));if(this._evs)this.onDispose();a(d.elem).on(this._evs=k[0]||"click",this._sel=k[1],m==b?null:m,this._hlr=function(a){return e.apply(q||d.data,[].concat(g,a,{change:a.type,view:p,linkCtx:d}))})}},onDispose:function(){a(this.parentElem).off(this._evs,
this._sel,this._hlr)},flow:!0}),Y(oa["for"],{onArrayChange:function(a,b){var c,d=b.change;if(this.tagCtxs[1]&&("insert"===d&&a.target.length===b.items.length||"remove"===d&&!a.target.length||"refresh"===d&&!b.oldItems.length!==!a.target.length))this.refresh();else for(c in this._.arrVws)c=this._.arrVws[c],c.data===a.target&&c._.onArrayChange.apply(c,arguments);a.done=!0},onAfterLink:function(){var b,c,d,e,g=this,f=g._ars||{},k=g.tagCtxs,l=k.length,m=g.selected||0;for(b=0;b<=m;b++)c=k[b],e=c.map?c.map.tgt:
c.args.length?c.args[0]:c.view.data,(d=f[b])&&e!==d[0]&&(Qa(d[0],d[1],!0),delete f[b]),!f[b]&&a.isArray(e)&&(Qa(e,c=function(a,b){g.onArrayChange(a,b)}),f[b]=[e,c]);for(b=m+1;b<l;b++)if(d=f[b])Qa(d[0],d[1],!0),delete f[b];g._ars=f},onDispose:function(){for(var a in this._ars)Qa(this._ars[a][0],this._ars[a][1],!0)}}),Y(oa["for"],M),Y(oa["if"],M),Y(oa.include,M),oa("props",{baseTag:oa["for"],dataMap:C.map({getTgt:oa.props.dataMap.getTgt,obsSrc:d,obsTgt:c,tgtFlt:E})}),Y(a,{view:C.view=F=function(c,d,
e){function g(a,b){if(a)for(k=x(a,b,eb),l=0,m=k.length;l<m&&(!(f=la[k[l].id])||!(f=f&&e?f.get(!0,e):f));l++);}d!==!!d&&(e=d,d=b);var f,k,l,m,p;p=0;var q=ia.body;if(c&&c!==q&&1<V._.useKey&&(c=""+c===c?a(c)[0]:c.jquery?c[0]:c)){if(d){g(c._dfr,!0);if(!f)for(p=Xa?c.querySelectorAll(T):a(T,c).get(),d=p.length,c=0;!f&&c<d;c++)g(p[c]);return f}for(;c;){if(k=x(c,b,fb))for(d=k.length;d--;)if(f=k[d],f.open){if(1>p)return(f=la[f.id])&&e?f.get(e):f||V;p--}else p++;c=c.previousSibling||c.parentNode}}return V},
link:C.link=qa,unlink:C.unlink=ma,cleanData:function(b){b.length&&w&&ra(b);hb.apply(a,arguments)}}),C.utility={validate:function(a){try{V.link(b,ia.createElement("div"),b,b,a,b,b,1)}catch(c){return c.message}}},Y(a.fn,{link:function(a,b,c,d,e,f,g){return qa(a,this,b,c,d,e,f,g)},unlink:function(a){return ma(a,this)},view:function(a){return F(this[0],a)}}),a.each([m,"replaceWith","empty","remove"],function(b,c){var d=a.fn[c];a.fn[c]=function(){var a;w=1;try{a=d.apply(this,arguments)}finally{w=0}return a}}),
Y(V,{tmpl:{links:{},tags:{}}}),V._.onRender=Fa,Q({wrapMap:I={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},linkAttr:N=
"data-link",merge:{input:{from:Ea,to:"value"},textarea:ab,select:ab,optgroup:{to:"label"}},jsrDbgMode:Q.debugMode,debugMode:function(a){Q.jsrDbgMode(a);a?q._jsv={views:la,bindings:aa}:delete q._jsv},jsv:function(){Q.debugMode(Q._dbgMode);N=Q.linkAttr;K=C._err;D=T+",["+N+"]";z=Q.noDomLevel0;I.optgroup=I.option;I.tbody=I.tfoot=I.colgroup=I.caption=I.thead;I.th=I.td}}))})(this,this.jQuery)}())},{}]},{},[1])(1)});
