!function(Ua){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=Ua();else if("function"==typeof define&&define.amd)define([],Ua);else{var H;"undefined"!=typeof window?H=window:"undefined"!=typeof global?H=global:"undefined"!=typeof self&&(H=self);H.ForerunnerDBAutoBind=Ua()}}(function(){return function H($,L,k){function a(g,v){if(!L[g]){if(!$[g]){var ea="function"==typeof require&&require;if(!v&&ea)return ea(g,!0);if(b)return b(g,!0);ea=Error("Cannot find module '"+g+"'");throw ea.code=
"MODULE_NOT_FOUND",ea;}ea=L[g]={exports:{}};$[g][0].call(ea.exports,function(b){var v=$[g][1][b];return a(v?v:b)},ea,ea.exports,H,$,L,k)}return L[g].exports}for(var b="function"==typeof require&&require,g=0;g<k.length;g++)a(k[g]);return a}({1:[function(H,$,L){H=H("../lib/AutoBind");$.exports=H},{"../lib/AutoBind":2}],2:[function(H,$,L){L=ForerunnerDB.shared;var k={};L.addModule("AutoBind",k);k.extendCollection=function(b){var a=b.prototype.init,hb=b.prototype._dataReplace,v=b.prototype._dataInsertAtIndex,
ea=b.prototype._dataRemoveAtIndex,k=b.prototype._updateProperty,P=b.prototype._updateIncrement,S=b.prototype._updateSpliceMove,H=b.prototype._updateSplicePush,ja=b.prototype._updatePush,L=b.prototype._updatePull,qa=b.prototype._updateMultiply,oa=b.prototype._updateRename,$=b.prototype._updateUnset,aa=b.prototype._updatePop;b.prototype.init=function(){this._linked=0;a.apply(this,arguments)};b.prototype.isLinked=function(){return Boolean(this._linked)};b.prototype.link=function(b,a){if(window.jQuery){this._links=
this._links||{};var D,g;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(D=this.objectId(a.template),g=a.template):D=a;if(!this._links[D]){if(jQuery(b).length){if(!jQuery.templates[D]){if(!g)if(g=jQuery(a),g.length)g=jQuery(g[0]).html();else throw'ForerunnerDB.AutoBind "'+this.name()+'": Unable to bind collection to target because template "'+a+'" does not exist';jQuery.views.templates(D,g)}jQuery.templates[D].link(b,this._data);this._links[D]=b;this._linked++;this.debug()&&console.log('ForerunnerDB.AutoBind: Added binding collection "'+
this.name()+'" to output target: '+b);return this}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot bind collection to target selector "'+b+'" because it does not exist in the DOM!';}throw'ForerunnerDB.AutoBind "'+this.name()+'": Attempt to bind a duplicate link from collection to the target: '+b+" with the template: "+D;}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';};b.prototype.unlink=function(b,a){if(window.jQuery){this._links=
this._links||{};var g;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(g=this.objectId(a.template)):g=a;if(this._links[g])return jQuery.templates[g].unlink(b),delete this._links[g],this._linked--,this.debug()&&console.log('ForerunnerDB.AutoBind: Removed binding collection "'+this.name()+'" to output target: '+b),this;console.log('ForerunnerDB.AutoBind "'+this.name()+'": Cannot remove link from collection, one does not exist to the target: '+b+" with the template: "+a)}else throw'ForerunnerDB.AutoBind "'+
this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';return this};b.prototype._dataReplace=function(b){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Replacing some data in document for collection "'+this.name()+'"'),jQuery.observable(this._data).refresh(b)):hb.apply(this,arguments)};b.prototype._dataInsertAtIndex=function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Inserting some data in document sub-array for collection "'+this.name()+
'"'),jQuery.observable(this._data).insert(b,a)):v.apply(this,arguments)};b.prototype._dataRemoveAtIndex=function(b){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Removing some data from document sub-array for collection "'+this.name()+'"'),jQuery.observable(this._data).remove(b)):ea.apply(this,arguments)};b.prototype._updateProperty=function(b,a,g){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Setting document property "'+a+'" for collection "'+this.name()+'"'),
jQuery.observable(b).setProperty(a,g)):k.apply(this,arguments)};b.prototype._updateIncrement=function(b,a,g){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Incrementing document property "'+a+'" for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(a,b[a]+g)):P.apply(this,arguments)};b.prototype._updateSpliceMove=function(b,a,g){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Moving document array index from "'+a+'" to "'+g+'" for collection "'+this.name()+
'"'),jQuery.observable(b).move(a,g)):S.apply(this,arguments)};b.prototype._updateSplicePush=function(b,a,g){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pushing item into document sub-array for collection "'+this.name()+'"'),b.length>a?jQuery.observable(b).insert(a,g):jQuery.observable(b).insert(g)):H.apply(this,arguments)};b.prototype._updatePush=function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pushing item into document sub-array for collection "'+
this.name()+'"'),jQuery.observable(b).insert(a)):ja.apply(this,arguments)};b.prototype._updatePull=function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pulling item from document sub-array for collection "'+this.name()+'"'),jQuery.observable(b).remove(a)):L.apply(this,arguments)};b.prototype._updateMultiply=function(b,a,g){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Multiplying value for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(a,
b[a]*g)):qa.apply(this,arguments)};b.prototype._updateRename=function(b,a,g){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Renaming property "'+a+'" to "'+g+'" on document for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(g,b[a]),jQuery.observable(b).removeProperty(a)):oa.apply(this,arguments)};b.prototype._updateUnset=function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Removing property "'+a+'" from document for collection "'+this.name()+
'"'),jQuery.observable(b).removeProperty(a)):$.apply(this,arguments)};b.prototype._updatePop=function(b,a){var g,v=!1;this._linked?0<b.length&&(this.debug()&&console.log('ForerunnerDB.AutoBind: Popping item from sub-array in document for collection "'+this.name()+'"'),1===a?g=b.length-1:-1===a&&(g=0),-1<g&&(jQuery.observable(arr).remove(g),v=!0)):v=aa.apply(this,arguments);return v}};k.extendView=function(b){var a=b.prototype.init;b.prototype.init=function(){this._linked=0;a.apply(this,arguments)};
b.prototype.isLinked=function(){return this.data().isLinked()};b.prototype.link=function(b,a){var g=this.publicData();this.debug()&&console.log('ForerunnerDB.AutoBind: Setting up data binding on view "'+this.name()+'" in underlying (internal) view collection "'+g.name()+'" for output target: '+b);g.link(b,a);return this};b.prototype.unlink=function(b,a){var g=this.publicData();this.debug()&&console.log('ForerunnerDB.AutoBind: Removing data binding on view "'+this.name()+'" in underlying (internal) view collection "'+
g.name()+'" for output target: '+b);g.unlink(b,a);return this}};k.extendOverview=function(b){b.prototype.isLinked=function(){return this.data().isLinked()};b.prototype.link=function(b,a){this._data.link.apply(this._data,arguments);this._refresh()};b.prototype.unlink=function(b,a){this._data.unlink.apply(this._data,arguments);this._refresh()}};k.extendDocument=function(b){b.prototype.isLinked=function(){return Boolean(this._linked)};b.prototype.link=function(b,a){if(window.jQuery){this._links=this._links||
{};this._linked||(this._linked=0);var v,k;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(v=this.objectId(a.template),k=a.template):v=a;if(!this._links[v]){if(jQuery(b).length){if(!jQuery.templates[v]){if(!k)if(k=jQuery(a),k.length)k=jQuery(k[0]).html();else throw'ForerunnerDB.AutoBind "'+this.name()+'": Unable to bind document to target because template does not exist: '+a;jQuery.views.templates(v,k)}jQuery.templates[v].link(b,this._data);this._links[v]=b;this._linked++;this.debug()&&
console.log('ForerunnerDB.AutoBind: Added binding document "'+this.name()+'" to target: '+b);return this}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot bind document to target "'+b+'" because it does not exist in the DOM!';}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot create a duplicate link from document to the target: '+b+" with the template: "+v;}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';};b.prototype.unlink=
function(b,a){if(window.jQuery){this._links=this._links||{};var v;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(v=this.objectId(a.template)):v=a;if(this._links[v])return jQuery.templates[v].unlink(b),delete this._links[v],this._linked--,this.debug()&&console.log('ForerunnerDB.AutoBind "'+this.name()+'": Removed binding document to target: '+b),this;console.log('ForerunnerDB.AutoBind "'+this.name()+'": Cannot remove link from document, one does not exist to the target: '+b+" with the template: "+
a)}else throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';}};if("undefined"!==typeof jQuery)if(H("../lib/vendor/jsviews"),"undefined"!==typeof jQuery.views){H=["Collection","View","Overview","Document"];var a;for(a=0;a<H.length;a++)L.moduleFinished(H[a],function(b,a){if(k["extend"+b])k["extend"+b](a)});L.finishModule("AutoBind")}else throw'ForerunnerDB.AutoBind "'+this.name()+'": Plugin cannot continue because jsViews is not loaded. Check your error log for url errors; it should have automatically loaded with this plugin.';
else throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';L.finishModule("AutoBind");$.exports=k},{"../lib/vendor/jsviews":3}],3:[function(H,$,L){window.jQuery&&(this.jQuery=window.jQuery,function(){(function(k,a,b){function g(b,p){for(var a in p.props)R.test(a)&&(b[a]=p.props[a])}function H(b){return b}function v(b){debugger;return b}function ea(b){M=(Ca._dbgMode=b)?"Unavailable (nested view): use #getIndex()":"";Da("dbg",Pa.dbg=pa.dbg=
b?v:H)}function L(b){this.name=(u.link?"JsViews":"JsRender")+" Error";this.message=b||this.name}function P(b,p){for(var a in p)b[a]=p[a];return b}function S(b){return"function"===typeof b}function $(b,p,a){if(!wa.rTag||b)J=b?b.charAt(0):J,z=b?b.charAt(1):z,t=p?p.charAt(0):t,U=p?p.charAt(1):U,W=a||W,b="\\"+J+"(\\"+W+")?\\"+z,p="\\"+t+"\\"+U,A="(?:(?:(\\w+(?=[\\/\\s\\"+t+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+t+"]|\\"+t+"(?!\\"+U+"))*?)",wa.rTag=A+")",A=RegExp(b+A+"(\\/)?|(?:\\/(\\w+)))"+
p,"g"),s=RegExp("<.*>|([^\\\\]|^)[{}]|"+b+".*"+p);return[J,z,t,U,W]}function ja(ga,p){p||(p=ga,ga=b);var a,c,x,f;x=this;a=!p||"root"===p;if(ga){if(f=x.type===p?x:b,!f)if(a=x.views,x._.useKey)for(c in a){if(f=a[c].get(ga,p))break}else for(c=0,x=a.length;!f&&c<x;c++)f=a[c].get(ga,p)}else if(a)for(;x.parent.parent;)f=x=x.parent;else for(;x&&!f;)f=x.type===p?x:b,x=x.parent;return f}function Aa(){var ga=this.get("item");return ga?ga.index:b}function qa(){return this.index}function oa(ga){var p,a=this,
c=a.linkCtx,x=(a.ctx||{})[ga];x===b&&c&&c.ctx&&(x=c.ctx[ga]);x===b&&(x=Pa[ga]);x&&S(x)&&!x._wrp&&(p=function(){return x.apply(this&&this!==k?this:a,arguments)},p._wrp=!0,P(p,x));return p||x}function Ra(ga,p,a,c){var x,f,h=+a===a&&p.tmpl.bnds[a-1],e=p.linkCtx;a=(c=c!==b&&{props:{},args:[c]})||(h?h(p.data,p,K):a);f=a.args[0];if(ga||h)x=e&&e.tag,x||(x={_:{inline:!e,bnd:h},tagName:":",cvt:ga,flow:!0,tagCtx:a,_is:"tag"},e&&(e.tag=x,x.linkCtx=e,a.ctx=O(a.ctx,e.view.ctx)),wa._lnk(x)),x._er=c&&f,g(x,a),a.view=
p,x.ctx=a.ctx||{},delete a.ctx,p._.tag=x,f=aa(x,x.convert||"true"!==ga&&ga)[0],f=h&&p._.onRender?p._.onRender(f,p,h):f,p._.tag=b;return f!=b?f:""}function aa(b,p){var a=b.tagCtx,c=a.view,x=a.args;p=p&&(""+p===p?c.getRsc("converters",p)||ha("Unknown converter: '"+p+"'"):p);x=x.length||a.index?p?x.slice():x:[c.data];p&&(p.depends&&(b.depends=wa.getDeps(b.depends,b,p.depends,p)),x[0]=p.apply(b,x));return x}function La(a,p){for(var c,f=this;c===b&&f;)c=(c=f.tmpl[a])&&c[p],f=f.parent;return c||K[a][p]}
function Ma(a,p,c,f,x,e){var h,d,m,u,l,t,F,V,v,s="",k=p.linkCtx||0,z=p.ctx,A=c||p.tmpl,w=+f===f&&A.bnds[f-1];"tag"===a._is&&(h=a,a=h.tagName,f=h.tagCtxs);h=h||k.tag;f=(e=e!==b&&(s+=e,[{props:{},args:[]}]))||(w?w(p.data,p,K):f);t=f.length;for(l=0;l<t;l++){l||c&&h||(V=p.getRsc("tags",a)||ha("Unknown tag: {{"+a+"}}"));d=f[l];if(!k.tag||h._er)c=d.tmpl,c=d.content=c&&A.tmpls[c-1],P(d,{tmpl:(h?h:V).template||c,render:ta,index:l,view:p,ctx:O(d.ctx,z)});if(c=d.props.tmpl)c=""+c===c?p.getRsc("templates",c)||
C(c):c,d.tmpl=c;h||(V._ctr?(h=new V._ctr,v=!!h.init):wa._lnk(h={render:V.render}),h._={inline:!k},k&&(k.tag=h,h.linkCtx=k),(h._.bnd=w||k.fn)?h._.arrVws={}:h.dataBoundOnly&&ha("{^{"+a+"}} tag must be data-bound"),h.tagName=a,h.parent=u=z&&z.tag,h._is="tag",h._def=V,h.tagCtxs=f);d.tag=h;h.dataMap&&h.tagCtxs&&(d.map=h.tagCtxs[l].map);h.flow||(F=d.ctx=d.ctx||{},d=h.parents=F.parentTags=z&&O(F.parentTags,z.parentTags)||{},u&&(d[u.tagName]=u),d[h.tagName]=F.tag=h)}p._.tag=h;if(!(h._er=e)){g(h,f[0]);h.rendering=
{};for(l=0;l<t;l++){d=h.tagCtx=h.tagCtxs[l];u=d.props;a=aa(h,h.convert);if(f=u.dataMap||h.dataMap)if(a.length||u.dataMap){e=d.map;if(!e||e.src!==a[0]||x)e&&e.src&&e.unmap(),e=d.map=f.map(a[0],u);a=[e.tgt]}h.ctx=d.ctx;!l&&v&&(f=h.template,h.init(d,k,h.ctx),v=b,h.template!==f&&(h._.tmpl=h.template),k&&(k.attr=h.attr=k.attr||h.attr));f=b;h.render&&(f=h.render.apply(h,a));a=a.length?a:[p];f=f!==b?f:d.render(a[0],!0)||(x?b:"");s=s?s+(f||""):f}delete h.rendering}h.tagCtx=h.tagCtxs[0];h.ctx=h.tagCtx.ctx;
h._.inline&&(m=h.attr)&&m!==B&&(s="text"===m?pa.html(s):"");return w&&p._.onRender?p._.onRender(s,p,w):s}function D(b,a,c,f,x,e,h,d){var g="array"===a,m={key:0,useKey:g?0:1,id:""+E++,onRender:d,bnds:{}};this.data=f;this.tmpl=x;this.content=h;this.views=g?[]:{};this.parent=c;this.type=a||"top";this._=m;this.linked=!!d;c?(a=c.views,f=c._,f.useKey?(a[m.key="_"+f.useKey++]=this,this.index=M,this.getIndex=Aa,e=f.tag,m.bnd=g&&(!e||!!e._.bnd&&e)):a.splice(m.key=this.index=e,0,this),this.ctx=b||c.ctx):this.ctx=
b}function ba(b){var a,c,f,x,e,h;for(a in ma)if(x=ma[a],(e=x.compile)&&(c=b[a+"s"]))for(f in c)(x=c[f]=e(f,c[f],b))&&(h=wa.onStore[a])&&h(f,x,e)}function Fa(a,c,f){S(c)?c={depends:c.depends,render:c}:(c.baseTag&&(c.flow=!!c.flow,c=P(P({},c.baseTag),c)),(a=c.template)!==b&&(c.template=""+a===a?C[a]||C(a):a),!1!==c.init&&(a=c._ctr=function(){},(a.prototype=c).constructor=a));f&&(c._parentTmpl=f);return c}function Ga(c,p,f,e){function x(p){if(""+p===p||0<p.nodeType){try{h=0<p.nodeType?p:!s.test(p)&&
a&&a(k.document).find(p)[0]}catch(x){}h&&(p=C[c=c||h.getAttribute(X)],p||(c=c||"_"+ia++,h.setAttribute(X,c),p=C[c]=Ga(c,h.innerHTML,f,e)),h=b);return p}}var d,h;p=p||"";d=x(p);e=e||(p.markup?p:{});e.tmplName=c;f&&(e._parentTmpl=f);!d&&p.markup&&(d=x(p.markup))&&d.fn&&(d.debug!==p.debug||d.allowCode!==p.allowCode)&&(d=d.markup);if(d!==b)return c&&!f&&(Sa[c]=function(){return p.render.apply(p,arguments)}),d.fn||p.fn?d.fn&&(p=c&&c!==d.tmplName?O(e,d):d):(p=ra(d,e),Ka(d.replace(w,"\\$&"),p)),ba(e),p}
function Oa(b){function a(c,p){this.tgt=b.getTgt(c,p)}S(b)&&(b={getTgt:b});b.baseMap&&(b=P(P({},b.baseMap),b));b.map=function(b,c){return new a(b,c)};return b}function ra(b,a){var c,f=Ca.wrapMap||{},e=P({markup:b,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:Y},a);a.htmlTag||(c=Qa.exec(b),e.htmlTag=c?c[1].toLowerCase():"");(c=f[e.htmlTag])&&c!==f.div&&(e.markup=u.trim(e.markup));return e}function sa(a,c){function f(d,g,h){var m,u,l;if(d&&"object"===typeof d&&!d.nodeType&&!d.markup&&!d.getTgt){for(u in d)f(u,
d[u],g);return K}g===b&&(g=d,d=b);d&&""+d!==d&&(h=g,g=d,d=b);l=h?h[e]=h[e]||{}:f;u=c.compile;null===g?d&&delete l[d]:(g=u?g=u(d,g,h):g,d&&(l[d]=g));u&&g&&(g._is=a);g&&(m=wa.onStore[a])&&m(d,g,u);return g}var e=a+"s";K[e]=f;ma[a]=c}function xa(b,a,c){var f=this.jquery&&(this[0]||ha('Unknown template: "'+this.selector+'"')),d=f.getAttribute(X);return Y.call(d?C[d]:C(f),b,a,c)}function Na(b,a,c){if(Ca._dbgMode)try{return b.fn(a,c,K)}catch(f){return ha(f,c)}return b.fn(a,c,K)}function Y(b,a,c,f,d,e){return f||
!this.fn._nvw||u.isArray(b)?ta.call(this,b,a,c,f,d,e):Na(this,b,{tmpl:this})}function ta(a,c,f,d,e,g){var h,m,l,k,s,t,F,V,v;l=this;var z="";!!c===c&&(f=c,c=b);!0===e&&(h=!0,e=0);l.tag?(t=l,l=l.tag,m=l._,s=l.tagName,V=m.tmpl||t.tmpl,v=l.attr&&l.attr!==B,c=O(c,l.ctx),F=t.content,!1===t.props.link&&(c=c||{},c.link=!1),d=d||t.view,a=arguments.length?a:d):V=l;if(V&&(!d&&a&&"view"===a._is&&(d=a),d&&(F=F||d.content,g=g||d._.onRender,a===d&&(a=d.data),c=O(c,d.ctx)),d&&"top"!==d.type||((c=c||{}).root=a),V.fn||
(V=C[V]||C(V)),V)){t=g=!1!==(c&&c.link)&&!v&&g;!0===g&&(t=b,g=d._.onRender);c=V.helpers?O(V.helpers,c):c;if(u.isArray(a)&&!f)for(k=h?d:e!==b&&d||new D(c,"array",d,a,V,e,F,g),h=0,m=a.length;h<m;h++)l=a[h],s=new D(c,"item",k,l,V,(e||0)+h,F,g),l=Na(V,l,s),z+=k._.onRender?k._.onRender(l,s):l;else{if(d||!V.fn._nvw)k=h?d:new D(c,s||"data",d,a,V,e,F,g),m&&!l.flow&&(k.tag=l);z+=Na(V,a,k)}return t?t(z,k):z}return""}function ha(b,a,c){c=Ca.onError(b,a,c);if(""+b===b)throw new wa.Err(c);return!a.linkCtx&&a.linked?
pa.html(c):c}function ca(b){ha("Syntax error\n"+b)}function Ka(b,a,f,g){function x(a){(a-=t)&&F.push(b.substr(t,a).replace(N,"\\n"))}function l(a){a&&ca('Unmatched or missing tag: "{{/'+a+'}}" in template:\n'+b)}var h,m,u,O=a&&a.allowCode,k=[],t=0,s=[],F=k,z=[,,k];f&&(b=J+b+U);l(s[0]&&s[0][2].pop()[0]);b.replace(A,function(c,d,h,k,v,w,A,D,E,Q,J,K){w&&(v=":",k=B);Q=Q||f;d=(d||f)&&[[]];var C="",r="",q="",n="",y="",ua="",na="",Ta="";A=!Q&&!v&&!A;h=h||(E=E||"#data",v);x(K);t=K+c.length;D?O&&F.push(["*",
"\n"+E.replace(G,"$1")+"\n"]):h?("else"===h&&(T.test(E)&&ca('for "{{else if expr}}" use "{{else expr}}"'),d=z[7],z[8]=b.substring(z[8],K),z=s.pop(),F=z[2],A=!0),E&&(e(E.replace(N," "),d,a).replace(Ba,function(b,a,c,f,d,e,p,h){p?(r+=e+",",n+="'"+h+"',"):c?(q+=f+e+",",ua+=f+"'"+h+"',"):a?na+=e:("trigger"===d&&(Ta+=e),C+=f+e+",",y+=f+"'"+h+"',",u=u||R.test(d));return""}).slice(0,-1),d&&d[0]&&d.pop()),m=[h,k||!!g||u||"",A&&[],[n.slice(0,-1),y.slice(0,-1),ua.slice(0,-1)],[r.slice(0,-1),C.slice(0,-1),q.slice(0,
-1)],na,Ta,d||0],F.push(m),A&&(s.push(z),z=m,z[8]=t)):J&&(l(J!==z[0]&&"else"!==z[0]&&J),z[8]=b.substring(z[8],K),z=s.pop());l(!z&&J);F=z[2]});x(b.length);(t=k[k.length-1])&&l(""+t!==t&&+t[8]===t[8]&&t[0]);f?(h=d(k,b,f),c(h,k[0][7])):h=d(k,a);h._nvw&&(h._nvw=!/[~#]/.test(b));return h}function c(b,a){b.deps=[];for(var c in a)"_jsvto"!==c&&a[c].length&&(b.deps=b.deps.concat(a[c]));b.paths=a}function f(b,a){return"\n\t"+(a?a+":{":"")+"args:["+b[0]+"]"+(b[1]||!a?",\n\tprops:{"+b[1]+"}":"")+(b[2]?",\n\tctx:{"+
b[2]+"}":"")}function e(b,a,c){var f,d,e,h,g,l=a&&a[0],m=0,u=c?c.links:l&&(l.links=l.links||{}),k={},s={0:-1},O=0;return(b+(c?" ":"")).replace(/\)\^/g,").").replace(Ha,function(F,v,A,B,w,E,D,Q,J,K,N,C,G,M,r,q,n,y,ua,na){function Ta(r,q,b,n,c,y,ua,na){return b&&(l&&("linkTo"===f&&(d=a._jsvto=a._jsvto||[],d.push(w)),f&&!e||l.push(w.slice(q.length))),"."!==b)?(r=(n?'view.hlp("'+n+'")':c?"view":"data")+(na?(y?"."+y:n?"":c?"":"."+b)+(ua||""):(na=n?"":c?y||"":b,"")),r+=na?"."+na:"",q+("view.data"===r.slice(0,
9)?r.slice(5):r)):r}E=E||"";A=A||v||C;w=w||J;K=K||n||"";J=na.length-1;if(!D||g||h)return!l||!q||g||h||f&&!e&&!d||(q=s[O],J>ua-q&&(q=na.slice(q,ua+1),q=z+":"+q+" onerror=''"+t,D=u[q],D||(u[q]=!0,u[q]=D=Ka(q,c||l,!0),D.paths.push({_jsvOb:D})),!0!==D&&(d||l).push({_jsvOb:D}))),g?(g=!G,g?F:'"'):h?(h=!M,h?F:'"'):(A?(O++,s[O]=ua++,A):"")+(y?O?"":(m=na.slice(m,ua),f?(f=e=d=!1,"\b"):"\b,")+m+(m=ua+F.length,l&&a.push(l=[]),"\b"):Q?(O&&ca(b),l&&a.pop(),f=w,e=B,m=ua+F.length,B&&(l=a[f]=[]),w+":"):w?w.split("^").join(".").replace(la,
Ta)+(K?(k[++O]=!0,"."!==w.charAt(0)&&(s[O]=ua),K):E):E?E:r?(k[O--]=!1,r)+(K?(k[++O]=!0,K):""):N?(k[O]||ca(b),","):v?"":(g=G,h=M,'"'));ca(b)})}function d(a,e,g){var l,m,u,h,k,O,t,z,F,s,v,w,A,D,E,K,J,Q,C,G,M,ma,P,U,W,r,q=0,n="",y={},ua=a.length;""+e===e?(Q=g?'data-link="'+e.replace(N," ").slice(1,-1)+'"':e,e=0):(Q=e.tmplName||"unnamed",e.allowCode&&(y.allowCode=!0),e.debug&&(y.debug=!0),v=e.bnds,J=e.tmpls);for(l=0;l<ua;l++)if(m=a[l],""+m===m)n+='\n+"'+m+'"';else if(u=m[0],"*"===u)n+=";\n"+m[1]+"\nret=ret";
else{h=m[1];M=m[2];k=f(m[3],"params")+"},"+f(A=m[4]);U=m[5];r=m[6];E=m[8];(D="else"===u)||(q=0,v&&(w=m[7])&&(q=v.push(w)));(m=":"===u)?h&&(u=h===B?">":h+u):(M&&(C=ra(E,y),C.tmplName=Q+"/"+u,d(M,C),J.push(C)),D||(G=u,ma=n,n=""),C=(C=a[l+1])&&"else"===C[0]);W=U?";\ntry{\nret+=":"\n+";E=D="";if(m&&(w||r||h&&h!==B)){P="return {"+k+"};";K='c("'+h+'",view,';P=new Function("data,view,j,u"," // "+Q+" "+q+" "+u+"\n"+P);P._er=U;D=K+q+",";E=")";P._tag=u;if(g)return P;c(P,w);s=!0}n+=m?(g?(U?"\ntry{\n":"")+"return ":
W)+(s?(s=b,F=z=!0,K+(w?(v[q-1]=P,q):"{"+k+"}")+")"):">"===u?(t=!0,"h("+A[0]+")"):"((v="+A[0]+')!=null?v:"")'):(F=O=!0,"\n{view:view,tmpl:"+(M?J.length:"0")+","+k+"},");if(G&&!C){n="["+n.slice(0,-1)+"]";K='t("'+G+'",view,this,';if(g||w){n=new Function("data,view,j,u"," // "+Q+" "+q+" "+G+"\nreturn "+n+";");n._er=U;n._tag=u;w&&c(v[q-1]=n,w);if(g)return n;D=K+q+",undefined,";E=")"}n=ma+W+K+(q||n)+")";G=w=0}U&&(F=!0,n+=";\n}catch(e){ret"+(g?"urn ":"+=")+D+"j._err(e,view,"+U+")"+E+";}\n"+(g?"":"ret=ret"))}n=
"// "+Q+"\nvar v"+(O?",t=j._tag":"")+(z?",c=j._cnvt":"")+(t?",h=j.converters.html":"")+(g?";\n":',ret=""\n')+(y.debug?"debugger;":"")+n+(g?"\n":";\nreturn ret;");try{n=new Function("data,view,j,u",n)}catch(na){ca("Compiled template code:\n\n"+n+'\n: "'+na.message+'"')}e&&(e.fn=n);F||(n._nvw=!0);return n}function O(b,a){return b&&b!==a?a?P(P({},a),b):b:a&&P({},a)}function F(b){return fa[b]||(fa[b]="&#"+b.charCodeAt(0)+";")}function l(b){var a,c,f=[];if("object"===typeof b)for(a in b)(c=b[a])&&c.toJSON&&
!c.toJSON()||S(c)||f.push({key:a,prop:c});return f}function m(b){return null!=b?Za.test(b)&&(""+b).replace(Z,F)||b:""}if(!(a&&a.render||k.jsviews)){var u,Q,A,s,M,J="{",z="{",t="}",U="}",W="^",la=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,Ha=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,
N=/[ \t]*(\r\n|\n|\r)/g,G=/\\(['"])/g,w=/['"\\]/g,Ba=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,T=/^if\s/,Qa=/<(\w+)[>\s]/,Za=/[\x00`><\"'&]/,R=/^on[A-Z]|^convert(Back)?$/,Z=/[\x00`><"'&]/g,ia=0,E=0,fa={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},B="html",X="data-jsv-tmpl",Sa={},ma={template:{compile:Ga},tag:{compile:Fa},helper:{},converter:{}},K={jsviews:"v1.0.0-beta",settings:function(b){P(Ca,b);ea(Ca._dbgMode);Ca.jsv&&Ca.jsv()},
sub:{View:D,Err:L,tmplFn:Ka,cvt:aa,parse:e,extend:P,syntaxErr:ca,onStore:{},_lnk:H,_ths:g},map:Oa,_cnvt:Ra,_tag:Ma,_err:ha};(L.prototype=Error()).constructor=L;Aa.depends=function(){return[this.get("item"),"index"]};qa.depends=function(){return["index"]};D.prototype={get:ja,getIndex:qa,getRsc:La,hlp:oa,_is:"view"};for(Q in ma)sa(Q,ma[Q]);var C=K.templates,pa=K.converters,Pa=K.helpers,Da=K.tags,wa=K.sub,Ca=K.settings;a?(u=a,u.fn.render=xa,u.observable&&(P(wa,u.views.sub),K.map=u.views.map)):(u=k.jsviews=
{},u.isArray=Array&&Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)});u.render=Sa;u.views=K;u.templates=C=K.templates;Ca({debugMode:ea,delimiters:$,onError:function(a,c,f){c&&(a=f===b?"{Error: "+a+"}":S(f)?f(a,c):f);return a==b?"":a},_dbgMode:!0});Da({"else":function(){},"if":{render:function(b){return this.rendering.done||!b&&(arguments.length||!this.tagCtx.index)?"":(this.rendering.done=!0,this.selected=this.tagCtx.index,this.tagCtx.render(this.tagCtx.view,
!0))},onUpdate:function(b,a,c){var f;for(b=0;(f=this.tagCtxs[b])&&f.args.length;b++)if(f=f.args[0],a=!f!==!c[b].args[0],!this.convert&&f||a)return a;return!1},flow:!0},"for":{render:function(a){var c,f=this.tagCtx,d="",e=0;if(!this.rendering.done){if(c=!arguments.length)a=f.view.data;a!==b&&(d+=f.render(a,c),e+=u.isArray(a)?a.length:1);if(this.rendering.done=e)this.selected=f.index}return d},flow:!0},include:{flow:!0},"*":{render:H,flow:!0}});Da("props",{baseTag:Da["for"],dataMap:Oa(l)});pa({html:m,
attr:m,url:function(a){return a!=b?encodeURI(""+a):null===a?a:""}});$()}})(this,this.jQuery);(function(k,a,b){function g(b){return D(b)?new v(b):new H(b)}function H(b){this._data=b;return this}function v(b){this._data=b;return this}function ea(b,a){b=D(b)?b:[b];var e,d,g=a,k=g,l=b.length,m=[];for(e=0;e<l;e++)d=b[e],Y(d)?m=m.concat(ea(d.call(a,a),a)):""+d!==d?(a=k=d,k!==g&&m.push(g=k)):(k!==g&&m.push(g=k),m.push(d));return m}function L(b,a){var e,d;for(e in b){d=!0;break}d||delete xa[a]}function P(a,
f){if(!a.data||!a.data.off){var e,d,g,k,l,m=f.oldValue,u=f.value,v=a.data,A=v.observeAll,s=!v.cb.noArray,M=v.paths;if(a.type===sa)(v.cb.array||v.cb).call(v,a,f);else if(v.prop===f.path||"*"===v.prop)k=typeof m===Fa&&(M[0]||s&&D(m)),l=typeof u===Fa&&(M[0]||s&&D(u)),A?(e=A._path+"."+f.path,d=A.filter,g=[a.target].concat(A.parents()),k&&ja(s,A.ns,[m],M,v.cb,!0,d,[g],e),l&&ja(s,A.ns,[u],M,v.cb,b,d,[g],e)):(k&&ja(s,[m],M,v.cb,!0),l&&ja(s,[u],M,v.cb)),v.cb(a,f)}}function S(){function c(b,c,f,d){var e,g=
ca(B),l=D(B)?[B]:B;b=T?b+"."+T:b;if(A||d)g&&a(l).off(b,P);else{if(t=g&&a._data(B))for(J=(t=(t=t&&t.events)&&t[f?sa:ra])&&t.length;J--;)if((z=t[J].data)&&z.cb._cId===s._cId&&z.ns===T){if(f)return;("*"===c&&z.prop!==c||z.prop===m)&&a(B).off(b,P)}c=f?{}:{fullPath:u,paths:c?[c]:[],prop:m};c.ns=T;c.cb=s;w&&(c.observeAll={_path:w,path:function(){e=G.length;return w.replace(/[[.]/g,function(b){e--;return"["===b?"["+a.inArray(G[e-1],G[e]):"."})},parents:function(){return G},filter:aa,ns:T});a(l).on(b,null,
c,P);H&&((xa[s._cId]=H)[a.data(B,"obId")||a.data(B,"obId",ta++)]=B)}}function f(b,a){b._ob=U(b,fa);var c=fa;return function(f,d){var g=b._ob,l=a.length;typeof g===Fa&&(e(g,!0),(l||R&&D(g))&&ja(R,[g],a,s,U,!0));g=b._ob=U(b,c);typeof g===Fa&&(e(g),(l||R&&D(g))&&ja(R,[g],a,s,U,[c]));s(f,d)}}function e(a,f,d,e){if(R){var l=B,m=w;B=a;e&&(B=a[e],w+="."+e);aa&&B&&(B=g._fltr(w,B,e?[a].concat(G):G,aa));B&&(d||D(B))&&c(sa+".observe"+(s?".obs"+(M=s._cId=s._cId||ha++):""),b,!0,f);B=l;w=m}}var d,k,v,l,m,u,Q,A,
s,M,J,z,t,U,W,H,S,N,G,w,aa,T,ba,$,R=!1!=this,Z=!0,ia=Na,E=Array.apply(0,arguments);d=E.pop();var fa=E.shift(),B=N=fa,X=E.length;fa+""===fa&&R&&(T=fa,fa=B=N=E.shift(),X--);if(Y(d))s=d;else if(d+""===d&&(w=d,G=E.pop(),aa=E.pop(),d=E.pop(),X-=3),!0===d?A=d:d&&(fa=d,Z=b),d=E[X-1],X&&d===b||Y(d))s=E.pop(),X--;X&&Y(E[X-1])&&(U=s,s=E.pop(),X--);ia+=A?s?".obs"+s._cId:"":".obs"+(M=s._cId=s._cId||ha++);A||(H=xa[M]=xa[M]||{});ba=T&&T.match(Oa)||[""];for($=ba.length;$--;)for(T=ba[$],D(N)?e(N,A,!0):A&&0===X&&
N&&c(ia,""),d=S=0;d<X;d++)if(u=E[d],""!==u){B=N;if(""+u===u){l=u.split("^");l[1]&&(S=l[0].split(".").length,u=l.join("."),S=u.split(".").length-S);if(U&&(W=U(u,N))){X+=W.length-1;Ma.apply(E,[d--,1].concat(W));continue}l=u.split(".")}else Z&&!Y(u)&&(u&&u._jsvOb&&(N=f(u,E.slice(d+1)),N.noArray=!R,N._cId=s._cId,ja(R,[fa],E.slice(0,d),N,U),N=b,u=u._ob),B=u),N=u,l=[N];for(;B&&(m=l.shift())!==b;)if(typeof B===Fa){if(""+m===m){if(""===m)continue;if(l.length<S+1&&!B.nodeType){if(!A&&(t=ca(B)&&a._data(B))){J=
(t=(t=t.events)&&t[ra])&&t.length;for(v=0;J--;)!(z=t[J].data)||z.cb!==s||z.ns!==T||z.prop!==m&&"*"!==z.prop||((k=l.join("."))&&z.paths.push(k),v++);if(v){B=B[m];continue}}if("*"===m){!A&&t&&t.length&&c(ia,"",!1,!0);Y(B)?(Q=B.depends)&&ja(R,[Q],s,A||fa):c(ia,"");for(k in B)e(B,A,b,k);break}else m&&c(ia+"."+m,l.join("^"))}w&&(w+="."+m);m=B[m]}if(Y(m)){(Q=m.depends)&&ja(R,[B],ea(Q,B),s,U,A||[fa]);break}B=m}e(B,A)}M&&L(H,M);return{cbId:M,bnd:H}}function $(){[].push.call(arguments,!0);return S.apply(this,
arguments)}function ja(){var b=[].concat.apply([],arguments);return S.apply(b.shift(),b)}function Aa(b,a,e,d){b+""!==b&&(e=a,a=b,b="");oa(b,this._data,a,e,[],"root",d)}function qa(b,a,e){Aa.call(this,b,a,e,!0)}function oa(a,f,e,d,k,v,l){function m(b,a){A=b.length;J=[[b]].concat(J);for(M=v+"[]";A--;)u(b,A,a,1)}function u(f,l,m,k){var u;l!==ba&&(u=g._fltr(M,f[l],J,d))&&oa(a,u,e,d||(k?b:0),J.slice(),M,m)}function H(b,a){var c=k;v=b.data.observeAll._path;J=[b.target].concat(k);switch(a.change){case "insert":m(a.items);
break;case "remove":m(a.items,!0);break;case "refresh":m(a.oldItems,!0);m(b.target);break;case "set":M=v+"."+a.path,u(a,"oldValue",!0),u(a,"value")}e.apply(this,arguments);k=c}var A,s,M,J;if(typeof f===Fa){s=D(f)?"":"*";if(e){if(s||0!==d)H._cId=e._cId=e._cId||ha++,S(a,f,s,H,l,d,k,v)}else S(a,f,s,b,l,d,k,v);if(s)for(A in J=[f].concat(k),f)M=v+"."+A,u(f,A,l);else m(f,l)}}function Ra(b){return 0>b.indexOf(".")&&0>b.indexOf("[")}if(!a)throw"jsViews/jsObservable require jQuery";if(!a.observable){k=a.views=
a.views||{jsviews:"v1.0.0-alpha",sub:{}};var aa=k.sub,La=a.event.special,Ma=[].splice,D=a.isArray,ba=a.expando,Fa="object",Ga=parseInt,Oa=/\S+/g,ra=aa.propChng=aa.propChng||"propertyChange",sa=aa.arrChng=aa.arrChng||"arrayChange",xa=aa._cbBnds=aa._cbBnds||{},Na=ra+".observe",Y=a.isFunction,ta=1,ha=1,ca=a.hasData,Ka={};aa.getDeps=function(){var b=arguments;return function(){for(var a,e,d=[],g=b.length;g--;)a=b[g--],(e=b[g])&&(d=d.concat(Y(e)?e(a,a):e));return d}};a.observable=g;g._fltr=function(b,
a,e,d){if(d&&Y(d)?d(b,a,e):1)return a=Y(a)?a.set&&a.call(e[0]):a,typeof a===Fa&&a};g.Object=H;g.Array=v;a.observe=g.observe=S;a.unobserve=g.unobserve=$;g._apply=ja;H.prototype={_data:null,observeAll:Aa,unobserveAll:qa,data:function(){return this._data},setProperty:function(a,f,e){var d,g=this._data;a=a||"";if(g)if(D(a))for(d=a.length;d--;)f=a[d],this.setProperty(f.name,f.value,e===b||e);else if(""+a!==a)for(d in a)this.setProperty(d,a[d],f);else if(a!==ba){for(a=a.split(".");g&&1<a.length;)g=g[a.shift()];
g&&this._setProperty(g,a[0],f,e)}return this},removeProperty:function(a){this.setProperty(a,Ka);return this},_setProperty:function(a,f,e,d){var g,k,l,m=f?a[f]:a;Y(m)&&m.set&&(k=m,g=!0===m.set?m:m.set,m=m.call(a));if(m!==e||d&&m!=e)if(!(m instanceof Date)||m>e||m<e)g?(g.call(a,e),e=k.call(a)):(l=e===Ka)?(delete a[f],e=b):f&&(a[f]=e),this._trigger(a,{change:"set",path:f,value:e,oldValue:m,remove:l})},_trigger:function(b,f){a(b).triggerHandler(ra,f)}};v.prototype={_data:null,observeAll:Aa,unobserveAll:qa,
data:function(){return this._data},insert:function(a,b){var e=this._data;1===arguments.length&&(b=a,a=e.length);a=Ga(a);-1<a&&a<=e.length&&(b=D(b)?b:[b],b.length&&this._insert(a,b));return this},_insert:function(a,b){var e=this._data,d=e.length;Ma.apply(e,[a,0].concat(b));this._trigger({change:"insert",index:a,items:b},d)},remove:function(a,f){var e;e=this._data;a===b&&(a=e.length-1);a=Ga(a);f=f?Ga(f):0===f?0:1;-1<f&&-1<a&&(e=e.slice(a,a+f),(f=e.length)&&this._remove(a,f,e));return this},_remove:function(a,
b,e){var d=this._data,g=d.length;d.splice(a,b);this._trigger({change:"remove",index:a,items:e},g)},move:function(a,b,e){e=e?Ga(e):0===e?0:1;a=Ga(a);b=Ga(b);if(0<e&&-1<a&&-1<b&&a!==b){var d=this._data.slice(a,a+e);(e=d.length)&&this._move(a,b,e,d)}return this},_move:function(a,b,e,d){var g=this._data,k=g.length;g.splice(a,e);g.splice.apply(g,[b,0].concat(d));this._trigger({change:"move",oldIndex:a,index:b,items:d},k)},refresh:function(a){var b=this._data.slice();this._refresh(b,a);return this},_refresh:function(a,
b){var e=this._data,d=e.length;Ma.apply(e,[0,e.length].concat(b));this._trigger({change:"refresh",oldItems:a},d)},_trigger:function(b,f){var e=this._data,d=e.length,e=a([e]);e.triggerHandler(sa,b);d!==f&&e.triggerHandler(ra,{change:"set",path:"length",value:d,oldValue:f})}};La[ra]=La[sa]={remove:function(b){var f,e,d,g,k=b.data;if(k&&(k.off=!0,k=k.cb)&&(f=xa[k._cId])){b=a._data(this).events[b.type];for(d=b.length;d--&&!e;)e=(g=b[d].data)&&g.cb===k;e||(delete f[a.data(this,"obId")],L(f,k._cId))}}};
k.map=function(c){function f(a,d,f){var k,l=this;this.src&&this.unmap();"object"===typeof a&&(l.src=a,l.tgt=f||l.tgt||[],l.options=d||l.options,l.update(),c.obsSrc&&g(l.src).observeAll(l.obs=function(a,d){k||(k=!0,c.obsSrc(l,a,d),k=b)},l.srcFlt),c.obsTgt&&g(l.tgt).observeAll(l.obt=function(a,d){k||(k=!0,c.obsTgt(l,a,d),k=b)},l.tgtFlt))}Y(c)&&(c={getTgt:c});c.baseMap&&(c=a.extend({},c.baseMap,c));c.map=function(a,b,c){return new f(a,b,c)};(f.prototype={srcFlt:c.srcFlt||Ra,tgtFlt:c.tgtFlt||Ra,update:function(a){g(this.tgt).refresh(c.getTgt(this.src,
this.options=a||this.options))},unmap:function(){this.src&&(this.obs&&g(this.src).unobserveAll(this.obs,this.srcFlt),this.obt&&g(this.tgt).unobserveAll(this.obt,this.tgtFlt),this.src=b)},map:f,_def:c}).constructor=f;return c}}})(this,this.jQuery);(function(k,a,b){function g(r,q,n){var y,d,c,f,e,g,h,k,l,m=r.target,p=m._jsvBnd,u=/&(\d+)\+?/g;if(p)for(;c=u.exec(p);)if(c=Ea[c[1]])if(q=c.to){c=c.linkCtx;h=c.view;l=c.tag;g=a(m);e=h.hlp(Sa);k=h.hlp(ma);d=S(m);y=x[d];n===b&&(n=Qa(d)?d(m):y?g[y]():g.attr(d));
y=q[1];q=q[0];y&&(f=Qa(y)?y:h.getRsc("converters",y));f&&(n=f.call(l,n));y=h.linkCtx;h.linkCtx=c;d={change:"change",oldValue:c._val,value:n};if(!(e&&!1===e.call(c,r,d)||l&&l.onBeforeChange&&!1===l.onBeforeChange(r,d)||n===b)&&(e=q[0],n!==b&&e)){e=e._jsvOb?e._ob:e;l&&(l._.chging=!0);Z(e).setProperty(q[2]||q[1],n);k&&k.call(c,r,d);if(l){if(l.onAfterChange)l.onAfterChange(r,d);delete l._.chging}c._val=n}h.linkCtx=y}}function H(r,q,n){var y,c,d,e,f,g=this.tag,h=this.data,l=this.elem;d=this.convert;var g=
l.parentNode,k=this.view,m=k.linkCtx,p=k.hlp(Sa);k.linkCtx=this;if(g&&!(p&&q&&!1===p.call(this,r,q)||q&&"*"!==r.data.prop&&r.data.prop!==q.path)){q&&(this.eventArgs=q);if(q||this._initVal){delete this._initVal;if(n._er)try{c=n(h,k)}catch(u){e=n._er,f=J(u,k,(new Function("data,view","return "+e+";"))(h,k)),c=[{props:{},args:[f]}]}else c=n(h,k,G);a:{var v=c,s=g=this.tag;y=this.attr||S(l,!0,d!==b);var w,z,t=s&&s.parentElem||this.elem;if(v!==b){z=a(t);y=s&&s.attr||y;Qa(v)&&J(this.expr+": missing parens");
if(s=/^css-/.test(y)&&y.slice(4))w=a.style(t,s),+v===v&&(w=parseInt(w));else if("link"!==y){if("value"===y)t.type===pa&&(w=z.prop(y=C));else if(y===Pa)if(t.value===""+v)w=z.prop(C);else break a;w===b&&(w=(w=x[y])?z[w]():z.attr(y))}this._val=w}}if(g){d=e||g._er;c=c[0]?c:[c];n=!d&&q&&g.onUpdate&&!1===g.onUpdate(r,q,c);Na(g,c,d);if(n||y===Da){y===ka&&g.onBeforeLink&&g.onBeforeLink();Oa(g,g.tagCtx);Aa(this,h,l);k.linkCtx=m;return}if(g._.chging)return;c=":"===g.tagName?G._cnvt(g.cvt,k,c[0]):G._tag(g,k,
k.tmpl,c,!0,f)}else n._tag&&(c=(d=""===d?wa:d)?G._cnvt(d,k,c[0]||c):G._tag(n._tag,k,k.tmpl,c,!0,f),g=this.tag,y=this.attr||y);L(c,this,y,g)&&q&&(p=k.hlp(ma))&&p.call(this,r,q);g&&(g._er=e,Oa(g,g.tagCtx))}Aa(this,h,l);k.linkCtx=m}}function v(a,b){a._df=b;a[(b?"set":"remove")+"Attribute"](p,"")}function L(r,q,n,y){var c,d,g,h,l,m,p=r!==b,u=q.data,s=y&&y.parentElem||q.elem,w=a(s),da=q.view;m=q._val;var z=da.linkCtx,t=y||n===ka;y&&(y.parentElem=y.parentElem||q.expr||y._elCnt?s:s.parentNode,d=y._prv,g=
y._nxt);if(p){"visible"===n&&(n="css-display");if(/^css-/.test(n))"visible"===q.attr&&(q=(s.currentStyle||gb.call(k,s,"")).display,r?(r=s._jsvd||q,r!==Da||(r=cb[c=s.nodeName])||(q=N.createElement(c),N.body.appendChild(q),r=cb[c]=(q.currentStyle||gb.call(k,q,"")).display,N.body.removeChild(q))):(s._jsvd=q,r=Da)),(t=t||m!==r)&&a.style(s,n.slice(4),r);else if("link"!==n){if(n===C)l=!0,r=r&&"false"!==r;else if(n===Pa)if(s.value===""+r)r=l=!0,n=C;else{Aa(q,u,s);return}else if("selected"===n||"disabled"===
n||"multiple"===n||"readonly"===n)r=r&&"false"!==r?n:null;if(c=x[n])if(n===ka){da.linkCtx=q;if(y&&y._.inline){n=y.nodes(!0);if(y._elCnt){if(d&&d!==g)f(d,g,s,y._tgId,"^",!0);else if(h=s._df)m=y._tgId+"^",c=h.indexOf("#"+m)+1,l=h.indexOf("/"+m),c&&0<l&&(c+=m.length,l>c&&(v(s,h.slice(0,c)+h.slice(l)),e(h.slice(c,l))));d=d?d.previousSibling:g?g.previousSibling:s.lastChild}a(n).remove();if(y&&y.onBeforeLink)y.onBeforeLink();h=da.link(da.data,s,d,g,r,y&&{tag:y._tgId,lazyLink:y.tagCtx.props.lazyLink})}else{p&&
w.empty();if(y&&y.onBeforeLink)y.onBeforeLink();p&&(h=da.link(u,s,d,g,r,y&&{tag:y._tgId}))}da.linkCtx=z}else{if(t=t||m!==r)if("text"===n&&s.children&&!s.children[0])s.textContent!==b?s.textContent=r:s.innerText=null===r?"":r;else w[c](r)}else if(t=t||m!==r)w[l?"prop":"attr"](n,r!==b||l?r:null);q._val=r}return h||t}if(n===ka&&y&&y.onBeforeLink)y.onBeforeLink()}function $(a,b){var n=this.hlp(Sa),y=this.hlp(ma);if(!n||!1!==n.call(this,a,b)){if(b){var n=b.index,c=b.items;switch(b.change){case "insert":this.addViews(n,
c);break;case "remove":this.removeViews(n,c.length);break;case "move":this.refresh();break;case "refresh":this.refresh()}}y&&y.call(this,a,b)}}function P(r){var q,n=r.type,y=r.data,c=r._.bnd;if(!r._.useKey&&c){if(q=r._.bndArr)a([q[1]]).off(B,q[0]),r._.bndArr=b;c!==!!c&&c._.inline?n?c._.arrVws[r._.id]=r:delete c._.arrVws[r._.id]:n&&y&&(q=function(a){a.data&&a.data.off||$.apply(r,arguments)},a([y]).on(B,q),r._.bndArr=[q,y])}}function S(a,b,n){var c=a.nodeName.toLowerCase(),d=Ba.merge[c]||a.contentEditable===
wa&&{to:ka,from:ka};return d?b?"input"===c&&a.type===Pa?Pa:d.to:d.from:b?n?"text":ka:""}function $a(r,q,n,c,d,g,e){var h,l,k,m=r.parentElem,p=r._prv,s=r._nxt,u=r._elCnt;p&&p.parentNode!==m&&J("Missing parentNode");if(e)for(k in l=r.nodes(),u&&p&&p!==s&&f(p,s,m,r._.id,"_",!0),r.removeViews(b,b,!0),c=s,u&&(p=p?p.previousSibling:s?s.previousSibling:m.lastChild),a(l).remove(),r._.bnds)ta(k);else{if(q){h=c[q-1];if(!h)return!1;p=h._nxt}u?p=(c=p)?c.previousSibling:m.lastChild:c=p.nextSibling}q=n.render(d,
g,r._.useKey&&e,r,e||q,!0);r.link(d,m,p,c,q,h)}function ja(a,q,n){var c;n?(c="^`",q=q._.tag,n=q._tgId,n||(Ea[n=db++]=q,q._tgId=""+n)):(c="_`",Ha[n=q._.id]=q);return"#"+n+c+(a!=b?a:"")+"/"+n+c}function Aa(a,q,n){var c,d=a.tag,g=a.convertBack,e=[],f=a._bndId||""+db++,h=a._hdlr;delete a._bndId;d&&(e=d.depends||e,e=Qa(e)?d.depends(d):e,c=d.linkedElem);if(!a._depends||""+a._depends!==""+e)if(a._depends&&Z._apply(!1,[q],a._depends,h,!0),q=Z._apply(!1,[q],a.fn.deps,e,h,a._ctxCb),q.elem=n,q.linkCtx=a,q._tgId=
f,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+="&"+f,a._depends=e,a.view._.bnds[f]=f,Ea[f]=q,c&&(q.to=[[],g]),(c||g!==b)&&xa(q,d&&d.convertBack||g),d){if(d.onAfterBind)d.onAfterBind(q);d.flow||d._.inline||(n.setAttribute(E,(n.getAttribute(E)||"")+"#"+f+"^/"+f+"^"),d._tgId=""+f)}if(c&&c[0])for(d._.radio&&(c=c.children("input[type=radio]")),a=c.length;a--;)c[a]._jsvBnd=c[a]._jsvBnd||n._jsvBnd+"+",c[a]._jsvLkEl=d}function qa(a,b,n,c,d,e,g){return oa(this,a,b,n,c,d,e,g)}function oa(r,q,n,c,d,e,f,h){if(r&&q){q=
q.jquery?q:a(q);l||(l=N.body,a(l).on(X,g).on("blur","[contenteditable]",g));for(var k,p,s,u,w,t,da,z,x=ja,A=c&&"replace"===c.target,D=q.length;D--;)if(da=q[D],""+r===r)aa(r,da,m(da),b,!0,n,c);else{e=e||m(da);if(r.markup!==b)!1===e.link&&(c=c||{},c.link=x=!1),A&&(t=da.parentNode),s=r.render(n,c,d,e,b,x),t?(f=da.previousSibling,h=da.nextSibling,a.cleanData([da],!0),t.removeChild(da),da=t):(f=h=b,a(da).empty());else if(!0===r&&e===la)z={lnk:1};else break;if(da._df&&!h){u=ba(da._df,!0,eb);k=0;for(p=u.length;k<
p;k++)w=u[k],(w=Ha[w.id])&&w.data!==b&&w.parent.removeViews(w._.key,b,!0);v(da)}e.link(n,da,f,h,s,z,c)}}return q}function Ra(r,q,n,c,d,e,g,f){function h(a,r,q,c,n,e,g,f,y,k,l,p,m){var s,na="";if(m)return u=0,a;t=f||y||"";c=c||k;q=q||p;la&&!q&&(c||t||e)&&(la=b,ya=pa.shift());if(c=c||q)u=0,la=b,fa&&(q||p?Ya[ya]||/;svg;|;math;/.test(";"+pa.join(";")+";")||(s="'<"+ya+".../"):Ya[c]?s="'</"+c:pa.length&&c===ya||(s="Mismatch: '</"+c),s&&Wa(s+">' in:\n"+d)),ra=za,ya=pa.shift(),za=Xa[ya],k=k?"</"+k+">":"",
ra&&(va+=Ia,Ia="",za?va+="-":(na=k+ga+"@"+va+Ca+(l||""),va=Ka.shift()));za?(e?Ia+=e:r=k||p||"",t&&(r+=t,Ia&&(r+=" "+E+'="'+Ia+'"',Ia=""))):r=e?r+na+n+ga+e+Ca+g+t:na||a;u&&e&&Wa(" No {^{ tags within elem markup ("+u+' ). Use data-link="..."');t&&(u=t,pa.unshift(ya),ya=t.slice(1),pa[0]&&pa[0]===mb[ya]&&J("Parent of <tr> must be <tbody>"),la=Ya[ya],(za=Xa[ya])&&!ra&&(Ka.unshift(va),va=""),ra=za,va&&za&&(va+="+"));return r}function k(a,r){var c,n,d,e,g=[];if(a){"@"===a._tkns.charAt(0)&&(r=I.previousSibling,
I.parentNode.removeChild(I),I=b);for(G=a.length;G--;){F=a[G];d=F.ch;if(c=F.path)for(B=c.length-1;n=c.charAt(B--);)"+"===n?"-"===c.charAt(B)?(B--,r=r.previousSibling):r=r.parentNode:r=r.lastChild;if("^"===d){if(t=Ea[c=F.id]){n=r&&(!I||I.parentNode!==r);if(!I||n)t.parentElem=r;F.elCnt&&n&&v(r,(F.open?"#":"/")+c+d+(r._df||""));g.push([n?null:I,F])}}else if(C=Ha[c=F.id])(C.parentElem||(C.parentElem=r||I&&I.parentNode||q,C._.onRender=ja,C._.onArrayChange=$,P(C)),n=C.parentElem,F.open)?(C._elCnt=F.elCnt,
r&&!I?v(r,"#"+c+d+(r._df||"")):(C._prv||v(n,Ma(n._df,"#"+c+d)),C._prv=I)):(!r||I&&I.parentNode===r?I&&(C._nxt||v(n,Ma(n._df,"/"+c+d)),C._nxt=I):(v(r,"/"+c+d+(r._df||"")),C._nxt=b),w=C.linkCtx,(e=C.ctx&&C.ctx.onAfterCreate||Na)&&e.call(w,C))}for(G=g.length;G--;)ta.push(g[G])}return!a||a.elCnt}function l(a){var b,r;if(a)for(G=a.length,B=0;B<G;B++)if(F=a[B],r=t=Ea[F.id].linkCtx.tag,!t.flow){if(!X){for(b=1;r=r.parent;)b++;ha=ha||b}!X&&b!==ha||Y&&t.tagName!==Y||Z.push(t)}}function s(){var e,f,h="";f={};
e=U+(Ja?",["+p+"]":"");H=V?q.querySelectorAll(e):a(e,q).get();A=H.length;n&&n.innerHTML&&(Q=V?n.querySelectorAll(e):a(e,n).get(),n=Q.length?Q[Q.length-1]:n);for(x=ha=0;x<A;x++)if(I=H[x],n&&!Aa)Aa=I===n;else if(c&&I===c){Ja&&(h+=D(I));break}else if(I.parentNode)if(Ja){h+=D(I);if(I._df){for(e=x+1;e<A&&I.contains(H[e]);)e++;f[e-1]=I._df}f[x]&&(h+=f[x]||"")}else xa&&(F=ba(I,b,fb))&&(F=F[0])&&(qa=qa?F.id!==qa&&qa:F.open&&F.id),!qa&&La(ba(I))&&I.getAttribute(z)&&ta.push([I]);if(Ja){h+=q._df||"";if(f=h.indexOf("#"+
Ja.id)+1)h=h.slice(f+Ja.id.length);f=h.indexOf("/"+Ja.id);f+1&&(h=h.slice(0,f));l(ba(h,b,qb))}d===b&&q.getAttribute(z)&&ta.push([q]);Fa(n,za);Fa(c,za);if(!Ja){if(za&&va+Ia&&(I=c,va&&(c?k(ba(va+"+",!0),c):k(ba(va,!0),q)),k(ba(Ia,!0),q),c)){h=c.getAttribute(E);if(A=h.indexOf(sa)+1)h=h.slice(A+sa.length-1);c.setAttribute(E,Ia+h)}A=ta.length;for(x=0;x<A;x++)if(I=ta[x],O=I[1],I=I[0],O){if(t=Ea[O.id]){if(w=t.linkCtx)t=w.tag,t.linkCtx=w;O.open?(I&&(t.parentElem=I.parentNode,t._prv=I),t._elCnt=O.elCnt,!t||
t.onBeforeLink&&!1===t.onBeforeLink()||t._.bound||(t._.bound=!0,C=t.tagCtx.view,aa(b,t._prv,C,O.id)),t._.linking=!0):(t._nxt=I,t._.linking&&(ea=t.tagCtx,C=ea.view,delete t._.linking,t._.bound||(t._.bound=!0,aa(b,t._prv,C,O.id)),Oa(t,ea)))}}else aa(I.getAttribute(z),I,m(I),b,xa,r,g)}oa&&oa.resolve()}var u,w,t,x,A,B,G,H,I,C,F,O,Q,L,S,T,R,Z,X,Y,ea,fa,ha,ia,ca,ya,la,ma,ka,za,ra,Ia,sa,Aa,qa,oa,xa,Ja,Da=this._.id+"_",va="",ta=[],pa=[],Ka=[],Na=this.hlp(K),La=k;if(e){oa=e.lazyLink&&a.Deferred();if(e.tmpl)S=
"/"+e._.id+"_";else if(xa=e.lnk,e.tag&&(Da=e.tag+"^",e=!0),Ja=e.get)La=l,Z=Ja.tags,X=Ja.deep,Y=Ja.name;e=!0===e}q=q?""+q===q?a(q)[0]:q.jquery?q[0]:q:this.parentElem||N.body;fa=!Ba.noValidate&&q.contentEditable!==wa;ya=q.tagName.toLowerCase();za=!!Xa[ya];n=n&&Ga(n,za);c=c&&Ga(c,za)||null;if(d!=b){ma=ia=N.createElement("div");sa=Ia="";ca="http://www.w3.org/2000/svg"===q.namespaceURI?"svg_ns":(L=kb.exec(d))&&L[1]||"";M&&L&&L[2]&&J("Unsupported: "+L[2]);if(za){for(R=c;R&&!(T=ba(R));)R=R.nextSibling;if(ka=
T?T._tkns:q._df){L=S||"";if(e||!S)L+="#"+Da;B=ka.indexOf(L);B+1&&(B+=L.length,sa=Ia=ka.slice(0,B),ka=ka.slice(B),T?R.setAttribute(E,ka):v(q,ka))}}la=b;d=(""+d).replace(ob,h);fa&&pa.length&&Wa("Mismatched '<"+ya+"...>' in:\n"+d);if(f)return;bb.appendChild(ia);ca=W[ca]||W.div;e=ca[0];for(ma.innerHTML=ca[1]+d+ca[2];e--;)ma=ma.lastChild;bb.removeChild(ia);for(ia=N.createDocumentFragment();ca=ma.firstChild;)ia.appendChild(ca);q.insertBefore(ia,c)}oa?setTimeout(s,0):s();return oa&&oa.promise()}function aa(r,
q,c,d,e,f,g){var h,k,l,p,m,s,t;if(d)e=Ea[d],e=e.linkCtx?e.linkCtx.tag:e,s=e.linkCtx||{data:c.data,elem:e._elCnt?e.parentElem:q,view:c,ctx:c.ctx,attr:ka,fn:e._.bnd,tag:e,_bndId:d},La(s,s.fn);else if(r&&q)for(f=e?f:c.data,d=c.tmpl,k=S(q),r=a.trim(r).replace(lb,"\\$&"),r=r.slice(-1)!==A?Q+":"+r+(k?":":"")+A:r,u.lastIndex=0;h=u.exec(r);)t=u.lastIndex,k=h[1],m=h[3],p=h[10],l=b,s={data:f,elem:q,view:c,ctx:g,attr:k,isLk:e,_initVal:!h[2]},h[6]&&(!k&&(l=/:([\w$]*)$/.exec(p))&&(l=l[1],l!==b&&(p=-l.length-1,
m=m.slice(0,p-1)+A)),null===l&&(l=b),s.convert=h[5]||""),s.expr=k+m,(h=d.links[m])||(d.links[m]=h=w.tmplFn(m,d,!0,l)),s.fn=h,k||l===b||(s.convertBack=l),La(s,h),u.lastIndex=t}function La(a,q){function c(b,n){H.call(a,b,n,q)}c.noArray=!0;a.isLk&&(a.view=new w.View(a.ctx,"link",la,a.data,la.tmpl,b,b,ja));a._ctxCb=Ka(a.view);a._hdlr=c;c(!0)}function Ma(a,b){var c;return a?(c=a.indexOf(b),c+1?a.slice(0,c)+a.slice(c+b.length):a):""}function D(a){return a&&(""+a===a?a:"SCRIPT"===a.tagName?a.type.slice(3):
1===a.nodeType&&a.getAttribute(E)||"")}function ba(a,b,c){function d(a,b,r,c,q,n){f.push({elCnt:e,id:c,ch:q,open:b,close:r,path:n,token:a})}var e,f=[];if(b=b?a:D(a))return f.elCnt=!a.type,e="@"===b.charAt(0)||!a.type,f._tkns=b,b.replace(c||rb,d),f}function Fa(a,b){a&&("jsv"===a.type?a.parentNode.removeChild(a):b&&""===a.getAttribute(z)&&a.removeAttribute(z))}function Ga(a,b){for(var c=a;b&&c&&1!==c.nodeType;)c=c.previousSibling;c&&(1!==c.nodeType?(c=N.createElement("SCRIPT"),c.type="jsv",a.parentNode.insertBefore(c,
a)):D(c)||c.getAttribute(z)||c.setAttribute(z,""));return c}function Oa(c,q){var n,d,e,f,g,h,k;n=q.view;var l=c.linkCtx=c.linkCtx||{tag:c,data:n.data,view:n,ctx:n.ctx};if(c.onAfterLink)c.onAfterLink(q,l);if(d=(n=c.targetTag?c.targetTag.linkedElem:c.linkedElem)&&n[0]){if(e=c._.radio)n=n.children("input[type=radio]");if(e||!c._.chging){f=w.cvt(c,c.convert)[0];if(e||d!==l.elem){for(k=n.length;k--;){d=n[k];g=d._jsvLkEl;if(c._.inline&&(!g||g!==c&&g.targetTag!==c))for(d._jsvLkEl=c,g=l.elem?l.elem._jsvBnd:
c._prv._jsvBnd,d._jsvBnd=g+"+",g=g.slice(1).split("&"),h=g.length;h--;)xa(Ea[g[h]],c.convertBack);e&&(d[C]=f===d.value)}l._val=f}f!==b&&(e||d.value===b?d.contentEditable===wa&&(d.innerHTML=f):d.type===pa?d[C]=f&&"false"!==f:n.val(f))}}if(d=d||":"===c.tagName&&l.elem)e=d._jsvTr,f=q.props.trigger,e!==f&&(d._jsvTr=f,n=n||a(d),sa(n,e,"off"),sa(n,f,"on"))}function ra(a){setTimeout(function(){g(a)},0)}function sa(a,b,c){b&&a[c](!0===b?"keydown":b,!0===b?ra:g)}function xa(a,b){var c,d,e,f,g,h=a.linkCtx,
k=h.data,l=h.fn.paths;if(a&&l){for(d=(l=(c=l._jsvto)||l[0])&&l.length;d&&""+(f=l[--d])!==f;);!f||h.tag&&!h.tag.tagCtx.args.length?a.to=[[],b]:(f=f.split("^").join("."),a.to="."===f.charAt(0)?[[g=l[d-1],f.slice(1)],b]:[h._ctxCb(e=d?l[0].split("^").join("."):f)||[k,e],b],c&&g&&(a.to[0][0]=h._ctxCb(g,k)))}}function Na(a,b,c){var d;d=a.tagCtx.view;var e=a.tagCtxs||[a.tagCtx],f=e.length,g=!b;b=b||a._.bnd.call(d.tmpl,(a.linkCtx||d).data,d,G);if(c)e=a.tagCtxs=b,a.tagCtx=e[0];else for(;f--;)c=e[f],d=b[f],
Z(c.props).setProperty(d.props),T(c.ctx,d.ctx),c.args=d.args,g&&(c.tmpl=d.tmpl);w._ths(a,e[0]);return e}function Y(a){for(var b,c,d=[],f=b=a.length;f--;)d.push(a[f]);for(f=b;f--;)if(b=d[f],b.parentNode){if(c=b._jsvBnd)for(c=c.slice(1).split("&"),b._jsvBnd="",a=c.length;a--;)ta(c[a],b._jsvLkEl,b);e(D(b)+(b._df||""))}}function ta(c,d,e){var f,g,h,l=Ea[c];if(d)e===d.linkedElem[0]&&(delete e._jsvLkEl,delete d.linkedElem);else if(l){delete Ea[c];for(f in l.bnd)d=l.bnd[f],e=".obs"+l.cbId,a.isArray(d)?a([d]).off(B+
e).off(fa+e):a(d).off(fa+e),delete l.bnd[f];if(f=l.linkCtx){if(d=f.tag){if(e=d.tagCtxs)for(g=e.length;g--;)(h=e[g].map)&&h.unmap();if(g=(e=(h=d.linkedElem)&&h[0]||f.elem)&&e._jsvTr)sa(h||a(e),g,"off"),e._jsvTr=b;if(d.onDispose)d.onDispose();d._elCnt||(d._prv&&d._prv.parentNode.removeChild(d._prv),d._nxt&&d._nxt.parentNode.removeChild(d._nxt))}delete f.view._.bnds[c]}delete w._cbBnds[l.cbId]}}function ha(c,d){c===b?(l&&(a(l).off(X,g).off("blur","[contenteditable]",g),l=b),c=!0,la.removeViews(),Y(N.body.getElementsByTagName("*"))):
d&&!0===c&&(d=d.jquery?d:a(d),d.each(function(){for(var a;(a=m(this,!0))&&a.parent;)a.parent.removeViews(a._.key,b,!0);Y(this.getElementsByTagName("*"));Y([this])}));return d}function ca(a,b){return ha(this,a,b)}function Ka(a){return function(b,c){var d,e,f=[c];if(a&&b){if(b._jsvOb)return b._jsvOb.call(a.tmpl,c,a,G);if("~"===b.charAt(0)){if("~tag"===b.slice(0,4)&&(e=a.ctx,"."===b.charAt(4)&&(d=b.slice(5).split("."),e=e.tag),d))return e?[e,d.join("."),c]:[];b=b.slice(1).split(".");if(c=a.hlp(b.shift()))b.length&&
f.unshift(b.join(".")),f.unshift(c);return c?f:[]}if("#"===b.charAt(0))return"#data"===b?[]:[a,b.replace(nb,""),c]}}}function c(a){return a.type===pa?a[C]:a.value}function f(a,b,c,d,e,f){var g,h,l,k,p,m,s=0,t=a===b;if(a){l=ba(a)||[];g=0;for(h=l.length;g<h;g++){k=l[g];m=k.id;if(m===d&&k.ch===e)if(f)h=0;else break;t||(p="_"===k.ch?Ha[m]:Ea[m].linkCtx.tag,k.open?p._prv=b:k.close&&(p._nxt=b));s+=m.length+2}s&&a.setAttribute(E,a.getAttribute(E).slice(s));a=b?b.getAttribute(E):c._df;if(h=a.indexOf("/"+
d+e)+1)a=l._tkns.slice(0,s)+a.slice(h+(f?-1:d.length+1));a&&(b?b.setAttribute(E,a):v(c,a))}else v(c,Ma(c._df,"#"+d+e)),f||b||v(c,Ma(c._df,"/"+d+e))}function e(a){var c,d,e;if(e=ba(a,!0,pb))for(a=0,c=e.length;a<c;a++)d=e[a],"_"===d.ch?(d=Ha[d.id])&&d.type&&d.parent.removeViews(d._.key,b,!0):ta(d.id)}function d(a,b,c){if("set"===c.change){a=a.tgt;for(b=a.length;b--&&a[b].key!==c.path;);-1===b?c.path&&Z(a).insert({key:c.path,prop:c.value}):c.remove?Z(a).remove(b):Z(a[b]).setProperty("prop",c.value)}}
function O(a,b,c){a=a.src;var d=c.change;"set"===d?"prop"===c.path?Z(a).setProperty(b.target.key,c.value):(Z(a).setProperty(c.oldValue,null),delete a[c.oldValue],Z(a).setProperty(c.value,b.target.prop)):"remove"===d?(b=c.items[0],Z(a).removeProperty(b.key),delete a[b.key]):"insert"===d&&(b=c.items[0],b.key&&Z(a).setProperty(b.key,b.prop))}function F(a){return 0>a.indexOf(".")}var l,m,u,Q,A,s,M,J,z,t,U,W,la,Ha,N=k.document,G=a.views,w=G.sub,Ba=G.settings,T=w.extend,Qa=a.isFunction,Za=G.converters,
R=G.tags,Z=a.observable,ia=Z.observe,E="data-jsv",fa=w.propChng=w.propChng||"propertyChange",B=w.arrChng=w.arrChng||"arrayChange",X="change.jsv",Sa="onBeforeChange",ma="onAfterChange",K="onAfterCreate",C="checked",pa="checkbox",Pa="radio",Da="none",wa="true",Ca='">\x3c/script>',ga='<script type="jsv',p=E+"-df",Va="script,["+E+"]",ka="html",x={value:"val",input:"val",html:ka,text:"text"},ab={from:"value",to:"value"},h=0,ib=a.cleanData,jb=Ba.delimiters,Wa=w.syntaxErr,kb=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,
lb=/['"\\]/g,bb=N.createDocumentFragment(),V=N.querySelector,Xa={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},mb={tr:"table"},Ya={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},cb={},Ea={},db=1,nb=/^#(view\.?)?/,ob=/(^|(\/>)|<\/(\w+)>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>))/g,eb=/(#)()(\d+)(_)/g,pb=/(#)()(\d+)([_^])/g,
fb=/(?:(#)|(\/))(\d+)(_)/g,qb=/(#)()(\d+)(\^)/g,rb=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,gb=k.getComputedStyle;if(!a)throw"JsViews requires jQuery";if(!G)throw"JsViews requires JsRender";if(!Z)throw"JsViews requires jquery.observable";a.link||(t={contents:function(c,d){c!==!!c&&(d=c,c=b);var e,f=a(this.nodes());f[0]&&(e=d?f.filter(d):f,f=c&&d?e.add(f.find(d)):e);return f},nodes:function(a,b,c){var d=this._elCnt,e=!b&&d,f=[];b=b||this._prv;c=c||this._nxt;for(b=e?b===this._nxt?this.parentElem.lastSibling:
b:!1===this._.inline?b||this.linkCtx.elem.firstChild:b&&b.nextSibling;b&&(!c||b!==c);)(a||d||"SCRIPT"!==b.tagName)&&f.push(b),b=b.nextSibling;return f},childTags:function(a,c){a!==!!a&&(c=a,a=b);var d=this._prv,e=[];(this.link?this:this.tagCtx.view).link(b,this.parentElem,this._elCnt?d&&d.previousSibling:d,this._nxt,b,{get:{tags:e,deep:a,name:c,id:this.link?this._.id+"_":this._tgId+"^"}});return e},refresh:function(a){var c,d=this.linkCtx,e=this.tagCtx.view;this.disposed&&J("Removed tag");a===b&&
(a=G._tag(this,e,e.tmpl,Na(this),!0));a+""===a&&(c=this._.inline?ka:d.attr||S(this.parentElem,!0),c=L(a,d,c,this));Oa(this,this.tagCtx);return c||this},update:function(a){var c=this.linkedElem;c&&g({target:c[0]},b,a)}},w.onStore.template=function(b,c){c.link=qa;c.unlink=ca;b&&(a.link[b]=function(){return qa.apply(c,arguments)},a.unlink[b]=function(){return ca.apply(c,arguments)})},w.onStore.tag=function(a,b){w._lnk(b)},w._lnk=function(a){return T(a,t)},w.viewInfos=ba,(Ba.delimiters=function(){var a=
jb.apply(G,arguments);Q=a[1];A=a[2];s=a[4];u=RegExp("(?:^|\\s*)([\\w-]*)(\\"+s+")?(\\"+Q+w.rTag+"\\"+A+")","g");return this})(),T(w._lnk(w.View.prototype),{addViews:function(a,b,c){var d,e=b.length,f=this.views;if(!this._.useKey&&e&&(c=this.tmpl)&&(d=f.length+e,!1!==$a(this,a,c,f,b,this.ctx)))for(a+=e;a<d;a++)Z(f[a]).setProperty("index",a);return this},removeViews:function(c,d,e){function g(c){var d,h,r,l,q,k=m[c];if(k&&k.link){c=k._.id;e||(q=k.nodes());k.removeViews(b,b,!0);k.type=b;r=k._prv;l=k._nxt;
h=k.parentElem;e||(k._elCnt&&f(r,l,h,c,"_"),a(q).remove());if(!k._elCnt)try{r.parentNode.removeChild(r),l.parentNode.removeChild(l)}catch(p){}P(k);for(d in k._.bnds)ta(d);delete Ha[c]}}var h,l,k=!this._.useKey,m=this.views;k&&(l=m.length);if(c===b)if(k){for(h=l;h--;)g(h);this.views=[]}else{for(h in m)g(h);this.views={}}else if(d===b&&(k?d=1:(g(c),delete m[c])),k&&d){for(h=c+d;h-- >c;)g(h);m.splice(c,d);if(l=m.length)for(;c<l;)Z(m[c]).setProperty("index",c++)}return this},refresh:function(a){var b=
this.parent;b&&($a(this,this.index,this.tmpl,b.views,this.data,a,!0),P(this));return this},link:Ra}),Ha={0:la=new w.View},Za.merge=function(a){var b,c=this.linkCtx._val||"",d=this.tagCtx.props.toggle;d&&(b=d.replace(/[\\^$.|?*+()[{]/g,"\\$&"),c=c.replace(RegExp("(\\s(?="+b+"$)|(\\s)|^)("+b+"(\\s|$))"),"$2"),a=c+(a?(c&&" ")+d:""));return a},R("on",{attr:Da,onAfterLink:function(c,d){for(var e,f,g=0,h=c.args,k=h.length,l=c.props.data,m=c.view,p=c.props.context;g<k&&!(f=Qa(e=h[g++])););if(f){f=h.slice(g);
h=h.slice(0,g-1);p||(p=(p=/^(.*)[\.^][\w$]+$/.exec(c.params.args.slice(-f.length-1)[0]))&&w.tmplFn("{:"+p[1]+"}",m.tmpl,!0)(d.data,m));if(this._evs)this.onDispose();a(d.elem).on(this._evs=h[0]||"click",this._sel=h[1],l==b?null:l,this._hlr=function(a){return e.apply(p||d.data,[].concat(f,a,{change:a.type,view:m,linkCtx:d}))})}},onDispose:function(){a(this.parentElem).off(this._evs,this._sel,this._hlr)},flow:!0}),T(R["for"],{onArrayChange:function(a,b){var c,d=b.change;if(this.tagCtxs[1]&&("insert"===
d&&a.target.length===b.items.length||"remove"===d&&!a.target.length||"refresh"===d&&!b.oldItems.length!==!a.target.length))this.refresh();else for(c in this._.arrVws)c=this._.arrVws[c],c.data===a.target&&c._.onArrayChange.apply(c,arguments);a.done=!0},onAfterLink:function(){var b,c,d,e,f=this,g=f._ars||{},h=f.tagCtxs,l=h.length,k=f.selected||0;for(b=0;b<=k;b++)c=h[b],e=c.map?c.map.tgt:c.args.length?c.args[0]:c.view.data,(d=g[b])&&e!==d[0]&&(ia(d[0],d[1],!0),delete g[b]),!g[b]&&a.isArray(e)&&(ia(e,
c=function(a,b){f.onArrayChange(a,b)}),g[b]=[e,c]);for(b=k+1;b<l;b++)if(d=g[b])ia(d[0],d[1],!0),delete g[b];f._ars=g},onDispose:function(){for(var a in this._ars)ia(this._ars[a][0],this._ars[a][1],!0)}}),T(R["for"],t),T(R["if"],t),T(R.include,t),R("props",{baseTag:R["for"],dataMap:G.map({getTgt:R.props.dataMap.getTgt,obsSrc:d,obsTgt:O,tgtFlt:F})}),T(a,{view:G.view=m=function(c,d,e){function f(a,b){if(a)for(h=ba(a,b,eb),k=0,l=h.length;k<l&&(!(g=Ha[h[k].id])||!(g=g&&e?g.get(!0,e):g));k++);}d!==!!d&&
(e=d,d=b);var g,h,k,l,m;m=0;var p=N.body;if(c&&c!==p&&1<la._.useKey&&(c=""+c===c?a(c)[0]:c.jquery?c[0]:c)){if(d){f(c._df,!0);if(!g)for(m=V?c.querySelectorAll(Va):a(Va,c).get(),d=m.length,c=0;!g&&c<d;c++)f(m[c]);return g}for(;c;){if(h=ba(c,b,fb))for(d=h.length;d--;)if(g=h[d],g.open){if(1>m)return(g=Ha[g.id])&&e?g.get(e):g||la;m--}else m++;c=c.previousSibling||c.parentNode}}return la},link:G.link=oa,unlink:G.unlink=ha,cleanData:function(b){b.length&&h&&Y(b);ib.apply(a,arguments)}}),G.utility={validate:function(a){try{la.link(b,
N.createElement("div"),b,b,a,b,b,1)}catch(c){return c.message}}},T(a.fn,{link:function(a,b,c,d,e,f,g){return oa(a,this,b,c,d,e,f,g)},unlink:function(a){return ha(a,this)},view:function(a){return m(this[0],a)}}),a.each([ka,"replaceWith","empty","remove"],function(b,c){var d=a.fn[c];a.fn[c]=function(){var a;h=1;try{a=d.apply(this,arguments)}finally{h=0}return a}}),T(la,{tmpl:{links:{},tags:{}}}),la._.onRender=ja,Ba({wrapMap:W={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>",
"</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},linkAttr:z="data-link",merge:{input:{from:c,to:"value"},textarea:ab,select:ab,optgroup:{to:"label"}},jsrDbgMode:Ba.debugMode,debugMode:function(a){Ba.jsrDbgMode(a);
a?k._jsv={views:Ha,bindings:Ea}:delete k._jsv},jsv:function(){Ba.debugMode(Ba._dbgMode);z=Ba.linkAttr;J=G._err;U=Va+",["+z+"]";M=Ba.noDomLevel0;W.optgroup=W.option;W.tbody=W.tfoot=W.colgroup=W.caption=W.thead;W.th=W.td}}))})(this,this.jQuery)}())},{}]},{},[1])(1)});
