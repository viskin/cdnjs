!function(t){"use strict";var e,n,i,r,o,s,a,l,u,h,c,p,f,d,g,v,m,y,x,b,w,_,k,N,E,F,S,A,T,C,R,M,L,O,j,I,q,z,U,D,P,B,$,V,J,Z,Y,G,H,W,X,K,Q,te,ee,ne,ie,re,oe,se,ae,le,ue="0.3.4",he=t.document||null,ce={},pe={},fe={},de={},ge={}.hasOwnProperty,ve=function(){},me={},ye=/^\s+/,xe=/\s+$/,be="Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",we=1,_e=2,ke=3,Ne=4,Ee=5,Fe=6,Se=7,Ae=8,Te=9,Ce=10,Re=11,Me=12,Le=20,Oe=21,je=22,Ie=23,qe=24,ze=26,Ue=27,De=30,Pe=31,Be=32,$e=33,Ve=34,Je=35,Ze=36,Ye=40,Ge={unset:!0},He=he?he.createElement("div"):null,We={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),he&&(Object.defineProperty(He,"test",{value:0}),Object.defineProperties(He,{test:{value:0}})),T=Object.defineProperty,C=Object.defineProperties}catch(Xe){T=function(t,e,n){t[e]=n.value},C=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&T(t,n,e[n])}}try{Object.create(null),R=Object.create,M=function(){return Object.create(null)}}catch(Xe){R=function(){var t=function(){};return function(e,n){var i;return t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i}}(),M=function(){return{}}}var Ke,Qe,tn,en=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})};!function(){he&&(void 0!==He.style.transition?(Qe="transition",tn="transitionend",Ke=!0):void 0!==He.style.webkitTransition?(Qe="webkitTransition",tn="webkitTransitionEnd",Ke=!0):Ke=!1)}(),E=function(t,n,i,r,o){var s,a,l,u,h;n.transitionsEnabled&&("string"==typeof t?s=t:(s=t.n,t.a?a=t.a:t.d&&(l=new TextFragment({descriptor:t.d,root:n,owner:i,contextStack:parentFragment.contextStack}),a=l.toJson(),l.teardown())),h=n.transitions[s]||e.transitions[s],h&&(u=n._transitionManager,u.push(i.node),h.call(n,i.node,function(){u.pop(i.node)},a,u.info,o)))},k=function(t,e){var n,i=[];for(n=he.createElement("div"),n.innerHTML=t;n.firstChild;)i[i.length]=n.firstChild,e.appendChild(n.firstChild);return i},function(){var t,e,n;N=function(e,n,i,r,o){var s,a,l,u,h,c,p;for(l=n.descriptor.i,s=i;r>s;s+=1)a=n.fragments[s],u=s-o,h=s,c=n.keypath+"."+(s-o),p=n.keypath+"."+s,a.index+=o,t(a,l,u,h,o,c,p);g(e)},t=function(i,r,o,s,a,l,u){var h,c,p;for(i.indexRefs&&void 0!==i.indexRefs[r]&&(i.indexRefs[r]=s),h=i.contextStack.length;h--;)p=i.contextStack[h],p.substr(0,l.length)===l&&(i.contextStack[h]=p.replace(l,u));for(h=i.items.length;h--;)switch(c=i.items[h],c.type){case Se:e(c,r,o,s,a,l,u);break;case Ae:t(c.fragment,r,o,s,a,l,u);break;case Ne:case _e:case ke:n(c,r,o,s,a,l,u)}},e=function(e,n,i,r,o,s,a){var l,u;for(l=e.attributes.length;l--;)u=e.attributes[l],u.fragment&&(t(u.fragment,n,i,r,o,s,a),u.twoway&&u.updateBindings());if(e.proxyFrags)for(l=e.proxyFrags.length;l--;)t(e.proxyFrags[l],n,i,r,o,s,a);e.node._ractive&&(e.node._ractive.keypath.substr(0,s.length)===s&&(e.node._ractive.keypath=e.node._ractive.keypath.replace(s,a)),e.node._ractive.index[n]=r),e.fragment&&t(e.fragment,n,i,r,o,s,a)},n=function(e,n,i,r,o,s,a){var l;if(e.descriptor.x&&(e.keypath&&h(e),e.expressionResolver&&e.expressionResolver.teardown(),e.expressionResolver=new J(e)),e.keypath?e.keypath.substr(0,s.length)===s&&(h(e),e.keypath=e.keypath.replace(s,a),u(e)):e.indexRef===n&&(e.value=r,e.render(r)),e.fragments)for(l=e.fragments.length;l--;)t(e.fragments[l],n,i,r,o,s,a)}}(),function(t){var e,n;Z=function(t,i,r,o,s){var a,l;for(this.root=t,this.keypath=i,this.fn=n(r,o.length),this.values=[],this.refs=[],a=o.length;a--;)l=o[a],l[0]?this.values[a]=l[1]:this.refs[this.refs.length]=new e(t,l[1],this,a,s);this.selfUpdating=this.refs.length<=1,this.update()},Z.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._defEvals[this.root._defEvals.length]=this,this.deferred=!0)},update:function(){var t;try{t=this.fn.apply(null,this.values)}catch(e){if(this.root.debug)throw e;t=void 0}return w(t,this.value)||(l(this.root,this.keypath),this.root._cache[this.keypath]=t,c(this.root,this.keypath),this.value=t),this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();l(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var t=this.refs.length;t--;)this.refs[t].update();this.deferred&&(this.update(),this.deferred=!1)}},e=function(t,e,n,i,r){this.evaluator=n,this.keypath=e,this.root=t,this.argNum=i,this.type=De,this.priority=r,this.value=n.values[i]=t.get(e),u(this)},e.prototype={update:function(){var t=this.root.get(this.keypath);w(t,this.value)||(this.evaluator.values[this.argNum]=t,this.evaluator.bubble(),this.value=t)},teardown:function(){h(this)}},n=function(e,n){var i,r;if(e=e.replace(/\$\{([0-9]+)\}/g,"_$1"),t[e])return t[e];for(r=[];n--;)r[n]="_"+n;return i=new Function(r.join(","),"return("+e+")"),t[e]=i,i}}({}),function(){var t,e;J=function(e){var n,i,r,o,s;for(this.root=e.root,this.mustache=e,this.args=[],this.scouts=[],n=e.descriptor.x,s=e.parentFragment.indexRefs,this.str=n.s,r=this.unresolved=n.r?n.r.length:0,r||this.init(),i=0;r>i;i+=1)o=n.r[i],s&&void 0!==s[o]?this.resolveRef(i,!0,s[o]):this.scouts[this.scouts.length]=new t(this,o,e.contextStack,i)},J.prototype={init:function(){this.keypath=e(this.str,this.args),this.createEvaluator(),this.mustache.resolve(this.keypath)},teardown:function(){for(;this.scouts.length;)this.scouts.pop().teardown()},resolveRef:function(t,e,n){this.args[t]=[e,n],--this.unresolved||this.init()},createEvaluator:function(){this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():this.root._evaluators[this.keypath]=new Z(this.root,this.keypath,this.str,this.args,this.mustache.priority)}},t=function(t,e,n,i){var r,o;o=this.root=t.root,r=d(o,e,n),r?t.resolveRef(i,!1,r):(this.ref=e,this.argNum=i,this.resolver=t,this.contextStack=n,o._pendingResolution[o._pendingResolution.length]=this)},t.prototype={resolve:function(t){this.keypath=t,this.resolver.resolveRef(this.argNum,!1,t)},teardown:function(){this.keypath||a(this)}},e=function(t,e){var n;return n=t.replace(/\$\{([0-9]+)\}/g,function(t,n){return e[n][1]}),"("+n.replace(/[\.\[\]]/g,"-")+")"}}(),function(){var t,n;F=function(i,r){var o,s;if(s=t(i,r))return s;if(s=t(e,r))return s;if(he&&(o=he.getElementById(r),o&&"SCRIPT"===o.tagName)){if(!e.parse)throw new Error(be);e.partials[r]=e.parse(o.innerHTML)}return s=e.partials[r],s?n(s):(i.debug&&console&&console.warn&&console.warn('Could not find descriptor for partial "'+r+'"'),[])},t=function(t,i){if(t.partials[i]){if("string"==typeof t.partials[i]){if(!e.parse)throw new Error(be);t.partials[i]=e.parse(t.partials[i])}return n(t.partials[i])}},n=function(t){return 1===t.length&&"string"==typeof t[0]?t[0]:t}}(),K=function(t,e){var n,i,r,o,s,a;if(t.owner=e.owner,o=t.owner.parentFragment,t.root=e.root,t.parentNode=e.parentNode,t.contextStack=e.contextStack||[],t.owner.type===Ne&&(t.index=e.index),o&&(s=o.indexRefs)){t.indexRefs=M();for(a in s)t.indexRefs[a]=s[a]}for(t.priority=o?o.priority+1:0,e.indexRef&&(t.indexRefs||(t.indexRefs={}),t.indexRefs[e.indexRef]=e.index),t.items=[],r={parentFragment:t},n=e.descriptor?e.descriptor.length:0,i=0;n>i;i+=1)r.descriptor=e.descriptor[i],r.index=i,t.items[t.items.length]=t.createItem(r)},H=function(t,e){var n,i,r;r=t.parentFragment=e.parentFragment,t.root=r.root,t.contextStack=r.contextStack,t.descriptor=e.descriptor,t.index=e.index||0,t.priority=r.priority,r.parentNode&&(t.parentNode=r.parentNode),t.type=e.descriptor.t,e.descriptor.r&&(r.indexRefs&&void 0!==r.indexRefs[e.descriptor.r]?(i=r.indexRefs[e.descriptor.r],t.indexRef=e.descriptor.r,t.value=i,t.render(t.value)):(n=d(t.root,e.descriptor.r,t.contextStack),n?t.resolve(n):(t.ref=e.descriptor.r,t.root._pendingResolution[t.root._pendingResolution.length]=t,t.descriptor.n&&t.render(!1)))),e.descriptor.x&&(t.expressionResolver=new J(t))},W=function(){var t;t=this.root.get(this.keypath,!0),w(t,this.value)||(this.render(t),this.value=t)},X=function(t){this.keypath=t,u(this),this.update(),this.expressionResolver&&(this.expressionResolver=null)},function(){var t,e,n;Q=function(i,r){var o;return o={descriptor:i.descriptor.f,root:i.root,parentNode:i.parentNode,owner:i},i.descriptor.n?void n(i,r,!0,o):void(y(r)?t(i,r,o):x(r)?e(i,o):n(i,r,!1,o))},t=function(t,e,n){var i,r;if(e.length<t.length)for(r=t.fragments.splice(e.length,t.length-e.length);r.length;)r.pop().teardown(!0);else if(e.length>t.length)for(i=t.length;i<e.length;i+=1)n.contextStack=t.contextStack.concat(t.keypath+"."+i),n.index=i,t.descriptor.i&&(n.indexRef=t.descriptor.i),t.fragments[i]=t.createFragment(n);t.length=e.length},e=function(t,e){t.length||(e.contextStack=t.contextStack.concat(t.keypath),e.index=0,t.fragments[0]=t.createFragment(e),t.length=1)},n=function(t,e,n,i){var r,o,s;if(o=y(e)&&0===e.length,r=n?o||!e:e&&!o){if(t.length||(i.contextStack=t.contextStack,i.index=0,t.fragments[0]=t.createFragment(i),t.length=1),t.length>1)for(s=t.fragments.splice(1);s.length;)s.pop().teardown(!0)}else t.length&&(t.teardownFragments(!0),t.length=0)}}(),se=function(t){var e,n,i,r;for(e=0;e<t.length;e+=1)n=t[e],i=t[e-1],r=t[e+1],(n.mustacheType===Te||n.mustacheType===Ce)&&(t.splice(e,1),i&&r&&i.type===we&&r.type===we&&(i.value+=r.value,t.splice(e,1)),e-=1);return t},ae=function(t){var e,n,i;for(i="";t.length;){if(e=t.indexOf("<!--"),n=t.indexOf("-->"),-1===e&&-1===n){i+=t;break}if(-1!==e&&-1===n)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==n&&-1===e||e>n)throw"Illegal HTML - unexpected closing comment sequence ('-->')";i+=t.substr(0,e),t=t.substring(n+3)}return i},le=function(t){var e,n,i,r,o,s;for(o=/^\s*\r?\n/,s=/\r?\n\s*$/,e=2;e<t.length;e+=1)n=t[e],i=t[e-1],r=t[e-2],n.type===we&&i.type===Re&&r.type===we&&s.test(r.value)&&o.test(n.value)&&(i.mustacheType!==_e&&i.mustacheType!==ke&&(r.value=r.value.replace(s,"\n")),n.value=n.value.replace(o,""),""===n.value&&t.splice(e--,1));return t},function(t){var e=function(t,e,n){var i;if("string"==typeof e&&b(n)){if(i=t.get(e),void 0===i&&(i=0),b(i))t.set(e,i+n);else if(t.debug)throw new Error("Cannot add to a non-numeric value")}else if(t.debug)throw new Error("Bad arguments")};t.add=function(t,n){e(this,t,void 0===n?1:n)},t.subtract=function(t,n){e(this,t,void 0===n?-1:-n)},t.toggle=function(t){var e;if("string"==typeof t)e=this.get(t),this.set(t,!e);else if(this.debug)throw new Error("Bad arguments")}}(ce),function(t){var n,i;t.animate=function(t,e,i){var r,o,s;if("object"==typeof t){i=e||{},s=[];for(r in t)ge.call(t,r)&&(s[s.length]=n(this,r,t[r],i));return{stop:function(){for(;s.length;)s.pop().stop()}}}return i=i||{},o=n(this,t,e,i),{stop:function(){o.stop()}}},i={stop:ve},n=function(t,n,r,o){var s,a,l,u,h;for(h=t.get(n),u=te.animations.length;u--;)te.animations[u].keypath===n&&te.animations[u].stop();return w(h,r)?(o.complete&&o.complete(1,o.to),i):(o.easing&&(s="function"==typeof o.easing?o.easing:t.easing&&t.easing[o.easing]?t.easing[o.easing]:e.easing[o.easing],"function"!=typeof s&&(s=null)),a=void 0===o.duration?400:o.duration,l=new Y({keypath:n,from:h,to:r,root:t,duration:a,easing:s,step:o.step,complete:o.complete}),te.push(l),t._animations[t._animations.length]=l,l)}}(ce),ce.bind=function(t){var e=this._bound;-1===e.indexOf(t)&&(e[e.length]=t,t.init(this))},ce.cancelFullscreen=function(){e.cancelFullscreen(this.el)},ce.find=function(t){return this.el?this.el.querySelector(t):null},ce.findAll=function(t){return this.el?this.el.querySelectorAll(t):[]},ce.fire=function(t){var e,n,i,r=this._subs[t];if(r)for(e=Array.prototype.slice.call(arguments,1),n=0,i=r.length;i>n;n+=1)r[n].apply(this,e)},ce.get=function(t){var e,n,i,r,o,s,a,l,u;if(!t)return this.data;if(e=this._cache,y(t)){if(!t.length)return this.data;i=t.slice(),r=i.join("."),u=!0}else{if(ge.call(e,t)&&e[t]!==Ge)return e[t];i=v(t),r=i.join(".")}return!ge.call(e,r)||e[r]===Ge||void 0===e[r]&&u?this._evaluators[r]?(l=this._evaluators[r].value,e[r]=l,l):(o=i.pop(),s=i.join("."),a=i.length?this.get(i):this.data,null!==a&&"object"==typeof a&&a!==Ge?((n=this._cacheMap[s])?-1===n.indexOf(r)&&(n[n.length]=r):this._cacheMap[s]=[r],l=a[o],this.modifyArrays&&("("===r.charAt(0)||!y(l)||l._ractive&&l._ractive.setting||ee(l,r,this)),e[r]=l,l):void 0):e[r]},l=function(t,e){var n,i;if(t.modifyArrays&&"("!==e.charAt(0)&&(n=t._cache[e],y(n)&&!n._ractive.setting&&ne(n,e,t)),t._cache[e]=Ge,i=t._cacheMap[e])for(;i.length;)l(t,i.pop())},c=function(t,e,n){var i;for(i=0;i<t._deps.length;i+=1)f(t,e,i,n)},f=function(t,e,n,i){var r,o,s,a;if(r=t._deps[n]){if(o=r[e])for(s=o.length;s--;)o[s].update();if(!i&&(a=t._depsMap[e]))for(s=a.length;s--;)f(t,a[s],n)}},p=function(t,e,n){var i,r,o;for(o=e.length,i=0;i<t._deps.length;i+=1)if(t._deps[i])for(r=o;r--;)f(t,e[r],i,n)},g=function(t){for(var e,n;t._defEvals.length;)e=t._defEvals.pop(),e.update().deferred=!1;for(;t._defAttrs.length;)n=t._defAttrs.pop(),n.update().deferred=!1;for(;t._defSelectValues.length;)n=t._defSelectValues.pop(),n.parentNode.value=n.value,n.value=n.parentNode.value},u=function(t){var e,n,i,r,o,s,a,l;for(s=t.root,a=t.keypath,l=t.priority,e=s._deps[l]||(s._deps[l]={}),n=e[a]||(e[a]=[]),n[n.length]=t,i=v(a);i.length;)i.pop(),r=i.join("."),o=s._depsMap[r]||(s._depsMap[r]=[]),void 0===o[a]&&(o[a]=0,o[o.length]=a),o[a]+=1,a=r},G=function(t,e){var n,i;n=e.el?_(e.el):t.el,n&&!e.append&&(n.innerHTML=""),t._transitionManager=i=S(t,e.complete),t.fragment=new L({descriptor:t.template,root:t,owner:t,parentNode:n}),g(t),n&&n.appendChild(t.fragment.docFrag),t._transitionManager=null,i.ready()},d=function(t,e,n){var i,r,o,s,a,l;if("."===e)return n[n.length-1];if("."===e.charAt(0))return n[n.length-1]+e;for(i=v(e),r=i.pop(),n=n.concat();n.length;)if(o=n.pop(),s=v(o),a=t.get(s.concat(i)),"object"==typeof a&&null!==a&&ge.call(a,r)){l=o+"."+e;break}return l||void 0===t.get(e)||(l=e),l},a=function(t){if(t.keypath)h(t);else{var e=t.root._pendingResolution.indexOf(t);-1!==e&&t.root._pendingResolution.splice(e,1)}},h=function(t){var e,n,i,r,o,s,a;for(o=t.root,s=t.keypath,a=t.priority,e=o._deps[a][s],e.splice(e.indexOf(t),1),n=v(s);n.length;)n.pop(),i=n.join("."),r=o._depsMap[i],r[s]-=1,r[s]||(r.splice(r.indexOf(s),1),r[s]=void 0),s=i},ce.link=function(t){var e=this;return function(n){e.set(t,n)}},function(t){var e,n;t.observe=function(t,n,i){var r,o=[];if("object"==typeof t){i=n;for(r in t)ge.call(t,r)&&(n=t[r],o[o.length]=e(this,r,n,i));return{cancel:function(){for(;o.length;)o.pop().cancel()}}}return e(this,t,n,i)},e=function(t,e,i,r){var o;return o=new n(t,e,i,r),r&&r.init===!1||o.update(!0),u(o),{cancel:function(){h(o)}}},n=function(t,e,n,i){this.root=t,this.keypath=e,this.callback=n,this.priority=0,this.context=i&&i.context?i.context:t},n.prototype={update:function(t){var e;if(e=this.root.get(this.keypath,!0),!w(e,this.value)||t){try{this.callback.call(this.context,e,this.value)}catch(n){if(this.root.debug)throw n}this.value=e}}}}(ce),ce.off=function(t,e){var n,i;e||(t?this._subs[t]=[]:this._subs={}),n=this._subs[t],n&&(i=n.indexOf(e),-1!==i&&n.splice(i,1))},ce.on=function(t,e){var n,i,r=this;if("object"==typeof t){n=[];for(i in t)ge.call(t,i)&&(n[n.length]=this.on(i,t[i]));return{cancel:function(){for(;n.length;)n.pop().cancel()}}}return this._subs[t]?this._subs[t].push(e):this._subs[t]=[e],{cancel:function(){r.off(t,e)}}},ce.renderHTML=function(){return this.fragment.toString()},ce.requestFullscreen=function(){e.requestFullscreen(this.el)},function(t){var e,n;t.set=function(t,i,r){var o,s,a,l,u,h,c;if(s=[""],o=[],x(t)&&(r=i),h=this._transitionManager,this._transitionManager=c=S(this,r),x(t))for(a in t)ge.call(t,a)&&(u=v(a),l=u.join("."),i=t[a],e(this,l,u,i,o,s));else u=v(t),l=u.join("."),e(this,l,u,i,o,s);return o.length&&this._pendingResolution.length&&n(this),s.length&&p(this,s,!0),o.length&&p(this,o),g(this),this._transitionManager=h,c.ready(),this.setting||(this.setting=!0,"object"==typeof t?this.fire("set",t):this.fire("set",t,i),this.setting=!1),this},e=function(t,e,n,i,r,o){var s,a,u,h,c,p;if(h=n.slice(),c=[],s=t.get(e),s!==i){for(u=t.data;n.length>1;)a=c[c.length]=n.shift(),u[a]||(p||(p=c.join(".")),u[a]=/^\s*[0-9]+\s*$/.test(n[0])?[]:{}),u=u[a];a=n[0],u[a]=i}else if("object"!=typeof i)return;for(l(t,p||e),r[r.length]=e;h.length>1;)h.pop(),e=h.join("."),-1===o.indexOf(e)&&(o[o.length]=e)},n=function(t){var e,n,i;for(e=t._pendingResolution.length;e--;)n=t._pendingResolution.splice(e,1)[0],(i=d(t,n.ref,n.contextStack))?n.resolve(i):t._pendingResolution[t._pendingResolution.length]=n}}(ce),ce.teardown=function(t){var e,n,i;for(this.fire("teardown"),i=this._transitionManager,this._transitionManager=n=S(this,t),this.fragment.teardown(!0);this._animations[0];)this._animations[0].stop();for(e in this._cache)l(this,e);for(;this._bound.length;)this.unbind(this._bound.pop());this._transitionManager=i,n.ready()},ce.toggleFullscreen=function(){e.isFullscreen(this.el)?this.cancelFullscreen():this.requestFullscreen()},ce.unbind=function(t){var e,n=this._bound;e=n.indexOf(t),-1!==e&&(n.splice(e,1),t.teardown(this))},ce.update=function(t,e){var n,i;return"function"==typeof t&&(e=t),i=this._transitionManager,this._transitionManager=n=S(this,e),l(this,t||""),c(this,t||""),g(this),this._transitionManager=i,n.ready(),"string"==typeof t?this.fire("update",t):this.fire("update"),this},pe.backbone=function(t,e){var n,i,r,o,s,a,l;return e&&(e+=".",s=new RegExp("^"+e.replace(/\./g,"\\.")),a=e.length),{init:function(u){e?(l=function(t){var n,i;i={};for(n in t)ge.call(t,n)&&(i[e+n]=t[n]);return i},o=function(t){n||(i=!0,u.set(l(t.changed)),i=!1)},r=function(e,r){i||s.test(e)&&(n=!0,t.set(e.substring(a),r),n=!1)}):(o=function(t){n||(i=!0,u.set(t.changed),i=!1)},r=function(e,r){i||(n=!0,t.set(e,r),n=!1)}),t.on("change",o),u.on("set",r),u.set(e?l(t.attributes):t.attributes)},teardown:function(e){t.off("change",o),e.off("set",r)}}},pe.statesman=function(t,e){var n,i,r,o,s,a,l;return e&&(e+=".",s=new RegExp("^"+e.replace(/\./g,"\\.")),a=e.length,l=function(t){var n,i;if(t){i={};for(n in t)ge.call(t,n)&&(i[e+n]=t[n]);return i}}),{init:function(u){var h;e?(o=function(t){n||(i=!0,t=l(t),u.set(t),i=!1)},u.twoway&&(r=function(e,r){i||s.test(e)&&(n=!0,t.set(e.substring(a),r),n=!1)})):(o=function(t){n||(i=!0,u.set(t),i=!1)},u.twoway&&(r=function(e,r){i||(n=!0,t.set(e,r),n=!1)})),t.on("change",o),u.twoway&&u.on("set",r),h=e?l(t.get()):t.get(),h&&u.set(e?l(t.get()):t.get())},teardown:function(e){t.off("change",o),e.off("set",r)}}},n={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},fe.hover=function(t,e){var n,i;return n=function(n){e({node:t,original:n,hover:!0})},i=function(n){e({node:t,original:n,hover:!1})},t.addEventListener("mouseover",n),t.addEventListener("mouseout",i),{teardown:function(){t.removeEventListener("mouseover",n),t.removeEventListener("mouseout",i)}}},function(){var t=function(t){return function(e,n){var i;return e.addEventListener("keydown",i=function(i){var r=i.which||i.keyCode;r===t&&(i.preventDefault(),n({node:e,original:i}))}),{teardown:function(){e.removeEventListener(i)}}}};fe.enter=t(13),fe.tab=t(9),fe.escape=t(27),fe.space=t(32)}(),fe.tap=function(t,e){var n,i,r,o;return r=5,o=400,n=function(t){var n,i,s,a,l,u;1==t.which&&(i=t.clientX,s=t.clientY,n=this,a=function(t){e({node:n,original:t}),u()},l=function(t){(Math.abs(t.clientX-i)>=r||Math.abs(t.clientY-s)>=r)&&u()},u=function(){he.removeEventListener("mousemove",l),he.removeEventListener("click",a)},he.addEventListener("mousemove",l),he.addEventListener("click",a),setTimeout(u,o))},t.addEventListener("mousedown",n),i=function(t){var n,i,s,a,l,u,h,c;1===t.touches.length&&(a=t.touches[0],i=a.clientX,s=a.clientY,n=this,l=a.identifier,h=function(t){var i;i=t.changedTouches[0],i.identifier!==l&&c(),t.preventDefault(),e({node:n,original:t}),c()},u=function(t){var e;(1!==t.touches.length||t.touches[0].identifier!==l)&&c(),e=t.touches[0],(Math.abs(e.clientX-i)>=r||Math.abs(e.clientY-s)>=r)&&c()},c=function(){window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h),window.removeEventListener("touchcancel",c)},window.addEventListener("touchmove",u),window.addEventListener("touchend",h),window.addEventListener("touchcancel",c),setTimeout(c,o))},t.addEventListener("touchstart",i),{teardown:function(){t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",i)}}},function(){var t,n,r,o,s,a,l,u,h,c,p,f,d;i=function(t){var n,i;return n=this,i=function(t){c(this,i,t||{})},i.prototype=R(n.prototype),n!==e&&o(i,n),a(i,t),l(i),u(i,t),h(i),i.extend=n.extend,i},p=["data","partials","transitions","eventDefinitions"],f=["el","template","complete","modifyArrays","twoway","lazy","append","preserveWhitespace","sanitize","noIntro","transitionsEnabled"],d=p.concat(f),o=function(t,e){p.forEach(function(i){e[i]&&(t[i]=n(e[i]))}),f.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])})},s=function(t,e){return/_super/.test(t)?function(){var n,i=this._super;return this._super=e,n=t.apply(this,arguments),this._super=i,n}:t},a=function(t,e){var n,i;p.forEach(function(n){var i=e[n];i&&(t[n]?r(t[n],i):t[n]=i)}),f.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])});for(n in e)ge.call(e,n)&&!ge.call(t.prototype,n)&&-1===d.indexOf(n)&&(i=e[n],t.prototype[n]="function"==typeof i&&"function"==typeof t.prototype[n]?s(i,t.prototype[n]):i)},l=function(t){var n;if("string"==typeof t.template){if(!e.parse)throw new Error(be);if("#"===t.template.charAt(0)&&he){if(n=he.getElementById(t.template.substring(1)),!n||"SCRIPT"!==n.tagName)throw new Error("Could not find template element ("+t.template+")");t.template=e.parse(n.innerHTML,t)}else t.template=e.parse(t.template,t)}},u=function(t,e){x(t.template)&&(t.partials||(t.partials={}),r(t.partials,t.template.partials),e.partials&&r(t.partials,e.partials),t.template=t.template.template)},h=function(t){var n,i;if(t.partials)for(n in t.partials)if(ge.call(t.partials,n)){if("string"==typeof t.partials[n]){if(!e.parse)throw new Error(be);i=e.parse(t.partials[n],t)}else i=t.partials[n];t.partials[n]=i}},c=function(i,r,o){!o.template&&r.template&&(o.template=r.template),p.forEach(function(e){o[e]?t(o[e],r[e]):r[e]&&(o[e]=n(r[e]))}),f.forEach(function(t){void 0===o[t]&&void 0!==r[t]&&(o[t]=r[t])}),i.beforeInit&&i.beforeInit.call(i,o),e.call(i,o),i.init&&i.init.call(i,o)},t=function(t,e){var n;for(n in e)ge.call(e,n)&&!ge.call(t,n)&&(t[n]=e[n])},n=function(t){var e,n={};for(e in t)ge.call(t,e)&&(n[e]=t[e]);return n},r=function(t,e){var n;for(n in e)ge.call(e,n)&&(t[n]=e[n])}}(),o=function(t,n){return b(t)&&b(n)?e.interpolators.number(+t,+n):y(t)&&y(n)?e.interpolators.array(t,n):x(t)&&x(n)?e.interpolators.object(t,n):function(){return n}},s={number:function(t,e){var n=e-t;return n?function(e){return t+e*n}:function(){return t}},array:function(t,n){var i,r,o,s;for(i=[],r=[],s=o=Math.min(t.length,n.length);s--;)r[s]=e.interpolate(t[s],n[s]);for(s=o;s<t.length;s+=1)i[s]=t[s];for(s=o;s<n.length;s+=1)i[s]=n[s];return function(t){for(var e=o;e--;)i[e]=r[e](t);return i}},object:function(t,n){var i,r,o,s,a=[];o={},r={};for(s in t)ge.call(t,s)&&(ge.call(n,s)?(a[a.length]=s,r[s]=e.interpolate(t[s],n[s])):o[s]=t[s]);for(s in n)ge.call(n,s)&&!ge.call(t,s)&&(o[s]=n[s]);return i=a.length,function(t){for(var e,n=i;n--;)e=a[n],o[e]=r[e](t);return o}}};var nn=M();C(nn,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:{}},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:{}},eventDefinitions:{enumerable:!0,value:{}},noIntro:{enumerable:!0,value:!1},transitionsEnabled:{enumerable:!0,value:!0}}),e=function(t){var n,i,r,o,s,a;for(n in nn)ge.call(t,n)||(t[n]="object"==typeof nn[n]?{}:nn[n]);if(C(this,{_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"==t?e:3&e|8,n.toString(16)})},_subs:{value:M()},_cache:{value:{}},_cacheMap:{value:M()},_deps:{value:[]},_depsMap:{value:M()},_pendingResolution:{value:[]},_defAttrs:{value:[]},_defEvals:{value:[]},_defSelectValues:{value:[]},_proxies:{value:M()},_customProxies:{value:M()},_evaluators:{value:M()},_bound:{value:[]},_transitionManager:{value:null,writable:!0},_animations:{value:[]},nodes:{value:{}}}),this.modifyArrays=t.modifyArrays,this.twoway=t.twoway,this.lazy=t.lazy,this.debug=t.debug,t.el&&(this.el=_(t.el),!this.el&&this.debug))throw new Error("Could not find container element");if(this.data=t.data||{},this.partials={},this.transitions=t.transitions,this.eventDefinitions=t.eventDefinitions,t.bindings)if(y(t.bindings))for(r=0;r<t.bindings.length;r+=1)this.bind(t.bindings[r]);else this.bind(t.bindings);if(o=t.template,"string"==typeof o){if(!e.parse)throw new Error(be);if("#"===o.charAt(0)&&he){if(s=he.getElementById(o.substring(1)),!s)throw new Error("Could not find template element ("+o+")");a=e.parse(s.innerHTML,t)}else a=e.parse(o,t)}else a=o;if(x(a)&&(this.partials=a.partials,a=a.template),a&&1===a.length&&"string"==typeof a[0]&&(a=a[0]),this.template=a,t.partials)for(n in t.partials)if(ge.call(t.partials,n)){if(i=t.partials[n],"string"==typeof i){if(!e.parse)throw new Error(be);i=e.parse(i,t)}this.partials[n]=i}for(n in this.partials)ge.call(this.partials,n)&&1===this.partials[n].length&&"string"==typeof this.partials[n][0]&&(this.partials[n]=this.partials[n][0]);this.transitionsEnabled=t.noIntro?!1:t.transitionsEnabled,G(this,{el:this.el,append:t.append,complete:t.complete}),this.transitionsEnabled=t.transitionsEnabled},function(){var t,e,i,r;he&&(t=function(t,e){var n,i={};for(n=e.length;n--;)i[e[n]]=t[e[n]];return i},e=function(t,e,n,i){for(var r,o=e.length;o--;)r=e[o],t.style[r]=n&&n[r]?"function"==typeof n[r]?n[r](i):n[r]:0},i=function(t,e){var n;if(!e)return t;for(n in e)ge.call(e,n)&&(t[n]=e[n]);return t},Ke&&(r=function(r,o,s,a){return"string"==typeof r&&(r=[r]),function(l,u,h,c,p){var f,d,g,v,m,y,x,b,w,_,k;h=rn(h),y=h.duration||o.duration,n=en(h.easing||o.easing),x=(h.delay||o.delay||0)+(h.stagger||o.stagger||0)*c.i,b=p?s:a,w=p?a:s,d=window.getComputedStyle(l),m=l.getAttribute("style"),p?(_=l.style.position,k=l.style.visibility,l.style.position="absolute",l.style.visibility="hidden",setTimeout(function(){g=t(d,r),b=s,w=i(g,a),l.style.position=_,l.style.visibility=k,e(l,r,b,h),setTimeout(v,0)},x)):setTimeout(function(){g=t(d,r),b=i(g,a),w=s,e(l,r,b,h),setTimeout(v,0)},x),v=function(){l.style[Qe+"Duration"]=y/1e3+"s",l.style[Qe+"Properties"]=r.map(en).join(","),l.style[Qe+"TimingFunction"]=n,f=function(){l.removeEventListener(tn,f),p&&l.setAttribute("style",m||""),u()},l.addEventListener(tn,f),e(l,r,w,h)}}},de.slide=r(["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","overflowY"],{duration:400,easing:"easeInOut"},{overflowY:"hidden"},{overflowY:"hidden"}),de.fade=r("opacity",{duration:300,easing:"linear"}),de.fly=r(["opacity","left","position"],{duration:400,easing:"easeOut"},{position:"relative",left:"-500px"},{position:"relative",left:0})))}();var rn=function(t){return"fast"===t?{duration:200}:"slow"===t?{duration:600}:b(t)?{duration:+t}:t||{}};!function(t){var e,n,i;he&&(n=function(t,e,r){var o,s;return 1===t.nodeType&&(t.style.display=t._display),3===t.nodeType?void i(t,e,r):(o=Array.prototype.slice.call(t.childNodes),s=function(){return o.length?void n(o.shift(),s,r):(1===t.nodeType&&t.setAttribute("style",t._style||""),void e())},void s())},i=function(t,e,n){var i,r,o,s;return i=t._hiddenData,(r=i.length)?(s=0,void(o=setInterval(function(){var n,a,l,u,h;n=i.substr(0,s),a=i.substring(s),l=/^\w+/.exec(a),u=l?l[0].length:0,h=new Array(u+1).join(" "),t.data=n+h,s===r&&(clearInterval(o),delete t._hiddenData,e()),s+=1},n))):void e()},e=function(t,e,i){var r,o,s,a;i=rn(i),r=i.interval||(i.speed?1e3/i.speed:i.duration?t.textContent.length/i.duration:4),o=t.getAttribute("style"),s=window.getComputedStyle(t),t.style.visibility="hidden",setTimeout(function(){var l,u,h;u=s.width,l=s.height,h=s.visibility,a(t),setTimeout(function(){t.style.width=u,t.style.height=l,t.style.visibility="visible",n(t,function(){t.setAttribute("style",o||""),e()},r)},i.delay||0)}),a=function(t){var e,n;if(1===t.nodeType&&(t._style=t.getAttribute("style"),t._display=window.getComputedStyle(t).display,t.style.display="none"),3===t.nodeType)return t._hiddenData=""+t.data,void(t.data="");for(e=Array.prototype.slice.call(t.childNodes),n=e.length;n--;)a(e[n])}},t.typewriter=e)}(de),function(t){var e,n,i;if(he){if(t.fullscreenEnabled=he.fullscreenEnabled||he.mozFullScreenEnabled||he.webkitFullscreenEnabled,!t.fullscreenEnabled)return void(t.requestFullscreen=t.cancelFullscreen=ve);He.requestFullscreen?e="requestFullscreen":He.mozRequestFullScreen?e="mozRequestFullScreen":He.webkitRequestFullscreen&&(e="webkitRequestFullscreen"),t.requestFullscreen=function(t){t[e]&&t[e]()},he.cancelFullscreen?n="cancelFullscreen":he.mozCancelFullScreen?n="mozCancelFullScreen":he.webkitCancelFullScreen&&(n="webkitCancelFullScreen"),t.cancelFullscreen=function(){he[n]()},void 0!==he.fullscreenElement?i="fullscreenElement":void 0!==he.mozFullScreenElement?i="mozFullScreenElement":void 0!==he.webkitFullscreenElement&&(i="webkitFullscreenElement"),t.isFullscreen=function(t){return t===he[i]}}}(e),Y=function(t){var n;this.startTime=Date.now();for(n in t)ge.call(t,n)&&(this[n]=t[n]);this.interpolator=e.interpolate(this.from,this.to),this.running=!0},Y.prototype={tick:function(){var t,e,n,i,r;return this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(this.root.set(this.keypath,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),r=this.root._animations.indexOf(this),-1===r&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,n=this.interpolator(e),this.root.set(this.keypath,n),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(t,1)}},te={animations:[],tick:function(){var t,e;for(t=0;t<this.animations.length;t+=1)e=this.animations[t],e.tick()||this.animations.splice(t--,1);this.animations.length?A(this.boundTick):this.running=!1},boundTick:function(){te.tick()},push:function(t){this.animations[this.animations.length]=t,this.running||(this.running=!0,this.tick())}},function(t,e,n){var i,r;if(n.requestAnimationFrame)return void(A=n.requestAnimationFrame);for(i=0;i<t.length&&!A;++i)A=n[t[i]+"RequestAnimationFrame"];A||(r=n.setTimeout,A=function(t){var n,i,o;return n=Date.now(),i=Math.max(0,16-(n-e)),o=r(function(){t(n+i)},i),e=n+i,o})}(["ms","moz","webkit","o"],0,t),function(){var t,e,n,i,r,o;ee=function(t,n,i){var r,o,s;t._ractive?(r=t._ractive.roots,o=t._ractive.keypathsByGuid,o[i._guid]||(r[r.length]=i,o[i._guid]=[]),s=o[i._guid],-1===s.indexOf(n)&&(s[s.length]=n)):(T(t,"_ractive",{value:{roots:[i],keypathsByGuid:{}},configurable:!0}),t._ractive.keypathsByGuid[i._guid]=[n],e(t))},ne=function(t,e,i){var r,o,s,a;if(!t._ractive)throw new Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");if(r=t._ractive.roots,o=t._ractive.keypathsByGuid,!o[i._guid])throw new Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");if(s=o[i._guid],a=s.indexOf(e),-1===a)throw new Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");
s.splice(a,1),s.length||(r.splice(r.indexOf(i),1),o[i._guid]=null),r.length||n(t)},t=function(t,e,n){var i,r,o,s,a,u;u=t._ractive.keypathsByGuid,i=function(t){for(var e=t.length;e--;)r(t[e])},r=function(t){var e,n=t._transitionManager;t._transitionManager=e=S(t,ve),o(t,u[t._guid]),t._transitionManager=n,e.ready()},o=function(t,e){for(var n=e.length;n--;)s(t,e[n])},s=function(i,r){var o,s,u,h,f,d,m;if("sort"===e||"reverse"===e)return void i.set(r,t);for(l(i,r),f=[],d=[],m=0;m<i._deps.length;m+=1)if(o=i._deps[m],o&&(s=o[r])){for(a(i,r,s,f,d),g(i);f.length;)f.pop().smartUpdate(e,n);for(;d.length;)d.pop().update()}for(g(i),h=[],u=v(r);u.length;)u.pop(),h[h.length]=u.join(".");p(i,h,!0),c(i,r+".length",!0)},a=function(t,e,n,i,r){var o,s;for(o=n.length;o--;)s=n[o],s.type===De?s.update():s.keypath===e&&s.type===Ne?i[i.length]=s:r[r.length]=s},i(t._ractive.roots)},i=[],o=["pop","push","reverse","shift","sort","splice","unshift"],o.forEach(function(e){var n=function(){var n=Array.prototype[e].apply(this,arguments);return this._ractive.setting=!0,t(this,e,arguments),this._ractive.setting=!1,n};T(i,e,{value:n})}),r={},r.__proto__?(e=function(t){t.__proto__=i},n=function(t){delete t._ractive,t.__proto__=Array.prototype}):(e=function(t){var e,n;for(e=o.length;e--;)n=o[e],T(t,n,{value:i[n],configurable:!0})},n=function(t){var e;for(e=o.length;e--;)delete t[o[e]];delete t._ractive})}(),function(){var t,e,n,i,r,o;t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},j=function(t){return e(this,t.name),null===t.value||"string"==typeof t.value?void n(this,t):(this.root=t.root,this.element=t.element,this.parentNode=t.parentNode,this.lcName=this.name.toLowerCase(),this.parentFragment=this.element.parentFragment,this.fragment=new P({descriptor:t.value,root:this.root,owner:this,contextStack:t.contextStack}),void(this.parentNode&&(i(this,t),this.selfUpdating=r(this),this.isBindable=o(this),this.ready=!0)))},j.prototype={bind:function(t){var e,n,i,r,o=this,s=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==_e||!this.fragment.items[0].keypath&&!this.fragment.items[0].ref)return this.root.debug&&console&&console.warn&&console.warn("Not a valid two-way data binding candidate - must be a single interpolator:",this.fragment.items),!1;if(this.interpolator=this.fragment.items[0],this.keypath=this.interpolator.keypath||this.interpolator.descriptor.r,"SELECT"===s.tagName&&"value"===this.propertyName){for(e=s.getElementsByTagName("option"),r=e.length,i=0;r>i;i+=1)if(n=e[i],n.hasAttribute("selected")){this.root.set(this.keypath,n.value);break}this.isMultipleSelect=s.multiple}if("checkbox"===s.type||"radio"===s.type?"name"===this.propertyName?(s.name="{{"+this.keypath+"}}",this.updateViewModel=function(){s.checked&&o.root.set(o.keypath,s.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){o.root.set(o.keypath,s.checked)}):this.updateViewModel=this.isMultipleSelect?function(){var t,e,n,i,a;for(window.attr=o,i=o.value||[],t=[],e=s.querySelectorAll("option:checked"),r=e.length,n=0;r>n;n+=1)t[t.length]=e[n].value;for(a=r!==i.length,n=t.length;n--;)t[n]!==i[n]&&(a=!0);(a=!0)&&(o.value=t,o.root.set(o.keypath,t))}:function(){var t;t=s.value,"0"===t?t=0:""!==t&&(t=+t||t),o.root.set(o.keypath,t)},this.updateViewModel)for(this.twoway=!0,this.boundEvents=["change"],t||(this.boundEvents.push("input"),s.attachEvent&&this.boundEvents.push("keyup")),s.attachEvent&&"checkbox"===s.type&&this.boundEvents.push("click"),i=this.boundEvents.length;i--;)s.addEventListener(this.boundEvents[i],this.updateViewModel)},updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.r,"name"===this.propertyName&&(this.parentNode.name="{{"+this.keypath+"}}")},teardown:function(){var t;if(this.boundEvents)for(t=this.boundEvents.length;t--;)this.parentNode.removeEventListener(this.boundEvents[t],this.updateViewModel);this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._defAttrs[this.root._defAttrs.length]=this,this.deferred=!0)},update:function(){var t,e,n,i;if(!this.ready)return this;if(this.isMultipleSelect){if(t=this.fragment.getValue(),"string"==typeof t&&(t=[t]),y(t))for(n=this.parentNode.querySelectorAll("option"),i=n.length;i--;)n[i].selected=-1!==t.indexOf(n[i].value);return this.value=t,this}if(this.twoway&&(e=this.lcName,t=this.interpolator.value,"name"===e&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type)))return this.parentNode.checked=t===this.parentNode.value?!0:!1,this;if(t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value){if(this.useProperty)return"select"===this.element.descriptor.e&&"value"===this.propertyName?(this.value=t,this.root._defSelectValues.push(this),this):(this.parentNode[this.propertyName]=t,this.value=t,this);if(this.namespace)return this.parentNode.setAttributeNS(this.namespace,this.name,t),this.value=t,this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[t]=this.parentNode),this.parentNode.setAttribute(this.name,t),this.value=t}return this},toString:function(){var t;return null===this.value?this.name:this.fragment?(t=this.fragment.toString(),this.name+"="+JSON.stringify(t)):this.name+"="+JSON.stringify(this.value)}},e=function(t,e){var n,i;if(n=e.indexOf(":"),-1===n||(i=e.substr(0,n),"xmlns"===i))t.name=e;else if(e=e.substring(n+1),t.name=e,t.namespace=We[i],!t.namespace)throw'Unknown namespace ("'+i+'")'},n=function(t,e){e.parentNode&&(t.namespace?e.parentNode.setAttributeNS(t.namespace,e.name,e.value):e.parentNode.setAttribute(e.name,e.value),"id"===e.name.toLowerCase()&&(e.root.nodes[e.value]=e.parentNode)),t.value=e.value},i=function(e,n){var i,r;!e.parentNode||e.namespace||n.parentNode.namespaceURI&&n.parentNode.namespaceURI!==We.html||(i=e.lcName,r=t[i]||i,void 0!==n.parentNode[r]&&(e.propertyName=r),("boolean"==typeof n.parentNode[r]||"value"===r)&&(e.useProperty=!0))},r=function(t){var e,n,i;for(e=t.fragment.items.length;e--;)if(n=t.fragment.items[e],n.type!==we){if(n.type!==_e)return!1;if(i)return!1;i=!0}return!0},o=function(t){var e,n;return t.root.twoway?(e=t.element.descriptor.e.toLowerCase(),n=t.propertyName,!("name"!==n&&"value"!==n&&"checked"!==n||"input"!==e&&"textarea"!==e&&"select"!==e)):!1}}(),O=function(t,e){var n,i,r,o,s,a,l,u,h,c,p,f;if(this.type=Se,n=this.parentFragment=t.parentFragment,i=this.descriptor=t.descriptor,this.root=f=n.root,this.parentNode=n.parentNode,this.index=t.index,this.eventListeners=[],this.customEventListeners=[],this.parentNode){if(i.a&&i.a.xmlns){if(r=i.a.xmlns,"string"!=typeof r)throw new Error("Namespace attribute cannot contain mustaches")}else r="svg"===i.e.toLowerCase()?We.svg:this.parentNode.namespaceURI;this.node=he.createElementNS(r,i.e)}if(i.f&&("string"!=typeof i.f||this.node&&this.node.namespaceURI&&this.node.namespaceURI!==We.html?"style"===i.e&&void 0!==this.node.styleSheet?(this.fragment=new P({descriptor:i.f,root:f,contextStack:n.contextStack,owner:this}),e&&(this.bubble=function(){this.node.styleSheet.cssText=this.fragment.toString()})):(this.fragment=new L({descriptor:i.f,root:f,parentNode:this.node,contextStack:n.contextStack,owner:this}),e&&this.node.appendChild(this.fragment.docFrag)):(this.html=i.f,e&&(this.node.innerHTML=this.html))),e&&i.v)for(o in i.v)if(ge.call(i.v,o))for(s=o.split("-"),a=s.length;a--;)this.addEventProxy(s[a],i.v[o],n.contextStack);this.attributes=[],c=[];for(u in i.a)ge.call(i.a,u)&&(h=i.a[u],l=new j({element:this,name:u,value:void 0===h?null:h,root:f,parentNode:this.node,contextStack:n.contextStack}),this.attributes[this.attributes.length]=l,l.isBindable&&c.push(l),l.isBindable&&"name"===l.propertyName?p=l:l.update());if(e){for(;c.length;)c.pop().bind(this.root.lazy);p&&(p.updateViewModel&&p.updateViewModel(),p.update()),e.appendChild(this.node),i.t1&&E(i.t1,f,this,n.contextStack,!0)}},O.prototype={addEventProxy:function(t,n,i){var r,o,s,a,l,u,h,c=this.root;if(this.node._ractive||T(this.node,"_ractive",{value:{keypath:i.length?i[i.length-1]:"",index:this.parentFragment.indexRefs}}),r="string"==typeof n?n:n.n,h=t+"="+r,n.a?o=n.a:n.d&&(s=!0,o=new P({descriptor:n.d,root:this.root,owner:this,contextStack:i}),this.proxyFrags||(this.proxyFrags=[]),this.proxyFrags[this.proxyFrags.length]=o),void 0!==o){if(this.node._ractive[h])throw new Error("You cannot have two proxy events with the same trigger event ("+h+")");this.node._ractive[h]={dynamic:s,payload:o}}return(a=c.eventDefinitions[t]||e.eventDefinitions[t])?(c._customProxies[h]||(c._customProxies[h]=function(t){var e,n;if(!t.node)throw new Error("Proxy event definitions must fire events with a `node` property");t.keypath=t.node._ractive.keypath,t.context=c.get(t.keypath),t.index=t.node._ractive.index,t.node._ractive[h]&&(e=t.node._ractive[h],n=e.dynamic?e.payload.toJson():e.payload),c.fire(r,t,n)}),u=c._customProxies[h],l=a(this.node,u),void(this.customEventListeners[this.customEventListeners.length]=l)):(void 0!==this.node["on"+t]&&c.debug&&console&&console.warn&&console.warn("Invalid event handler ("+t+")"),c._proxies[h]||(c._proxies[h]=function(t){var e,n,i={node:this,original:t,keypath:this._ractive.keypath,context:c.get(this._ractive.keypath),index:this._ractive.index};this._ractive&&this._ractive[h]&&(e=this._ractive[h],n=e.dynamic?e.payload.toJson():e.payload),c.fire(r,i,n)}),u=c._proxies[h],this.eventListeners[this.eventListeners.length]={n:t,h:u},void this.node.addEventListener(t,u))},teardown:function(t){var e,n=this;for(n.fragment&&n.fragment.teardown(!1);n.attributes.length;)n.attributes.pop().teardown();for(;n.eventListeners.length;)e=n.eventListeners.pop(),n.node.removeEventListener(e.n,e.h);for(;n.customEventListeners.length;)n.customEventListeners.pop().teardown();if(this.proxyFrags)for(;this.proxyFrags.length;)this.proxyFrags.pop().teardown();this.descriptor.t2&&E(this.descriptor.t2,this.root,this,this.parentFragment.contextStack,!1),t&&this.root._transitionManager.detachWhenReady(this.node)},firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:function(){var t,e,n;for(t="<"+this.descriptor.e,n=this.attributes.length,e=0;n>e;e+=1)t+=" "+this.attributes[e].toString();return t+=">",this.html?t+=this.html:this.fragment&&(t+=this.fragment.toString()),t+="</"+this.descriptor.e+">"}},L=function(t){return t.parentNode&&(this.docFrag=he.createDocumentFragment()),"string"==typeof t.descriptor?(this.html=t.descriptor,void(this.docFrag&&(this.nodes=k(t.descriptor,this.docFrag)))):void K(this,t)},L.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new D(t,this.docFrag);switch(t.descriptor.t){case _e:return new q(t,this.docFrag);case Ne:return new U(t,this.docFrag);case ke:return new z(t,this.docFrag);case Se:return new O(t,this.docFrag);case Ae:return new I(t,this.docFrag);default:throw new Error("WTF? not sure what happened here...")}},teardown:function(t){var e;if(t&&this.nodes)for(;this.nodes.length;)e=this.nodes.pop(),e.parentNode.removeChild(e);else if(this.items)for(;this.items.length;)this.items.pop().teardown(t)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():this.owner===this.root?null:this.owner.findNextNode(this)},toString:function(){var t,e,n,i;if(this.html)return this.html;if(t="",!this.items)return t;for(n=this.items.length,e=0;n>e;e+=1)i=this.items[e],t+=i.toString();return t}},q=function(t,e){this.type=_e,e&&(this.node=he.createTextNode(""),e.appendChild(this.node)),H(this,t)},q.prototype={update:W,resolve:X,teardown:function(t){a(this),t&&this.parentNode.removeChild(this.node)},render:function(t){this.node&&(this.node.data=void 0===t?"":t)},firstNode:function(){return this.node},toString:function(){var t=void 0!==this.value?""+this.value:"";return t.replace("<","&lt;").replace(">","&gt;")}},I=function(t,e){var n,i=this.parentFragment=t.parentFragment;this.type=Ae,this.name=t.descriptor.r,n=F(i.root,t.descriptor.r),this.fragment=new L({descriptor:n,root:i.root,parentNode:i.parentNode,contextStack:i.contextStack,owner:this}),e&&e.appendChild(this.fragment.docFrag)},I.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},teardown:function(t){this.fragment.teardown(t)},toString:function(){return this.fragment.toString()}},U=function(t,e){this.type=Ne,this.fragments=[],this.length=0,e&&(this.docFrag=he.createDocumentFragment()),this.initialising=!0,H(this,t),e&&e.appendChild(this.docFrag),this.initialising=!1},U.prototype={update:W,resolve:X,smartUpdate:function(t,e){var n;("push"===t||"unshift"===t||"splice"===t)&&(n={descriptor:this.descriptor.f,root:this.root,parentNode:this.parentNode,owner:this},this.descriptor.i&&(n.indexRef=this.descriptor.i)),this[t]&&this[t](n,e)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(t,e){var n,i,r;for(n=this.length,i=n+e.length,r=n;i>r;r+=1)t.contextStack=this.contextStack.concat(this.keypath+"."+r),t.index=r,this.fragments[r]=this.createFragment(t);this.length+=e.length,this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(t,e){this.splice(t,[0,0].concat(new Array(e.length)))},splice:function(t,e){var n,i,r,o,s,a,l,u,h;if(e.length&&(a=+(e[0]<0?this.length+e[0]:e[0]),i=Math.max(0,e.length-2),r=void 0!==e[1]?e[1]:this.length-a,o=i-r)){if(0>o){for(l=a-o,s=a;l>s;s+=1)this.fragments[s].teardown(!0);this.fragments.splice(a,-o)}else{for(l=a+o,n=this.fragments[a]?this.fragments[a].firstNode():this.parentFragment.findNextNode(this),u=[a,0].concat(new Array(o)),this.fragments.splice.apply(this.fragments,u),s=a;l>s;s+=1)t.contextStack=this.contextStack.concat(this.keypath+"."+s),t.index=s,this.fragments[s]=this.createFragment(t);this.parentNode.insertBefore(this.docFrag,n)}this.length+=o,h=a+i,N(this.root,this,h,this.length,o)}},teardown:function(t){this.teardownFragments(t),a(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(t){for(;this.fragments.length;)this.fragments.shift().teardown(t)},render:function(t){Q(this,t),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(t){var e=new L(t);return this.docFrag&&this.docFrag.appendChild(e.docFrag),e},toString:function(){var t,e,n;for(t="",e=0,n=this.length,e=0;n>e;e+=1)t+=this.fragments[e].toString();return t}},D=function(t,e){this.type=we,this.descriptor=t.descriptor,e&&(this.node=he.createTextNode(t.descriptor),this.parentNode=t.parentFragment.parentNode,e.appendChild(this.node))},D.prototype={teardown:function(t){t&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace("<","&lt;").replace(">","&gt;")}},z=function(t,e){this.type=ke,e&&(this.nodes=[],this.docFrag=he.createDocumentFragment()),this.initialising=!0,H(this,t),e&&e.appendChild(this.docFrag),this.initialising=!1},z.prototype={update:W,resolve:X,teardown:function(t){if(t)for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());a(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(t){for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());return void 0===t?void(this.nodes=[]):(this.nodes=k(t,this.docFrag),void(this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))))},toString:function(){return void 0!==this.value?this.value:""}},P=function(t){K(this,t)},P.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new V(t.descriptor);switch(t.descriptor.t){case _e:return new B(t);case ke:return new B(t);case Ne:return new $(t);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.owner.bubble()},teardown:function(){var t,e;for(t=this.items.length,e=0;t>e;e+=1)this.items[e].teardown()},getValue:function(){var t;return 1===this.items.length&&this.items[0].type===_e&&(t=this.items[0].value,void 0!==t)?t:this.toString()},toString:function(){return this.items.join("")},toJson:function(){var t,e;t=this.toString();try{e=JSON.parse(t)}catch(n){e=t}return e}},B=function(t){this.type=_e,H(this,t)},B.prototype={update:W,resolve:X,render:function(t){this.value=t,this.parentFragment.bubble()},teardown:function(){a(this)},toString:function(){return void 0===this.value?"":this.value}},$=function(t){this.type=Ne,this.fragments=[],this.length=0,H(this,t)},$.prototype={update:W,resolve:X,teardown:function(){this.teardownFragments(),a(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(t){Q(this,t),this.parentFragment.bubble()},createFragment:function(t){return new P(t)},toString:function(){return this.fragments.join("")}},V=function(t){this.type=we,this.text=t},V.prototype={toString:function(){return this.text},teardown:function(){}},_=function(t){var e;return"undefined"!=typeof window&&he&&t?t.nodeType?t:"string"==typeof t&&(e=he.getElementById(t),!e&&he.querySelector&&(e=he.querySelector(t)),e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null},m=Object.prototype.toString,y=function(t){return"[object Array]"===m.call(t)},w=function(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e},b=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},x=function(t){return"object"==typeof t&&"[object Object]"===m.call(t)},S=function(t,e){var n,i,r,o;return i=[],r=function(){var t,e;for(t=i.length;t--;)e=i[t],o(e)&&(e.parentNode.removeChild(e),i.splice(t,1))},o=function(t){var e,i;for(e=n.active.length;e--;)if(i=n.active[e],t.contains(i))return!1;return!0},n={active:[],info:{i:0},push:function(t){n.active[n.active.length]=t,n.info.i+=1},pop:function(t){n.active.splice(n.active.indexOf(t),1),r(),!n.active.length&&n._ready&&n.complete()},complete:function(){e&&e.call(t)},ready:function(){r(),n._ready=!0,n.active.length||n.complete()},detachWhenReady:function(t){i[i.length]=t}}},v=function(t){var e,n,i,r,o;if(me[t])return me[t].concat();for(i=[],r=t,n=0;r.length;){if(e=r.indexOf(".",n),-1===e)o=r,r="";else{if("\\"===r.charAt(e-1)&&"\\"!==r.charAt(e-2)){n=e+1;continue}o=r.substr(0,e),n=0}/\[/.test(o)?i=i.concat(o.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):i[i.length]=o,r=r.substring(e+1)}return me[t]=i,i.concat()},function(){var t,e,n,i,r,o,s,a,l,u,h,c;ie=function(t,e,n){var i,o;return i={pos:0,tokens:t||[],next:function(){return i.tokens[i.pos]},options:e},o=new r(i,n)},t=function(t,r){return t.next()?e(t,r)||n(t,r)||i(t,r):null},e=function(t,e){var n=t.next();return n.type===we?(t.pos+=1,new o(n,e)):null},n=function(t,e){var n=t.next();return n.type===Re||n.type===ke?n.mustacheType===Ne||n.mustacheType===Ee?new a(n,t,e):new s(n,t):null},i=function(t,e){var n,i=t.next();return i.type===Me?(n=new l(i,t,e),t.options.sanitize&&t.options.sanitize.elements&&-1!==t.options.sanitize.elements.indexOf(n.lcTag)?null:n):null},h=function(t){var e,n,i,r="";if(!t)return"";for(n=0,i=t.length;i>n;n+=1){if(e=t[n].toString(),e===!1)return!1;r+=e}return r},c=function(t,e){var n,i;return e||(n=h(t),n===!1)?i=t.map(function(t){return t.toJson(e)}):n},r=function(e,n){var i,r;for(i=this.items=[],r=t(e,n);null!==r;)i[i.length]=r,r=t(e,n)},r.prototype={toJson:function(t){var e=c(this.items,t);return e},toString:function(){var t=h(this.items);return t}},function(){var t,e,n;o=function(t,e){this.type=we,this.text=e?t.value:t.value.replace(n," ")},o.prototype={toJson:function(){return this.decoded||(this.decoded=e(this.text))},toString:function(){return this.text}},t={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},e=function(e){var n;return n=e.replace(/&([a-zA-Z]+);/,function(e,n){return t[n]?String.fromCharCode(t[n]):e}),n=n.replace(/&#x([0-9]+);/,function(t,e){return String.fromCharCode(parseInt(e,16))}),n=n.replace(/&#([0-9]+);/,function(t,e){return String.fromCharCode(e)})},n=/\s+/g}(),function(){s=function(t,e){this.type=t.type===ke?ke:t.mustacheType,t.ref&&(this.ref=t.ref),t.expression&&(this.expr=new u(t.expression)),e.pos+=1},s.prototype={toJson:function(){var t;return this.json?this.json:(t={t:this.type},this.ref&&(t.r=this.ref),this.expr&&(t.x=this.expr.toJson()),this.json=t,t)},toString:function(){return!1}},a=function(e,n,i){var r;for(this.ref=e.ref,this.indexRef=e.indexRef,this.inverted=e.mustacheType===Ee,e.expression&&(this.expr=new u(e.expression)),n.pos+=1,this.items=[],r=n.next();r;){if(r.mustacheType===Fe){if(r.ref.trim()===this.ref||this.expr){n.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=t(n,i),r=n.next()}},a.prototype={toJson:function(t){var e;return this.json?this.json:(e={t:Ne},this.ref&&(e.r=this.ref),this.indexRef&&(e.i=this.indexRef),this.inverted&&(e.n=!0),this.expr&&(e.x=this.expr.toJson()),this.items.length&&(e.f=c(this.items,t)),this.json=e,e)},toString:function(){return!1}}}(),function(){var e,n,i,r,o,s,a,u,p,f,d,g,v,m;l=function(n,i,r){var s,l,u,h,c,d,g;if(this.lcTag=n.name.toLowerCase(),this.tag=o[this.lcTag]?o[this.lcTag]:this.lcTag,i.pos+=1,r=r||"pre"===this.lcTag,n.attrs&&(u=v(n.attrs),l=u.attrs,h=u.proxies,i.options.sanitize&&i.options.sanitize.eventAttributes&&(l=l.filter(f)),c=function(t){var e=t.name.toLowerCase();return{name:a[e]?a[e]:e,value:ie(t.value)}},d=function(t){var e,n,i,r;if(r=function(){throw new Error("Illegal proxy event")},t.name&&t.value||r(),e={domEventName:t.name},n=t.value,n[0].type!==we&&r(),i=n[0].value.indexOf(":"),-1===i)n.length>1&&r(),e.name=n[0].value;else{if(e.name=n[0].value.substr(0,i),n[0].value=n[0].value.substring(i+1),n[0].value||n.shift(),1===n.length&&n[0].type===we)try{e.args=JSON.parse(n[0].value)}catch(o){e.args=n[0].value}e.dynamicArgs=ie(n)}return e},l.length&&(this.attributes=l.map(c)),h.length&&(this.proxies=h.map(d)),u.intro&&(this.intro=d(u.intro)),u.outro&&(this.outro=d(u.outro))),n.selfClosing&&(this.selfClosing=!0),-1!==e.indexOf(this.lcTag)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=p[this.lcTag],this.items=[],s=i.next();s&&s.mustacheType!==Fe;){if(s.type===Me){if(s.closing){s.name.toLowerCase()===this.lcTag&&(i.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(s.name.toLowerCase()))break}this.items[this.items.length]=t(i),s=i.next()}r||(g=this.items[0],g&&g.type===we&&(g.text=g.text.replace(ye,""),g.text||this.items.shift()),g=this.items[this.items.length-1],g&&g.type===we&&(g.text=g.text.replace(xe,""),g.text||this.items.pop()))}},l.prototype={toJson:function(t){var e,n,i,r,o,s;if(e={t:Se,e:this.tag},this.attributes&&this.attributes.length)for(e.a={},s=this.attributes.length,o=0;s>o;o+=1){if(n=this.attributes[o].name,e.a[n])throw new Error("You cannot have multiple elements with the same name");void 0===this.attributes[o].value&&(i=null),i=c(this.attributes[o].value.items,t),e.a[n]=i}if(this.items&&this.items.length&&(e.f=c(this.items,t)),this.proxies&&this.proxies.length)for(e.v={},s=this.proxies.length,o=0;s>o;o+=1)r=this.proxies[o],e.v[r.domEventName]=r.args?{n:r.name,a:r.args}:r.dynamicArgs?{n:r.name,d:c(r.dynamicArgs.items,t)}:r.name;return this.intro&&(e.t1=this.intro.args?{n:this.intro.name,a:this.intro.args}:this.intro.dynamicArgs?{n:this.intro.name,d:c(this.intro.dynamicArgs.items,t)}:this.intro.name),this.outro&&(e.t2=this.outro.args?{n:this.outro.name,a:this.outro.args}:this.outro.dynamicArgs?{n:this.outro.name,d:c(this.outro.dynamicArgs.items,t)}:this.outro.name),this.json=e,e},toString:function(){var t,i,r,o,s,a,l,u;if(void 0!==this.str)return this.str;if(-1===n.indexOf(this.tag.toLowerCase()))return this.str=!1;if(this.proxies||this.intro||this.outro)return this.str=!1;if(l=h(this.items),l===!1)return this.str=!1;if(u=-1!==e.indexOf(this.tag.toLowerCase()),t="<"+this.tag,this.attributes)for(i=0,r=this.attributes.length;r>i;i+=1){if(s=this.attributes[i].name.toLowerCase(),-1!==s.indexOf(":"))return this.str=!1;if("id"===s||"intro"===s||"outro"===s)return this.str=!1;if(o=" "+this.attributes[i].name,void 0!==this.attributes[i].value){if(a=this.attributes[i].value.toString(),a===!1)return this.str=!1;""!==a&&(o+="=",o+=/[\s"'=<>`]/.test(a)?'"'+a.replace(/"/g,"&quot;")+'"':a)}t+=o}return this.selfClosing&&!u?(t+="/>",this.str=t):(t+=">",u?this.str=t:(t+=l,t+="</"+this.tag+">",this.str=t))}},e="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),u="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),r="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),s="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef glyphRef gradientTransform gradientTransform gradientUnits gradientUnits kernelMatrix kernelUnitLength kernelUnitLength kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent specularExponent spreadMethod spreadMethod startOffset stdDeviation stitchTiles surfaceScale surfaceScale systemLanguage tableValues targetX targetY textLength textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),i=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},o=i(r),a=i(s),p={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},f=function(t){return"on"!==t.name.substr(0,2)},d=function(t){return"proxy-"!==t.name.substr(0,6)},g=function(t){return"proxy-"===t.name.substr(0,6)?(t.name=t.name.substring(6),!0):!1},v=function(t){var e,n,i,r,o,s;for(i={},e=[],n=[],o=t.length,r=0;o>r;r+=1)if(s=t[r],"intro"===s.name){if(i.intro)throw new Error("An element can only have one intro transition");i.intro=s}else if("outro"===s.name){if(i.outro)throw new Error("An element can only have one outro transition");i.outro=s}else"proxy-"===s.name.substr(0,6)?(s.name=s.name.substring(6),n[n.length]=s):e[e.length]=s;return i.attrs=e,i.proxies=n,i},m=/^([a-zA-Z_$][a-zA-Z_$0-9]*)(?::(.+))?$/}(),function(){var t,e,n,i;u=function(n){this.refs=[],t(n,this.refs),this.str=e(n,this.refs)},u.prototype={toJson:function(){return{r:this.refs,s:this.str}}},t=function(e,n){var i,r;if(e.t===De&&-1===n.indexOf(e.n)&&n.unshift(e.n),r=e.o||e.m)if(x(r))t(r,n);else for(i=r.length;i--;)t(r[i],n);e.x&&t(e.x,n),e.r&&t(e.r,n),e.v&&t(e.v,n)},e=function(t,i){var r=function(t){return e(t,i)};switch(t.t){case qe:case ze:case Le:return t.v;case Oe:return"'"+t.v.replace(/'/g,"\\'")+"'";case je:return"["+(t.m?t.m.map(r).join(","):"")+"]";case Ie:return"{"+(t.m?t.m.map(r).join(","):"")+"}";case Ue:return n(t.k)+":"+e(t.v,i);case $e:return("typeof"===t.s?"typeof ":t.s)+e(t.o,i);case Ze:return e(t.o[0],i)+t.s+e(t.o[1],i);case Ye:return e(t.x,i)+"("+(t.o?t.o.map(r).join(","):"")+")";case Ve:return"("+e(t.x,i)+")";case Be:return e(t.x,i)+e(t.r,i);case Pe:return t.n?"."+t.n:"["+e(t.x,i)+"]";case Je:return e(t.o[0],i)+"?"+e(t.o[1],i)+":"+e(t.o[2],i);
case De:return"${"+i.indexOf(t.n)+"}";default:throw console.log(t),new Error("Could not stringify expression token. This error is unexpected")}},n=function(t){return t.t===Oe?i.test(t.v)?t.v:'"'+t.v.replace(/"/g,'\\"')+'"':t.t===Le?t.v:t},i=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/}()}(),function(){var t,e,n,i,r,o,s,a,l,u,h,c,p,f,d,g,v,m,y,x,b,w;re=function(t){var e=i(t)||r(t)||o(t);return e},w=function(t,e){var n=t.remaining().substr(0,40);throw 40===n.length&&(n+="..."),new Error('Tokenizer failed: unexpected string "'+n+'" (expected '+e+")")},t=function(t,e){var n;return n=t.str.substr(t.pos,e.length),n===e?(t.pos+=e.length,e):null},e=function(t){return function(e){var n=t.exec(e.str.substring(e.pos));return n?(e.pos+=n[0].length,n[1]||n[0]):null}},n=function(t){var e=ye.exec(t.str.substring(t.pos));return e?(t.pos+=e[0].length,e[0]):null},a=e(/^[^\s=]+/),l=function(e){var i,r,o;return t(e,"=")?(i=e.pos,n(e),(r=a(e))?(n(e),(o=a(e))?(n(e),t(e,"=")?[r,o]:(e.pos=i,null)):(e.pos=i,null)):(e.pos=i,null)):null},u=e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/),h=function(e){var n,i,r,o,s;if(n=e.pos,o=t(e,".")||"",s=u(e)||"",o&&!s)return o;if(i=o+s,!i)return null;for(r=c(e);null!==r;)i+=r,r=c(e);return i},c=function(t){return p(t)||f(t)},p=e(/^\.[a-zA-Z_$0-9]+/),f=function(t){var e=d(t);return e?"."+e:null},d=e(/^\[(0|[1-9][0-9]*)\]/),g=function(t){var e,n,i,r,o;if(e=t.pos,n="",i=x(t),i&&(n+=i),r=v(t),r&&(n+=r),n)for(o=g(t);o;)n+=o,o=g(t);return n},v=e(/^[^\\']+/),m=function(t){var e,n,i,r,o;if(e=t.pos,n="",i=x(t),i&&(n+=i),r=y(t),r&&(n+=r),!n)return"";for(o=m(t);""!==o;)n+=o;return n},y=e(/^[^\\"]+/),x=function(t){var e,n="";for(e=b(t);e;)n+=e,e=b(t);return n||null},b=function(e){var n;return t(e,"\\")?(n=e.str.charAt(e.pos),e.pos+=1,n):null},function(){var r,o,a,u,h,c;i=function(t){return t.tripleDelimiters[0].length>t.delimiters[0].length?o(t)||r(t):r(t)||o(t)},r=function(e){var i,r=e.pos;return t(e,e.delimiters[0])?(i=l(e))?t(e,e.delimiters[1])?(e.delimiters=i,{type:Re,mustacheType:Ce}):(e.pos=r,null):(i=a(e),null===i?(e.pos=r,null):(n(e),t(e,e.delimiters[1])||w(e,'"'+e.delimiters[1]+'"'),i)):null},o=function(e){var i,r=e.pos;return t(e,e.tripleDelimiters[0])?(i=l(e))?t(e,e.delimiters[1])?(e.tripleDelimiters=i,{type:Ce}):(e.pos=r,null):(n(e),i=a(e,!0),null===i?(e.pos=r,null):(n(e),t(e,e.tripleDelimiters[1])?i:(e.pos=r,null))):null},a=function(t,e){var i,r,o,a,l,c,p;if(i=t.pos,r={type:e?ke:Re},!e&&(o=u(t),r.mustacheType=o||_e,(o===Te||o===Fe)&&(c=t.remaining(),p=c.indexOf(t.delimiters[1]),-1!==p)))return r.ref=c.substr(0,p),t.pos+=p,r;for(n(t),a=s(t);a.t===Ve&&a.x;)a=a.x;return a.t===De?r.ref=a.n:r.expression=a,l=h(t),null!==l&&(r.indexRef=l),r},c={"#":Ne,"^":Ee,"/":Fe,">":Ae,"!":Te,"&":_e},u=function(t){var e=c[t.str.charAt(t.pos)];return e?(t.pos+=1,e):null},h=e(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/)}(),function(){var o,s,a,l,u,h,c,p,f,d,v,y,x,b;r=function(t){return o(t)||s(t)},o=function(e){var i,r,o;return i=e.pos,t(e,"<")?(r={type:Me},r.name=a(e),r.name?(o=l(e),o&&(r.attrs=o),n(e),t(e,"/")&&(r.selfClosing=!0),t(e,">")?r:(e.pos=i,null)):(e.pos=i,null)):null},s=function(e){var n,i;if(n=e.pos,!t(e,"<"))return null;if(i={type:Me,closing:!0},!t(e,"/"))throw new Error("Unexpected character "+e.remaining().charAt(0)+' (expected "/")');if(i.name=a(e),!i.name)throw new Error("Unexpected character "+e.remaining().charAt(0)+" (expected tag name)");if(!t(e,">"))throw new Error("Unexpected character "+e.remaining().charAt(0)+' (expected ">")');return i},a=e(/^[a-zA-Z][a-zA-Z0-9]*/),l=function(t){var e,i,r;if(e=t.pos,n(t),r=u(t),!r)return t.pos=e,null;for(i=[];null!==r;)i[i.length]=r,n(t),r=u(t);return i},u=function(t){var e,n,i;return(n=h(t))?(e={name:n},i=c(t),i&&(e.value=i),e):null},h=e(/^[^\s"'>\/=]+/),c=function(e){var i,r;return i=e.pos,n(e),t(e,"=")?(r=v(e)||x(e)||p(e),null===r?(e.pos=i,null):r):(e.pos=i,null)},d=e(/^[^\s"'=<>`]+/),f=function(t){var e,n,i;return e=t.pos,(n=d(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:we,value:n}):null},p=function(t){var e,n;for(e=[],n=i(t)||f(t);null!==n;)e[e.length]=n,n=i(t)||f(t);return e.length?e:null},y=function(t){var e,n,i;return e=t.pos,(n=g(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:we,value:n}):null},v=function(e){var n,r,o;if(n=e.pos,!t(e,"'"))return null;for(r=[],o=i(e)||y(e);null!==o;)r[r.length]=o,o=i(e)||y(e);return t(e,"'")?r:(e.pos=n,null)},b=function(t){var e,n,i;return e=t.pos,(n=m(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:we,value:n}):null},x=function(e){var n,r,o;if(n=e.pos,!t(e,'"'))return null;for(r=[],o=i(e)||b(e);null!==o;)r[r.length]=o,o=i(e)||b(e);return t(e,'"')?r:(e.pos=n,null)}}(),function(){o=function(t){var e,n;return e=t.str.length,[t.delimiters[0],t.tripleDelimiters[0],"<"].forEach(function(n){var i=t.str.indexOf(n,t.pos);-1!==i&&(e=Math.min(i,e))}),e===t.pos?null:(n=t.str.substring(t.pos,e),t.pos=e,{type:we,value:n})}}(),function(){var i,r,o,a,l,h,c,d,v,y,x,b,_,k,N,E,F,S,A,T,C,R,M,L,O,j,I;s=function(t){var e,n;return e=t.pos,n=y(t)},i=function(e){var r,o,a,l;if(r=e.pos,n(e),a=s(e),null===a)return null;if(o=[a],n(e),t(e,",")){if(l=i(e),null===l)return e.pos=r,null;o=o.concat(l)}return o},a=function(e){var i,r;return i=e.pos,t(e,"(")?(n(e),(r=s(e))?(n(e),t(e,")")?{t:Ve,x:r}:(e.pos=i,null)):(e.pos=i,null)):null},l=function(t){return F(t)||N(t)||a(t)},h=function(t){var e,n,i;if(e=l(t),!e)return null;if(n=E(t),!n)return e;for(;null!==n;)i={t:Be,x:e,r:n},e=i,n=E(t);return i},c=function(e){var r,o,s,a;return(o=h(e))?(r=e.pos,t(e,"(")?(n(e),s=i(e),n(e),t(e,")")?(a={t:Ye,x:o},s&&(a.o=s),a):(e.pos=r,o)):o):null},r=function(e,i){return function(r){var o,a;return t(r,e)?(o=r.pos,n(r),a=s(r),a||w(r,"an expression"),{s:e,o:a,t:$e}):i(r)}},function(){var t,e,n,i,o;for(i="! ~ + - typeof".split(" "),o=c,t=0,e=i.length;e>t;t+=1)n=r(i[t],o),o=n;d=o}(),o=function(e,i){return function(r){var o,a,l;return(a=i(r))?(o=r.pos,n(r),t(r,e)?(n(r),l=s(r),l?{t:Ze,s:e,o:[a,l]}:(r.pos=o,a)):(r.pos=o,a)):null}},function(){var t,e,n,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=d,t=0,e=i.length;e>t;t+=1)n=o(i[t],r),r=n;v=r}(),y=function(e){var i,r,o,a;return(r=v(e))?(i=e.pos,n(e),t(e,"?")?(n(e),(o=s(e))?(n(e),t(e,":")?(n(e),a=s(e),a?{t:Je,o:[r,o,a]}:(e.pos=i,r)):(e.pos=i,r)):(e.pos=i,r)):(e.pos=i,r)):null},x=e(/^[0-9]+/),b=e(/^[eE][\-+]?[0-9]+/),_=e(/^\.[0-9]+/),k=e(/^(0|[1-9][0-9]*)/),N=function(e){var n,i,r,o,s,a;if(n=e.pos,r=t(e,".")||"",i=u(e)||"",o=r+i,!o)return null;for(;s=p(e)||f(e);)o+=s;return t(e,"(")&&(a=o.lastIndexOf("."),-1!==a?(o=o.substr(0,a),e.pos=n+o.length):e.pos-=1),{t:De,n:o}},E=function(e){var i,r,o;if(i=e.pos,n(e),t(e,".")){if(n(e),r=u(e))return{t:Pe,n:r};w(e,"a property name")}return t(e,"[")?(n(e),o=s(e),o||w(e,"an expression"),n(e),t(e,"]")||w(e,'"]"'),{t:Pe,x:o}):null},F=function(t){var e=T(t)||A(t)||M(t)||C(t)||R(t)||S(t);return e},S=function(e){var r,o;return r=e.pos,n(e),t(e,"[")?(o=i(e),t(e,"]")?{t:je,m:o}:(e.pos=r,null)):(e.pos=r,null)},A=function(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:qe,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:qe,v:"false"}):null},I=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)/,M=function(t){var e,n,i;return e=t.pos,(n=u(t))?(i=I.exec(n))?(t.pos=e+i[0].length,{t:ze,v:i[0]}):(t.pos=e,null):null},T=function(t){var e,n;return e=t.pos,(n=_(t))?{t:Le,v:n}:(n=k(t),null===n?null:(n+=_(t)||"",n+=b(t)||"",{t:Le,v:n}))},R=function(e){var i,r;return i=e.pos,n(e),t(e,"{")?(r=L(e),n(e),t(e,"}")?{t:Ie,m:r}:(e.pos=i,null)):(e.pos=i,null)},L=function(e){var n,i,r,o;return n=e.pos,r=O(e),null===r?null:(i=[r],t(e,",")?(o=L(e),o?i.concat(o):(e.pos=n,null)):i)},O=function(e){var i,r,o;return i=e.pos,n(e),r=j(e),null===r?(e.pos=i,null):(n(e),t(e,":")?(n(e),o=s(e),null===o?(e.pos=i,null):{t:Ue,k:r,v:o}):(e.pos=i,null))},j=function(t){return u(t)||C(t)||T(t)},C=function(e){var n,i;return n=e.pos,t(e,'"')?(i=m(e),t(e,'"')?{t:Oe,v:i}:(e.pos=n,null)):t(e,"'")?(i=g(e),t(e,"'")?{t:Oe,v:i}:(e.pos=n,null)):null}}()}(),function(){var t,e,n,i;t=/^\s*$/,e=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,n=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,r=function(n,r){var o,s,a,l;return r=r||{},e.test(n)?i(n,r):(r.sanitize===!0&&(r.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),o=oe(n,r),r.preserveWhitespace||(l=o[0],l&&l.type===we&&t.test(l.value)&&o.shift(),l=o[o.length-1],l&&l.type===we&&t.test(l.value)&&o.pop()),s=ie(o,r,r.preserveWhitespace),a=s.toJson(),"string"==typeof a?[a]:a)},i=function(t,i){var o,s,a,l,u,h;for(a={},o="",s=t;u=e.exec(s);){if(l=u[1],o+=s.substr(0,u.index),s=s.substring(u.index+u[0].length),h=n.exec(s),!h||h[1]!==l)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");a[l]=r(s.substr(0,h.index),i),s=s.substring(h.index+h[0].length)}return{template:r(o,i),partials:a}}}(),oe=function(t,e){var n,i,r,o,s;for(e=e||{},n={str:ae(t),pos:0,delimiters:e.delimiters||["{{","}}"],tripleDelimiters:e.tripleDelimiters||["{{{","}}}"],remaining:function(){return n.str.substring(n.pos)}},i=[];n.pos<n.str.length;){if(r=re(n),null===r&&n.remaining())throw o=n.str.substr(0,n.pos).substr(-20),20===o.length&&(o="..."+o),s=n.remaining().substr(0,20),20===s.length&&(s+="..."),new Error("Could not parse template: "+(o?o+"<- ":"")+"failed at character "+n.pos+" ->"+s);i[i.length]=r}return le(i),se(i),i},e.prototype=ce,e.adaptors=pe,e.eventDefinitions=fe,e.partials={},e.easing=n,e.extend=i,e.interpolate=o,e.interpolators=s,e.parse=r,e.transitions=de,e.VERSION=ue,"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.Ractive=e}(this);