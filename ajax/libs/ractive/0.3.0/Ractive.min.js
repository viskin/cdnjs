!function(t){"use strict";var e,n,r,i,s,o,a,h,u,p,l,c,d,f,g,m,v,y,w,b,x,k,N,_,E,O,F,A={},L={},M={},S={},C=/^\s+/,T=/\s+$/,R="Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",P=1,j=2,I=3,q=4,V=5,z=6,U=7,D=8,B=9,J=10,$=11,Z=12,H=20,Y=21,X=22,W=23,K=24,G=26,Q=30,te=31,ee=32,ne=33,re=34,ie=35,se=36,oe=40,ae={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};A.animate=function(t,n,r){var i,s,a,h,u;for(r=r||{},h=k.animations.length;h--;)k.animations[h].keypath===t&&k.animations[h].stop();r.easing&&(i="function"==typeof r.easing?r.easing:this.easing&&this.easing[r.easing]?this.easing[r.easing]:e.easing[r.easing],"function"!=typeof i&&(i=null)),s=void 0===r.duration?400:r.duration,u=o(t),a=new g({keys:u,from:this.get(u),to:n,root:this,duration:s,easing:i,step:r.step,complete:r.complete}),k.push(a)},A.bind=function(t){var e=this._bound;-1===e.indexOf(t)&&(e[e.length]=t,t.init(this))},A.fire=function(t){var e,n,r,i=this._subs[t];if(i)for(e=Array.prototype.slice.call(arguments,1),n=0,r=i.length;r>n;n+=1)i[n].apply(this,e)},A.get=function(t){var e,n,r,i,s,h;if(!t)return this.data;if(a(t))e=t.slice(),n=e.join(".");else{if(this._cache.hasOwnProperty(t))return this._cache[t];e=o(t),n=e.join(".")}return this._cache.hasOwnProperty(n)?this._cache[n]:(r=e.pop(),s=e.length?this.get(e):this.data,"object"==typeof s&&s.hasOwnProperty(r)?(h=s[r],i=e.join("."),this._depsMap[i]||(this._depsMap[i]=[]),-1===this._depsMap[i].indexOf(n)&&this._depsMap[i].push(n),this.modifyArrays&&("("===n.charAt(0)||!a(h)||h.ractive&&h._ractive.setting||N(h,n,this)),this._cache[n]=h,h):void 0)};var he,ue,pe,le,ce,de;he=function(t){if(t.keypath)le(t.root,t.keypath,t,t.priority||0);else{var e=t.root._pendingResolution.indexOf(t);-1!==e&&t.root._pendingResolution.splice(e,1)}t.evaluator&&t.evaluator.teardown()},ue=function(t,e){var n,r,i=t._depsMap[e];if(t.modifyArrays&&"("!==e.charAt(0)&&(n=t._cache[e],a(n)&&!n._ractive.setting&&_(n,e,t)),delete t._cache[e],i)for(r=i.length;r--;)ue(t,i[r])},pe=function(t,e,n,r){var i;return t._deps[e]||(t._deps[e]=[]),i=t._deps[e],i[r]?(i=i[r],void(-1===i.indexOf(n)&&(i[i.length]=n))):void(i[r]=[n])},le=function(t,e,n,r){var i,s,o;for(i=t._deps[e][r],i.splice(i.indexOf(n),1),i.length||(t._deps[e][r]=null),s=t._deps[e].length;s--;)if(t._deps[e][s]){o=!0;break}o||(t._deps[e]=null)},ce=function(t,e,n){var r,i,s,o,a,h;if(r=t._deps[e])for(a=r.length,s=0;a>s;s+=1)if(i=r[s])for(o=i.length;o--;)i[o].update();if(!n&&(h=t._depsMap[e]))for(s=h.length;s--;)ce(t,h[s])},de=function(t,e,n){var r,i,s,a,h,u;if("."===e)return n[n.length-1];for(r=o(e),i=r.pop(),n=n.concat();n.length;)if(s=n.pop(),a=o(s),h=t.get(a.concat(r)),"object"==typeof h&&h.hasOwnProperty(i)){u=s+"."+e;break}return u||void 0===t.get(e)||(u=e),u},A.link=function(t){var e=this;return function(n){e.set(t,n)}},function(t){var e;t.observe=function(t,n,r){var i,s=[];if("object"==typeof t){r=n;for(i in t)t.hasOwnProperty(i)&&(n=t[i],s[s.length]=e(this,i,n,r));return{cancel:function(){for(;s.length;)s.pop().cancel()}}}return e(this,t,n,r)},e=function(t,e,n,r){var i,s,o;return r=r||{},o=r.context||t,i={update:function(){var r;r=t.get(e,!0),p(r,s)||(n.call(o,r,s),s=r)},cancel:function(){le(t,e,i,0)}},r.init!==!1&&i.update(),pe(t,e,i,0),i}}(A),A.off=function(t,e){var n,r;e||(t?this._subs[t]=[]:this._subs={}),n=this._subs[t],n&&(r=n.indexOf(e),-1!==r&&n.splice(r,1))},A.on=function(t,e){var n,r,i=this;if("object"==typeof t){n=[];for(r in t)t.hasOwnProperty(r)&&(n[n.length]=this.on(r,t[r]));return{cancel:function(){for(;n.length;)n.pop().cancel()}}}return this._subs[t]?this._subs[t].push(e):this._subs[t]=[e],{cancel:function(){i.off(t,e)}}},A.render=function(t){var e=t.el?l(t.el):this.el;if(!e)throw new Error("You must specify a DOM element to render to");t.append||(e.innerHTML=""),t.callback&&(this.callback=t.callback),this.rendered=new c({descriptor:this.template,root:this,owner:this,parentNode:e}),e.appendChild(this.rendered.docFrag)},function(t){var e,n;t.set=function(t,r){var i,s,a,u,p;if(this.setting||(this.setting=!0,this.fire("set",t,r),this.setting=!1),s=[],i=[],h(t))for(a in t)t.hasOwnProperty(a)&&(p=o(a),u=p.join("."),r=t[a],e(this,u,p,r,i,s));else p=o(t),u=p.join("."),e(this,u,p,r,i,s);if(i.length){for(;i.length;)ce(this,i.pop());n(this)}for(;s.length;)ce(this,s.pop(),!0);for(;this._def.length;)this._def.pop().update().deferred=!1},e=function(t,e,n,r,i,s){var o,a,h,u;if(u=n.slice(),o=t.get(e),o!==r){for(h=t.data;n.length>1;)a=n.shift(),h[a]||(h[a]=/^\s*[0-9]+\s*$/.test(n[0])?[]:{}),h=h[a];a=n[0],h[a]=r}else if("object"!=typeof r)return;for(ue(t,e),i[i.length]=e;u.length;)u.pop(),e=u.join("."),-1===s.indexOf(e)&&(s[s.length]=e)},n=function(t){var e,n,r;for(e=t._pendingResolution.length;e--;)n=t._pendingResolution.splice(e,1)[0],(r=de(t,n.ref,n.contextStack))?n.resolve(r):t._pendingResolution[t._pendingResolution.length]=n}}(A),A.teardown=function(){var t;this.rendered.teardown();for(t in this._depsMap)this._depsMap.hasOwnProperty(t)&&ue(this,t);for(t in this._cache)this._cache.hasOwnProperty(t)&&ue(this,t);for(;this._bound.length;)this.unbind(this._bound.pop())},A.unbind=function(t){var e,n=this._bound;e=n.indexOf(t),-1!==e&&(n.splice(e,1),t.teardown(this))},A.update=function(t){return ue(this,t||""),ce(this,t||""),this.fire("update:"+t),this.fire("update",t),this},L.backbone=function(t,e){var n,r,i,s,o,a,h;return e&&(e+=".",o=new RegExp("^"+e.replace(/\./g,"\\.")),a=e.length),{init:function(u){e?(h=function(t){var n,r;r={};for(n in t)t.hasOwnProperty(n)&&(r[e+n]=t[n]);return r},s=function(t){n||(r=!0,u.set(h(t.changed)),r=!1)},i=function(e,i){r||o.test(e)&&(n=!0,t.set(e.substring(a),i),n=!1)}):(s=function(t){n||(r=!0,u.set(t.changed),r=!1)},i=function(e,i){r||(n=!0,t.set(e,i),n=!1)}),t.on("change",s),u.on("set",i),u.set(e?h(t.attributes):t.attributes)},teardown:function(e){t.off("change",s),e.off("set",i)}}},L.statesman=function(t,e){var n,r,i,s;return e=e?e+".":"",{init:function(e){s=function(t,i){n||(r=!0,e.set(t,i),r=!1)},i=function(e,i){r||(n=!0,t.set(e,i),n=!1)},t.on("set",s),e.on("set",i),e.set(t.get())},teardown:function(e){t.off("change",s),e.off("set",i)}}},n={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},M.tap=function(t,e){var n,r,i,s;return i=5,s=400,n=function(t){var n,r,o,a,h,u;n=t.clientX,r=t.clientY,o=this,a=function(t){e.call(o,t),u()},h=function(t){(Math.abs(t.clientX-n)>=i||Math.abs(t.clientY-r)>=i)&&u()},u=function(){window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",a)},window.addEventListener("mousemove",h),window.addEventListener("mouseup",a),setTimeout(u,s)},t.addEventListener("mousedown",n),r=function(t){var n,r,o,a,h,u,p;1===t.touches.length&&(o=t.touches[0],n=o.clientX,r=o.clientY,a=o.identifier,u=function(t){var n;n=t.changedTouches[0],n.identifier!==a&&p(),e.call(n.target,t)},h=function(t){var e;(1!==t.touches.length||t.touches[0].identifier!==a)&&p(),e=t.touches[0],(Math.abs(e.clientX-n)>=i||Math.abs(e.clientY-r)>=i)&&p()},p=function(){window.removeEventListener("touchmove",h),window.removeEventListener("touchend",u),window.removeEventListener("touchcancel",p)},window.addEventListener("touchmove",h),window.addEventListener("touchend",u),window.addEventListener("touchcancel",p),setTimeout(p,s))},{teardown:function(){t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",r)}}};var fe=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])};r=function(t){var n,r,i,s,o,a,h,u;if(n=this,s=["el","preserveWhitespace","append","twoway","modifyArrays"],o=s.concat("data","template"),t.template)if("string"==typeof t.template){if(!e.parse)throw new Error(R);a=e.parse(t.template)}else a=t.template;if(t.partials){h={};for(i in t.partials)if(t.partials.hasOwnProperty(i)){if("string"==typeof t.partials[i]){if(!e.parse)throw new Error(R);u=e.parse(t.partials[i],t)}else u=t.partials[i];h[i]=u}}r=function(n){var r,i;for(!n.template&&a&&(n.template=a),n.data||(n.data={}),fe(n.data,t.data),h&&(n.partials||(n.partials={}),fe(n.partials,h)),r=s.length;r--;)i=s[r],!n.hasOwnProperty(i)&&t.hasOwnProperty(i)&&(n[i]=t[i]);e.call(this,n),this.init&&this.init.call(this,n)};for(i in n.prototype)n.prototype.hasOwnProperty(i)&&(r.prototype[i]=n.prototype[i]);for(i in t)if(t.hasOwnProperty(i)&&-1===o.indexOf(i)){if(e.prototype.hasOwnProperty(i))throw new Error('Cannot override "'+i+'" method or property of Ractive prototype');r.prototype[i]=t[i]}return r.extend=n.extend,r},i=function(t,n){return u(t)&&u(n)?e.interpolators.number(+t,+n):a(t)&&a(n)?e.interpolators.array(t,n):h(t)&&h(n)?e.interpolators.object(t,n):function(){return n}},s={number:function(t,e){var n=e-t;return n?function(e){return t+e*n}:function(){return t}},array:function(t,n){var r,i,s,o;for(r=[],i=[],o=s=Math.min(t.length,n.length);o--;)i[o]=e.interpolate(t[o],n[o]);for(o=s;o<t.length;o+=1)r[o]=t[o];for(o=s;o<n.length;o+=1)r[o]=n[o];return function(t){for(var e=s;e--;)r[e]=i[e](t);return r}},object:function(t,n){var r,i,s,o,a=[];s={},i={};for(o in t)t.hasOwnProperty(o)&&(n.hasOwnProperty(o)?(a[a.length]=o,i[o]=e.interpolate(t[o],n[o])):s[o]=t[o]);for(o in n)n.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(s[o]=n[o]);return r=a.length,function(t){for(var e,n=r;n--;)e=a[n],s[e]=i[e](t);return s}}};var ge={preserveWhitespace:!1,append:!1,twoway:!0,modifyArrays:!0,data:{}};e=function(t){var n,r,i,s,o;for(n in ge)ge.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=ge[n]);if(this.el=l(t.el),this.data=t.data||{},this._subs={},this._cache={},this._deps={},this._depsMap={},this.nodes={},this._pendingResolution=[],this._def=[],this._proxies={},this._expressions=[],this._bound=[],t.bindings)if(a(t.bindings))for(i=0;i<t.bindings.length;i+=1)this.bind(t.bindings[i]);else this.bind(t.bindings);if(t.partials){this.partials={};for(n in t.partials)if(t.partials.hasOwnProperty(n)){if(r=t.partials[n],"string"==typeof r){if(!e.parse)throw new Error(R);r=e.parse(r,t)}1===r.length&&"string"==typeof r[0]&&(r=r[0]),this.partials[n]=r}}if(s=t.template,"string"==typeof s){if(!e.parse)throw new Error(R);if("#"===s.charAt(0)){if(o=document.getElementById(s.substring(1)),!o)throw new Error("Could not find template element ("+s+")");this.template=e.parse(o.innerHTML,t)}else s=e.parse(s,t)}this.template=s&&1===s.length&&"string"==typeof s[0]?s[0]:s,this.el&&this.render({el:this.el,append:t.append})},g=function(t){var n;this.startTime=Date.now();for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.interpolator=e.interpolate(this.from,this.to),this.running=!0},g.prototype={tick:function(){var t,e,n,r;return this.running?(r=Date.now(),t=r-this.startTime,t>=this.duration?(this.root.set(this.keys,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,n=this.interpolator(e),this.root.set(this.keys,n),this.step&&this.step(e,n),!0)):!1},stop:function(){this.running=!1}},k={animations:[],tick:function(){var e,n;for(e=0;e<this.animations.length;e+=1)n=this.animations[e],n.tick()||this.animations.splice(e--,1);this.animations.length?t.requestAnimationFrame(this.boundTick):this.running=!1},boundTick:function(){k.tick()},push:function(t){this.animations[this.animations.length]=t,this.running||(this.running=!0,this.tick())}},function(t,e,n){var r;for(r=0;r<t.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[t[r]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[t[r]+"CancelAnimationFrame"]||n[t[r]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(t){var r,i,s;return r=Date.now(),i=Math.max(0,16-(r-e)),s=n.setTimeout(function(){t(r+i)},i),e=r+i,s}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(t){n.clearTimeout(t)})}(["ms","moz","webkit","o"],0,t),function(){var t,e,n,r,i,s,o;t=Object.defineProperty?Object.defineProperty:function(t,e,n){t[e]=n.value},N=function(e,r,i){var s,o,a,h;e._ractive?(s=e._ractive.roots,o=e._ractive.keypathsByIndex,a=s.indexOf(i),-1===a&&(a=s.length,s[a]=i),o[a]||(o[a]=[]),h=o[a],-1===h.indexOf(r)&&(h[h.length]=r)):(t(e,"_ractive",{value:{roots:[i],keypathsByIndex:[[r]]},configurable:!0}),n(e))},_=function(t,e,n){var i,s,o,a,h;if(!t._ractive)throw new Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");if(i=t._ractive.roots,o=i.indexOf(n),-1===o)throw new Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");if(s=t._ractive.keypathsByIndex,a=s[o],h=a.indexOf(e),-1===h)throw new Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");a.splice(h,1),a.length||i.splice(o,1),i.length||r(t)},e=function(t){var e,n,r,i,s,o;for(e=t._ractive.roots,n=t._ractive.keypathsByIndex,s=e.length;s--;)for(r=e[s],i=n[s],o=i.length;o--;)r.set(i[o],t)},i=[],o=["pop","push","reverse","shift","sort","splice","unshift"],o.forEach(function(n){var r=function(){var t=Array.prototype[n].apply(this,arguments);return this._ractive.setting=!0,e(this),this._ractive.setting=!1,t};t(i,n,{value:r})}),s={},s.__proto__?(n=function(t){t.__proto__=i},r=function(t){delete t._ractive,t.__proto__=Array.prototype}):(n=function(e){var n,r;for(n=o.length;n--;)r=o[n],t(e,r,{value:i[r]})},r=function(t){var e;for(e=o.length;e--;)delete t[o[e]];delete t._ractive})}(),function(t,e){var n,r;r=function(t,n){var r,i;if(e[t])return e[t];for(i=[];n--;)i[n]="_"+n;return r=new Function(i.join(","),"return("+t+")"),e[t]=r,r},f=function(t,e,r,i,s){var o;if(this.root=t,this.mustache=e,this.priority=e.priority,this.str=s.s,this.keypaths=[],this.override=[],this.values=[],s.r){for(this.resolvers=[],this.unresolved=this.numRefs=o=s.r.length;o--;)i&&i.hasOwnProperty(s.r[o])?(this.values[o]=this.override[o]=i[s.r[o]],this.unresolved-=1):this.resolvers[this.resolvers.length]=new n(t,s.r[o],r,o,this);this.resolvers.length<=1&&(this.selfUpdating=!0),this.unresolved||this.resolved||this.init()}else this.init()},f.prototype={init:function(){var t,e=this;this.resolved=!0,this.keypath="("+this.str.replace(/❖([0-9]+)/g,function(t,n){return e.override.hasOwnProperty(n)?e.override[n]:e.keypaths[n]})+")",-1===this.root._expressions.indexOf(this.keypath)?(t=this.str.replace(/❖([0-9]+)/g,function(t,e){return"_"+e}),this.fn=r(t,this.numRefs||0),this.update(),this.root._expressions.push(this.keypath)):this.teardown(),this.mustache.resolve(this.keypath)},teardown:function(){if(this.resolvers)for(;this.resolvers.length;)this.resolvers.pop().teardown()},resolve:function(t,e,n){this.keypaths[e]=n,this.unresolved-=1,this.unresolved||this.init()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.resolved&&(this.root._def[this.root._def.length]=this,this.deferred=!0)},update:function(){var t;if(!this.resolved)return this;try{t=this.getter()}catch(e){if(this.root.debug)throw e;t=void 0}return p(t,this._lastValue)||(ue(this.root,this.keypath),this.root._cache[this.keypath]=t,ce(this.root,this.keypath),this._lastValue=t),this},getter:function(){return this.fn.apply(null,this.values)}},n=function(t,e,n,r,i){var s;this.ref=e,this.root=t,this.evaluator=i,this.priority=i.priority,this.argNum=r,s=de(t,e,n),s?this.resolve(s):(this.contextStack=n,t._pendingResolution[t._pendingResolution.length]=this)},n.prototype={teardown:function(){he(this)},resolve:function(t){this.keypath=t,pe(this.root,t,this,this.priority),this.update(),this.evaluator.resolve(this.ref,this.argNum,t)},update:function(){var t=this.root.get(this.keypath);p(t,this._lastValue)||(this.evaluator.values[this.argNum]=t,this.evaluator.bubble(),this._lastValue=t)}}}({},{}),b=function(t,e){var n,r,i,s,o;if(t.owner=e.owner,t.owner.type===q&&(t.index=e.index),t.owner.parentFragment&&(s=t.owner.parentFragment.indexRefs)){t.indexRefs={};for(o in s)s.hasOwnProperty(o)&&(t.indexRefs[o]=s[o])}for(e.indexRef&&(t.indexRefs||(t.indexRefs={}),t.indexRefs[e.indexRef]=e.index),t.items=[],i={root:e.root,parentFragment:t,parentNode:e.parentNode,contextStack:e.contextStack},n=e.descriptor?e.descriptor.length:0,r=0;n>r;r+=1)i.descriptor=e.descriptor[r],i.index=r,t.items[t.items.length]=t.createItem(i)},m=function(t,e){var n,r;t.root=e.root,t.descriptor=e.descriptor,t.parentFragment=e.parentFragment,t.contextStack=e.contextStack||[],t.index=e.index||0,t.priority=e.descriptor.p||0,(e.parentNode||e.anchor)&&(t.parentNode=e.parentNode,t.anchor=e.anchor),t.type=e.descriptor.t,e.descriptor.r&&(t.parentFragment.indexRefs&&t.parentFragment.indexRefs.hasOwnProperty(e.descriptor.r)?(r=t.parentFragment.indexRefs[e.descriptor.r],t.render(r)):(n=de(t.root,e.descriptor.r,t.contextStack),n?t.resolve(n):(t.ref=e.descriptor.r,t.root._pendingResolution[t.root._pendingResolution.length]=t,t.descriptor.n&&t.render(!1)))),e.descriptor.x&&(t.evaluator=new f(t.root,t,t.contextStack,t.parentFragment.indexRefs,e.descriptor.x))},v=function(){var t;this.keypath?t=this.root.get(this.keypath,!0):this.expression&&(t=this.evaluate()),p(t,this._lastValue)||(this.render(t),this._lastValue=t)},y=function(t){this.keypath=t,pe(this.root,t,this,this.priority),this.update()},w=function(){var t,e;for(t=[],e=this.refs.length;e--;)t[e]=this.root.get(this.refs[e]);return this.evaluator.apply(null,t)},x=function(t,e){var n,r,i,s,o;if(n={descriptor:t.descriptor.f,root:t.root,parentNode:t.parentNode,owner:t},r=a(e),r&&0===e.length&&(i=!0),t.descriptor.n){if(e&&!i)t.length&&(t.unrender(),t.length=0);else if(!t.length)return n.contextStack=t.contextStack,n.index=0,t.fragments[0]=t.createFragment(n),void(t.length=1)}else if(r){if(e.length<t.length)for(o=t.fragments.splice(e.length,t.length-e.length);o.length;)o.pop().teardown();else if(e.length>t.length)for(s=t.length;s<e.length;s+=1)n.contextStack=t.contextStack.concat(t.keypath+"."+s),n.index=s,t.descriptor.i&&(n.indexRef=t.descriptor.i),t.fragments[s]=t.createFragment(n);t.length=e.length}else h(e)?t.length||(n.contextStack=t.contextStack.concat(t.keypath),n.index=0,t.fragments[0]=t.createFragment(n),t.length=1):e&&!i?t.length||(n.contextStack=t.contextStack,n.index=0,t.fragments[0]=t.createFragment(n),t.length=1):t.length&&(t.unrender(),t.length=0)},function(){var t,n,r,i,s,o,a,h,u,p;r={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},n="undefined"!=typeof window?window.document:null,t=function(t,e){var r,i=[];for(r=n.createElement("div"),r.innerHTML=t;r.firstChild;)i[i.length]=r.firstChild,e.appendChild(r.firstChild);return i},c=function(e){return this.docFrag=n.createDocumentFragment(),"string"==typeof e.descriptor?void(this.nodes=t(e.descriptor,this.docFrag)):void b(this,e)},c.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new i(t,this.docFrag);switch(t.descriptor.t){case j:return new h(t,this.docFrag);case q:return new p(t,this.docFrag);case I:return new u(t,this.docFrag);case U:return new s(t,this.docFrag);case D:return new o(t,this.docFrag);default:throw"WTF? not sure what happened here..."}},teardown:function(){var t;if(this.nodes)for(;this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);else for(;this.items.length;)this.items.pop().teardown()},firstNode:function(){return this.items[0]?this.items[0].firstNode():null},findNextNode:function(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():null}},o=function(t,e){this.parentFragment=t.parentFragment,this.fragment=new c({descriptor:t.root.partials[t.descriptor.r]||[],root:t.root,parentNode:t.parentNode,contextStack:t.contextStack,owner:this}),e.appendChild(this.fragment.docFrag)},o.prototype={teardown:function(){this.fragment.teardown()}},i=function(t,e){this.node=n.createTextNode(t.descriptor),this.root=t.root,this.parentNode=t.parentNode,e.appendChild(this.node)},i.prototype={teardown:function(){this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node}},s=function(t,e){var r,i,s,o,h,u,p,l;if(r=this.descriptor=t.descriptor,this.root=t.root,this.parentFragment=t.parentFragment,this.parentNode=t.parentNode,this.index=t.index,this.eventListeners=[],this.customEventListeners=[],r.a&&r.a.xmlns){if(i=r.a.xmlns,"string"!=typeof i)throw new Error("Namespace attribute cannot contain mustaches")}else i=this.parentNode.namespaceURI;if(this.node=n.createElementNS(i,r.e),r.f&&("string"==typeof r.f&&this.node.namespaceURI===ae.html?this.node.innerHTML=r.f:(this.fragment=new c({descriptor:r.f,root:t.root,parentNode:this.node,contextStack:t.contextStack,owner:this}),this.node.appendChild(this.fragment.docFrag))),r.v)for(s in r.v)r.v.hasOwnProperty(s)&&this.addEventProxy(s,r.v[s],t.contextStack);this.attributes=[],p=[];for(h in r.a)r.a.hasOwnProperty(h)&&(u=r.a[h],o=new a({element:this,name:h,value:void 0===u?null:u,root:t.root,parentNode:this.node,contextStack:t.contextStack}),this.attributes[this.attributes.length]=o,o.isBindable&&p.push(o),o.isTwowayNameAttr?l=o:o.update());for(;p.length;)p.pop().bind(this.root.lazy);l&&(l.updateViewModel(),l.update()),e.appendChild(this.node)},s.prototype={addEventProxy:function(t,n,r){var i,s,o,a,h=this,u=this.root;"string"==typeof n?(u._proxies[n]||(u._proxies[n]=function(t){u.fire(n,t,this)}),a=u._proxies[n]):(o=new d({descriptor:n,root:this.root,owner:this,contextStack:r}),a=function(t){u.fire(o.toString(),t,h.node)}),(i=e.eventDefinitions[t])?(s=i(this.node,a),this.customEventListeners[this.customEventListeners.length]=s):void 0!==this.node["on"+t]?(this.eventListeners[this.eventListeners.length]={n:t,h:a},this.node.addEventListener(t,a)):console&&console.warn&&console.warn("Invalid event handler ("+t+")")},teardown:function(){var t;for(this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node),this.fragment&&this.fragment.teardown();this.attributes.length;)this.attributes.pop().teardown();for(;this.eventListeners.length;)t=this.eventListeners.pop(),this.node.removeEventListener(t.n,t.h);for(;this.customEventListeners.length;)this.customEventListeners.pop().teardown()},firstNode:function(){return this.node},bubble:function(){}},a=function(t){var e,n,i,s,o,a,h,u,p,l,c;if(e=t.name,n=t.value,this.element=t.element,i=e.indexOf(":"),-1!==i&&(s=e.substr(0,i),"xmlns"!==s&&(e=e.substring(i+1),this.namespace=ae[s],!this.namespace)))throw'Unknown namespace ("'+s+'")';if(null===n||"string"==typeof n)return this.namespace?t.parentNode.setAttributeNS(this.namespace,e,n):t.parentNode.setAttribute(e,n),void("id"===e.toLowerCase()&&(t.root.nodes[n]=t.parentNode));for(this.root=t.root,this.parentNode=t.parentNode,this.name=e,this.lcName=e.toLowerCase(),this.namespace||t.parentNode.namespaceURI!==ae.html||(h=this.lcName,u=r[h]||h,void 0!==t.parentNode[u]&&(this.propertyName=u),("boolean"==typeof t.parentNode[u]||"value"===u)&&(this.useProperty=!0)),this.parentFragment=this.element.parentFragment,this.fragment=new d({descriptor:n,root:this.root,owner:this,contextStack:t.contextStack}),this.selfUpdating=!0,p=this.fragment.items.length;p--;)if(l=this.fragment.items[p],l.type!==P){if(l.type!==j){this.selfUpdating=!1;break}if(c){this.selfUpdating=!1;break}c=!0}this.root.twoway&&(o=this.element.descriptor.e.toLowerCase(),a=!("name"!==u&&"value"!==u&&"checked"!==u||"input"!==o&&"textarea"!==o&&"select"!==o)),a&&(this.isBindable=!0,"name"===u&&(this.isTwowayNameAttr=!0)),this.ready=!0},a.prototype={bind:function(t){var e,n,r,i,s,o=this,a=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==j)throw"Not a valid two-way data binding candidate - must be a single interpolator";if(this.interpolator=this.fragment.items[0],e=this.interpolator.keypath||this.interpolator.descriptor.r,"SELECT"===a.tagName&&"value"===this.propertyName)for(n=a.getElementsByTagName("option"),s=n.length,i=0;s>i;i+=1)if(r=n[i],r.hasAttribute("selected")){this.root.set(e,r.value);break}"checkbox"===a.type||"radio"===a.type?"name"===this.propertyName?(a.name="{{"+e+"}}",this.updateViewModel=function(){a.checked&&o.root.set(e,a.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){o.root.set(e,a.checked)}):this.updateViewModel=function(){var t;t=a.value,"0"===t?t=0:""!==t&&(t=+t||t),o.root.set(e,t)},this.updateViewModel&&(this.twoway=!0,a.addEventListener("change",this.updateViewModel),a.addEventListener("click",this.updateViewModel),a.addEventListener("blur",this.updateViewModel),t||(a.addEventListener("keyup",this.updateViewModel),a.addEventListener("keydown",this.updateViewModel),a.addEventListener("keypress",this.updateViewModel),a.addEventListener("input",this.updateViewModel)))},teardown:function(){this.updateViewModel&&(this.parentNode.removeEventListener("change",this.updateViewModel),this.parentNode.removeEventListener("click",this.updateViewModel),this.parentNode.removeEventListener("blur",this.updateViewModel),this.parentNode.removeEventListener("keyup",this.updateViewModel),this.parentNode.removeEventListener("keydown",this.updateViewModel),this.parentNode.removeEventListener("keypress",this.updateViewModel),this.parentNode.removeEventListener("input",this.updateViewModel)),this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._def[this.root._def.length]=this,this.deferred=!0)},update:function(){var t,e;if(!this.ready)return this;if("id"===this.lcName&&(void 0!==this.id&&delete this.root.nodes[this.id],this.root.nodes[this.id]=this.parentNode),this.twoway){if(e=this.lcName,this.value=this.interpolator.value,"name"===e&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type))return this.parentNode.checked=this.value===this.parentNode.value?!0:!1,this;if(n.activeElement===this.parentNode)return this}if(t=this.fragment.toString(),void 0===t&&(t=""),t!==this.value){if(this.useProperty)return this.parentNode[this.propertyName]=t,this;if(this.namespace)return this.parentNode.setAttributeNS(this.namespace,this.name,t),this;this.parentNode.setAttribute(this.name,t),this.value=t}return this}},h=function(t,e){this.node=n.createTextNode(""),e.appendChild(this.node),m(this,t),this.cond&&!this.keypath&&this.update(!1)},h.prototype={update:v,resolve:y,evaluate:w,teardown:function(){he(this),this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node)},render:function(t){this.node.data=t},firstNode:function(){return this.node}},u=function(t,e){this.nodes=[],this.docFrag=n.createDocumentFragment(),this.initialising=!0,m(this,t),e.appendChild(this.docFrag),this.initialising=!1},u.prototype={update:v,resolve:y,evaluate:w,teardown:function(){if(this.root.el.contains(this.parentNode))for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());he(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());this.nodes=t(e,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))}},p=function(t,e){this.fragments=[],this.length=0,this.docFrag=n.createDocumentFragment(),this.initialising=!0,m(this,t),e.appendChild(this.docFrag),this.initialising=!1},p.prototype={update:v,resolve:y,evaluate:w,teardown:function(){this.unrender(),he(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},unrender:function(){for(;this.fragments.length;)this.fragments.shift().teardown()},render:function(t){x(this,t),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(t){var e=new c(t);return this.docFrag.appendChild(e.docFrag),e}}}(),function(){var t,e,n,r;d=function(t){b(this,t)},d.prototype={createItem:function(i){if("string"==typeof i.descriptor)return new t(i.descriptor);switch(i.descriptor.t){case j:return new e(i);case I:return new n(i);case q:return new r(i);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.owner.bubble()},teardown:function(){var t,e;for(t=this.items.length,e=0;t>e;e+=1)this.items[e].teardown()},toString:function(){return this.items.join("")}},t=function(t){this.text=t},t.prototype={toString:function(){return this.text},teardown:function(){}},e=function(t){m(this,t),this.cond&&!this.keypath&&this.update(!1)},e.prototype={update:v,resolve:y,evaluate:w,render:function(t){this.value=t,this.parentFragment.bubble()},teardown:function(){he(this)},toString:function(){return void 0===this.value?"":this.value}},n=e,r=function(t){this.fragments=[],this.length=0,m(this,t)},r.prototype={update:v,resolve:y,evaluate:w,teardown:function(){this.unrender(),he(this)},unrender:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(t){x(this,t),this.parentFragment.bubble()},createFragment:function(t){return new d(t)},toString:function(){return this.fragments.join("")}}}(),o=function(t){var e,n,r,i,s;if(S[t])return S[t].concat();for(r=[],i=t,n=0;i.length;){if(e=i.indexOf(".",n),-1===e)s=i,i="";else{if("\\"===i.charAt(e-1)&&"\\"!==i.charAt(e-2)){n=e+1;continue}s=i.substr(0,e),n=0}/\[/.test(s)?r=r.concat(s.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):r[r.length]=s,i=i.substring(e+1)}return S[t]=r,r.concat()},a=function(t){return"[object Array]"===Object.prototype.toString.call(t)},p=function(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e},u=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},h=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t},l=function(t){var e,n;if("undefined"!=typeof window){if(n=window.document,!t)throw new Error("No container element specified");if(t.tagName)return t;if("string"==typeof t&&(e=n.getElementById(t),!e&&n.querySelector&&(e=n.querySelector(t)),e.tagName))return e;if(t[0]&&t[0].tagName)return t[0];throw new Error("Could not find container element")}},E=function(t){var e,n,r,i;for(e=0;e<t.length;e+=1)n=t[e],r=t[e-1],i=t[e+1],(n.mustacheType===B||n.mustacheType===J)&&(t.splice(e,1),r&&i&&r.type===P&&i.type===P&&(r.value+=i.value,t.splice(e,1)),e-=1);return t},O=function(t){var e,n,r;for(r="";t.length;){if(e=t.indexOf("<!--"),n=t.indexOf("-->"),-1===e&&-1===n){r+=t;break}if(-1!==e&&-1===n)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==n&&-1===e||e>n)throw"Illegal HTML - unexpected closing comment sequence ('-->')";r+=t.substr(0,e),t=t.substring(n+3)}return r},F=function(t){var e,n,r,i,s,o;for(s=/^\s*\r?\n/,o=/\r?\n\s*$/,e=2;e<t.length;e+=1)n=t[e],r=t[e-1],i=t[e-2],n.type===P&&r.type===$&&i.type===P&&o.test(i.value)&&s.test(n.value)&&(r.mustacheType!==j&&r.mustacheType!==I&&(i.value=i.value.replace(o,"\n")),n.value=n.value.replace(s,""),""===n.value&&t.splice(e--,1));return t};var me;!function(){var t,e,n,r,i,s,o,a,h,u,p,l;me=function(t,e,n,r){var s,o;return s={pos:0,tokens:t||[],next:function(){return s.tokens[s.pos]},options:n},o=new i(s,e,r)},t=function(t,i,s){return t.next()?e(t,s)||n(t,i,s)||r(t,i,s):null
},e=function(t,e){var n=t.next();return n.type===P?(t.pos+=1,new s(n,e)):null},n=function(t,e,n){var r=t.next();return r.type===$||r.type===I?r.mustacheType===q||r.mustacheType===V?new a(r,t,e,n):new o(r,t,e):null},r=function(t,e,n){var r,i=t.next();return i.type===Z?(r=new h(i,t,e,n),t.options.sanitize&&t.options.sanitize.elements&&-1!==t.options.sanitize.elements.indexOf(r.lcTag)?null:r):null},p=function(t){var e,n,r,i="";if(!t)return"";for(n=0,r=t.length;r>n;n+=1){if(e=t[n].toString(),e===!1)return!1;i+=e}return i},l=function(t,e){var n,r;return e||(n=p(t),n===!1)?r=t.map(function(t){return t.toJson(e)}):n},i=function(e,n,r){var i,s;for(i=this.items=[],s=t(e,n,r);null!==s;)i[i.length]=s,s=t(e,n,r)},i.prototype={toJson:function(t){var e=l(this.items,t);return e},toString:function(){var t=p(this.items);return t}},function(){var t,e,n;s=function(t,e){this.type=P,this.text=e?t.value:t.value.replace(n," ")},s.prototype={toJson:function(){return this.decoded||(this.decoded=e(this.text))},toString:function(){return this.text}},t={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},e=function(e){var n;return n=e.replace(/&([a-zA-Z]+);/,function(e,n){return t[n]?String.fromCharCode(t[n]):e}),n=n.replace(/&#x([0-9]+);/,function(t,e){return String.fromCharCode(parseInt(e,16))}),n=n.replace(/&#([0-9]+);/,function(t,e){return String.fromCharCode(e)})},n=/\s+/g}(),function(){o=function(t,e,n){this.type=t.type===I?I:t.mustacheType,t.ref&&(this.ref=t.ref),t.expression&&(this.expr=new u(t.expression)),this.priority=n,e.pos+=1},o.prototype={toJson:function(){var t;return this.json?this.json:(t={t:this.type},this.ref&&(t.r=this.ref),this.expr&&(t.x=this.expr.toJson()),this.priority&&(t.p=this.priority),this.json=t,t)},toString:function(){return!1}},a=function(e,n,r,i){var s;for(this.ref=e.ref,this.indexRef=e.indexRef,this.priority=r||0,this.inverted=e.mustacheType===V,e.expression&&(this.expr=new u(e.expression)),n.pos+=1,this.items=[],s=n.next();s;){if(s.mustacheType===z){if(s.ref===this.ref||s.expr&&this.expr){n.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=t(n,this.priority+1,i),s=n.next()}},a.prototype={toJson:function(t){var e;return this.json?this.json:(e={t:q},this.ref&&(e.r=this.ref),this.indexRef&&(e.i=this.indexRef),this.inverted&&(e.n=!0),this.expr&&(e.x=this.expr.toJson()),this.items.length&&(e.f=l(this.items,t)),this.priority&&(e.p=this.priority),this.json=e,e)},toString:function(){return!1}}}(),function(){var e,n,r,i,s,o,a;h=function(n,r,h,u){var p,l,c,d,f;if(this.tag=n.name,this.lcTag=this.tag.toLowerCase(),this.priority=h=h||0,r.pos+=1,u=u||"pre"===this.lcTag,n.attrs&&(l=n.attrs.filter(o),c=n.attrs.filter(a),r.options.sanitize&&r.options.sanitize.eventAttributes&&(l=l.filter(s)),d=function(t){return{name:t.name,value:me(t.value,h+1)}},l.length&&(this.attributes=l.map(d)),c.length&&(this.proxies=c.map(d))),n.selfClosing&&(this.selfClosing=!0),-1!==e.indexOf(this.lcTag)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=i[this.lcTag],this.items=[],p=r.next();p&&p.mustacheType!==z;){if(p.type===Z){if(p.closing){p.name.toLowerCase()===this.lcTag&&(r.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(p.name.toLowerCase()))break}this.items[this.items.length]=t(r,this.priority+1),p=r.next()}u||(f=this.items[0],f&&f.type===P&&(f.text=f.text.replace(C,""),f.text||this.items.shift()),f=this.items[this.items.length-1],f&&f.type===P&&(f.text=f.text.replace(T,""),f.text||this.items.pop()))}},h.prototype={toJson:function(t){var e,n,r,i,s;if(e={t:U,e:this.tag},this.attributes&&this.attributes.length)for(e.a={},s=this.attributes.length,i=0;s>i;i+=1)n=this.attributes[i].name,void 0===this.attributes[i].value&&(r=null),r=l(this.attributes[i].value.items,t),e.a[n]=r;if(this.items&&this.items.length&&(e.f=l(this.items,t)),this.proxies&&this.proxies.length)for(e.v={},s=this.proxies.length,i=0;s>i;i+=1)n=this.proxies[i].name,r=l(this.proxies[i].value.items,t),e.v[n]=r;return this.json=e,e},toString:function(){var t,r,i,s,o,a,h;if(void 0!==this.str)return this.str;if(-1===n.indexOf(this.tag.toLowerCase()))return this.str=!1;if(a=p(this.items),a===!1)return this.str=!1;if(this.proxies)return this.str=!1;if(h=-1!==e.indexOf(this.tag.toLowerCase()),t="<"+this.tag,this.attributes)for(r=0,i=this.attributes.length;i>r;r+=1){if(-1!==this.attributes[r].name.indexOf(":"))return this.str=!1;if("id"===this.attributes[r].name.toLowerCase())return this.str=!1;if(s=" "+this.attributes[r].name,void 0!==this.attributes[r].value){if(o=this.attributes[r].value.toString(),o===!1)return this.str=!1;""!==o&&(s+="=",s+=/[\s"'=<>`]/.test(o)?'"'+o.replace(/"/g,"&quot;")+'"':o)}t+=s}return this.selfClosing&&!h?(t+="/>",this.str=t):(t+=">",h?this.str=t:(t+=a,t+="</"+this.tag+">",this.str=t))}},e="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),r="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),i={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},s=function(t){return"on"!==t.name.substr(0,2)},o=function(t){return"proxy-"!==t.name.substr(0,6)},a=function(t){return"proxy-"===t.name.substr(0,6)?(t.name=t.name.substring(6),!0):!1}}(),function(){var t,e;u=function(n){this.refs=[],t(n,this.refs),this.str=e(n,this.refs)},u.prototype={toJson:function(){return{r:this.refs,s:this.str}}},t=function(e,n){var r;if(e.t===Q&&-1===n.indexOf(e.n)&&(n[n.length]=e.n),e.o)for(r=e.o.length;r--;)t(e.o[r],n);e.x&&t(e.x,n),e.r&&t(e.r,n)},e=function(t,n){var r=function(t){return e(t,n)};switch(t.t){case K:case G:case H:return t.v;case Y:return'"'+t.v.replace(/"/g,'\\"')+'"';case X:return"["+t.m.map(r).join(",")+"]";case ne:return t.s+e(t.x,n);case se:return e(t.o[0],n)+t.s+e(t.o[1],n);case oe:return e(t.x,n)+"("+(t.o?t.o.map(r).join(","):"")+")";case re:return"("+e(t.x,n)+")";case ee:return e(t.x,n)+e(t.r,n);case te:return t.n?"."+t.n:"["+e(t.x,n)+"]";case ie:return e(t.o[0],n)+"?"+e(t.o[1],n)+":"+e(t.o[2],n);case Q:return"❖"+n.indexOf(t.n);default:throw new Error("Could not stringify expression token. This error is unexpected")}}}()}();var ve;!function(){var t,e,n,r,i,s,o,a,h,u,p,l,c,d,f,g,m,v,y,w,b,x,k;ve=function(t){var e=r(t)||i(t)||s(t)||o(t);return e},k=function(t,e){var n=t.remaining().substr(0,40);throw 40===n.length&&(n+="..."),new Error('Tokenizer failed: unexpected string "'+n+'" (expected '+e+")")},t=function(t,e){var n;return n=t.str.substr(t.pos,e.length),n===e?(t.pos+=e.length,e):null},e=function(t){return function(e){var n=t.exec(e.str.substring(e.pos));return n?(e.pos+=n[0].length,n[1]||n[0]):null}},n=function(t){var e=C.exec(t.str.substring(t.pos));return e?(t.pos+=e[0].length,e[0]):null},h=e(/^[^\s=]+/),u=function(e){var r,i,s;return t(e,"=")?(r=e.pos,n(e),(i=h(e))?(n(e),(s=h(e))?(n(e),t(e,"=")?[i,s]:(e.pos=r,null)):(e.pos=r,null)):(e.pos=r,null)):null},p=e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/),l=function(e){var n,r,i;if(n=e.pos,t(e,"."))return".";if(r=p(e),!r)return null;for(i=c(e);null!==i;)r+=i,i=c(e);return r},c=function(t){return d(t)||f(t)},d=e(/^\.[a-zA-Z_$][a-zA-Z_$0-9]*/),f=function(t){var e=g(t);return e?"."+e:null},g=e(/^\[(0|[1-9][0-9]*)\]/),m=function(t){var e,n,r,i,s;if(e=t.pos,n="",r=b(t),r&&(n+=r),i=v(t),i&&(n+=i),n)for(s=m(t);s;)n+=s,s=m(t);return n},v=e(/^[^\\']+/),y=function(t){var e,n,r,i,s;if(e=t.pos,n="",r=b(t),r&&(n+=r),i=w(t),i&&(n+=i),!n)return"";for(s=y(t);""!==s;)n+=s;return n},w=e(/^[^\\"]+/),b=function(t){var e,n="";for(e=x(t);e;)n+=e,e=x(t);return n||null},x=function(e){var n;return t(e,"\\")?(n=e.str.charAt(e.pos),e.pos+=1,n):null},function(){var i,s,o,h;r=function(e){var r,s=e.pos;return t(e,e.delimiters[0])?(r=u(e))?t(e,e.delimiters[1])?(e.delimiters=r,{type:$,mustacheType:J}):(e.pos=s,null):(r=i(e),null===r?(e.pos=s,null):(n(e),t(e,e.delimiters[1])||k(e,'"'+e.delimiters[1]+'"'),r)):null},i=function(e){var r,i,h,u,p,c,d;if(r=e.pos,i={type:$},h=s(e),i.mustacheType=h||j,h===B&&(c=e.remaining(),d=c.indexOf(e.delimiters[1]),-1!==d))return e.pos+=d,i;if(n(e),t(e,"("))n(e),u=a(e),n(e),t(e,")")||k(e,'")"'),i.expression=u;else if(i.ref=l(e),!i.ref)return e.pos=r,null;return p=o(e),null!==p&&(i.indexRef=p),i},h={"#":q,"^":V,"/":z,">":D,"!":B,"&":j},s=function(t){var e=h[t.str.charAt(t.pos)];return e?(t.pos+=1,e):null},o=e(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/)}(),function(){i=function(e){var r,i=e.pos;return t(e,e.tripleDelimiters[0])?(r=u(e))?t(e,e.delimiters[1])?(e.tripleDelimiters=r,{type:J}):(e.pos=i,null):(n(e),r=l(e),null===r?(e.pos=i,null):(n(e),t(e,e.tripleDelimiters[1])?{type:I,ref:r}:(e.pos=i,null))):null}}(),function(){var i,o,a,h,u,p,l,c,d,f,g,v,w,b;s=function(t){return i(t)||o(t)},i=function(e){var n,r,i;return n=e.pos,t(e,"<")?(r={type:Z},r.name=a(e),r.name?(i=h(e),i&&(r.attrs=i),t(e,"/")&&(r.selfClosing=!0),t(e,">")?r:(e.pos=n,null)):(e.pos=n,null)):null},o=function(e){var n,r;if(n=e.pos,!t(e,"<"))return null;if(r={type:Z,closing:!0},!t(e,"/"))throw new Error("Unexpected character "+e.remaining().charAt(0)+' (expected "/")');if(r.name=a(e),!r.name)throw new Error("Unexpected character "+e.remaining().charAt(0)+" (expected tag name)");if(!t(e,">"))throw new Error("Unexpected character "+e.remaining().charAt(0)+' (expected ">")');return r},a=e(/^[a-zA-Z][a-zA-Z0-9]*/),h=function(t){var e,r,i;if(e=t.pos,n(t),i=u(t),!i)return t.pos=e,null;for(r=[];null!==i;)r[r.length]=i,n(t),i=u(t);return r},u=function(t){var e,n,r;return(n=p(t))?(e={name:n},r=l(t),r&&(e.value=r),e):null},p=e(/^[^\s"'>\/=]+/),l=function(e){var r,i;return r=e.pos,n(e),t(e,"=")?(i=g(e)||w(e)||c(e),null===i?(e.pos=r,null):i):(e.pos=r,null)},f=e(/^[^\s"'=<>`]+/),d=function(t){var e,n,r;return e=t.pos,(n=f(t))?(-1!==(r=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,r),t.pos=e+n.length),{type:P,value:n}):null},c=function(t){var e,n;for(e=[],n=r(t)||d(t);null!==n;)e[e.length]=n,n=r(t)||d(t);return e.length?e:null},v=function(t){var e,n,r;return e=t.pos,(n=m(t))?(-1!==(r=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,r),t.pos=e+n.length),{type:P,value:n}):null},g=function(e){var n,i,s;if(n=e.pos,!t(e,"'"))return null;for(i=[],s=r(e)||v(e);null!==s;)i[i.length]=s,s=r(e)||v(e);return t(e,"'")?i:(e.pos=n,null)},b=function(t){var e,n,r;return e=t.pos,(n=y(t))?(-1!==(r=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,r),t.pos=e+n.length),{type:P,value:n}):null},w=function(e){var n,i,s;if(n=e.pos,!t(e,'"'))return null;for(i=[],s=r(e)||b(e);null!==s;)i[i.length]=s,s=r(e)||b(e);return t(e,'"')?i:(e.pos=n,null)}}(),function(){o=function(t){var e,n;return e=t.str.length,[t.delimiters[0],t.tripleDelimiters[0],"<"].forEach(function(n){var r=t.str.indexOf(n,t.pos);-1!==r&&(e=Math.min(r,e))}),e===t.pos?null:(n=t.str.substring(t.pos,e),t.pos=e,{type:P,value:n})}}(),function(){var r,i,s,o,h,u,l,c,d,f,g,v,w,b,x,N,_,E,O,F,A,L,M,S,C,T,R;a=function(t){var e,n;return e=t.pos,n=f(t)},r=function(e){var i,s,o,h;if(i=e.pos,n(e),o=a(e),null===o)return null;if(s=[o],n(e),t(e,",")){if(h=r(e),null===h)return e.pos=i,null;s=s.concat(h)}return s},o=function(e){var r,i;return r=e.pos,t(e,"(")?(n(e),(i=a(e))?(n(e),t(e,")")?{t:re,x:i}:(e.pos=r,null)):(e.pos=r,null)):null},h=function(t){return _(t)||x(t)||o(t)},u=function(t){var e,n,r;if(e=h(t),!e)return null;if(n=N(t),!n)return e;for(;null!==n;)r={t:ee,x:e,r:n},e=r,n=N(t);return r},l=function(e){var i,s,o,a;return(s=u(e))?(i=e.pos,t(e,"(")?(n(e),o=r(e),n(e),t(e,")")?(a={t:oe,x:s},o&&(a.o=o),a):(e.pos=i,s)):s):null},i=function(e,r){return function(i){var s,o;return t(i,e)?(s=i.pos,n(i),expr=a(i),o||k(i,"an expression"),{s:e,o:o,t:ne}):r(i)}},function(){var t,e,n,r,s;for(r="! ~ + - typeof".split(" "),s=l,t=0,e=r.length;e>t;t+=1)n=i(r[t],s),s=n;c=s}(),s=function(e,r){return function(i){var s,o,h;return(o=r(i))?(s=i.pos,n(i),t(i,e)?(n(i),h=a(i),h?{t:se,s:e,o:[o,h]}:(i.pos=s,o)):(i.pos=s,o)):null}},function(){var t,e,n,r,i;for(r="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),i=c,t=0,e=r.length;e>t;t+=1)n=s(r[t],i),i=n;d=i}(),f=function(e){var r,i,s,o;return(i=d(e))?(r=e.pos,n(e),t(e,"?")?(n(e),(s=a(e))?(n(e),t(e,":")?(n(e),o=a(e),o?{t:ie,o:[i,s,o]}:(e.pos=r,i)):(e.pos=r,i)):(e.pos=r,i)):(e.pos=r,i)):null},g=e(/^[0-9]+/),v=e(/^[eE][\-+]?[0-9]+/),w=e(/^\.[0-9]+/),b=e(/^(0|[1-9][0-9]*)/),x=function(e){var n=p(e);return null===n?t(e,".")?{t:Q,n:"."}:null:{t:Q,n:n}},N=function(e){var r,i,s;if(r=e.pos,n(e),t(e,".")){if(n(e),i=p(e))return{t:te,n:i};k("a property name")}return t(e,"[")?(n(e),s=a(e),s||k("an expression"),n(e),t(e,"]")||k('"]"'),{t:te,x:s}):null},_=function(t){var e=F(t)||O(t)||M(t)||A(t)||L(t)||E(t);return e},E=function(e){var r,i;return r=e.pos,n(e),t(e,"[")?(i=expressionList(e),t(e,"]")?{t:X,o:i}:(e.pos=r,null)):(e.pos=r,null)},O=function(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:K,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:K,v:"false"}):null},R=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)/,M=function(t){var e,n,r;return e=t.pos,(n=p(t))?(r=R.exec(n))?(t.pos=e+r[0].length,{t:G,v:r[0]}):(t.pos=e,null):null},F=function(t){var e,n;return e=t.pos,n=b(t),null===n?null:(n+=w(t)||"",n+=v(t)||"",{t:H,v:n})},L=function(e){var r,i;return r=e.pos,n(e),t(e,"{")?(i=S(e),n(e),t(e,"}")?{t:W,m:i}:(e.pos=r,null)):(e.pos=r,null)},S=function(e){var n,r,i,s;return n=e.pos,i=C(e),null===i?null:(r=[i],t(e,",")?(s=S(e),s?r.concat(s):(e.pos=n,null)):r)},C=function(e){var r,i,s;return r=e.pos,n(e),i=T(e),null===i?(e.pos=r,null):(n(e),t(e,":")?(n(e),s=a(e),null===s?(e.pos=r,null):{t:KEY_VALUE_PAIR,k:i,v:s}):(e.pos=r,null))},T=function(t){return p(t)||A(t)||F(t)},A=function(e){var n,r;return n=e.pos,t(e,'"')?(r=y(e),t(e,'"')?{t:Y,v:r}:(e.pos=n,null)):t(e,"'")?(r=m(e),t(e,"'")?{type:Y,value:r}:(e.pos=n,null)):null}}()}();var ye;ye=function(t,e){var n,r,i,s,o;return e=e||{},o=/^\s*$/,e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),n=we(t,e),e.preserveWhitespace||(s=n[0],s&&s.type===P&&o.test(s.value)&&n.shift(),s=n[n.length-1],s&&s.type===P&&o.test(s.value)&&n.pop()),r=me(n,0,e,e.preserveWhitespace),i=r.toJson(),"string"==typeof i?[i]:i};var we=function(t,e){var n,r,i,s,o;for(e=e||{},n={str:O(t),pos:0,delimiters:e.delimiters||["{{","}}"],tripleDelimiters:e.tripleDelimiters||["{{{","}}}"],remaining:function(){return n.str.substring(n.pos)}},r=[];n.pos<n.str.length;){if(i=ve(n),null===i&&n.remaining())throw s=n.str.substr(0,n.pos).substr(-20),20===s.length&&(s="..."+s),o=n.remaining().substr(0,20),20===o.length&&(o+="..."),new Error("Could not parse template: "+(s?s+"<- ":"")+"failed at character "+n.pos+" ->"+o);r[r.length]=i}return F(r),E(r),r};e.prototype=A,e.adaptors=L,e.eventDefinitions=M,e.easing=n,e.extend=r,e.interpolate=i,e.interpolators=s,e.parse=ye,"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.Ractive=e}(this);