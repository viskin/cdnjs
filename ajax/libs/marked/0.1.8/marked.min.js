(function(){var e={newline:/^\n+/,code:/^ {4,}[^\n]*(?:\n {4,}[^\n]*|\n)*(?:\n+|$)/,gfm_code:/^ *``` *(\w+)? *\n([^\0]+?)\s*``` *(?:\n+|$)/,hr:/^( *[\-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*)+\n*/,list:/^( *)([*+-]|\d+\.) [^\0]+?(?:\n{2,}(?! )|\s*$)(?!\1bullet)\n*/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^([^\n]+\n?(?!body))+\n*/,text:/^[^\n]+/};e.list=(function(){var n=e.list.source;n=n.replace("bullet",/(?:[*+-](?!(?: *[-*]){2,})|\d+\.)/.source);return new RegExp(n)})();e.html=(function(){var n=e.html.source;n=n.replace("comment",/<!--[^\0]*?-->/.source).replace("closed",/<(tag)[^\0]+?<\/\1>/.source).replace("closing",/<tag(?!:\/|@)\b(?:"[^"]*"|'[^']*'|[^'">])*?>/.source).replace(/tag/g,m());return new RegExp(n)})();e.paragraph=(function(){var p=e.paragraph.source,n=[];(function o(q){q=e[q]?e[q].source:q;n.push(q.replace(/(^|[^\[])\^/g,"$1"));return o})("gfm_code")("hr")("heading")("lheading")("blockquote")("<"+m())("def");return new RegExp(p.replace("body",n.join("|")))})();e.lexer=function(o){var n=[];n.links={};o=o.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ");return e.token(o,n,true)};e.token=function(r,s,t){var r=r.replace(/^ +$/gm,""),p,u,v,n,q,o;while(r){if(u=e.newline.exec(r)){r=r.substring(u[0].length);if(u[0].length>1){s.push({type:"space"})}}if(u=e.code.exec(r)){r=r.substring(u[0].length);u=u[0].replace(/^ {4}/gm,"");s.push({type:"code",text:u.replace(/\n+$/,"")});continue}if(u=e.gfm_code.exec(r)){r=r.substring(u[0].length);s.push({type:"code",lang:u[1],text:u[2]});continue}if(u=e.heading.exec(r)){r=r.substring(u[0].length);s.push({type:"heading",depth:u[1].length,text:u[2]});continue}if(u=e.lheading.exec(r)){r=r.substring(u[0].length);s.push({type:"heading",depth:u[2]==="="?1:2,text:u[1]});continue}if(u=e.hr.exec(r)){r=r.substring(u[0].length);s.push({type:"hr"});continue}if(u=e.blockquote.exec(r)){r=r.substring(u[0].length);s.push({type:"blockquote_start"});u=u[0].replace(/^ *> ?/gm,"");e.token(u,s,t);s.push({type:"blockquote_end"});continue}if(u=e.list.exec(r)){r=r.substring(u[0].length);s.push({type:"list_start",ordered:isFinite(u[2])});p=/\n *\n *(?:[*+-]|\d+\.)/.test(u[0]);u=u[0].match(/^( *)([*+-]|\d+\.)[^\n]*(?:\n(?!\1(?:[*+-]|\d+\.))[^\n]*)*/gm);q=0;o=u.length;for(;q<o;q++){v=u[q].replace(/^ *([*+-]|\d+\.) */,"");n=/\n( +)/.exec(v);if(n){n=new RegExp("^"+n[1],"gm");v=v.replace(n,"")}s.push({type:p?"loose_item_start":"list_item_start"});e.token(v,s);s.push({type:"list_item_end"})}s.push({type:"list_end"});continue}if(u=e.html.exec(r)){r=r.substring(u[0].length);s.push({type:"html",text:u[0]});continue}if(t&&(u=e.def.exec(r))){r=r.substring(u[0].length);s.links[u[1].toLowerCase()]={href:u[2],title:u[3]};continue}if(t&&(u=e.paragraph.exec(r))){r=r.substring(u[0].length);s.push({type:"paragraph",text:u[0]});continue}if(u=e.text.exec(r)){r=r.substring(u[0].length);s.push({type:"text",text:u[0]});continue}}return s};var g={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,gfm_autolink:/^(\w+:\/\/[^\s]+[^.,:;"')\]\s])/,tag:/^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[((?:\[[^\]]*\]|[^\[\]]|\[|\](?=[^[\]]*\]))*)\]\(([^\)]*)\)/,reflink:/^!?\[((?:\[[^\]]*\]|[^\[\]]|\[|\](?=[^[\]]*\]))*)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,em:/^\b_([^\0]+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,code:/^(`+)([^\0]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[^\0]+?(?=[\\<!\[_*`]|\w+:\/\/| {2,}\n|$)/};g.lexer=function(t){var p="",o=h.links,r,s,n,q;while(t){if(q=g.escape.exec(t)){t=t.substring(q[0].length);p+=q[1];continue}if(q=g.autolink.exec(t)){t=t.substring(q[0].length);if(q[2]==="@"){s=q[1][6]===":"?i(q[1].substring(7)):i(q[1]);n=i("mailto:")+s}else{s=k(q[1]);n=s}p+='<a href="'+n+'">'+s+"</a>";continue}if(q=g.gfm_autolink.exec(t)){t=t.substring(q[0].length);s=k(q[1]);n=s;p+='<a href="'+n+'">'+s+"</a>";continue}if(q=g.tag.exec(t)){t=t.substring(q[0].length);p+=q[0];continue}if(q=g.link.exec(t)){t=t.substring(q[0].length);s=/^\s*<?([^\s]*?)>?(?:\s+"([^\n]+)")?\s*$/.exec(q[2]);if(!s){p+=q[0][0];t=q[0].substring(1)+t;continue}p+=b(q,{href:s[1],title:s[2]});continue}if((q=g.reflink.exec(t))||(q=g.nolink.exec(t))){t=t.substring(q[0].length);r=(q[2]||q[1]).replace(/\s+/g," ");r=o[r.toLowerCase()];if(!r||!r.href){p+=q[0][0];t=q[0].substring(1)+t;continue}p+=b(q,r);continue}if(q=g.strong.exec(t)){t=t.substring(q[0].length);p+="<strong>"+g.lexer(q[2]||q[1])+"</strong>";continue}if(q=g.em.exec(t)){t=t.substring(q[0].length);p+="<em>"+g.lexer(q[2]||q[1])+"</em>";continue}if(q=g.code.exec(t)){t=t.substring(q[0].length);p+="<code>"+k(q[2],true)+"</code>";continue}if(q=g.br.exec(t)){t=t.substring(q[0].length);p+="<br>";continue}if(q=g.text.exec(t)){t=t.substring(q[0].length);p+=k(q[0]);continue}}return p};var b=function(n,o){if(n[0][0]!=="!"){return'<a href="'+k(o.href)+'"'+(o.title?' title="'+k(o.title)+'"':"")+">"+g.lexer(n[1])+"</a>"}else{return'<img src="'+k(o.href)+'" alt="'+k(n[1])+'"'+(o.title?' title="'+k(o.title)+'"':"")+">"}};var h,c;var f=function(){return c=h.pop()};var l=function(){switch(c.type){case"space":return"";case"hr":return"<hr>";case"heading":return"<h"+c.depth+">"+g.lexer(c.text)+"</h"+c.depth+">";case"code":return"<pre><code"+(c.lang?' class="'+c.lang+'"':"")+">"+(c.escaped?c.text:k(c.text,true))+"</code></pre>";case"blockquote_start":var n=[];while(f().type!=="blockquote_end"){n.push(l())}return"<blockquote>"+n.join("")+"</blockquote>";case"list_start":var o=c.ordered?"ol":"ul",n=[];while(f().type!=="list_end"){n.push(l())}return"<"+o+">"+n.join("")+"</"+o+">";case"list_item_start":var n=[];while(f().type!=="list_item_end"){n.push(c.type==="text"?j():l())}return"<li>"+n.join(" ")+"</li>";case"loose_item_start":var n=[];while(f().type!=="list_item_end"){n.push(l())}return"<li>"+n.join(" ")+"</li>";case"html":return g.lexer(c.text);case"paragraph":return"<p>"+g.lexer(c.text)+"</p>";case"text":return"<p>"+j()+"</p>"}};var j=function(){var n=[c.text],o;while((o=h[h.length-1])&&o.type==="text"){n.push(f().text)}return g.lexer(n.join("\n"))};var d=function(o){h=o.reverse();var n=[];while(f()){n.push(l())}h=null;c=null;return n.join("\n")};var k=function(n,o){return n.replace(!o?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};var i=function(r){var o="",q,p=0,n=r.length;for(;p<n;p++){q=r.charCodeAt(p);if(Math.random()>0.5){q="x"+q.toString(16)}o+="&#"+q+";"}return o};function m(){var n="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+";return n}var a=function(n){return d(e.lexer(n))};a.parser=d;a.lexer=e.lexer;a.parse=a;if(typeof module!=="undefined"){module.exports=a}else{this.marked=a}}).call(this);