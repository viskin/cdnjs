(function(){var f={newline:/^\n+/,code:/^ {4,}[^\n]*(?:\n {4,}[^\n]*|\n)*(?:\n+|$)/,fences:n,hr:/^( *[\-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)([*+-]|\d+\.) [^\0]+?(?:\n{2,}(?! )|\s*$)(?!\1bullet)\n*/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^([^\n]+\n?(?!body))+\n*/,text:/^[^\n]+/};f.list=(function(){var r=f.list.source;r=r.replace("bullet",/(?:[*+-](?!(?: *[-*]){2,})|\d+\.)/.source);return new RegExp(r)})();f.html=(function(){var r=f.html.source;r=r.replace("comment",/<!--[^\0]*?-->/.source).replace("closed",/<(tag)[^\0]+?<\/\1>/.source).replace("closing",/<tag(?!:\/|@)\b(?:"[^"]*"|'[^']*'|[^'">])*?>/.source).replace(/tag/g,q());return new RegExp(r)})();f.paragraph=(function(){var t=f.paragraph.source,r=[];(function s(u){u=f[u]?f[u].source:u;r.push(u.replace(/(^|[^\[])\^/g,"$1"));return s})("hr")("heading")("lheading")("blockquote")("<"+q())("def");return new RegExp(t.replace("body",r.join("|")))})();f.normal={fences:f.fences,paragraph:f.paragraph};f.gfm={fences:/^ *``` *(\w+)? *\n([^\0]+?)\s*``` *(?:\n+|$)/,paragraph:/^/};f.gfm.paragraph=(function(){var s=f.paragraph.source,r=f.gfm.fences.source;r=r.replace(/(^|[^\[])\^/g,"$1");s=s.replace(/(\(\?!)/,"$1"+r+"|");return new RegExp(s)})();f.lexer=function(s){var r=[];r.links={};s=s.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ");return f.token(s,r,true)};f.token=function(r,x,y){var r=r.replace(/^ +$/gm,""),w,u,z,A,s,v,t;while(r){if(z=f.newline.exec(r)){r=r.substring(z[0].length);if(z[0].length>1){x.push({type:"space"})}}if(z=f.code.exec(r)){r=r.substring(z[0].length);z=z[0].replace(/^ {4}/gm,"");x.push({type:"code",text:!p.pedantic?z.replace(/\n+$/,""):z});continue}if(z=f.fences.exec(r)){r=r.substring(z[0].length);x.push({type:"code",lang:z[1],text:z[2]});continue}if(z=f.heading.exec(r)){r=r.substring(z[0].length);x.push({type:"heading",depth:z[1].length,text:z[2]});continue}if(z=f.lheading.exec(r)){r=r.substring(z[0].length);x.push({type:"heading",depth:z[2]==="="?1:2,text:z[1]});continue}if(z=f.hr.exec(r)){r=r.substring(z[0].length);x.push({type:"hr"});continue}if(z=f.blockquote.exec(r)){r=r.substring(z[0].length);x.push({type:"blockquote_start"});z=z[0].replace(/^ *> ?/gm,"");f.token(z,x,y);x.push({type:"blockquote_end"});continue}if(z=f.list.exec(r)){r=r.substring(z[0].length);x.push({type:"list_start",ordered:isFinite(z[2])});z=z[0].match(/^( *)([*+-]|\d+\.)[^\n]*(?:\n(?!\1(?:[*+-]|\d+\.))[^\n]*)*/gm);w=false;t=z.length;v=0;for(;v<t;v++){A=z[v];s=A.length;A=A.replace(/^ *([*+-]|\d+\.) */,"");if(~A.indexOf("\n ")){s-=A.length;A=!p.pedantic?A.replace(new RegExp("^ {1,"+s+"}","gm"),""):A.replace(/^ {1,4}/gm,"")}u=w||/\n\n(?!\s*$)/.test(A);if(v!==t-1){w=A[A.length-1]==="\n";if(!u){u=w}}x.push({type:u?"loose_item_start":"list_item_start"});f.token(A,x);x.push({type:"list_item_end"})}x.push({type:"list_end"});continue}if(z=f.html.exec(r)){r=r.substring(z[0].length);x.push({type:"html",pre:z[1]==="pre",text:z[0]});continue}if(y&&(z=f.def.exec(r))){r=r.substring(z[0].length);x.links[z[1].toLowerCase()]={href:z[2],title:z[3]};continue}if(y&&(z=f.paragraph.exec(r))){r=r.substring(z[0].length);x.push({type:"paragraph",text:z[0]});continue}if(z=f.text.exec(r)){r=r.substring(z[0].length);x.push({type:"text",text:z[0]});continue}}return x};var i={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:n,tag:/^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[((?:\[[^\]]*\]|[^\[\]]|\[|\](?=[^[\]]*\]))*)\]\(([^\)]*)\)/,reflink:/^!?\[((?:\[[^\]]*\]|[^\[\]]|\[|\](?=[^[\]]*\]))*)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,em:/^\b_((?:__|[^\0])+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,code:/^(`+)([^\0]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[^\0]+?(?=[\\<!\[_*`]| {2,}\n|$)/};i.normal={url:i.url,strong:i.strong,em:i.em,text:i.text};i.pedantic={strong:/^__(?=\S)([^\0]*?\S)__(?!_)|^\*\*(?=\S)([^\0]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([^\0]*?\S)_(?!_)|^\*(?=\S)([^\0]*?\S)\*(?!\*)/};i.gfm={url:/^(\w+:\/\/[^\s]+[^.,:;"')\]\s])/,text:/^[^\0]+?(?=[\\<!\[_*`]|\w+:\/\/| {2,}\n|$)/};i.discount={strong:/^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,em:/^\b_(?=\S)([^\0]*?\S)_\b|^\*(?=\S)([^\0]*?(?:\*\*|[^\s*]))\*(?!\*)/};i.lexer=function(x){var t="",s=j.links,v,w,r,u;while(x){if(u=i.escape.exec(x)){x=x.substring(u[0].length);t+=u[1];continue}if(u=i.autolink.exec(x)){x=x.substring(u[0].length);if(u[2]==="@"){w=u[1][6]===":"?k(u[1].substring(7)):k(u[1]);r=k("mailto:")+w}else{w=m(u[1]);r=w}t+='<a href="'+r+'">'+w+"</a>";continue}if(u=i.url.exec(x)){x=x.substring(u[0].length);w=m(u[1]);r=w;t+='<a href="'+r+'">'+w+"</a>";continue}if(u=i.tag.exec(x)){x=x.substring(u[0].length);t+=p.sanitize?m(u[0]):u[0];continue}if(u=i.link.exec(x)){x=x.substring(u[0].length);w=/^\s*<?([^\s]*?)>?(?:\s+"([^\n]+)")?\s*$/.exec(u[2]);if(!w){t+=u[0][0];x=u[0].substring(1)+x;continue}t+=b(u,{href:w[1],title:w[2]});continue}if((u=i.reflink.exec(x))||(u=i.nolink.exec(x))){x=x.substring(u[0].length);v=(u[2]||u[1]).replace(/\s+/g," ");v=s[v.toLowerCase()];if(!v||!v.href){t+=u[0][0];x=u[0].substring(1)+x;continue}t+=b(u,v);continue}if(u=i.strong.exec(x)){x=x.substring(u[0].length);t+="<strong>"+i.lexer(u[2]||u[1])+"</strong>";continue}if(u=i.em.exec(x)){x=x.substring(u[0].length);t+="<em>"+i.lexer(u[2]||u[1])+"</em>";continue}if(u=i.code.exec(x)){x=x.substring(u[0].length);t+="<code>"+m(u[2],true)+"</code>";continue}if(u=i.br.exec(x)){x=x.substring(u[0].length);t+="<br>";continue}if(u=i.text.exec(x)){x=x.substring(u[0].length);t+=m(u[0]);continue}}return t};var b=function(r,s){if(r[0][0]!=="!"){return'<a href="'+m(s.href)+'"'+(s.title?' title="'+m(s.title)+'"':"")+">"+i.lexer(r[1])+"</a>"}else{return'<img src="'+m(s.href)+'" alt="'+m(r[1])+'"'+(s.title?' title="'+m(s.title)+'"':"")+">"}};var j,c;var g=function(){return c=j.pop()};var o=function(){switch(c.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+c.depth+">"+i.lexer(c.text)+"</h"+c.depth+">\n";case"code":return"<pre><code"+(c.lang?' class="'+c.lang+'"':"")+">"+(c.escaped?c.text:m(c.text,true))+"</code></pre>\n";case"blockquote_start":var r="";while(g().type!=="blockquote_end"){r+=o()}return"<blockquote>\n"+r+"</blockquote>\n";case"list_start":var s=c.ordered?"ol":"ul",r="";while(g().type!=="list_end"){r+=o()}return"<"+s+">\n"+r+"</"+s+">\n";case"list_item_start":var r="";while(g().type!=="list_item_end"){r+=c.type==="text"?l():o()}return"<li>"+r+"</li>\n";case"loose_item_start":var r="";while(g().type!=="list_item_end"){r+=o()}return"<li>"+r+"</li>\n";case"html":if(p.sanitize){return i.lexer(c.text)}return !c.pre&&!p.pedantic?i.lexer(c.text):c.text;case"paragraph":return"<p>"+i.lexer(c.text)+"</p>\n";case"text":return"<p>"+l()+"</p>\n"}};var l=function(){var r=c.text,s;while((s=j[j.length-1])&&s.type==="text"){r+="\n"+g().text}return i.lexer(r)};var e=function(s){j=s.reverse();var r="";while(g()){r+=o()}j=null;c=null;return r};var m=function(r,s){return r.replace(!s?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};var k=function(v){var s="",r=v.length,t=0,u;for(;t<r;t++){u=v.charCodeAt(t);if(Math.random()>0.5){u="x"+u.toString(16)}s+="&#"+u+";"}return s};function q(){var r="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+";return r}function n(){}n.exec=n;var a=function(s,r){h(r);return e(f.lexer(s))};var p,d;var h=function(r){if(!r){r=d}if(p===r){return}p=r;if(p.gfm){f.fences=f.gfm.fences;f.paragraph=f.gfm.paragraph;i.text=i.gfm.text;i.url=i.gfm.url}else{f.fences=f.normal.fences;f.paragraph=f.normal.paragraph;i.text=i.normal.text;i.url=i.normal.url}if(p.pedantic){i.em=i.pedantic.em;i.strong=i.pedantic.strong}else{i.em=i.normal.em;i.strong=i.normal.strong}};a.options=a.setOptions=function(r){d=r;h(r)};a.options({gfm:true,pedantic:false,sanitize:false});a.parser=function(s,r){h(r);return e(s)};a.lexer=function(s,r){h(r);return f.lexer(s)};a.parse=a;if(typeof module!=="undefined"){module.exports=a}else{this.marked=a}}).call(this);