(function(){var f={newline:/^\n+/,code:/^ {4,}[^\n]*(?:\n {4,}[^\n]*|\n)*(?:\n+|$)/,gfm_code:/^ *``` *(\w+)? *\n([^\0]+?)\s*``` *(?:\n+|$)/,hr:/^( *[\-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*)+\n*/,list:/^( *)([*+-]|\d+\.) [^\0]+?(?:\n{2,}(?! )|\s*$)(?!\1bullet)\n*/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^([^\n]+\n?(?!body))+\n*/,text:/^[^\n]+/};f.list=(function(){var n=f.list.source;n=n.replace("bullet",/(?:[*+-](?!(?: *[-*]){2,})|\d+\.)/.source);return new RegExp(n)})();f.html=(function(){var n=f.html.source;n=n.replace("comment",/<!--[^\0]*?-->/.source).replace("closed",/<(?!elements)(\w+)[^\0]+?<\/\1>/.source).replace("closing",/<\w+(?!:\/|@)\b(?:"[^"]*"|'[^']*'|[^>])*>/.source).replace("elements",b());return new RegExp(n)})();f.paragraph=(function(){var p=f.paragraph.source,n=[];(function o(q){q=f[q]?f[q].source:q;n.push(q.replace(/(^|[^\[])\^/g,"$1"));return o})("gfm_code")("hr")("heading")("lheading")("blockquote")("<(?!"+b()+")\\w+")("def");return new RegExp(p.replace("body",n.join("|")))})();f.lexer=function(o){var n=[];n.links={};o=o.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ");return f.token(o,n,true)};f.token=function(r,s,t){var r=r.replace(/^ +$/gm,""),p,u,v,n,q,o;while(r){if(u=f.newline.exec(r)){r=r.substring(u[0].length);if(u[0].length>1){s.push({type:"space"})}}if(u=f.code.exec(r)){r=r.substring(u[0].length);u=u[0].replace(/^ {4}/gm,"");s.push({type:"code",text:u.replace(/\n+$/,"")});continue}if(u=f.gfm_code.exec(r)){r=r.substring(u[0].length);s.push({type:"code",lang:u[1],text:u[2]});continue}if(u=f.heading.exec(r)){r=r.substring(u[0].length);s.push({type:"heading",depth:u[1].length,text:u[2]});continue}if(u=f.lheading.exec(r)){r=r.substring(u[0].length);s.push({type:"heading",depth:u[2]==="="?1:2,text:u[1]});continue}if(u=f.hr.exec(r)){r=r.substring(u[0].length);s.push({type:"hr"});continue}if(u=f.blockquote.exec(r)){r=r.substring(u[0].length);s.push({type:"blockquote_start"});u=u[0].replace(/^ *> ?/gm,"");f.token(u,s,t);s.push({type:"blockquote_end"});continue}if(u=f.list.exec(r)){r=r.substring(u[0].length);s.push({type:"list_start",ordered:isFinite(u[2])});p=/\n *\n *(?:[*+-]|\d+\.)/.test(u[0]);u=u[0].match(/^( *)([*+-]|\d+\.)[^\n]*(?:\n(?!\1(?:[*+-]|\d+\.))[^\n]*)*/gm);q=0;o=u.length;for(;q<o;q++){v=u[q].replace(/^ *([*+-]|\d+\.) */,"");n=/\n( +)/.exec(v);if(n){n=new RegExp("^"+n[1],"gm");v=v.replace(n,"")}s.push({type:p?"loose_item_start":"list_item_start"});f.token(v,s);s.push({type:"list_item_end"})}s.push({type:"list_end"});continue}if(u=f.html.exec(r)){r=r.substring(u[0].length);s.push({type:"html",text:u[0]});continue}if(t&&(u=f.def.exec(r))){r=r.substring(u[0].length);s.links[u[1].toLowerCase()]={href:u[2],title:u[3]};continue}if(t&&(u=f.paragraph.exec(r))){r=r.substring(u[0].length);s.push({type:"paragraph",text:u[0]});continue}if(u=f.text.exec(r)){r=r.substring(u[0].length);s.push({type:"text",text:u[0]});continue}}return s};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,gfm_autolink:/^(\w+:\/\/[^\s]+[^.,:;"')\]\s])/,tag:/^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^>])*>/,link:/^!?\[((?:\[[^\]]*\]|[^\[\]]|\[|\](?=[^[\]]*\]))*)\]\(([^\)]*)\)/,reflink:/^!?\[((?:\[[^\]]*\]|[^\[\]]|\[|\](?=[^[\]]*\]))*)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,em:/^\b_([^\0]+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,code:/^(`+)([^\0]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[^\0]+?(?=[\\<!\[_*`]|\w+:\/\/| {2,}\n|$)/};h.lexer=function(t){var p="",o=i.links,r,s,n,q;while(t){if(q=h.escape.exec(t)){t=t.substring(q[0].length);p+=q[1];continue}if(q=h.autolink.exec(t)){t=t.substring(q[0].length);if(q[2]==="@"){s=q[1][6]===":"?j(q[1].substring(7)):j(q[1]);n=j("mailto:")+s}else{s=l(q[1]);n=s}p+='<a href="'+n+'">'+s+"</a>";continue}if(q=h.gfm_autolink.exec(t)){t=t.substring(q[0].length);s=l(q[1]);n=s;p+='<a href="'+n+'">'+s+"</a>";continue}if(q=h.tag.exec(t)){t=t.substring(q[0].length);p+=q[0];continue}if(q=h.link.exec(t)){t=t.substring(q[0].length);s=/^\s*<?([^\s]*?)>?(?:\s+"([^\n]+)")?\s*$/.exec(q[2]);if(!s){p+=q[0][0];t=q[0].substring(1)+t;continue}p+=c(q,{href:s[1],title:s[2]});continue}if((q=h.reflink.exec(t))||(q=h.nolink.exec(t))){t=t.substring(q[0].length);r=(q[2]||q[1]).replace(/\s+/g," ");r=o[r.toLowerCase()];if(!r||!r.href){p+=q[0][0];t=q[0].substring(1)+t;continue}p+=c(q,r);continue}if(q=h.strong.exec(t)){t=t.substring(q[0].length);p+="<strong>"+h.lexer(q[2]||q[1])+"</strong>";continue}if(q=h.em.exec(t)){t=t.substring(q[0].length);p+="<em>"+h.lexer(q[2]||q[1])+"</em>";continue}if(q=h.code.exec(t)){t=t.substring(q[0].length);p+="<code>"+l(q[2],true)+"</code>";continue}if(q=h.br.exec(t)){t=t.substring(q[0].length);p+="<br>";continue}if(q=h.text.exec(t)){t=t.substring(q[0].length);p+=l(q[0]);continue}}return p};var c=function(n,o){if(n[0][0]!=="!"){return'<a href="'+l(o.href)+'"'+(o.title?' title="'+l(o.title)+'"':"")+">"+h.lexer(n[1])+"</a>"}else{return'<img src="'+l(o.href)+'" alt="'+l(n[1])+'"'+(o.title?' title="'+l(o.title)+'"':"")+">"}};var i,d;var g=function(){return d=i.pop()};var m=function(){switch(d.type){case"space":return"";case"hr":return"<hr>";case"heading":return"<h"+d.depth+">"+h.lexer(d.text)+"</h"+d.depth+">";case"code":return"<pre><code"+(d.lang?' class="'+d.lang+'"':"")+">"+(d.escaped?d.text:l(d.text,true))+"</code></pre>";case"blockquote_start":var n=[];while(g().type!=="blockquote_end"){n.push(m())}return"<blockquote>"+n.join("")+"</blockquote>";case"list_start":var o=d.ordered?"ol":"ul",n=[];while(g().type!=="list_end"){n.push(m())}return"<"+o+">"+n.join("")+"</"+o+">";case"list_item_start":var n=[];while(g().type!=="list_item_end"){n.push(d.type==="text"?k():m())}return"<li>"+n.join(" ")+"</li>";case"loose_item_start":var n=[];while(g().type!=="list_item_end"){n.push(m())}return"<li>"+n.join(" ")+"</li>";case"html":return h.lexer(d.text);case"paragraph":return"<p>"+h.lexer(d.text)+"</p>";case"text":return"<p>"+k()+"</p>"}};var k=function(){var n=[d.text],o;while((o=i[i.length-1])&&o.type==="text"){n.push(g().text)}return h.lexer(n.join("\n"))};var e=function(o){i=o.reverse();var n=[];while(g()){n.push(m())}i=null;d=null;return n.join("\n")};var l=function(n,o){return n.replace(!o?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};var j=function(r){var o="",q,p=0,n=r.length;for(;p<n;p++){q=r.charCodeAt(p);if(Math.random()>0.5){q="x"+q.toString(16)}o+="&#"+q+";"}return o};function b(){var n="(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b";return n}var a=function(n){return e(f.lexer(n))};a.parser=e;a.lexer=f.lexer;a.parse=a;if(typeof module!=="undefined"){module.exports=a}else{this.marked=a}}).call(this);