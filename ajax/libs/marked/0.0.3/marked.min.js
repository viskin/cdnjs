(function(){if(typeof module==="undefined"){var p=Object.keys,c=Object.prototype.hasOwnProperty,i=true,m=Array.prototype;Object.keys=function(r){if(r===j){if(!i){return["autolink","tag","img","link","reflink","strong","em","escape","text"]}i=false}else{if(r===g){return["newline","block","heading","lheading","hr","blockquote","list","html","text"]}}if(p){return p.call(Object,r)}var a=[],q;for(q in r){if(c.call(r,q)){a.push(q)}}return a};if(!m.forEach){m.forEach=function(s,r){var q=0,a=this.length;for(;q<a;q++){s.call(r,this[q],q,this)}}}if(!m.map){m.map=function(r,q){var a=[];m.forEach.call(this,function(u,s,t){a.push(r.call(q,u,s,t))});return a}}}var g={newline:/^\n/,block:/^[ ]{4,}[^\n]*(?:\n[ ]{4,}[^\n]*)*/,heading:/^ *(#{1,6}) *([^\n#]*) *#*/,lheading:/^([^\n]+)\n *(=|-){3,}/,hr:/^( ?[\-*_]){3,}/,blockquote:/^ *>[^\n]*(?:\n *>[^\n]*)*/,list:/^(?:( *)(\*|\+|-|\d+\.)[^\n]+(?:\n(?:\1 )+[^\n]+)*(?:\n+|$)){2,}/g,html:/^<([^\/\s>]+)[^\n>]*>[^\n]*(?:\n[^\n]+)*\n?<\/\1>/,text:/^[^\n]+/};g.keys=Object.keys(g);g.lexer=function(r){var q=[],a={};r=r.replace(/\r\n/g,"\n").replace(/\r/g,"\n");r=r.replace(/\t/g,"    ");r=r.replace(/^ {0,3}\[([^\]]+)\]: *([^ ]+)(?: +"([^"]+)")?[ \t]*(?:\n|$)/gm,function(t,v,s,u){a[v]={href:s,title:u};return""});q.links=a;return g.token(r,q,0)};g.token=function d(r,s,x){var w=g.keys,q=w.length;var a,u,t,v;while(r.length){for(a=0;a<q;a++){u=w[a];t=g[u];v=t.exec(r);if(!v){continue}r=r.substring(v[0].length);switch(u){case"newline":x++;break;case"hr":s.push({type:"hr",line:x});break;case"lheading":s.push({type:"heading",depth:v[2]==="="?1:2,text:v[1],line:x});break;case"heading":s.push({type:"heading",depth:v[1].length,text:v[2],line:x});break;case"block":v=v[0].replace(/^ {4}/gm,"");s.push({type:"block",text:v,line:x});break;case"list":s.push({type:"list_start",ordered:isFinite(v[2]),line:x});v=v[0].match(/^( *)(\*|\+|-|\d+\.)[^\n]+(?:\n(?:\1 )+[^\n]+)*/gm);v.forEach(function(z){z=z.replace(/^ *(\*|\+|-|\d+\.) */,"");var y=/\n( +)/.exec(z);if(y){y=y[1].length;z=z.replace(new RegExp("^ {"+y+"}","gm"),"")}s.push({type:"list_item_start",line:x});d(z,s,x);s.push({type:"list_item_end",line:x})});s.push({type:"list_end",line:x});break;case"html":case"text":s.push({type:u,text:v[0],line:x});break;case"blockquote":s.push({type:"blockquote_start",line:x});v=v[0].replace(/^ *>/gm,"");d(v,s,x);s.push({type:"blockquote_end",line:x});break}break}}return s};var j={autolink:/^<([^ >]*(:|@)[^ >]*)>/,tag:/^<[^\n>]+>/,img:/^!\[([^\]]+)\]\(([^\s\)]+)\s*([^\)]*)\)/,link:/^\[([^\]]+)\]\(([^\)]+)\)/,reflink:/^\[([^\]]+)\]\[([^\]]+)\]/,strong:/^__([\s\S]+?)__|^\*\*([\s\S]+?)\*\*/,em:/^_([^_]+)_|^\*([^*]+)\*/,escape:/^`([^`]+)`|^``([\s\S]+?)``/};j.text=new RegExp("^([\\s\\S]+?)(?="+Object.keys(j).map(function(a){return j[a].source.replace(/(^|[^\[])\^/g,"$1")}).join("|")+"|$)");j.keys=Object.keys(j);j.lexer=function(t){var z=j,B=j.keys,s=B.length,q="",A=k.links;var r,w,v,y,u,x,a;while(t.length){for(r=0;r<s;r++){w=B[r];v=z[w];y=v.exec(t);if(!y){continue}t=t.substring(y[0].length);switch(w){case"tag":q+=y[0];break;case"img":q+='<img src="'+n(y[2])+'" alt="'+n(y[1])+'"'+(y[3]?' title="'+n(y[3])+'"':"")+">";break;case"link":case"reflink":u=A[y[2]]||"";q+='<a href="'+n(u.href||y[2])+'"'+(u.title?' title="'+n(u.title)+'"':"")+">"+j.lexer(y[1])+"</a>";break;case"autolink":if(y[2]==="@"){x=l(y[1]);a=l("mailto:")+x}else{x=n(y[1]);a=x}q+='<a href="'+a+'">'+x+"</a>";break;case"strong":q+="<strong>"+j.lexer(y[2]||y[1])+"</strong>";break;case"em":q+="<em>"+j.lexer(y[2]||y[1])+"</em>";break;case"escape":q+="<code>"+n(y[2]||y[1])+"</code>";break;case"text":q+=n(y[1]);break;default:break}break}}return q};var k,e;var h=function(){return e=k.pop()};var o=function(){switch(e.type){case"hr":return"<hr>";case"heading":return"<h"+e.depth+">"+j.lexer(e.text)+"</h"+e.depth+">";case"block":return"<pre><code>"+n(e.text)+"</code></pre>";case"blockquote_start":var a=[];while(h().type!=="blockquote_end"){a.push(o())}return"<blockquote>"+a.join("")+"</blockquote>";case"list_start":var a=[],q=e.ordered?"ol":"ul";while(h().type!=="list_end"){a.push(o())}return"<"+q+">"+a.join("")+"</"+q+">";case"list_item_start":var a=[];while(h().type!=="list_item_end"){if(e.type==="text"){a.push(j.lexer(e.text))}else{a.push(o())}}return"<li>"+a.join(" ")+"</li>";case"html":return j.lexer(e.text);case"text":var a=[],r=e.line;while(e&&e.type==="text"){if(e.line>r){break}r=e.line+1;a.push(e.text);h()}if(e){k.push(e)}return"<p>"+j.lexer(a.join(" "))+"</p>"}};var f=function(q){k=q.reverse();var a=[];while(h()){a.push(o())}k=null;e=null;return a.join(" ")};var n=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};var l=function(t){var s,r=0,a=t.length,q="";for(;r<a;r++){s=t.charCodeAt(r);if(Math.random()>0.5){s="x"+s.toString(16)}q+="&#"+s+";"}return q};var b=function(a){return f(g.lexer(a))};b.parser=f;b.lexer=g.lexer;if(typeof module!=="undefined"){module.exports=b}else{this.marked=b}}).call(this);