{"version":3,"file":"sigma.plugins.legend.min.js","sources":["../../plugins/sigma.plugins.legend/settings.js","../../plugins/sigma.plugins.legend/sigma.plugins.legend.js"],"names":["sigma","Error","utils","pkg","settings","legendWidth","legendFontFamily","legendFontSize","legendFontColor","legendTitleFontFamily","legendTitleFontSize","legendTitleFontColor","legendTitleMaxLength","legendTitleTextAlign","legendShapeColor","legendBackgroundColor","legendBorderColor","legendBorderRadius","legendBorderWidth","legendInnerMargin","legendOuterMargin","extend","call","this","undefined","LegendPlugin","s","self","pixelRatio","window","devicePixelRatio","_sigmaInstance","_designPlugin","plugins","design","_visualSettings","iterate","value","key","computeTotalWidth","renderer","renderers","_canvas","document","createElement","style","position","pointerEvents","setupCanvas","container","offsetWidth","offsetHeight","appendChild","addEventListener","drawLayout","textWidgetCounter","enoughSpace","placement","visible","widgets","boundingBox","x","y","w","h","externalCSS","addWidget","draw","LegendWidget","canvas","sigmaInstance","designPlugin","legendPlugin","elementType","visualVar","_legendPlugin","text","unit","img","Image","pinned","width","height","setAttribute","strToObjectRef","obj","str","split","reduce","i","dataURLToBlob","dataURL","BASE64_MARKER","indexOf","parts","contentType","raw","decodeURIComponent","Blob","type","atob","rawLength","length","uInt8Array","Uint8Array","charCodeAt","download","fileEntry","filename","isDataUrl","blob","objectUrl","dataUrl","URL","createObjectURL","encodeURIComponent","navigator","msSaveBlob","msSaveOrOpenBlob","anchor","body","click","removeChild","setTimeout","revokeObjectURL","func","k","hasOwnProperty","createAndAppend","parentElement","typeToCreate","attributes","elementValue","force","elt","Object","prototype","toString","JSON","stringify","textNode","createTextNode","buildImageFromSvg","widget","callback","svg","innerHTML","src","btoa","unescape","onload","visualSettings","totalWidgetWidth","buildLegendWidgets","nbWidgetsBuilt","nbWidgets","keys","buildWidget","vs","horizontal","maxHeight","maxWidth","textWidgets","getUnpinnedWidgets","nodeWidgets","edgeWidgets","widgetLists","getMaxHeight","maxNbCols","Math","floor","cols","initializeColumns","colIndex","tryAgain","notEnoughSpace","list","desiredHeight","bestCombination","widgetsToDisplay","forEach","push","getOptimalWidgetCombination","index","splice","reverse","j","nbCols","prev","legendHeight","previous","drawLegend","number","initialHeight","columns","best","indexes","combinations","getCombinations","c","computeCombinedWidgetsHeight","startingIndex","nextCombinations","concat","totalHeight","unpinned","maxWidgetHeight","makeWidgetId","clearLegend","context","getContext","clearRect","mustDisplayWidget","drawWidget","id","drawSizeLegend","graph","drawNonSizeLegend","lines","getLines","lineHeight","offsetY","drawBackground","drawText","buildWidgetAndDrawLayout","approximateWidthMeasuring","spaceWidth","getTextWidth","words","lineIndex","lineList","getPropertyName","prop","prettyfy","ctx","drawImage","textBaseline","icons","content","fillStyle","color","font","fontSize","fillText","getBoundaryValues","elements","propertyName","minValue","maxValue","min","max","extractValueList","boundaries","dif","getExistingPropertyValues","elts","propName","existingValues","getNbElements","scheme","nb","val","designPluginInstance","nodes","edges","styles","titleMargin","size","by","isInteger","meanValue","round","ratio","bigElementSize","smallElementSize","mediumElementSize","circleBorderWidth","drawWidgetTitle","textOffsetX","numberToText","drawCircle","labelOffsetY","rectWidth","fill","valueList","txt","palette","quantitativeColor","bins","edgeType","nbElements","leftColumnWidth","shrinkFontSize","drawEdge","drawShape","textYAdjustment","parseInt","shrinkedText","getShrinkedText","fontFamily","textWidth","shrinked","substr","textAlign","verticalAlign","text-anchor","font-size","font-family","alignment-baseline","r","borderColor","borderWidth","cx","cy","stroke","stroke-width","rx","ry","x1","x2","triangleSize","curveHeight","offsetX","sqrt","drawLine","drawPolygon","drawCurve","angle","len","dashArray","dotDashArray","y1","y2","x3","y3","d","shape","points","PI","cos","sin","nbPoints","lineWidth","rotation","attrPoints","transform","stroke-dasharray","args","title","substring","charAt","toUpperCase","slice","replace","approximate","helper","measureText","units","ceil","_legendInstances","legend","bind","killLegend","legendInstance","setVisibility","setPlacement","newPlacement","getWidget","addTextWidget","removeWidget","arg1","arg2","removeAllWidgets","unpin","setPosition","setText","setUnit","setExternalCSS","externalCSSList","exportPng","visibility","tmpCanvas","box","toDataURL","exportSvg","url","tmpSvg"],"mappings":"CAAC,WACC,YAEA,IAAqB,mBAAVA,OACT,KAAM,IAAIC,OAAM,sBAGlBD,OAAME,MAAMC,IAAI,iBAKhB,IAAIC,IAEFC,YAAa,IAEbC,iBAAkB,QAElBC,eAAgB,GAEhBC,gBAAiB,QAEjBC,sBAAuB,QAEvBC,oBAAqB,GAErBC,qBAAsB,QAEtBC,qBAAsB,KAEtBC,qBAAsB,OAEtBC,iBAAkB,OAElBC,sBAAuB,QAEvBC,kBAAmB,QAEnBC,mBAAoB,GAEpBC,kBAAmB,EAEnBC,kBAAmB,GAEnBC,kBAAmB,EAIrBpB,OAAMI,SAAWJ,MAAME,MAAMmB,OAAOrB,MAAMI,aAAgBA,KAEzDkB,KAAKC,MClDP,SAAUC,GACT,YAYA,SAASC,GAAaC,GACpB,GAAIC,GAAOJ,KACTnB,EAAWsB,EAAEtB,SACbwB,EAAaC,OAAOC,kBAAoB,CAE1CP,MAAKQ,eAAiBL,EACtBH,KAAKS,cAAgBhC,MAAMiC,QAAQC,OAAOR,GAE1CH,KAAKY,iBACHP,WAAYA,EACZvB,YAAaD,EAAS,eACtBE,iBAAkBF,EAAS,oBAC3BG,eAAgBH,EAAS,kBACzBI,gBAAiBJ,EAAS,mBAC1BK,sBAAuBL,EAAS,yBAChCM,oBAAqBN,EAAS,uBAC9BO,qBAAsBP,EAAS,wBAC/BU,iBAAkBV,EAAS,oBAC3BW,sBAAuBX,EAAS,yBAChCY,kBAAmBZ,EAAS,qBAC5Bc,kBAAmBd,EAAS,qBAC5Be,kBAAmBf,EAAS,qBAC5BgB,kBAAmBhB,EAAS,qBAC5BQ,qBAAsBR,EAAS,wBAC/BS,qBAAsBT,EAAS,wBAC/Ba,mBAAoBb,EAAS,uBAG/BgC,EAAQb,KAAKY,gBAAiB,SAAUE,EAAOC,GACxB,gBAAVD,KACTV,EAAKQ,gBAAgBG,GAAOD,EAAQT,KAIxCW,EAAkBhB,KAAKY,gBAEvB,IAAIK,GAAWd,EAAEe,UAAU,EAC3BlB,MAAKmB,QAAUC,SAASC,cAAc,UAGtCrB,KAAKmB,QAAQG,MAAMC,SAAW,WAC9BvB,KAAKmB,QAAQG,MAAME,cAAgB,OACnCC,EAAYzB,KAAKmB,QAASF,EAASS,UAAUC,YAAaV,EAASS,UAAUE,aAAcvB,GAC3FY,EAASS,UAAUG,YAAY7B,KAAKmB,SAEpCb,OAAOwB,iBAAiB,SAAU,WAChCL,EAAYrB,EAAKe,QAASF,EAASS,UAAUC,YAAaV,EAASS,UAAUE,aAAcvB,GAC3F0B,EAAW3B,KAGbJ,KAAKgC,kBAAoB,EACzBhC,KAAKiC,aAAc,EACnBjC,KAAKkC,UAAY,SACjBlC,KAAKmC,SAAU,EACfnC,KAAKoC,WACLpC,KAAKqC,aAAeC,EAAE,EAAGC,EAAE,EAAGC,EAAE,EAAGC,EAAE,GACrCzC,KAAK0C,eAEL1C,KAAK2C,UAAU,OAAQ,QACvB3C,KAAK2C,UAAU,OAAQ,SACvB3C,KAAK2C,UAAU,OAAQ,QACvB3C,KAAK2C,UAAU,OAAQ,QACvB3C,KAAK2C,UAAU,OAAQ,QACvB3C,KAAK2C,UAAU,OAAQ,SACvB3C,KAAK2C,UAAU,OAAQ,QAEvB3C,KAAK4C,OAIP,QAASC,GAAaC,EAAQC,EAAeC,EAAcC,EAAcC,EAAaC,GACpFnD,KAAKmB,QAAU2B,EACf9C,KAAKQ,eAAiBuC,EACtB/C,KAAKS,cAAgBuC,EACrBhD,KAAKoD,cAAgBH,EACrBjD,KAAKmD,UAAYA,EACjBnD,KAAKkD,YAAcA,EACnBlD,KAAKsC,EAAI,EACTtC,KAAKuC,EAAI,EACTvC,KAAKqD,KAAO,GACZrD,KAAKsD,KAAO,KACZtD,KAAKuD,IAAM,GAAIC,OACfxD,KAAKyD,QAAS,EAOhB,QAAShC,GAAYqB,EAAQY,EAAOC,EAAQtD,GAC1CyC,EAAOc,aAAa,QAAUF,EAAQrD,GACtCyC,EAAOc,aAAa,SAAWD,EAAStD,GACxCyC,EAAOxB,MAAMoC,MAAQA,EAAQ,KAC7BZ,EAAOxB,MAAMqC,OAASA,EAAS,KASjC,QAASE,GAAeC,EAAKC,GAC3B,MAAW,OAAPA,EAAoB,KACjBA,EAAIC,MAAM,KAAKC,OAAO,SAASH,EAAKI,GAAK,MAAOJ,GAAII,IAAMJ,GAGnE,QAASK,GAAcC,GACrB,GAAIC,GAAgB,UACpB,IAAsC,IAAlCD,EAAQE,QAAQD,GAAsB,CACxC,GAAIE,GAAQH,EAAQJ,MAAM,KACtBQ,EAAcD,EAAM,GAAGP,MAAM,KAAK,GAClCS,EAAMC,mBAAmBH,EAAM,GAEnC,OAAO,IAAII,OAAMF,IAAOG,KAAMJ,IAUhC,IAAK,GAPDD,GAAQH,EAAQJ,MAAMK,GACtBG,EAAcD,EAAM,GAAGP,MAAM,KAAK,GAClCS,EAAMnE,OAAOuE,KAAKN,EAAM,IACxBO,EAAYL,EAAIM,OAEhBC,EAAa,GAAIC,YAAWH,GAEvBZ,EAAI,EAAOY,EAAJZ,IAAiBA,EAC/Bc,EAAWd,GAAKO,EAAIS,WAAWhB,EAGjC,OAAO,IAAIS,OAAMK,IAAcJ,KAAMJ,IAGvC,QAASW,GAASC,EAAWC,EAAUC,GACrC,GAAIC,GAAO,KACPC,EAAY,KACZC,EAAU,IAcd,IAZInF,OAAOqE,MAETY,EAAOD,EAAYnB,EAAciB,GAAa,GAAIT,OAAMS,IAAaR,KAAM,aAC3EY,EAAYlF,OAAOoF,IAAIC,gBAAgBJ,IAIvCE,EAAU,+BACRG,mBAAmB,0CACnBA,mBAAmBR,GAGnBS,UAAUC,WACZD,UAAUC,WAAWP,EAAMF,OACtB,IAAIQ,UAAUE,iBACnBF,UAAUE,iBAAiBR,EAAMF,OAC5B,CAEL,GAAIW,GAAS5E,SAASC,cAAc,IACpC2E,GAAOpC,aAAa,OAAStD,OAAW,KAAIkF,EAAYC,GACxDO,EAAOpC,aAAa,WAAYyB,GAGhCjE,SAAS6E,KAAKpE,YAAYmE,GAC1BA,EAAOE,QACP9E,SAAS6E,KAAKE,YAAYH,GAGxBR,GACFY,WAAW,WACT9F,OAAOoF,IAAIW,gBAAgBb,IAC1B,GASP,QAAS3E,GAAQiD,EAAKwC,GACpB,IAAK,GAAIC,KAAKzC,GACPA,EAAI0C,eAAeD,IAAMzC,EAAIyC,KAAOtG,GAIzCqG,EAAKxC,EAAIyC,GAAIA,GAajB,QAASE,GAAgBC,EAAeC,EAAcC,EAAYC,EAAcC,GAC9EF,EAAaA,KAEb,IAAIG,GAAM3F,SAASC,cAAcsF,EAEjC,KAAK,GAAI5F,KAAO6F,GACd,GAAKA,EAAWJ,eAAezF,GAA/B,CAGA,GAAID,GAAQ8F,EAAW7F,EACnBD,KAAUb,GACZ8G,EAAInD,aAAa7C,EAAKD,GAI1B,GAAI+F,IAAiB5G,GAAa6G,EAAO,CACc,oBAAjDE,OAAOC,UAAUC,SAASnH,KAAK8G,KACjCA,EAAeM,KAAKC,UAAUP,GAGhC,IAAIQ,GAAWjG,SAASkG,eAAeT,EACvCE,GAAIlF,YAAYwF,GAKlB,MAFAX,GAAc7E,YAAYkF,GAEnBA,EAST,QAASQ,GAAkBC,EAAQC,GACjC,IAAKD,EAAOE,IAEV,WADAD,IAIF,IAAI1D,GAAM,EAEVA,IAAO,2GAA6GyD,EAAOE,IAAIhE,MAAQ,eAAiB8D,EAAOE,IAAI/D,OAAS,OAE5KI,GAAOyD,EAAOE,IAAIC,UAAY,QAC9B,IAAIC,GAAM,6BAA+BC,KAAKC,SAASlC,mBAAmB7B,IAEtEyD,GAAOjE,IAAIqE,MAAQA,GACrBJ,EAAOjE,IAAIwE,OAASN,EACpBD,EAAOjE,IAAIqE,IAAMA,GAEjBH,IAQJ,QAASzG,GAAkBgH,GACzBA,EAAeC,iBACbD,EAAelJ,YAAsF,GAAvEkJ,EAAerI,kBAAoBqI,EAAenI,mBAQpF,QAASqI,GAAmBjF,EAAcwE,GACxC,GAAIU,GAAiB,EACjBC,EAAYpB,OAAOqB,KAAKpF,EAAab,SAAS2C,MAElDlE,GAAQoC,EAAab,QAAS,SAAUtB,GACtCwH,EAAYxH,EAAO,aACfqH,EACEV,GAAYU,IAAmBC,GACjCX,QAWR,QAAS1F,GAAWkB,GAiBlB,IAhBA,GAAIsF,GAAKtF,EAAarC,gBAClBsB,EAAYe,EAAaf,UACzBsG,EAA2B,QAAdtG,GAAqC,WAAdA,EACpCuG,EAAYxF,EAAa9B,QAAQwC,OACjC+E,EAAWzF,EAAa9B,QAAQuC,MAChCiF,EAAcC,EAAmB3F,EAAab,QAAS,QACvDyG,EAAcD,EAAmB3F,EAAab,QAAS,QACvD0G,EAAcF,EAAmB3F,EAAab,QAAS,QACvD2G,GAAeJ,EAAaE,EAAaC,GACzCnF,EAAS6E,EAAaQ,EAAa/F,EAAab,SAAkC,EAAvBmG,EAAG1I,kBAAwB4I,EACtFQ,EAAYC,KAAKC,MAAMT,EAAWH,EAAGN,kBACrCmB,EAAOC,EAAkBb,EAAaS,EAAY,EAA0B,EAAvBV,EAAG1I,mBACxDyJ,EAAW,EACXC,GAAW,EACXC,GAAiB,EAEdD,IAAaC,GAClBD,GAAW,EACXD,EAAW,EACXzI,EAAQkI,EAAa,SAAUU,GAC7B,GACIC,GACAC,EAFAC,IAIJ,KAAIL,IAAYC,EAQhB,IAJAC,EAAKI,QAAQ,SAAUrH,GACrBoH,EAAiBE,KAAKtH,OAGX,CACXkH,EAAgB/F,GAAUyF,EAAKE,GAAYF,EAAKE,GAAU3F,OAAS,GACnEgG,EAAkBI,EAA4BH,EAAkBF,GAChEC,EAAgBE,QAAQ,SAAUG,GAChCZ,EAAKE,GAAUlH,QAAQ0H,KAAKF,EAAiBI,IAC7CZ,EAAKE,GAAU3F,QAAUiG,EAAiBI,GAAOtC,IAAI/D,QAEvD,KAAK,GAAIO,GAAIyF,EAAgB5E,OAAS,EAAGb,GAAK,IAAKA,EACjD0F,EAAiBK,OAAON,EAAgBzF,GAAI,EAG9C,MAAI0F,EAAiB7E,OAAS,GAqB5B,KApBA,IAAIyD,EAAY,CACf,GAAIc,IAAaL,EAAY,EAAG,CAC9BG,EAAOC,EAAkBJ,EAAkC,EAAvBV,EAAG1I,mBACvC8D,GAAU,GACV4F,GAAW,EACP5F,EAAS8E,IACXe,GAAiB,EAEnB,SAEGF,MAEC,CAAA,GAAIF,EAAKrE,SAAWkE,EAAW,CACpCO,GAAiB,CACjB,OAEAJ,EAAKU,MAAM1H,WAAauB,OAA+B,EAAvB4E,EAAG1I,sBACjCyJ,KASZ,IAAKE,EA+BHvG,EAAaZ,aAAeC,EAAE,EAAGC,EAAE,EAAGC,EAAE,EAAGC,EAAE,OA/B1B,CACD,UAAdP,GACFkH,EAAKc,SAGP,KAAK,GAAIhG,GAAI,EAAGA,EAAIkF,EAAKrE,SAAUb,EAEjC,IAAK,GADDzB,GAAkB,WAAdP,EAAyByB,EAASyF,EAAKlF,GAAGP,OAAS,EAClDwG,EAAI,EAAGA,EAAIf,EAAKlF,GAAG9B,QAAQ2C,SAAUoF,EAC5Cf,EAAKlF,GAAG9B,QAAQ+H,GAAG7H,EAAIiG,EAAGN,iBAAmB/D,GAC5B,UAAdhC,EAAyBwG,EAAWU,EAAKrE,OAASwD,EAAGN,iBAAoBM,EAAG1I,mBAG7EuJ,EAAKlF,GAAG9B,QAAQ+H,GAAG5H,EADH,WAAdL,EACqBuG,EAAY9E,EAASlB,EAA2B,EAAvB8F,EAAG1I,kBAE5B4C,EAAI8F,EAAG1I,kBAEhC4C,GAAK2G,EAAKlF,GAAG9B,QAAQ+H,GAAGzC,IAAI/D,MAIhC,IAAIyG,GAAShB,EAAKnF,OAAO,SAAUoG,EAAMvJ,GAAS,MAAOuJ,IAAQvJ,EAAM6C,OAAgC,EAAvB4E,EAAG1I,kBAAwB,EAAI,IAAO,GAClHf,EAAcsL,GAAU7B,EAAGN,iBAAmBM,EAAG1I,mBAAqB0I,EAAG1I,kBACzEyK,EAAelB,EAAKnF,OAAO,SAAUsG,EAAUzJ,GAAS,MAASyJ,GAAWzJ,EAAM6C,OAAS4G,EAAWzJ,EAAM6C,QAAa,EAE7HV,GAAaZ,aACXG,EAAG1D,EACH2D,EAAG6H,EACHhI,EAA8B,UAA3BW,EAAaf,UAAwBwG,EAAW5J,EAAc,EACjEyD,EAA8B,WAA3BU,EAAaf,UAAyBuG,EAAY6B,EAAe,GAMxEE,EAAWvH,GACXA,EAAahB,aAAeuH,EAG9B,QAASH,GAAkBoB,EAAQC,GAEjC,IAAK,GADDC,MACKzG,EAAI,EAAOuG,EAAJvG,IAAcA,EAC5ByG,EAAQb,MAAM1H,WAAYuB,OAAO+G,GAGnC,OAAOC,GAST,QAASZ,GAA4B3H,EAASsH,GAC5C,GAAIkB,IAAQC,WAAalH,OAAQ,GAC7BmH,EAAeC,EAAgB3I,EAAQ2C,OAAQ,EAUnD,OARA+F,GAAajB,QAAQ,SAAUmB,GAC7B,GAAIrH,GAASsH,EAA6B7I,EAAS4I,EAC/CrH,GAASiH,EAAKjH,QAAoB+F,GAAV/F,IAC1BiH,EAAKC,QAAUG,EACfJ,EAAKjH,OAASA,KAIXiH,EAAKC,QAYd,QAASE,GAAgBhG,EAAQmG,GAC/B,GAAIA,IAAkBnG,EACpB,QAEA,IAAI+F,KAAiBI,IACjBC,EAAmBJ,EAAgBhG,EAAQmG,EAAgB,EAQ/D,OANAC,GAAiBtB,QAAQ,SAAUmB,GACjCF,EAAahB,MAAMoB,GAAeE,OAAOJ,MAG3CF,EAAeA,EAAaM,OAAOD,GAYvC,QAASF,GAA6B7I,EAASyI,GAC7C,GAAIQ,GAAc,CAKlB,OAJAR,GAAQhB,QAAQ,SAAUG,GACxBqB,GAAejJ,EAAQ4H,GAAOtC,IAAI/D,SAG7B0H,EAST,QAASzC,GAAmBxG,EAASc,GACnC,GAAIoI,KAQJ,OANAzK,GAAQuB,EAAS,SAAUtB,GACrBA,EAAM4G,MAAQ5G,EAAM2C,QAAU3C,EAAMoC,cAAgBA,GACtDoI,EAASxB,KAAKhJ,KAIXwK,EAQT,QAAStC,GAAa5G,GACpB,GAAImJ,GAAkB,CAOtB,OANA1K,GAAQuB,EAAS,SAAUoF,GACrBA,EAAOE,KAAOF,EAAOE,IAAI/D,OAAS4H,IACpCA,EAAkB/D,EAAOE,IAAI/D,UAI1B4H,EAGT,QAASC,GAAatI,EAAaC,GACjC,MAAOD,GAAc,IAAMC,EAM7B,QAASsI,GAAYxI,GACnB,GAAIyI,GAAUzI,EAAa9B,QAAQwK,WAAW,KAC9CD,GAAQE,UAAU,EAAG,EAAG3I,EAAa9B,QAAQuC,MAAOT,EAAa9B,QAAQwC,QAO3E,QAAS6G,GAAWvH,GAClBwI,EAAYxI,GACZpC,EAAQoC,EAAab,QAAS,SAAUoF,GAClCqE,EAAkB5I,EAAcuE,IAClCsE,EAAWtE,KAajB,QAASqE,GAAkB5I,EAAcuE,GACvC,MAAOvE,GAAad,UAAYc,EAAahB,aAAeuF,EAAO/D,SAAWR,EAAab,QAAQoF,EAAOuE,MAAQ9L,GAA4B,OAAfuH,EAAOE,IAMxI,QAASY,GAAYd,EAAQC,GAC3B,GAAIc,GAAKf,EAAOpE,cAAcxC,eAE9B,IAAyB,SAArB4G,EAAOrE,UACTqE,EAAOE,IAAMsE,EAAezD,EAAIf,EAAOhH,eAAeyL,MAAOzE,EAAO/G,cAAe+G,EAAOtE,YAAasE,EAAOlE,UACzG,IAA2B,SAAvBkE,EAAOtE,YAChBsE,EAAOE,IAAMwE,EAAkB3D,EAAIf,EAAOhH,eAAeyL,MAAOzE,EAAO/G,cAAe+G,EAAOtE,YAAasE,EAAOrE,UAAWqE,EAAOlE,UAC9H,CACL,GAAI6I,GAAQC,EAAS7D,EAAIf,EAAOnE,KAAMkF,EAAGzJ,YAAc,EAAIyJ,EAAG3I,mBAC1DyM,EAAa9D,EAAGvJ,eAAiB,EACjC2E,EAASwI,EAAMpH,OAASsH,EAAoC,EAAvB9D,EAAG3I,kBACxC0M,EAAU/D,EAAG3I,kBAAoByM,CAErC7E,GAAOE,IAAMtG,SAASC,cAAc,OACpCkL,EAAe/E,EAAOE,IAAKa,EAAI5E,EAE/B,KAAK,GAAIO,GAAI,EAAGA,EAAIiI,EAAMpH,SAAUb,EAClCsI,EAASjE,EAAIf,EAAOE,IAAKyE,EAAMjI,GAAIqE,EAAG3I,kBAAmB0M,GACzDA,GAAWD,CAGb7E,GAAOE,IAAIhE,MAAQ6E,EAAGN,iBACtBT,EAAOE,IAAI/D,OAASA,EAAS,GAAK4E,EAAG5I,kBAAoB4I,EAAG1I,mBAG7D0H,EAAkBC,EAAQC,GAO7B,QAASgF,GAAyBjF,GAChCc,EAAYd,EAAQ,WAAczF,EAAWyF,EAAOpE,iBAWtD,QAASgJ,GAAS7D,EAAIlF,EAAMqF,GAQ1B,IAAK,GAPDgE,IAA4B,EAC5BC,EAAaC,EAAa,IAAKrE,EAAGxJ,iBAAkBwJ,EAAGvJ,eAAgB0N,GACvEG,EAAQxJ,EAAKW,MAAM,KACnBmI,IAAUzI,OAAOiJ,EAAYE,WAC7BC,EAAY,EACZC,KAEK7I,EAAI,EAAGA,EAAI2I,EAAM9H,SAAUb,EAAG,CACrC,GAAIR,GAAQkJ,EAAaC,EAAM3I,GAAK,IAAKqE,EAAGxJ,iBAAkBwJ,EAAGvJ,eAAgB0N,EAC7EP,GAAMW,GAAWpJ,MAAQA,GAASgF,GACpCyD,EAAMW,GAAWD,MAAM/C,KAAK+C,EAAM3I,GAAK,KACvCiI,EAAMW,GAAWpJ,OAASA,IAE1ByI,EAAMrC,MAAMpG,MAAMA,EAAQiJ,EAAYE,OAAOA,EAAM3I,GAAK,OACxD4I,KAIJ,IAAK5I,EAAI,EAAGA,EAAIiI,EAAMpH,SAAUb,EAAG,CAEjC,IAAK,GADDH,GAAM,GACDoG,EAAI,EAAGA,EAAIgC,EAAMjI,GAAG2I,MAAM9H,SAAUoF,EAC3CpG,GAAOoI,EAAMjI,GAAG2I,MAAM1C,EAExB4C,GAASjD,KAAK/F,GAGhB,MAAOgJ,GAGT,QAASC,GAAgBC,GACvB,GAAI9M,GAAI8M,EAAKjJ,MAAM,IACnB,OAAK7D,GAAE4E,OAAS,GAAyB,eAApB5E,EAAEA,EAAE4E,OAAS,IAAyB5E,EAAE4E,QAAU,GAAc,eAAT5E,EAAE,GACrE,WAEA+M,EAAS/M,EAAEA,EAAE4E,OAAS,IAOjC,QAAS+G,GAAWtE,GAClB,GAAKA,EAAOjE,IAAZ,CAIA,GAAI4J,GAAM3F,EAAOrG,QAAQwK,WAAW,KAEpCwB,GAAIC,UAAU5F,EAAOjE,IAAKiE,EAAOlF,EAAGkF,EAAOjF,GAChB,SAAvBiF,EAAOtE,aAA+C,SAArBsE,EAAOrE,YAC1CgK,EAAIE,aAAe,SACnBxM,EAAQ2G,EAAOE,IAAI4F,MAAO,SAAUxM,EAAOyM,GACzCJ,EAAIK,UAAY1M,EAAM2M,MACtBN,EAAIO,KAAO5M,EAAM6M,SAAW,MAAQ7M,EAAM4M,KAC1CP,EAAIS,SAASL,EAAS/F,EAAOlF,EAAIxB,EAAMwB,EAAGkF,EAAOjF,EAAIzB,EAAMyB,OAWjE,QAASsL,GAAkBC,EAAUC,GAInC,IAAK,GAHDC,GAAW,KACXC,EAAW,KAEN/J,EAAI,EAAGA,EAAI4J,EAAS/I,SAAUb,EAAG,CACxC,GAAIpD,GAAQ+C,EAAeiK,EAAS5J,GAAI6J,EACnB,iBAAVjN,OAINkN,GAAoBA,EAARlN,KACfkN,EAAWlN,KAERmN,GAAYnN,EAAQmN,KACvBA,EAAWnN,IAIf,OAAQoN,IAAKF,EAAWA,EAAW,EAAGG,IAAKF,EAAWA,EAAW,GAUnE,QAASG,GAAiBC,EAAY5D,GAIpC,IAAK,GAHDhB,MACA6E,EAAMD,EAAWF,IAAME,EAAWH,IAE7BhK,EAAI,EAAOuG,EAAS,EAAbvG,IAAkBA,EAChCuF,EAAKK,KAAKuE,EAAWH,IAAMI,GAAOpK,EAAIuG,GAGxC,OAAOhB,GAUT,QAAS8E,GAA0BC,EAAMC,GAEvC,IAAK,GADDC,MACKxK,EAAI,EAAGA,EAAIsK,EAAKzJ,SAAUb,EAAG,CACpC,GAAI+I,GAAOpJ,EAAe2K,EAAKtK,GAAIuK,EAC/BxB,IAAwB,gBAATA,GACjBpM,EAAQoM,EAAM,SAAUnM,GACtB4N,EAAe5N,IAAS,IAG1B4N,EAAezB,IAAQ,EAI3B,MAAOyB,GAST,QAASC,GAAcC,EAAQF,GAC7B,GAAIG,GAAK,CAOT,OANAhO,GAAQ+N,EAAQ,SAAUE,EAAK/N,GACzB2N,EAAe3N,MACf8N,IAICA,EAiBT,QAAS7C,GAAehE,EAAgBiE,EAAO8C,EAAsB7L,EAAaI,GAChF,GAAIiF,GAAKP,EACLN,EAAMtG,SAASC,cAAc,OAC7BmN,EAAuB,SAAhBtL,EAAyB+I,EAAM+C,QAAU/C,EAAMgD,QACtDC,EAAyB,SAAhBhM,EAAyB6L,EAAqBG,OAAOF,MAAQD,EAAqBG,OAAOD,MAClGE,EAAc5G,EAAGpJ,oBAAsBoJ,EAAG3I,kBAAwC,IAApB2I,EAAGvJ,cAErE,KAAKkQ,EAAOE,KACV,MAAO,KAGT,IAUIzL,GAVA8K,EAAWS,EAAOE,KAAKC,GACvBhB,EAAaR,EAAkBW,EAAMC,GACrCT,EAAWK,EAAWH,IACtBD,EAAWI,EAAWF,IACtBmB,EAAYtB,EAAW,IAAM,GAAKC,EAAW,IAAM,EACnDsB,EAAYD,EAAYpG,KAAKsG,OAAOxB,EAAWC,GAAY,IAAMD,EAAWC,GAAY,EACxFwB,EAAQP,EAAOE,KAAKjB,IAAMe,EAAOE,KAAKlB,IACtCwB,EAAqC,IAApBnH,EAAGvJ,eACpB2Q,EAAmBD,EAAiBD,EACpCG,GAAqBF,EAAiBC,GAAoB,CAG9D,IAAoB,SAAhBzM,EAAwB,CAC1B,GAAI2M,GAAoB,CAExBlM,GAASwL,EAA+B,EAAjBO,EAAqB,GAE5CnD,EAAe7E,EAAKa,EAAI5E,GACxBmM,EAAgBvH,EAAIb,EAAKsF,EAAgBkC,EAAOE,KAAKC,IAAK/L,EAE1D,IAAIyM,GAA+B,EAAjBL,EAAqBG,EAA2C,EAAvBtH,EAAG3I,iBAC9D4M,GAASjE,EAAIb,EAAKsI,EAAa/B,EAAUqB,GAAYS,EAAaZ,EAAc5G,EAAGvJ,gBACnFwN,EAASjE,EAAIb,EAAKsI,EAAaT,EAAWD,GAAYS,EAAaZ,EAAc,EAAI5G,EAAGvJ,gBACxFwN,EAASjE,EAAIb,EAAKsI,EAAahC,EAAUsB,GAAYS,EAAaZ,EAAc,EAAI5G,EAAGvJ,gBAGvFiR,EAAWvI,EAAKgI,EAAiBnH,EAAG3I,kBAAmBuP,EAAcO,EAAgBA,EAC1EnH,EAAG/I,sBAAuB+I,EAAGhJ,iBAAkBsQ,GAC1DI,EAAWvI,EAAKgI,EAAiBnH,EAAG3I,kBAAmBuP,EAA+B,EAAjBO,EAAqBE,EAC/EA,EAAmBrH,EAAG/I,sBAAuB+I,EAAGhJ,iBAAkBsQ,GAC7EI,EAAWvI,EAAKgI,EAAiBnH,EAAG3I,kBAAmBuP,EAA+B,EAAjBO,EAAqBC,EAC/EA,EAAkBpH,EAAG/I,sBAAuB+I,EAAGhJ,iBAAkBsQ,OAEvE,IAAoB,SAAhB3M,EAAwB,CACjC,GAAIgN,GAAef,EAA+B,IAAjBO,EAC7BS,GAAa5H,EAAGzJ,YAAqC,EAAvByJ,EAAG3I,mBAAyB,CAE9D+D,GAASuM,EAAe3H,EAAGvJ,eAG3BuN,EAAe7E,EAAKa,EAAI5E,GACxBmM,EAAgBvH,EAAIb,EAAKsF,EAAgBkC,EAAOE,KAAKC,IAAK/L,GAE1DV,EAAK8E,EAAK,QAASpF,EAAEiG,EAAG3I,kBAAmB2C,EAAE4M,EAAc,EAAGzL,MAAMyM,EAAWxM,OAAO+L,EAAiB,EACpFU,KAAK7H,EAAGhJ,mBAC3BqD,EAAK8E,EAAK,QAASpF,EAAEiG,EAAG3I,kBAAoBuQ,EAAW5N,EAAE4M,EAAc,GAAKO,EAAiBE,GAAqB,EAC/FlM,MAAMyM,EAAWxM,OAAOiM,EAAoB,EAAGQ,KAAK7H,EAAGhJ,mBAC1EqD,EAAK8E,EAAK,QAASpF,EAAEiG,EAAG3I,kBAAoB,EAAIuQ,EAAW5N,EAAE4M,EAAc,GAAKO,EAAiBC,GAAoB,EAClGjM,MAAMyM,EAAWxM,OAAOgM,EAAmB,EAAGS,KAAK7H,EAAGhJ,mBAEzEiN,EAASjE,EAAIb,EAAKsI,EAAa/B,EAAUqB,GAAY/G,EAAG3I,kBAAgC,GAAZuQ,EAAiBD,EAAc,UAC3G1D,EAASjE,EAAIb,EAAKsI,EAAaT,EAAWD,GAAY/G,EAAG3I,kBAAgC,IAAZuQ,EAAiBD,EAAc,UAC5G1D,EAASjE,EAAIb,EAAKsI,EAAahC,EAAUsB,GAAY/G,EAAG3I,kBAAgC,IAAZuQ,EAAiBD,EAAc,UAM7G,MAHAxI,GAAIhE,MAAQ6E,EAAGN,iBACfP,EAAI/D,OAASA,EAAyD,GAA/C4E,EAAG5I,kBAAoB4I,EAAG1I,mBAE1C6H,EAcT,QAASwE,GAAkBlE,EAAgBiE,EAAO8C,EAAsB7L,EAAaC,EAAWG,GAC9F,GAAIiF,GAAKP,EACLN,EAAMtG,SAASC,cAAc,OAC7BmN,EAAuB,SAAhBtL,EAAyB+I,EAAM+C,QAAU/C,EAAMgD,QACtDC,EAAyB,SAAhBhM,EAAyB6L,EAAqBG,OAAOF,MAAQD,EAAqBG,OAAOD,KAEtG,KAAKC,EAAO/L,GACV,MAAO,KAGT,IAYIkL,GACAgC,EACAf,EACAgB,EACA3C,EAhBA4C,EAAUxB,EAAqBwB,QAC/BlE,EAAiC,IAApB9D,EAAGvJ,eAChBmQ,EAAc5G,EAAGpJ,oBAAsBoJ,EAAG3I,kBAAiC,GAAbyM,EAC9DmE,EAAkC,UAAdrN,GAAyB+L,EAAOzB,MAAMgD,KAC1DC,EAA2B,SAAhBxN,GAAwC,SAAdC,EACrCyL,EAAS4B,EAAoB3M,EAAe0M,EAASrB,EAAOzB,MAAMmB,QAAQM,EAAOzB,MAAMgD,MAAQ5M,EAAe0M,EAASrB,EAAO/L,GAAWyL,QACzIF,EAAiBH,EAA0BC,EAAMU,EAAO/L,GAAWkM,IACnEsB,EAAaH,EAAqBxJ,OAAOqB,KAAKuG,GAAQ7J,OAAS4J,EAAcC,EAAQF,GACrF/K,EAAS0I,EAAasE,EAAaxB,GAAeuB,EAAWrE,EAAa,GAC1EuE,EAAkBrI,EAAGzJ,YAAc,EACnCwN,EAAU6C,EACVY,EAA8B,SAAhB7M,EAAyB0N,EAAsC,IAApBrI,EAAGvJ,eAAuBuJ,EAAG3I,iBA4E1F,OArEI4Q,KACAnC,EAAaR,EAAkBW,EAAMU,EAAOzB,MAAM4B,IAClDgB,EAAYjC,EAAiBC,EAAYa,EAAOzB,MAAMgD,MACtDnB,EAAYjB,EAAWH,IAAM,GAAK,GAAKG,EAAWF,IAAM,GAAK,GAGjEzG,EAAI4F,SAEJf,EAAe7E,EAAKa,EAAI5E,GACxBmM,EAAgBvH,EAAIb,EAAKsF,EAAgBkC,EAAO/L,GAAWkM,IAAK/L,GAG5C,SAAhBJ,GAAwC,SAAdC,IAC5BmN,EAAO,6BACP3C,EAAWkD,EAAeP,EAAK/H,EAAGxJ,iBAAkBwJ,EAAGvJ,eAAgBuJ,EAAGzJ,YAAqC,EAAvByJ,EAAG3I,mBAC3F4M,EAASjE,EAAIb,EAAK4I,EAAK/H,EAAG3I,kBAAmB0M,EAAS,OAAQ/D,EAAGtJ,gBAAiBsJ,EAAGxJ,iBAAkB4O,GACvGrB,GAAWD,GAGbxL,EAAQ+N,EAAQ,SAAU9N,EAAOC,GAC/B,GAAKyP,GAAsB9B,EAAe3N,GAA1C,CAIkB,UAAdoC,GACEqN,IACF1P,EAAQ8N,EAAOA,EAAO7J,OAAShE,EAAM,IAGnB,SAAhBmC,EACFN,EAAK8E,EAAK,QAASpF,EAAEiG,EAAG3I,kBAAmB2C,EAAE+J,EAAUD,EAAa,EACjD3I,MAAMkN,EAAyC,EAAvBrI,EAAG3I,kBAAuB+D,OAAO0I,EAAa,EAAG+D,KAAKtP,IAEjGmP,EAAWvI,EAAKa,EAAG3I,kBAAoB2I,EAAGvJ,eAAiB,EAAGsN,EAAS/D,EAAGvJ,eAAiB,EAAG8B,IAEzE,SAAdqC,EACTuE,EAAI4F,MAAMxM,EAAMyM,UACdG,KAAM5M,EAAM4M,KACZC,SAAUpF,EAAGvJ,eAEbyO,MAAOlF,EAAGtJ,gBACVqD,EAAGiG,EAAG3I,kBACN2C,EAAG+J,GAEkB,SAAdnJ,IACW,SAAhBD,EACF4N,EAASvI,EAAIb,EAAK5G,EAAOyH,EAAG3I,kBAAmBgR,EAAkBrI,EAAG3I,kBAAmB0M,EAAS/D,EAAGvJ,eAAiB,GAEpH+R,EAAUxI,EAAIb,EAAK5G,EAAOyH,EAAG3I,kBAAoB2I,EAAGvJ,eAAiB,EAAGsN,EAAS/D,EAAGvJ,eAAiB,GAIzG,IAAIgS,GAAkB,CACtB,IAAIR,EACFF,EAAMN,EAAaK,EAAUM,EAAa5P,EAAM,GAAIuO,GAAa,MAAQU,EAAaK,EAAUM,EAAaM,SAASlQ,IAAOuO,GAC7H9C,EAASjE,EAAIb,EAAK4I,EAAKM,EAAiBtE,EAAU0E,EAAiB,OAAQ,KAAM,KAAM,KAAM,cACxF,CACL,GAAIE,GAAeC,EAAgBjE,EAASnM,GAAMwH,EAAGzJ,YAAcyJ,EAAG3I,kBAAoBmQ,EACxFxH,EAAGxJ,iBAAkBwJ,EAAGvJ,eAE1BwN,GAASjE,EAAIb,EAAKwJ,EAAcnB,EAAazD,EAAU0E,EAAiB,OAAQ,KAAM,KAAM,KAAM,UAGpG1E,GAAWD,KAGb3E,EAAIhE,MAAQ6E,EAAGN,iBACfP,EAAI/D,OAASA,EAAyD,GAA/C4E,EAAG5I,kBAAoB4I,EAAG1I,mBAE1C6H,EAYT,QAASyJ,GAAgB9N,EAAMqF,EAAU0I,EAAYzD,GAInD,IAHA,GAAI0D,GAAYzE,EAAavJ,EAAM+N,EAAYzD,GAAU,GACrD2D,GAAW,EAERD,EAAY3I,GAAU,CAC3B4I,GAAW,CACX,IAAI7B,GAAQ/G,EAAW2I,EACnBhO,EAAOA,EAAKkO,OAAO,EAAGlO,EAAK0B,OAAS0K,EACxC4B,GAAYzE,EAAavJ,EAAM+N,EAAYzD,GAAU,GAOvD,MAJI2D,KACFjO,GAAQ,OAGHA,EAmBT,QAASmJ,GAASjE,EAAIb,EAAK6F,EAASjL,EAAGC,EAAGiP,EAAW/D,EAAO2D,EAAYzD,EAAU8D,GAChFhL,EAAgBiB,EAAK,QACnBpF,EAAGA,EACHC,EAAGA,EACHmP,cAAeF,EAAYA,EAAY,OACvCpB,KAAM3C,EAAQA,EAAQlF,EAAGtJ,gBACzB0S,YAAahE,EAAWA,EAAWpF,EAAGvJ,eACtC4S,cAAeR,EAAaA,EAAa7I,EAAGxJ,iBAC5C8S,qBAAsBJ,EAAgBA,EAAgB,QACrDlE,GAGL,QAAS0C,GAAWvI,EAAKpF,EAAGC,EAAGuP,EAAGrE,EAAOsE,EAAaC,GACpDvL,EAAgBiB,EAAK,UACnBuK,GAAG3P,EACH4P,GAAG3P,EACHuP,EAAEA,EACF1B,KAAK3C,EACL0E,OAAOJ,EACPK,eAAeJ,IAInB,QAASzF,GAAe7E,EAAKa,EAAI5E,GAC/Bf,EAAK8E,EAAK,QACRpF,EAAEiG,EAAG5I,kBACL4C,EAAEgG,EAAG5I,kBACL+D,MAAM6E,EAAGzJ,YACT6E,OAAOA,EACPwO,OAAO5J,EAAG9I,kBACV2S,eAAe7J,EAAG5I,kBAClByQ,KAAK7H,EAAG/I,sBACR6S,GAAG9J,EAAG7I,mBACN4S,GAAG/J,EAAG7I,qBAIV,QAASoR,GAASvI,EAAIb,EAAK9C,EAAM2N,EAAIC,EAAIjQ,EAAG6M,GAC1C,GAAIqD,GAAsB,IAAPrD,EACfsD,EAAqB,EAAPtD,EACduD,EAAUzJ,KAAK0J,KAAK,GAAK,EAAIH,CAEjC,IAAa,UAAT7N,EACFiO,EAASnL,EAAK6K,EAAIhQ,EAAGiQ,EAAKG,EAAU,EAAGpQ,EAAGgG,EAAGhJ,iBAAkB6P,GAC/D0D,EAAYpL,GAAM8K,EAAIjQ,EAAGiQ,EAAKG,EAASpQ,EAAIkQ,EAAe,EAAGD,EAAKG,EAASpQ,EAAIkQ,EAAe,GAAIlK,EAAGhJ,sBAChG,IAAa,aAATqF,EACTwK,GAAQ,GACRyD,EAASnL,EAAK6K,EAAIhQ,EAAI6M,EAAMoD,EAAIjQ,EAAI6M,EAAM7G,EAAGhJ,iBAAkB6P,GAC/DyD,EAASnL,EAAK6K,EAAIhQ,EAAI6M,EAAMoD,EAAIjQ,EAAI6M,EAAM7G,EAAGhJ,iBAAkB6P,OAC1D,IAAa,UAATxK,EACTmO,EAAUrL,EAAK6K,EAAIhQ,GAAIgQ,EAAKC,GAAM,EAAGjQ,EAAImQ,EAAaF,EAAIjQ,EAAGgG,EAAGhJ,iBAAkB6P,OAC7E,IAAa,gBAATxK,EAAwB,CACjC,GAAIoO,GACAC,EAAMT,EAAKD,CAIbS,GADQ,GAANC,EACM,GACO,GAANA,EACD,GAEA,GAGVF,EAAUrL,EAAK6K,EAAIhQ,GAAIgQ,EAAKC,GAAM,EAAGjQ,EAAImQ,EAAaF,EAAKC,EAAe,EAAGlQ,EAAI6M,EAAM7G,EAAGhJ,iBAAkB6P,GAC5G0D,EAAYpL,GAAM8K,EAAIjQ,EAAGiQ,EAAKG,EAASpQ,EAAIkQ,EAAe,EAAGD,EAAKG,EAASpQ,EAAIkQ,EAAe,GAClFlK,EAAGhJ,kBAAmByT,MAAMA,EAAOf,GAAGO,EAAIN,GAAG3P,QACpD,IAAa,WAATqC,EAAmB,CAC5B,GAAIsO,GAAY,KAChBL,GAASnL,EAAK6K,EAAIhQ,EAAGiQ,EAAIjQ,EAAGgG,EAAGhJ,iBAAkB6P,EAAM8D,OAClD,IAAa,WAATtO,EAAmB,CAC5B,GAAIuO,GAAe,GACnBN,GAASnL,EAAK6K,EAAIhQ,EAAGiQ,EAAIjQ,EAAGgG,EAAGhJ,iBAAkB6P,EAAM+D,OACrC,YAATvO,GACTkO,EAAYpL,GAAM6K,EAAIhQ,EAAI6M,EAAMmD,EAAIhQ,EAAI6M,EAAMoD,EAAIjQ,GAAIgG,EAAGhJ,kBAI7D,QAASwT,GAAUrL,EAAK6K,EAAIa,EAAIZ,EAAIa,EAAIC,EAAIC,EAAI9F,EAAO/J,GACrD,GAAI8P,GAAI,KAAOjB,EAAK,IAAMa,EAAK,MAAQZ,EAAK,IAAMa,EAAK,IAAMC,EAAK,IAAMC,CAExE9M,GAAgBiB,EAAK,QACnB8L,EAAEA,EACFrB,OAAO1E,EACP2E,eAAe1O,EACf0M,KAAK,SAIT,QAASW,GAAUxI,EAAIb,EAAK+L,EAAOnR,EAAGC,EAAG6M,GACvC,GACI4D,GADAU,IAGJ,IAAc,YAAVD,EACFrE,GAAQ,IACRsE,GAAWpR,EAAI8M,EAAO7M,EAAGD,EAAGC,EAAI6M,EAAM9M,EAAI8M,EAAM7M,EAAGD,EAAGC,EAAI6M,OACrD,IAAc,SAAVqE,EAAkB,CAC3BrE,GAAQ,IACR4D,GAAS9J,KAAKyK,GAAK,CAEnB,KAAK,GAAIzP,GAAI,EAAO,EAAJA,IAASA,EACvBwP,EAAS,EAAFxP,GAAOgF,KAAK0K,IAAIZ,GACvBU,EAAS,EAAFxP,EAAI,GAAKgF,KAAK2K,IAAIb,GACzBA,GAAmB,EAAV9J,KAAKyK,GAAS,MAEpB,IAAc,gBAAVF,EAAyB,CAClCrE,GAAQ,GACR,IAAI0E,GAAW,CAEfd,IAAS9J,KAAKyK,GAAK,CAEnB,KAAK,GAAIzP,GAAI,EAAO4P,EAAJ5P,IAAgBA,EAC9BwP,EAAS,EAAFxP,GAAOgF,KAAK0K,IAAIZ,GACvBU,EAAS,EAAFxP,EAAI,GAAKgF,KAAK2K,IAAIb,GACzBA,GAAmB,EAAV9J,KAAKyK,GAASG,MAEN,WAAVL,IACTC,GAAUpR,EAAI8M,EAAM7M,EAAI6M,EAAM9M,EAAI8M,EAAM7M,EAAI6M,EAAM9M,EAAI8M,EAAM7M,EAAI6M,EAAM9M,EAAI8M,EAAM7M,EAAI6M,GAGtF,IAAc,SAAVqE,GAA8B,gBAAVA,EACtB,IAAK,GAAIvP,GAAI,EAAGA,EAAIwP,EAAO3O,OAAQb,GAAK,EACtCwP,EAAOxP,GAAK5B,EAAIoR,EAAOxP,GAAKkL,EAC5BsE,EAAOxP,EAAE,GAAK3B,EAAImR,EAAOxP,EAAE,GAAKkL,CAIpC,IAAc,UAAVqE,EACFX,EAAYpL,EAAKgM,EAAQnL,EAAGhJ,sBACvB,CACL6P,GAAQ,GACR,IAAI2E,GAAY,EAAIzT,OAAOC,gBAC3BsS,GAASnL,EAAKpF,EAAI8M,EAAM7M,EAAGD,EAAI8M,EAAM7M,EAAGgG,EAAGhJ,iBAAkBwU,GAC7DlB,EAASnL,EAAKpF,EAAGC,EAAI6M,EAAM9M,EAAGC,EAAI6M,EAAM7G,EAAGhJ,iBAAkBwU,IAWjE,QAASjB,GAAYpL,EAAKgM,EAAQjG,EAAOuG,GAEvC,IAAK,GADDC,GAAaP,EAAO,GAAK,IAAMA,EAAO,GACjCxP,EAAI,EAAGA,EAAIwP,EAAO3O,OAAQb,GAAK,EACtC+P,GAAc,IAAMP,EAAOxP,GAAK,IAAMwP,EAAOxP,EAAE,EAGjD,IAAI0C,IAAc8M,OAAOO,EAAY7D,KAAK3C,EACtCuG,KACFpN,EAAWsN,UAAY,UAAYF,EAAShB,MAAQ,KAAOgB,EAAS/B,GAAK,KAAO+B,EAAS9B,GAAK,KAGhGzL,EAAgBiB,EAAK,UAAWd,GAGlC,QAASiM,GAASnL,EAAK6K,EAAIa,EAAIZ,EAAIa,EAAI5F,EAAO/J,EAAOwP,GACnDzM,EAAgBiB,EAAK,QACnB6K,GAAGA,EACHa,GAAGA,EACHZ,GAAGA,EACHa,GAAGA,EACHlB,OAAO1E,EACP2E,eAAe1O,EACfyQ,mBAAmBjB,IAIvB,QAAStQ,GAAK8E,EAAK9C,EAAMwP,GACvB3N,EAAgBiB,EAAK9C,EAAMwP,GAU7B,QAAStE,GAAgBvH,EAAIb,EAAK2M,EAAO/Q,GACvC,GAAID,IAAQgR,EAAMtP,OAASwD,EAAGlJ,qBAAuBgV,EAAMC,UAAU,EAAG/L,EAAGlJ,sBAAwBgV,IACvF/Q,EAAO,KAAOA,EAAO,IAAM,IACnCqK,EAAWkD,EAAexN,EAAMkF,EAAGrJ,sBAAuBqJ,EAAGpJ,oBAAqBoJ,EAAGzJ,YAAcyJ,EAAG3I,mBACtG+S,EAAsC,WAA5BpK,EAAGjJ,qBAAoCiJ,EAAGzJ,YAAc,EAAIyJ,EAAG3I,iBAE7E4M,GAASjE,EAAIb,EAAKrE,EAAMsP,EAASpK,EAAGvJ,eAAiBuJ,EAAG3I,kBAAmB2I,EAAGjJ,qBAC5EiJ,EAAGnJ,qBAAsBmJ,EAAGrJ,sBAAuByO,GAQvD,QAAST,GAASoD,GAChB,MAAOA,GAAIiE,OAAO,GAAGC,cAAgBlE,EAAImE,MAAM,GAAGC,QAAQ,KAAM,KAWlE,QAAS7D,GAAexN,EAAM+N,EAAYzD,EAAUjF,GAClD,KAAOkE,EAAavJ,EAAM+N,EAAYzD,GAAU,GAASjF,GACvDiF,GAAaA,EAAW,GAAK,EAAI,CAGnC,OAAOA,GAYT,QAASf,GAAavJ,EAAM+N,EAAYzD,EAAUgH,GAChD,MAAIA,GACK,IAAOhH,EAAWtK,EAAK0B,QAE9B6P,EAAOlH,KAAOC,EAAW,MAAQyD,EAC1BwD,EAAOC,YAAYxR,GAAMK,OAYpC,QAASsM,GAAavF,EAAQ6E,GAC5B,GAAIwF,IAAS,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAEhD,IAAIrK,EAAS,KAAM,CAEjB,IADA,GAAIvG,GAAI,EACDA,EAAI4Q,EAAM/P,QAAU0F,EAAS,KAClCA,GAAU,MACRvG,CAEJ,OAAOgF,MAAK6L,KAAKtK,GAAUqK,EAAM5Q,EAAE,GAC9B,MAAIoL,GACFpG,KAAKsG,MAAM/E,GAAQvD,WACR,GAATuD,GACDvB,KAAKsG,MAAe,IAAT/E,GAAiB,KAAMvD,WACxB,IAATuD,GACDvB,KAAKsG,MAAe,IAAT/E,GAAgB,KAAKvD,WACtB,IAATuD,GACDvB,KAAKsG,MAAe,GAAT/E,GAAe,IAAIvD,WAE9BgC,KAAKsG,MAAM/E,GAASvD,WAttChC,GAAqB,mBAAVzI,OACT,KAAM,uBAGRA,OAAME,MAAMC,IAAI,gBAqqChB,IAAIgW,GAASxT,SAASC,cAAc,UAAUsK,WAAW,MAqDrDqJ,IAOJvW,OAAMiC,QAAQuU,OAAS,SAAU9U,GAS/B,MARK6U,GAAiB7U,EAAE4L,MACtBiJ,EAAiB7U,EAAE4L,IAAM,GAAI7L,GAAaC,GAE1CA,EAAE+U,KAAK,OAAQ,WACbzW,MAAMiC,QAAQyU,WAAWhV,MAItB6U,EAAiB7U,EAAE4L,KAO5BtN,MAAMiC,QAAQyU,WAAa,SAAUhV,GACnC,GAAIiV,GAAiBJ,EAAiB7U,EAAE4L,GACpCqJ,KACFvU,EAAQuU,EAAehT,QAAS,SAAUtB,EAAOC,GAC/CqU,EAAehT,QAAQrB,GAAOd,IAEhC+U,EAAiB7U,EAAE4L,IAAM9L,IAQ7BC,EAAa+G,UAAUrE,KAAO,SAAU6E,GACtC,CAAA,GAAIrH,GAAOJ,IACMA,MAAKY,gBAAgBP,WAGtC6H,EAAmBlI,KAAM,WACvB+B,EAAW3B,GACPqH,GACFA,OASNvH,EAAa+G,UAAUoO,cAAgB,SAAUlT,GAC/CnC,KAAKmC,QAAUA,EACfJ,EAAW/B,OAObE,EAAa+G,UAAUqO,aAAe,SAAUC,GACmB,MAA5D,MAAO,SAAU,QAAS,QAAQjR,QAAQiR,KAI/CvV,KAAKkC,UAAYqT,EACjBxT,EAAW/B,QAYbE,EAAa+G,UAAUtE,UAAY,SAAUO,EAAaC,EAAWG,GACnE,GAAIkE,GAASxH,KAAKoC,QAAQoJ,EAAatI,EAAaC,GAUpD,OARKqE,KACHA,EAAS,GAAI3E,GAAa7C,KAAKmB,QAASnB,KAAKQ,eAAgBR,KAAKS,cAAeT,KAAMkD,EAAaC,GACpGqE,EAAOuE,GAAKP,EAAatI,EAAaC,GACtCnD,KAAKoC,QAAQoF,EAAOuE,IAAMvE,GAE5BA,EAAOlE,KAAOA,EACdmJ,EAAyBjF,GAElBA,GAQTtH,EAAa+G,UAAUuO,UAAY,SAAUtS,EAAaC,GACxD,MAAOnD,MAAKoC,QAAQoJ,EAAatI,EAAaC,KAQhDjD,EAAa+G,UAAUwO,cAAgB,SAAUpS,GAC/C,GAAImE,GAAS,GAAI3E,GAAa7C,KAAKmB,QAASnB,KAAKQ,eAAgBR,KAAKS,cAAeT,KAAM,OAQ3F,OANAwH,GAAOnE,KAAOA,EACdmE,EAAOuE,GAAK,OAAS/L,KAAKgC,oBAC1BhC,KAAKoC,QAAQoF,EAAOuE,IAAMvE,EAE1BiF,EAAyBjF,GAElBA,GASTtH,EAAa+G,UAAUyO,aAAe,SAAUC,EAAMC,GACpD,GAAI7J,GAAK4J,YAAgB9S,GAAe8S,EAAK5J,GAAKP,EAAamK,EAAMC,EACjE5V,MAAKoC,QAAQ2J,KACf/L,KAAKoC,QAAQ2J,GAAM9L,EACnB8B,EAAW/B,QAOfE,EAAa+G,UAAU4O,iBAAmB,WACxC7V,KAAKoC,WACLL,EAAW/B,OAOb6C,EAAaoE,UAAU6O,MAAQ,WAC7B9V,KAAKyD,QAAS,EACd1B,EAAW/B,KAAKoD,gBAUlBP,EAAaoE,UAAU8O,YAAc,SAAUzT,EAAGC,GAChDvC,KAAKyD,QAAS,EACdzD,KAAKsC,EAAIA,EACTtC,KAAKuC,EAAIA,EACTR,EAAW/B,KAAKoD,gBAOlBP,EAAaoE,UAAU+O,QAAU,SAAU3S,GACzCrD,KAAKqD,KAAOA,EACZoJ,EAAyBzM,OAO3B6C,EAAaoE,UAAUgP,QAAU,SAAU3S,GACzCtD,KAAKsD,KAAOA,EACZmJ,EAAyBzM,OAO3BE,EAAa+G,UAAUiP,eAAiB,SAAUC,GAChDnW,KAAK0C,YAAcyT,GAOrBjW,EAAa+G,UAAUmP,UAAY,SAAU/Q,GAC3C,GAAIgR,GAAarW,KAAKmC,QAClB/B,EAAOJ,IAGXI,GAAK+B,SAAU,EACf/B,EAAKwC,KAAK,WACR,GAAI0T,GAAYlV,SAASC,cAAc,UACrC8L,EAAMmJ,EAAU3K,WAAW,MAC3B4K,EAAMnW,EAAKiC,WAEbiU,GAAU5S,MAAQ6S,EAAI/T,EACtB8T,EAAU3S,OAAS4S,EAAI9T,EAEvB0K,EAAIC,UAAUhN,EAAKe,QAASoV,EAAIjU,EAAGiU,EAAIhU,EAAGgU,EAAI/T,EAAG+T,EAAI9T,EAAG,EAAG,EAAG8T,EAAI/T,EAAG+T,EAAI9T,GACzErC,EAAKiV,cAAcgB,GAEnBlR,EAASmR,EAAUE,YAAanR,EAAWA,EAAW,cAAc,MASxEnF,EAAa+G,UAAUwP,UAAY,SAAUpR,GAC3C,GAAIjF,GAAOJ,IACXA,MAAK4C,KAAK,WACR,GAAI2F,GAAKnI,EAAKQ,gBACZ2V,EAAMnW,EAAKiC,YACX0B,EAAM,IAEP3D,EAAKsC,iBAAmBmH,QAAQ,SAAU6M,GACzC3S,GAAO,0CAA4C2S,EAAM,WAG3D3S,GAAO,2GAA6GwS,EAAI/T,EAAI,eAAiB+T,EAAI9T,EAAI,OACrJ5B,EAAQT,EAAKgC,QAAS,SAAUoF,GAC9B,GAAmB,OAAfA,EAAOE,IAAX,CAMA,GAFA3D,GAAO,4BAA8ByD,EAAOlF,GAAMiU,EAAIjU,GAAK,KAAOkF,EAAOjF,EAAIgU,EAAIhU,GAAK,MACtFwB,GAAOyD,EAAOE,IAAIC,UACO,SAArBH,EAAOrE,UAAsB,CAC/B,GAAIwT,GAASvV,SAASC,cAAc,MACpCR,GAAQ2G,EAAOE,IAAI4F,MAAO,SAAUxM,EAAOyM,GACzCf,EAASjE,EAAIoO,EAAQpJ,EAASzM,EAAMwB,EAAGxB,EAAMyB,EAAG,OAAQgG,EAAGtJ,gBAAiB6B,EAAM4M,KAChFnF,EAAGvJ,eAAgB,aAEvB+E,GAAO4S,EAAOhP,UAEhB5D,GAAO,UAETA,GAAO,SAEPoB,EAASpB,EAAKsB,EAAWA,EAAW,kBAIvCtF,KAAKC"}