{"version":3,"sources":["angular-permission.js"],"names":["angular","module","service","$q","PermissionMap","PermissionStore","RoleStore","authorize","permissionsMap","toParams","handleAuthorization","deferred","defer","exceptPromises","findMatchingPermissions","except","all","then","rejectedPermissions","length","reject","onlyPromises","only","resolvedPermissions","resolve","rejectedPermission","promise","permissionNames","map","permissionName","hasRoleDefinition","handleRoleValidation","hasPermissionDefinition","handlePermissionValidation","roleName","dfd","role","getRoleDefinition","validationResult","validateRole","permission","getPermissionDefinition","validatePermission","this","directive","$log","Authorization","restrict","link","scope","element","attrs","$eval","removeClass","addClass","e","error","message","config","$stateProvider","decorator","state","parentFn","self","getState","run","$rootScope","$state","$on","event","toState","fromState","fromParams","options","areSetStatePermissions","data","permissions","setStateAuthorizationStatus","status","extend","$$isAuthorizationFinished","areStateEventsDefaultPrevented","isStateChangePermissionStartDefaultPrevented","isStateChangeStartDefaultPrevented","compensatePermissionMap","statePermissionMap","permissionMap","redirectTo","toStatePath","get","name","path","reverse","forEach","extendPermissionMap","authorizeForState","$broadcast","goToState","redirectToState","go","notify","defaultPrevented","preventDefault","compensatedPermissionMap","factory","Permission","validationFunction","validateConstructor","wrapInPromise","func","isString","TypeError","isFunction","prototype","call","resolvePermissionMapProperty","handleFunctionRedirect","redirectFunction","when","redirectState","handleStringRedirect","handleObjectRedirect","redirectObject","isDefined","ReferenceError","property","isArray","concat","rejectedPermissionName","isObject","Role","defineManyPermissions","promises","definePermission","permissionStore","removePermissionDefinition","getStore","clearStore","defineRole","roleStore","removeRoleDefinition"],"mappings":"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","file":"angular-permission.min.js"}