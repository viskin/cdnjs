{"version":3,"sources":["angular-permission.js"],"names":["permission","angular","module","config","$stateProvider","decorator","state","parentFn","self","getState","run","$rootScope","$state","$q","Authorization","PermissionMap","$on","event","toState","toParams","fromState","fromParams","options","areSetStatePermissions","isDefined","data","permissions","setStateAuthorizationStatus","status","extend","$$isAuthorizationFinished","isAuthorizationFinished","areStateEventsDefaultPrevented","isStateChangePermissionStartDefaultPrevented","isStateChangeStartDefaultPrevented","compensatePermissionMap","statePermissionMap","permissionMap","redirectTo","toStatePath","get","name","path","slice","reverse","forEach","extendPermissionMap","authorizeForState","authorize","then","$broadcast","go","rejectedPermission","redirectToState","defaultPrevented","preventDefault","compensatedPermissionMap","factory","this","only","resolvePermissionMapProperty","except","handleFunctionRedirect","redirectFunction","when","call","redirectState","isString","TypeError","handleStringRedirect","handleObjectRedirect","redirectObject","ReferenceError","isFunction","property","isArray","prototype","concat","rejectedPermissionName","isObject","Permission","permissionName","validationFunction","validateConstructor","wrapInPromise","result","dfd","defer","resolve","reject","promise","validatePermission","validationResult","PermissionStore","Role","roleName","permissionNames","defineManyPermissions","length","validateRole","promises","map","hasPermissionDefinition","getPermissionDefinition","all","service","definePermission","permissionStore","removePermissionDefinition","getStore","clearStore","defineRole","roleStore","removeRoleDefinition","hasRoleDefinition","getRoleDefinition","directive","$log","restrict","bindToController","controllerAs","controller","$scope","$element","$watchGroup","removeClass","addClass","e","error","message","RoleStore","permissionsMap","handleAuthorization","deferred","exceptPromises","findMatchingPermissions","rejectedPermissions","onlyPromises","resolvedPermissions","counter","results","key","value","hasOwnProperty","reason","role"],"mappings":"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","file":"angular-permission.min.js"}