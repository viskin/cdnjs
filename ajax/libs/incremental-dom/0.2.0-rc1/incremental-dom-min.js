!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.IncrementalDOM={})}(this,function(t){"use strict";function e(t,e){this.attrs={},this.attrsArr=[],this.newAttrs={},this.key=e,this.keyMap=null,this.lastVisitedChild=null,this.nodeName=t,this.text=null}function n(t){this.stack_=[],this.currentNode=t,this.doc=t.ownerDocument,this.nsStack_=[void 0]}var r,i=function(){return r},a=function(t){r=t},o=function(t,n,r){var i=new e(n,r);return t.__incrementalDOMData=i,i},u=function(t){var e=t.__incrementalDOMData;if(!e){var n=t.nodeName.toLowerCase(),r=null;t instanceof Element&&(r=t.getAttribute("key")),e=o(t,n,r)}return e},s="http://www.w3.org/2000/svg",c=function(t){"svg"===t?i().enterNamespace(s):"foreignObject"===t&&i().enterNamespace(void 0)},f=function(t){("svg"===t||"foreignObject"===t)&&i().exitNamespace()},l=function(t){return"svg"===t?s:i().getCurrentNamespace()},p=function(t){var e=u(t);c(e.nodeName)},d=function(t){var e=u(t);f(e.nodeName)},h=function(t){var e=i(),n=e.getCurrentParent(),r=u(n);r.lastVisitedChild=t},v=function(){var t=i();p(t.currentNode),t.firstChild()},g=function(){var t=i();h(t.currentNode),t.nextSibling()},m=function(){var t=i();t.parentNode(),d(t.currentNode)};n.prototype.getCurrentParent=function(){return this.stack_[this.stack_.length-1]},n.prototype.getCurrentNamespace=function(){return this.nsStack_[this.nsStack_.length-1]},n.prototype.enterNamespace=function(t){this.nsStack_.push(t)},n.prototype.exitNamespace=function(){this.nsStack_.pop()},n.prototype.firstChild=function(){this.stack_.push(this.currentNode),this.currentNode=this.currentNode.firstChild},n.prototype.nextSibling=function(){this.currentNode=this.currentNode.nextSibling},n.prototype.parentNode=function(){this.currentNode=this.stack_.pop()};var y={applyAttr:function(t,e,n){var r=typeof n;"object"===r||"function"===r?t[e]=n:void 0===n?t.removeAttribute(e):t.setAttribute(e,n)},applyStyle:function(t,e){if("string"==typeof e)t.style.cssText=e;else{t.style.cssText="";for(var n in e)t.style[n]=e[n]}},updateAttribute:function(t,e,n){var r=u(t),i=r.attrs;i[e]!==n&&("style"===e?y.applyStyle(t,n):y.applyAttr(t,e,n),i[e]=n)}};t.attributes=y;var N=function(t,e,n,r){var i,a=l(e);if(i=a?t.createElementNS(a,e):t.createElement(e),o(i,e,n),r)for(var u=0;u<r.length;u+=2)y.updateAttribute(i,r[u],r[u+1]);return i},k=function(t,e,n,r){return"#text"===e?t.createTextNode(""):N(t,e,n,r)},x=function(t){for(var e={},n=t.children,r=n.length,i=0;r>i;i+=1){var a=n[i],o=u(a).key;o&&(e[o]=a)}return e},C=function(t){var e=u(t);return e.keyMap||(e.keyMap=x(t)),e.keyMap},b=function(t,e){return C(t)[e]},_=function(t,e,n){C(t)[e]=n},A=function(t,e,n){var r=u(t);return n==r.key&&e===r.nodeName},S=function(t,e,n){var r,a=i(),o=a.currentNode,u=a.getCurrentParent();if(o&&A(o,t,e))r=o;else{var s=e&&b(u,e);s&&A(s,t,e)?r=s:(r=k(a.doc,t,e,n),e&&_(u,e,r)),u.insertBefore(r,o),a.currentNode=r}return r},w=function(t){var e=u(t),n=t.lastChild,r=e.lastVisitedChild;if(e.lastVisitedChild=null,n!==r){for(;n!==r;)t.removeChild(n),n=t.lastChild;e.keyMap=null}},M=function(t,e,r){var o=i();a(new n(t)),v(),e(r),m(),w(t),a(o)};t.patch=M;var O=3,D=[],V=function(t,e,n,r){for(var i=S(t,e,n),a=u(i),o=a.attrsArr,s=!1,c=O,f=0;c<arguments.length;c+=1,f+=1)if(o[f]!==arguments[c]){s=!0;break}for(;c<arguments.length;c+=1,f+=1)o[f]=arguments[c];if(f<o.length&&(s=!0,o.length=f),s){var l=a.newAttrs;for(var p in l)l[p]=void 0;for(var c=O;c<arguments.length;c+=2)l[arguments[c]]=arguments[c+1];for(var p in l)y.updateAttribute(i,p,l[p])}return v(),i},j=function(t,e,n){D[0]=t,D[1]=e,D[2]=n},E=function(t,e){D.push(t,e)},P=function(){var t=V.apply(null,D);return D.length=0,t},T=function(t){m();var e=i().currentNode;return w(e),g(),e},B=function(t,e,n,r){var i=V.apply(null,arguments);return T.apply(null,arguments),i},I=function(t,e){var n=S("#text",null),r=u(n);if(r.text!==t){r.text=t;for(var i=t,a=1;a<arguments.length;a+=1)i=arguments[a](i);n.data=i}g()};t.elementVoid=B,t.elementOpenStart=j,t.elementOpenEnd=P,t.elementOpen=V,t.elementClose=T,t.text=I,t.attr=E});
//# sourceMappingURL=incremental-dom-min.js.map