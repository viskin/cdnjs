/**
 * @license
 * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.IncrementalDOM={})}(this,function(e){"use strict";function t(e,t){this.attrs=o(),this.attrsArr=[],this.newAttrs=o(),this.key=t,this.keyMap=null,this.keyMapValid=!0,this.nodeName=e,this.text=null}function n(){this.created=M.nodesCreated&&[],this.deleted=M.nodesDeleted&&[]}var r=Object.prototype.hasOwnProperty,i=Object.create,l=function(e,t){return r.call(e,t)},o=function(){return i(null)},a=function(e,n,r){var i=new t(n,r);return e.__incrementalDOMData=i,i},u=function(e){var t=e.__incrementalDOMData;if(!t){var n=e.nodeName.toLowerCase(),r=null;e instanceof Element&&(r=e.getAttribute("key")),t=a(e,n,r)}return t},f={"default":"__default",placeholder:"__placeholder"},c=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},d=function(e,t,n){if(null==n)e.removeAttribute(t);else{var r=c(t);r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}},s=function(e,t,n){e[t]=n},p=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var r=e.style,i=n;for(var o in i)l(i,o)&&(r[o]=i[o])}},h=function(e,t,n){var r=typeof n;"object"===r||"function"===r?s(e,t,n):d(e,t,n)},v=function(e,t,n){var r=u(e),i=r.attrs;if(i[t]!==n){var l=y[t]||y[f["default"]];l(e,t,n),i[t]=n}},y=o();y[f["default"]]=h,y[f.placeholder]=function(){},y.style=p;var m=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===u(t).nodeName?null:t.namespaceURI},k=function(e,t,n,r,i){var l=m(n,t),o=void 0;if(o=l?e.createElementNS(l,n):e.createElement(n),a(o,n,r),i)for(var u=0;u<i.length;u+=2)v(o,i[u],i[u+1]);return o},g=function(e){var t=e.createTextNode("");return a(t,"#text",null),t},x=function(e){for(var t=o(),n=e.firstElementChild;n;){var r=u(n).key;r&&(t[r]=n),n=n.nextElementSibling}return t},w=function(e){var t=u(e);return t.keyMap||(t.keyMap=x(e)),t.keyMap},C=function(e,t){return t?w(e)[t]:null},b=function(e,t,n){w(e)[t]=n},M={nodesCreated:null,nodesDeleted:null};n.prototype.markCreated=function(e){this.created&&this.created.push(e)},n.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},n.prototype.notifyChanges=function(){this.created&&this.created.length>0&&M.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&M.nodesDeleted(this.deleted)};var O=null,D=null,N=null,A=null,_=null,E=function(e){var t=function(t,r,i){var l=O,o=A,a=_,u=D,f=N;O=new n,A=t,_=t.ownerDocument,N=t.parentNode,e(t,r,i),O.notifyChanges(),O=l,A=o,_=a,D=u,N=f};return t},S=E(function(e,t,n){D=e,T(),t(n),B()}),j=E(function(e,t,n){D={nextSibling:e},t(n)}),I=function(e,t){var n=u(D);return e===n.nodeName&&t==n.key},V=function(e,t,n){if(!D||!I(e,t)){var r=void 0;t&&(r=C(N,t)),r||(r="#text"===e?g(_):k(_,N,e,t,n),t&&b(N,t,r),O.markCreated(r)),D&&u(D).key?(N.replaceChild(r,D),u(N).keyMapValid=!1):N.insertBefore(r,D),D=r}},P=function(){var e=N,t=u(e),n=t.keyMap,r=t.keyMapValid,i=e.lastChild,l=void 0;if(!(i===D&&r||t.attrs[f.placeholder]&&e!==A)){for(;i!==D;)e.removeChild(i),O.markDeleted(i),l=u(i).key,l&&delete n[l],i=e.lastChild;if(!r){for(l in n)i=n[l],i.parentNode!==e&&(O.markDeleted(i),delete n[l]);t.keyMapValid=!0}}},T=function(){N=D,D=null},L=function(){D=D?D.nextSibling:N.firstChild},B=function(){P(),D=N,N=N.parentNode},R=function(e,t,n){return L(),V(e,t,n),T(),N},U=function(){return B(),D},X=function(){return L(),V("#text",null,null),D},q=function(){return N},z=function(){D=N.lastChild},F=3,G=[],H=function(e,t,n){for(var r=R(e,t,n),i=u(r),l=i.attrsArr,o=i.newAttrs,a=!1,f=F,c=0;f<arguments.length;f+=1,c+=1)if(l[c]!==arguments[f]){a=!0;break}for(;f<arguments.length;f+=1,c+=1)l[c]=arguments[f];if(c<l.length&&(a=!0,l.length=c),a){for(f=F;f<arguments.length;f+=2)o[arguments[f]]=arguments[f+1];for(var d in o)v(r,d,o[d]),o[d]=void 0}return r},J=function(e,t,n){G[0]=e,G[1]=t,G[2]=n},K=function(e,t){G.push(e,t)},Q=function(){var e=H.apply(null,G);return G.length=0,e},W=function(){var e=U();return e},Y=function(e){return H.apply(null,arguments),W(e)},Z=function(e){return H.apply(null,arguments),z(),W(e)},$=function(e){var t=X(),n=u(t);if(n.text!==e){n.text=e;for(var r=e,i=1;i<arguments.length;i+=1){var l=arguments[i];r=l(r)}t.data=r}return t};e.patch=S,e.patchInner=S,e.patchOuter=j,e.currentElement=q,e.skip=z,e.elementVoid=Y,e.elementOpenStart=J,e.elementOpenEnd=Q,e.elementOpen=H,e.elementClose=W,e.elementPlaceholder=Z,e.text=$,e.attr=K,e.symbols=f,e.attributes=y,e.applyAttr=d,e.applyProp=s,e.notifications=M});

//# sourceMappingURL=incremental-dom-min.js.map