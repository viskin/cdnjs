(function(a){var b={url:false,icon:true,callback:false,target:false,duration:120,on:"mouseover"};a.zoom=function(i,c,f){var k,j,d,h,e,g=a(i).css("position");a(i).css({position:/(absolute|fixed)/.test()?g:"relative",overflow:"hidden"});a(f).addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:f.width,height:f.height,border:"none",maxWidth:"none"}).appendTo(i);return{init:function(){k=a(i).outerWidth();j=a(i).outerHeight();d=(f.width-k)/a(c).outerWidth();h=(f.height-j)/a(c).outerHeight();e=a(c).offset()},move:function(n){var m=(n.pageX-e.left),l=(n.pageY-e.top);l=Math.max(Math.min(l,j),0);m=Math.max(Math.min(m,k),0);f.style.left=(m*-d)+"px";f.style.top=(l*-h)+"px"}}};a.fn.zoom=function(c){return this.each(function(){var h=a.extend({},b,c||{}),j=h.target||this,i=this,d=new Image(),f=a(d),g="mousemove",e=false;if(!h.url){h.url=a(i).find("img").attr("src");if(!h.url){return}}if(h.icon){a('<div class="zoomIcon"/>').appendTo(a(i))}d.onload=function(){var l=a.zoom(j,i,d);function m(n){l.init();l.move(n);f.stop().fadeTo(a.support.opacity?h.duration:0,1)}function k(){f.stop().fadeTo(h.duration,0)}if(h.on==="grab"){a(i).mousedown(function(n){a(document).one("mouseup",function(){k();a(document).unbind(g,l.move)});m(n);a(document)[g](l.move);n.preventDefault()})}else{if(h.on==="click"){a(i).click(function(n){if(e){return}else{e=true;m(n);a(document)[g](l.move);a(document).one("click",function(){k();e=false;a(document).unbind(g,l.move)});return false}})}else{l.init();a(i).hover(m,k)[g](l.move)}}if(a.isFunction(h.callback)){h.callback.call(d)}};d.src=h.url})};a.fn.zoom.defaults=b}(window.jQuery));