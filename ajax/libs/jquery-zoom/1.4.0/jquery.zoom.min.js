(function(a){var b={url:false,icon:true,callback:false,target:false,duration:120,on:"mouseover"};a.fn.zoom=function(c){return this.each(function(){var g=a.extend({},b,c||{}),l=g.target||this,f=a(l),d=this,k=a(d),h=new Image(),e=a(h),m,i=f.css("position"),j="mousemove",n=false;f.css({position:/(absolute|fixed)/.test(i)?i:"relative",overflow:"hidden"});if(!g.url){g.url=k.find("img").attr("src");if(!g.url){return}}if(g.icon){m=a('<div class="zoomIcon"/>').appendTo(k)}h.onload=function(){var y,x,p,t,r,w,s=k.offset();function u(){y=f.outerWidth();x=f.outerHeight();p=(h.width-y)/k.outerWidth();t=(h.height-x)/k.outerHeight()}function q(z){r=(z.pageX-s.left);w=(z.pageY-s.top);if(r>y){r=y}else{if(r<0){r=0}}if(w>x){w=x}else{if(w<0){w=0}}h.style.left=(r*-p)+"px";h.style.top=(w*-t)+"px";z.preventDefault()}function o(z){s=k.offset();u();q(z);e.stop().fadeTo(a.support.opacity?g.duration:0,1)}function v(){e.stop().fadeTo(g.duration,0)}e.addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:h.width,height:h.height,border:"none",maxWidth:"none"}).appendTo(f);if(g.on==="grab"){k.mousedown(function(z){s=k.offset();a(document).one("mouseup",function(){v();a(document).unbind(j,q)});o(z);a(document)[j](q);z.preventDefault()})}else{if(g.on==="click"){k.click(function(z){if(n){return}else{n=true;o(z);a(document)[j](q);a(document).one("click",function(){v();n=false;a(document).unbind(j,q)});return false}})}else{u();k.hover(o,v)[j](q)}}if(a.isFunction(g.callback)){g.callback.call(h)}};h.src=g.url})};a.fn.zoom.defaults=b}(window.jQuery));