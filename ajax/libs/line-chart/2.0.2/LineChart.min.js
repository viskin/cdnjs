var n3Charts;(function(e){"use strict";var t=function(){function t(t,n,r,i){var s=this;this.$window=t,this.$parse=n,this.$timeout=r,this.$rootScope=i,this.scope={data:"=",options:"=",styles:"=",hoveredCoordinates:"="},this.restrict="E",this.replace=!0,this.template="<div></div>",this.link=function(t,n,r){var i=new e.Utils.EventManager,o=new e.Utils.FactoryManager;i.init(e.Utils.EventManager.EVENTS),o.registerMany([["container",e.Factory.Container,n[0]],["tooltip",e.Factory.Tooltip,n[0]],["legend",e.Factory.Legend,n[0]],["transitions",e.Factory.Transition],["x-axis",e.Factory.Axis,e.Utils.AxisOptions.SIDE.X],["y-axis",e.Factory.Axis,e.Utils.AxisOptions.SIDE.Y],["y2-axis",e.Factory.Axis,e.Utils.AxisOptions.SIDE.Y2],["grid",e.Factory.Grid],["zoom",e.Factory.Zoom],["series-area",e.Factory.Series.Area],["series-column",e.Factory.Series.Column],["series-line",e.Factory.Series.Line],["series-dot",e.Factory.Series.Dot]]),o.all().forEach(function(e){return e.instance.init(e.key,i,o)});var u=t.options===undefined,a,f,l=function(){f=new e.Utils.Options(angular.copy(t.options)),a=new e.Utils.Data(angular.copy(t.data)),u&&(u=!1,i.trigger("create",f),i.trigger("resize",n[0].parentElement)),i.update(a,f),i.trigger("update",a,f)};u||(i.trigger("create",new e.Utils.Options(angular.copy(t.options))),i.trigger("resize",n[0].parentElement)),t.$watch("[options, data]",l,!0),i.on("legend-click.directive",function(e){var n=t.options.series.filter(function(t){return t.id===e.id})[0];n.visible=e.getToggledVisibility(),t.$apply()}),r.syncKey&&(s.$rootScope.$on(r.syncKey,function(e,t){if(!a||!f)return;o.get("tooltip").showFromCoordinates(t,a,f)}),i.on("container-move.directive",function(e){t.$emit(r.syncKey,o.get("container").getCoordinatesFromEvent(e))}),i.on("container-out.directive",function(){t.$emit(r.syncKey,{x:undefined,y:undefined})})),t.elementDimensions={};var c=s.$timeout,h=function(e,t){var n=null;return function(){var r=[];for(var i=0;i<arguments.length;i++)r[i-0]=arguments[i];c.cancel(n),n=c(function(){return e.apply(s,r)},t)}},p=h(function(e){var r=n[0].parentElement.getBoundingClientRect();t.elementDimensions.height=r.height,t.elementDimensions.width=r.width,t.elementDimensions.left=r.left,t.elementDimensions.right=r.right,t.elementDimensions.bottom=r.bottom,t.elementDimensions.top=r.top,t.$apply()},50);angular.element(s.$window).on("resize",p),t.$watch("elementDimensions",function(){i.trigger("resize",n[0].parentElement),l()},!0),t.$on("$destroy",function(){i.trigger("destroy"),angular.element(s.$window).off()})}}return t}();e.LineChart=t})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){}return e.prototype.init=function(e){return this._dispatch=d3.dispatch.apply(this,e),this},e.prototype.update=function(e,t){this.data=e,this.options=t;return},e.prototype.on=function(e,t){return this._dispatch.on(e,t),this},e.prototype.trigger=function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._dispatch[e].apply(this,t),this},e.prototype.triggerDataAndOptions=function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.push(this.data),t.push(this.options),this._dispatch[e].apply(this,t),this},e.prototype.datumEnter=function(e,t){var n=this;return function(r){return r.on("mouseenter",function(r,i){n.trigger("enter",r,i,e,t)})}},e.prototype.datumOver=function(e,t){var n=this;return function(r){return r.on("mouseover",function(r,i){n.trigger("over",r,i,e,t)})}},e.prototype.datumMove=function(e,t){var n=this;return function(r){return r.on("mousemove",function(r,i){n.trigger("over",r,i,e,t)})}},e.prototype.datumLeave=function(e,t){var n=this;return function(r){return r.on("mouseleave",function(r,i){n.trigger("leave",r,i,e,t)})}},e.EVENTS=["create","update","resize","destroy","enter","over","move","leave","click","dblclick","legend-click","legend-over","legend-out","container-over","container-move","container-out","focus","toggle","zoom"],e}();e.EventManager=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){this._factoryStack=[]}return e.prototype.index=function(e){return this._factoryStack.map(function(e){return e.key}).indexOf(e)},e.prototype.get=function(e){var t=this.index(e);return t>-1?this._factoryStack[t].instance:null},e.prototype.all=function(){return this._factoryStack},e.prototype.registerMany=function(e){var t=this;return e.forEach(function(e){t.register.apply(t,e)}),this},e.prototype.register=function(e,t){var n=[];for(var r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t.bind.apply(t,[null].concat(n)),s=new i;return this._factoryStack.push({key:e,instance:s}),s},e.prototype.unregister=function(e){var t=this.index(e);return t>-1&&delete this._factoryStack[t],this},e}();e.FactoryManager=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){}return e.prototype.init=function(e,t,n){this.key=e,this.eventMgr=t,this.factoryMgr=n,this.eventMgr.on("create."+this.key,this.create.bind(this)),this.eventMgr.on("update."+this.key,this.update.bind(this)),this.eventMgr.on("destroy."+this.key,this.destroy.bind(this))},e.prototype.create=function(e){},e.prototype.update=function(e,t){},e.prototype.destroy=function(){},e}();e.BaseFactory=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},n3Charts;(function(e){var t;(function(e){"use strict";var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.update=function(e,t){this.data=e,this.options=t,this.softUpdate()},t.prototype.softUpdate=function(){var e=this.options.getSeriesByType(this.type).filter(function(e){return e.visible});this.updateSeriesContainer(e)},t.prototype.create=function(){this.createContainer(this.factoryMgr.get("container").data),this.eventMgr.on("zoom."+this.type,this.softUpdate.bind(this))},t.prototype.destroy=function(){this.svg.remove()},t.prototype.createContainer=function(e){this.svg=e.append("g").attr("class",this.type+t.containerClassSuffix)},t.prototype.updateSeriesContainer=function(e){var n=this,r=this.svg.selectAll("."+this.type+t.seriesClassSuffix).data(e,function(e){return e.id});r.enter().append("g").attr({"class":function(e){return n.type+t.seriesClassSuffix+" "+e.id}}),this.styleSeries(r),this.updateSeries(r,e),r.exit().remove()},t.prototype.updateSeries=function(e,t){var n=this;e.each(function(e,r){var i=d3.select(this);n.updateData(i,e,r,t.length)})},t.prototype.updateData=function(e,t,n,r){},t.prototype.styleSeries=function(e){},t.containerClassSuffix="-data",t.seriesClassSuffix="-series",t}(e.BaseFactory);e.SeriesFactory=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(e,t){this.fromJS(e,t)}return e.prototype.fromJS=function(e,t){this.id=t,this.values=e},e}();e.Dataset=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(e){e&&this.fromJS(e)}return t.prototype.fromJS=function(t){for(var n in t)t.hasOwnProperty(n)&&(t[n]=new e.Dataset(t[n],n));this.sets=t},t.prototype.getDatasets=function(e,t){var n=this;return e.map(function(e){return n.getDatasetValues(e,t)})},t.prototype.getDatasetValues=function(e,t){var n=t.getAbsKey(),r;return e.key.y0?r=function(t){return{x:t[n],y1:t[e.key.y1],y0:t[e.key.y0]}}:r=function(t){return{x:t[n],y1:t[e.key.y1],y0:0}},this.sets[e.dataset].values.map(r)},t.getMinDistance=function(e,t,n,r){return n===void 0&&(n="x"),d3.min(e.map(function(e){return e.map(function(e){return t(e[n])}).filter(function(e){return r?e>=r[0]&&e<=r[1]:!0}).reduce(function(e,t,n,r){var i=n>0?t-r[n-1]:Number.MAX_VALUE;return i<e?i:e},Number.MAX_VALUE)}))},t}();e.Data=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(t){t===void 0&&(t={}),this.axis="y",this.type=["line"],this.visible=!0,this.defined=function(e){return!0};var n=this.sanitizeOptions(t);this.id=n.id||e.Options.uuid(),this.axis=n.axis,this.interpolation=n.interpolation,this.dataset=n.dataset,this.key=n.key,this.color=n.color,this.visible=n.visible,this.label=n.label||n.id,n.defined&&(this.defined=n.defined),n.type.length>0&&(this.type=this.sanitizeType(n.type))}return t.prototype.sanitizeOptions=function(t){var n={};return angular.extend(n,this,t),n.axis=this.sanitizeAxis(n.axis),n.interpolation=this.sanitizeInterpolation(n.interpolation),n.id=e.Options.getString(n.id),n.type=e.Options.getArray(n.type),n.dataset=e.Options.getString(n.dataset),n.key=this.sanitizeKeys(n.key),n.color=e.Options.getString(n.color),n.label=e.Options.getString(n.label),n.visible=e.Options.getBoolean(n.visible),n.defined=e.Options.getFunction(n.defined),n},t.prototype.sanitizeInterpolation=function(t){return t?{mode:e.Options.getString(t.mode,"linear"),tension:e.Options.getNumber(t.tension,.7)}:{mode:"linear",tension:.7}},t.prototype.sanitizeKeys=function(t){return t?typeof t=="string"?{y1:e.Options.getString(t)}:{y0:e.Options.getString(t.y0),y1:e.Options.getString(t.y1)}:{y1:undefined}},t.prototype.getToggledVisibility=function(){return!this.visible},t.prototype.sanitizeType=function(e){return e.filter(function(e){return t.isValidType(e)?!0:(console.warn("Unknow series type : "+e),!1)})},t.prototype.sanitizeAxis=function(e){if(["y"].indexOf(e)===-1)throw TypeError(e+" is not a valid series option for axis.");return e},t.prototype.isAColumn=function(){return this.hasType(t.TYPE.COLUMN)},t.prototype.isDashed=function(){return this.type.indexOf(t.TYPE.DASHED_LINE)!==-1},t.prototype.hasType=function(e){return e===t.TYPE.LINE?this.type.indexOf(e)!==-1||this.type.indexOf(t.TYPE.DASHED_LINE)!==-1:this.type.indexOf(e)!==-1},t.prototype.hasTwoKeys=function(){return this.key.y0!==undefined},t.isValidType=function(e){return d3.values(t.TYPE).indexOf(e)!==-1},t.TYPE={DOT:"dot",LINE:"line",DASHED_LINE:"dashed-line",AREA:"area",COLUMN:"column"},t}();e.SeriesOptions=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(e){e===void 0&&(e={}),this.type="linear",this.key="x",this.ticksShift={x:0,y:0},this.parse(e)}return t.prototype.parse=function(n){this.type=e.Options.getString(n.type,"linear"),this.key=n.key,this.tickFormat=e.Options.getFunction(n.tickFormat),this.ticks=n.ticks,n.ticksShift&&(this.ticksShift={x:e.Options.getNumber(n.ticksShift.x,0),y:e.Options.getNumber(n.ticksShift.y,0)}),this.type===t.TYPE.LINEAR?(this.min=e.Options.getNumber(n.min,undefined),this.max=e.Options.getNumber(n.max,undefined)):this.type===t.TYPE.DATE&&(this.min=e.Options.getDate(n.min,undefined),this.max=e.Options.getDate(n.max,undefined))},t.isValidSide=function(e){return d3.values(t.SIDE).indexOf(e)!==-1},t.prototype.configure=function(e){return e.tickFormat(this.tickFormat),this.ticks instanceof Array?e.tickValues(this.ticks):typeof this.ticks=="number"&&e.ticks(this.ticks),e},t.SIDE={X:"x",Y:"y",Y2:"y2"},t.TYPE={LINEAR:"linear",DATE:"date",LOG:"log"},t}();e.AxisOptions=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(e){this.series=[],this.pan={x:!1,y:!1},this.axes={x:{},y:{}},this.margin={top:0,left:40,bottom:40,right:40},this.grid={x:!1,y:!0};var t=this.sanitizeOptions(e);this.margin=t.margin,this.series=t.series,this.axes=t.axes,this.pan=t.pan,this.grid=t.grid,this.tooltipHook=t.tooltipHook}return t.prototype.sanitizeOptions=function(e){var n={};return angular.extend(n,this,e),n.margin=this.sanitizeMargin(t.getObject(n.margin,this.margin)),n.series=this.sanitizeSeries(t.getArray(n.series)),n.axes=this.sanitizeAxes(t.getObject(n.axes,this.axes)),n.grid=this.sanitizeTwoAxesOptions(n.grid,this.grid),n.pan=this.sanitizeTwoAxesOptions(n.pan,this.pan),n.tooltipHook=t.getFunction(n.tooltipHook),n},t.prototype.sanitizeMargin=function(e){return{top:t.getNumber(e.top,0),left:t.getNumber(e.left,0),bottom:t.getNumber(e.bottom,0),right:t.getNumber(e.right,0)}},t.prototype.sanitizeSeries=function(t){return t.map(function(t){return new e.SeriesOptions(t)})},t.prototype.sanitizeTwoAxesOptions=function(e,n){var r={x:t.getBoolean(e.x,n.x),y:t.getBoolean(e.y,n.y)};return r},t.prototype.sanitizeAxes=function(t){return Object.keys(t).reduce(function(n,r){return n[r]=new e.AxisOptions(t[r]),n},{})},t.prototype.getAbsKey=function(){if(!this.axes[e.AxisOptions.SIDE.X])throw new TypeError("Cannot find abs key : "+e.AxisOptions.SIDE.X);return this.axes[e.AxisOptions.SIDE.X].key},t.prototype.getVisibleDatasets=function(){var e=[];return this.series.forEach(function(t){t.visible&&e.indexOf(t.dataset)===-1&&e.push(t.dataset)}),e},t.prototype.getSeriesAndDatasetBySide=function(t){if(!e.AxisOptions.isValidSide(t))throw new TypeError("Cannot get axis side : "+t);t===e.AxisOptions.SIDE.Y2&&!this.axes[t]&&(t=e.AxisOptions.SIDE.Y);var n=[],r={};return this.series.forEach(function(e){e.visible&&e.axis===t&&(n.push(e.dataset),r[e.dataset]||(r[e.dataset]=[]),r[e.dataset].push(e))}),{seriesForDataset:r,datasetsForSide:n}},t.prototype.getByAxisSide=function(t){if(!e.AxisOptions.isValidSide(t))throw new TypeError("Cannot get axis side : "+t);return t===e.AxisOptions.SIDE.Y2&&!this.axes[t]?this.axes[e.AxisOptions.SIDE.Y]:this.axes[t]},t.prototype.getSeriesByType=function(t){if(!e.SeriesOptions.isValidType(t))throw new TypeError("Unknown series type: "+t);return this.series.filter(function(e){return e.hasType(t)})},t.getBoolean=function(e,t){return t===void 0&&(t=!0),typeof e=="boolean"?e:t},t.getNumber=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},t.getDate=function(e,t){return e instanceof Date?e:t},t.getFunction=function(e){return e instanceof Function?e:undefined},t.getString=function(e,t){return e?String(e):t},t.getIdentifier=function(e){var n=t.getString(e);return n.replace(/[^a-zA-Z0-9\-_]/ig,"")},t.getObject=function(e,t){t===void 0&&(t={});if(!angular.isObject(e))throw TypeError(e+" option must be an object.");var n={};return angular.extend(n,t,e),n},t.getArray=function(e,t){return t===void 0&&(t=[]),t.concat(e)},t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})},t}();e.Options=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(){this.width=600,this.height=200,this.innerWidth=560,this.innerHeight=160,this.margin={left:30,bottom:20,right:30,top:20}}return t.prototype.updateMargins=function(t){var n=this;if(!t||!t.margin)return;var r=function(r){return n.margin[r]=e.Options.getNumber(t.margin[r],n.margin[r])};r("top"),r("bottom"),r("left"),r("right")},t.prototype.getDimensionByProperty=function(e,t){var n=window.getComputedStyle(e,null);return+n.getPropertyValue(t).replace(/px$/,"")},t.prototype.fromParentElement=function(e){var t=this.getDimensionByProperty(e,"padding-left")+this.getDimensionByProperty(e,"padding-right"),n=this.getDimensionByProperty(e,"padding-top")+this.getDimensionByProperty(e,"padding-bottom");this.width=e.clientWidth-t,this.height=e.clientHeight-n,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right},t}();e.Dimensions=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(t){function n(n){t.call(this),this.element=n,this.dim=new e.Utils.Dimensions}return __extends(n,t),n.prototype.create=function(e){this.dim.updateMargins(e),this.listenToElement(this.element,e),this.createRoot(),this.createContainer(),this.eventMgr.on("resize",this.dim.fromParentElement.bind(this.dim))},n.prototype.listenToElement=function(e,t){var n=this.eventMgr;e.addEventListener("mouseover",function(e){n.triggerDataAndOptions.apply(n,["container-over",e])}),e.addEventListener("mousemove",function(e){n.triggerDataAndOptions.apply(n,["container-move",e])}),e.addEventListener("mouseout",function(e){n.triggerDataAndOptions.apply(n,["container-out",e])})},n.prototype.getCoordinatesFromEvent=function(e){var t=this.getDimensions(),n=e.currentTarget.getBoundingClientRect(),r=n.left,i=n.top,s=this.factoryMgr.get("x-axis").scale,o=s.invert(e.clientX-r-t.margin.left),u=this.factoryMgr.get("y-axis").scale,a=u.invert(e.clientY-i-t.margin.top);if(a<u.domain()[0]||a>u.domain()[1])a=undefined;if(o<s.domain()[0]||o>s.domain()[1])o=undefined;return{y:a,x:o}},n.prototype.update=function(e,t){this.updateRoot(),this.updateContainer()},n.prototype.destroy=function(){this.destroyRoot()},n.prototype.createRoot=function(){this.svg=d3.select(this.element).append("svg").attr("class","chart"),this.defs=this.svg.append("defs")},n.prototype.updateRoot=function(){this.svg.attr("width",this.dim.width).attr("height",this.dim.height)},n.prototype.destroyRoot=function(){this.svg.remove()},n.prototype.createContainer=function(){this.vis=this.svg.append("g").attr("class","container"),this.axes=this.vis.append("g").attr("class","axes"),this.defs.append("svg:clipPath").attr("id","clipping-path").append("svg:rect").attr("id","clipping-rect"),this.data=this.vis.append("g").attr({"class":"data","clip-path":"url(#clipping-path)"}),this.overlay=this.vis.append("g").attr("class","overlay")},n.prototype.updateContainer=function(){this.vis.attr({width:this.dim.innerWidth,height:this.dim.innerHeight,transform:"translate("+this.dim.margin.left+", "+this.dim.margin.top+")"}),d3.select(this.element).select("#clipping-rect").attr({width:this.dim.innerWidth,height:this.dim.innerHeight+this.dim.margin.top,transform:"translate(0, "+ -this.dim.margin.top+")"})},n.prototype.getDimensions=function(){return this.dim},n}(e.Utils.BaseFactory);t.Container=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(t){function n(e){t.call(this),this.element=e}return __extends(n,t),n.prototype.create=function(){this.createTooltip(),this.eventMgr.on("container-move.tooltip",this.show.bind(this)),this.eventMgr.on("container-out.tooltip",this.hide.bind(this)),this.hide()},n.prototype.createTooltip=function(){var e=this.svg=d3.select(this.element).append("div").attr("class","chart-tooltip");e.append("div").attr("class","abscissas"),this.line=this.factoryMgr.get("container").overlay.append("line").attr("class","tooltip-line"),this.dots=this.factoryMgr.get("container").overlay.append("g").attr("class","tooltip-dots")},n.prototype.destroy=function(){this.svg.remove()},n.prototype.getClosestRows=function(e,t,n){var r=n.series.filter(function(e){return e.visible}),i=r.map(function(e){return t.getDatasetValues(e,n).filter(e.defined)}),s=[],o=-1,u=Number.POSITIVE_INFINITY;for(var a=0;a<i.length;a++)for(var f=0;f<i[a].length;f++){if(n.axes.x.type==="date")var l=Math.abs(i[a][f].x.getTime()-e);else var l=Math.abs(i[a][f].x-e);l===u?s.push({series:r[a],row:i[a][f]}):l<u&&(u=l,s=[{series:r[a],row:i[a][f]}],o=f)}return{rows:s,index:o}},n.prototype.showFromCoordinates=function(e,t,n){var r=e.x,i=e.y;if(r===undefined||i===undefined){this.hide();return}r instanceof Date&&(r=r.getTime());var s=this.getClosestRows(r,t,n),o=s.rows,u=s.index;if(o.length===0){this.hide();return}this.updateTooltipDots(o),this.dots.style("opacity","1"),this.updateLinePosition(o),this.line.style("opacity","1");var a=this.getTooltipContent(o,u,n);n.tooltipHook&&(a=n.tooltipHook(o));if(!a)return;this.updateTooltipContent(a,u,n),this.updateTooltipPosition(o),this.svg.style("display",null)},n.prototype.show=function(e,t,n){var r=this.factoryMgr.get("container"),i=r.getCoordinatesFromEvent(e);this.showFromCoordinates(i,t,n)},n.prototype.getTooltipContent=function(t,n,r){var i=r.getByAxisSide(e.Utils.AxisOptions.SIDE.X).tickFormat,s=r.getByAxisSide(e.Utils.AxisOptions.SIDE.Y).tickFormat,o=function(e){var t=s?function(e){return s(e,n)}:function(e){return e},r=t(e.row.y1);return e.series.hasTwoKeys()?"["+t(e.row.y0)+", "+r+"]":r};return{abscissas:i?i(t[0].row.x,n):t[0].row.x,rows:t.map(function(e){return{label:e.series.label,value:o(e),color:e.series.color,id:e.series.id}})}},n.prototype.updateTooltipContent=function(e,t,n){this.svg.select(".abscissas").text(e.abscissas);var r=function(e){return e.attr({"class":"tooltip-item"}),e.append("div").attr({"class":"color-dot"}).style({"background-color":function(e){return e.color}}),e.append("div").attr({"class":"series-label"}),e.append("div").attr({"class":"y-value"}),e},i=function(e){return e.select(".series-label").text(function(e){return e.label}),e.select(".y-value").text(function(e){return e.value}),e},s=this.svg.selectAll(".tooltip-item").data(e.rows,function(e,t){return e.id?e.id:t});s.enter().append("div").call(r).call(i),s.call(i),s.exit().remove()},n.prototype.updateTooltipDots=function(e){var t=this.factoryMgr.get("x-axis").scale,n=this.factoryMgr.get("y-axis").scale,r=3,i=function(e,t,n){return"M "+t+" "+n+" m -"+e+", 0 a "+e+","+e+" 0 1,0 "+e*2+",0 a "+e+","+e+" 0 1,0 -"+e*2+",0 "},s=function(e,t,n){return"M "+t+" "+n+" m -"+e+", 0 a "+e+","+e+" 0 1,0 "+e*2+",0 a "+e+","+e+" 0 1,0 -"+e*2+",0 "},o=function(e){e.attr("class","tooltip-dots-group"),e.append("path").attr({"class":"tooltip-dot y1"}),e.append("path").attr({"class":"tooltip-dot y0"}).style({display:function(e){return e.series.hasTwoKeys()?null:"none"}})},u=function(e){e.select(".tooltip-dot.y1").attr({d:function(e){return i(r,t(e.row.x),n(e.row.y1))},stroke:function(e){return e.series.color}}),e.select(".tooltip-dot.y0").attr({d:function(e){return e.series.hasTwoKeys()?i(r,t(e.row.x),n(e.row.y0)):""},stroke:function(e){return e.series.color}})},a=this.dots.selectAll(".tooltip-dots-group").data(e);a.enter().append("g").call(o).call(u),a.call(u),a.exit().remove()},n.prototype.updateTooltipPosition=function(e){var t=e.slice(-1)[0],n=this.factoryMgr.get("x-axis"),r=this.factoryMgr.get("y-axis").scale,i=this.factoryMgr.get("container").getDimensions().margin,s=this.element.offsetLeft,o=this.element.offsetTop,u=0,a="";n.isInLastHalf(t.row.x)?(a="translate(-100%, 0)",u=-10):u=10,this.svg.style({left:s+i.left+n.scale(t.row.x)+u+"px",top:o+i.top+"px",transform:a});return},n.prototype.updateLinePosition=function(e){var t=this.factoryMgr.get("container"),n=t.getDimensions(),r=e.slice(-1)[0],i=this.factoryMgr.get("x-axis"),s=i.scale(r.row.x);this.line.attr({x1:s,x2:s,y1:-n.margin.top,y2:n.innerHeight});return},n.prototype.hide=function(){this.svg.style("display","none"),this.line.style("opacity","0"),this.dots.style("opacity","0")},n}(e.Utils.BaseFactory);t.Tooltip=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(t){e.call(this),this.element=t}return __extends(t,e),t.prototype.create=function(){this.createLegend()},t.prototype.createLegend=function(){this.div=d3.select(this.element).append("div").attr("class","chart-legend").style("position","absolute")},t.prototype.legendClick=function(){var e=this;return function(t){return t.on("click",function(t){e.eventMgr.trigger("legend-click",t)})}},t.prototype.update=function(e,t){var n=this,r=this.factoryMgr.get("container"),i=r.getDimensions(),s=function(e){var t=e.append("div").attr({"class":"item"}).call(n.legendClick());t.append("div").attr({"class":"icon"}),t.append("div").attr({"class":"label"})},o=function(e){e.attr("class",function(e){return"item "+e.type.join(" ")}).classed("hidden",function(e){return!e.visible}),e.select(".icon").style("background-color",function(e){return e.color}),e.select(".label").text(function(e){return e.label})},u=this.div.selectAll(".item").data(t.series);u.enter().call(s),u.call(o),u.exit().remove()},t.prototype.destroy=function(){this.div.remove()},t}(e.Utils.BaseFactory);t.Legend=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(t){function n(n){t.call(this),this.side=n;if(!e.Utils.AxisOptions.isValidSide(n))throw new TypeError("Wrong axis side : "+n)}return __extends(n,t),n.prototype.create=function(){var e=this.factoryMgr.get("container").axes;this.createAxis(e),this.eventMgr.on("zoom."+this.key,this.softUpdate.bind(this))},n.prototype.softUpdate=function(){this.svg.call(this.d3axis)},n.prototype.update=function(e,t){var n=this.factoryMgr.get("container"),r=n.getDimensions(),i=this.getExtent(e,t),s=t.getByAxisSide(this.side);this.scale=this.getScale(s),this.updateScaleRange(r),this.updateScaleDomain(i),this.d3axis=this.getAxis(this.scale,s),this.updateAxisOrientation(this.d3axis),this.updateAxisContainer(r),this.shiftAxisTicks(s)},n.prototype.shiftAxisTicks=function(e){var t=e.ticksShift,n=t.x,r=t.y;this.svg.selectAll("text").attr("transform","translate("+n+", "+r+")")},n.prototype.destroy=function(){this.destroyAxis()},n.prototype.updateScaleRange=function(e){this.isAbscissas()?this.scale.range([0,e.innerWidth]):this.scale.range([e.innerHeight,0])},n.prototype.updateScaleDomain=function(e){this.scale.domain(e)},n.prototype.getExtentForDatasets=function(e,t,n){var r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var s in e.sets){if(!t(s))continue;e.sets[s].values.forEach(function(e){var t=n(e,s);t[0]<r&&(r=t[0]),t[1]>i&&(i=t[1])})}return[r===Number.POSITIVE_INFINITY?0:r,i===Number.NEGATIVE_INFINITY?1:i]},n.prototype.getExtent=function(e,t){var n=t.getByAxisSide(this.side),r=undefined;if(this.isAbscissas()){var i=t.getVisibleDatasets(),s=t.getAbsKey();r=this.getExtentForDatasets(e,function(e){return i.indexOf(e)>-1},function(e){return[e[s],e[s]]})}else{var o=t.getSeriesAndDatasetBySide(this.side),u=o.datasetsForSide,a=o.seriesForDataset;r=this.getExtentForDatasets(e,function(e){return u.indexOf(e)>-1},function(e,t){var n=a[t].map(function(t){return e[t.key.y1]}),r=a[t].map(function(t){return e[t.key.y0]||e[t.key.y1]});return[d3.min(r),d3.max(n)]})}return n.min!==undefined&&(r[0]=n.min),n.max!==undefined&&(r[1]=n.max),r},n.prototype.isAbscissas=function(){return this.side===e.Utils.AxisOptions.SIDE.X},n.prototype.isInLastHalf=function(e){var t=function(e){return e};e instanceof Date&&(t=function(e){return e.getTime()});var n=this.scale.domain(),r=n[0],i=n[1];return t(e)>t(r)+(t(i)-t(r))/2},n.prototype.createAxis=function(e){this.svg=e.append("g").attr("class","axis "+this.side+"-axis")},n.prototype.updateAxisOrientation=function(t){this.isAbscissas()?t.orient("bottom"):this.side===e.Utils.AxisOptions.SIDE.Y?t.orient("left"):t.orient("right")},n.prototype.updateAxisContainer=function(t){this.isAbscissas()?this.svg.attr("transform","translate(0, "+t.innerHeight+")"):this.side===e.Utils.AxisOptions.SIDE.Y?this.svg.attr("transform","translate(0, 0)"):this.svg.attr("transform","translate("+t.innerWidth+", 0)"),this.svg.transition().call(this.factoryMgr.get("transitions").edit).call(this.d3axis)},n.prototype.destroyAxis=function(){this.svg.remove()},n.prototype.getScale=function(t){var n;return t.type===e.Utils.AxisOptions.TYPE.DATE?d3.time.scale():t.type===e.Utils.AxisOptions.TYPE.LOG?d3.scale.log():d3.scale.linear()},n.prototype.getAxis=function(e,t){var n=d3.svg.axis().scale(e);return t.configure(n),n},n.prototype.cloneAxis=function(){return d3.svg.axis().scale(this.d3axis.scale()).orient(this.d3axis.orient()).tickValues(this.d3axis.tickValues()).ticks(this.d3axis.ticks()[0]).tickSize(this.d3axis.tickSize())},n}(e.Utils.BaseFactory);t.Axis=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.create=function(){this.svg=this.factoryMgr.get("container").axes.insert("g",":first-child").attr("class","grid"),this.svg.append("g").classed("x-grid",!0),this.svg.append("g").classed("y-grid",!0)},t.prototype.update=function(e,t){var n=this.factoryMgr.get("container"),r=n.getDimensions();if(t.grid.x){var i=this.factoryMgr.get("x-axis").cloneAxis();this.svg.select(".x-grid").transition().call(this.factoryMgr.get("transitions").edit).attr("transform","translate(0, "+r.innerHeight+")").call(i.tickSize(-r.innerHeight,0))}if(t.grid.y){var s=this.factoryMgr.get("y-axis").cloneAxis();this.svg.select(".y-grid").transition().call(this.factoryMgr.get("transitions").edit).call(s.tickSize(-r.innerWidth,0))}},t.prototype.destroy=function(){this.svg.remove()},t}(e.Utils.BaseFactory);t.Grid=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.create=function(){this.behavior=d3.behavior.zoom()},t.prototype.update=function(e,t){var n=this.factoryMgr.get("x-axis"),r=this.factoryMgr.get("y-axis");t.pan.x&&this.behavior.x(n.scale),t.pan.y&&this.behavior.y(r.scale);if(!t.pan.x&&!t.pan.y)return;var i=this.factoryMgr.get("y2-axis"),s=this.eventMgr,o=this.factoryMgr.get("transitions");this.behavior.scaleExtent([1,1]).on("zoom",function(){i.scale.domain(r.scale.domain()),o.off(),s.trigger("zoom",d3.event.sourceEvent.target),o.on()}),this.factoryMgr.get("container").svg.call(this.behavior),this.factoryMgr.get("container").svg.on("wheel.zoom",null),this.factoryMgr.get("container").svg.on("mousewheel.zoom",null)},t}(e.Utils.BaseFactory);t.Zoom=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.off=function(){t.duration=0},t.prototype.on=function(){t.duration=t.defaultDuration},t.prototype.enter=function(e){var n=t.duration,r=t.ease,i=e[0].length,s=function(e,t){return i?t/i*n:0};e.duration(n).delay(s).ease(r)},t.prototype.edit=function(e){var n=t.duration,r=t.ease,i=0;e.duration(n).delay(i).ease(r)},t.prototype.exit=function(e){var n=t.duration,r=t.ease,i=0;e.duration(n).delay(i).ease(r)},t.defaultDuration=250,t.duration=t.defaultDuration,t.ease="cubic",t.enabled=!0,t}(e.Utils.BaseFactory);t.Transition=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.SeriesOptions.TYPE.DOT}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options).filter(t.defined),u=2,a=e.selectAll("."+this.type).data(o,function(e){return e.x}),f=function(e){e.attr({r:function(e){return u},cx:function(e){return i.scale(e.x)},cy:function(e){return s.scale.range()[0]}})},l=function(e){e.attr({cx:function(e){return i.scale(e.x)},cy:function(e){return s.scale(e.y1)}}).style("opacity",t.visible?1:0)};a.enter().append("circle").attr("class",this.type).call(this.eventMgr.datumEnter(t,this.options)).call(this.eventMgr.datumOver(t,this.options)).call(this.eventMgr.datumMove(t,this.options)).call(this.eventMgr.datumLeave(t,this.options)).call(f).transition().call(this.factoryMgr.get("transitions").enter).call(l),a.transition().call(this.factoryMgr.get("transitions").edit).call(l),a.exit().transition().call(this.factoryMgr.get("transitions").exit).call(f).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({stroke:function(e){return e.color}})},n}(e.Utils.SeriesFactory);t.Dot=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.SeriesOptions.TYPE.LINE}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){e.classed("dashed",t.isDashed());var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options),u=d3.svg.line().defined(t.defined).x(function(e){return i.scale(e.x)}).y(s.scale.range()[0]).interpolate(t.interpolation.mode).tension(t.interpolation.tension),a=d3.svg.line().defined(t.defined).x(function(e){return i.scale(e.x)}).y(function(e){return s.scale(e.y1)}).interpolate(t.interpolation.mode).tension(t.interpolation.tension),f=e.selectAll("."+this.type).data([o]);f.enter().append("path").attr("class",this.type).attr("d",
function(e){return u(e)}).transition().call(this.factoryMgr.get("transitions").enter).attr("d",function(e){return a(e)}),f.transition().call(this.factoryMgr.get("transitions").edit).attr("d",function(e){return a(e)}).style("opacity",t.visible?1:0),f.exit().transition().call(this.factoryMgr.get("transitions").exit).attr("d",function(e){return u(e)}).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:"none",stroke:function(e){return e.color},"stroke-dasharray":function(e){return e.isDashed()?"10,3":undefined}})},n}(e.Utils.SeriesFactory);t.Line=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.SeriesOptions.TYPE.AREA}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options),u=d3.svg.area().defined(t.defined).x(function(e){return i.scale(e.x)}).y0(s.scale.range()[0]).y1(s.scale.range()[0]).interpolate(t.interpolation.mode).tension(t.interpolation.tension),a=d3.svg.area().defined(t.defined).x(function(e){return i.scale(e.x)}).y0(function(e){return isNaN(s.scale(e.y0))?s.scale.range()[0]:s.scale(e.y0)}).y1(function(e){return s.scale(e.y1)}).interpolate(t.interpolation.mode).tension(t.interpolation.tension),f=e.selectAll("."+this.type).data([o]);f.enter().append("path").attr("class",this.type).attr("d",function(e){return u(e)}).transition().call(this.factoryMgr.get("transitions").enter).attr("d",function(e){return a(e)}),f.transition().call(this.factoryMgr.get("transitions").edit).attr("d",function(e){return a(e)}).style("opacity",t.visible?1:0),f.exit().transition().call(this.factoryMgr.get("transitions").exit).attr("d",function(e){return u(e)}).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:function(e){return e.color},stroke:function(e){return e.color}})},n}(e.Utils.SeriesFactory);t.Area=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.SeriesOptions.TYPE.COLUMN,this.gapFactor=.2,this.outerPadding=this.gapFactor/2*3,this.columnsWidth=0}return __extends(n,t),n.prototype.update=function(e,t){this.data=e,this.options=t;var n=t.getSeriesByType(this.type).filter(function(e){return e.visible});this.updateColumnsWidth(n,t),this.updateColumnScale(n,t),this.updateSeriesContainer(n)},n.prototype.updateColumnsWidth=function(t,n){var r=this.factoryMgr.get("x-axis"),i=this.data.getDatasets(t,n),s=e.Utils.Data.getMinDistance(i,r.scale,"x");this.columnsWidth=s<Number.MAX_VALUE?s/t.length:10},n.prototype.updateColumnScale=function(e,t){var n=this.columnsWidth*e.length/2;this.innerXScale=d3.scale.ordinal().domain(e.map(function(e){return e.id})).rangeBands([-n,n],0,.1)},n.prototype.getTooltipPosition=function(e){return this.innerXScale(e.id)+this.innerXScale.rangeBand()/2},n.prototype.updateData=function(e,t,n,r){var i=this,s=this.factoryMgr.get("x-axis"),o=this.factoryMgr.get("y-axis"),u=this.data.getDatasetValues(t,this.options).filter(t.defined),a=function(e){return s.scale(e.x)+i.innerXScale(t.id)},f=function(e){e.attr({x:a,y:function(e){return o.scale(e.y0)},width:i.innerXScale.rangeBand(),height:0})},l=function(e){e.attr({x:a,y:function(e){return e.y1>0?o.scale(e.y1):o.scale(e.y0)},width:i.innerXScale.rangeBand(),height:function(e){return Math.abs(o.scale(e.y0)-o.scale(e.y1))}}).style("opacity",t.visible?1:0)},c=e.selectAll("."+this.type).data(u,function(e){return e.x});c.enter().append("rect").attr("class",this.type).call(this.eventMgr.datumEnter(t,this.options)).call(this.eventMgr.datumOver(t,this.options)).call(this.eventMgr.datumMove(t,this.options)).call(this.eventMgr.datumLeave(t,this.options)).call(f).transition().call(this.factoryMgr.get("transitions").enter).call(l),c.transition().call(this.factoryMgr.get("transitions").edit).call(l),c.exit().transition().call(this.factoryMgr.get("transitions").exit).call(f).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:function(e){return e.color},stroke:function(e){return e.color},"stroke-width":1})},n}(e.Utils.SeriesFactory);t.Column=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){"use strict";angular.module("n3-line-chart",[]).directive("linechart",["$window","$parse","$timeout","$rootScope",function(t,n,r,i){return new e.LineChart(t,n,r,i)}])})(n3Charts||(n3Charts={}));