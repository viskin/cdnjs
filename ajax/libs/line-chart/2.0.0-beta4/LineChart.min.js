var n3Charts;(function(e){"use strict";var t=function(){function t(){this.scope={data:"=",options:"=",styles:"=",onDatumEnter:"=",onDatumOver:"=",onDatumMove:"=",onDatumLeave:"="},this.restrict="E",this.replace=!0,this.template="<div></div>",this.link=function(t,n,r){var i=new e.Utils.EventManager,s=new e.Utils.FactoryManager;i.init(e.Utils.EventManager.EVENTS),s.registerMany([["container",e.Factory.Container,n[0]],["tooltip",e.Factory.Tooltip,n[0]],["legend",e.Factory.Legend,n[0]],["transitions",e.Factory.Transition],["x-axis",e.Factory.Axis,e.Factory.Axis.SIDE.X],["y-axis",e.Factory.Axis,e.Factory.Axis.SIDE.Y],["series-area",e.Factory.Series.Area],["series-column",e.Factory.Series.Column],["series-line",e.Factory.Series.Line],["series-dot",e.Factory.Series.Dot]]),s.all().forEach(function(e){return e.instance.init(e.key,i,s)}),i.trigger("create"),t.$watch("[options, data]",function(){var n=new e.Utils.Options(angular.copy(t.options)),r=new e.Utils.Data(angular.copy(t.data));i.trigger("update",r,n)},!0),t.$watch("onDatumEnter",function(){i.on("enter.directive",t.onDatumEnter)}),t.$watch("onDatumOver",function(){i.on("over.directive",t.onDatumOver)}),t.$watch("onDatumMove",function(){i.on("move.directive",t.onDatumMove)}),t.$watch("onDatumLeave",function(){i.on("leave.directive",t.onDatumLeave)}),i.on("legend-click.directive",function(e){var n=t.options.series.filter(function(t){return t.id===e.id})[0];n.visible=e.getToggledVisibility(),t.$apply()}),t.$on("$destroy",function(){return i.trigger("destroy")})}}return t}();e.LineChart=t})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){}return e.prototype.init=function(e){return this._dispatch=d3.dispatch.apply(this,e),this},e.prototype.on=function(e,t){return this._dispatch.on(e,t),this},e.prototype.trigger=function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._dispatch[e].apply(this,t),this},e.prototype.datumEnter=function(e){var t=this;return function(n){return n.on("mouseenter",function(n,r){t.trigger("over",n,r,e)})}},e.prototype.datumOver=function(e){var t=this;return function(n){return n.on("mouseover",function(n,r){t.trigger("over",n,r,e)})}},e.prototype.datumMove=function(e){var t=this;return function(n){return n.on("mousemove",function(n,r){t.trigger("over",n,r,e)})}},e.prototype.datumLeave=function(e){var t=this;return function(n){return n.on("mouseleave",function(n,r){t.trigger("leave",n,r,e)})}},e.EVENTS=["create","update","destroy","enter","over","move","leave","click","dblclick","legend-click","legend-over","legend-out","focus","toggle"],e.DEFAULT=function(){return(new e).init(e.EVENTS)},e}();e.EventManager=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){this._factoryStack=[]}return e.prototype.index=function(e){return this._factoryStack.map(function(e){return e.key}).indexOf(e)},e.prototype.get=function(e){var t=this.index(e);return t>-1?this._factoryStack[t].instance:null},e.prototype.all=function(){return this._factoryStack},e.prototype.registerMany=function(e){var t=this;return e.forEach(function(e){t.register.apply(t,e)}),this},e.prototype.register=function(e,t){var n=[];for(var r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t.bind.apply(t,[null].concat(n)),s=new i;return this._factoryStack.push({key:e,instance:s}),s},e.prototype.unregister=function(e){var t=this.index(e);return t>-1&&delete this._factoryStack[t],this},e}();e.FactoryManager=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){}return e.prototype.init=function(e,t,n){this.key=e,this.eventMgr=t,this.factoryMgr=n,this.eventMgr.on("create."+this.key,this.create.bind(this)),this.eventMgr.on("update."+this.key,this.update.bind(this)),this.eventMgr.on("destroy."+this.key,this.destroy.bind(this))},e.prototype.create=function(){},e.prototype.update=function(e,t){},e.prototype.destroy=function(){},e}();e.BaseFactory=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},n3Charts;(function(e){var t;(function(e){"use strict";var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.update=function(e,t){this.data=e,this.options=t;var n=t.getSeriesByType(this.type).filter(function(e){return e.visible});this.updateSeriesContainer(n)},t.prototype.create=function(){this.createContainer(this.factoryMgr.get("container").data)},t.prototype.destroy=function(){this.svg.remove()},t.prototype.createContainer=function(e){this.svg=e.append("g").attr("class",this.type+t.containerClassSuffix)},t.prototype.updateSeriesContainer=function(e){var n=this,r=this.svg.selectAll("."+this.type+t.seriesClassSuffix).data(e,function(e){return e.id});r.enter().append("g").attr({"class":function(e){return n.type+t.seriesClassSuffix+" "+e.id}}),this.styleSeries(r),this.updateSeries(r,e),r.exit().remove()},t.prototype.updateSeries=function(e,t){var n=this;e.each(function(e,r){var i=d3.select(this);n.updateData(i,e,r,t.length)})},t.prototype.updateData=function(e,t,n,r){},t.prototype.styleSeries=function(e){},t.containerClassSuffix="-data",t.seriesClassSuffix="-series",t}(e.BaseFactory);e.SeriesFactory=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(e,t){this.fromJS(e,t)}return e.prototype.fromJS=function(e,t){this.id=t,this.values=e},e}();e.Dataset=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(e){e&&this.fromJS(e)}return t.prototype.fromJS=function(t){for(var n in t)t.hasOwnProperty(n)&&(t[n]=new e.Dataset(t[n],n));this.sets=t},t.prototype.getDatasets=function(e,t){var n=this;return e.map(function(e){return n.getDatasetValues(e,t)})},t.prototype.getDatasetValues=function(e,t){var n=t.getAbsKey();return this.sets[e.dataset].values.map(function(t){return{x:t[n],y:t[e.key]}})},t.getMinDistance=function(e,t,n,r){return n===void 0&&(n="x"),d3.min(e.map(function(e){return e.map(function(e){return t(e[n])}).filter(function(e){return r?e>=r[0]&&e<=r[1]:!0}).reduce(function(e,t,n,r){var i=n>0?t-r[n-1]:Number.MAX_VALUE;return i<e?i:e},Number.MAX_VALUE)}))},t}();e.Data=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(e){e===void 0&&(e={}),this.axis="y",this.type=["line"],this.visible=!0,this.parse(e)}return t.prototype.parse=function(t){this.id=t.id||e.Options.uuid(),this.axis=t.axis,this.dataset=t.dataset,this.key=t.key,this.type=this.parseType(t.type),this.id=t.id,this.color=t.color,this.visible=t.visible!==!1,this.label=t.label||t.id},t.prototype.getToggledVisibility=function(){return!this.visible},t.prototype.parseType=function(e){return e?typeof e=="string"?[e]:e:["line"]},t.prototype.isAColumn=function(){return this.type.indexOf(e.Options.SERIES_TYPES.COLUMN)>-1},t.prototype.getMainType=function(){if(this.type.length===1)return this.type[0];var t=e.Options.SERIES_TYPES;return this.type.indexOf(t.AREA)!==-1?t.AREA:this.type.indexOf(t.LINE)!==-1?t.LINE:this.type.indexOf(t.DOT)!==-1?t.DOT:this.type[0]},t}();e.SeriesOptions=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(e){e===void 0&&(e={}),this.type="linear",this.key="x",this.parse(e)}return e.prototype.parse=function(e){this.type=e.type,this.key=e.key},e.TYPE={LINEAR:"linear",DATE:"date"},e}();e.AxisOptions=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(){function n(e){this.parse(e)}return n.prototype.parse=function(e){var t={};angular.extend(t,n.DEFAULT,e),this.series=this.parseSeries(t.series),this.axes=this.parseAxes(t.axes),this.margin=this.parseMargin(t.margin)},n.prototype.parseMargin=function(e){if(!angular.isObject(e))throw TypeError("Margin option must be an object.");var t={};return angular.extend(t,n.DEFAULT.margin,e),this.sanitizeMargin(t)},n.prototype.parseSeries=function(e){if(!angular.isArray(e))throw TypeError("Series option must be an array.");var t=[];return angular.extend(t,n.DEFAULT.series,e),this.sanitizeSeries(t)},n.prototype.parseAxes=function(e){if(!angular.isObject(e))throw TypeError("Axes option must be an object.");var t={};return angular.extend(t,n.DEFAULT.axes,e),this.sanitizeAxes(t)},n.prototype.sanitizeSeries=function(e){return e.map(function(e){return new t.SeriesOptions(e)})},n.prototype.sanitizeAxes=function(e){return Object.keys(e).reduce(function(n,r){return n[r]=new t.AxisOptions(e[r]),n},{})},n.prototype.sanitizeMargin=function(e){return{top:parseFloat(e.top),left:parseFloat(e.left),bottom:parseFloat(e.bottom),right:parseFloat(e.right)}},n.prototype.isValidAxisSide=function(t){return d3.values(e.Factory.Axis.SIDE).indexOf(t)===-1?!1:!0},n.prototype.isValidSeriesType=function(e){return d3.values(n.SERIES_TYPES).indexOf(e)===-1?!1:!0},n.prototype.getAbsKey=function(){if(!this.axes[e.Factory.Axis.SIDE.X])throw new TypeError("Cannot find abs key : "+e.Factory.Axis.SIDE.X);return this.axes[e.Factory.Axis.SIDE.X].key},n.prototype.getByAxisSide=function(e){if(!this.isValidAxisSide(e))throw new TypeError("Cannot get axis side : "+e);return this.axes[e]},n.prototype.getSeriesByType=function(e){if(!this.isValidSeriesType(e))throw new TypeError("Unknown series type: "+e);return this.series.filter(function(t){return t.type.indexOf(e)!==-1})},n.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})},n.DEFAULT={series:[],axes:{x:{},y:{}},margin:{top:0,left:40,bottom:40,right:0}},n.SERIES_TYPES={DOT:"dot",LINE:"line",AREA:"area",COLUMN:"column"},n}();t.Options=n})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(t){e.call(this),this.element=t}return __extends(t,e),t.prototype.create=function(){this.createRoot(),this.createContainer()},t.prototype.update=function(e,t){this.dim=this.getDimensions(),this.updateRoot(),this.updateContainer()},t.prototype.destroy=function(){this.destroyRoot()},t.prototype.createRoot=function(){this.svg=d3.select(this.element).append("svg").attr("class","chart")},t.prototype.updateRoot=function(){this.svg.attr("width",this.dim.width).attr("height",this.dim.height)},t.prototype.destroyRoot=function(){this.svg.remove()},t.prototype.createContainer=function(){this.vis=this.svg.append("g").attr("class","container"),this.axes=this.vis.append("g").attr("class","axes"),this.data=this.vis.append("g").attr("class","data")},t.prototype.updateContainer=function(){this.vis.attr("width",this.dim.innerWidth).attr("height",this.dim.innerHeight).attr("transform","translate("+this.dim.margin.left+", "+this.dim.margin.top+")")},t.prototype.getDimensions=function(){return{width:600,height:200,innerWidth:560,innerHeight:160,margin:{left:30,bottom:20,right:20,top:20}}},t}(e.Utils.BaseFactory);t.Container=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(t){e.call(this),this.element=t}return __extends(t,e),t.prototype.create=function(){this.createTooltip(),this.eventMgr.on("over.tooltip",this.show.bind(this)),this.eventMgr.on("leave.tooltip",this.hide.bind(this))},t.prototype.createTooltip=function(){var e=this.svg=d3.select(this.element).append("div").attr("class","chart-tooltip").style("position","absolute");e.append("div").attr("class","arrow"),e.append("div").attr("class","abscissas").style("display","inline-block"),e.append("div").attr("class","value").style("display","inline-block")},t.prototype.destroy=function(){this.eventMgr.on("over.tooltip",null),this.eventMgr.on("out.tooltip",null),this.svg.remove()},t.prototype.show=function(e,t,n){this.updateTooltipContent(e,t,n),this.updateTooltipPosition(e,t,n),this.svg.transition().call(this.factoryMgr.get("transitions").edit).style("opacity","1");return},t.prototype.updateTooltipContent=function(e,t,n){this.svg.select(".abscissas").text(e.x),this.svg.select(".value").text(e.y),this.svg.style("background-color",n.color),this.svg.select(".arrow").style("border-top-color",n.color)},t.prototype.updateTooltipPosition=function(e,t,n){var r=this.factoryMgr.get("x-axis").scale,i=this.factoryMgr.get("y-axis").scale,s=r(e.x);n.isAColumn()&&(s+=this.factoryMgr.get("series-column").getTooltipPosition(n));var o=this.factoryMgr.get("container").getDimensions().margin,u=this.element.offsetLeft,a=this.element.offsetTop;this.svg.classed("positive",e.y>=0).classed("negative",e.y<0).style({left:u+o.left+s+"px",top:a+o.top+i(e.y)+"px"});return},t.prototype.hide=function(){var e=this.svg;this.svg.transition().call(this.factoryMgr.get("transitions").edit).style("opacity","0").each("end",function(){return e.style({left:"0px",top:"0px"})});return},t}(e.Utils.BaseFactory);t.Tooltip=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(t){e.call(this),this.element=t}return __extends(t,e),t.prototype.create=function(){this.createLegend()},t.prototype.createLegend=function(){this.div=d3.select(this.element).append("div").attr("class","chart-legend").style("position","absolute")},t.prototype.legendClick=function(){var e=this;return function(t){return t.on("click",function(t){e.eventMgr.trigger("legend-click",t)})}},t.prototype.update=function(e,t){var n=this,r=this.factoryMgr.get("container"),i=r.getDimensions(),s=function(e){var t=e.append("div").attr({"class":"item"}).call(n.legendClick());t.append("div").attr({"class":"icon"}),t.append("div").attr({"class":"label"})},o=function(e){e.attr("class",function(e){return"item "+e.getMainType()}).classed("hidden",function(e){return!e.visible}),e.select(".icon").style("background-color",function(e){return e.color}),e.select(".label").text(function(e){return e.label})},u=this.div.selectAll(".item").data(t.series);u.enter().call(s),u.call(o),u.exit().remove()},t.prototype.destroy=function(){this.div.remove()},t}(e.Utils.BaseFactory);t.Legend=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(t){function n(e){t.call(this),this.side=e;if(d3.values(n.SIDE).indexOf(e)===-1)throw new TypeError("Wrong axis side : "+e)}return __extends(n,t),n.prototype.create=function(){var e=this.factoryMgr.get("container").axes;this.createAxis(e)},n.prototype.update=function(e,t){var n=this.factoryMgr.get("container"),r=n.getDimensions(),i=this.getExtent(e,t),s=t.getByAxisSide(this.side);this.scale=this.getScale(s),this.updateScaleRange(r),this.updateScaleDomain(i),this.axis=this.getAxis(this.scale),this.updateAxisOrientation(),this.updateAxisContainer(r)},n.prototype.destroy=function(){this.destroyAxis()},n.prototype.updateScaleRange=function(e){this.isAbscissas()?this.scale.range([0,e.innerWidth]):this.scale.range([e.innerHeight,0])},n.prototype.updateScaleDomain=function(e){this.scale.domain(e)},n.prototype.getExtentForDatasets=function(e,t,n){var r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var s in e.sets){if(!t(s))continue;e.sets[s].values.forEach(function(e){var t=n(e,s);t[0]<r&&(r=t[0]),t[1]>i&&(i=t[1])})}return[r===Number.POSITIVE_INFINITY?0:r,i===Number.NEGATIVE_INFINITY?1:i]},n.prototype.getExtent=function(e,t){var n=this;if(this.isAbscissas()){var r=t.getAbsKey();return this.getExtentForDatasets(e,function(){return!0},function(e){return[e[r],e[r]]})}var i=[],s={};return t.series.forEach(function(e){e.visible&&e.axis===n.side&&(i.push(e.dataset),s[e.dataset]||(s[e.dataset]=[]),s[e.dataset].push(e))}),this.getExtentForDatasets(e,function(e){return i.indexOf(e)>-1},function(e,t){var n=s[t].map(function(t){return e[t.key]});return[d3.min(n),d3.max(n)]})},n.prototype.isAbscissas=function(){return this.side===n.SIDE.X},n.prototype.createAxis=function(e){this.svg=e.append("g").attr("class","axis "+this.side+"-axis")},n.prototype.updateAxisOrientation=function(){this.isAbscissas()?this.axis.orient("bottom"):this.axis.orient("left")},n.prototype.updateAxisContainer=function(e){this.isAbscissas()?this.svg.attr("transform","translate(0, "+e.innerHeight+")"):this.svg.attr("transform","translate(0, 0)"),this.svg.transition().call(this.factoryMgr.get("transitions").edit).call(this.axis)},n.prototype.destroyAxis=function(){this.svg.remove()},n.prototype.getScale=function(t){var n;return t.type===e.Utils.AxisOptions.TYPE.DATE?d3.time.scale():d3.scale.linear()},n.prototype.getAxis=function(e){return d3.svg.axis().scale(e)},n.SIDE={X:"x",Y:"y"},n}(e.Utils.BaseFactory);t.Axis=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.enter=function(e){var n=t.duration,r=t.ease,i=e[0].length,s=function(e,t){return i?t/i*n:0};return e.duration(n).delay(s).ease(r)},t.prototype.edit=function(e){var n=t.duration,r=t.ease,i=0;return e.duration(n).delay(i).ease(r)},t.prototype.exit=function(e){var n=t.duration,r=t.ease,i=0;return e.duration(n).delay(i).ease(r)},t.duration=250,t.ease="cubic",t}(e.Utils.BaseFactory);t.Transition=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.Options.SERIES_TYPES.DOT}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options),u=4,a=e.selectAll("."+this.type).data(o,function(e){return e.x}),f=function(e){e.attr({r:function(e){return 4},cx:function(e){return i.scale(e.x)},cy:function(e){return s.scale(0)}})},l=function(e){e.attr({cx:function(e){return i.scale(e.x)},cy:function(e){return s.scale(e.y)}}).style("opacity",t.visible?1:0)};a.enter().append("circle").attr("class",this.type).call(this.eventMgr.datumEnter(t)).call(this.eventMgr.datumOver(t)).call(this.eventMgr.datumMove(t)).call(this.eventMgr.datumLeave(t)).call(f).transition().call(this.factoryMgr.get("transitions").enter).call(l),a.transition().call(this.factoryMgr.get("transitions").edit).call(l),a.exit().transition().call(this.factoryMgr.get("transitions").exit).call(f).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:function(e){return e.color},stroke:"white"})},n}(e.Utils.SeriesFactory);t.Dot=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.Options.SERIES_TYPES.LINE}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options),u=d3.svg.line().x(function(e){return i.scale(e.x)}).y(s.scale(0)),a=d3.svg.line().x(function(e){return i.scale(e.x)}).y(function(e){return s.scale(e.y)}),f=e.selectAll("."+this.type).data([o]);f.enter().append("path").attr("class",this.type).attr("d",function(e){return u(e)}).transition().call(this.factoryMgr.get("transitions").enter).attr("d",function(e){return a(e)}),f.transition().call(this.factoryMgr.get("transitions").edit).attr("d",function(e){return a(e)}).style("opacity",t.visible?1:0),f.exit().transition().call(this.factoryMgr.get("transitions").exit).attr("d",function(e){return u(e)}).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:"none",stroke:function(e){return e.color}})},n}(e.Utils.SeriesFactory);t.Line=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.Options.SERIES_TYPES.AREA}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options),u=d3.svg.area().x(function(e){return i.scale(e.x)}).y0(s.scale(0)).y1(function(e){return s.scale(0)}),a=d3.svg.area().x(function(e){return i.scale(e.x)}).y0(s.scale(0)).y1(function(e){return s.scale(e.y)}),f=e.selectAll("."+this.type).data([o]);f.enter().append("path").attr("class",this.type).attr("d",function(e){return u(e)}).transition().call(this.factoryMgr.get("transitions").enter).attr("d",function(e){return a(e)}),f.transition().call(this.factoryMgr.get("transitions").edit).attr("d",function(e){return a(e)}).style("opacity",t.visible?1:0),f.exit().transition().call(this.factoryMgr.get("transitions").exit).attr("d",function(e){return u(e)}).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:function(e){return e.color},stroke:function(e){return e.color},opacity:.3})},n}(e.Utils.SeriesFactory);t.Area=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.Options.SERIES_TYPES.COLUMN,this.gapFactor=.2,this.outerPadding=this.gapFactor/2*3,this.columnsWidth=0}return __extends(n,t),n.prototype.update=function(e,n){t.prototype.update.call(this,e,n);var r=n.getSeriesByType(this.type).filter(function(e){return e.visible});this.updateColumnsWidth(r,n),this.updateColumnScale(r,n),this.updateSeriesContainer(r)},n.prototype.updateColumnsWidth=function(t,n){var r=this.factoryMgr.get("x-axis"),i=this.data.getDatasets(t,n),s=e.Utils.Data.getMinDistance(i,r.scale,"x");this.columnsWidth=s<Number.MAX_VALUE?s/t.length:10},n.prototype.updateColumnScale=function(e,t){var n=this.columnsWidth*e.length/2;this.innerXScale=d3.scale.ordinal().domain(e.map(function(e){return e.id})).rangeBands([-n,n],0,.1)},n.prototype.getTooltipPosition=function(e){return this.innerXScale(e.id)+this.innerXScale.rangeBand()/2},n.prototype.updateData=function(e,t,n,r){var i=this,s=this.factoryMgr.get("x-axis"),o=this.factoryMgr.get("y-axis"),u=this.data.getDatasetValues(t,this.options),a=function(e){return s.scale(e.x)+i.innerXScale(t.id)},f=function(e){e.attr({x:a,y:o.scale(0),width:i.innerXScale.rangeBand(),height:0})},l=function(e){e.attr({x:a,y:function(e){return e.y>0?o.scale(e.y):o.scale(0)},width:i.innerXScale.rangeBand(),height:function(e){return Math.abs(o.scale(0)-o.scale(e.y))}}).style("opacity",t.visible?1:0)},c=e.selectAll("."+this.type).data(u,function(e){return e.x});c.enter().append("rect").attr("class",this.type).call(this.eventMgr.datumEnter(t)).call(this.eventMgr.datumOver(t)).call(this.eventMgr.datumMove(t)).call(this.eventMgr.datumLeave(t)).call(f).transition().call(this.factoryMgr.get("transitions").enter).call(l),c.transition().call(this.factoryMgr.get("transitions").edit).call(l),c.exit().transition().call(this.factoryMgr.get("transitions").exit).call(f).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:function(e){return e.color},"fill-opacity":.5,stroke:function(e){return e.color},"stroke-width":1})},n}(e.Utils.SeriesFactory);t.Column=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){"use strict";angular.module("n3-line-chart",[]).directive("linechart",function(){return new e.LineChart})})(n3Charts||(n3Charts={}));