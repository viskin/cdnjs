var n3Charts;(function(e){"use strict";var t=function(){function t(t){var n=this;this.$window=t,this.scope={data:"=",options:"=",styles:"=",onDatumEnter:"=",onDatumOver:"=",onDatumMove:"=",onDatumLeave:"="},this.restrict="E",this.replace=!0,this.template="<div></div>",this.link=function(t,r,i){var s=new e.Utils.EventManager,o=new e.Utils.FactoryManager;s.init(e.Utils.EventManager.EVENTS),o.registerMany([["container",e.Factory.Container,r[0]],["tooltip",e.Factory.Tooltip,r[0]],["legend",e.Factory.Legend,r[0]],["transitions",e.Factory.Transition],["x-axis",e.Factory.Axis,e.Utils.AxisOptions.SIDE.X],["y-axis",e.Factory.Axis,e.Utils.AxisOptions.SIDE.Y],["series-area",e.Factory.Series.Area],["series-column",e.Factory.Series.Column],["series-line",e.Factory.Series.Line],["series-dot",e.Factory.Series.Dot]]),o.all().forEach(function(e){return e.instance.init(e.key,s,o)});var u=t.options===undefined,a=function(){var n=new e.Utils.Options(angular.copy(t.options)),i=new e.Utils.Data(angular.copy(t.data));u&&(u=!1,s.trigger("create",n),s.trigger("resize",r[0].parentElement)),s.trigger("update",i,n)};u||(s.trigger("create",new e.Utils.Options(angular.copy(t.options))),s.trigger("resize",r[0].parentElement)),t.$watch("[options, data]",a,!0),t.$watch("onDatumEnter",function(){s.on("enter.directive",t.onDatumEnter)}),t.$watch("onDatumOver",function(){s.on("over.directive",t.onDatumOver)}),t.$watch("onDatumMove",function(){s.on("move.directive",t.onDatumMove)}),t.$watch("onDatumLeave",function(){s.on("leave.directive",t.onDatumLeave)}),s.on("legend-click.directive",function(e){var n=t.options.series.filter(function(t){return t.id===e.id})[0];n.visible=e.getToggledVisibility(),t.$apply()}),angular.element(n.$window).on("resize",function(e){s.trigger("resize",r[0].parentElement),a()}),t.$on("$destroy",function(){s.trigger("destroy"),angular.element(n.$window).off()})}}return t}();e.LineChart=t})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){}return e.prototype.init=function(e){return this._dispatch=d3.dispatch.apply(this,e),this},e.prototype.on=function(e,t){return this._dispatch.on(e,t),this},e.prototype.trigger=function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._dispatch[e].apply(this,t),this},e.prototype.datumEnter=function(e,t){var n=this;return function(r){return r.on("mouseenter",function(r,i){n.trigger("enter",r,i,e,t)})}},e.prototype.datumOver=function(e,t){var n=this;return function(r){return r.on("mouseover",function(r,i){n.trigger("over",r,i,e,t)})}},e.prototype.datumMove=function(e,t){var n=this;return function(r){return r.on("mousemove",function(r,i){n.trigger("over",r,i,e,t)})}},e.prototype.datumLeave=function(e,t){var n=this;return function(r){return r.on("mouseleave",function(r,i){n.trigger("leave",r,i,e,t)})}},e.EVENTS=["create","update","resize","destroy","enter","over","move","leave","click","dblclick","legend-click","legend-over","legend-out","focus","toggle"],e.DEFAULT=function(){return(new e).init(e.EVENTS)},e}();e.EventManager=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){this._factoryStack=[]}return e.prototype.index=function(e){return this._factoryStack.map(function(e){return e.key}).indexOf(e)},e.prototype.get=function(e){var t=this.index(e);return t>-1?this._factoryStack[t].instance:null},e.prototype.all=function(){return this._factoryStack},e.prototype.registerMany=function(e){var t=this;return e.forEach(function(e){t.register.apply(t,e)}),this},e.prototype.register=function(e,t){var n=[];for(var r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t.bind.apply(t,[null].concat(n)),s=new i;return this._factoryStack.push({key:e,instance:s}),s},e.prototype.unregister=function(e){var t=this.index(e);return t>-1&&delete this._factoryStack[t],this},e}();e.FactoryManager=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(){}return e.prototype.init=function(e,t,n){this.key=e,this.eventMgr=t,this.factoryMgr=n,this.eventMgr.on("create."+this.key,this.create.bind(this)),this.eventMgr.on("update."+this.key,this.update.bind(this)),this.eventMgr.on("destroy."+this.key,this.destroy.bind(this))},e.prototype.create=function(e){},e.prototype.update=function(e,t){},e.prototype.destroy=function(){},e}();e.BaseFactory=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},n3Charts;(function(e){var t;(function(e){"use strict";var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.update=function(e,t){this.data=e,this.options=t;var n=t.getSeriesByType(this.type).filter(function(e){return e.visible});this.updateSeriesContainer(n)},t.prototype.create=function(){this.createContainer(this.factoryMgr.get("container").data)},t.prototype.destroy=function(){this.svg.remove()},t.prototype.createContainer=function(e){this.svg=e.append("g").attr("class",this.type+t.containerClassSuffix)},t.prototype.updateSeriesContainer=function(e){var n=this,r=this.svg.selectAll("."+this.type+t.seriesClassSuffix).data(e,function(e){return e.id});r.enter().append("g").attr({"class":function(e){return n.type+t.seriesClassSuffix+" "+e.id}}),this.styleSeries(r),this.updateSeries(r,e),r.exit().remove()},t.prototype.updateSeries=function(e,t){var n=this;e.each(function(e,r){var i=d3.select(this);n.updateData(i,e,r,t.length)})},t.prototype.updateData=function(e,t,n,r){},t.prototype.styleSeries=function(e){},t.containerClassSuffix="-data",t.seriesClassSuffix="-series",t}(e.BaseFactory);e.SeriesFactory=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function e(e,t){this.fromJS(e,t)}return e.prototype.fromJS=function(e,t){this.id=t,this.values=e},e}();e.Dataset=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(e){e&&this.fromJS(e)}return t.prototype.fromJS=function(t){for(var n in t)t.hasOwnProperty(n)&&(t[n]=new e.Dataset(t[n],n));this.sets=t},t.prototype.getDatasets=function(e,t){var n=this;return e.map(function(e){return n.getDatasetValues(e,t)})},t.prototype.getDatasetValues=function(e,t){var n=t.getAbsKey();return this.sets[e.dataset].values.map(function(t){return{x:t[n],y:t[e.key]}})},t.getMinDistance=function(e,t,n,r){return n===void 0&&(n="x"),d3.min(e.map(function(e){return e.map(function(e){return t(e[n])}).filter(function(e){return r?e>=r[0]&&e<=r[1]:!0}).reduce(function(e,t,n,r){var i=n>0?t-r[n-1]:Number.MAX_VALUE;return i<e?i:e},Number.MAX_VALUE)}))},t}();e.Data=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(t){t===void 0&&(t={}),this.axis="y",this.type=["line"],this.visible=!0;var n=this.sanitizeOptions(t);this.id=n.id||e.Options.uuid(),this.axis=this.sanitizeAxis(n.axis),this.dataset=n.dataset,this.key=n.key,this.color=n.color,this.visible=n.visible,this.label=n.label||n.id,n.type.length>0&&(this.type=this.sanitizeType(n.type))}return t.prototype.sanitizeOptions=function(t){var n={};return angular.extend(n,this,t),n.id=e.Options.getString(n.id),n.type=e.Options.getArray(n.type),n.dataset=e.Options.getString(n.dataset),n.key=e.Options.getString(n.key),n.color=e.Options.getString(n.color),n.label=e.Options.getString(n.label),n.visible=e.Options.getBoolean(n.visible),n},t.prototype.getToggledVisibility=function(){return!this.visible},t.prototype.sanitizeType=function(e){return e.filter(function(e){return t.isValidType(e)})},t.prototype.sanitizeAxis=function(e){if(["y"].indexOf(e)===-1)throw TypeError(e+" is not a valid series option for axis.");return e},t.prototype.isAColumn=function(){return this.hasType(t.TYPE.COLUMN)},t.prototype.hasType=function(e){return this.type.indexOf(e)!==-1},t.isValidType=function(e){return d3.values(t.TYPE).indexOf(e)!==-1},t.TYPE={DOT:"dot",LINE:"line",AREA:"area",COLUMN:"column"},t}();e.SeriesOptions=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(e){e===void 0&&(e={}),this.type="linear",this.key="x",this.parse(e)}return t.prototype.parse=function(n){this.type=e.Options.getString(n.type,"linear"),this.key=n.key,this.tickFormat=e.Options.getFunction(n.tickFormat),this.ticks=n.ticks,this.type===t.TYPE.LINEAR?(this.min=e.Options.getNumber(n.min,undefined),this.max=e.Options.getNumber(n.max,undefined)):this.type===t.TYPE.DATE&&(this.min=e.Options.getDate(n.min,undefined),this.max=e.Options.getDate(n.max,undefined))},t.isValidSide=function(e){return d3.values(t.SIDE).indexOf(e)!==-1},t.prototype.configure=function(e){return e.tickFormat(this.tickFormat),this.ticks instanceof Array?e.tickValues(this.ticks):typeof this.ticks=="number"&&e.ticks(this.ticks),e},t.SIDE={X:"x",Y:"y"},t.TYPE={LINEAR:"linear",DATE:"date"},t}();e.AxisOptions=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(e){this.series=[],this.axes={x:{},y:{}},this.margin={top:0,left:40,bottom:40,right:0};var t=this.sanitizeOptions(e);this.margin=this.sanitizeMargin(t.margin),this.series=this.sanitizeSeries(t.series),this.axes=this.sanitizeAxes(t.axes)}return t.prototype.sanitizeOptions=function(e){var n={};return angular.extend(n,this,e),n.margin=t.getObject(n.margin,this.margin),n.series=t.getArray(n.series),n.axes=t.getObject(n.axes,this.axes),n},t.prototype.sanitizeMargin=function(e){return{top:t.getNumber(e.top,0),left:t.getNumber(e.left,0),bottom:t.getNumber(e.bottom,0),right:t.getNumber(e.right,0)}},t.prototype.sanitizeSeries=function(t){return t.map(function(t){return new e.SeriesOptions(t)})},t.prototype.sanitizeAxes=function(t){return Object.keys(t).reduce(function(n,r){return n[r]=new e.AxisOptions(t[r]),n},{})},t.prototype.getAbsKey=function(){if(!this.axes[e.AxisOptions.SIDE.X])throw new TypeError("Cannot find abs key : "+e.AxisOptions.SIDE.X);return this.axes[e.AxisOptions.SIDE.X].key},t.prototype.getByAxisSide=function(t){if(!e.AxisOptions.isValidSide(t))throw new TypeError("Cannot get axis side : "+t);return this.axes[t]},t.prototype.getSeriesByType=function(t){if(!e.SeriesOptions.isValidType(t))throw new TypeError("Unknown series type: "+t);return this.series.filter(function(e){return e.hasType(t)})},t.getBoolean=function(e,t){return t===void 0&&(t=!0),e!==!t},t.getNumber=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},t.getDate=function(e,t){return e instanceof Date?e:t},t.getFunction=function(e){return e instanceof Function?e:undefined},t.getString=function(e,t){return e?String(e):String(t)},t.getIdentifier=function(e){var n=t.getString(e);return n.replace(/[^a-zA-Z0-9\-_]/ig,"")},t.getObject=function(e,t){t===void 0&&(t={});if(!angular.isObject(e))throw TypeError(e+" option must be an object.");var n={};return angular.extend(n,t,e),n},t.getArray=function(e,t){return t===void 0&&(t=[]),t.concat(e)},t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})},t}();e.Options=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(e){"use strict";var t=function(){function t(){this.width=600,this.height=200,this.innerWidth=560,this.innerHeight=160,this.margin={left:30,bottom:20,right:20,top:20}}return t.prototype.updateMargins=function(t){var n=this;if(!t||!t.margin)return;var r=function(r){return n.margin[r]=e.Options.getNumber(t.margin[r],n.margin[r])};r("top"),r("bottom"),r("left"),r("right")},t.prototype.getDimensionByProperty=function(e,t){var n=window.getComputedStyle(e,null);return+n.getPropertyValue(t).replace(/px$/,"")},t.prototype.fromParentElement=function(e){var t=this.getDimensionByProperty(e,"padding-left")+this.getDimensionByProperty(e,"padding-right"),n=this.getDimensionByProperty(e,"padding-top")+this.getDimensionByProperty(e,"padding-bottom");this.width=e.clientWidth-t,this.height=e.clientHeight-n,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right},t}();e.Dimensions=t})(t=e.Utils||(e.Utils={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(t){function n(n){t.call(this),this.element=n,this.dim=new e.Utils.Dimensions}return __extends(n,t),n.prototype.create=function(e){this.dim.updateMargins(e),this.createRoot(),this.createContainer(),this.eventMgr.on("resize",this.dim.fromParentElement.bind(this.dim))},n.prototype.update=function(e,t){this.updateRoot(),this.updateContainer()},n.prototype.destroy=function(){this.destroyRoot()},n.prototype.createRoot=function(){this.svg=d3.select(this.element).append("svg").attr("class","chart")},n.prototype.updateRoot=function(){this.svg.attr("width",this.dim.width).attr("height",this.dim.height)},n.prototype.destroyRoot=function(){this.svg.remove()},n.prototype.createContainer=function(){this.vis=this.svg.append("g").attr("class","container"),this.axes=this.vis.append("g").attr("class","axes"),this.data=this.vis.append("g").attr("class","data")},n.prototype.updateContainer=function(){this.vis.attr("width",this.dim.innerWidth).attr("height",this.dim.innerHeight).attr("transform","translate("+this.dim.margin.left+", "+this.dim.margin.top+")")},n.prototype.getDimensions=function(){return this.dim},n}(e.Utils.BaseFactory);t.Container=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(t){function n(e){t.call(this),this.element=e}return __extends(n,t),n.prototype.create=function(){this.createTooltip(),this.eventMgr.on("enter.tooltip",this.show.bind(this)),this.eventMgr.on("leave.tooltip",this.hide.bind(this))},n.prototype.createTooltip=function(){var e=this.svg=d3.select(this.element).append("div").attr("class","chart-tooltip").style("position","absolute");e.append("div").attr("class","arrow"),e.append("div").attr("class","abscissas").style("display","inline-block"),e.append("div").attr("class","value").style("display","inline-block")},n.prototype.destroy=function(){this.svg.remove()},n.prototype.show=function(e,t,n,r){this.updateTooltipContent(e,t,n,r),this.updateTooltipPosition(e,t,n),this.svg.transition().call(this.factoryMgr.get("transitions").edit).style("opacity","1");return},n.prototype.updateTooltipContent=function(t,n,r,i){var s=i.getByAxisSide(e.Utils.AxisOptions.SIDE.X).tickFormat;this.svg.select(".abscissas").text(s?s(t.x,n):t.x);var o=i.getByAxisSide(e.Utils.AxisOptions.SIDE.Y).tickFormat;this.svg.select(".value").text(o?o(t.y,n):t.y),this.svg.style("background-color",r.color),this.svg.select(".arrow").style("border-top-color",r.color)},n.prototype.updateTooltipPosition=function(e,t,n){var r=this.factoryMgr.get("x-axis").scale,i=this.factoryMgr.get("y-axis").scale,s=r(e.x);n.isAColumn()&&(s+=this.factoryMgr.get("series-column").getTooltipPosition(n));var o=this.factoryMgr.get("container").getDimensions().margin,u=this.element.offsetLeft,a=this.element.offsetTop;this.svg.classed("positive",e.y>=0).classed("negative",e.y<0).style({left:u+o.left+s+"px",top:a+o.top+i(e.y)+"px"});return},n.prototype.hide=function(){var e=this.svg;this.svg.transition().call(this.factoryMgr.get("transitions").edit).style("opacity","0").each("end",function(){return e.style({left:"0px",top:"0px"})});return},n}(e.Utils.BaseFactory);t.Tooltip=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(t){e.call(this),this.element=t}return __extends(t,e),t.prototype.create=function(){this.createLegend()},t.prototype.createLegend=function(){this.div=d3.select(this.element).append("div").attr("class","chart-legend").style("position","absolute")},t.prototype.legendClick=function(){var e=this;return function(t){return t.on("click",function(t){e.eventMgr.trigger("legend-click",t)})}},t.prototype.update=function(e,t){var n=this,r=this.factoryMgr.get("container"),i=r.getDimensions(),s=function(e){var t=e.append("div").attr({"class":"item"}).call(n.legendClick());t.append("div").attr({"class":"icon"}),t.append("div").attr({"class":"label"})},o=function(e){e.attr("class",function(e){return"item "+e.type.join(" ")}).classed("hidden",function(e){return!e.visible}),e.select(".icon").style("background-color",function(e){return e.color}),e.select(".label").text(function(e){return e.label})},u=this.div.selectAll(".item").data(t.series);u.enter().call(s),u.call(o),u.exit().remove()},t.prototype.destroy=function(){this.div.remove()},t}(e.Utils.BaseFactory);t.Legend=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(t){function n(n){t.call(this),this.side=n;if(!e.Utils.AxisOptions.isValidSide(n))throw new TypeError("Wrong axis side : "+n)}return __extends(n,t),n.prototype.create=function(){var e=this.factoryMgr.get("container").axes;this.createAxis(e)},n.prototype.update=function(e,t){var n=this.factoryMgr.get("container"),r=n.getDimensions(),i=this.getExtent(e,t),s=t.getByAxisSide(this.side);this.scale=this.getScale(s),this.updateScaleRange(r),this.updateScaleDomain(i),this.axis=this.getAxis(this.scale,s),this.updateAxisOrientation(),this.updateAxisContainer(r)},n.prototype.destroy=function(){this.destroyAxis()},n.prototype.updateScaleRange=function(e){this.isAbscissas()?this.scale.range([0,e.innerWidth]):this.scale.range([e.innerHeight,0])},n.prototype.updateScaleDomain=function(e){this.scale.domain(e)},n.prototype.getExtentForDatasets=function(e,t,n){var r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var s in e.sets){if(!t(s))continue;e.sets[s].values.forEach(function(e){var t=n(e,s);t[0]<r&&(r=t[0]),t[1]>i&&(i=t[1])})}return[r===Number.POSITIVE_INFINITY?0:r,i===Number.NEGATIVE_INFINITY?1:i]},n.prototype.getExtent=function(e,t){var n=this,r=t.axes[this.side],i=undefined;if(this.isAbscissas()){var s=t.getAbsKey();i=this.getExtentForDatasets(e,function(){return!0},function(e){return[e[s],e[s]]})}else{var o=[],u={};t.series.forEach(function(e){e.visible&&e.axis===n.side&&(o.push(e.dataset),u[e.dataset]||(u[e.dataset]=[]),u[e.dataset].push(e))}),i=this.getExtentForDatasets(e,function(e){return o.indexOf(e)>-1},function(e,t){var n=u[t].map(function(t){return e[t.key]});return[d3.min(n),d3.max(n)]})}return r.min!==undefined&&(i[0]=r.min),r.max!==undefined&&(i[1]=r.max),i},n.prototype.isAbscissas=function(){return this.side===e.Utils.AxisOptions.SIDE.X},n.prototype.createAxis=function(e){this.svg=e.append("g").attr("class","axis "+this.side+"-axis")},n.prototype.updateAxisOrientation=function(){this.isAbscissas()?this.axis.orient("bottom"):this.axis.orient("left")},n.prototype.updateAxisContainer=function(e){this.isAbscissas()?this.svg.attr("transform","translate(0, "+e.innerHeight+")"):this.svg.attr("transform","translate(0, 0)"),this.svg.transition().call(this.factoryMgr.get("transitions").edit).call(this.axis)},n.prototype.destroyAxis=function(){this.svg.remove()},n.prototype.getScale=function(t){var n;return t.type===e.Utils.AxisOptions.TYPE.DATE?d3.time.scale():d3.scale.linear()},n.prototype.getAxis=function(e,t){var n=d3.svg.axis().scale(e);return t.configure(n),n},n}(e.Utils.BaseFactory);t.Axis=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){"use strict";var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.enter=function(e){var n=t.duration,r=t.ease,i=e[0].length,s=function(e,t){return i?t/i*n:0};return e.duration(n).delay(s).ease(r)},t.prototype.edit=function(e){var n=t.duration,r=t.ease,i=0;return e.duration(n).delay(i).ease(r)},t.prototype.exit=function(e){var n=t.duration,r=t.ease,i=0;return e.duration(n).delay(i).ease(r)},t.duration=250,t.ease="cubic",t}(e.Utils.BaseFactory);t.Transition=n})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.SeriesOptions.TYPE.DOT}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options),u=4,a=e.selectAll("."+this.type).data(o,function(e){return e.x}),f=function(e){e.attr({r:function(e){return 4},cx:function(e){return i.scale(e.x)},cy:function(e){return s.scale(0)}})},l=function(e){e.attr({cx:function(e){return i.scale(e.x)},cy:function(e){return s.scale(e.y)}}).style("opacity",t.visible?1:0)};a.enter().append("circle").attr("class",this.type).call(this.eventMgr.datumEnter(t,this.options)).call(this.eventMgr.datumOver(t,this.options)).call(this.eventMgr.datumMove(t,this.options)).call(this.eventMgr.datumLeave(t,this.options)).call(f).transition().call(this.factoryMgr.get("transitions").enter).call(l),a.transition().call(this.factoryMgr.get("transitions").edit).call(l),a.exit().transition().call(this.factoryMgr.get("transitions").exit).call(f).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:function(e){return e.color},stroke:"white"})},n}(e.Utils.SeriesFactory);t.Dot=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.SeriesOptions.TYPE.LINE}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options),u=d3.svg.line().x(function(e){return i.scale(e.x)}).y(s.scale(0)),a=d3.svg.line().x(function(e){return i.scale(e.x)}).y(function(e){return s.scale(e.y)}),f=e.selectAll("."+this.type).data([o]);f.enter().append("path").attr("class",this.type).attr("d",function(e){return u(e)}).transition().call(this.factoryMgr.get("transitions").enter).attr("d",function(e){return a(e)}),f.transition().call(this.factoryMgr.get("transitions").edit).attr("d",function(e){return a(e)}).style("opacity",t.visible?1:0),f.exit().transition().call(this.factoryMgr.get("transitions").exit).attr("d",function(e){return u(e)}).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:"none",stroke:function(e){return e.color}})},n}(e.Utils.SeriesFactory);t.Line=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.SeriesOptions.TYPE.AREA}return __extends(n,t),n.prototype.updateData=function(e,t,n,r){var i=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(t,this.options),u=d3.svg.area().x(function(e){return i.scale(e.x)}).y0(s.scale(0)).y1(function(e){return s.scale(0)}),a=d3.svg.area().x(function(e){return i.scale(e.x)}).y0(s.scale(0)).y1(function(e){return s.scale(e.y)}),f=e.selectAll("."+this.type).data([o]);f.enter().append("path").attr("class",this.type).attr("d",function(e){return u(e)}).transition().call(this.factoryMgr.get("transitions").enter).attr("d",function(e){return a(e)}),f.transition().call(this.factoryMgr.get("transitions").edit).attr("d",function(e){return a(e)}).style("opacity",t.visible?1:0),f.exit().transition().call(this.factoryMgr.get("transitions").exit).attr("d",function(e){return u(e)}).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:function(e){return e.color},stroke:function(e){return e.color},opacity:.3})},n}(e.Utils.SeriesFactory);t.Area=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){var t;(function(t){var n;(function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.type=e.Utils.SeriesOptions.TYPE.COLUMN,this.gapFactor=.2,this.outerPadding=this.gapFactor/2*3,this.columnsWidth=0}return __extends(n,t),n.prototype.update=function(e,t){this.data=e,this.options=t;var n=t.getSeriesByType(this.type).filter(function(e){return e.visible});this.updateColumnsWidth(n,t),this.updateColumnScale(n,t),this.updateSeriesContainer(n)},n.prototype.updateColumnsWidth=function(t,n){var r=this.factoryMgr.get("x-axis"),i=this.data.getDatasets(t,n),s=e.Utils.Data.getMinDistance(i,r.scale,"x");this.columnsWidth=s<Number.MAX_VALUE?s/t.length:10},n.prototype.updateColumnScale=function(e,t){var n=this.columnsWidth*e.length/2;this.innerXScale=d3.scale.ordinal().domain(e.map(function(e){return e.id})).rangeBands([-n,n],0,.1)},n.prototype.getTooltipPosition=function(e){return this.innerXScale(e.id)+this.innerXScale.rangeBand()/2},n.prototype.updateData=function(e,t,n,r){var i=this,s=this.factoryMgr.get("x-axis"),o=this.factoryMgr.get("y-axis"),u=this.data.getDatasetValues(t,this.options),a=function(e){return s.scale(e.x)+i.innerXScale(t.id)},f=function(e){e.attr({x:a,y:o.scale(0),width:i.innerXScale.rangeBand(),height:0})},l=function(e){e.attr({x:a,y:function(e){return e.y>0?o.scale(e.y):o.scale(0)},width:i.innerXScale.rangeBand(),height:function(e){return Math.abs(o.scale(0)-o.scale(e.y))}}).style("opacity",t.visible?1:0)},c=e.selectAll("."+this.type).data(u,function(e){return e.x});c.enter().append("rect").attr("class",this.type).call(this.eventMgr.datumEnter(t,this.options)).call(this.eventMgr.datumOver(t,this.options)).call(this.eventMgr.datumMove(t,this.options)).call(this.eventMgr.datumLeave(t,this.options)).call(f).transition().call(this.factoryMgr.get("transitions").enter).call(l),c.transition().call(this.factoryMgr.get("transitions").edit).call(l),c.exit().transition().call(this.factoryMgr.get("transitions").exit).call(f).each("end",function(){d3.select(this).remove()})},n.prototype.styleSeries=function(e){e.style({fill:function(e){return e.color},"fill-opacity":.5,stroke:function(e){return e.color},"stroke-width":1})},n}(e.Utils.SeriesFactory);t.Column=n})(n=t.Series||(t.Series={}))})(t=e.Factory||(e.Factory={}))})(n3Charts||(n3Charts={}));var n3Charts;(function(e){"use strict";angular.module("n3-line-chart",[]).directive("linechart",["$window",function(t){return new e.LineChart(t)}])})(n3Charts||(n3Charts={}));