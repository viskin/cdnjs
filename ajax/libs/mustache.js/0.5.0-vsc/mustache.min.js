var Mustache=function(e){function t(){}function r(e){if(!b){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];b=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(b,"\\$1")}function n(e){return e.match(/\r?\n/)}function i(e){return e&&"function"==typeof e}function a(e){return e&&"object"==typeof e}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(r,i){var a,c,o;for(a=r.tokens.length;r.cursor<a&&!r.terminated;++r.cursor)o=r.tokens[r.cursor],""!==o&&o!==e&&(0===o.indexOf(r.openTag)?(c=o.charAt(r.openTag.length),r.parser[c]?r.parser[c](r,o,c):r.parser.def(r,o)):r.parser.text(r,o),n(o)?(r.metrics.character=1,r.metrics.line++):r.metrics.character+=o.length);if(r.parser===j&&!r.terminated)throw new S('Closing section tag "'+r.section.variable+'" expected.',r.metrics);if(!i){var s=r.code;return 0===s.length?t:1===s.length?s[0]:function(e,t){for(var r=0,n=s.length;n>r;++r)s[r](e,t)}}}function s(e,t,n,i){n=n||"{{",i=i||"}}";if("{{"===n&&"}}"===i)tokenizer=y;else{var a=r(n),c=r(i),o=["(\\r?\\n)","("+a+"![\\s\\S]*?!"+c+")","("+a+"[#^/&>]?\\s*[^!{=]\\S*?\\s*"+c+")","("+a+"{\\s*\\S*?\\s*}"+c+")","("+a+"=\\S*?\\s*\\S*?="+c+")"];tokenizer=new RegExp(o.join("|"))}var s=[],p={metrics:{partial:null,line:1,character:1},template:e||"",partials:t||{},openTag:n,closeTag:i,parser:E,pragmas:{},code:s,send_code_func:function(e){s.push(e)}};return l(p),p.tokens=T.call(p.template,tokenizer),p.cursor=0,p}function l(t){function r(e,t){return-1!==t.indexOf("{{"+e)}return r("%",t.template)?void(t.template=t.template.replace(/{{%([\w-]+)(\s*)(.*?(?=}}))}}/g,function(r,n,a,c){var o,s,l,p,u=e;if(c.length>0)for(o=c.split(","),u={},l=0,p=o.length;p>l;++l){if(s=o[l].split("="),2!==s.length)throw new S('Malformed pragma option "'+o[l]+'".');u[s[0]]=s[1]}if(!i(I[n]))throw new S('This implementation of mustache does not implement the "'+n+'" pragma.',e);return I[n](t,u),""})):t.template}function p(e,t){function r(e){return e===!1||0===e||e}var n;return r(t[e])&&(n=t[e]),i(n)?n.apply(t):n}function u(t,r){var n;return n=p(t,r[r.length-1]),n!==e?n:r.length>1&&(n=p(t,r[0]),n!==e)?n:e}function f(e,t){e.send_code_func(function(e,r){r(t)})}function h(t,r,n){function i(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var a,c,o;"{"===n?a=c=o=!0:"&"===n&&(a=c=!0);var s=d(t,r,c,o);t.send_code_func(function(t,r){return function(n,a){var c=u(t,n);c!==e&&(r||(c=i(""+c)),a(""+c))}}(s,a))}function g(e,r){var n,a,c=d(e,r,!0);if(!e.partials[c])throw new S('Unknown partial "'+c+'".',e.metrics);if(!i(e.partials[c])){n=e.partials[c],e.partials[c]=t;var l=s(n,e.partials);l.metrics.partial=c,a=o(l),e.partials[c]=function(e,t){var r=u(c,e);r&&e.push(r),a(e,t),r&&e.pop()}}e.send_code_func(function(t,r){e.partials[c](t,r)})}function m(e){function t(t){if(a(t))return t;var r={},n=(e.pragmas["IMPLICIT-ITERATOR"]||{iterator:"."}).iterator;return r[n]=t,r}var r,n=e.section,l=n.template_buffer.join(""),p=s(l,e.partials,e.openTag,e.closeTag);p.metrics=n.metrics,r=o(p),e.send_code_func(n.inverted?function(e,t){return function(r,n){var i=u(t,r);(!i||c(i)&&0===i.length)&&e(r,n)}}(r,n.variable):function(e,r,n,l){return function(p,f){var h=u(r,p);if(c(h))for(var g=0,m=h.length;m>g;++g)p.push(t(h[g])),e(p,f),p.pop();else a(h)?(p.push(h),e(p,f),p.pop()):i(h)?f(h.call(p[p.length-1],n,function(e){var t=[],r=function(e){t.push(e)},n=s(e,l);return n.metrics.partial="HOS@@anon",o(n)(p,r),t.join("")})):h&&e(p,f)}}(r,n.variable,l,e.partials))}function d(e,t,r,n){var i=t.substring(e.openTag.length+(r?1:0),t.length-e.closeTag.length-(n?1:0));if(i=String.prototype.trim?i.trim():i.replace(/^\s\s*/,"").replace(/\s\s*$/,""),-1!==i.indexOf(" "))throw new S('Malformed variable name "'+i+'".',e.metrics);return i}function v(e,t){var n=t.match(new RegExp(r(e.openTag)+"=(\\S*?)\\s*(\\S*?)="+r(e.closeTag)));if(3!==(n||[]).length)throw new S('Malformed change delimiter token "'+t+'".',e.metrics);var i=s(e.tokens.slice(e.cursor+1).join(""),e.partials,n[1],n[2]);i.code=e.code,i.send_code_func=e.send_code_func,i.parser=e.parser,i.metrics.line=e.metrics.line,i.metrics.character=e.metrics.character+t.length,i.metrics.partial=e.metrics.partial,i.section=e.section,i.pragmas=e.pragmas,i.section&&i.section.template_buffer.push(t),e.terminated=!0,o(i,!0)}function _(e,t,r){var n="^"===r,i=d(e,t,!0);e.parser===E?(e.parser=j,e.section={variable:i,template_buffer:[],inverted:n,child_sections:[],metrics:{partial:e.metrics.partial,line:e.metrics.line,character:e.metrics.character+t.length}}):(e.section.child_sections.push(i),e.section.template_buffer.push(t))}function x(e,t){e.section.template_buffer.push(t)}function w(e,t){var r=d(e,t,!0);if(e.section.child_sections.length>0){var n=e.section.child_sections[e.section.child_sections.length-1];if(n!==r)throw new S('Unexpected section end tag "'+r+'", expected "'+n+'".',e.metrics);e.section.child_sections.pop(),e.section.template_buffer.push(t)}else{if(e.section.variable!==r)throw new S('Unexpected section end tag "'+r+'", expected "'+e.section.variable+'".',e.metrics);m(e),delete e.section,e.parser=E}}var b,T=function(){function t(t){var n=this,i=e;if("[object RegExp]"!==Object.prototype.toString.call(t))return String.prototype.split.call(n,t,i);var a,c,o,s,l=[],p=0,u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":""),t=RegExp(t.source,u+"g");if(n+="",r||(a=RegExp("^"+t.source+"$(?!\\s)",u)),i===e||0>+i)i=1/0;else if(i=Math.floor(+i),!i)return[];for(;(c=t.exec(n))&&(o=c.index+c[0].length,!(o>p&&(l.push(n.slice(p,c.index)),!r&&c.length>1&&c[0].replace(a,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(c[t]=e)}),c.length>1&&c.index<n.length&&Array.prototype.push.apply(l,c.slice(1)),s=c[0].length,p=o,l.length>=i)));)t.lastIndex===c.index&&t.lastIndex++;return p===n.length?(s||!t.test(""))&&l.push(""):l.push(n.slice(p)),l.length>i?l.slice(0,i):l}var r=/()??/.exec("")[1]===e;return 3!=="lol".split(/(o)/).length?t:String.prototype.split}(),S=function(e,t){var r="";this.prototype=Error.prototype,this.name="MustacheError",t&&(r="("+t.line+","+t.character+"): ",t.partial&&(r="["+t.partial+"]"+r)),this.message=r+e,t&&(this.line=t.line,this.character=t.character,this.partial=t.partial)},y=/(\r?\n)|({{![\s\S]*?!}})|({{[#\^\/&>]?\s*[^!{=]\S*?\s*}})|({{{\s*\S*?\s*}}})|({{=\S*?\s*\S*?=}})/,I={"IMPLICIT-ITERATOR":function(t,r){t.pragmas["IMPLICIT-ITERATOR"]={iterator:(r||{iterator:e}).iterator||"."}}},E={"!":t,"#":_,"^":_,"/":function(e,t){throw new S('Unbalanced End Section tag "'+t+'".',e.metrics)},"&":h,"{":h,">":g,"=":v,def:h,text:f},j={"!":t,"#":_,"^":_,"/":w,"&":x,"{":x,">":x,"=":v,def:x,text:x};return{name:"mustache.js",version:"0.5.0-vcs",to_html:function(e,t,r,n){var i=Mustache.compile(e,r),a=i(t,n);return n?void 0:a},compile:function(e,t){var r={};if(t)for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);var i=o(s(e,r));return function(e,t){var r=[],n=t||function(e){r.push(e)};return i([e||{}],n),t?void 0:r.join("")}},Error:S}}();