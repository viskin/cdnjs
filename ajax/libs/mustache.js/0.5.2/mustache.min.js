var Mustache;!function(t){"undefined"!=typeof module?module.exports=t:"function"==typeof define?define(t):Mustache=t}(function(){function t(t,e){return RegExp.prototype.test.call(t,e)}function e(e){return!t(x,e)}function n(t){var e=t.replace(U,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)});return'"'+e+'"'}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t){return String(t).replace(/[&<>"'\/]/g,function(t){return E[t]})}function a(t){this.string=t,this.tail=t,this.pos=0}function o(t,e){this.view=t,this.parent=e,this.clearCache()}function c(){this.clearCache()}function s(t,e){for(var r,i,a,o=['""'],c=0,u=t.length;u>c;++c)switch(r=t[c],r.type){case"#":case"^":i="#"===r.type?"_section":"_inverted",o.push("r."+i+"("+n(r.value)+", c, function (c, r) {\n  "+s(r.tokens,!0)+"\n})");break;case"{":case"&":case"name":a="name"===r.type?"true":"false",o.push("r._name("+n(r.value)+", c, "+a+")");break;case">":o.push("r._partial("+n(r.value)+", c)");break;case"text":o.push(n(r.value))}return o="return "+o.join(" + ")+";",e?o:new Function("c, r",o)}function u(t){if(2===t.length)return[new RegExp(r(t[0])+"\\s*"),new RegExp("\\s*"+r(t[1]))];throw new Error("Invalid tags: "+t.join(" "))}function l(t){for(var e,n,r=[],i=r,a=[],o=0;o<t.length;++o)switch(e=t[o],e.type){case"#":case"^":e.tokens=[],a.push(e),i.push(e),i=e.tokens;break;case"/":if(0===a.length)throw new Error("Unopened section: "+e.value);if(n=a.pop(),n.value!==e.value)throw new Error("Unclosed section: "+n.value);i=a.length>0?a[a.length-1].tokens:r;break;default:i.push(e)}if(n=a.pop())throw new Error("Unclosed section: "+n.value);return r}function p(t){for(var e,n=0;n<t.length;++n){var r=t[n];e&&"text"===e.type&&"text"===r.type?(e.value+=r.value,t.splice(n--,1)):e=r}}function h(t,n){n=n||w.tags;for(var i,o,c,s=u(n),h=new a(t),f=[],v=[],g=!1,y=!1,x=function(){if(g&&!y)for(;v.length;)f.splice(v.pop(),1);else v=[];g=!1,y=!1};!h.eos();){if(o=h.scanUntil(s[0]))for(var C=0,U=o.length;U>C;++C)c=o.charAt(C),e(c)?v.push(f.length):y=!0,f.push({type:"text",value:c}),"\n"===c&&x();if(!h.scan(s[0]))break;if(g=!0,i=h.scan(b)||"name",h.scan(d),"="===i)o=h.scanUntil(k),h.scan(k),h.scanUntil(s[1]);else if("{"===i){var E=new RegExp("\\s*"+r("}"+n[1]));o=h.scanUntil(E),h.scan(_),h.scanUntil(s[1])}else o=h.scanUntil(s[1]);if(!h.scan(s[1]))throw new Error("Unclosed tag at "+h.pos);f.push({type:i,value:o}),("name"===i||"{"===i||"&"===i)&&(y=!0),"="===i&&(n=o.split(m),s=u(n))}return p(f),l(f)}function f(){A.clearCache()}function v(t,e){return A.compile(t,e)}function g(t,e,n){return A.compilePartial(t,e,n)}function y(t,e,n){if(n)for(var r in n)g(r,n[r]);return A.render(t,e)}var w={};w.name="mustache.js",w.version="0.5.2",w.tags=["{{","}}"],w.parse=h,w.clearCache=f,w.compile=v,w.compilePartial=g,w.render=y,w.Scanner=a,w.Context=o,w.Renderer=c,w.to_html=function(t,e,n,r){var i=y(t,e,n);return"function"!=typeof r?i:void r(i)};var d=/\s*/,m=/\s+/,x=/\S/,k=/\s*=/,_=/\s*\}/,b=/#|\^|\/|>|\{|&|=|!/,C=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},U=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF\u2028\u2029]/gm,E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};w.isWhitespace=e,w.isArray=C,w.quote=n,w.escapeRe=r,w.escapeHtml=i,a.prototype.eos=function(){return""===this.tail},a.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},a.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return e},o.make=function(t){return t instanceof o?t:new o(t)},o.prototype.clearCache=function(){this._cache={}},o.prototype.push=function(t){return new o(t,this)},o.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."===t)e=this.view;else for(var n=this;n;){if(t.indexOf(".")>0){var r=t.split("."),i=0;for(e=n.view;e&&i<r.length;)e=e[r[i++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},c.prototype.clearCache=function(){this._cache={},this._partialCache={}},c.prototype.compile=function(t,e){"string"==typeof t&&(t=h(t,e));var n=s(t),r=this;return function(t){return n(o.make(t),r)}},c.prototype.compilePartial=function(t,e,n){return this._partialCache[t]=this.compile(e,n),this._partialCache[t]},c.prototype.render=function(t,e){var n=this._cache[t];return n||(n=this.compile(t),this._cache[t]=n),n(e)},c.prototype._section=function(t,e,n){var r=e.lookup(t);switch(typeof r){case"object":if(C(r)){for(var i="",a=0,o=r.length;o>a;++a)i+=n(e.push(r[a]),this);return i}return r?n(e.push(r),this):"";case"function":var c=n(e,this),s=this,u=function(t){return s.render(t,e)};return r.call(e.view,c,u)||"";default:if(r)return n(e,this)}return""},c.prototype._inverted=function(t,e,n){var r=e.lookup(t);return null==r||r===!1||C(r)&&0===r.length?n(e,this):""},c.prototype._partial=function(t,e){var n=this._partialCache[t];return n?n(e):""},c.prototype._name=function(t,e,n){var r=e.lookup(t);"function"==typeof r&&(r=r.call(e.view));var a=null==r?"":String(r);return n?i(a):a};var A=new c;return w}());