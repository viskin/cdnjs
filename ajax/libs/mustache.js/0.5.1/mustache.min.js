var Mustache="undefined"!=typeof module&&module.exports||{};!function(t){function e(t){return!d.test(t)}function n(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function r(t){return String(t).replace(/&(?!\w+;)|[<>"']/g,function(t){return U[t]})}function i(t){this.string=t,this.tail=t,this.pos=0}function a(t,e){this.view=t,this.parent=e,this.clearCache()}function o(){this.clearCache()}function s(t,e){"string"==typeof t&&(t=h(t));for(var n,r,i,a=['""'],o=0,c=t.length;c>o;++o)switch(n=t[o],n.type){case"#":case"^":r="#"===n.type?"_section":"_inverted",a.push("r."+r+"("+C(n.value)+", c, function (c, r) {\n  "+s(n.tokens,!0)+"\n})");break;case"{":case"&":case"name":i="name"===n.type?"true":"false",a.push("r._name("+C(n.value)+", c, "+i+")");break;case">":a.push("r._partial("+C(n.value)+", c)");break;case"text":a.push(C(n.value))}return a="return "+a.join(" + ")+";",e?a:new Function("c, r",a)}function c(t){if(2===t.length)return[new RegExp(n(t[0])+"\\s*"),new RegExp("\\s*"+n(t[1]))];throw new Error("Invalid tags: "+t.join(" "))}function u(t){for(var e,n,r=[],i=r,a=[],o=0;o<t.length;++o)switch(e=t[o],e.type){case"#":case"^":e.tokens=[],a.push(e),i.push(e),i=e.tokens;break;case"/":if(0===a.length)throw new Error("Unopened section: "+e.value);if(n=a.pop(),n.value!==e.value)throw new Error("Unclosed section: "+n.value);i=a.length>0?a[a.length-1].tokens:r;break;default:i.push(e)}if(n=a.pop())throw new Error("Unclosed section: "+n.value);return r}function l(t){for(var e,n=0;n<t.length;++n)token=t[n],e&&"text"===e.type&&"text"===token.type?(e.value+=token.value,t.splice(n--,1)):e=token}function h(n,r){function a(){if(g&&!d)for(;v.length;)f.splice(v.pop(),1);else v=[];g=!1,d=!1}r=c(r||t.tags);for(var o,s,h,p=new i(n),f=[],v=[],g=!1,d=!1;!p.eos();){if(s=p.scanUntil(r[0]))for(var b=0,C=s.length;C>b;++b)h=s[b],e(h)?v.push(f.length):d=!0,f.push({type:"text",value:h}),"\n"===h&&a();if(!p.scan(r[0]))break;if(g=!0,o=p.scan(_)||"name",p.scan(y),"="===o?(s=p.scanUntil(m),p.scan(m),p.scanUntil(r[1])):"{"===o?(s=p.scanUntil(k),p.scan(k),p.scanUntil(r[1])):s=p.scanUntil(r[1]),!p.scan(r[1]))throw new Error("Unclosed tag at "+p.pos);f.push({type:o,value:s}),("name"===o||"{"===o||"&"===o)&&(d=!0),"="===o&&(r=c(s.split(w)))}return l(f),u(f)}function p(){x.clearCache()}function f(t,e){return x.compile(t,e)}function v(t,e,n){return x.compilePartial(t,e,n)}function g(t,e,n){if(n)for(var r in n)v(r,n[r]);return x.render(t,e)}t.name="mustache.js",t.version="0.5.1-dev",t.tags=["{{","}}"],t.parse=h,t.clearCache=p,t.compile=f,t.compilePartial=v,t.render=g,t.Scanner=i,t.Context=a,t.Renderer=o,t.to_html=function(t,e,n,r){var i=g(t,e,n);return"function"!=typeof r?i:void r(i)};var y=/\s*/,w=/\s+/,d=/\S/,m=/\s*=/,k=/\s*\}/,_=/#|\^|\/|>|\{|&|=|!/,b=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},C="undefined"!=typeof JSON&&JSON.stringify||function(t){return'"'+String(t).replace(/(^|[^\\])"/g,'\\"')+'"'},U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};t.isWhitespace=e,t.isArray=b,t.quote=C,t.escapeRe=n,t.escapeHtml=r,i.prototype.eos=function(){return""===this.tail},i.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):null},i.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e=null;break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return e},a.make=function(t){return t instanceof a?t:new a(t)},a.prototype.clearCache=function(){this._cache={}},a.prototype.push=function(t){return new a(t,this)},a.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."===t)e=this.view;else for(var n=this;n;){if(t.indexOf(".")>0){var r=t.split("."),i=0;for(e=n.view;e&&i<r.length;)e=e[r[i++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},o.prototype.clearCache=function(){this._cache={},this._partialCache={}},o.prototype.compile=function(t){var e=s(t),n=this;return function(t){return e(a.make(t),n)}},o.prototype.compilePartial=function(t,e,n){return this._partialCache[t]=this.compile(e,n),this._partialCache[t]},o.prototype.render=function(t,e){var n=this._cache[t];return n||(n=this.compile(t),this._cache[t]=n),n(e)},o.prototype._section=function(t,e,n){function r(t){return u.render(t,e)}var i=e.lookup(t);switch(typeof i){case"object":if(b(i)){for(var a="",o=0,s=i.length;s>o;++o)a+=n(e.push(i[o]),this);return a}return n(e.push(i),this);case"function":var c=n(e,this),u=this;return i.call(e.view,c,r)||"";default:if(i)return n(e,this)}return""},o.prototype._inverted=function(t,e,n){var r=e.lookup(t);return null==r||r===!1||b(r)&&0===r.length?n(e,this):""},o.prototype._partial=function(t,e){var n=this._partialCache[t];return n?n(e,this):""},o.prototype._name=function(t,e,n){var i=e.lookup(t);"function"==typeof i&&(i=i.call(e.view));var a=null==i?"":String(i);return n?r(a):a};var x=new o}(Mustache);