"use strict";var sinon=function(){var buster=function(e,t){function n(e){if(e){for(var t,n=1,r=arguments.length;r>n;++n)for(t in arguments[n])e[t]=arguments[n][t];return e}}var r="undefined"!=typeof document&&document.createElement("div");return n(e,{bind:function(e,t){var n="string"==typeof t?e[t]:t,r=Array.prototype.slice.call(arguments,2);return function(){var t=r.concat(Array.prototype.slice.call(arguments));return n.apply(e,t)}},create:function(){function e(){}return function(t){return e.prototype=t,new e}}(),extend:n,nextTick:function(e){return"undefined"!=typeof process&&process.nextTick?process.nextTick(e):void t(e,0)},functionName:function(e){if(!e)return"";if(e.displayName)return e.displayName;if(e.name)return e.name;var t=e.toString().match(/function\s+([^\(]+)/m);return t&&t[1]||""},isNode:function(e){if(!r)return!1;try{e.appendChild(r),e.removeChild(r)}catch(t){return!1}return!0},isElement:function(t){return t&&e.isNode(t)&&1===t.nodeType}})}(buster||{},setTimeout);"object"==typeof module&&"function"==typeof require&&(module.exports=buster,buster.eventEmitter=require("./buster-event-emitter"),Object.defineProperty(buster,"defineVersionGetter",{get:function(){return require("./define-version-getter")}})),"undefined"!=typeof require&&(buster=require("buster-core")),buster.format=buster.format||{},buster.format.excludeConstructors=["Object",/^.$/],buster.format.quoteStrings=!0,buster.format.ascii=function(){function e(e){var t=Object.keys&&Object.keys(e)||[];if(0==t.length)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function t(e,t){if("object"!=typeof e)return!1;for(var n=0,r=t.length;r>n;++n)if(t[n]===e)return!0;return!1}function n(e,r,i){if("string"==typeof e){var o="boolean"!=typeof this.quoteStrings||this.quoteStrings;return r||o?'"'+e+'"':e}return"function"!=typeof e||e instanceof RegExp?(r=r||[],t(e,r)?"[Circular]":"[object Array]"==Object.prototype.toString.call(e)?n.array(e):e?buster.isElement(e)?n.element(e):e.toString!==Object.prototype.toString?e.toString():n.object.call(this,e,r,i):""+e):n.func(e)}return n.func=function(e){return"function "+buster.functionName(e)+"() {}"},n.array=function(e,t){t=t||[],t.push(e);for(var r=[],i=0,o=e.length;o>i;++i)r.push(n(e[i],t));return"["+r.join(", ")+"]"},n.object=function(r,i,o){i=i||[],i.push(r),o=o||0;for(var s,a,u,c=[],l=e(r),f="",h=3,p=0,d=o;d>p;++p)f+=" ";for(p=0,d=l.length;d>p;++p)s=l[p],u=r[s],a=t(u,i)?"[Circular]":n.call(this,u,i,o+2),a=(/\s/.test(s)?'"'+s+'"':s)+": "+a,h+=a.length,c.push(a);var y=n.constructorName.call(this,r),m=y?"["+y+"] ":"";return h+o>80?m+"{\n  "+f+c.join(",\n  "+f)+"\n"+f+"}":m+"{ "+c.join(", ")+" }"},n.element=function(e){for(var t,n,r=e.tagName.toLowerCase(),i=e.attributes,o=[],s=0,a=i.length;a>s;++s)t=i.item(s),n=t.nodeName.toLowerCase().replace("html:",""),("contenteditable"!=n||"inherit"!=t.nodeValue)&&t.nodeValue&&o.push(n+'="'+t.nodeValue+'"');var u="<"+r+(o.length>0?" ":""),c=e.innerHTML;c.length>20&&(c=c.substr(0,20)+"[...]");var l=u+o.join(" ")+">"+c+"</"+r+">";return l.replace(/ contentEditable="inherit"/,"")},n.constructorName=function(e){for(var t=buster.functionName(e&&e.constructor),n=this.excludeConstructors||buster.format.excludeConstructors||[],r=0,i=n.length;i>r;++r){if("string"==typeof n[r]&&n[r]==t)return"";if(n[r].test&&n[r].test(t))return""}return t},n}(),"undefined"!=typeof module&&(module.exports=buster.format);var sinon=function(e){function t(e){var t=!1;try{e.appendChild(i),t=i.parentNode==e}catch(n){return!1}finally{try{e.removeChild(i)}catch(n){}}return t}function n(e){return i&&e&&1===e.nodeType&&t(e)}function r(e,t){for(var n in t)o.call(e,n)||(e[n]=t[n])}var i="undefined"!=typeof document&&document.createElement("div"),o=Object.prototype.hasOwnProperty,s={wrapMethod:function(e,t,n){if(!e)throw new TypeError("Should wrap property of object");if("function"!=typeof n)throw new TypeError("Method wrapper should be function");var i=e[t],s=typeof i;if("function"!=s)throw new TypeError("Attempted to wrap "+s+" property "+t+" as function");if(i.restore&&i.restore.sinon)throw new TypeError("Attempted to wrap "+t+" which is already wrapped");if(i.calledBefore){var a=i.returns?"stubbed":"spied on";throw new TypeError("Attempted to wrap "+t+" which is already "+a)}var u=o.call(e,t);return e[t]=n,n.displayName=t,n.restore=function(){u?e[t]=i:delete e[t]},n.restore.sinon=!0,r(n,i),n},extend:function(e){for(var t=1,n=arguments.length;n>t;t+=1)for(var r in arguments[t])arguments[t].hasOwnProperty(r)&&(e[r]=arguments[t][r]),arguments[t].hasOwnProperty("toString")&&arguments[t].toString!=e.toString&&(e.toString=arguments[t].toString);return e},create:function(e){var t=function(){};return t.prototype=e,new t},deepEqual:function f(e,t){if("object"!=typeof e||"object"!=typeof t)return e===t;if(n(e)||n(t))return e===t;if(e===t)return!0;var r=Object.prototype.toString.call(e);if(r!=Object.prototype.toString.call(t))return!1;if("[object Array]"==r){if(e.length!==t.length)return!1;for(var i=0,o=e.length;o>i;i+=1)if(!f(e[i],t[i]))return!1;return!0}var s,a=0,u=0;for(s in e)if(a+=1,!f(e[s],t[s]))return!1;for(s in t)u+=1;return a!=u?!1:!0},functionName:function(e){var t=e.displayName||e.name;if(!t){var n=e.toString().match(/function ([^\s\(]+)/);t=n&&n[1]}return t},functionToString:function(){if(this.getCall&&this.callCount)for(var e,t,n=this.callCount;n--;){e=this.getCall(n).thisValue;for(t in e)if(e[t]===this)return t}return this.displayName||"sinon fake"},getConfig:function(e){var t={};e=e||{};var n=s.defaultConfig;for(var r in n)n.hasOwnProperty(r)&&(t[r]=e.hasOwnProperty(r)?e[r]:n[r]);return t},format:function(e){return""+e},defaultConfig:{injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},timesInWords:function(e){return 1==e&&"once"||2==e&&"twice"||3==e&&"thrice"||(e||0)+" times"},calledInOrder:function(e){for(var t=1,n=e.length;n>t;t++)if(!e[t-1].calledBefore(e[t]))return!1;return!0},orderByFirstCall:function(e){return e.sort(function(e,t){var n=e.getCall(0),r=t.getCall(0),i=n&&n.callId||-1,o=r&&r.callId||-1;return o>i?-1:1})},log:function(){},logError:function(e,t){var n=e+" threw exception: ";s.log(n+"["+t.name+"] "+t.message),t.stack&&s.log(t.stack),setTimeout(function(){throw t.message=n+t.message,t},0)}},a="object"==typeof module&&"function"==typeof require;if(a){try{e={format:require("buster-format")}}catch(u){}module.exports=s,module.exports.spy=require("./sinon/spy"),module.exports.stub=require("./sinon/stub"),module.exports.mock=require("./sinon/mock"),module.exports.collection=require("./sinon/collection"),module.exports.assert=require("./sinon/assert"),module.exports.sandbox=require("./sinon/sandbox"),module.exports.test=require("./sinon/test"),module.exports.testCase=require("./sinon/test_case"),module.exports.assert=require("./sinon/assert")}if(e){var c=s.create(e.format);c.quoteStrings=!1,s.format=function(){return c.ascii.apply(c,arguments)}}else if(a)try{var l=require("util");s.format=function(e){return"object"==typeof e?l.inspect(e):e}}catch(u){}return s}("object"==typeof buster&&buster);if(function(e){function t(n,r){if(!r&&"function"==typeof n)return t.create(n);if(!n||!r)return t.create(function(){});var i=n[r];return e.wrapMethod(n,r,t.create(i))}var n,r="object"==typeof module&&"function"==typeof require,i=0,o=[].push,s=Array.prototype.slice;!e&&r&&(e=require("../sinon")),e&&(e.extend(t,function(){function r(e,t,n,r,i){e[t]=function(){if(!this.called)return i?i.apply(this,arguments):!1;for(var e,o=0,s=0,a=this.callCount;a>s;s+=1)if(e=this.getCall(s),e[r||t].apply(e,arguments)&&(o+=1,n))return!0;return o===this.callCount}}function a(e,t,n){if(e)for(var r=(t.length,0),i=e.length;i>r;r++)if(e[r].matches(t,n))return e[r]}var u=0,c={reset:function(){this.called=!1,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[]},create:function(n){function r(){return r.invoke(n,this,s.call(arguments))}var i;return"function"!=typeof n?n=function(){}:i=e.functionName(n),e.extend(r,t),delete r.create,e.extend(r,n),r.reset(),r.prototype=n.prototype,r.displayName=i||"spy",r.toString=e.functionToString,r._create=e.spy.create,r.id="spy#"+u++,r},invoke:function(e,t,n){var r,s,u=a(this.fakes,n);this.called=!0,this.callCount+=1,this.calledOnce=1==this.callCount,this.calledTwice=2==this.callCount,this.calledThrice=3==this.callCount,o.call(this.thisValues,t),o.call(this.args,n),o.call(this.callIds,i++);try{s=u?u.invoke(e,t,n):(this.func||e).apply(t,n)}catch(c){throw o.call(this.returnValues,void 0),r=c,c}finally{o.call(this.exceptions,r)}return o.call(this.returnValues,s),this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1),s},getCall:function(e){return 0>e||e>=this.callCount?null:n.create(this,this.thisValues[e],this.args[e],this.returnValues[e],this.exceptions[e],this.callIds[e])},calledBefore:function(e){return this.called?e.called?this.callIds[0]<e.callIds[e.callIds.length-1]:!0:!1},calledAfter:function(e){return this.called&&e.called?this.callIds[this.callCount-1]>e.callIds[e.callCount-1]:!1},withArgs:function(){var e=s.call(arguments);if(this.fakes){var t=a(this.fakes,e,!0);if(t)return t}else this.fakes=[];var n=this,r=this._create();return r.matchingAguments=e,o.call(this.fakes,r),r.withArgs=function(){return n.withArgs.apply(n,arguments)},r},matches:function(t,n){var r=this.matchingAguments;return r.length<=t.length&&e.deepEqual(r,t.slice(0,r.length))?!n||r.length==t.length:void 0},printf:function(t){var n,r=this,i=s.call(arguments,1);return(t||"").replace(/%(.)/g,function(t,o){return n=c.formatters[o],"function"==typeof n?n.call(null,r,i):isNaN(parseInt(o),10)?"%"+o:e.format(i[o-1])})}};return r(c,"calledOn",!0),r(c,"alwaysCalledOn",!1,"calledOn"),r(c,"calledWith",!0),r(c,"alwaysCalledWith",!1,"calledWith"),r(c,"calledWithExactly",!0),r(c,"alwaysCalledWithExactly",!1,"calledWithExactly"),r(c,"neverCalledWith",!1,"notCalledWith",function(){return!0}),r(c,"threw",!0),r(c,"alwaysThrew",!1,"threw"),r(c,"returned",!0),r(c,"alwaysReturned",!1,"returned"),r(c,"calledWithNew",!0),r(c,"alwaysCalledWithNew",!1,"calledWithNew"),r(c,"callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),c.callArgWith=c.callArg,r(c,"yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),c.invokeCallback=c.yield,r(c,"yieldTo",!1,"yieldTo",function(e){throw new Error(this.toString()+" cannot yield to '"+e+"' since it was not yet invoked.")}),c.formatters={c:function(t){return e.timesInWords(t.callCount)},n:function(e){return e.toString()},C:function(e){for(var t=[],n=0,r=e.callCount;r>n;++n)o.call(t,"    "+e.getCall(n).toString());return t.length>0?"\n"+t.join("\n"):""},t:function(t){for(var n=[],r=0,i=t.callCount;i>r;++r)o.call(n,e.format(t.thisValues[r]));return n.join(", ")},"*":function(e,t){return t.join(", ")}},c}()),n=function(){function t(t,n,r){var i=e.functionName(t)+n;throw r.length&&(i+=" Received ["+s.call(r).join(", ")+"]"),new Error(i)}return{create:function(t,r,o,s,a,u){var c=e.create(n);return delete c.create,c.proxy=t,c.thisValue=r,c.args=o,c.returnValue=s,c.exception=a,c.callId="number"==typeof u&&u||i++,c},calledOn:function(e){return this.thisValue===e},calledWith:function(){for(var t=0,n=arguments.length;n>t;t+=1)if(!e.deepEqual(arguments[t],this.args[t]))return!1;return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){for(var t=0,n=arguments.length;n>t;t+=1)if(!e.deepEqual(arguments[t],this.args[t]))return!0;return!1},returned:function(e){return this.returnValue===e},threw:function(e){return"undefined"!=typeof e&&this.exception?"string"==typeof e?this.exception.name==e:this.exception===e:!!this.exception},calledWithNew:function(){return this.thisValue instanceof this.proxy},calledBefore:function(e){return this.callId<e.callId},calledAfter:function(e){return this.callId>e.callId},callArg:function(e){this.args[e]()},callArgWith:function(e){var t=s.call(arguments,1);this.args[e].apply(null,t)},"yield":function(){for(var e=this.args,n=0,r=e.length;r>n;++n)if("function"==typeof e[n])return void e[n].apply(null,s.call(arguments));t(this.proxy," cannot yield since no callback was passed.",e)},yieldTo:function(e){for(var n=this.args,r=0,i=n.length;i>r;++r)if(n[r]&&"function"==typeof n[r][e])return void n[r][e].apply(null,s.call(arguments,1));t(this.proxy," cannot yield to '"+e+"' since no callback was passed.",n)},toString:function(){for(var t=this.proxy.toString()+"(",n=[],r=0,i=this.args.length;i>r;++r)o.call(n,e.format(this.args[r]));return t=t+n.join(", ")+")","undefined"!=typeof this.returnValue&&(t+=" => "+e.format(this.returnValue)),this.exception&&(t+=" !"+this.exception.name,this.exception.message&&(t+="("+this.exception.message+")")),t}}}(),t.spyCall=n,e.spyCall=n,r?module.exports=t:e.spy=t)}("object"==typeof sinon&&sinon||null),function(e){function t(n,r,i){if(i&&"function"!=typeof i)throw new TypeError("Custom stub should be function");var o;if(o=i?e.spy&&e.spy.create?e.spy.create(i):i:t.create(),!n&&!r)return e.stub.create();if(!r&&n&&"object"==typeof n){for(var s in n)"function"==typeof n[s]&&t(n,s);return n}return e.wrapMethod(n,r,o)}function n(e,t){if(e.callArgAt<0){for(var n=0,r=t.length;r>n;++n){if(!e.callArgProp&&"function"==typeof t[n])return t[n];if(e.callArgProp&&t[n]&&"function"==typeof t[n][e.callArgProp])return t[n][e.callArgProp]}return null}return t[e.callArgAt]}function r(t,n,r){if(t.callArgAt<0){var i;return i=t.callArgProp?e.functionName(t)+" expected to yield to '"+t.callArgProp+"', but no object with such a property was passed.":e.functionName(t)+" expected to yield, but no callback was passed.",r.length>0&&(i+=" Received ["+s.call(r,", ")+"]"),i}return"argument at index "+t.callArgAt+" is not a function: "+n}function i(e,t){if("number"==typeof e.callArgAt){var i=n(e,t);if("function"!=typeof i)throw new TypeError(r(e,i,t));i.apply(null,e.callbackArguments)}}var o="object"==typeof module&&"function"==typeof require;if(!e&&o&&(e=require("../sinon")),e){var s=Array.prototype.join,a=0;e.extend(t,function(){function n(e,t){return"string"==typeof e?(this.exception=new Error(t||""),this.exception.name=e):this.exception=e?e:new Error("Error"),this}var r=Array.prototype.slice;return{create:function(){var n=function(){if(n.exception)throw n.exception;return"number"==typeof n.returnArgAt?arguments[n.returnArgAt]:(i(n,arguments),n.returnValue)};n.id="stub#"+a++;var r=n;return n=e.spy.create(n),n.func=r,e.extend(n,t),n._create=e.stub.create,n.displayName="stub",n.toString=e.functionToString,n},returns:function(e){return this.returnValue=e,this},returnsArg:function(e){if("number"!=typeof e)throw new TypeError("argument index is not number");return this.returnArgAt=e,this},"throws":n,throwsException:n,callsArg:function(e){if("number"!=typeof e)throw new TypeError("argument index is not number");return this.callArgAt=e,this.callbackArguments=[],this},callsArgWith:function(e){if("number"!=typeof e)throw new TypeError("argument index is not number");return this.callArgAt=e,this.callbackArguments=r.call(arguments,1),this},yields:function(){return this.callArgAt=-1,this.callbackArguments=r.call(arguments,0),this},yieldsTo:function(e){return this.callArgAt=-1,this.callArgProp=e,this.callbackArguments=r.call(arguments,1),this}}}()),o?module.exports=t:e.stub=t}}("object"==typeof sinon&&sinon||null),function(e){function t(n){return n?t.create(n):e.expectation.create("Anonymous mock")}var n="object"==typeof module&&"function"==typeof require,r=[].push;if(!e&&n&&(e=require("../sinon")),e){e.mock=t,e.extend(t,function(){function n(e,t){if(e)for(var n=0,r=e.length;r>n;n+=1)t(e[n])}return{create:function(n){if(!n)throw new TypeError("object is null");var r=e.extend({},t);return r.object=n,delete r.create,r},expects:function(t){if(!t)throw new TypeError("method is falsy");if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[t]){this.expectations[t]=[];var n=this;e.wrapMethod(this.object,t,function(){return n.invokeMethod(t,this,arguments)}),r.call(this.proxies,t)}var i=e.expectation.create(t);return r.call(this.expectations[t],i),i},restore:function(){var e=this.object;n(this.proxies,function(t){"function"==typeof e[t].restore&&e[t].restore()})},verify:function(){var t=this.expectations||{},i=[],o=[];return n(this.proxies,function(e){n(t[e],function(e){e.met()?r.call(o,e.toString()):r.call(i,e.toString())})}),this.restore(),i.length>0&&e.expectation.fail(i.concat(o).join("\n")),!0},invokeMethod:function(t,n,i){for(var o=this.expectations&&this.expectations[t],s=o&&o.length||0,a=0;s>a;a+=1)if(!o[a].met()&&o[a].allowsCall(n,i))return o[a].apply(n,i);var u=[];for(a=0;s>a;a+=1)r.call(u,"    "+o[a].toString());u.unshift("Unexpected call: "+e.spyCall.toString.call({proxy:t,args:i})),e.expectation.fail(u.join("\n"))}}}());var i=e.timesInWords;e.expectation=function(){function t(e){return 0==e?"never called":"called "+i(e)}function n(e){var t=e.minCalls,n=e.maxCalls;if("number"==typeof t&&"number"==typeof n){var r=i(t);return t!=n&&(r="at least "+r+" and at most "+i(n)),r}return"number"==typeof t?"at least "+i(t):"at most "+i(n)}function o(e){var t="number"==typeof e.minCalls;return!t||e.callCount>=e.minCalls}function s(e){return"number"!=typeof e.maxCalls?!1:e.callCount==e.maxCalls}var a=Array.prototype.slice,u=e.spy.invoke;return{minCalls:1,maxCalls:1,create:function(t){var n=e.extend(e.stub.create(),e.expectation);return delete n.create,n.method=t,n},invoke:function(e,t,n){return this.verifyCallAllowed(t,n),u.apply(this,arguments)},atLeast:function(e){if("number"!=typeof e)throw new TypeError("'"+e+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=e,this},atMost:function(e){if("number"!=typeof e)throw new TypeError("'"+e+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=e,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(e){if("number"!=typeof e)throw new TypeError("'"+e+"' is not a number");return this.atLeast(e),this.atMost(e)},met:function(){return!this.failed&&o(this)},verifyCallAllowed:function(t,n){if(s(this)&&(this.failed=!0,e.expectation.fail(this.method+" already called "+i(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==t&&e.expectation.fail(this.method+" called with "+t+" as thisValue, expected "+this.expectedThis),"expectedArguments"in this){n&&0!==n.length||e.expectation.fail(this.method+" received no arguments, expected "+this.expectedArguments.join()),n.length<this.expectedArguments.length&&e.expectation.fail(this.method+" received too few arguments ("+n.join()+"), expected "+this.expectedArguments.join()),this.expectsExactArgCount&&n.length!=this.expectedArguments.length&&e.expectation.fail(this.method+" received too many arguments ("+n.join()+"), expected "+this.expectedArguments.join());for(var r=0,o=this.expectedArguments.length;o>r;r+=1)e.deepEqual(this.expectedArguments[r],n[r])||e.expectation.fail(this.method+" received wrong arguments ("+n.join()+"), expected "+this.expectedArguments.join())}},allowsCall:function(t,n){if(this.met())return!1;if("expectedThis"in this&&this.expectedThis!==t)return!1;if(!("expectedArguments"in this))return!0;if(n=n||[],n.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&n.length!=this.expectedArguments.length)return!1;for(var r=0,i=this.expectedArguments.length;i>r;r+=1)if(!e.deepEqual(this.expectedArguments[r],n[r]))return!1;return!0},withArgs:function(){return this.expectedArguments=a.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(e){return this.expectedThis=e,this},toString:function(){var i=(this.expectedArguments||[]).slice();this.expectsExactArgCount||r.call(i,"[...]");var o=e.spyCall.toString.call({proxy:this.method,args:i}),s=o.replace(", [...","[, ...")+" "+n(this);return this.met()?"Expectation met: "+s:"Expected "+s+" ("+t(this.callCount)+")"},verify:function(){return this.met()||e.expectation.fail(this.toString()),!0},fail:function(e){var t=new Error(e);throw t.name="ExpectationError",t}}}(),n?module.exports=t:e.mock=t}}("object"==typeof sinon&&sinon||null),function(e){function t(e){return e.fakes||(e.fakes=[]),e.fakes}function n(e,n){for(var r=t(e),i=0,o=r.length;o>i;i+=1)"function"==typeof r[i][n]&&r[i][n]()}function r(e){for(var n=t(e),r=0;r<n.length;)n.splice(r,1)}var i="object"==typeof module&&"function"==typeof require,o=[].push;if(!e&&i&&(e=require("../sinon")),e){var s={verify:function(){n(this,"verify")},restore:function(){n(this,"restore"),r(this)},verifyAndRestore:function(){var e;try{this.verify()}catch(t){e=t}if(this.restore(),e)throw e},add:function(e){return o.call(t(this),e),e},spy:function(){return this.add(e.spy.apply(e,arguments))},stub:function(t,n,r){if(n){var i=t[n];if("function"!=typeof i){if(!t.hasOwnProperty(n))throw new TypeError("Cannot stub non-existent own property "+n);return t[n]=r,this.add({restore:function(){t[n]=i}})}}return this.add(e.stub.apply(e,arguments))},mock:function(){return this.add(e.mock.apply(e,arguments))},inject:function(e){var t=this;return e.spy=function(){return t.spy.apply(t,arguments)},e.stub=function(){return t.stub.apply(t,arguments)},e.mock=function(){return t.mock.apply(t,arguments)},e}};i?module.exports=s:e.collection=s}}("object"==typeof sinon&&sinon||null),"undefined"==typeof sinon)var sinon={};if(function(global){function addTimer(e,t){if(0===e.length)throw new Error("Function requires at least 1 parameter");var n=id++,r=e[1]||0;return this.timeouts||(this.timeouts={}),this.timeouts[n]={id:n,func:e[0],callAt:this.now+r},t===!0&&(this.timeouts[n].interval=r),n}function parseTime(e){if(!e)return 0;var t,n=e.split(":"),r=n.length,i=r,o=0;if(r>3||!/^(\d\d:){0,2}\d\d?$/.test(e))throw new Error("tick only understands numbers and 'h:m:s'");for(;i--;){if(t=parseInt(n[i],10),t>=60)throw new Error("Invalid time "+e);o+=t*Math.pow(60,r-i-1)}return 1e3*o}function createObject(e){var t;if(Object.create)t=Object.create(e);else{var n=function(){};n.prototype=e,t=new n}return t.Date.clock=t,t}function mirrorDateProperties(e,t){return t.now?e.now=function(){return e.clock.now}:delete e.now,t.toSource?e.toSource=function(){return t.toSource()}:delete e.toSource,e.toString=function(){return t.toString()},e.prototype=t.prototype,e.parse=t.parse,e.UTC=t.UTC,e.prototype.toUTCString=t.prototype.toUTCString,e}function restore(){for(var e,t=0,n=this.methods.length;n>t;t++)e=this.methods[t],global[e]=this["_"+e]}function stubGlobal(e,t){if(t["_"+e]=global[e],"Date"==e){var n=mirrorDateProperties(t[e],global[e]);global[e]=n}else{global[e]=function(){return t[e].apply(t,arguments)};for(var r in t[e])t[e].hasOwnProperty(r)&&(global[e][r]=t[e][r])}global[e].clock=t}var id=1;sinon.clock={now:0,create:function(e){var t=createObject(this);if("number"==typeof e&&(t.now=e),e&&"object"==typeof e)throw new TypeError("now should be milliseconds since UNIX epoch");return t},setTimeout:function(){return addTimer.call(this,arguments,!1)},clearTimeout:function(e){this.timeouts||(this.timeouts=[]),delete this.timeouts[e]},setInterval:function(){return addTimer.call(this,arguments,!0)},clearInterval:function(e){this.clearTimeout(e)},tick:function(e){e="number"==typeof e?e:parseTime(e);for(var t,n=this.now,r=this.now+e,i=this.now,o=this.firstTimerInRange(n,r);o&&r>=n;){if(this.timeouts[o.id]){n=this.now=o.callAt;try{this.callTimer(o)}catch(s){t=t||s}}o=this.firstTimerInRange(i,r),i=n}if(this.now=r,t)throw t},firstTimerInRange:function(e,t){var n,r,i;for(var o in this.timeouts)if(this.timeouts.hasOwnProperty(o)){if(this.timeouts[o].callAt<e||this.timeouts[o].callAt>t)continue;(!r||this.timeouts[o].callAt<r)&&(i=this.timeouts[o],r=this.timeouts[o].callAt,n={func:this.timeouts[o].func,callAt:this.timeouts[o].callAt,interval:this.timeouts[o].interval,id:this.timeouts[o].id})}return n||null},callTimer:function(timer){try{"function"==typeof timer.func?timer.func.call(null):eval(timer.func)}catch(e){var exception=e}if(this.timeouts[timer.id]){if("number"==typeof timer.interval?this.timeouts[timer.id].callAt+=timer.interval:delete this.timeouts[timer.id],exception)throw exception}else if(exception)throw exception},reset:function(){this.timeouts={}},Date:function(){function e(n,r,i,o,s,a,u){switch(arguments.length){case 0:return new t(e.clock.now);case 1:return new t(n);case 2:return new t(n,r);case 3:return new t(n,r,i);case 4:return new t(n,r,i,o);case 5:return new t(n,r,i,o,s);case 6:return new t(n,r,i,o,s,a);default:return new t(n,r,i,o,s,a,u)}}var t=Date;return mirrorDateProperties(e,t)}()};var methods=["Date","setTimeout","setInterval","clearTimeout","clearInterval"];sinon.useFakeTimers=function(e){var t=sinon.clock.create(e);t.restore=restore,t.methods=Array.prototype.slice.call(arguments,"number"==typeof e?1:0),0===t.methods.length&&(t.methods=methods);for(var n=0,r=t.methods.length;r>n;n++)stubGlobal(t.methods[n],t);return t}}("undefined"!=typeof global?global:this),sinon.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,Date:Date},"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),"undefined"==typeof sinon&&(this.sinon={}),function(){var e=[].push;sinon.Event=function(e,t,n){this.initEvent(e,t,n)},sinon.Event.prototype={initEvent:function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},sinon.EventTarget={addEventListener:function(t,n){this.eventListeners=this.eventListeners||{},this.eventListeners[t]=this.eventListeners[t]||[],e.call(this.eventListeners[t],n)},removeEventListener:function(e,t){for(var n=this.eventListeners&&this.eventListeners[e]||[],r=0,i=n.length;i>r;++r)if(n[r]==t)return n.splice(r,1)},dispatchEvent:function(e){for(var t=e.type,n=this.eventListeners&&this.eventListeners[t]||[],r=0;r<n.length;r++)"function"==typeof n[r]?n[r].call(this,e):n[r].handleEvent(e);return!!e.defaultPrevented}}}(),"undefined"==typeof sinon&&(this.sinon={}),sinon.xhr={XMLHttpRequest:this.XMLHttpRequest},function(e){function t(){this.readyState=t.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="","function"==typeof t.onCreate&&t.onCreate(this)}function n(e){if(e.readyState!==t.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}function r(e,t){if(e)for(var n=0,r=e.length;r>n;n+=1)t(e[n])}function i(e,t){for(var n=0;n<e.length;n++)if(t(e[n])===!0)return!0;return!1}function o(e){if(e.readyState==t.DONE)throw new Error("Request done")}function s(e){if(e.async&&e.readyState!=t.HEADERS_RECEIVED)throw new Error("No headers received")}function a(e){if("string"!=typeof e){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}var u=sinon.xhr;u.GlobalXMLHttpRequest=e.XMLHttpRequest,u.GlobalActiveXObject=e.ActiveXObject,u.supportsActiveX="undefined"!=typeof u.GlobalActiveXObject,u.supportsXHR="undefined"!=typeof u.GlobalXMLHttpRequest,u.workingXHR=u.supportsXHR?u.GlobalXMLHttpRequest:u.supportsActiveX?function(){return new u.GlobalActiveXObject("MSXML2.XMLHTTP.3.0")}:!1;var c={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0},l=function(e,t,n){switch(n.length){case 0:return e[t]();case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4])}};t.filters=[],t.addFilter=function(e){this.filters.push(e)};var f=/MSIE 6/;t.defake=function(e,n){var i=new sinon.xhr.workingXHR;r(["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","addEventListener","overrideMimeType","removeEventListener"],function(t){e[t]=function(){return l(i,t,arguments)}});var o=function(t){r(t,function(t){try{e[t]=i[t]}catch(n){if(!f.test(navigator.userAgent))throw n}})},s=function(){e.readyState=i.readyState,i.readyState>=t.HEADERS_RECEIVED&&o(["status","statusText"]),i.readyState>=t.LOADING&&o(["responseText"]),i.readyState===t.DONE&&o(["responseXML"]),e.onreadystatechange&&e.onreadystatechange.call(e)};if(i.addEventListener){for(var a in e.eventListeners)e.eventListeners.hasOwnProperty(a)&&r(e.eventListeners[a],function(e){i.addEventListener(a,e)});i.addEventListener("readystatechange",s)}else i.onreadystatechange=s;l(i,"open",n)},t.useFilters=!1,sinon.extend(t.prototype,sinon.EventTarget,{async:!0,open:function(e,n,r,o,s){if(this.method=e,this.url=n,this.async="boolean"==typeof r?r:!0,this.username=o,this.password=s,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,sinon.FakeXMLHttpRequest.useFilters===!0){var a=arguments,u=i(t.filters,function(e){return e.apply(this,a)});u&&sinon.FakeXMLHttpRequest.defake(this,arguments)}else this.readyStateChange(t.OPENED)},readyStateChange:function(e){if(this.readyState=e,"function"==typeof this.onreadystatechange)try{this.onreadystatechange()}catch(t){sinon.logError("Fake XHR onreadystatechange handler",t)}this.dispatchEvent(new sinon.Event("readystatechange"))},setRequestHeader:function(e,t){if(n(this),c[e]||/^(Sec-|Proxy-)/.test(e))throw new Error('Refused to set unsafe header "'+e+'"');this.requestHeaders[e]?this.requestHeaders[e]+=","+t:this.requestHeaders[e]=t},setResponseHeaders:function(e){this.responseHeaders={};for(var n in e)e.hasOwnProperty(n)&&(this.responseHeaders[n]=e[n]);this.async&&this.readyStateChange(t.HEADERS_RECEIVED)},send:function(e){if(n(this),!/^(get|head)$/i.test(this.method)){if(this.requestHeaders["Content-Type"]){var r=this.requestHeaders["Content-Type"].split(";");this.requestHeaders["Content-Type"]=r[0]+";charset=utf-8"}else this.requestHeaders["Content-Type"]="text/plain;charset=utf-8";this.requestBody=e}this.errorFlag=!1,this.sendFlag=this.async,this.readyStateChange(t.OPENED),"function"==typeof this.onSend&&this.onSend(this)},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>sinon.FakeXMLHttpRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(sinon.FakeXMLHttpRequest.DONE),this.sendFlag=!1),this.readyState=sinon.FakeXMLHttpRequest.UNSENT},getResponseHeader:function(e){if(this.readyState<t.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(e))return null;e=e.toLowerCase();for(var n in this.responseHeaders)if(n.toLowerCase()==e)return this.responseHeaders[n];return null},getAllResponseHeaders:function(){if(this.readyState<t.HEADERS_RECEIVED)return"";var e="";for(var n in this.responseHeaders)this.responseHeaders.hasOwnProperty(n)&&!/^Set-Cookie2?$/i.test(n)&&(e+=n+": "+this.responseHeaders[n]+"\r\n");return e},setResponseBody:function(e){o(this),s(this),a(e);var n=this.chunkSize||10,r=0;this.responseText="";do this.async&&this.readyStateChange(t.LOADING),this.responseText+=e.substring(r,r+n),r+=n;while(r<e.length);var i=this.getResponseHeader("Content-Type");if(this.responseText&&(!i||/(text\/xml)|(application\/xml)|(\+xml)/.test(i)))try{this.responseXML=t.parseXML(this.responseText)}catch(u){}this.async?this.readyStateChange(t.DONE):this.readyState=t.DONE},respond:function(e,n,r){this.setResponseHeaders(n||{}),this.status="number"==typeof e?e:200,this.statusText=t.statusCodes[this.status],this.setResponseBody(r||"")
}}),sinon.extend(t,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),t.parseXML=function(e){var t;if("undefined"!=typeof DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},t.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},sinon.useFakeXMLHttpRequest=function(){return sinon.FakeXMLHttpRequest.restore=function(t){u.supportsXHR&&(e.XMLHttpRequest=u.GlobalXMLHttpRequest),u.supportsActiveX&&(e.ActiveXObject=u.GlobalActiveXObject),delete sinon.FakeXMLHttpRequest.restore,t!==!0&&delete sinon.FakeXMLHttpRequest.onCreate},u.supportsXHR&&(e.XMLHttpRequest=sinon.FakeXMLHttpRequest),u.supportsActiveX&&(e.ActiveXObject=function(e){return"Microsoft.XMLHTTP"==e||/^Msxml2\.XMLHTTP/i.test(e)?new sinon.FakeXMLHttpRequest:new u.GlobalActiveXObject(e)}),sinon.FakeXMLHttpRequest},sinon.FakeXMLHttpRequest=t}(this),"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),"undefined"==typeof sinon)var sinon={};if(sinon.fakeServer=function(){function e(){}function t(t){return e.prototype=t,new e}function n(e){var t=e;if("[object Array]"!=Object.prototype.toString.call(e)&&(t=[200,{},e]),"string"!=typeof t[2])throw new TypeError("Fake server response body should be string, but was "+typeof t[2]);return t}function r(e,t,n){var r=e.method,i=!r||r.toLowerCase()==t.toLowerCase(),o=e.url,s=!o||o==n||"function"==typeof o.test&&o.test(n);return i&&s}function i(e,t){var n=(this.getHTTPMethod(t),t.url);if((!/^https?:\/\//.test(n)||a.test(n))&&(n=n.replace(a,"")),r(e,this.getHTTPMethod(t),n)){if("function"==typeof e.response){var i=e.url,o=[t].concat(i?n.match(i).slice(1):[]);return e.response.apply(e,o)}return!0}return!1}var o=[].push,s=window.location,a=new RegExp("^"+s.protocol+"//"+s.host);return{create:function(){var e=t(this);return this.xhr=sinon.useFakeXMLHttpRequest(),e.requests=[],this.xhr.onCreate=function(t){e.addRequest(t)},e},addRequest:function(e){var t=this;o.call(this.requests,e),e.onSend=function(){t.handleRequest(this)},this.autoRespond&&!this.responding&&(setTimeout(function(){t.responding=!1,t.respond()},this.autoRespondAfter||10),this.responding=!0)},getHTTPMethod:function(e){if(this.fakeHTTPMethods&&/post/i.test(e.method)){var t=(e.requestBody||"").match(/_method=([^\b;]+)/);return t?t[1]:e.method}return e.method},handleRequest:function(e){e.async?(this.queue||(this.queue=[]),o.call(this.queue,e)):this.processRequest(e)},respondWith:function(e,t,r){return 1==arguments.length&&"function"!=typeof e?void(this.response=n(e)):(this.responses||(this.responses=[]),1==arguments.length&&(r=e,t=e=null),2==arguments.length&&(r=t,t=e,e=null),void o.call(this.responses,{method:e,url:t,response:"function"==typeof r?r:n(r)}))},respond:function(){arguments.length>0&&this.respondWith.apply(this,arguments);for(var e,t=this.queue||[];e=t.shift();)this.processRequest(e)},processRequest:function(e){try{if(e.aborted)return;var t=this.response||[404,{},""];if(this.responses)for(var n=0,r=this.responses.length;r>n;n++)if(i.call(this,this.responses[n],e)){t=this.responses[n].response;break}4!=e.readyState&&e.respond(t[0],t[1],t[2])}catch(o){sinon.logError("Fake server request processing",o)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}(),"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),function(){function e(){}e.prototype=sinon.fakeServer,sinon.fakeServerWithClock=new e,sinon.fakeServerWithClock.addRequest=function(e){if(e.async&&("object"==typeof setTimeout.clock?this.clock=setTimeout.clock:(this.clock=sinon.useFakeTimers(),this.resetClock=!0),!this.longestTimeout)){var t=this.clock.setTimeout,n=this.clock.setInterval,r=this;this.clock.setTimeout=function(e,n){return r.longestTimeout=Math.max(n,r.longestTimeout||0),t.apply(this,arguments)},this.clock.setInterval=function(e,t){return r.longestTimeout=Math.max(t,r.longestTimeout||0),n.apply(this,arguments)}}return sinon.fakeServer.addRequest.call(this,e)},sinon.fakeServerWithClock.respond=function(){var e=sinon.fakeServer.respond.apply(this,arguments);return this.clock&&(this.clock.tick(this.longestTimeout||0),this.longestTimeout=0,this.resetClock&&(this.clock.restore(),this.resetClock=!1)),e},sinon.fakeServerWithClock.restore=function(){return this.clock&&this.clock.restore(),sinon.fakeServer.restore.apply(this,arguments)}}(),"object"==typeof module&&"function"==typeof require){var sinon=require("../sinon");sinon.extend(sinon,require("./util/fake_timers"))}return function(){function e(e,t,r,i){i&&(t.injectInto?t.injectInto[r]=i:n.call(e.args,i))}function t(e){var t=sinon.create(sinon.sandbox);return e.useFakeServer&&("object"==typeof e.useFakeServer&&(t.serverPrototype=e.useFakeServer),t.useFakeServer()),e.useFakeTimers&&("object"==typeof e.useFakeTimers?t.useFakeTimers.apply(t,e.useFakeTimers):t.useFakeTimers()),t}var n=[].push;sinon.sandbox=sinon.extend(sinon.create(sinon.collection),{useFakeTimers:function(){return this.clock=sinon.useFakeTimers.apply(sinon,arguments),this.add(this.clock)},serverPrototype:sinon.fakeServer,useFakeServer:function(){var e=this.serverPrototype||sinon.fakeServer;return e&&e.create?(this.server=e.create(),this.add(this.server)):null},inject:function(e){return sinon.collection.inject.call(this,e),this.clock&&(e.clock=this.clock),this.server&&(e.server=this.server,e.requests=this.server.requests),e},create:function(n){if(!n)return sinon.create(sinon.sandbox);var r=t(n);r.args=r.args||[];var i,o,s=r.inject({});if(n.properties)for(var a=0,u=n.properties.length;u>a;a++)i=n.properties[a],o=s[i]||"sandbox"==i&&r,e(r,n,i,o);else e(r,n,"sandbox",o);return r}}),sinon.sandbox.useFakeXMLHttpRequest=sinon.sandbox.useFakeServer,"undefined"!=typeof module&&(module.exports=sinon.sandbox)}(),function(e){function t(t){var n=typeof t;if("function"!=n)throw new TypeError("sinon.test needs to wrap a test function, got "+n);return function(){var n=e.getConfig(e.config);n.injectInto=n.injectIntoThis&&this||n.injectInto;var r,i=e.sandbox.create(n),o=Array.prototype.slice.call(arguments).concat(i.args);try{r=t.apply(this,o)}finally{i.verifyAndRestore()}return r}}var n="object"==typeof module&&"function"==typeof require;!e&&n&&(e=require("../sinon")),e&&(t.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},n?module.exports=t:e.test=t)}("object"==typeof sinon&&sinon||null),function(e){function t(e,t,n){return function(){t&&t.apply(this,arguments);var r,i;try{i=e.apply(this,arguments)}catch(o){r=o}if(n&&n.apply(this,arguments),r)throw r;return i}}function n(n,r){if(!n||"object"!=typeof n)throw new TypeError("sinon.testCase needs an object with test functions");r=r||"test";var i,o,s,a=new RegExp("^"+r),u={},c=n.setUp,l=n.tearDown;for(i in n)if(n.hasOwnProperty(i)){if(o=n[i],/^(setUp|tearDown)$/.test(i))continue;"function"==typeof o&&a.test(i)?(s=o,(c||l)&&(s=t(o,c,l)),u[i]=e.test(s)):u[i]=n[i]}return u}var r="object"==typeof module&&"function"==typeof require;!e&&r&&(e=require("../sinon")),e&&Object.prototype.hasOwnProperty&&(r?module.exports=n:e.testCase=n)}("object"==typeof sinon&&sinon||null),function(e,t){function n(){for(var e,t=0,n=arguments.length;n>t;++t)e=arguments[t],e||s.fail("fake is not a spy"),"function"!=typeof e&&s.fail(e+" is not a function"),"function"!=typeof e.getCall&&s.fail(e+" is not stubbed")}function r(e,n){e=e||t;var r=e.fail||s.fail;r.call(e,n)}function i(e,t,i){2==arguments.length&&(i=t,t=e),s[e]=function(o){n(o);var a=u.call(arguments,1),c=!1;c="function"==typeof t?!t(o):"function"==typeof o[t]?!o[t].apply(o,a):!o[t],c?r(this,o.printf.apply(o,[i].concat(a))):s.pass(e)}}function o(e,t){return!e||/^fail/.test(t)?t:e+t.slice(0,1).toUpperCase()+t.slice(1)}var s,a="object"==typeof module&&"function"==typeof require,u=Array.prototype.slice;!e&&a&&(e=require("../sinon")),e&&(s={failException:"AssertError",fail:function(e){var t=new Error(e);throw t.name=this.failException||s.failException,t},pass:function(){},callOrder:function(){n.apply(null,arguments);var t="",i="";if(e.calledInOrder(arguments))s.pass("callOrder");else{try{t=[].join.call(arguments,", "),i=e.orderByFirstCall(u.call(arguments)).join(", ")}catch(o){}r(this,"expected "+t+" to be called in order but were called as "+i)}},callCount:function(t,i){if(n(t),t.callCount!=i){var o="expected %n to be called "+e.timesInWords(i)+" but was called %c%C";r(this,t.printf(o))}else s.pass("callCount")},expose:function(e,t){if(!e)throw new TypeError("target is null or undefined");var n=t||{},r="undefined"==typeof n.prefix&&"assert"||n.prefix,i="undefined"==typeof n.includeFail||!!n.includeFail;for(var s in this)"export"==s||!i&&/^(fail)/.test(s)||(e[o(r,s)]=this[s]);return e}},i("called","expected %n to have been called at least once but was never called"),i("notCalled",function(e){return!e.called},"expected %n to not have been called but was called %c%C"),i("calledOnce","expected %n to be called once but was called %c%C"),i("calledTwice","expected %n to be called twice but was called %c%C"),i("calledThrice","expected %n to be called thrice but was called %c%C"),i("calledOn","expected %n to be called with %1 as this but was called with %t"),i("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),i("calledWith","expected %n to be called with arguments %*%C"),i("alwaysCalledWith","expected %n to always be called with arguments %*%C"),i("calledWithExactly","expected %n to be called with exact arguments %*%C"),i("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),i("neverCalledWith","expected %n to never be called with arguments %*%C"),i("threw","%n did not throw exception%C"),i("alwaysThrew","%n did not always throw exception%C"),a?module.exports=s:e.assert=s)}("object"==typeof sinon&&sinon||null,"undefined"!=typeof window?window:global),sinon}.call("undefined"!=typeof window&&window||{});