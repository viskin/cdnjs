(function(c){var b={name:"PubSubJS",version:"1.2.2"},e={},a=-1;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){module.exports=b}exports.PubSub=b}else{c.PubSub=b}function f(l,p,q){var r=e[p],k=function(i){return function(){throw i}},o,m;for(o=0,m=r.length;o<m;o++){try{r[o].func(l,q)}catch(n){setTimeout(k(n),0)}}}function h(i,j){return function k(){var m=String(i),l=m.lastIndexOf(".");if(e.hasOwnProperty(i)){f(i,i,j)}while(l!==-1){m=m.substr(0,l);l=m.lastIndexOf(".");if(e.hasOwnProperty(m)){f(i,m,j)}}}}function g(k){var j=String(k),l=e.hasOwnProperty(j),i=j.lastIndexOf(".");while(!l&&i!==-1){j=j.substr(0,i);i=j.lastIndexOf(".");l=e.hasOwnProperty(j)}return l}function d(k,l,j){var m=h(k,l),i=g(k);if(!i){return false}if(j===true){m()}else{setTimeout(m,0)}return true}b.publish=function(i,j){return d(i,j,false)};b.publishSync=function(i,j){return d(i,j,true)};b.subscribe=function(k,j){if(!e.hasOwnProperty(k)){e[k]=[]}var i=String(++a);e[k].push({token:i,func:j});return i};b.unsubscribe=function(s){var q=typeof s==="string",p=q?"token":"func",r=q?s:true,l=false,k,o,n;for(k in e){if(e.hasOwnProperty(k)){for(o=e[k].length-1;o>=0;o--){if(e[k][o][p]===s){e[k].splice(o,1);l=r;if(q){return l}}}}}return l};if(typeof define==="function"&&define.amd){define("pubsub",function(){return b})}}(this));