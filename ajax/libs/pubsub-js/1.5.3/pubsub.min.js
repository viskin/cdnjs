(function(b,c){if(typeof define==="function"&&define.amd){define(["exports"],c)}else{if(typeof exports==="object"){c(exports)}}var a={};b.PubSub=a;c(a)}((typeof window==="object"&&window)||this,function(m){var e={},i=-1;function h(o){var n;for(n in o){if(o.hasOwnProperty(n)){return true}}return false}function l(o){return function n(){throw o}}function b(o,p,q){try{o(p,q)}catch(n){setTimeout(l(n),0)}}function f(n,o,p){n(o,p)}function d(o,q,r,u){var t=e[q],n=u?f:b,p;if(!e.hasOwnProperty(q)){return}for(p in t){if(t.hasOwnProperty(p)){n(t[p],o,r)}}}function c(n,o,q){return function p(){var s=String(n),r=s.lastIndexOf(".");d(n,n,o,q);while(r!==-1){s=s.substr(0,r);r=s.lastIndexOf(".");d(n,s,o,q)}}}function g(p){var o=String(p),q=Boolean(e.hasOwnProperty(o)&&h(e[o])),n=o.lastIndexOf(".");while(!q&&n!==-1){o=o.substr(0,n);n=o.lastIndexOf(".");q=Boolean(e.hasOwnProperty(o)&&h(e[o]))}return q}function a(p,q,o,s){var r=c(p,q,s),n=g(p);if(!n){return false}if(o===true){r()}else{setTimeout(r,0)}return true}m.publish=function(n,o){return a(n,o,false,m.immediateExceptions)};m.publishSync=function(n,o){return a(n,o,true,m.immediateExceptions)};m.subscribe=function(p,o){if(typeof o!=="function"){return false}if(!e.hasOwnProperty(p)){e[p]={}}var n="uid_"+String(++i);e[p][n]=o;return n};m.clearAllSubscriptions=function j(){e={}};m.clearSubscriptions=function k(o){var n;for(n in e){if(e.hasOwnProperty(n)&&n.indexOf(o)===0){delete e[n]}}};m.unsubscribe=function(u){var q=typeof u==="string"&&e.hasOwnProperty(u),s=!q&&typeof u==="string",v=typeof u==="function",o=false,n,r,p;if(q){delete e[u];return}for(n in e){if(e.hasOwnProperty(n)){r=e[n];if(s&&r[u]){delete r[u];o=u;break}if(v){for(p in r){if(r.hasOwnProperty(p)&&r[p]===u){delete r[p];o=true}}}}}return o}}));