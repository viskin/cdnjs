(function(){var c={version:"1.0.3"};var b=this;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=c}exports.PubSub=c}else{b.PubSub=c}var e={},a=-1;function d(g,i,f){if(!e.hasOwnProperty(g)){return false}function h(){var o=e[g],k=function(j){return function(){throw j}},m,l;for(m=0,l=o.length;m<l;m++){try{o[m].func(g,i)}catch(n){setTimeout(k(n),0)}}}if(f===true){h()}else{setTimeout(h,0)}return true}c.publish=function(f,g){return d(f,g,false)};c.publishSync=function(f,g){return d(f,g,true)};c.subscribe=function(h,g){if(!e.hasOwnProperty(h)){e[h]=[]}var f=(++a).toString();e[h].push({token:f,func:g});return f};c.unsubscribe=function(k){var f,h,g;for(f in e){if(e.hasOwnProperty(f)){for(h=0,g=e[f].length;h<g;h++){if(e[f][h].token===k){e[f].splice(h,1);return k}}}}return false};if(typeof define==="function"&&define.amd){define("pubsub",function(){return c})}}).call(this);