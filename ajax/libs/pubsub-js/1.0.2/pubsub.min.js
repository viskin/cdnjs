var PubSub={};(function(d){d.version="1.0.2";var c={},a=-1;function b(f,h,e){if(!c.hasOwnProperty(f)){return false}function g(){var o=c[f],k=function(i){return function(){throw i}},m,l;for(m=0,l=o.length;m<l;m++){try{o[m].func(f,h)}catch(n){setTimeout(k(n),0)}}}if(e===true){g()}else{setTimeout(g,0)}return true}d.publish=function(e,f){return b(e,f,false)};d.publishSync=function(e,f){return b(e,f,true)};d.subscribe=function(g,f){if(!c.hasOwnProperty(g)){c[g]=[]}var e=(++a).toString();c[g].push({token:e,func:f});return e};d.unsubscribe=function(h){var e,g,f;for(e in c){if(c.hasOwnProperty(e)){for(g=0,f=c[e].length;g<f;g++){if(c[e][g].token===h){c[e].splice(g,1);return h}}}}return false}}(PubSub));