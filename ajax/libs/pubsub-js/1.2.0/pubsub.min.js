(function(g){var h={name:"PubSubJS",version:"1.2.0"},d={},f=-1;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){module.exports=h}exports.PubSub=h}else{g.PubSub=h}function i(k,l){var m=false,j=k.lastIndexOf(".");while(j!==-1){k=k.substr(0,j);if(!l(k)){break}j=k.lastIndexOf(".")}}function c(l,p,q){var r=d[p],k=function(j){return function(){throw j}},o,m;for(o=0,m=r.length;o<m;o++){try{r[o].func(l,q)}catch(n){setTimeout(k(n),0)}}}function b(j,k){return function l(){if(d.hasOwnProperty(j)){c(j,j,k)}i(j,function(m){if(d.hasOwnProperty(m)){c(j,m,k)}return true})}}function e(j){var k=d.hasOwnProperty(j);if(!k){i(j,function(l){k=d.hasOwnProperty(l);return k})}return k}function a(l,m,k){var n=b(l,m),j=e(l);if(!j){return false}if(k===true){n()}else{setTimeout(n,0)}return true}h.publish=function(j,k){return a(j,k,false)};h.publishSync=function(j,k){return a(j,k,true)};h.subscribe=function(l,k){if(!d.hasOwnProperty(l)){d[l]=[]}var j=(++f).toString();d[l].push({token:j,func:k});return j};h.unsubscribe=function(s){var q=typeof s==="string",p=q?"token":"func",r=q?s:true,l=false,k,o,n;for(k in d){if(d.hasOwnProperty(k)){for(o=d[k].length-1;o>=0;o--){if(d[k][o][p]===s){d[k].splice(o,1);l=r;if(q){return l}}}}}return l};if(typeof define==="function"&&define.amd){define("pubsub",function(){return h})}}(this));