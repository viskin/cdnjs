(function(a,b){if(typeof exports==="object"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define(b)}else{a.PubSub=b()}}}((typeof window==="object"&&window)||this,function(){var j={name:"PubSubJS",version:"1.3.7"},e={},h=-1;function i(l){return function k(){throw l}}function b(l,m,n){try{l(m,n)}catch(k){setTimeout(i(k),0)}}function f(k,l,m){k(l,m)}function d(l,o,p,r){var q=e[o],k=r?f:b,n,m;if(!e.hasOwnProperty(o)){return}for(n=0;n<q.length;n++){k(q[n].func,l,p)}}function c(k,l,n){return function m(){var p=String(k),o=p.lastIndexOf(".");d(k,k,l,n);while(o!==-1){p=p.substr(0,o);o=p.lastIndexOf(".");d(k,p,l)}}}function g(m){var l=String(m),n=e.hasOwnProperty(l),k=l.lastIndexOf(".");while(!n&&k!==-1){l=l.substr(0,k);k=l.lastIndexOf(".");n=e.hasOwnProperty(l)}return n&&e[l].length>0}function a(m,n,l,p){var o=c(m,n,p),k=g(m);if(!k){return false}if(l===true){o()}else{setTimeout(o,0)}return true}j.publish=function(k,l){return a(k,l,false,j.immediateExceptions)};j.publishSync=function(k,l){return a(k,l,true,j.immediateExceptions)};j.subscribe=function(m,l){if(!e.hasOwnProperty(m)){e[m]=[]}var k=String(++h);e[m].push({token:k,func:l});return k};j.unsubscribe=function(r){var p=typeof r==="string",o=p?"token":"func",q=p?r:true,l=false,k,n;for(k in e){if(e.hasOwnProperty(k)){for(n=e[k].length-1;n>=0;n--){if(e[k][n][o]===r){e[k].splice(n,1);l=q;if(p){return l}}}}}return l};return j}));