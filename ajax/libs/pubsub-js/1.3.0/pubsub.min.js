(function(i){var k={name:"PubSubJS",version:"1.3.0"},f={},h=-1;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){module.exports=k}exports.PubSub=k}else{i.PubSub=k}function j(m){return function l(){throw m}}function e(m,n,o){try{m(n,o)}catch(l){setTimeout(j(l),0)}}function d(l,o,p){var q=f[o],n,m;if(!f.hasOwnProperty(o)){return}for(n=0,m=q.length;n<m;n++){e(q[n].func,l,p)}}function c(l,m){return function n(){var p=String(l),o=p.lastIndexOf(".");d(l,l,m);while(o!==-1){p=p.substr(0,o);o=p.lastIndexOf(".");d(l,p,m)}}}function g(n){var m=String(n),o=f.hasOwnProperty(m),l=m.lastIndexOf(".");while(!o&&l!==-1){m=m.substr(0,l);l=m.lastIndexOf(".");o=f.hasOwnProperty(m)}return o}function a(n,o,m){var p=c(n,o),l=g(n);if(!l){return false}if(m===true){p()}else{setTimeout(p,0)}return true}k.publish=function(l,m){return a(l,m,false)};k.publishSync=function(l,m){return a(l,m,true)};k.subscribe=function(n,m){if(!f.hasOwnProperty(n)){f[n]=[]}var l=String(++h);f[n].push({token:l,func:m});return l};k.unsubscribe=function(t){var r=typeof t==="string",q=r?"token":"func",s=r?t:true,n=false,l,p,o;for(l in f){if(f.hasOwnProperty(l)){for(p=f[l].length-1;p>=0;p--){if(f[l][p][q]===t){f[l].splice(p,1);n=s;if(r){return n}}}}}return n};if(typeof define==="function"&&define.amd){define("pubsub",function b(){return k})}}(typeof window!=="undefined"&&window||this));