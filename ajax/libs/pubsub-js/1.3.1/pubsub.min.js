(function(a,c,b){var d=typeof module=="object"&&typeof require=="function";if(d){module.exports=b(a,c)}else{if(typeof define==="function"&&typeof define.amd==="object"){define(b)}else{c[a]=b(a,c)}}}("PubSub",(typeof window!=="undefined"&&window)||this,function definition(a,b){var k={name:"PubSubJS",version:"1.3.1-dev"},g={},i=-1;function j(m){return function l(){throw m}}function f(m,n,o){try{m(n,o)}catch(l){setTimeout(j(l),0)}}function e(l,o,p){var q=g[o],n,m;if(!g.hasOwnProperty(o)){return}for(n=0,m=q.length;n<m;n++){f(q[n].func,l,p)}}function d(l,m){return function n(){var p=String(l),o=p.lastIndexOf(".");e(l,l,m);while(o!==-1){p=p.substr(0,o);o=p.lastIndexOf(".");e(l,p,m)}}}function h(n){var m=String(n),o=g.hasOwnProperty(m),l=m.lastIndexOf(".");while(!o&&l!==-1){m=m.substr(0,l);l=m.lastIndexOf(".");o=g.hasOwnProperty(m)}return o}function c(n,o,m){var p=d(n,o),l=h(n);if(!l){return false}if(m===true){p()}else{setTimeout(p,0)}return true}k.publish=function(l,m){return c(l,m,false)};k.publishSync=function(l,m){return c(l,m,true)};k.subscribe=function(n,m){if(!g.hasOwnProperty(n)){g[n]=[]}var l=String(++i);g[n].push({token:l,func:m});return l};k.unsubscribe=function(t){var r=typeof t==="string",q=r?"token":"func",s=r?t:true,n=false,l,p,o;for(l in g){if(g.hasOwnProperty(l)){for(p=g[l].length-1;p>=0;p--){if(g[l][p][q]===t){g[l].splice(p,1);n=s;if(r){return n}}}}}return n};return k}));