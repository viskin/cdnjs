(function(b,c){if(typeof define==="function"&&define.amd){define(["exports"],c)}else{if(typeof exports==="object"){c(exports)}else{var a={};b.PubSub=a;c(a)}}}((typeof window==="object"&&window)||this,function(l){var e={},i=-1;function h(n){var m;for(m in n){if(n.hasOwnProperty(m)){return true}}return false}function k(n){return function m(){throw n}}function b(n,o,p){try{n(o,p)}catch(m){setTimeout(k(m),0)}}function f(m,n,o){m(n,o)}function d(n,p,q,t){var r=e[p],m=t?f:b,o;if(!e.hasOwnProperty(p)){return}for(o in r){if(r.hasOwnProperty(o)){m(r[o],n,q)}}}function c(m,n,p){return function o(){var r=String(m),q=r.lastIndexOf(".");d(m,m,n,p);while(q!==-1){r=r.substr(0,q);q=r.lastIndexOf(".");d(m,r,n,p)}}}function g(o){var n=String(o),p=Boolean(e.hasOwnProperty(n)&&h(e[n])),m=n.lastIndexOf(".");while(!p&&m!==-1){n=n.substr(0,m);m=n.lastIndexOf(".");p=Boolean(e.hasOwnProperty(n)&&h(e[n]))}return p}function a(o,p,n,r){var q=c(o,p,r),m=g(o);if(!m){return false}if(n===true){q()}else{setTimeout(q,0)}return true}l.publish=function(m,n){return a(m,n,false,l.immediateExceptions)};l.publishSync=function(m,n){return a(m,n,true,l.immediateExceptions)};l.subscribe=function(o,n){if(typeof n!=="function"){return false}if(!e.hasOwnProperty(o)){e[o]={}}var m="uid_"+String(++i);e[o][m]=n;return m};l.clearAllSubscriptions=function j(){e={}};l.unsubscribe=function(u){var q=typeof u==="string"&&e.hasOwnProperty(u),s=!q&&typeof u==="string",v=typeof u==="function",o=false,n,r,p;if(q){delete e[u];return}for(n in e){if(e.hasOwnProperty(n)){r=e[n];if(s&&r[u]){delete r[u];o=u;break}if(v){for(p in r){if(r.hasOwnProperty(p)&&r[p]===u){delete r[p];o=true}}}}}return o}}));