(function(a,b){if(typeof define==="function"&&define.amd){define(["exports"],b)}else{if(typeof exports==="object"){b(exports)}else{b((a.PubSub={}))}}}((typeof window==="object"&&window)||this,function(l){var e={},i=-1;function h(n){var m;for(m in n){if(n.hasOwnProperty(m)){return true}}return false}function k(n){return function m(){throw n}}function b(n,o,p){try{n(o,p)}catch(m){setTimeout(k(m),0)}}function f(m,n,o){m(n,o)}function d(n,p,q,t){var r=e[p],m=t?f:b,o;if(!e.hasOwnProperty(p)){return}for(o in r){if(r.hasOwnProperty(o)){m(r[o],n,q)}}}function c(m,n,p){return function o(){var r=String(m),q=r.lastIndexOf(".");d(m,m,n,p);while(q!==-1){r=r.substr(0,q);q=r.lastIndexOf(".");d(m,r,n)}}}function g(o){var n=String(o),p=Boolean(e.hasOwnProperty(n)&&h(e[n])),m=n.lastIndexOf(".");while(!p&&m!==-1){n=n.substr(0,m);m=n.lastIndexOf(".");p=Boolean(e.hasOwnProperty(n)&&h(e[n]))}return p}function a(o,p,n,r){var q=c(o,p,r),m=g(o);if(!m){return false}if(n===true){q()}else{setTimeout(q,0)}return true}l.publish=function(m,n){return a(m,n,false,l.immediateExceptions)};l.publishSync=function(m,n){return a(m,n,true,l.immediateExceptions)};l.subscribe=function(o,n){if(typeof n!=="function"){return false}if(!e.hasOwnProperty(o)){e[o]={}}var m="uid_"+String(++i);e[o][m]=n;return m};l.clearAllSubscriptions=function j(){e={}};l.unsubscribe=function(s){var r=typeof s==="string"&&e.hasOwnProperty(s),o=!r&&typeof s==="string",n=typeof s==="function",w=false,p,v,u,q;if(r){delete e[s];return}for(p in e){if(e.hasOwnProperty(p)){v=e[p];if(o&&v[s]){delete v[s];w=s;break}else{if(n){for(u in v){if(v.hasOwnProperty(u)&&v[u]===s){delete v[u];w=true}}}}}}return w}}));