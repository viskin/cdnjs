/*!
 * crosstab JavaScript Library v0.2.5
 * https://github.com/tejacques/crosstab
 *
 * License: Apache 2.0 https://github.com/tejacques/crosstab/blob/master/LICENSE
 */
;(function(a){a("crosstab",function(g,L,f){var M=navigator.userAgent||navigator.vendor||window.opera;var D=(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(M)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(M.substr(0,4)));var B;try{B=window.localStorage;B=window["ie-eventlistener/storage"]||window.localStorage}catch(Q){}var K=true;try{B.setItem("__crosstab","");B.removeItem("__crosstab")}catch(Q){K=false}var y=false;function w(){if(P.supported){return}var e="crosstab not supported";var R=[];if(!B){R.push("localStorage not availabe")}if(!window.addEventListener){R.push("addEventListener not available")}if(D){R.push("mobile browser")}if(y){R.push("frozen tab environment detected")}if(!K){R.push("localStorage.setItem not allowed")}if(R.length>0){e+=": "+R.join(", ")}throw new Error(e)}var o={keys:{MESSAGE_KEY:"crosstab.MESSAGE_KEY",TABS_KEY:"crosstab.TABS_KEY",MASTER_TAB:"MASTER_TAB",SUPPORTED_KEY:"crosstab.SUPPORTED",FROZEN_TAB_ENVIRONMENT:"crosstab.FROZEN_TAB_ENVIRONMENT"}};o.forEachObj=function(e,S){for(var R in e){if(e.hasOwnProperty(R)){S.call(e,e[R],R)}}};o.forEachArr=function(e,S){for(var R=0;R<e.length;R++){S.call(e,e[R],R)}};o.forEach=function(e,R){if(Object.prototype.toString.call(e)==="[object Array]"){o.forEachArr(e,R)}else{o.forEachObj(e,R)}};o.map=function(e,S){var R=[];o.forEach(e,function(T){R.push(S(T))});return R};o.filter=function(e,S){var T=Object.prototype.toString.call(e)==="[object Array]";var R=T?[]:{};if(T){o.forEachArr(e,function(V,U){if(S(V,U)){R.push(V)}})}else{o.forEachObj(e,function(V,U){if(S(V,U)){R[U]=V}})}return R};o.now=function(){return(new Date()).getTime()};o.tabs=G();o.eventTypes={becomeMaster:"becomeMaster",tabUpdated:"tabUpdated",tabClosed:"tabClosed",tabPromoted:"tabPromoted"};o.createEventHandler=function(){var S={};var R=function(Z,aa,Y){Y=Y||aa;var X=T(Z);X[Y]=aa;return Y};var W=function(Y,X){if(S[Y]&&S[Y][X]){delete S[Y][X];return true}return false};var V=function(X){if(X){if(S[X]){delete S[X]}}else{S={}}};var e=function(Z){var Y=Array.prototype.slice.call(arguments,1);var X=T(Z);o.forEach(X,function(aa){if(typeof(aa)==="function"){aa.apply(this,Y)}})};var U=function(Z,aa,Y){var X=T(Z);while(!Y||X[Y]){Y=o.generateId()}R(Z,function(){W(Z,Y);var ab=Array.prototype.slice.call(arguments);aa.apply(this,ab)},Y);return Y};var T=function(Y){var X=S[Y]=S[Y]||{};return X};return{addListener:R,on:R,off:W,once:U,emit:e,listeners:T,removeListener:W,removeAllListeners:V}};var t=o.createEventHandler();o.events={addListener:t.addListener,on:t.on,off:t.off,once:t.once,emit:t.emit,listeners:t.listeners,removeListener:t.removeListener,removeAllListeners:t.removeAllListeners};var l;var x;function H(T){var V;var S=P.supported;try{V=T.newValue?JSON.parse(T.newValue):{}}catch(U){V={}}if(!V.id||V.id===P.id){return}if(T.newValue===l&&T.oldValue===x){return}l=T.newValue;x=T.oldValue;if(T.key===o.keys.MESSAGE_KEY){var R=V.data;if(!R.destination||R.destination===P.id){t.emit(R.event,R)}}else{if(T.key===o.keys.FROZEN_TAB_ENVIRONMENT){y=V.data;P.supported=P.supported&&!V.data}else{if(T.key===o.keys.SUPPORTED_KEY){P.supported=P.supported&&V.data}}}}function h(e,S){var R={id:P.id,data:S,timestamp:o.now()};B.setItem(e,JSON.stringify(R))}function m(e){var R=d(e);return R.data}function d(R){var e=B?B.getItem(R):null;var S=e?JSON.parse(e):{};return S}function i(){var e=0;o.forEach(o.tabs,function(S,R){if(R!==o.keys.MASTER_TAB){e++}});if(e===1){o.tabs={};k()}else{r(o.eventTypes.tabClosed,P.id)}}function O(){return o.tabs[o.keys.MASTER_TAB]}function b(e){o.tabs[o.keys.MASTER_TAB]=e}function A(){delete o.tabs[o.keys.MASTER_TAB]}function q(){return O().id===P.id}function F(){var e=null;o.forEach(o.tabs,function(R){if(!e||R.id<e){e=R.id}});if(e===P.id){r(o.eventTypes.tabPromoted,P.id)}else{b({id:e,lastUpdated:o.now()})}}t.addListener(o.eventTypes.tabClosed,function(e){var R=e.data;if(o.tabs[R]){delete o.tabs[R]}if(!O()||O().id===R){if(O()){A()}F()}else{if(O().id===P.id){k()}}});t.addListener(o.eventTypes.tabUpdated,function(R){var e=R.data;o.tabs[e.id]=e;if(!O()){F()}if(O().id===e.id){b(e)}if(O().id===P.id){k()}});t.addListener(o.eventTypes.tabPromoted,function(e){var S=e.data;var R=e.timestamp;b({id:S,lastUpdated:R});if(P.id===S){k();o.events.emit(o.eventTypes.becomeMaster)}});function s(e,R,T){T=T||"0";var S=(e.toString());if(S.length>=R){return S}return new Array(R-S.length+1).join(T)+S}o.generateId=function(){return o.now().toString()+s((Math.random()*2147483647)|0,10)};function r(S,T,e){if(!P.supported){w()}var R={id:o.generateId(),event:S,data:T,destination:e,origin:P.id,timestamp:o.now()};if(R.destination!==R.origin){h(o.keys.MESSAGE_KEY,R)}if(!R.destination||R.destination===R.origin){t.emit(S,R)}}function I(e,R){r(e,R,O().id)}var z=false;o.events.once("setupComplete",function(){z=true});var P=function(e){if(z){e()}else{o.events.once("setupComplete",e)}};P.id=o.generateId();P.supported=!!B&&window.addEventListener&&!D&&K;P.util=o;P.broadcast=r;P.broadcastMaster=I;P.on=o.events.on;P.once=o.events.once;if(!z&&P.supported){var E=d(o.keys.FROZEN_TAB_ENVIRONMENT);var J=E.data;if(J===true){u()}var N=d(o.keys.SUPPORTED_KEY);var n=N.data;if(n===false||n===true){P.supported=n;o.events.emit("setupComplete")}}function u(){P.supported=false;y=true;h(o.keys.FROZEN_TAB_ENVIRONMENT,true);h(o.keys.SUPPORTED_KEY,false)}var v=3*1000;var j=5*1000;var p=500;function G(){var e=m(o.keys.TABS_KEY);o.tabs=e||o.tabs||{};return o.tabs}function k(){h(o.keys.TABS_KEY,o.tabs)}function C(){var S=o.now();var T={id:P.id,lastUpdated:S};r(o.eventTypes.tabUpdated,T);function Z(aa){return S-aa.lastUpdated<j}function W(ab,aa){return aa!==o.keys.MASTER_TAB&&!Z(ab)}var e=o.filter(o.tabs,W);o.forEach(e,function(aa){r(o.eventTypes.tabClosed,aa.id)});if(!z){var X=P.util.tabs[P.util.keys.MASTER_TAB];if(X&&X.id!==T.id){var Y;var R;P.util.events.once("PONG",function(){if(!z){clearTimeout(Y);h(o.keys.SUPPORTED_KEY,true);h(o.keys.FROZEN_TAB_ENVIRONMENT,false);o.events.emit("setupComplete")}});R=o.now();var V=function(aa){var ab=o.now()-R;if(!z){if(aa<=0&&ab>p){u();o.events.emit("setupComplete")}else{Y=setTimeout(function(){V(aa-1)},5)}}};var U=5;Y=setTimeout(function(){V(5)},p-5*U);P.broadcastMaster("PING")}else{if(X&&X.id===T.id){o.events.emit("setupComplete")}}}}function c(){if(P.supported&&!P.stopKeepalive){C();window.setTimeout(c,v)}}if(!P.supported){P.broadcast=w}else{window.addEventListener("storage",H,false);window.addEventListener("beforeunload",i,false);o.events.on("PING",function(e){if(!e.destination||e.destination!==P.id){return}if(o.now()-e.timestamp<p){P.broadcast("PONG",null,e.origin)}});c()}f.exports=P;
/*!
 * UMD/AMD/Global context Module Loader wrapper
 * based off https://gist.github.com/wilsonpage/8598603
 *
 * This wrapper will try to use a module loader with the
 * following priority:
 *
 *  1.) AMD
 *  2.) CommonJS
 *  3.) Context Variable (window in the browser)
 */
})})(typeof define=="function"&&define.amd?define:(function(a){return typeof module=="object"?function(c,b){b(require,exports,module)}:function(d,b){var e={exports:{}};var c=function(f){if(f==="jquery"){f="jQuery"}return a[f]};b(c,e.exports,e);a[d]=e.exports}})(this));