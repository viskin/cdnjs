/*!
 * crosstab JavaScript Library v0.2.4
 * https://github.com/tejacques/crosstab
 *
 * License: Apache 2.0 https://github.com/tejacques/crosstab/blob/master/LICENSE
 */
;(function(a){a("crosstab",function(g,K,f){var L=navigator.userAgent||navigator.vendor||window.opera;var D=(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(L)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(L.substr(0,4)));var B;try{B=window.localStorage;B=window["ie-eventlistener/storage"]||window.localStorage}catch(P){}var y=false;function w(){if(O.supported){return}var e="crosstab not supported";var Q=[];if(!B){Q.push("localStorage not availabe")}if(!window.addEventListener){Q.push("addEventListener not available")}if(D){Q.push("mobile browser")}if(y){Q.push("frozen tab environment detected")}if(Q.length>0){e+=": "+Q.join(", ")}throw new Error(e)}var o={keys:{MESSAGE_KEY:"crosstab.MESSAGE_KEY",TABS_KEY:"crosstab.TABS_KEY",MASTER_TAB:"MASTER_TAB",SUPPORTED_KEY:"crosstab.SUPPORTED",FROZEN_TAB_ENVIRONMENT:"crosstab.FROZEN_TAB_ENVIRONMENT"}};o.forEachObj=function(e,R){for(var Q in e){if(e.hasOwnProperty(Q)){R.call(e,e[Q],Q)}}};o.forEachArr=function(e,R){for(var Q=0;Q<e.length;Q++){R.call(e,e[Q],Q)}};o.forEach=function(e,Q){if(Object.prototype.toString.call(e)==="[object Array]"){o.forEachArr(e,Q)}else{o.forEachObj(e,Q)}};o.map=function(e,R){var Q=[];o.forEach(e,function(S){Q.push(R(S))});return Q};o.filter=function(e,R){var S=Object.prototype.toString.call(e)==="[object Array]";var Q=S?[]:{};if(S){o.forEachArr(e,function(U,T){if(R(U,T)){Q.push(U)}})}else{o.forEachObj(e,function(U,T){if(R(U,T)){Q[T]=U}})}return Q};o.now=function(){return(new Date()).getTime()};o.tabs=G();o.eventTypes={becomeMaster:"becomeMaster",tabUpdated:"tabUpdated",tabClosed:"tabClosed",tabPromoted:"tabPromoted"};o.createEventHandler=function(){var R={};var Q=function(Y,Z,X){X=X||Z;var W=S(Y);W[X]=Z;return X};var V=function(X,W){if(R[X]&&R[X][W]){delete R[X][W];return true}return false};var U=function(W){if(W){if(R[W]){delete R[W]}}else{R={}}};var e=function(Y){var X=Array.prototype.slice.call(arguments,1);var W=S(Y);o.forEach(W,function(Z){if(typeof(Z)==="function"){Z.apply(this,X)}})};var T=function(Y,Z,X){var W=S(Y);while(!X||W[X]){X=o.generateId()}Q(Y,function(){V(Y,X);var aa=Array.prototype.slice.call(arguments);Z.apply(this,aa)},X);return X};var S=function(X){var W=R[X]=R[X]||{};return W};return{addListener:Q,on:Q,off:V,once:T,emit:e,listeners:S,removeListener:V,removeAllListeners:U}};var t=o.createEventHandler();o.events={addListener:t.addListener,on:t.on,off:t.off,once:t.once,emit:t.emit,listeners:t.listeners,removeListener:t.removeListener,removeAllListeners:t.removeAllListeners};var l;var x;function H(S){var U;var R=O.supported;try{U=S.newValue?JSON.parse(S.newValue):{}}catch(T){U={}}if(!U.id||U.id===O.id){return}if(S.newValue===l&&S.oldValue===x){return}l=S.newValue;x=S.oldValue;if(S.key===o.keys.MESSAGE_KEY){var Q=U.data;if(!Q.destination||Q.destination===O.id){t.emit(Q.event,Q)}}else{if(S.key===o.keys.FROZEN_TAB_ENVIRONMENT){y=U.data;O.supported=O.supported&&!U.data}else{if(S.key===o.keys.SUPPORTED_KEY){O.supported=O.supported&&U.data}}}}function h(e,R){var Q={id:O.id,data:R,timestamp:o.now()};B.setItem(e,JSON.stringify(Q))}function m(e){var Q=d(e);return Q.data}function d(Q){var e=B?B.getItem(Q):null;var R=e?JSON.parse(e):{};return R}function i(){var e=0;o.forEach(o.tabs,function(R,Q){if(Q!==o.keys.MASTER_TAB){e++}});if(e===1){o.tabs={};k()}else{r(o.eventTypes.tabClosed,O.id)}}function N(){return o.tabs[o.keys.MASTER_TAB]}function b(e){o.tabs[o.keys.MASTER_TAB]=e}function A(){delete o.tabs[o.keys.MASTER_TAB]}function q(){return N().id===O.id}function F(){var e=null;o.forEach(o.tabs,function(Q){if(!e||Q.id<e){e=Q.id}});if(e===O.id){r(o.eventTypes.tabPromoted,O.id)}else{b({id:e,lastUpdated:o.now()})}}t.addListener(o.eventTypes.tabClosed,function(e){var Q=e.data;if(o.tabs[Q]){delete o.tabs[Q]}if(!N()||N().id===Q){if(N()){A()}F()}else{if(N().id===O.id){k()}}});t.addListener(o.eventTypes.tabUpdated,function(Q){var e=Q.data;o.tabs[e.id]=e;if(!N()){F()}if(N().id===e.id){b(e)}if(N().id===O.id){k()}});t.addListener(o.eventTypes.tabPromoted,function(e){var R=e.data;var Q=e.timestamp;b({id:R,lastUpdated:Q});if(O.id===R){k();o.events.emit(o.eventTypes.becomeMaster)}});function s(e,Q,S){S=S||"0";var R=(e.toString());if(R.length>=Q){return R}return new Array(Q-R.length+1).join(S)+R}o.generateId=function(){return o.now().toString()+s((Math.random()*2147483647)|0,10)};function r(R,S,e){if(!O.supported){w()}var Q={id:o.generateId(),event:R,data:S,destination:e,origin:O.id,timestamp:o.now()};if(Q.destination!==Q.origin){h(o.keys.MESSAGE_KEY,Q)}if(!Q.destination||Q.destination===Q.origin){t.emit(R,Q)}}function I(e,Q){r(e,Q,N().id)}var z=false;o.events.once("setupComplete",function(){z=true});var O=function(e){if(z){e()}else{o.events.once("setupComplete",e)}};O.id=o.generateId();O.supported=!!B&&window.addEventListener&&!D;O.util=o;O.broadcast=r;O.broadcastMaster=I;O.on=o.events.on;O.once=o.events.once;if(!z&&O.supported){var E=d(o.keys.FROZEN_TAB_ENVIRONMENT);var J=E.data;if(J===true){u()}var M=d(o.keys.SUPPORTED_KEY);var n=M.data;if(n===false||n===true){O.supported=n;o.events.emit("setupComplete")}}function u(){O.supported=false;y=true;h(o.keys.FROZEN_TAB_ENVIRONMENT,true);h(o.keys.SUPPORTED_KEY,false)}var v=3*1000;var j=5*1000;var p=500;function G(){var e=m(o.keys.TABS_KEY);o.tabs=e||o.tabs||{};return o.tabs}function k(){h(o.keys.TABS_KEY,o.tabs)}function C(){var R=o.now();var S={id:O.id,lastUpdated:R};r(o.eventTypes.tabUpdated,S);function Y(Z){return R-Z.lastUpdated<j}function V(aa,Z){return Z!==o.keys.MASTER_TAB&&!Y(aa)}var e=o.filter(o.tabs,V);o.forEach(e,function(Z){r(o.eventTypes.tabClosed,Z.id)});if(!z){var W=O.util.tabs[O.util.keys.MASTER_TAB];if(W&&W.id!==S.id){var X;var Q;O.util.events.once("PONG",function(){if(!z){clearTimeout(X);h(o.keys.SUPPORTED_KEY,true);h(o.keys.FROZEN_TAB_ENVIRONMENT,false);o.events.emit("setupComplete")}});Q=o.now();var U=function(Z){var aa=o.now()-Q;if(!z){if(Z<=0&&aa>p){u();o.events.emit("setupComplete")}else{X=setTimeout(function(){U(Z-1)},5)}}};var T=5;X=setTimeout(function(){U(5)},p-5*T);O.broadcastMaster("PING")}else{if(W&&W.id===S.id){o.events.emit("setupComplete")}}}}function c(){if(O.supported&&!O.stopKeepalive){C();window.setTimeout(c,v)}}if(!O.supported){O.broadcast=w}else{window.addEventListener("storage",H,false);window.addEventListener("beforeunload",i,false);o.events.on("PING",function(e){if(!e.destination||e.destination!==O.id){return}if(o.now()-e.timestamp<p){O.broadcast("PONG",null,e.origin)}});c()}f.exports=O;
/*!
 * UMD/AMD/Global context Module Loader wrapper
 * based off https://gist.github.com/wilsonpage/8598603
 *
 * This wrapper will try to use a module loader with the
 * following priority:
 *
 *  1.) AMD
 *  2.) CommonJS
 *  3.) Context Variable (window in the browser)
 */
})})(typeof define=="function"&&define.amd?define:(function(a){return typeof module=="object"?function(c,b){b(require,exports,module)}:function(d,b){var e={exports:{}};var c=function(f){if(f==="jquery"){f="jQuery"}return a[f]};b(c,e.exports,e);a[d]=e.exports}})(this));