/*!
 * crosstab JavaScript Library v0.2.1
 * https://github.com/tejacques/crosstab
 *
 * License: Apache 2.0 https://github.com/tejacques/crosstab/blob/master/LICENSE
 */
;(function(a){a("crosstab",function(g,I,f){var J=navigator.userAgent||navigator.vendor||window.opera;var B=(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(J)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(J.substr(0,4)));var z;try{z=window.localStorage;z=window["ie-eventlistener/storage"]||window.localStorage}catch(N){}var w=false;function v(){var e="crosstab not supported";var O=[];if(!z){O.push("localStorage not availabe")}if(!window.addEventListener){O.push("addEventListener not available")}if(B){O.push("mobile browser")}if(w){O.push("frozen tab environment detected")}if(O.length>0){e+=": "+O.join(", ")}throw new Error(e)}var n={keys:{MESSAGE_KEY:"crosstab.MESSAGE_KEY",TABS_KEY:"crosstab.TABS_KEY",MASTER_TAB:"MASTER_TAB",SUPPORTED_KEY:"crosstab.SUPPORTED",FROZEN_TAB_ENVIRONMENT:"crosstab.FROZEN_TAB_ENVIRONMENT"}};n.forEachObj=function(e,P){for(var O in e){if(e.hasOwnProperty(O)){P.call(e,e[O],O)}}};n.forEachArr=function(e,P){for(var O=0;O<e.length;O++){P.call(e,e[O],O)}};n.forEach=function(e,O){if(Object.prototype.toString.call(e)==="[object Array]"){n.forEachArr(e,O)}else{n.forEachObj(e,O)}};n.map=function(e,P){var O=[];n.forEach(e,function(Q){O.push(P(Q))});return O};n.filter=function(e,P){var Q=Object.prototype.toString.call(e)==="[object Array]";var O=Q?[]:{};if(Q){n.forEachArr(e,function(S,R){if(P(S,R)){O.push(S)}})}else{n.forEachObj(e,function(S,R){if(P(S,R)){O[R]=S}})}return O};n.now=function(){return(new Date()).getTime()};n.tabs=E();n.eventTypes={becomeMaster:"becomeMaster",tabUpdated:"tabUpdated",tabClosed:"tabClosed",tabPromoted:"tabPromoted"};n.createEventHandler=function(){var P={};var O=function(W,X,V){V=V||X;var U=Q(W);U[V]=X;return V};var T=function(V,U){if(P[V]&&P[V][U]){delete P[V][U];return true}return false};var S=function(U){if(U){if(P[U]){delete P[U]}}else{P={}}};var e=function(W){var V=Array.prototype.slice.call(arguments,1);var U=Q(W);n.forEach(U,function(X){if(typeof(X)==="function"){X.apply(this,V)}})};var R=function(W,X,V){var U=Q(W);while(!V||U[V]){V=n.generateId()}O(W,function(){T(W,V);var Y=Array.prototype.slice.call(arguments);X.apply(this,Y)},V);return V};var Q=function(V){var U=P[V]=P[V]||{};return U};return{addListener:O,on:O,off:T,once:R,emit:e,listeners:Q,removeListener:T,removeAllListeners:S}};var s=n.createEventHandler();n.events={addListener:s.addListener,on:s.on,off:s.off,once:s.once,emit:s.emit,listeners:s.listeners,removeListener:s.removeListener,removeAllListeners:s.removeAllListeners};function F(P){var R;try{R=P.newValue?JSON.parse(P.newValue):{}}catch(Q){R={}}if(!R.id||R.id===M.id){return}if(P.key===n.keys.MESSAGE_KEY){var O=R.data;if(!O.destination||O.destination===M.id){s.emit(O.event,O)}}}function h(e,P){var O={id:M.id,data:P,timestamp:n.now()};z.setItem(e,JSON.stringify(O))}function l(e){var O=d(e);return O.data}function d(O){var e=z?z.getItem(O):null;var P=e?JSON.parse(e):{};return P}function i(){var e=0;n.forEach(n.tabs,function(P,O){if(O!==n.keys.MASTER_TAB){e++}});if(e===1){n.tabs={};k()}else{q(n.eventTypes.tabClosed,M.id)}}function L(){return n.tabs[n.keys.MASTER_TAB]}function b(e){n.tabs[n.keys.MASTER_TAB]=e}function y(){delete n.tabs[n.keys.MASTER_TAB]}function p(){return L().id===M.id}function D(){var e=null;n.forEach(n.tabs,function(O){if(!e||O.id<e){e=O.id}});if(e===M.id){q(n.eventTypes.tabPromoted,M.id)}else{b({id:e,lastUpdated:n.now()})}}s.addListener(n.eventTypes.tabClosed,function(e){var O=e.data;if(n.tabs[O]){delete n.tabs[O]}if(!L()||L().id===O){if(L()){y()}D()}else{if(L().id===M.id){k()}}});s.addListener(n.eventTypes.tabUpdated,function(O){var e=O.data;n.tabs[e.id]=e;if(!L()){D()}if(L().id===e.id){b(e)}if(L().id===M.id){k()}});s.addListener(n.eventTypes.tabPromoted,function(e){var P=e.data;var O=e.timestamp;b({id:P,lastUpdated:O});if(M.id===P){k();n.events.emit(n.eventTypes.becomeMaster)}});function r(e,O,Q){Q=Q||"0";var P=(e.toString());if(P.length>=O){return P}return new Array(O-P.length+1).join(Q)+P}n.generateId=function(){return n.now().toString()+r((Math.random()*2147483647)|0,10)};function q(P,Q,e){if(!M.supported){v()}var O={event:P,data:Q,destination:e,origin:M.id,timestamp:n.now()};if(O.destination!==O.origin){h(n.keys.MESSAGE_KEY,O)}if(!O.destination||O.destination===O.origin){s.emit(P,O)}}function G(e,O){q(e,O,L().id)}var x=false;n.events.once("setupComplete",function(){x=true});var M=function(e){if(x){e()}else{n.events.once("setupComplete",e)}};M.id=n.generateId();M.supported=!!z&&window.addEventListener&&!B;M.util=n;M.broadcast=q;M.broadcastMaster=G;M.on=n.events.on;M.once=n.events.once;if(!x&&M.supported){var K=d(n.keys.SUPPORTED_KEY);var m=K.data;if(m===false||m===true){M.supported=m;n.events.emit("setupComplete")}}if(!x&&M.supported){var C=d(n.keys.FROZEN_TAB_ENVIRONMENT);var H=C.data;if(H===true){t();n.events.emit("setupComplete")}}function t(){M.supported=false;w=true;h(n.keys.FROZEN_TAB_ENVIRONMENT,true);h(n.keys.SUPPORTED_KEY,false)}var u=3*1000;var j=5*1000;var o=100;function E(){var e=l(n.keys.TABS_KEY);n.tabs=e||n.tabs||{};return n.tabs}function k(){h(n.keys.TABS_KEY,n.tabs)}function A(){var P=n.now();var Q={id:M.id,lastUpdated:P};q(n.eventTypes.tabUpdated,Q);function W(X){return P-X.lastUpdated<j}function T(Y,X){return X!==n.keys.MASTER_TAB&&!W(Y)}var e=n.filter(n.tabs,T);n.forEach(e,function(X){q(n.eventTypes.tabClosed,X.id)});if(!x){var U=M.util.tabs[M.util.keys.MASTER_TAB];if(U&&U.id!==Q.id){var V;var O;M.util.events.once("PONG",function(){if(!x){clearTimeout(V);h(n.keys.SUPPORTED_KEY,true);h(n.keys.FROZEN_TAB_ENVIRONMENT,false);n.events.emit("setupComplete")}});O=n.now();var S=function(X){var Y=n.now()-O;if(!x){if(X<=0&&Y>o){t();n.events.emit("setupComplete")}else{V=setTimeout(function(){S(X-1)},5)}}};var R=5;V=setTimeout(function(){S(5)},o-5*R);M.broadcastMaster("PING")}else{if(U&&U.id===Q.id){n.events.emit("setupComplete")}}}}function c(){if(!M.stopKeepalive){A();window.setTimeout(c,u)}}if(!M.supported){M.broadcast=v}else{window.addEventListener("storage",F,false);window.addEventListener("beforeunload",i,false);n.events.on("PING",function(e){if(!e.destination||e.destination!==M.id){return}if(n.now()-e.timestamp<o){M.broadcast("PONG",null,e.origin)}});c()}f.exports=M;
/*!
 * UMD/AMD/Global context Module Loader wrapper
 * based off https://gist.github.com/wilsonpage/8598603
 *
 * This wrapper will try to use a module loader with the
 * following priority:
 *
 *  1.) AMD
 *  2.) CommonJS
 *  3.) Context Variable (window in the browser)
 */
})})(typeof define=="function"&&define.amd?define:(function(a){return typeof module=="object"?function(c,b){b(require,exports,module)}:function(d,b){var e={exports:{}};var c=function(f){if(f==="jquery"){f="jQuery"}return a[f]};b(c,e.exports,e);a[d]=e.exports}})(this));