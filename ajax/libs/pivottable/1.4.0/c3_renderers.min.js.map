{"version":3,"sources":["/source/c3_renderers.coffee"],"names":[],"mappings":"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","file":"c3_renderers.min.js","sourcesContent":["callWithJQuery = (pivotModule) ->\n    if typeof exports is \"object\" and typeof module is \"object\" # CommonJS\n        pivotModule require(\"jquery\")\n    else if typeof define is \"function\" and define.amd # AMD\n        define [\"jquery\"], pivotModule\n    # Plain browser env\n    else\n        pivotModule jQuery\n        \ncallWithJQuery ($) ->\n\n    makeC3Chart = (chartOpts = {}) -> (pivotData, opts) ->\n        defaults =\n            localeStrings:\n                vs: \"vs\"\n                by: \"by\"\n\n        opts = $.extend defaults, opts\n        chartOpts.type ?= \"line\"\n\n        rowKeys = pivotData.getRowKeys()\n        rowKeys.push [] if rowKeys.length == 0\n        colKeys = pivotData.getColKeys()\n        colKeys.push [] if colKeys.length == 0\n\n        headers = (h.join(\"-\") for h in colKeys)\n\n        fullAggName = pivotData.aggregatorName \n        if pivotData.valAttrs.length\n            fullAggName += \"(#{pivotData.valAttrs.join(\", \")})\"\n\n        if chartOpts.type == \"scatter\"\n            dataArray = []\n            hAxisTitle = pivotData.colAttrs.join(\"-\")\n            vAxisTitle = pivotData.rowAttrs.join(\"-\")\n            for y, tree2 of pivotData.tree\n                for x, agg of tree2\n                    datum = {}\n                    datum[hAxisTitle] = parseFloat(x)\n                    datum[vAxisTitle] = parseFloat(y)\n                    datum[\"tooltip\"] = agg.format(agg.value())\n                    dataArray.push datum\n        else\n            columns = []\n            for rowKey in rowKeys\n                rowHeader = rowKey.join(\"-\")\n                row = [if rowHeader == \"\" then pivotData.aggregatorName else rowHeader]\n                for colKey in colKeys\n                    agg = pivotData.getAggregator(rowKey, colKey)\n                    if agg.value()?\n                        row.push agg.value()\n                    else row.push null\n                columns.push row\n\n\n            vAxisTitle = pivotData.aggregatorName+ \n                if pivotData.valAttrs.length then \"(#{pivotData.valAttrs.join(\", \")})\" else \"\"\n            hAxisTitle = pivotData.colAttrs.join(\"-\")\n\n        params = \n            size:\n                height: ($(window).height() / 1.4),\n                width: ($(window).width() / 1.4)\n            axis: \n                y: label: vAxisTitle\n                x: label: hAxisTitle\n            data: \n                type: chartOpts.type\n            tooltip:\n                grouped: false\n\n        if chartOpts.type == \"scatter\"\n            params.data.x = hAxisTitle\n            params.axis.x.tick = fit: false\n            params.data.json = dataArray\n            params.data.keys = value: [hAxisTitle,vAxisTitle]\n            params.legend = show: false \n            params.tooltip.format =  \n                title: -> fullAggName\n                name: -> \"\"\n                value: (a,b,c,d) -> dataArray[d].tooltip\n        else\n            params.axis.x.type= 'category'\n            params.axis.x.categories = headers\n            params.data.columns = columns\n\n\n        if chartOpts.stacked?\n            params.data.groups = [x.join(\"-\") for x in rowKeys]\n        renderArea = $(\"<div>\", style: \"display:none;\").appendTo $(\"body\")\n        result = $(\"<div>\").appendTo renderArea\n        params.bindto = result[0]\n        c3.generate params\n        result.detach()\n        renderArea.remove()\n        return result\n\n    $.pivotUtilities.c3_renderers = \n        \"Line Chart\": makeC3Chart()\n        \"Bar Chart\": makeC3Chart(type: \"bar\")\n        \"Stacked Bar Chart\": makeC3Chart(type: \"bar\", stacked: true)\n        \"Area Chart\": makeC3Chart(type: \"area\", stacked: true)\n        \"Scatter Chart\": makeC3Chart(type: \"scatter\")\n"],"sourceRoot":"/source/"}