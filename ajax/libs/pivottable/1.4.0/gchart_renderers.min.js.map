{"version":3,"sources":["/source/gchart_renderers.coffee"],"names":[],"mappings":"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","file":"gchart_renderers.min.js","sourcesContent":["callWithJQuery = (pivotModule) ->\n    if typeof exports is \"object\" and typeof module is \"object\" # CommonJS\n        pivotModule require(\"jquery\")\n    else if typeof define is \"function\" and define.amd # AMD\n        define [\"jquery\"], pivotModule\n    # Plain browser env\n    else\n        pivotModule jQuery\n        \ncallWithJQuery ($) ->\n\n    makeGoogleChart = (chartType, extraOptions) -> (pivotData, opts) ->\n        defaults =\n            localeStrings:\n                vs: \"vs\"\n                by: \"by\"\n\n        opts = $.extend defaults, opts\n\n        rowKeys = pivotData.getRowKeys()\n        rowKeys.push [] if rowKeys.length == 0\n        colKeys = pivotData.getColKeys()\n        colKeys.push [] if colKeys.length == 0\n        fullAggName = pivotData.aggregatorName \n        if pivotData.valAttrs.length\n            fullAggName += \"(#{pivotData.valAttrs.join(\", \")})\"\n        headers = (h.join(\"-\") for h in rowKeys)\n        headers.unshift \"\"\n\n        numCharsInHAxis = 0\n        if chartType == \"ScatterChart\"\n            dataArray = []\n            for y, tree2 of pivotData.tree\n                for x, agg of tree2\n                     dataArray.push [\n                        parseFloat(x),\n                        parseFloat(y),\n                        fullAggName+\": \\n\"+agg.format(agg.value())\n                        ]\n            console.log dataArray\n            dataTable = new google.visualization.DataTable()\n            dataTable.addColumn 'number', pivotData.colAttrs.join(\"-\")\n            dataTable.addColumn 'number', pivotData.rowAttrs.join(\"-\") \n            dataTable.addColumn type: \"string\", role: \"tooltip\"\n            dataTable.addRows dataArray\n            hAxisTitle = pivotData.colAttrs.join(\"-\")\n            vAxisTitle = pivotData.rowAttrs.join(\"-\")\n            title = \"\"\n        else\n            dataArray = [headers]\n            for colKey in colKeys\n                row = [colKey.join(\"-\")]\n                numCharsInHAxis += row[0].length\n                for rowKey in rowKeys\n                    agg = pivotData.getAggregator(rowKey, colKey)\n                    if agg.value()?\n                        row.push agg.value()\n                    else row.push null\n                dataArray.push row\n\n            dataTable = google.visualization.arrayToDataTable(dataArray)\n\n            title = vAxisTitle = fullAggName\n            hAxisTitle = pivotData.colAttrs.join(\"-\")\n            title += \" #{opts.localeStrings.vs} #{hAxisTitle}\" if hAxisTitle != \"\"\n            groupByTitle = pivotData.rowAttrs.join(\"-\")\n            title += \" #{opts.localeStrings.by} #{groupByTitle}\" if groupByTitle != \"\"\n\n        options = \n            width: $(window).width() / 1.4\n            height: $(window).height() / 1.4\n            title: title\n            hAxis: {title: hAxisTitle, slantedText: numCharsInHAxis > 50}\n            vAxis: {title: vAxisTitle}\n            tooltip: { textStyle: { fontName: 'Arial', fontSize: 12 } }\n\n        if chartType == \"ScatterChart\"\n            options.legend = position: \"none\"\n            options.chartArea = {'width': '80%', 'height': '80%'}\n\n        else if dataArray[0].length == 2 and dataArray[0][1] ==  \"\"\n            options.legend = position: \"none\"\n\n        options[k] = v for k, v of extraOptions\n\n        result = $(\"<div>\").css(width: \"100%\", height: \"100%\")\n        wrapper = new google.visualization.ChartWrapper {dataTable, chartType, options}\n        wrapper.draw(result[0])    \n        result.bind \"dblclick\", -> \n            editor = new google.visualization.ChartEditor()\n            google.visualization.events.addListener editor, 'ok', -> \n                editor.getChartWrapper().draw(result[0])\n            editor.openDialog(wrapper)\n        return result\n\n    $.pivotUtilities.gchart_renderers = \n        \"Line Chart\": makeGoogleChart(\"LineChart\")\n        \"Bar Chart\": makeGoogleChart(\"ColumnChart\")\n        \"Stacked Bar Chart\": makeGoogleChart(\"ColumnChart\", isStacked: true)\n        \"Area Chart\": makeGoogleChart(\"AreaChart\", isStacked: true)\n        \"Scatter Chart\": makeGoogleChart(\"ScatterChart\")\n"],"sourceRoot":"/source/"}