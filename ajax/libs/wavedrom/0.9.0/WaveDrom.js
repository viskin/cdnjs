/*! wavedrom 2016-03-09 */
var JsonML;void 0===JsonML&&(JsonML={}),function(){"use strict";function a(a,b,c){"string"==typeof c&&(c=new Function("event",c)),"function"==typeof c&&(a[b]=c)}function b(b,c){if(c.name&&document.attachEvent)try{var d=document.createElement("<"+b.tagName+" name='"+c.name+"'>");b.tagName===d.tagName&&(b=d)}catch(e){}for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];f&&null!==g&&"undefined"!=typeof g&&(f=j[f.toLowerCase()]||f,"style"===f?"undefined"!=typeof b.style.cssText?b.style.cssText=g:b.style=g:"class"===f?(b.className=g,b.setAttribute(f,g)):l[f]?(a(b,f,g),k[f]&&a(b,k[f],g)):"string"==typeof g||"number"==typeof g||"boolean"==typeof g?(b.setAttribute(f,g),k[f]&&b.setAttribute(k[f],g)):(b[f]=g,k[f]&&(b[k[f]]=g)))}return b}function c(a,b){if(b)if(a.tagName&&"table"===a.tagName.toLowerCase()&&a.tBodies){if(!b.tagName){if(11===b.nodeType)for(;b.firstChild;)c(a,b.removeChild(b.firstChild));return}var d=b.tagName.toLowerCase();if(d&&"tbody"!==d&&"thead"!==d){var e=a.tBodies.length>0?a.tBodies[a.tBodies.length-1]:null;e||(e=document.createElement("th"===d?"thead":"tbody"),a.appendChild(e)),e.appendChild(b)}else a.canHaveChildren!==!1&&a.appendChild(b)}else if(a.tagName&&"style"===a.tagName.toLowerCase()&&document.createStyleSheet)a.cssText=b;else if(a.canHaveChildren!==!1)a.appendChild(b);else if(a.tagName&&"object"===a.tagName.toLowerCase()&&b.tagName&&"param"===b.tagName.toLowerCase()){try{a.appendChild(b)}catch(f){}try{a.object&&(a.object[b.name]=b.value)}catch(g){}}}function d(a){return a&&3===a.nodeType&&(!a.nodeValue||!/\S/.exec(a.nodeValue))}function e(a){if(a){for(;d(a.firstChild);)a.removeChild(a.firstChild);for(;d(a.lastChild);)a.removeChild(a.lastChild)}}function f(a){var b=document.createElement("div");if(b.innerHTML=a,e(b),1===b.childNodes.length)return b.firstChild;for(var c=document.createDocumentFragment?document.createDocumentFragment():document.createElement("");b.firstChild;)c.appendChild(b.firstChild);return c}function g(a){this.value=a}function h(a,b,c){return document.createTextNode("["+a+"]")}function i(a,d,e){for(var h=1;h<d.length;h++)d[h]instanceof Array||"string"==typeof d[h]?c(a,JsonML.parse(d[h],e)):d[h]instanceof g?c(a,f(d[h].value)):"object"==typeof d[h]&&null!==d[h]&&1===a.nodeType&&(a=b(a,d[h]));return a}var j={rowspan:"rowSpan",colspan:"colSpan",cellpadding:"cellPadding",cellspacing:"cellSpacing",tabindex:"tabIndex",accesskey:"accessKey",hidefocus:"hideFocus",usemap:"useMap",maxlength:"maxLength",readonly:"readOnly",contenteditable:"contentEditable"},k={enctype:"encoding",onscroll:"DOMMouseScroll"},l=function(a){for(var b,c={};a.length;)b=a.shift(),c["on"+b.toLowerCase()]=b;return c}("blur,change,click,dblclick,error,focus,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,resize,scroll,select,submit,unload".split(","));JsonML.onerror=null,JsonML.parse=function(a,b){try{if(!a)return null;if("string"==typeof a)return document.createTextNode(a);if(a instanceof g)return f(a.value);if(!JsonML.isElement(a))throw new SyntaxError("invalid JsonML");var d=a[0];if(!d){for(var j=document.createDocumentFragment?document.createDocumentFragment():document.createElement(""),k=1;k<a.length;k++)c(j,JsonML.parse(a[k],b));return e(j),1===j.childNodes.length?j.firstChild:j}if("style"===d.toLowerCase()&&document.createStyleSheet)return JsonML.patch(document.createStyleSheet(),a,b),null;var l,m="http://www.w3.org/2000/svg";return l=i(document.createElementNS(m,d),a,b),e(l),l&&"function"==typeof b?b(l):l}catch(n){try{var o="function"==typeof JsonML.onerror?JsonML.onerror:h;return o(n,a,b)}catch(p){return document.createTextNode("["+p+"]")}}},JsonML.isElement=function(a){return a instanceof Array&&"string"==typeof a[0]}}(),WaveDrom.AppendSaveAsDialog=function(a){"use strict";var b=document.getElementById("WaveDrom_Display_"+a);b.childNodes[0].addEventListener("contextmenu",function(c){var d=document.createElement("div");d.className="wavedromMenu",d.style.top=c.pageY+"px",d.style.left=c.pageX+"px";var e=document.createElement("ul"),f=document.createElement("li");f.innerHTML="Save as PNG",e.appendChild(f);var g=document.createElement("li");g.innerHTML="Save as SVG",e.appendChild(g),d.appendChild(e),document.body.appendChild(d),f.addEventListener("click",function(c){var e="";if(0!==a){var f=document.getElementById("WaveDrom_Display_0");e+=f.innerHTML.substring(166,f.innerHTML.indexOf('<g id="waves_0">'))}e=[b.innerHTML.slice(0,166),e,b.innerHTML.slice(166)].join("");var g="data:image/svg+xml;base64,"+btoa(e),i=new Image;i.src=g;var j=document.createElement("canvas");j.width=i.width,j.height=i.height;var k=j.getContext("2d");k.drawImage(i,0,0);var l=j.toDataURL("image/png"),m=document.createElement("a");m.href=l,m.download="wavedrom.png",m.click(),d.parentNode.removeChild(d),document.body.removeEventListener("mousedown",h,!1)},!1),g.addEventListener("click",function(c){var e="";if(0!==a){var f=document.getElementById("WaveDrom_Display_0");e+=f.innerHTML.substring(166,f.innerHTML.indexOf('<g id="waves_0">'))}e=[b.innerHTML.slice(0,166),e,b.innerHTML.slice(166)].join("");var g="data:image/svg+xml;base64,"+btoa(e),i=document.createElement("a");i.href=g,i.download="wavedrom.svg",i.click(),d.parentNode.removeChild(d),document.body.removeEventListener("mousedown",h,!1)},!1),d.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var h=function(a){var b=parseInt(d.style.left,10),c=parseInt(d.style.top,10);(a.pageX<b||a.pageX>b+d.offsetWidth||a.pageY<c||a.pageY>c+d.offsetHeight)&&(d.parentNode.removeChild(d),document.body.removeEventListener("mousedown",h,!1))};document.body.addEventListener("mousedown",h,!1),c.preventDefault()},!1)};