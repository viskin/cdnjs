!function(t){"use strict";var e=function(e,s){this.options=t.extend({},t.fn.combobox.defaults,s),this.$source=t(e),this.$container=this.setup(),this.$element=this.$container.find("input[type=text]"),this.$target=this.$container.find("input[type=hidden]"),this.$button=this.$container.find(".dropdown-toggle"),this.$menu=t(this.options.menu).appendTo("body"),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.shown=!1,this.selected=!1,this.refresh(),this.transferAttributes(),this.listen()};e.prototype=t.extend({},t.fn.typeahead.Constructor.prototype,{constructor:e,setup:function(){var e=t(this.options.template);return this.$source.before(e),this.$source.hide(),e},parse:function(){var e=this,s={},i=[],o=!1;return this.$source.find("option").each(function(){var n=t(this);return""==n.val()?void(e.options.placeholder=n.text()):(s[n.text()]=n.val(),i.push(n.text()),void(n.attr("selected")&&(o=n.html())))}),this.map=s,o&&(this.$element.val(o),this.$container.addClass("combobox-selected"),this.selected=!0),i},transferAttributes:function(){this.options.placeholder=this.$source.attr("data-placeholder")||this.options.placeholder,this.$element.attr("placeholder",this.options.placeholder),this.$target.prop("name",this.$source.prop("name")),this.$element.attr("required",this.$source.attr("required")),this.$element.attr("rel",this.$source.attr("rel")),this.$element.attr("title",this.$source.attr("title")),this.$element.attr("class",this.$source.attr("class"))},toggle:function(){this.$container.hasClass("combobox-selected")?(this.clearTarget(),this.triggerChange(),this.clearElement()):this.shown?this.hide():(this.clearElement(),this.lookup())},clearElement:function(){this.$element.val("").focus()},clearTarget:function(){this.$source.val(""),this.$target.val(""),this.$container.removeClass("combobox-selected"),this.selected=!1},triggerChange:function(){this.$source.trigger("change")},refresh:function(){this.source=this.parse(),this.options.items=this.source.length},select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).trigger("change"),this.$source.val(this.map[t]).trigger("change"),this.$target.val(this.map[t]).trigger("change"),this.$container.addClass("combobox-selected"),this.selected=!0,this.hide()},lookup:function(t){return this.query=this.$element.val(),this.process(this.source)},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this)),this.$button.on("click",t.proxy(this.toggle,this))},keyup:function(t){switch(t.keyCode){case 40:case 39:case 38:case 37:case 36:case 35:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.clearTarget(),this.lookup()}t.stopPropagation(),t.preventDefault()},blur:function(t){var e=this;this.focused=!1;var s=this.$element.val();this.selected||""==s||(this.$element.val(""),this.$source.val("").trigger("change"),this.$target.val("").trigger("change")),!this.mousedover&&this.shown&&setTimeout(function(){e.hide()},200)},mouseleave:function(t){this.mousedover=!1}}),t.fn.combobox=function(s){return this.each(function(){var i=t(this),o=i.data("combobox"),n="object"==typeof s&&s;o||i.data("combobox",o=new e(this,n)),"string"==typeof s&&o[s]()})},t.fn.combobox.defaults={template:'<div class="combobox-container"><input type="hidden" /><input type="text" autocomplete="off" /><span class="add-on btn dropdown-toggle" data-dropdown="dropdown"><span class="caret"/><span class="combobox-clear"><i class="icon-remove"/></span></span></div>',menu:'<ul class="typeahead typeahead-long dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},t.fn.combobox.Constructor=e}(window.jQuery);
//# sourceMappingURL=./bootstrap-combobox.min.js.map