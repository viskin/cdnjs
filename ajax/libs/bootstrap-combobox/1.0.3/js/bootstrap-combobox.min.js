!function(t){"use strict";var e=function(e,s){this.options=t.extend({},t.fn.combobox.defaults,s),this.$container=this.setup(e),this.$element=this.$container.find("input"),this.$button=this.$container.find(".dropdown-toggle"),this.$target=this.$container.find("select"),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.$menu=t(this.options.menu).appendTo("body"),this.placeholder=this.options.placeholder||this.$target.attr("data-placeholder"),this.$element.attr("placeholder",this.placeholder),this.shown=!1,this.selected=!1,this.refresh(),this.listen()};e.prototype=t.extend({},t.fn.typeahead.Constructor.prototype,{constructor:e,setup:function(e){var s=t(e),i=t(this.options.template);return s.before(i),s.detach(),i.append(s),i},parse:function(){var e={},s=[],i=!1;return this.$target.find("option").each(function(){var o=t(this);e[o.text()]=o.val(),s.push(o.text()),o.attr("selected")&&(i=o.html())}),this.map=e,i&&(this.$element.val(i),this.$container.addClass("combobox-selected"),this.selected=!0),s},toggle:function(){this.$container.hasClass("combobox-selected")?(this.clearTarget(),this.$element.val("").focus()):this.shown?this.hide():(this.$element.val("").focus(),this.lookup())},clearTarget:function(){this.$target.val(""),this.$container.removeClass("combobox-selected"),this.selected=!1,this.$target.trigger("change")},refresh:function(){this.source=this.parse(),this.options.items=this.source.length},select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(t),this.$container.addClass("combobox-selected"),this.$target.val(this.map[t]),this.$target.trigger("change"),this.selected=!0,this.hide()},lookup:function(e){var s,i=this;return this.query=this.$element.val(),s=t.grep(this.source,function(t){return i.matcher(t)?t:void 0}),s=this.sorter(s),s.length?this.render(s.slice(0,this.options.items)).show():this.shown?this.hide():this},listen:function(){this.$element.on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keypress,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)),this.$button.on("click",t.proxy(this.toggle,this))},keyup:function(t){switch(t.keyCode){case 40:case 39:case 38:case 37:case 36:case 35:case 16:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.clearTarget(),this.refresh(),this.lookup()}t.stopPropagation(),t.preventDefault()},blur:function(t){var e=this;t.stopPropagation(),t.preventDefault();var s=this.$element.val();this.selected||""==s||(this.$element.val(""),this.$target.val("").trigger("change")),this.shown&&setTimeout(function(){e.hide()},150)}}),t.fn.combobox=function(s){return this.each(function(){var i=t(this),o=i.data("combobox"),n="object"==typeof s&&s;o||i.data("combobox",o=new e(this,n)),"string"==typeof s&&o[s]()})},t.fn.combobox.defaults={template:'<div class="combobox-container"><input type="text" autocomplete="off" /><span class="add-on btn dropdown-toggle" data-dropdown="dropdown"><span class="caret"/><span class="combobox-clear"><i class="icon-remove"/></span></span></div>',menu:'<ul class="typeahead typeahead-long dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',placeholder:null},t.fn.combobox.Constructor=e}(window.jQuery);
//# sourceMappingURL=./bootstrap-combobox.min.js.map