function calendarHeatmap(){function t(){function l(){var l=d3.select(t.selector()).append("svg").attr("width",e).attr("class","calendar-heatmap").attr("height",n).style("padding","36px");if(h=l.selectAll(".day-cell").data(g),h.enter().append("rect").attr("class","day-cell").attr("width",c).attr("height",c).attr("fill","gray").attr("x",function(t,e){var n=moment(t),a=n.week()-x.week()+x.weeksInYear()*(n.weekYear()-x.weekYear());return a*(c+d)}).attr("y",function(t,e){return i+t.getDay()*(c+d)}),"function"==typeof y&&h.on("click",function(t){var e=m(t);y({date:t,count:e})}),t.tooltipEnabled()&&h.on("mouseover",function(t,e){p=d3.select("body").append("div").attr("class","day-cell-tooltip").html(s(t)).style("left",function(){return Math.floor(e/7)*c}).style("top",function(){return t.getDay()*(c+d)+3*i})}).on("mouseout",function(t,e){p.remove()}),t.legendEnabled()){for(var u=[b(0)],f=3;f>0;f--)u.push(b(w/f));var M=l.append("g");M.selectAll(".calendar-heatmap-legend").data(u).enter().append("rect").attr("class","calendar-heatmap-legend").attr("width",c).attr("height",c).attr("x",function(t,n){return e-a+13*(n+1)}).attr("y",n+d).attr("fill",function(t){return t}),M.append("text").attr("class","calendar-heatmap-legend-text").attr("x",e-a-13).attr("y",n+c).text("Less"),M.append("text").attr("class","calendar-heatmap-legend-text").attr("x",e-a+d+13*(u.length+1)).attr("y",n+c).text("More")}h.exit().remove();l.selectAll(".month").data(v).enter().append("text").attr("class","month-name").style().text(function(t){return r[t.getMonth()]}).attr("x",function(t,e){var n=0;return g.find(function(e,a){return n=a,moment(t).isSame(e,"month")&&moment(t).isSame(e,"year")}),Math.floor(n/7)*(c+d)}).attr("y",0);o.forEach(function(t,e){e%2&&l.append("text").attr("class","day-initial").attr("transform","translate(-8,"+(c+d)*(e+1)+")").style("text-anchor","middle").attr("dy","2").text(t)})}function s(t){var e=moment(t).format("ddd, MMM Do YYYY"),n=m(t);return"<span><strong>"+(n?n:"No")+" contribution"+(1===n?"":"s")+"</strong> on "+e+"</span>"}function m(e){var n=0,a=t.data().find(function(t,n){return moment(t.date).isSame(e,"day")});return a&&(n=a.count),n}d3.select(t.selector()).selectAll("svg.calendar-heatmap").remove();var p,h,g=d3.time.days(f,u),v=d3.time.months(moment(f).startOf("month").toDate(),u),x=moment(g[0]),w=d3.max(t.data(),function(t){return t.count}),b=d3.scale.linear().range(t.colorRange()).domain([0,w]);l(),h.filter(function(e){var n=t.data().some(function(t,n){return moment(e).isSame(t.date,"day")});return n}).attr("fill",function(e,n){return b(t.data()[n].count)})}var e=750,n=110,a=150,r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["S","M","T","W","T","F","S"],l="body",c=11,d=2,i=6,u=moment().endOf("day").toDate(),f=moment().startOf("day").subtract(1,"year").toDate(),s=[],m=["#D8E6E7","#218380"],p=!0,h=!0,y=null;return t.data=function(e){return arguments.length?(s=e,t):s},t.selector=function(e){return arguments.length?(l=e,t):l},t.colorRange=function(e){return arguments.length?(m=e,t):m},t.tooltipEnabled=function(e){return arguments.length?(p=e,t):p},t.legendEnabled=function(e){return arguments.length?(h=e,t):h},t.onClick=function(e){return arguments.length?(y=e,t):y()},t}Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),a=n.length>>>0,r=arguments[1],o=0;a>o;o++)if(e=n[o],t.call(r,e,o,n))return e});
//# sourceMappingURL=./calendar-heatmap.min.js.map