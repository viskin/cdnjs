!function(){this.Processing=function e(t,n){"string"==typeof t&&(t=document.getElementById(t));var r=e.build(t);return n&&r.init(n),r},Processing.lib={};var ajax=function(e){var t=new window.XMLHttpRequest;return t?(t.open("GET",e+"?t="+(new Date).getTime(),!1),t.send(null),t.responseText):!1},init=function(){for(var e=document.getElementsByTagName("canvas"),t=0,n=e.length;n>t;t++){var r=e[t].getAttribute("datasrc");r&&Processing(e[t],ajax(r))}};document.addEventListener("DOMContentLoaded",function(){init()},!1),Processing.debug=function(){},Processing.parse=function(e,t){e=e.replace(/\/\/ .*\n/g,"\n"),e=e.replace(/([^\s])%([^\s])/g,"$1 % $2"),e=e.replace(/(\s*=\s*|\(*\s*)frameRate(\s*\)+?|\s*;)/,"$1p.FRAME_RATE$2"),e=e.replace(/(?:static )?(\w+(?:\[\])* )(\w+)\s*(\([^\)]*\)\s*\{)/g,function(e,t,n,r){return"if"===n||"for"===n||"while"===n?e:"Processing."+n+" = function "+n+r}),e=e.replace(/import \(|import\(/g,"p.Import("),e=e.replace(/\.length\(\)/g,".length"),e=e.replace(/([\(,]\s*)(\w+)((?:\[\])+| )\s*(\w+\s*[\),])/g,"$1$4"),e=e.replace(/([\(,]\s*)(\w+)((?:\[\])+| )\s*(\w+\s*[\),])/g,"$1$4"),e=e.replace(/new (\w+)((?:\[([^\]]*)\])+)/g,function(e,t,n){return"new ArrayList("+n.replace(/\[\]/g,"[0]").slice(1,-1).split("][").join(", ")+")"}),e=e.replace(/(?:static )?\w+\[\]\s*(\w+)\[?\]?\s*=\s*\{.*?\};/g,function(e){return e.replace(/\{/g,"[").replace(/\}/g,"]")});for(var n=/(\n\s*(?:int|float)(?!\[\])*(?:\s*|[^\(;]*?,\s*))([a-zA-Z]\w*)\s*(,|;)/i;n.test(e);)e=e.replace(new RegExp(n),function(e,t,n,r){return t+" "+n+" = 0"+r});e=e.replace(/(?:static\s+)?(?:final\s+)?(\w+)((?:\[\])+| ) *(\w+)\[?\]?(\s*[=,;])/g,function(e,t,n,r,o){return"return"===t?e:"var "+r+o}),e=e.replace(/\=\s*\{((.|\s)*?)\};/g,function(e,t){return"= ["+t.replace(/\{/g,"[").replace(/\}/g,"]")+"]"}),e=e.replace(/super\(/g,"superMethod(");var r=["int","float","boolean","String","byte","double","long"],o=function(e,t,n,o,a){r.push(t);var p="";return o=o.replace(/final\s+var\s+(\w+\s*=\s*.*?;)/g,function(e,n){return p+=" "+t+"."+n,""}),"function "+t+"() {with(this){\n "+(n?"var __self=this;function superMethod(){extendClass(__self,arguments,"+n+");}\n":"")+o.replace(/\s*,\s*/g,";\n  this.").replace(/\b(var |final |public )+\s*/g,"this.").replace(/\b(var |final |public )+\s*/g,"this.").replace(/this\.(\w+);/g,"this.$1 = null;")+(n?"extendClass(this, "+n+");\n":"")+"<CLASS "+t+" "+p+">"+("string"==typeof a?a:t+"(")},a=function(e){for(var t=e,n=0,r=1,o=0;r!==o;){var a=t.indexOf("{"),p=t.indexOf("}");p>a&&-1!==a?(r++,t=t.slice(a+1),n+=a+1):(o++,t=t.slice(p+1),n+=p+1)}return e.slice(0,n-1)},p=/(?:public |abstract |static )*class (\w+)\s*(?:extends\s*(\w+)\s*)?\{\s*((?:.|\n)*?)\b\1\s*\(/g,i=/(?:public |abstract |static )*class (\w+)\s*(?:extends\s*(\w+)\s*)?\{\s*((?:.|\n)*?)(Processing)/g;e=e.replace(p,o),e=e.replace(i,o);for(var u,c=/<CLASS (\w+) (.*?)>/;u=e.match(c);){var s=RegExp.leftContext,l=RegExp.rightContext,h=a(l),g=u[1],f=u[2]||"";l=l.slice(h.length+1),h=h.replace(new RegExp("\\b"+g+"\\(([^\\)]*?)\\)\\s*{","g"),function(e,t){t=t.split(/,\s*?/),t[0].match(/^\s*$/)&&t.shift();for(var n="if ( arguments.length === "+t.length+" ) {\n",r=0;r<t.length;r++)n+=" var "+t[r]+" = arguments["+r+"];\n";return n}),h=h.replace(/(?:public )?Processing.\w+ = function (\w+)\((.*?)\)/g,function(e,t,n){return"ADDMETHOD(this, '"+t+"', function("+n+")"});for(var d,m=/ADDMETHOD([\s\S]*?\{)/,x="";d=h.match(m);){var C=RegExp.leftContext,v=RegExp.rightContext,S=a(v);x+="addMethod"+d[1]+S+"});",h=C+v.slice(S.length+1)}h=x+h,e=s+h+"\n}}"+f+l}e=e.replace(/Processing.\w+ = function addMethod/g,"addMethod"),e.match(/size\((?:.+),(?:.+),\s*OPENGL\);/)&&(t.use3DContext=!0),e=e.replace(/\(int\)/g,"0|"),e=e.replace(new RegExp("\\(("+r.join("|")+")(\\[\\])*\\)","g"),""),e=e.replace(/('[a-zA-Z0-9]')/g,"$1.charCodeAt(0)");var A=function(e){var t=[];return e.replace(/(..)/g,function(e){t.push(parseInt(e,16))}),t};return e=e.replace(/#([a-f0-9]{6})/gi,function(e,t){var n=A(t);return"DefaultColor("+n[0]+","+n[1]+","+n[2]+")"}),e=e.replace(/(\d+)f/g,"$1")},Processing.build=function buildProcessing(curElement){function getImage(e){if("string"==typeof e)return document.getElementById(e);if(e.img)return e.img;(e.getContext||e.canvas)&&(e.pixels=e.getContext("2d").createImageData?e.getContext("2d").createImageData(e.width,e.height):e.getContext("2d").getImageData(0,0,e.width,e.height));for(var t=0,n=e.pixels.length;n>t;t++){var r=4*t,o=(e.pixels[t]||"rgba(0,0,0,1)").slice(5,-1).split(",");e.data[r+0]=parseInt(o[0],10),e.data[r+1]=parseInt(o[1],10),e.data[r+2]=parseInt(o[2],10),e.data[r+3]=100*parseFloat(o[3])}var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var p=a.getContext("2d");return p.putImageData(e.pixels,0,0),e.canvas=a,e}var p={},curElement=curElement,curContext;p.use3DContext=!1;for(var i in Processing.lib)p[i]=window.Processing.lib[i];p.name="Processing.js Instance",p.PI=Math.PI,p.TWO_PI=2*p.PI,p.HALF_PI=p.PI/2,p.MAX_FLOAT=3.4028235e38,p.MIN_FLOAT=-3.4028235e38,p.MAX_INT=2147483647,p.MIN_INT=-2147483648,p.P3D=3,p.CORNER=0,p.RADIUS=1,p.CENTER_RADIUS=1,p.CENTER=2,p.POLYGON=2,p.QUADS=5,p.TRIANGLES=6,p.POINTS=7,p.LINES=8,p.TRIANGLE_STRIP=9,p.TRIANGLE_FAN=4,p.QUAD_STRIP=3,p.CORNERS=10,p.CLOSE=!0,p.RGB=1,p.HSB=2,p.OPENGL="OPENGL",p.FRAME_RATE=0,p.focused=!0,p.ARROW="default",p.CROSS="crosshair",p.HAND="pointer",p.MOVE="move",p.TEXT="text",p.WAIT="wait",p.NOCURSOR="url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",p.ALPHA_MASK=4278190080,p.RED_MASK=16711680,p.GREEN_MASK=65280,p.BLUE_MASK=255,p.REPLACE=0,p.BLEND=1,p.ADD=2,p.SUBTRACT=4,p.LIGHTEST=8,p.DARKEST=16,p.DIFFERENCE=32,p.EXCLUSION=64,p.MULTIPLY=128,p.SCREEN=256,p.OVERLAY=512,p.HARD_LIGHT=1024,p.SOFT_LIGHT=2048,p.DODGE=4096,p.BURN=8192,p.PRECISIONB=15,p.PRECISIONF=1<<p.PRECISIONB,p.PREC_MAXVAL=p.PRECISIONF-1,p.PREC_ALPHA_SHIFT=24-p.PRECISIONB,p.PREC_RED_SHIFT=16-p.PRECISIONB,p.ROUND="round",p.SQUARE="butt",p.PROJECT="square",p.MITER="miter",p.BEVEL="bevel",p.CENTER=88888880,p.CODED=88888888,p.UP=88888870,p.RIGHT=88888871,p.DOWN=88888872,p.LEFT=88888869,p.codedKeys=[69,70,71,72];var online=!0,doFill=!0,doStroke=!0,loopStarted=!1,hasBackground=!1,doLoop=!0,looping=0,curRectMode=p.CORNER,curEllipseMode=p.CENTER,inSetup=!1,inDraw=!1,curBackground="rgba( 204, 204, 204, 1 )",curFrameRate=1e3,curCursor=p.ARROW,oldCursor=document.body.style.cursor,curMsPerFrame=1,curShape=p.POLYGON,curShapeCount=0,curvePoints=[],curTightness=0,opacityRange=255,redRange=255,greenRange=255,blueRange=255,pathOpen=!1,mousePressed=!1,keyPressed=!1,curColorMode=p.RGB,curTint=-1,curTextSize=12,curTextFont="Arial",getLoaded=!1,start=(new Date).getTime(),timeSinceLastFPS=start,framesSinceLastFPS=0,firstX,firstY,secondX,secondY,prevX,prevY,styleArray=new Array(0);p.ln="",p.glyphTable={},p.pmouseX=0,p.pmouseY=0,p.mouseX=0,p.mouseY=0,p.mouseButton=0,p.mouseDown=!1,p.mouseClicked=void 0,p.mouseDragged=void 0,p.mouseMoved=void 0,p.mousePressed=void 0,p.mouseReleased=void 0,p.keyPressed=void 0,p.keyReleased=void 0,p.draw=void 0,p.setup=void 0,p.width=curElement.width-0,p.height=curElement.height-0,p.frameCount=0,p.split=function(e,t){return e.split(t)},p.splitTokens=function(e,t){1===arguments.length&&(t="\n	\r\f "),t="["+t+"]";for(var n=new Array(0),r=0,o=e.search(t);o>=0;)0===o?e=e.substring(1):(n[r]=e.substring(0,o),r++,e=e.substring(o)),o=e.search(t);return e.length>0&&(n[r]=e),0===n.length&&(n=void 0),n},p.append=function(e,t){return e[e.length]=t,e},p.concat=function(e,t){return e.concat(t)},p.splice=function(e,t,n){if(0===e.length&&0===t.length)return e;if(t instanceof Array)for(var r=0,o=n;r<t.length;o++,r++)e.splice(o,0,t[r]);else e.splice(n,0,t);return e},p.subset=function(e,t,n){return 2===arguments.length?p.subset(e,t,e.length-t):3===arguments.length?e.slice(t,t+n):void 0},p.join=function(e,t){return e.join(t)},p.shorten=function(e){for(var t=new Array(0),n=e.length,r=0;n>r;r++)t[r]=e[r];return t.pop(),t},p.expand=function(e,t){for(var n=new Array(0),r=e.length,o=0;r>o;o++)n[o]=e[o];return 1===arguments.length?n.length*=2:2===arguments.length&&(n.length=t),n},p.ArrayList=function e(t,n,r){var o=new Array(0|t);if(n)for(var a=0;t>a;a++){o[a]=[];for(var p=0;n>p;p++)for(var i=o[a][p]=r?new Array(r):0,u=0;r>u;u++)i[u]=0}else for(var c=0;t>c;c++)o[c]=0;return o.get=function(e){return this[e]},o.add=function(e){return this.push(e)},o.size=function(){return this.length},o.clear=function(){this.length=0},o.remove=function(e){return this.splice(e,1)},o.isEmpty=function(){return!this.length},o.clone=function(){for(var n=new e(t),r=0;t>r;r++)n[r]=this[r];return n},o},p.reverse=function(e){return e.reverse()},p.rgbaToInt=function(e){var t=/\(([^\)]+)\)/.exec(e).slice(1,2)[0].split(",");return 255*t[3]<<24|t[0]<<16|t[1]<<8|t[2]},p.mix=function(e,t,n){return e+((t-e)*n>>8)},p.peg=function(e){return 0>e?0:e>255?255:e},p.modes={replace:function(e,t){return p.rgbaToInt(t)},blend:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.mix(n&p.RED_MASK,r&p.RED_MASK,o)&p.RED_MASK|p.mix(n&p.GREEN_MASK,r&p.GREEN_MASK,o)&p.GREEN_MASK|p.mix(n&p.BLUE_MASK,r&p.BLUE_MASK,o)},add:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|Math.min((n&p.RED_MASK)+((r&p.RED_MASK)>>8)*o,p.RED_MASK)&p.RED_MASK|Math.min((n&p.GREEN_MASK)+((r&p.GREEN_MASK)>>8)*o,p.GREEN_MASK)&p.GREEN_MASK|Math.min((n&p.BLUE_MASK)+((r&p.BLUE_MASK)*o>>8),p.BLUE_MASK)},subtract:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|Math.max((n&p.RED_MASK)-((r&p.RED_MASK)>>8)*o,p.GREEN_MASK)&p.RED_MASK|Math.max((n&p.GREEN_MASK)-((r&p.GREEN_MASK)>>8)*o,p.BLUE_MASK)&p.GREEN_MASK|Math.max((n&p.BLUE_MASK)-((r&p.BLUE_MASK)*o>>8),0)},lightest:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|Math.max(n&p.RED_MASK,((r&p.RED_MASK)>>8)*o)&p.RED_MASK|Math.max(n&p.GREEN_MASK,((r&p.GREEN_MASK)>>8)*o)&p.GREEN_MASK|Math.max(n&p.BLUE_MASK,(r&p.BLUE_MASK)*o>>8)},darkest:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.mix(n&p.RED_MASK,Math.min(n&p.RED_MASK,((r&p.RED_MASK)>>8)*o),o)&p.RED_MASK|p.mix(n&p.GREEN_MASK,Math.min(n&p.GREEN_MASK,((r&p.GREEN_MASK)>>8)*o),o)&p.GREEN_MASK|p.mix(n&p.BLUE_MASK,Math.min(n&p.BLUE_MASK,(r&p.BLUE_MASK)*o>>8),o)},difference:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=a>c?a-c:c-a,g=i>s?i-s:s-i,f=u>l?u-l:l-u;return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))},exclusion:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=a+c-(a*c>>7),g=i+s-(i*s>>7),f=u+l-(u*l>>7);return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))},multiply:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=a*c>>8,g=i*s>>8,f=u*l>>8;return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))},screen:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=255-((255-a)*(255-c)>>8),g=255-((255-i)*(255-s)>>8),f=255-((255-u)*(255-l)>>8);return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))},hard_light:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=128>c?a*c>>7:255-((255-a)*(255-c)>>7),g=128>s?i*s>>7:255-((255-i)*(255-s)>>7),f=128>l?u*l>>7:255-((255-u)*(255-l)>>7);return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))},soft_light:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=(a*c>>7)+(a*a>>8)-(a*a*c>>15),g=(i*s>>7)+(i*i>>8)-(i*i*s>>15),f=(u*l>>7)+(u*u>>8)-(u*u*l>>15);return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))},overlay:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=128>a?a*c>>7:255-((255-a)*(255-c)>>7),g=128>i?i*s>>7:255-((255-i)*(255-s)>>7),f=128>u?u*l>>7:255-((255-u)*(255-l)>>7);return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))},dodge:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=255===c?255:p.peg((a<<8)/(255-c)),g=255===s?255:p.peg((i<<8)/(255-s)),f=255===l?255:p.peg((u<<8)/(255-l));return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))},burn:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),o=(r&p.ALPHA_MASK)>>>24,a=(n&p.RED_MASK)>>16,i=(n&p.GREEN_MASK)>>8,u=n&p.BLUE_MASK,c=(r&p.RED_MASK)>>16,s=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=0===c?0:255-p.peg((255-a<<8)/c),g=0===s?0:255-p.peg((255-i<<8)/s),f=0===l?0:255-p.peg((255-u<<8)/l);return Math.min(((n&p.ALPHA_MASK)>>>24)+o,255)<<24|p.peg(a+((h-a)*o>>8))<<16|p.peg(i+((g-i)*o>>8))<<8|p.peg(u+((f-u)*o>>8))}},p.color=function(e,t,n,r){function o(e,t,n){e=e/redRange*360,t=t/greenRange*100,n=n/blueRange*100;var r=Math.round(n/100*255);if(0===t)return[r,r,r];var o=e%360,a=o%60,p=Math.round(n*(100-t)/1e4*255),i=Math.round(n*(6e3-t*a)/6e5*255),u=Math.round(n*(6e3-t*(60-a))/6e5*255);switch(Math.floor(o/60)){case 0:return[r,u,p];case 1:return[i,r,p];case 2:return[p,r,u];case 3:return[p,i,r];case 4:return[u,p,r];case 5:return[r,p,i]}}function a(e,t){return Math.round(255*(e/t))}var i,u,c,s,l;if(3===arguments.length)l=p.color(e,t,n,opacityRange);else if(4===arguments.length){var h=r/opacityRange;h=isNaN(h)?1:h,curColorMode===p.HSB?(s=o(e,t,n),i=s[0],u=s[1],c=s[2]):(i=a(e,redRange),u=a(t,greenRange),c=a(n,blueRange)),l="rgba("+i+","+u+","+c+","+h+")"}else if("string"==typeof e){if(l=e,2===arguments.length){var g=l.split(",");g[3]=t/opacityRange+")",l=g.join(",")}}else if(2===arguments.length)l=p.color(e,e,e,t);else if("number"==typeof e&&256>e&&e>=0)l=p.color(e,e,e,opacityRange);else if("number"==typeof e){var f=0;f=0>e?4294967296- -1*e:e;var d=Math.floor(f%4294967296/16777216),m=Math.floor(f%16777216/65536),x=Math.floor(f%65536/256),C=f%256;l=p.color(m,x,C,d)}else l=p.color(redRange,greenRange,blueRange,opacityRange);return l};var verifyChannel=function(e){return e.constructor===Array?e:p.color(e)};p.red=function(e){return parseInt(verifyChannel(e).slice(5),10)},p.green=function(e){return parseInt(verifyChannel(e).split(",")[1],10)},p.blue=function(e){return parseInt(verifyChannel(e).split(",")[2],10)},p.alpha=function(e){return parseInt(255*parseFloat(verifyChannel(e).split(",")[3]),10)},p.lerpColor=function(e,t,n){var r=p.color(e).split(","),o=parseInt(r[0].split("(")[1],10),a=parseInt(r[1],10),i=parseInt(r[2],10),u=parseFloat(r[3].split(")")[0],10),c=p.color(t).split(","),s=parseInt(c[0].split("(")[1],10),l=parseInt(c[1],10),h=parseInt(c[2],10),g=parseFloat(c[3].split(")")[0],10),f=parseInt(p.lerp(o,s,n),10),d=parseInt(p.lerp(a,l,n),10),m=parseInt(p.lerp(i,h,n),10),x=parseFloat(p.lerp(u,g,n),10),C="rgba("+f+","+d+","+m+","+x+")";return C},p.DefaultColor=function(e,t,n){var r=curColorMode;curColorMode=p.RGB;var o=p.color(e/255*redRange,t/255*greenRange,n/255*blueRange);return curColorMode=r,o},p.colorMode=function(e,t,n,r,o){curColorMode=e,arguments.length>=4&&(redRange=t,greenRange=n,blueRange=r),5===arguments.length&&(opacityRange=o),2===arguments.length&&p.colorMode(e,t,t,t,t)},p.blendColor=function(e,t,n){var r=0;switch(n){case p.REPLACE:r=p.modes.replace(e,t);break;case p.BLEND:r=p.modes.blend(e,t);break;case p.ADD:r=p.modes.add(e,t);break;case p.SUBTRACT:r=p.modes.subtract(e,t);break;case p.LIGHTEST:r=p.modes.lightest(e,t);break;case p.DARKEST:r=p.modes.darkest(e,t);break;case p.DIFFERENCE:r=p.modes.difference(e,t);break;case p.EXCLUSION:r=p.modes.exclusion(e,t);break;case p.MULTIPLY:r=p.modes.multiply(e,t);break;case p.SCREEN:r=p.modes.screen(e,t);break;case p.HARD_LIGHT:r=p.modes.hard_light(e,t);break;case p.SOFT_LIGHT:r=p.modes.soft_light(e,t);break;case p.OVERLAY:r=p.modes.overlay(e,t);break;case p.DODGE:r=p.modes.dodge(e,t);break;case p.BURN:r=p.modes.burn(e,t)}return r},p.translate=function(e,t){curContext.translate(e,t)},p.scale=function(e,t){curContext.scale(e,t||e)},p.rotate=function(e){curContext.rotate(e)},p.pushMatrix=function(){curContext.save()},p.popMatrix=function(){curContext.restore()},p.ortho=function(){},p.pushStyle=function(){curContext.save(),p.pushMatrix();var e={doFill:doFill,doStroke:doStroke,curTint:curTint,curRectMode:curRectMode,curColorMode:curColorMode,redRange:redRange,blueRange:blueRange,greenRange:greenRange,opacityRange:opacityRange,curTextFont:curTextFont,curTextSize:curTextSize};styleArray.push(e)},p.popStyle=function(){var e=styleArray.pop();if(!e)throw"Too many popStyle() without enough pushStyle()";curContext.restore(),p.popMatrix(),doFill=e.doFill,doStroke=e.doStroke,curTint=e.curTint,curRectMode=e.curRectmode,curColorMode=e.curColorMode,redRange=e.redRange,blueRange=e.blueRange,greenRange=e.greenRange,opacityRange=e.opacityRange,curTextFont=e.curTextFont,curTextSize=e.curTextSize},p.year=function(){return(new Date).getYear()+1900},p.month=function(){return(new Date).getMonth()},p.day=function(){return(new Date).getDay()},p.hour=function(){return(new Date).getHours()},p.minute=function(){return(new Date).getMinutes()},p.second=function(){return(new Date).getSeconds()},p.millis=function(){return(new Date).getTime()-start},p.noLoop=function(){doLoop=!1},p.redraw=function(){hasBackground&&p.background();var e=((new Date).getTime()-timeSinceLastFPS)/1e3;framesSinceLastFPS++;var t=framesSinceLastFPS/e;e>.5&&(timeSinceLastFPS=(new Date).getTime(),framesSinceLastFPS=0,p.FRAME_RATE=t),p.frameCount++,inDraw=!0,p.use3DContext?(curContext.clear(curContext.COLOR_BUFFER_BIT),p.draw()):(p.pushMatrix(),p.draw(),p.popMatrix()),inDraw=!1},p.loop=function(){loopStarted||(looping=window.setInterval(function(){try{try{p.focused=document.hasFocus()}catch(e){}p.redraw()}catch(t){throw window.clearInterval(looping),t}},curMsPerFrame),loopStarted=!0)},p.frameRate=function(e){curFrameRate=e,curMsPerFrame=1e3/curFrameRate},p.exit=function(){window.clearInterval(looping)},p.cursor=function(e){curCursor=document.body.style.cursor=e},p.noCursor=function(){curCursor=document.body.style.cursor=p.NOCURSOR},p.link=function(e){window.location=e},p.beginDraw=function(){},p.endDraw=function(){},p.Import=function(){};var contextMenu=function(e){e.preventDefault(),e.stopPropagation()};p.disableContextMenu=function(){curElement.addEventListener("contextmenu",contextMenu,!1)},p.enableContextMenu=function(){curElement.removeEventListener("contextmenu",contextMenu,!1)},p.unbinary=function(e){var t=new RegExp("^[0|1]{8}$"),n=0;if(isNaN(e))throw"NaN_Err";if(1===arguments.length||8===e.length){if(t.test(e)){for(i=0;8>i;i++)n+=Math.pow(2,i)*parseInt(e.charAt(7-i),10);return n+""}throw"notBinary: the value passed into unbinary was not an 8 bit binary number"}throw"longErr"},p.nfs=function(e,t,n){var r,o;if("object"==typeof e){r=new Array(0),o=e.length;for(var a=0;o>a;a++)r[a]=p.nfs(e[a],t,n)}else if(3===arguments.length){var i=!1;0>e&&(i=!0),r=""+Math.abs(e);for(var u=(""+Math.floor(Math.abs(e))).length,c=t-u;c>0;)r="0"+r,c--;var s=(""+Math.abs(e)).length-u-1;for(-1===s&&n>0&&(r+="."),c=-1!==s?n-s:-1===s&&n>0?n:0;c>0;)r+="0",c--;r=(i?"-":" ")+r}else 2===arguments.length&&(r=p.nfs(e,t,0));return r},p.nfc=function(e,t){var n,r=t>=0?t:0;if("object"==typeof e){n=new Array(0);for(var o=0;o<e.length;o++)n[o]=p.nfc(e[o],r)}else if(2===arguments.length){var a=p.nfs(e,0,r),i=new Array(0);i=a.split(".");for(var u=i[0],c=i.length>1?"."+i[1]:"",s=/(\d+)(\d{3})/;s.test(u);)u=u.replace(s,"$1,$2");n=u+c}else 1===arguments.length&&(n=p.nfc(e,0));return n},p.decimalToHex=function(e,t){t="undefined"==typeof t||null===t?t=8:t;for(var n=Number(e).toString(16);n.length<t;)n="0"+n;return n},p.colorRGB=function(e){var t=/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?(\d{0,3})\)$/i,n=e.replace(t,"$4"),r=e.replace(t,"$1"),o=e.replace(t,"$2"),a=e.replace(t,"$3");return(""+Number(n).toString(16)+Number(r).toString(16)+Number(o).toString(16)+Number(a).toString(16)).toUpperCase()},p.hex=function(e,t){var n="",r=/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?(\d{0,3})\)$/i,o=/^\d+$/;if(2===arguments.length)o.test(e)?n=p.decimalToHex(e,t):r.test(e)&&(n=p.colorRGB(e),n=n.substring(n.length-t,n.length));else if(1===arguments.length)if(o.test(e))n=p.decimalToHex(e);else if(r.test(e))n=p.colorRGB(e);else if(0===e.indexOf("#")){if(e.length<7)throw"Not Hex format: the value passed into hex was not in the format #FFFFFF";for(e=e.slice(1).toUpperCase();e.length<8;)e="FF"+e;n=e}return n},p.unhex=function(e){for(var t=0,n=1,r=0,o=e.length-1,a=o;a>=0;a--){try{switch(e[a]){case"0":r=0;break;case"1":r=1;break;case"2":r=2;break;case"3":r=3;break;case"4":r=4;break;case"5":r=5;break;case"6":r=6;break;case"7":r=7;break;case"8":r=8;break;case"9":r=9;break;case"A":case"a":r=10;break;case"B":case"b":r=11;break;case"C":case"c":r=12;break;case"D":case"d":r=13;break;case"E":case"e":r=14;break;case"F":case"f":r=15;break;default:return 0}t+=r*n,n*=16}catch(p){Processing.debug(p)}t>2147483647&&(t-=4294967296)}return t},p.loadStrings=function(e){return ajax(e).split("\n")},p.nf=function(e,t){for(var n=""+e,r=t-n.length;r>0;r--)n="0"+n;return n},p.nfp=function(e,t,n){var r=String(e);if(arguments.length<3){if(e>0){for(;r.length<t;)r="0"+r;return r="+"+r}for(r=r.slice(1);r.length<t;)r="0"+r;return r="-"+r}if(3===arguments.length){var o,a,p=r.indexOf(".");if(e>0){for(o=r.slice(0,p),a=r.slice(p+1,r.length);o.length<t;)o="0"+o;for(o="+"+o;a.length<n;)a+="0";return o+"."+a}for(o=r.slice(1,p),a=r.slice(p+1,r.length);o.length<t;)o="0"+o;for(o="-"+o;a.length<n;)a+="0";return o+"."+a}},p.matchAll=function(e,t){var n,r=0,o=[],a=new RegExp(t,"g");for(n=o[r]=a.exec(e);n;)r++,n=o[r]=a.exec(e);return o.slice(0,r)},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},p.match=function(e,t){return e.match(t)},p.lnPrinted=function(){},p.printed=function(){},p.println=function(){if(arguments.callee.caller){var e=arguments.callee.caller.name.toString();p.ln=arguments.length>1&&"print"!==e?arguments:arguments[0],"print"===e?p.printed(arguments):p.lnPrinted()}},p.str=function(e){return e+""},p.print=function(){p.println(arguments[0])},p.char=function(e){return e},p.sq=function(e){return e*e},p.sqrt=function(e){return Math.sqrt(e)},p.int=function(e){return Math.floor(e)},p.min=function(e,t){return Math.min(e,t)},p.max=function(e,t){return Math.max(e,t)},p.floor=function(e){return Math.floor(e)},p.float=function(e){return parseFloat(e)},p.ceil=function(e){return Math.ceil(e)},p.round=function(e){return Math.round(e)},p.lerp=function(e,t,n){return(t-e)*n+e},p.abs=function(e){return Math.abs(e)},p.cos=function(e){return Math.cos(e)},p.sin=function(e){return Math.sin(e)},p.pow=function(e,t){return Math.pow(e,t)},p.sqrt=function(e){return Math.sqrt(e)},p.tan=function(e){return Math.tan(e)},p.atan=function(e){return Math.atan(e)},p.atan2=function(e,t){return Math.atan2(e,t)},p.radians=function(e){return e/180*p.PI},p.log=function(e){return Math.log(e)},p.exp=function(e){return Math.exp(e)},p.asin=function(e){return Math.asin(e)},p.acos=function(e){return Math.acos(e)},p.boolean=function(e){var t=!1;if(e&&"number"==typeof e&&0!==e)t=!0;else if(e&&"boolean"==typeof e&&e===!0)t=!0;else if(e&&"string"==typeof e&&"true"===e.toLowerCase())t=!0;else if(e&&"object"==typeof e&&e.constructor===Array){t=new Array(e.length);for(var n=0;n<e.length;n++)t[n]=p.boolean(e[n])}return t},p.dist=function(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))},p.map=function(e,t,n,r,o){return r+(o-r)*((e-t)/(n-t))},p.mag=function(e,t,n){return 2===arguments.length?Math.sqrt(e*e+t*t):3===arguments.length?Math.sqrt(e*e+t*t+n*n):void 0},p.Random=function(){var e,t=!1;this.nextGaussian=function(){if(t)return t=!1,e;var n,r,o;do n=2*p.random(1)-1,r=2*p.random(1)-1,o=n*n+r*r;while(o>=1||0===o);var a=Math.sqrt(-2*Math.log(o)/o);return e=r*a,t=!0,n*a}},p.byte=function(e){return e||0},p.norm=function(e,t,n){var r=n-t;return 1/r*e-1/r*t},p.random=function(e,t){return 2===arguments.length?e+Math.random()*(t-e):Math.random()*e};var noiseGen=function(e,t){var n=e+57*t;return n=n<<13^n,Math.abs(1-(n*(n*n*15731+789221)+1376312589&2147483647)/1073741824)},smoothedNoise=function(e,t){var n=(noiseGen(e-1,t-1)+noiseGen(e+1,t-1)+noiseGen(e-1,t+1)+noiseGen(e+1,t+1))/16,r=(noiseGen(e-1,t)+noiseGen(e+1,t)+noiseGen(e,t-1)+noiseGen(e,t+1))/8,o=noiseGen(e,t)/4;return n+r+o},interpolate=function(e,t,n){var r=n*p.PI,o=.5*(1-Math.cos(r));return e*(1-o)+t*o},interpolatedNoise=function(e,t){var n=Math.floor(e),r=e-n,o=Math.floor(t),a=t-o,p=smoothedNoise(n,o),i=smoothedNoise(n+1,o),u=smoothedNoise(n,o+1),c=smoothedNoise(n+1,o+1),s=interpolate(p,i,r),l=interpolate(u,c,r);return interpolate(s,l,a)},perlinNoise_2D=function(e,t){for(var n=0,r=.25,o=3,a=0;o>=a;a++){var p=Math.pow(2,a),i=Math.pow(r,a);n+=interpolatedNoise(e*p,t*p)*i}return n},perlinNoise_3D=function(){return 0};p.noise=function(e,t,n){switch(arguments.length){case 2:return perlinNoise_2D(e,t);case 3:return perlinNoise_3D(e,t,n);case 1:return perlinNoise_2D(e,e)}},p.constrain=function(e,t,n){return Math.min(Math.max(e,t),n)},p.degrees=function(e){return e=180*e/p.PI,0>e&&(e=360+e),e},p.size=function(e,t,n){if(n&&"OPENGL"===n){try{curContext||(curContext=curElement.getContext("experimental-webgl"))}catch(r){Processing.debug(r)}if(!curContext)throw"OPENGL 3D context is not supported on this browser.";p.stroke(0),p.fill(255)}else"undefined"==typeof curContext&&(curContext=curElement.getContext("2d"));var o={fillStyle:curContext.fillStyle,strokeStyle:curContext.strokeStyle,lineCap:curContext.lineCap,lineJoin:curContext.lineJoin};curElement.width=p.width=e,curElement.height=p.height=t;for(var a in o)o&&(curContext[a]=o[a])};var PVector=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},createPVectorMethod=function(e){return function(t,n){var r=t.get();return r[e](n),r}},createSimplePVectorMethod=function(e){return function(t,n){return t[e](n)}},simplePVMethods="dist dot cross".split(" "),method=simplePVMethods.length;for(PVector.angleBetween=function(e,t){return Math.acos(e.dot(t)/(e.mag()*t.mag()))},PVector.prototype={set:function(e,t,n){1===arguments.length?this.set(e.x||e[0],e.y||e[1],e.z||e[2]):(this.x=e,this.y=t,this.z=n)},get:function(){return new PVector(this.x,this.y,this.z)},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},add:function(e,t,n){3===arguments.length?(this.x+=e,this.y+=t,this.z+=n):1===arguments.length&&(this.x+=e.x,this.y+=e.y,this.z+=e.z)},sub:function(e,t,n){3===arguments.length?(this.x-=e,this.y-=t,this.z-=n):1===arguments.length&&(this.x-=e.x,this.y-=e.y,this.z-=e.z)},mult:function(e){"number"==typeof e?(this.x*=e,this.y*=e,this.z*=e):"object"==typeof e&&(this.x*=e.x,this.y*=e.y,this.z*=e.z)},div:function(e){"number"==typeof e?(this.x/=e,this.y/=e,this.z/=e):"object"==typeof e&&(this.x/=e.x,this.y/=e.y,this.z/=e.z)},dist:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)},dot:function(e,t,n){var r;return 3===arguments.length?r=this.x*e+this.y*t+this.z*n:1===arguments.length&&(r=this.x*e.x+this.y*e.y+this.z*e.z),r},cross:function(e){var t=this.y*e.z-e.y*this.z,n=this.z*e.x-e.z*this.x,r=this.x*e.y-e.x*this.y;return new PVector(t,n,r)},normalize:function(){var e=this.mag();e>0&&this.div(e)},limit:function(e){this.mag()>e&&(this.normalize(),this.mult(e))},heading2D:function(){var e=Math.atan2(-this.y,this.x);return-e},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};method--;)PVector[simplePVMethods[method]]=createSimplePVectorMethod(simplePVMethods[method]);for(method in PVector.prototype)PVector.prototype.hasOwnProperty(method)&&!PVector.hasOwnProperty(method)&&(PVector[method]=createPVectorMethod(method));p.PVector=PVector,p.noStroke=function(){doStroke=!1},p.noFill=function(){doFill=!1},p.smooth=function(){},p.noSmooth=function(){},p.fill=function(){doFill=!0,curContext.fillStyle=p.color.apply(this,arguments)},p.stroke=function(){doStroke=!0,curContext.strokeStyle=p.color.apply(this,arguments)},p.strokeWeight=function(e){curContext.lineWidth=e},p.strokeCap=function(e){curContext.lineCap=e},p.strokeJoin=function(e){curContext.lineJoin=e},p.Point=function t(e,n){this.x=e,this.y=n,this.copy=function(){return new t(e,n)}},p.point=function(e,t){var n=curContext.fillStyle;curContext.fillStyle=curContext.strokeStyle,curContext.fillRect(Math.round(e),Math.round(t),1,1),curContext.fillStyle=n},p.beginShape=function(e){curShape=e,curShapeCount=0,curvePoints=[]},p.endShape=function(e){0!==curShapeCount&&((e||doFill)&&curContext.lineTo(firstX,firstY),doFill&&curContext.fill(),doStroke&&curContext.stroke(),curContext.closePath(),curShapeCount=0,pathOpen=!1),pathOpen&&(doFill&&curContext.fill(),doStroke&&curContext.stroke(),curContext.closePath(),curShapeCount=0,pathOpen=!1)},p.vertex=function(e,t,n,r,o,a){0===curShapeCount&&curShape!==p.POINTS?(pathOpen=!0,curContext.beginPath(),curContext.moveTo(e,t),firstX=e,firstY=t):curShape===p.POINTS?p.point(e,t):2===arguments.length?((curShape!==p.QUAD_STRIP||2!==curShapeCount)&&curContext.lineTo(e,t),curShape===p.TRIANGLE_STRIP&&(2===curShapeCount&&(p.endShape(p.CLOSE),pathOpen=!0,curContext.beginPath(),curContext.moveTo(prevX,prevY),curContext.lineTo(e,t),curShapeCount=1),firstX=prevX,firstY=prevY),curShape===p.TRIANGLE_FAN&&2===curShapeCount&&(p.endShape(p.CLOSE),pathOpen=!0,curContext.beginPath(),curContext.moveTo(firstX,firstY),curContext.lineTo(e,t),curShapeCount=1),curShape===p.QUAD_STRIP&&3===curShapeCount&&(curContext.lineTo(prevX,prevY),p.endShape(p.CLOSE),pathOpen=!0,curContext.beginPath(),curContext.moveTo(prevX,prevY),curContext.lineTo(e,t),curShapeCount=1),curShape===p.QUAD_STRIP&&(firstX=secondX,firstY=secondY,secondX=prevX,secondY=prevY)):4===arguments.length?curShapeCount>1&&(curContext.moveTo(prevX,prevY),curContext.quadraticCurveTo(firstX,firstY,e,t),curShapeCount=1):6===arguments.length&&curContext.bezierCurveTo(e,t,n,r,o,a),prevX=e,prevY=t,curShapeCount++,(curShape===p.LINES&&2===curShapeCount||curShape===p.TRIANGLES&&3===curShapeCount||curShape===p.QUADS&&4===curShapeCount)&&p.endShape(p.CLOSE)},p.curveVertex=function(e,t){if(curvePoints.length<3)curvePoints.push([e,t]);else{var n=[],r=1-curTightness;curvePoints.push([e,t]),n[0]=[curvePoints[1][0],curvePoints[1][1]],n[1]=[curvePoints[1][0]+(r*curvePoints[2][0]-r*curvePoints[0][0])/6,curvePoints[1][1]+(r*curvePoints[2][1]-r*curvePoints[0][1])/6],n[2]=[curvePoints[2][0]+(r*curvePoints[1][0]-r*curvePoints[3][0])/6,curvePoints[2][1]+(r*curvePoints[1][1]-r*curvePoints[3][1])/6],n[3]=[curvePoints[2][0],curvePoints[2][1]],pathOpen?curShapeCount=1:p.vertex(n[0][0],n[0][1]),p.vertex(n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]),curvePoints.shift()
}},p.curveTightness=function(e){curTightness=e},p.bezierVertex=p.vertex,p.rectMode=function(e){curRectMode=e},p.imageMode=function(){},p.ellipseMode=function(e){curEllipseMode=e},p.arc=function(e,t,n,r,o,a){0>=n||(curEllipseMode===p.CORNER&&(e+=n/2,t+=r/2),curContext.moveTo(e,t),curContext.beginPath(),curContext.arc(e,t,curEllipseMode===p.CENTER_RADIUS?n:n/2,o,a,!1),doStroke&&curContext.stroke(),curContext.lineTo(e,t),doFill&&curContext.fill(),curContext.closePath())},p.line=function(e,t,n,r){curContext.beginPath(),curContext.moveTo(e||0,t||0),curContext.lineTo(n||0,r||0),curContext.stroke(),curContext.closePath()},p.bezier=function(e,t,n,r,o,a,p,i){curContext.beginPath(),curContext.moveTo(e,t),curContext.bezierCurveTo(n,r,o,a,p,i),curContext.stroke(),curContext.closePath()},p.bezierPoint=function(e,t,n,r,o){return(1-o)*(1-o)*(1-o)*e+3*(1-o)*(1-o)*o*t+3*(1-o)*o*o*n+o*o*o*r},p.curvePoint=function(e,t,n,r,o){return.5*(2*t+(-e+n)*o+(2*e-5*t+4*n-r)*o*o+(-e+3*t-3*n+r)*o*o*o)},p.curveTangent=function(e,t,n,r,o){return.5*(-e+n+2*(2*e-5*t+4*n-r)*o+3*(-e+3*t-3*n+r)*o*o)},p.triangle=function(e,t,n,r,o,a){p.beginShape(),p.vertex(e,t),p.vertex(n,r),p.vertex(o,a),p.endShape()},p.quad=function(e,t,n,r,o,a,i,u){curContext.lineCap="square",p.beginShape(),p.vertex(e,t),p.vertex(n,r),p.vertex(o,a),p.vertex(i,u),p.endShape()},p.rect=function(e,t,n,r){if(n||r){curContext.beginPath();var o=0,a=0;curRectMode===p.CORNERS&&(n-=e,r-=t),curRectMode===p.RADIUS&&(n*=2,r*=2),(curRectMode===p.CENTER||curRectMode===p.RADIUS)&&(e-=n/2,t-=r/2),curContext.rect(Math.round(e)-o,Math.round(t)-o,Math.round(n)+a,Math.round(r)+a),doFill&&curContext.fill(),doStroke&&curContext.stroke(),curContext.closePath()}},p.ellipse=function(e,t,n,r){if(e=e||0,t=t||0,!(0>=n&&0>=r)){curContext.beginPath(),curEllipseMode===p.RADIUS&&(n*=2,r*=2);var o=0;if(n===r)curContext.arc(e-o,t-o,n/2,0,p.TWO_PI,!1);else{var a=n/2,i=r/2,u=.5522847498307933,c=u*a,s=u*i;curContext.moveTo(e+a,t),curContext.bezierCurveTo(e+a,t-s,e+c,t-i,e,t-i),curContext.bezierCurveTo(e-c,t-i,e-a,t-s,e-a,t),curContext.bezierCurveTo(e-a,t+s,e-c,t+i,e,t+i),curContext.bezierCurveTo(e+c,t+i,e+a,t+s,e+a,t)}doFill&&curContext.fill(),doStroke&&curContext.stroke(),curContext.closePath()}},p.save=function(){};var buildImageObject=function(e){var t=e.data,n=p.createImage(e.width,e.height);if(n.__defineGetter__&&n.__lookupGetter__&&!n.__lookupGetter__("pixels")){var r;n.__defineGetter__("pixels",function(){if(r)return r;r=[];for(var e=0;e<t.length;e+=4)r.push(p.color(t[e],t[e+1],t[e+2],t[e+3]));return r})}else{n.pixels=[];for(var o=0;o<t.length;o+=4)n.pixels.push(p.color(t[o],t[o+1],t[o+2],t[o+3]))}return n};p.loadImage=function(e,t,n){var r=document.createElement("img");return r.src=e,r.loaded=!1,r.mask=function(){},r.onload=function(){var e=this.height,t=this.width,o=document.createElement("canvas");o.width=t,o.height=e;var a=o.getContext("2d");a.drawImage(this,0,0),this.data=buildImageObject(a.getImageData(0,0,t,e)),this.data.img=r,this.get=this.data.get,this.pixels=this.data.pixels,this.loaded=!0,n&&n()},r},p.get=function(e,t){if(!arguments.length){var n=p.createGraphics(p.width,p.height);return n.image(curContext,0,0),n}return getLoaded||(getLoaded=buildImageObject(curContext.getImageData(0,0,p.width,p.height))),getLoaded.get(e,t)},p.createGraphics=function(e,t){var n=document.createElement("canvas"),r=Processing.build(n);return r.size(e,t),r.canvas=n,r},p.set=function(e,t,n){if(n&&n.img)p.image(n,e,t);else{var r=curContext.fillStyle,o=n;curContext.fillStyle=o,curContext.fillRect(Math.round(e),Math.round(t),1,1),curContext.fillStyle=r}},p.loadPixels=function(){p.pixels=buildImageObject(curContext.getImageData(0,0,p.width,p.height)).pixels},p.updatePixels=function(){var e=/(\d+),(\d+),(\d+),(\d+)/,t={};t.width=p.width,t.height=p.height,t.data=[],curContext.createImageData&&(t=curContext.createImageData(p.width,p.height));for(var n=t.data,r=0,o=0,a=p.pixels.length;a>o;o++){var i=(p.pixels[o]||"rgba(0,0,0,1)").match(e);n[r+0]=parseInt(i[1],10),n[r+1]=parseInt(i[2],10),n[r+2]=parseInt(i[3],10),n[r+3]=255*parseFloat(i[4]),r+=4}curContext.putImageData(t,0,0)},p.background=function(e){var t,n;if(p.use3DContext){var r=arguments;1===arguments.length?"string"==typeof arguments[0]?(t=arguments[0].slice(5,-1).split(","),curContext.clearColor(t[0]/255,t[1]/255,t[2]/255,t[3])):"number"==typeof arguments[0]&&curContext.clearColor(r[0]/255,r[0]/255,r[0]/255,1):2===arguments.length?"string"==typeof arguments[0]?(t=arguments[0].slice(5,-1).split(","),curContext.clearColor(t[0]/255,t[1]/255,t[2]/255,1)):"number"==typeof arguments[0]&&(t=arguments[0]/255,n=1,curContext.clearColor(t,t,t,n)):(3===arguments.length||4===arguments.length)&&curContext.clearColor(r[0]/255,r[1]/255,r[2]/255,1)}else if(arguments.length&&(curBackground=e.data&&e.data.img?e.data:p.color.apply(this,arguments)),curBackground.img)p.image(e,0,0);else{var o=curContext.fillStyle;curContext.fillStyle=curBackground+"",curContext.fillRect(0,0,p.width,p.height),curContext.fillStyle=o}};var getImage_old=function(e){if("string"==typeof e)return document.getElementById(e);if(e.img||e.canvas)return e.img||e.canvas;for(var t=0,n=e.pixels.length;n>t;t++){var r=4*t,o=(e.pixels[t]||"rgba(0,0,0,1)").slice(5,-1).split(",");e.data[r+0]=parseInt(o[0],10),e.data[r+1]=parseInt(o[1],10),e.data[r+2]=parseInt(o[2],10),e.data[r+3]=100*parseFloat(o[3])}var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var p=a.getContext("2d");return p.putImageData(e,0,0),e.canvas=a,a};return p.AniSprite=function(e,t){this.images=[],this.pos=0;for(var n=0;t>n;n++)this.images.push(e+p.nf(n,(""+t).length)+".gif");this.display=function(e,n){p.image_old(this.images[this.pos],e,n),++this.pos>=t&&(this.pos=0)},this.getWidth=function(){return getImage_old(this.images[0]).width},this.getHeight=function(){return getImage_old(this.images[0]).height}},p.createImage=function(e,t){var n={};return n.width=e,n.height=t,n.data=[],curContext.createImageData&&(n=curContext.createImageData(e,t)),n.pixels=new Array(e*t),n.get=function(t,n){return this.pixels[e*n+t]},n._mask=null,n.mask=function(e){this._mask=e},n.loadPixels=function(){},n.updatePixels=function(){},n},p.image_old=function(e,t,n,r,o){t=t||0,n=n||0;var a,i=getImage(e);if(curTint>=0&&(a=curContext.globalAlpha,curContext.globalAlpha=curTint/opacityRange),3===arguments.length?curContext.drawImage(i,t,n):curContext.drawImage(i,t,n,r,o),curTint>=0&&(curContext.globalAlpha=a),e._mask){var u=curContext.globalCompositeOperation;curContext.globalCompositeOperation="darker",p.image(e._mask,t,n),curContext.globalCompositeOperation=u}},p.image=function(e,t,n,r,o){if(e.data||e.canvas){t=t||0,n=n||0;var a,i=getImage(e.data||e.canvas);if(curTint>=0&&(a=curContext.globalAlpha,curContext.globalAlpha=curTint/opacityRange),3===arguments.length?curContext.drawImage(i,t,n):curContext.drawImage(i,t,n,r,o),curTint>=0&&(curContext.globalAlpha=a),e._mask){var u=curContext.globalCompositeOperation;curContext.globalCompositeOperation="darker",p.image(e._mask,t,n),curContext.globalCompositeOperation=u}}},p.clear=function(e,t,n,r){0===arguments.length?curContext.clearRect(0,0,p.width,p.height):curContext.clearRect(e,t,n,r)},p.tint=function(e,t){curTint=t},p.loadFont=function(e){if(-1===e.indexOf(".svg"))return{name:e,width:function(e){return curContext.mozMeasureText?curContext.mozMeasureText("number"==typeof e?String.fromCharCode(e):e)/curTextSize:0}};var t=p.loadGlyphs(e);return{name:e,glyph:!0,units_per_em:t.units_per_em,horiz_adv_x:1/t.units_per_em*t.horiz_adv_x,ascent:t.ascent,descent:t.descent,width:function(t){for(var n=0,r=t.length,o=0;r>o;o++)try{n+=parseFloat(p.glyphLook(p.glyphTable[e],t[o]).horiz_adv_x)}catch(a){Processing.debug(a)}return n/p.glyphTable[e].units_per_em}}},p.textFont=function(e,t){curTextFont=e,p.textSize(t)},p.textSize=function(e){e&&(curTextSize=e)},p.textAlign=function(){},p.glyphLook=function(e,t){try{switch(t){case"1":return e.one;case"2":return e.two;case"3":return e.three;case"4":return e.four;case"5":return e.five;case"6":return e.six;case"7":return e.seven;case"8":return e.eight;case"9":return e.nine;case"0":return e.zero;case" ":return e.space;case"$":return e.dollar;case"!":return e.exclam;case'"':return e.quotedbl;case"#":return e.numbersign;case"%":return e.percent;case"&":return e.ampersand;case"'":return e.quotesingle;case"(":return e.parenleft;case")":return e.parenright;case"*":return e.asterisk;case"+":return e.plus;case",":return e.comma;case"-":return e.hyphen;case".":return e.period;case"/":return e.slash;case"_":return e.underscore;case":":return e.colon;case";":return e.semicolon;case"<":return e.less;case"=":return e.equal;case">":return e.greater;case"?":return e.question;case"@":return e.at;case"[":return e.bracketleft;case"\\":return e.backslash;case"]":return e.bracketright;case"^":return e.asciicircum;case"`":return e.grave;case"{":return e.braceleft;case"|":return e.bar;case"}":return e.braceright;case"~":return e.asciitilde;default:return e[t]}}catch(n){Processing.debug(n)}},p.text=function(e,t,n){if(curTextFont.glyph){var r=p.glyphTable[curTextFont.name];curContext.save(),curContext.translate(t,n+curTextSize);var o=r.units_per_em,a=1/o*curTextSize;curContext.scale(a,a);for(var i=e.length,u=0;i>u;u++)try{p.glyphLook(r,e[u]).draw()}catch(c){Processing.debug(c)}curContext.restore()}else e&&curContext.mozDrawText&&(curContext.save(),curContext.mozTextStyle=curTextSize+"px "+curTextFont.name,curContext.translate(t,n),curContext.mozDrawText("number"==typeof e?String.fromCharCode(e):e),curContext.restore())},p.loadGlyphs=function loadGlyph(url){var x,y,cx,cy,nx,ny,d,a,lastCom,lenC,horiz_adv_x,getXY="[0-9\\-]+",path,regex=function(e,t){var n,r=0,o=[],a=new RegExp(e,"g");for(n=o[r]=a.exec(t);n;)r++,n=o[r]=a.exec(t);return o},buildPath=function(e){var t=regex("[A-Za-z][0-9\\- ]+|Z",e);path="var path={draw:function(){curContext.beginPath();curContext.save();",x=0,y=0,cx=0,cy=0,nx=0,ny=0,e=0,a=0,lastCom="",lenC=t.length-1;for(var n=0;lenC>n;n++){var r=t[n][0],o=regex(getXY,r);switch(r[0]){case"M":x=parseFloat(o[0][0]),y=parseFloat(o[1][0]),path+="curContext.moveTo("+x+","+-y+");";break;case"L":x=parseFloat(o[0][0]),y=parseFloat(o[1][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"H":x=parseFloat(o[0][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"V":y=parseFloat(o[0][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"T":nx=parseFloat(o[0][0]),ny=parseFloat(o[1][0]),"Q"===lastCom||"T"===lastCom?(e=Math.sqrt(Math.pow(x-cx,2)+Math.pow(cy-y,2)),a=Math.PI+Math.atan2(cx-x,cy-y),cx=x+Math.sin(a)*e,cy=y+Math.cos(a)*e):(cx=x,cy=y),path+="curContext.quadraticCurveTo("+cx+","+-cy+","+nx+","+-ny+");",x=nx,y=ny;break;case"Q":cx=parseFloat(o[0][0]),cy=parseFloat(o[1][0]),nx=parseFloat(o[2][0]),ny=parseFloat(o[3][0]),path+="curContext.quadraticCurveTo("+cx+","+-cy+","+nx+","+-ny+");",x=nx,y=ny;break;case"Z":path+="curContext.closePath();"}lastCom=r[0]}return path+="doStroke?curContext.stroke():0;",path+="doFill?curContext.fill():0;",path+="curContext.restore();",path+="curContext.translate("+horiz_adv_x+",0);",path+="}}"},parseSVGFont=function parseSVGFontse(svg){var font=svg.getElementsByTagName("font");p.glyphTable[url].horiz_adv_x=font[0].getAttribute("horiz-adv-x");var font_face=svg.getElementsByTagName("font-face")[0];p.glyphTable[url].units_per_em=parseFloat(font_face.getAttribute("units-per-em")),p.glyphTable[url].ascent=parseFloat(font_face.getAttribute("ascent")),p.glyphTable[url].descent=parseFloat(font_face.getAttribute("descent"));for(var glyph=svg.getElementsByTagName("glyph"),len=glyph.length,i=0;len>i;i++){var unicode=glyph[i].getAttribute("unicode"),name=glyph[i].getAttribute("glyph-name");horiz_adv_x=glyph[i].getAttribute("horiz-adv-x"),null===horiz_adv_x&&(horiz_adv_x=p.glyphTable[url].horiz_adv_x),d=glyph[i].getAttribute("d"),void 0!==d&&(path=buildPath(d),eval(path),p.glyphTable[url][name]={name:name,unicode:unicode,horiz_adv_x:horiz_adv_x,draw:path.draw})}},loadXML=function(){var e;try{e=document.implementation.createDocument("","",null)}catch(t){return void Processing.debug(t.message)}try{e.async=!1,e.load(url),parseSVGFont(e.getElementsByTagName("svg")[0])}catch(n){Processing.debug(n);try{var r=new window.XMLHttpRequest;r.open("GET",url,!1),r.send(null),parseSVGFont(r.responseXML.documentElement)}catch(o){Processing.debug(n)}}};return p.glyphTable[url]={},loadXML(url),p.glyphTable[url]},p.extendClass=function(e,t,n){3===arguments.length?n.apply(e,t):t.call(e)},p.addMethod=function(e,t,n){if(e[t]){var r=n.length,o=e[t];e[t]=function(){return arguments.length===r?n.apply(this,arguments):o.apply(this,arguments)}}else e[t]=n},p.init=function init(code){function attach(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}code&&!function(Processing){with(p){var parsedCode=this.Processing.parse(code,p);p.use3DContext||(curContext=curElement.getContext("2d"),curContext.translate(.5,.5),curContext.lineCap="round",p.stroke(0),p.fill(255),p.disableContextMenu()),eval(parsedCode)}}(p),p.setup&&(inSetup=!0,p.setup()),inSetup=!1,p.draw&&(doLoop?p.loop():p.redraw()),attach(curElement,"mousemove",function(e){p.pmouseX=p.mouseX,p.pmouseY=p.mouseY;var t=null!==window.scrollX&&"undefined"!=typeof window.scrollX?window.scrollX:window.pageXOffset,n=null!==window.scrollY&&"undefined"!=typeof window.scrollY?window.scrollY:window.pageYOffset;p.mouseX=e.clientX-curElement.offsetLeft+t,p.mouseY=e.clientY-curElement.offsetTop+n,p.cursor(curCursor),p.mouseMoved&&p.mouseMoved(),mousePressed&&p.mouseDragged&&p.mouseDragged()}),attach(curElement,"mouseout",function(){document.body.style.cursor=oldCursor}),attach(curElement,"mousedown",function(e){switch(mousePressed=!0,e.which){case 1:p.mouseButton=p.LEFT;break;case 2:p.mouseButton=p.CENTER;break;case 3:p.mouseButton=p.RIGHT}p.mouseDown=!0,"function"==typeof p.mousePressed?p.mousePressed():p.mousePressed=!0}),attach(curElement,"mouseup",function(){mousePressed=!1,p.mouseClicked&&p.mouseClicked(),"function"!=typeof p.mousePressed&&(p.mousePressed=!1),p.mouseReleased&&p.mouseReleased()}),attach(document,"keydown",function(e){keyPressed=!0,p.key=e.keyCode+32;for(var t=!1,n=0,r=p.codedKeys.length;r>n;n++)if(p.key===p.codedKeys[n]){switch(t=!0,p.key){case 70:p.keyCode=p.UP;break;case 71:keyCode=p.RIGHT;break;case 72:p.keyCode=p.DOWN;break;case 69:p.keyCode=p.LEFT}p.key=p.CODED}t||(p.keyCode=null),e.shiftKey&&(p.key=String.fromCharCode(p.key).toUpperCase().charCodeAt(0)),"function"==typeof p.keyPressed?p.keyPressed():p.keyPressed=!0}),attach(document,"keyup",function(){keyPressed=!1,"function"!=typeof p.keyPressed&&(p.keyPressed=!1),p.keyReleased&&p.keyReleased()})},p}}();