!function(){this.Processing=function e(t,n){"string"==typeof t&&(t=document.getElementById(t));var r=e.build(t);return n&&r.init(n),r},Processing.lib={};var ajax=function(e){var t=new window.XMLHttpRequest;return t?(t.open("GET",e+"?t="+(new Date).getTime(),!1),t.send(null),t.responseText):!1},init=function(){for(var e=document.getElementsByTagName("canvas"),t=0,n=e.length;n>t;t++){var r=e[t].getAttribute("data-src");null===r&&(r=e[t].getAttribute("datasrc")),r&&Processing(e[t],ajax(r))}},newWebGLArray=function(e){var t=!1;try{t=!0}catch(n){}return t===!0?new WebGLFloatArray(e):new CanvasFloatArray(e)},boxVerts=[.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5],boxOutlineVerts=[.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5],programObject,boxBuffer,boxOutlineBuffer,vertexShaderSource="attribute vec3 Vertex;uniform vec4 color;uniform mat4 model;uniform mat4 view;uniform mat4 projection;void main(void){  gl_FrontColor = color;  gl_Position = projection * view * model * vec4(Vertex, 1.0);}",fragmentShaderSource="void main(void){  gl_FragColor = gl_Color;}";document.addEventListener("DOMContentLoaded",function(){init()},!1),Processing.debug=function(){},Processing.parse=function(e,t){e=e.replace(/('(.){1}')/g,"$1.charCodeAt(0)");var n=[];e=e.replace(/(["'])(\\\1|.)*?(\1)/g,function(e){return n.push(e),"<STRING "+(n.length-1)+">"}),e=e.replace(/\/\/.*\n/g,"\n"),e=e.replace(/([^\s])%([^\s])/g,"$1 % $2"),e=e.replace(/(\s*=\s*|\(*\s*)frameRate(\s*\)+?|\s*;)/,"$1p.FRAME_RATE$2"),e=e.replace(/(?:static )?(\w+(?:\[\])* )(\w+)\s*(\([^\)]*\)\s*\{)/g,function(e,t,n,r){return"if"===n||"for"===n||"while"===n?e:"processing."+n+" = function "+n+r}),e=e.replace(/import\s+(.+);/g,""),e=e.replace(/\.length\(\)/g,".length"),e=e.replace(/([\(,]\s*)(\w+)((?:\[\])+| )\s*(\w+\s*[\),])/g,"$1$4"),e=e.replace(/([\(,]\s*)(\w+)((?:\[\])+| )\s*(\w+\s*[\),])/g,"$1$4"),e=e.replace(/new (\w+)((?:\[([^\]]*)\])+)/g,function(e,t,n){return"new ArrayList("+n.replace(/\[\]/g,"[0]").slice(1,-1).split("][").join(", ")+")"}),e=e.replace(/(?:static )?\w+\[\]\s*(\w+)\[?\]?\s*=\s*\{.*?\};/g,function(e){return e.replace(/\{/g,"[").replace(/\}/g,"]")});for(var r=/(\n\s*(?:int|float)(?!\[\])*(?:\s*|[^\(;]*?,\s*))([a-zA-Z]\w*)\s*(,|;)/i;r.test(e);)e=e.replace(new RegExp(r),function(e,t,n,r){return t+" "+n+" = 0"+r});e=e.replace(/(?:static\s+)?(?:final\s+)?(\w+)((?:\[\])+| ) *(\w+)\[?\]?(\s*[=,;])/g,function(e,t,n,r,a){return"return"===t?e:"var "+r+a}),e=e.replace(/\=\s*\{((.|\s)*?)\};/g,function(e,t){return"= ["+t.replace(/\{/g,"[").replace(/\}/g,"]")+"]"}),e=e.replace(/super\(/g,"superMethod(");var a=["int","float","boolean","String","byte","double","long","ArrayList"],o=function(e,t,n,r,o){a.push(t);var s="";return r=r.replace(/final\s+var\s+(\w+\s*=\s*.*?;)/g,function(e,n){return s+=" "+t+"."+n,""}),"function "+t+"() {with(this){\n "+(n?"var __self=this;function superMethod(){extendClass(__self,arguments,"+n+");}\n":"")+r.replace(/\s*,\s*/g,";\n  this.").replace(/\b(var |final |public )+\s*/g,"this.").replace(/\b(var |final |public )+\s*/g,"this.").replace(/this\.(\w+);/g,"this.$1 = null;")+(n?"extendClass(this, "+n+");\n":"")+"<CLASS "+t+" "+s+">"+("string"==typeof o?o:t+"(")},s=function(e){for(var t=e,n=0,r=1,a=0;r!==a;){var o=t.indexOf("{"),s=t.indexOf("}");s>o&&-1!==o?(r++,t=t.slice(o+1),n+=o+1):(a++,t=t.slice(s+1),n+=s+1)}return e.slice(0,n-1)},i=/(?:public |abstract |static )*class (\w+)\s*(?:extends\s*(\w+)\s*)?\{\s*((?:.|\n)*?)\b\1\s*\(/g,u=/(?:public |abstract |static )*class (\w+)\s*(?:extends\s*(\w+)\s*)?\{\s*((?:.|\n)*?)(processing)/g;e=e.replace(i,o),e=e.replace(u,o);for(var c,p=/<CLASS (\w+) (.*?)>/;c=e.match(p);){var l=RegExp.leftContext,h=RegExp.rightContext,m=s(h),g=c[1],f=c[2]||"";h=h.slice(m.length+1),m=m.replace(new RegExp("\\b"+g+"\\(([^\\)]*?)\\)\\s*{","g"),function(e,t){t=t.split(/,\s*?/),t[0].match(/^\s*$/)&&t.shift();for(var n="if ( arguments.length === "+t.length+" ) {\n",r=0;r<t.length;r++)n+=" var "+t[r]+" = arguments["+r+"];\n";return n}),m=m.replace(/(?:public )?processing.\w+ = function (\w+)\((.*?)\)/g,function(e,t,n){return"ADDMETHOD(this, '"+t+"', function("+n+")"});for(var d,x=/ADDMETHOD([\s\S]*?\{)/,v="";d=m.match(x);){var C=RegExp.leftContext,A=RegExp.rightContext,S=s(A);v+="addMethod"+d[1]+S+"});",m=C+A.slice(S.length+1)}m=v+m,e=l+m+"\n}}"+f+h}e=e.replace(/processing.\w+ = function addMethod/g,"addMethod"),e.match(/size\((?:.+),(?:.+),\s*OPENGL\s*\);/)&&(t.use3DContext=!0),e=e.replace(/\(int\)/g,"0|"),e=e.replace(new RegExp("\\(("+a.join("|")+")(\\[\\])*\\)","g"),"");var M=function(e){var t=[];return e.replace(/(..)/g,function(e){t.push(parseInt(e,16))}),t};e=e.replace(/#([a-f0-9]{6})/gi,function(e,t){var n=M(t);return"DefaultColor("+n[0]+","+n[1]+","+n[2]+")"}),e=e.replace(/(\d+)f/g,"$1");for(var y=0;y<n.length;y++)e=e.replace(new RegExp("(.*)(<STRING "+y+">)(.*)","g"),function(e,t,r,a){for(var o=e,s=!0,i="",u=!1,c=0;c<t.length;c++)s?('"'===t.charAt(c)||"'"===t.charAt(c))&&(i=t.charAt(c),s=!1):u?u=!1:"\\"===t.charAt(c)?u=!0:t.charAt(c)===i&&(s=!0,i="");return s&&(o=t+n[y]+a),o});return e},Processing.build=function buildProcessing(curElement){function decToBin(e,t){var n=1;n<<=t-1;for(var r="",a=0;t>a;a++)r+=n&e?"1":"0",n>>>=1;return r}function PMatrix3DStack(){this.matrixStack=[]}function uniformf(e,t,n){var r=curContext.getUniformLocation(e,t);-1!==r&&(4===n.length?curContext.uniform4fv(r,n):3===n.length?curContext.uniform3fv(r,n):2===n.length?curContext.uniform2fv(r,n):curContext.uniform1f(r,n))}function uniformi(e,t,n){var r=curContext.getUniformLocation(e,t);-1!==r&&(4===n.length?curContext.uniform4iv(r,n):3===n.length?curContext.uniform3iv(r,n):2===n.length?curContext.uniform2iv(r,n):curContext.uniform1i(r,n))}function vertexAttribPointer(e,t,n,r){var a=curContext.getAttribLocation(e,t);-1!==a&&(curContext.bindBuffer(curContext.ARRAY_BUFFER,r),curContext.vertexAttribPointer(a,n,curContext.FLOAT,!1,0,0),curContext.enableVertexAttribArray(a))}function uniformMatrix(e,t,n,r){var a=curContext.getUniformLocation(e,t);-1!==a&&(16===r.length?curContext.uniformMatrix4fv(a,n,r):9===r.length?curContext.uniformMatrix3fv(a,n,r):curContext.uniformMatrix2fv(a,n,r))}function getImage(e){if("string"==typeof e)return document.getElementById(e);if(e.img)return e.img;(e.getContext||e.canvas)&&(e.pixels=e.getContext("2d").createImageData?e.getContext("2d").createImageData(e.width,e.height):e.getContext("2d").getImageData(0,0,e.width,e.height));for(var t=0,n=e.pixels.length;n>t;t++){var r=4*t,a=(e.pixels[t]||"rgba(0,0,0,1)").slice(5,-1).split(",");e.data[r+0]=parseInt(a[0],10),e.data[r+1]=parseInt(a[1],10),e.data[r+2]=parseInt(a[2],10),e.data[r+3]=100*parseFloat(a[3])}var o=document.createElement("canvas");o.width=e.width,o.height=e.height;var s=o.getContext("2d");return s.putImageData(e.pixels,0,0),e.canvas=o,e}var p={},curContext;p.use3DContext=!1,p.name="Processing.js Instance",p.PI=Math.PI,p.TWO_PI=2*p.PI,p.HALF_PI=p.PI/2,p.MAX_FLOAT=3.4028235e38,p.MIN_FLOAT=-3.4028235e38,p.MAX_INT=2147483647,p.MIN_INT=-2147483648,p.P3D=3,p.CORNER=0,p.RADIUS=1,p.CENTER_RADIUS=1,p.CENTER=2,p.POLYGON=2,p.QUADS=5,p.TRIANGLES=6,p.POINTS=7,p.LINES=8,p.TRIANGLE_STRIP=9,p.TRIANGLE_FAN=4,p.QUAD_STRIP=3,p.CORNERS=10,p.CLOSE=!0,p.RGB=1,p.HSB=2,p.OPENGL="OPENGL",p.FRAME_RATE=0,p.focused=!0,p.ARROW="default",p.CROSS="crosshair",p.HAND="pointer",p.MOVE="move",p.TEXT="text",p.WAIT="wait",p.NOCURSOR="url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",p.ALPHA_MASK=4278190080,p.RED_MASK=16711680,p.GREEN_MASK=65280,p.BLUE_MASK=255,p.REPLACE=0,p.BLEND=1,p.ADD=2,p.SUBTRACT=4,p.LIGHTEST=8,p.DARKEST=16,p.DIFFERENCE=32,p.EXCLUSION=64,p.MULTIPLY=128,p.SCREEN=256,p.OVERLAY=512,p.HARD_LIGHT=1024,p.SOFT_LIGHT=2048,p.DODGE=4096,p.BURN=8192,p.PRECISIONB=15,p.PRECISIONF=1<<p.PRECISIONB,p.PREC_MAXVAL=p.PRECISIONF-1,p.PREC_ALPHA_SHIFT=24-p.PRECISIONB,p.PREC_RED_SHIFT=16-p.PRECISIONB,p.ROUND="round",p.SQUARE="butt",p.PROJECT="square",p.MITER="miter",p.BEVEL="bevel",p.CENTER=88888880,p.CODED=88888888,p.UP=88888870,p.RIGHT=88888871,p.DOWN=88888872,p.LEFT=88888869,p.codedKeys=[69,70,71,72];var online=!0,doFill=!0,doStroke=!0,loopStarted=!1,hasBackground=!1,doLoop=!0,looping=0,curRectMode=p.CORNER,curEllipseMode=p.CENTER,inSetup=!1,inDraw=!1,curBackground="rgba( 204, 204, 204, 1 )",curFrameRate=1e3,curCursor=p.ARROW,oldCursor=document.body.style.cursor,curMsPerFrame=1,curShape=p.POLYGON,curShapeCount=0,curvePoints=[],curTightness=0,opacityRange=255,redRange=255,greenRange=255,blueRange=255,pathOpen=!1,mousePressed=!1,mouseDragging=!1,keyPressed=!1,curColorMode=p.RGB,curTint=-1,curTextSize=12,curTextFont="Arial",getLoaded=!1,start=(new Date).getTime(),timeSinceLastFPS=start,framesSinceLastFPS=0,cam,cameraInv,forwardTransform,modelView,modelViewInv,userMatrixStack,projection,frustumMode=!1,cameraFOV=60*(Math.PI/180),cameraX=curElement.width/2,cameraY=curElement.height/2,cameraZ=cameraY/Math.tan(cameraFOV/2),cameraNear=cameraZ/10,cameraFar=10*cameraZ,cameraAspect=curElement.width/curElement.height,firstX,firstY,secondX,secondY,prevX,prevY,styleArray=new Array(0);p.ln="",p.glyphTable={},p.pmouseX=0,p.pmouseY=0,p.mouseX=0,p.mouseY=0,p.mouseButton=0,p.mouseDown=!1,p.mouseClicked=void 0,p.mouseDragged=void 0,p.mouseMoved=void 0,p.mousePressed=void 0,p.mouseReleased=void 0,p.keyPressed=void 0,p.keyReleased=void 0,p.draw=void 0,p.setup=void 0,p.width=curElement.width-0,p.height=curElement.height-0,p.frameCount=0,p.split=function(e,t){return e.split(t)},p.splitTokens=function(e,t){1===arguments.length&&(t="\n	\r\f "),t="["+t+"]";for(var n=new Array(0),r=0,a=e.search(t);a>=0;)0===a?e=e.substring(1):(n[r]=e.substring(0,a),r++,e=e.substring(a)),a=e.search(t);return e.length>0&&(n[r]=e),0===n.length&&(n=void 0),n},p.append=function(e,t){return e[e.length]=t,e},p.concat=function(e,t){return e.concat(t)},p.sort=function(e,t){var n=[];if(e.length>0){for(var r=t>0?t:e.length,a=0;r>a;a++)n.push(e[a]);if("string"==typeof e[0]?n.sort():n.sort(function(e,t){return e-t}),t>0)for(var o=n.length;o<e.length;o++)n.push(e[o])}return n},p.splice=function(e,t,n){if(0===e.length&&0===t.length)return e;if(t instanceof Array)for(var r=0,a=n;r<t.length;a++,r++)e.splice(a,0,t[r]);else e.splice(n,0,t);return e},p.subset=function(e,t,n){return 2===arguments.length?p.subset(e,t,e.length-t):3===arguments.length?e.slice(t,t+n):void 0},p.join=function(e,t){return e.join(t)},p.shorten=function(e){for(var t=new Array(0),n=e.length,r=0;n>r;r++)t[r]=e[r];return t.pop(),t},p.expand=function(e,t){for(var n=new Array(0),r=e.length,a=0;r>a;a++)n[a]=e[a];return 1===arguments.length?n.length*=2:2===arguments.length&&(n.length=t),n},p.ArrayList=function e(t,n,r){var a=new Array(0|t);if(n)for(var o=0;t>o;o++){a[o]=[];for(var s=0;n>s;s++)for(var i=a[o][s]=r?new Array(r):0,u=0;r>u;u++)i[u]=0}else for(var c=0;t>c;c++)a[c]=0;return a.get=function(e){return this[e]},a.add=function(e){return this.push(e)},a.size=function(){return this.length},a.clear=function(){this.length=0},a.remove=function(e){return this.splice(e,1)},a.isEmpty=function(){return!this.length},a.clone=function(){for(var n=new e(t),r=0;t>r;r++)n[r]=this[r];return n},a},p.reverse=function(e){return e.reverse()},p.rgbaToInt=function(e){var t=/\(([^\)]+)\)/.exec(e).slice(1,2)[0].split(",");return 255*t[3]<<24|t[0]<<16|t[1]<<8|t[2]},p.mix=function(e,t,n){return e+((t-e)*n>>8)},p.peg=function(e){return 0>e?0:e>255?255:e},p.modes={replace:function(e,t){return p.rgbaToInt(t)},blend:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.mix(n&p.RED_MASK,r&p.RED_MASK,a)&p.RED_MASK|p.mix(n&p.GREEN_MASK,r&p.GREEN_MASK,a)&p.GREEN_MASK|p.mix(n&p.BLUE_MASK,r&p.BLUE_MASK,a)},add:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|Math.min((n&p.RED_MASK)+((r&p.RED_MASK)>>8)*a,p.RED_MASK)&p.RED_MASK|Math.min((n&p.GREEN_MASK)+((r&p.GREEN_MASK)>>8)*a,p.GREEN_MASK)&p.GREEN_MASK|Math.min((n&p.BLUE_MASK)+((r&p.BLUE_MASK)*a>>8),p.BLUE_MASK)},subtract:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|Math.max((n&p.RED_MASK)-((r&p.RED_MASK)>>8)*a,p.GREEN_MASK)&p.RED_MASK|Math.max((n&p.GREEN_MASK)-((r&p.GREEN_MASK)>>8)*a,p.BLUE_MASK)&p.GREEN_MASK|Math.max((n&p.BLUE_MASK)-((r&p.BLUE_MASK)*a>>8),0)},lightest:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|Math.max(n&p.RED_MASK,((r&p.RED_MASK)>>8)*a)&p.RED_MASK|Math.max(n&p.GREEN_MASK,((r&p.GREEN_MASK)>>8)*a)&p.GREEN_MASK|Math.max(n&p.BLUE_MASK,(r&p.BLUE_MASK)*a>>8)},darkest:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24;return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.mix(n&p.RED_MASK,Math.min(n&p.RED_MASK,((r&p.RED_MASK)>>8)*a),a)&p.RED_MASK|p.mix(n&p.GREEN_MASK,Math.min(n&p.GREEN_MASK,((r&p.GREEN_MASK)>>8)*a),a)&p.GREEN_MASK|p.mix(n&p.BLUE_MASK,Math.min(n&p.BLUE_MASK,(r&p.BLUE_MASK)*a>>8),a)},difference:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=o>u?o-u:u-o,m=s>c?s-c:c-s,g=i>l?i-l:l-i;return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))},exclusion:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=o+u-(o*u>>7),m=s+c-(s*c>>7),g=i+l-(i*l>>7);return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))},multiply:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=o*u>>8,m=s*c>>8,g=i*l>>8;return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))},screen:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=255-((255-o)*(255-u)>>8),m=255-((255-s)*(255-c)>>8),g=255-((255-i)*(255-l)>>8);return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))},hard_light:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=128>u?o*u>>7:255-((255-o)*(255-u)>>7),m=128>c?s*c>>7:255-((255-s)*(255-c)>>7),g=128>l?i*l>>7:255-((255-i)*(255-l)>>7);return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))},soft_light:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=(o*u>>7)+(o*o>>8)-(o*o*u>>15),m=(s*c>>7)+(s*s>>8)-(s*s*c>>15),g=(i*l>>7)+(i*i>>8)-(i*i*l>>15);return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))},overlay:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=128>o?o*u>>7:255-((255-o)*(255-u)>>7),m=128>s?s*c>>7:255-((255-s)*(255-c)>>7),g=128>i?i*l>>7:255-((255-i)*(255-l)>>7);return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))},dodge:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=255===u?255:p.peg((o<<8)/(255-u)),m=255===c?255:p.peg((s<<8)/(255-c)),g=255===l?255:p.peg((i<<8)/(255-l));return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))},burn:function(e,t){var n=p.rgbaToInt(e),r=p.rgbaToInt(t),a=(r&p.ALPHA_MASK)>>>24,o=(n&p.RED_MASK)>>16,s=(n&p.GREEN_MASK)>>8,i=n&p.BLUE_MASK,u=(r&p.RED_MASK)>>16,c=(r&p.GREEN_MASK)>>8,l=r&p.BLUE_MASK,h=0===u?0:255-p.peg((255-o<<8)/u),m=0===c?0:255-p.peg((255-s<<8)/c),g=0===l?0:255-p.peg((255-i<<8)/l);return Math.min(((n&p.ALPHA_MASK)>>>24)+a,255)<<24|p.peg(o+((h-o)*a>>8))<<16|p.peg(s+((m-s)*a>>8))<<8|p.peg(i+((g-i)*a>>8))}},p.color=function(e,t,n,r){function a(e,t,n){e=e/redRange*360,t=t/greenRange*100,n=n/blueRange*100;var r=Math.round(n/100*255);if(0===t)return[r,r,r];var a=e%360,o=a%60,s=Math.round(n*(100-t)/1e4*255),i=Math.round(n*(6e3-t*o)/6e5*255),u=Math.round(n*(6e3-t*(60-o))/6e5*255);switch(Math.floor(a/60)){case 0:return[r,u,s];case 1:return[i,r,s];case 2:return[s,r,u];case 3:return[s,i,r];case 4:return[u,s,r];case 5:return[r,s,i]}}function o(e,t){return Math.round(255*(e/t))}var s,i,u,c,l;if(3===arguments.length)l=p.color(e,t,n,opacityRange);else if(4===arguments.length){var h=r/opacityRange;h=isNaN(h)?1:h,curColorMode===p.HSB?(c=a(e,t,n),s=c[0],i=c[1],u=c[2]):(s=o(e,redRange),i=o(t,greenRange),u=o(n,blueRange)),l="rgba("+s+","+i+","+u+","+h+")"}else if("string"==typeof e){if(l=e,2===arguments.length){var m=l.split(",");m[3]=t/opacityRange+")",l=m.join(",")}}else if(2===arguments.length)l=p.color(e,e,e,t);else if("number"==typeof e&&256>e&&e>=0)l=p.color(e,e,e,opacityRange);else if("number"==typeof e){var g=0;g=0>e?4294967296- -1*e:e;var f=Math.floor(g%4294967296/16777216),d=Math.floor(g%16777216/65536),x=Math.floor(g%65536/256),v=g%256;l=p.color(d,x,v,f)}else l=p.color(redRange,greenRange,blueRange,opacityRange);return l};var verifyChannel=function(e){return e.constructor===Array?e:p.color(e)};p.red=function(e){return parseInt(verifyChannel(e).slice(5),10)},p.green=function(e){return parseInt(verifyChannel(e).split(",")[1],10)},p.blue=function(e){return parseInt(verifyChannel(e).split(",")[2],10)},p.alpha=function(e){return parseInt(255*parseFloat(verifyChannel(e).split(",")[3]),10)},p.lerpColor=function(e,t,n){var r=p.color(e).split(","),a=parseInt(r[0].split("(")[1],10),o=parseInt(r[1],10),s=parseInt(r[2],10),i=parseFloat(r[3].split(")")[0],10),u=p.color(t).split(","),c=parseInt(u[0].split("(")[1],10),l=parseInt(u[1],10),h=parseInt(u[2],10),m=parseFloat(u[3].split(")")[0],10),g=parseInt(p.lerp(a,c,n),10),f=parseInt(p.lerp(o,l,n),10),d=parseInt(p.lerp(s,h,n),10),x=parseFloat(p.lerp(i,m,n),10),v="rgba("+g+","+f+","+d+","+x+")";return v},p.DefaultColor=function(e,t,n){var r=curColorMode;curColorMode=p.RGB;var a=p.color(e/255*redRange,t/255*greenRange,n/255*blueRange);return curColorMode=r,a},p.colorMode=function(e,t,n,r,a){curColorMode=e,arguments.length>=4&&(redRange=t,greenRange=n,blueRange=r),5===arguments.length&&(opacityRange=a),2===arguments.length&&p.colorMode(e,t,t,t,t)},p.blendColor=function(e,t,n){var r=0;switch(n){case p.REPLACE:r=p.modes.replace(e,t);break;case p.BLEND:r=p.modes.blend(e,t);break;case p.ADD:r=p.modes.add(e,t);break;case p.SUBTRACT:r=p.modes.subtract(e,t);break;case p.LIGHTEST:r=p.modes.lightest(e,t);break;case p.DARKEST:r=p.modes.darkest(e,t);break;case p.DIFFERENCE:r=p.modes.difference(e,t);break;case p.EXCLUSION:r=p.modes.exclusion(e,t);break;case p.MULTIPLY:r=p.modes.multiply(e,t);break;case p.SCREEN:r=p.modes.screen(e,t);break;case p.HARD_LIGHT:r=p.modes.hard_light(e,t);break;case p.SOFT_LIGHT:r=p.modes.soft_light(e,t);break;case p.OVERLAY:r=p.modes.overlay(e,t);break;case p.DODGE:r=p.modes.dodge(e,t);break;case p.BURN:r=p.modes.burn(e,t)}return r},p.translate=function(e,t,n){p.use3DContext?forwardTransform.translate(e,t,n):curContext.translate(e,t)},p.scale=function(e,t){curContext.scale(e,t||e)},p.pushMatrix=function(){p.use3DContext?userMatrixStack.load(modelView):curContext.save()},p.popMatrix=function(){p.use3DContext?modelView.set(userMatrixStack.pop()):curContext.restore()},p.resetMatrix=function(){forwardTransform.reset()},p.rotateX=function(e){forwardTransform.rotateX(e)},p.rotateZ=function(e){forwardTransform.rotateZ(e)},p.rotateY=function(e){forwardTransform.rotateY(e)},p.rotate=function(e){p.use3DContext?forwardTransform.rotateZ(e):curContext.rotate(e)},p.pushStyle=function(){curContext.save(),p.pushMatrix();var e={doFill:doFill,doStroke:doStroke,curTint:curTint,curRectMode:curRectMode,curColorMode:curColorMode,redRange:redRange,blueRange:blueRange,greenRange:greenRange,opacityRange:opacityRange,curTextFont:curTextFont,curTextSize:curTextSize};styleArray.push(e)},p.popStyle=function(){var e=styleArray.pop();if(!e)throw"Too many popStyle() without enough pushStyle()";curContext.restore(),p.popMatrix(),doFill=e.doFill,doStroke=e.doStroke,curTint=e.curTint,curRectMode=e.curRectmode,curColorMode=e.curColorMode,redRange=e.redRange,blueRange=e.blueRange,greenRange=e.greenRange,opacityRange=e.opacityRange,curTextFont=e.curTextFont,curTextSize=e.curTextSize},p.year=function(){return(new Date).getYear()+1900},p.month=function(){return(new Date).getMonth()},p.day=function(){return(new Date).getDay()},p.hour=function(){return(new Date).getHours()},p.minute=function(){return(new Date).getMinutes()},p.second=function(){return(new Date).getSeconds()},p.millis=function(){return(new Date).getTime()-start},p.noLoop=function(){doLoop=!1,loopStarted=!1,clearInterval(looping)},p.redraw=function(){var e=((new Date).getTime()-timeSinceLastFPS)/1e3;framesSinceLastFPS++;var t=framesSinceLastFPS/e;e>.5&&(timeSinceLastFPS=(new Date).getTime(),framesSinceLastFPS=0,p.FRAME_RATE=t),p.frameCount++,inDraw=!0,p.use3DContext?(curContext.clear(curContext.COLOR_BUFFER_BIT|curContext.DEPTH_BUFFER_BIT),p.camera(),p.draw()):(p.pushMatrix(),p.draw(),p.popMatrix()),inDraw=!1},p.loop=function(){loopStarted||(looping=window.setInterval(function(){try{try{p.focused=document.hasFocus()}catch(e){}p.redraw()}catch(t){throw window.clearInterval(looping),t}},curMsPerFrame),doLoop=!0,loopStarted=!0)},p.frameRate=function(e){curFrameRate=e,curMsPerFrame=1e3/curFrameRate},p.exit=function(){window.clearInterval(looping)},p.cursor=function(e){curCursor=document.body.style.cursor=e},p.noCursor=function(){curCursor=document.body.style.cursor=p.NOCURSOR},p.link=function(e){window.location=e},p.beginDraw=function(){},p.endDraw=function(){},p.Import=function(){};var contextMenu=function(e){e.preventDefault(),e.stopPropagation()};p.disableContextMenu=function(){curElement.addEventListener("contextmenu",contextMenu,!1)},p.enableContextMenu=function(){curElement.removeEventListener("contextmenu",contextMenu,!1)},p.binary=function(e,t){var n=32;if("string"==typeof e&&e.length>1){var r=e.slice(5,-1).split(","),a=[decToBin(255*r[3],8),decToBin(r[0],8),decToBin(r[1],8),decToBin(r[2],8)],o=a[0]+a[1]+a[2]+a[3];return t?o=o.substr(-t):(o=o.replace(/^0+$/g,"0"),o=o.replace(/^0{1,}1/g,"1")),o}"string"==typeof e&&(e=e.charCodeAt(0),n=t?32:16);var s=decToBin(e,n);return t&&(s=s.substr(-t)),s},p.unbinary=function(e){var t=new RegExp("^[0|1]{8}$"),n=0;if(isNaN(e))throw"NaN_Err";if(1===arguments.length||8===e.length){if(t.test(e)){for(var r=0;8>r;r++)n+=Math.pow(2,r)*parseInt(e.charAt(7-r),10);return n+""}throw"notBinary: the value passed into unbinary was not an 8 bit binary number"}throw"longErr"},p.nfs=function(e,t,n){var r,a,o,s;if("object"==typeof e&&e.constructor===Array){r=new Array(0),a=e.length;for(var i=0;a>i;i++)r[i]=p.nfs(e[i],t,n)}else if(3===arguments.length){var u=0>e?!0:!1;0===n&&(n=1),s=0>n?Math.round(e):Math.round(e*Math.pow(10,n))/Math.pow(10,n);var c=Math.abs(s).toString().split(".");for(o=t-c[0].length;o>0;o--)c[0]="0"+c[0];if(2===c.length||n>0){for(c[1]=2===c.length?c[1]:"",o=n-c[1].length;o>0;o--)c[1]+="0";r=c.join(".")}else r=c[0];r=(u?"-":" ")+r}else 2===arguments.length&&(r=p.nfs(e,t,-1));return r},p.nfp=function(e,t,n){var r,a,o,s;if("object"==typeof e&&e.constructor===Array){r=new Array(0),a=e.length;for(var i=0;a>i;i++)r[i]=p.nfp(e[i],t,n)}else if(3===arguments.length){var u=0>e?!0:!1;0===n&&(n=1),s=0>n?Math.round(e):Math.round(e*Math.pow(10,n))/Math.pow(10,n);var c=Math.abs(s).toString().split(".");for(o=t-c[0].length;o>0;o--)c[0]="0"+c[0];if(2===c.length||n>0){for(c[1]=2===c.length?c[1]:"",o=n-c[1].length;o>0;o--)c[1]+="0";r=c.join(".")}else r=c[0];r=(u?"-":"+")+r}else 2===arguments.length&&(r=p.nfp(e,t,-1));return r},p.nfc=function(e,t){var n,r=t>=0?t:0;if("object"==typeof e){n=new Array(0);for(var a=0;a<e.length;a++)n[a]=p.nfc(e[a],r)}else if(2===arguments.length){var o=p.nfs(e,0,r),s=new Array(0);s=o.split(".");for(var i=s[0],u=s.length>1?"."+s[1]:"",c=/(\d+)(\d{3})/;c.test(i);)i=i.replace(c,"$1,$2");n=i+u}else 1===arguments.length&&(n=p.nfc(e,0));return n};var decimalToHex=function(e,t){t="undefined"==typeof t||null===t?t=8:t,0>e&&(e=4294967295+e+1);for(var n=Number(e).toString(16).toUpperCase();n.length<t;)n="0"+n;return n.length>=t&&(n=n.substring(n.length-t,n.length)),n};p.hex=function t(e,n){var r="",a=/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,\d?\.?\d*)?\)$/i;return r=1===arguments.length?t(e,8):a.test(e)?decimalToHex(p.rgbaToInt(e),n):decimalToHex(e,n)},p.unhex=function(e){for(var t=0,n=1,r=0,a=e.length-1,o=a;o>=0;o--){try{switch(e[o]){case"0":r=0;break;case"1":r=1;break;case"2":r=2;break;case"3":r=3;break;case"4":r=4;break;case"5":r=5;break;case"6":r=6;break;case"7":r=7;break;case"8":r=8;break;case"9":r=9;break;case"A":case"a":r=10;break;case"B":case"b":r=11;break;case"C":case"c":r=12;break;case"D":case"d":r=13;break;case"E":case"e":r=14;break;case"F":case"f":r=15;break;default:return 0}t+=r*n,n*=16}catch(s){Processing.debug(s)}t>2147483647&&(t-=4294967296)}return t},p.loadStrings=function(e){return ajax(e).split("\n")},p.nf=function(){var e,t,n,r,a,o,s,i,u;if(2===arguments.length&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&-1===(arguments[0]+"").indexOf(".")){for(t=arguments[0],n=arguments[1],s=0>t,s&&(t=Math.abs(t)),e=""+t,u=n-e.length;u>0;u--)e="0"+e;s&&(e="-"+e)}else if(2===arguments.length&&"object"==typeof arguments[0]&&arguments[0].constructor===Array&&"number"==typeof arguments[1])for(r=arguments[0],n=arguments[1],e=new Array(r.length),u=0;u<r.length&&void 0!==e;u++)i=this.nf(r[u],n),void 0===i?e=void 0:e[u]=i;else if(3===arguments.length&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&"number"==typeof arguments[2]&&(arguments[0]+"").indexOf(".")>=0){for(t=arguments[0],a=arguments[1],o=arguments[2],s=0>t,s&&(t=Math.abs(t)),0>o&&Math.floor(t)%2===1&&t-Math.floor(t)>=.5&&(t+=1),e=""+t,u=a-e.indexOf(".");u>0;u--)e="0"+e;var c=e.length-e.indexOf(".")-1;if(o>=c)for(u=o-(e.length-e.indexOf(".")-1);u>0;u--)e+="0";else o>0?e=e.substring(0,e.length-(c-o)):0>o&&(e=e.substring(0,e.indexOf(".")));s&&(e="-"+e)}else if(3===arguments.length&&"object"==typeof arguments[0]&&arguments[0].constructor===Array&&"number"==typeof arguments[1]&&"number"==typeof arguments[2])for(r=arguments[0],a=arguments[1],o=arguments[2],e=new Array(r.length),u=0;u<r.length&&void 0!==e;u++)i=this.nf(r[u],a,o),void 0===i?e=void 0:e[u]=i;return e},p.matchAll=function(e,t){var n,r=0,a=[],o=new RegExp(t,"g");for(n=a[r]=o.exec(e);n;)r++,n=a[r]=o.exec(e);return a.slice(0,r)},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},String.prototype.equals=function(e){var t=!0;if(this.length===e.length){for(var n=0;n<this.length;n++)if(this.charAt(n)!==e.charAt(n)){t=!1;break}}else t=!1;return t},p.match=function(e,t){return e.match(t)},p.lnPrinted=function(){},p.printed=function(){},p.println=function(){if(arguments.callee.caller){var e=arguments.callee.caller.name.toString();p.ln=arguments.length>1&&"print"!==e?arguments:arguments[0],"print"===e?p.printed(arguments):p.lnPrinted()}},p.str=function(e){return e+""},p.print=function(){p.println(arguments[0])},p.char=function(e){return e},p.trim=function(e){var t;if("object"==typeof e&&e.constructor===Array){t=new Array(0);for(var n=0;n<e.length;n++)t[n]=p.trim(e[n])}else t=e.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"");return t},p.sq=function(e){return e*e},p.sqrt=function(e){return Math.sqrt(e)},p.int=function(e){var t;if((e||0===e)&&1===arguments.length)if("number"==typeof e){var n=0>e;n&&(e=Math.abs(e)),t=Math.floor(e),n&&(t=-t)}else if("boolean"==typeof e)t=e===!0?1:0;else if("string"==typeof e)e.indexOf(" ")>-1?t=0:1===e.length?t=e.charCodeAt(0):(t=parseInt(e,10),isNaN(t)&&(t=0));else if("object"==typeof e&&e.constructor===Array){t=new Array(e.length);for(var r=0;r<e.length;r++)t[r]="string"==typeof e[r]&&e[r].indexOf(".")>-1?0:p.int(e[r])}return t},p.min=function(){var e;e=1===arguments.length&&"object"==typeof arguments[0]&&arguments[0].constructor===Array?arguments[0]:arguments;for(var t=0;t<e.length;t++)if("number"!=typeof e[t])return void 0;return Math.min.apply(this,e)},p.max=function(){var e;e=1===arguments.length&&"object"==typeof arguments[0]&&arguments[0].constructor===Array?arguments[0]:arguments;for(var t=0;t<e.length;t++)if("number"!=typeof e[t])return void 0;return Math.max.apply(this,e)},p.floor=function(e){return Math.floor(e)},p.float=function(e){return parseFloat(e)},p.ceil=function(e){return Math.ceil(e)},p.round=function(e){return Math.round(e)},p.lerp=function(e,t,n){return(t-e)*n+e},p.abs=function(e){return Math.abs(e)},p.cos=function(e){return Math.cos(e)},p.sin=function(e){return Math.sin(e)},p.pow=function(e,t){return Math.pow(e,t)},p.tan=function(e){return Math.tan(e)},p.atan=function(e){return Math.atan(e)},p.atan2=function(e,t){return Math.atan2(e,t)},p.radians=function(e){return e/180*p.PI},p.log=function(e){return Math.log(e)},p.exp=function(e){return Math.exp(e)},p.asin=function(e){return Math.asin(e)},p.acos=function(e){return Math.acos(e)},p.boolean=function(e){var t=!1;if(e&&"number"==typeof e&&0!==e)t=!0;else if(e&&"boolean"==typeof e&&e===!0)t=!0;else if(e&&"string"==typeof e&&"true"===e.toLowerCase())t=!0;else if(e&&"object"==typeof e&&e.constructor===Array){t=new Array(e.length);for(var n=0;n<e.length;n++)t[n]=p.boolean(e[n])}return t},p.dist=function(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))},p.map=function(e,t,n,r,a){return r+(a-r)*((e-t)/(n-t))},p.mag=function(e,t,n){return 2===arguments.length?Math.sqrt(e*e+t*t):3===arguments.length?Math.sqrt(e*e+t*t+n*n):void 0},p.Random=function(){var e,t=!1;this.nextGaussian=function(){if(t)return t=!1,e;var n,r,a;do n=2*p.random(1)-1,r=2*p.random(1)-1,a=n*n+r*r;while(a>=1||0===a);var o=Math.sqrt(-2*Math.log(a)/a);return e=r*o,t=!0,n*o}},p.byte=function(e){return e||0},p.norm=function(e,t,n){var r=n-t;return 1/r*e-1/r*t},p.random=function(e,t){return 2===arguments.length?e+Math.random()*(t-e):Math.random()*e};var noiseGen=function(e,t){var n=e+57*t;return n=n<<13^n,Math.abs(1-(n*(n*n*15731+789221)+1376312589&2147483647)/1073741824)},smoothedNoise=function(e,t){var n=(noiseGen(e-1,t-1)+noiseGen(e+1,t-1)+noiseGen(e-1,t+1)+noiseGen(e+1,t+1))/16,r=(noiseGen(e-1,t)+noiseGen(e+1,t)+noiseGen(e,t-1)+noiseGen(e,t+1))/8,a=noiseGen(e,t)/4;return n+r+a},interpolate=function(e,t,n){var r=n*p.PI,a=.5*(1-Math.cos(r));return e*(1-a)+t*a},interpolatedNoise=function(e,t){var n=Math.floor(e),r=e-n,a=Math.floor(t),o=t-a,s=smoothedNoise(n,a),i=smoothedNoise(n+1,a),u=smoothedNoise(n,a+1),c=smoothedNoise(n+1,a+1),p=interpolate(s,i,r),l=interpolate(u,c,r);
return interpolate(p,l,o)},perlinNoise_2D=function(e,t){for(var n=0,r=.25,a=3,o=0;a>=o;o++){var s=Math.pow(2,o),i=Math.pow(r,o);n+=interpolatedNoise(e*s,t*s)*i}return n},perlinNoise_3D=function(){return 0};p.noise=function(e,t,n){switch(arguments.length){case 2:return perlinNoise_2D(e,t);case 3:return perlinNoise_3D(e,t,n);case 1:return perlinNoise_2D(e,e)}},p.constrain=function(e,t,n){return Math.min(Math.max(e,t),n)},p.degrees=function(e){return e=180*e/p.PI,0>e&&(e=360+e),e},p.size=function(e,t,n){if(n&&"OPENGL"===n){try{curContext||(curContext=curElement.getContext("experimental-webgl"))}catch(r){Processing.debug(r)}if(!curContext)throw"OPENGL 3D context is not supported on this browser.";curContext.viewport(0,0,curElement.width,curElement.height),curContext.clearColor(.8,.8,.8,1),curContext.enable(curContext.DEPTH_TEST);var a=curContext.createShader(curContext.VERTEX_SHADER);if(curContext.shaderSource(a,vertexShaderSource),curContext.compileShader(a),!curContext.getShaderParameter(a,curContext.COMPILE_STATUS))throw curContext.getShaderInfoLog(a);var o=curContext.createShader(curContext.FRAGMENT_SHADER);if(curContext.shaderSource(o,fragmentShaderSource),curContext.compileShader(o),!curContext.getShaderParameter(o,curContext.COMPILE_STATUS))throw curContext.getShaderInfoLog(o);if(programObject=curContext.createProgram(),curContext.attachShader(programObject,a),curContext.attachShader(programObject,o),curContext.linkProgram(programObject),!curContext.getProgramParameter(programObject,curContext.LINK_STATUS))throw"Error linking shaders.";curContext.useProgram(programObject),boxBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,boxBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,newWebGLArray(boxVerts),curContext.DYNAMIC_DRAW),boxOutlineBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,boxOutlineBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,newWebGLArray(boxOutlineVerts),curContext.DYNAMIC_DRAW),p.camera(),p.perspective(),userMatrixStack=new PMatrix3DStack,p.stroke(0),p.fill(255)}else"undefined"==typeof curContext&&(curContext=curElement.getContext("2d"));var s={fillStyle:curContext.fillStyle,strokeStyle:curContext.strokeStyle,lineCap:curContext.lineCap,lineJoin:curContext.lineJoin};curElement.width=p.width=e,curElement.height=p.height=t;for(var i in s)s&&(curContext[i]=s[i]);hasBackground&&p.background()};var PVector=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},createPVectorMethod=function(e){return function(t,n){var r=t.get();return r[e](n),r}},createSimplePVectorMethod=function(e){return function(t,n){return t[e](n)}},simplePVMethods="dist dot cross".split(" "),method=simplePVMethods.length;for(PVector.angleBetween=function(e,t){return Math.acos(e.dot(t)/(e.mag()*t.mag()))},PVector.prototype={set:function(e,t,n){1===arguments.length?this.set(e.x||e[0],e.y||e[1],e.z||e[2]):(this.x=e,this.y=t,this.z=n)},get:function(){return new PVector(this.x,this.y,this.z)},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},add:function(e,t,n){3===arguments.length?(this.x+=e,this.y+=t,this.z+=n):1===arguments.length&&(this.x+=e.x,this.y+=e.y,this.z+=e.z)},sub:function(e,t,n){3===arguments.length?(this.x-=e,this.y-=t,this.z-=n):1===arguments.length&&(this.x-=e.x,this.y-=e.y,this.z-=e.z)},mult:function(e){"number"==typeof e?(this.x*=e,this.y*=e,this.z*=e):"object"==typeof e&&(this.x*=e.x,this.y*=e.y,this.z*=e.z)},div:function(e){"number"==typeof e?(this.x/=e,this.y/=e,this.z/=e):"object"==typeof e&&(this.x/=e.x,this.y/=e.y,this.z/=e.z)},dist:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)},dot:function(e,t,n){var r;return 3===arguments.length?r=this.x*e+this.y*t+this.z*n:1===arguments.length&&(r=this.x*e.x+this.y*e.y+this.z*e.z),r},cross:function(e){var t=this.y*e.z-e.y*this.z,n=this.z*e.x-e.z*this.x,r=this.x*e.y-e.x*this.y;return new PVector(t,n,r)},normalize:function(){var e=this.mag();e>0&&this.div(e)},limit:function(e){this.mag()>e&&(this.normalize(),this.mult(e))},heading2D:function(){var e=Math.atan2(-this.y,this.x);return-e},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};method--;)PVector[simplePVMethods[method]]=createSimplePVectorMethod(simplePVMethods[method]);for(method in PVector.prototype)PVector.prototype.hasOwnProperty(method)&&!PVector.hasOwnProperty(method)&&(PVector[method]=createPVectorMethod(method));p.PVector=PVector;var PMatrix3D=function(){this.reset()};PMatrix3D.prototype={set:function(){if(16===arguments.length){var e=arguments;this.set([e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]])}else 1===arguments.length&&arguments[0]instanceof PMatrix3D?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var e=new PMatrix3D;return e.set(this.elements),e},reset:function(){this.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},array:function(){return this.elements.slice()},translate:function(e,t,n){"undefined"==typeof n&&(e=0),this.elements[3]+=e*this.elements[0]+t*this.elements[1]+n*this.elements[2],this.elements[7]+=e*this.elements[4]+t*this.elements[5]+n*this.elements[6],this.elements[11]+=e*this.elements[8]+t*this.elements[9]+n*this.elements[10],this.elements[15]+=e*this.elements[12]+t*this.elements[13]+n*this.elements[14]},transpose:function(){var e=this.elements.slice();this.elements[0]=e[0],this.elements[1]=e[4],this.elements[2]=e[8],this.elements[3]=e[12],this.elements[4]=e[1],this.elements[5]=e[5],this.elements[6]=e[9],this.elements[7]=e[13],this.elements[8]=e[2],this.elements[9]=e[6],this.elements[10]=e[10],this.elements[11]=e[14],this.elements[12]=e[3],this.elements[13]=e[7],this.elements[14]=e[11],this.elements[15]=e[15]},mult:function(e,t){var n,r,a,o;return e instanceof PVector?(n=e.x,r=e.y,a=e.z,o=1,t||(t=new PVector)):e instanceof Array&&(n=e[0],r=e[1],a=e[2],o=e[3]||1,(!t||3!==t.length&&4!==t.length)&&(t=[0,0,0])),t instanceof Array&&(3===t.length?(t[0]=this.elements[0]*n+this.elements[1]*r+this.elements[2]*a+this.elements[3],t[1]=this.elements[4]*n+this.elements[5]*r+this.elements[6]*a+this.elements[7],t[2]=this.elements[8]*n+this.elements[9]*r+this.elements[10]*a+this.elements[11]):4===t.length&&(t[0]=this.elements[0]*n+this.elements[1]*r+this.elements[2]*a+this.elements[3]*o,t[1]=this.elements[4]*n+this.elements[5]*r+this.elements[6]*a+this.elements[7]*o,t[2]=this.elements[8]*n+this.elements[9]*r+this.elements[10]*a+this.elements[11]*o,t[3]=this.elements[12]*n+this.elements[13]*r+this.elements[14]*a+this.elements[15]*o)),t instanceof PVector&&(t.x=this.elements[0]*n+this.elements[1]*r+this.elements[2]*a+this.elements[3],t.y=this.elements[4]*n+this.elements[5]*r+this.elements[6]*a+this.elements[7],t.z=this.elements[8]*n+this.elements[9]*r+this.elements[10]*a+this.elements[11]),t},preApply:function(){if(1===arguments.length&&arguments[0]instanceof PMatrix3D)this.preApply(arguments[0].array());else if(16===arguments.length){var e=arguments;this.preApply([e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]])}else if(1===arguments.length&&arguments[0]instanceof Array){for(var t=arguments[0],n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0,a=0;4>a;a++)for(var o=0;4>o;o++,r++)n[r]+=this.elements[o+0]*t[4*a+0]+this.elements[o+4]*t[4*a+1]+this.elements[o+8]*t[4*a+2]+this.elements[o+12]*t[4*a+3];this.elements=n.slice()}},apply:function(){if(1===arguments.length&&arguments[0]instanceof PMatrix3D)this.apply(arguments[0].array());else if(16===arguments.length){var e=arguments;this.apply([e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]])}else if(1===arguments.length&&arguments[0]instanceof Array){for(var t=arguments[0],n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0,a=0;4>a;a++)for(var o=0;4>o;o++,r++)n[r]+=this.elements[4*a+0]*t[o+0]+this.elements[4*a+1]*t[o+4]+this.elements[4*a+2]*t[o+8]+this.elements[4*a+3]*t[o+12];this.elements=n.slice()}},rotateX:function(e){var t=p.cos(e),n=p.sin(e);this.apply([1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1])},rotateY:function(e){var t=p.cos(e),n=p.sin(e);this.apply([t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1])},rotateZ:function(e){var t=Math.cos(e),n=Math.sin(e);this.apply([t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1])},scale:function(e,t,n){!e||t||n?e&&t&&!n&&(n=1):t=n=e,e&&t&&n&&(this.elements[0]*=e,this.elements[1]*=t,this.elements[2]*=n,this.elements[4]*=e,this.elements[5]*=t,this.elements[6]*=n,this.elements[8]*=e,this.elements[9]*=t,this.elements[10]*=n,this.elements[12]*=e,this.elements[13]*=t,this.elements[14]*=n)},invert:function(){var e=[],t=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4],n=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4],r=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4],a=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5],o=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5],s=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6],i=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12],u=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12],c=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12],p=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13],l=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13],h=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14],m=t*h-n*l+r*p+a*c-o*u+s*i;if(Math.abs(m)<=1e-9)return!1;e[0]=+this.elements[5]*h-this.elements[6]*l+this.elements[7]*p,e[4]=-this.elements[4]*h+this.elements[6]*c-this.elements[7]*u,e[8]=+this.elements[4]*l-this.elements[5]*c+this.elements[7]*i,e[12]=-this.elements[4]*p+this.elements[5]*u-this.elements[6]*i,e[1]=-this.elements[1]*h+this.elements[2]*l-this.elements[3]*p,e[5]=+this.elements[0]*h-this.elements[2]*c+this.elements[3]*u,e[9]=-this.elements[0]*l+this.elements[1]*c-this.elements[3]*i,e[13]=+this.elements[0]*p-this.elements[1]*u+this.elements[2]*i,e[2]=+this.elements[13]*s-this.elements[14]*o+this.elements[15]*a,e[6]=-this.elements[12]*s+this.elements[14]*r-this.elements[15]*n,e[10]=+this.elements[12]*o-this.elements[13]*r+this.elements[15]*t,e[14]=-this.elements[12]*a+this.elements[13]*n-this.elements[14]*t,e[3]=-this.elements[9]*s+this.elements[10]*o-this.elements[11]*a,e[7]=+this.elements[8]*s-this.elements[10]*r+this.elements[11]*n,e[11]=-this.elements[8]*o+this.elements[9]*r-this.elements[11]*t,e[15]=+this.elements[8]*a-this.elements[9]*n+this.elements[10]*t;var g=1/m;return e[0]*=g,e[1]*=g,e[2]*=g,e[3]*=g,e[4]*=g,e[5]*=g,e[6]*=g,e[7]*=g,e[8]*=g,e[9]*=g,e[10]*=g,e[11]*=g,e[12]*=g,e[13]*=g,e[14]*=g,e[15]*=g,this.elements=e.slice(),!0},toString:function(){for(var e="",t=0;15>t;t++)e+=this.elements[t]+", ";return e+=this.elements[15]},print:function(){var e="",t=3;e+=p.nfs(this.elements[0],t,4)+" "+p.nfs(this.elements[1],t,4)+" "+p.nfs(this.elements[2],t,4)+" "+p.nfs(this.elements[3],t,4)+"\n",e+=p.nfs(this.elements[4],t,4)+" "+p.nfs(this.elements[5],t,4)+" "+p.nfs(this.elements[6],t,4)+" "+p.nfs(this.elements[7],t,4)+"\n",e+=p.nfs(this.elements[8],t,4)+" "+p.nfs(this.elements[9],t,4)+" "+p.nfs(this.elements[10],t,4)+" "+p.nfs(this.elements[11],t,4)+"\n",e+=p.nfs(this.elements[12],t,4)+" "+p.nfs(this.elements[13],t,4)+" "+p.nfs(this.elements[14],t,4)+" "+p.nfs(this.elements[15],t,4)+"\n","object"==typeof console&&"function"==typeof console.log&&console.log(e)}},PMatrix3DStack.prototype.load=function(){var e=new PMatrix3D;e.set(1===arguments.length?arguments[0]:arguments),this.matrixStack.push(e)},PMatrix3DStack.prototype.push=function(){this.matrixStack.push(this.peek())},PMatrix3DStack.prototype.pop=function(){return this.matrixStack.pop()},PMatrix3DStack.prototype.peek=function(){var e=new PMatrix3D;return e.set(this.matrixStack[this.matrixStack.length-1]),e},PMatrix3DStack.prototype.mult=function(e){this.matrixStack[this.matrixStack.length-1].apply(e)},p.camera=function(e,t,n,r,a,o,s,i,u){if(0===arguments.length)cameraX=curElement.width/2,cameraY=curElement.height/2,cameraZ=cameraY/Math.tan(cameraFOV/2),p.camera(cameraX,cameraY,cameraZ,cameraX,cameraY,0,0,1,0);else{var c=new p.PVector(e-r,t-a,n-o),l=new p.PVector(s,i,u);c.normalize();var h=p.PVector.cross(l,c);l=p.PVector.cross(c,h),h.normalize(),l.normalize(),cam=new PMatrix3D,cam.set(h.x,h.y,h.z,0,l.x,l.y,l.z,0,c.x,c.y,c.z,0,0,0,0,1),cam.translate(-e,-t,-n),cameraInv=new PMatrix3D,cameraInv.set(h.x,h.y,h.z,0,l.x,l.y,l.z,0,c.x,c.y,c.z,0,0,0,0,1),cameraInv.translate(e,t,n),modelView=new PMatrix3D,modelView.set(cam),forwardTransform=modelView,modelViewInv=new PMatrix3D,modelViewInv.set(cameraInv)}},p.perspective=function(e,t,n,r){if(0===arguments.length)cameraY=curElement.height/2,cameraZ=cameraY/Math.tan(cameraFOV/2),cameraNear=cameraZ/10,cameraFar=10*cameraZ,cameraAspect=curElement.width/curElement.height,p.perspective(cameraFOV,cameraAspect,cameraNear,cameraFar);else{var a,o,s,i;a=n*Math.tan(e/2),o=-a,s=a*t,i=o*t,p.frustum(i,s,o,a,n,r)}},p.frustum=function(e,t,n,r,a,o){frustumMode=!0,projection=new PMatrix3D,projection.set(2*a/(t-e),0,(t+e)/(t-e),0,0,2*a/(r-n),(r+n)/(r-n),0,0,0,-(o+a)/(o-a),-(2*o*a)/(o-a),0,0,-1,0)},p.ortho=function(e,t,n,r,a,o){if(0===arguments.length)p.ortho(0,p.width,0,p.height,-10,10);else{var s=2/(t-e),i=2/(r-n),u=-2/(o-a),c=-(t+e)/(t-e),l=-(r+n)/(r-n),h=-(o+a)/(o-a);projection=new PMatrix3D,projection.set(s,0,0,c,0,i,0,l,0,0,u,h,0,0,0,1),frustumMode=!1}},p.printProjection=function(){projection.print()},p.printCamera=function(){cam.print()},p.box=function(e,t,n){if(curContext){t&&n||(t=n=e);var r=new PMatrix3D;r.scale(e,t,n);var a=new PMatrix3D;a.scale(1,-1,1),a.apply(modelView.array()),uniformMatrix(programObject,"model",!0,r.array()),uniformMatrix(programObject,"view",!0,a.array()),uniformMatrix(programObject,"projection",!0,projection.array()),uniformf(programObject,"color",[0,0,0,1]),vertexAttribPointer(programObject,"Vertex",3,boxOutlineBuffer),curContext.lineWidth(1),curContext.drawArrays(curContext.LINES,0,boxOutlineVerts.length/3),curContext.enable(curContext.POLYGON_OFFSET_FILL),curContext.polygonOffset(1,1),uniformf(programObject,"color",[1,1,1,1]),vertexAttribPointer(programObject,"Vertex",3,boxBuffer),curContext.drawArrays(curContext.TRIANGLES,0,boxVerts.length/3),curContext.disable(curContext.POLYGON_OFFSET_FILL)}},p.fill=function(){doFill=!0,curContext.fillStyle=p.color.apply(this,arguments)},p.noFill=function(){doFill=!1},p.stroke=function(){doStroke=!0,curContext.strokeStyle=p.color.apply(this,arguments)},p.noStroke=function(){doStroke=!1},p.strokeWeight=function(e){curContext.lineWidth=e},p.strokeCap=function(e){curContext.lineCap=e},p.strokeJoin=function(e){curContext.lineJoin=e},p.smooth=function(){},p.noSmooth=function(){},p.Point=function n(e,t){this.x=e,this.y=t,this.copy=function(){return new n(e,t)}},p.point=function(e,t){var n=curContext.fillStyle;curContext.fillStyle=curContext.strokeStyle,curContext.fillRect(Math.round(e),Math.round(t),1,1),curContext.fillStyle=n},p.beginShape=function(e){curShape=e,curShapeCount=0,curvePoints=[]},p.endShape=function(e){0!==curShapeCount&&(e&&doFill&&curContext.lineTo(firstX,firstY),doFill&&curContext.fill(),doStroke&&curContext.stroke(),curContext.closePath(),curShapeCount=0,pathOpen=!1),pathOpen&&(doFill&&curContext.fill(),doStroke&&curContext.stroke(),curContext.closePath(),curShapeCount=0,pathOpen=!1)},p.vertex=function(e,t,n,r,a,o){0===curShapeCount&&curShape!==p.POINTS?(pathOpen=!0,curContext.beginPath(),curContext.moveTo(e,t),firstX=e,firstY=t):curShape===p.POINTS?p.point(e,t):2===arguments.length?((curShape!==p.QUAD_STRIP||2!==curShapeCount)&&curContext.lineTo(e,t),curShape===p.TRIANGLE_STRIP&&(2===curShapeCount&&(p.endShape(p.CLOSE),pathOpen=!0,curContext.beginPath(),curContext.moveTo(prevX,prevY),curContext.lineTo(e,t),curShapeCount=1),firstX=prevX,firstY=prevY),curShape===p.TRIANGLE_FAN&&2===curShapeCount&&(p.endShape(p.CLOSE),pathOpen=!0,curContext.beginPath(),curContext.moveTo(firstX,firstY),curContext.lineTo(e,t),curShapeCount=1),curShape===p.QUAD_STRIP&&3===curShapeCount&&(curContext.lineTo(prevX,prevY),p.endShape(p.CLOSE),pathOpen=!0,curContext.beginPath(),curContext.moveTo(prevX,prevY),curContext.lineTo(e,t),curShapeCount=1),curShape===p.QUAD_STRIP&&(firstX=secondX,firstY=secondY,secondX=prevX,secondY=prevY)):4===arguments.length?curShapeCount>1&&(curContext.moveTo(prevX,prevY),curContext.quadraticCurveTo(firstX,firstY,e,t),curShapeCount=1):6===arguments.length&&curContext.bezierCurveTo(e,t,n,r,a,o),prevX=e,prevY=t,curShapeCount++,(curShape===p.LINES&&2===curShapeCount||curShape===p.TRIANGLES&&3===curShapeCount||curShape===p.QUADS&&4===curShapeCount)&&p.endShape(p.CLOSE)},p.curveVertex=function(e,t){if(curvePoints.length<3)curvePoints.push([e,t]);else{var n=[],r=1-curTightness;curvePoints.push([e,t]),n[0]=[curvePoints[1][0],curvePoints[1][1]],n[1]=[curvePoints[1][0]+(r*curvePoints[2][0]-r*curvePoints[0][0])/6,curvePoints[1][1]+(r*curvePoints[2][1]-r*curvePoints[0][1])/6],n[2]=[curvePoints[2][0]+(r*curvePoints[1][0]-r*curvePoints[3][0])/6,curvePoints[2][1]+(r*curvePoints[1][1]-r*curvePoints[3][1])/6],n[3]=[curvePoints[2][0],curvePoints[2][1]],pathOpen?curShapeCount=1:p.vertex(n[0][0],n[0][1]),p.vertex(n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]),curvePoints.shift()}},p.curve=function(e,t,n,r,a,o,s,i){p.beginShape(),p.curveVertex(e,t),p.curveVertex(n,r),p.curveVertex(a,o),p.curveVertex(s,i),p.endShape()},p.curveTightness=function(e){curTightness=e},p.bezierVertex=p.vertex,p.rectMode=function(e){curRectMode=e},p.imageMode=function(){},p.ellipseMode=function(e){curEllipseMode=e},p.arc=function(e,t,n,r,a,o){0>=n||(curEllipseMode===p.CORNER&&(e+=n/2,t+=r/2),curContext.moveTo(e,t),curContext.beginPath(),curContext.arc(e,t,curEllipseMode===p.CENTER_RADIUS?n:n/2,a,o,!1),doStroke&&curContext.stroke(),curContext.lineTo(e,t),doFill&&curContext.fill(),curContext.closePath())},p.line=function(e,t,n,r){curContext.beginPath(),curContext.moveTo(e||0,t||0),curContext.lineTo(n||0,r||0),curContext.stroke(),curContext.closePath()},p.bezier=function(e,t,n,r,a,o,s,i){curContext.beginPath(),curContext.moveTo(e,t),curContext.bezierCurveTo(n,r,a,o,s,i),curContext.stroke(),curContext.closePath()},p.bezierPoint=function(e,t,n,r,a){return(1-a)*(1-a)*(1-a)*e+3*(1-a)*(1-a)*a*t+3*(1-a)*a*a*n+a*a*a*r},p.bezierTangent=function(e,t,n,r,a){return 3*a*a*(-e+3*t-3*n+r)+6*a*(e-2*t+n)+3*(-e+t)},p.curvePoint=function(e,t,n,r,a){return.5*(2*t+(-e+n)*a+(2*e-5*t+4*n-r)*a*a+(-e+3*t-3*n+r)*a*a*a)},p.curveTangent=function(e,t,n,r,a){return.5*(-e+n+2*(2*e-5*t+4*n-r)*a+3*(-e+3*t-3*n+r)*a*a)},p.triangle=function(e,t,n,r,a,o){p.beginShape(),p.vertex(e,t),p.vertex(n,r),p.vertex(a,o),p.endShape()},p.quad=function(e,t,n,r,a,o,s,i){curContext.lineCap="square",p.beginShape(),p.vertex(e,t),p.vertex(n,r),p.vertex(a,o),p.vertex(s,i),p.endShape()},p.rect=function(e,t,n,r){if(n||r){curContext.beginPath();var a=0,o=0;curRectMode===p.CORNERS&&(n-=e,r-=t),curRectMode===p.RADIUS&&(n*=2,r*=2),(curRectMode===p.CENTER||curRectMode===p.RADIUS)&&(e-=n/2,t-=r/2),curContext.rect(Math.round(e)-a,Math.round(t)-a,Math.round(n)+o,Math.round(r)+o),doFill&&curContext.fill(),doStroke&&curContext.stroke(),curContext.closePath()}},p.ellipse=function(e,t,n,r){if(e=e||0,t=t||0,!(0>=n&&0>=r)){curContext.beginPath(),curEllipseMode===p.RADIUS&&(n*=2,r*=2);var a=0;if(n===r)curContext.arc(e-a,t-a,n/2,0,p.TWO_PI,!1);else{var o=n/2,s=r/2,i=.5522847498307933,u=i*o,c=i*s;curContext.moveTo(e+o,t),curContext.bezierCurveTo(e+o,t-c,e+u,t-s,e,t-s),curContext.bezierCurveTo(e-u,t-s,e-o,t-c,e-o,t),curContext.bezierCurveTo(e-o,t+c,e-u,t+s,e,t+s),curContext.bezierCurveTo(e+u,t+s,e+o,t+c,e+o,t)}doFill&&curContext.fill(),doStroke&&curContext.stroke(),curContext.closePath()}},p.save=function(){};var buildImageObject=function(e){var t=e.data,n=p.createImage(e.width,e.height),r=t.length;if(Object.defineProperty&&Object.getOwnPropertyDescriptor&&!Object.getOwnPropertyDescriptor(n,"pixels").get||n.__defineGetter__&&n.__lookupGetter__&&!n.__lookupGetter__("pixels")){var a,o=function(){if(a)return a;a=[];for(var e=0;r>e;e+=4)a.push(p.color(t[e],t[e+1],t[e+2],t[e+3]));return a};Object.defineProperty?Object.defineProperty(n,"pixels",{get:o}):n.__defineGetter__&&n.__defineGetter__("pixels",o)}else{n.pixels=[];for(var s=0;r>s;s+=4)n.pixels.push(p.color(t[s],t[s+1],t[s+2],t[s+3]))}return n};p.loadImage=function(e,t,n){var r=document.createElement("img");return r.loaded=!1,r.mask=function(){},r.onload=function(){var e=this.height,t=this.width,a=document.createElement("canvas");a.width=t,a.height=e;var o=a.getContext("2d");o.drawImage(this,0,0),this.data=buildImageObject(o.getImageData(0,0,t,e)),this.data.img=r,this.get=this.data.get,this.pixels=this.data.pixels,this.loaded=!0,n&&n()},r.src=e,r},p.get=function(e,t){if(!arguments.length){var n=p.createGraphics(p.width,p.height);return n.image(curContext,0,0),n}return getLoaded||(getLoaded=buildImageObject(curContext.getImageData(0,0,p.width,p.height))),getLoaded.get(e,t)},p.createGraphics=function(e,t){var n=document.createElement("canvas"),r=Processing.build(n);return r.size(e,t),r.canvas=n,r},p.set=function(e,t,n){if(n&&n.img)p.image(n,e,t);else{var r=curContext.fillStyle,a=n;curContext.fillStyle=a,curContext.fillRect(Math.round(e),Math.round(t),1,1),curContext.fillStyle=r}},p.loadPixels=function(){p.pixels=buildImageObject(curContext.getImageData(0,0,p.width,p.height)).pixels},p.updatePixels=function(){var e=/(\d+),(\d+),(\d+),(\d+)/,t={};t.width=p.width,t.height=p.height,t.data=[],curContext.createImageData&&(t=curContext.createImageData(p.width,p.height));for(var n=t.data,r=0,a=0,o=p.pixels.length;o>a;a++){var s=(p.pixels[a]||"rgba(0,0,0,1)").match(e);n[r+0]=parseInt(s[1],10),n[r+1]=parseInt(s[2],10),n[r+2]=parseInt(s[3],10),n[r+3]=255*parseFloat(s[4]),r+=4}curContext.putImageData(t,0,0)},p.background=function(e){var t,n;if(p.use3DContext){var r=arguments;1===arguments.length?"string"==typeof arguments[0]?(t=arguments[0].slice(5,-1).split(","),curContext.clearColor(t[0]/255,t[1]/255,t[2]/255,t[3])):"number"==typeof arguments[0]&&curContext.clearColor(r[0]/255,r[0]/255,r[0]/255,1):2===arguments.length?"string"==typeof arguments[0]?(t=arguments[0].slice(5,-1).split(","),curContext.clearColor(t[0]/255,t[1]/255,t[2]/255,1)):"number"==typeof arguments[0]&&(t=arguments[0]/255,n=1,curContext.clearColor(t,t,t,n)):(3===arguments.length||4===arguments.length)&&curContext.clearColor(r[0]/255,r[1]/255,r[2]/255,1)}else if(arguments.length&&(curBackground=e.data&&e.data.img?e.data:p.color.apply(this,arguments)),curBackground.img)p.image(e,0,0);else{var a=curContext.fillStyle;curContext.fillStyle=curBackground+"",curContext.fillRect(0,0,p.width,p.height),curContext.fillStyle=a}hasBackground=!0};var getImage_old=function(e){if("string"==typeof e)return document.getElementById(e);if(e.img||e.canvas)return e.img||e.canvas;for(var t=0,n=e.pixels.length;n>t;t++){var r=4*t,a=(e.pixels[t]||"rgba(0,0,0,1)").slice(5,-1).split(",");e.data[r+0]=parseInt(a[0],10),e.data[r+1]=parseInt(a[1],10),e.data[r+2]=parseInt(a[2],10),e.data[r+3]=100*parseFloat(a[3])}var o=document.createElement("canvas");o.width=e.width,o.height=e.height;var s=o.getContext("2d");return s.putImageData(e,0,0),e.canvas=o,o};return p.AniSprite=function(e,t){this.images=[],this.pos=0;for(var n=0;t>n;n++)this.images.push(e+p.nf(n,(""+t).length)+".gif");this.display=function(e,n){p.image_old(this.images[this.pos],e,n),++this.pos>=t&&(this.pos=0)},this.getWidth=function(){return getImage_old(this.images[0]).width},this.getHeight=function(){return getImage_old(this.images[0]).height}},p.createImage=function(e,t){var n={};return n.width=e,n.height=t,n.data=[],curContext.createImageData&&(n=curContext.createImageData(e,t)),n.pixels=new Array(e*t),n.get=function(t,n){return this.pixels[e*n+t]},n._mask=null,n.mask=function(e){this._mask=e},n.loadPixels=function(){},n.updatePixels=function(){},n},p.image_old=function(e,t,n,r,a){t=t||0,n=n||0;var o,s=getImage(e);if(curTint>=0&&(o=curContext.globalAlpha,curContext.globalAlpha=curTint/opacityRange),3===arguments.length?curContext.drawImage(s,t,n):curContext.drawImage(s,t,n,r,a),curTint>=0&&(curContext.globalAlpha=o),e._mask){var i=curContext.globalCompositeOperation;curContext.globalCompositeOperation="darker",p.image(e._mask,t,n),curContext.globalCompositeOperation=i}},p.image=function(e,t,n,r,a){if(e.data||e.canvas){t=t||0,n=n||0;var o,s=getImage(e.data||e.canvas);if(curTint>=0&&(o=curContext.globalAlpha,curContext.globalAlpha=curTint/opacityRange),3===arguments.length?curContext.drawImage(s,t,n):curContext.drawImage(s,t,n,r,a),curTint>=0&&(curContext.globalAlpha=o),e._mask){var i=curContext.globalCompositeOperation;curContext.globalCompositeOperation="darker",p.image(e._mask,t,n),curContext.globalCompositeOperation=i}}},p.clear=function(e,t,n,r){0===arguments.length?curContext.clearRect(0,0,p.width,p.height):curContext.clearRect(e,t,n,r)},p.tint=function(e,t){curTint=t},p.loadFont=function(e){if(-1===e.indexOf(".svg"))return{name:e,width:function(e){return curContext.mozMeasureText?curContext.mozMeasureText("number"==typeof e?String.fromCharCode(e):e)/curTextSize:0}};var t=p.loadGlyphs(e);return{name:e,glyph:!0,units_per_em:t.units_per_em,horiz_adv_x:1/t.units_per_em*t.horiz_adv_x,ascent:t.ascent,descent:t.descent,width:function(t){for(var n=0,r=t.length,a=0;r>a;a++)try{n+=parseFloat(p.glyphLook(p.glyphTable[e],t[a]).horiz_adv_x)}catch(o){Processing.debug(o)}return n/p.glyphTable[e].units_per_em}}},p.textFont=function(e,t){curTextFont=e,p.textSize(t)},p.textSize=function(e){e&&(curTextSize=e)},p.textAlign=function(){},p.glyphLook=function(e,t){try{switch(t){case"1":return e.one;case"2":return e.two;case"3":return e.three;case"4":return e.four;case"5":return e.five;case"6":return e.six;case"7":return e.seven;case"8":return e.eight;case"9":return e.nine;case"0":return e.zero;case" ":return e.space;case"$":return e.dollar;case"!":return e.exclam;case'"':return e.quotedbl;case"#":return e.numbersign;case"%":return e.percent;case"&":return e.ampersand;case"'":return e.quotesingle;case"(":return e.parenleft;case")":return e.parenright;case"*":return e.asterisk;case"+":return e.plus;case",":return e.comma;case"-":return e.hyphen;case".":return e.period;case"/":return e.slash;case"_":return e.underscore;case":":return e.colon;case";":return e.semicolon;case"<":return e.less;case"=":return e.equal;case">":return e.greater;case"?":return e.question;case"@":return e.at;case"[":return e.bracketleft;case"\\":return e.backslash;case"]":return e.bracketright;case"^":return e.asciicircum;case"`":return e.grave;case"{":return e.braceleft;case"|":return e.bar;case"}":return e.braceright;case"~":return e.asciitilde;default:return e[t]}}catch(n){Processing.debug(n)}},p.text=function(e,t,n){if("number"==typeof e&&(e+"").indexOf(".")>=0?(1e3*e-Math.floor(1e3*e)===.5&&(e-=1e-4),e=e.toFixed(3)):0===e&&(e=e.toString()),curTextFont.glyph){var r=p.glyphTable[curTextFont.name];curContext.save(),curContext.translate(t,n+curTextSize);var a=r.units_per_em,o=1/a*curTextSize;curContext.scale(o,o);for(var s=e.length,i=0;s>i;i++)try{p.glyphLook(r,e[i]).draw()}catch(u){Processing.debug(u)}curContext.restore()}else e&&(curContext.fillText||curContext.mozDrawText)&&(curContext.save(),curContext.font=curContext.mozTextStyle=curTextSize+"px "+curTextFont.name,curContext.fillText?curContext.fillText(e,t,n):curContext.mozDrawText&&(curContext.translate(t,n),curContext.mozDrawText(e)),curContext.restore())},p.loadGlyphs=function loadGlyph(url){var x,y,cx,cy,nx,ny,d,a,lastCom,lenC,horiz_adv_x,getXY="[0-9\\-]+",path,regex=function(e,t){var n,r=0,a=[],o=new RegExp(e,"g");for(n=a[r]=o.exec(t);n;)r++,n=a[r]=o.exec(t);return a},buildPath=function(e){var t=regex("[A-Za-z][0-9\\- ]+|Z",e);path="var path={draw:function(){curContext.beginPath();curContext.save();",x=0,y=0,cx=0,cy=0,nx=0,ny=0,e=0,a=0,lastCom="",lenC=t.length-1;for(var n=0;lenC>n;n++){var r=t[n][0],o=regex(getXY,r);switch(r[0]){case"M":x=parseFloat(o[0][0]),y=parseFloat(o[1][0]),path+="curContext.moveTo("+x+","+-y+");";break;case"L":x=parseFloat(o[0][0]),y=parseFloat(o[1][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"H":x=parseFloat(o[0][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"V":y=parseFloat(o[0][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"T":nx=parseFloat(o[0][0]),ny=parseFloat(o[1][0]),"Q"===lastCom||"T"===lastCom?(e=Math.sqrt(Math.pow(x-cx,2)+Math.pow(cy-y,2)),a=Math.PI+Math.atan2(cx-x,cy-y),cx=x+Math.sin(a)*e,cy=y+Math.cos(a)*e):(cx=x,cy=y),path+="curContext.quadraticCurveTo("+cx+","+-cy+","+nx+","+-ny+");",x=nx,y=ny;break;case"Q":cx=parseFloat(o[0][0]),cy=parseFloat(o[1][0]),nx=parseFloat(o[2][0]),ny=parseFloat(o[3][0]),path+="curContext.quadraticCurveTo("+cx+","+-cy+","+nx+","+-ny+");",x=nx,y=ny;break;case"Z":path+="curContext.closePath();"}lastCom=r[0]}return path+="doStroke?curContext.stroke():0;",path+="doFill?curContext.fill():0;",path+="curContext.restore();",path+="curContext.translate("+horiz_adv_x+",0);",path+="}}"},parseSVGFont=function parseSVGFontse(svg){var font=svg.getElementsByTagName("font");p.glyphTable[url].horiz_adv_x=font[0].getAttribute("horiz-adv-x");var font_face=svg.getElementsByTagName("font-face")[0];p.glyphTable[url].units_per_em=parseFloat(font_face.getAttribute("units-per-em")),p.glyphTable[url].ascent=parseFloat(font_face.getAttribute("ascent")),p.glyphTable[url].descent=parseFloat(font_face.getAttribute("descent"));for(var glyph=svg.getElementsByTagName("glyph"),len=glyph.length,i=0;len>i;i++){var unicode=glyph[i].getAttribute("unicode"),name=glyph[i].getAttribute("glyph-name");horiz_adv_x=glyph[i].getAttribute("horiz-adv-x"),null===horiz_adv_x&&(horiz_adv_x=p.glyphTable[url].horiz_adv_x),d=glyph[i].getAttribute("d"),void 0!==d&&(path=buildPath(d),eval(path),p.glyphTable[url][name]={name:name,unicode:unicode,horiz_adv_x:horiz_adv_x,draw:path.draw})}},loadXML=function(){var e;try{e=document.implementation.createDocument("","",null)}catch(t){return void Processing.debug(t.message)}try{e.async=!1,e.load(url),parseSVGFont(e.getElementsByTagName("svg")[0])}catch(n){Processing.debug(n);try{var r=new window.XMLHttpRequest;r.open("GET",url,!1),r.send(null),parseSVGFont(r.responseXML.documentElement)}catch(a){Processing.debug(n)}}};return p.glyphTable[url]={},loadXML(url),p.glyphTable[url]},p.extendClass=function(e,t,n){3===arguments.length?n.apply(e,t):t.call(e)},p.addMethod=function(e,t,n){if(e[t]){var r=n.length,a=e[t];e[t]=function(){return arguments.length===r?n.apply(this,arguments):a.apply(this,arguments)}}else e[t]=n},p.init=function init(code){function attach(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}if(code){var parsedCode=Processing.parse(code,p);p.use3DContext||(curContext=curElement.getContext("2d"),curContext.translate(.5,.5),curContext.lineCap="round",p.stroke(0),p.fill(255),p.disableContextMenu());for(var i in Processing.lib)Processing.lib&&Processing.lib[i].call(p);!function(processing){with(processing)eval(parsedCode)}(p)}p.setup&&(inSetup=!0,p.setup()),inSetup=!1,p.draw&&(doLoop?p.loop():p.redraw()),attach(curElement,"mousemove",function(e){p.pmouseX=p.mouseX,p.pmouseY=p.mouseY;var t=null!==window.scrollX&&"undefined"!=typeof window.scrollX?window.scrollX:window.pageXOffset,n=null!==window.scrollY&&"undefined"!=typeof window.scrollY?window.scrollY:window.pageYOffset;p.mouseX=e.clientX-curElement.offsetLeft+t,p.mouseY=e.clientY-curElement.offsetTop+n,p.cursor(curCursor),p.mouseMoved&&!mousePressed&&p.mouseMoved(),mousePressed&&p.mouseDragged&&(p.mouseDragged(),p.mouseDragging=!0)}),attach(curElement,"mouseout",function(){document.body.style.cursor=oldCursor}),attach(curElement,"mousedown",function(e){switch(mousePressed=!0,p.mouseDragging=!1,e.which){case 1:p.mouseButton=p.LEFT;break;case 2:p.mouseButton=p.CENTER;
break;case 3:p.mouseButton=p.RIGHT}p.mouseDown=!0,"function"==typeof p.mousePressed?p.mousePressed():p.mousePressed=!0}),attach(curElement,"mouseup",function(){mousePressed=!1,p.mouseClicked&&!p.mouseDragging&&p.mouseClicked(),"function"!=typeof p.mousePressed&&(p.mousePressed=!1),p.mouseReleased&&p.mouseReleased()}),attach(document,"keydown",function(e){keyPressed=!0,p.key=e.keyCode+32;for(var t=!1,n=0,r=p.codedKeys.length;r>n;n++)if(p.key===p.codedKeys[n]){switch(t=!0,p.key){case 70:p.keyCode=p.UP;break;case 71:p.keyCode=p.RIGHT;break;case 72:p.keyCode=p.DOWN;break;case 69:p.keyCode=p.LEFT}p.key=p.CODED}t||(p.keyCode=null),e.shiftKey&&(p.key=String.fromCharCode(p.key).toUpperCase().charCodeAt(0)),"function"==typeof p.keyPressed?p.keyPressed():p.keyPressed=!0}),attach(document,"keyup",function(){keyPressed=!1,"function"!=typeof p.keyPressed&&(p.keyPressed=!1),p.keyReleased&&p.keyReleased()})},p}}();