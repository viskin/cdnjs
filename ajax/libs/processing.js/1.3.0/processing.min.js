(function(B,d,o,r){var E=function(){};var q=(function(){if("console" in B){return function(L){B.console.log("Processing.js: "+L)}}return E()}());var u=function(L){var M=new XMLHttpRequest();M.open("GET",L,false);if(M.overrideMimeType){M.overrideMimeType("text/plain")}M.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT");M.send(null);if(M.status!==200&&M.status!==0){throw ("XMLHttpRequest failed, status code "+M.status)}return M.responseText};var l=("document" in this)&&!("fake" in this.document);function A(L,M){if(L in B){return B[L]}if(typeof B[M]==="function"){return B[M]}return function(O){if(O instanceof Array){return O}if(typeof O==="number"){var N=[];N.length=O;return N}}}var e=A("Float32Array","WebGLFloatArray"),I=A("Int32Array","WebGLIntArray"),w=A("Uint16Array","WebGLUnsignedShortArray"),b=A("Uint8Array","WebGLUnsignedByteArray");var z={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:0.0001,MAX_FLOAT:3.4028235e+38,MIN_FLOAT:-3.4028235e+38,MAX_INT:2147483647,MIN_INT:-2147483648,PI:o.PI,TWO_PI:2*o.PI,HALF_PI:o.PI/2,THIRD_PI:o.PI/3,QUARTER_PI:o.PI/4,DEG_TO_RAD:o.PI/180,RAD_TO_DEG:180/o.PI,WHITESPACE:" \t\n\r\f\u00A0",RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1<<0,ADD:1<<1,SUBTRACT:1<<2,LIGHTEST:1<<3,DARKEST:1<<4,DIFFERENCE:1<<5,EXCLUSION:1<<6,MULTIPLY:1<<7,SCREEN:1<<8,OVERLAY:1<<9,HARD_LIGHT:1<<10,SOFT_LIGHT:1<<11,DODGE:1<<12,BURN:1<<13,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:1<<15,PREC_MAXVAL:(1<<15)-1,PREC_ALPHA_SHIFT:24-15,PREC_RED_SHIFT:16-15,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8};function h(N){if(typeof(N)==="string"){var M=0;for(var L=0;L<N.length;++L){M=(M*31+N.charCodeAt(L))&4294967295}return M}if(typeof(N)!=="object"){return N&4294967295}if(N.hashCode instanceof Function){return N.hashCode()}if(N.$id===r){N.$id=((o.floor(o.random()*65536)-32768)<<16)|o.floor(o.random()*65536)}return N.$id}function p(M,L){if(M===null||L===null){return(M===null)&&(L===null)}if(typeof(M)==="string"){return M===L}if(typeof(M)!=="object"){return M===L}if(M.equals instanceof Function){return M.equals(L)}return M===L}var m=function(M){if(M.iterator instanceof Function){return M.iterator()}if(M instanceof Array){var L=-1;this.hasNext=function(){return ++L<M.length};this.next=function(){return M[L]}}else{throw"Unable to iterate: "+M}};var f=(function(){function M(O){var N=0;this.hasNext=function(){return N<O.length};this.next=function(){return O[N++]};this.remove=function(){O.splice(N,1)}}function L(){var N;if(arguments.length===0){N=[]}else{if(arguments.length>0&&typeof arguments[0]!=="number"){N=arguments[0].toArray()}else{N=[];N.length=0|arguments[0]}}this.get=function(O){return N[O]};this.contains=function(O){return this.indexOf(O)>-1};this.indexOf=function(Q){for(var P=0,O=N.length;P<O;++P){if(p(Q,N[P])){return P}}return -1};this.add=function(){if(arguments.length===1){N.push(arguments[0])}else{if(arguments.length===2){var O=arguments[0];if(typeof O==="number"){if(O>=0&&O<=N.length){N.splice(O,0,arguments[1])}else{throw (O+" is not a valid index")}}else{throw (typeof O+" is not a number")}}else{throw ("Please use the proper number of parameters.")}}};this.addAll=function(P,O){var Q;if(typeof P==="number"){if(P<0||P>N.length){throw ("Index out of bounds for addAll: "+P+" greater or equal than "+N.length)}Q=new m(O);while(Q.hasNext()){N.splice(P++,0,Q.next())}}else{Q=new m(P);while(Q.hasNext()){N.push(Q.next())}}};this.set=function(){if(arguments.length===2){var O=arguments[0];if(typeof O==="number"){if(O>=0&&O<N.length){N.splice(O,1,arguments[1])}else{throw (O+" is not a valid index.")}}else{throw (typeof O+" is not a number")}}else{throw ("Please use the proper number of parameters.")}};this.size=function(){return N.length};this.clear=function(){N.length=0};this.remove=function(O){if(typeof O==="number"){return N.splice(O,1)[0]}O=this.indexOf(O);if(O>-1){N.splice(O,1);return true}return false};this.isEmpty=function(){return !N.length};this.clone=function(){return new L(this)};this.toArray=function(){return N.slice(0)};this.iterator=function(){return new M(N)}}return L}());var v=(function(){function L(){if(arguments.length===1&&arguments[0] instanceof L){return arguments[0].clone()}var U=arguments.length>0?arguments[0]:16;var V=arguments.length>1?arguments[1]:0.75;var O=[];O.length=U;var Q=0;var M=this;function S(X){var W=h(X)%O.length;return W<0?O.length+W:W}function P(){if(Q<=V*O.length){return}var Z=[];for(var Y=0;Y<O.length;++Y){if(O[Y]!==r){Z=Z.concat(O[Y])}}var aa=O.length*2;O=[];O.length=aa;for(var X=0;X<Z.length;++X){var W=S(Z[X].key);var ab=O[W];if(ab===r){O[W]=ab=[]}ab.push(Z[X])}}function N(aa,ab){var W=0;var Z=-1;var Y=false;function X(){while(!Y){++Z;if(W>=O.length){Y=true}else{if(O[W]===r||Z>=O[W].length){Z=-1;++W}else{return}}}}this.hasNext=function(){return !Y};this.next=function(){var ac=aa(O[W][Z]);X();return ac};this.remove=function(){ab(this.next());--Z};X()}function T(W,X,Y){this.clear=function(){M.clear()};this.contains=function(Z){return X(Z)};this.containsAll=function(aa){var Z=aa.iterator();while(Z.hasNext()){if(!this.contains(Z.next())){return false}}return true};this.isEmpty=function(){return M.isEmpty()};this.iterator=function(){return new N(W,Y)};this.remove=function(Z){if(this.contains(Z)){Y(Z);return true}return false};this.removeAll=function(ac){var Z=ac.iterator();var ab=false;while(Z.hasNext()){var aa=Z.next();if(this.contains(aa)){Y(aa);ab=true}}return true};this.retainAll=function(ad){var ab=this.iterator();var aa=[];while(ab.hasNext()){var ac=ab.next();if(!ad.contains(ac)){aa.push(ac)}}for(var Z=0;Z<aa.length;++Z){Y(aa[Z])}return aa.length>0};this.size=function(){return M.size()};this.toArray=function(){var Z=[];var aa=this.iterator();while(aa.hasNext()){Z.push(aa.next())}return Z}}function R(W){this._isIn=function(X){return X===M&&(W.removed===r)};this.equals=function(X){return p(W.key,X.getKey())};this.getKey=function(){return W.key};this.getValue=function(){return W.value};this.hashCode=function(X){return h(W.key)};this.setValue=function(Y){var X=W.value;W.value=Y;return X}}this.clear=function(){Q=0;O=[];O.length=U};this.clone=function(){var W=new L();W.putAll(this);return W};this.containsKey=function(Y){var W=S(Y);var Z=O[W];if(Z===r){return false}for(var X=0;X<Z.length;++X){if(p(Z[X].key,Y)){return true}}return false};this.containsValue=function(Y){for(var X=0;X<O.length;++X){var Z=O[X];if(Z===r){continue}for(var W=0;W<Z.length;++W){if(p(Z[W].value,Y)){return true}}}return false};this.entrySet=function(){return new T(function(W){return new R(W)},function(W){return(W instanceof R)&&W._isIn(M)},function(W){return M.remove(W.getKey())})};this.get=function(Y){var W=S(Y);var Z=O[W];if(Z===r){return null}for(var X=0;X<Z.length;++X){if(p(Z[X].key,Y)){return Z[X].value}}return null};this.isEmpty=function(){return Q===0};this.keySet=function(){return new T(function(W){return W.key},function(W){return M.containsKey(W)},function(W){return M.remove(W)})};this.values=function(){return new T(function(W){return W.value},function(W){return M.containsValue(W)},function(W){return M.removeByValue(W)})};this.put=function(Y,aa){var W=S(Y);var ab=O[W];if(ab===r){++Q;O[W]=[{key:Y,value:aa}];P();return null}for(var X=0;X<ab.length;++X){if(p(ab[X].key,Y)){var Z=ab[X].value;ab[X].value=aa;return Z}}++Q;ab.push({key:Y,value:aa});P();return null};this.putAll=function(W){var X=W.entrySet().iterator();while(X.hasNext()){var Y=X.next();this.put(Y.getKey(),Y.getValue())}};this.remove=function(Y){var W=S(Y);var aa=O[W];if(aa===r){return null}for(var X=0;X<aa.length;++X){if(p(aa[X].key,Y)){--Q;var Z=aa[X].value;aa[X].removed=true;if(aa.length>1){aa.splice(X,1)}else{O[W]=r}return Z}}return null};this.removeByValue=function(Y){var aa,X,W,Z;for(aa in O){if(O.hasOwnProperty(aa)){for(X=0,W=O[aa].length;X<W;X++){Z=O[aa][X];if(Z.value===Y){O[aa].splice(X,1);return true}}}}return false};this.size=function(){return Q}}return L}());var y=(function(){function L(O,Q,P){this.x=O||0;this.y=Q||0;this.z=P||0}L.dist=function(P,O){return P.dist(O)};L.dot=function(P,O){return P.dot(O)};L.cross=function(P,O){return P.cross(O)};L.angleBetween=function(P,O){return o.acos(P.dot(O)/(P.mag()*O.mag()))};L.prototype={set:function(O,Q,P){if(arguments.length===1){this.set(O.x||O[0]||0,O.y||O[1]||0,O.z||O[2]||0)}else{this.x=O;this.y=Q;this.z=P}},get:function(){return new L(this.x,this.y,this.z)},mag:function(){var O=this.x,Q=this.y,P=this.z;return o.sqrt(O*O+Q*Q+P*P)},add:function(O,Q,P){if(arguments.length===1){this.x+=O.x;this.y+=O.y;this.z+=O.z}else{this.x+=O;this.y+=Q;this.z+=P}},sub:function(O,Q,P){if(arguments.length===1){this.x-=O.x;this.y-=O.y;this.z-=O.z}else{this.x-=O;this.y-=Q;this.z-=P}},mult:function(O){if(typeof O==="number"){this.x*=O;this.y*=O;this.z*=O}else{this.x*=O.x;this.y*=O.y;this.z*=O.z}},div:function(O){if(typeof O==="number"){this.x/=O;this.y/=O;this.z/=O}else{this.x/=O.x;this.y/=O.y;this.z/=O.z}},dist:function(R){var Q=this.x-R.x,P=this.y-R.y,O=this.z-R.z;return o.sqrt(Q*Q+P*P+O*O)},dot:function(O,Q,P){if(arguments.length===1){return(this.x*O.x+this.y*O.y+this.z*O.z)}return(this.x*O+this.y*Q+this.z*P)},cross:function(P){var O=this.x,R=this.y,Q=this.z;return new L(R*P.z-P.y*Q,Q*P.x-P.z*O,O*P.y-P.x*R)},normalize:function(){var O=this.mag();if(O>0){this.div(O)}},limit:function(O){if(this.mag()>O){this.normalize();this.mult(O)}},heading2D:function(){return(-o.atan2(-this.y,this.x))},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};function M(O){return function(R,Q){var P=R.get();P[O](Q);return P}}for(var N in L.prototype){if(L.prototype.hasOwnProperty(N)&&!L.hasOwnProperty(N)){L[N]=M(N)}}return L}());function K(){}K.prototype=z;var g=new K();g.ArrayList=f;g.HashMap=v;g.PVector=y;g.ObjectIterator=m;g.PConstants=z;g.defineProperty=function(M,L,N){if("defineProperty" in Object){Object.defineProperty(M,L,N)}else{if(N.hasOwnProperty("get")){M.__defineGetter__(L,N.get)}if(N.hasOwnProperty("set")){M.__defineSetter__(L,N.set)}}};function i(O,N){function P(Q){g.defineProperty(O,Q,{get:function(){return N[Q]},set:function(R){N[Q]=R},enumerable:true})}var M=[];for(var L in N){if(typeof N[L]==="function"){if(!O.hasOwnProperty(L)){O[L]=N[L]}}else{if(L.charAt(0)!=="$"&&!(L in O)){M.push(L)}}}while(M.length>0){P(M.shift())}}g.extendClassChain=function(M){var N=[M];for(var L=M.$upcast;L;L=L.$upcast){i(L,M);N.push(L);M=L}while(N.length>0){N.pop().$self=M}};g.extendStaticMembers=function(L,M){i(L,M)};g.extendInterfaceMembers=function(L,M){i(L,M)};g.addMethod=function(O,N,Q,P){if(O[N]){var M=Q.length,L=O[N];O[N]=function(){if(arguments.length===M){return Q.apply(this,arguments)}return L.apply(this,arguments)}}else{O[N]=Q}};g.createJavaArray=function(P,Q){var M=null;if(typeof Q[0]==="number"){var L=0|Q[0];if(Q.length<=1){M=[];M.length=L;for(var O=0;O<L;++O){M[O]=0}}else{M=[];var R=Q.slice(1);for(var N=0;N<L;++N){M.push(g.createJavaArray(P,R))}}}return M};var C={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};(function(M){var P=("open() createOutput() createInput() BufferedReader selectFolder() dataPath() createWriter() selectOutput() beginRecord() saveStream() endRecord() selectInput() saveBytes() createReader() beginRaw() endRaw() PrintWriter").split(" "),O=P.length,L,Q;function N(R){return function(){throw"Processing.js does not support "+R+"."}}while(O--){L=P[O];Q=L.replace("()","");M[Q]=N(L)}}(g));g.defineProperty(g,"screenWidth",{get:function(){return B.innerWidth}});g.defineProperty(g,"screenHeight",{get:function(){return B.innerHeight}});var k=[];var H={};var J=function(L){k.splice(H[L],1);delete H[L]};var a=function(L){if(L.externals.canvas.id===r||!L.externals.canvas.id.length){L.externals.canvas.id="__processing"+k.length}H[L.externals.canvas.id]=k.length;k.push(L)};function n(V){var O=250,ac=V.size/O,L=d.createElement("canvas");L.width=2*O;L.height=2*O;L.style.opacity=0;var U=V.getCSSDefinition(O+"px","normal"),W=L.getContext("2d");W.font=U;V.context2d=W;var aa="dbflkhyjqpg";L.width=W.measureText(aa).width;W.font=U;var R=d.createElement("div");R.style.position="absolute";R.style.opacity=0;R.style.fontFamily='"'+V.name+'"';R.style.fontSize=O+"px";R.innerHTML=aa+"<br/>"+aa;d.body.appendChild(R);var S=L.width,Z=L.height,T=Z/2;W.fillStyle="white";W.fillRect(0,0,S,Z);W.fillStyle="black";W.fillText(aa,0,T);var N=W.getImageData(0,0,S,Z).data;var X=0,Q=S*4,Y=N.length;while(++X<Y&&N[X]===255){E()}var P=o.round(X/Q);X=Y-1;while(--X>0&&N[X]===255){E()}var ab=o.round(X/Q);V.ascent=ac*(T-P);V.descent=ac*(ab-T);if(d.defaultView.getComputedStyle){var M=d.defaultView.getComputedStyle(R,null).getPropertyValue("height");M=ac*M.replace("px","");if(M>=V.size*2){V.leading=o.round(M/2)}}d.body.removeChild(R)}function F(L,M){if(L===r){L=""}this.name=L;if(M===r){M=0}this.size=M;this.glyph=false;this.ascent=0;this.descent=0;this.leading=1.2*M;var P=L.indexOf(" Italic Bold");if(P!==-1){L=L.substring(0,P)}this.style="normal";var O=L.indexOf(" Italic");if(O!==-1){L=L.substring(0,O);this.style="italic"}this.weight="normal";var N=L.indexOf(" Bold");if(N!==-1){L=L.substring(0,N);this.weight="bold"}this.family="sans-serif";if(L!==r){switch(L){case"sans-serif":case"serif":case"monospace":case"fantasy":case"cursive":this.family=L;break;default:this.family='"'+L+'", sans-serif';break}}this.context2d=null;n(this);this.css=this.getCSSDefinition();this.context2d.font=this.css}F.prototype.getCSSDefinition=function(N,L){if(N===r){N=this.size+"px"}if(L===r){L=this.leading+"px"}var M=[this.style,"normal",this.weight,N+"/"+L,this.family];return M.join(" ")};F.prototype.measureTextWidth=function(L){return this.context2d.measureText(L).width};F.PFontCache={};F.get=function(N,O){var M=F.PFontCache;var L=N+"/"+O;if(!M[L]){M[L]=new F(N,O)}return M[L]};F.list=function(){return["sans-serif","serif","monospace","fantasy","cursive"]};F.preloading={template:{},initialized:false,initialize:function(){var N=function(){var P="#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3#yld0xg32QAB77#E777773B#E3C#I#Q77773E#Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#";var O=function(Q){return"AAAAAAAA".substr(~~Q?7-Q:6)};return P.replace(/[#237]/g,O)};var L=d.createElement("style");L.setAttribute("type","text/css");L.innerHTML='@font-face {\n  font-family: "PjsEmptyFont";\n  src: url(\'data:application/x-font-ttf;base64,'+N()+"')\n       format('truetype');\n}";d.head.appendChild(L);var M=d.createElement("span");M.style.cssText='position: absolute; top: 0; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;';M.innerHTML="AAAAAAAA";d.body.appendChild(M);this.template=M;this.initialized=true},getElementWidth:function(L){return d.defaultView.getComputedStyle(L,"").getPropertyValue("width")},timeAttempted:0,pending:function(P){if(!this.initialized){this.initialize()}var N,L,O=this.getElementWidth(this.template);for(var M=0;M<this.fontList.length;M++){N=this.fontList[M];L=this.getElementWidth(N);if(this.timeAttempted<4000&&L===O){this.timeAttempted+=P;return true}else{d.body.removeChild(N);this.fontList.splice(M--,1);this.timeAttempted=0}}if(this.fontList.length===0){return false}return true},fontList:[],addedList:{},add:function(L){if(!this.initialized){this.initialize()}var P=(typeof L==="object"?L.fontFace:L),O=(typeof L==="object"?L.url:L);if(this.addedList[P]){return}var N=d.createElement("style");N.setAttribute("type","text/css");N.innerHTML="@font-face{\n  font-family: '"+P+"';\n  src:  url('"+O+"');\n}\n";d.head.appendChild(N);this.addedList[P]=true;var M=d.createElement("span");M.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;";M.style.fontFamily='"'+P+'", "PjsEmptyFont", fantasy';M.innerHTML="AAAAAAAA";d.body.appendChild(M);this.fontList.push(M)}};g.PFont=F;var D=this.Processing=function(ac,a6){if(!(this instanceof D)){throw ("called Processing constructor as if it were a function: missing 'new'.")}function dt(d6){D.debug("Unimplemented - "+d6)}var cU=this;var cT=(arguments.length===0);if(cT){ac=d.createElement("canvas")}cU.externals={canvas:ac,context:r,sketch:r};cU.name="Processing.js Instance";cU.use3DContext=false;cU.focused=false;cU.breakShape=false;cU.glyphTable={};cU.pmouseX=0;cU.pmouseY=0;cU.mouseX=0;cU.mouseY=0;cU.mouseButton=0;cU.mouseScroll=0;cU.mouseClicked=r;cU.mouseDragged=r;cU.mouseMoved=r;cU.mousePressed=r;cU.mouseReleased=r;cU.mouseScrolled=r;cU.mouseOver=r;cU.mouseOut=r;cU.touchStart=r;cU.touchEnd=r;cU.touchMove=r;cU.touchCancel=r;cU.key=r;cU.keyCode=r;cU.keyPressed=E;cU.keyReleased=E;cU.keyTyped=E;cU.draw=r;cU.setup=r;cU.__mousePressed=false;cU.__keyPressed=false;cU.__frameRate=60;cU.frameCount=0;cU.width=100;cU.height=100;var d3,cO,dU,bz=true,aF=true,bk=[1,1,1,1],aX=4294967295,ap=true,cc=true,cY=[0.8,0.8,0.8,1],ct=4294835709,b1=true,dS=1,aw=false,dK=false,aB=true,b2=0,bH=z.CORNER,cL=z.CENTER,a4=0,a3=0,a2=0,aY=z.NORMAL_MODE_AUTO,cn=false,dQ=60,ay=1000/dQ,X=z.ARROW,ci=ac.style.cursor,dN=z.POLYGON,ch=0,d1=[],aH=0,O=20,cK=false,a0=-3355444,cw=20,bQ=255,bF=255,bE=255,bC=255,cX=false,aI=false,cW=z.RGB,ba=null,bs=null,a1=false,dm=Date.now(),dq=dm,N=0,cC,c1,aN,aJ,bv,cb,S,dz={attributes:{},locations:{}},du,dM,bP,bc,cH,di,aA,b0,bb,b6,ar,aE,by,av,ae,c5,bO,cr={width:0,height:0},d0=z.IMAGE,dP=false,cF,aa,P,L=z.LEFT,cZ=z.BASELINE,cG=z.MODEL,W="Arial",dW=12,aZ=9,dx=2,d2=14,U=F.get(W,dW),ai,cl=null,dR=false,dZ,bX=1000,af=[],dE=null,dT=[z.SHIFT,z.CONTROL,z.ALT,z.CAPSLK,z.PGUP,z.PGDN,z.END,z.HOME,z.LEFT,z.UP,z.RIGHT,z.DOWN,z.NUMLK,z.INSERT,z.F1,z.F2,z.F3,z.F4,z.F5,z.F6,z.F7,z.F8,z.F9,z.F10,z.F11,z.F12,z.META];var ab,dl,aR,bU;if(d.defaultView&&d.defaultView.getComputedStyle){ab=parseInt(d.defaultView.getComputedStyle(ac,null)["paddingLeft"],10)||0;dl=parseInt(d.defaultView.getComputedStyle(ac,null)["paddingTop"],10)||0;aR=parseInt(d.defaultView.getComputedStyle(ac,null)["borderLeftWidth"],10)||0;bU=parseInt(d.defaultView.getComputedStyle(ac,null)["borderTopWidth"],10)||0}var dI=0;var bI=0,bJ=0,bp=[],bo=[],bn=[],ag=new e(z.SINCOS_LENGTH),bh=new e(z.SINCOS_LENGTH),cD,cy;var bS,cf,dG,aQ,al,c8,Z,da,ao=false,cg=false,cI=60*(o.PI/180),dj=cU.width/2,dh=cU.height/2,dg=dh/o.tan(cI/2),aW=dg/10,au=dg*10,b3=cU.width/cU.height;var a7=[],b9=[],c0=0,dL=false,Y=false,dr=true;var Q=z.CORNER;var bi=[];var df=new e([0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5]);var bD=new e([0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5]);var de=new e([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]);var aj=new e([0,0,0,0,1,0,1,1,0,1,0,0]);var ah=new e([0,0,1,0,0,1,0,0,1,0,0,1]);var bR="varying vec4 frontColor;attribute vec3 aVertex;attribute vec4 aColor;uniform mat4 uView;uniform mat4 uProjection;uniform float pointSize;void main(void) {  frontColor = aColor;  gl_PointSize = pointSize;  gl_Position = uProjection * uView * vec4(aVertex, 1.0);}";var be="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;void main(void){  gl_FragColor = frontColor;}";var ad="varying vec4 frontColor;attribute vec3 Vertex;attribute vec2 aTextureCoord;uniform vec4 color;uniform mat4 model;uniform mat4 view;uniform mat4 projection;uniform float pointSize;varying vec2 vTextureCoord;void main(void) {  gl_PointSize = pointSize;  frontColor = color;  gl_Position = projection * view * model * vec4(Vertex, 1.0);  vTextureCoord = aTextureCoord;}";var bW="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform int picktype;void main(void){  if(picktype == 0){    gl_FragColor = frontColor;  }  else if(picktype == 1){    float alpha = texture2D(uSampler, vTextureCoord).a;    gl_FragColor = vec4(frontColor.rgb*alpha, alpha);\n  }}";var bw=/Windows/.test(navigator.userAgent);var d4="varying vec4 frontColor;attribute vec3 Vertex;attribute vec3 Normal;attribute vec4 aColor;attribute vec2 aTexture;varying   vec2 vTexture;uniform vec4 color;uniform bool usingMat;uniform vec3 specular;uniform vec3 mat_emissive;uniform vec3 mat_ambient;uniform vec3 mat_specular;uniform float shininess;uniform mat4 model;uniform mat4 view;uniform mat4 projection;uniform mat4 normalTransform;uniform int lightCount;uniform vec3 falloff;struct Light {  int type;  vec3 color;  vec3 position;  vec3 direction;  float angle;  vec3 halfVector;  float concentration;};uniform Light lights0;uniform Light lights1;uniform Light lights2;uniform Light lights3;uniform Light lights4;uniform Light lights5;uniform Light lights6;uniform Light lights7;Light getLight(int index){  if(index == 0) return lights0;  if(index == 1) return lights1;  if(index == 2) return lights2;  if(index == 3) return lights3;  if(index == 4) return lights4;  if(index == 5) return lights5;  if(index == 6) return lights6;  return lights7;}void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {  float d = length( light.position - ecPos );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ));  totalAmbient += light.color * attenuation;}void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerfactor = 0.0;  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));  if( nDotVP != 0.0 ){    powerfactor = pow( nDotVH, shininess );  }  col += light.color * nDotVP;  spec += specular * powerfactor;}void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerfactor;   vec3 VP = light.position - ecPos;  float d = length( VP );   VP = normalize( VP );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ));  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0) {    powerfactor = 0.0;  }  else{    powerfactor = pow( nDotHV, shininess );  }  spec += specular * powerfactor * attenuation;  col += light.color * nDotVP * attenuation;}void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float spotAttenuation;  float powerfactor;  vec3 VP = light.position - ecPos;   vec3 ldir = normalize( -light.direction );  float d = length( VP );  VP = normalize( VP );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ) );  float spotDot = dot( VP, ldir );"+(bw?"  spotAttenuation = 1.0; ":"  if( spotDot > cos( light.angle ) ) {    spotAttenuation = pow( spotDot, light.concentration );  }  else{    spotAttenuation = 0.0;  }  attenuation *= spotAttenuation;")+"  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0 ) {    powerfactor = 0.0;  }  else {    powerfactor = pow( nDotHV, shininess );  }  spec += specular * powerfactor * attenuation;  col += light.color * nDotVP * attenuation;}void main(void) {  vec3 finalAmbient = vec3( 0.0, 0.0, 0.0 );  vec3 finalDiffuse = vec3( 0.0, 0.0, 0.0 );  vec3 finalSpecular = vec3( 0.0, 0.0, 0.0 );  vec4 col = color;  if(color[0] == -1.0){    col = aColor;  }  vec3 norm = normalize(vec3( normalTransform * vec4( Normal, 0.0 ) ));  vec4 ecPos4 = view * model * vec4(Vertex,1.0);  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;  if( lightCount == 0 ) {    frontColor = col + vec4(mat_specular,1.0);  }  else {    for( int i = 0; i < 8; i++ ) {      Light l = getLight(i);      if( i >= lightCount ){        break;      }      if( l.type == 0 ) {        AmbientLight( finalAmbient, ecPos, l );      }      else if( l.type == 1 ) {        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else if( l.type == 2 ) {        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else {        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }    }   if( usingMat == false ) {     frontColor = vec4(       vec3(col) * finalAmbient +       vec3(col) * finalDiffuse +       vec3(col) * finalSpecular,       col[3] );   }   else{     frontColor = vec4(        mat_emissive +        (vec3(col) * mat_ambient * finalAmbient) +        (vec3(col) * finalDiffuse) +        (mat_specular * finalSpecular),        col[3] );    }  }  vTexture.xy = aTexture.xy;  gl_Position = projection * view * model * vec4( Vertex, 1.0 );}";var bG="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;uniform sampler2D sampler;uniform bool usingTexture;uniform bool usingTint;varying vec2 vTexture;void main(void){  if(usingTexture){    gl_FragColor = vec4(texture2D(sampler, vTexture.xy));    if(usingTint){      gl_FragColor = gl_FragColor*frontColor;    }  }  else{    gl_FragColor = frontColor;  }}";function dY(d8,d7,ea,d9){var d6=dz.locations[d8];if(d6===r){d6=d3.getUniformLocation(d7,ea);dz.locations[d8]=d6}if(d6!==-1){if(d9.length===4){d3.uniform4fv(d6,d9)}else{if(d9.length===3){d3.uniform3fv(d6,d9)}else{if(d9.length===2){d3.uniform2fv(d6,d9)}else{d3.uniform1f(d6,d9)}}}}}function dV(d8,d7,ea,d9){var d6=dz.locations[d8];if(d6===r){d6=d3.getUniformLocation(d7,ea);dz.locations[d8]=d6}if(d6!==-1){if(d9.length===4){d3.uniform4iv(d6,d9)}else{if(d9.length===3){d3.uniform3iv(d6,d9)}else{if(d9.length===2){d3.uniform2iv(d6,d9)}else{d3.uniform1i(d6,d9)}}}}}function db(ea,d8,eb,d7,d9){var d6=dz.attributes[ea];if(d6===r){d6=d3.getAttribLocation(d8,eb);dz.attributes[ea]=d6}if(d6!==-1){d3.bindBuffer(d3.ARRAY_BUFFER,d9);d3.vertexAttribPointer(d6,d7,d3.FLOAT,false,0,0);d3.enableVertexAttribArray(d6)}}function ce(d8,d7,d9){var d6=dz.attributes[d8];if(d6===r){d6=d3.getAttribLocation(d7,d9);dz.attributes[d8]=d6}if(d6!==-1){d3.disableVertexAttribArray(d6)}}function a5(ea,d8,eb,d9,d7){var d6=dz.locations[ea];if(d6===r){d6=d3.getUniformLocation(d8,eb);dz.locations[ea]=d6}if(d6!==-1){if(d7.length===16){d3.uniformMatrix4fv(d6,d9,d7)}else{if(d7.length===9){d3.uniformMatrix3fv(d6,d9,d7)}else{d3.uniformMatrix2fv(d6,d9,d7)}}}}var aV=function(d6,ea,d7,d9,d8){return{x:d6,y:ea,w:d7,h:d9}};var bg=aV;var bZ=function(d6,ea,d7,d9,d8){return{x:d6,y:ea,w:d8?d7:d7-d6,h:d8?d9:d9-ea}};var aL=function(d6,ea,d7,d9,d8){return{x:d6-d7/2,y:ea-d9/2,w:d7,h:d9}};var bB=function(d8,ea,d7){var eb=d8.createShader(d8.VERTEX_SHADER);d8.shaderSource(eb,ea);d8.compileShader(eb);if(!d8.getShaderParameter(eb,d8.COMPILE_STATUS)){throw d8.getShaderInfoLog(eb)}var d9=d8.createShader(d8.FRAGMENT_SHADER);d8.shaderSource(d9,d7);d8.compileShader(d9);if(!d8.getShaderParameter(d9,d8.COMPILE_STATUS)){throw d8.getShaderInfoLog(d9)}var d6=d8.createProgram();d8.attachShader(d6,eb);d8.attachShader(d6,d9);d8.linkProgram(d6);if(!d8.getProgramParameter(d6,d8.LINK_STATUS)){throw"Error linking shaders."}return d6};var dp=function(){};var bN=function(){};var bx=function(){};var b8=function(){};bN.prototype=new dp();bN.prototype.constructor=bN;bx.prototype=new dp();bx.prototype.constructor=bx;b8.prototype=new dp();b8.prototype.constructor=b8;dp.prototype.a3DOnlyFunction=E;var cj={};var bM=cU.Character=function(d6){if(typeof d6==="string"&&d6.length===1){this.code=d6.charCodeAt(0)}else{if(typeof d6==="number"){this.code=d6}else{if(d6 instanceof bM){this.code=d6}else{this.code=NaN}}}return(cj[this.code]===r)?cj[this.code]=this:cj[this.code]};bM.prototype.toString=function(){return String.fromCharCode(this.code)};bM.prototype.valueOf=function(){return this.code};var M=cU.PShape=function(d6){this.family=d6||z.GROUP;this.visible=true;this.style=true;this.children=[];this.nameTable=[];this.params=[];this.name="";this.image=null;this.matrix=null;this.kind=null;this.close=null;this.width=null;this.height=null;this.parent=null};M.prototype={isVisible:function(){return this.visible},setVisible:function(d6){this.visible=d6},disableStyle:function(){this.style=false;for(var d7=0,d6=this.children.length;d7<d6;d7++){this.children[d7].disableStyle()}},enableStyle:function(){this.style=true;for(var d7=0,d6=this.children.length;d7<d6;d7++){this.children[d7].enableStyle()}},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(d6){this.name=d6},getName:function(){return this.name},draw:function(){if(this.visible){this.pre();this.drawImpl();this.post()}},drawImpl:function(){if(this.family===z.GROUP){this.drawGroup()}else{if(this.family===z.PRIMITIVE){this.drawPrimitive()}else{if(this.family===z.GEOMETRY){this.drawGeometry()}else{if(this.family===z.PATH){this.drawPath()}}}}},drawPath:function(){var d8,d7;if(this.vertices.length===0){return}cU.beginShape();if(this.vertexCodes.length===0){if(this.vertices[0].length===2){for(d8=0,d7=this.vertices.length;d8<d7;d8++){cU.vertex(this.vertices[d8][0],this.vertices[d8][1])}}else{for(d8=0,d7=this.vertices.length;d8<d7;d8++){cU.vertex(this.vertices[d8][0],this.vertices[d8][1],this.vertices[d8][2])}}}else{var d6=0;if(this.vertices[0].length===2){for(d8=0,d7=this.vertexCodes.length;d8<d7;d8++){if(this.vertexCodes[d8]===z.VERTEX){cU.vertex(this.vertices[d6][0],this.vertices[d6][1]);if(this.vertices[d6]["moveTo"]===true){a7[a7.length-1]["moveTo"]=true}else{if(this.vertices[d6]["moveTo"]===false){a7[a7.length-1]["moveTo"]=false}}cU.breakShape=false;d6++}else{if(this.vertexCodes[d8]===z.BEZIER_VERTEX){cU.bezierVertex(this.vertices[d6+0][0],this.vertices[d6+0][1],this.vertices[d6+1][0],this.vertices[d6+1][1],this.vertices[d6+2][0],this.vertices[d6+2][1]);d6+=3}else{if(this.vertexCodes[d8]===z.CURVE_VERTEX){cU.curveVertex(this.vertices[d6][0],this.vertices[d6][1]);d6++}else{if(this.vertexCodes[d8]===z.BREAK){cU.breakShape=true}}}}}}else{for(d8=0,d7=this.vertexCodes.length;d8<d7;d8++){if(this.vertexCodes[d8]===z.VERTEX){cU.vertex(this.vertices[d6][0],this.vertices[d6][1],this.vertices[d6][2]);if(this.vertices[d6]["moveTo"]===true){a7[a7.length-1]["moveTo"]=true}else{if(this.vertices[d6]["moveTo"]===false){a7[a7.length-1]["moveTo"]=false}}cU.breakShape=false}else{if(this.vertexCodes[d8]===z.BEZIER_VERTEX){cU.bezierVertex(this.vertices[d6+0][0],this.vertices[d6+0][1],this.vertices[d6+0][2],this.vertices[d6+1][0],this.vertices[d6+1][1],this.vertices[d6+1][2],this.vertices[d6+2][0],this.vertices[d6+2][1],this.vertices[d6+2][2]);d6+=3}else{if(this.vertexCodes[d8]===z.CURVE_VERTEX){cU.curveVertex(this.vertices[d6][0],this.vertices[d6][1],this.vertices[d6][2]);d6++}else{if(this.vertexCodes[d8]===z.BREAK){cU.breakShape=true}}}}}}}cU.endShape(this.close?z.CLOSE:z.OPEN)},drawGeometry:function(){var d8,d7;cU.beginShape(this.kind);if(this.style){for(d8=0,d7=this.vertices.length;d8<d7;d8++){cU.vertex(this.vertices[d8])}}else{for(d8=0,d7=this.vertices.length;d8<d7;d8++){var d6=this.vertices[d8];if(d6[2]===0){cU.vertex(d6[0],d6[1])}else{cU.vertex(d6[0],d6[1],d6[2])}}}cU.endShape()},drawGroup:function(){for(var d7=0,d6=this.children.length;d7<d6;d7++){this.children[d7].draw()}},drawPrimitive:function(){if(this.kind===z.POINT){cU.point(this.params[0],this.params[1])}else{if(this.kind===z.LINE){if(this.params.length===4){cU.line(this.params[0],this.params[1],this.params[2],this.params[3])}else{cU.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])}}else{if(this.kind===z.TRIANGLE){cU.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])}else{if(this.kind===z.QUAD){cU.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7])}else{if(this.kind===z.RECT){if(this.image!==null){cU.imageMode(z.CORNER);cU.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3])}else{cU.rectMode(z.CORNER);cU.rect(this.params[0],this.params[1],this.params[2],this.params[3])}}else{if(this.kind===z.ELLIPSE){cU.ellipseMode(z.CORNER);cU.ellipse(this.params[0],this.params[1],this.params[2],this.params[3])}else{if(this.kind===z.ARC){cU.ellipseMode(z.CORNER);cU.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])}else{if(this.kind===z.BOX){if(this.params.length===1){cU.box(this.params[0])}else{cU.box(this.params[0],this.params[1],this.params[2])}}else{if(this.kind===z.SPHERE){cU.sphere(this.params[0])}}}}}}}}}},pre:function(){if(this.matrix){cU.pushMatrix();d3.transform(this.matrix.elements[0],this.matrix.elements[3],this.matrix.elements[1],this.matrix.elements[4],this.matrix.elements[2],this.matrix.elements[5])}if(this.style){cU.pushStyle();this.styles()}},post:function(){if(this.matrix){cU.popMatrix()}if(this.style){cU.popStyle()}},styles:function(){if(this.stroke){cU.stroke(this.strokeColor);cU.strokeWeight(this.strokeWeight);cU.strokeCap(this.strokeCap);cU.strokeJoin(this.strokeJoin)}else{cU.noStroke()}if(this.fill){cU.fill(this.fillColor)}else{cU.noFill()}},getChild:function(d9){var d7,d6;if(typeof d9==="number"){return this.children[d9]}var d8;if(d9===""||this.name===d9){return this}if(this.nameTable.length>0){for(d7=0,d6=this.nameTable.length;d7<d6||d8;d7++){if(this.nameTable[d7].getName===d9){d8=this.nameTable[d7];break}}if(d8){return d8}}for(d7=0,d6=this.children.length;d7<d6;d7++){d8=this.children[d7].getChild(d9);if(d8){return d8}}return null},getChildCount:function(){return this.children.length},addChild:function(d6){this.children.push(d6);d6.parent=this;if(d6.getName()!==null){this.addName(d6.getName(),d6)}},addName:function(d7,d6){if(this.parent!==null){this.parent.addName(d7,d6)}else{this.nameTable.push([d7,d6])}},translate:function(){if(arguments.length===2){this.checkMatrix(2);this.matrix.translate(arguments[0],arguments[1])}else{this.checkMatrix(3);this.matrix.translate(arguments[0],arguments[1],0)}},checkMatrix:function(d6){if(this.matrix===null){if(d6===2){this.matrix=new cU.PMatrix2D()}else{this.matrix=new cU.PMatrix3D()}}else{if(d6===3&&this.matrix instanceof cU.PMatrix2D){this.matrix=new cU.PMatrix3D()}}},rotateX:function(d6){this.rotate(d6,1,0,0)},rotateY:function(d6){this.rotate(d6,0,1,0)},rotateZ:function(d6){this.rotate(d6,0,0,1)},rotate:function(){if(arguments.length===1){this.checkMatrix(2);this.matrix.rotate(arguments[0])}else{this.checkMatrix(3);this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3])}},scale:function(){if(arguments.length===2){this.checkMatrix(2);this.matrix.scale(arguments[0],arguments[1])}else{if(arguments.length===3){this.checkMatrix(2);this.matrix.scale(arguments[0],arguments[1],arguments[2])}else{this.checkMatrix(2);this.matrix.scale(arguments[0])}}},resetMatrix:function(){this.checkMatrix(2);this.matrix.reset()},applyMatrix:function(d6){if(arguments.length===1){this.applyMatrix(d6.elements[0],d6.elements[1],0,d6.elements[2],d6.elements[3],d6.elements[4],0,d6.elements[5],0,0,1,0,0,0,0,1)}else{if(arguments.length===6){this.checkMatrix(2);this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],arguments[5],0,0,0,1,0,0,0,0,1)}else{if(arguments.length===16){this.checkMatrix(3);this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15])}}}}};var cq=cU.PShapeSVG=function(){cU.PShape.call(this);if(arguments.length===1){this.element=arguments[0];this.vertexCodes=[];this.vertices=[];this.opacity=1;this.stroke=false;this.strokeColor=z.ALPHA_MASK;this.strokeWeight=1;this.strokeCap=z.SQUARE;this.strokeJoin=z.MITER;this.strokeGradient=null;this.strokeGradientPaint=null;this.strokeName=null;this.strokeOpacity=1;this.fill=true;this.fillColor=z.ALPHA_MASK;this.fillGradient=null;this.fillGradientPaint=null;this.fillName=null;this.fillOpacity=1;if(this.element.getName()!=="svg"){throw ("root is not <svg>, it's <"+this.element.getName()+">")}}else{if(arguments.length===2){if(typeof arguments[1]==="string"){if(arguments[1].indexOf(".svg")>-1){this.element=new cU.XMLElement(null,arguments[1]);this.vertexCodes=[];this.vertices=[];this.opacity=1;this.stroke=false;this.strokeColor=z.ALPHA_MASK;this.strokeWeight=1;this.strokeCap=z.SQUARE;this.strokeJoin=z.MITER;this.strokeGradient="";this.strokeGradientPaint="";this.strokeName="";this.strokeOpacity=1;this.fill=true;this.fillColor=z.ALPHA_MASK;this.fillGradient=null;this.fillGradientPaint=null;this.fillOpacity=1}}else{if(arguments[0]){this.element=arguments[1];this.vertexCodes=arguments[0].vertexCodes.slice();this.vertices=arguments[0].vertices.slice();this.stroke=arguments[0].stroke;this.strokeColor=arguments[0].strokeColor;this.strokeWeight=arguments[0].strokeWeight;this.strokeCap=arguments[0].strokeCap;this.strokeJoin=arguments[0].strokeJoin;this.strokeGradient=arguments[0].strokeGradient;this.strokeGradientPaint=arguments[0].strokeGradientPaint;this.strokeName=arguments[0].strokeName;this.fill=arguments[0].fill;this.fillColor=arguments[0].fillColor;this.fillGradient=arguments[0].fillGradient;this.fillGradientPaint=arguments[0].fillGradientPaint;this.fillName=arguments[0].fillName;this.strokeOpacity=arguments[0].strokeOpacity;this.fillOpacity=arguments[0].fillOpacity;this.opacity=arguments[0].opacity}}}}this.name=this.element.getStringAttribute("id");var d6=this.element.getStringAttribute("display","inline");this.visible=d6!=="none";var eb=this.element.getAttribute("transform");if(eb){this.matrix=this.parseMatrix(eb)}var d8=this.element.getStringAttribute("viewBox");if(d8!==null){var ea=d8.split(" ");this.width=ea[2];this.height=ea[3]}var d7=this.element.getStringAttribute("width");var d9=this.element.getStringAttribute("height");if(d7!==null){this.width=this.parseUnitSize(d7);this.height=this.parseUnitSize(d9)}else{if((this.width===0)||(this.height===0)){this.width=1;this.height=1;throw ("The width and/or height is not readable in the <svg> tag of this file.")}}this.parseColors(this.element);this.parseChildren(this.element)};cq.prototype=new M();cq.prototype.parseMatrix=(function(){function d6(d8){var d7=[];d8.replace(/\((.*?)\)/,(function(){return function(d9,ea){d7=ea.replace(/,+/g," ").split(/\s+/)}}()));return d7}return function(ee){this.checkMatrix(2);var d7=[];ee.replace(/\s*(\w+)\((.*?)\)/g,function(eh){d7.push(cU.trim(eh))});if(d7.length===0){return null}for(var ec=0,ea=d7.length;ec<ea;ec++){var d8=d6(d7[ec]);if(d7[ec].indexOf("matrix")!==-1){this.matrix.set(d8[0],d8[2],d8[4],d8[1],d8[3],d8[5])}else{if(d7[ec].indexOf("translate")!==-1){var ed=d8[0];var eb=(d8.length===2)?d8[1]:0;this.matrix.translate(ed,eb)}else{if(d7[ec].indexOf("scale")!==-1){var eg=d8[0];var ef=(d8.length===2)?d8[1]:d8[0];this.matrix.scale(eg,ef)}else{if(d7[ec].indexOf("rotate")!==-1){var d9=d8[0];if(d8.length===1){this.matrix.rotate(cU.radians(d9))}else{if(d8.length===3){this.matrix.translate(d8[1],d8[2]);this.matrix.rotate(cU.radians(d8[0]));this.matrix.translate(-d8[1],-d8[2])}}}else{if(d7[ec].indexOf("skewX")!==-1){this.matrix.skewX(parseFloat(d8[0]))}else{if(d7[ec].indexOf("skewY")!==-1){this.matrix.skewY(d8[0])}}}}}}}return this.matrix}}());cq.prototype.parseChildren=function(eb){var d7=eb.getChildren();var ea=new cU.PShape();for(var d9=0,d8=d7.length;d9<d8;d9++){var d6=this.parseChild(d7[d9]);if(d6){ea.addChild(d6)}}this.children.push(ea)};cq.prototype.getName=function(){return this.name};cq.prototype.parseChild=function(d8){var d7=d8.getName();var d6;if(d7==="g"){d6=new cq(this,d8)}else{if(d7==="defs"){d6=new cq(this,d8)}else{if(d7==="line"){d6=new cq(this,d8);d6.parseLine()}else{if(d7==="circle"){d6=new cq(this,d8);d6.parseEllipse(true)}else{if(d7==="ellipse"){d6=new cq(this,d8);d6.parseEllipse(false)}else{if(d7==="rect"){d6=new cq(this,d8);d6.parseRect()}else{if(d7==="polygon"){d6=new cq(this,d8);d6.parsePoly(true)}else{if(d7==="polyline"){d6=new cq(this,d8);d6.parsePoly(false)}else{if(d7==="path"){d6=new cq(this,d8);d6.parsePath()}else{if(d7==="radialGradient"){dt("PShapeSVG.prototype.parseChild, name = radialGradient")}else{if(d7==="linearGradient"){dt("PShapeSVG.prototype.parseChild, name = linearGradient")}else{if(d7==="text"){dt("PShapeSVG.prototype.parseChild, name = text")}else{if(d7==="filter"){dt("PShapeSVG.prototype.parseChild, name = filter")}else{if(d7==="mask"){dt("PShapeSVG.prototype.parseChild, name = mask")}else{E()}}}}}}}}}}}}}}return d6};cq.prototype.parsePath=function(){this.family=z.PATH;this.kind=0;var eb=[];var ev;var eu=cU.trim(this.element.getStringAttribute("d").replace(/[\s,]+/g," "));if(eu===null){return}eu=cU.__toCharArray(eu);var d9=0,d8=0,eg=0,ee=0,ef=0,ed=0,em=0,el=0,d7=0,d6=0,ei=0,eh=0,ek=0,ej=0,et=0,ep=0;var en="";var er=[];var es=false;var ec;var ea;var eq,eo;while(et<eu.length){ep=eu[et].valueOf();if((ep>=65&&ep<=90)||(ep>=97&&ep<=122)){eq=et;et++;if(et<eu.length){er=[];ep=eu[et].valueOf();while(!((ep>=65&&ep<=90)||(ep>=97&&ep<=100)||(ep>=102&&ep<=122))&&es===false){if(ep===32){if(en!==""){er.push(parseFloat(en));en=""}et++}else{if(ep===45){if(eu[et-1].valueOf()===101){en+=eu[et].toString();et++}else{if(en!==""){er.push(parseFloat(en))}en=eu[et].toString();et++}}else{en+=eu[et].toString();et++}}if(et===eu.length){es=true}else{ep=eu[et].valueOf()}}}if(en!==""){er.push(parseFloat(en));en=""}ea=eu[eq];ep=ea.valueOf();if(ep===77){if(er.length>=2&&er.length%2===0){d9=er[0];d8=er[1];this.parsePathMoveto(d9,d8);if(er.length>2){for(eq=2,eo=er.length;eq<eo;eq+=2){d9=er[eq];d8=er[eq+1];this.parsePathLineto(d9,d8)}}}}else{if(ep===109){if(er.length>=2&&er.length%2===0){d9+=er[0];d8+=er[1];this.parsePathMoveto(d9,d8);if(er.length>2){for(eq=2,eo=er.length;eq<eo;eq+=2){d9+=er[eq];d8+=er[eq+1];this.parsePathLineto(d9,d8)}}}}else{if(ep===76){if(er.length>=2&&er.length%2===0){for(eq=0,eo=er.length;eq<eo;eq+=2){d9=er[eq];d8=er[eq+1];this.parsePathLineto(d9,d8)}}}else{if(ep===108){if(er.length>=2&&er.length%2===0){for(eq=0,eo=er.length;eq<eo;eq+=2){d9+=er[eq];d8+=er[eq+1];this.parsePathLineto(d9,d8)}}}else{if(ep===72){for(eq=0,eo=er.length;eq<eo;eq++){d9=er[eq];this.parsePathLineto(d9,d8)}}else{if(ep===104){for(eq=0,eo=er.length;eq<eo;eq++){d9+=er[eq];this.parsePathLineto(d9,d8)}}else{if(ep===86){for(eq=0,eo=er.length;eq<eo;eq++){d8=er[eq];this.parsePathLineto(d9,d8)}}else{if(ep===118){for(eq=0,eo=er.length;eq<eo;eq++){d8+=er[eq];this.parsePathLineto(d9,d8)}}else{if(ep===67){if(er.length>=6&&er.length%6===0){for(eq=0,eo=er.length;eq<eo;eq+=6){ef=er[eq];em=er[eq+1];ed=er[eq+2];el=er[eq+3];d7=er[eq+4];d6=er[eq+5];this.parsePathCurveto(ef,em,ed,el,d7,d6);d9=d7;d8=d6}}}else{if(ep===99){if(er.length>=6&&er.length%6===0){for(eq=0,eo=er.length;eq<eo;eq+=6){ef=d9+er[eq];em=d8+er[eq+1];ed=d9+er[eq+2];el=d8+er[eq+3];d7=d9+er[eq+4];d6=d8+er[eq+5];this.parsePathCurveto(ef,em,ed,el,d7,d6);d9=d7;d8=d6}}}else{if(ep===83){if(er.length>=4&&er.length%4===0){for(eq=0,eo=er.length;eq<eo;eq+=4){if(ec.toLowerCase()==="c"||ec.toLowerCase()==="s"){ei=this.vertices[this.vertices.length-2][0];eh=this.vertices[this.vertices.length-2][1];ek=this.vertices[this.vertices.length-1][0];ej=this.vertices[this.vertices.length-1][1];ef=ek+(ek-ei);em=ej+(ej-eh)}else{ef=this.vertices[this.vertices.length-1][0];em=this.vertices[this.vertices.length-1][1]}ed=er[eq];el=er[eq+1];d7=er[eq+2];d6=er[eq+3];this.parsePathCurveto(ef,em,ed,el,d7,d6);d9=d7;d8=d6}}}else{if(ep===115){if(er.length>=4&&er.length%4===0){for(eq=0,eo=er.length;eq<eo;eq+=4){if(ec.toLowerCase()==="c"||ec.toLowerCase()==="s"){ei=this.vertices[this.vertices.length-2][0];eh=this.vertices[this.vertices.length-2][1];ek=this.vertices[this.vertices.length-1][0];ej=this.vertices[this.vertices.length-1][1];ef=ek+(ek-ei);em=ej+(ej-eh)}else{ef=this.vertices[this.vertices.length-1][0];em=this.vertices[this.vertices.length-1][1]}ed=d9+er[eq];el=d8+er[eq+1];d7=d9+er[eq+2];d6=d8+er[eq+3];this.parsePathCurveto(ef,em,ed,el,d7,d6);d9=d7;d8=d6}}}else{if(ep===81){if(er.length>=4&&er.length%4===0){for(eq=0,eo=er.length;eq<eo;eq+=4){eg=er[eq];ee=er[eq+1];d7=er[eq+2];d6=er[eq+3];this.parsePathQuadto(d9,d8,eg,ee,d7,d6);d9=d7;d8=d6}}}else{if(ep===113){if(er.length>=4&&er.length%4===0){for(eq=0,eo=er.length;eq<eo;eq+=4){eg=d9+er[eq];ee=d8+er[eq+1];d7=d9+er[eq+2];d6=d8+er[eq+3];this.parsePathQuadto(d9,d8,eg,ee,d7,d6);d9=d7;d8=d6}}}else{if(ep===84){if(er.length>=2&&er.length%2===0){for(eq=0,eo=er.length;eq<eo;eq+=2){if(ec.toLowerCase()==="q"||ec.toLowerCase()==="t"){ei=this.vertices[this.vertices.length-2][0];eh=this.vertices[this.vertices.length-2][1];ek=this.vertices[this.vertices.length-1][0];ej=this.vertices[this.vertices.length-1][1];eg=ek+(ek-ei);ee=ej+(ej-eh)}else{eg=d9;ee=d8}d7=er[eq];d6=er[eq+1];this.parsePathQuadto(d9,d8,eg,ee,d7,d6);d9=d7;d8=d6}}}else{if(ep===116){if(er.length>=2&&er.length%2===0){for(eq=0,eo=er.length;eq<eo;eq+=2){if(ec.toLowerCase()==="q"||ec.toLowerCase()==="t"){ei=this.vertices[this.vertices.length-2][0];eh=this.vertices[this.vertices.length-2][1];ek=this.vertices[this.vertices.length-1][0];ej=this.vertices[this.vertices.length-1][1];eg=ek+(ek-ei);ee=ej+(ej-eh)}else{eg=d9;ee=d8}d7=d9+er[eq];d6=d8+er[eq+1];this.parsePathQuadto(d9,d8,eg,ee,d7,d6);d9=d7;d8=d6}}}else{if(ep===90||ep===122){this.close=true}}}}}}}}}}}}}}}}}ec=ea.toString()}else{et++}}};cq.prototype.parsePathQuadto=function(d8,ea,d6,eb,d7,d9){if(this.vertices.length>0){this.parsePathCode(z.BEZIER_VERTEX);this.parsePathVertex(d8+((d6-d8)*2/3),ea+((eb-ea)*2/3));this.parsePathVertex(d7+((d6-d7)*2/3),d9+((eb-d9)*2/3));this.parsePathVertex(d7,d9)}else{throw ("Path must start with M/m")}};cq.prototype.parsePathCurveto=function(d9,eb,d7,ea,d6,d8){if(this.vertices.length>0){this.parsePathCode(z.BEZIER_VERTEX);this.parsePathVertex(d9,eb);this.parsePathVertex(d7,ea);this.parsePathVertex(d6,d8)}else{throw ("Path must start with M/m")}};cq.prototype.parsePathLineto=function(d7,d6){if(this.vertices.length>0){this.parsePathCode(z.VERTEX);this.parsePathVertex(d7,d6);this.vertices[this.vertices.length-1]["moveTo"]=false}else{throw ("Path must start with M/m")}};cq.prototype.parsePathMoveto=function(d7,d6){if(this.vertices.length>0){this.parsePathCode(z.BREAK)}this.parsePathCode(z.VERTEX);this.parsePathVertex(d7,d6);this.vertices[this.vertices.length-1]["moveTo"]=true};cq.prototype.parsePathVertex=function(d6,d8){var d7=[];d7[0]=d6;d7[1]=d8;this.vertices.push(d7)};cq.prototype.parsePathCode=function(d6){this.vertexCodes.push(d6)};cq.prototype.parsePoly=function(ea){this.family=z.PATH;this.close=ea;var d7=cU.trim(this.element.getStringAttribute("points").replace(/[,\s]+/g," "));if(d7!==null){var d6=d7.split(" ");if(d6.length%2===0){for(var d9=0,d8=d6.length;d9<d8;d9++){var eb=[];eb[0]=d6[d9];eb[1]=d6[++d9];this.vertices.push(eb)}}else{throw ("Error parsing polygon points: odd number of coordinates provided")}}};cq.prototype.parseRect=function(){this.kind=z.RECT;this.family=z.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("x");this.params[1]=this.element.getFloatAttribute("y");this.params[2]=this.element.getFloatAttribute("width");this.params[3]=this.element.getFloatAttribute("height");if(this.params[2]<0||this.params[3]<0){throw ("svg error: negative width or height found while parsing <rect>")}};cq.prototype.parseEllipse=function(d8){this.kind=z.ELLIPSE;this.family=z.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("cx")|0;this.params[1]=this.element.getFloatAttribute("cy")|0;var d7,d6;if(d8){d7=d6=this.element.getFloatAttribute("r");if(d7<0){throw ("svg error: negative radius found while parsing <circle>")}}else{d7=this.element.getFloatAttribute("rx");d6=this.element.getFloatAttribute("ry");if(d7<0||d6<0){throw ("svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>")}}this.params[0]-=d7;this.params[1]-=d6;this.params[2]=d7*2;this.params[3]=d6*2};cq.prototype.parseLine=function(){this.kind=z.LINE;this.family=z.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("x1");this.params[1]=this.element.getFloatAttribute("y1");this.params[2]=this.element.getFloatAttribute("x2");this.params[3]=this.element.getFloatAttribute("y2")};cq.prototype.parseColors=function(d8){if(d8.hasAttribute("opacity")){this.setOpacity(d8.getAttribute("opacity"))}if(d8.hasAttribute("stroke")){this.setStroke(d8.getAttribute("stroke"))}if(d8.hasAttribute("stroke-width")){this.setStrokeWeight(d8.getAttribute("stroke-width"))}if(d8.hasAttribute("stroke-linejoin")){this.setStrokeJoin(d8.getAttribute("stroke-linejoin"))}if(d8.hasAttribute("stroke-linecap")){this.setStrokeCap(d8.getStringAttribute("stroke-linecap"))}if(d8.hasAttribute("fill")){this.setFill(d8.getStringAttribute("fill"))}if(d8.hasAttribute("style")){var eb=d8.getStringAttribute("style");var d9=eb.toString().split(";");for(var d7=0,d6=d9.length;d7<d6;d7++){var ea=cU.trim(d9[d7].split(":"));if(ea[0]==="fill"){this.setFill(ea[1])}else{if(ea[0]==="fill-opacity"){this.setFillOpacity(ea[1])}else{if(ea[0]==="stroke"){this.setStroke(ea[1])}else{if(ea[0]==="stroke-width"){this.setStrokeWeight(ea[1])}else{if(ea[0]==="stroke-linecap"){this.setStrokeCap(ea[1])}else{if(ea[0]==="stroke-linejoin"){this.setStrokeJoin(ea[1])}else{if(ea[0]==="stroke-opacity"){this.setStrokeOpacity(ea[1])}else{if(ea[0]==="opacity"){this.setOpacity(ea[1])}}}}}}}}}}};cq.prototype.setFillOpacity=function(d6){this.fillOpacity=parseFloat(d6);this.fillColor=this.fillOpacity*255<<24|this.fillColor&16777215};cq.prototype.setFill=function(d6){var d7=this.fillColor&4278190080;if(d6==="none"){this.fill=false}else{if(d6.indexOf("#")===0){this.fill=true;if(d6.length===4){d6=d6.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")}this.fillColor=d7|(parseInt(d6.substring(1),16))&16777215}else{if(d6.indexOf("rgb")===0){this.fill=true;this.fillColor=d7|this.parseRGB(d6)}else{if(d6.indexOf("url(#")===0){this.fillName=d6.substring(5,d6.length-1)}else{if(C[d6]){this.fill=true;this.fillColor=d7|(parseInt(C[d6].substring(1),16))&16777215}}}}}};cq.prototype.setOpacity=function(d6){this.strokeColor=parseFloat(d6)*255<<24|this.strokeColor&16777215;this.fillColor=parseFloat(d6)*255<<24|this.fillColor&16777215};cq.prototype.setStroke=function(d6){var d7=this.strokeColor&4278190080;if(d6==="none"){this.stroke=false}else{if(d6.charAt(0)==="#"){this.stroke=true;if(d6.length===4){d6=d6.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")}this.strokeColor=d7|(parseInt(d6.substring(1),16))&16777215}else{if(d6.indexOf("rgb")===0){this.stroke=true;this.strokeColor=d7|this.parseRGB(d6)}else{if(d6.indexOf("url(#")===0){this.strokeName=d6.substring(5,d6.length-1)}else{if(C[d6]){this.stroke=true;this.strokeColor=d7|(parseInt(C[d6].substring(1),16))&16777215}}}}}};cq.prototype.setStrokeWeight=function(d6){this.strokeWeight=this.parseUnitSize(d6)};cq.prototype.setStrokeJoin=function(d6){if(d6==="miter"){this.strokeJoin=z.MITER}else{if(d6==="round"){this.strokeJoin=z.ROUND}else{if(d6==="bevel"){this.strokeJoin=z.BEVEL}}}};cq.prototype.setStrokeCap=function(d6){if(d6==="butt"){this.strokeCap=z.SQUARE}else{if(d6==="round"){this.strokeCap=z.ROUND}else{if(d6==="square"){this.strokeCap=z.PROJECT}}}};cq.prototype.setStrokeOpacity=function(d6){this.strokeOpacity=parseFloat(d6);this.strokeColor=this.strokeOpacity*255<<24|this.strokeColor&16777215};cq.prototype.parseRGB=function(d7){var d8=d7.substring(d7.indexOf("(")+1,d7.indexOf(")"));var d6=d8.split(", ");return(d6[0]<<16)|(d6[1]<<8)|(d6[2])};cq.prototype.parseUnitSize=function(d7){var d6=d7.length-2;if(d6<0){return d7}if(d7.indexOf("pt")===d6){return parseFloat(d7.substring(0,d6))*1.25}if(d7.indexOf("pc")===d6){return parseFloat(d7.substring(0,d6))*15}if(d7.indexOf("mm")===d6){return parseFloat(d7.substring(0,d6))*3.543307}if(d7.indexOf("cm")===d6){return parseFloat(d7.substring(0,d6))*35.43307}if(d7.indexOf("in")===d6){return parseFloat(d7.substring(0,d6))*90}if(d7.indexOf("px")===d6){return parseFloat(d7.substring(0,d6))}return parseFloat(d7)};cU.shape=function(d8,d7,ea,d9,d6){if(arguments.length>=1&&arguments[0]!==null){if(d8.isVisible()){cU.pushMatrix();if(Q===z.CENTER){if(arguments.length===5){cU.translate(d7-d9/2,ea-d6/2);cU.scale(d9/d8.getWidth(),d6/d8.getHeight())}else{if(arguments.length===3){cU.translate(d7-d8.getWidth()/2,-d8.getHeight()/2)}else{cU.translate(-d8.getWidth()/2,-d8.getHeight()/2)}}}else{if(Q===z.CORNER){if(arguments.length===5){cU.translate(d7,ea);cU.scale(d9/d8.getWidth(),d6/d8.getHeight())}else{if(arguments.length===3){cU.translate(d7,ea)}}}else{if(Q===z.CORNERS){if(arguments.length===5){d9-=d7;d6-=ea;cU.translate(d7,ea);cU.scale(d9/d8.getWidth(),d6/d8.getHeight())}else{if(arguments.length===3){cU.translate(d7,ea)}}}}}d8.draw();if((arguments.length===1&&Q===z.CENTER)||arguments.length>1){cU.popMatrix()}}}};cU.shapeMode=function(d6){Q=d6};cU.loadShape=function(d6){if(arguments.length===1){if(d6.indexOf(".svg")>-1){return new cq(null,d6)}}return null};var cR=function(ea,d9,d6,d7,d8){this.fullName=ea||"";this.name=d9||"";this.namespace=d6||"";this.value=d7;this.type=d8};cR.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(d6){this.value=d6}};var b7=cU.XMLElement=function(){this.attributes=[];this.children=[];this.fullName=null;this.name=null;this.namespace="";this.content=null;this.parent=null;this.lineNr="";this.systemID="";this.type="ELEMENT";if(arguments.length===4){this.fullName=arguments[0]||"";if(arguments[1]){this.name=arguments[1]}else{var d6=this.fullName.indexOf(":");if(d6>=0){this.name=this.fullName.substring(d6+1)}else{this.name=this.fullName}}this.namespace=arguments[1];this.lineNr=arguments[3];this.systemID=arguments[2]}else{if((arguments.length===2&&arguments[1].indexOf(".")>-1)){this.parse(arguments[arguments.length-1])}else{if(arguments.length===1&&typeof arguments[0]==="string"){this.parse(arguments[0])}}}};b7.prototype={parse:function(d6){var d8;try{var ea=d6.substring(d6.length-4);if(ea===".xml"||ea===".svg"){d6=u(d6)}d8=new DOMParser().parseFromString(d6,"text/xml");var d7=d8.documentElement;if(d7){this.parseChildrenRecursive(null,d7)}else{throw ("Error loading document")}return this}catch(d9){throw (d9)}},parseChildrenRecursive:function(ee,ec){var eb,d7,ed,ea,d9,d6;if(!ee){this.fullName=ec.localName;this.name=ec.nodeName;eb=this}else{eb=new b7(ec.localName,ec.nodeName,"","");eb.parent=ee}if(ec.nodeType===3&&ec.textContent!==""){return this.createPCDataElement(ec.textContent)}for(ea=0,d9=ec.attributes.length;ea<d9;ea++){ed=ec.attributes[ea];d7=new cR(ed.getname,ed.nodeName,ed.namespaceURI,ed.nodeValue,ed.nodeType);eb.attributes.push(d7)}for(ea=0,d9=ec.childNodes.length;ea<d9;ea++){var d8=ec.childNodes[ea];if(d8.nodeType===1||d8.nodeType===3){d6=eb.parseChildrenRecursive(eb,d8);if(d6!==null){eb.children.push(d6)}}}return eb},createElement:function(){if(arguments.length===2){return new b7(arguments[0],arguments[1],null,null)}return new b7(arguments[0],arguments[1],arguments[2],arguments[3])},createPCDataElement:function(d6){if(d6.replace(/^\s+$/g,"")===""){return null}var d7=new b7();d7.content=d6;d7.type="TEXT";return d7},hasAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0])!==null}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])!==null}},equals:function(eb){if(!(eb instanceof b7)){return false}var d8,d7;if(this.name!==eb.getLocalName()){return false}if(this.attributes.length!==eb.getAttributeCount()){return false}if(this.attributes.length!==eb.attributes.length){return false}var ef,ed,d6,ec,ee;for(d8=0,d7=this.attributes.length;d8<d7;d8++){ef=this.attributes[d8].getName();ed=this.attributes[d8].getNamespace();ee=eb.findAttribute(ef,ed);if(ee===null){return false}if(this.attributes[d8].getValue()!==ee.getValue()){return false}if(this.attributes[d8].getType()!==ee.getType()){return false}}if(this.children.length!==eb.getChildCount()){return false}if(this.children.length>0){var ea,d9;for(d8=0,d7=this.children.length;d8<d7;d8++){ea=this.getChild(d8);d9=eb.getChild(d8);if(!ea.equals(d9)){return false}}return true}return(this.content===eb.content)},getContent:function(){if(this.type==="TEXT"){return this.content}var d6=this.children;if(d6.length===1&&d6[0].type==="TEXT"){return d6[0].content}return null},getAttribute:function(){var d6;if(arguments.length===2){d6=this.findAttribute(arguments[0]);if(d6){return d6.getValue()}return arguments[1]}else{if(arguments.length===1){d6=this.findAttribute(arguments[0]);if(d6){return d6.getValue()}return null}else{if(arguments.length===3){d6=this.findAttribute(arguments[0],arguments[1]);if(d6){return d6.getValue()}return arguments[2]}}}},getStringAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0])}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getString:function(d6){return this.getStringAttribute(d6)},getFloatAttribute:function(){if(arguments.length===1){return parseFloat(this.getAttribute(arguments[0],0))}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloat:function(d6){return this.getFloatAttribute(d6)},getIntAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0],0)}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getInt:function(d6){return this.getIntAttribute(d6)},hasChildren:function(){return this.children.length>0},addChild:function(d6){if(d6!==null){d6.parent=this;this.children.push(d6)}},insertChild:function(d8,d6){if(d8){if((d8.getLocalName()===null)&&(!this.hasChildren())){var d7=this.children[this.children.length-1];if(d7.getLocalName()===null){d7.setContent(d7.getContent()+d8.getContent());return}}d8.parent=this;this.children.splice(d6,0,d8)}},getChild:function(){if(typeof arguments[0]==="number"){return this.children[arguments[0]]}if(arguments[0].indexOf("/")!==-1){this.getChildRecursive(arguments[0].split("/"),0);return null}var d6,d9;for(var d8=0,d7=this.getChildCount();d8<d7;d8++){d6=this.getChild(d8);d9=d6.getName();if(d9!==null&&d9===arguments[0]){return d6}}return null},getChildren:function(){if(arguments.length===1){if(typeof arguments[0]==="number"){return this.getChild(arguments[0])}if(arguments[0].indexOf("/")!==-1){return this.getChildrenRecursive(arguments[0].split("/"),0)}var ea=[];var d6,d9;for(var d8=0,d7=this.getChildCount();d8<d7;d8++){d6=this.getChild(d8);d9=d6.getName();if(d9!==null&&d9===arguments[0]){ea.push(d6)}}return ea}return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(d7,eb){var d6,ea;for(var d9=0,d8=this.getChildCount();d9<d8;d9++){d6=this.getChild(d9);ea=d6.getName();if(ea!==null&&ea===d7[eb]){if(eb===d7.length-1){return d6}eb+=1;return d6.getChildRecursive(d7,eb)}}return null},getChildrenRecursive:function(d6,ea){if(ea===d6.length-1){return this.getChildren(d6[ea])}var d9=this.getChildren(d6[ea]);var d8=[];for(var d7=0;d7<d9.length;d7++){d8=d8.concat(d9[d7].getChildrenRecursive(d6,ea+1))}return d8},isLeaf:function(){return !this.hasChildren()},listChildren:function(){var d6=[];for(var d8=0,d7=this.children.length;d8<d7;d8++){d6.push(this.getChild(d8).getName())}return d6},removeAttribute:function(d7,d9){this.namespace=d9||"";for(var d8=0,d6=this.attributes.length;d8<d6;d8++){if(this.attributes[d8].getName()===d7&&this.attributes[d8].getNamespace()===this.namespace){this.attributes.splice(d8,1);break}}},removeChild:function(d8){if(d8){for(var d7=0,d6=this.children.length;d7<d6;d7++){if(this.children[d7].equals(d8)){this.children.splice(d7,1);break}}}},removeChildAtIndex:function(d6){if(this.children.length>d6){this.children.splice(d6,1)}},findAttribute:function(d7,d9){this.namespace=d9||"";for(var d8=0,d6=this.attributes.length;d8<d6;d8++){if(this.attributes[d8].getName()===d7&&this.attributes[d8].getNamespace()===this.namespace){return this.attributes[d8]}}return null},setAttribute:function(){var d6;if(arguments.length===3){var d8=arguments[0].indexOf(":");var d7=arguments[0].substring(d8+1);d6=this.findAttribute(d7,arguments[1]);if(d6){d6.setValue(arguments[2])}else{d6=new cR(arguments[0],d7,arguments[1],arguments[2],"CDATA");this.attributes.push(d6)}}else{d6=this.findAttribute(arguments[0]);if(d6){d6.setValue(arguments[1])}else{d6=new cR(arguments[0],arguments[0],null,arguments[1],"CDATA");this.attributes.push(d6)}}},setString:function(d6,d7){this.setAttribute(d6,d7)},setInt:function(d6,d7){this.setAttribute(d6,d7)},setFloat:function(d6,d7){this.setAttribute(d6,d7)},setContent:function(d6){if(this.children.length>0){D.debug("Tried to set content for XMLElement with children")}this.content=d6},setName:function(){if(arguments.length===1){this.name=arguments[0];this.fullName=arguments[0];this.namespace=null}else{var d6=arguments[0].indexOf(":");if((arguments[1]===null)||(d6<0)){this.name=arguments[0]}else{this.name=arguments[0].substring(d6+1)}this.fullName=arguments[0];this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length},toString:function(){if(this.type==="TEXT"){return this.content}var d8=(this.namespace!==""&&this.namespace!==this.name?this.namespace+":":"")+this.name;var d9="<"+d8;var d7,ea;for(d7=0;d7<this.attributes.length;d7++){var d6=this.attributes[d7];d9+=" "+d6.getName()+'="'+d6.getValue()+'"'}if(this.children.length===0){if(this.content===""){d9+="/>"}else{d9+=">"+this.content+"</"+d8+">"}}else{d9+=">";for(ea=0;ea<this.children.length;ea++){d9+=this.children[ea].toString()}d9+="</"+d8+">"}return d9}};b7.parse=function(d7){var d6=new b7();d6.parse(d7);return d6};var ck=function(d9){var d6=0;for(var d7=0;d7<d9.length;d7++){if(d7!==0){d6=o.max(d6,o.abs(d9[d7]))}else{d6=o.abs(d9[d7])}}var d8=(d6+"").indexOf(".");if(d8===0){d8=1}else{if(d8===-1){d8=(d6+"").length}}return d8};var aT=cU.PMatrix2D=function(){if(arguments.length===0){this.reset()}else{if(arguments.length===1&&arguments[0] instanceof aT){this.set(arguments[0].array())}else{if(arguments.length===6){this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}}};aT.prototype={set:function(){if(arguments.length===6){var d6=arguments;this.set([d6[0],d6[1],d6[2],d6[3],d6[4],d6[5]])}else{if(arguments.length===1&&arguments[0] instanceof aT){this.elements=arguments[0].array()}else{if(arguments.length===1&&arguments[0] instanceof Array){this.elements=arguments[0].slice()}}}},get:function(){var d6=new aT();d6.set(this.elements);return d6},reset:function(){this.set([1,0,0,0,1,0])},array:function aD(){return this.elements.slice()},translate:function(d7,d6){this.elements[2]=d7*this.elements[0]+d6*this.elements[1]+this.elements[2];this.elements[5]=d7*this.elements[3]+d6*this.elements[4]+this.elements[5]},invTranslate:function(d7,d6){this.translate(-d7,-d6)},transpose:function(){},mult:function(d7,d8){var d6,d9;if(d7 instanceof y){d6=d7.x;d9=d7.y;if(!d8){d8=new y()}}else{if(d7 instanceof Array){d6=d7[0];d9=d7[1];if(!d8){d8=[]}}}if(d8 instanceof Array){d8[0]=this.elements[0]*d6+this.elements[1]*d9+this.elements[2];d8[1]=this.elements[3]*d6+this.elements[4]*d9+this.elements[5]}else{if(d8 instanceof y){d8.x=this.elements[0]*d6+this.elements[1]*d9+this.elements[2];d8.y=this.elements[3]*d6+this.elements[4]*d9+this.elements[5];d8.z=0}}return d8},multX:function(d6,d7){return(d6*this.elements[0]+d7*this.elements[1]+this.elements[2])},multY:function(d6,d7){return(d6*this.elements[3]+d7*this.elements[4]+this.elements[5])},skewX:function(d6){this.apply(1,0,1,d6,0,0)},skewY:function(d6){this.apply(1,0,1,0,d6,0)},determinant:function(){return(this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3])},invert:function(){var eb=this.determinant();if(o.abs(eb)>z.MIN_INT){var d7=this.elements[0];var ec=this.elements[1];var ea=this.elements[2];var d9=this.elements[3];var d8=this.elements[4];var d6=this.elements[5];this.elements[0]=d8/eb;this.elements[3]=-d9/eb;this.elements[1]=-ec/eb;this.elements[4]=d7/eb;this.elements[2]=(ec*d6-d8*ea)/eb;this.elements[5]=(d9*ea-d7*d6)/eb;return true}return false},scale:function(d7,d6){if(d7&&!d6){d6=d7}if(d7&&d6){this.elements[0]*=d7;this.elements[1]*=d6;this.elements[3]*=d7;this.elements[4]*=d6}},invScale:function(d7,d6){if(d7&&!d6){d6=d7}this.scale(1/d7,1/d6)},apply:function(){var d8;if(arguments.length===1&&arguments[0] instanceof aT){d8=arguments[0].array()}else{if(arguments.length===6){d8=Array.prototype.slice.call(arguments)}else{if(arguments.length===1&&arguments[0] instanceof Array){d8=arguments[0]}}}var d6=[0,0,this.elements[2],0,0,this.elements[5]];var d9=0;for(var ea=0;ea<2;ea++){for(var d7=0;d7<3;d7++,d9++){d6[d9]+=this.elements[ea*3+0]*d8[d7+0]+this.elements[ea*3+1]*d8[d7+3]}}this.elements=d6.slice()},preApply:function(){var d7;if(arguments.length===1&&arguments[0] instanceof aT){d7=arguments[0].array()}else{if(arguments.length===6){d7=Array.prototype.slice.call(arguments)}else{if(arguments.length===1&&arguments[0] instanceof Array){d7=arguments[0]}}}var d6=[0,0,d7[2],0,0,d7[5]];d6[2]=d7[2]+this.elements[2]*d7[0]+this.elements[5]*d7[1];d6[5]=d7[5]+this.elements[2]*d7[3]+this.elements[5]*d7[4];d6[0]=this.elements[0]*d7[0]+this.elements[3]*d7[1];d6[3]=this.elements[0]*d7[3]+this.elements[3]*d7[4];d6[1]=this.elements[1]*d7[0]+this.elements[4]*d7[1];d6[4]=this.elements[1]*d7[3]+this.elements[4]*d7[4];this.elements=d6.slice()},rotate:function(d8){var ea=o.cos(d8);var d6=o.sin(d8);var d9=this.elements[0];var d7=this.elements[1];this.elements[0]=ea*d9+d6*d7;this.elements[1]=-d6*d9+ea*d7;d9=this.elements[3];d7=this.elements[4];this.elements[3]=ea*d9+d6*d7;this.elements[4]=-d6*d9+ea*d7},rotateZ:function(d6){this.rotate(d6)},invRotateZ:function(d6){this.rotateZ(d6-o.PI)},print:function(){var d7=ck(this.elements);var d6=""+cU.nfs(this.elements[0],d7,4)+" "+cU.nfs(this.elements[1],d7,4)+" "+cU.nfs(this.elements[2],d7,4)+"\n"+cU.nfs(this.elements[3],d7,4)+" "+cU.nfs(this.elements[4],d7,4)+" "+cU.nfs(this.elements[5],d7,4)+"\n\n";cU.println(d6)}};var aM=cU.PMatrix3D=function(){this.reset()};aM.prototype={set:function(){if(arguments.length===16){this.elements=Array.prototype.slice.call(arguments)}else{if(arguments.length===1&&arguments[0] instanceof aM){this.elements=arguments[0].array()}else{if(arguments.length===1&&arguments[0] instanceof Array){this.elements=arguments[0].slice()}}}},get:function(){var d6=new aM();d6.set(this.elements);return d6},reset:function(){this.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},array:function aD(){return this.elements.slice()},translate:function(d7,d6,d8){if(d8===r){d8=0}this.elements[3]+=d7*this.elements[0]+d6*this.elements[1]+d8*this.elements[2];this.elements[7]+=d7*this.elements[4]+d6*this.elements[5]+d8*this.elements[6];this.elements[11]+=d7*this.elements[8]+d6*this.elements[9]+d8*this.elements[10];this.elements[15]+=d7*this.elements[12]+d6*this.elements[13]+d8*this.elements[14]},transpose:function(){var d6=this.elements.slice();this.elements[0]=d6[0];this.elements[1]=d6[4];this.elements[2]=d6[8];this.elements[3]=d6[12];this.elements[4]=d6[1];this.elements[5]=d6[5];this.elements[6]=d6[9];this.elements[7]=d6[13];this.elements[8]=d6[2];this.elements[9]=d6[6];this.elements[10]=d6[10];this.elements[11]=d6[14];this.elements[12]=d6[3];this.elements[13]=d6[7];this.elements[14]=d6[11];this.elements[15]=d6[15]},mult:function(d8,d9){var d6,eb,ea,d7;if(d8 instanceof y){d6=d8.x;eb=d8.y;ea=d8.z;d7=1;if(!d9){d9=new y()}}else{if(d8 instanceof Array){d6=d8[0];eb=d8[1];ea=d8[2];d7=d8[3]||1;if(!d9||(d9.length!==3&&d9.length!==4)){d9=[0,0,0]}}}if(d9 instanceof Array){if(d9.length===3){d9[0]=this.elements[0]*d6+this.elements[1]*eb+this.elements[2]*ea+this.elements[3];d9[1]=this.elements[4]*d6+this.elements[5]*eb+this.elements[6]*ea+this.elements[7];d9[2]=this.elements[8]*d6+this.elements[9]*eb+this.elements[10]*ea+this.elements[11]}else{if(d9.length===4){d9[0]=this.elements[0]*d6+this.elements[1]*eb+this.elements[2]*ea+this.elements[3]*d7;d9[1]=this.elements[4]*d6+this.elements[5]*eb+this.elements[6]*ea+this.elements[7]*d7;d9[2]=this.elements[8]*d6+this.elements[9]*eb+this.elements[10]*ea+this.elements[11]*d7;d9[3]=this.elements[12]*d6+this.elements[13]*eb+this.elements[14]*ea+this.elements[15]*d7}}}if(d9 instanceof y){d9.x=this.elements[0]*d6+this.elements[1]*eb+this.elements[2]*ea+this.elements[3];d9.y=this.elements[4]*d6+this.elements[5]*eb+this.elements[6]*ea+this.elements[7];d9.z=this.elements[8]*d6+this.elements[9]*eb+this.elements[10]*ea+this.elements[11]}return d9},preApply:function(){var d8;if(arguments.length===1&&arguments[0] instanceof aM){d8=arguments[0].array()}else{if(arguments.length===16){d8=Array.prototype.slice.call(arguments)}else{if(arguments.length===1&&arguments[0] instanceof Array){d8=arguments[0]}}}var d6=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var d9=0;for(var ea=0;ea<4;ea++){for(var d7=0;d7<4;d7++,d9++){d6[d9]+=this.elements[d7+0]*d8[ea*4+0]+this.elements[d7+4]*d8[ea*4+1]+this.elements[d7+8]*d8[ea*4+2]+this.elements[d7+12]*d8[ea*4+3]}}this.elements=d6.slice()},apply:function(){var d8;if(arguments.length===1&&arguments[0] instanceof aM){d8=arguments[0].array()}else{if(arguments.length===16){d8=Array.prototype.slice.call(arguments)}else{if(arguments.length===1&&arguments[0] instanceof Array){d8=arguments[0]}}}var d6=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var d9=0;for(var ea=0;ea<4;ea++){for(var d7=0;d7<4;d7++,d9++){d6[d9]+=this.elements[ea*4+0]*d8[d7+0]+this.elements[ea*4+1]*d8[d7+4]+this.elements[ea*4+2]*d8[d7+8]+this.elements[ea*4+3]*d8[d7+12]}}this.elements=d6.slice()},rotate:function(ea,d6,ec,d9){if(!ec){this.rotateZ(ea)}else{var eb=cU.cos(ea);var d8=cU.sin(ea);var d7=1-eb;this.apply((d7*d6*d6)+eb,(d7*d6*ec)-(d8*d9),(d7*d6*d9)+(d8*ec),0,(d7*d6*ec)+(d8*d9),(d7*ec*ec)+eb,(d7*ec*d9)-(d8*d6),0,(d7*d6*d9)-(d8*ec),(d7*ec*d9)+(d8*d6),(d7*d9*d9)+eb,0,0,0,0,1)}},invApply:function(){if(Z===r){Z=new aM()}var d6=arguments;Z.set(d6[0],d6[1],d6[2],d6[3],d6[4],d6[5],d6[6],d6[7],d6[8],d6[9],d6[10],d6[11],d6[12],d6[13],d6[14],d6[15]);if(!Z.invert()){return false}this.preApply(Z);return true},rotateX:function(d7){var d8=cU.cos(d7);var d6=cU.sin(d7);this.apply([1,0,0,0,0,d8,-d6,0,0,d6,d8,0,0,0,0,1])},rotateY:function(d7){var d8=cU.cos(d7);var d6=cU.sin(d7);this.apply([d8,0,d6,0,0,1,0,0,-d6,0,d8,0,0,0,0,1])},rotateZ:function(d7){var d8=o.cos(d7);var d6=o.sin(d7);this.apply([d8,-d6,0,0,d6,d8,0,0,0,0,1,0,0,0,0,1])},scale:function(d8,d7,d6){if(d8&&!d7&&!d6){d7=d6=d8}else{if(d8&&d7&&!d6){d6=1}}if(d8&&d7&&d6){this.elements[0]*=d8;this.elements[1]*=d7;this.elements[2]*=d6;this.elements[4]*=d8;this.elements[5]*=d7;this.elements[6]*=d6;this.elements[8]*=d8;this.elements[9]*=d7;this.elements[10]*=d6;this.elements[12]*=d8;this.elements[13]*=d7;this.elements[14]*=d6}},skewX:function(d7){var d6=o.tan(d7);this.apply(1,d6,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(d7){var d6=o.tan(d7);this.apply(1,0,0,0,d6,1,0,0,0,0,1,0,0,0,0,1)},multX:function(d6,d9,d8,d7){if(!d8){return this.elements[0]*d6+this.elements[1]*d9+this.elements[3]}if(!d7){return this.elements[0]*d6+this.elements[1]*d9+this.elements[2]*d8+this.elements[3]}return this.elements[0]*d6+this.elements[1]*d9+this.elements[2]*d8+this.elements[3]*d7},multY:function(d6,d9,d8,d7){if(!d8){return this.elements[4]*d6+this.elements[5]*d9+this.elements[7]}if(!d7){return this.elements[4]*d6+this.elements[5]*d9+this.elements[6]*d8+this.elements[7]}return this.elements[4]*d6+this.elements[5]*d9+this.elements[6]*d8+this.elements[7]*d7},multZ:function(d6,d9,d8,d7){if(!d7){return this.elements[8]*d6+this.elements[9]*d9+this.elements[10]*d8+this.elements[11]}return this.elements[8]*d6+this.elements[9]*d9+this.elements[10]*d8+this.elements[11]*d7},multW:function(d6,d9,d8,d7){if(!d7){return this.elements[12]*d6+this.elements[13]*d9+this.elements[14]*d8+this.elements[15]}return this.elements[12]*d6+this.elements[13]*d9+this.elements[14]*d8+this.elements[15]*d7},invert:function(){var ef=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4];var ee=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4];var ed=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4];var ec=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5];var eb=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5];var ea=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6];var d9=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12];var d8=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12];var d7=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12];var ek=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13];var ei=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13];var eh=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14];var ej=ef*eh-ee*ei+ed*ek+ec*d7-eb*d8+ea*d9;if(o.abs(ej)<=1e-9){return false}var eg=[];eg[0]=+this.elements[5]*eh-this.elements[6]*ei+this.elements[7]*ek;eg[4]=-this.elements[4]*eh+this.elements[6]*d7-this.elements[7]*d8;eg[8]=+this.elements[4]*ei-this.elements[5]*d7+this.elements[7]*d9;eg[12]=-this.elements[4]*ek+this.elements[5]*d8-this.elements[6]*d9;eg[1]=-this.elements[1]*eh+this.elements[2]*ei-this.elements[3]*ek;eg[5]=+this.elements[0]*eh-this.elements[2]*d7+this.elements[3]*d8;eg[9]=-this.elements[0]*ei+this.elements[1]*d7-this.elements[3]*d9;eg[13]=+this.elements[0]*ek-this.elements[1]*d8+this.elements[2]*d9;eg[2]=+this.elements[13]*ea-this.elements[14]*eb+this.elements[15]*ec;eg[6]=-this.elements[12]*ea+this.elements[14]*ed-this.elements[15]*ee;eg[10]=+this.elements[12]*eb-this.elements[13]*ed+this.elements[15]*ef;eg[14]=-this.elements[12]*ec+this.elements[13]*ee-this.elements[14]*ef;eg[3]=-this.elements[9]*ea+this.elements[10]*eb-this.elements[11]*ec;eg[7]=+this.elements[8]*ea-this.elements[10]*ed+this.elements[11]*ee;eg[11]=-this.elements[8]*eb+this.elements[9]*ed-this.elements[11]*ef;eg[15]=+this.elements[8]*ec-this.elements[9]*ee+this.elements[10]*ef;var d6=1/ej;eg[0]*=d6;eg[1]*=d6;eg[2]*=d6;eg[3]*=d6;eg[4]*=d6;eg[5]*=d6;eg[6]*=d6;eg[7]*=d6;eg[8]*=d6;eg[9]*=d6;eg[10]*=d6;eg[11]*=d6;eg[12]*=d6;eg[13]*=d6;eg[14]*=d6;eg[15]*=d6;this.elements=eg.slice();return true},toString:function(){var d7="";for(var d6=0;d6<15;d6++){d7+=this.elements[d6]+", "}d7+=this.elements[15];return d7},print:function(){var d7=ck(this.elements);var d6=""+cU.nfs(this.elements[0],d7,4)+" "+cU.nfs(this.elements[1],d7,4)+" "+cU.nfs(this.elements[2],d7,4)+" "+cU.nfs(this.elements[3],d7,4)+"\n"+cU.nfs(this.elements[4],d7,4)+" "+cU.nfs(this.elements[5],d7,4)+" "+cU.nfs(this.elements[6],d7,4)+" "+cU.nfs(this.elements[7],d7,4)+"\n"+cU.nfs(this.elements[8],d7,4)+" "+cU.nfs(this.elements[9],d7,4)+" "+cU.nfs(this.elements[10],d7,4)+" "+cU.nfs(this.elements[11],d7,4)+"\n"+cU.nfs(this.elements[12],d7,4)+" "+cU.nfs(this.elements[13],d7,4)+" "+cU.nfs(this.elements[14],d7,4)+" "+cU.nfs(this.elements[15],d7,4)+"\n\n";cU.println(d6)},invTranslate:function(d7,d6,d8){this.preApply(1,0,0,-d7,0,1,0,-d6,0,0,1,-d8,0,0,0,1)},invRotateX:function(d7){var d8=o.cos(-d7);var d6=o.sin(-d7);this.preApply([1,0,0,0,0,d8,-d6,0,0,d6,d8,0,0,0,0,1])},invRotateY:function(d7){var d8=o.cos(-d7);var d6=o.sin(-d7);this.preApply([d8,0,d6,0,0,1,0,0,-d6,0,d8,0,0,0,0,1])},invRotateZ:function(d7){var d8=o.cos(-d7);var d6=o.sin(-d7);this.preApply([d8,-d6,0,0,d6,d8,0,0,0,0,1,0,0,0,0,1])},invScale:function(d6,d8,d7){this.preApply([1/d6,0,0,0,0,1/d8,0,0,0,0,1/d7,0,0,0,0,1])}};var T=cU.PMatrixStack=function(){this.matrixStack=[]};T.prototype.load=function(){var d6=dU.$newPMatrix();if(arguments.length===1){d6.set(arguments[0])}else{d6.set(arguments)}this.matrixStack.push(d6)};bN.prototype.$newPMatrix=function(){return new aT()};bx.prototype.$newPMatrix=function(){return new aM()};T.prototype.push=function(){this.matrixStack.push(this.peek())};T.prototype.pop=function(){return this.matrixStack.pop()};T.prototype.peek=function(){var d6=dU.$newPMatrix();d6.set(this.matrixStack[this.matrixStack.length-1]);return d6};T.prototype.mult=function(d6){this.matrixStack[this.matrixStack.length-1].apply(d6)};cU.split=function(d7,d6){return d7.split(d6)};cU.splitTokens=function(d9,d8){if(arguments.length===1){d8="\n\t\r\f "}d8="["+d8+"]";var d7=[];var d6=0;var ea=d9.search(d8);while(ea>=0){if(ea===0){d9=d9.substring(1)}else{d7[d6]=d9.substring(0,ea);d6++;d9=d9.substring(ea)}ea=d9.search(d8)}if(d9.length>0){d7[d6]=d9}if(d7.length===0){d7=r}return d7};cU.append=function(d7,d6){d7[d7.length]=d6;return d7};cU.concat=function(d7,d6){return d7.concat(d6)};cU.sort=function(eb,d9){var d7=[];if(eb.length>0){var ea=d9>0?d9:eb.length;for(var d8=0;d8<ea;d8++){d7.push(eb[d8])}if(typeof eb[0]==="string"){d7.sort()}else{d7.sort(function(ed,ec){return ed-ec})}if(d9>0){for(var d6=d7.length;d6<eb.length;d6++){d7.push(eb[d6])}}}return d7};cU.splice=function(ea,d9,d7){if(d9.length===0){return ea}if(d9 instanceof Array){for(var d8=0,d6=d7;d8<d9.length;d6++,d8++){ea.splice(d6,0,d9[d8])}}else{ea.splice(d7,0,d9)}return ea};cU.subset=function(d9,d8,d7){var d6=(d7!==r)?d8+d7:d9.length;return d9.slice(d8,d6)};cU.join=function(d7,d6){return d7.join(d6)};cU.shorten=function(d9){var d7=[];var d6=d9.length;for(var d8=0;d8<d6;d8++){d7[d8]=d9[d8]}d7.pop();return d7};cU.expand=function(d8,d9){var d7=d8.slice(0),d6=d9||d8.length*2;d7.length=d6;return d7};cU.arrayCopy=function(){var ec,ea=0,d8,d7=0,eb;if(arguments.length===2){ec=arguments[0];d8=arguments[1];eb=ec.length}else{if(arguments.length===3){ec=arguments[0];d8=arguments[1];eb=arguments[2]}else{if(arguments.length===5){ec=arguments[0];ea=arguments[1];d8=arguments[2];d7=arguments[3];eb=arguments[4]}}}for(var d9=ea,d6=d7;d9<eb+ea;d9++,d6++){if(d8[d6]!==r){d8[d6]=ec[d9]}else{throw"array index out of bounds exception"}}};cU.reverse=function(d6){return d6.reverse()};cU.mix=function(d7,d6,d8){return d7+(((d6-d7)*d8)>>8)};cU.peg=function(d6){return(d6<0)?0:((d6>255)?255:d6)};cU.modes=(function(){var eb=z.ALPHA_MASK,d8=z.RED_MASK,d7=z.GREEN_MASK,ea=z.BLUE_MASK,d9=o.min,d6=o.max;function ec(eh,ek,eg,ep,er,eq,ei,em,el,ee,ef){var eo=d9(((eh&4278190080)>>>24)+ek,255)<<24;var ed=(eg+(((el-eg)*ek)>>8));ed=((ed<0)?0:((ed>255)?255:ed))<<16;var ej=(ep+(((ee-ep)*ek)>>8));ej=((ej<0)?0:((ej>255)?255:ej))<<8;var en=er+(((ef-er)*ek)>>8);en=(en<0)?0:((en>255)?255:en);return(eo|ed|ej|en)}return{replace:function(ee,ed){return ed},blend:function(ef,ee){var eh=(ee&eb)>>>24,ed=(ef&d8),ej=(ef&d7),el=(ef&ea),ek=(ee&d8),eg=(ee&d7),ei=(ee&ea);return(d9(((ef&eb)>>>24)+eh,255)<<24|(ed+(((ek-ed)*eh)>>8))&d8|(ej+(((eg-ej)*eh)>>8))&d7|(el+(((ei-el)*eh)>>8))&ea)},add:function(ee,ed){var ef=(ed&eb)>>>24;return(d9(((ee&eb)>>>24)+ef,255)<<24|d9(((ee&d8)+((ed&d8)>>8)*ef),d8)&d8|d9(((ee&d7)+((ed&d7)>>8)*ef),d7)&d7|d9((ee&ea)+(((ed&ea)*ef)>>8),ea))},subtract:function(ee,ed){var ef=(ed&eb)>>>24;return(d9(((ee&eb)>>>24)+ef,255)<<24|d6(((ee&d8)-((ed&d8)>>8)*ef),d7)&d8|d6(((ee&d7)-((ed&d7)>>8)*ef),ea)&d7|d6((ee&ea)-(((ed&ea)*ef)>>8),0))},lightest:function(ee,ed){var ef=(ed&eb)>>>24;return(d9(((ee&eb)>>>24)+ef,255)<<24|d6(ee&d8,((ed&d8)>>8)*ef)&d8|d6(ee&d7,((ed&d7)>>8)*ef)&d7|d6(ee&ea,((ed&ea)*ef)>>8))},darkest:function(ef,ee){var eh=(ee&eb)>>>24,ed=(ef&d8),ej=(ef&d7),el=(ef&ea),ek=d9(ef&d8,((ee&d8)>>8)*eh),eg=d9(ef&d7,((ee&d7)>>8)*eh),ei=d9(ef&ea,((ee&ea)*eh)>>8);return(d9(((ef&eb)>>>24)+eh,255)<<24|(ed+(((ek-ed)*eh)>>8))&d8|(ej+(((eg-ej)*eh)>>8))&d7|(el+(((ei-el)*eh)>>8))&ea)},difference:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea),ek=(ef>en)?(ef-en):(en-ef),ed=(em>ei)?(em-ei):(ei-em),ee=(eo>el)?(eo-el):(el-eo);return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)},exclusion:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea),ek=ef+en-((ef*en)>>7),ed=em+ei-((em*ei)>>7),ee=eo+el-((eo*el)>>7);return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)},multiply:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea),ek=(ef*en)>>8,ed=(em*ei)>>8,ee=(eo*el)>>8;return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)},screen:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea),ek=255-(((255-ef)*(255-en))>>8),ed=255-(((255-em)*(255-ei))>>8),ee=255-(((255-eo)*(255-el))>>8);return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)},hard_light:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea),ek=(en<128)?((ef*en)>>7):(255-(((255-ef)*(255-en))>>7)),ed=(ei<128)?((em*ei)>>7):(255-(((255-em)*(255-ei))>>7)),ee=(el<128)?((eo*el)>>7):(255-(((255-eo)*(255-el))>>7));return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)},soft_light:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea),ek=((ef*en)>>7)+((ef*ef)>>8)-((ef*ef*en)>>15),ed=((em*ei)>>7)+((em*em)>>8)-((em*em*ei)>>15),ee=((eo*el)>>7)+((eo*eo)>>8)-((eo*eo*el)>>15);return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)},overlay:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea),ek=(ef<128)?((ef*en)>>7):(255-(((255-ef)*(255-en))>>7)),ed=(em<128)?((em*ei)>>7):(255-(((255-em)*(255-ei))>>7)),ee=(eo<128)?((eo*el)>>7):(255-(((255-eo)*(255-el))>>7));return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)},dodge:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea);var ek=255;if(en!==255){ek=(ef<<8)/(255-en);ek=(ek<0)?0:((ek>255)?255:ek)}var ed=255;if(ei!==255){ed=(em<<8)/(255-ei);ed=(ed<0)?0:((ed>255)?255:ed)}var ee=255;if(el!==255){ee=(eo<<8)/(255-el);ee=(ee<0)?0:((ee>255)?255:ee)}return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)},burn:function(eh,eg){var ej=(eg&eb)>>>24,ef=(eh&d8)>>16,em=(eh&d7)>>8,eo=(eh&ea),en=(eg&d8)>>16,ei=(eg&d7)>>8,el=(eg&ea);var ek=0;if(en!==0){ek=((255-ef)<<8)/en;ek=255-((ek<0)?0:((ek>255)?255:ek))}var ed=0;if(ei!==0){ed=((255-em)<<8)/ei;ed=255-((ed<0)?0:((ed>255)?255:ed))}var ee=0;if(el!==0){ee=((255-eo)<<8)/el;ee=255-((ee<0)?0:((ee>255)?255:ee))}return ec(eh,ej,ef,em,eo,en,ei,el,ek,ed,ee)}}}());function dD(eb,ea,d8,d7){var d6,d9,ed,ee;if(cW===z.HSB){var ec=cU.color.toRGB(eb,ea,d8);d6=ec[0];d9=ec[1];ed=ec[2]}else{d6=o.round(255*(eb/bF));d9=o.round(255*(ea/bE));ed=o.round(255*(d8/bC))}ee=o.round(255*(d7/bQ));d6=(d6<0)?0:d6;d9=(d9<0)?0:d9;ed=(ed<0)?0:ed;ee=(ee<0)?0:ee;d6=(d6>255)?255:d6;d9=(d9>255)?255:d9;ed=(ed>255)?255:ed;ee=(ee>255)?255:ee;return(ee<<24)&z.ALPHA_MASK|(d6<<16)&z.RED_MASK|(d9<<8)&z.GREEN_MASK|ed&z.BLUE_MASK}function dH(d6,d8){var d7;if(d6&z.ALPHA_MASK){d7=o.round(255*(d8/bQ));d7=(d7>255)?255:d7;d7=(d7<0)?0:d7;return d6-(d6&z.ALPHA_MASK)+((d7<<24)&z.ALPHA_MASK)}if(cW===z.RGB){return dD(d6,d6,d6,d8)}if(cW===z.HSB){return dD(0,0,(d6/bF)*bC,d8)}}function dJ(d6){if(d6<=bF&&d6>=0){if(cW===z.RGB){return dD(d6,d6,d6,bQ)}if(cW===z.HSB){return dD(0,0,(d6/bF)*bC,bQ)}}if(d6){if(d6>2147483647){d6-=4294967296}return d6}}cU.color=function(d6,d9,d8,d7){if(d6!==r&&d9!==r&&d8!==r&&d7!==r){return dD(d6,d9,d8,d7)}if(d6!==r&&d9!==r&&d8!==r){return dD(d6,d9,d8,bQ)}if(d6!==r&&d9!==r){return dH(d6,d9)}if(typeof d6==="number"){return dJ(d6)}return dD(bF,bE,bC,bQ)};cU.color.toString=function(d6){return"rgba("+((d6&z.RED_MASK)>>>16)+","+((d6&z.GREEN_MASK)>>>8)+","+((d6&z.BLUE_MASK))+","+((d6&z.ALPHA_MASK)>>>24)/255+")"};cU.color.toInt=function(d9,d8,d6,d7){return(d7<<24)&z.ALPHA_MASK|(d9<<16)&z.RED_MASK|(d8<<8)&z.GREEN_MASK|d6&z.BLUE_MASK};cU.color.toArray=function(d6){return[(d6&z.RED_MASK)>>>16,(d6&z.GREEN_MASK)>>>8,d6&z.BLUE_MASK,(d6&z.ALPHA_MASK)>>>24]};cU.color.toGLArray=function(d6){return[((d6&z.RED_MASK)>>>16)/255,((d6&z.GREEN_MASK)>>>8)/255,(d6&z.BLUE_MASK)/255,((d6&z.ALPHA_MASK)>>>24)/255]};cU.color.toRGB=function(d8,ee,eb){d8=(d8>bF)?bF:d8;ee=(ee>bE)?bE:ee;eb=(eb>bC)?bC:eb;d8=(d8/bF)*360;ee=(ee/bE)*100;eb=(eb/bC)*100;var ed=o.round(eb/100*255);if(ee===0){return[ed,ed,ed]}var d9=d8%360;var ea=d9%60;var d7=o.round((eb*(100-ee))/10000*255);var d6=o.round((eb*(6000-ee*ea))/600000*255);var ec=o.round((eb*(6000-ee*(60-ea)))/600000*255);switch(o.floor(d9/60)){case 0:return[ed,ec,d7];case 1:return[d6,ed,d7];case 2:return[d7,ed,ec];case 3:return[d7,d6,ed];case 4:return[ec,d7,ed];case 5:return[ed,d7,d6]}};function aP(ed){var ec,eb,d7;ec=((ed&z.RED_MASK)>>>16)/255;eb=((ed&z.GREEN_MASK)>>>8)/255;d7=(ed&z.BLUE_MASK)/255;var d6=cU.max(cU.max(ec,eb),d7),d9=cU.min(cU.min(ec,eb),d7),d8,ea;if(d9===d6){return[0,0,d6*bC]}ea=(d6-d9)/d6;if(ec===d6){d8=(eb-d7)/(d6-d9)}else{if(eb===d6){d8=2+((d7-ec)/(d6-d9))}else{d8=4+((ec-eb)/(d6-d9))}}d8/=6;if(d8<0){d8+=1}else{if(d8>1){d8-=1}}return[d8*bF,ea*bE,d6*bC]}cU.brightness=function(d6){return aP(d6)[2]};cU.saturation=function(d6){return aP(d6)[1]};cU.hue=function(d6){return aP(d6)[0]};cU.red=function(d6){return((d6&z.RED_MASK)>>>16)/255*bF};cU.green=function(d6){return((d6&z.GREEN_MASK)>>>8)/255*bE};cU.blue=function(d6){return(d6&z.BLUE_MASK)/255*bC};cU.alpha=function(d6){return((d6&z.ALPHA_MASK)>>>24)/255*bQ};cU.lerpColor=function(ei,eh,eb){var eg,em,en,eo,ek,d6,ec,eq,ej,er,ea,ep;var ee,ed,d7,el,ef;var d9=cU.color(ei);var d8=cU.color(eh);if(cW===z.HSB){ee=aP(d9);eq=((d9&z.ALPHA_MASK)>>>24)/bQ;ed=aP(d8);ep=((d8&z.ALPHA_MASK)>>>24)/bQ;el=cU.lerp(ee[0],ed[0],eb);ef=cU.lerp(ee[1],ed[1],eb);en=cU.lerp(ee[2],ed[2],eb);d7=cU.color.toRGB(el,ef,en);eo=cU.lerp(eq,ep,eb)*bQ;return(eo<<24)&z.ALPHA_MASK|(d7[0]<<16)&z.RED_MASK|(d7[1]<<8)&z.GREEN_MASK|d7[2]&z.BLUE_MASK}ek=(d9&z.RED_MASK)>>>16;d6=(d9&z.GREEN_MASK)>>>8;ec=(d9&z.BLUE_MASK);eq=((d9&z.ALPHA_MASK)>>>24)/bQ;ej=(d8&z.RED_MASK)>>>16;er=(d8&z.GREEN_MASK)>>>8;ea=(d8&z.BLUE_MASK);ep=((d8&z.ALPHA_MASK)>>>24)/bQ;eg=cU.lerp(ek,ej,eb)|0;em=cU.lerp(d6,er,eb)|0;en=cU.lerp(ec,ea,eb)|0;eo=cU.lerp(eq,ep,eb)*bQ;return(eo<<24)&z.ALPHA_MASK|(eg<<16)&z.RED_MASK|(em<<8)&z.GREEN_MASK|en&z.BLUE_MASK};cU.colorMode=function(){cW=arguments[0];if(arguments.length>1){bF=arguments[1];bE=arguments[2]||arguments[1];bC=arguments[3]||arguments[1];bQ=arguments[4]||arguments[1]}};cU.blendColor=function(d7,d6,d8){if(d8===z.REPLACE){return cU.modes.replace(d7,d6)}else{if(d8===z.BLEND){return cU.modes.blend(d7,d6)}else{if(d8===z.ADD){return cU.modes.add(d7,d6)}else{if(d8===z.SUBTRACT){return cU.modes.subtract(d7,d6)}else{if(d8===z.LIGHTEST){return cU.modes.lightest(d7,d6)}else{if(d8===z.DARKEST){return cU.modes.darkest(d7,d6)}else{if(d8===z.DIFFERENCE){return cU.modes.difference(d7,d6)}else{if(d8===z.EXCLUSION){return cU.modes.exclusion(d7,d6)}else{if(d8===z.MULTIPLY){return cU.modes.multiply(d7,d6)}else{if(d8===z.SCREEN){return cU.modes.screen(d7,d6)}else{if(d8===z.HARD_LIGHT){return cU.modes.hard_light(d7,d6)}else{if(d8===z.SOFT_LIGHT){return cU.modes.soft_light(d7,d6)}else{if(d8===z.OVERLAY){return cU.modes.overlay(d7,d6)}else{if(d8===z.DODGE){return cU.modes.dodge(d7,d6)}else{if(d8===z.BURN){return cU.modes.burn(d7,d6)}}}}}}}}}}}}}}}};function aC(){d3.save()}function cN(){d3.restore();b1=true;ap=true}cU.printMatrix=function(){dG.print()};bN.prototype.translate=function(d6,d7){dG.translate(d6,d7);aQ.invTranslate(d6,d7);d3.translate(d6,d7)};bx.prototype.translate=function(d6,d8,d7){dG.translate(d6,d8,d7);aQ.invTranslate(d6,d8,d7)};bN.prototype.scale=function(d6,d7){dG.scale(d6,d7);aQ.invScale(d6,d7);d3.scale(d6,d7||d6)};bx.prototype.scale=function(d6,d8,d7){dG.scale(d6,d8,d7);aQ.invScale(d6,d8,d7)};bN.prototype.pushMatrix=function(){al.load(dG);c8.load(aQ);aC()};bx.prototype.pushMatrix=function(){al.load(dG);c8.load(aQ)};bN.prototype.popMatrix=function(){dG.set(al.pop());aQ.set(c8.pop());cN()};bx.prototype.popMatrix=function(){dG.set(al.pop());aQ.set(c8.pop())};bN.prototype.resetMatrix=function(){dG.reset();aQ.reset();d3.setTransform(1,0,0,1,0,0)};bx.prototype.resetMatrix=function(){dG.reset();aQ.reset()};dp.prototype.applyMatrix=function(){var d6=arguments;dG.apply(d6[0],d6[1],d6[2],d6[3],d6[4],d6[5],d6[6],d6[7],d6[8],d6[9],d6[10],d6[11],d6[12],d6[13],d6[14],d6[15]);aQ.invApply(d6[0],d6[1],d6[2],d6[3],d6[4],d6[5],d6[6],d6[7],d6[8],d6[9],d6[10],d6[11],d6[12],d6[13],d6[14],d6[15])};bN.prototype.applyMatrix=function(){var d6=arguments;for(var d7=d6.length;d7<16;d7++){d6[d7]=0}d6[10]=d6[15]=1;dp.prototype.applyMatrix.apply(this,d6)};cU.rotateX=function(d6){dG.rotateX(d6);aQ.invRotateX(d6)};bN.prototype.rotateZ=function(){throw"rotateZ() is not supported in 2D mode. Use rotate(float) instead."};bx.prototype.rotateZ=function(d6){dG.rotateZ(d6);aQ.invRotateZ(d6)};cU.rotateY=function(d6){dG.rotateY(d6);aQ.invRotateY(d6)};bN.prototype.rotate=function(d6){dG.rotateZ(d6);aQ.invRotateZ(d6);d3.rotate(d6)};bx.prototype.rotate=function(d6){cU.rotateZ(d6)};cU.pushStyle=function(){aC();cU.pushMatrix();var d6={doFill:aF,currentFillColor:aX,doStroke:cc,currentStrokeColor:ct,curTint:ba,curRectMode:bH,curColorMode:cW,colorModeX:bF,colorModeZ:bC,colorModeY:bE,colorModeA:bQ,curTextFont:U,horizontalTextAlignment:L,verticalTextAlignment:cZ,textMode:cG,curFontName:W,curTextSize:dW,curTextAscent:aZ,curTextDescent:dx,curTextLeading:d2};bi.push(d6)};cU.popStyle=function(){var d6=bi.pop();if(d6){cN();cU.popMatrix();aF=d6.doFill;aX=d6.currentFillColor;cc=d6.doStroke;ct=d6.currentStrokeColor;ba=d6.curTint;bH=d6.curRectmode;cW=d6.curColorMode;bF=d6.colorModeX;bC=d6.colorModeZ;bE=d6.colorModeY;bQ=d6.colorModeA;U=d6.curTextFont;W=d6.curFontName;dW=d6.curTextSize;L=d6.horizontalTextAlignment;cZ=d6.verticalTextAlignment;cG=d6.textMode;aZ=d6.curTextAscent;dx=d6.curTextDescent;d2=d6.curTextLeading}else{throw"Too many popStyle() without enough pushStyle()"}};cU.year=function(){return new Date().getFullYear()};cU.month=function(){return new Date().getMonth()+1};cU.day=function(){return new Date().getDate()};cU.hour=function(){return new Date().getHours()};cU.minute=function(){return new Date().getMinutes()};cU.second=function(){return new Date().getSeconds()};cU.millis=function(){return Date.now()-dm};dp.prototype.redraw=function(){var d6=(Date.now()-dq)/1000;N++;var d7=N/d6;if(d6>0.5){dq=Date.now();N=0;cU.__frameRate=d7}cU.frameCount++};bN.prototype.redraw=function(){dp.prototype.redraw.apply(this,arguments);d3.lineWidth=dS;cn=true;aC();cU.draw();cN();cn=false};bx.prototype.redraw=function(){dp.prototype.redraw.apply(this,arguments);cn=true;d3.clear(d3.DEPTH_BUFFER_BIT);dz={attributes:{},locations:{}};cU.noLights();cU.lightFalloff(1,0,0);cU.shininess(1);cU.ambient(255,255,255);cU.specular(0,0,0);cU.emissive(0,0,0);cU.camera();cU.draw();cn=false};cU.noLoop=function(){aB=false;aw=false;clearInterval(b2);cO.onPause()};cU.loop=function(){if(aw){return}dq=Date.now();N=0;b2=B.setInterval(function(){try{cO.onFrameStart();cU.redraw();cO.onFrameEnd()}catch(d6){B.clearInterval(b2);throw d6}},ay);aB=true;aw=true;cO.onLoop()};cU.frameRate=function(d6){dQ=d6;ay=1000/dQ;if(aB){cU.noLoop();cU.loop()}};var at=[];function bL(d8,d7,d6){if(d8.addEventListener){d8.addEventListener(d7,d6,false)}else{d8.attachEvent("on"+d7,d6)}at.push({elem:d8,type:d7,fn:d6})}function dd(d6){var d9=d6.elem,d8=d6.type,d7=d6.fn;if(d9.removeEventListener){d9.removeEventListener(d8,d7,false)}else{if(d9.detachEvent){d9.detachEvent("on"+d8,d7)}}}cU.exit=function(){B.clearInterval(b2);J(cU.externals.canvas.id);for(var d7 in D.lib){if(D.lib.hasOwnProperty(d7)){if(D.lib[d7].hasOwnProperty("detach")){D.lib[d7].detach(cU)}}}var d6=at.length;while(d6--){dd(at[d6])}cO.onExit()};cU.cursor=function(){if(arguments.length>1||(arguments.length===1&&arguments[0] instanceof cU.PImage)){var d9=arguments[0],d6,eb;if(arguments.length>=3){d6=arguments[1];eb=arguments[2];if(d6<0||eb<0||eb>=d9.height||d6>=d9.width){throw"x and y must be non-negative and less than the dimensions of the image"}}else{d6=d9.width>>>1;eb=d9.height>>>1}var d7=d9.toDataURL();var d8='url("'+d7+'") '+d6+" "+eb+", default";X=ac.style.cursor=d8}else{if(arguments.length===1){var ea=arguments[0];X=ac.style.cursor=ea}else{X=ac.style.cursor=ci}}};cU.noCursor=function(){X=ac.style.cursor=z.NOCURSOR};cU.link=function(d6,d7){if(d7!==r){B.open(d6,d7)}else{B.location=d6}};cU.beginDraw=E;cU.endDraw=E;cU.Import=function(d6){};cU.status=function(d6){B.status=d6};cU.binary=function(d7,d8){var d9;if(d8>0){d9=d8}else{if(d7 instanceof bM){d9=16;d7|=0}else{d9=32;while(d9>1&&!((d7>>>(d9-1))&1)){d9--}}}var d6="";while(d9>0){d6+=((d7>>>(--d9))&1)?"1":"0"}return d6};cU.unbinary=function(d7){var d9=d7.length-1,d8=1,d6=0;while(d9>=0){var ea=d7[d9--];if(ea!=="0"&&ea!=="1"){throw"the value passed into unbinary was not an 8 bit binary number"}if(ea==="1"){d6+=d8}d8<<=1}return d6};function cV(ei,eg,ea,el,ec,ej){var d8=(ei<0)?ea:eg;var d7=ec===0;var eh=(ec===r||ec<0)?0:ec;var ef=o.abs(ei);if(d7){eh=1;ef*=10;while(o.abs(o.round(ef)-ef)>0.000001&&eh<7){++eh;ef*=10}}else{if(eh!==0){ef*=o.pow(10,eh)}}var d9,ee=ef*2;if(o.floor(ef)===ef){d9=ef}else{if(o.floor(ee)===ee){var d6=o.floor(ef);d9=d6+(d6%2)}else{d9=o.round(ef)}}var eb="";var ek=el+eh;while(ek>0||d9>0){ek--;eb=""+(d9%10)+eb;d9=o.floor(d9/10)}if(ej!==r){var ed=eb.length-3-eh;while(ed>0){eb=eb.substring(0,ed)+ej+eb.substring(ed);ed-=3}}if(eh>0){return d8+eb.substring(0,eb.length-eh)+"."+eb.substring(eb.length-eh,eb.length)}return d8+eb}function an(ec,eb,d6,ee,d7,ed){if(ec instanceof Array){var d9=[];for(var d8=0,ea=ec.length;d8<ea;d8++){d9.push(cV(ec[d8],eb,d6,ee,d7,ed))}return d9}return cV(ec,eb,d6,ee,d7,ed)}cU.nf=function(d8,d6,d7){return an(d8,"","-",d6,d7)};cU.nfs=function(d8,d6,d7){return an(d8," ","-",d6,d7)};cU.nfp=function(d8,d6,d7){return an(d8,"+","-",d6,d7)};cU.nfc=function(d8,d6,d7){return an(d8,"","-",d6,d7,",")};var aK=function(d8,d7){d7=(d7===r||d7===null)?d7=8:d7;if(d8<0){d8=4294967295+d8+1}var d6=Number(d8).toString(16).toUpperCase();while(d6.length<d7){d6="0"+d6}if(d6.length>=d7){d6=d6.substring(d6.length-d7,d6.length)}return d6};cU.hex=function(d7,d6){if(arguments.length===1){if(d7 instanceof bM){d6=4}else{d6=8}}return aK(d7,d6)};function dB(d6){var d7=parseInt("0x"+d6,16);if(d7>2147483647){d7-=4294967296}return d7}cU.unhex=function(d8){if(d8 instanceof Array){var d6=[];for(var d7=0;d7<d8.length;d7++){d6.push(dB(d8[d7]))}return d6}return dB(d8)};cU.loadStrings=function(d7){if(localStorage[d7]){return localStorage[d7].split("\n")}var d6=u(d7);if(typeof d6!=="string"||d6===""){return[]}d6=d6.replace(/(\r\n?)/g,"\n").replace(/\n$/,"");return d6.split("\n")};cU.saveStrings=function(d7,d6){localStorage[d7]=d6.join("\n")};cU.loadBytes=function(d8){var d7=u(d8);var d6=[];for(var d9=0;d9<d7.length;d9++){d6.push(d7.charCodeAt(d9))}return d6};function a8(d6){return Array.prototype.slice.call(d6,1)}cU.matchAll=function(d7,d6){var d9=[],d8;var ea=new RegExp(d6,"g");while((d8=ea.exec(d7))!==null){d9.push(d8);if(d8[0].length===0){++ea.lastIndex}}return d9.length>0?d9:null};cU.__contains=function(d7,d6){if(typeof d7!=="string"){return d7.contains.apply(d7,a8(arguments))}return((d7!==null)&&(d6!==null)&&(typeof d6==="string")&&(d7.indexOf(d6)>-1))};cU.__replaceAll=function(d6,d8,d7){if(typeof d6!=="string"){return d6.replaceAll.apply(d6,a8(arguments))}return d6.replace(new RegExp(d8,"g"),d7)};cU.__replaceFirst=function(d6,d8,d7){if(typeof d6!=="string"){return d6.replaceFirst.apply(d6,a8(arguments))}return d6.replace(new RegExp(d8,""),d7)};cU.__replace=function(d9,eb,ea){if(typeof d9!=="string"){return d9.replace.apply(d9,a8(arguments))}if(eb instanceof RegExp){return d9.replace(eb,ea)}if(typeof eb!=="string"){eb=eb.toString()}if(eb===""){return d9}var d8=d9.indexOf(eb);if(d8<0){return d9}var d7=0,d6="";do{d6+=d9.substring(d7,d8)+ea;d7=d8+eb.length}while((d8=d9.indexOf(eb,d7))>=0);return d6+d9.substring(d7)};cU.__equals=function(d7,d6){if(d7.equals instanceof Function){return d7.equals.apply(d7,a8(arguments))}return d7.valueOf()===d6.valueOf()};cU.__equalsIgnoreCase=function(d7,d6){if(typeof d7!=="string"){return d7.equalsIgnoreCase.apply(d7,a8(arguments))}return d7.toLowerCase()===d6.toLowerCase()};cU.__toCharArray=function(d8){if(typeof d8!=="string"){return d8.toCharArray.apply(d8,a8(arguments))}var d9=[];for(var d7=0,d6=d8.length;d7<d6;++d7){d9[d7]=new bM(d8.charAt(d7))}return d9};cU.__split=function(d9,ea,d7){if(typeof d9!=="string"){return d9.split.apply(d9,a8(arguments))}var ec=new RegExp(ea);if((d7===r)||(d7<1)){return d9.split(ec)}var d6=[],eb=d9,ed;while(((ed=eb.search(ec))!==-1)&&(d6.length<(d7-1))){var d8=ec.exec(eb).toString();d6.push(eb.substring(0,ed));eb=eb.substring(ed+d8.length)}if((ed!==-1)||(eb!=="")){d6.push(eb)}return d6};cU.__codePointAt=function(d9,d7){var ea=d9.charCodeAt(d7),d8,d6;if(55296<=ea&&ea<=56319){d8=ea;d6=d9.charCodeAt(d7+1);return((d8-55296)*1024)+(d6-56320)+65536}return ea};cU.match=function(d7,d6){return d7.match(d6)};cU.__startsWith=function(d6,d8,d7){if(typeof d6!=="string"){return d6.startsWith.apply(d6,a8(arguments))}d7=d7||0;if(d7<0||d7>d6.length){return false}return(d8===""||d8===d6)?true:(d6.indexOf(d8)===d7)};cU.__endsWith=function(d7,d8){if(typeof d7!=="string"){return d7.endsWith.apply(d7,a8(arguments))}var d6=d8?d8.length:0;return(d8===""||d8===d7)?true:(d7.indexOf(d8)===d7.length-d6)};cU.__hashCode=function(d6){if(d6.hashCode instanceof Function){return d6.hashCode.apply(d6,a8(arguments))}return h(d6)};cU.__printStackTrace=function(d6){cU.println("Exception: "+d6.toString())};var d5=[];cU.println=function(d6){var d7=d5.length;if(d7){D.logger.log(d5.join(""));d5.length=0}if(arguments.length===0&&d7===0){D.logger.log("")}else{if(arguments.length!==0){D.logger.log(d6)}}};cU.print=function(d6){d5.push(d6)};cU.str=function(d8){if(d8 instanceof Array){var d6=[];for(var d7=0;d7<d8.length;d7++){d6.push(d8[d7].toString()+"")}return d6}return(d8.toString()+"")};cU.trim=function(d8){if(d8 instanceof Array){var d6=[];for(var d7=0;d7<d8.length;d7++){d6.push(d8[d7].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,""))}return d6}return d8.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"")};function aO(d6){if(typeof d6==="number"){return d6!==0}if(typeof d6==="boolean"){return d6}if(typeof d6==="string"){return d6.toLowerCase()==="true"}if(d6 instanceof bM){return d6.code===49||d6.code===84||d6.code===116}}cU.parseBoolean=function(d8){if(d8 instanceof Array){var d6=[];for(var d7=0;d7<d8.length;d7++){d6.push(aO(d8[d7]))}return d6}return aO(d8)};cU.parseByte=function(d8){if(d8 instanceof Array){var d6=[];for(var d7=0;d7<d8.length;d7++){d6.push((0-(d8[d7]&128))|(d8[d7]&127))}return d6}return(0-(d8&128))|(d8&127)};cU.parseChar=function(d8){if(typeof d8==="number"){return new bM(String.fromCharCode(d8&65535))}if(d8 instanceof Array){var d6=[];for(var d7=0;d7<d8.length;d7++){d6.push(new bM(String.fromCharCode(d8[d7]&65535)))}return d6}throw"char() may receive only one argument of type int, byte, int[], or byte[]."};function cM(d6){if(typeof d6==="number"){return d6}if(typeof d6==="boolean"){return d6?1:0}if(typeof d6==="string"){return parseFloat(d6)}if(d6 instanceof bM){return d6.code}}cU.parseFloat=function(d8){if(d8 instanceof Array){var d6=[];for(var d7=0;d7<d8.length;d7++){d6.push(cM(d8[d7]))}return d6}return cM(d8)};function ak(d8,d6){if(typeof d8==="number"){return d8&4294967295}if(typeof d8==="boolean"){return d8?1:0}if(typeof d8==="string"){var d7=parseInt(d8,d6||10);return d7&4294967295}if(d8 instanceof bM){return d8.code}}cU.parseInt=function(d9,d8){if(d9 instanceof Array){var d6=[];for(var d7=0;d7<d9.length;d7++){if(typeof d9[d7]==="string"&&!/^\s*[+\-]?\d+\s*$/.test(d9[d7])){d6.push(0)}else{d6.push(ak(d9[d7],d8))}}return d6}return ak(d9,d8)};cU.__int_cast=function(d6){return 0|d6};cU.__instanceof=function(d8,d7){if(typeof d7!=="function"){throw"Function is expected as type argument for instanceof operator"}if(typeof d8==="string"){return d7===Object||d7===String}if(d8 instanceof d7){return true}if(typeof d8!=="object"||d8===null){return false}var ea=d8.constructor;if(d7.$isInterface){var d9=[];while(ea){if(ea.$interfaces){d9=d9.concat(ea.$interfaces)}ea=ea.$base}while(d9.length>0){var d6=d9.shift();if(d6===d7){return true}if(d6.$interfaces){d9=d9.concat(d6.$interfaces)}}return false}while(ea.hasOwnProperty("$base")){ea=ea.$base;if(ea===d7){return true}}return false};cU.abs=o.abs;cU.ceil=o.ceil;cU.constrain=function(d7,d8,d6){return d7>d6?d6:d7<d8?d8:d7};cU.dist=function(){var d8,d7,d6;if(arguments.length===4){d8=arguments[0]-arguments[2];d7=arguments[1]-arguments[3];return o.sqrt(d8*d8+d7*d7)}if(arguments.length===6){d8=arguments[0]-arguments[3];d7=arguments[1]-arguments[4];d6=arguments[2]-arguments[5];return o.sqrt(d8*d8+d7*d7+d6*d6)}};cU.exp=o.exp;cU.floor=o.floor;cU.lerp=function(d7,d6,d8){return((d6-d7)*d8)+d7};cU.log=o.log;cU.mag=function(d7,d6,d8){if(d8){return o.sqrt(d7*d7+d6*d6+d8*d8)}return o.sqrt(d7*d7+d6*d6)};cU.map=function(d9,d7,d8,d6,ea){return d6+(ea-d6)*((d9-d7)/(d8-d7))};cU.max=function(){if(arguments.length===2){return arguments[0]<arguments[1]?arguments[1]:arguments[0]}var d7=arguments.length===1?arguments[0]:arguments;if(!("length" in d7&&d7.length>0)){throw"Non-empty array is expected"}var d6=d7[0],d9=d7.length;for(var d8=1;d8<d9;++d8){if(d6<d7[d8]){d6=d7[d8]}}return d6};cU.min=function(){if(arguments.length===2){return arguments[0]<arguments[1]?arguments[0]:arguments[1]}var d6=arguments.length===1?arguments[0]:arguments;if(!("length" in d6&&d6.length>0)){throw"Non-empty array is expected"}var d8=d6[0],d9=d6.length;for(var d7=1;d7<d9;++d7){if(d8>d6[d7]){d8=d6[d7]}}return d8};cU.norm=function(d7,d6,d8){return(d7-d6)/(d8-d6)};cU.pow=o.pow;cU.round=o.round;cU.sq=function(d6){return d6*d6};cU.sqrt=o.sqrt;cU.acos=o.acos;cU.asin=o.asin;cU.atan=o.atan;cU.atan2=o.atan2;cU.cos=o.cos;cU.degrees=function(d6){return(d6*180)/o.PI};cU.radians=function(d6){return(d6/180)*o.PI};cU.sin=o.sin;cU.tan=o.tan;var bV=o.random;cU.random=function(){if(arguments.length===0){return bV()}if(arguments.length===1){return bV()*arguments[0]}var d7=arguments[0],d6=arguments[1];return bV()*(d6-d7)+d7};function cm(d8,d7){var ea=d8||362436069,d6=d7||521288629;var d9=function(){ea=(36969*(ea&65535)+(ea>>>16))&4294967295;d6=(18000*(d6&65535)+(d6>>>16))&4294967295;return(((ea&65535)<<16)|(d6&65535))&4294967295};this.nextDouble=function(){var eb=d9()/4294967296;return eb<0?1+eb:eb};this.nextInt=d9}cm.createRandomized=function(){var d6=new Date();return new cm((d6/60000)&4294967295,d6&4294967295)};cU.randomSeed=function(d6){bV=(new cm(d6)).nextDouble};cU.Random=function(d6){var d9=false,d7,d8;this.nextGaussian=function(){if(d9){d9=false;return d7}var ed,eb,ea;do{ed=2*d8()-1;eb=2*d8()-1;ea=ed*ed+eb*eb}while(ea>=1||ea===0);var ec=o.sqrt(-2*o.log(ea)/ea);d7=eb*ec;d9=true;return ed*ec};d8=(d6===r)?o.random:(new cm(d6)).nextDouble};function dw(ed){var d7=ed!==r?new cm(ed):cm.createRandomized();var ec,ea;var d9=new b(512);for(ec=0;ec<256;++ec){d9[ec]=ec}for(ec=0;ec<256;++ec){var ef=d9[ea=d7.nextInt()&255];d9[ea]=d9[ec];d9[ec]=ef}for(ec=0;ec<256;++ec){d9[ec+256]=d9[ec]}function d6(ej,eg,em,el){var ek=ej&15;var ei=ek<8?eg:em,eh=ek<4?em:ek===12||ek===14?eg:el;return((ek&1)===0?ei:-ei)+((ek&2)===0?eh:-eh)}function eb(ei,eg,ej){var eh=(ei&1)===0?eg:ej;return(ei&2)===0?-eh:eh}function ee(eh,eg){return(eh&1)===0?-eg:eg}function d8(ei,eh,eg){return eh+ei*(eg-eh)}this.noise3d=function(es,er,eq){var ej=o.floor(es)&255,eh=o.floor(er)&255,eg=o.floor(eq)&255;es-=o.floor(es);er-=o.floor(er);eq-=o.floor(eq);var en=(3-2*es)*es*es,em=(3-2*er)*er*er,el=(3-2*eq)*eq*eq;var eu=d9[ej]+eh,ep=d9[eu]+eg,eo=d9[eu+1]+eg,et=d9[ej+1]+eh,ek=d9[et]+eg,ei=d9[et+1]+eg;return d8(el,d8(em,d8(en,d6(d9[ep],es,er,eq),d6(d9[ek],es-1,er,eq)),d8(en,d6(d9[eo],es,er-1,eq),d6(d9[ei],es-1,er-1,eq))),d8(em,d8(en,d6(d9[ep+1],es,er,eq-1),d6(d9[ek+1],es-1,er,eq-1)),d8(en,d6(d9[eo+1],es,er-1,eq-1),d6(d9[ei+1],es-1,er-1,eq-1))))};this.noise2d=function(eg,en){var em=o.floor(eg)&255,ek=o.floor(en)&255;eg-=o.floor(eg);en-=o.floor(en);var ei=(3-2*eg)*eg*eg,eh=(3-2*en)*en*en;var el=d9[em]+ek,ej=d9[em+1]+ek;return d8(eh,d8(ei,eb(d9[el],eg,en),eb(d9[ej],eg-1,en)),d8(ei,eb(d9[el+1],eg,en-1),eb(d9[ej+1],eg-1,en-1)))};this.noise1d=function(eg){var ei=o.floor(eg)&255;eg-=o.floor(eg);var eh=(3-2*eg)*eg*eg;return d8(eh,ee(d9[ei],eg),ee(d9[ei+1],eg-1))}}var bT={generator:r,octaves:4,fallout:0.5,seed:r};cU.noise=function(d6,ed,ec){if(bT.generator===r){bT.generator=new dw(bT.seed)}var eb=bT.generator;var ea=1,d7=1,d9=0;for(var d8=0;d8<bT.octaves;++d8){ea*=bT.fallout;switch(arguments.length){case 1:d9+=ea*(1+eb.noise1d(d7*d6))/2;break;case 2:d9+=ea*(1+eb.noise2d(d7*d6,d7*ed))/2;break;case 3:d9+=ea*(1+eb.noise3d(d7*d6,d7*ed,d7*ec))/2;break}d7*=2}return d9};cU.noiseDetail=function(d7,d6){bT.octaves=d7;if(d6!==r){bT.fallout=d6}};cU.noiseSeed=function(d6){bT.seed=d6;bT.generator=r};dp.prototype.size=function(d7,ea,d9){cU.stroke(0);cU.fill(255);var d8={fillStyle:d3.fillStyle,strokeStyle:d3.strokeStyle,lineCap:d3.lineCap,lineJoin:d3.lineJoin};if(ac.style.length>0){ac.style.removeProperty("width");ac.style.removeProperty("height")}ac.width=cU.width=d7||100;ac.height=cU.height=ea||100;for(var eb in d8){if(d8.hasOwnProperty(eb)){d3[eb]=d8[eb]}}cU.textFont(U);cU.background();bX=o.max(1000,d7*ea*0.05);cU.externals.context=d3;for(var d6=0;d6<z.SINCOS_LENGTH;d6++){ag[d6]=cU.sin(d6*(z.PI/180)*0.5);bh[d6]=cU.cos(d6*(z.PI/180)*0.5)}};bN.prototype.size=function(d6,d8,d7){if(d3===r){d3=ac.getContext("2d");al=new T();c8=new T();dG=new aT();aQ=new aT()}dp.prototype.size.apply(this,arguments)};bx.prototype.size=(function(){var d7=false;return function d6(d9,eb,ea){if(d7){throw"Multiple calls to size() for 3D renders are not allowed."}d7=true;function ec(ee){var eh=["experimental-webgl","webgl","webkit-3d"],eg;for(var ef=0,ed=eh.length;ef<ed;ef++){eg=ee.getContext(eh[ef]);if(eg){break}}return eg}try{if(ac.width!==d9||ac.height!==eb){ac.setAttribute("width",d9);ac.setAttribute("height",eb)}d3=ec(ac);c5=d3.createTexture();bO=d3.createTexture()}catch(d8){D.debug(d8)}if(!d3){throw"WebGL context is not supported on this browser."}d3.viewport(0,0,ac.width,ac.height);d3.enable(d3.DEPTH_TEST);d3.enable(d3.BLEND);d3.blendFunc(d3.SRC_ALPHA,d3.ONE_MINUS_SRC_ALPHA);dM=bB(d3,ad,bW);bP=bB(d3,bR,be);cU.strokeWeight(1);du=bB(d3,d4,bG);d3.useProgram(du);dV("usingTexture3d",du,"usingTexture",dP);dV("usingTint3d",du,"usingTint",false);cU.lightFalloff(1,0,0);cU.shininess(1);cU.ambient(255,255,255);cU.specular(0,0,0);cU.emissive(0,0,0);bc=d3.createBuffer();d3.bindBuffer(d3.ARRAY_BUFFER,bc);d3.bufferData(d3.ARRAY_BUFFER,df,d3.STATIC_DRAW);cH=d3.createBuffer();d3.bindBuffer(d3.ARRAY_BUFFER,cH);d3.bufferData(d3.ARRAY_BUFFER,de,d3.STATIC_DRAW);di=d3.createBuffer();d3.bindBuffer(d3.ARRAY_BUFFER,di);d3.bufferData(d3.ARRAY_BUFFER,bD,d3.STATIC_DRAW);aA=d3.createBuffer();d3.bindBuffer(d3.ARRAY_BUFFER,aA);d3.bufferData(d3.ARRAY_BUFFER,aj,d3.STATIC_DRAW);b0=d3.createBuffer();d3.bindBuffer(d3.ARRAY_BUFFER,b0);d3.bufferData(d3.ARRAY_BUFFER,ah,d3.STATIC_DRAW);bb=d3.createBuffer();b6=d3.createBuffer();ar=d3.createBuffer();aE=d3.createBuffer();by=d3.createBuffer();ae=d3.createBuffer();av=d3.createBuffer();d3.bindBuffer(d3.ARRAY_BUFFER,av);d3.bufferData(d3.ARRAY_BUFFER,new e([0,0,0]),d3.STATIC_DRAW);cF=d3.createBuffer();d3.bindBuffer(d3.ARRAY_BUFFER,cF);d3.bufferData(d3.ARRAY_BUFFER,new e([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),d3.STATIC_DRAW);aa=d3.createBuffer();d3.bindBuffer(d3.ARRAY_BUFFER,aa);d3.bufferData(d3.ARRAY_BUFFER,new e([0,0,1,0,1,1,0,1]),d3.STATIC_DRAW);P=d3.createBuffer();d3.bindBuffer(d3.ELEMENT_ARRAY_BUFFER,P);d3.bufferData(d3.ELEMENT_ARRAY_BUFFER,new w([0,1,2,2,3,0]),d3.STATIC_DRAW);bS=new aM();cf=new aM();dG=new aM();aQ=new aM();da=new aM();cU.camera();cU.perspective();al=new T();c8=new T();c1=new aM();aN=new aM();aJ=new aM();bv=new aM();cb=new aM();S=new aM();S.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);dp.prototype.size.apply(this,arguments)}}());bN.prototype.ambientLight=dp.prototype.a3DOnlyFunction;bx.prototype.ambientLight=function(ea,d9,d7,d6,ed,eb){if(dI===z.MAX_LIGHTS){throw"can only create "+z.MAX_LIGHTS+" lights"}var ec=new y(d6,ed,eb);var d8=new aM();d8.scale(1,-1,1);d8.apply(dG.array());d8.mult(ec,ec);d3.useProgram(du);dY("lights.color.3d."+dI,du,"lights"+dI+".color",[ea/255,d9/255,d7/255]);dY("lights.position.3d."+dI,du,"lights"+dI+".position",ec.array());dV("lights.type.3d."+dI,du,"lights"+dI+".type",0);dV("lightCount3d",du,"lightCount",++dI)};bN.prototype.directionalLight=dp.prototype.a3DOnlyFunction;bx.prototype.directionalLight=function(ea,d9,d7,d6,ed,ec){if(dI===z.MAX_LIGHTS){throw"can only create "+z.MAX_LIGHTS+" lights"}d3.useProgram(du);var eb=new aM();eb.scale(1,-1,1);eb.apply(dG.array());eb=eb.array();var d8=[eb[0]*d6+eb[4]*ed+eb[8]*ec,eb[1]*d6+eb[5]*ed+eb[9]*ec,eb[2]*d6+eb[6]*ed+eb[10]*ec];dY("lights.color.3d."+dI,du,"lights"+dI+".color",[ea/255,d9/255,d7/255]);dY("lights.position.3d."+dI,du,"lights"+dI+".position",d8);dV("lights.type.3d."+dI,du,"lights"+dI+".type",1);dV("lightCount3d",du,"lightCount",++dI)};bN.prototype.lightFalloff=dp.prototype.a3DOnlyFunction;bx.prototype.lightFalloff=function(d7,d6,d8){d3.useProgram(du);dY("falloff3d",du,"falloff",[d7,d6,d8])};bN.prototype.lightSpecular=dp.prototype.a3DOnlyFunction;bx.prototype.lightSpecular=function(d8,d7,d6){d3.useProgram(du);dY("specular3d",du,"specular",[d8/255,d7/255,d6/255])};cU.lights=function(){cU.ambientLight(128,128,128);cU.directionalLight(128,128,128,0,0,-1);cU.lightFalloff(1,0,0);cU.lightSpecular(0,0,0)};bN.prototype.pointLight=dp.prototype.a3DOnlyFunction;bx.prototype.pointLight=function(ea,d9,d7,d6,ed,eb){if(dI===z.MAX_LIGHTS){throw"can only create "+z.MAX_LIGHTS+" lights"}var ec=new y(d6,ed,eb);var d8=new aM();d8.scale(1,-1,1);d8.apply(dG.array());d8.mult(ec,ec);d3.useProgram(du);dY("lights.color.3d."+dI,du,"lights"+dI+".color",[ea/255,d9/255,d7/255]);dY("lights.position.3d."+dI,du,"lights"+dI+".position",ec.array());dV("lights.type.3d."+dI,du,"lights"+dI+".type",2);dV("lightCount3d",du,"lightCount",++dI)};bN.prototype.noLights=dp.prototype.a3DOnlyFunction;bx.prototype.noLights=function(){dI=0;d3.useProgram(du);dV("lightCount3d",du,"lightCount",dI)};bN.prototype.spotLight=dp.prototype.a3DOnlyFunction;bx.prototype.spotLight=function(d6,ec,eh,ei,eg,ee,ed,eb,d9,d8,ea){if(dI===z.MAX_LIGHTS){throw"can only create "+z.MAX_LIGHTS+" lights"}d3.useProgram(du);var ef=new y(ei,eg,ee);var ej=new aM();ej.scale(1,-1,1);ej.apply(dG.array());ej.mult(ef,ef);ej=ej.array();var d7=[ej[0]*ed+ej[4]*eb+ej[8]*d9,ej[1]*ed+ej[5]*eb+ej[9]*d9,ej[2]*ed+ej[6]*eb+ej[10]*d9];dY("lights.color.3d."+dI,du,"lights"+dI+".color",[d6/255,ec/255,eh/255]);dY("lights.position.3d."+dI,du,"lights"+dI+".position",ef.array());dY("lights.direction.3d."+dI,du,"lights"+dI+".direction",d7);dY("lights.concentration.3d."+dI,du,"lights"+dI+".concentration",ea);dY("lights.angle.3d."+dI,du,"lights"+dI+".angle",d8);dV("lights.type.3d."+dI,du,"lights"+dI+".type",3);dV("lightCount3d",du,"lightCount",++dI)};bN.prototype.beginCamera=function(){throw ("beginCamera() is not available in 2D mode")};bx.prototype.beginCamera=function(){if(ao){throw ("You cannot call beginCamera() again before calling endCamera()")}ao=true;dG=cf;aQ=bS};bN.prototype.endCamera=function(){throw ("endCamera() is not available in 2D mode")};bx.prototype.endCamera=function(){if(!ao){throw ("You cannot call endCamera() before calling beginCamera()")}dG.set(bS);aQ.set(cf);ao=false};cU.camera=function(ek,ej,ei,ea,d8,d6,ee,ed,ec){if(arguments.length===0){dj=ac.width/2;dh=ac.height/2;dg=dh/o.tan(cI/2);ek=dj;ej=dh;ei=dg;ea=dj;d8=dh;d6=0;ee=0;ed=1;ec=0}var ef=new y(ek-ea,ej-d8,ei-d6);var eg=new y(ee,ed,ec);var eb,d9,d7;ef.normalize();var eh=y.cross(eg,ef);eg=y.cross(ef,eh);eh.normalize();eg.normalize();bS.set(eh.x,eh.y,eh.z,0,eg.x,eg.y,eg.z,0,ef.x,ef.y,ef.z,0,0,0,0,1);bS.translate(-ek,-ej,-ei);cf.reset();cf.invApply(eh.x,eh.y,eh.z,0,eg.x,eg.y,eg.z,0,ef.x,ef.y,ef.z,0,0,0,0,1);cf.translate(ek,ej,ei);dG.set(bS);aQ.set(cf)};cU.perspective=function(ea,d8,eb,d7){if(arguments.length===0){dh=ac.height/2;dg=dh/o.tan(cI/2);aW=dg/10;au=dg*10;b3=ac.width/ac.height;ea=cI;d8=b3;eb=aW;d7=au}var ec,d6,ed,d9;ec=eb*o.tan(ea/2);d6=-ec;ed=ec*d8;d9=d6*d8;cU.frustum(d9,ed,d6,ec,eb,d7)};cU.frustum=function(ec,d8,d7,eb,ea,d6){cg=true;da=new aM();da.set((2*ea)/(d8-ec),0,(d8+ec)/(d8-ec),0,0,(2*ea)/(eb-d7),(eb+d7)/(eb-d7),0,0,0,-(d6+ea)/(d6-ea),-(2*d6*ea)/(d6-ea),0,0,-1,0);var d9=new aM();d9.set(da);d9.transpose();d3.useProgram(dM);a5("projection2d",dM,"projection",false,d9.array());d3.useProgram(du);a5("projection3d",du,"projection",false,d9.array());d3.useProgram(bP);a5("uProjectionUS",bP,"uProjection",false,d9.array())};cU.ortho=function(d7,ei,d6,eg,ed,ec){if(arguments.length===0){d7=0;ei=cU.width;d6=0;eg=cU.height;ed=-10;ec=10}var eh=2/(ei-d7);var ef=2/(eg-d6);var ee=-2/(ec-ed);var eb=-(ei+d7)/(ei-d7);var ea=-(eg+d6)/(eg-d6);var d9=-(ec+ed)/(ec-ed);da=new aM();da.set(eh,0,0,eb,0,ef,0,ea,0,0,ee,d9,0,0,0,1);var d8=new aM();d8.set(da);d8.transpose();d3.useProgram(dM);a5("projection2d",dM,"projection",false,d8.array());d3.useProgram(du);a5("projection3d",du,"projection",false,d8.array());d3.useProgram(bP);a5("uProjectionUS",bP,"uProjection",false,d8.array());cg=false};cU.printProjection=function(){da.print()};cU.printCamera=function(){bS.print()};bN.prototype.box=dp.prototype.a3DOnlyFunction;bx.prototype.box=function(d8,eb,ed){if(!eb||!ed){eb=ed=d8}var ea=new aM();ea.scale(d8,eb,ed);var d7=new aM();d7.scale(1,-1,1);d7.apply(dG.array());d7.transpose();if(aF){d3.useProgram(du);a5("model3d",du,"model",false,ea.array());a5("view3d",du,"view",false,d7.array());d3.enable(d3.POLYGON_OFFSET_FILL);d3.polygonOffset(1,1);dY("color3d",du,"color",bk);if(dI>0){var d9=new aM();d9.set(d7);var d6=new aM();d6.set(ea);d9.mult(d6);var ec=new aM();ec.set(d9);ec.invert();ec.transpose();a5("normalTransform3d",du,"normalTransform",false,ec.array());db("normal3d",du,"Normal",3,cH)}else{ce("normal3d",du,"Normal")}db("vertex3d",du,"Vertex",3,bc);ce("aColor3d",du,"aColor");ce("aTexture3d",du,"aTexture");d3.drawArrays(d3.TRIANGLES,0,df.length/3);d3.disable(d3.POLYGON_OFFSET_FILL)}if(dS>0&&cc){d3.useProgram(dM);a5("model2d",dM,"model",false,ea.array());a5("view2d",dM,"view",false,d7.array());dY("color2d",dM,"color",cY);dV("picktype2d",dM,"picktype",0);db("vertex2d",dM,"Vertex",3,di);ce("aTextureCoord2d",dM,"aTextureCoord");d3.drawArrays(d3.LINES,0,bD.length/3)}};var cB=function(){var d7;cD=[];for(d7=0;d7<bJ;d7++){cD.push(0);cD.push(-1);cD.push(0);cD.push(bp[d7]);cD.push(bo[d7]);cD.push(bn[d7])}cD.push(0);cD.push(-1);cD.push(0);cD.push(bp[0]);cD.push(bo[0]);cD.push(bn[0]);var eb,d8,ea;var d9=0;for(d7=2;d7<bI;d7++){eb=d8=d9;d9+=bJ;ea=d9;for(var d6=0;d6<bJ;d6++){cD.push(bp[eb]);cD.push(bo[eb]);cD.push(bn[eb++]);cD.push(bp[ea]);cD.push(bo[ea]);cD.push(bn[ea++])}eb=d8;ea=d9;cD.push(bp[eb]);cD.push(bo[eb]);cD.push(bn[eb]);cD.push(bp[ea]);cD.push(bo[ea]);cD.push(bn[ea])}for(d7=0;d7<bJ;d7++){ea=d9+d7;cD.push(bp[ea]);cD.push(bo[ea]);cD.push(bn[ea]);cD.push(0);cD.push(1);cD.push(0)}cD.push(bp[d9]);cD.push(bo[d9]);cD.push(bn[d9]);cD.push(0);cD.push(1);cD.push(0);d3.bindBuffer(d3.ARRAY_BUFFER,bb);d3.bufferData(d3.ARRAY_BUFFER,new e(cD),d3.STATIC_DRAW)};cU.sphereDetail=function(d7,ei){var ed;if(arguments.length===1){d7=ei=arguments[0]}if(d7<3){d7=3}if(ei<2){ei=2}if((d7===bJ)&&(ei===bI)){return}var eh=z.SINCOS_LENGTH/d7;var eb=new e(d7);var d8=new e(d7);for(ed=0;ed<d7;ed++){eb[ed]=bh[((ed*eh)%z.SINCOS_LENGTH)|0];d8[ed]=ag[((ed*eh)%z.SINCOS_LENGTH)|0]}var eg=d7*(ei-1)+2;var ef=0;bp=new e(eg);bo=new e(eg);bn=new e(eg);var ee=(z.SINCOS_LENGTH*0.5)/ei;var ea=ee;for(ed=1;ed<ei;ed++){var d9=ag[(ea%z.SINCOS_LENGTH)|0];var d6=-bh[(ea%z.SINCOS_LENGTH)|0];for(var ec=0;ec<d7;ec++){bp[ef]=eb[ec]*d9;bo[ef]=d6;bn[ef++]=d8[ec]*d9}ea+=ee}bJ=d7;bI=ei;cB()};bN.prototype.sphere=dp.prototype.a3DOnlyFunction;bx.prototype.sphere=function(){var ea=arguments[0];if((bJ<3)||(bI<2)){cU.sphereDetail(30)}var d9=new aM();d9.scale(ea,ea,ea);var d7=new aM();d7.scale(1,-1,1);d7.apply(dG.array());d7.transpose();if(aF){if(dI>0){var d8=new aM();d8.set(d7);var d6=new aM();d6.set(d9);d8.mult(d6);var eb=new aM();eb.set(d8);eb.invert();eb.transpose();a5("normalTransform3d",du,"normalTransform",false,eb.array());db("normal3d",du,"Normal",3,bb)}else{ce("normal3d",du,"Normal")}d3.useProgram(du);ce("aTexture3d",du,"aTexture");a5("model3d",du,"model",false,d9.array());a5("view3d",du,"view",false,d7.array());db("vertex3d",du,"Vertex",3,bb);ce("aColor3d",du,"aColor");d3.enable(d3.POLYGON_OFFSET_FILL);d3.polygonOffset(1,1);dY("color3d",du,"color",bk);d3.drawArrays(d3.TRIANGLE_STRIP,0,cD.length/3);d3.disable(d3.POLYGON_OFFSET_FILL)}if(dS>0&&cc){d3.useProgram(dM);a5("model2d",dM,"model",false,d9.array());a5("view2d",dM,"view",false,d7.array());db("vertex2d",dM,"Vertex",3,bb);ce("aTextureCoord2d",dM,"aTextureCoord");dY("color2d",dM,"color",cY);dV("picktype2d",dM,"picktype",0);d3.drawArrays(d3.LINE_STRIP,0,cD.length/3)}};cU.modelX=function(ec,eb,ea){var ee=dG.array();var eg=cf.array();var d6=ee[0]*ec+ee[1]*eb+ee[2]*ea+ee[3];var ef=ee[4]*ec+ee[5]*eb+ee[6]*ea+ee[7];var ed=ee[8]*ec+ee[9]*eb+ee[10]*ea+ee[11];var d7=ee[12]*ec+ee[13]*eb+ee[14]*ea+ee[15];var d8=eg[0]*d6+eg[1]*ef+eg[2]*ed+eg[3]*d7;var d9=eg[12]*d6+eg[13]*ef+eg[14]*ed+eg[15]*d7;return(d9!==0)?d8/d9:d8};cU.modelY=function(ec,eb,ea){var ee=dG.array();var eg=cf.array();var d6=ee[0]*ec+ee[1]*eb+ee[2]*ea+ee[3];var ef=ee[4]*ec+ee[5]*eb+ee[6]*ea+ee[7];var ed=ee[8]*ec+ee[9]*eb+ee[10]*ea+ee[11];var d7=ee[12]*ec+ee[13]*eb+ee[14]*ea+ee[15];var d8=eg[4]*d6+eg[5]*ef+eg[6]*ed+eg[7]*d7;var d9=eg[12]*d6+eg[13]*ef+eg[14]*ed+eg[15]*d7;return(d9!==0)?d8/d9:d8};cU.modelZ=function(ec,eb,ea){var ee=dG.array();var eg=cf.array();var d6=ee[0]*ec+ee[1]*eb+ee[2]*ea+ee[3];var ef=ee[4]*ec+ee[5]*eb+ee[6]*ea+ee[7];var ed=ee[8]*ec+ee[9]*eb+ee[10]*ea+ee[11];var d8=ee[12]*ec+ee[13]*eb+ee[14]*ea+ee[15];var d7=eg[8]*d6+eg[9]*ef+eg[10]*ed+eg[11]*d8;var d9=eg[12]*d6+eg[13]*ef+eg[14]*ed+eg[15]*d8;return(d9!==0)?d7/d9:d7};bN.prototype.ambient=dp.prototype.a3DOnlyFunction;bx.prototype.ambient=function(){var d6=arguments;d3.useProgram(du);dV("usingMat3d",du,"usingMat",true);if(d6.length===1){if(typeof d6[0]==="string"){var d7=d6[0].slice(5,-1).split(",");dY("mat_ambient3d",du,"mat_ambient",[d7[0]/255,d7[1]/255,d7[2]/255])}else{dY("mat_ambient3d",du,"mat_ambient",[d6[0]/255,d6[0]/255,d6[0]/255])}}else{dY("mat_ambient3d",du,"mat_ambient",[d6[0]/255,d6[1]/255,d6[2]/255])}};bN.prototype.emissive=dp.prototype.a3DOnlyFunction;bx.prototype.emissive=function(){var d6=arguments;d3.useProgram(du);dV("usingMat3d",du,"usingMat",true);if(d6.length===1){if(typeof d6[0]==="string"){var d7=d6[0].slice(5,-1).split(",");dY("mat_emissive3d",du,"mat_emissive",[d7[0]/255,d7[1]/255,d7[2]/255])}else{dY("mat_emissive3d",du,"mat_emissive",[d6[0]/255,d6[0]/255,d6[0]/255])}}else{dY("mat_emissive3d",du,"mat_emissive",[d6[0]/255,d6[1]/255,d6[2]/255])}};bN.prototype.shininess=dp.prototype.a3DOnlyFunction;bx.prototype.shininess=function(d6){d3.useProgram(du);dV("usingMat3d",du,"usingMat",true);dY("shininess3d",du,"shininess",d6)};bN.prototype.specular=dp.prototype.a3DOnlyFunction;bx.prototype.specular=function(d7,d6,d9){var d8=cU.color(d7,d6,d9);d3.useProgram(du);dV("usingMat3d",du,"usingMat",true);dY("mat_specular3d",du,"mat_specular",cU.color.toGLArray(d8).slice(0,3))};cU.screenX=function(ed,ec,eb){var ef=dG.array();if(ef.length===16){var d6=ef[0]*ed+ef[1]*ec+ef[2]*eb+ef[3];var eg=ef[4]*ed+ef[5]*ec+ef[6]*eb+ef[7];var ee=ef[8]*ed+ef[9]*ec+ef[10]*eb+ef[11];var d7=ef[12]*ed+ef[13]*ec+ef[14]*eb+ef[15];var ea=da.array();var d8=ea[0]*d6+ea[1]*eg+ea[2]*ee+ea[3]*d7;var d9=ea[12]*d6+ea[13]*eg+ea[14]*ee+ea[15]*d7;if(d9!==0){d8/=d9}return cU.width*(1+d8)/2}return dG.multX(ed,ec)};cU.screenY=function az(ed,ec,eb){var ef=dG.array();if(ef.length===16){var d6=ef[0]*ed+ef[1]*ec+ef[2]*eb+ef[3];var eg=ef[4]*ed+ef[5]*ec+ef[6]*eb+ef[7];var ee=ef[8]*ed+ef[9]*ec+ef[10]*eb+ef[11];var d7=ef[12]*ed+ef[13]*ec+ef[14]*eb+ef[15];var ea=da.array();var d8=ea[4]*d6+ea[5]*eg+ea[6]*ee+ea[7]*d7;var d9=ea[12]*d6+ea[13]*eg+ea[14]*ee+ea[15]*d7;if(d9!==0){d8/=d9}return cU.height*(1+d8)/2}return dG.multY(ed,ec)};cU.screenZ=function ax(ed,ec,eb){var ef=dG.array();if(ef.length!==16){return 0}var ea=da.array();var d6=ef[0]*ed+ef[1]*ec+ef[2]*eb+ef[3];var eg=ef[4]*ed+ef[5]*ec+ef[6]*eb+ef[7];var ee=ef[8]*ed+ef[9]*ec+ef[10]*eb+ef[11];var d8=ef[12]*ed+ef[13]*ec+ef[14]*eb+ef[15];var d7=ea[8]*d6+ea[9]*eg+ea[10]*ee+ea[11]*d8;var d9=ea[12]*d6+ea[13]*eg+ea[14]*ee+ea[15]*d8;if(d9!==0){d7/=d9}return(d7+1)/2};dp.prototype.fill=function(){var d6=cU.color(arguments[0],arguments[1],arguments[2],arguments[3]);if(d6===aX&&aF){return}aF=true;aX=d6};bN.prototype.fill=function(){dp.prototype.fill.apply(this,arguments);ap=true};bx.prototype.fill=function(){dp.prototype.fill.apply(this,arguments);bk=cU.color.toGLArray(aX)};function bj(){if(aF){if(ap){d3.fillStyle=cU.color.toString(aX);ap=false}d3.fill()}}cU.noFill=function(){aF=false};dp.prototype.stroke=function(){var d6=cU.color(arguments[0],arguments[1],arguments[2],arguments[3]);if(d6===ct&&cc){return}cc=true;ct=d6};bN.prototype.stroke=function(){dp.prototype.stroke.apply(this,arguments);b1=true};bx.prototype.stroke=function(){dp.prototype.stroke.apply(this,arguments);cY=cU.color.toGLArray(ct)};function dc(){if(cc){if(b1){d3.strokeStyle=cU.color.toString(ct);b1=false}d3.stroke()}}cU.noStroke=function(){cc=false};dp.prototype.strokeWeight=function(d6){dS=d6};bN.prototype.strokeWeight=function(d6){dp.prototype.strokeWeight.apply(this,arguments);d3.lineWidth=d6};bx.prototype.strokeWeight=function(d6){dp.prototype.strokeWeight.apply(this,arguments);d3.useProgram(dM);dY("pointSize2d",dM,"pointSize",d6);d3.useProgram(bP);dY("pointSizeUnlitShape",bP,"pointSize",d6);d3.lineWidth(d6)};cU.strokeCap=function(d6){dU.$ensureContext().lineCap=d6};cU.strokeJoin=function(d6){dU.$ensureContext().lineJoin=d6};bN.prototype.smooth=function(){dK=true;var d6=ac.style;d6.setProperty("image-rendering","optimizeQuality","important");d6.setProperty("-ms-interpolation-mode","bicubic","important");if(d3.hasOwnProperty("mozImageSmoothingEnabled")){d3.mozImageSmoothingEnabled=true}};bx.prototype.smooth=E;bN.prototype.noSmooth=function(){dK=false;var d6=ac.style;d6.setProperty("image-rendering","optimizeSpeed","important");d6.setProperty("image-rendering","-moz-crisp-edges","important");d6.setProperty("image-rendering","-webkit-optimize-contrast","important");d6.setProperty("image-rendering","optimize-contrast","important");d6.setProperty("-ms-interpolation-mode","nearest-neighbor","important");if(d3.hasOwnProperty("mozImageSmoothingEnabled")){d3.mozImageSmoothingEnabled=false}};bx.prototype.noSmooth=E;bN.prototype.point=function(d6,d7){if(!cc){return}d6=o.round(d6);d7=o.round(d7);d3.fillStyle=cU.color.toString(ct);ap=true;if(dS>1){d3.beginPath();d3.arc(d6,d7,dS/2,0,z.TWO_PI,false);d3.fill()}else{d3.fillRect(d6,d7,1,1)}};bx.prototype.point=function(d6,ea,d9){var d8=new aM();d8.translate(d6,ea,d9||0);d8.transpose();var d7=new aM();d7.scale(1,-1,1);d7.apply(dG.array());d7.transpose();d3.useProgram(dM);a5("model2d",dM,"model",false,d8.array());a5("view2d",dM,"view",false,d7.array());if(dS>0&&cc){dY("color2d",dM,"color",cY);dV("picktype2d",dM,"picktype",0);db("vertex2d",dM,"Vertex",3,av);ce("aTextureCoord2d",dM,"aTextureCoord");d3.drawArrays(d3.POINTS,0,1)}};cU.beginShape=function(d6){dN=d6;d1=[];a7=[]};bN.prototype.vertex=function(d6,ea,d9,d8){var d7=[];if(dr){dr=false}d7.isVert=true;d7[0]=d6;d7[1]=ea;d7[2]=0;d7[3]=d9;d7[4]=d8;d7[5]=aX;d7[6]=ct;a7.push(d7)};bx.prototype.vertex=function(d6,eb,ea,d9,d8){var d7=[];if(dr){dr=false}d7.isVert=true;if(d8===r&&dP){d8=d9;d9=ea;ea=0}d7[0]=d6;d7[1]=eb;d7[2]=ea||0;d7[3]=d9||0;d7[4]=d8||0;d7[5]=bk[0];d7[6]=bk[1];d7[7]=bk[2];d7[8]=bk[3];d7[9]=cY[0];d7[10]=cY[1];d7[11]=cY[2];d7[12]=cY[3];d7[13]=a4;d7[14]=a3;d7[15]=a2;a7.push(d7)};var dX=function(d8,d7){var d6=new aM();d6.scale(1,-1,1);d6.apply(dG.array());d6.transpose();d3.useProgram(bP);a5("uViewUS",bP,"uView",false,d6.array());db("aVertexUS",bP,"aVertex",3,av);d3.bufferData(d3.ARRAY_BUFFER,new e(d8),d3.STREAM_DRAW);db("aColorUS",bP,"aColor",4,aE);d3.bufferData(d3.ARRAY_BUFFER,new e(d7),d3.STREAM_DRAW);d3.drawArrays(d3.POINTS,0,d8.length/3)};var bf=function(ea,d9,d8){var d7;if(d9==="LINES"){d7=d3.LINES}else{if(d9==="LINE_LOOP"){d7=d3.LINE_LOOP}else{d7=d3.LINE_STRIP}}var d6=new aM();d6.scale(1,-1,1);d6.apply(dG.array());d6.transpose();d3.useProgram(bP);a5("uViewUS",bP,"uView",false,d6.array());db("aVertexUS",bP,"aVertex",3,b6);d3.bufferData(d3.ARRAY_BUFFER,new e(ea),d3.STREAM_DRAW);db("aColorUS",bP,"aColor",4,by);d3.bufferData(d3.ARRAY_BUFFER,new e(d8),d3.STREAM_DRAW);d3.drawArrays(d7,0,ea.length/3)};var dk=function(ec,eb,ea,d8){var d7;if(eb==="TRIANGLES"){d7=d3.TRIANGLES}else{if(eb==="TRIANGLE_FAN"){d7=d3.TRIANGLE_FAN}else{d7=d3.TRIANGLE_STRIP}}var d6=new aM();d6.scale(1,-1,1);d6.apply(dG.array());d6.transpose();d3.useProgram(du);a5("model3d",du,"model",false,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a5("view3d",du,"view",false,d6.array());d3.enable(d3.POLYGON_OFFSET_FILL);d3.polygonOffset(1,1);dY("color3d",du,"color",[-1,0,0,0]);db("vertex3d",du,"Vertex",3,ar);d3.bufferData(d3.ARRAY_BUFFER,new e(ec),d3.STREAM_DRAW);if(dP&&ba!==null){bs(ea);dV("usingTint3d",du,"usingTint",true)}db("aColor3d",du,"aColor",4,aE);d3.bufferData(d3.ARRAY_BUFFER,new e(ea),d3.STREAM_DRAW);ce("normal3d",du,"Normal");var d9;if(dP){if(d0===z.IMAGE){for(d9=0;d9<d8.length;d9+=2){d8[d9]=d8[d9]/cr.width;d8[d9+1]/=cr.height}}for(d9=0;d9<d8.length;d9+=2){if(d8[d9+0]>1){d8[d9+0]-=(d8[d9+0]-1)}if(d8[d9+1]>1){d8[d9+1]-=(d8[d9+1]-1)}}dV("usingTexture3d",du,"usingTexture",dP);db("aTexture3d",du,"aTexture",2,ae);d3.bufferData(d3.ARRAY_BUFFER,new e(d8),d3.STREAM_DRAW)}d3.drawArrays(d7,0,ec.length/3);d3.disable(d3.POLYGON_OFFSET_FILL)};function cQ(){bj();dc();d3.closePath()}bN.prototype.endShape=function(ed){if(a7.length===0){return}var d9=ed===z.CLOSE;if(d9){a7.push(a7[0])}var d8=[];var d6=[];var ef=[];var ei=[];var eb=[];var ee;dr=true;var ec,ea,d7;var eh=a7.length;for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=0;ea<3;ea++){d6.push(ee[ea])}}for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=5;ea<9;ea++){ef.push(ee[ea])}}for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=9;ea<13;ea++){ei.push(ee[ea])}}for(ec=0;ec<eh;ec++){ee=a7[ec];eb.push(ee[3]);eb.push(ee[4])}if(dL&&(dN===z.POLYGON||dN===r)){if(eh>3){var eg=[],ej=1-aH;d3.beginPath();d3.moveTo(a7[1][0],a7[1][1]);for(ec=1;(ec+2)<eh;ec++){ee=a7[ec];eg[0]=[ee[0],ee[1]];eg[1]=[ee[0]+(ej*a7[ec+1][0]-ej*a7[ec-1][0])/6,ee[1]+(ej*a7[ec+1][1]-ej*a7[ec-1][1])/6];eg[2]=[a7[ec+1][0]+(ej*a7[ec][0]-ej*a7[ec+2][0])/6,a7[ec+1][1]+(ej*a7[ec][1]-ej*a7[ec+2][1])/6];eg[3]=[a7[ec+1][0],a7[ec+1][1]];d3.bezierCurveTo(eg[1][0],eg[1][1],eg[2][0],eg[2][1],eg[3][0],eg[3][1])}cQ()}}else{if(Y&&(dN===z.POLYGON||dN===r)){d3.beginPath();for(ec=0;ec<eh;ec++){ee=a7[ec];if(a7[ec]["isVert"]){if(a7[ec]["moveTo"]){d3.moveTo(ee[0],ee[1])}else{d3.lineTo(ee[0],ee[1])}}else{d3.bezierCurveTo(a7[ec][0],a7[ec][1],a7[ec][2],a7[ec][3],a7[ec][4],a7[ec][5])}}cQ()}else{if(dN===z.POINTS){for(ec=0;ec<eh;ec++){ee=a7[ec];if(cc){cU.stroke(ee[6])}cU.point(ee[0],ee[1])}}else{if(dN===z.LINES){for(ec=0;(ec+1)<eh;ec+=2){ee=a7[ec];if(cc){cU.stroke(a7[ec+1][6])}cU.line(ee[0],ee[1],a7[ec+1][0],a7[ec+1][1])}}else{if(dN===z.TRIANGLES){for(ec=0;(ec+2)<eh;ec+=3){ee=a7[ec];d3.beginPath();d3.moveTo(ee[0],ee[1]);d3.lineTo(a7[ec+1][0],a7[ec+1][1]);d3.lineTo(a7[ec+2][0],a7[ec+2][1]);d3.lineTo(ee[0],ee[1]);if(aF){cU.fill(a7[ec+2][5]);bj()}if(cc){cU.stroke(a7[ec+2][6]);dc()}d3.closePath()}}else{if(dN===z.TRIANGLE_STRIP){for(ec=0;(ec+1)<eh;ec++){ee=a7[ec];d3.beginPath();d3.moveTo(a7[ec+1][0],a7[ec+1][1]);d3.lineTo(ee[0],ee[1]);if(cc){cU.stroke(a7[ec+1][6])}if(aF){cU.fill(a7[ec+1][5])}if(ec+2<eh){d3.lineTo(a7[ec+2][0],a7[ec+2][1]);if(cc){cU.stroke(a7[ec+2][6])}if(aF){cU.fill(a7[ec+2][5])}}cQ()}}else{if(dN===z.TRIANGLE_FAN){if(eh>2){d3.beginPath();d3.moveTo(a7[0][0],a7[0][1]);d3.lineTo(a7[1][0],a7[1][1]);d3.lineTo(a7[2][0],a7[2][1]);if(aF){cU.fill(a7[2][5]);bj()}if(cc){cU.stroke(a7[2][6]);dc()}d3.closePath();for(ec=3;ec<eh;ec++){ee=a7[ec];d3.beginPath();d3.moveTo(a7[0][0],a7[0][1]);d3.lineTo(a7[ec-1][0],a7[ec-1][1]);d3.lineTo(ee[0],ee[1]);if(aF){cU.fill(ee[5]);bj()}if(cc){cU.stroke(ee[6]);dc()}d3.closePath()}}}else{if(dN===z.QUADS){for(ec=0;(ec+3)<eh;ec+=4){ee=a7[ec];d3.beginPath();d3.moveTo(ee[0],ee[1]);for(ea=1;ea<4;ea++){d3.lineTo(a7[ec+ea][0],a7[ec+ea][1])}d3.lineTo(ee[0],ee[1]);if(aF){cU.fill(a7[ec+3][5]);bj()}if(cc){cU.stroke(a7[ec+3][6]);dc()}d3.closePath()}}else{if(dN===z.QUAD_STRIP){if(eh>3){for(ec=0;(ec+1)<eh;ec+=2){ee=a7[ec];d3.beginPath();if(ec+3<eh){d3.moveTo(a7[ec+2][0],a7[ec+2][1]);d3.lineTo(ee[0],ee[1]);d3.lineTo(a7[ec+1][0],a7[ec+1][1]);d3.lineTo(a7[ec+3][0],a7[ec+3][1]);if(aF){cU.fill(a7[ec+3][5])}if(cc){cU.stroke(a7[ec+3][6])}}else{d3.moveTo(ee[0],ee[1]);d3.lineTo(a7[ec+1][0],a7[ec+1][1])}cQ()}}}else{d3.beginPath();d3.moveTo(a7[0][0],a7[0][1]);for(ec=1;ec<eh;ec++){ee=a7[ec];if(ee.isVert){if(ee.moveTo){d3.moveTo(ee[0],ee[1])}else{d3.lineTo(ee[0],ee[1])}}}cQ()}}}}}}}}}dL=false;Y=false;b9=[];c0=0;if(d9){a7.pop()}};bx.prototype.endShape=function(ed){if(a7.length===0){return}var d9=ed===z.CLOSE;var d8=[];var d6=[];var ef=[];var ei=[];var eb=[];var ee;dr=true;var ec,ea,d7;var eh=a7.length;for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=0;ea<3;ea++){d6.push(ee[ea])}}for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=5;ea<9;ea++){ef.push(ee[ea])}}for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=9;ea<13;ea++){ei.push(ee[ea])}}for(ec=0;ec<eh;ec++){ee=a7[ec];eb.push(ee[3]);eb.push(ee[4])}if(d9){d6.push(a7[0][0]);d6.push(a7[0][1]);d6.push(a7[0][2]);for(ec=5;ec<9;ec++){ef.push(a7[0][ec])}for(ec=9;ec<13;ec++){ei.push(a7[0][ec])}eb.push(a7[0][3]);eb.push(a7[0][4])}if(dL&&(dN===z.POLYGON||dN===r)){d8=d6;if(cc){bf(d8,null,ei)}if(aF){dk(d6,null,ef)}}else{if(Y&&(dN===z.POLYGON||dN===r)){d8=d6;d8.splice(d8.length-3);ei.splice(ei.length-4);if(cc){bf(d8,null,ei)}if(aF){dk(d6,"TRIANGLES",ef)}}else{if(dN===z.POINTS){for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=0;ea<3;ea++){d8.push(ee[ea])}}dX(d8,ei)}else{if(dN===z.LINES){for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=0;ea<3;ea++){d8.push(ee[ea])}}for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=5;ea<9;ea++){ef.push(ee[ea])}}bf(d8,"LINES",ei)}else{if(dN===z.TRIANGLES){if(eh>2){for(ec=0;(ec+2)<eh;ec+=3){d6=[];eb=[];d8=[];ef=[];ei=[];for(ea=0;ea<3;ea++){for(d7=0;d7<3;d7++){d8.push(a7[ec+ea][d7]);d6.push(a7[ec+ea][d7])}}for(ea=0;ea<3;ea++){for(d7=3;d7<5;d7++){eb.push(a7[ec+ea][d7])}}for(ea=0;ea<3;ea++){for(d7=5;d7<9;d7++){ef.push(a7[ec+ea][d7]);ei.push(a7[ec+ea][d7+4])}}if(cc){bf(d8,"LINE_LOOP",ei)}if(aF||dP){dk(d6,"TRIANGLES",ef,eb)}}}}else{if(dN===z.TRIANGLE_STRIP){if(eh>2){for(ec=0;(ec+2)<eh;ec++){d8=[];d6=[];ei=[];ef=[];eb=[];for(ea=0;ea<3;ea++){for(d7=0;d7<3;d7++){d8.push(a7[ec+ea][d7]);d6.push(a7[ec+ea][d7])}}for(ea=0;ea<3;ea++){for(d7=3;d7<5;d7++){eb.push(a7[ec+ea][d7])}}for(ea=0;ea<3;ea++){for(d7=5;d7<9;d7++){ei.push(a7[ec+ea][d7+4]);ef.push(a7[ec+ea][d7])}}if(aF||dP){dk(d6,"TRIANGLE_STRIP",ef,eb)}if(cc){bf(d8,"LINE_LOOP",ei)}}}}else{if(dN===z.TRIANGLE_FAN){if(eh>2){for(ec=0;ec<3;ec++){ee=a7[ec];for(ea=0;ea<3;ea++){d8.push(ee[ea])}}for(ec=0;ec<3;ec++){ee=a7[ec];for(ea=9;ea<13;ea++){ei.push(ee[ea])}}if(cc){bf(d8,"LINE_LOOP",ei)}for(ec=2;(ec+1)<eh;ec++){d8=[];ei=[];d8.push(a7[0][0]);d8.push(a7[0][1]);d8.push(a7[0][2]);ei.push(a7[0][9]);ei.push(a7[0][10]);ei.push(a7[0][11]);ei.push(a7[0][12]);for(ea=0;ea<2;ea++){for(d7=0;d7<3;d7++){d8.push(a7[ec+ea][d7])}}for(ea=0;ea<2;ea++){for(d7=9;d7<13;d7++){ei.push(a7[ec+ea][d7])}}if(cc){bf(d8,"LINE_STRIP",ei)}}if(aF||dP){dk(d6,"TRIANGLE_FAN",ef,eb)}}}else{if(dN===z.QUADS){for(ec=0;(ec+3)<eh;ec+=4){d8=[];for(ea=0;ea<4;ea++){ee=a7[ec+ea];for(d7=0;d7<3;d7++){d8.push(ee[d7])}}if(cc){bf(d8,"LINE_LOOP",ei)}if(aF){d6=[];ef=[];eb=[];for(ea=0;ea<3;ea++){d6.push(a7[ec][ea])}for(ea=5;ea<9;ea++){ef.push(a7[ec][ea])}for(ea=0;ea<3;ea++){d6.push(a7[ec+1][ea])}for(ea=5;ea<9;ea++){ef.push(a7[ec+1][ea])}for(ea=0;ea<3;ea++){d6.push(a7[ec+3][ea])}for(ea=5;ea<9;ea++){ef.push(a7[ec+3][ea])}for(ea=0;ea<3;ea++){d6.push(a7[ec+2][ea])}for(ea=5;ea<9;ea++){ef.push(a7[ec+2][ea])}if(dP){eb.push(a7[ec+0][3]);eb.push(a7[ec+0][4]);eb.push(a7[ec+1][3]);eb.push(a7[ec+1][4]);eb.push(a7[ec+3][3]);eb.push(a7[ec+3][4]);eb.push(a7[ec+2][3]);eb.push(a7[ec+2][4])}dk(d6,"TRIANGLE_STRIP",ef,eb)}}}else{if(dN===z.QUAD_STRIP){var eg=[];if(eh>3){for(ec=0;ec<2;ec++){ee=a7[ec];for(ea=0;ea<3;ea++){d8.push(ee[ea])}}for(ec=0;ec<2;ec++){ee=a7[ec];for(ea=9;ea<13;ea++){ei.push(ee[ea])}}bf(d8,"LINE_STRIP",ei);if(eh>4&&eh%2>0){eg=d6.splice(d6.length-3);a7.pop()}for(ec=0;(ec+3)<eh;ec+=2){d8=[];ei=[];for(ea=0;ea<3;ea++){d8.push(a7[ec+1][ea])}for(ea=0;ea<3;ea++){d8.push(a7[ec+3][ea])}for(ea=0;ea<3;ea++){d8.push(a7[ec+2][ea])}for(ea=0;ea<3;ea++){d8.push(a7[ec+0][ea])}for(ea=9;ea<13;ea++){ei.push(a7[ec+1][ea])}for(ea=9;ea<13;ea++){ei.push(a7[ec+3][ea])}for(ea=9;ea<13;ea++){ei.push(a7[ec+2][ea])}for(ea=9;ea<13;ea++){ei.push(a7[ec+0][ea])}if(cc){bf(d8,"LINE_STRIP",ei)}}if(aF||dP){dk(d6,"TRIANGLE_LIST",ef,eb)}}}else{if(eh===1){for(ea=0;ea<3;ea++){d8.push(a7[0][ea])}for(ea=9;ea<13;ea++){ei.push(a7[0][ea])}dX(d8,ei)}else{for(ec=0;ec<eh;ec++){ee=a7[ec];for(ea=0;ea<3;ea++){d8.push(ee[ea])}for(ea=5;ea<9;ea++){ei.push(ee[ea])}}if(cc&&d9){bf(d8,"LINE_LOOP",ei)}else{if(cc&&!d9){bf(d8,"LINE_STRIP",ei)}}if(aF||dP){dk(d6,"TRIANGLE_FAN",ef,eb)}}}}}}}}}dP=false;d3.useProgram(du);dV("usingTexture3d",du,"usingTexture",dP)}}dL=false;Y=false;b9=[];c0=0};var aU=function(d9,d8){var ea=1/d9;var d7=ea*ea;var d6=d7*ea;d8.set(0,0,0,1,d6,d7,ea,0,6*d6,2*d7,0,0,6*d6,0,0,0)};var dn=function(){if(!aJ){c1=new aM();aJ=new aM();cK=true}var d6=aH;c1.set((d6-1)/2,(d6+3)/2,(-3-d6)/2,(1-d6)/2,(1-d6),(-5-d6)/2,(d6+2),(d6-1)/2,(d6-1)/2,0,(1-d6)/2,0,0,1,0,0);aU(O,aJ);if(!cb){aN=new aM()}aN.set(c1);aN.preApply(cb);aJ.apply(c1)};bN.prototype.bezierVertex=function(){Y=true;var d6=[];if(dr){throw ("vertex() must be used at least once before calling bezierVertex()")}for(var d7=0;d7<arguments.length;d7++){d6[d7]=arguments[d7]}a7.push(d6);a7[a7.length-1]["isVert"]=false};bx.prototype.bezierVertex=function(){Y=true;var ed=[];if(dr){throw ("vertex() must be used at least once before calling bezierVertex()")}if(arguments.length===9){if(bv===r){bv=new aM()}var ei=a7.length-1;aU(cw,bv);bv.apply(S);var ek=bv.array();var d9=a7[ei][0],ej=a7[ei][1],ec=a7[ei][2];var ef=ek[4]*d9+ek[5]*arguments[0]+ek[6]*arguments[3]+ek[7]*arguments[6];var ee=ek[8]*d9+ek[9]*arguments[0]+ek[10]*arguments[3]+ek[11]*arguments[6];var eb=ek[12]*d9+ek[13]*arguments[0]+ek[14]*arguments[3]+ek[15]*arguments[6];var el=ek[4]*ej+ek[5]*arguments[1]+ek[6]*arguments[4]+ek[7]*arguments[7];var eh=ek[8]*ej+ek[9]*arguments[1]+ek[10]*arguments[4]+ek[11]*arguments[7];var eg=ek[12]*ej+ek[13]*arguments[1]+ek[14]*arguments[4]+ek[15]*arguments[7];var d8=ek[4]*ec+ek[5]*arguments[2]+ek[6]*arguments[5]+ek[7]*arguments[8];var d7=ek[8]*ec+ek[9]*arguments[2]+ek[10]*arguments[5]+ek[11]*arguments[8];var d6=ek[12]*ec+ek[13]*arguments[2]+ek[14]*arguments[5]+ek[15]*arguments[8];for(var ea=0;ea<cw;ea++){d9+=ef;ef+=ee;ee+=eb;ej+=el;el+=eh;eh+=eg;ec+=d8;d8+=d7;d7+=d6;cU.vertex(d9,ej,ec)}cU.vertex(arguments[6],arguments[7],arguments[8])}};var dF=function(){var d6=d.createElement("canvas");try{d3.texImage2D(d3.TEXTURE_2D,0,d3.RGBA,d3.RGBA,d3.UNSIGNED_BYTE,d6);dF=function(d8){d3.texImage2D(d3.TEXTURE_2D,0,d3.RGBA,d3.RGBA,d3.UNSIGNED_BYTE,d8)}}catch(d7){dF=function(d8){d3.texImage2D(d3.TEXTURE_2D,0,d8,false)}}dF.apply(this,arguments)};cU.texture=function(d9){var d7=dU.$ensureContext();if(d9.localName==="canvas"){d7.bindTexture(d7.TEXTURE_2D,c5);dF(d9);d7.texParameteri(d7.TEXTURE_2D,d7.TEXTURE_MAG_FILTER,d7.LINEAR);d7.texParameteri(d7.TEXTURE_2D,d7.TEXTURE_MIN_FILTER,d7.LINEAR);d7.generateMipmap(d7.TEXTURE_2D)}else{if(!d9.__texture){var d8=d7.createTexture();d9.__texture=d8;var eb=d.createElement("canvas");var ea;if(d9.width&(d9.width-1)===0){eb.width=d9.width}else{ea=1;while(ea<d9.width){ea*=2}eb.width=ea}if(d9.height&(d9.height-1)===0){eb.height=d9.height}else{ea=1;while(ea<d9.height){ea*=2}eb.height=ea}d9.resize(eb.width,eb.height);var d6=eb.getContext("2d");d6.putImageData(d9.imageData,0,0);d9.__cvs=eb;d7.bindTexture(d7.TEXTURE_2D,d9.__texture);d7.texParameteri(d7.TEXTURE_2D,d7.TEXTURE_MIN_FILTER,d7.LINEAR_MIPMAP_LINEAR);d7.texParameteri(d7.TEXTURE_2D,d7.TEXTURE_MAG_FILTER,d7.LINEAR);d7.texParameteri(d7.TEXTURE_2D,d7.TEXTURE_WRAP_T,d7.CLAMP_TO_EDGE);d7.texParameteri(d7.TEXTURE_2D,d7.TEXTURE_WRAP_S,d7.CLAMP_TO_EDGE);dF(d9.__cvs);d7.generateMipmap(d7.TEXTURE_2D)}else{d7.bindTexture(d7.TEXTURE_2D,d9.__texture)}}cr.width=d9.width;cr.height=d9.height;dP=true;d7.useProgram(du);dV("usingTexture3d",du,"usingTexture",dP)};cU.textureMode=function(d6){d0=d6};var aq=function(er,ec,ei,ep,eb,eh,en,ea,eg,el,d9,ee){var es=ep;var ed=eb;var ej=eh;var ef=aJ.array();var eq=ef[4]*er+ef[5]*ep+ef[6]*en+ef[7]*el;var eo=ef[8]*er+ef[9]*ep+ef[10]*en+ef[11]*el;var em=ef[12]*er+ef[13]*ep+ef[14]*en+ef[15]*el;var ev=ef[4]*ec+ef[5]*eb+ef[6]*ea+ef[7]*d9;var eu=ef[8]*ec+ef[9]*eb+ef[10]*ea+ef[11]*d9;var et=ef[12]*ec+ef[13]*eb+ef[14]*ea+ef[15]*d9;var d8=ef[4]*ei+ef[5]*eh+ef[6]*eg+ef[7]*ee;var d7=ef[8]*ei+ef[9]*eh+ef[10]*eg+ef[11]*ee;var d6=ef[12]*ei+ef[13]*eh+ef[14]*eg+ef[15]*ee;cU.vertex(es,ed,ej);for(var ek=0;ek<O;ek++){es+=eq;eq+=eo;eo+=em;ed+=ev;ev+=eu;eu+=et;ej+=d8;d8+=d7;d7+=d6;cU.vertex(es,ed,ej)}};bN.prototype.curveVertex=function(d6,d7){dL=true;cU.vertex(d6,d7)};bx.prototype.curveVertex=function(d6,d9,d8){dL=true;if(!cK){dn()}var d7=[];d7[0]=d6;d7[1]=d9;d7[2]=d8;b9.push(d7);c0++;if(c0>3){aq(b9[c0-4][0],b9[c0-4][1],b9[c0-4][2],b9[c0-3][0],b9[c0-3][1],b9[c0-3][2],b9[c0-2][0],b9[c0-2][1],b9[c0-2][2],b9[c0-1][0],b9[c0-1][1],b9[c0-1][2])}};bN.prototype.curve=function(){if(arguments.length===8){cU.beginShape();cU.curveVertex(arguments[0],arguments[1]);cU.curveVertex(arguments[2],arguments[3]);cU.curveVertex(arguments[4],arguments[5]);cU.curveVertex(arguments[6],arguments[7]);cU.endShape()}};bx.prototype.curve=function(){if(arguments.length===12){cU.beginShape();cU.curveVertex(arguments[0],arguments[1],arguments[2]);cU.curveVertex(arguments[3],arguments[4],arguments[5]);cU.curveVertex(arguments[6],arguments[7],arguments[8]);cU.curveVertex(arguments[9],arguments[10],arguments[11]);cU.endShape()}};cU.curveTightness=function(d6){aH=d6};cU.curveDetail=function(d6){O=d6;dn()};cU.rectMode=function(d6){bH=d6};cU.imageMode=function(d6){switch(d6){case z.CORNER:bg=aV;break;case z.CORNERS:bg=bZ;break;case z.CENTER:bg=aL;break;default:throw"Invalid imageMode"}};cU.ellipseMode=function(d6){cL=d6};cU.arc=function(ei,eg,d9,ek,d8,eh){if(d9<=0||eh<d8){return}if(cL===z.CORNERS){d9=d9-ei;ek=ek-eg}else{if(cL===z.RADIUS){ei=ei-d9;eg=eg-ek;d9=d9*2;ek=ek*2}else{if(cL===z.CENTER){ei=ei-d9/2;eg=eg-ek/2}}}while(d8<0){d8+=z.TWO_PI;eh+=z.TWO_PI}if(eh-d8>z.TWO_PI){d8=0;eh=z.TWO_PI}var ej=d9/2;var el=ek/2;var ed=ei+ej;var eb=eg+el;var d7=0|(-0.5+(d8/z.TWO_PI)*z.SINCOS_LENGTH);var ef=0|(0.5+(eh/z.TWO_PI)*z.SINCOS_LENGTH);var ee,ec;if(aF){var ea=cc;cc=false;cU.beginShape();cU.vertex(ed,eb);for(ee=d7,ec=d7;ee<ef;ee++,ec++){if(ec>=z.SINCOS_LENGTH){ec=ec-z.SINCOS_LENGTH}cU.vertex(ed+bh[ec]*ej,eb+ag[ec]*el)}cU.endShape(z.CLOSE);cc=ea}if(cc){var d6=aF;aF=false;cU.beginShape();for(ee=d7,ec=d7;ee<ef;ee++,ec++){if(ec>=z.SINCOS_LENGTH){ec=ec-z.SINCOS_LENGTH}cU.vertex(ed+bh[ec]*ej,eb+ag[ec]*el)}ec=ef%z.SINCOS_LENGTH;cU.vertex(ed+bh[ec]*ej,eb+ag[ec]*el);cU.endShape();aF=d6}};bN.prototype.line=function(d7,ee,d6,ec){if(!cc){return}d7=o.round(d7);d6=o.round(d6);ee=o.round(ee);ec=o.round(ec);if(d7===d6&&ee===ec){cU.point(d7,ee);return}var d8=r,ef=r,eb=true,ed=dG.array(),d9=[1,0,0,0,1,0];for(var ea=0;ea<6&&eb;ea++){eb=ed[ea]===d9[ea]}if(eb){if(d7===d6){if(ee>ec){d8=ee;ee=ec;ec=d8}ec++;if(dS%2===1){d3.translate(0.5,0)}}else{if(ee===ec){if(d7>d6){d8=d7;d7=d6;d6=d8}d6++;if(dS%2===1){d3.translate(0,0.5)}}}if(dS===1){ef=d3.lineCap;d3.lineCap="butt"}}d3.beginPath();d3.moveTo(d7||0,ee||0);d3.lineTo(d6||0,ec||0);dc();if(eb){if(d7===d6&&dS%2===1){d3.translate(-0.5,0)}else{if(ee===ec&&dS%2===1){d3.translate(0,-0.5)}}if(dS===1){d3.lineCap=ef}}};bx.prototype.line=function(d8,eb,ed,d7,d9,ec){if(d9===r||ec===r){ec=0;d9=d7;d7=ed;ed=0}if(d8===d7&&eb===d9&&ed===ec){cU.point(d8,eb,ed);return}var ea=[d8,eb,ed,d7,d9,ec];var d6=new aM();d6.scale(1,-1,1);d6.apply(dG.array());d6.transpose();if(dS>0&&cc){d3.useProgram(dM);a5("model2d",dM,"model",false,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a5("view2d",dM,"view",false,d6.array());dY("color2d",dM,"color",cY);dV("picktype2d",dM,"picktype",0);db("vertex2d",dM,"Vertex",3,b6);ce("aTextureCoord2d",dM,"aTextureCoord");d3.bufferData(d3.ARRAY_BUFFER,new e(ea),d3.STREAM_DRAW);d3.drawArrays(d3.LINES,0,2)}};bN.prototype.bezier=function(){if(arguments.length!==8){throw ("You must use 8 parameters for bezier() in 2D mode")}cU.beginShape();cU.vertex(arguments[0],arguments[1]);cU.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);cU.endShape()};bx.prototype.bezier=function(){if(arguments.length!==12){throw ("You must use 12 parameters for bezier() in 3D mode")}cU.beginShape();cU.vertex(arguments[0],arguments[1],arguments[2]);cU.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);cU.endShape()};cU.bezierDetail=function(d6){cw=d6};cU.bezierPoint=function(d7,d6,ea,d9,d8){return(1-d8)*(1-d8)*(1-d8)*d7+3*(1-d8)*(1-d8)*d8*d6+3*(1-d8)*d8*d8*ea+d8*d8*d8*d9};cU.bezierTangent=function(d7,d6,ea,d9,d8){return(3*d8*d8*(-d7+3*d6-3*ea+d9)+6*d8*(d7-2*d6+ea)+3*(-d7+d6))};cU.curvePoint=function(d7,d6,ea,d9,d8){return 0.5*((2*d6)+(-d7+ea)*d8+(2*d7-5*d6+4*ea-d9)*d8*d8+(-d7+3*d6-3*ea+d9)*d8*d8*d8)};cU.curveTangent=function(d7,d6,ea,d9,d8){return 0.5*((-d7+ea)+2*(2*d7-5*d6+4*ea-d9)*d8+3*(-d7+3*d6-3*ea+d9)*d8*d8)};cU.triangle=function(d9,eb,d7,ea,d6,d8){cU.beginShape(z.TRIANGLES);cU.vertex(d9,eb,0);cU.vertex(d7,ea,0);cU.vertex(d6,d8,0);cU.endShape()};cU.quad=function(eb,ed,d9,ec,d7,ea,d6,d8){cU.beginShape(z.QUADS);cU.vertex(eb,ed,0);cU.vertex(d9,ec,0);cU.vertex(d7,ea,0);cU.vertex(d6,d8,0);cU.endShape()};var bK=function(ec,eb,d6,ed,ef,ea,ee,d7){if(d7===r){ea=ef;ee=ef;d7=ef}var d8=d6/2,d9=ed/2;if(ef>d8||ef>d9){ef=o.min(d8,d9)}if(ea>d8||ea>d9){ea=o.min(d8,d9)}if(ee>d8||ee>d9){ee=o.min(d8,d9)}if(d7>d8||d7>d9){d7=o.min(d8,d9)}if(!aF||cc){d3.translate(0.5,0.5)}d3.beginPath();d3.moveTo(ec+ef,eb);d3.lineTo(ec+d6-ea,eb);d3.quadraticCurveTo(ec+d6,eb,ec+d6,eb+ea);d3.lineTo(ec+d6,eb+ed-ee);d3.quadraticCurveTo(ec+d6,eb+ed,ec+d6-ee,eb+ed);d3.lineTo(ec+d7,eb+ed);d3.quadraticCurveTo(ec,eb+ed,ec,eb+ed-d7);d3.lineTo(ec,eb+ef);d3.quadraticCurveTo(ec,eb,ec+ef,eb);if(!aF||cc){d3.translate(-0.5,-0.5)}bj();dc()};bN.prototype.rect=function(d7,ed,ea,d6,d8,eb,d9,ec){if(!ea&&!d6){return}if(bH===z.CORNERS){ea-=d7;d6-=ed}if(bH===z.RADIUS){ea*=2;d6*=2}if(bH===z.CENTER||bH===z.RADIUS){d7-=ea/2;ed-=d6/2}d7=o.round(d7);ed=o.round(ed);ea=o.round(ea);d6=o.round(d6);if(d8!==r){bK(d7,ed,ea,d6,d8,eb,d9,ec);return}if(cc&&dS%2===1){d3.translate(0.5,0.5)}d3.beginPath();d3.rect(d7,ed,ea,d6);bj();dc();if(cc&&dS%2===1){d3.translate(-0.5,-0.5)}};bx.prototype.rect=function(ee,ed,d6,eg,ei,eb,eh,d7){if(ei!==r){throw"rect() with rounded corners is not supported in 3D mode"}var ea=new aM();ea.translate(ee,ed,0);ea.scale(d6,eg,1);ea.transpose();var ec=new aM();ec.scale(1,-1,1);ec.apply(dG.array());ec.transpose();if(dS>0&&cc){d3.useProgram(dM);a5("model2d",dM,"model",false,ea.array());a5("view2d",dM,"view",false,ec.array());dY("color2d",dM,"color",cY);dV("picktype2d",dM,"picktype",0);db("vertex2d",dM,"Vertex",3,aA);ce("aTextureCoord2d",dM,"aTextureCoord");d3.drawArrays(d3.LINE_LOOP,0,aj.length/3)}if(aF){d3.useProgram(du);a5("model3d",du,"model",false,ea.array());a5("view3d",du,"view",false,ec.array());d3.enable(d3.POLYGON_OFFSET_FILL);d3.polygonOffset(1,1);dY("color3d",du,"color",bk);if(dI>0){var ef=new aM();ef.set(ec);var d8=new aM();d8.set(ea);ef.mult(d8);var d9=new aM();d9.set(ef);d9.invert();d9.transpose();a5("normalTransform3d",du,"normalTransform",false,d9.array());db("normal3d",du,"Normal",3,b0)}else{ce("normal3d",du,"Normal")}db("vertex3d",du,"Vertex",3,aA);d3.drawArrays(d3.TRIANGLE_FAN,0,aj.length/3);d3.disable(d3.POLYGON_OFFSET_FILL)}};dp.prototype.ellipse=function(d7,d9,d8,d6){d7=d7||0;d9=d9||0;if(d8<=0&&d6<=0){return}if(cL===z.RADIUS){d8*=2;d6*=2}if(cL===z.CORNERS){d8=d8-d7;d6=d6-d9}if(cL===z.CORNER||cL===z.CORNERS){d7+=d8/2;d9+=d6/2}return{x:d7,y:d9,width:d8,height:d6}};bN.prototype.ellipse=function(ee,ed,d7,eg){var ea=dp.prototype.ellipse.apply(this,arguments),ec=0;if(!ea){return}ee=ea.x;ed=ea.y;d7=ea.width;eg=ea.height;if(d7===eg){d3.beginPath();d3.arc(ee-ec,ed-ec,d7/2,0,z.TWO_PI,false);bj();dc();d3.closePath()}else{var ef=d7/2,eb=eg/2,d6=0.5522847498307933;var d9=d6*ef,d8=d6*eb;cU.beginShape();cU.vertex(ee+ef,ed);cU.bezierVertex(ee+ef,ed-d8,ee+d9,ed-eb,ee,ed-eb);cU.bezierVertex(ee-d9,ed-eb,ee-ef,ed-d8,ee-ef,ed);cU.bezierVertex(ee-ef,ed+d8,ee-d9,ed+eb,ee,ed+eb);cU.bezierVertex(ee+d9,ed+eb,ee+ef,ed+d8,ee+ef,ed);cU.endShape()}};bx.prototype.ellipse=function(d9,d8,eg,ef){var em=dp.prototype.ellipse.apply(this,arguments),d7=0;if(!em){return}d9=em.x;d8=em.y;eg=em.width;ef=em.height;var ea=eg/2,ej=ef/2,ee=0.5522847498307933;var ed=ee*ea,eb=ee*ej;cU.beginShape();cU.vertex(d9+ea,d8);cU.bezierVertex(d9+ea,d8-eb,0,d9+ed,d8-ej,0,d9,d8-ej,0);cU.bezierVertex(d9-ed,d8-ej,0,d9-ea,d8-eb,0,d9-ea,d8,0);cU.bezierVertex(d9-ea,d8+eb,0,d9-ed,d8+ej,0,d9,d8+ej,0);cU.bezierVertex(d9+ed,d8+ej,0,d9+ea,d8+eb,0,d9+ea,d8,0);cU.endShape();if(aF){var en=0,ec=0,ei,eh;for(ei=0;ei<a7.length;ei++){en+=a7[ei][0];ec+=a7[ei][1]}en/=a7.length;ec/=a7.length;var ek=[],el=[],d6=[];ek[0]=en;ek[1]=ec;ek[2]=0;ek[3]=0;ek[4]=0;ek[5]=bk[0];ek[6]=bk[1];ek[7]=bk[2];ek[8]=bk[3];ek[9]=cY[0];ek[10]=cY[1];ek[11]=cY[2];ek[12]=cY[3];ek[13]=a4;ek[14]=a3;ek[15]=a2;a7.unshift(ek);for(ei=0;ei<a7.length;ei++){for(eh=0;eh<3;eh++){el.push(a7[ei][eh])}for(eh=5;eh<9;eh++){d6.push(a7[ei][eh])}}dk(el,"TRIANGLE_FAN",d6)}};cU.normal=function(d6,d8,d7){if(arguments.length!==3||!(typeof d6==="number"&&typeof d8==="number"&&typeof d7==="number")){throw"normal() requires three numeric arguments."}a4=d6;a3=d8;a2=d7;if(dN!==0){if(aY===z.NORMAL_MODE_AUTO){aY=z.NORMAL_MODE_SHAPE}else{if(aY===z.NORMAL_MODE_SHAPE){aY=z.NORMAL_MODE_VERTEX}}}};cU.save=function(d7,d6){if(d6!==r){return B.open(d6.toDataURL(),"_blank")}return B.open(cU.externals.canvas.toDataURL(),"_blank")};var cu=0;cU.saveFrame=function(d6){if(d6===r){d6="screen-####.png"}var d7=d6.replace(/#+/,function(d9){var d8=""+(cu++);while(d8.length<d9.length){d8="0"+d8}return d8});cU.save(d7)};var ca=d.createElement("canvas").getContext("2d");var V=[r,r,r];function bu(ed,d7,ec){var d9=V.shift();if(d9===r){d9={};d9.canvas=d.createElement("canvas");d9.context=d9.canvas.getContext("2d")}V.push(d9);var d8=d9.canvas,ea=d9.context,eb=d7||ed.width,d6=ec||ed.height;d8.width=eb;d8.height=d6;if(!ed){ea.clearRect(0,0,eb,d6)}else{if("data" in ed){ea.putImageData(ed,0,0)}else{ea.clearRect(0,0,eb,d6);ea.drawImage(ed,0,0,eb,d6)}}return d9}function bY(d6){return{getLength:(function(d7){return function(){if(d7.isRemote){throw"Image is loaded remotely. Cannot get length."}else{return d7.imageData.data.length?d7.imageData.data.length/4:0}}}(d6)),getPixel:(function(d7){return function(d8){var ea=d8*4,d9=d7.imageData.data;if(d7.isRemote){throw"Image is loaded remotely. Cannot get pixels."}return(d9[ea+3]<<24)&z.ALPHA_MASK|(d9[ea]<<16)&z.RED_MASK|(d9[ea+1]<<8)&z.GREEN_MASK|d9[ea+2]&z.BLUE_MASK}}(d6)),setPixel:(function(d7){return function(d8,eb){var ea=d8*4,d9=d7.imageData.data;if(d7.isRemote){throw"Image is loaded remotely. Cannot set pixel."}d9[ea+0]=(eb&z.RED_MASK)>>>16;d9[ea+1]=(eb&z.GREEN_MASK)>>>8;d9[ea+2]=(eb&z.BLUE_MASK);d9[ea+3]=(eb&z.ALPHA_MASK)>>>24;d7.__isDirty=true}}(d6)),toArray:(function(d7){return function(){var d8=[],eb=d7.imageData.data,ea=d7.width*d7.height;if(d7.isRemote){throw"Image is loaded remotely. Cannot get pixels."}for(var d9=0,ec=0;d9<ea;d9++,ec+=4){d8.push((eb[ec+3]<<24)&z.ALPHA_MASK|(eb[ec]<<16)&z.RED_MASK|(eb[ec+1]<<8)&z.GREEN_MASK|eb[ec+2]&z.BLUE_MASK)}return d8}}(d6)),set:(function(d7){return function(d8){var ec,eb,ed;if(this.isRemote){throw"Image is loaded remotely. Cannot set pixels."}eb=d7.imageData.data;for(var d9=0,ea=d8.length;d9<ea;d9++){ed=d8[d9];ec=d9*4;eb[ec+0]=(ed&z.RED_MASK)>>>16;eb[ec+1]=(ed&z.GREEN_MASK)>>>8;eb[ec+2]=(ed&z.BLUE_MASK);eb[ec+3]=(ed&z.ALPHA_MASK)>>>24}d7.__isDirty=true}}(d6))}}var cE=function(d9,ec,ea){this.__isDirty=false;if(d9 instanceof HTMLImageElement){this.fromHTMLImageData(d9)}else{if(ec||ea){this.width=d9||1;this.height=ec||1;var d7=this.sourceImg=d.createElement("canvas");d7.width=this.width;d7.height=this.height;var ed=this.imageData=d7.getContext("2d").createImageData(this.width,this.height);this.format=(ea===z.ARGB||ea===z.ALPHA)?ea:z.RGB;if(this.format===z.RGB){for(var d8=3,eb=this.imageData.data,d6=eb.length;d8<d6;d8+=4){eb[d8]=255}}this.__isDirty=true;this.updatePixels()}else{this.width=0;this.height=0;this.imageData=ca.createImageData(1,1);this.format=z.ARGB}}this.pixels=bY(this)};cE.prototype={updatePixels:function(){var d6=this.sourceImg;if(d6&&d6 instanceof HTMLCanvasElement&&this.__isDirty){d6.getContext("2d").putImageData(this.imageData,0,0)}this.__isDirty=false},fromHTMLImageData:function(d6){var d7=bu(d6);try{var d9=d7.context.getImageData(0,0,d6.width,d6.height);this.fromImageData(d9)}catch(d8){if(d6.width&&d6.height){this.isRemote=true;this.width=d6.width;this.height=d6.height}}this.sourceImg=d6},get:function(d6,d9,d7,d8){if(!arguments.length){return cU.get(this)}if(arguments.length===2){return cU.get(d6,d9,this)}if(arguments.length===4){return cU.get(d6,d9,d7,d8,this)}},set:function(d6,d8,d7){cU.set(d6,d8,d7,this);this.__isDirty=true},blend:function(ee,ea,d9,d7,ec,ef,ed,eb,d6,d8){if(arguments.length===9){cU.blend(this,ee,ea,d9,d7,ec,ef,ed,eb,d6,this)}else{if(arguments.length===10){cU.blend(ee,ea,d9,d7,ec,ef,ed,eb,d6,d8,this)}}delete this.sourceImg},copy:function(ed,ea,d9,d8,d7,ee,ec,eb,d6){if(arguments.length===8){cU.blend(this,ed,ea,d9,d8,d7,ee,ec,eb,z.REPLACE,this)}else{if(arguments.length===9){cU.blend(ed,ea,d9,d8,d7,ee,ec,eb,d6,z.REPLACE,this)}}delete this.sourceImg},filter:function(d7,d6){if(arguments.length===2){cU.filter(d7,d6,this)}else{if(arguments.length===1){cU.filter(d7,null,this)}}delete this.sourceImg},save:function(d6){cU.save(d6,this)},resize:function(d6,d8){if(this.isRemote){throw"Image is loaded remotely. Cannot resize."}if(this.width!==0||this.height!==0){if(d6===0&&d8!==0){d6=o.floor(this.width/this.height*d8)}else{if(d8===0&&d6!==0){d8=o.floor(this.height/this.width*d6)}}var d7=bu(this.imageData).canvas;var d9=bu(d7,d6,d8).context.getImageData(0,0,d6,d8);this.fromImageData(d9)}},mask:function(d6){this.__mask=r;if(d6 instanceof cE){if(d6.width===this.width&&d6.height===this.height){this.__mask=d6}else{throw"mask must have the same dimensions as PImage."}}else{if(d6 instanceof Array){if(this.pixels.length===d6.length){this.__mask=d6}else{throw"mask array must be the same length as PImage pixels array."}}}},loadPixels:E,toImageData:function(){if(this.isRemote){return this.sourceImg}var d6=bu(this.imageData);return d6.context.getImageData(0,0,this.width,this.height)},toDataURL:function(){if(this.isRemote){throw"Image is loaded remotely. Cannot create dataURI."}var d6=bu(this.imageData);return d6.canvas.toDataURL()},fromImageData:function(ea){var d7=ea.width,d9=ea.height,d8=d.createElement("canvas"),d6=d8.getContext("2d");this.width=d8.width=d7;this.height=d8.height=d9;d6.putImageData(ea,0,0);this.format=z.ARGB;this.imageData=ea;this.sourceImg=d8}};cU.PImage=cE;cU.createImage=function(d6,d7,d8){return new cE(d6,d7,d8)};cU.loadImage=function(d7,d8,ea){if(d8){d7=d7+"."+d8}var d9;if(cO.imageCache.images[d7]){d9=new cE(cO.imageCache.images[d7]);d9.loaded=true;return d9}d9=new cE();var d6=d.createElement("img");d9.sourceImg=d6;d6.onload=(function(ee,ec,eb){var ef=ee;var ed=ec;var eg=eb;return function(){ed.fromHTMLImageData(ef);ed.loaded=true;if(eg){eg()}}}(d6,d9,ea));d6.src=d7;return d9};cU.requestImage=cU.loadImage;function c9(){var d6=new cE(cU.width,cU.height,z.RGB);d6.fromImageData(d3.getImageData(0,0,cU.width,cU.height));return d6}function c7(d6,d9){var d7;if(d6<cU.width&&d6>=0&&d9>=0&&d9<cU.height){if(dR){var d8=((0|d6)+cU.width*(0|d9))*4;d7=cU.imageData.data;return cU.color.toInt(d7[d8],d7[d8+1],d7[d8+2],d7[d8+3])}d7=d3.getImageData(0|d6,0|d9,1,1).data;return cU.color.toInt(d7[0],d7[1],d7[2],d7[3])}return 0}function c6(d6,d9,d7){if(d7.isRemote){throw"Image is loaded remotely. Cannot get x,y."}var d8=d9*d7.width*4+(d6*4);return cU.color.toInt(d7.imageData.data[d8],d7.imageData.data[d8+1],d7.imageData.data[d8+2],d7.imageData.data[d8+3])}function c4(d6,ea,d7,d8){var d9=new cE(d7,d8,z.RGB);d9.fromImageData(d3.getImageData(d6,ea,d7,d8));return d9}function c3(eb,ea,ec,eh,en){if(en.isRemote){throw"Image is loaded remotely. Cannot get x,y,w,h."}var el=new cE(ec,eh,z.RGB),d8=el.imageData.data,d9=en.width,ei=en.height,ek=en.imageData.data;var d6=o.max(0,-ea),d7=o.max(0,-eb),ed=o.min(eh,ei-ea),ee=o.min(ec,d9-eb);for(var eg=d6;eg<ed;++eg){var ej=((ea+eg)*d9+(eb+d7))*4;var em=(eg*ec+d7)*4;for(var ef=d7;ef<ee;++ef){d8[em++]=ek[ej++];d8[em++]=ek[ej++];d8[em++]=ek[ej++];d8[em++]=ek[ej++]}}el.__isDirty=true;return el}cU.get=function(d6,ea,d7,d9,d8){if(arguments.length===2){return c7(d6,ea)}if(arguments.length===0){return c9()}if(arguments.length===5){return c3(d6,ea,d7,d9,d8)}if(arguments.length===4){return c4(d6,ea,d7,d9)}if(arguments.length===3){return c6(d6,ea,d7)}if(arguments.length===1){return d6}};cU.createGraphics=function(d6,d8,d7){var d9=new D();d9.size(d6,d8,d7);return d9};function R(){if(dR){d3=ai;dR=false;cU.updatePixels()}}function cp(){function d7(eb,d9){function ea(){R();d3[d9].apply(d3,arguments)}eb[d9]=ea}function d6(ec,ea){function d9(){R();return d3[ea]}function eb(ed){R();d3[ea]=ed}cU.defineProperty(ec,ea,{get:d9,set:eb})}for(var d8 in d3){if(typeof d3[d8]==="function"){d7(this,d8)}else{d6(this,d8)}}}function cA(){if(dR){return}cU.loadPixels();if(cl===null){ai=d3;cl=new cp()}dR=true;d3=cl;dZ=0}function bt(d6,d8,d7){if(d6<cU.width&&d6>=0&&d8>=0&&d8<cU.height){cA();cU.pixels.setPixel((0|d6)+cU.width*(0|d8),d7);if(++dZ>bX){R()}}}function br(d6,ec,d9,d7){if(d7.isRemote){throw"Image is loaded remotely. Cannot set x,y."}var eb=cU.color.toArray(d9);var ea=ec*d7.width*4+(d6*4);var d8=d7.imageData.data;d8[ea]=eb[0];d8[ea+1]=eb[1];d8[ea+2]=eb[2];d8[ea+3]=eb[3]}cU.set=function(d6,eb,d9,d8){var d7,ea;if(arguments.length===3){if(typeof d9==="number"){bt(d6,eb,d9)}else{if(d9 instanceof cE){cU.image(d9,d6,eb)}}}else{if(arguments.length===4){br(d6,eb,d9,d8)}}};cU.imageData={};cU.pixels={getLength:function(){return cU.imageData.data.length?cU.imageData.data.length/4:0},getPixel:function(d6){var d8=d6*4,d7=cU.imageData.data;return(d7[d8+3]<<24)&4278190080|(d7[d8+0]<<16)&16711680|(d7[d8+1]<<8)&65280|d7[d8+2]&255},setPixel:function(d6,d9){var d8=d6*4,d7=cU.imageData.data;d7[d8+0]=(d9&16711680)>>>16;d7[d8+1]=(d9&65280)>>>8;d7[d8+2]=(d9&255);d7[d8+3]=(d9&4278190080)>>>24},toArray:function(){var d6=[],d8=cU.imageData.width*cU.imageData.height,d9=cU.imageData.data;for(var d7=0,ea=0;d7<d8;d7++,ea+=4){d6.push((d9[ea+3]<<24)&4278190080|(d9[ea+0]<<16)&16711680|(d9[ea+1]<<8)&65280|d9[ea+2]&255)}return d6},set:function(d6){for(var d7=0,d8=d6.length;d7<d8;d7++){this.setPixel(d7,d6[d7])}}};cU.loadPixels=function(){cU.imageData=dU.$ensureContext().getImageData(0,0,cU.width,cU.height)};cU.updatePixels=function(){if(cU.imageData){dU.$ensureContext().putImageData(cU.imageData,0,0)}};cU.hint=function(d7){var d6=dU.$ensureContext();if(d7===z.DISABLE_DEPTH_TEST){d6.disable(d6.DEPTH_TEST);d6.depthMask(false);d6.clear(d6.DEPTH_BUFFER_BIT)}else{if(d7===z.ENABLE_DEPTH_TEST){d6.enable(d6.DEPTH_TEST);d6.depthMask(true)}}};var bA=function(d9,d8,d7,d6){var ea;if(d9 instanceof cE){ea=d9;if(!ea.loaded){throw"Error using image in background(): PImage not loaded."}if(ea.width!==cU.width||ea.height!==cU.height){throw"Background image must be the same dimensions as the canvas."}}else{ea=cU.color(d9,d8,d7,d6)}a0=ea};bN.prototype.background=function(d9,d8,d7,d6){if(d9!==r){bA(d9,d8,d7,d6)}if(a0 instanceof cE){aC();d3.setTransform(1,0,0,1,0,0);cU.image(a0,0,0);cN()}else{aC();d3.setTransform(1,0,0,1,0,0);if(cU.alpha(a0)!==bQ){d3.clearRect(0,0,cU.width,cU.height)}d3.fillStyle=cU.color.toString(a0);d3.fillRect(0,0,cU.width,cU.height);ap=true;cN()}};bx.prototype.background=function(d9,d8,d7,d6){if(arguments.length>0){bA(d9,d8,d7,d6)}var ea=cU.color.toGLArray(a0);d3.clearColor(ea[0],ea[1],ea[2],ea[3]);d3.clear(d3.COLOR_BUFFER_BIT|d3.DEPTH_BUFFER_BIT)};bN.prototype.image=function(ea,eg,ee,eh,ec){eg=o.round(eg);ee=o.round(ee);if(ea.width>0){var ej=eh||ea.width;var ef=ec||ea.height;var d6=bg(eg||0,ee||0,eh||ea.width,ec||ea.height,arguments.length<4);var ed=!!ea.sourceImg&&ba===null&&!ea.__mask;if(ed){var d7=ea.sourceImg;if(ea.__isDirty){ea.updatePixels()}d3.drawImage(d7,0,0,d7.width,d7.height,d6.x,d6.y,d6.w,d6.h)}else{var d9=ea.toImageData();if(ea.__mask){var d8,ei;if(ea.__mask instanceof cE){var eb=ea.__mask.toImageData();for(d8=2,ei=ea.width*ea.height*4;d8<ei;d8+=4){d9.data[d8+1]=eb.data[d8]}}else{for(d8=0,ei=ea.__mask.length;d8<ei;++d8){d9.data[(d8<<2)+3]=ea.__mask[d8]}}}if(ba!==null){ba(d9)}d3.drawImage(bu(d9).canvas,0,0,ea.width,ea.height,d6.x,d6.y,d6.w,d6.h)}}};bx.prototype.image=function(d8,d6,ea,d7,d9){if(d8.width>0){d6=o.round(d6);ea=o.round(ea);d7=d7||d8.width;d9=d9||d8.height;cU.beginShape(cU.QUADS);cU.texture(d8);cU.vertex(d6,ea,0,0,0);cU.vertex(d6,ea+d9,0,0,d9);cU.vertex(d6+d7,ea+d9,0,d7,d9);cU.vertex(d6+d7,ea,0,d7,0);cU.endShape()}};cU.tint=function(d9,d7,ed){var ec=cU.color(d9,d7,ed);var eb=cU.red(ec)/bF;var ea=cU.green(ec)/bE;var d6=cU.blue(ec)/bC;var d8=cU.alpha(ec)/bQ;ba=function(eh){var eg=eh.data,ef=4*eh.width*eh.height;for(var ee=0;ee<ef;){eg[ee++]*=eb;eg[ee++]*=ea;eg[ee++]*=d6;eg[ee++]*=d8}};bs=function(ef){for(var ee=0;ee<ef.length;){ef[ee++]=eb;ef[ee++]=ea;ef[ee++]=d6;ef[ee++]=d8}}};cU.noTint=function(){ba=null;bs=null};cU.copy=function(d6,eb,ea,ec,d8,ee,ed,d7,d9){if(arguments.length===8){d9=d7;d7=ed;ed=ee;ee=d8;d8=ec;ec=ea;ea=eb;eb=d6;d6=cU}cU.blend(d6,eb,ea,ec,d8,ee,ed,d7,d9,z.REPLACE)};cU.blend=function(d6,eg,ef,ej,eb,el,ek,d7,ed,ec,d9){if(arguments.length===9){ec=ed;ed=d7;d7=ek;ek=el;el=eb;eb=ej;ej=ef;ef=eg;eg=d6;d6=cU}var d8=eg+ej;var ee=ef+eb;var ei=el+d7;var ea=ek+ed;var eh;if(d6.isRemote){throw"Image is loaded remotely. Cannot blend image."}if(arguments.length===10||arguments.length===9){cU.loadPixels();eh=cU}else{if(arguments.length===11&&d9&&d9.imageData){eh=d9}}if(d6===cU){if(cU.intersect(eg,ef,d8,ee,el,ek,ei,ea)){cU.blit_resize(cU.get(eg,ef,d8-eg,ee-ef),0,0,d8-eg-1,ee-ef-1,eh.imageData.data,eh.width,eh.height,el,ek,ei,ea,ec)}else{cU.blit_resize(d6,eg,ef,d8,ee,eh.imageData.data,eh.width,eh.height,el,ek,ei,ea,ec)}}else{d6.loadPixels();cU.blit_resize(d6,eg,ef,d8,ee,eh.imageData.data,eh.width,eh.height,el,ek,ei,ea,ec)}if(arguments.length===10){cU.updatePixels()}};var bl=function(ea){var d6=cU.floor(ea*3.5),d8,d7;d6=(d6<1)?1:((d6<248)?d6:248);if(cU.shared.blurRadius!==d6){cU.shared.blurRadius=d6;cU.shared.blurKernelSize=1+(cU.shared.blurRadius<<1);cU.shared.blurKernel=new e(cU.shared.blurKernelSize);var ec=cU.shared.blurKernel;var eb=cU.shared.blurKernelSize;var d9=cU.shared.blurRadius;for(d8=0;d8<eb;d8++){ec[d8]=0}var ed=(d6-1)*(d6-1);for(d8=1;d8<d6;d8++){ec[d6+d8]=ec[d7]=ed}ec[d6]=d6*d6}};var b5=function(ek,ep){var d8,eb,eh,em,en,ew,eo;var er,ej,ev,eu,el;var ee=ep.pixels.getLength();var eq=new e(ee);var ez=new e(ee);var ed=new e(ee);var ey=new e(ee);var ex=0;var eg,ef,et,ea;bl(ek);var d7=ep.height;var d6=ep.width;var es=cU.shared.blurKernelSize;var ei=cU.shared.blurRadius;var ec=cU.shared.blurKernel;var d9=ep.imageData.data;for(ef=0;ef<d7;ef++){for(eg=0;eg<d6;eg++){em=eh=eb=en=d8=0;er=eg-ei;if(er<0){el=-er;er=0}else{if(er>=d6){break}el=0}for(et=el;et<es;et++){if(er>=d6){break}ea=(er+ex)*4;eo=ec[et];en+=eo*d9[ea+3];eb+=eo*d9[ea];eh+=eo*d9[ea+1];em+=eo*d9[ea+2];d8+=eo;er++}ej=ex+eg;ey[ej]=en/d8;eq[ej]=eb/d8;ez[ej]=eh/d8;ed[ej]=em/d8}ex+=d6}ex=0;ev=-ei;eu=ev*d6;for(ef=0;ef<d7;ef++){for(eg=0;eg<d6;eg++){em=eh=eb=en=d8=0;if(ev<0){el=ej=-ev;er=eg}else{if(ev>=d7){break}el=0;ej=ev;er=eg+eu}for(et=el;et<es;et++){if(ej>=d7){break}eo=ec[et];en+=eo*ey[er];eb+=eo*eq[er];eh+=eo*ez[er];em+=eo*ed[er];d8+=eo;ej++;er+=d6}ea=(eg+ex)*4;d9[ea]=eb/d8;d9[ea+1]=eh/d8;d9[ea+2]=em/d8;d9[ea+3]=en/d8}ex+=d6;eu+=d6;ev++}};var cd=function(en,eh){var ed=0;var er=eh.pixels.getLength();var ei=new I(er);var el,d7,eg,ef,d9;var em,ea,ec,ee,d8,ej,eq,d6,eo,eb,ep,ek;if(!en){while(ed<er){el=ed;d7=ed+eh.width;while(ed<d7){eg=ef=eh.pixels.getPixel(ed);ea=ed-1;em=ed+1;ec=ed-eh.width;ee=ed+eh.width;if(ea<el){ea=ed}if(em>=d7){em=ed}if(ec<0){ec=0}if(ee>=er){ee=ed}eq=eh.pixels.getPixel(ec);ej=eh.pixels.getPixel(ea);d6=eh.pixels.getPixel(ee);d8=eh.pixels.getPixel(em);d9=77*(eg>>16&255)+151*(eg>>8&255)+28*(eg&255);eb=77*(ej>>16&255)+151*(ej>>8&255)+28*(ej&255);eo=77*(d8>>16&255)+151*(d8>>8&255)+28*(d8&255);ep=77*(eq>>16&255)+151*(eq>>8&255)+28*(eq&255);ek=77*(d6>>16&255)+151*(d6>>8&255)+28*(d6&255);if(eb>d9){ef=ej;d9=eb}if(eo>d9){ef=d8;d9=eo}if(ep>d9){ef=eq;d9=ep}if(ek>d9){ef=d6;d9=ek}ei[ed++]=ef}}}else{while(ed<er){el=ed;d7=ed+eh.width;while(ed<d7){eg=ef=eh.pixels.getPixel(ed);ea=ed-1;em=ed+1;ec=ed-eh.width;ee=ed+eh.width;if(ea<el){ea=ed}if(em>=d7){em=ed}if(ec<0){ec=0}if(ee>=er){ee=ed}eq=eh.pixels.getPixel(ec);ej=eh.pixels.getPixel(ea);d6=eh.pixels.getPixel(ee);d8=eh.pixels.getPixel(em);d9=77*(eg>>16&255)+151*(eg>>8&255)+28*(eg&255);eb=77*(ej>>16&255)+151*(ej>>8&255)+28*(ej&255);eo=77*(d8>>16&255)+151*(d8>>8&255)+28*(d8&255);ep=77*(eq>>16&255)+151*(eq>>8&255)+28*(eq&255);ek=77*(d6>>16&255)+151*(d6>>8&255)+28*(d6&255);if(eb<d9){ef=ej;d9=eb}if(eo<d9){ef=d8;d9=eo}if(ep<d9){ef=eq;d9=ep}if(ek<d9){ef=d6;d9=ek}ei[ed++]=ef}}}eh.pixels.set(ei)};cU.filter=function(ed,ec,d9){var eg,eb,d7,ef;if(arguments.length===3){d9.loadPixels();eg=d9}else{cU.loadPixels();eg=cU}if(ec===r){ec=null}if(eg.isRemote){throw"Image is loaded remotely. Cannot filter image."}var eh=eg.pixels.getLength();switch(ed){case z.BLUR:var ei=ec||1;b5(ei,eg);break;case z.GRAY:if(eg.format===z.ALPHA){for(ef=0;ef<eh;ef++){eb=255-eg.pixels.getPixel(ef);eg.pixels.setPixel(ef,(4278190080|(eb<<16)|(eb<<8)|eb))}eg.format=z.RGB}else{for(ef=0;ef<eh;ef++){eb=eg.pixels.getPixel(ef);d7=(77*(eb>>16&255)+151*(eb>>8&255)+28*(eb&255))>>8;eg.pixels.setPixel(ef,((eb&z.ALPHA_MASK)|d7<<16|d7<<8|d7))}}break;case z.INVERT:for(ef=0;ef<eh;ef++){eg.pixels.setPixel(ef,(eg.pixels.getPixel(ef)^16777215))}break;case z.POSTERIZE:if(ec===null){throw"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)"}var el=cU.floor(ec);if((el<2)||(el>255)){throw"Levels must be between 2 and 255 for filter(POSTERIZE, levels)"}var ee=el-1;for(ef=0;ef<eh;ef++){var d6=(eg.pixels.getPixel(ef)>>16)&255;var ej=(eg.pixels.getPixel(ef)>>8)&255;var d8=eg.pixels.getPixel(ef)&255;d6=(((d6*el)>>8)*255)/ee;ej=(((ej*el)>>8)*255)/ee;d8=(((d8*el)>>8)*255)/ee;eg.pixels.setPixel(ef,((4278190080&eg.pixels.getPixel(ef))|(d6<<16)|(ej<<8)|d8))}break;case z.OPAQUE:for(ef=0;ef<eh;ef++){eg.pixels.setPixel(ef,(eg.pixels.getPixel(ef)|4278190080))}eg.format=z.RGB;break;case z.THRESHOLD:if(ec===null){ec=0.5}if((ec<0)||(ec>1)){throw"Level must be between 0 and 1 for filter(THRESHOLD, level)"}var ea=cU.floor(ec*255);for(ef=0;ef<eh;ef++){var ek=cU.max((eg.pixels.getPixel(ef)&z.RED_MASK)>>16,cU.max((eg.pixels.getPixel(ef)&z.GREEN_MASK)>>8,(eg.pixels.getPixel(ef)&z.BLUE_MASK)));eg.pixels.setPixel(ef,((eg.pixels.getPixel(ef)&z.ALPHA_MASK)|((ek<ea)?0:16777215)))}break;case z.ERODE:cd(true,eg);break;case z.DILATE:cd(false,eg);break}eg.updatePixels()};cU.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null};cU.intersect=function(d8,ef,d7,ee,ej,ec,ei,eb){var eh=d7-d8+1;var ea=ee-ef+1;var d6=ei-ej+1;var ed=eb-ec+1;if(ej<d8){d6+=ej-d8;if(d6>eh){d6=eh}}else{var eg=eh+d8-ej;if(d6>eg){d6=eg}}if(ec<ef){ed+=ec-ef;if(ed>ea){ed=ea}}else{var d9=ea+ef-ec;if(ed>d9){ed=d9}}return !(d6<=0||ed<=0)};var dO={};dO[z.BLEND]=cU.modes.blend;dO[z.ADD]=cU.modes.add;dO[z.SUBTRACT]=cU.modes.subtract;dO[z.LIGHTEST]=cU.modes.lightest;dO[z.DARKEST]=cU.modes.darkest;dO[z.REPLACE]=cU.modes.replace;dO[z.DIFFERENCE]=cU.modes.difference;dO[z.EXCLUSION]=cU.modes.exclusion;dO[z.MULTIPLY]=cU.modes.multiply;dO[z.SCREEN]=cU.modes.screen;dO[z.OVERLAY]=cU.modes.overlay;dO[z.HARD_LIGHT]=cU.modes.hard_light;dO[z.SOFT_LIGHT]=cU.modes.soft_light;dO[z.DODGE]=cU.modes.dodge;dO[z.BURN]=cU.modes.burn;cU.blit_resize=function(ej,ev,ep,eu,eo,eA,ef,en,et,ek,es,ei,el){var ey,ex;if(ev<0){ev=0}if(ep<0){ep=0}if(eu>=ej.width){eu=ej.width-1}if(eo>=ej.height){eo=ej.height-1}var eE=eu-ev;var eJ=eo-ep;var d6=es-et;var eg=ei-ek;if(d6<=0||eg<=0||eE<=0||eJ<=0||et>=ef||ek>=en||ev>=ej.width||ep>=ej.height){return}var ed=o.floor(eE/d6*z.PRECISIONF);var ea=o.floor(eJ/eg*z.PRECISIONF);var eC=cU.shared;eC.srcXOffset=o.floor(et<0?-et*ed:ev*z.PRECISIONF);eC.srcYOffset=o.floor(ek<0?-ek*ea:ep*z.PRECISIONF);if(et<0){d6+=et;et=0}if(ek<0){eg+=ek;ek=0}d6=o.min(d6,ef-et);eg=o.min(eg,en-ek);var eq=ek*ef+et;var eM;eC.srcBuffer=ej.imageData.data;eC.iw=ej.width;eC.iw1=ej.width-1;eC.ih1=ej.height-1;var er=cU.filter_bilinear,eG=cU.filter_new_scanline,ee=dO[el],eD,eI,eB,eF,d8,d9,d7=z.ALPHA_MASK,eH=z.RED_MASK,ew=z.GREEN_MASK,ec=z.BLUE_MASK,eL=z.PREC_MAXVAL,ez=z.PRECISIONB,eh=z.PREC_RED_SHIFT,em=z.PREC_ALPHA_SHIFT,eb=eC.srcBuffer,eK=o.min;for(ex=0;ex<eg;ex++){eC.sX=eC.srcXOffset;eC.fracV=eC.srcYOffset&eL;eC.ifV=eL-eC.fracV;eC.v1=(eC.srcYOffset>>ez)*eC.iw;eC.v2=eK((eC.srcYOffset>>ez)+1,eC.ih1)*eC.iw;for(ey=0;ey<d6;ey++){eI=(eq+ey)*4;eM=(eA[eI+3]<<24)&d7|(eA[eI]<<16)&eH|(eA[eI+1]<<8)&ew|eA[eI+2]&ec;eC.fracU=eC.sX&eL;eC.ifU=eL-eC.fracU;eC.ul=(eC.ifU*eC.ifV)>>ez;eC.ll=(eC.ifU*eC.fracV)>>ez;eC.ur=(eC.fracU*eC.ifV)>>ez;eC.lr=(eC.fracU*eC.fracV)>>ez;eC.u1=(eC.sX>>ez);eC.u2=eK(eC.u1+1,eC.iw1);eB=(eC.v1+eC.u1)*4;eF=(eC.v1+eC.u2)*4;d8=(eC.v2+eC.u1)*4;d9=(eC.v2+eC.u2)*4;eC.cUL=(eb[eB+3]<<24)&d7|(eb[eB]<<16)&eH|(eb[eB+1]<<8)&ew|eb[eB+2]&ec;eC.cUR=(eb[eF+3]<<24)&d7|(eb[eF]<<16)&eH|(eb[eF+1]<<8)&ew|eb[eF+2]&ec;eC.cLL=(eb[d8+3]<<24)&d7|(eb[d8]<<16)&eH|(eb[d8+1]<<8)&ew|eb[d8+2]&ec;eC.cLR=(eb[d9+3]<<24)&d7|(eb[d9]<<16)&eH|(eb[d9+1]<<8)&ew|eb[d9+2]&ec;eC.r=((eC.ul*((eC.cUL&eH)>>16)+eC.ll*((eC.cLL&eH)>>16)+eC.ur*((eC.cUR&eH)>>16)+eC.lr*((eC.cLR&eH)>>16))<<eh)&eH;eC.g=((eC.ul*(eC.cUL&ew)+eC.ll*(eC.cLL&ew)+eC.ur*(eC.cUR&ew)+eC.lr*(eC.cLR&ew))>>>ez)&ew;eC.b=(eC.ul*(eC.cUL&ec)+eC.ll*(eC.cLL&ec)+eC.ur*(eC.cUR&ec)+eC.lr*(eC.cLR&ec))>>>ez;eC.a=((eC.ul*((eC.cUL&d7)>>>24)+eC.ll*((eC.cLL&d7)>>>24)+eC.ur*((eC.cUR&d7)>>>24)+eC.lr*((eC.cLR&d7)>>>24))<<em)&d7;eD=ee(eM,(eC.a|eC.r|eC.g|eC.b));eA[eI]=(eD&eH)>>>16;eA[eI+1]=(eD&ew)>>>8;eA[eI+2]=(eD&ec);eA[eI+3]=(eD&d7)>>>24;eC.sX+=ed}eq+=ef;eC.srcYOffset+=ea}};cU.loadFont=function(d7,d8){if(d7===r){throw ("font name required in loadFont.")}if(d7.indexOf(".svg")===-1){if(d8===r){d8=U.size}return F.get(d7,d8)}var d6=cU.loadGlyphs(d7);return{name:d7,css:"12px sans-serif",glyph:true,units_per_em:d6.units_per_em,horiz_adv_x:1/d6.units_per_em*d6.horiz_adv_x,ascent:d6.ascent,descent:d6.descent,width:function(ed){var eb=0;var d9=ed.length;for(var ea=0;ea<d9;ea++){try{eb+=parseFloat(cU.glyphLook(cU.glyphTable[d7],ed[ea]).horiz_adv_x)}catch(ec){D.debug(ec)}}return eb/cU.glyphTable[d7].units_per_em}}};cU.createFont=function(d6,d7){return cU.loadFont(d6,d7)};cU.textFont=function(d6,d8){if(d8!==r){if(!d6.glyph){d6=F.get(d6.name,d8)}dW=d8}U=d6;W=U.name;aZ=U.ascent;dx=U.descent;d2=U.leading;var d7=dU.$ensureContext();d7.font=U.css};cU.textSize=function(d7){if(d7!==dW){U=F.get(W,d7);dW=d7;aZ=U.ascent;dx=U.descent;d2=U.leading;var d6=dU.$ensureContext();d6.font=U.css}};cU.textAscent=function(){return aZ};cU.textDescent=function(){return dx};cU.textLeading=function(d6){d2=d6};cU.textAlign=function(d7,d6){L=d7;cZ=d6||z.BASELINE};function bq(d6){if(d6 instanceof String){return d6}if(typeof d6==="number"){if(d6===(0|d6)){return d6.toString()}return cU.nf(d6,0,3)}if(d6===null||d6===r){return""}return d6.toString()}bN.prototype.textWidth=function(ea){var d6=bq(ea).split(/\r?\n/g),d8=0;var d7,d9=d6.length;d3.font=U.css;for(d7=0;d7<d9;++d7){d8=o.max(d8,U.measureTextWidth(d6[d7]))}return d8.toFixed(1)};bx.prototype.textWidth=function(eb){var d6=bq(eb).split(/\r?\n/g),d9=0;var d8,ea=d6.length;if(cC===r){cC=d.createElement("canvas")}var d7=cC.getContext("2d");d7.font=U.css;for(d8=0;d8<ea;++d8){d9=o.max(d9,d7.measureText(d6[d8]).width)}return d9.toFixed(1)};cU.glyphLook=function(d6,d7){try{switch(d7){case"1":return d6.one;case"2":return d6.two;case"3":return d6.three;case"4":return d6.four;case"5":return d6.five;case"6":return d6.six;case"7":return d6.seven;case"8":return d6.eight;case"9":return d6.nine;case"0":return d6.zero;case" ":return d6.space;case"$":return d6.dollar;case"!":return d6.exclam;case'"':return d6.quotedbl;case"#":return d6.numbersign;case"%":return d6.percent;case"&":return d6.ampersand;case"'":return d6.quotesingle;case"(":return d6.parenleft;case")":return d6.parenright;case"*":return d6.asterisk;case"+":return d6.plus;case",":return d6.comma;case"-":return d6.hyphen;case".":return d6.period;case"/":return d6.slash;case"_":return d6.underscore;case":":return d6.colon;case";":return d6.semicolon;case"<":return d6.less;case"=":return d6.equal;case">":return d6.greater;case"?":return d6.question;case"@":return d6.at;case"[":return d6.bracketleft;case"\\":return d6.backslash;case"]":return d6.bracketright;case"^":return d6.asciicircum;case"`":return d6.grave;case"{":return d6.braceleft;case"|":return d6.bar;case"}":return d6.braceright;case"~":return d6.asciitilde;default:return d6[d7]}}catch(d8){D.debug(d8)}};bN.prototype.text$line=function(ee,eh,eg,ef,eb){var ed=0,ec=0;if(!U.glyph){if(ee&&("fillText" in d3)){if(ap){d3.fillStyle=cU.color.toString(aX);ap=false}if(eb===z.RIGHT||eb===z.CENTER){ed=U.measureTextWidth(ee);if(eb===z.RIGHT){ec=-ed}else{ec=-ed/2}}d3.fillText(ee,eh+ec,eg)}}else{var d6=cU.glyphTable[W];aC();d3.translate(eh,eg+dW);if(eb===z.RIGHT||eb===z.CENTER){ed=d6.width(ee);if(eb===z.RIGHT){ec=-ed}else{ec=-ed/2}}var ei=d6.units_per_em,ea=1/ei*dW;d3.scale(ea,ea);for(var d7=0,d8=ee.length;d7<d8;d7++){try{cU.glyphLook(d6,ee[d7]).draw()}catch(d9){D.debug(d9)}}cN()}};bx.prototype.text$line=function(ed,eh,eg,ee,eb){if(cC===r){cC=d.createElement("canvas")}var d7=d3;d3=cC.getContext("2d");d3.font=U.css;var ec=U.measureTextWidth(ed);cC.width=ec;cC.height=dW;d3=cC.getContext("2d");d3.font=U.css;d3.textBaseline="top";bN.prototype.text$line(ed,0,0,0,z.LEFT);var d6=cC.width/cC.height;d3=d7;d3.bindTexture(d3.TEXTURE_2D,bO);dF(cC);d3.texParameteri(d3.TEXTURE_2D,d3.TEXTURE_MAG_FILTER,d3.LINEAR);d3.texParameteri(d3.TEXTURE_2D,d3.TEXTURE_MIN_FILTER,d3.LINEAR);d3.texParameteri(d3.TEXTURE_2D,d3.TEXTURE_WRAP_T,d3.CLAMP_TO_EDGE);d3.texParameteri(d3.TEXTURE_2D,d3.TEXTURE_WRAP_S,d3.CLAMP_TO_EDGE);var ea=0;if(eb===z.RIGHT){ea=-ec}else{if(eb===z.CENTER){ea=-ec/2}}var d8=new aM();var d9=dW*0.5;d8.translate(eh+ea-d9/2,eg-d9,ee);d8.scale(-d6*d9,-d9,d9);d8.translate(-1,-1,-1);d8.transpose();var ef=new aM();ef.scale(1,-1,1);ef.apply(dG.array());ef.transpose();d3.useProgram(dM);db("vertex2d",dM,"Vertex",3,cF);db("aTextureCoord2d",dM,"aTextureCoord",2,aa);dV("uSampler2d",dM,"uSampler",[0]);dV("picktype2d",dM,"picktype",1);a5("model2d",dM,"model",false,d8.array());a5("view2d",dM,"view",false,ef.array());dY("color2d",dM,"color",bk);d3.bindBuffer(d3.ELEMENT_ARRAY_BUFFER,P);d3.drawElements(d3.TRIANGLES,6,d3.UNSIGNED_SHORT,0)};function bd(d9,ec,eb,ea){var ee,d8;if(d9.indexOf("\n")<0){ee=[d9];d8=1}else{ee=d9.split(/\r?\n/g);d8=ee.length}var d6=0;if(cZ===z.TOP){d6=aZ+dx}else{if(cZ===z.CENTER){d6=aZ/2-(d8-1)*d2/2}else{if(cZ===z.BOTTOM){d6=-(dx+(d8-1)*d2)}}}for(var d7=0;d7<d8;++d7){var ed=ee[d7];dU.text$line(ed,ec,eb+d6,ea,L);d6+=d2}}function a9(em,eh,eg,el,ej,ef){if(em.length===0||el===0||ej===0){return}if(dW>ej){return}var ei=-1;var ea=0;var d6=0;var ec=[];for(var eb=0,eo=em.length;eb<eo;eb++){var ed=em[eb];var er=(ed===" ");var ek=U.measureTextWidth(ed);if(ed!=="\n"&&(d6+ek<=el)){if(er){ei=eb}d6+=ek}else{if(ei+1===ea){if(eb>0){ei=eb}else{return}}if(ed==="\n"){ec.push({text:em.substring(ea,eb),width:d6});ea=eb+1}else{ec.push({text:em.substring(ea,ei+1),width:d6});ea=ei+1}d6=0;eb=ea-1}}if(ea<eo){ec.push({text:em.substring(ea),width:d6})}var eq=0,ee=aZ;if(L===z.CENTER){eq=el/2}else{if(L===z.RIGHT){eq=el}}var d7=o.floor(ej/d2);if(cZ===z.TOP){ee=aZ+dx}else{if(cZ===z.CENTER){ee=d2+dx}else{if(cZ===z.BOTTOM){ee=dx+d2}}}var d8,d9,en=ec.length,ep;for(d8=0;d8<en;d8++){ep=d8*d2;if(ee+ep>ej-dx){break}d9=ec[d8];dU.text$line(d9.text,eh+eq,eg+ee+ep,ef,L)}}cU.text=function(){if(cG===z.SHAPE){return}if(arguments.length===3){bd(bq(arguments[0]),arguments[1],arguments[2],0)}else{if(arguments.length===4){bd(bq(arguments[0]),arguments[1],arguments[2],arguments[3])}else{if(arguments.length===5){a9(bq(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0)}else{if(arguments.length===6){a9(bq(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}}}};cU.textMode=function(d6){cG=d6};cU.loadGlyphs=function(ec){var ee,ed,ea,d8,el,ek,ej,em,eg,en,eh,ei="[0-9\\-]+",ef;var eb=function(et,es){var eq=0,ep=[],eo,er=new RegExp(et,"g");eo=ep[eq]=er.exec(es);while(eo){eq++;eo=ep[eq]=er.exec(es)}return ep};var d7=function(et){var eu=eb("[A-Za-z][0-9\\- ]+|Z",et);var es=function(){aC();return dU.$ensureContext()};var eq=function(){bj();dc();cN()};ef="return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();";ee=0;ed=0;ea=0;d8=0;el=0;ek=0;et=0;em=0;eg="";en=eu.length-1;for(var ep=0;ep<en;ep++){var eo=eu[ep][0],er=eb(ei,eo);switch(eo[0]){case"M":ee=parseFloat(er[0][0]);ed=parseFloat(er[1][0]);ef+="curContext.moveTo("+ee+","+(-ed)+");";break;case"L":ee=parseFloat(er[0][0]);ed=parseFloat(er[1][0]);ef+="curContext.lineTo("+ee+","+(-ed)+");";break;case"H":ee=parseFloat(er[0][0]);ef+="curContext.lineTo("+ee+","+(-ed)+");";break;case"V":ed=parseFloat(er[0][0]);ef+="curContext.lineTo("+ee+","+(-ed)+");";break;case"T":el=parseFloat(er[0][0]);ek=parseFloat(er[1][0]);if(eg==="Q"||eg==="T"){et=o.sqrt(o.pow(ee-ea,2)+o.pow(d8-ed,2));em=o.PI+o.atan2(ea-ee,d8-ed);ea=ee+(o.sin(em)*(et));d8=ed+(o.cos(em)*(et))}else{ea=ee;d8=ed}ef+="curContext.quadraticCurveTo("+ea+","+(-d8)+","+el+","+(-ek)+");";ee=el;ed=ek;break;case"Q":ea=parseFloat(er[0][0]);d8=parseFloat(er[1][0]);el=parseFloat(er[2][0]);ek=parseFloat(er[3][0]);ef+="curContext.quadraticCurveTo("+ea+","+(-d8)+","+el+","+(-ek)+");";ee=el;ed=ek;break;case"Z":ef+="curContext.closePath();";break}eg=eo[0]}ef+="afterPathDraw();";ef+="curContext.translate("+eh+",0);";ef+="}}";return((new Function("beforePathDraw","afterPathDraw",ef))(es,eq))};var d6=function(er){var eq=er.getElementsByTagName("font");cU.glyphTable[ec].horiz_adv_x=eq[0].getAttribute("horiz-adv-x");var et=er.getElementsByTagName("font-face")[0];cU.glyphTable[ec].units_per_em=parseFloat(et.getAttribute("units-per-em"));cU.glyphTable[ec].ascent=parseFloat(et.getAttribute("ascent"));cU.glyphTable[ec].descent=parseFloat(et.getAttribute("descent"));var ev=er.getElementsByTagName("glyph"),ep=ev.length;for(var eu=0;eu<ep;eu++){var eo=ev[eu].getAttribute("unicode");var es=ev[eu].getAttribute("glyph-name");eh=ev[eu].getAttribute("horiz-adv-x");if(eh===null){eh=cU.glyphTable[ec].horiz_adv_x}ej=ev[eu].getAttribute("d");if(ej!==r){ef=d7(ej);cU.glyphTable[ec][es]={name:es,unicode:eo,horiz_adv_x:eh,draw:ef.draw}}}};var d9=function(){var eq;try{eq=d.implementation.createDocument("","",null)}catch(es){D.debug(es.message);return}try{eq.async=false;eq.load(ec);d6(eq.getElementsByTagName("svg")[0])}catch(ep){D.debug(ep);try{var eo=new B.XMLHttpRequest();eo.open("GET",ec,false);eo.send(null);d6(eo.responseXML.documentElement)}catch(er){D.debug(ep)}}};cU.glyphTable[ec]={};d9(ec);return cU.glyphTable[ec]};cU.param=function(d8){var d7="data-processing-"+d8;if(ac.hasAttribute(d7)){return ac.getAttribute(d7)}for(var d9=0,d6=ac.childNodes.length;d9<d6;++d9){var ea=ac.childNodes.item(d9);if(ea.nodeType!==1||ea.tagName.toLowerCase()!=="param"){continue}if(ea.getAttribute("name")===d8){return ea.getAttribute("value")}}if(cO.params.hasOwnProperty(d8)){return cO.params[d8]}return null};function cJ(d7){if(d7==="3D"){dU=new bx()}else{if(d7==="2D"){dU=new bN()}else{dU=new b8()}}for(var d6 in b8.prototype){if(b8.prototype.hasOwnProperty(d6)&&d6.indexOf("$")<0){cU[d6]=dU[d6]}}dU.$init()}function cS(d6){return function(){cJ("2D");return dU[d6].apply(this,arguments)}}b8.prototype.translate=cS("translate");b8.prototype.scale=cS("scale");b8.prototype.pushMatrix=cS("pushMatrix");b8.prototype.popMatrix=cS("popMatrix");b8.prototype.resetMatrix=cS("resetMatrix");b8.prototype.applyMatrix=cS("applyMatrix");b8.prototype.rotate=cS("rotate");b8.prototype.rotateZ=cS("rotateZ");b8.prototype.redraw=cS("redraw");b8.prototype.ambientLight=cS("ambientLight");b8.prototype.directionalLight=cS("directionalLight");b8.prototype.lightFalloff=cS("lightFalloff");b8.prototype.lightSpecular=cS("lightSpecular");b8.prototype.pointLight=cS("pointLight");b8.prototype.noLights=cS("noLights");b8.prototype.spotLight=cS("spotLight");b8.prototype.beginCamera=cS("beginCamera");b8.prototype.endCamera=cS("endCamera");b8.prototype.box=cS("box");b8.prototype.sphere=cS("sphere");b8.prototype.ambient=cS("ambient");b8.prototype.emissive=cS("emissive");b8.prototype.shininess=cS("shininess");b8.prototype.specular=cS("specular");b8.prototype.fill=cS("fill");b8.prototype.stroke=cS("stroke");b8.prototype.strokeWeight=cS("strokeWeight");b8.prototype.smooth=cS("smooth");b8.prototype.noSmooth=cS("noSmooth");b8.prototype.point=cS("point");b8.prototype.vertex=cS("vertex");b8.prototype.endShape=cS("endShape");b8.prototype.bezierVertex=cS("bezierVertex");b8.prototype.curveVertex=cS("curveVertex");b8.prototype.curve=cS("curve");b8.prototype.line=cS("line");b8.prototype.bezier=cS("bezier");b8.prototype.rect=cS("rect");b8.prototype.ellipse=cS("ellipse");b8.prototype.background=cS("background");b8.prototype.image=cS("image");b8.prototype.textWidth=cS("textWidth");b8.prototype.text$line=cS("text$line");b8.prototype.$ensureContext=cS("$ensureContext");b8.prototype.$newPMatrix=cS("$newPMatrix");b8.prototype.size=function(d6,d8,d7){cJ(d7===z.WEBGL?"3D":"2D");cU.size(d6,d8,d7)};b8.prototype.$init=E;bN.prototype.$init=function(){cU.size(cU.width,cU.height);d3.lineCap="round";cU.noSmooth();cU.disableContextMenu()};bx.prototype.$init=function(){cU.use3DContext=true};dp.prototype.$ensureContext=function(){return d3};function dv(d7,d9){var d8=d7,d6=0,ea=0;cU.pmouseX=cU.mouseX;cU.pmouseY=cU.mouseY;if(d8.offsetParent){do{d6+=d8.offsetLeft;ea+=d8.offsetTop}while(!!(d8=d8.offsetParent))}d8=d7;do{d6-=d8.scrollLeft||0;ea-=d8.scrollTop||0}while(!!(d8=d8.parentNode));d6+=ab;ea+=dl;d6+=aR;ea+=bU;d6+=B.pageXOffset;ea+=B.pageYOffset;return{X:d6,Y:ea}}function aG(d6,d7){var d8=dv(d6,d7);cU.mouseX=d7.pageX-d8.X;cU.mouseY=d7.pageY-d8.Y}function cs(d7){var d9=dv(d7.changedTouches[0].target,d7.changedTouches[0]),d6;for(d6=0;d6<d7.touches.length;d6++){var eb=d7.touches[d6];eb.offsetX=eb.pageX-d9.X;eb.offsetY=eb.pageY-d9.Y}for(d6=0;d6<d7.targetTouches.length;d6++){var d8=d7.targetTouches[d6];d8.offsetX=d8.pageX-d9.X;d8.offsetY=d8.pageY-d9.Y}for(d6=0;d6<d7.changedTouches.length;d6++){var ea=d7.changedTouches[d6];ea.offsetX=ea.pageX-d9.X;ea.offsetY=ea.pageY-d9.Y}return d7}bL(ac,"touchstart",function(d8){ac.setAttribute("style","-webkit-user-select: none");ac.setAttribute("onclick","void(0)");ac.setAttribute("style","-webkit-tap-highlight-color:rgba(0,0,0,0)");for(var d7=0,d6=at.length;d7<d6;d7++){var d9=at[d7].type;if(d9==="mouseout"||d9==="mousemove"||d9==="mousedown"||d9==="mouseup"||d9==="DOMMouseScroll"||d9==="mousewheel"||d9==="touchstart"){dd(at[d7])}}if(cU.touchStart!==r||cU.touchMove!==r||cU.touchEnd!==r||cU.touchCancel!==r){bL(ac,"touchstart",function(ea){if(cU.touchStart!==r){ea=cs(ea);cU.touchStart(ea)}});bL(ac,"touchmove",function(ea){if(cU.touchMove!==r){ea.preventDefault();ea=cs(ea);cU.touchMove(ea)}});bL(ac,"touchend",function(ea){if(cU.touchEnd!==r){ea=cs(ea);cU.touchEnd(ea)}});bL(ac,"touchcancel",function(ea){if(cU.touchCancel!==r){ea=cs(ea);cU.touchCancel(ea)}})}else{bL(ac,"touchstart",function(ea){aG(ac,ea.touches[0]);cU.__mousePressed=true;cU.mouseDragging=false;cU.mouseButton=z.LEFT;if(typeof cU.mousePressed==="function"){cU.mousePressed()}});bL(ac,"touchmove",function(ea){ea.preventDefault();aG(ac,ea.touches[0]);if(typeof cU.mouseMoved==="function"&&!cU.__mousePressed){cU.mouseMoved()}if(typeof cU.mouseDragged==="function"&&cU.__mousePressed){cU.mouseDragged();cU.mouseDragging=true}});bL(ac,"touchend",function(ea){cU.__mousePressed=false;if(typeof cU.mouseClicked==="function"&&!cU.mouseDragging){cU.mouseClicked()}if(typeof cU.mouseReleased==="function"){cU.mouseReleased()}})}ac.dispatchEvent(d8)});(function(){var d6=true,d7=function(d8){d8.preventDefault();d8.stopPropagation()};cU.disableContextMenu=function(){if(!d6){return}bL(ac,"contextmenu",d7);d6=false};cU.enableContextMenu=function(){if(d6){return}dd({elem:ac,type:"contextmenu",fn:d7});d6=true}}());bL(ac,"mousemove",function(d6){aG(ac,d6);if(typeof cU.mouseMoved==="function"&&!cU.__mousePressed){cU.mouseMoved()}if(typeof cU.mouseDragged==="function"&&cU.__mousePressed){cU.mouseDragged();cU.mouseDragging=true}});bL(ac,"mouseout",function(d6){if(typeof cU.mouseOut==="function"){cU.mouseOut()}});bL(ac,"mouseover",function(d6){aG(ac,d6);if(typeof cU.mouseOver==="function"){cU.mouseOver()}});bL(ac,"mousedown",function(d6){cU.__mousePressed=true;cU.mouseDragging=false;switch(d6.which){case 1:cU.mouseButton=z.LEFT;break;case 2:cU.mouseButton=z.CENTER;break;case 3:cU.mouseButton=z.RIGHT;break}if(typeof cU.mousePressed==="function"){cU.mousePressed()}});bL(ac,"mouseup",function(d6){cU.__mousePressed=false;if(typeof cU.mouseClicked==="function"&&!cU.mouseDragging){cU.mouseClicked()}if(typeof cU.mouseReleased==="function"){cU.mouseReleased()}});var am=function(d6){var d7=0;if(d6.wheelDelta){d7=d6.wheelDelta/120;if(B.opera){d7=-d7}}else{if(d6.detail){d7=-d6.detail/3}}cU.mouseScroll=d7;if(d7&&typeof cU.mouseScrolled==="function"){cU.mouseScrolled()}};bL(d,"DOMMouseScroll",am);bL(d,"mousewheel",am);if(typeof ac==="string"){ac=d.getElementById(ac)}if(!ac.getAttribute("tabindex")){ac.setAttribute("tabindex",0)}function dA(d7){var d6=d7.which||d7.keyCode;switch(d6){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155}return d6}function cz(d7){var d8=d7.which||d7.keyCode;var d6=d7.shiftKey||d7.ctrlKey||d7.altKey||d7.metaKey;switch(d8){case 13:d8=d6?13:10;break;case 8:d8=d6?127:8;break}return new bM(d8)}function cP(d6){if(typeof d6.preventDefault==="function"){d6.preventDefault()}else{if(typeof d6.stopPropagation==="function"){d6.stopPropagation()}}return false}function dC(){var d6;for(d6 in af){if(af.hasOwnProperty(d6)){cU.__keyPressed=true;return}}cU.__keyPressed=false}function cv(){cU.__keyPressed=false;af=[];dE=null}function bm(d6,d7){af[d6]=d7;dE=null;cU.key=d7;cU.keyCode=d6;cU.keyPressed();cU.keyCode=0;cU.keyTyped();dC()}function cx(d7){var d6=dA(d7);if(d6===z.DELETE){bm(d6,new bM(127));return}if(dT.indexOf(d6)<0){dE=d6;return}var d8=new bM(z.CODED);cU.key=d8;cU.keyCode=d6;af[d6]=d8;cU.keyPressed();dE=null;dC();return cP(d7)}function ds(d7){if(dE===null){return}var d6=dE,d8=cz(d7);bm(d6,d8);return cP(d7)}function co(d7){var d6=dA(d7),d8=af[d6];if(d8===r){return}cU.key=d8;cU.keyCode=d6;cU.keyReleased();delete af[d6];dC()}if(!cT){if(a6 instanceof D.Sketch){cO=a6}else{if(typeof a6==="function"){cO=new D.Sketch(a6)}else{if(!a6){cO=new D.Sketch(function(){})}else{cO=D.compile(a6)}}}cU.externals.sketch=cO;cJ();ac.onfocus=function(){cU.focused=true};ac.onblur=function(){cU.focused=false;if(!cO.options.globalKeyEvents){cv()}};if(cO.options.pauseOnBlur){bL(B,"focus",function(){if(aB){cU.loop()}});bL(B,"blur",function(){if(aB&&aw){cU.noLoop();aB=true}cv()})}var aS=cO.options.globalKeyEvents?B:ac;bL(aS,"keydown",cx);bL(aS,"keypress",ds);bL(aS,"keyup",co);for(var c2 in D.lib){if(D.lib.hasOwnProperty(c2)){if(D.lib[c2].hasOwnProperty("attach")){D.lib[c2].attach(cU)}else{if(D.lib[c2] instanceof Function){D.lib[c2].call(this)}}}}var dy=100;var b4=function(d9){if(!(cO.imageCache.pending||F.preloading.pending(dy))){if(B.opera){var d8,d7,d6=cO.imageCache.operaCache;for(d8 in d6){if(d6.hasOwnProperty(d8)){d7=d6[d8];if(d7!==null){d.body.removeChild(d7)}delete (d6[d8])}}}cO.attach(d9,g);cO.onLoad();if(d9.setup){d9.setup();d9.resetMatrix();cO.onSetup()}R();if(d9.draw){if(!aB){d9.redraw()}else{d9.loop()}}}else{B.setTimeout(function(){b4(d9)},dy)}};a(this);b4(cU)}else{cO=new D.Sketch();cJ();cU.size=function(d6,d8,d7){if(d7&&d7===z.WEBGL){cJ("3D")}else{cJ("2D")}if(d7===z.WEBGL){cU.toImageData=function(){var ef=d.createElement("canvas");var eh=ef.getContext("2d");var eb=eh.createImageData(this.width,this.height);var ea=new b(this.width*this.height*4);d3.readPixels(0,0,this.width,this.height,d3.RGBA,d3.UNSIGNED_BYTE,ea);for(var ec=0,ee=ea.length,ed=this.height,eg=this.width,d9=eb.data;ec<ee;ec++){d9[ec]=ea[(ed-1-o.floor(ec/4/eg))*eg*4+(ec%(eg*4))]}return eb}}else{cU.toImageData=function(){return d3.getImageData(0,0,this.width,this.height)}}cU.size(d6,d8,d7)}}};D.debug=q;D.prototype=g;function s(){var P=["abs","acos","alpha","ambient","ambientLight","append","applyMatrix","arc","arrayCopy","asin","atan","atan2","background","beginCamera","beginDraw","beginShape","bezier","bezierDetail","bezierPoint","bezierTangent","bezierVertex","binary","blend","blendColor","blit_resize","blue","box","breakShape","brightness","camera","ceil","Character","color","colorMode","concat","constrain","copy","cos","createFont","createGraphics","createImage","cursor","curve","curveDetail","curvePoint","curveTangent","curveTightness","curveVertex","day","degrees","directionalLight","disableContextMenu","dist","draw","ellipse","ellipseMode","emissive","enableContextMenu","endCamera","endDraw","endShape","exit","exp","expand","externals","fill","filter","floor","focused","frameCount","frameRate","frustum","get","glyphLook","glyphTable","green","height","hex","hint","hour","hue","image","imageMode","Import","intersect","join","key","keyCode","keyPressed","keyReleased","keyTyped","lerp","lerpColor","lightFalloff","lights","lightSpecular","line","link","loadBytes","loadFont","loadGlyphs","loadImage","loadPixels","loadShape","loadStrings","log","loop","mag","map","match","matchAll","max","millis","min","minute","mix","modelX","modelY","modelZ","modes","month","mouseButton","mouseClicked","mouseDragged","mouseMoved","mouseOut","mouseOver","mousePressed","mouseReleased","mouseScroll","mouseScrolled","mouseX","mouseY","name","nf","nfc","nfp","nfs","noCursor","noFill","noise","noiseDetail","noiseSeed","noLights","noLoop","norm","normal","noSmooth","noStroke","noTint","ortho","param","parseBoolean","parseByte","parseChar","parseFloat","parseInt","peg","perspective","PImage","pixels","PMatrix2D","PMatrix3D","PMatrixStack","pmouseX","pmouseY","point","pointLight","popMatrix","popStyle","pow","print","printCamera","println","printMatrix","printProjection","PShape","PShapeSVG","pushMatrix","pushStyle","quad","radians","random","Random","randomSeed","rect","rectMode","red","redraw","requestImage","resetMatrix","reverse","rotate","rotateX","rotateY","rotateZ","round","saturation","save","saveFrame","saveStrings","scale","screenX","screenY","screenZ","second","set","setup","shape","shapeMode","shared","shininess","shorten","sin","size","smooth","sort","specular","sphere","sphereDetail","splice","split","splitTokens","spotLight","sq","sqrt","status","str","stroke","strokeCap","strokeJoin","strokeWeight","subset","tan","text","textAlign","textAscent","textDescent","textFont","textLeading","textMode","textSize","texture","textureMode","textWidth","tint","touchCancel","touchEnd","touchMove","touchStart","translate","triangle","trim","unbinary","unhex","updatePixels","use3DContext","vertex","width","XMLElement","year","__contains","__equals","__equalsIgnoreCase","__frameRate","__hashCode","__int_cast","__instanceof","__keyPressed","__mousePressed","__printStackTrace","__replace","__replaceAll","__replaceFirst","__toCharArray","__split","__codePointAt","__startsWith","__endsWith"];var N={};var O,M;for(O=0,M=P.length;O<M;++O){N[P[O]]=null}for(var Q in D.lib){if(D.lib.hasOwnProperty(Q)){if(D.lib[Q].exports){var L=D.lib[Q].exports;for(O=0,M=L.length;O<M;++O){N[L[O]]=null}}}}return N}function c(ap){var aV=s();function aC(bo){var br=[];var bt=bo.split(/([\{\[\(\)\]\}])/);var bw=bt[0];var bu=[];for(var bq=1;bq<bt.length;bq+=2){var bv=bt[bq];if(bv==="["||bv==="{"||bv==="("){bu.push(bw);bw=bv}else{if(bv==="]"||bv==="}"||bv===")"){var bp=bv==="}"?"A":bv===")"?"B":"C";var bs=br.length;br.push(bw+bv);bw=bu.pop()+'"'+bp+(bs+1)+'"'}}bw+=bt[bq+1]}br.unshift(bw);return br}function ah(bp,bo){return bp.replace(/'(\d+)'/g,function(br,bq){var bs=bo[bq];if(bs.charAt(0)==="/"){return bs}return(/^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/).test(bs)?"(new $p.Character("+bs+"))":bs})}function aN(br){var bq=/^\s*/.exec(br),bo;if(bq[0].length===br.length){bo={left:bq[0],middle:"",right:""}}else{var bp=/\s*$/.exec(br);bo={left:bq[0],middle:br.substring(bq[0].length,bp.index),right:bp[0]}}bo.untrim=function(bs){return this.left+bs+this.right};return bo}function a4(bo){return bo.replace(/^\s+/,"").replace(/\s+$/,"")}function at(bq,br){for(var bp=0,bo=br.length;bp<bo;++bp){bq[br[bp]]=null}return bq}function a8(bp){for(var bo in bp){if(bp.hasOwnProperty(bo)){return false}}return true}function aO(bo){return bo.substring(2,bo.length-1)}var be=ap.replace(/\r\n?|\n\r/g,"\n");var L=[];var a1=be.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,function(bw,bp,bt,bu,br,bv,bo,bq){var bs;if(bp||bt){bs=L.length;L.push(bw);return"'"+bs+"'"}if(bu){bs=L.length;L.push(bv);return br+"'"+bs+"'"}return bq!==""?" ":"\n"});var X;var ay=a1;var Y=function(bp,bq,bo,br){if(!!bq||!!br){return bp}X=true;return""};do{X=false;ay=ay.replace(/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g,Y)}while(X);var bi=aC(ay);var aj;var aH={},a7,ax=0;function ba(bp,bo){var bq=bi.length;bi.push(bp);return'"'+bo+bq+'"'}function a5(){return"class"+(++ax)}function bj(bp,bq,bo){bp.classId=bq;bp.scopeId=bo;aH[bq]=bp}var T,Q,an,aT,bg,aX;var M=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g;var a9=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g;var aK=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/;var bk=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g;var U=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/;var ar=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g;function ac(bp){var bo=bp;bo=bo.replace(M,function(bq){return ba(bq,"E")});bo=bo.replace(a9,function(bq){return ba(bq,"D")});bo=bo.replace(ar,function(bq){return ba(bq,"H")});return bo}function bb(bq,bp){var bo=bq.replace(bk,function(bv,bs,bt,bw,bu,br){if(bt!==bp){return bv}return ba(bv,"G")});return bo}function aF(bo){this.name=bo}aF.prototype.toString=function(){return this.name};function am(bo){this.params=bo}am.prototype.getNames=function(){var bq=[];for(var bp=0,bo=this.params.length;bp<bo;++bp){bq.push(this.params[bp].name)}return bq};am.prototype.toString=function(){if(this.params.length===0){return"()"}var bo="(";for(var bq=0,bp=this.params.length;bq<bp;++bq){bo+=this.params[bq]+", "}return bo.substring(0,bo.length-2)+")"};function aB(bt){var br=a4(bt.substring(1,bt.length-1));var bo=[];if(br!==""){var bp=br.split(",");for(var bq=0;bq<bp.length;++bq){var bs=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(bp[bq]);bo.push(new aF(bs[1]))}}return new am(bo)}function ao(bs){var br=bs;br=br.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g,function(bu,bt,bv){return bv});br=br.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g,function(bu,bt,bv){return ba(bu,"F")});br=br.replace(ar,function(bt){return ba(bt,"H")});br=br.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g,function(by,bx,bv){var bu=bv.replace(/"C(\d+)"/g,function(bA,bz){return bi[bz]}).replace(/\[\s*\]/g,"[null]").replace(/\s*\]\s*\[\s*/g,", ");var bw="{"+bu.substring(1,bu.length-1)+"}";var bt="('"+bx+"', "+ba(bw,"A")+")";return"$p.createJavaArray"+ba(bt,"B")});br=br.replace(/(\.\s*length)\s*"B\d+"/g,"$1");br=br.replace(/#([0-9A-Fa-f]{6})\b/g,function(bt,bu){return"0xFF"+bu});br=br.replace(/"B(\d+)"(\s*(?:[\w$']|"B))/g,function(bw,bu,bv){var bx=bi[bu];if(!/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/.test(bx)){return bw}if(/^\(\s*int\s*\)$/.test(bx)){return"(int)"+bv}var bt=bx.split(/"C(\d+)"/g);if(bt.length>1){if(!/^\[\s*\]$/.test(bi[bt[1]])){return bw}}return""+bv});br=br.replace(/\(int\)([^,\]\)\}\?\:\*\+\-\/\^\|\%\&\~<\>\=]+)/g,function(bu,bt){var bv=aN(bt);return bv.untrim("__int_cast("+bv.middle+")")});br=br.replace(/\bsuper(\s*"B\d+")/g,"$$superCstr$1").replace(/\bsuper(\s*\.)/g,"$$super$1");br=br.replace(/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/,function(bv,bu,bt){if(bu===bt){return bv}return bt===""?"0"+bu:bu});br=br.replace(/\b(\.?\d+\.?)[fF]\b/g,"$1");br=br.replace(/([^\s])%([^=\s])/g,"$1 % $2");br=br.replace(/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g,"__$1");br=br.replace(/\b(boolean|byte|char|float|int)\s*"B/g,function(bu,bt){return"parse"+bt.substring(0,1).toUpperCase()+bt.substring(1)+'"B'});br=br.replace(/\bpixels\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g,function(bu,by,bt,bx,bw,bz){if(bt){var bv=bi[bx];if(bw){return"pixels.setPixel"+ba("("+bv.substring(1,bv.length-1)+","+bz+")","B")}return"pixels.getPixel"+ba("("+bv.substring(1,bv.length-1)+")","B")}if(by){return"pixels.getLength"+ba("()","B")}if(bw){return"pixels.set"+ba("("+bz+")","B")}return"pixels.toArray"+ba("()","B")});var bq;function bp(bu,bt,by,bw){var bv=bi[bw];bq=true;var bx=aN(bv.substring(1,bv.length-1));return"__"+by+(bx.middle===""?ba("("+bt.replace(/\.\s*$/,"")+")","B"):ba("("+bt.replace(/\.\s*$/,"")+","+bx.middle+")","B"))}do{bq=false;br=br.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt)\s*"B(\d+)"/g,bp)}while(bq);function bo(bv,bt,bu){bq=true;return"__instanceof"+ba("("+bt+", "+bu+")","B")}do{bq=false;br=br.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g,bo)}while(bq);br=br.replace(/\bthis(\s*"B\d+")/g,"$$constr$1");return br}function aA(bp,bo){this.baseInterfaceName=bp;this.body=bo;bo.owner=this}aA.prototype.toString=function(){return"new ("+this.body+")"};function ag(bq){var bp=new RegExp(/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/).exec(bq);var bt=a7,bs=a5();a7=bs;var bo=bp[1]+"$"+bs;var br=new aA(bo,T(bi[bp[2]],bo,"","implements "+bp[1]));bj(br,bs,bt);a7=bt;return br}function ad(bp,bq,bo){this.name=bp;this.params=bq;this.body=bo}ad.prototype.toString=function(){var bp=aj;var bq=at({"this":null},this.params.getNames());aj=function(br){return bq.hasOwnProperty(br.name)?br.name:bp(br)};var bo="function";if(this.name){bo+=" "+this.name}bo+=this.params+" "+this.body;aj=bp;return bo};function aI(bp){var bo=new RegExp(/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/).exec(bp);return new ad(bo[1]!=="function"?bo[1]:null,aB(bi[bo[2]]),an(bi[bo[3]]))}function ab(bo){this.members=bo}ab.prototype.toString=function(){var bq=aj;aj=function(bs){return bs.name==="this"?"this":bq(bs)};var bo="";for(var br=0,bp=this.members.length;br<bp;++br){if(this.members[br].label){bo+=this.members[br].label+": "}bo+=this.members[br].value.toString()+", "}aj=bq;return bo.substring(0,bo.length-2)};function aD(br){var bo=br.split(",");for(var bq=0;bq<bo.length;++bq){var bp=bo[bq].indexOf(":");if(bp<0){bo[bq]={value:aX(bo[bq])}}else{bo[bq]={label:a4(bo[bq].substring(0,bp)),value:aX(a4(bo[bq].substring(bp+1)))}}}return new ab(bo)}function aw(bq){if(bq.charAt(0)==="("||bq.charAt(0)==="["){return bq.charAt(0)+aw(bq.substring(1,bq.length-1))+bq.charAt(bq.length-1)}if(bq.charAt(0)==="{"){if(/^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(bq)){return"{"+ba(bq.substring(1,bq.length-1),"I")+"}"}return"["+aw(bq.substring(1,bq.length-1))+"]"}var bp=aN(bq);var bo=ao(bp.middle);bo=bo.replace(/"[ABC](\d+)"/g,function(bs,br){return aw(bi[br])});return bp.untrim(bo)}function P(bo){return bo.replace(/(\.\s*)?(\b[A-Za-z_$][\w$]*\b)(\s*\.\s*(\b[A-Za-z_$][\w$]*\b)(\s*\()?)?/g,function(br,bt,bp,bv,bu,bs){if(bt){return br}var bq={name:bp,member:bu,callSign:!!bs};return aj(bq)+(bv===r?"":bv)})}function bn(bp,bo){this.expr=bp;this.transforms=bo}bn.prototype.toString=function(){var bo=this.transforms;var bp=P(this.expr);return bp.replace(/"!(\d+)"/g,function(br,bq){return bo[bq].toString()})};aX=function(bq){var bp=[];var bo=aw(bq);bo=bo.replace(/"H(\d+)"/g,function(bs,br){bp.push(aI(bi[br]));return'"!'+(bp.length-1)+'"'});bo=bo.replace(/"F(\d+)"/g,function(bs,br){bp.push(ag(bi[br]));return'"!'+(bp.length-1)+'"'});bo=bo.replace(/"I(\d+)"/g,function(bs,br){bp.push(aD(bi[br]));return'"!'+(bp.length-1)+'"'});return new bn(bo,bp)};function a2(bo,bq,bp){this.name=bo;this.value=bq;this.isDefault=bp}a2.prototype.toString=function(){return this.name+" = "+this.value};function ai(bs,bp){var bt=bs.indexOf("=");var bo,br,bq;if(bt<0){bo=bs;br=bp;bq=true}else{bo=bs.substring(0,bt);br=aX(bs.substring(bt+1));bq=false}return new a2(a4(bo.replace(/(\s*"C\d+")+/g,"")),br,bq)}function aR(bo){if(bo==="int"||bo==="float"){return"0"}if(bo==="boolean"){return"false"}if(bo==="color"){return"0x00000000"}return"null"}function aG(bp,bo){this.definitions=bp;this.varType=bo}aG.prototype.getNames=function(){var bq=[];for(var bp=0,bo=this.definitions.length;bp<bo;++bp){bq.push(this.definitions[bp].name)}return bq};aG.prototype.toString=function(){return"var "+this.definitions.join(",")};function af(bo){this.expression=bo}af.prototype.toString=function(){return this.expression.toString()};function bl(bs){if(aK.test(bs)){var br=U.exec(bs);var bq=bs.substring(br[0].length).split(",");var bo=aR(br[2]);for(var bp=0;bp<bq.length;++bp){bq[bp]=ai(bq[bp],bo)}return new aG(bq,br[2])}return new af(aX(bs))}function aZ(bo,bq,bp){this.initStatement=bo;this.condition=bq;this.step=bp}aZ.prototype.toString=function(){return"("+this.initStatement+"; "+this.condition+"; "+this.step+")"};function aQ(bp,bo){this.initStatement=bp;this.container=bo}aQ.prototype.toString=function(){var bo=this.initStatement.toString();if(bo.indexOf("=")>=0){bo=bo.substring(0,bo.indexOf("="))}return"("+bo+" in "+this.container+")"};function aW(bp,bo){this.initStatement=bp;this.container=bo}aW.iteratorId=0;aW.prototype.toString=function(){var bs=this.initStatement.toString();var bp="$it"+(aW.iteratorId++);var br=bs.replace(/^\s*var\s*/,"").split("=")[0];var bq="var "+bp+" = new $p.ObjectIterator("+this.container+"), "+br+" = void(0)";var bo=bp+".hasNext() && (("+br+" = "+bp+".next()) || true)";return"("+bq+"; "+bo+";)"};function W(bp){var bo;if(/\bin\b/.test(bp)){bo=bp.substring(1,bp.length-1).split(/\bin\b/g);return new aQ(bl(a4(bo[0])),aX(bo[1]))}if(bp.indexOf(":")>=0&&bp.indexOf(";")<0){bo=bp.substring(1,bp.length-1).split(":");return new aW(bl(a4(bo[0])),aX(bo[1]))}bo=bp.substring(1,bp.length-1).split(";");return new aZ(bl(a4(bo[0])),aX(bo[1]),aX(bo[2]))}function a0(bo){bo.sort(function(bq,bp){return bp.weight-bq.weight})}function Z(bq,bo,bp){this.name=bq;this.body=bo;this.isStatic=bp;bo.owner=this}Z.prototype.toString=function(){return""+this.body};function al(bq,bo,bp){this.name=bq;this.body=bo;this.isStatic=bp;bo.owner=this}al.prototype.toString=function(){return""+this.body};function R(bq){var bp=M.exec(bq);M.lastIndex=0;var br=bp[1].indexOf("static")>=0;var bo=bi[aO(bp[6])],bt;var bu=a7,bs=a5();a7=bs;if(bp[2]==="interface"){bt=new Z(bp[3],Q(bo,bp[3],bp[4]),br)}else{bt=new al(bp[3],T(bo,bp[3],bp[4],bp[5]),br)}bj(bt,bs,bu);a7=bu;return bt}function aa(bq,br,bo,bp){this.name=bq;this.params=br;this.body=bo;this.isStatic=bp}aa.prototype.toString=function(){var bq=at({},this.params.getNames());var bp=aj;aj=function(br){return bq.hasOwnProperty(br.name)?br.name:bp(br)};var bo="function "+this.methodId+this.params+" "+this.body+"\n";aj=bp;return bo};function N(br){var bp=a9.exec(br);a9.lastIndex=0;var bq=bp[1].indexOf("static")>=0;var bo=bp[6]!==";"?bi[aO(bp[6])]:"{}";return new aa(bp[3],aB(bi[aO(bp[4])]),an(bo),bq)}function ak(bq,bp,bo){this.definitions=bq;this.fieldType=bp;this.isStatic=bo}ak.prototype.getNames=function(){var bq=[];for(var bp=0,bo=this.definitions.length;bp<bo;++bp){bq.push(this.definitions[bp].name)}return bq};ak.prototype.toString=function(){var bv=aj({name:"[this]"});if(this.isStatic){var bu=this.owner.name;var bs=[];for(var bt=0,br=this.definitions.length;bt<br;++bt){var bq=this.definitions[bt];var bo=bq.name,bw=bu+"."+bo;var bp="if("+bw+" === void(0)) {\n "+bw+" = "+bq.value+"; }\n$p.defineProperty("+bv+", '"+bo+"', { get: function(){return "+bw+";}, set: function(val){"+bw+" = val;} });\n";bs.push(bp)}return bs.join("")}return bv+"."+this.definitions.join("; "+bv+".")};function bd(bt){var bs=U.exec(bt);var bo=bs[1].indexOf("static")>=0;var br=bt.substring(bs[0].length).split(/,\s*/g);var bp=aR(bs[2]);for(var bq=0;bq<br.length;++bq){br[bq]=ai(br[bq],bp)}return new ak(br,bs[2],bo)}function aL(bp,bo){this.params=bp;this.body=bo}aL.prototype.toString=function(){var br=at({},this.params.getNames());var bp=aj;aj=function(bs){return br.hasOwnProperty(bs.name)?bs.name:bp(bs)};var bq="function $constr_"+this.params.params.length+this.params.toString();var bo=this.body.toString();if(!/\$(superCstr|constr)\b/.test(bo)){bo="{\n$superCstr();\n"+bo.substring(1)}aj=bp;return bq+bo+"\n"};function aq(bq){var bo=new RegExp(/"B(\d+)"\s*"A(\d+)"/).exec(bq);var bp=aB(bi[bo[1]]);return new aL(bp,an(bi[bo[2]]))}function aM(bq,bt,bs,bo,bu,bv){var br,bp;this.name=bq;this.interfacesNames=bt;this.methodsNames=bs;this.fields=bo;this.innerClasses=bu;this.misc=bv;for(br=0,bp=bo.length;br<bp;++br){bo[br].owner=this}}aM.prototype.getMembers=function(bv,bo,bt){if(this.owner.base){this.owner.base.body.getMembers(bv,bo,bt)}var bs,br,bq,bp;for(bs=0,bq=this.fields.length;bs<bq;++bs){var bx=this.fields[bs].getNames();for(br=0,bp=bx.length;br<bp;++br){bv[bx[br]]=this.fields[bs]}}for(bs=0,bq=this.methodsNames.length;bs<bq;++bs){var bu=this.methodsNames[bs];bo[bu]=true}for(bs=0,bq=this.innerClasses.length;bs<bq;++bs){var bw=this.innerClasses[bs];bt[bw.name]=bw}};aM.prototype.toString=function(){function bp(bF){var bE=0;while(bF){++bE;bF=bF.scope}return bE}var by=bp(this.owner);var bz=this.name;var bv="";var bA="";var bC={},bx={},bw={};this.getMembers(bC,bx,bw);var bu,bs,bt,br;if(this.owner.interfaces){var bo=[],bq;for(bu=0,bs=this.interfacesNames.length;bu<bs;++bu){if(!this.owner.interfaces[bu]){continue}bq=aj({name:this.interfacesNames[bu]});bo.push(bq);bv+="$p.extendInterfaceMembers("+bz+", "+bq+");\n"}bA+=bz+".$interfaces = ["+bo.join(", ")+"];\n"}bA+=bz+".$isInterface = true;\n";bA+=bz+".$methods = ['"+this.methodsNames.join("', '")+"'];\n";a0(this.innerClasses);for(bu=0,bs=this.innerClasses.length;bu<bs;++bu){var bD=this.innerClasses[bu];if(bD.isStatic){bv+=bz+"."+bD.name+" = "+bD+";\n"}}for(bu=0,bs=this.fields.length;bu<bs;++bu){var bB=this.fields[bu];if(bB.isStatic){bv+=bz+"."+bB.definitions.join(";\n"+bz+".")+";\n"}}return"(function() {\nfunction "+bz+"() { throw 'Unable to create the interface'; }\n"+bv+bA+"return "+bz+";\n})()"};Q=function(bu,bp,bz){var bA=bu.substring(1,bu.length-1);bA=ac(bA);bA=bb(bA,bp);var bx=[],br=[];bA=bA.replace(/"([DE])(\d+)"/g,function(bD,bC,bB){if(bC==="D"){bx.push(bB)}else{if(bC==="E"){br.push(bB)}}return""});var bv=bA.split(/;(?:\s*;)*/g);var bs;var bt,bq;if(bz!==r){bs=bz.replace(/^\s*extends\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)}for(bt=0,bq=bx.length;bt<bq;++bt){var bo=N(bi[bx[bt]]);bx[bt]=bo.name}for(bt=0,bq=bv.length-1;bt<bq;++bt){var by=aN(bv[bt]);bv[bt]=bd(by.middle)}var bw=bv.pop();for(bt=0,bq=br.length;bt<bq;++bt){br[bt]=R(bi[br[bt]])}return new aM(bp,bs,bx,bv,br,{tail:bw})};function az(bp,bw,bv,bu,bq,bx,by,bs,bo){var bt,br;this.name=bp;this.baseClassName=bw;this.interfacesNames=bv;this.functions=bu;this.methods=bq;this.fields=bx;this.cstrs=by;this.innerClasses=bs;this.misc=bo;for(bt=0,br=bx.length;bt<br;++bt){bx[bt].owner=this}}az.prototype.getMembers=function(bv,bp,bu){if(this.owner.base){this.owner.base.body.getMembers(bv,bp,bu)}var bt,bs,br,bq;for(bt=0,br=this.fields.length;bt<br;++bt){var bx=this.fields[bt].getNames();for(bs=0,bq=bx.length;bs<bq;++bs){bv[bx[bs]]=this.fields[bt]}}for(bt=0,br=this.methods.length;bt<br;++bt){var bo=this.methods[bt];bp[bo.name]=bo}for(bt=0,br=this.innerClasses.length;bt<br;++bt){var bw=this.innerClasses[bt];bu[bw.name]=bw}};az.prototype.toString=function(){function bJ(bR){var bQ=0;while(bR){++bQ;bR=bR.scope}return bQ}var bz=bJ(this.owner);var bC="$this_"+bz;var bq=this.name;var bv="var "+bC+" = this;\n";var bD="";var bx="";var bO={},bP={},bF={};this.getMembers(bO,bP,bF);var bN=aj;aj=function(bR){var bQ=bR.name;if(bQ==="this"){return bR.callSign||!bR.member?bC+".$self":bC}if(bO.hasOwnProperty(bQ)){return bO[bQ].isStatic?bq+"."+bQ:bC+"."+bQ}if(bF.hasOwnProperty(bQ)){return bC+"."+bQ}if(bP.hasOwnProperty(bQ)){return bP[bQ].isStatic?bq+"."+bQ:bC+".$self."+bQ}return bN(bR)};var by;if(this.baseClassName){by=bN({name:this.baseClassName});bv+="var $super = { $upcast: "+bC+" };\n";bv+="function $superCstr(){"+by+".apply($super,arguments);if(!('$self' in $super)) $p.extendClassChain($super)}\n";bx+=bq+".$base = "+by+";\n"}else{bv+="function $superCstr(){$p.extendClassChain("+bC+")}\n"}if(this.owner.base){bD+="$p.extendStaticMembers("+bq+", "+by+");\n"}var bI,bG,bH,bE;if(this.owner.interfaces){var bu=[],bo;for(bI=0,bG=this.interfacesNames.length;bI<bG;++bI){if(!this.owner.interfaces[bI]){continue}bo=bN({name:this.interfacesNames[bI]});bu.push(bo);bD+="$p.extendInterfaceMembers("+bq+", "+bo+");\n"}bx+=bq+".$interfaces = ["+bu.join(", ")+"];\n"}if(this.functions.length>0){bv+=this.functions.join("\n")+"\n"}a0(this.innerClasses);for(bI=0,bG=this.innerClasses.length;bI<bG;++bI){var bB=this.innerClasses[bI];if(bB.isStatic){bD+=bq+"."+bB.name+" = "+bB+";\n";bv+=bC+"."+bB.name+" = "+bq+"."+bB.name+";\n"}else{bv+=bC+"."+bB.name+" = "+bB+";\n"}}for(bI=0,bG=this.fields.length;bI<bG;++bI){var bp=this.fields[bI];if(bp.isStatic){bD+=bq+"."+bp.definitions.join(";\n"+bq+".")+";\n";for(bH=0,bE=bp.definitions.length;bH<bE;++bH){var bs=bp.definitions[bH].name,bw=bq+"."+bs;bv+="$p.defineProperty("+bC+", '"+bs+"', {get: function(){return "+bw+"}, set: function(val){"+bw+" = val}});\n"}}else{bv+=bC+"."+bp.definitions.join(";\n"+bC+".")+";\n"}}var bA={};for(bI=0,bG=this.methods.length;bI<bG;++bI){var br=this.methods[bI];var bL=bA[br.name];var bt=br.name+"$"+br.params.params.length;if(bL){++bL;bt+="_"+bL}else{bL=1}br.methodId=bt;bA[br.name]=bL;if(br.isStatic){bD+=br;bD+="$p.addMethod("+bq+", '"+br.name+"', "+bt+");\n";bv+="$p.addMethod("+bC+", '"+br.name+"', "+bt+");\n"}else{bv+=br;bv+="$p.addMethod("+bC+", '"+br.name+"', "+bt+");\n"}}bv+=a4(this.misc.tail);if(this.cstrs.length>0){bv+=this.cstrs.join("\n")+"\n"}bv+="function $constr() {\n";var bM=[];for(bI=0,bG=this.cstrs.length;bI<bG;++bI){var bK=this.cstrs[bI].params.params.length;bM.push("if(arguments.length === "+bK+") { $constr_"+bK+".apply("+bC+", arguments); }")}if(bM.length>0){bv+=bM.join(" else ")+" else "}bv+="$superCstr();\n}\n";bv+="$constr.apply(null, arguments);\n";aj=bN;return"(function() {\nfunction "+bq+"() {\n"+bv+"}\n"+bD+bx+"return "+bq+";\n})()"};T=function(bx,bp,bo,bA){var bC=bx.substring(1,bx.length-1);bC=ac(bC);bC=bb(bC,bp);var bq=[],br=[],bB=[],bu=[];bC=bC.replace(/"([DEGH])(\d+)"/g,function(bF,bE,bD){if(bE==="D"){bq.push(bD)}else{if(bE==="E"){br.push(bD)}else{if(bE==="H"){bu.push(bD)}else{bB.push(bD)}}}return""});var bw=bC.replace(/^(?:\s*;)+/,"").split(/;(?:\s*;)*/g);var bv,bt;var bs;if(bo!==r){bv=bo.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,"$1")}if(bA!==r){bt=bA.replace(/^\s*implements\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)}for(bs=0;bs<bu.length;++bs){bu[bs]=aI(bi[bu[bs]])}for(bs=0;bs<bq.length;++bs){bq[bs]=N(bi[bq[bs]])}for(bs=0;bs<bw.length-1;++bs){var bz=aN(bw[bs]);bw[bs]=bd(bz.middle)}var by=bw.pop();for(bs=0;bs<bB.length;++bs){bB[bs]=aq(bi[bB[bs]])}for(bs=0;bs<br.length;++bs){br[bs]=R(bi[br[bs]])}return new az(bp,bv,bt,bu,bq,bw,bB,br,{tail:by})};function au(bp,bo){this.name=bp;this.body=bo;bo.owner=this}au.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n$p."+this.name+" = "+this.name+";\n"};function a3(bp,bo){this.name=bp;this.body=bo;bo.owner=this}a3.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n$p."+this.name+" = "+this.name+";\n"};function bm(bq){var bp=M.exec(bq);M.lastIndex=0;var bo=bi[aO(bp[6])];var bt=a7,br=a5();a7=br;var bs;if(bp[2]==="interface"){bs=new au(bp[3],Q(bo,bp[3],bp[4]))}else{bs=new a3(bp[3],T(bo,bp[3],bp[4],bp[5]))}bj(bs,br,bt);a7=bt;return bs}function aP(bp,bq,bo){this.name=bp;this.params=bq;this.body=bo}aP.prototype.toString=function(){var bq=at({},this.params.getNames());var bp=aj;aj=function(br){return bq.hasOwnProperty(br.name)?br.name:bp(br)};var bo="function "+this.name+this.params+" "+this.body+"\n$p."+this.name+" = "+this.name+";";aj=bp;return bo};function aU(bq){var bp=a9.exec(bq);var bo=a9.lastIndex=0;return new aP(bp[3],aB(bi[aO(bp[4])]),an(bi[aO(bp[6])]))}function ae(bo){var bp=bo;bp=bp.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,"$1");return bp}function aS(bo,bp){this.argument=bo;this.misc=bp}aS.prototype.toString=function(){return this.misc.prefix+this.argument.toString()};function O(bo,bp){this.argument=bo;this.misc=bp}O.prototype.toString=function(){return this.misc.prefix+this.argument.toString()};function av(bo,bp,bq){this.name=bo;this.argument=bp;this.misc=bq}av.prototype.toString=function(){var bo=this.misc.prefix;if(this.argument!==r){bo+=this.argument.toString()}return bo};function aJ(bo){this.expr=bo}aJ.prototype.toString=function(){return"case "+this.expr+":"};function V(bo){this.label=bo}V.prototype.toString=function(){return this.label};aT=function(bw,bx,bq){var bB=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g);var by=[];bw=ae(bw);var bv=0,br,bp;while((br=bB.exec(bw))!==null){if(br[1]!==r){var bu=bw.lastIndexOf('"B',bB.lastIndex);var bA=bw.substring(bv,bu);if(br[1]==="for"){by.push(new aS(W(bi[br[2]]),{prefix:bA}))}else{if(br[1]==="catch"){by.push(new O(aB(bi[br[2]]),{prefix:bA}))}else{by.push(new av(br[1],aX(bi[br[2]]),{prefix:bA}))}}}else{if(br[3]!==r){by.push(new av(br[3],r,{prefix:bw.substring(bv,bB.lastIndex)}))}else{if(br[4]!==r){bp=bw.substring(bv,bB.lastIndex-br[4].length);if(a4(bp).length!==0){continue}by.push(bp);var bs=br[4].charAt(1),bo=br[5];if(bs==="D"){by.push(bx(bi[bo]))}else{if(bs==="E"){by.push(bq(bi[bo]))}else{if(bs==="H"){by.push(aI(bi[bo]))}else{by.push(an(bi[bo]))}}}}else{if(br[6]!==r){by.push(new aJ(aX(a4(br[7]))))}else{if(br[8]!==r){bp=bw.substring(bv,bB.lastIndex-br[8].length);if(a4(bp).length!==0){continue}by.push(new V(bw.substring(bv,bB.lastIndex)))}else{var bz=aN(bw.substring(bv,bB.lastIndex-1));by.push(bz.left);by.push(bl(bz.middle));by.push(bz.right+";")}}}}}bv=bB.lastIndex}var bt=aN(bw.substring(bv));by.push(bt.left);if(bt.middle!==""){by.push(bl(bt.middle));by.push(";"+bt.right)}return by};function bc(bp){var bq=[];for(var br=0,bo=bp.length;br<bo;++br){var bs=bp[br];if(bs instanceof aG){bq=bq.concat(bs.getNames())}else{if(bs instanceof aS&&bs.argument.initStatement instanceof aG){bq=bq.concat(bs.argument.initStatement.getNames())}else{if(bs instanceof Z||bs instanceof al||bs instanceof au||bs instanceof a3||bs instanceof aP||bs instanceof ad){bq.push(bs.name)}}}}return at({},bq)}function S(bo){this.statements=bo}S.prototype.toString=function(){var bq=bc(this.statements);var bp=aj;if(!a8(bq)){aj=function(br){return bq.hasOwnProperty(br.name)?br.name:bp(br)}}var bo="{\n"+this.statements.join("")+"\n}";aj=bp;return bo};an=function(bp){var bo=aN(bp.substring(1,bp.length-1));return new S(aT(bo.middle))};function aE(bo){this.statements=bo}aE.prototype.toString=function(){var bs=[],bt=[],bu;for(var br=0,bp=this.statements.length;br<bp;++br){bu=this.statements[br];if(bu instanceof a3||bu instanceof au){bs.push(bu)}else{bt.push(bu)}}a0(bs);var bq=bc(this.statements);aj=function(bw){var bv=bw.name;if(bq.hasOwnProperty(bv)){return bv}if(aV.hasOwnProperty(bv)||z.hasOwnProperty(bv)||g.hasOwnProperty(bv)){return"$p."+bv}return bv};var bo="// this code was autogenerated from PJS\n(function($p) {\n"+bs.join("")+"\n"+bt.join("")+"\n})";aj=null;return bo};bg=function(){var bo=ac(bi[0]);bo=bo.replace(/\bimport\s+[^;]+;/g,"");return new aE(aT(bo,aU,bm))};function bh(bo){var bs={};var bq,bw;for(bq in aH){if(aH.hasOwnProperty(bq)){bw=aH[bq];var bC=bw.scopeId,bp=bw.name;if(bC){var bB=aH[bC];bw.scope=bB;if(bB.inScope===r){bB.inScope={}}bB.inScope[bp]=bw}else{bs[bp]=bw}}}function bz(bD,bG){var bJ=bG.split(".");var bF=bD.scope,bI;while(bF){if(bF.hasOwnProperty(bJ[0])){bI=bF[bJ[0]];break}bF=bF.scope}if(bI===r){bI=bs[bJ[0]]}for(var bH=1,bE=bJ.length;bH<bE&&bI;++bH){bI=bI.inScope[bJ[bH]]}return bI}for(bq in aH){if(aH.hasOwnProperty(bq)){bw=aH[bq];var bv=bw.body.baseClassName;if(bv){var by=bz(bw,bv);if(by){bw.base=by;if(!by.derived){by.derived=[]}by.derived.push(bw)}}var bu=bw.body.interfacesNames,bA=[],bt,br;if(bu&&bu.length>0){for(bt=0,br=bu.length;bt<br;++bt){var bx=bz(bw,bu[bt]);bA.push(bx);if(!bx){continue}if(!bx.derived){bx.derived=[]}bx.derived.push(bw)}if(bA.length>0){bw.interfaces=bA}}}}}function a6(bo){var bt=[],bq={};var bp,bw,bu;for(bp in aH){if(aH.hasOwnProperty(bp)){bu=aH[bp];if(!bu.inScope&&!bu.derived){bt.push(bp);bu.weight=0}else{var bv=[];if(bu.inScope){for(bw in bu.inScope){if(bu.inScope.hasOwnProperty(bw)){bv.push(bu.inScope[bw])}}}if(bu.derived){bv=bv.concat(bu.derived)}bq[bp]=bv}}}function bx(bz,bB){var by=bq[bz];if(!by){return false}var bA=by.indexOf(bB);if(bA<0){return false}by.splice(bA,1);if(by.length>0){return false}delete bq[bz];return true}while(bt.length>0){bp=bt.shift();bu=aH[bp];if(bu.scopeId&&bx(bu.scopeId,bu)){bt.push(bu.scopeId);aH[bu.scopeId].weight=bu.weight+1}if(bu.base&&bx(bu.base.classId,bu)){bt.push(bu.base.classId);bu.base.weight=bu.weight+1}if(bu.interfaces){var bs,br;for(bs=0,br=bu.interfaces.length;bs<br;++bs){if(!bu.interfaces[bs]||!bx(bu.interfaces[bs].classId,bu)){continue}bt.push(bu.interfaces[bs].classId);bu.interfaces[bs].weight=bu.weight+1}}}}var bf=bg();bh(bf);a6(bf);var aY=bf.toString();aY=aY.replace(/\s*\n(?:[\t ]*\n)+/g,"\n\n");return ah(aY,L)}function x(M,ab){var V=new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g).exec(M);if(V&&V.length===2){var L=[],O=V.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,(function(){return function(ae,af){L.push(af);return"{"+(L.length-1)+"}"}}())).replace("\n","").replace("\r","").split(";");var U=function(ae){return ae.replace(/^\s*["']?/,"").replace(/["']?\s*$/,"")};for(var Y=0,W=O.length;Y<W;Y++){var S=O[Y].split("=");if(S&&S.length===2){var ad=U(S[0]),T=U(S[1]),ac=[];if(ad==="preload"){ac=T.split(",");for(var X=0,Z=ac.length;X<Z;X++){var aa=U(ac[X]);ab.imageCache.add(aa)}}else{if(ad==="font"){ac=T.split(",");for(var P=0,R=ac.length;P<R;P++){var Q=U(ac[P]),N=/^\{(\d*?)\}$/.exec(Q);F.preloading.add(N?JSON.parse("{"+L[N[1]]+"}"):Q)}}else{if(ad==="pauseOnBlur"){ab.options.pauseOnBlur=T==="true"}else{if(ad==="globalKeyEvents"){ab.options.globalKeyEvents=T==="true"}else{if(ad.substring(0,6)==="param-"){ab.params[ad.substring(6)]=T}else{ab.options[ad]=T}}}}}}}}return M}D.compile=function(L){var O=new D.Sketch();var M=x(L,O);var N=c(M);O.sourceCode=N;return O};var j=(function(){var R={},O="undefined",P="function",L=!1,Q=!0,M=512,N="log";if(typeof tinylog!==O&&typeof tinylog[N]===P){R[N]=tinylog[N]}else{if(typeof d!==O&&!d.fake){(function(){var am=d,ak="div",aa="style",ae="title",Z={zIndex:10000,position:"fixed",bottom:"0px",width:"100%",height:"15%",fontFamily:"sans-serif",color:"#ccc",backgroundColor:"black"},ac={position:"relative",fontFamily:"monospace",overflow:"auto",height:"100%",paddingTop:"5px"},ag={height:"5px",marginTop:"-5px",cursor:"n-resize",backgroundColor:"darkgrey"},al={position:"absolute",top:"5px",right:"20px",color:"#111",MozBorderRadius:"4px",webkitBorderRadius:"4px",borderRadius:"4px",cursor:"pointer",fontWeight:"normal",textAlign:"center",padding:"3px 5px",backgroundColor:"#333",fontSize:"12px"},W={minHeight:"16px"},ad={fontSize:"12px",margin:"0 8px 0 8px",maxWidth:"100%",whiteSpace:"pre-wrap",overflow:"auto"},ab=am.defaultView,aj=am.documentElement,S=aj[aa],U=function(){var ao=arguments.length,an,aq,ap;while(ao--){aq=arguments[ao--];an=arguments[ao][aa];for(ap in aq){if(aq.hasOwnProperty(ap)){an[ap]=aq[ap]}}}},ah=function(ap,ao,an){if(ap.addEventListener){ap.addEventListener(ao,an,L)}else{if(ap.attachEvent){ap.attachEvent("on"+ao,an)}}return[ap,ao,an]},T=function(ap,ao,an){if(ap.removeEventListener){ap.removeEventListener(ao,an,L)}else{if(ap.detachEvent){ap.detachEvent("on"+ao,an)}}},Y=function(ao){var an=ao.childNodes,ap=an.length;while(ap--){ao.removeChild(an.item(0))}},ai=function(ao,an){return ao.appendChild(an)},af=function(an){return am.createElement(an)},X=function(an){return am.createTextNode(an)},V=R[N]=function(aC){var au,av=S.paddingBottom,ap=af(ak),az=ap[aa],aA=ai(ap,af(ak)),ar=ai(ap,af(ak)),aq=ai(ap,af(ak)),aB=L,at=L,ao=L,aw=0,an=function(){S.paddingBottom=ap.clientHeight+"px"},ay=function(aD){var aE=ab.innerHeight,aF=aA.clientHeight;if(aD<0){aD=0}else{if(aD+aF>aE){aD=aE-aF}}az.height=aD/aE*100+"%";an()},ax=[ah(am,"mousemove",function(aD){if(aB){ay(ab.innerHeight-aD.clientY);ar.scrollTop=ao}}),ah(am,"mouseup",function(){if(aB){aB=ao=L}}),ah(aA,"dblclick",function(aD){aD.preventDefault();if(at){ay(at);at=L}else{at=ap.clientHeight;az.height="0px"}}),ah(aA,"mousedown",function(aD){aD.preventDefault();aB=Q;ao=ar.scrollTop}),ah(aA,"contextmenu",function(){aB=L}),ah(aq,"click",function(){au()})];au=function(){var aD=ax.length;while(aD--){T.apply(R,ax[aD])}aj.removeChild(ap);S.paddingBottom=av;Y(ar);Y(ap);R[N]=V};U(ap,Z,ar,ac,aA,ag,aq,al);aq[ae]="Close Log";ai(aq,X("\u2716"));aA[ae]="Double-click to toggle log minimization";aj.insertBefore(ap,aj.firstChild);R[N]=function(aF){if(aw===M){ar.removeChild(ar.firstChild)}else{aw++}var aE=ai(ar,af(ak)),aD=ai(aE,af(ak));aE[ae]=(new Date()).toLocaleTimeString();U(aE,W,aD,ad);ai(aD,X(aF));ar.scrollTop=ar.scrollHeight};R[N](aC);an()}}())}else{if(typeof print===P){R[N]=print}}}return R}());D.logger=j;D.version="@VERSION@";D.lib={};D.registerLibrary=function(L,M){D.lib[L]=M;if(M.hasOwnProperty("init")){M.init(g)}};D.instances=k;D.getInstanceById=function(L){return k[H[L]]};D.Sketch=function(L){this.attachFunction=L;this.options={pauseOnBlur:false,globalKeyEvents:false};this.onLoad=E;this.onSetup=E;this.onPause=E;this.onLoop=E;this.onFrameStart=E;this.onFrameEnd=E;this.onExit=E;this.params={};this.imageCache={pending:0,images:{},operaCache:{},add:function(N,M){if(this.images[N]){return}if(!l){this.images[N]=null}if(!M){M=new Image();M.onload=(function(P){return function(){P.pending--}}(this));this.pending++;M.src=N}this.images[N]=M;if(B.opera){var O=d.createElement("div");O.appendChild(M);O.style.position="absolute";O.style.opacity=0;O.style.width="1px";O.style.height="1px";if(!this.operaCache[N]){d.body.appendChild(O);this.operaCache[N]=O}}}};this.sourceCode=undefined;this.attach=function(N){if(typeof this.attachFunction==="function"){this.attachFunction(N)}else{if(this.sourceCode){var M=((new Function("return ("+this.sourceCode+");"))());M(N);this.attachFunction=M}else{throw"Unable to attach sketch to the processing instance"}}};this.toString=function(){var M;var N="((function(Sketch) {\n";N+="var sketch = new Sketch(\n"+this.sourceCode+");\n";for(M in this.options){if(this.options.hasOwnProperty(M)){var O=this.options[M];N+="sketch.options."+M+" = "+(typeof O==="string"?'"'+O+'"':""+O)+";\n"}}for(M in this.imageCache){if(this.options.hasOwnProperty(M)){N+='sketch.imageCache.add("'+M+'");\n'}}N+="return sketch;\n})(Processing.Sketch))";return N}};var t=function(O,L){var M=[],S=[],T=L.length,Q=0;function R(U,W){var V=new XMLHttpRequest();V.onreadystatechange=function(){if(V.readyState===4){var X;if(V.status!==200&&V.status!==0){X="Invalid XHR status "+V.status}else{if(V.responseText===""){if(("withCredentials" in new XMLHttpRequest())&&(new XMLHttpRequest()).withCredentials===false&&B.location.protocol==="file:"){X="XMLHttpRequest failure, possibly due to a same-origin policy violation. You can try loading this page in another browser, or load it from http://localhost using a local webserver. See the Processing.js README for a more detailed explanation of this problem and solutions."}else{X="File is empty."}}}W(V.responseText,X)}};V.open("GET",U,true);if(V.overrideMimeType){V.overrideMimeType("application/json")}V.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT");V.send(null)}function N(V,U){function X(aa,Y){M[V]=aa;++Q;if(Y){S.push(U+" ==> "+Y)}if(Q===T){if(S.length===0){try{return new D(O,M.join("\n"))}catch(Z){throw"Processing.js: Unable to execute pjs sketch: "+Z}}else{throw"Processing.js: Unable to load pjs sketch files: "+S.join("\n")}}}if(U.charAt(0)==="#"){var W=d.getElementById(U.substring(1));if(W){X(W.text||W.textContent)}else{X("","Unable to load pjs sketch: element with id '"+U.substring(1)+"' was not found")}return}R(U,X)}for(var P=0;P<T;++P){N(P,L[P])}};var G=function(){d.removeEventListener("DOMContentLoaded",G,false);var M=d.getElementsByTagName("canvas"),S;for(var R=0,N=M.length;R<N;R++){var U=M[R].getAttribute("data-processing-sources");if(U===null){U=M[R].getAttribute("data-src");if(U===null){U=M[R].getAttribute("datasrc")}}if(U){S=U.split(" ");for(var Q=0;Q<S.length;){if(S[Q]){Q++}else{S.splice(Q,1)}}t(M[R],S)}}var O=d.getElementsByTagName("script");var Y,L,X;for(Y=0;Y<O.length;Y++){var W=O[Y];if(!W.getAttribute){continue}var V=W.getAttribute("type");if(V&&(V.toLowerCase()==="text/processing"||V.toLowerCase()==="application/processing")){var T=W.getAttribute("data-processing-target");M=r;if(T){M=d.getElementById(T)}else{var P=W.nextSibling;while(P&&P.nodeType!==1){P=P.nextSibling}if(P.nodeName.toLowerCase()==="canvas"){M=P}}if(M){if(W.getAttribute("src")){S=W.getAttribute("src").split(/\s+/);t(M,S);continue}L=W.textContent||W.text;X=new D(M,L)}}}};D.loadSketchFromSources=t;D.disableInit=function(){if(l){d.removeEventListener("DOMContentLoaded",G,false)}};if(l){B.Processing=D;d.addEventListener("DOMContentLoaded",G,false)}else{this.Processing=D}}(window,window.document,Math));