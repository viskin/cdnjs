/*!
Plottable v0.3.0 (https://github.com/palantir/plottable)
Copyright 2014 Palantir Technologies
Licensed under MIT (https://github.com/palantir/plottable/blob/master/LICENSE)
*/
;var Plottable;(function(a){(function(e){function g(i,j,h){return(Math.min(j,h)<=i&&i<=Math.max(j,h))}e.inRange=g;function f(h){return h.node().getBBox()}e.getBBox=f;function d(q,h,m){var l=m.text();m.text(q);var r=e.getBBox(m);var s=r.width;if(s<h){m.text(l);return q}m.text(q+"...");var j=m.node();var n=j.getSubStringLength(j.textContent.length-3,3);if(n>h){m.text(l);return""}var o=q.length;for(var k=1;k<o;k++){var p=j.getSubStringLength(0,k);if(p+n>h){m.text(l);return q.substr(0,k-1).trim()+"..."}}}e.truncateTextToLength=d;function c(i){var j=i.text();i.text("bqpdl");var h=e.getBBox(i).height;i.text(j);return h}e.getTextHeight=c})(a.Utils||(a.Utils={}));var b=a.Utils})(Plottable||(Plottable={}));var Plottable;(function(a){(function(c){function d(k,h,g){var f=0;var j=h.length;while(f<j){var i=(f+j)>>>1;var e=g==null?h[i]:g(h[i]);if(e<k){f=i+1}else{j=i}}return f}c.sortedIndex=d})(a.OSUtils||(a.OSUtils={}));var b=a.OSUtils})(Plottable||(Plottable={}));var Plottable;(function(a){var b=(function(){function c(){this.interactionsToRegister=[];this.boxes=[];this.clipPathEnabled=false;this.fixedWidthVal=true;this.fixedHeightVal=true;this.rowMinimumVal=0;this.colMinimumVal=0;this.isTopLevelComponent=false;this.xOffsetVal=0;this.yOffsetVal=0;this.xAlignProportion=0;this.yAlignProportion=0;this.cssClasses=["component"]}c.prototype.anchor=function(d){var e=this;if(d.node().childNodes.length>0){throw new Error("Can't anchor to a non-empty element")}if(d.node().nodeName==="svg"){d.classed("plottable",true);this.element=d.append("g");this.element.attr("width",d.attr("width"));this.element.attr("height",d.attr("height"));this.isTopLevelComponent=true}else{this.element=d}this.cssClasses.forEach(function(f){e.element.classed(f,true)});this.cssClasses=null;this.backgroundContainer=this.element.append("g").classed("background-container",true);this.content=this.element.append("g").classed("content",true);this.foregroundContainer=this.element.append("g").classed("foreground-container",true);this.boxContainer=this.element.append("g").classed("box-container",true);if(this.clipPathEnabled){this.generateClipPath()}this.addBox("bounding-box");this.interactionsToRegister.forEach(function(f){return e.registerInteraction(f)});this.interactionsToRegister=null;return this};c.prototype.computeLayout=function(i,d,f,h){var j=this;if(i==null||d==null||f==null||h==null){if(this.element==null){throw new Error("anchor must be called before computeLayout")}else{if(this.isTopLevelComponent){i=0;d=0;f=parseFloat(this.element.attr("width"));h=parseFloat(this.element.attr("height"))}else{throw new Error("null arguments cannot be passed to computeLayout() on a non-root node")}}}this.xOrigin=i;this.yOrigin=d;var g=this.xOrigin;var e=this.yOrigin;if(this.colMinimum()!==0&&this.isFixedWidth()){g+=(f-this.colMinimum())*this.xAlignProportion;g+=this.xOffsetVal;f=f>this.colMinimum()?this.colMinimum():f}if(this.rowMinimum()!==0&&this.isFixedHeight()){e+=(h-this.rowMinimum())*this.yAlignProportion;e+=this.yOffsetVal;h=h>this.rowMinimum()?this.rowMinimum():h}this.availableWidth=f;this.availableHeight=h;this.element.attr("transform","translate("+g+","+e+")");this.boxes.forEach(function(k){return k.attr("width",j.availableWidth).attr("height",j.availableHeight)});return this};c.prototype.render=function(){return this};c.prototype.renderTo=function(d){if(this.element==null){this.anchor(d)}this.computeLayout().render();return this};c.prototype.xAlign=function(d){if(d==="LEFT"){this.xAlignProportion=0}else{if(d==="CENTER"){this.xAlignProportion=0.5}else{if(d==="RIGHT"){this.xAlignProportion=1}else{throw new Error("Unsupported alignment")}}}return this};c.prototype.yAlign=function(d){if(d==="TOP"){this.yAlignProportion=0}else{if(d==="CENTER"){this.yAlignProportion=0.5}else{if(d==="BOTTOM"){this.yAlignProportion=1}else{throw new Error("Unsupported alignment")}}}return this};c.prototype.xOffset=function(d){this.xOffsetVal=d;return this};c.prototype.yOffset=function(d){this.yOffsetVal=d;return this};c.prototype.addBox=function(e,d){if(this.element==null){throw new Error("Adding boxes before anchoring is currently disallowed")}var d=d==null?this.boxContainer:d;var f=d.append("rect");if(e!=null){f.classed(e,true)}this.boxes.push(f);if(this.availableWidth!=null&&this.availableHeight!=null){f.attr("width",this.availableWidth).attr("height",this.availableHeight)}return f};c.prototype.generateClipPath=function(){var d=c.clipPathId++;this.element.attr("clip-path","url(#clipPath"+d+")");var e=this.boxContainer.append("clipPath").attr("id","clipPath"+d);this.addBox("clip-rect",e)};c.prototype.registerInteraction=function(d){if(this.element!=null){if(this.hitBox==null){this.hitBox=this.addBox("hit-box");this.hitBox.style("fill","#ffffff").style("opacity",0)}d.anchor(this.hitBox)}else{this.interactionsToRegister.push(d)}return this};c.prototype.classed=function(d,f){if(f==null){if(this.element==null){return(this.cssClasses.indexOf(d)!==-1)}else{return this.element.classed(d)}}else{if(this.element==null){var e=this.cssClasses.indexOf(d);if(f&&e===-1){this.cssClasses.push(d)}else{if(!f&&e!==-1){this.cssClasses.splice(e,1)}}}else{this.element.classed(d,f)}return this}};c.prototype.rowMinimum=function(d){if(d!=null){this.rowMinimumVal=d;return this}else{return this.rowMinimumVal}};c.prototype.colMinimum=function(d){if(d!=null){this.colMinimumVal=d;return this}else{return this.colMinimumVal}};c.prototype.isFixedWidth=function(){return this.fixedWidthVal};c.prototype.isFixedHeight=function(){return this.fixedHeightVal};c.clipPathId=0;return c})();a.Component=b})(Plottable||(Plottable={}));var __extends=this.__extends||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}c.prototype=a.prototype;f.prototype=new c()};var Plottable;(function(a){var c=(function(){function f(g){this.broadcasterCallbacks=[];this.scale=g}f.prototype.domain=function(g){var h=this;if(g==null){return this.scale.domain()}else{this.scale.domain(g);this.broadcasterCallbacks.forEach(function(i){return i(h)});return this}};f.prototype.range=function(g){if(g==null){return this.scale.range()}else{this.scale.range(g);return this}};f.prototype.copy=function(){return new f(this.scale.copy())};f.prototype.registerListener=function(g){this.broadcasterCallbacks.push(g);return this};return f})();a.Scale=c;var e=(function(f){__extends(g,f);function g(h){f.call(this,h)}g.prototype.invert=function(h){return this.scale.invert(h)};g.prototype.ticks=function(h){return this.scale.ticks(h)};g.prototype.copy=function(){return new g(this.scale.copy())};g.prototype.widenDomain=function(j){var i=this.domain();var h=[Math.min(j[0],i[0]),Math.max(j[1],i[1])];this.domain(h);return this};return g})(c);a.QuantitiveScale=e;var d=(function(g){__extends(f,g);function f(h){g.call(this,h==null?d3.scale.linear():h);this.domain([Infinity,-Infinity])}f.prototype.copy=function(){return new f(this.scale.copy())};return f})(e);a.LinearScale=d;var b=(function(g){__extends(f,g);function f(h){var i;switch(h){case"Category10":case"category10":case"10":i=d3.scale.category10();break;case"Category20":case"category20":case"20":i=d3.scale.category20();break;case"Category20b":case"category20b":case"20b":i=d3.scale.category20b();break;case"Category20c":case"category20c":case"20c":i=d3.scale.category20c();break;case null:case undefined:i=d3.scale.ordinal();default:throw new Error("Unsupported ColorScale type")}g.call(this,i)}return f})(c);a.ColorScale=b})(Plottable||(Plottable={}));var Plottable;(function(a){var d=(function(){function h(i){this.componentToListenTo=i}h.prototype.anchor=function(i){this.hitBox=i};h.prototype.registerWithComponent=function(){this.componentToListenTo.registerInteraction(this);return this};return h})();a.Interaction=d;var g=(function(h){__extends(i,h);function i(l,k,j){var m=this;h.call(this,l);this.xScale=k;this.yScale=j;this.zoom=d3.behavior.zoom();this.zoom.x(this.xScale.scale);this.zoom.y(this.yScale.scale);this.zoom.on("zoom",function(){return m.rerenderZoomed()})}i.prototype.anchor=function(j){h.prototype.anchor.call(this,j);this.zoom(j)};i.prototype.rerenderZoomed=function(){var j=this.xScale.scale.domain();var k=this.yScale.scale.domain();this.xScale.domain(j);this.yScale.domain(k)};return i})(d);a.PanZoomInteraction=g;var c=(function(i){__extends(h,i);function h(j){var k=this;i.call(this,j);this.dragInitialized=false;this.origin=[0,0];this.location=[0,0];this.dragBehavior=d3.behavior.drag();this.dragBehavior.on("dragstart",function(){return k.dragstart()});this.dragBehavior.on("drag",function(){return k.drag()});this.dragBehavior.on("dragend",function(){return k.dragend()})}h.prototype.callback=function(j){this.callbackToCall=j;return this};h.prototype.dragstart=function(){this.clearBox();var j=parseFloat(this.hitBox.attr("width"));var l=parseFloat(this.hitBox.attr("height"));var k=function(n,m){return function(o){return Math.min(Math.max(o,n),m)}};this.constrainX=k(0,j);this.constrainY=k(0,l)};h.prototype.drag=function(){if(!this.dragInitialized){this.origin=[d3.event.x,d3.event.y];this.dragInitialized=true}this.location=[this.constrainX(d3.event.x),this.constrainY(d3.event.y)];var l=Math.abs(this.origin[0]-this.location[0]);var k=Math.abs(this.origin[1]-this.location[1]);var j=Math.min(this.origin[0],this.location[0]);var m=Math.min(this.origin[1],this.location[1]);this.dragBox.attr("x",j).attr("y",m).attr("height",k).attr("width",l)};h.prototype.dragend=function(){if(!this.dragInitialized){return}this.dragInitialized=false;if(this.callbackToCall==null){return}var k=Math.min(this.origin[0],this.location[0]);var n=Math.max(this.origin[0],this.location[0]);var j=Math.min(this.origin[1],this.location[1]);var m=Math.max(this.origin[1],this.location[1]);var l={xMin:k,xMax:n,yMin:j,yMax:m};this.callbackToCall(l)};h.prototype.clearBox=function(){this.dragBox.attr("height",0).attr("width",0);return this};h.prototype.anchor=function(l){i.prototype.anchor.call(this,l);var j=h.CLASS_DRAG_BOX;var k=this.componentToListenTo.backgroundContainer;this.dragBox=k.append("rect").classed(j,true).attr("x",0).attr("y",0);l.call(this.dragBehavior);return this};h.CLASS_DRAG_BOX="drag-box";return h})(d);a.AreaInteraction=c;var f=(function(){function h(){this.xScaleMappings=[];this.yScaleMappings=[]}h.prototype.addXScale=function(j,i){if(i==null){i=j}this.xScaleMappings.push([j,i]);return this};h.prototype.addYScale=function(j,i){if(i==null){i=j}this.yScaleMappings.push([j,i]);return this};h.prototype.updateScale=function(o,m,i,k){var j=o.domain();var l=[o.invert(i),o.invert(k)];var n=(l[0]<l[1])===(j[0]<j[1]);if(!n){l.reverse()}m.domain(l)};h.prototype.getCallback=function(){var i=this;return function(j){i.xScaleMappings.forEach(function(k){i.updateScale(k[0],k[1],j.xMin,j.xMax)});i.yScaleMappings.forEach(function(k){i.updateScale(k[0],k[1],j.yMin,j.yMax)})}};return h})();a.ZoomCallbackGenerator=f;var b=(function(i){__extends(h,i);function h(j){i.call(this,j)}h.prototype.anchor=function(j){var k=this;i.prototype.anchor.call(this,j);j.on("mousemove",function(){var m=d3.mouse(j.node());var l=m[0];var n=m[1];k.mousemove(l,n)})};h.prototype.mousemove=function(j,k){return};return h})(d);a.MousemoveInteraction=b;var e=(function(h){__extends(i,h);function i(j){h.call(this,j);this.renderer=j}i.prototype.anchor=function(k){h.prototype.anchor.call(this,k);var j=this.renderer.foregroundContainer.append("g").classed("crosshairs",true);this.circle=j.append("circle").classed("centerpoint",true);this.xLine=j.append("path").classed("x-line",true);this.yLine=j.append("path").classed("y-line",true);this.circle.attr("r",5)};i.prototype.mousemove=function(t,r){var l=this.renderer.xScale.invert(t);var n=this.renderer.dataset.data;var s=a.OSUtils.sortedIndex(l,n,this.renderer.xAccessor);s=s>0?s-1:0;var j=n[s];var q=this.renderer.xAccessor(j);var p=this.renderer.yAccessor(j);var o=this.renderer.xScale.scale(q);var m=this.renderer.yScale.scale(p);this.circle.attr("cx",o).attr("cy",m);var k=this.renderer.availableWidth;var u=this.renderer.availableHeight;this.xLine.attr("d","M 0 "+m+" L "+k+" "+m);this.yLine.attr("d","M "+o+" 0 L "+o+" "+u)};return i})(b);a.CrosshairsInteraction=e})(Plottable||(Plottable={}));var Plottable;(function(a){var d=(function(e){__extends(f,e);function f(h,g){if(typeof h==="undefined"){h=""}if(typeof g==="undefined"){g="horizontal"}e.call(this);this.classed(f.CSS_CLASS,true);this.setText(h);if(g==="horizontal"||g==="vertical-left"||g==="vertical-right"){this.orientation=g;if(g==="horizontal"){this.fixedWidthVal=false}else{this.fixedHeightVal=false}}else{throw new Error(g+" is not a valid orientation for LabelComponent")}this.xAlign("CENTER").yAlign("CENTER")}f.prototype.anchor=function(g){e.prototype.anchor.call(this,g);this.textElement=this.content.append("text");this.setText(this.text);return this};f.prototype.setText=function(g){this.text=g;if(this.element!=null){this.textElement.text(g);this.measureAndSetTextSize()}return this};f.prototype.measureAndSetTextSize=function(){var g=a.Utils.getBBox(this.textElement);this.textHeight=g.height;this.textLength=g.width;if(this.orientation==="horizontal"){this.rowMinimum(this.textHeight)}else{this.colMinimum(this.textHeight)}};f.prototype.truncateTextAndRemeasure=function(g){var h=a.Utils.truncateTextToLength(this.text,g,this.textElement);this.textElement.text(h);this.measureAndSetTextSize()};f.prototype.computeLayout=function(g,l,h,k){e.prototype.computeLayout.call(this,g,l,h,k);this.textElement.attr("dy",0);var j=a.Utils.getBBox(this.textElement);this.textElement.attr("dy",-j.y);var m=0;var i=0;if(this.orientation==="horizontal"){this.truncateTextAndRemeasure(this.availableWidth);m=(this.availableWidth-this.textLength)*this.xAlignProportion}else{this.truncateTextAndRemeasure(this.availableHeight);m=(this.availableHeight-this.textLength)*this.yAlignProportion;if(this.orientation==="vertical-right"){this.textElement.attr("transform","rotate(90)");i=-this.textHeight}else{this.textElement.attr("transform","rotate(-90)");m=-m-this.textLength}}this.textElement.attr("x",m);this.textElement.attr("y",i);return this};f.CSS_CLASS="label";return f})(a.Component);a.Label=d;var c=(function(f){__extends(e,f);function e(h,g){f.call(this,h,g);this.classed(e.CSS_CLASS,true)}e.CSS_CLASS="title-label";return e})(d);a.TitleLabel=c;var b=(function(f){__extends(e,f);function e(h,g){f.call(this,h,g);this.classed(e.CSS_CLASS,true)}e.CSS_CLASS="axis-label";return e})(d);a.AxisLabel=b})(Plottable||(Plottable={}));var Plottable;(function(a){var d=(function(g){__extends(h,g);function h(i){if(typeof i==="undefined"){i={seriesName:"",data:[]}}g.call(this);this.clipPathEnabled=true;this.fixedWidthVal=false;this.fixedHeightVal=false;this.dataset=i;this.classed(h.CSS_CLASS,true)}h.prototype.data=function(i){this.renderArea.classed(this.dataset.seriesName,false);this.dataset=i;this.renderArea.classed(i.seriesName,true);return this};h.prototype.anchor=function(i){g.prototype.anchor.call(this,i);this.renderArea=this.content.append("g").classed("render-area",true).classed(this.dataset.seriesName,true);return this};h.CSS_CLASS="renderer";return h})(a.Component);a.Renderer=d;var c=(function(g){__extends(h,g);function h(l,q,k,j,n){var o=this;g.call(this,l);this.classed(h.CSS_CLASS);this.xAccessor=(j!=null)?j:h.defaultXAccessor;this.yAccessor=(n!=null)?n:h.defaultYAccessor;this.xScale=q;this.yScale=k;var m=l.data;var p=d3.extent(m,this.xAccessor);this.xScale.widenDomain(p);var i=d3.extent(m,this.yAccessor);this.yScale.widenDomain(i);this.xScale.registerListener(function(){return o.rescale()});this.yScale.registerListener(function(){return o.rescale()})}h.prototype.computeLayout=function(i,l,j,k){g.prototype.computeLayout.call(this,i,l,j,k);this.xScale.range([0,this.availableWidth]);this.yScale.range([this.availableHeight,0]);return this};h.prototype.invertXYSelectionArea=function(l){var k=this.xScale.invert(l.xMin);var n=this.xScale.invert(l.xMax);var i=this.yScale.invert(l.yMin);var m=this.yScale.invert(l.yMax);var j={xMin:k,xMax:n,yMin:i,yMax:m};return j};h.prototype.getSelectionFromArea=function(i){var k=this;var j=function(m){var l=k.xAccessor(m);var n=k.yAccessor(m);return a.Utils.inRange(l,i.xMin,i.xMax)&&a.Utils.inRange(n,i.yMin,i.yMax)};return this.dataSelection.filter(j)};h.prototype.getDataIndicesFromArea=function(i){var l=this;var k=function(n){var m=l.xAccessor(n);var o=l.yAccessor(n);return a.Utils.inRange(m,i.xMin,i.xMax)&&a.Utils.inRange(o,i.yMin,i.yMax)};var j=[];this.dataset.data.forEach(function(n,m){if(k(n)){j.push(m)}});return j};h.prototype.rescale=function(){if(this.element!=null){this.render()}};h.CSS_CLASS="xy-renderer";h.defaultXAccessor=function(i){return i.x};h.defaultYAccessor=function(i){return i.y};return h})(d);a.XYRenderer=c;var f=(function(g){__extends(h,g);function h(m,l,j,k,i){g.call(this,m,l,j,k,i);this.classed(h.CSS_CLASS,true)}h.prototype.anchor=function(i){g.prototype.anchor.call(this,i);this.path=this.renderArea.append("path");return this};h.prototype.render=function(){var i=this;g.prototype.render.call(this);this.line=d3.svg.line().x(function(j){return i.xScale.scale(i.xAccessor(j))}).y(function(j){return i.yScale.scale(i.yAccessor(j))});this.dataSelection=this.path.classed("line",true).classed(this.dataset.seriesName,true).datum(this.dataset.data);this.path.attr("d",this.line);return this};h.CSS_CLASS="line-renderer";return h})(c);a.LineRenderer=f;var b=(function(h){__extends(g,h);function g(n,m,k,l,j,i){if(typeof i==="undefined"){i=3}h.call(this,n,m,k,l,j);this.classed(g.CSS_CLASS,true);this.size=i}g.prototype.render=function(){var i=this;h.prototype.render.call(this);this.dataSelection=this.renderArea.selectAll("circle").data(this.dataset.data);this.dataSelection.enter().append("circle");this.dataSelection.attr("cx",function(j){return i.xScale.scale(i.xAccessor(j))}).attr("cy",function(j){return i.yScale.scale(i.yAccessor(j))}).attr("r",this.size);this.dataSelection.exit().remove();return this};g.CSS_CLASS="circle-renderer";return g})(c);a.CircleRenderer=b;var e=(function(g){__extends(h,g);function h(m,r,k,j,q,n){g.call(this,m,r,k,j,n);this.barPaddingPx=1;this.classed(h.CSS_CLASS,true);var i=this.yScale.domain();if(!a.Utils.inRange(0,i[0],i[1])){var l=0;var o=i[1];this.yScale.widenDomain([l,o])}this.x2Accessor=(q!=null)?q:h.defaultX2Accessor;var p=d3.extent(m.data,this.x2Accessor);this.xScale.widenDomain(p)}h.prototype.render=function(){var k=this;g.prototype.render.call(this);var j=this.yScale.range();var i=Math.max(j[0],j[1]);this.dataSelection=this.renderArea.selectAll("rect").data(this.dataset.data);this.dataSelection.enter().append("rect");this.dataSelection.attr("x",function(l){return k.xScale.scale(k.xAccessor(l))+k.barPaddingPx}).attr("y",function(l){return k.yScale.scale(k.yAccessor(l))}).attr("width",function(l){return(k.xScale.scale(k.x2Accessor(l))-k.xScale.scale(k.xAccessor(l))-2*k.barPaddingPx)}).attr("height",function(l){return i-k.yScale.scale(k.yAccessor(l))});this.dataSelection.exit().remove();return this};h.CSS_CLASS="bar-renderer";h.defaultX2Accessor=function(i){return i.x2};return h})(c);a.BarRenderer=e})(Plottable||(Plottable={}));var Plottable;(function(a){var b=(function(d){__extends(c,d);function c(f){if(typeof f==="undefined"){f=[]}d.call(this);this.rowPadding=0;this.colPadding=0;this.classed(c.CSS_CLASS,true);var e=function(g){return g==null?new a.Component():g};f=f.map(function(g){return g.map(e)});this.rows=f;this.rowWeights=this.rows.map(function(){return null});this.colWeights=d3.transpose(this.rows).map(function(){return null})}c.prototype.addComponent=function(h,g,f){if(this.element!=null){throw new Error("addComponent cannot be called after anchoring (for the moment)")}this.padTableToSize(h+1,g+1);var e=this.rows[h][g];if(e.constructor.name!=="Component"){throw new Error("addComponent cannot be called on a cell where a component already exists (for the moment)")}this.rows[h][g]=f;return this};c.prototype.padTableToSize=function(g,h){for(var f=0;f<g;f++){if(this.rows[f]===undefined){this.rows[f]=[];this.rowWeights[f]=null}for(var e=0;e<h;e++){if(this.rows[f][e]===undefined){this.rows[f][e]=new a.Component()}}}for(e=0;e<h;e++){if(this.colWeights[e]===undefined){this.colWeights[e]=null}}};c.prototype.anchor=function(e){var f=this;d.prototype.anchor.call(this,e);this.rows.forEach(function(g,h){g.forEach(function(j,i){j.anchor(f.content.append("g"))})});return this};c.prototype.computeLayout=function(k,i,p,g){var j=this;d.prototype.computeLayout.call(this,k,i,p,g);var h=this.availableWidth-this.colMinimum();var s=this.availableHeight-this.rowMinimum();if(h<0||s<0){throw new Error("Insufficient Space")}var o=d3.transpose(this.rows);var e=c.calcComponentWeights(this.rowWeights,this.rows,function(u){return u.isFixedHeight()});var n=c.calcComponentWeights(this.colWeights,o,function(u){return u.isFixedWidth()});var t=c.calcProportionalSpace(e,s);var r=c.calcProportionalSpace(n,h);var l=function(u){return u[0]+u[1]};var m=d3.zip(t,this.rowMinimums).map(l);var q=d3.zip(r,this.colMinimums).map(l);var f=0;this.rows.forEach(function(v,w){var u=0;v.forEach(function(y,x){y.computeLayout(u,f,q[x],m[w]);u+=q[x]+j.colPadding});f+=m[w]+j.rowPadding});return this};c.calcComponentWeights=function(e,g,f){return e.map(function(j,k){if(j!=null){return j}var h=g[k].map(f);var l=h.reduce(function(m,i){return m&&i});return l?0:1})};c.calcProportionalSpace=function(g,h){var f=d3.sum(g);if(f===0){var e=g.length;return g.map(function(i){return h/e})}else{return g.map(function(i){return h*i/f})}};c.prototype.render=function(){this.rows.forEach(function(e,f){e.forEach(function(h,g){h.render()})});return this};c.prototype.padding=function(e,f){this.rowPadding=e;this.colPadding=f;return this};c.prototype.rowWeight=function(e,f){this.rowWeights[e]=f;return this};c.prototype.colWeight=function(e,f){this.colWeights[e]=f;return this};c.prototype.rowMinimum=function(e){if(e!=null){throw new Error("Row minimum cannot be directly set on Table")}else{this.rowMinimums=this.rows.map(function(f){return d3.max(f,function(g){return g.rowMinimum()})});return d3.sum(this.rowMinimums)+this.rowPadding*(this.rows.length-1)}};c.prototype.colMinimum=function(e){if(e!=null){throw new Error("Col minimum cannot be directly set on Table")}else{var f=d3.transpose(this.rows);this.colMinimums=f.map(function(g){return d3.max(g,function(h){return h.colMinimum()})});return d3.sum(this.colMinimums)+this.colPadding*(f.length-1)}};c.fixedSpace=function(f,g){var e=function(i){return i.reduce(function(k,j){return k&&j})};var h=function(i){return e(i.map(g))};return e(f.map(h))};c.prototype.isFixedWidth=function(){var e=d3.transpose(this.rows);return c.fixedSpace(e,function(f){return f.isFixedWidth()})};c.prototype.isFixedHeight=function(){return c.fixedSpace(this.rows,function(e){return e.isFixedHeight()})};c.CSS_CLASS="table";return c})(a.Component);a.Table=b})(Plottable||(Plottable={}));var Plottable;(function(a){var b=(function(){function c(d){var e=this;this.rescaleInProgress=false;this.scales=d;this.scales.forEach(function(f){return f.registerListener(function(g){return e.rescale(g)})})}c.prototype.rescale=function(e){if(this.rescaleInProgress){return}this.rescaleInProgress=true;var d=e.domain();this.scales.forEach(function(f){return f.domain(d)});this.rescaleInProgress=false};return c})();a.ScaleDomainCoordinator=b})(Plottable||(Plottable={}));var Plottable;(function(a){var b=(function(d){__extends(c,d);function c(e){d.call(this);this.classed(c.CSS_CLASS,true);this.colMinimum(120);this.colorScale=e;this.xAlign("RIGHT").yAlign("TOP");this.xOffset(5).yOffset(5)}c.prototype.scale=function(e){this.colorScale=e;return this};c.prototype.rowMinimum=function(e){if(e!=null){throw new Error("Row minimum cannot be directly set on Legend")}else{var f=this.measureTextHeight();return this.colorScale.domain().length*f}};c.prototype.measureTextHeight=function(){var f=this.content.append("g").classed(c.SUBELEMENT_CLASS,true);var e=a.Utils.getTextHeight(f.append("text"));f.remove();return e};c.prototype.render=function(){d.prototype.render.call(this);var h=this.colorScale.domain();var i=this.measureTextHeight();var g=this.colMinimum()-i-c.MARGIN;this.content.selectAll("."+c.SUBELEMENT_CLASS).remove();var f=this.content.selectAll("."+c.SUBELEMENT_CLASS).data(h);var e=f.enter().append("g").classed(c.SUBELEMENT_CLASS,true).attr("transform",function(k,j){return"translate(0,"+j*i+")"});e.append("rect").attr("x",c.MARGIN).attr("y",c.MARGIN).attr("width",i-c.MARGIN*2).attr("height",i-c.MARGIN*2);e.append("text").attr("x",i).attr("y",c.MARGIN+i/2);f.selectAll("rect").attr("fill",this.colorScale.scale);f.selectAll("text").text(function(k,j){return a.Utils.truncateTextToLength(k,g,d3.select(this))});return this};c.CSS_CLASS="legend";c.SUBELEMENT_CLASS="legend-row";c.MARGIN=5;return c})(a.Component);a.Legend=b})(Plottable||(Plottable={}));var Plottable;(function(a){var c=(function(f){__extends(e,f);function e(i,g,h){var j=this;f.call(this);this.scale=i;this.classed(e.CSS_CLASS,true);this.clipPathEnabled=true;this.orientation=g;this.isXAligned=this.orientation==="bottom"||this.orientation==="top";this.d3axis=d3.svg.axis().scale(this.scale.scale).orient(this.orientation);if(h==null){this.formatter=d3.format(".3s")}else{this.formatter=h}this.d3axis.tickFormat(this.formatter);this.cachedScale=1;this.cachedTranslate=0;this.scale.registerListener(function(){return j.rescale()})}e.prototype.anchor=function(g){f.prototype.anchor.call(this,g);this.axisElement=this.content.append("g").classed("axis",true);return this};e.prototype.transformString=function(i,h){var g=this.isXAligned?""+i:"0,"+i;return"translate("+g+")"};e.prototype.render=function(){if(this.orientation==="left"){this.axisElement.attr("transform","translate("+e.yWidth+", 0)")}if(this.orientation==="top"){this.axisElement.attr("transform","translate(0,"+e.xHeight+")")}var k=this.scale.domain();var s=Math.abs(k[1]-k[0]);var l=+d3.min(k);var n=+d3.max(k);var m;var r=k[0]<k[1];if(typeof(k[0])==="number"){m=r?[l-s,n+s]:[n+s,l-s]}else{m=r?[new Date(l-s),new Date(n+s)]:[new Date(n+s),new Date(l-s)]}if(this.scale.ticks!=null){var i=this.scale;var j=10;var o=i.ticks(j);var p=i.domain();var g=p[1]-p[0];var h=function(t){return Math.abs(t/g/j)<0.0001?0:t};o=o.map(h);this.d3axis.tickValues(o)}this.axisElement.call(this.d3axis);var q=this.axisElement.node().getBBox();if(q.height>this.availableHeight||q.width>this.availableWidth){this.axisElement.classed("error",true)}return this};e.prototype.rescale=function(){return(this.element!=null)?this.render():null};e.CSS_CLASS="axis";e.yWidth=50;e.xHeight=30;return e})(a.Component);a.Axis=c;var b=(function(f){__extends(e,f);function e(i,g,h){if(typeof h==="undefined"){h=null}f.call(this,i,g,h);f.prototype.rowMinimum.call(this,c.xHeight);this.fixedWidthVal=false}return e})(c);a.XAxis=b;var d=(function(e){__extends(f,e);function f(i,g,h){if(typeof h==="undefined"){h=null}e.call(this,i,g,h);e.prototype.colMinimum.call(this,c.yWidth);this.fixedHeightVal=false}return f})(c);a.YAxis=d})(Plottable||(Plottable={}));var Plottable;(function(a){var b=(function(c){__extends(d,c);function d(e){if(typeof e==="undefined"){e=[]}c.call(this);this.components=e}d.prototype.addComponent=function(e){this.components.push(e);if(this.element!=null){e.anchor(this.content.append("g"))}return this};d.prototype.anchor=function(e){var f=this;c.prototype.anchor.call(this,e);this.components.forEach(function(g){return g.anchor(f.content.append("g"))});return this};d.prototype.computeLayout=function(h,e,f,g){var i=this;c.prototype.computeLayout.call(this,h,e,f,g);this.components.forEach(function(j){j.computeLayout(i.xOrigin,i.yOrigin,i.availableWidth,i.availableHeight)});return this};d.prototype.render=function(){c.prototype.render.call(this);this.components.forEach(function(e){return e.render()});return this};d.prototype.isFixedWidth=function(){var e=this.components.map(function(f){return f.isFixedWidth()});return e.reduce(function(g,f){return g&&f})};d.prototype.isFixedHeight=function(){var e=this.components.map(function(f){return f.isFixedHeight()});return e.reduce(function(g,f){return g&&f})};return d})(a.Component);a.ComponentGroup=b})(Plottable||(Plottable={}));