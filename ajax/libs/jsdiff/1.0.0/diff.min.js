var JsDiff=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function n(e){for(var n=[],t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n}function t(e){var n=e;return n=n.replace(/&/g,"&amp;"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),n=n.replace(/"/g,"&quot;")}var o=function(e){this.ignoreWhitespace=e};o.prototype={diff:function(n,t){if(t==n)return[{value:t}];if(!t)return[{value:n,removed:!0}];if(!n)return[{value:t,added:!0}];t=this.tokenize(t),n=this.tokenize(n);var o=t.length,r=n.length,i=o+r,s=[{newPos:-1,components:[]}],u=this.extractCommon(s[0],t,n,0);if(s[0].newPos+1>=o&&u+1>=r)return s[0].components;for(var a=1;i>=a;a++)for(var f=-1*a;a>=f;f+=2){var p,l=s[f-1],h=s[f+1];u=(h?h.newPos:0)-f,l&&(s[f-1]=void 0);var d=l&&l.newPos+1<o,v=h&&u>=0&&r>u;if(d||v){!d||v&&l.newPos<h.newPos?(p=e(h),this.pushComponent(p.components,n[u],void 0,!0)):(p=e(l),p.newPos++,this.pushComponent(p.components,t[p.newPos],!0,void 0));var u=this.extractCommon(p,t,n,f);if(p.newPos+1>=o&&u+1>=r)return p.components;s[f]=p}else s[f]=void 0}},pushComponent:function(e,n,t,o){var r=e[e.length-1];r&&r.added===t&&r.removed===o?e[e.length-1]={value:this.join(r.value,n),added:t,removed:o}:e.push({value:n,added:t,removed:o})},extractCommon:function(e,n,t,o){for(var r=n.length,i=t.length,s=e.newPos,u=s-o;r>s+1&&i>u+1&&this.equals(n[s+1],t[u+1]);)s++,u++,this.pushComponent(e.components,n[s],void 0,void 0);return e.newPos=s,u},equals:function(e,n){var t=/\S/;return!this.ignoreWhitespace||t.test(e)||t.test(n)?e==n:!0},join:function(e,n){return e+n},tokenize:function(e){return e}};var r=new o,i=new o(!0);i.tokenize=function(e){return n(e.split(/(\s+|\b)/g))};var s=new o(!0);s.tokenize=function(e){return n(e.split(/([{}:;,]|\s+)/g))};var u=new o;return u.tokenize=function(e){for(var n=e.split(/\n/g),t=[],o=0;o<n.length-1;o++)t.push(n[o]+"\n");return n.length&&t.push(n[n.length-1]),t},{diffChars:function(e,n){return r.diff(e,n)},diffWords:function(e,n){return i.diff(e,n)},diffLines:function(e,n){return u.diff(e,n)},diffCss:function(e,n){return s.diff(e,n)},createPatch:function(e,n,t,o,r){var i=[];i.push("Index: "+e),i.push("==================================================================="),i.push("--- "+e+"	"+o),i.push("+++ "+e+"	"+r);var s=u.diff(n,t);s.push({value:"",lines:[]});for(var a=0,f=0,p=[],l=1,h=1,d=0;d<s.length;d++){var v=s[d],c=v.lines||v.value.replace(/\n$/,"").split("\n");if(v.lines=c,v.added||v.removed){if(!a){var m=s[d-1];a=l,f=h,m&&(p.push.apply(p,m.lines.slice(-4).map(function(e){return" "+e})),a-=4,f-=4)}p.push.apply(p,c.map(function(e){return(v.added?"+":"-")+e})),v.added?h+=c.length:l+=c.length}else{if(a)if(c.length<=8&&d<s.length-1)p.push.apply(p,c.map(function(e){return" "+e}));else{var g=Math.min(c.length,4);i.push("@@ -"+a+","+(l-a+g)+" +"+f+","+(h-f+g)+" @@"),i.push.apply(i,p),i.push.apply(i,c.slice(0,g).map(function(e){return" "+e})),a=0,f=0,p=[]}l+=c.length,h+=c.length}}return s.length>1&&!/\n$/.test(s[s.length-2].value)&&i.push("\\ No newline at end of file\n"),i.join("\n")},convertChangesToXML:function(e){for(var n=[],o=0;o<e.length;o++){var r=e[o];r.added?n.push("<ins>"):r.removed&&n.push("<del>"),n.push(t(r.value)),r.added?n.push("</ins>"):r.removed&&n.push("</del>")}return n.join("")}}}();"undefined"!=typeof module&&(module.exports=JsDiff);