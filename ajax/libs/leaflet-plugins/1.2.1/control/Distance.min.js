L.Control.Distance=L.Control.extend({options:{position:"topleft",popups:!0},initialize:function(t){L.Util.setOptions(this,t),this._line=new L.Polyline([],{editable:!0}),this._line.on("edit",this._update,this),this._line.on("click",function(t){}),this._active=!1},getLine:function(){return this._line},onAdd:function(t){function i(){this._active?this._calc_disable():this._calc_enable()}var e="leaflet-control-distance",n=this._container=L.DomUtil.create("div",e);this._link=this._createButton("Edit","leaflet-control-distance leaflet-control-distance-edit",n,i,this),this._link_delete=this._createButton("Delete","leaflet-control-distance leaflet-control-distance-delete",n,this._reset,this),this._text=L.DomUtil.create("div","leaflet-control-distance-text",n);return this._map.addLayer(this._line),this._calc_disable(),n},_createButton:function(t,i,e,n,s){var l=L.DomUtil.create("a",i,e);return l.href="#",l.title=t,L.DomEvent.addListener(l,"click",L.DomEvent.stopPropagation).addListener(l,"click",L.DomEvent.preventDefault).addListener(l,"click",n,s),l},onRemove:function(t){this._calc_disable()},_calc_enable:function(){this._map.on("click",this._add_point,this),this._map.getContainer().style.cursor="crosshair",L.DomUtil.addClass(this._link,"leaflet-control-distance-active"),this._container.appendChild(this._link_delete),this._container.appendChild(this._text),this._active=!0,this._line.editing.enable(),this._map.hasLayer(this._line)||this._map.addLayer(this._line),this._update()},_calc_disable:function(){this._map.off("click",this._add_point,this),this._map.getContainer().style.cursor="default",this._container.removeChild(this._link_delete),this._container.removeChild(this._text),L.DomUtil.removeClass(this._link,"leaflet-control-distance-active"),this._active=!1,this._line.editing.disable()},_add_point:function(t){this._line.getLatLngs().length;this._line.addLatLng(t.latlng),this._line.editing.updateMarkers(),this._line.fire("edit",{})},_reset:function(t){this._line.setLatLngs([]),this._line.fire("edit",{}),this._line.redraw(),this._line.editing.updateMarkers()},_update:function(t){this._text.textContent=this._d2txt(this._distance_calc())},_d2txt:function(t){return 2e3>t?t.toFixed(0)+" m":(t/1e3).toFixed(1)+" km"},_distance_calc:function(t){for(var i=this._line.getLatLngs(),e=0,n=null,s=0;s<i.length;s++){if(s&&(e+=n.distanceTo(i[s])),this.options.popups){var l=this._line.editing._markers[s];l&&(l.bindPopup(this._d2txt(e)),l.on("mouseover",l.openPopup,l),l.on("mouseout",l.closePopup,l))}n=i[s]}return e}});
//# sourceMappingURL=./1.2.1/control/Distance.min.js.map