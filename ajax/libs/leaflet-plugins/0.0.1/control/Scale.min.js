L.Control.Scale=L.Control.extend({options:{position:"bottomleft",useCanvas:null,width:100},initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(t){return this._map=t,this._container=L.DomUtil.create("div","leaflet-control-attribution leaflet-control-scale"),this._label=L.DomUtil.create("div",null,this._container),this._label.style.textAlign="right",this.options.useCanvas||0==this.options.useCanvas||(this.options.useCanvas="HTMLCanvasElement"in window),this.options.useCanvas?this._canvas=L.DomUtil.create("canvas","leaflet-canvas-marker",this._container):(this._canvas=L.DomUtil.create("div",null,this._container),this._canvas.style.border="1px solid black",this._canvas.innerHTML="&nbsp;"),t.on("zoomend",this._update,this),this._update(),this._container},onRemove:function(t){t._container.removeChild(this._label),t._container.removeChild(this._canvas),t.off("zoomend",this._reset)},getPosition:function(){return this.options.position},getContainer:function(){return this._container},_update:function(){if(this._map){var t=this.options.width,n=this._map.getBounds(),i=this._map.getPixelBounds(),e=this._deg_length(n.getNorthEast(),n.getNorthWest());e=t*e/(i.max.x-i.min.x);var s=this._round(e);if(s>=1?this._label.innerHTML=s+" km":this._label.innerHTML=Math.round(1e3*s)+" m",t=t*s/e,this.options.useCanvas){this._canvas.width=t+1,this._canvas.height=11;var a=this._canvas.getContext("2d");this._draw(a,t,5)}else this._canvas.style.width=t,this._canvas.style.height=5}},_draw:function(t,n,i){t.beginPath(),t.fillStyle=t.strokeStyle="#000",t.lineWidth=.5,t.strokeRect(0,i,n/2,i),t.fillRect(0,i,n/2,i),t.strokeRect(n/2,i,n/2,i),t.moveTo(0,0),t.lineTo(0,i),t.moveTo(n/2,0),t.lineTo(n/2,i),t.moveTo(n,0),t.lineTo(n,i),t.stroke()},_deg_length:function(t,n){var i=111.12*L.LatLng.RAD_TO_DEG,e=t.lat*L.LatLng.DEG_TO_RAD,s=t.lng*L.LatLng.DEG_TO_RAD,a=n.lat*L.LatLng.DEG_TO_RAD,o=n.lng*L.LatLng.DEG_TO_RAD;return i*Math.acos(Math.sin(e)*Math.sin(a)+Math.cos(e)*Math.cos(a)*Math.cos(o-s))},_round:function(t){for(var n=1;t>n;)n*=10;for(;n>t;)n/=10;for(var i=n;t>i;)i+=n;return i>5*n&&(i=10*n),i}});
//# sourceMappingURL=./0.0.1/control/Scale.min.js.map