(function(){var p,a,g,l,b,n,j,f,m,i,e,k,d,h={}.hasOwnProperty,c=function(t,r){for(var q in r){if(h.call(r,q)){t[q]=r[q]}}function s(){this.constructor=t}s.prototype=r.prototype;t.prototype=new s();t.__super__=r.prototype;return t},o=[].indexOf||function(s){for(var r=0,q=this.length;r<q;r++){if(r in this&&this[r]===s){return r}}return -1};d=Tether.Utils,j=d.extend,g=d.addClass,m=d.removeClass,f=d.hasClass,p=d.Evented;k="ontouchstart" in document.documentElement;b=["click"];if(k){b.push("touchstart")}e=function(t){var s,r,q,u;q=t.split(" "),s=q[0],r=q[1];if(s==="left"||s==="right"){u=[r,s],s=u[0],r=u[1]}return[s,r].join(" ")};a={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"};l={};i=function(q,t){var s,r;r=[];while((s=q.indexOf(t))!==-1){r.push(q.splice(s,1))}return r};n=function(u){var t,r,s,q;if(u==null){u={}}s=function(){return(function(y,w,x){x.prototype=y.prototype;var z=new x,v=y.apply(z,w);return Object(v)===v?v:z})(t,arguments,function(){})};j(s,{createContext:n,drops:[],defaults:{}});r={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:true,constrainToWindow:true,classes:"",remove:false,tetherOptions:{}}};j(s,r,u);j(s.defaults,r.defaults,u.defaults);if(l[q=s.classPrefix]==null){l[q]=[]}s.updateBodyClasses=function(){var y,w,z,x,v;y=false;v=l[s.classPrefix];for(z=0,x=v.length;z<x;z++){w=v[z];if(!(w.isOpened())){continue}y=true;break}if(y){return g(document.body,""+s.classPrefix+"-open")}else{return m(document.body,""+s.classPrefix+"-open")}};t=(function(w){c(v,w);function v(x){this.options=x;this.options=j({},s.defaults,this.options);this.target=this.options.target;if(this.target==null){throw new Error("Drop Error: You must provide a target.")}if(this.options.classes){g(this.target,this.options.classes)}s.drops.push(this);l[s.classPrefix].push(this);this._boundEvents=[];this.setupElements();this.setupEvents();this.setupTether()}v.prototype._on=function(x,z,y){this._boundEvents.push({element:x,event:z,handler:y});return x.addEventListener(z,y)};v.prototype.setupElements=function(){this.drop=document.createElement("div");g(this.drop,s.classPrefix);if(this.options.classes){g(this.drop,this.options.classes)}this.content=document.createElement("div");g(this.content,""+s.classPrefix+"-content");if(typeof this.options.content==="object"){this.content.appendChild(this.options.content)}else{this.content.innerHTML=this.options.content}return this.drop.appendChild(this.content)};v.prototype.setupTether=function(){var y,x;x=this.options.position.split(" ");x[0]=a[x[0]];x=x.join(" ");y=[];if(this.options.constrainToScrollParent){y.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"})}else{y.push({to:"scrollParent"})}if(this.options.constrainToWindow!==false){y.push({to:"window",attachment:"together"})}else{y.push({to:"window"})}u={element:this.drop,target:this.target,attachment:e(x),targetAttachment:e(this.options.position),classPrefix:s.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:false,constraints:y};if(this.options.tetherOptions!==false){return this.tether=new Tether(j({},u,this.options.tetherOptions))}};v.prototype.setupEvents=function(){var G,x,H,z,B,A,E,D,y,F,C=this;if(!this.options.openOn){return}if(this.options.openOn==="always"){setTimeout(this.open.bind(this));return}H=this.options.openOn.split(" ");if(o.call(H,"click")>=0){B=function(I){C.toggle();return I.preventDefault()};x=function(I){if(!C.isOpened()){return}if(I.target===C.drop||C.drop.contains(I.target)){return}if(I.target===C.target||C.target.contains(I.target)){return}return C.close()};for(y=0,F=b.length;y<F;y++){G=b[y];this._on(this.target,G,B);this._on(document,G,x)}}if(o.call(H,"hover")>=0){z=false;D=function(){z=true;return C.open()};E=null;A=function(){z=false;if(E!=null){clearTimeout(E)}return E=setTimeout(function(){if(!z){C.close()}return E=null},50)};this._on(this.target,"mouseover",D);this._on(this.drop,"mouseover",D);this._on(this.target,"mouseout",A);return this._on(this.drop,"mouseout",A)}};v.prototype.isOpened=function(){return f(this.drop,""+s.classPrefix+"-open")};v.prototype.toggle=function(){if(this.isOpened()){return this.close()}else{return this.open()}};v.prototype.open=function(){var x,z,y=this;if(this.isOpened()){return}if(!this.drop.parentNode){document.body.appendChild(this.drop)}if((x=this.tether)!=null){x.enable()}g(this.drop,""+s.classPrefix+"-open");g(this.drop,""+s.classPrefix+"-open-transitionend");setTimeout(function(){return g(y.drop,""+s.classPrefix+"-after-open")});if((z=this.tether)!=null){z.position()}this.trigger("open");return s.updateBodyClasses()};v.prototype.close=function(){var y,x,z=this;if(!this.isOpened()){return}m(this.drop,""+s.classPrefix+"-open");m(this.drop,""+s.classPrefix+"-after-open");this.drop.addEventListener("transitionend",y=function(){if(!f(z.drop,""+s.classPrefix+"-open")){m(z.drop,""+s.classPrefix+"-open-transitionend")}return z.drop.removeEventListener("transitionend",y)});this.trigger("close");if((x=this.tether)!=null){x.disable()}s.updateBodyClasses();if(this.options.remove){return this.remove()}};v.prototype.remove=function(){var x;this.close();return(x=this.drop.parentNode)!=null?x.removeChild(this.drop):void 0};v.prototype.position=function(){var x;if(this.isOpened()){return(x=this.tether)!=null?x.position():void 0}};v.prototype.destroy=function(){var z,B,A,C,y,x,E,D;this.remove();if((x=this.tether)!=null){x.destroy()}E=this._boundEvents;for(C=0,y=E.length;C<y;C++){D=E[C],z=D.element,B=D.event,A=D.handler;z.removeEventListener(B,A)}this._boundEvents=[];this.tether=null;this.drop=null;this.content=null;this.target=null;i(l[s.classPrefix],this);return i(s.drops,this)};return v})(p);return s};window.Drop=n();document.addEventListener("DOMContentLoaded",function(){return Drop.updateBodyClasses()})}).call(this);