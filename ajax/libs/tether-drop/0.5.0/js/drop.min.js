(function(){var o,a,g,k,b,m,i,f,l,e,j,d,h={}.hasOwnProperty,c=function(s,q){for(var p in q){if(h.call(q,p)){s[p]=q[p]}}function r(){this.constructor=s}r.prototype=q.prototype;s.prototype=new r();s.__super__=q.prototype;return s},n=[].indexOf||function(r){for(var q=0,p=this.length;q<p;q++){if(q in this&&this[q]===r){return q}}return -1};d=Tether.Utils,i=d.extend,g=d.addClass,l=d.removeClass,f=d.hasClass,o=d.Evented;j="ontouchstart" in document.documentElement;b=["click"];if(j){b.push("touchstart")}e=function(s){var r,q,p,t;p=s.split(" "),r=p[0],q=p[1];if(r==="left"||r==="right"){t=[q,r],r=t[0],q=t[1]}return[r,q].join(" ")};a={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"};k={};m=function(t){var s,q,r,p;if(t==null){t={}}r=function(){return(function(x,v,w){w.prototype=x.prototype;var y=new w,u=x.apply(y,v);return Object(u)===u?u:y})(s,arguments,function(){})};i(r,{createContext:m,drops:[],defaults:{}});q={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:true,constrainToWindow:true,classes:"",tetherOptions:{}}};i(r,q,t);i(r.defaults,q.defaults,t.defaults);if(k[p=r.classPrefix]==null){k[p]=[]}r.updateBodyClasses=function(){var x,v,y,w,u;x=false;u=k[r.classPrefix];for(y=0,w=u.length;y<w;y++){v=u[y];if(!(v.isOpened())){continue}x=true;break}if(x){return g(document.body,""+r.classPrefix+"-open")}else{return l(document.body,""+r.classPrefix+"-open")}};s=(function(v){c(u,v);function u(w){this.options=w;this.options=i({},r.defaults,this.options);this.target=this.options.target;if(this.target==null){throw new Error("Drop Error: You must provide a target.")}if(this.options.classes){g(this.target,this.options.classes)}r.drops.push(this);k[r.classPrefix].push(this);this.setupElements();this.setupEvents();this.setupTether()}u.prototype.setupElements=function(){this.drop=document.createElement("div");g(this.drop,r.classPrefix);if(this.options.classes){g(this.drop,this.options.classes)}this.content=document.createElement("div");g(this.content,""+r.classPrefix+"-content");if(typeof this.options.content==="object"){this.content.appendChild(this.options.content)}else{this.content.innerHTML=this.options.content}return this.drop.appendChild(this.content)};u.prototype.setupTether=function(){var x,w;w=this.options.position.split(" ");w[0]=a[w[0]];w=w.join(" ");x=[];if(this.options.constrainToScrollParent){x.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"})}else{x.push({to:"scrollParent"})}if(this.options.constrainToWindow!==false){x.push({to:"window",attachment:"together"})}else{x.push({to:"window"})}t={element:this.drop,target:this.target,attachment:e(w),targetAttachment:e(this.options.position),classPrefix:r.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:false,constraints:x};if(this.options.tetherOptions!==false){return this.tether=new Tether(i({},t,this.options.tetherOptions))}};u.prototype.setupEvents=function(){var F,w,G,y,A,z,D,C,x,E,B=this;if(!this.options.openOn){return}G=this.options.openOn.split(" ");if(n.call(G,"click")>=0||n.call(G,"hover")>=0){A=function(H){B.toggle();return H.preventDefault()};w=function(H){if(!B.isOpened()){return}if(H.target===B.drop||B.drop.contains(H.target)){return}if(H.target===B.target||B.target.contains(H.target)){return}return B.close()};for(x=0,E=b.length;x<E;x++){F=b[x];this.target.addEventListener(F,A);document.addEventListener(F,w)}}if(n.call(G,"hover")>=0){y=false;C=function(){y=true;return B.open()};D=null;z=function(){y=false;if(D!=null){clearTimeout(D)}return D=setTimeout(function(){if(!y){B.close()}return D=null},50)};this.target.addEventListener("mouseover",C);this.drop.addEventListener("mouseover",C);this.target.addEventListener("mouseout",z);return this.drop.addEventListener("mouseout",z)}};u.prototype.isOpened=function(){return f(this.drop,""+r.classPrefix+"-open")};u.prototype.toggle=function(){if(this.isOpened()){return this.close()}else{return this.open()}};u.prototype.open=function(){var w,y,x=this;if(!this.drop.parentNode){document.body.appendChild(this.drop)}if((w=this.tether)!=null){w.enable()}g(this.drop,""+r.classPrefix+"-open");g(this.drop,""+r.classPrefix+"-open-transitionend");setTimeout(function(){return g(x.drop,""+r.classPrefix+"-after-open")});if((y=this.tether)!=null){y.position()}this.trigger("open");return r.updateBodyClasses()};u.prototype.close=function(){var w,x=this;l(this.drop,""+r.classPrefix+"-open");l(this.drop,""+r.classPrefix+"-after-open");this.drop.addEventListener("transitionend",function(){if(!f(x.drop,""+r.classPrefix+"-open")){return l(x.drop,""+r.classPrefix+"-open-transitionend")}});this.trigger("close");if((w=this.tether)!=null){w.disable()}return r.updateBodyClasses()};u.prototype.position=function(){var w;if(this.isOpened()){return(w=this.tether)!=null?w.position():void 0}};return u})(o);return r};window.Drop=m();document.addEventListener("DOMContentLoaded",function(){return Drop.updateBodyClasses()})}).call(this);