(function(){var n,c,k,p,g,o,f,r,b,u,l,j,d,t,q,a,h,i,m={}.hasOwnProperty,s=function(y,w){for(var v in w){if(m.call(w,v)){y[v]=w[v]}}function x(){this.constructor=y}x.prototype=w.prototype;y.prototype=new x();y.__super__=w.prototype;return y},e=[].indexOf||function(x){for(var w=0,v=this.length;w<v;w++){if(w in this&&this[w]===x){return w}}return -1};i=Tether.Utils,r=i.extend,k=i.addClass,l=i.removeClass,b=i.hasClass,n=i.Evented;q="ontouchstart" in document.documentElement;g=["click"];if(q){g.push("touchstart")}h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};a="";for(u in h){f=h[u];t=document.createElement("p");if(t.style[u]!==void 0){a=f}}d=function(y){var x,w,v,z;v=y.split(" "),x=v[0],w=v[1];if(x==="left"||x==="right"){z=[w,x],x=z[0],w=z[1]}return[x,w].join(" ")};c={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"};p={};j=function(v,y){var x,w;w=[];while((x=v.indexOf(y))!==-1){w.push(v.splice(x,1))}return w};o=function(z){var y,w,x,v;if(z==null){z={}}x=function(){return(function(D,B,C){C.prototype=D.prototype;var E=new C,A=D.apply(E,B);return Object(A)===A?A:E})(y,arguments,function(){})};r(x,{createContext:o,drops:[],defaults:{}});w={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:true,constrainToWindow:true,classes:"",remove:false,tetherOptions:{}}};r(x,w,z);r(x.defaults,w.defaults,z.defaults);if(p[v=x.classPrefix]==null){p[v]=[]}x.updateBodyClasses=function(){var D,B,E,C,A;D=false;A=p[x.classPrefix];for(E=0,C=A.length;E<C;E++){B=A[E];if(!(B.isOpened())){continue}D=true;break}if(D){return k(document.body,""+x.classPrefix+"-open")}else{return l(document.body,""+x.classPrefix+"-open")}};y=(function(B){s(A,B);function A(C){this.options=C;this.options=r({},x.defaults,this.options);this.target=this.options.target;if(this.target==null){throw new Error("Drop Error: You must provide a target.")}if(this.options.classes){k(this.target,this.options.classes)}x.drops.push(this);p[x.classPrefix].push(this);this._boundEvents=[];this.setupElements();this.setupEvents();this.setupTether()}A.prototype._on=function(C,E,D){this._boundEvents.push({element:C,event:E,handler:D});return C.addEventListener(E,D)};A.prototype.setupElements=function(){var C=this;this.drop=document.createElement("div");k(this.drop,x.classPrefix);if(this.options.classes){k(this.drop,this.options.classes)}this.content=document.createElement("div");k(this.content,""+x.classPrefix+"-content");if(typeof this.options.content==="function"){this.content.innerHTML=this.options.content.call(this,this);this.on("open",function(){return C.content.innerHTML=C.options.content.call(C,C)})}else{if(typeof this.options.content==="object"){this.content.appendChild(this.options.content)}else{this.content.innerHTML=this.options.content}}return this.drop.appendChild(this.content)};A.prototype.setupTether=function(){var D,C;C=this.options.position.split(" ");C[0]=c[C[0]];C=C.join(" ");D=[];if(this.options.constrainToScrollParent){D.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"})}else{D.push({to:"scrollParent"})}if(this.options.constrainToWindow!==false){D.push({to:"window",attachment:"together"})}else{D.push({to:"window"})}z={element:this.drop,target:this.target,attachment:d(C),targetAttachment:d(this.options.position),classPrefix:x.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:false,constraints:D};if(this.options.tetherOptions!==false){return this.tether=new Tether(r({},z,this.options.tetherOptions))}};A.prototype.setupEvents=function(){var L,C,M,E,G,F,J,I,D,K,H=this;if(!this.options.openOn){return}if(this.options.openOn==="always"){setTimeout(this.open.bind(this));return}M=this.options.openOn.split(" ");if(e.call(M,"click")>=0){G=function(N){H.toggle();return N.preventDefault()};C=function(N){if(!H.isOpened()){return}if(N.target===H.drop||H.drop.contains(N.target)){return}if(N.target===H.target||H.target.contains(N.target)){return}return H.close()};for(D=0,K=g.length;D<K;D++){L=g[D];this._on(this.target,L,G);this._on(document,L,C)}}if(e.call(M,"hover")>=0){E=false;I=function(){E=true;return H.open()};J=null;F=function(){E=false;if(J!=null){clearTimeout(J)}return J=setTimeout(function(){if(!E){H.close()}return J=null},50)};this._on(this.target,"mouseover",I);this._on(this.drop,"mouseover",I);this._on(this.target,"mouseout",F);return this._on(this.drop,"mouseout",F)}};A.prototype.isOpened=function(){return b(this.drop,""+x.classPrefix+"-open")};A.prototype.toggle=function(){if(this.isOpened()){return this.close()}else{return this.open()}};A.prototype.open=function(){var C,E,D=this;if(this.isOpened()){return}if(!this.drop.parentNode){document.body.appendChild(this.drop)}if((C=this.tether)!=null){C.enable()}k(this.drop,""+x.classPrefix+"-open");k(this.drop,""+x.classPrefix+"-open-transitionend");setTimeout(function(){return k(D.drop,""+x.classPrefix+"-after-open")});if((E=this.tether)!=null){E.position()}this.trigger("open");return x.updateBodyClasses()};A.prototype.close=function(){var D,C,E=this;if(!this.isOpened()){return}l(this.drop,""+x.classPrefix+"-open");l(this.drop,""+x.classPrefix+"-after-open");this.drop.addEventListener(a,D=function(){if(!b(E.drop,""+x.classPrefix+"-open")){l(E.drop,""+x.classPrefix+"-open-transitionend")}return E.drop.removeEventListener(a,D)});this.trigger("close");if((C=this.tether)!=null){C.disable()}x.updateBodyClasses();if(this.options.remove){return this.remove()}};A.prototype.remove=function(){var C;this.close();return(C=this.drop.parentNode)!=null?C.removeChild(this.drop):void 0};A.prototype.position=function(){var C;if(this.isOpened()){return(C=this.tether)!=null?C.position():void 0}};A.prototype.destroy=function(){var E,G,F,H,D,C,J,I;this.remove();if((C=this.tether)!=null){C.destroy()}J=this._boundEvents;for(H=0,D=J.length;H<D;H++){I=J[H],E=I.element,G=I.event,F=I.handler;E.removeEventListener(G,F)}this._boundEvents=[];this.tether=null;this.drop=null;this.content=null;this.target=null;j(p[x.classPrefix],this);return j(x.drops,this)};return A})(n);return x};window.Drop=o();document.addEventListener("DOMContentLoaded",function(){return Drop.updateBodyClasses()})}).call(this);