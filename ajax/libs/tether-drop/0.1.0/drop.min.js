(function(){var f,h,b,a,d,e,g,c=[].indexOf||function(m){for(var k=0,j=this.length;k<j;k++){if(k in this&&this[k]===m){return k}}return -1};f=jQuery;g="ontouchstart" in document.documentElement;a=g?"touchstart":"click";e=function(m){var l,j,k,i;k=m.split(" "),l=k[0],j=k[1];if(l==="left"||l==="right"){i=[j,l],l=i[0],j=i[1]}return[l,j].join(" ")};h={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"};b=[];d=function(l){var k,i,j;j=function(){return(function(p,n,o){o.prototype=p.prototype;var q=new o,m=p.apply(q,n);return Object(m)===m?m:q})(k,arguments,function(){})};f.extend(j,{createContext:d,drops:[]});i={defaults:{attach:"bottom left",openOn:"click",constrainToScrollParent:true,constrainToWindow:true,className:""}};f.extend(true,j,i,l);f(document).on("dropopen.drop, dropclose.drop",function(){return j.updateBodyClasses()});j.updateBodyClasses=function(){var o,m,p,n;o=false;for(p=0,n=b.length;p<n;p++){m=b[p];if(!(m.isOpened())){continue}o=true;break}if(o){return f("body").addClass("drop-open")}else{return f("body").removeClass("drop-open")}};k=(function(){function m(n){this.options=n;this.options=f.extend({},j.defaults,this.options);this.$target=f(this.options.target);j.drops.push(this);b.push(this);this.setupElements();this.setupEvents();this.setupTether()}m.prototype.setupElements=function(){this.$drop=f("<div>");this.$drop.addClass("drop");this.$drop.addClass(this.options.className);this.$dropContent=f("<div>");this.$dropContent.addClass("drop-content");this.$dropContent.append(this.options.content);return this.$drop.append(this.$dropContent)};m.prototype.setupTether=function(){var o,n;n=this.options.attach.split(" ");n[0]=h[n[0]];n=n.join(" ");o=[];if(this.options.constrainToScrollParent){o.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"})}if(this.options.constrainToWindow!==false){o.push({to:"window",pin:true,attachment:"together"})}o.push({to:"scrollParent"});return this.tether=new Tether({element:this.$drop[0],target:this.$target[0],attachment:e(n),targetAttachment:e(this.options.attach),offset:"0 0",targetOffset:"0 0",enabled:false,constraints:o})};m.prototype.setupEvents=function(){var n,o=this;if(!this.options.openOn){return}n=this.options.openOn.split(" ");if(c.call(n,"click")>=0){this.$target.bind(a,function(){return o.toggle()});f(document).bind(a,function(p){if(!o.isOpened()){return}if(f(p.target).is(o.$drop[0])||o.$drop.find(p.target).length){return}if(f(p.target).is(o.$target[0])||o.$target.find(p.target).length){return}return o.close()})}if(c.call(n,"hover")>=0){this.$target.bind("mouseover",function(){return o.open()});return this.$target.bind("mouseout",function(){return o.close()})}};m.prototype.isOpened=function(){return this.$drop.hasClass("drop-open")};m.prototype.toggle=function(){if(this.isOpened()){return this.close()}else{return this.open()}};m.prototype.open=function(){if(!this.$drop.parent().length){f("body").append(this.$drop)}this.$target.addClass("drop-open");this.$drop.addClass("drop-open");this.$drop.trigger({type:"dropopen",drop:this});return this.tether.enable()};m.prototype.close=function(){this.$target.removeClass("drop-open");this.$drop.removeClass("drop-open");this.$drop.trigger({type:"dropclose",drop:this});return this.tether.disable()};return m})();return j};window.Drop=d();f(function(){return Drop.updateBodyClasses()})}).call(this);