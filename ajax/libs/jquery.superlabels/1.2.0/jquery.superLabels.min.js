/*
 *	Title: jQuery Super Labels Plugin - Give your forms a helping of awesome!
 *	Author: RÃ©my Bach
 *	Version: 1.1.3
 *	License: http://remybach.mit-license.org
 *	Url: http://github.com/remybach/jQuery.superLabels
 *	Description:
 *	This plugin allows you to display your form labels on top of your form fields, saving you space on your page.
 */
(function(e){var t={autoCharLimit:false,baseZindex:0,debug:false,duration:500,easingIn:e.easing.def?"easeInOutCubic":false,easingOut:e.easing.def?"easeInOutCubic":false,fadeDuration:250,labelLeft:0,labelTop:0,noAnimate:false,opacity:.5,slide:true,wrapSelector:false};var n=["text","search","url","tel","email","password","number"];var r=["input","textarea","select"];e.fn.superLabels=function(i){var s=[];if(this.length===0)return false;if(i&&i.labelLeft&&isNaN(i.labelLeft))i.labelLeft=Number(i.labelLeft.replace(/\D+/,""));if(i&&i.labelTop&&isNaN(i.labelTop))i.labelTop=Number(i.labelTop.replace(/\D+/,""));e.extend(t,i||{});if(this.length===1&&/form/i.test(this[0].tagName)){s=e(r.join(","),this)}else if(this.length>1){this.each(function(){if(/form/i.test(this.tagName)){e.merge(s,e(r.join(","),this))}else{s.push(this)}})}else{s=this}return e(s).each(function(){var t=e(this);if((t[0].tagName.toLowerCase()==="input"&&e.inArray(t.attr("type"),n))===-1&&e.inArray(t[0].tagName.toLowerCase(),r)!==-1){return true}var i=_getLabel(this);var s=t.attr("placeholder");if(s){if(i.length===0){var o='<label for="'+(t.attr("id")||t.attr("name"))+'">'+s+"</label>";o+="</label>";o=e(o);i=o;t.before(i)}else{i.attr("title",s)}t.removeAttr("placeholder")}if(i.length===0){return true}_prepLabel(t,i);if(!this.tagName.match(/select/i)){t.focus(_focus);t.blur(_blur);t.change(_blur);t.bind("input",_keyup);t.bind("propertychange",_blur);t.keyup(_keyup);i.click(function(){t.focus()})}})};_getLabel=function(n){var r=e(n).siblings("label");if(r.length===0){if(t.wrapSelector){r=e(n).parents(t.wrapSelector).find("label")}else{_for=n.id||n.name;r=e('[for="'+_for+'"]')}}return r};_prepLabel=function(n,r){var i,s=n.data("slCharLimit"),o=0;if(n[0].tagName.match(/select/i)){var u=n.find("[selected]").length===0?" selected":"";n.prepend('<option value="" disabled'+u+' rel="label">'+r.html()+"</option>");r.css("display","none")}else{if(s==="auto"||t.autoCharLimit&&isNaN(s)){_approximateChars(n,r)}if(_noVal(n)){o=1}else if(_withinCharLimit(n)){o=t._opacity}n.css({zIndex:t.baseZindex+1}).addClass("sl_field");r.css({left:_noVal(n)?t.labelLeft:e(n).width()-r.width(),opacity:o,position:"absolute",top:t.labelTop,zIndex:t.baseZindex+2}).addClass("sl_label")}};_focus=function(){if(_noVal(this)){var n=t.duration;var r=_getLabel(this);var i={opacity:0};if(t.noAnimate){r.hide();return false}if(t.slide){i.left=e(this).width()-r.width();i.opacity=t.opacity}else{n=t.fadeDuration}r.stop(true,false).animate(i,n,t.easingOut)}};_blur=function(){if(_noVal(this)){var e=t.duration;var n=_getLabel(this);var r={opacity:1};if(t.noAnimate){n.show();return false}if(t.slide){r.left=t.labelLeft}else{e=t.fadeDuration}n.stop(true,false).animate(r,e,t.easingOut)}else{_keyup.apply(this)}};_keyup=function(){if(t.noAnimate)return false;var e=_getLabel(this);var n=0;if(_noVal(this)&&e.css("opacity")>0||!_noVal(this)&&e.css("opacity")===0){return false}if(_noVal(this)&&e.css("opacity")!==0||_withinCharLimit(this)){n=t.opacity}e.stop(true,false).animate({opacity:n},t.fadeDuration,t.easingOut)};_noVal=function(t){return e(t).val()===""};_withinCharLimit=function(t){var n=e(t).data("slCharLimit");if(!n||typeof n!=="number"){return false}t=t.length?t[0]:t;return n&&t.value&&t.value.length<=n};_approximateChars=function(t,n){var r,i,s="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";_properties=["font-family","font-size","font-weight","letter-spacing","line-height","text-shadow","text-transform"],_tmp=e("<div>"+s+"</div>");e.each(_properties,function(e,n){_tmp.css(n,t.css(n))});_tmp.css({position:"absolute",visibility:"hidden"});e("body").append(_tmp);i=Math.round(_tmp.width()/s.length);_tmp.remove();r=t.width()-n.width();t.data("slCharLimit",Math.floor(r/i))}})(jQuery)