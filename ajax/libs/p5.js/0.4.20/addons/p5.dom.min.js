/*! p5.dom.js v0.2.6 November 24, 2015 *//**
 * <p>The web is much more than just canvas and p5.dom makes it easy to interact
 * with other HTML5 objects, including text, hyperlink, image, input, video,
 * audio, and webcam.</p>
 * <p>There is a set of creation methods, DOM manipulation methods, and
 * an extended p5.Element that supports a range of HTML elements. See the
 * <a href="https://github.com/processing/p5.js/wiki/Beyond-the-canvas">
 * beyond the canvas tutorial</a> for a full overview of how this addon works.
 *
 * <p>Methods and properties shown in black are part of the p5.js core, items in
 * blue are part of the p5.dom library. You will need to include an extra file
 * in order to access the blue functions. See the
 * <a href="http://p5js.org/libraries/#using-a-library">using a library</a>
 * section for information on how to include this library. p5.dom comes with
 * <a href="http://p5js.org/download">p5 complete</a> or you can download the single file
 * <a href="https://raw.githubusercontent.com/lmccart/p5.js/master/lib/addons/p5.dom.js">
 * here</a>.</p>
 * <p>See <a href="https://github.com/processing/p5.js/wiki/Beyond-the-canvas">tutorial: beyond the canvas</a>
 * for more info on how to use this libary.</a>
 *
 * @module p5.dom
 * @submodule p5.dom
 * @for p5.dom
 * @main
 */(function(e,t){typeof define=="function"&&define.amd?define("p5.dom",["p5"],function(e){t(e)}):typeof exports=="object"?t(require("../p5")):t(e.p5)})(this,function(e){function t(t){var n=document;return typeof t=="string"&&t[0]==="#"?(t=t.slice(1),n=document.getElementById(t)||document):t instanceof e.Element?n=t.elt:t instanceof HTMLElement&&(n=t),n}function n(t){if(t.tagName==="INPUT"&&t.type==="checkbox"){var n=new e.Element(t);return n.checked=function(){return arguments.length===0?this.elt.checked:(arguments[0]?this.elt.checked=!0:this.elt.checked=!1,this)},n}return t.tagName==="VIDEO"||t.tagName==="AUDIO"?new e.MediaElement(t):new e.Element(t)}function r(t,n,r){var i=n._userNode?n._userNode:document.body;i.appendChild(t);var s=r?new e.MediaElement(t):new e.Element(t);return n._elements.push(s),s}function s(e,t,n,i){var s=document.createElement(t),n=n||"";typeof n=="string"&&(n=[n]);for(var o=0;o<n.length;o++){var u=document.createElement("source");u.src=n[o],s.appendChild(u)}if(typeof i!="undefined"){var a=function(){i(),s.removeEventListener("canplaythrough",a)};s.addEventListener("canplaythrough",a)}var f=r(s,e,!0);return f.loadedmetadata=!1,s.addEventListener("loadedmetadata",function(){f.width=s.videoWidth,f.height=s.videoHeight,f.loadedmetadata=!0}),f}e.prototype.select=function(e,r){var i=null,s=t(r);return e[0]==="."?(e=e.slice(1),i=s.getElementsByClassName(e),i.length?i=i[0]:i=null):e[0]==="#"?(e=e.slice(1),i=s.getElementById(e)):(i=s.getElementsByTagName(e),i.length?i=i[0]:i=null),i?n(i):null},e.prototype.selectAll=function(e,r){var i=[],s,o=t(r);e[0]==="."?(e=e.slice(1),s=o.getElementsByClassName(e)):s=o.getElementsByTagName(e);if(s)for(var u=0;u<s.length;u++){var a=n(s[u]);i.push(a)}return i},e.prototype.removeElements=function(e){for(var t=0;t<this._elements.length;t++)this._elements[t].elt instanceof HTMLCanvasElement||this._elements[t].remove()};var i=["div","p","span"];i.forEach(function(t){var n="create"+t.charAt(0).toUpperCase()+t.slice(1);e.prototype[n]=function(e){var n=document.createElement(t);return n.innerHTML=typeof e===undefined?"":e,r(n,this)}}),e.prototype.createImg=function(){var e=document.createElement("img"),t=arguments,n,i=function(){n.width=e.offsetWidth,n.height=e.offsetHeight,t.length>1&&typeof t[1]=="function"?(n.fn=t[1],n.fn()):t.length>1&&typeof t[2]=="function"&&(n.fn=t[2],n.fn())};return e.src=t[0],t.length>1&&typeof t[1]=="string"&&(e.alt=t[1]),e.onload=function(){i()},n=r(e,this),n},e.prototype.createA=function(e,t,n){var i=document.createElement("a");return i.href=e,i.innerHTML=t,n&&(i.target=n),r(i,this)},e.prototype.createSlider=function(e,t,n,i){var s=document.createElement("input");return s.type="range",s.min=e,s.max=t,i&&(s.step=i),typeof n=="number"&&(s.value=n),r(s,this)},e.prototype.createButton=function(e,t){var n=document.createElement("button");return n.innerHTML=e,n.value=t,t&&(n.value=t),r(n,this)},e.prototype.createCheckbox=function(){var e=document.createElement("input");e.type="checkbox";var t=r(e,this);t.checked=function(){return arguments.length===0?t.elt.checked:(arguments[0]?t.elt.checked=!0:t.elt.checked=!1,t)},this.value=function(e){return t.value=e,this};if(arguments[0]){var n=Math.random().toString(36).slice(2),i=document.createElement("label");e.setAttribute("id",n),i.htmlFor=n,t.value(arguments[0]),i.appendChild(document.createTextNode(arguments[0])),r(i,this)}return arguments[1]&&(e.checked=!0),t},e.prototype.createSelect=function(e){var t=document.createElement("select");e&&t.setAttribute("multiple","true");var n=r(t,this);return n.option=function(e,n){var r=document.createElement("option");r.innerHTML=e,arguments.length>1?r.value=n:r.value=e,t.appendChild(r)},n.selected=function(t){var n=[];if(arguments.length>0){for(var r=0;r<this.elt.length;r++)t.toString()===this.elt[r].value&&(this.elt.selectedIndex=r);return this}if(e){for(var r=0;r<this.elt.selectedOptions.length;r++)n.push(this.elt.selectedOptions[r].value);return n}return this.elt.value},n},e.prototype.createRadio=function(){var e=document.querySelectorAll("input[type=radio]"),t=0;if(e.length>1){console.log(e,e[0].name);var n=e.length,i=e[0].name,s=e[1].name;t=1;for(var o=1;o<n;o++)s=e[o].name,i!=s&&t++,i=s}else e.length==1&&(t=1);var u=document.createElement("div"),a=r(u,this),f=-1;return a.option=function(e,n){var r=document.createElement("input");r.type="radio",r.innerHTML=e,arguments.length>1?r.value=n:r.value=e,r.setAttribute("name","defaultradio"+t),u.appendChild(r);if(e){f++;var i=Math.random().toString(36).slice(2),s=document.createElement("label");r.setAttribute("id","defaultradio"+t+"-"+f),s.htmlFor="defaultradio"+t+"-"+f,s.appendChild(document.createTextNode(e)),u.appendChild(s)}return r},a.selected=function(){var e=this.elt.childNodes.length;if(arguments[0]){for(var t=0;t<e;t+=2)this.elt.childNodes[t].value==arguments[0]&&(this.elt.childNodes[t].checked=!0);return this}for(var t=0;t<e;t+=2)if(this.elt.childNodes[t].checked==1)return this.elt.childNodes[t].value},a.value=function(){var e=this.elt.childNodes.length;if(arguments[0]){for(var t=0;t<e;t+=2)this.elt.childNodes[t].value==arguments[0]&&(this.elt.childNodes[t].checked=!0);return this}for(var t=0;t<e;t+=2)if(this.elt.childNodes[t].checked==1)return this.elt.childNodes[t].value;return""},a},e.prototype.createInput=function(e){var t=document.createElement("input");return t.type="text",e&&(t.value=e),r(t,this)},e.prototype.createFileInput=function(t,n){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var i=document.createElement("input");i.type="file",n&&(i.multiple="multiple");function s(n){var r=n.target.files;for(var i=0;i<r.length;i++){var s=r[i],o=new FileReader;function u(n){var r=new e.File(n);return function(e){r.data=e.target.result,t(r)}}o.onload=u(s),s.type.indexOf("text")>-1?o.readAsText(s):o.readAsDataURL(s)}}return i.addEventListener("change",s,!1),r(i,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},e.prototype.createVideo=function(e,t){return s(this,"video",e,t)},e.prototype.createAudio=function(e,t){return s(this,"audio",e,t)},e.prototype.VIDEO="video",e.prototype.AUDIO="audio",navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,e.prototype.createCapture=function(){var t=!0,n=!0,i,s;for(var o=0;o<arguments.length;o++)arguments[o]===e.prototype.VIDEO?n=!1:arguments[o]===e.prototype.AUDIO?t=!1:typeof arguments[o]=="object"?i=arguments[o]:typeof arguments[o]=="function"&&(s=arguments[o]);if(!navigator.getUserMedia)throw"getUserMedia not supported in this browser";var u=document.createElement("video");i||(i={video:t,audio:n}),navigator.getUserMedia(i,function(e){u.src=window.URL.createObjectURL(e),u.onloadedmetadata=function(t){u.play(),s&&s(e)}},function(e){console.log(e)});var a=r(u,this,!0);return a.loadedmetadata=!1,u.addEventListener("loadedmetadata",function(){a.width=u.videoWidth,a.height=u.videoHeight,a.loadedmetadata=!0}),a},e.prototype.createElement=function(e,t){var n=document.createElement(e);return typeof t!="undefined"&&(n.innerHTML=t),r(n,this)},e.Element.prototype.addClass=function(e){return this.elt.className?this.elt.className=this.elt.className+" "+e:this.elt.className=e,this},e.Element.prototype.removeClass=function(e){var t=new RegExp("(?:^|\\s)"+e+"(?!\\S)");return this.elt.className=this.elt.className.replace(t,""),this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,""),this},e.Element.prototype.child=function(t){return t===null?this.elt.childNodes:(typeof t=="string"?(t[0]==="#"&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof e.Element&&(t=t.elt),this.elt.appendChild(t),this)},e.Element.prototype.center=function(e){var t=this.elt.style.display,n=this.elt.style.display==="none",r=this.parent().style.display==="none",i={x:this.elt.offsetLeft,y:this.elt.offsetTop};n&&this.show(),this.elt.style.display="block",this.position(0,0),r&&(this.parent().style.display="block");var s=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),o=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight),u=i.y,a=i.x;return e==="both"||e===undefined?this.position(s/2,o/2):e==="horizontal"?this.position(s/2,u):e==="vertical"&&this.position(a,o/2),this.style("display",t),n&&this.hide(),r&&(this.parent().style.display="none"),this},e.Element.prototype.html=function(e){return typeof e!="undefined"?(this.elt.innerHTML=e,this):this.elt.innerHTML},e.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="absolute",this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},e.Element.prototype.translate=function(){this.elt.style.position="absolute";if(arguments.length===2){var e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");e=e.replace(/translate[X-Z]?\(.*\)/g,""),this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)",this.elt.style.transform+=e}else if(arguments.length===3){var e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");e=e.replace(/translate[X-Z]?\(.*\)/g,""),this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.style.transform+=e,this.elt.parentElement.style.perspective="1000px"}else if(arguments.length===4){var e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");e=e.replace(/translate[X-Z]?\(.*\)/g,""),this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.style.transform+=e,this.elt.parentElement.style.perspective=arguments[3]+"px"}return this},e.Element.prototype.rotate=function(){if(arguments.length===1){var e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");e=e.replace(/rotate[X-Z]?\(.*\)/g,""),this.elt.style.transform="rotate("+arguments[0]+"deg)",this.elt.style.transform+=e}else if(arguments.length===2){var e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");e=e.replace(/rotate[X-Z]?\(.*\)/g,""),this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)",this.elt.style.transform+=e}else if(arguments.length===3){var e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");e=e.replace(/rotate[X-Z]?\(.*\)/g,""),this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)",this.elt.style.transform+=e}return this},e.Element.prototype.style=function(t,n){var r=this;n instanceof e.Color&&(n="rgba("+n.levels[0]+","+n.levels[1]+","+n.levels[2]+","+n.levels[3]/255+")");if(typeof n=="undefined"){if(t.indexOf(":")===-1){var i=window.getComputedStyle(r.elt),s=i.getPropertyValue(t);return s}var o=t.split(";");for(var u=0;u<o.length;u++){var a=o[u].split(":");a[0]&&a[1]&&(this.elt.style[a[0].trim()]=a[1].trim())}}else if(t==="rotate"){if(arguments.length===2){var s=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");s=s.replace(/rotate[X-Z]?\(.*\)/g,""),this.elt.style.transform="rotate("+arguments[0]+"deg)",this.elt.style.transform+=s}else if(arguments.length===3){var s=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");s=s.replace(/rotate[X-Z]?\(.*\)/g,""),this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)",this.elt.style.transform+=s}else if(arguments.length===4){var s=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");s=s.replace(/rotate[X-Z]?\(.*\)/g,""),this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)",this.elt.style.transform+=s}}else if(t==="translate"){if(arguments.length===3){var s=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");s=s.replace(/translate[X-Z]?\(.*\)/g,""),this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)",this.elt.style.transform+=s}else if(arguments.length===4){var s=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");s=s.replace(/translate[X-Z]?\(.*\)/g,""),this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.style.transform+=s,this.elt.parentElement.style.perspective="1000px"}else if(arguments.length===5){var s=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");s=s.replace(/translate[X-Z]?\(.*\)/g,""),this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.style.transform+=s,this.elt.parentElement.style.perspective=arguments[3]+"px"}}else if(t==="position")this.elt.style.left=arguments[1]+"px",this.elt.style.top=arguments[2]+"px",this.x=arguments[1],this.y=arguments[2];else{this.elt.style[t]=n;if(t==="width"||t==="height"||t==="left"||t==="top"){var f=n.replace(/\D+/g,"");this[t]=parseInt(f,10)}}return this},e.Element.prototype.attribute=function(e,t){return typeof t=="undefined"?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this)},e.Element.prototype.value=function(){return arguments.length>0?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},e.Element.prototype.show=function(){return this.elt.style.display="block",this},e.Element.prototype.hide=function(){return this.elt.style.display="none",this},e.Element.prototype.size=function(t,n){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var r=t,i=n,s=e.prototype.AUTO;if(r!==s||i!==s){r===s?r=n*this.width/this.height:i===s&&(i=t*this.height/this.width);if(this.elt instanceof HTMLCanvasElement){var o={},u=this.elt.getContext("2d");for(var a in u)o[a]=u[a];this.elt.setAttribute("width",r*this._pInst._pixelDensity),this.elt.setAttribute("height",i*this._pInst._pixelDensity),this.elt.setAttribute("style","width:"+r+"px; height:"+i+"px"),this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);for(var a in o)this.elt.getContext("2d")[a]=o[a]}else this.elt.style.width=r+"px",this.elt.style.height=i+"px",this.elt.width=r,this.elt.height=i,this.width=r,this.height=i;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},e.Element.prototype.remove=function(){for(var e in this._events)this.elt.removeEventListener(e,this._events[e]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt),delete this},e.MediaElement=function(t,n){e.Element.call(this,t,n);var r=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],this._pixelDensity=1,Object.defineProperty(r,"src",{get:function(){var e=r.elt.children[0].src,t=r.elt.src===window.location.href?"":r.elt.src,n=e===window.location.href?t:e;return n},set:function(e){for(var n=0;n<r.elt.children.length;n++)r.elt.removeChild(r.elt.children[n]);var i=document.createElement("source");i.src=e,t.appendChild(i),r.elt.src=e}}),r._onended=function(){},r.elt.onended=function(){r._onended(r)}},e.MediaElement.prototype=Object.create(e.Element.prototype),e.MediaElement.prototype.play=function(){return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),this.elt.readyState>1?this.elt.play():(this.elt.load(),this.elt.play()),this},e.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},e.MediaElement.prototype.pause=function(){return this.elt.pause(),this},e.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},e.MediaElement.prototype.noLoop=function(){return this.elt.setAttribute("loop",!1),this},e.MediaElement.prototype.autoplay=function(e){return this.elt.setAttribute("autoplay",e),this},e.MediaElement.prototype.volume=function(e){if(typeof e=="undefined")return this.elt.volume;this.elt.volume=e},e.MediaElement.prototype.time=function(e){if(typeof e=="undefined")return this.elt.currentTime;this.elt.currentTime=e},e.MediaElement.prototype.duration=function(){return this.elt.duration},e.MediaElement.prototype.pixels=[],e.MediaElement.prototype.loadPixels=function(){return this.loadedmetadata&&(this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d")),this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.videoWidth,this.canvas.height=this.elt.videoHeight,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),e.Renderer2D.prototype.loadPixels.call(this)),this},e.MediaElement.prototype.updatePixels=function(t,n,r,i){return this.loadedmetadata&&e.Renderer2D.prototype.updatePixels.call(this,t,n,r,i),this},e.MediaElement.prototype.get=function(t,n,r,i){return this.loadedmetadata?e.Renderer2D.prototype.get.call(this,t,n,r,i):[0,0,0,255]},e.MediaElement.prototype.set=function(t,n,r){this.loadedmetadata&&e.Renderer2D.prototype.set.call(this,t,n,r)},e.MediaElement.prototype.onended=function(e){return this._onended=e,this},e.MediaElement.prototype.connect=function(t){var n,r;if(typeof e.prototype.getAudioContext=="function")n=e.prototype.getAudioContext(),r=e.soundOut.input;else try{n=t.context,r=n.destination}catch(i){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=n.createMediaElementSource(this.elt),this.audioSourceNode.connect(r)),t?t.input?this.audioSourceNode.connect(t.input):this.audioSourceNode.connect(t):this.audioSourceNode.connect(r)},e.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},e.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},e.MediaElement.prototype.hideControls=function(){this.elt.controls=!1},e.MediaElement.prototype.addCue=function(e,t,n){var r=this._cueIDCounter++,i=new o(t,e,r,n);return this._cues.push(i),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r},e.MediaElement.prototype.removeCue=function(e){for(var t=0;t<this._cues.length;t++){var n=this._cues[t];n.id===e&&this.cues.splice(t,1)}this._cues.length===0&&(this.elt.ontimeupdate=null)},e.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},e.MediaElement.prototype._onTimeUpdate=function(){var e=this.time();for(var t=0;t<this._cues.length;t++){var n=this._cues[t].time,r=this._cues[t].val;this._prevTime<n&&n<=e&&this._cues[t].callback(r)}this._prevTime=e};var o=function(e,t,n,r){this.callback=e,this.time=t,this.id=n,this.val=r};e.File=function(e,t){this.file=e,this._pInst=t;var n=e.type.split("/");this.type=n[0],this.subtype=n[1],this.name=e.name,this.size=e.size,this.data=undefined}});