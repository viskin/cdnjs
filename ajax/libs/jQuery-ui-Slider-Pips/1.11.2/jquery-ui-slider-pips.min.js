/*! jQuery-ui-Slider-Pips - v1.11.2 - 2016-03-15
* Copyright (c) 2016 Simon Goellner <simey.me@gmail.com>; Licensed MIT */
!function(a){"use strict";var b={pips:function(b){function c(b){var c,d,e,f,g,h=[],i=0;if(l.values()&&l.values().length){for(e=l.values(),f=a.map(e,function(a){return Math.abs(a-b)}),g=Math.min.apply(Math,f),c=0;c<f.length;c++)f[c]===g&&h.push(c);for(i=h[0],d=0;d<h.length;d++)l._lastChangedValue===h[d]&&(i=h[d]);l.options.range&&2===h.length&&(b>e[1]?i=h[1]:b<e[0]&&(i=h[0]))}return i}function d(){l.element.off(".selectPip").on("mousedown.slider",l.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove()}function e(b,d){if(!l.option("disabled")){var e=a(b).data("value"),f=c(e);l.values()&&l.values().length?l.options.values[f]=l._trimAlignValue(e):l.options.value=l._trimAlignValue(e),l._refreshValue(),l._change(d,f)}}function f(b){var c,d,e,f,h,i=b,j="ui-slider-pip",k="",m=l.value(),o=l.values();if("first"===b?i=0:"last"===b&&(i=p),e=n+l.options.step*i,f=e.toString().replace(".","-"),h=Math.round((i-n)/r.step),c="array"===a.type(r.labels)?r.labels[h]||"":"object"===a.type(r.labels)?"first"===b?r.labels.first||"":"last"===b?r.labels.last||"":"array"===a.type(r.labels.rest)?r.labels.rest[h-1]||"":e:e,"first"===b?(d="0%",j+=" ui-slider-pip-first",j+="label"===r.first?" ui-slider-pip-label":"",j+=r.first===!1?" ui-slider-pip-hide":""):"last"===b?(d="100%",j+=" ui-slider-pip-last",j+="label"===r.last?" ui-slider-pip-label":"",j+=r.last===!1?" ui-slider-pip-hide":""):(d=(100/p*b).toFixed(4)+"%",j+="label"===r.rest?" ui-slider-pip-label":"",j+=r.rest===!1?" ui-slider-pip-hide":""),j+=" ui-slider-pip-"+f,o&&o.length){for(g=0;g<o.length;g++)e===o[g]&&(j+=" ui-slider-pip-initial-"+(g+1),j+=" ui-slider-pip-selected-"+(g+1));l.options.range&&e>o[0]&&e<o[1]&&(j+=" ui-slider-pip-inrange")}else e===m&&(j+=" ui-slider-pip-initial",j+=" ui-slider-pip-selected"),l.options.range&&("min"===l.options.range&&m>e||"max"===l.options.range&&e>m)&&(j+=" ui-slider-pip-inrange");return k="horizontal"===l.options.orientation?"left: "+d:"bottom: "+d,'<span class="'+j+'" style="'+k+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+e+'">'+r.formatLabel(c)+"</span></span>"}var g,h,i,j,k,l=this,m="",n=l._valueMin(),o=l._valueMax(),p=(o-n)/l.options.step,q=l.element.find(".ui-slider-handle"),r={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:p>100?Math.floor(.05*p):1,formatLabel:function(a){return this.prefix+a+this.suffix}};if("object"!==a.type(b)&&"undefined"!==a.type(b))return void("destroy"===b?d():"refresh"===b&&l.element.slider("pips",l.element.data("pips-options")));a.extend(r,b),l.element.data("pips-options",r),l.options.pipStep=Math.abs(Math.round(r.step))||1,l.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var s={single:function(b){this.resetClasses(),k.filter(".ui-slider-pip-"+this.classLabel(b)).addClass("ui-slider-pip-selected"),l.options.range&&k.each(function(c,d){var e=a(d).children(".ui-slider-label").data("value");("min"===l.options.range&&b>e||"max"===l.options.range&&e>b)&&a(d).addClass("ui-slider-pip-inrange")})},range:function(b){for(this.resetClasses(),g=0;g<b.length;g++)k.filter(".ui-slider-pip-"+this.classLabel(b[g])).addClass("ui-slider-pip-selected-"+(g+1));l.options.range&&k.each(function(c,d){var e=a(d).children(".ui-slider-label").data("value");e>b[0]&&e<b[1]&&a(d).addClass("ui-slider-pip-inrange")})},classLabel:function(a){return a.toString().replace(".","-")},resetClasses:function(){var a=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;k.removeClass(function(b,c){return(c.match(a)||[]).join(" ")})}};for(m+=f("first"),i=l.options.pipStep;p>i;i+=l.options.pipStep)m+=f(i);for(m+=f("last"),l.element.append(m),k=l.element.find(".ui-slider-pip"),j=a._data(l.element.get(0),"events").mousedown&&a._data(l.element.get(0),"events").mousedown.length?a._data(l.element.get(0),"events").mousedown:l.element.data("mousedown-handlers"),l.element.data("mousedown-handlers",j.slice()),h=0;h<j.length;h++)"slider"===j[h].namespace&&l.element.data("mousedown-original",j[h].handler);l.element.off("mousedown.slider").on("mousedown.selectPip",function(b){var d=a(b.target),f=c(d.data("value")),g=q.eq(f);if(g.addClass("ui-state-active"),d.is(".ui-slider-label"))e(d,b),l.element.one("mouseup.selectPip",function(){g.removeClass("ui-state-active").focus()});else{var h=l.element.data("mousedown-original");h(b)}}),l.element.on("slide.selectPip slidechange.selectPip",function(b,c){var d=a(this),e=d.slider("value"),f=d.slider("values");c&&(e=c.value,f=c.values),l.values()&&l.values().length?s.range(f):s.single(e)})},"float":function(b){function c(){f.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove()}function d(b){var c=[],d=a.map(b,function(a){return Math.ceil((a-g)/f.options.step)});if("array"===a.type(m.labels))for(e=0;e<b.length;e++)c[e]=m.labels[d[e]]||b[e];else if("object"===a.type(m.labels))for(e=0;e<b.length;e++)c[e]=b[e]===g?m.labels.first||g:b[e]===h?m.labels.last||h:"array"===a.type(m.labels.rest)?m.labels.rest[d[e]-1]||b[e]:b[e];else for(e=0;e<b.length;e++)c[e]=b[e];return c}var e,f=this,g=f._valueMin(),h=f._valueMax(),i=f._value(),j=f._values(),k=[],l=f.element.find(".ui-slider-handle"),m={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(a){return this.prefix+a+this.suffix}};if("object"!==a.type(b)&&"undefined"!==a.type(b))return void("destroy"===b?c():"refresh"===b&&f.element.slider("float",f.element.data("float-options")));if(a.extend(m,b),f.element.data("float-options",m),g>i&&(i=g),i>h&&(i=h),j&&j.length)for(e=0;e<j.length;e++)j[e]<g&&(j[e]=g),j[e]>h&&(j[e]=h);if(f.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),m.handle)for(k=d(f.values()&&f.values().length?j:[i]),e=0;e<k.length;e++)l.eq(e).append(a('<span class="ui-slider-tip">'+m.formatLabel(k[e])+"</span>"));m.pips&&f.element.find(".ui-slider-label").each(function(b,c){var e,f,g=a(c),h=[g.data("value")];e=m.formatLabel(d(h)[0]),f=a('<span class="ui-slider-tip-label">'+e+"</span>").insertAfter(g)}),"slide"!==m.event&&"slidechange"!==m.event&&"slide slidechange"!==m.event&&"slidechange slide"!==m.event&&(m.event="slidechange slide"),f.element.off(".sliderFloat").on(m.event+".sliderFloat",function(b,c){var e="array"===a.type(c.value)?c.value:[c.value],f=m.formatLabel(d(e)[0]);a(c.handle).find(".ui-slider-tip").html(f)})}};a.extend(!0,a.ui.slider.prototype,b)}(jQuery);