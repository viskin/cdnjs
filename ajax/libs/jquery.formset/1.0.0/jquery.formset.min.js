(function(a){a.fn.formset=function(c){var b=a.extend({},a.fn.formset.defaults,c);var e=function(i,j,g){var f=new RegExp("("+j+"-\\d+)");var h=j+"-"+g;if(a(i).attr("for")){a(i).attr("for",a(i).attr("for").replace(f,h))}if(i.id){i.id=i.id.replace(f,h)}if(i.name){i.name=i.name.replace(f,h)}};a(this).each(function(f){a(this).addClass("dynamic-form");if(a(this).attr("tagName")=="TR"){a(this).children(":last").append('<a class="'+b.deleteCssClass+'" href="javascript:void(0)">'+b.deleteText+"</a>")}else{a(this).append('<a class="'+b.deleteCssClass+'" href="javascript:void(0)">'+b.deleteText+"</a>")}a(this).find("a."+b.deleteCssClass).click(function(){var k=a(this).parents(".dynamic-form");k.remove();if(b.removed){b.removed(k)}var g=a(".dynamic-form");a("#id_"+b.prefix+"-TOTAL_FORMS").val(g.length);if(g.length==1){a("a."+b.deleteCssClass).hide()}for(var h=0,j=g.length;h<j;h++){a(g.get(h)).find("input,select,textarea,label").each(function(){e(this,b.prefix,h)})}return false})});if(a(this).length){if(a(this).attr("tagName")=="TR"){var d=this.eq(0).children().length;a(this).parent().append('<tr><td colspan="'+d+'"><a class="'+b.addCssClass+'" href="javascript:void(0)">'+b.addText+"</a></tr>")}else{a(this).filter(":last").after('<a class="'+b.addCssClass+'" href="javascript:void(0)">'+b.addText+"</a>")}a(this).parent().find("a."+b.addCssClass).click(function(){var f=parseInt(a("#id_"+b.prefix+"-TOTAL_FORMS").val());var h=a(".dynamic-form:first").clone(true).get(0);a(h).removeAttr("id").insertAfter(a(".dynamic-form:last"));a(h).find("input,select,textarea,label").each(function(){e(this,b.prefix,f);a(this).val("")});var g=f+1;a("#id_"+b.prefix+"-TOTAL_FORMS").val(g);if(g>1){a("a."+b.deleteCssClass).show()}if(b.added){b.added(a(h))}return false})}if(a(this).length==1){a("a."+b.deleteCssClass).hide()}return a(this)};a.fn.formset.defaults={prefix:"form",addText:"add another",deleteText:"remove",addCssClass:"add-row",deleteCssClass:"delete-row",added:null,removed:null}})(jQuery);