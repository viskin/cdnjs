(function(a){a.fn.formset=function(c){var b=a.extend({},a.fn.formset.defaults,c);var f=function(j,k,h){var g=new RegExp("("+k+"-\\d+)");var i=k+"-"+h;if(a(j).attr("for")){a(j).attr("for",a(j).attr("for").replace(g,i))}if(j.id){j.id=j.id.replace(g,i)}if(j.name){j.name=j.name.replace(g,i)}};a(this).each(function(g){a(this).addClass(b.formCssClass);if(a(this).is("TR")){a(this).children(":last").append('<a class="'+b.deleteCssClass+'" href="javascript:void(0)">'+b.deleteText+"</a>")}else{if(a(this).is("UL")||a(this).is("OL")){a(this).append('<li><a class="'+b.deleteCssClass+'" href="javascript:void(0)">'+b.deleteText+"</a></li>")}else{a(this).append('<a class="'+b.deleteCssClass+'" href="javascript:void(0)">'+b.deleteText+"</a>")}}a(this).find("a."+b.deleteCssClass).click(function(){var l=a(this).parents("."+b.formCssClass);l.remove();if(b.removed){b.removed(l)}var h=a("."+b.formCssClass);a("#id_"+b.prefix+"-TOTAL_FORMS").val(h.length);if(h.length==1){a("a."+b.deleteCssClass).hide()}for(var j=0,k=h.length;j<k;j++){a(h.get(j)).find("input,select,textarea,label").each(function(){f(this,b.prefix,j)})}return false})});if(a(this).length){var e;if(a(this).attr("tagName")=="TR"){var d=this.eq(0).children().length;a(this).parent().append('<tr><td colspan="'+d+'"><a class="'+b.addCssClass+'" href="javascript:void(0)">'+b.addText+"</a></tr>");e=a(this).parent().find("tr:last a")}else{a(this).filter(":last").after('<a class="'+b.addCssClass+'" href="javascript:void(0)">'+b.addText+"</a>");e=a(this).filter(":last").next()}e.click(function(){var g=parseInt(a("#id_"+b.prefix+"-TOTAL_FORMS").val());var i=a("."+b.formCssClass+":first").clone(true).get(0);a(i).removeAttr("id").insertAfter(a("."+b.formCssClass+":last"));a(i).find("input,select,textarea,label").each(function(){f(this,b.prefix,g);var j=a(this);if(j.is("input:checkbox")||j.is("input:radio")){j.attr("checked",false)}else{j.val("")}});var h=g+1;a("#id_"+b.prefix+"-TOTAL_FORMS").val(h);if(h>1){a("a."+b.deleteCssClass).show()}if(b.added){b.added(a(i))}return false})}if(a(this).length==1){a("a."+b.deleteCssClass).hide()}return a(this)};a.fn.formset.defaults={prefix:"form",addText:"add another",deleteText:"remove",addCssClass:"add-row",deleteCssClass:"delete-row",formCssClass:"dynamic-form",added:null,removed:null}})(jQuery);