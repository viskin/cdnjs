!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){Date.now||(Date.now=function(){return(new Date).getTime()}),window.requestAnimationFrame||function(){"use strict";for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}();var e=function(){for(var t="transform WebkitTransform MozTransform OTransform msTransform".split(" "),e=document.createElement("div"),n=0;n<t.length;n++)if(e&&void 0!==e.style[t[n]])return t[n];return!1}(),n=function(){if(!window.getComputedStyle)return!1;var t,e=document.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};(document.body||document.documentElement).insertBefore(e,null);for(var i in n)void 0!==e.style[i]&&(e.style[i]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(n[i]));return(document.body||document.documentElement).removeChild(e),void 0!==t&&t.length>0&&"none"!==t}(),i=navigator.userAgent.toLowerCase().indexOf("android")>-1,o=!!window.opera,a=[],r=function(){function e(e,a){var r,s=this;s.$item=t(e),s.defaults={type:"scroll",speed:.5,imgSrc:null,imgWidth:null,imgHeight:null,enableTransform:!0,zIndex:-100,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null},r=s.$item.data("jarallax")||{},s.options=t.extend({},s.defaults,r,a),s.options.speed=Math.min(2,Math.max(-1,parseFloat(s.options.speed))),s.instanceID=n++,s.image={src:s.options.imgSrc||null,$container:null,$item:null,width:s.options.imgWidth||null,height:s.options.imgHeight||null,useImgTag:i||o},s.initImg()&&s.init()}var n=0;return e}();r.prototype.initImg=function(){var t=this;return null===t.image.src&&(t.image.src=t.$item.css("background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!(!t.image.src||"none"===t.image.src)},r.prototype.init=function(){function n(){i.coverImage(),i.clipContainer(),i.onScroll(!0),i.$item.data("jarallax-original-styles",i.$item.attr("style")),i.options.onInit&&i.options.onInit.call(i),setTimeout(function(){i.$item.css({"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0)}var i=this,o={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","pointer-events":"none",transition:"transform linear -1ms, -webkit-transform linear -1ms"},r={position:"fixed"};i.image.$container=t("<div>").css(o).css({visibility:"hidden","z-index":i.options.zIndex}).attr("id","jarallax-container-"+i.instanceID).prependTo(i.$item),i.image.useImgTag&&e?(i.image.$item=t("<img>").attr("src",i.image.src),r=t.extend({"max-width":"none"},o,r)):(i.image.$item=t("<div>"),r=t.extend({"background-position":"50% 50%","background-size":"100% 100%","background-repeat":"no-repeat no-repeat","background-image":'url("'+i.image.src+'")'},o,r)),i.parentWithTransform=0,i.$item.parents().each(function(){t(this).css("transform")&&"none"===t(this).css("transform")||(i.parentWithTransform=1)}),i.image.$item.css(r).prependTo(i.image.$container),i.image.width&&i.image.height?n():i.getImageSize(i.image.src,function(t,e){i.image.width=t,i.image.height=e,n()}),a.push(i)},r.prototype.destroy=function(){for(var e=this,n=0,i=a.length;i>n;n++)if(a[n].instanceID===e.instanceID){a.splice(n,1);break}t("head #jarallax-clip-"+e.instanceID).remove(),e.$item.attr("style",e.$item.data("jarallax-original-styles")),e.$item.removeData("jarallax-original-styles"),e.image.$container.remove(),e.options.onDestroy&&e.options.onDestroy.call(e),delete e.$item[0].jarallax},r.prototype.round=function(t){return Math.floor(100*t)/100},r.prototype.getImageSize=function(t,e){if(!t||!e)return!1;var n=new Image;n.onload=function(){e(n.width,n.height)},n.src=t},r.prototype.clipContainer=function(){var e=this,n=e.image.$container.outerWidth(!0),i=e.image.$container.outerHeight(!0),o=t("head #jarallax-clip-"+e.instanceID);o.length||(t("head").append('<style type="text/css" id="jarallax-clip-'+e.instanceID+'"></style>'),o=t("head #jarallax-clip-"+e.instanceID));var a=["#jarallax-container-"+e.instanceID+" {","   clip: rect(0px "+n+"px "+i+"px 0);","   clip: rect(0px, "+n+"px, "+i+"px, 0);","}"].join("\n");o[0].styleSheet?o[0].styleSheet.cssText=a:o.html(a)},r.prototype.coverImage=function(){var e=this;if(e.image.width&&e.image.height){var n,i,o=Math.max(e.image.$container.outerWidth(!0),t(window).outerWidth(!0)),a=Math.max(e.image.$container.outerHeight(!0),t(window).outerHeight(!0)),r=e.image.width,s=e.image.height,l=1;e.options.speed<0?l+=Math.abs(e.options.speed):e.options.speed>1&&(l=e.options.speed);var m={width:o*l,height:a*l,marginLeft:0,marginTop:0};m.width/m.height>r/s?(n=m.width,i=m.width*s/r):(n=m.height*r/s,i=m.height),m.width=e.round(n),m.height=e.round(i),m.width>o&&(m.marginLeft=e.round(-(n-o)/2)),m.height>a&&(m.marginTop=e.round(-(i-a)/2)),e.image.$item.css(m),e.options.onCoverImage&&e.options.onCoverImage.call(e)}},r.prototype.isVisible=function(){return this.isElementInViewport||!1},r.prototype.onScroll=function(i){var o=this;if(o.image.width&&o.image.height){var a=o.$item[0].getBoundingClientRect(),r=t(window).height(),s=t(window).width(),l={visibility:"visible",backgroundPosition:"50% 50%"};o.isElementInViewport=a.bottom>=0&&a.right>=0&&a.top<=r&&a.left<=s;var m=i?!1:!o.isElementInViewport;if(!m){var c=Math.max(0,a.top),p=Math.max(0,a.height+a.top),d=Math.max(0,-a.top),h=Math.max(0,a.top+a.height-r),u=Math.max(0,a.height-(a.top+a.height-r)),g=Math.max(0,-a.top+r-a.height),f=1;if(a.height<r?f=1-(d||h)/a.height:r>=p?f=p/r:r>=u&&(f=u/r),"opacity"!=o.options.type&&"scale-opacity"!=o.options.type&&"scroll-opacity"!=o.options.type||(l.position="absolute",l.transform="translate3d(0, 0, 0)",l.opacity=f),"scale"==o.options.type||"scale-opacity"==o.options.type){var w=1;w+=o.options.speed*(1-f),l.position="absolute",l.transform="scale("+w+") translate3d(0, 0, 0)"}if("scroll"==o.options.type||"scroll-opacity"==o.options.type){var x=a.top;if(a.height<r&&(x-=(r-a.height)/2),o.options.speed>=0&&o.options.speed<=1)x*=o.options.speed;else{var y=o.image.$item[0].getBoundingClientRect(),v=(r+a.height-a.height-a.top)/(r+a.height);v-=.5;var b=v*(y.height-Math.max(a.height,r));o.options.speed>1?x-=b:x=b}x=o.round(x),e&&o.options.enableTransform?(o.parentWithTransform&&(x*=-1),l.transform="translateY("+x+"px)",n&&(l.transform="translate3d(0, "+x+"px, 0)")):l.backgroundPosition="50% "+x+"px",l.position="fixed"}o.image.$item.css(l),o.options.onScroll&&o.options.onScroll.call(o,{section:a,beforeTop:c,beforeTopEnd:p,afterTop:d,beforeBottom:h,beforeBottomEnd:u,afterBottom:g,visiblePercent:f})}}},function(){t(window).on("scroll.jarallax",function(){window.requestAnimationFrame(function(){for(var t=0,e=a.length;e>t;t++)a[t].onScroll()})});var e;t(window).on("resize.jarallax orientationchange.jarallax load.jarallax",function(){clearTimeout(e),e=setTimeout(function(){window.requestAnimationFrame(function(){for(var t=0,e=a.length;e>t;t++){var n=a[t];n.coverImage(),n.clipContainer(),n.onScroll()}})},100)})}();var s=t.fn.jarallax;t.fn.jarallax=function(){var t,e=this,n=arguments[0],i=Array.prototype.slice.call(arguments,1),o=e.length,a=0;for(a;o>a;a++)if("object"==typeof n||"undefined"==typeof n?e[a].jarallax||(e[a].jarallax=new r(e[a],n)):t=e[a].jarallax?e[a].jarallax[n].apply(e[a].jarallax,i):void 0,"undefined"!=typeof t)return t;return this},t.fn.jarallax.constructor=r,t.fn.jarallax.noConflict=function(){return t.fn.jarallax=s,this},t(document).on("ready.data-jarallax",function(){t("[data-jarallax]").jarallax()})});
//# sourceMappingURL=./1.5.0/jarallax.min.js.map