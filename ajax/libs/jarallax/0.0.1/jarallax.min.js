!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var a=function(){function a(a,n){var r,i=this;i.$item=e(a),i.defaults={speed:.5,src:null,enableTransform:!0,forceAcceleration:!0},r=i.$item.data("jarallax")||{},i.options=e.extend({},i.defaults,r,n),i.instanceID=t++,i.image={src:i.options.src||i.$item.attr("data-jarallax-src")||null,$container:null,$item:null,width:null,height:null,ready:!1},i.initEvents(),i.init()}var t=0;return a}();a.prototype.init=function(){var a=this;null==a.image.src&&(a.image.src=a.$item.css("background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),a.image.src&&(a.options.forceAcceleration&&a.forceAcceleration(),a.image.$container=e("<div>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","pointer-events":"none",transition:"transform linear -1ms, -webkit-transform linear -1ms"}).prependTo(a.$item),a.image.$item=a.image.$container.clone().css({"pointer-events":"none","background-position":"50% 50%","background-repeat":"no-repeat no-repeat","background-image":"url("+a.image.src+")"}).addClass("jarallax-container").prependTo(a.image.$container),a.image.$container.css({visibility:"hidden"}).addClass("jarallax-container").prependTo(a.$item),a.getImageSize(a.image.src,function(t,n){a.image.ready=!0,a.image.width=t,a.image.height=n,window.requestAnimationFrame(e.proxy(a.coverImage,a)),window.requestAnimationFrame(e.proxy(a.onScroll,a)),a.$item.data("JarallaxOriginalStyles",a.$item.attr("style")),setTimeout(function(){a.$item.css({"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0)}))},a.prototype.initEvents=function(){var a=this;e(window).on("scroll.jarallax.jarallax-"+a.instanceID,function(){window.requestAnimationFrame(e.proxy(a.onScroll,a))});var t;e(window).on("resize.jarallax.jarallax-"+a.instanceID+" load.jarallax.jarallax-"+a.instanceID,function(){clearTimeout(t),t=setTimeout(function(){window.requestAnimationFrame(function(){a.coverImage(),a.onScroll()})},100)})},a.prototype.destroy=function(){var a=this;a.options.forceAcceleration&&a.forceAcceleration(!0),e(window).off(".jarallax-"+a.instanceID),a.$item.attr("style",a.$item.data("JarallaxOriginalStyles")),a.$item.removeData("JarallaxOriginalStyles"),a.image.$container.remove(),delete a.$item[0].jarallax},a.prototype.getImageSize=function(e,a){if(!e||!a)return!1;var t=new Image;t.onload=function(){a(t.width,t.height)},t.src=e},a.prototype.coverImage=function(){var a=this;if(a.image.ready){var t=a.image.$container.outerWidth(!0),n=a.image.$container.outerHeight(!0),r=e(window).outerWidth(!0),i=e(window).outerHeight(!0),o=a.image.width,l=a.image.height,s={width:Math.max(r,t)*Math.max(a.options.speed,1),height:Math.max(i,n)*Math.max(a.options.speed,1)};if(s.width/s.height>o/l){var m=s.width*l/o;s.backgroundSize=s.width+"px "+m+"px"}else{var c=s.height*o/l;s.backgroundSize=c+"px "+s.height+"px"}a.image.$item.css(s)}},a.prototype.onScroll=function(){var a=this;if(a.image.ready){var r=e(window).scrollTop(),i=e(window).height(),o=a.$item.offset().top,l=a.$item.outerHeight(!0),s={visibility:"visible",backgroundPosition:"50% 50%"};if(!(r>o+l||o>r+i)){var m=(r-o)*a.options.speed;t&&a.options.enableTransform?(s.transform="translateY("+m+"px)",n&&(s.transform="translate3d(0, "+m+"px, 0)")):s.backgroundPosition="50% "+Math.round(m)+"px",a.image.$item.css(s)}}},a.prototype.forceAcceleration=function(a){var t=this;if(!t.options.forceAcceleration)return!1;var n=e("head #jarallax-force-acceleration");if(a){var r=n.attr("data-jarallax-IDs").replace(t.instanceID+",","");""==r||" "==r?n.remove():n.attr("data-jarallax-IDs",r)}else n.length||(e("head").append(['<style type="text/css" id="jarallax-force-acceleration" data-jarallax-IDs="">',"  html {","     -webkit-transform: translate3d(0,0,0);","     -moz-transform: translate3d(0,0,0);","     -ms-transform: translate3d(0,0,0);","     -o-transform: translate3d(0,0,0);","     transform: translate3d(0,0,0);","  }","</style>"].join("\n")),n=e("head #jarallax-force-acceleration")),n.attr("data-jarallax-IDs",n.attr("data-jarallax-IDs")+t.instanceID+",")},e.fn.jarallax=function(){var e,t=this,n=arguments[0],r=Array.prototype.slice.call(arguments,1),i=t.length,o=0;for(o;i>o;o++)if("object"==typeof n||"undefined"==typeof n?t[o].jarallax=new a(t[o],n):e=t[o].jarallax[n].apply(t[o].jarallax,r),"undefined"!=typeof e)return e;return this};var t=function(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),a=document.createElement("div"),t=0;t<e.length;t++)if(a&&void 0!==a.style[e[t]])return e[t];return!1}(),n=function(){if(!window.getComputedStyle)return!1;var e,a=document.createElement("p"),t={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var n in t)void 0!==a.style[n]&&(a.style[n]="translate3d(1px,1px,1px)",e=window.getComputedStyle(a).getPropertyValue(t[n]));return document.body.removeChild(a),void 0!==e&&e.length>0&&"none"!==e}()}),Date.now||(Date.now=function(){return(new Date).getTime()}),window.requestAnimationFrame||function(){"use strict";for(var e=["webkit","moz"],a=0;a<e.length&&!window.requestAnimationFrame;++a){var t=e[a];window.requestAnimationFrame=window[t+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var a=Date.now(),t=Math.max(n+16,a);return setTimeout(function(){e(n=t)},t-a)},window.cancelAnimationFrame=clearTimeout}}();
//# sourceMappingURL=0.0.1/jarallax.min.js.map