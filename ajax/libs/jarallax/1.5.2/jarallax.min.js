/*!
 * Name    : Just Another Parallax [Jarallax]
 * Version : 1.5.2
 * Author  : _nK http://nkdev.info
 * GitHub  : https://github.com/nk-o/jarallax
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()}),window.requestAnimationFrame||!function(){for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}();var e=navigator.userAgent.toLowerCase().indexOf("android")>-1,n=!!window.opera,i=document.all&&!window.atob,o=i?!1:function(){if(!window.getComputedStyle)return!1;var t,e=document.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};(document.body||document.documentElement).insertBefore(e,null);for(var i in n)"undefined"!=typeof e.style[i]&&(e.style[i]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(n[i]));return(document.body||document.documentElement).removeChild(e),"undefined"!=typeof t&&t.length>0&&"none"!==t}(),a=[],r=function(){function i(i,a){var r,s=this;s.$item=t(i),s.defaults={type:"scroll",speed:.5,imgSrc:null,imgWidth:null,imgHeight:null,enableTransform:!0,zIndex:-100,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null},r=s.$item.data("jarallax")||{},s.options=t.extend({},s.defaults,r,a),s.options.speed=Math.min(2,Math.max(-1,parseFloat(s.options.speed))),s.instanceID=o++,s.image={src:s.options.imgSrc||null,$container:null,$item:null,width:s.options.imgWidth||null,height:s.options.imgHeight||null,useImgTag:e||n},s.initImg()&&s.init()}var o=0;return i}();r.prototype.initImg=function(){var t=this;return null===t.image.src&&(t.image.src=t.$item.css("background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),t.image.src&&"none"!==t.image.src?!0:!1},r.prototype.init=function(){function e(){n.coverImage(),n.clipContainer(),n.onScroll(!0),n.$item.data("jarallax-original-styles",n.$item.attr("style")),n.options.onInit&&n.options.onInit.call(n),setTimeout(function(){n.$item.css({"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0)}var n=this,r={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","pointer-events":"none",transition:"transform linear -1ms, -webkit-transform linear -1ms"},s={position:"fixed"};n.image.$container=t("<div>").css(r).css({visibility:"hidden","z-index":n.options.zIndex}).attr("id","jarallax-container-"+n.instanceID).prependTo(n.$item),n.image.useImgTag&&o?(n.image.$item=t("<img>").attr("src",n.image.src),s=t.extend({"max-width":"none"},r,s)):(n.image.$item=t("<div>"),s=t.extend({"background-position":"50% 50%","background-size":"100% 100%","background-repeat":"no-repeat no-repeat","background-image":'url("'+n.image.src+'")'},r,s)),i&&(s.backgroundAttachment="fixed"),n.parentWithTransform=0,n.$item.parents().each(function(){t(this).css("transform")&&"none"===t(this).css("transform")||(n.parentWithTransform=1)}),n.image.$item.css(s).prependTo(n.image.$container),n.image.width&&n.image.height?e():n.getImageSize(n.image.src,function(t,i){n.image.width=t,n.image.height=i,e()}),a.push(n)},r.prototype.destroy=function(){for(var e=this,n=0,i=a.length;i>n;n++)if(a[n].instanceID===e.instanceID){a.splice(n,1);break}t("head #jarallax-clip-"+e.instanceID).remove(),e.$item.attr("style",e.$item.data("jarallax-original-styles")),e.$item.removeData("jarallax-original-styles"),e.image.$container.remove(),e.options.onDestroy&&e.options.onDestroy.call(e),delete e.$item[0].jarallax},r.prototype.round=function(t){return Math.floor(100*t)/100},r.prototype.getImageSize=function(t,e){if(t&&e){var n=new Image;n.onload=function(){e(n.width,n.height)},n.src=t}},r.prototype.clipContainer=function(){if(!i){var e=this,n=e.image.$container.outerWidth(!0),o=e.image.$container.outerHeight(!0),a=t("head #jarallax-clip-"+e.instanceID);a.length||(t("head").append('<style type="text/css" id="jarallax-clip-'+e.instanceID+'"></style>'),a=t("head #jarallax-clip-"+e.instanceID));var r=["#jarallax-container-"+e.instanceID+" {","   clip: rect(0 "+n+"px "+o+"px 0);","   clip: rect(0, "+n+"px, "+o+"px, 0);","}"].join("\n");a.html(r)}},r.prototype.coverImage=function(){var e=this;if(e.image.width&&e.image.height){var n,i,o=Math.max(e.image.$container.outerWidth(!0),t(window).width()),a=Math.max(e.image.$container.outerHeight(!0),t(window).height()),r=e.image.width,s=e.image.height,l=1;e.options.speed<0?l+=Math.abs(e.options.speed):e.options.speed>1&&(l=e.options.speed);var m={width:o*l,height:a*l,marginLeft:0,marginTop:0};m.width/m.height>r/s?(n=m.width,i=m.width*s/r):(n=m.height*r/s,i=m.height),m.width=e.round(n),m.height=e.round(i),m.width>o&&(m.marginLeft=e.round(-(n-o)/2)),m.height>a&&(m.marginTop=e.round(-(i-a)/2)),e.image.$item.css(m),e.options.onCoverImage&&e.options.onCoverImage.call(e)}},r.prototype.isVisible=function(){return this.isElementInViewport||!1},r.prototype.onScroll=function(e){var n=this;if(n.image.width&&n.image.height){var a=n.$item[0].getBoundingClientRect(),r=t(window).height(),s=t(window).width(),l={visibility:"visible",backgroundPosition:"50% 50%"};n.isElementInViewport=a.bottom>=0&&a.right>=0&&a.top<=r&&a.left<=s;var m=e?!1:!n.isElementInViewport;if(!m){var c=Math.max(0,a.top),p=Math.max(0,a.height+a.top),d=Math.max(0,-a.top),h=Math.max(0,a.top+a.height-r),g=Math.max(0,a.height-(a.top+a.height-r)),u=Math.max(0,-a.top+r-a.height),f=1;if(a.height<r?f=1-(d||h)/a.height:r>=p?f=p/r:r>=g&&(f=g/r),("opacity"===n.options.type||"scale-opacity"===n.options.type||"scroll-opacity"===n.options.type)&&(l.position="absolute",l.transform="translate3d(0, 0, 0)",l.opacity=f),"scale"===n.options.type||"scale-opacity"===n.options.type){var w=1;w+=n.options.speed<0?-1*n.options.speed*f:n.options.speed*(1-f),l.position="absolute",l.transform="scale("+w+") translate3d(0, 0, 0)"}if("scroll"===n.options.type||"scroll-opacity"===n.options.type){var x=a.top;if(a.height<r&&(x-=(r-a.height)/2),n.options.speed>=0&&n.options.speed<=1)x*=n.options.speed;else{var y=n.image.$item[0].getBoundingClientRect(),v=(r+a.height-a.height-a.top)/(r+a.height);v-=.5;var b=v*(y.height-Math.max(a.height,r));n.options.speed>1?x-=b:x=b}x=n.round(x),o&&n.options.enableTransform?(n.parentWithTransform&&(x-=a.top),l.transform="translate3d(0, "+x+"px, 0)"):l.backgroundPosition="50% "+x+"px",l.position=i?"absolute":"fixed"}n.image.$item.css(l),n.options.onScroll&&n.options.onScroll.call(n,{section:a,beforeTop:c,beforeTopEnd:p,afterTop:d,beforeBottom:h,beforeBottomEnd:g,afterBottom:u,visiblePercent:f})}}},function(){t(window).on("scroll.jarallax",function(){window.requestAnimationFrame(function(){for(var t=0,e=a.length;e>t;t++)a[t].onScroll()})});var e;t(window).on("resize.jarallax orientationchange.jarallax load.jarallax",function(){clearTimeout(e),e=setTimeout(function(){window.requestAnimationFrame(function(){for(var t=0,e=a.length;e>t;t++){var n=a[t];n.coverImage(),n.clipContainer(),n.onScroll()}})},100)})}();var s=t.fn.jarallax;t.fn.jarallax=function(){var t,e=this,n=arguments[0],i=Array.prototype.slice.call(arguments,1),o=e.length,a=0;for(a;o>a;a++)if("object"==typeof n||"undefined"==typeof n?e[a].jarallax||(e[a].jarallax=new r(e[a],n)):e[a].jarallax&&(t=e[a].jarallax[n].apply(e[a].jarallax,i)),"undefined"!=typeof t)return t;return this},t.fn.jarallax.constructor=r,t.fn.jarallax.noConflict=function(){return t.fn.jarallax=s,this},t(document).on("ready.data-jarallax",function(){t("[data-jarallax]").jarallax()})});