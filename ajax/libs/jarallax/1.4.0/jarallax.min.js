!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){Date.now||(Date.now=function(){return(new Date).getTime()}),window.requestAnimationFrame||function(){"use strict";for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var o=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(o+16,t);return setTimeout(function(){e(o=n)},n-t)},window.cancelAnimationFrame=clearTimeout}}();var t=function(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=document.createElement("div"),n=0;n<e.length;n++)if(t&&void 0!==t.style[e[n]])return e[n];return!1}(),n=function(){if(!window.getComputedStyle)return!1;var e,t=document.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};(document.body||document.documentElement).insertBefore(t,null);for(var o in n)void 0!==t.style[o]&&(t.style[o]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(n[o]));return(document.body||document.documentElement).removeChild(t),void 0!==e&&e.length>0&&"none"!==e}(),o=navigator.userAgent.toLowerCase().indexOf("android")>-1,i=!!window.opera,a=[],r=function(){function t(t,a){var r,l=this;l.$item=e(t),l.defaults={type:"scroll",speed:.5,imgSrc:null,imgWidth:null,imgHeight:null,enableTransform:!0,zIndex:-100,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null},r=l.$item.data("jarallax")||{},l.options=e.extend({},l.defaults,r,a),l.options.speed=Math.min(1,Math.max(0,parseFloat(l.options.speed))),l.instanceID=n++,l.image={src:l.options.imgSrc||null,$container:null,$item:null,width:l.options.imgWidth||null,height:l.options.imgHeight||null,useImgTag:o||i},l.initImg()&&l.init()}var n=0;return t}();r.prototype.initImg=function(){var e=this;return null===e.image.src&&(e.image.src=e.$item.css("background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!(!e.image.src||"none"===e.image.src)},r.prototype.init=function(){function n(){o.coverImage(),o.clipContainer(),o.onScroll(!0),o.$item.data("jarallax-original-styles",o.$item.attr("style")),o.options.onInit&&o.options.onInit.call(o),setTimeout(function(){o.$item.css({"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0)}var o=this,i={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","pointer-events":"none",transition:"transform linear -1ms, -webkit-transform linear -1ms"},r={position:"fixed"};o.image.$container=e("<div>").css(i).css({visibility:"hidden","z-index":o.options.zIndex}).attr("id","jarallax-container-"+o.instanceID).prependTo(o.$item),o.image.useImgTag&&t?(o.image.$item=e("<img>").attr("src",o.image.src),r=e.extend({"max-width":"none"},i,r)):(o.image.$item=e("<div>"),r=e.extend({"background-position":"50% 50%","background-repeat":"no-repeat no-repeat","background-image":'url("'+o.image.src+'")'},i,r)),o.image.$item.css(r).prependTo(o.image.$container),o.image.width&&o.image.height?n():o.getImageSize(o.image.src,function(e,t){o.image.width=e,o.image.height=t,n()}),a.push(o)},r.prototype.destroy=function(){for(var t=this,n=0,o=a.length;o>n;n++)if(a[n].instanceID===t.instanceID){a.splice(n,1);break}e("head #jarallax-clip-"+t.instanceID).remove(),t.$item.attr("style",t.$item.data("jarallax-original-styles")),t.$item.removeData("jarallax-original-styles"),t.image.$container.remove(),t.options.onDestroy&&t.options.onDestroy.call(t),delete t.$item[0].jarallax},r.prototype.round=function(e){return Math.floor(100*e)/100},r.prototype.getImageSize=function(e,t){if(!e||!t)return!1;var n=new Image;n.onload=function(){t(n.width,n.height)},n.src=e},r.prototype.clipContainer=function(){var t=this,n=t.image.$container.outerWidth(!0),o=t.image.$container.outerHeight(!0),i=e("head #jarallax-clip-"+t.instanceID);i.length||(e("head").append('<style type="text/css" id="jarallax-clip-'+t.instanceID+'"></style>'),i=e("head #jarallax-clip-"+t.instanceID));var a=["#jarallax-container-"+t.instanceID+" {","   clip: rect(0px "+n+"px "+o+"px 0);","   clip: rect(0px, "+n+"px, "+o+"px, 0);","}"].join("\n");i[0].styleSheet?i[0].styleSheet.cssText=a:i.html(a)},r.prototype.coverImage=function(){var n=this;if(n.image.width&&n.image.height){var o,i,a=n.image.$container.outerWidth(!0),r=n.image.$container.outerHeight(!0),l=e(window).outerWidth(!0),s=e(window).outerHeight(!0),m=n.image.width,c=n.image.height,d={width:Math.max(l,a)*Math.max(n.options.speed,1),height:Math.max(s,r)*Math.max(n.options.speed,1)};d.width/d.height>m/c?(o=d.width,i=d.width*c/m):(o=d.height*m/c,i=d.height),n.image.useImgTag&&t?(d.width=n.round(o),d.height=n.round(i),d.marginLeft=n.round(-(o-a)/2),d.marginTop=n.round(-(i-r)/2)):d.backgroundSize=n.round(o)+"px "+n.round(i)+"px",n.image.$item.css(d),n.options.onCoverImage&&n.options.onCoverImage.call(n)}},r.prototype.onScroll=function(o){var i=this;if(i.image.width&&i.image.height){var a=e(window).scrollTop(),r=e(window).height(),l=i.$item.offset().top,s=i.$item.outerHeight(!0),m={visibility:"visible",backgroundPosition:"50% 50%"},c=o?!1:a>l+s||l>a+r;if(!c){var d=a-l,u=Math.max(0,-d),p=Math.max(0,s-d),g=Math.max(0,d),f=Math.max(0,-d+s-r),h=Math.max(0,s-(-d+s-r)),w=Math.max(0,d+r-s),x=1;if(r>s?x=1-(g||f)/s:r>=p?x=p/r:r>=h&&(x=h/r),"opacity"!=i.options.type&&"scale-opacity"!=i.options.type&&"scroll-opacity"!=i.options.type||(m.position="absolute",m.transform="translate3d(0, 0, 0)",m.opacity=x),"scale"==i.options.type||"scale-opacity"==i.options.type){var y=1;y+=i.options.speed*(1-x),m.position="absolute",m.transform="scale("+y+") translate3d(0, 0, 0)"}if("scroll"==i.options.type||"scroll-opacity"==i.options.type){var v=-d*i.options.speed;v=i.round(v),t&&i.options.enableTransform?(m.transform="translateY("+v+"px)",n&&(m.transform="translate3d(0, "+v+"px, 0)")):m.backgroundPosition="50% "+v+"px",m.position="fixed"}i.image.$item.css(m),i.options.onScroll&&i.options.onScroll.call(i,{scrollTop:a,sectionHeight:s,windowHeight:r,beforeTop:u,beforeTopEnd:p,afterTop:g,beforeBottom:f,beforeBottomEnd:h,afterBottom:w,visiblePercent:x})}}},function(){e(window).on("scroll.jarallax",function(){window.requestAnimationFrame(function(){for(var e=0,t=a.length;t>e;e++)a[e].onScroll()})});var t;e(window).on("resize.jarallax orientationchange.jarallax load.jarallax",function(){clearTimeout(t),t=setTimeout(function(){window.requestAnimationFrame(function(){for(var e=0,t=a.length;t>e;e++){var n=a[e];n.coverImage(),n.clipContainer(),n.onScroll()}})},100)})}();var l=e.fn.jarallax;e.fn.jarallax=function(){var e,t=this,n=arguments[0],o=Array.prototype.slice.call(arguments,1),i=t.length,a=0;for(a;i>a;a++)if("object"==typeof n||"undefined"==typeof n?t[a].jarallax||(t[a].jarallax=new r(t[a],n)):e=t[a].jarallax?t[a].jarallax[n].apply(t[a].jarallax,o):void 0,"undefined"!=typeof e)return e;return this},e.fn.jarallax.constructor=r,e.fn.jarallax.noConflict=function(){return e.fn.jarallax=l,this},e(document).on("ready.data-jarallax",function(){e("[data-jarallax]").jarallax()})});
//# sourceMappingURL=./1.4.0/jarallax.min.js.map