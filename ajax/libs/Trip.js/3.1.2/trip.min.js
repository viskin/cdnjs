/**
 *  Trip.js
 *
 *  This is a jQuery plugin that can help you customize your tutorial trip
 *  with full flexibilities.
 *
 *  Version: 3.1.2
 *
 *  Author: EragonJ <eragonj@eragonj.me>
 *  Blog: http://eragonj.me
 *
 *  @preserve
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("jQuery"));else if("function"==typeof define&&define.amd)define(["jQuery"],e);else{var i=e("object"==typeof exports?require("jQuery"):t.jQuery);for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}(this,function(t){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function s(){var t,e,i=new r;if(0===arguments.length)t=i.parse("default"),e={};else if(1===arguments.length)if(o.isArray(arguments[0]))t=arguments[0],e={};else if(o.isObject(arguments[0]))t=i.parse("default"),e=arguments[0];else{if(!o.isString(arguments[0]))throw"Please check documents for passing parameters, you may pass wrong parameters into constructor function !";t=i.parse(arguments[0]),e={}}else o.isArray(arguments[0])?t=arguments[0]:o.isString(arguments[0])&&(t=i.parse(arguments[0])),e=arguments[1];this.settings=n.extend({tripIndex:0,tripTheme:"black",backToTopWhenEnded:!1,overlayHolder:"body",overlayZindex:99999,delay:1e3,enableKeyBinding:!0,enableAnimation:!0,showCloseBox:!1,showHeader:!1,skipUndefinedTrip:!1,showNavigation:!1,canGoNext:!0,canGoPrev:!0,nextLabel:"Next",prevLabel:"Back",finishLabel:"Dismiss",closeBoxLabel:"&#215;",header:"Step {{tripIndex}}",onStart:n.noop,onEnd:n.noop,onTripStart:n.noop,onTripEnd:n.noop,onTripStop:n.noop,onTripPause:n.noop,onTripResume:n.noop,onTripChange:n.noop,onTripClose:n.noop,animation:"tada",tripBlockHTML:['<div class="trip-block">','<a href="#" class="trip-close"></a>','<div class="trip-header"></div>','<div class="trip-content"></div>','<div class="trip-progress-wrapper">','<div class="trip-progress-bar"></div>','<a href="#" class="trip-prev"></a>','<a href="#" class="trip-next"></a>',"</div>","</div>"]},e),this.tripData=t,this.$tripBlock=null,this.$overlay=null,this.$bar=null,this.$root=n("body, html"),this.tripIndex=this.settings.tripIndex,this.tripDirection="next",this.timer=null,this.progressing=!1,this.hasExpose=!1,this.CONSTANTS={LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,ESC:27,SPACE:32,TRIP_BLOCK_OFFSET_VERTICAL:10,TRIP_BLOCK_OFFSET_HORIZONTAL:10,RESIZE_TIMEOUT:200},this.console=window.console||{}}t.exports=s;var n=i(1),r=i(2),o=i(3),a=["flash","bounce","shake","tada","fadeIn","fadeInUp","fadeInDown","fadeInLeft","fadeInRight","fadeInUpBig","fadeInDownBig","fadeInLeftBig","fadeInRightBig","bounceIn","bounceInDown","bounceInUp","bounceInLeft","bounceInRight","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight"];s.prototype={preInit:function(){if("undefined"==typeof this.console){var t=this,e=["log","warn","debug","info","error"];n.each(e,function(e,i){t.console[i]=n.noop})}},showExpose:function(){var t,e,i,s=this.getCurrentTripObject();i="string"==typeof s.expose?n(s.expose):s.expose instanceof n?s.expose:n(s.sel),this.hasExpose=!0,void 0!==i.get(0)&&(t={position:i.css("position"),zIndex:i.css("z-Index")},e={position:function(){return["absolute","fixed"].indexOf(t.position)>-1?t.position:"relative"}(),zIndex:this.settings.overlayZindex+1},i.data("trip-old-css",t).css(e).addClass("trip-exposed")),this.$overlay.show()},hideExpose:function(){var t=n(".trip-exposed");if(this.hasExpose=!1,void 0!==t.get(0)){var e=t.data("trip-old-css");t.css(e).removeClass("trip-exposed")}this.$overlay.hide()},bindResizeEvents:function(){var t,e=this;n(window).on("resize.Trip",function(){window.clearTimeout(t),t=window.setTimeout(function(){e.run()},e.CONSTANTS.RESIZE_TIMEOUT)})},unbindResizeEvents:function(){n(window).off("resize.Trip")},bindKeyEvents:function(){var t=this;n(document).on({"keydown.Trip":function(e){t.keyEvent.call(t,e)}})},unbindKeyEvents:function(){n(document).off("keydown.Trip")},keyEvent:function(t){switch(t.which){case this.CONSTANTS.ESC:this.stop();break;case this.CONSTANTS.SPACE:t.preventDefault(),this.pause();break;case this.CONSTANTS.LEFT_ARROW:case this.CONSTANTS.UP_ARROW:this.prev();break;case this.CONSTANTS.RIGHT_ARROW:case this.CONSTANTS.DOWN_ARROW:this.next()}},stop:function(){this.timer&&this.timer.stop(),this.hasExpose&&this.hideExpose(),this.hideTripBlock(),this.unbindKeyEvents(),this.unbindResizeEvents();var t=this.getCurrentTripObject(),e=t.onTripStop||this.settings.onTripStop;e(this.tripIndex,t),this.settings.onEnd(this.tripIndex,t),this.tripIndex=this.settings.tripIndex},pauseOrResume:function(){if(this.progressing)this.timer.pause(),this.pauseProgressBar();else{var t=this.timer.resume();this.resumeProgressBar(t)}this.progressing=!this.progressing},pause:function(){this.pauseOrResume();var t=this.getCurrentTripObject(),e=t.onTripPause||this.settings.onTripPause;e(this.tripIndex,t)},resume:function(){this.pauseOrResume();var t=this.getCurrentTripObject(),e=t.onTripResume||this.settings.onTripResume;e(this.tripIndex,t)},next:function(){var t=this;if(!this.canGoNext())return this.run();this.tripDirection="next";var e=this.getCurrentTripObject(),i=e.onTripEnd||this.settings.onTripEnd,s=i(this.tripIndex,e);n.when(s).then(function(){t.isLast()?t.doLastOperation():(t.increaseIndex(),t.run())})},prev:function(){var t=this;this.tripDirection="prev";var e=this.getCurrentTripObject(),i=e.onTripEnd||this.settings.onTripEnd,s=i(this.tripIndex,e);n.when(s).then(function(){!t.isFirst()&&t.canGoPrev()&&t.decreaseIndex(),t.run()})},showCurrentTrip:function(t){this.settings.enableAnimation&&this.removeAnimation(),this.timer&&this.timer.stop(),this.hasExpose&&this.hideExpose(),this.progressing&&(this.hideProgressBar(),this.progressing=!1),this.setTripBlock(t),this.showTripBlock(t),this.settings.enableAnimation&&this.addAnimation(t),t.expose&&this.showExpose()},doLastOperation:function(){this.timer&&this.timer.stop(),this.settings.enableKeyBinding&&this.unbindKeyEvents(),this.hideTripBlock(),this.unbindResizeEvents(),this.hasExpose&&this.hideExpose(),this.settings.backToTopWhenEnded&&this.$root.animate({scrollTop:0},"slow");var t=this.getCurrentTripObject();return this.settings.onEnd(this.tripIndex,t),this.tripIndex=this.settings.tripIndex,!1},showProgressBar:function(t){var e=this;this.$bar.animate({width:"100%"},t,"linear",function(){e.$bar.width(0)})},hideProgressBar:function(){this.$bar.width(0),this.$bar.stop(!0)},pauseProgressBar:function(){this.$bar.stop(!0)},resumeProgressBar:function(t){this.showProgressBar(t)},run:function(){var t=this,e=this.getCurrentTripObject(),i=e.onTripStart||this.settings.onTripStart,s=e.onTripChange||this.settings.onTripChange,n=e.delay||this.settings.delay;return this.isTripDataValid(e)?(this.showCurrentTrip(e),this.showProgressBar(n),this.progressing=!0,s(this.tripIndex,e),i(this.tripIndex,e),void(n>=0&&(this.timer=new o.Timer(function(){t.next()},n)))):this.settings.skipUndefinedTrip===!1?(this.console.error("Your tripData is not valid at index: "+this.tripIndex),this.stop(),!1):this[this.tripDirection]()},isFirst:function(){return 0===this.tripIndex?!0:!1},isLast:function(){return this.tripIndex===this.tripData.length-1?!0:!1},isTripDataValid:function(t){return this.hasSpecialDirections()?!0:t.nextClickSelector&&0===n(t.nextClickSelector).length?!1:"undefined"==typeof t.content||"undefined"==typeof t.sel||null===t.sel||0===t.sel.length||0===n(t.sel).length?!1:!0},hasSpecialDirections:function(){var t=this.getCurrentTripObject(),e=t.position,i=["screen-ne","screen-se","screen-sw","screen-nw","screen-center"];return n.inArray(e,i)>=0?!0:!1},canGoPrev:function(){var t=this.tripData[this.tripIndex],e=t.canGoPrev;return"undefined"==typeof e&&(e=this.settings.canGoPrev),"function"==typeof e&&(e=e.call(t)),e},canGoNext:function(){var t=this.tripData[this.tripIndex],e=t.canGoNext;return"undefined"==typeof e&&(e=this.settings.canGoNext),"function"==typeof e&&(e=e.call(t)),e},increaseIndex:function(){this.tripIndex>=this.tripData.length-1||(this.tripIndex+=1)},decreaseIndex:function(){this.tripIndex<=0||(this.tripIndex-=1)},getCurrentTripObject:function(){return this.tripData[this.tripIndex]},getReplacedTripContent:function(t){t=t||"";var e=/\{\{(tripIndex)\}\}/g,i=/\{\{(tripTotal)\}\}/g;return t=t.replace(e,this.tripIndex+1),t=t.replace(i,this.tripData.length)},setTripBlock:function(t){var e=this.$tripBlock,i=this,s=t.showCloseBox||this.settings.showCloseBox,r=t.showNavigation||this.settings.showNavigation,o=t.showHeader||this.settings.showHeader,a=t.closeBoxLabel||this.settings.closeBoxLabel,p=t.prevLabel||this.settings.prevLabel,c=t.nextLabel||this.settings.nextLabel,h=t.finishLabel||this.settings.finishLabel,l=t.header||this.settings.header;e.find(".trip-header").html(this.getReplacedTripContent(l)).toggle(o),e.find(".trip-content").html(this.getReplacedTripContent(t.content)),e.find(".trip-prev").html(p).toggle(r&&!this.isFirst()),e.find(".trip-next").html(this.isLast()?h:c).toggle(r&&!t.nextClickSelector),e.find(".trip-close").html(a).toggle(s),e.removeClass("e s w n screen-ne screen-se screen-sw screen-nw screen-center"),e.addClass(t.position),t.nextClickSelector&&n(t.nextClickSelector).one("click.Trip",function(t){t.preventDefault(),n(this).blur(),i.next()}),this.setTripBlockPosition(t,"horizontal"),this.setTripBlockPosition(t,"vertical")},setTripBlockPosition:function(t,e){var i,s,r=this.$tripBlock,o=n(t.sel),a=o&&o.outerWidth(),p=o&&o.outerHeight(),c=r.outerWidth(),h=r.outerHeight(),l=10,d=10;switch(t.position){case"screen-center":i="50%",s="50%";break;case"screen-ne":case"screen-se":case"screen-nw":case"screen-sw":i=this.CONSTANTS.TRIP_BLOCK_OFFSET_HORIZONTAL,s=this.CONSTANTS.TRIP_BLOCK_OFFSET_VERTICAL;break;case"e":i=o.offset().left+a+d,s=o.offset().top-(h-p)/2;break;case"s":i=o.offset().left+(a-c)/2,s=o.offset().top+p+l;break;case"w":i=o.offset().left-(d+c),s=o.offset().top-(h-p)/2;break;case"n":default:i=o.offset().left+(a-c)/2,s=o.offset().top-l-h}if("horizontal"===e)switch(r.css({left:"",right:"",marginLeft:""}),t.position){case"screen-center":r.css({left:i,marginLeft:-.5*c});break;case"screen-se":case"screen-ne":r.css({right:i});break;case"screen-sw":case"screen-nw":case"e":case"s":case"w":case"n":default:r.css({left:i})}else if("vertical"===e)switch(r.css({top:"",bottom:"",marginTop:""}),t.position){case"screen-center":r.css({top:s,marginTop:-.5*h});break;case"screen-sw":case"screen-se":r.css({bottom:s});break;case"screen-nw":case"screen-ne":case"e":case"s":case"w":case"n":default:r.css({top:s})}},addAnimation:function(t){var e=t.animation||this.settings.animation;n.inArray(e,a)>=0&&(this.$tripBlock.addClass("animated"),this.$tripBlock.addClass(e))},removeAnimation:function(){this.$tripBlock.removeClass(a.join(" ")),this.$tripBlock.removeClass("animated")},showTripBlock:function(t){this.$tripBlock.css({display:"inline-block",zIndex:this.settings.overlayZindex+1});var e=n(window).height(),i=n(window).scrollTop(),s=this.$tripBlock.offset().top,r=this.$tripBlock.height(),o=100;i+e>s+r&&s>=i||this.$root.animate({scrollTop:s-o},"slow")},hideTripBlock:function(){this.removeAnimation(),this.$tripBlock.fadeOut("slow")},create:function(){this.createTripBlock(),this.createOverlay()},createTripBlock:function(){if("undefined"==typeof n(".trip-block").get(0)){var t=this,e=this.settings.tripBlockHTML.join(""),i=n(e).addClass(this.settings.tripTheme);n("body").append(i),i.find(".trip-close").on("click",function(e){e.preventDefault();var i=t.getCurrentTripObject(),s=i.onTripClose||t.settings.onTripClose;s(t.tripIndex,i),t.stop()}),i.find(".trip-prev").on("click",function(e){e.preventDefault(),n(this).blur(),t.prev()}),i.find(".trip-next").on("click",function(e){e.preventDefault(),n(this).blur(),t.next()})}},createOverlay:function(){if("undefined"==typeof n(".trip-overlay").get(0)){var t=['<div class="trip-overlay">',"</div>"].join(""),e=n(t);e.height(n(window).height()).css({zIndex:this.settings.overlayZindex}),n(this.settings.overlayHolder).append(e)}},cleanup:function(){n(".trip-overlay, .trip-block").remove()},init:function(){this.preInit(),this.settings.enableKeyBinding&&this.bindKeyEvents(),this.bindResizeEvents(),this.$tripBlock=n(".trip-block"),this.$bar=n(".trip-progress-bar"),this.$overlay=n(".trip-overlay")},start:function(){this.cleanup(),this.settings.onStart(),this.create(),this.init(),this.run()}}},function(e,i){e.exports=t},function(t,e){function i(){this._DEFAULT_TRIP_NODES_SELECTOR="[data-trip]",this._DEFAULT_TRIP_POSITION="n",this._DEFAULT_TRIP_ANIMATION="tada"}t.exports=i,i.prototype={_getAllTripNodes:function(t){return document.querySelectorAll(t)},_parseTripData:function(t){var e=t.dataset.tripIndex,i=t.dataset.tripContent,s=t.dataset.tripDelay,n=t.dataset.tripPosition||this._DEFAULT_TRIP_POSITION;t.dataset.tripAnimation||this._DEFAULT_TRIP_ANIMATION;if(t&&"undefined"!=typeof e&&""!==i){e=parseInt(e,10),s=parseInt(s,10);var r={};return r.sel=t,r._index=e,r.position=n,r.content=i,s&&!isNaN(s)&&(r.delay=s),r}return null},_sort:function(t){t.sort(function(t,e){return t._index-e._index})},parse:function(t){if("string"!=typeof t)throw"Please check your selector - "+t+" , and make sure  it is String type";t="default"===t?this._DEFAULT_TRIP_NODES_SELECTOR:t;var e=this,i=[],s=this._getAllTripNodes(t);return s&&[].forEach.call(s,function(t){var s=e._parseTripData(t);s&&i.push(s)}),this._sort(i),i}}},function(t,e){var i={isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isString:function(t){return"string"==typeof t},Timer:function(t,e){var i,s,n=e;this.pause=function(){window.clearTimeout(i),n-=new Date-s},this.resume=function(){return s=new Date,i=window.setTimeout(t,n),n},this.stop=function(){window.clearTimeout(i)},this.resume()}};t.exports=i}])});