(function(){!function(e,t){return"undefined"!=typeof module&&module.exports?module.exports=t(require("ifvisible.js")):"function"==typeof define&&define.amd?void define(["ifvisible"],function(i){return e.TimeMe=t(i)}):e.TimeMe=t(e.ifvisible)}(this,function(e){var t={startStopTimes:{},idleTimeout:60,currentPageName:"default-page-name",getIfVisibleHandle:function(){if("object"==typeof e)return e;throw"undefined"!=typeof console&&console.log("Required dependency (ifvisible.js) not found.  Make sure it has been included."),{name:"MissingDependencyException",message:"Required dependency (ifvisible.js) not found.  Make sure it has been included."}},startTimer:function(){var e=t.currentPageName;if(void 0===t.startStopTimes[e])t.startStopTimes[e]=[];else{var i=t.startStopTimes[e],n=i[i.length-1];if(void 0!==n&&void 0===n.stopTime)return}t.startStopTimes[e].push({startTime:new Date,stopTime:void 0})},stopTimer:function(){var e=t.currentPageName,i=t.startStopTimes[e];void 0!==i&&0!==i.length&&void 0===i[i.length-1].stopTime&&(i[i.length-1].stopTime=new Date)},getTimeOnCurrentPageInSeconds:function(){return t.getTimeOnPageInSeconds(t.currentPageName)},getTimeOnPageInSeconds:function(e){var i=0,n=t.startStopTimes[e];if(void 0!==n){for(var o=0,r=0;r<n.length;r++){var s=n[r].startTime,a=n[r].stopTime;void 0===a&&(a=new Date);var d=a-s;o+=d/1e3}return i=Number(o)}},getTimeOnAllPagesInSeconds:function(){for(var e=[],i=Object.keys(t.startStopTimes),n=0;n<i.length;n++){var o=i[n],r=t.getTimeOnPageInSeconds(o);e.push({pageName:o,timeOnPage:r})}return e},setIdleDurationInSeconds:function(e){var i=parseFloat(e);if(isNaN(i)!==!1)throw{name:"InvalidDurationException",message:"An invalid duration time ("+e+") was provided."};t.getIfVisibleHandle().setIdleDuration(i),t.idleTimeout=i},setCurrentPageName:function(e){t.currentPageName=e},resetRecordedPageTime:function(e){delete t.startStopTimes[e]},resetAllRecordedPageTimes:function(){for(var e=Object.keys(t.startStopTimes),i=0;i<e.length;i++)t.resetRecordedPageTime(e[i])},listenForVisibilityEvents:function(){t.getIfVisibleHandle().on("blur",function(){t.stopTimer()}),t.getIfVisibleHandle().on("focus",function(){t.startTimer()}),t.getIfVisibleHandle().on("idle",function(){t.idleTimeout>0&&t.stopTimer()}),t.getIfVisibleHandle().on("wakeup",function(){t.idleTimeout>0&&t.startTimer()})},initialize:function(){t.listenForVisibilityEvents(),t.startTimer()}};return t})}).call(this);
//# sourceMappingURL=./timeme.min.js.map