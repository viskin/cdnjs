/*! Moment Duration Format v1.1.0
 *  https://github.com/jsmreese/moment-duration-format 
 *  Date: 2014-04-23
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2014 John Madhavan-Reese
 *  Released under the MIT license
 */
;moment.duration.fn.format=function(){function k(n){var m;n=parseInt(n,10);if(!n||n<1){return""}m="";while(n){m+="0";n-=1}return m}function i(o,m,n){if(o==null){o=""}o=""+o;return(n?o:"")+k(m-o.length)+(n?"":o)}var j,h,d,a,e,g,c,f=[].slice.call(arguments),b=_.extend({},this.format.defaults),l=moment.duration(this);b.duration=this;_.each(f,function(m){if(typeof m==="string"||typeof m==="function"){b.template=m;return}if(typeof m==="number"){b.precision=m;return}if(_.isObject(m)){_.extend(b,m)}});d=b.types=(_.isArray(b.types)?b.types:b.types.split(" "));if(typeof b.template==="function"){b.template=b.template.apply(b)}j=new RegExp(_.map(d,function(m){return b[m].source}).join("|"),"g");a=function(m){return _.find(d,function(n){return b[n].test(m)})};h=_.map(b.template.match(j),function(n,m){var o=a(n),p=n.length;return{index:m,length:p,token:(o==="escape"?n.replace(b.escape,"$1"):n),type:((o==="escape"||o==="general")?null:o)}},this);e=_.intersection(d,_.unique(_.compact(_.pluck(h,"type"))));if(!e.length){return _.pluck(h,"token").join("")}_.each(e,function(m,n){var q,o,p;q=l.as(m);o=(q>0?Math.floor(q):Math.ceil(q));p=q-o;isLeast=((n+1)===e.length);isMost=(!n);_.each(h,function(r){if(r.type===m){_.extend(r,{value:q,wholeValue:o,decimalValue:p,isLeast:isLeast,isMost:isMost});if(isMost){if(b.forceLength==null&&r.length>1){b.forceLength=true}}}});l.subtract(o,m)});if(b.trim){g=false;c=_[b.trim==="left"?"reduce":"reduceRight"](h,function(o,n,m){if(!(g||(n.isLeast||(n.type!=null&&n.wholeValue)))){return m}g=true;return o},-1);if(c!==-1){h=_[b.trim==="left"?"rest":"first"](h,b.trim==="left"?c+1:c)}}g=false;if(b.trim==="right"){h.reverse()}h=_.map(h,function(m){var o,n;if(!m.type){return m.token}if(m.isLeast&&(b.precision<0)){o=(Math.floor(m.wholeValue*Math.pow(10,b.precision))*Math.pow(10,-b.precision)).toString()}else{o=m.wholeValue.toString()}o=o.replace(/^\-/,"");if(m.length>1&&(g||m.isMost||b.forceLength)){o=i(o,m.length)}if(m.isLeast&&(b.precision>0)){n=m.decimalValue.toString().replace(/^\-/,"").split(/\.|e\-/);switch(n.length){case 1:o+="."+i(n[0],b.precision,true).slice(0,b.precision);break;case 2:o+="."+i(n[1],b.precision,true).slice(0,b.precision);break;case 3:o+="."+i(k((+n[2])-1)+(n[0]||"0")+n[1],b.precision,true).slice(0,b.precision);break;default:throw"Moment Duration Format: unable to parse token decimal value."}}if(m.isMost&&m.value<0){o="-"+o}g=true;return o});if(b.trim==="right"){h.reverse()}return h.join("")};moment.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){function d(h,g){var e=h.length,f;while(e--){if(g(h[e])>0){f=h[e];break}}return f}var a=this.types,c=this.duration,b;if(typeof _.findLast==="function"){b=_.findLast(a,function(e){return c._data[e]})}else{b=d(a,function(e){return c._data[e]})}switch(b){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}};