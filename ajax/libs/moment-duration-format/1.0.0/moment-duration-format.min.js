/*! Moment Duration Format v1.0.0
 *  https://github.com/jsmreese/moment-duration-format 
 *  Date: 2013-12-27
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2013 John Madhavan-Reese
 *  Released under the MIT license
 */
;moment.duration.fn.format=function(){var h,g,c,a,d,e,f=[].slice.call(arguments),b=_.extend({},this.format.defaults),i=moment.duration(this);b.duration=this;_.each(f,function(j){if(typeof j==="string"||typeof j==="function"){b.template=j;return}if(typeof j==="number"){b.precision=j;return}if(_.isPlainObject(j)){_.extend(b,j)}});c=b.types=(_.isArray(b.types)?b.types:b.types.split(" "));if(typeof b.template==="function"){b.template=b.template.apply(b)}h=new RegExp(_.map(c,function(j){return b[j].source}).join("|"),"g");a=function(j){return _.find(c,function(k){return b[k].test(j)})};g=_.map(b.template.match(h),function(k,j){var l=a(k),m=k.length;return{index:j,length:m,token:(l==="escape"?k.replace(b.escape,"$1"):k),type:((l==="escape"||l==="general")?null:l)}},this);d=_.intersection(c,_.unique(_.compact(_.pluck(g,"type"))));if(!d.length){return _.pluck(g,"token").join("")}_.each(d,function(j,k){var n,l,m;n=i.as(j);l=Math.floor(n);m=n-l;isLeast=((k+1)===d.length);isMost=(!k);_.each(g,function(o){if(o.type===j){_.extend(o,{value:n,wholeValue:l,decimalValue:m,isLeast:isLeast,isMost:isMost});if(isMost){if(b.forceLength==null&&o.length>1){b.forceLength=true}}}});i.subtract(l,j)});if(b.trim){g=_[b.trim==="left"?"rest":"initial"](g,function(j){return !(j.isLeast||(j.type!=null&&j.wholeValue))})}e=false;if(b.trim==="right"){g.reverse()}g=_.map(g,function(j){var l,k;if(!j.type){return j.token}if(j.isLeast&&(b.precision<0)){l=Math.floor(j.wholeValue*Math.pow(10,b.precision))*Math.pow(10,-b.precision)}else{l=j.wholeValue.toString()}if(j.length>1&&(e||j.isMost||b.forceLength)){l=_.string.pad(l,j.length,"0")}if(j.isLeast&&(b.precision>0)){k=j.decimalValue.toString().split(/\.|e\-/);l+="."+_.string.rpad(k[1]?_.string.repeat("0",k[2])+k[1]:"0",b.precision,"0").slice(0,b.precision)}e=true;return l});if(b.trim==="right"){g.reverse()}return g.join("")};moment.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){var a=this.types,c=this.duration,b=_.findLast(a,function(d){return c._data[d]});switch(b){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}};