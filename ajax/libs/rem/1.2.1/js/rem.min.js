/**
 * Module: rem - v1.1.0
 * Description: A polyfill to parse CSS links and rewrite pixel equivalents into head for non supporting browsers
 * Date Built: 2014-02-26
 * Copyright (c) 2014  | Chuck Carpenter <chuck.carpenter@me.com>,Lucas Serven <lserven@gmail.com>;
**/
(function(e,t){"use strict";var n=function(){var e=document.createElement("div");e.style.cssText="font-size: 1rem;";return/rem/.test(e.style.fontSize)},r=function(){var e=document.getElementsByTagName("link"),t=[];for(var n=0;n<e.length;n++){if(e[n].rel.toLowerCase()==="stylesheet"&&e[n].getAttribute("data-norem")===null){t.push(e[n].href)}}return t},i=function(){if(m.length===0){m=r()}for(var e=0;e<m.length;e++){l(m[e],s,m[e],e)}},s=function(e,t){w.push(e.responseText);E.push(t);if(E.length===m.length){for(var n=0;n<E.length;n++){o(w[n],E[n])}if((m=g.slice(0)).length>0){E=[];w=[];g=[];i()}else{u()}}},o=function(e,t){var n=c(p(e)),r=/[\w\d\s\-\/\\\[\]:,.'"*()<>+~%#^$_=|@]+\{[\w\d\s\-\/\\%#:;,.'"*()]+\d*\.?\d+rem[\w\d\s\-\/\\%#:;,.'"*()]*\}/g,i=n.match(r),s=/\d*\.?\d+rem/g,o=n.match(s),u=/(.*\/)/,a=u.exec(t)[0],f=/@import (?:url\()?['"]?([^'\)"]*)['"]?\)?[^;]*/gm,l;while((l=f.exec(e))!==null){g.push(a+l[1])}if(i!==null&&i.length!==0){y=y.concat(i);b=b.concat(o)}},u=function(){var e=/[\w\d\s\-\/\\%#:,.'"*()]+\d*\.?\d+rem[\w\d\s\-\/\\%#:,.'"*()]*[;}]/g;for(var t=0;t<y.length;t++){v=v+y[t].substr(0,y[t].indexOf("{")+1);var n=y[t].match(e);for(var r=0;r<n.length;r++){v=v+n[r];if(r===n.length-1&&v[v.length-1]!=="}"){v=v+"\n}"}}}a()},a=function(){var e;for(var t=0;t<b.length;t++){e=parseFloat(b[t].substr(0,b[t].length-3));S[t]=Math.round(e*T)+"px"}f()},f=function(){for(var e=0;e<S.length;e++){if(S[e]){v=v.replace(b[e],S[e])}}var t=document.createElement("style");t.setAttribute("type","text/css");t.id="remReplace";document.getElementsByTagName("head")[0].appendChild(t);if(t.styleSheet){t.styleSheet.cssText=v}else{t.appendChild(document.createTextNode(v))}},l=function(t,n,r){try{var i=d();i.open("GET",t,true);i.send();var s=function(){var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");while(n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0]);return t>4?t:e}();if(s>=7){i.onreadystatechange=function(){if(i.readyState===4){n(i,r)}}}else{i.onreadystatechange=new function(){if(i.readyState===4){n(i,r)}}}}catch(o){if(e.XDomainRequest){var u=new XDomainRequest;u.open("get",t);u.onload=function(){n(u,r)};u.onerror=function(){return false};u.send()}}},c=function(e){var t=e.search(/\/\*/),n=e.search(/\*\//);if(t>-1&&n>t){e=e.substring(0,t)+e.substring(n+2);return c(e)}else{return e}},h=function(){if(e.matchMedia||e.msMatchMedia){return true}return false},p=function(e){if(!h()){e=e.replace(/@media[\s\S]*?\}\s*\}/,"")}return e},d=function(){if(e.XMLHttpRequest){return new XMLHttpRequest}else{try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}}};if(!n()){var v="",m=[],g=[],y=[],b=[],w=[],E=[],S=[],x=document.getElementsByTagName("body")[0],T="";if(x.currentStyle){if(x.currentStyle.fontSize.indexOf("px")>=0){T=x.currentStyle.fontSize.replace("px","")}else if(x.currentStyle.fontSize.indexOf("em")>=0){T=x.currentStyle.fontSize.replace("em","")}else if(x.currentStyle.fontSize.indexOf("pt")>=0){T=x.currentStyle.fontSize.replace("pt","")}else{T=x.currentStyle.fontSize.replace("%","")/100*16}}else if(e.getComputedStyle){T=document.defaultView.getComputedStyle(x,null).getPropertyValue("font-size").replace("px","")}i()}})(window)
