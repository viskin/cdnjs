/*! Lity - v0.0.1 - 2015-02-24
* http://sorgalla.com/lity/
* Copyright (c) 2015 Jan Sorgalla; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery","imagesloaded"],function(c,d){return b(a,c,d)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,require("jquery"),require("imagesloaded")):a.lity=b(a,a.jQuery||a.Zepto,a.imagesLoaded)}(window,function(a,b,c){"use strict";function d(a,b){if(u){var c=function(){b(),b=function(){}};a.one(u,c),setTimeout(c,500)}else b()}function e(a,b){var c=l.call(arguments),d=c.shift();if(a.bind)return d.bind.apply(a,c);for(var e,f=c.slice(1),g=function(){if(this instanceof e){var a=d.apply(this,f.concat(c));return Object(a)===a?a:this}return d.apply(b,f.concat(c))},h=Math.max(0,d.length-f.length),i=[],j=0;h>j;j++)i.push("$"+j);return e=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")(g),d.prototype&&(w.prototype=d.prototype,e.prototype=new w,w.prototype=null),e}function f(a,c,d){if(1===arguments.length)return b.extend({},a);if("string"==typeof c){if("undefined"==typeof d)return"undefined"==typeof a[c]?null:a[c];a[c]=d}else b.extend(a,c);return this}function g(){return"file:"===a.location.protocol?"http:":""}function h(a,d){if(!o.test(a))return!1;var e=b('<img src="'+a+'">'),f=b.Deferred();return d.on("lity:resize",function(a,b){e.css("max-height",Math.floor(b)+"px")}),c(e.get(0),function(){f.resolve(e)}),f.promise()}function i(a){if(!p.test(a))return!1;var b;return a.indexOf("youtube.")>-1&&a.indexOf("/embed")<0&&(b=q.exec(a)[1],a=g()+"//www.youtube.com/embed/"+b+"?autoplay=1"),a.indexOf("vimeo.")>-1&&a.indexOf("player.vimeo.")<0&&(b=r.exec(a.split("//")[1])[1],a=g()+"//player.vimeo.com/video/"+b+"?autoplay=1"),a.indexOf("//maps.google.")>-1&&a.indexOf("output=embed")<0&&(a+="&output=embed"),'<div class="lity-iframe-container">                    <iframe frameborder="0" allowfullscreen src="'+a+'"></iframe>                </div>'}function j(a){try{return b(a).clone()}catch(c){return!1}}function k(a){function c(a){l&&l.find(".lity-loader").each(function(){var a=b(this);d(a,function(){a.remove()})}).end().removeClass("lity-loading").find(".lity-content").empty().append(b(a).removeClass("lity-hide")).trigger("lity:ready",[a,k])}function g(){if(l){var a=m.documentElement.clientHeight?m.documentElement.clientHeight:Math.round(n.height());l.trigger("lity:resize",[a])}}function h(a,d,e){l=a.appendTo("body"),setTimeout(function(){l.addClass("lity-opened lity-"+d).on("click","[data-lity-close]",function(a){b(a.target).is("[data-lity-close]")&&j()}).trigger("lity:open",[k]),n.on("resize",g),g(),b.when(e).done(c)},0)}function i(a){var c,d,e=b(v);if(o.handler&&p[o.handler])d=p[o.handler](a,e,k),c=o.handler;else{var f=b.extend({},p),g={};b.each(["iframe","inline"],function(a,b){f[b]&&(g[b]=f[b]),delete f[b]});var i=function(b,f){return f?(d=f(a,e,k),d?(c=b,!1):void 0):!0};b.each(f,i),!c&&b.each(g,i)}return d&&b.when(j()).done(function(){h(e,c,d)}),!!d}function j(){if(l){n.off("resize",g),l.trigger("lity:close",[k]).removeClass("lity-opened").addClass("lity-closed");var a=l;l=null;var c=b.Deferred(),e=function(){a.remove(),c.resolve()};return d(a,e),c.promise()}}function k(a){var c,d=a&&!!a.preventDefault;if(d||(c=a),!c){var e=b(this);c=e.attr("data-lity-target")||e.attr("href")||e.attr("src"),k.options(e.data("lity-options")||e.data("lity")||{})}c&&i(c)&&d&&a.preventDefault()}var l,o=b.extend({},t),p=b.extend({},s);return k.handlers=e(f,k,p),k.options=e(f,k,o),k.close=function(){return j(),k},k.options(a)}var l=Array.prototype.slice,m=a.document,n=b(a),o=/\.(png|jpg|jpeg|gif|tiff|bmp)(\?\S*)?$/i,p=/^([a-z]+:)?\/\//i,q=/v=([^&]+)/,r=/\/([^\?&]+)$/,s={image:h,iframe:i,inline:j},t={},u=function(){var a=m.createElement("div"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return b[c];return!1}(),v='<div class="lity lity-loading" tabindex="-1">                    <div class="lity-wrap" data-lity-close>                        <div class="lity-loader">Loading...</div>                        <div class="lity-container">                            <div class="lity-content"></div>                            <button class="lity-close" type="button" title="Close (Esc)" data-lity-close>Ã—</button>                         </div>                     </div>                 </div>                ',w=function(){},x=function(a){return k(a)};return x.version="0.0.1",x.handlers=e(f,x,s),x.options=e(f,x,t),b(m).on("click","[data-lity]",k()),x});