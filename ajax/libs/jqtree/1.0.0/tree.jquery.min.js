(function e(b,g,d){function c(k,i){if(!g[k]){if(!b[k]){var h=typeof require=="function"&&require;if(!i&&h){return h(k,!0)}if(a){return a(k,!0)}throw new Error("Cannot find module '"+k+"'")}var j=g[k]={exports:{}};b[k][0].call(j.exports,function(l){var m=b[k][1][l];return c(m?m:l)},j,j.exports,e,b,g,d)}return g[k].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(){var h,j,l,d,f,k,g={}.hasOwnProperty,i=function(p,n){for(var m in n){if(g.call(n,m)){p[m]=n[m]}}function o(){this.constructor=p}o.prototype=n.prototype;p.prototype=new o();p.__super__=n.prototype;return p};k=b("./node");d=k.Position;h=(function(){function m(n){this.tree_widget=n;this.hovered_area=null;this.$ghost=null;this.hit_areas=[];this.is_dragging=false;this.current_item=null}m.prototype.mouseCapture=function(o){var n,p;n=$(o.target);if(!this.mustCaptureElement(n)){return null}if(this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(n)){return null}p=this.tree_widget._getNodeElement(n);if(p&&this.tree_widget.options.onCanMove){if(!this.tree_widget.options.onCanMove(p.node)){p=null}}this.current_item=p;return this.current_item!==null};m.prototype.mouseStart=function(n){var o;this.refresh();o=$(n.target).offset();this.drag_element=new j(this.current_item.node,n.page_x-o.left,n.page_y-o.top,this.tree_widget.element);this.is_dragging=true;this.current_item.$element.addClass("jqtree-moving");return true};m.prototype.mouseDrag=function(n){var p,o;this.drag_element.move(n.page_x,n.page_y);p=this.findHoveredArea(n.page_x,n.page_y);o=this.canMoveToArea(p);if(o&&p){if(!p.node.isFolder()){this.stopOpenFolderTimer()}if(this.hovered_area!==p){this.hovered_area=p;if(this.mustOpenFolderTimer(p)){this.startOpenFolderTimer(p.node)}else{this.stopOpenFolderTimer()}this.updateDropHint()}}else{this.removeHover();this.removeDropHint();this.stopOpenFolderTimer()}return true};m.prototype.mustCaptureElement=function(n){return !n.is("input,select")};m.prototype.canMoveToArea=function(n){var o;if(!n){return false}else{if(this.tree_widget.options.onCanMoveTo){o=d.getName(n.position);return this.tree_widget.options.onCanMoveTo(this.current_item.node,n.node,o)}else{return true}}};m.prototype.mouseStop=function(n){this.moveItem(n);this.clear();this.removeHover();this.removeDropHint();this.removeHitAreas();if(this.current_item){this.current_item.$element.removeClass("jqtree-moving");this.current_item=null}this.is_dragging=false;return false};m.prototype.refresh=function(){this.removeHitAreas();if(this.current_item){this.generateHitAreas();this.current_item=this.tree_widget._getNodeElementForNode(this.current_item.node);if(this.is_dragging){return this.current_item.$element.addClass("jqtree-moving")}}};m.prototype.removeHitAreas=function(){return this.hit_areas=[]};m.prototype.clear=function(){this.drag_element.remove();return this.drag_element=null};m.prototype.removeDropHint=function(){if(this.previous_ghost){return this.previous_ghost.remove()}};m.prototype.removeHover=function(){return this.hovered_area=null};m.prototype.generateHitAreas=function(){var n;n=new l(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom);return this.hit_areas=n.generate()};m.prototype.findHoveredArea=function(o,t){var r,q,s,n,p;q=this.getTreeDimensions();if(o<q.left||t<q.top||o>q.right||t>q.bottom){return null}n=0;s=this.hit_areas.length;while(n<s){p=(n+s)>>1;r=this.hit_areas[p];if(t<r.top){s=p}else{if(t>r.bottom){n=p+1}else{return r}}}return null};m.prototype.mustOpenFolderTimer=function(o){var n;n=o.node;return n.isFolder()&&!n.is_open&&o.position===d.INSIDE};m.prototype.updateDropHint=function(){var n;if(!this.hovered_area){return}this.removeDropHint();n=this.tree_widget._getNodeElementForNode(this.hovered_area.node);return this.previous_ghost=n.addDropHint(this.hovered_area.position)};m.prototype.startOpenFolderTimer=function(o){var n;n=(function(p){return function(){return p.tree_widget._openNode(o,p.tree_widget.options.slide,function(){p.refresh();return p.updateDropHint()})}})(this);this.stopOpenFolderTimer();return this.open_folder_timer=setTimeout(n,this.tree_widget.options.openFolderDelay)};m.prototype.stopOpenFolderTimer=function(){if(this.open_folder_timer){clearTimeout(this.open_folder_timer);return this.open_folder_timer=null}};m.prototype.moveItem=function(p){var q,s,r,n,o,t;if(this.hovered_area&&this.hovered_area.position!==d.NONE&&this.canMoveToArea(this.hovered_area)){r=this.current_item.node;t=this.hovered_area.node;n=this.hovered_area.position;o=r.parent;if(n===d.INSIDE){this.hovered_area.node.is_open=true}q=(function(u){return function(){u.tree_widget.tree.moveNode(r,t,n);u.tree_widget.element.empty();return u.tree_widget._refreshElements()}})(this);s=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:r,target_node:t,position:d.getName(n),previous_parent:o,do_move:q,original_event:p.original_event}});if(!s.isDefaultPrevented()){return q()}}};m.prototype.getTreeDimensions=function(){var n;n=this.tree_widget.element.offset();return{left:n.left,top:n.top,right:n.left+this.tree_widget.element.width(),bottom:n.top+this.tree_widget.element.height()+16}};return m})();f=(function(){function m(n){this.tree=n}m.prototype.iterate=function(){var n,o;n=true;o=(function(p){return function(s,q){var z,r,y,v,w,t,x,u;w=(s.is_open||!s.element)&&s.hasChildren();if(s.element){z=$(s.element);if(!z.is(":visible")){return}if(n){p.handleFirstNode(s,z);n=false}if(!s.hasChildren()){p.handleNode(s,q,z)}else{if(s.is_open){if(!p.handleOpenFolder(s,z)){w=false}}else{p.handleClosedFolder(s,q,z)}}}if(w){y=s.children.length;u=s.children;for(v=t=0,x=u.length;t<x;v=++t){r=u[v];if(v===(y-1)){o(s.children[v],null)}else{o(s.children[v],s.children[v+1])}}if(s.is_open){return p.handleAfterOpenFolder(s,q,z)}}}})(this);return o(this.tree,null)};m.prototype.handleNode=function(p,o,n){};m.prototype.handleOpenFolder=function(o,n){};m.prototype.handleClosedFolder=function(p,o,n){};m.prototype.handleAfterOpenFolder=function(p,o,n){};m.prototype.handleFirstNode=function(o,n){};return m})();l=(function(m){i(n,m);function n(o,q,p){n.__super__.constructor.call(this,o);this.current_node=q;this.tree_bottom=p}n.prototype.generate=function(){this.positions=[];this.last_top=0;this.iterate();return this.generateHitAreas(this.positions)};n.prototype.getTop=function(o){return o.offset().top};n.prototype.addPosition=function(q,o,r){var p;p={top:r,node:q,position:o};this.positions.push(p);return this.last_top=r};n.prototype.handleNode=function(q,p,o){var r;r=this.getTop(o);if(q===this.current_node){this.addPosition(q,d.NONE,r)}else{this.addPosition(q,d.INSIDE,r)}if(p===this.current_node||q===this.current_node){return this.addPosition(q,d.NONE,r)}else{return this.addPosition(q,d.AFTER,r)}};n.prototype.handleOpenFolder=function(p,o){if(p===this.current_node){return false}if(p.children[0]!==this.current_node){this.addPosition(p,d.INSIDE,this.getTop(o))}return true};n.prototype.handleClosedFolder=function(q,p,o){var r;r=this.getTop(o);if(q===this.current_node){return this.addPosition(q,d.NONE,r)}else{this.addPosition(q,d.INSIDE,r);if(p!==this.current_node){return this.addPosition(q,d.AFTER,r)}}};n.prototype.handleFirstNode=function(p,o){if(p!==this.current_node){return this.addPosition(p,d.BEFORE,this.getTop($(p.element)))}};n.prototype.handleAfterOpenFolder=function(q,p,o){if(q===this.current_node.node||p===this.current_node.node){return this.addPosition(q,d.NONE,this.last_top)}else{return this.addPosition(q,d.AFTER,this.last_top)}};n.prototype.generateHitAreas=function(q){var u,r,o,t,s,p;t=-1;u=[];r=[];for(s=0,p=q.length;s<p;s++){o=q[s];if(o.top!==t&&u.length){if(u.length){this.generateHitAreasForGroup(r,u,t,o.top)}t=o.top;u=[]}u.push(o)}this.generateHitAreasForGroup(r,u,t,this.tree_bottom);return r};n.prototype.generateHitAreasForGroup=function(q,r,u,o){var p,w,s,t,v;v=Math.min(r.length,4);p=Math.round((o-u)/v);w=u;s=0;while(s<v){t=r[s];q.push({top:w,bottom:w+p,node:t.node,position:t.position});w+=p;s+=1}return null};return n})(f);j=(function(){function m(p,o,n,q){this.offset_x=o;this.offset_y=n;this.$element=$('<span class="jqtree-title jqtree-dragging">'+p.name+"</span>");this.$element.css("position","absolute");q.append(this.$element)}m.prototype.move=function(o,n){return this.$element.offset({left:o-this.offset_x,top:n-this.offset_y})};m.prototype.remove=function(){return this.$element.remove()};return m})();c.exports=h}).call(this)},{"./node":6}],2:[function(b,c,a){(function(){var f,g,h,i,d;i=b("./node_element");g=i.NodeElement;d=b("./util");h=d.html_escape;f=(function(){function j(k){this.tree_widget=k;this.opened_icon_element=this.createButtonElement(k.options.openedIcon);this.closed_icon_element=this.createButtonElement(k.options.closedIcon)}j.prototype.render=function(k){if(k&&k.parent){return this.renderFromNode(k)}else{return this.renderFromRoot()}};j.prototype.renderFromRoot=function(){var k;k=this.tree_widget.element;k.empty();return this.createDomElements(k[0],this.tree_widget.tree.children,true,true)};j.prototype.renderFromNode=function(n){var m,k,l;m=$(n.element);l=new g(n.parent,this.tree_widget);k=this.createLi(n);this.attachNodeData(n,k);m.after(k);m.remove();if(n.children){return this.createDomElements(k,n.children,false,false)}};j.prototype.createDomElements=function(o,l,s,m){var k,r,p,n,q;p=this.createUl(s);o.appendChild(p);for(n=0,q=l.length;n<q;n++){k=l[n];r=this.createLi(k);p.appendChild(r);this.attachNodeData(k,r);if(k.hasChildren()){this.createDomElements(r,k.children,false,k.is_open)}}return null};j.prototype.attachNodeData=function(l,k){l.element=k;return $(k).data("node",l)};j.prototype.createUl=function(m){var l,k;if(m){l="jqtree-tree"}else{l=""}k=document.createElement("ul");k.className="jqtree_common "+l;return k};j.prototype.createLi=function(l){var k;if(l.isFolder()){k=this.createFolderLi(l)}else{k=this.createNodeLi(l)}if(this.tree_widget.options.onCreateLi){this.tree_widget.options.onCreateLi(l,$(k))}return k};j.prototype.createFolderLi=function(o){var m,p,l,n,k,r,s,q;m=this.getButtonClasses(o);k=this.getFolderClasses(o);n=this.escapeIfNecessary(o.name);if(o.is_open){r=this.opened_icon_element}else{r=this.closed_icon_element}s=document.createElement("li");s.className="jqtree_common "+k;l=document.createElement("div");l.className="jqtree-element jqtree_common";s.appendChild(l);p=document.createElement("a");p.className="jqtree_common "+m;p.appendChild(r.cloneNode(false));l.appendChild(p);q=document.createElement("span");q.className="jqtree_common jqtree-title jqtree-title-folder";l.appendChild(q);q.innerHTML=n;return s};j.prototype.createNodeLi=function(n){var p,q,m,k,o,l;o=["jqtree_common"];if(this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(n)){o.push("jqtree-selected")}p=o.join(" ");m=this.escapeIfNecessary(n.name);k=document.createElement("li");k.className=p;q=document.createElement("div");q.className="jqtree-element jqtree_common";k.appendChild(q);l=document.createElement("span");l.className="jqtree-title jqtree_common";l.innerHTML=m;q.appendChild(l);return k};j.prototype.getButtonClasses=function(l){var k;k=["jqtree-toggler"];if(!l.is_open){k.push("jqtree-closed")}return k.join(" ")};j.prototype.getFolderClasses=function(l){var k;k=["jqtree-folder"];if(!l.is_open){k.push("jqtree-closed")}if(this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(l)){k.push("jqtree-selected")}if(l.is_loading){k.push("jqtree-loading")}return k.join(" ")};j.prototype.escapeIfNecessary=function(k){if(this.tree_widget.options.autoEscape){return h(k)}else{return k}};j.prototype.createButtonElement=function(k){var l;if(typeof k==="string"){l=document.createElement("div");l.innerHTML=k;return document.createTextNode(l.innerHTML)}else{return $(k)[0]}};return j})();c.exports=f}).call(this)},{"./node_element":7,"./util":12}],3:[function(b,c,a){(function(){var o,q,s,g,i,h,t,j,v,d,k,n,l,r,f,p,m={}.hasOwnProperty,u=function(z,x){for(var w in x){if(m.call(x,w)){z[w]=x[w]}}function y(){this.constructor=z}y.prototype=x.prototype;z.prototype=new y();z.__super__=x.prototype;return z};p=b("./version");o=b("./drag_and_drop_handler");q=b("./elements_renderer");i=b("./key_handler");h=b("./mouse.widget");d=b("./save_state_handler");k=b("./scroll_handler");n=b("./select_node_handler");l=b("./simple.widget");r=b("./node");t=r.Node;v=r.Position;f=b("./node_element");j=f.NodeElement;s=f.FolderElement;g=(function(x){u(w,x);function w(){return w.__super__.constructor.apply(this,arguments)}w.prototype.defaults={autoOpen:false,saveState:false,dragAndDrop:false,selectable:true,useContextMenu:true,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:true,dataUrl:null,closedIcon:"&#x25ba;",openedIcon:"&#x25bc;",slide:true,nodeClass:t,dataFilter:null,keyboardSupport:true,openFolderDelay:500};w.prototype.toggle=function(z,y){if(y==null){y=null}if(y===null){y=this.options.slide}if(z.is_open){return this.closeNode(z,y)}else{return this.openNode(z,y)}};w.prototype.getTree=function(){return this.tree};w.prototype.selectNode=function(y){return this._selectNode(y,false)};w.prototype._selectNode=function(A,y){var C,B,D,z;if(y==null){y=false}if(!this.select_node_handler){return}C=(function(E){return function(){if(E.options.onCanSelectNode){return E.options.selectable&&E.options.onCanSelectNode(A)}else{return E.options.selectable}}})(this);D=(function(E){return function(){var F;F=A.parent;if(F&&F.parent&&!F.is_open){return E.openNode(F,false)}}})(this);z=(function(E){return function(){if(E.options.saveState){return E.save_state_handler.saveState()}}})(this);if(!A){this._deselectCurrentNode();z();return}if(!C()){return}if(this.select_node_handler.isNodeSelected(A)){if(y){this._deselectCurrentNode();this._triggerEvent("tree.select",{node:null,previous_node:A})}}else{B=this.getSelectedNode();this._deselectCurrentNode();this.addToSelection(A);this._triggerEvent("tree.select",{node:A,deselected_node:B});D()}return z()};w.prototype.getSelectedNode=function(){if(this.select_node_handler){return this.select_node_handler.getSelectedNode()}else{return null}};w.prototype.toJson=function(){return JSON.stringify(this.tree.getData())};w.prototype.loadData=function(y,z){return this._loadData(y,z)};w.prototype.loadDataFromUrl=function(y,A,z){if($.type(y)!=="string"){z=A;A=y;y=null}return this._loadDataFromUrl(y,A,z)};w.prototype.reload=function(){return this.loadDataFromUrl()};w.prototype._loadDataFromUrl=function(D,E,A){var F,C,z,G,B,y;F=null;C=(function(H){return function(){if(E){F=$(E.element)}else{F=H.element}return F.addClass("jqtree-loading")}})(this);y=function(){if(F){return F.removeClass("jqtree-loading")}};B=function(){if($.type(D)==="string"){D={url:D}}if(!D.method){return D.method="get"}};z=(function(H){return function(I){y();H._loadData(I,E);if(A&&$.isFunction(A)){return A()}}})(this);G=(function(H){return function(){B();return $.ajax({url:D.url,data:D.data,type:D.method.toUpperCase(),cache:false,dataType:"json",success:function(I){var J;if($.isArray(I)||typeof I==="object"){J=I}else{J=$.parseJSON(I)}if(H.options.dataFilter){J=H.options.dataFilter(J)}return z(J)},error:function(I){y();if(H.options.onLoadFailed){return H.options.onLoadFailed(I)}}})}})(this);if(!D){D=this._getDataUrlInfo(E)}C();if(!D){y()}else{if($.isArray(D)){z(D)}else{return G()}}};w.prototype._loadData=function(y,A){var B,z;if(A==null){A=null}B=(function(C){return function(){var G,E,F,D;if(C.select_node_handler){E=C.select_node_handler.getSelectedNodesUnder(A);for(F=0,D=E.length;F<D;F++){G=E[F];C.select_node_handler.removeFromSelection(G)}}return null}})(this);z=(function(C){return function(){A.loadFromData(y);A.load_on_demand=false;A.is_loading=false;return C._refreshElements(A)}})(this);if(!y){return}this._triggerEvent("tree.load_data",{tree_data:y});if(!A){this._initTree(y)}else{B();z()}if(this.isDragging()){return this.dnd_handler.refresh()}};w.prototype.getNodeById=function(y){return this.tree.getNodeById(y)};w.prototype.getNodeByName=function(y){return this.tree.getNodeByName(y)};w.prototype.getNodesByProperty=function(y,z){return this.tree.getNodesByProperty(y,z)};w.prototype.openNode=function(z,y){if(y==null){y=null}if(y===null){y=this.options.slide}return this._openNode(z,y)};w.prototype._openNode=function(A,y,B){var C,z;if(y==null){y=true}C=(function(D){return function(F,G,E){var H;H=new s(F,D);return H.open(E,G)}})(this);if(A.isFolder()){if(A.load_on_demand){return this._loadFolderOnDemand(A,y,B)}else{z=A.parent;while(z){if(z.parent){C(z,false,null)}z=z.parent}C(A,y,B);return this._saveState()}}};w.prototype._loadFolderOnDemand=function(z,y,A){if(y==null){y=true}z.is_loading=true;return this._loadDataFromUrl(null,z,(function(B){return function(){return B._openNode(z,y,A)}})(this))};w.prototype.closeNode=function(z,y){if(y==null){y=null}if(y===null){y=this.options.slide}if(z.isFolder()){new s(z,this).close(y);return this._saveState()}};w.prototype.isDragging=function(){if(this.dnd_handler){return this.dnd_handler.is_dragging}else{return false}};w.prototype.refreshHitAreas=function(){return this.dnd_handler.refresh()};w.prototype.addNodeAfter=function(z,y){var A;A=y.addAfter(z);this._refreshElements(y.parent);return A};w.prototype.addNodeBefore=function(z,y){var A;A=y.addBefore(z);this._refreshElements(y.parent);return A};w.prototype.addParentNode=function(z,y){var A;A=y.addParent(z);this._refreshElements(A.parent);return A};w.prototype.removeNode=function(z){var y;y=z.parent;if(y){this.select_node_handler.removeFromSelection(z,true);z.remove();return this._refreshElements(y)}};w.prototype.appendNode=function(y,z){z=z||this.tree;r=z.append(y);this._refreshElements(z);return r};w.prototype.prependNode=function(y,z){if(!z){z=this.tree}r=z.prepend(y);this._refreshElements(z);return r};w.prototype.updateNode=function(y,A){var z;z=A.id&&A.id!==y.id;if(z){this.tree.removeNodeFromIndex(y)}y.setData(A);if(z){this.tree.addNodeToIndex(y)}this.renderer.renderFromNode(y);return this._selectCurrentNode()};w.prototype.moveNode=function(A,B,y){var z;z=v.nameToIndex(y);this.tree.moveNode(A,B,z);return this._refreshElements()};w.prototype.getStateFromStorage=function(){return this.save_state_handler.getStateFromStorage()};w.prototype.addToSelection=function(y){if(y){this.select_node_handler.addToSelection(y);this._getNodeElementForNode(y).select();return this._saveState()}};w.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()};w.prototype.isNodeSelected=function(y){return this.select_node_handler.isNodeSelected(y)};w.prototype.removeFromSelection=function(y){this.select_node_handler.removeFromSelection(y);this._getNodeElementForNode(y).deselect();return this._saveState()};w.prototype.scrollToNode=function(z){var y,A;y=$(z.element);A=y.offset().top-this.$el.offset().top;return this.scroll_handler.scrollTo(A)};w.prototype.getState=function(){return this.save_state_handler.getState()};w.prototype.setState=function(y){this.save_state_handler.setInitialState(y);return this._refreshElements()};w.prototype.setOption=function(y,z){return this.options[y]=z};w.prototype.moveDown=function(){if(this.key_handler){return this.key_handler.moveDown()}};w.prototype.moveUp=function(){if(this.key_handler){return this.key_handler.moveUp()}};w.prototype.getVersion=function(){return p};w.prototype._init=function(){w.__super__._init.call(this);this.element=this.$el;this.mouse_delay=300;this.is_initialized=false;this.renderer=new q(this);if(d!=null){this.save_state_handler=new d(this)}else{this.options.saveState=false}if(n!=null){this.select_node_handler=new n(this)}if(o!=null){this.dnd_handler=new o(this)}else{this.options.dragAndDrop=false}if(k!=null){this.scroll_handler=new k(this)}if((i!=null)&&(n!=null)){this.key_handler=new i(this)}this._initData();this.element.click($.proxy(this._click,this));this.element.dblclick($.proxy(this._dblclick,this));if(this.options.useContextMenu){return this.element.bind("contextmenu",$.proxy(this._contextmenu,this))}};w.prototype._deinit=function(){this.element.empty();this.element.unbind();if(this.key_handler){this.key_handler.deinit()}this.tree=null;return w.__super__._deinit.call(this)};w.prototype._initData=function(){if(this.options.data){return this._loadData(this.options.data)}else{return this._loadDataFromUrl(this._getDataUrlInfo())}};w.prototype._getDataUrlInfo=function(z){var y,A;y=this.options.dataUrl||this.element.data("url");A=(function(B){return function(){var E,D,C;C={url:y};if(z&&z.id){E={node:z.id};C.data=E}else{D=B._getNodeIdToBeSelected();if(D){E={selected_node:D};C.data=E}}return C}})(this);if($.isFunction(y)){return y(z)}else{if($.type(y)==="string"){return A()}else{return y}}};w.prototype._getNodeIdToBeSelected=function(){if(this.options.saveState){return this.save_state_handler.getNodeIdToBeSelected()}else{return null}};w.prototype._initTree=function(z){var y;this.tree=new this.options.nodeClass(null,true,this.options.nodeClass);if(this.select_node_handler){this.select_node_handler.clear()}this.tree.loadFromData(z);y=this._setInitialState();this._refreshElements();if(y){this._setInitialStateOnDemand()}if(!this.is_initialized){this.is_initialized=true;return this._triggerEvent("tree.init")}};w.prototype._setInitialState=function(){var B,C,z,y,A;y=(function(D){return function(){var E,F;if(!(D.options.saveState&&D.save_state_handler)){return[false,false]}else{F=D.save_state_handler.getStateFromStorage();if(!F){return[false,false]}else{E=D.save_state_handler.setInitialState(F);return[true,E]}}}})(this);B=(function(D){return function(){var E,F;if(D.options.autoOpen===false){return false}E=D._getAutoOpenMaxLevel();F=false;D.tree.iterate(function(G,H){if(G.load_on_demand){F=true;return false}else{if(!G.hasChildren()){return false}else{G.is_open=true;return H!==E}}});return F}})(this);A=y(),C=A[0],z=A[1];if(!C){z=B()}return z};w.prototype._setInitialStateOnDemand=function(){var z,y;y=(function(A){return function(){var B;if(!(A.options.saveState&&A.save_state_handler)){return false}else{B=A.save_state_handler.getStateFromStorage();if(!B){return false}else{A.save_state_handler.setInitialStateOnDemand(B);return true}}}})(this);z=(function(A){return function(){var E,D,C,B;C=A._getAutoOpenMaxLevel();D=[];E=function(F){return A._openNode(F,false,B)};B=function(){return A.tree.iterate(function(F,G){if(F.load_on_demand){if(!F.is_loading){E(F)}return false}else{A._openNode(F,false);return G!==C}})};return B()}})(this);if(!y()){return z()}};w.prototype._getAutoOpenMaxLevel=function(){if(this.options.autoOpen===true){return -1}else{return parseInt(this.options.autoOpen)}};w.prototype._refreshElements=function(y){if(y==null){y=null}this.renderer.render(y);return this._triggerEvent("tree.refresh")};w.prototype._click=function(z){var A,y;A=this._getClickTarget(z.target);if(A){if(A.type==="button"){this.toggle(A.node,this.options.slide);z.preventDefault();return z.stopPropagation()}else{if(A.type==="label"){r=A.node;y=this._triggerEvent("tree.click",{node:r,click_event:z});if(!y.isDefaultPrevented()){return this._selectNode(r,true)}}}}};w.prototype._dblclick=function(y){var z;z=this._getClickTarget(y.target);if(z&&z.type==="label"){return this._triggerEvent("tree.dblclick",{node:z.node,click_event:y})}};w.prototype._getClickTarget=function(A){var B,z,y;y=$(A);B=y.closest(".jqtree-toggler");if(B.length){r=this._getNode(B);if(r){return{type:"button",node:r}}}else{z=y.closest(".jqtree-element");if(z.length){r=this._getNode(z);if(r){return{type:"label",node:r}}}}return null};w.prototype._getNode=function(y){var z;z=y.closest("li.jqtree_common");if(z.length===0){return null}else{return z.data("node")}};w.prototype._getNodeElementForNode=function(y){if(y.isFolder()){return new s(y,this)}else{return new j(y,this)}};w.prototype._getNodeElement=function(y){r=this._getNode(y);if(r){return this._getNodeElementForNode(r)}else{return null}};w.prototype._contextmenu=function(z){var y;y=$(z.target).closest("ul.jqtree-tree .jqtree-element");if(y.length){r=this._getNode(y);if(r){z.preventDefault();z.stopPropagation();this._triggerEvent("tree.contextmenu",{node:r,click_event:z});return false}}};w.prototype._saveState=function(){if(this.options.saveState){return this.save_state_handler.saveState()}};w.prototype._mouseCapture=function(y){if(this.options.dragAndDrop){return this.dnd_handler.mouseCapture(y)}else{return false}};w.prototype._mouseStart=function(y){if(this.options.dragAndDrop){return this.dnd_handler.mouseStart(y)}else{return false}};w.prototype._mouseDrag=function(z){var y;if(this.options.dragAndDrop){y=this.dnd_handler.mouseDrag(z);if(this.scroll_handler){this.scroll_handler.checkScrolling()}return y}else{return false}};w.prototype._mouseStop=function(y){if(this.options.dragAndDrop){return this.dnd_handler.mouseStop(y)}else{return false}};w.prototype._triggerEvent=function(A,y){var z;z=$.Event(A);$.extend(z,y);this.element.trigger(z);return z};w.prototype.testGenerateHitAreas=function(y){this.dnd_handler.current_item=this._getNodeElementForNode(y);this.dnd_handler.generateHitAreas();return this.dnd_handler.hit_areas};w.prototype._selectCurrentNode=function(){r=this.getSelectedNode();if(r){f=this._getNodeElementForNode(r);if(f){return f.select()}}};w.prototype._deselectCurrentNode=function(){r=this.getSelectedNode();if(r){return this.removeFromSelection(r)}};return w})(h);l.register(g,"tree")}).call(this)},{"./drag_and_drop_handler":1,"./elements_renderer":2,"./key_handler":4,"./mouse.widget":5,"./node":6,"./node_element":7,"./save_state_handler":8,"./scroll_handler":9,"./select_node_handler":10,"./simple.widget":11,"./version":13}],4:[function(b,c,a){(function(){var f,d=function(g,h){return function(){return g.apply(h,arguments)}};f=(function(){var k,h,j,g;h=37;g=38;j=39;k=40;function i(l){this.selectNode=d(this.selectNode,this);this.tree_widget=l;if(l.options.keyboardSupport){$(document).bind("keydown.jqtree",$.proxy(this.handleKeyDown,this))}}i.prototype.deinit=function(){return $(document).unbind("keydown.jqtree")};i.prototype.moveDown=function(){var l;l=this.tree_widget.getSelectedNode();if(l){return this.selectNode(l.getNextNode())}else{return false}};i.prototype.moveUp=function(){var l;l=this.tree_widget.getSelectedNode();if(l){return this.selectNode(l.getPreviousNode())}else{return false}};i.prototype.moveRight=function(){var l;l=this.tree_widget.getSelectedNode();if(l&&l.isFolder()&&!l.is_open){this.tree_widget.openNode(l);return false}else{return true}};i.prototype.moveLeft=function(){var l;l=this.tree_widget.getSelectedNode();if(l&&l.isFolder()&&l.is_open){this.tree_widget.closeNode(l);return false}else{return true}};i.prototype.handleKeyDown=function(m){var l;if(!this.tree_widget.options.keyboardSupport){return true}if($(document.activeElement).is("textarea,input,select")){return true}if(!this.tree_widget.getSelectedNode()){return true}l=m.which;switch(l){case k:return this.moveDown();case g:return this.moveUp();case j:return this.moveRight();case h:return this.moveLeft()}return true};i.prototype.selectNode=function(l){if(!l){return true}else{this.tree_widget.selectNode(l);if(this.tree_widget.scroll_handler&&(!this.tree_widget.scroll_handler.isScrolledIntoView($(l.element).find(".jqtree-element")))){this.tree_widget.scrollToNode(l)}return false}};return i})();c.exports=f}).call(this)},{}],5:[function(b,c,a){(function(){var h,g,d={}.hasOwnProperty,f=function(l,j){for(var i in j){if(d.call(j,i)){l[i]=j[i]}}function k(){this.constructor=l}k.prototype=j.prototype;l.prototype=new k();l.__super__=j.prototype;return l};g=b("./simple.widget");h=(function(i){f(j,i);function j(){return j.__super__.constructor.apply(this,arguments)}j.is_mouse_handled=false;j.prototype._init=function(){this.$el.bind("mousedown.mousewidget",$.proxy(this._mouseDown,this));this.$el.bind("touchstart.mousewidget",$.proxy(this._touchStart,this));this.is_mouse_started=false;this.mouse_delay=0;this._mouse_delay_timer=null;this._is_mouse_delay_met=true;return this.mouse_down_info=null};j.prototype._deinit=function(){var k;this.$el.unbind("mousedown.mousewidget");this.$el.unbind("touchstart.mousewidget");k=$(document);k.unbind("mousemove.mousewidget");return k.unbind("mouseup.mousewidget")};j.prototype._mouseDown=function(l){var k;if(l.which!==1){return}k=this._handleMouseDown(l,this._getPositionInfo(l));if(k){l.preventDefault()}return k};j.prototype._handleMouseDown=function(l,k){if(j.is_mouse_handled){return}if(this.is_mouse_started){this._handleMouseUp(k)}this.mouse_down_info=k;if(!this._mouseCapture(k)){return}this._handleStartMouse();this.is_mouse_handled=true;return true};j.prototype._handleStartMouse=function(){var k;k=$(document);k.bind("mousemove.mousewidget",$.proxy(this._mouseMove,this));k.bind("touchmove.mousewidget",$.proxy(this._touchMove,this));k.bind("mouseup.mousewidget",$.proxy(this._mouseUp,this));k.bind("touchend.mousewidget",$.proxy(this._touchEnd,this));if(this.mouse_delay){return this._startMouseDelayTimer()}};j.prototype._startMouseDelayTimer=function(){if(this._mouse_delay_timer){clearTimeout(this._mouse_delay_timer)}this._mouse_delay_timer=setTimeout((function(k){return function(){return k._is_mouse_delay_met=true}})(this),this.mouse_delay);return this._is_mouse_delay_met=false};j.prototype._mouseMove=function(k){return this._handleMouseMove(k,this._getPositionInfo(k))};j.prototype._handleMouseMove=function(l,k){if(this.is_mouse_started){this._mouseDrag(k);return l.preventDefault()}if(this.mouse_delay&&!this._is_mouse_delay_met){return true}this.is_mouse_started=this._mouseStart(this.mouse_down_info)!==false;if(this.is_mouse_started){this._mouseDrag(k)}else{this._handleMouseUp(k)}return !this.is_mouse_started};j.prototype._getPositionInfo=function(k){return{page_x:k.pageX,page_y:k.pageY,target:k.target,original_event:k}};j.prototype._mouseUp=function(k){return this._handleMouseUp(this._getPositionInfo(k))};j.prototype._handleMouseUp=function(k){var l;l=$(document);l.unbind("mousemove.mousewidget");l.unbind("touchmove.mousewidget");l.unbind("mouseup.mousewidget");l.unbind("touchend.mousewidget");if(this.is_mouse_started){this.is_mouse_started=false;this._mouseStop(k)}};j.prototype._mouseCapture=function(k){return true};j.prototype._mouseStart=function(k){return null};j.prototype._mouseDrag=function(k){return null};j.prototype._mouseStop=function(k){return null};j.prototype.setMouseDelay=function(k){return this.mouse_delay=k};j.prototype._touchStart=function(k){var l;if(k.originalEvent.touches.length>1){return}l=k.originalEvent.changedTouches[0];return this._handleMouseDown(k,this._getPositionInfo(l))};j.prototype._touchMove=function(k){var l;if(k.originalEvent.touches.length>1){return}l=k.originalEvent.changedTouches[0];return this._handleMouseMove(k,this._getPositionInfo(l))};j.prototype._touchEnd=function(k){var l;if(k.originalEvent.touches.length>1){return}l=k.originalEvent.changedTouches[0];return this._handleMouseUp(this._getPositionInfo(l))};return j})(g);c.exports=h}).call(this)},{"./simple.widget":11}],6:[function(b,c,a){(function(){var f,d;d={getName:function(g){return d.strings[g-1]},nameToIndex:function(g){var h,k,j;for(h=k=1,j=d.strings.length;1<=j?k<=j:k>=j;h=1<=j?++k:--k){if(d.strings[h-1]===g){return h}}return 0}};d.BEFORE=1;d.AFTER=2;d.INSIDE=3;d.NONE=4;d.strings=["before","after","inside","none"];f=(function(){function g(i,h,j){if(h==null){h=false}if(j==null){j=g}this.setData(i);this.children=[];this.parent=null;if(h){this.id_mapping={};this.tree=this;this.node_class=j}}g.prototype.setData=function(k){var i,j,h;if(typeof k!=="object"){return this.name=k}else{h=[];for(i in k){j=k[i];if(i==="label"){h.push(this.name=j)}else{h.push(this[i]=j)}}return h}};g.prototype.initFromData=function(i){var h,j;j=(function(k){return function(l){k.setData(l);if(l.children){return h(l.children)}}})(this);h=(function(k){return function(o){var p,m,n,l;for(n=0,l=o.length;n<l;n++){p=o[n];m=new k.tree.node_class("");m.initFromData(p);k.addChild(m)}return null}})(this);j(i);return null};g.prototype.loadFromData=function(k){var i,l,j,h;this.removeChildren();for(j=0,h=k.length;j<h;j++){l=k[j];i=new this.tree.node_class(l);this.addChild(i);if(typeof l==="object"&&l.children){i.loadFromData(l.children)}}return null};g.prototype.addChild=function(h){this.children.push(h);return h._setParent(this)};g.prototype.addChildAtPosition=function(i,h){this.children.splice(h,0,i);return i._setParent(this)};g.prototype._setParent=function(h){this.parent=h;this.tree=h.tree;return this.tree.addNodeToIndex(this)};g.prototype.removeChild=function(h){h.removeChildren();return this._removeChild(h)};g.prototype._removeChild=function(h){this.children.splice(this.getChildIndex(h),1);return this.tree.removeNodeFromIndex(h)};g.prototype.getChildIndex=function(h){return $.inArray(h,this.children)};g.prototype.hasChildren=function(){return this.children.length!==0};g.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand};g.prototype.iterate=function(i){var h;h=function(l,p){var o,j,n,k,m;if(l.children){m=l.children;for(n=0,k=m.length;n<k;n++){o=m[n];j=i(o,p);if(j&&o.hasChildren()){h(o,p+1)}}return null}};h(this,0);return null};g.prototype.moveNode=function(i,j,h){if(i.isParentOf(j)){return}i.parent._removeChild(i);if(h===d.AFTER){return j.parent.addChildAtPosition(i,j.parent.getChildIndex(j)+1)}else{if(h===d.BEFORE){return j.parent.addChildAtPosition(i,j.parent.getChildIndex(j))}else{if(h===d.INSIDE){return j.addChildAtPosition(i,0)}}}};g.prototype.getData=function(){var h;h=(function(i){return function(n){var r,m,p,o,l,q,j;r=[];for(q=0,j=n.length;q<j;q++){p=n[q];o={};for(m in p){l=p[m];if((m!=="parent"&&m!=="children"&&m!=="element"&&m!=="tree")&&Object.prototype.hasOwnProperty.call(p,m)){o[m]=l}}if(p.hasChildren()){o.children=h(p.children)}r.push(o)}return r}})(this);return h(this.children)};g.prototype.getNodeByName=function(i){var h;h=null;this.iterate(function(j){if(j.name===i){h=j;return false}else{return true}});return h};g.prototype.addAfter=function(i){var j,h;if(!this.parent){return null}else{h=new this.tree.node_class(i);j=this.parent.getChildIndex(this);this.parent.addChildAtPosition(h,j+1);return h}};g.prototype.addBefore=function(i){var j,h;if(!this.parent){return null}else{h=new this.tree.node_class(i);j=this.parent.getChildIndex(this);this.parent.addChildAtPosition(h,j);return h}};g.prototype.addParent=function(l){var n,m,k,j,h,i;if(!this.parent){return null}else{m=new this.tree.node_class(l);m._setParent(this.tree);k=this.parent;i=k.children;for(j=0,h=i.length;j<h;j++){n=i[j];m.addChild(n)}k.children=[];k.addChild(m);return m}};g.prototype.remove=function(){if(this.parent){this.parent.removeChild(this);return this.parent=null}};g.prototype.append=function(i){var h;h=new this.tree.node_class(i);this.addChild(h);return h};g.prototype.prepend=function(i){var h;h=new this.tree.node_class(i);this.addChildAtPosition(h,0);return h};g.prototype.isParentOf=function(i){var h;h=i.parent;while(h){if(h===this){return true}h=h.parent}return false};g.prototype.getLevel=function(){var i,h;i=0;h=this;while(h.parent){i+=1;h=h.parent}return i};g.prototype.getNodeById=function(h){return this.id_mapping[h]};g.prototype.addNodeToIndex=function(h){if(h.id!=null){return this.id_mapping[h.id]=h}};g.prototype.removeNodeFromIndex=function(h){if(h.id!=null){return delete this.id_mapping[h.id]}};g.prototype.removeChildren=function(){this.iterate((function(h){return function(i){h.tree.removeNodeFromIndex(i);return true}})(this));return this.children=[]};g.prototype.getPreviousSibling=function(){var h;if(!this.parent){return null}else{h=this.parent.getChildIndex(this)-1;if(h>=0){return this.parent.children[h]}else{return null}}};g.prototype.getNextSibling=function(){var h;if(!this.parent){return null}else{h=this.parent.getChildIndex(this)+1;if(h<this.parent.children.length){return this.parent.children[h]}else{return null}}};g.prototype.getNodesByProperty=function(h,i){return this.filter(function(j){return j[h]===i})};g.prototype.filter=function(i){var h;h=[];this.iterate(function(j){if(i(j)){h.push(j)}return true});return h};g.prototype.getNextNode=function(i){var h;if(i==null){i=true}if(i&&this.hasChildren()&&this.is_open){return this.children[0]}else{if(!this.parent){return null}else{h=this.getNextSibling();if(h){return h}else{return this.parent.getNextNode(false)}}}};g.prototype.getPreviousNode=function(){var h;if(!this.parent){return null}else{h=this.getPreviousSibling();if(h){if(!h.hasChildren()||!h.is_open){return h}else{return h.getLastChild()}}else{if(this.parent.parent){return this.parent}else{return null}}}};g.prototype.getLastChild=function(){var h;if(!this.hasChildren()){return null}else{h=this.children[this.children.length-1];if(!h.hasChildren()||!h.is_open){return h}else{return h.getLastChild()}}};return g})();c.exports={Node:f,Position:d}}).call(this)},{}],7:[function(b,c,a){(function(){var g,k,d,i,f,l,h={}.hasOwnProperty,j=function(p,n){for(var m in n){if(h.call(n,m)){p[m]=n[m]}}function o(){this.constructor=p}o.prototype=n.prototype;p.prototype=new o();p.__super__=n.prototype;return p};l=b("./node");f=l.Position;i=(function(){function m(n,o){this.init(n,o)}m.prototype.init=function(n,o){this.node=n;this.tree_widget=o;if(!n.element){n.element=this.tree_widget.element}return this.$element=$(n.element)};m.prototype.getUl=function(){return this.$element.children("ul:first")};m.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")};m.prototype.getLi=function(){return this.$element};m.prototype.addDropHint=function(n){if(n===f.INSIDE){return new g(this.$element)}else{return new d(this.node,this.$element,n)}};m.prototype.select=function(){return this.getLi().addClass("jqtree-selected")};m.prototype.deselect=function(){return this.getLi().removeClass("jqtree-selected")};return m})();k=(function(n){j(m,n);function m(){return m.__super__.constructor.apply(this,arguments)}m.prototype.open=function(r,o){var q,p;if(o==null){o=true}if(!this.node.is_open){this.node.is_open=true;q=this.getButton();q.removeClass("jqtree-closed");q.html("");q.append(this.tree_widget.renderer.opened_icon_element.cloneNode(false));p=(function(s){return function(){s.getLi().removeClass("jqtree-closed");if(r){r()}return s.tree_widget._triggerEvent("tree.open",{node:s.node})}})(this);if(o){return this.getUl().slideDown("fast",p)}else{this.getUl().show();return p()}}};m.prototype.close=function(o){var q,p;if(o==null){o=true}if(this.node.is_open){this.node.is_open=false;q=this.getButton();q.addClass("jqtree-closed");q.html("");q.append(this.tree_widget.renderer.closed_icon_element.cloneNode(false));p=(function(r){return function(){r.getLi().addClass("jqtree-closed");return r.tree_widget._triggerEvent("tree.close",{node:r.node})}})(this);if(o){return this.getUl().slideUp("fast",p)}else{this.getUl().hide();return p()}}};m.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")};m.prototype.addDropHint=function(o){if(!this.node.is_open&&o===f.INSIDE){return new g(this.$element)}else{return new d(this.node,this.$element,o)}};return m})(i);g=(function(){function m(o){var n,p;n=o.children(".jqtree-element");p=o.width()-4;this.$hint=$('<span class="jqtree-border"></span>');n.append(this.$hint);this.$hint.css({width:p,height:n.outerHeight()-4})}m.prototype.remove=function(){return this.$hint.remove()};return m})();d=(function(){function m(p,o,n){this.$element=o;this.node=p;this.$ghost=$('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>');if(n===f.AFTER){this.moveAfter()}else{if(n===f.BEFORE){this.moveBefore()}else{if(n===f.INSIDE){if(p.isFolder()&&p.is_open){this.moveInsideOpenFolder()}else{this.moveInside()}}}}}m.prototype.remove=function(){return this.$ghost.remove()};m.prototype.moveAfter=function(){return this.$element.after(this.$ghost)};m.prototype.moveBefore=function(){return this.$element.before(this.$ghost)};m.prototype.moveInsideOpenFolder=function(){return $(this.node.children[0].element).before(this.$ghost)};m.prototype.moveInside=function(){this.$element.after(this.$ghost);return this.$ghost.addClass("jqtree-inside")};return m})();c.exports={FolderElement:k,NodeElement:i}}).call(this)},{"./node":6}],8:[function(b,c,a){(function(){var h,f,g,d;d=b("./util");f=d.indexOf;g=d.isInt;h=(function(){function i(j){this.tree_widget=j}i.prototype.saveState=function(){var j;j=JSON.stringify(this.getState());if(this.tree_widget.options.onSetStateFromStorage){return this.tree_widget.options.onSetStateFromStorage(j)}else{if(this.supportsLocalStorage()){return localStorage.setItem(this.getCookieName(),j)}else{if($.cookie){$.cookie.raw=true;return $.cookie(this.getCookieName(),j,{path:"/"})}}}};i.prototype.getStateFromStorage=function(){var j;j=this._loadFromStorage();if(j){return this._parseState(j)}else{return null}};i.prototype._parseState=function(k){var j;j=$.parseJSON(k);if(j&&j.selected_node&&g(j.selected_node)){j.selected_node=[j.selected_node]}return j};i.prototype._loadFromStorage=function(){if(this.tree_widget.options.onGetStateFromStorage){return this.tree_widget.options.onGetStateFromStorage()}else{if(this.supportsLocalStorage()){return localStorage.getItem(this.getCookieName())}else{if($.cookie){$.cookie.raw=true;return $.cookie(this.getCookieName())}else{return null}}}};i.prototype.getState=function(){var k,j;k=(function(l){return function(){var m;m=[];l.tree_widget.tree.iterate(function(n){if(n.is_open&&n.id&&n.hasChildren()){m.push(n.id)}return true});return m}})(this);j=(function(l){return function(){var m;return(function(){var q,o,p,n;p=this.tree_widget.getSelectedNodes();n=[];for(q=0,o=p.length;q<o;q++){m=p[q];n.push(m.id)}return n}).call(l)}})(this);return{open_nodes:k(),selected_node:j()}};i.prototype.setInitialState=function(k){var j;if(!k){return false}else{j=this._openInitialNodes(k.open_nodes);this._selectInitialNodes(k.selected_node);return j}};i.prototype._openInitialNodes=function(l){var k,m,o,n,j;k=false;for(n=0,j=l.length;n<j;n++){o=l[n];m=this.tree_widget.getNodeById(o);if(m){if(!m.load_on_demand){m.is_open=true}else{k=true}}}return k};i.prototype._selectInitialNodes=function(k){var l,n,o,m,j;o=0;for(m=0,j=k.length;m<j;m++){n=k[m];l=this.tree_widget.getNodeById(n);if(l){o+=1;this.tree_widget.select_node_handler.addToSelection(l)}}return o!==0};i.prototype.setInitialStateOnDemand=function(j){if(j){return this._setInitialStateOnDemand(j.open_nodes,j.selected_node)}};i.prototype._setInitialStateOnDemand=function(l,j){var m,k;k=(function(n){return function(){var p,q,s,r,o;p=[];for(r=0,o=l.length;r<o;r++){s=l[r];q=n.tree_widget.getNodeById(s);if(!q){p.push(s)}else{if(!q.is_loading){if(q.load_on_demand){m(q)}else{n.tree_widget._openNode(q,false)}}}}l=p;if(n._selectInitialNodes(j)){return n.tree_widget._refreshElements()}}})(this);m=(function(n){return function(o){return n.tree_widget._openNode(o,false,k)}})(this);return k()};i.prototype.getCookieName=function(){if(typeof this.tree_widget.options.saveState==="string"){return this.tree_widget.options.saveState}else{return"tree"}};i.prototype.supportsLocalStorage=function(){var j;j=function(){var k,l;if(typeof localStorage==="undefined"||localStorage===null){return false}else{try{l="_storage_test";sessionStorage.setItem(l,true);sessionStorage.removeItem(l)}catch(m){k=m;return false}return true}};if(this._supportsLocalStorage==null){this._supportsLocalStorage=j()}return this._supportsLocalStorage};i.prototype.getNodeIdToBeSelected=function(){var j;j=this.getStateFromStorage();if(j&&j.selected_node){return j.selected_node[0]}else{return null}};return i})();c.exports=h}).call(this)},{"./util":12}],9:[function(b,c,a){(function(){var d;d=(function(){function f(g){this.tree_widget=g;this.previous_top=-1;this._initScrollParent()}f.prototype._initScrollParent=function(){var g,h,i;h=(function(j){return function(){var p,m,l,o,k,n;p=["overflow","overflow-y"];l=function(r){var s,u,q,t;for(u=0,q=p.length;u<q;u++){s=p[u];if((t=$.css(r,s))==="auto"||t==="scroll"){return true}}return false};if(l(j.tree_widget.$el[0])){return j.tree_widget.$el}n=j.tree_widget.$el.parents();for(o=0,k=n.length;o<k;o++){m=n[o];if(l(m)){return $(m)}}return null}})(this);i=(function(j){return function(){j.scroll_parent_top=0;return j.$scroll_parent=null}})(this);if(this.tree_widget.$el.css("position")==="fixed"){i()}g=h();if(g&&g.length&&g[0].tagName!=="HTML"){this.$scroll_parent=g;return this.scroll_parent_top=this.$scroll_parent.offset().top}else{return i()}};f.prototype.checkScrolling=function(){var g;g=this.tree_widget.dnd_handler.hovered_area;if(g&&g.top!==this.previous_top){this.previous_top=g.top;if(this.$scroll_parent){return this._handleScrollingWithScrollParent(g)}else{return this._handleScrollingWithDocument(g)}}};f.prototype._handleScrollingWithScrollParent=function(h){var g;g=this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-h.bottom;if(g<20){this.$scroll_parent[0].scrollTop+=20;this.tree_widget.refreshHitAreas();return this.previous_top=-1}else{if((h.top-this.scroll_parent_top)<20){this.$scroll_parent[0].scrollTop-=20;this.tree_widget.refreshHitAreas();return this.previous_top=-1}}};f.prototype._handleScrollingWithDocument=function(h){var g;g=h.top-$(document).scrollTop();if(g<20){return $(document).scrollTop($(document).scrollTop()-20)}else{if($(window).height()-(h.bottom-$(document).scrollTop())<20){return $(document).scrollTop($(document).scrollTop()+20)}}};f.prototype.scrollTo=function(h){var g;if(this.$scroll_parent){return this.$scroll_parent[0].scrollTop=h}else{g=this.tree_widget.$el.offset().top;return $(document).scrollTop(h+g)}};f.prototype.isScrolledIntoView=function(h){var g,l,k,j,i;g=$(h);if(this.$scroll_parent){i=0;j=this.$scroll_parent.height();k=g.offset().top-this.scroll_parent_top;l=k+g.height()}else{i=$(window).scrollTop();j=i+$(window).height();k=g.offset().top;l=k+g.height()}return(l<=j)&&(k>=i)};return f})();c.exports=d}).call(this)},{}],10:[function(b,c,a){(function(){var d;d=(function(){function f(g){this.tree_widget=g;this.clear()}f.prototype.getSelectedNode=function(){var g;g=this.getSelectedNodes();if(g.length){return g[0]}else{return false}};f.prototype.getSelectedNodes=function(){var i,h,g;if(this.selected_single_node){return[this.selected_single_node]}else{g=[];for(i in this.selected_nodes){h=this.tree_widget.getNodeById(i);if(h){g.push(h)}}return g}};f.prototype.getSelectedNodesUnder=function(h){var j,i,g;if(this.selected_single_node){if(h.isParentOf(this.selected_single_node)){return[this.selected_single_node]}else{return[]}}else{g=[];for(j in this.selected_nodes){i=this.tree_widget.getNodeById(j);if(i&&h.isParentOf(i)){g.push(i)}}return g}};f.prototype.isNodeSelected=function(g){if(g.id){return this.selected_nodes[g.id]}else{if(this.selected_single_node){return this.selected_single_node.element===g.element}else{return false}}};f.prototype.clear=function(){this.selected_nodes={};return this.selected_single_node=null};f.prototype.removeFromSelection=function(g,h){if(h==null){h=false}if(!g.id){if(this.selected_single_node&&g.element===this.selected_single_node.element){return this.selected_single_node=null}}else{delete this.selected_nodes[g.id];if(h){return g.iterate((function(i){return function(j){delete i.selected_nodes[g.id];return true}})(this))}}};f.prototype.addToSelection=function(g){if(g.id){return this.selected_nodes[g.id]=true}else{return this.selected_single_node=g}};return f})();c.exports=d}).call(this)},{}],11:[function(b,c,a){(function(){var f,d=[].slice;f=(function(){g.prototype.defaults={};function g(i,h){this.$el=$(i);this.options=$.extend({},this.defaults,h)}g.prototype.destroy=function(){return this._deinit()};g.prototype._init=function(){return null};g.prototype._deinit=function(){return null};g.register=function(n,l){var m,k,h,i,j;i=function(){return"simple_widget_"+l};j=function(p,o){var q;q=$.data(p,o);if(q&&(q instanceof g)){return q}else{return null}};k=function(q,p){var s,r,v,u,t,o;s=i();for(t=0,o=q.length;t<o;t++){r=q[t];v=j(r,s);if(!v){u=new n(r,p);if(!$.data(r,s)){$.data(r,s,u)}u._init()}}return q};h=function(q){var s,r,u,t,p,o;s=i();o=[];for(t=0,p=q.length;t<p;t++){r=q[t];u=j(r,s);if(u){u.destroy()}o.push($.removeData(r,s))}return o};m=function(v,s,t){var o,w,r,p,q,u;w=null;for(q=0,u=v.length;q<u;q++){o=v[q];r=$.data(o,i());if(r&&(r instanceof g)){p=r[s];if(p&&(typeof p==="function")){w=p.apply(r,t)}}}return w};return $.fn[l]=function(){var q,p,r,s,o;r=arguments[0],p=2<=arguments.length?d.call(arguments,1):[];q=this;if(r===void 0||typeof r==="object"){o=r;return k(q,o)}else{if(typeof r==="string"&&r[0]!=="_"){s=r;if(s==="destroy"){return h(q)}else{return m(q,s,p)}}}}};return g})();c.exports=f}).call(this)},{}],12:[function(b,c,a){(function(){var d,h,g,i,f;f=function(o,l){var k,n,m,j;for(k=m=0,j=o.length;m<j;k=++m){n=o[k];if(n===l){return k}}return -1};g=function(k,j){if(k.indexOf){return k.indexOf(j)}else{return f(k,j)}};i=function(j){return typeof j==="number"&&j%1===0};d=function(){var k,l,n,j,m;k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};n=function(o){k.lastIndex=0;if(k.test(o)){return'"'+o.replace(k,function(p){var q;q=l[p];return(typeof q==="string"?q:"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4))})+'"'}else{return'"'+o+'"'}};j=function(w,s){var q,o,r,x,u,p,t;u=s[w];switch(typeof u){case"string":return n(u);case"number":if(isFinite(u)){return String(u)}else{return"null"}case"boolean":case"null":return String(u);case"object":if(!u){return"null"}r=[];if(Object.prototype.toString.apply(u)==="[object Array]"){for(q=p=0,t=u.length;p<t;q=++p){x=u[q];r[q]=j(q,u)||"null"}return(r.length===0?"[]":"["+r.join(",")+"]")}for(o in u){if(Object.prototype.hasOwnProperty.call(u,o)){x=j(o,u);if(x){r.push(n(o)+":"+x)}}}return(r.length===0?"{}":"{"+r.join(",")+"}")}};m=function(o){return j("",{"":o})};return m};if(!((this.JSON!=null)&&(this.JSON.stringify!=null)&&typeof this.JSON.stringify==="function")){if(this.JSON==null){this.JSON={}}this.JSON.stringify=d()}h=function(j){return(""+j).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.exports={_indexOf:f,get_json_stringify_function:d,html_escape:h,indexOf:g,isInt:i}}).call(this)},{}],13:[function(b,c,a){(function(){c.exports="0.22.0"}).call(this)},{}]},{},[3]);