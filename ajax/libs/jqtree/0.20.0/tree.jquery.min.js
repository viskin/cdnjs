(function(){var d,j,q,w,s,u,t,b,e,g,f,x,i,C,c,n,p,m,l,k,a,B,h,A,v,z,r=[].slice,o={}.hasOwnProperty,y=function(G,E){for(var D in E){if(o.call(E,D)){G[D]=E[D]}}function F(){this.constructor=G}F.prototype=E.prototype;G.prototype=new F();G.__super__=E.prototype;return G};d=this.jQuery;m=(function(){D.prototype.defaults={};function D(F,E){this.$el=d(F);this.options=d.extend({},this.defaults,E)}D.prototype.destroy=function(){return this._deinit()};D.prototype._init=function(){return null};D.prototype._deinit=function(){return null};D.register=function(K,I){var J,H,E,F,G;F=function(){return"simple_widget_"+I};G=function(M,L){var N;N=d.data(M,L);if(N&&(N instanceof D)){return N}else{return null}};H=function(N,M){var P,O,S,R,Q,L;P=F();for(Q=0,L=N.length;Q<L;Q++){O=N[Q];S=G(O,P);if(!S){R=new K(O,M);if(!d.data(O,P)){d.data(O,P,R)}R._init()}}return N};E=function(N){var P,O,R,Q,M,L;P=F();L=[];for(Q=0,M=N.length;Q<M;Q++){O=N[Q];R=G(O,P);if(R){R.destroy()}L.push(d.removeData(O,P))}return L};J=function(S,P,Q){var L,T,O,M,N,R;T=null;for(N=0,R=S.length;N<R;N++){L=S[N];O=d.data(L,F());if(O&&(O instanceof D)){M=O[P];if(M&&(typeof M==="function")){T=M.apply(O,Q)}}}return T};return d.fn[I]=function(){var N,M,O,P,L;O=arguments[0],M=2<=arguments.length?r.call(arguments,1):[];N=this;if(O===void 0||typeof O==="object"){L=O;return H(N,L)}else{if(typeof O==="string"&&O[0]!=="_"){P=O;if(P==="destroy"){return E(N)}else{return J(N,P,M)}}}}};return D})();this.SimpleWidget=m;f=(function(D){y(E,D);function E(){return E.__super__.constructor.apply(this,arguments)}E.is_mouse_handled=false;E.prototype._init=function(){this.$el.bind("mousedown.mousewidget",d.proxy(this._mouseDown,this));this.$el.bind("touchstart.mousewidget",d.proxy(this._touchStart,this));this.is_mouse_started=false;this.mouse_delay=0;this._mouse_delay_timer=null;this._is_mouse_delay_met=true;return this.mouse_down_info=null};E.prototype._deinit=function(){var F;this.$el.unbind("mousedown.mousewidget");this.$el.unbind("touchstart.mousewidget");F=d(document);F.unbind("mousemove.mousewidget");return F.unbind("mouseup.mousewidget")};E.prototype._mouseDown=function(G){var F;if(G.which!==1){return}F=this._handleMouseDown(G,this._getPositionInfo(G));if(F){G.preventDefault()}return F};E.prototype._handleMouseDown=function(G,F){if(E.is_mouse_handled){return}if(this.is_mouse_started){this._handleMouseUp(F)}this.mouse_down_info=F;if(!this._mouseCapture(F)){return}this._handleStartMouse();this.is_mouse_handled=true;return true};E.prototype._handleStartMouse=function(){var F;F=d(document);F.bind("mousemove.mousewidget",d.proxy(this._mouseMove,this));F.bind("touchmove.mousewidget",d.proxy(this._touchMove,this));F.bind("mouseup.mousewidget",d.proxy(this._mouseUp,this));F.bind("touchend.mousewidget",d.proxy(this._touchEnd,this));if(this.mouse_delay){return this._startMouseDelayTimer()}};E.prototype._startMouseDelayTimer=function(){if(this._mouse_delay_timer){clearTimeout(this._mouse_delay_timer)}this._mouse_delay_timer=setTimeout((function(F){return function(){return F._is_mouse_delay_met=true}})(this),this.mouse_delay);return this._is_mouse_delay_met=false};E.prototype._mouseMove=function(F){return this._handleMouseMove(F,this._getPositionInfo(F))};E.prototype._handleMouseMove=function(G,F){if(this.is_mouse_started){this._mouseDrag(F);return G.preventDefault()}if(this.mouse_delay&&!this._is_mouse_delay_met){return true}this.is_mouse_started=this._mouseStart(this.mouse_down_info)!==false;if(this.is_mouse_started){this._mouseDrag(F)}else{this._handleMouseUp(F)}return !this.is_mouse_started};E.prototype._getPositionInfo=function(F){return{page_x:F.pageX,page_y:F.pageY,target:F.target,original_event:F}};E.prototype._mouseUp=function(F){return this._handleMouseUp(this._getPositionInfo(F))};E.prototype._handleMouseUp=function(F){var G;G=d(document);G.unbind("mousemove.mousewidget");G.unbind("touchmove.mousewidget");G.unbind("mouseup.mousewidget");G.unbind("touchend.mousewidget");if(this.is_mouse_started){this.is_mouse_started=false;this._mouseStop(F)}};E.prototype._mouseCapture=function(F){return true};E.prototype._mouseStart=function(F){return null};E.prototype._mouseDrag=function(F){return null};E.prototype._mouseStop=function(F){return null};E.prototype.setMouseDelay=function(F){return this.mouse_delay=F};E.prototype._touchStart=function(F){var G;if(F.originalEvent.touches.length>1){return}G=F.originalEvent.changedTouches[0];return this._handleMouseDown(F,this._getPositionInfo(G))};E.prototype._touchMove=function(F){var G;if(F.originalEvent.touches.length>1){return}G=F.originalEvent.changedTouches[0];return this._handleMouseMove(F,this._getPositionInfo(G))};E.prototype._touchEnd=function(F){var G;if(F.originalEvent.touches.length>1){return}G=F.originalEvent.changedTouches[0];return this._handleMouseUp(this._getPositionInfo(G))};return E})(m);this.Tree={};d=this.jQuery;C={getName:function(D){return C.strings[D-1]},nameToIndex:function(D){var E,G,F;for(E=G=1,F=C.strings.length;1<=F?G<=F:G>=F;E=1<=F?++G:--G){if(C.strings[E-1]===D){return E}}return 0}};C.BEFORE=1;C.AFTER=2;C.INSIDE=3;C.NONE=4;C.strings=["before","after","inside","none"];this.Tree.Position=C;x=(function(){function D(F,E,G){if(E==null){E=false}if(G==null){G=D}this.setData(F);this.children=[];this.parent=null;if(E){this.id_mapping={};this.tree=this;this.node_class=G}}D.prototype.setData=function(H){var F,G,E;if(typeof H!=="object"){return this.name=H}else{E=[];for(F in H){G=H[F];if(F==="label"){E.push(this.name=G)}else{E.push(this[F]=G)}}return E}};D.prototype.initFromData=function(F){var E,G;G=(function(H){return function(I){H.setData(I);if(I.children){return E(I.children)}}})(this);E=(function(H){return function(L){var M,J,K,I;for(K=0,I=L.length;K<I;K++){M=L[K];J=new H.tree.node_class("");J.initFromData(M);H.addChild(J)}return null}})(this);G(F);return null};D.prototype.loadFromData=function(H){var F,I,G,E;this.removeChildren();for(G=0,E=H.length;G<E;G++){I=H[G];F=new this.tree.node_class(I);this.addChild(F);if(typeof I==="object"&&I.children){F.loadFromData(I.children)}}return null};D.prototype.addChild=function(E){this.children.push(E);return E._setParent(this)};D.prototype.addChildAtPosition=function(F,E){this.children.splice(E,0,F);return F._setParent(this)};D.prototype._setParent=function(E){this.parent=E;this.tree=E.tree;return this.tree.addNodeToIndex(this)};D.prototype.removeChild=function(E){E.removeChildren();return this._removeChild(E)};D.prototype._removeChild=function(E){this.children.splice(this.getChildIndex(E),1);return this.tree.removeNodeFromIndex(E)};D.prototype.getChildIndex=function(E){return d.inArray(E,this.children)};D.prototype.hasChildren=function(){return this.children.length!==0};D.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand};D.prototype.iterate=function(F){var E;E=(function(G){return function(J,N){var M,H,L,I,K;if(J.children){K=J.children;for(L=0,I=K.length;L<I;L++){M=K[L];H=F(M,N);if(G.hasChildren()&&H){E(M,N+1)}}return null}}})(this);E(this,0);return null};D.prototype.moveNode=function(F,G,E){if(F.isParentOf(G)){return}F.parent._removeChild(F);if(E===C.AFTER){return G.parent.addChildAtPosition(F,G.parent.getChildIndex(G)+1)}else{if(E===C.BEFORE){return G.parent.addChildAtPosition(F,G.parent.getChildIndex(G))}else{if(E===C.INSIDE){return G.addChildAtPosition(F,0)}}}};D.prototype.getData=function(){var E;E=(function(F){return function(J){var N,I,L,K,H,M,G;N=[];for(M=0,G=J.length;M<G;M++){L=J[M];K={};for(I in L){H=L[I];if((I!=="parent"&&I!=="children"&&I!=="element"&&I!=="tree")&&Object.prototype.hasOwnProperty.call(L,I)){K[I]=H}}if(L.hasChildren()){K.children=E(L.children)}N.push(K)}return N}})(this);return E(this.children)};D.prototype.getNodeByName=function(F){var E;E=null;this.iterate(function(G){if(G.name===F){E=G;return false}else{return true}});return E};D.prototype.addAfter=function(F){var G,E;if(!this.parent){return null}else{E=new this.tree.node_class(F);G=this.parent.getChildIndex(this);this.parent.addChildAtPosition(E,G+1);return E}};D.prototype.addBefore=function(F){var G,E;if(!this.parent){return null}else{E=new this.tree.node_class(F);G=this.parent.getChildIndex(this);this.parent.addChildAtPosition(E,G);return E}};D.prototype.addParent=function(I){var K,J,H,G,E,F;if(!this.parent){return null}else{J=new this.tree.node_class(I);J._setParent(this.tree);H=this.parent;F=H.children;for(G=0,E=F.length;G<E;G++){K=F[G];J.addChild(K)}H.children=[];H.addChild(J);return J}};D.prototype.remove=function(){if(this.parent){this.parent.removeChild(this);return this.parent=null}};D.prototype.append=function(F){var E;E=new this.tree.node_class(F);this.addChild(E);return E};D.prototype.prepend=function(F){var E;E=new this.tree.node_class(F);this.addChildAtPosition(E,0);return E};D.prototype.isParentOf=function(F){var E;E=F.parent;while(E){if(E===this){return true}E=E.parent}return false};D.prototype.getLevel=function(){var F,E;F=0;E=this;while(E.parent){F+=1;E=E.parent}return F};D.prototype.getNodeById=function(E){return this.id_mapping[E]};D.prototype.addNodeToIndex=function(E){if(E.id!=null){return this.id_mapping[E.id]=E}};D.prototype.removeNodeFromIndex=function(E){if(E.id!=null){return delete this.id_mapping[E.id]}};D.prototype.removeChildren=function(){this.iterate((function(E){return function(F){E.tree.removeNodeFromIndex(F);return true}})(this));return this.children=[]};D.prototype.getPreviousSibling=function(){var E;if(!this.parent){return null}else{E=this.parent.getChildIndex(this)-1;if(E>=0){return this.parent.children[E]}else{return null}}};D.prototype.getNextSibling=function(){var E;if(!this.parent){return null}else{E=this.parent.getChildIndex(this)+1;if(E<this.parent.children.length){return this.parent.children[E]}else{return null}}};return D})();this.Tree.Node=x;s=(function(){function D(E){this.tree_widget=E;this.opened_icon_text=this.getHtmlText(E.options.openedIcon);this.closed_icon_text=this.getHtmlText(E.options.closedIcon)}D.prototype.render=function(E){if(E&&E.parent){return this.renderFromNode(E)}else{return this.renderFromRoot()}};D.prototype.renderNode=function(G){var I,H,E,F;d(G.element).remove();E=new i(G.parent,this.tree_widget);H=E.getUl();I=this.createLi(G);this.attachNodeData(G,I);F=G.getPreviousSibling();if(F){d(F.element).after(I)}else{E.getUl().prepend(I)}if(G.children){return this.renderFromNode(G)}};D.prototype.renderFromRoot=function(){var E;E=this.tree_widget.element;E.empty();return this.createDomElements(E[0],this.tree_widget.tree.children,true,true)};D.prototype.renderFromNode=function(E){var F;F=this.tree_widget._getNodeElementForNode(E);F.getUl().remove();return this.createDomElements(F.$element[0],E.children,false,false)};D.prototype.createDomElements=function(I,F,M,G){var E,L,J,H,K;J=this.createUl(M);I.appendChild(J);for(H=0,K=F.length;H<K;H++){E=F[H];L=this.createLi(E);J.appendChild(L);this.attachNodeData(E,L);if(E.hasChildren()){this.createDomElements(L,E.children,false,E.is_open)}}return null};D.prototype.attachNodeData=function(F,E){F.element=E;return d(E).data("node",F)};D.prototype.createUl=function(G){var F,E;if(G){F="jqtree-tree"}else{F=""}E=document.createElement("ul");E.className="jqtree_common "+F;return E};D.prototype.createLi=function(F){var E;if(F.isFolder()){E=this.createFolderLi(F)}else{E=this.createNodeLi(F)}if(this.tree_widget.options.onCreateLi){this.tree_widget.options.onCreateLi(F,d(E))}return E};D.prototype.createFolderLi=function(I){var L,G,J,F,H,E,M,K;G=this.getButtonClasses(I);E=this.getFolderClasses(I);H=this.escapeIfNecessary(I.name);if(I.is_open){L=this.opened_icon_text}else{L=this.closed_icon_text}M=document.createElement("li");M.className="jqtree_common "+E;F=document.createElement("div");F.className="jqtree-element jqtree_common";M.appendChild(F);J=document.createElement("a");J.className="jqtree_common "+G;J.appendChild(document.createTextNode(L));F.appendChild(J);K=document.createElement("span");K.className="jqtree_common jqtree-title";F.appendChild(K);K.innerHTML=H;return M};D.prototype.createNodeLi=function(H){var J,K,G,E,I,F;I=["jqtree_common"];if(this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(H)){I.push("jqtree-selected")}J=I.join(" ");G=this.escapeIfNecessary(H.name);E=document.createElement("li");E.className=J;K=document.createElement("div");K.className="jqtree-element jqtree_common";E.appendChild(K);F=document.createElement("span");F.className="jqtree-title jqtree_common";F.innerHTML=G;K.appendChild(F);return E};D.prototype.getButtonClasses=function(F){var E;E=["jqtree-toggler"];if(!F.is_open){E.push("jqtree-closed")}return E.join(" ")};D.prototype.getFolderClasses=function(F){var E;E=["jqtree-folder"];if(!F.is_open){E.push("jqtree-closed")}if(this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(F)){E.push("jqtree-selected")}return E.join(" ")};D.prototype.escapeIfNecessary=function(E){if(this.tree_widget.options.autoEscape){return k(E)}else{return E}};D.prototype.getHtmlText=function(E){return d(document.createElement("div")).html(E).text()};return D})();e=(function(E){y(D,E);function D(){return D.__super__.constructor.apply(this,arguments)}D.prototype.defaults={autoOpen:false,saveState:false,dragAndDrop:false,selectable:true,useContextMenu:true,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:true,dataUrl:null,closedIcon:"&#x25ba;",openedIcon:"&#x25bc;",slide:true,nodeClass:x,dataFilter:null,keyboardSupport:true,openFolderDelay:500};D.prototype.toggle=function(G,F){if(F==null){F=true}if(G.is_open){return this.closeNode(G,F)}else{return this.openNode(G,F)}};D.prototype.getTree=function(){return this.tree};D.prototype.selectNode=function(F){return this._selectNode(F,false)};D.prototype._selectNode=function(H,F){var J,I,K,G;if(F==null){F=false}if(!this.select_node_handler){return}J=(function(L){return function(){if(L.options.onCanSelectNode){return L.options.selectable&&L.options.onCanSelectNode(H)}else{return L.options.selectable}}})(this);K=(function(L){return function(){var M;M=H.parent;if(M&&M.parent&&!M.is_open){return L.openNode(M,false)}}})(this);G=(function(L){return function(){if(L.options.saveState){return L.save_state_handler.saveState()}}})(this);if(!H){this._deselectCurrentNode();G();return}if(!J()){return}if(this.select_node_handler.isNodeSelected(H)){if(F){this._deselectCurrentNode();this._triggerEvent("tree.select",{node:null,previous_node:H})}}else{I=this.getSelectedNode();this._deselectCurrentNode();this.addToSelection(H);this._triggerEvent("tree.select",{node:H,deselected_node:I});K()}return G()};D.prototype.getSelectedNode=function(){return this.select_node_handler.getSelectedNode()};D.prototype.toJson=function(){return JSON.stringify(this.tree.getData())};D.prototype.loadData=function(F,G){return this._loadData(F,G)};D.prototype.loadDataFromUrl=function(F,H,G){if(d.type(F)!=="string"){G=H;H=F;F=null}return this._loadDataFromUrl(F,H,G)};D.prototype.reload=function(){return this.loadDataFromUrl()};D.prototype._loadDataFromUrl=function(F,L,J){var H,K,G,I;H=null;K=(function(M){return function(){var N;if(!L){H=M.element}else{N=new u(L,M);H=N.getLi()}return H.addClass("jqtree-loading")}})(this);I=(function(M){return function(){if(H){return H.removeClass("jqtree-loading")}}})(this);G=(function(M){return function(){if(d.type(F)==="string"){F={url:F}}if(!F.method){return F.method="get"}}})(this);K();if(!F){F=this._getDataUrlInfo(L)}G();return d.ajax({url:F.url,data:F.data,type:F.method.toUpperCase(),cache:false,dataType:"json",success:(function(M){return function(N){var O;if(d.isArray(N)||typeof N==="object"){O=N}else{O=d.parseJSON(N)}if(M.options.dataFilter){O=M.options.dataFilter(O)}I();M._loadData(O,L);if(J&&d.isFunction(J)){return J()}}})(this),error:(function(M){return function(N){I();if(M.options.onLoadFailed){return M.options.onLoadFailed(N)}}})(this)})};D.prototype._loadData=function(I,J){var K,G,H,F;if(!I){return}this._triggerEvent("tree.load_data",{tree_data:I});if(!J){this._initTree(I)}else{G=this.select_node_handler.getSelectedNodesUnder(J);for(H=0,F=G.length;H<F;H++){K=G[H];this.select_node_handler.removeFromSelection(K)}J.loadFromData(I);J.load_on_demand=false;this._refreshElements(J.parent)}if(this.is_dragging){return this.dnd_handler.refreshHitAreas()}};D.prototype.getNodeById=function(F){return this.tree.getNodeById(F)};D.prototype.getNodeByName=function(F){return this.tree.getNodeByName(F)};D.prototype.openNode=function(G,F){if(F==null){F=true}return this._openNode(G,F)};D.prototype._openNode=function(H,F,I){var J,G;if(F==null){F=true}J=(function(K){return function(M,N,L){var O;O=new u(M,K);return O.open(L,N)}})(this);if(H.isFolder()){if(H.load_on_demand){return this._loadFolderOnDemand(H,F,I)}else{G=H.parent;while(G&&!G.is_open){if(G.parent){J(G,false,null)}G=G.parent}J(H,F,I);return this._saveState()}}};D.prototype._loadFolderOnDemand=function(G,F,H){if(F==null){F=true}return this._loadDataFromUrl(null,G,(function(I){return function(){return I._openNode(G,F,H)}})(this))};D.prototype.closeNode=function(G,F){if(F==null){F=true}if(G.isFolder()){new u(G,this).close(F);return this._saveState()}};D.prototype.isDragging=function(){return this.is_dragging};D.prototype.refreshHitAreas=function(){return this.dnd_handler.refreshHitAreas()};D.prototype.addNodeAfter=function(G,F){var H;H=F.addAfter(G);this._refreshElements(F.parent);return H};D.prototype.addNodeBefore=function(G,F){var H;H=F.addBefore(G);this._refreshElements(F.parent);return H};D.prototype.addParentNode=function(G,F){var H;H=F.addParent(G);this._refreshElements(H.parent);return H};D.prototype.removeNode=function(G){var F;F=G.parent;if(F){this.select_node_handler.removeFromSelection(G,true);G.remove();return this._refreshElements(F.parent)}};D.prototype.appendNode=function(H,I){var F,G;if(!I){I=this.tree}F=I.isFolder();G=I.append(H);if(F){this._refreshElements(I)}else{this._refreshElements(I.parent)}return G};D.prototype.prependNode=function(G,H){var F;if(!H){H=this.tree}F=H.prepend(G);this._refreshElements(H);return F};D.prototype.updateNode=function(F,H){var G;G=H.id&&H.id!==F.id;if(G){this.tree.removeNodeFromIndex(F)}F.setData(H);if(G){this.tree.addNodeToIndex(F)}this.renderer.renderNode(F);return this._selectCurrentNode()};D.prototype.moveNode=function(H,I,F){var G;G=C.nameToIndex(F);this.tree.moveNode(H,I,G);return this._refreshElements()};D.prototype.getStateFromStorage=function(){return this.save_state_handler.getStateFromStorage()};D.prototype.addToSelection=function(F){this.select_node_handler.addToSelection(F);return this._getNodeElementForNode(F).select()};D.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()};D.prototype.isNodeSelected=function(F){return this.select_node_handler.isNodeSelected(F)};D.prototype.removeFromSelection=function(F){this.select_node_handler.removeFromSelection(F);return this._getNodeElementForNode(F).deselect()};D.prototype.scrollToNode=function(G){var F,H;F=d(G.element);H=F.offset().top-this.$el.offset().top;return this.scroll_handler.scrollTo(H)};D.prototype.getState=function(){return this.save_state_handler.getState()};D.prototype.setState=function(F){this.save_state_handler.setState(F);return this._refreshElements()};D.prototype.setOption=function(F,G){return this.options[F]=G};D.prototype._init=function(){D.__super__._init.call(this);this.element=this.$el;this.mouse_delay=300;this.is_initialized=false;this.renderer=new s(this);if(typeof c!=="undefined"&&c!==null){this.save_state_handler=new c(this)}else{this.options.saveState=false}if(typeof p!=="undefined"&&p!==null){this.select_node_handler=new p(this)}if(typeof q!=="undefined"&&q!==null){this.dnd_handler=new q(this)}else{this.options.dragAndDrop=false}if(typeof n!=="undefined"&&n!==null){this.scroll_handler=new n(this)}if((typeof g!=="undefined"&&g!==null)&&(typeof p!=="undefined"&&p!==null)){this.key_handler=new g(this)}this._initData();this.element.click(d.proxy(this._click,this));this.element.dblclick(d.proxy(this._dblclick,this));if(this.options.useContextMenu){return this.element.bind("contextmenu",d.proxy(this._contextmenu,this))}};D.prototype._deinit=function(){this.element.empty();this.element.unbind();this.key_handler.deinit();this.tree=null;return D.__super__._deinit.call(this)};D.prototype._initData=function(){if(this.options.data){return this._loadData(this.options.data)}else{return this._loadDataFromUrl(this._getDataUrlInfo())}};D.prototype._getDataUrlInfo=function(G){var F,H;F=this.options.dataUrl||this.element.data("url");H=(function(I){return function(){var L,K,J;J={url:F};if(G&&G.id){L={node:G.id};J.data=L}else{K=I._getNodeIdToBeSelected();if(K){L={selected_node:K};J.data=L}}return J}})(this);if(d.isFunction(F)){return F(G)}else{if(d.type(F)==="string"){return H()}else{return F}}};D.prototype._getNodeIdToBeSelected=function(){if(this.options.saveState){return this.save_state_handler.getNodeIdToBeSelected()}else{return null}};D.prototype._initTree=function(F){this.tree=new this.options.nodeClass(null,true,this.options.nodeClass);if(this.select_node_handler){this.select_node_handler.clear()}this.tree.loadFromData(F);this._openNodes();this._refreshElements();if(!this.is_initialized){this.is_initialized=true;return this._triggerEvent("tree.init")}};D.prototype._openNodes=function(){var F;if(this.options.saveState){if(this.save_state_handler.restoreState()){return}}if(this.options.autoOpen===false){return}else{if(this.options.autoOpen===true){F=-1}else{F=parseInt(this.options.autoOpen)}}return this.tree.iterate(function(G,H){if(G.hasChildren()){G.is_open=true}return H!==F})};D.prototype._refreshElements=function(F){if(F==null){F=null}this.renderer.render(F);return this._triggerEvent("tree.refresh")};D.prototype._click=function(H){var I,G,F;I=this._getClickTarget(H.target);if(I){if(I.type==="button"){this.toggle(I.node,this.options.slide);H.preventDefault();return H.stopPropagation()}else{if(I.type==="label"){F=I.node;G=this._triggerEvent("tree.click",{node:F,click_event:H});if(!G.isDefaultPrevented()){return this._selectNode(F,true)}}}}};D.prototype._dblclick=function(F){var G;G=this._getClickTarget(F.target);if(G&&G.type==="label"){return this._triggerEvent("tree.dblclick",{node:G.node,click_event:F})}};D.prototype._getClickTarget=function(H){var J,G,F,I;F=d(H);J=F.closest(".jqtree-toggler");if(J.length){I=this._getNode(J);if(I){return{type:"button",node:I}}}else{G=F.closest(".jqtree-element");if(G.length){I=this._getNode(G);if(I){return{type:"label",node:I}}}}return null};D.prototype._getNode=function(F){var G;G=F.closest("li");if(G.length===0){return null}else{return G.data("node")}};D.prototype._getNodeElementForNode=function(F){if(F.isFolder()){return new u(F,this)}else{return new i(F,this)}};D.prototype._getNodeElement=function(F){var G;G=this._getNode(F);if(G){return this._getNodeElementForNode(G)}else{return null}};D.prototype._contextmenu=function(H){var F,G;F=d(H.target).closest("ul.jqtree-tree .jqtree-element");if(F.length){G=this._getNode(F);if(G){H.preventDefault();H.stopPropagation();this._triggerEvent("tree.contextmenu",{node:G,click_event:H});return false}}};D.prototype._saveState=function(){if(this.options.saveState){return this.save_state_handler.saveState()}};D.prototype._mouseCapture=function(F){if(this.options.dragAndDrop){return this.dnd_handler.mouseCapture(F)}else{return false}};D.prototype._mouseStart=function(F){if(this.options.dragAndDrop){return this.dnd_handler.mouseStart(F)}else{return false}};D.prototype._mouseDrag=function(G){var F;if(this.options.dragAndDrop){F=this.dnd_handler.mouseDrag(G);if(this.scroll_handler){this.scroll_handler.checkScrolling()}return F}else{return false}};D.prototype._mouseStop=function(F){if(this.options.dragAndDrop){return this.dnd_handler.mouseStop(F)}else{return false}};D.prototype._triggerEvent=function(H,F){var G;G=d.Event(H);d.extend(G,F);this.element.trigger(G);return G};D.prototype.testGenerateHitAreas=function(F){this.dnd_handler.current_item=this._getNodeElementForNode(F);this.dnd_handler.generateHitAreas();return this.dnd_handler.hit_areas};D.prototype._selectCurrentNode=function(){var F,G;F=this.getSelectedNode();if(F){G=this._getNodeElementForNode(F);if(G){return G.select()}}};D.prototype._deselectCurrentNode=function(){var F;F=this.getSelectedNode();if(F){return this.removeFromSelection(F)}};return D})(f);m.register(e,"tree");i=(function(){function D(E,F){this.init(E,F)}D.prototype.init=function(E,F){this.node=E;this.tree_widget=F;return this.$element=d(E.element)};D.prototype.getUl=function(){return this.$element.children("ul:first")};D.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")};D.prototype.getLi=function(){return this.$element};D.prototype.addDropHint=function(E){if(E===C.INSIDE){return new j(this.$element)}else{return new t(this.node,this.$element,E)}};D.prototype.select=function(){return this.getLi().addClass("jqtree-selected")};D.prototype.deselect=function(){return this.getLi().removeClass("jqtree-selected")};return D})();u=(function(E){y(D,E);function D(){return D.__super__.constructor.apply(this,arguments)}D.prototype.open=function(I,F){var H,G;if(F==null){F=true}if(!this.node.is_open){this.node.is_open=true;H=this.getButton();H.removeClass("jqtree-closed");H.html(this.tree_widget.options.openedIcon);G=(function(J){return function(){J.getLi().removeClass("jqtree-closed");if(I){I()}return J.tree_widget._triggerEvent("tree.open",{node:J.node})}})(this);if(F){return this.getUl().slideDown("fast",G)}else{this.getUl().show();return G()}}};D.prototype.close=function(F){var H,G;if(F==null){F=true}if(this.node.is_open){this.node.is_open=false;H=this.getButton();H.addClass("jqtree-closed");H.html(this.tree_widget.options.closedIcon);G=(function(I){return function(){I.getLi().addClass("jqtree-closed");return I.tree_widget._triggerEvent("tree.close",{node:I.node})}})(this);if(F){return this.getUl().slideUp("fast",G)}else{this.getUl().hide();return G()}}};D.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")};D.prototype.addDropHint=function(F){if(!this.node.is_open&&F===C.INSIDE){return new j(this.$element)}else{return new t(this.node,this.$element,F)}};return D})(i);k=function(D){return(""+D).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};z=function(I,F){var E,H,G,D;for(E=G=0,D=I.length;G<D;E=++G){H=I[E];if(H===F){return E}}return -1};a=function(E,D){if(E.indexOf){return E.indexOf(D)}else{return z(E,D)}};this.Tree.indexOf=a;this.Tree._indexOf=z;if(!((this.JSON!=null)&&(this.JSON.stringify!=null)&&typeof this.JSON.stringify==="function")){B=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};A=function(D){B.lastIndex=0;if(B.test(D)){return'"'+D.replace(B,function(E){var F;F=h[E];return(typeof F==="string"?F:"\\u"+("0000"+E.charCodeAt(0).toString(16)).slice(-4))})+'"'}else{return'"'+D+'"'}};v=function(K,H){var F,D,G,L,J,E,I;J=H[K];switch(typeof J){case"string":return A(J);case"number":if(isFinite(J)){return String(J)}else{return"null"}case"boolean":case"null":return String(J);case"object":if(!J){return"null"}G=[];if(Object.prototype.toString.apply(J)==="[object Array]"){for(F=E=0,I=J.length;E<I;F=++E){L=J[F];G[F]=v(F,J)||"null"}return(G.length===0?"[]":"["+G.join(",")+"]")}for(D in J){if(Object.prototype.hasOwnProperty.call(J,D)){L=v(D,J);if(L){G.push(A(D)+":"+L)}}}return(G.length===0?"{}":"{"+G.join(",")+"}")}};if(this.JSON==null){this.JSON={}}this.JSON.stringify=function(D){return v("",{"":D})}}c=(function(){function D(E){this.tree_widget=E}D.prototype.saveState=function(){var E;E=JSON.stringify(this.getState());if(this.tree_widget.options.onSetStateFromStorage){return this.tree_widget.options.onSetStateFromStorage(E)}else{if(this.supportsLocalStorage()){return localStorage.setItem(this.getCookieName(),E)}else{if(d.cookie){d.cookie.raw=true;return d.cookie(this.getCookieName(),E,{path:"/"})}}}};D.prototype.restoreState=function(){var E;E=this.getStateFromStorage();if(E){this.setState(d.parseJSON(E));return true}else{return false}};D.prototype.getStateFromStorage=function(){if(this.tree_widget.options.onGetStateFromStorage){return this.tree_widget.options.onGetStateFromStorage()}else{if(this.supportsLocalStorage()){return localStorage.getItem(this.getCookieName())}else{if(d.cookie){d.cookie.raw=true;return d.cookie(this.getCookieName())}else{return null}}}};D.prototype.getState=function(){var G,F,E;G=[];this.tree_widget.tree.iterate((function(H){return function(I){if(I.is_open&&I.id&&I.hasChildren()){G.push(I.id)}return true}})(this));F=this.tree_widget.getSelectedNode();if(F){E=F.id}else{E=""}return{open_nodes:G,selected_node:E}};D.prototype.setState=function(G){var H,F,E;if(G){H=G.open_nodes;E=G.selected_node;this.tree_widget.tree.iterate((function(I){return function(J){J.is_open=J.id&&J.hasChildren()&&(a(H,J.id)>=0);return true}})(this));if(E&&this.tree_widget.select_node_handler){this.tree_widget.select_node_handler.clear();F=this.tree_widget.getNodeById(E);if(F){return this.tree_widget.select_node_handler.addToSelection(F)}}}};D.prototype.getCookieName=function(){if(typeof this.tree_widget.options.saveState==="string"){return this.tree_widget.options.saveState}else{return"tree"}};D.prototype.supportsLocalStorage=function(){var E;E=function(){var F,G;if(typeof localStorage==="undefined"||localStorage===null){return false}else{try{G="_storage_test";sessionStorage.setItem(G,true);sessionStorage.removeItem(G)}catch(H){F=H;return false}return true}};if(this._supportsLocalStorage==null){this._supportsLocalStorage=E()}return this._supportsLocalStorage};D.prototype.getNodeIdToBeSelected=function(){var E,F;F=this.getStateFromStorage();if(F){E=d.parseJSON(F);return E.selected_node}else{return null}};return D})();p=(function(){function D(E){this.tree_widget=E;this.clear()}D.prototype.getSelectedNode=function(){var E;E=this.getSelectedNodes();if(E.length){return E[0]}else{return false}};D.prototype.getSelectedNodes=function(){var G,F,E;if(this.selected_single_node){return[this.selected_single_node]}else{E=[];for(G in this.selected_nodes){F=this.tree_widget.getNodeById(G);if(F){E.push(F)}}return E}};D.prototype.getSelectedNodesUnder=function(F){var H,G,E;if(this.selected_single_node){if(F.isParentOf(selected_single_node)){return this.selected_single_node}else{return null}}else{E=[];for(H in this.selected_nodes){G=this.tree_widget.getNodeById(H);if(G&&F.isParentOf(G)){E.push(G)}}return E}};D.prototype.isNodeSelected=function(E){if(E.id){return this.selected_nodes[E.id]}else{if(this.selected_single_node){return this.selected_single_node.element===E.element}else{return false}}};D.prototype.clear=function(){this.selected_nodes={};return this.selected_single_node=null};D.prototype.removeFromSelection=function(E,F){if(F==null){F=false}if(!E.id){if(this.selected_single_node&&E.element===this.selected_single_node.element){return this.selected_single_node=null}}else{delete this.selected_nodes[E.id];if(F){return E.iterate((function(G){return function(H){delete G.selected_nodes[E.id];return true}})(this))}}};D.prototype.addToSelection=function(E){if(E.id){return this.selected_nodes[E.id]=true}else{return this.selected_single_node=E}};return D})();q=(function(){function D(E){this.tree_widget=E;this.hovered_area=null;this.$ghost=null;this.hit_areas=[];this.is_dragging=false}D.prototype.mouseCapture=function(F){var E,G;E=d(F.target);if(this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(E)){return null}G=this.tree_widget._getNodeElement(E);if(G&&this.tree_widget.options.onCanMove){if(!this.tree_widget.options.onCanMove(G.node)){G=null}}this.current_item=G;return this.current_item!==null};D.prototype.mouseStart=function(E){var F;this.refreshHitAreas();F=d(E.target).offset();this.drag_element=new w(this.current_item.node,E.page_x-F.left,E.page_y-F.top,this.tree_widget.element);this.is_dragging=true;this.current_item.$element.addClass("jqtree-moving");return true};D.prototype.mouseDrag=function(E){var G,F;this.drag_element.move(E.page_x,E.page_y);G=this.findHoveredArea(E.page_x,E.page_y);F=this.canMoveToArea(G);if(F&&G){if(this.hovered_area!==G){this.hovered_area=G;if(this.mustOpenFolderTimer(G)){this.startOpenFolderTimer(G.node)}this.updateDropHint()}}else{this.removeHover();this.removeDropHint();this.stopOpenFolderTimer()}return true};D.prototype.canMoveToArea=function(E){var F;if(!E){return false}else{if(this.tree_widget.options.onCanMoveTo){F=C.getName(E.position);return this.tree_widget.options.onCanMoveTo(this.current_item.node,E.node,F)}else{return true}}};D.prototype.mouseStop=function(E){this.moveItem(E);this.clear();this.removeHover();this.removeDropHint();this.removeHitAreas();if(this.current_item){this.current_item.$element.removeClass("jqtree-moving")}this.is_dragging=false;return false};D.prototype.refreshHitAreas=function(){this.removeHitAreas();return this.generateHitAreas()};D.prototype.removeHitAreas=function(){return this.hit_areas=[]};D.prototype.clear=function(){this.drag_element.remove();return this.drag_element=null};D.prototype.removeDropHint=function(){if(this.previous_ghost){return this.previous_ghost.remove()}};D.prototype.removeHover=function(){return this.hovered_area=null};D.prototype.generateHitAreas=function(){var E;E=new b(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom);return this.hit_areas=E.generate()};D.prototype.findHoveredArea=function(F,K){var I,H,J,E,G;H=this.getTreeDimensions();if(F<H.left||K<H.top||F>H.right||K>H.bottom){return null}E=0;J=this.hit_areas.length;while(E<J){G=(E+J)>>1;I=this.hit_areas[G];if(K<I.top){J=G}else{if(K>I.bottom){E=G+1}else{return I}}}return null};D.prototype.mustOpenFolderTimer=function(F){var E;E=F.node;return E.isFolder()&&!E.is_open&&F.position===C.INSIDE};D.prototype.updateDropHint=function(){var E;if(!this.hovered_area){return}this.removeDropHint();E=this.tree_widget._getNodeElementForNode(this.hovered_area.node);return this.previous_ghost=E.addDropHint(this.hovered_area.position)};D.prototype.startOpenFolderTimer=function(F){var E;E=(function(G){return function(){return G.tree_widget._openNode(F,G.tree_widget.options.slide,function(){G.refreshHitAreas();return G.updateDropHint()})}})(this);this.stopOpenFolderTimer();return this.open_folder_timer=setTimeout(E,this.tree_widget.options.openFolderDelay)};D.prototype.stopOpenFolderTimer=function(){if(this.open_folder_timer){clearTimeout(this.open_folder_timer);return this.open_folder_timer=null}};D.prototype.moveItem=function(G){var H,J,I,E,F,K;if(this.hovered_area&&this.hovered_area.position!==C.NONE&&this.canMoveToArea(this.hovered_area)){I=this.current_item.node;K=this.hovered_area.node;E=this.hovered_area.position;F=I.parent;if(E===C.INSIDE){this.hovered_area.node.is_open=true}H=(function(L){return function(){L.tree_widget.tree.moveNode(I,K,E);L.tree_widget.element.empty();return L.tree_widget._refreshElements()}})(this);J=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:I,target_node:K,position:C.getName(E),previous_parent:F,do_move:H,original_event:G.original_event}});if(!J.isDefaultPrevented()){return H()}}};D.prototype.getTreeDimensions=function(){var E;E=this.tree_widget.element.offset();return{left:E.left,top:E.top,right:E.left+this.tree_widget.element.width(),bottom:E.top+this.tree_widget.element.height()+16}};return D})();l=(function(){function D(E){this.tree=E}D.prototype.iterate=function(){var E,F;E=true;F=(function(G){return function(J,H){var Q,I,P,M,N,K,O,L;N=(J.is_open||!J.element)&&J.hasChildren();if(J.element){Q=d(J.element);if(!Q.is(":visible")){return}if(E){G.handleFirstNode(J,Q);E=false}if(!J.hasChildren()){G.handleNode(J,H,Q)}else{if(J.is_open){if(!G.handleOpenFolder(J,Q)){N=false}}else{G.handleClosedFolder(J,H,Q)}}}if(N){P=J.children.length;L=J.children;for(M=K=0,O=L.length;K<O;M=++K){I=L[M];if(M===(P-1)){F(J.children[M],null)}else{F(J.children[M],J.children[M+1])}}if(J.is_open){return G.handleAfterOpenFolder(J,H,Q)}}}})(this);return F(this.tree,null)};D.prototype.handleNode=function(G,F,E){};D.prototype.handleOpenFolder=function(F,E){};D.prototype.handleClosedFolder=function(G,F,E){};D.prototype.handleAfterOpenFolder=function(G,F,E){};D.prototype.handleFirstNode=function(F,E){};return D})();b=(function(D){y(E,D);function E(F,H,G){E.__super__.constructor.call(this,F);this.current_node=H;this.tree_bottom=G}E.prototype.generate=function(){this.positions=[];this.last_top=0;this.iterate();return this.generateHitAreas(this.positions)};E.prototype.getTop=function(F){return F.offset().top};E.prototype.addPosition=function(H,F,I){var G;G={top:I,node:H,position:F};this.positions.push(G);return this.last_top=I};E.prototype.handleNode=function(H,G,F){var I;I=this.getTop(F);if(H===this.current_node){this.addPosition(H,C.NONE,I)}else{this.addPosition(H,C.INSIDE,I)}if(G===this.current_node||H===this.current_node){return this.addPosition(H,C.NONE,I)}else{return this.addPosition(H,C.AFTER,I)}};E.prototype.handleOpenFolder=function(G,F){if(G===this.current_node){return false}if(G.children[0]!==this.current_node){this.addPosition(G,C.INSIDE,this.getTop(F))}return true};E.prototype.handleClosedFolder=function(H,G,F){var I;I=this.getTop(F);if(H===this.current_node){return this.addPosition(H,C.NONE,I)}else{this.addPosition(H,C.INSIDE,I);if(G!==this.current_node){return this.addPosition(H,C.AFTER,I)}}};E.prototype.handleFirstNode=function(G,F){if(G!==this.current_node){return this.addPosition(G,C.BEFORE,this.getTop(d(G.element)))}};E.prototype.handleAfterOpenFolder=function(H,G,F){if(H===this.current_node.node||G===this.current_node.node){return this.addPosition(H,C.NONE,this.last_top)}else{return this.addPosition(H,C.AFTER,this.last_top)}};E.prototype.generateHitAreas=function(H){var L,I,F,K,J,G;K=-1;L=[];I=[];for(J=0,G=H.length;J<G;J++){F=H[J];if(F.top!==K&&L.length){if(L.length){this.generateHitAreasForGroup(I,L,K,F.top)}K=F.top;L=[]}L.push(F)}this.generateHitAreasForGroup(I,L,K,this.tree_bottom);return I};E.prototype.generateHitAreasForGroup=function(H,I,L,F){var G,N,J,K,M;M=Math.min(I.length,4);G=Math.round((F-L)/M);N=L;J=0;while(J<M){K=I[J];H.push({top:N,bottom:N+G,node:K.node,position:K.position});N+=G;J+=1}return null};return E})(l);w=(function(){function D(G,F,E,H){this.offset_x=F;this.offset_y=E;this.$element=d('<span class="jqtree-title jqtree-dragging">'+G.name+"</span>");this.$element.css("position","absolute");H.append(this.$element)}D.prototype.move=function(F,E){return this.$element.offset({left:F-this.offset_x,top:E-this.offset_y})};D.prototype.remove=function(){return this.$element.remove()};return D})();t=(function(){function D(G,F,E){this.$element=F;this.node=G;this.$ghost=d('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>');if(E===C.AFTER){this.moveAfter()}else{if(E===C.BEFORE){this.moveBefore()}else{if(E===C.INSIDE){if(G.isFolder()&&G.is_open){this.moveInsideOpenFolder()}else{this.moveInside()}}}}}D.prototype.remove=function(){return this.$ghost.remove()};D.prototype.moveAfter=function(){return this.$element.after(this.$ghost)};D.prototype.moveBefore=function(){return this.$element.before(this.$ghost)};D.prototype.moveInsideOpenFolder=function(){return d(this.node.children[0].element).before(this.$ghost)};D.prototype.moveInside=function(){this.$element.after(this.$ghost);return this.$ghost.addClass("jqtree-inside")};return D})();j=(function(){function D(F){var E,G;E=F.children(".jqtree-element");G=F.width()-4;this.$hint=d('<span class="jqtree-border"></span>');E.append(this.$hint);this.$hint.css({width:G,height:E.height()-4})}D.prototype.remove=function(){return this.$hint.remove()};return D})();n=(function(){function D(E){this.tree_widget=E;this.previous_top=-1;this._initScrollParent()}D.prototype._initScrollParent=function(){var E,F,G;F=(function(H){return function(){var N,K,J,M,I,L;N=["overflow","overflow-y"];J=function(P){var Q,S,O,R;for(S=0,O=N.length;S<O;S++){Q=N[S];if((R=d.css(P,Q))==="auto"||R==="scroll"){return true}}return false};if(J(H.tree_widget.$el[0])){return H.tree_widget.$el}L=H.tree_widget.$el.parents();for(M=0,I=L.length;M<I;M++){K=L[M];if(J(K)){return d(K)}}return null}})(this);G=(function(H){return function(){H.scroll_parent_top=0;return H.$scroll_parent=null}})(this);if(this.tree_widget.$el.css("position")==="fixed"){G()}E=F();if(E&&E.length&&E[0].tagName!=="HTML"){this.$scroll_parent=E;return this.scroll_parent_top=this.$scroll_parent.offset().top}else{return G()}};D.prototype.checkScrolling=function(){var E;E=this.tree_widget.dnd_handler.hovered_area;if(E&&E.top!==this.previous_top){this.previous_top=E.top;if(this.$scroll_parent){return this._handleScrollingWithScrollParent(E)}else{return this._handleScrollingWithDocument(E)}}};D.prototype._handleScrollingWithScrollParent=function(F){var E;E=this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-F.bottom;if(E<20){this.$scroll_parent[0].scrollTop+=20;this.tree_widget.refreshHitAreas();return this.previous_top=-1}else{if((F.top-this.scroll_parent_top)<20){this.$scroll_parent[0].scrollTop-=20;this.tree_widget.refreshHitAreas();return this.previous_top=-1}}};D.prototype._handleScrollingWithDocument=function(F){var E;E=F.top-d(document).scrollTop();if(E<20){return d(document).scrollTop(d(document).scrollTop()-20)}else{if(d(window).height()-(F.bottom-d(document).scrollTop())<20){return d(document).scrollTop(d(document).scrollTop()+20)}}};D.prototype.scrollTo=function(F){var E;if(this.$scroll_parent){return this.$scroll_parent[0].scrollTop=F}else{E=this.tree_widget.$el.offset().top;return d(document).scrollTop(F+E)}};D.prototype.isScrolledIntoView=function(F){var E,J,I,H,G;E=d(F);if(this.$scroll_parent){G=0;H=this.$scroll_parent.height();I=E.offset().top-this.scroll_parent_top;J=I+E.height()}else{G=d(window).scrollTop();H=G+d(window).height();I=E.offset().top;J=I+E.height()}return(J<=H)&&(I>=G)};return D})();g=(function(){var H,E,G,D;E=37;D=38;G=39;H=40;function F(I){this.tree_widget=I;if(I.options.keyboardSupport){d(document).bind("keydown.jqtree",d.proxy(this.handleKeyDown,this))}}F.prototype.deinit=function(){return d(document).unbind("keydown.jqtree")};F.prototype.handleKeyDown=function(O){var M,K,P,N,L,I,J;if(!this.tree_widget.options.keyboardSupport){return}if(d(document.activeElement).is("textarea,input")){return true}M=this.tree_widget.getSelectedNode();J=(function(Q){return function(R){if(R){Q.tree_widget.selectNode(R);if(Q.tree_widget.scroll_handler&&(!Q.tree_widget.scroll_handler.isScrolledIntoView(d(R.element).find(".jqtree-element")))){Q.tree_widget.scrollToNode(R)}return false}else{return true}}})(this);P=(function(Q){return function(){return J(Q.getNextNode(M))}})(this);I=(function(Q){return function(){return J(Q.getPreviousNode(M))}})(this);L=(function(Q){return function(){if(M.isFolder()&&!M.is_open){Q.tree_widget.openNode(M);return false}else{return true}}})(this);N=(function(Q){return function(){if(M.isFolder()&&M.is_open){Q.tree_widget.closeNode(M);return false}else{return true}}})(this);if(!M){return true}else{K=O.which;switch(K){case H:return P();case D:return I();case G:return L();case E:return N()}}};F.prototype.getNextNode=function(I,K){var J;if(K==null){K=true}if(K&&I.hasChildren()&&I.is_open){return I.children[0]}else{if(!I.parent){return null}else{J=I.getNextSibling();if(J){return J}else{return this.getNextNode(I.parent,false)}}}};F.prototype.getPreviousNode=function(J){var I;if(!J.parent){return null}else{I=J.getPreviousSibling();if(I){if(!I.hasChildren()||!I.is_open){return I}else{return this.getLastChild(I)}}else{if(J.parent.parent){return J.parent}else{return null}}}};F.prototype.getLastChild=function(J){var I;if(!J.hasChildren()){return null}else{I=J.children[J.children.length-1];if(!I.hasChildren()||!I.is_open){return I}else{return this.getLastChild(I)}}};return F})()}).call(this);