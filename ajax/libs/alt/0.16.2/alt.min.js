(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.Alt=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(j,i,k){var m={};var f=Object.create;var p=Object.defineProperties;var q=Object.defineProperty;var s=function(v){var e=arguments[1]===undefined?{}:arguments[1];return{value:v,configurable:!!e.c,writable:!!e.w,enumerable:!!e.e}};var t=function(e){return e&&e[l.toStringTag]==="Symbol"};var u=undefined;try{var r=q({},"y",{get:function(){return 1}});u=r.y===1}catch(o){u=false}var h={};var n=function(y){y=String(y);var v="";var w=0;while(h[y+v]){v=w+=1}h[y+v]=1;var e="Symbol("+y+""+v+")";if(u){q(Object.prototype,e,{get:undefined,set:function(x){q(this,e,s(x,{c:true,w:true}))},configurable:true,enumerable:false})}return e};var g=f(null);function l(v){if(this instanceof l){throw new TypeError("Symbol is not a constructor")}v=v===undefined?"":String(v);var e=n(v);if(!u){return e}return f(g,{__description__:s(v),__tag__:s(e)})}p(l,{"for":s(function(e){var w=String(e);if(m[w]){return m[w]}var v=l(w);m[w]=v;return v}),keyFor:s(function(e){if(!t(e)){throw new TypeError(""+e+" is not a symbol")}for(var v in m){if(m[v]===e){return m[v].__description__}}})});p(l,{hasInstance:s(l("hasInstance")),isConcatSpreadable:s(l("isConcatSpreadable")),iterator:s(l("iterator")),match:s(l("match")),replace:s(l("replace")),search:s(l("search")),species:s(l("species")),split:s(l("split")),toPrimitive:s(l("toPrimitive")),toStringTag:s(l("toStringTag")),unscopables:s(l("unscopables"))});p(g,{constructor:s(l),toString:s(function(){return this.__tag__}),valueOf:s(function(){return"Symbol("+this.__description__+")"})});if(u){q(g,l.toStringTag,s("Symbol",{c:true}))}i.exports=typeof Symbol==="function"?Symbol:l},{}],2:[function(h,g,i){function p(s,q,r){this.fn=s;this.context=q;this.once=r||false}function o(){}o.prototype._events=undefined;o.prototype.listeners=function l(t){if(!this._events||!this._events[t]){return[]}if(this._events[t].fn){return[this._events[t].fn]}for(var s=0,r=this._events[t].length,q=new Array(r);s<r;s++){q[s]=this._events[t][s].fn}return q};o.prototype.emit=function m(r,t,s,q,B,A){if(!this._events||!this._events[r]){return false}var z=this._events[r],x=arguments.length,y,w;if("function"===typeof z.fn){if(z.once){this.removeListener(r,z.fn,true)}switch(x){case 1:return z.fn.call(z.context),true;case 2:return z.fn.call(z.context,t),true;case 3:return z.fn.call(z.context,t,s),true;case 4:return z.fn.call(z.context,t,s,q),true;case 5:return z.fn.call(z.context,t,s,q,B),true;case 6:return z.fn.call(z.context,t,s,q,B,A),true}for(w=1,y=new Array(x-1);w<x;w++){y[w-1]=arguments[w]}z.fn.apply(z.context,y)}else{var u=z.length,v;for(w=0;w<u;w++){if(z[w].once){this.removeListener(r,z[w].fn,true)}switch(x){case 1:z[w].fn.call(z[w].context);break;case 2:z[w].fn.call(z[w].context,t);break;case 3:z[w].fn.call(z[w].context,t,s);break;default:if(!y){for(v=1,y=new Array(x-1);v<x;v++){y[v-1]=arguments[v]}}z[w].fn.apply(z[w].context,y)}}}return true};o.prototype.on=function k(s,r,q){var t=new p(r,q||this);if(!this._events){this._events={}}if(!this._events[s]){this._events[s]=t}else{if(!this._events[s].fn){this._events[s].push(t)}else{this._events[s]=[this._events[s],t]}}return this};o.prototype.once=function f(s,r,q){var t=new p(r,q||this,true);if(!this._events){this._events={}}if(!this._events[s]){this._events[s]=t}else{if(!this._events[s].fn){this._events[s].push(t)}else{this._events[s]=[this._events[s],t]}}return this};o.prototype.removeListener=function j(w,u,t){if(!this._events||!this._events[w]){return this}var s=this._events[w],r=[];if(u){if(s.fn&&(s.fn!==u||(t&&!s.once))){r.push(s)}if(!s.fn){for(var q=0,v=s.length;q<v;q++){if(s[q].fn!==u||(t&&!s[q].once)){r.push(s[q])}}}}if(r.length){this._events[w]=r.length===1?r[0]:r}else{delete this._events[w]}return this};o.prototype.removeAllListeners=function n(q){if(!this._events){return this}if(q){delete this._events[q]}else{this._events={}}return this};o.prototype.off=o.prototype.removeListener;o.prototype.addListener=o.prototype.on;o.prototype.setMaxListeners=function e(){return this};o.EventEmitter=o;o.EventEmitter2=o;o.EventEmitter3=o;g.exports=o},{}],3:[function(f,g,e){g.exports.Dispatcher=f("./lib/Dispatcher")},{"./lib/Dispatcher":4}],4:[function(j,k,i){var h=j("./invariant");var g=1;var e="ID_";function f(){this.$Dispatcher_callbacks={};this.$Dispatcher_isPending={};this.$Dispatcher_isHandled={};this.$Dispatcher_isDispatching=false;this.$Dispatcher_pendingPayload=null}f.prototype.register=function(m){var l=e+g++;this.$Dispatcher_callbacks[l]=m;return l};f.prototype.unregister=function(l){h(this.$Dispatcher_callbacks[l],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",l);delete this.$Dispatcher_callbacks[l]};f.prototype.waitFor=function(m){h(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var l=0;l<m.length;l++){var n=m[l];if(this.$Dispatcher_isPending[n]){h(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n);continue}h(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n);this.$Dispatcher_invokeCallback(n)}};f.prototype.dispatch=function(l){h(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");this.$Dispatcher_startDispatching(l);try{for(var m in this.$Dispatcher_callbacks){if(this.$Dispatcher_isPending[m]){continue}this.$Dispatcher_invokeCallback(m)}}finally{this.$Dispatcher_stopDispatching()}};f.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching};f.prototype.$Dispatcher_invokeCallback=function(l){this.$Dispatcher_isPending[l]=true;this.$Dispatcher_callbacks[l](this.$Dispatcher_pendingPayload);this.$Dispatcher_isHandled[l]=true};f.prototype.$Dispatcher_startDispatching=function(l){for(var m in this.$Dispatcher_callbacks){this.$Dispatcher_isPending[m]=false;this.$Dispatcher_isHandled[m]=false}this.$Dispatcher_pendingPayload=l;this.$Dispatcher_isDispatching=true};f.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null;this.$Dispatcher_isDispatching=false};k.exports=f},{"./invariant":5}],5:[function(g,h,f){var e=function(i,s,r,q,p,n,l,k){if(false){if(s===undefined){throw new Error("invariant requires an error message argument")}}if(!i){var o;if(s===undefined){o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.")}else{var m=[r,q,p,n,l,k];var j=0;o=new Error("Invariant Violation: "+s.replace(/%s/g,function(){return m[j++]}))}o.framesToPop=1;throw o}};h.exports=e},{}],6:[function(f,g,e){function h(i){if(i==null){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(i)}g.exports=Object.assign||function(n,m){var p;var l;var o=h(n);for(var k=1;k<arguments.length;k++){p=arguments[k];l=Object.keys(Object(p));for(var j=0;j<l.length;j++){o[l[j]]=p[l[j]]}}return o}},{}],7:[function(i,g,l){var o=function(p){return p&&p.__esModule?p:{"default":p}};var m=function(p,q){if(!(p instanceof q)){throw new TypeError("Cannot call a class as a function")}};var j=(function(){function p(t,r){for(var q=0;q<r.length;q++){var s=r[q];s.enumerable=s.enumerable||false;s.configurable=true;if("value" in s){s.writable=true}Object.defineProperty(t,s.key,s)}}return function(s,q,r){if(q){p(s.prototype,q)}if(r){p(s,r)}return s}})();Object.defineProperty(l,"__esModule",{value:true});var n=i("./symbols/symbols");var h=o(n);var k=h.ACTION_HANDLER;var f=h.ACTION_UID;var e=(function(){function q(t,r,s,u){m(this,q);this[f]=r;this[k]=s.bind(this);this.actions=u;this.alt=t}j(q,[{key:"dispatch",value:function p(r){this.alt.dispatch(this[f],r)}}]);return q})();l["default"]=e;g.exports=l["default"]},{"./symbols/symbols":9}],8:[function(p,g,y){var x=function(z){return z&&z.__esModule?z:{"default":z}};var j=function(z,A){if(!(z instanceof A)){throw new TypeError("Cannot call a class as a function")}};var u=(function(){function z(D,B){for(var A=0;A<B.length;A++){var C=B[A];C.enumerable=C.enumerable||false;C.configurable=true;if("value" in C){C.writable=true}Object.defineProperty(D,C.key,C)}}return function(C,A,B){if(A){z(C.prototype,A)}if(B){z(C,B)}return C}})();Object.defineProperty(y,"__esModule",{value:true});var s=p("eventemitter3");var r=x(s);var h=p("object-assign");var k=x(h);var f=p("es-symbol");var q=x(f);var w=p("./symbols/symbols");var v=x(w);var m=v.ALL_LISTENERS;var n=v.LIFECYCLE;var o=v.LISTENERS;var i=v.PUBLIC_METHODS;var t=v.STATE_CONTAINER;var e=q["default"]();var l=(function(){function E(I,G,H,F){var J=this;j(this,E);this[e]=new r["default"]();this[n]={};this[t]=H||G;this._storeName=G._storeName;this.boundListeners=G[m];this.StoreModel=F;if(typeof this.StoreModel==="object"){this.StoreModel.state=k["default"]({},F.state)}k["default"](this[n],G[n]);k["default"](this,G[i]);this.dispatchToken=I.dispatcher.register(function(M){if(G[n].beforeEach){G[n].beforeEach(M,J[t])}if(G[o][M.action]){var K=false;try{K=G[o][M.action](M.data)}catch(L){if(J[n].error){J[n].error(L,M,J[t])}else{throw L}}if(K!==false){J.emitChange()}}if(G[n].afterEach){G[n].afterEach(M,J[t])}});if(this[n].init){this[n].init()}}u(E,[{key:"getEventEmitter",value:function C(){return this[e]}},{key:"emitChange",value:function D(){this[e].emit("change",this[t])}},{key:"listen",value:function A(F){var G=this;this[e].on("change",F);return function(){return G.unlisten(F)}}},{key:"unlisten",value:function B(F){if(this[n].unlisten){this[n].unlisten()}this[e].removeListener("change",F)}},{key:"getState",value:function z(){return this.StoreModel.config.getState.call(this,this[t])}}]);return E})();y["default"]=l;g.exports=y["default"]},{"./symbols/symbols":9,"es-symbol":1,eventemitter3:2,"object-assign":6}],9:[function(l,j,p){var r=function(v){return v&&v.__esModule?v:{"default":v}};Object.defineProperty(p,"__esModule",{value:true});var f=l("es-symbol");var s=r(f);var n=s["default"]();p.ACTION_HANDLER=n;var o=s["default"]();p.ACTION_KEY=o;var k=s["default"]();p.ACTIONS_REGISTRY=k;var h=s["default"]();p.ACTION_UID=h;var m=s["default"]();p.ALL_LISTENERS=m;var g=s["default"]();p.INIT_SNAPSHOT=g;var i=s["default"]();p.LAST_SNAPSHOT=i;var e=s["default"]();p.LIFECYCLE=e;var u=s["default"]();p.LISTENERS=u;var q=s["default"]();p.PUBLIC_METHODS=q;var t=s["default"]();p.STATE_CONTAINER=t},{"es-symbol":1}],10:[function(h,g,i){Object.defineProperty(i,"__esModule",{value:true});i.getInternalMethods=f;i.warn=n;i.uid=m;i.formatAsConstant=k;i.dispatchIdentity=l;function j(){}var e=Object.getOwnPropertyNames(j);var o=Object.getOwnPropertyNames(j.prototype);function f(r,q){var p=q?o:e;return Object.getOwnPropertyNames(r).reduce(function(t,s){if(p.indexOf(s)!==-1){return t}t[s]=r[s];return t},{})}function n(p){if(typeof console!=="undefined"){console.warn(new ReferenceError(p))}}function m(p,q){var s=0;var r=q;while(Object.hasOwnProperty.call(p,r)){r=q+String(++s)}return r}function k(p){return p.replace(/[a-z]([A-Z])/g,function(q){return""+q[0]+"_"+q[1].toLowerCase()}).toUpperCase()}function l(p){for(var r=arguments.length,q=Array(r>1?r-1:0),s=1;s<r;s++){q[s-1]=arguments[s]}this.dispatch(q.length?[p].concat(q):p)}},{}],11:[function(k,i,n){var q=function(u){return u&&u.__esModule?u:{"default":u}};Object.defineProperty(n,"__esModule",{value:true});n.setAppState=s;n.snapshot=f;n.saveInitialSnapshot=l;n.filterSnapshots=r;var p=k("object-assign");var m=q(p);var o=k("../symbols/symbols");var j=q(o);var g=j.INIT_SNAPSHOT;var h=j.LAST_SNAPSHOT;var e=j.LIFECYCLE;var t=j.STATE_CONTAINER;function s(u,w,v){var x=u.deserialize(w);Object.keys(x).forEach(function(A){var y=u.stores[A];if(y){var z=y.StoreModel.config;if(z.onDeserialize){x[A]=z.onDeserialize(x[A])||x[A]}m["default"](y[t],x[A]);v(y)}})}function f(u){var w=arguments[1]===undefined?[]:arguments[1];var v=w.length?w:Object.keys(u.stores);return v.reduce(function(B,C){var A=C.displayName||C;var y=u.stores[A];var z=y.StoreModel.config;if(y[e].snapshot){y[e].snapshot()}var x=z.onSerialize&&z.onSerialize(y[t]);B[A]=x?x:y.getState();return B},{})}function l(u,v){var w=u.deserialize(u.serialize(u.stores[v][t]));u[g][v]=w;u[h][v]=w}function r(u,w,v){return v.reduce(function(z,x){var y=x.displayName||x;if(!w[y]){throw new ReferenceError(""+y+" is not a valid store")}z[y]=w[y];return z},{})}},{"../symbols/symbols":9,"object-assign":6}],12:[function(h,f,i){var k=function(u){return u&&u.__esModule?u:{"default":u}};Object.defineProperty(i,"__esModule",{value:true});var e=h("es-symbol");var n=k(e);var j=h("../symbols/symbols");var t={waitFor:function m(u){if(!u){throw new ReferenceError("Dispatch tokens not provided")}if(arguments.length===1){u=Array.isArray(u)?u:[u]}else{u=Array.prototype.slice.call(arguments)}var v=u.map(function(w){return w.dispatchToken||w});this.dispatcher.waitFor(v)},exportPublicMethods:function s(u){var v=this;Object.keys(u).forEach(function(w){if(typeof u[w]!=="function"){throw new TypeError("exportPublicMethods expects a function")}v[j.PUBLIC_METHODS][w]=u[w]})},emitChange:function q(){this.getInstance().emitChange()}};i.StoreMixinEssentials=t;var p={on:function o(v,u){this[j.LIFECYCLE][v]=u.bind(this)},bindAction:function r(w,v){if(!w){throw new ReferenceError("Invalid action reference passed in")}if(typeof v!=="function"){throw new TypeError("bindAction expects a function")}if(v.length>1){throw new TypeError("Action handler in store "+this._storeName+" for "+(""+(w[j.ACTION_KEY]||w).toString()+" was defined with 2 ")+"parameters. Only a single parameter is passed through the dispatcher, did you mean to pass in an Object instead?")}var u=w[j.ACTION_KEY]?w[j.ACTION_KEY]:w;this[j.LISTENERS][u]=v.bind(this);this[j.ALL_LISTENERS].push(n["default"].keyFor(u))},bindActions:function g(v){var u=this;Object.keys(v).forEach(function(y){var x=v[y];var A=/./;var z=y.replace(A,function(B){return"on"+B[0].toUpperCase()});var w=null;if(u[y]&&u[z]){throw new ReferenceError("You have multiple action handlers bound to an action: "+(""+y+" and "+z))}else{if(u[y]){w=u[y]}else{if(u[z]){w=u[z]}}}if(w){u.bindAction(x,w)}})},bindListeners:function l(v){var u=this;Object.keys(v).forEach(function(w){var y=v[w];var x=u[w];if(!x){throw new ReferenceError(""+w+" defined but does not exist in "+u._storeName)}if(Array.isArray(y)){y.forEach(function(z){u.bindAction(z,x)})}else{u.bindAction(y,x)}})}};i.StoreMixinListeners=p},{"../symbols/symbols":9,"es-symbol":1}],13:[function(n,f,y){var w=function(z){return z&&z.__esModule?z:{"default":z}};var s=Function.prototype.bind;var j=function(z,A){if(!(z instanceof A)){throw new TypeError("Cannot call a class as a function")}};var e=function v(A,D,C){var E=Object.getOwnPropertyDescriptor(A,D);if(E===undefined){var B=Object.getPrototypeOf(A);if(B===null){return undefined}else{return v(B,D,C)}}else{if("value" in E){return E.value}else{var z=E.get;if(z===undefined){return undefined}return z.call(C)}}};var t=function(A,z){if(typeof z!=="function"&&z!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof z)}A.prototype=Object.create(z&&z.prototype,{constructor:{value:A,enumerable:false,writable:true,configurable:true}});if(z){A.__proto__=z}};Object.defineProperty(y,"__esModule",{value:true});y.createStoreConfig=i;y.transformStore=m;y.createStoreFromObject=k;y.createStoreFromClass=p;var g=n("object-assign");var l=w(g);var x=n("../AltStore");var r=w(x);var h=n("./AltUtils");var o=n("./StoreMixins");var u=n("../symbols/symbols");function q(z,D,C){if(!C){return}var A=D.StoreModel.config;var B=typeof C==="function"?C(D[u.STATE_CONTAINER]):C;D[u.STATE_CONTAINER]=A.setState.call(z,D[u.STATE_CONTAINER],B);if(!z.alt.dispatcher.isDispatching()){z.emitChange()}}function i(B,A){A.config=l["default"]({getState:function z(C){return Object.keys(C).reduce(function(E,D){E[D]=C[D];return E},{})},setState:l["default"]},B,A.config)}function m(A,z){return A.reduce(function(C,B){return B(C)},z)}function k(E,z,A){var D=undefined;var C={};C[u.ALL_LISTENERS]=[];C[u.LIFECYCLE]={};C[u.LISTENERS]={};l["default"](C,{_storeName:A,alt:E,dispatcher:E.dispatcher,getInstance:function B(){return D},setState:function F(G){q(this,D,G)}},o.StoreMixinListeners,o.StoreMixinEssentials,z);if(C.bindListeners){o.StoreMixinListeners.bindListeners.call(C,C.bindListeners)}if(C.lifecycle){Object.keys(C.lifecycle).forEach(function(G){o.StoreMixinListeners.on.call(C,G,C.lifecycle[G])})}D=l["default"](new r["default"](E,C,C.state,z),C.publicMethods,{displayName:A});return D}function p(C,D,K){for(var H=arguments.length,J=Array(H>3?H-3:0),z=3;z<H;z++){J[z-3]=arguments[z]}var G=undefined;var A=D.config;var F=(function(M){function L(){for(var N=arguments.length,P=Array(N),O=0;O<N;O++){P[O]=arguments[O]}j(this,L);e(Object.getPrototypeOf(L.prototype),"constructor",this).apply(this,P)}t(L,M);return L})(D);l["default"](F.prototype,o.StoreMixinListeners,o.StoreMixinEssentials,{_storeName:K,alt:C,dispatcher:C.dispatcher,getInstance:function B(){return G},setState:function E(L){q(this,G,L)}});F.prototype[u.ALL_LISTENERS]=[];F.prototype[u.LIFECYCLE]={};F.prototype[u.LISTENERS]={};F.prototype[u.PUBLIC_METHODS]={};var I=new (s.apply(F,[null].concat(J)))();G=l["default"](new r["default"](C,I,I[C.config.stateKey]||I[A.stateKey]||null,D),h.getInternalMethods(D),{displayName:K});return G}},{"../AltStore":8,"../symbols/symbols":9,"./AltUtils":10,"./StoreMixins":12,"object-assign":6}],14:[function(j,f,m){var o=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(m,"__esModule",{value:true});m["default"]=q;var n=j("../symbols/symbols");var h=o(n);var e=j("es-symbol");var p=o(e);var i=j("../AltAction");var r=o(i);var s=j("./AltUtils");var l=h.ACTION_KEY;var k=h.ACTION_HANDLER;var g=h.ACTIONS_REGISTRY;function q(C,y,v,z,B){var t=s.uid(C[g],""+y+"."+v);C[g][t]=1;var x=p["default"]["for"]("alt/"+t);var D=new r["default"](C,x,z,B);var A=D[k];A.defer=function(){for(var E=arguments.length,F=Array(E),G=0;G<E;G++){F[G]=arguments[G]}setTimeout(function(){D[k].apply(null,F)})};A[l]=x;var u=C.actions[y];var w=s.uid(u,v);u[w]=A;return A}f.exports=m["default"]},{"../AltAction":7,"../symbols/symbols":9,"./AltUtils":10,"es-symbol":1}],15:[function(m,g,x){var w=function(y){return y&&y.__esModule?y:{"default":y}};var p=Function.prototype.bind;var e=function v(z,C,B){var D=Object.getOwnPropertyDescriptor(z,C);if(D===undefined){var A=Object.getPrototypeOf(z);if(A===null){return undefined}else{return v(A,C,B)}}else{if("value" in D){return D.value}else{var y=D.get;if(y===undefined){return undefined}return y.call(B)}}};var r=function(z,y){if(typeof y!=="function"&&y!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof y)}z.prototype=Object.create(y&&y.prototype,{constructor:{value:z,enumerable:false,writable:true,configurable:true}});if(y){z.__proto__=y}};var j=function(y,z){if(!(y instanceof z)){throw new TypeError("Cannot call a class as a function")}};var t=(function(){function y(C,A){for(var z=0;z<A.length;z++){var B=A[z];B.enumerable=B.enumerable||false;B.configurable=true;if("value" in B){B.writable=true}Object.defineProperty(C,B.key,B)}}return function(B,z,A){if(z){y(B.prototype,z)}if(A){y(B,A)}return B}})();Object.defineProperty(x,"__esModule",{value:true});var h=m("object-assign");var l=w(h);var o=m("flux");var i=m("./utils/makeAction");var u=w(i);var q=m("./utils/StateFunctions");var f=m("./utils/StoreUtils");var n=m("./symbols/symbols");var s=m("./utils/AltUtils");var k=(function(){function G(){var P=arguments[0]===undefined?{}:arguments[0];j(this,G);this.config=P;this.serialize=P.serialize||JSON.stringify;this.deserialize=P.deserialize||JSON.parse;this.dispatcher=P.dispatcher||new o.Dispatcher();this.actions={global:{}};this.stores={};this.storeTransforms=P.storeTransforms||[];this[n.ACTIONS_REGISTRY]={};this[n.INIT_SNAPSHOT]={};this[n.LAST_SNAPSHOT]={}}t(G,[{key:"dispatch",value:function H(Q,P){this.dispatcher.dispatch({action:Q,data:P})}},{key:"createUnsavedStore",value:function E(R){for(var P=arguments.length,Q=Array(P>1?P-1:0),T=1;T<P;T++){Q[T-1]=arguments[T]}var S=R.displayName||"";f.createStoreConfig(this.config,R);var U=f.transformStore(this.storeTransforms,R);return typeof U==="object"?f.createStoreFromObject(this,U,S):f.createStoreFromClass.apply(undefined,[this,U,S].concat(Q))}},{key:"createStore",value:function I(T,S){for(var P=arguments.length,R=Array(P>2?P-2:0),Q=2;Q<P;Q++){R[Q-2]=arguments[Q]}var U=S||T.displayName||T.name||"";f.createStoreConfig(this.config,T);var W=f.transformStore(this.storeTransforms,T);if(this.stores[U]||!U){if(this.stores[U]){s.warn("A store named "+U+" already exists, double check your store names or pass in your own custom identifier for each store")}else{s.warn("Store name was not specified")}U=s.uid(this.stores,U)}var V=typeof W==="object"?f.createStoreFromObject(this,W,U):f.createStoreFromClass.apply(undefined,[this,W,U].concat(R));this.stores[U]=V;q.saveInitialSnapshot(this,U);return V}},{key:"generateActions",value:function K(){for(var S=arguments.length,R=Array(S),P=0;P<S;P++){R[P]=arguments[P]}var Q={name:"global"};return this.createActions(R.reduce(function(U,T){U[T]=s.dispatchIdentity;return U},Q))}},{key:"createAction",value:function L(Q,P,R){return u["default"](this,"global",Q,P,R)}},{key:"createActions",value:function C(V){var W=this;for(var U=arguments.length,R=Array(U>2?U-2:0),P=2;P<U;P++){R[P-2]=arguments[P]}var S=arguments[1]===undefined?{}:arguments[1];var T={};var Q=s.uid(this[n.ACTIONS_REGISTRY],V.displayName||V.name||"Unknown");if(typeof V==="function"){(function(){l["default"](T,s.getInternalMethods(V.prototype,true));var X=(function(aa){function Y(){for(var ad=arguments.length,ac=Array(ad),ab=0;ab<ad;ab++){ac[ab]=arguments[ab]}j(this,Y);e(Object.getPrototypeOf(Y.prototype),"constructor",this).apply(this,ac)}r(Y,aa);t(Y,[{key:"generateActions",value:function Z(){for(var ab=arguments.length,ac=Array(ab),ad=0;ad<ab;ad++){ac[ad]=arguments[ad]}ac.forEach(function(ae){T[ae]=s.dispatchIdentity})}}]);return Y})(V);l["default"](T,new (p.apply(X,[null].concat(R)))())})()}else{l["default"](T,V)}this.actions[Q]=this.actions[Q]||{};return Object.keys(T).reduce(function(Z,Y){if(typeof T[Y]!=="function"){return Z}Z[Y]=u["default"](W,Q,Y,T[Y],Z);var X=s.formatAsConstant(Y);Z[X]=Z[Y][n.ACTION_KEY];return Z},S)}},{key:"takeSnapshot",value:function M(){for(var Q=arguments.length,P=Array(Q),S=0;S<Q;S++){P[S]=arguments[S]}var R=q.snapshot(this,P);l["default"](this[n.LAST_SNAPSHOT],R);return this.serialize(R)}},{key:"rollback",value:function N(){q.setAppState(this,this.serialize(this[n.LAST_SNAPSHOT]),function(P){if(P[n.LIFECYCLE].rollback){P[n.LIFECYCLE].rollback()}P.emitChange()})}},{key:"recycle",value:function B(){for(var R=arguments.length,Q=Array(R),S=0;S<R;S++){Q[S]=arguments[S]}var P=Q.length?q.filterSnapshots(this,this[n.INIT_SNAPSHOT],Q):this[n.INIT_SNAPSHOT];q.setAppState(this,this.serialize(P),function(T){if(T[n.LIFECYCLE].init){T[n.LIFECYCLE].init()}T.emitChange()})}},{key:"flush",value:function O(){var P=this.serialize(q.snapshot(this));this.recycle();return P}},{key:"bootstrap",value:function D(P){q.setAppState(this,P,function(Q){if(Q[n.LIFECYCLE].bootstrap){Q[n.LIFECYCLE].bootstrap()}Q.emitChange()})}},{key:"prepare",value:function J(P,R){var Q={};if(!P._storeName){throw new ReferenceError("Store provided does not have a name")}Q[P._storeName]=R;return this.serialize(Q)}},{key:"addActions",value:function A(Q,T){for(var R=arguments.length,P=Array(R>2?R-2:0),S=2;S<R;S++){P[S-2]=arguments[S]}this.actions[Q]=Array.isArray(T)?this.generateActions.apply(this,T):this.createActions.apply(this,[T].concat(P))}},{key:"addStore",value:function z(R,Q){for(var S=arguments.length,P=Array(S>2?S-2:0),T=2;T<S;T++){P[T-2]=arguments[T]}this.createStore.apply(this,[Q,R].concat(P))}},{key:"getActions",value:function y(P){return this.actions[P]}},{key:"getStore",value:function F(P){return this.stores[P]}}]);return G})();x["default"]=k;g.exports=x["default"]},{"./symbols/symbols":9,"./utils/AltUtils":10,"./utils/StateFunctions":11,"./utils/StoreUtils":13,"./utils/makeAction":14,flux:3,"object-assign":6}]},{},[15])(15)});