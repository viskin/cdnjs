!function(){"use strict";var o=function(o,n){o&&(n.fn.cyPanzoom=n.fn.cytoscapePanzoom=function(o){return a.apply(this,[o]),this},o("core","panzoom",function(o){var n=this;return a.apply(n.container(),[o]),this}))},n={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},a=function(o){var a=$.extend(!0,{},n,o),t=o,e={destroy:function(){var o=$(this),n=o.find(".cy-panzoom");n.data("winbdgs").forEach(function(o){$(window).unbind(o.evt,o.fn)}),n.data("cybdgs").forEach(function(o){$(this).cytoscape("get").off(o.evt,o.fn)}),n.remove()},init:function(){"ontouchstart"in window;return $(this).each(function(){function o(o){var n={x:o.originalEvent.pageX-D.offset().left-D.width()/2,y:o.originalEvent.pageY-D.offset().top-D.height()/2},t=a.panDragAreaSize,e=Math.sqrt(n.x*n.x+n.y*n.y),i=Math.min(e/t,1);if(e<a.panInactiveArea)return{x:NaN,y:NaN};n={x:n.x/e,y:n.y/e},i=Math.max(a.panMinPercentSpeed,i);var c={x:-1*n.x*(i*a.panDistance),y:-1*n.y*(i*a.panDistance)};return c}function n(){clearInterval(q),l("mousemove",F),k.hide()}function t(o){var n=o,t=Math.sqrt(n.x*n.x+n.y*n.y),e={x:-1*n.x/t,y:-1*n.y/t},i=D.width(),c=D.height(),p=t/a.panDistance,s=Math.max(a.panIndicatorMinOpacity,p),r=255-Math.round(255*s);k.show().css({left:i/2*e.x+i/2,top:c/2*e.y+c/2,background:"rgb("+r+", "+r+", "+r+")"})}function e(){var o=m.cytoscape("get");o.pan(),o.zoom();E=m.width()/2,j=m.height()/2}function i(){C=!0,e()}function c(){C=!1}function p(o){var n=m.cytoscape("get");C||e(),n.zoom({level:o,renderedPosition:{x:E,y:j}})}function s(o,n){void 0===n&&(n=0);var t=Q,e=0+t,i=M.height()-I.height()-2*t,c=o.pageY-M.offset().top-n;e>c&&(c=e),c>i&&(c=i);var s=1-(c-e)/(i-e);I.css("top",c);var r=a.minZoom,d=a.maxZoom,m=Math.log(r)/Math.log(d),u=(1-m)*s+m,v=Math.pow(d,u);r>v?v=r:v>d&&(v=d),p(v)}function r(){var o=m.cytoscape("get"),n=o.zoom(),t=a.minZoom,e=a.maxZoom,i=Math.log(t)/Math.log(e),c=Math.log(n)/Math.log(e),p=1-(c-i)/(1-i),s=Q,r=M.height()-I.height()-2*Q,d=p*(r-s);s>d&&(d=s),d>r&&(d=r),I.css("top",d)}function d(o,n){var t;o.bind("mousedown",function(o){if(o.preventDefault(),o.stopPropagation(),0==o.button){var e=m.cytoscape("get"),c=function(){var o=e.zoom(),t=e.zoom()*n;t<a.minZoom&&(t=a.minZoom),t>a.maxZoom&&(t=a.maxZoom),t==a.maxZoom&&o==a.maxZoom||t==a.minZoom&&o==a.minZoom||p(t)};return i(),c(),t=setInterval(c,a.zoomDelay),!1}}),f("mouseup blur",function(){clearInterval(t),c()})}var m=$(this),u=[],v=$(window),f=function(o,n){u.push({evt:o,fn:n}),v.bind(o,n)},l=function(o,n){for(var a=0;a<u.length;a++){var t=u[a];if(t.evt===o&&t.fn===n){u.splice(a,1);break}}v.unbind(o,n)},y=[],h=m.cytoscape("get"),z=function(o,n){y.push({evt:o,fn:n}),h.on(o,n)},g=$('<div class="cy-panzoom"></div>');m.append(g),g.data("winbdgs",u),g.data("cybdgs",y),a.zoomOnly&&g.addClass("cy-panzoom-zoom-only");var b=$('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+a.zoomInIcon+'"></span></div>');g.append(b);var x=$('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+a.zoomOutIcon+'"></span></div>');g.append(x);var w=$('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+a.resetIcon+'"></span></div>');g.append(w);var M=$('<div class="cy-panzoom-slider"></div>');g.append(M),M.append('<div class="cy-panzoom-slider-background"></div>');var I=$('<div class="cy-panzoom-slider-handle"><span class="icon '+a.sliderHandleIcon+'"></span></div>');M.append(I);var Z=$('<div class="cy-panzoom-no-zoom-tick"></div>');M.append(Z);var D=$('<div class="cy-panzoom-panner"></div>');g.append(D);var P=$('<div class="cy-panzoom-panner-handle"></div>');D.append(P);var N=$('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),O=$('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),S=$('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),A=$('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');D.append(N).append(O).append(S).append(A);var k=$('<div class="cy-panzoom-pan-indicator"></div>');D.append(k);var E,j,q,C=!1,F=function(n){n.stopPropagation(),n.preventDefault(),clearInterval(q);var e=o(n);return isNaN(e.x)||isNaN(e.y)?void k.hide():(t(e),void(q=setInterval(function(){m.cytoscape("get").panBy(e)},a.panSpeed)))};P.bind("mousedown",function(o){F(o),f("mousemove",F)}),P.bind("mouseup",function(){n()}),f("mouseup blur",function(){n()}),M.bind("mousedown",function(){return!1});var Y,H,B=!1,Q=2;I.bind("mousedown",Y=function(o){var n=o.target===I[0]?o.offsetY:0;B=!0,i(),I.addClass("active");var a=0;return f("mousemove",H=function(o){var t=+new Date;return t>a+10?(a=t,s(o,n),!1):!1}),f("mouseup",function(){l("mousemove",H),B=!1,I.removeClass("active"),c()}),!1}),M.bind("mousedown",function(o){o.target!==I[0]&&(Y(o),s(o))}),r(),z("zoom",function(){B||r()}),function(){var o=1,n=a.minZoom,t=a.maxZoom,e=Math.log(n)/Math.log(t),i=Math.log(o)/Math.log(t),c=1-(i-e)/(1-e);if(c>1||0>c)return void Z.hide();var p=Q,s=M.height()-I.height()-2*Q,r=c*(s-p);p>r&&(r=p),r>s&&(r=s),Z.css("top",r)}(),d(b,1+a.zoomFactor),d(x,1-a.zoomFactor),w.bind("mousedown",function(o){if(0==o.button){var n=m.cytoscape("get");return 0===n.elements().size()?n.reset():n.fit(a.fitPadding),!1}})})}};return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?($.error("No such function `"+t+"` for jquery.cytoscapePanzoom"),$(this)):e.init.apply(this,arguments)};"undefined"!=typeof module&&module.exports&&(module.exports=o),"undefined"!=typeof define&&define.amd&&define("cytoscape-panzoom",function(){return o}),"undefined"!=typeof cytoscape&&o(cytoscape,jQuery||{})}();