(function(){var a=function(d,e){if(!d){return}e.fn.cyPanzoom=e.fn.cytoscapePanzoom=function(f){b.apply(this,[f]);return this};d("core","panzoom",function(f){var g=this;b.apply(g.container(),[f]);return this})};var c={zoomFactor:0.05,zoomDelay:45,minZoom:0.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:0.25,panInactiveArea:8,panIndicatorMinOpacity:0.5,zoomOnly:false,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};var b=function(g){var d=$.extend(true,{},c,g);var e=g;var f={destroy:function(){var i=$(this);var h=i.find(".cy-panzoom");h.data("winbdgs").forEach(function(j){$(window).unbind(j.evt,j.fn)});h.data("cybdgs").forEach(function(j){$(this).cytoscape("get").off(j.evt,j.fn)});h.remove()},init:function(){var h="ontouchstart" in window;return $(this).each(function(){var m=$(this);var p=[];var A=$(window);var Y=function(Z,aa){p.push({evt:Z,fn:aa});A.bind(Z,aa)};var t=function(aa,ac){for(var ab=0;ab<p.length;ab++){var Z=p[ab];if(Z.evt===aa&&Z.fn===ac){p.splice(ab,1);break}}A.unbind(aa,ac)};var M=[];var w=m.cytoscape("get");var I=function(Z,aa){M.push({evt:Z,fn:aa});w.on(Z,aa)};var j=function(aa,ac){for(var ab=0;ab<M.length;ab++){var Z=M[ab];if(Z.evt===aa&&Z.fn===ac){M.splice(ab,1);break}}w.off(aa,ac)};var Q=$('<div class="cy-panzoom"></div>');m.append(Q);Q.data("winbdgs",p);Q.data("cybdgs",M);if(d.zoomOnly){Q.addClass("cy-panzoom-zoom-only")}var F=$('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+d.zoomInIcon+'"></span></div>');Q.append(F);var r=$('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+d.zoomOutIcon+'"></span></div>');Q.append(r);var u=$('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+d.resetIcon+'"></span></div>');Q.append(u);var s=$('<div class="cy-panzoom-slider"></div>');Q.append(s);s.append('<div class="cy-panzoom-slider-background"></div>');var N=$('<div class="cy-panzoom-slider-handle"><span class="icon '+d.sliderHandleIcon+'"></span></div>');s.append(N);var z=$('<div class="cy-panzoom-no-zoom-tick"></div>');s.append(z);var C=$('<div class="cy-panzoom-panner"></div>');Q.append(C);var W=$('<div class="cy-panzoom-panner-handle"></div>');C.append(W);var P=$('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>');var X=$('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>');var S=$('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>');var x=$('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');C.append(P).append(X).append(S).append(x);var i=$('<div class="cy-panzoom-pan-indicator"></div>');C.append(i);function D(ad){var Z={x:ad.originalEvent.pageX-C.offset().left-C.width()/2,y:ad.originalEvent.pageY-C.offset().top-C.height()/2};var ab=d.panDragAreaSize;var ae=Math.sqrt(Z.x*Z.x+Z.y*Z.y);var aa=Math.min(ae/ab,1);if(ae<d.panInactiveArea){return{x:NaN,y:NaN}}Z={x:Z.x/ae,y:Z.y/ae};aa=Math.max(d.panMinPercentSpeed,aa);var ac={x:-1*Z.x*(aa*d.panDistance),y:-1*Z.y*(aa*d.panDistance)};return ac}function H(){clearInterval(y);t("mousemove",E);i.hide()}function k(af){var ah=af;var ad=Math.sqrt(ah.x*ah.x+ah.y*ah.y);var ae={x:-1*ah.x/ad,y:-1*ah.y/ad};var ag=C.width();var aa=C.height();var ac=ad/d.panDistance;var ab=Math.max(d.panIndicatorMinOpacity,ac);var Z=255-Math.round(ab*255);i.show().css({left:ag/2*ae.x+ag/2,top:aa/2*ae.y+aa/2,background:"rgb("+Z+", "+Z+", "+Z+")"})}function B(){var ab=m.cytoscape("get");var aa=ab.pan();var Z=ab.zoom();T=m.width()/2;R=m.height()/2}var L=false;function l(){L=true;B()}function v(){L=false}var T,R;function U(aa){var Z=m.cytoscape("get");if(!L){B()}Z.zoom({level:aa,renderedPosition:{x:T,y:R}})}var y;var E=function(Z){Z.stopPropagation();Z.preventDefault();clearInterval(y);var aa=D(Z);if(isNaN(aa.x)||isNaN(aa.y)){i.hide();return}k(aa);y=setInterval(function(){m.cytoscape("get").panBy(aa)},d.panSpeed)};W.bind("mousedown",function(Z){E(Z);Y("mousemove",E)});W.bind("mouseup",function(){H()});Y("mouseup blur",function(){H()});s.bind("mousedown",function(){return false});var J;var q=false;var n=2;function O(aj,aa){if(aa===undefined){aa=0}var ai=n;var ab=0+ai;var ag=s.height()-N.height()-2*ai;var af=aj.pageY-s.offset().top-aa;if(af<ab){af=ab}if(af>ag){af=ag}var ad=1-(af-ab)/(ag-ab);N.css("top",af);var ac=d.minZoom;var ak=d.maxZoom;var ah=Math.log(ac)/Math.log(ak);var Z=(1-ah)*ad+ah;var ae=Math.pow(ak,Z);if(ae<ac){ae=ac}else{if(ae>ak){ae=ak}}U(ae)}var o,V;N.bind("mousedown",o=function(ab){var aa=ab.target===N[0]?ab.offsetY:0;q=true;l();N.addClass("active");var Z=0;Y("mousemove",V=function(ad){var ac=+new Date;if(ac>Z+10){Z=ac}else{return false}O(ad,aa);return false});Y("mouseup",function(){t("mousemove",V);q=false;N.removeClass("active");v()});return false});s.bind("mousedown",function(Z){if(Z.target!==N[0]){o(Z);O(Z)}});function G(){var aa=m.cytoscape("get");var ae=aa.zoom();var ac=d.minZoom;var ai=d.maxZoom;var ah=Math.log(ac)/Math.log(ai);var Z=Math.log(ae)/Math.log(ai);var ad=1-(Z-ah)/(1-ah);var ab=n;var ag=s.height()-N.height()-2*n;var af=ad*(ag-ab);if(af<ab){af=ab}if(af>ag){af=ag}N.css("top",af)}G();I("zoom",function(){if(!q){G()}});(function(){var ad=1;var ab=d.minZoom;var ah=d.maxZoom;var ag=Math.log(ab)/Math.log(ah);var Z=Math.log(ad)/Math.log(ah);var ac=1-(Z-ag)/(1-ag);if(ac>1||ac<0){z.hide();return}var aa=n;var af=s.height()-N.height()-2*n;var ae=ac*(af-aa);if(ae<aa){ae=aa}if(ae>af){ae=af}z.css("top",ae)})();function K(aa,Z){var ab;aa.bind("mousedown",function(ac){ac.preventDefault();ac.stopPropagation();if(ac.button!=0){return}var ae=m.cytoscape("get");var ad=function(){var ag=ae.zoom();var af=ae.zoom()*Z;if(af<d.minZoom){af=d.minZoom}if(af>d.maxZoom){af=d.maxZoom}if((af==d.maxZoom&&ag==d.maxZoom)||(af==d.minZoom&&ag==d.minZoom)){return}U(af)};l();ad();ab=setInterval(ad,d.zoomDelay);return false});Y("mouseup blur",function(){clearInterval(ab);v()})}K(F,(1+d.zoomFactor));K(r,(1-d.zoomFactor));u.bind("mousedown",function(Z){if(Z.button!=0){return}var aa=m.cytoscape("get");if(aa.elements().size()===0){aa.reset()}else{aa.fit(d.fitPadding)}return false})})}};if(f[e]){return f[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e=="object"||!e){return f.init.apply(this,arguments)}else{$.error("No such function `"+e+"` for jquery.cytoscapePanzoom")}}return $(this)};if(typeof module!=="undefined"&&module.exports){module.exports=a}if(typeof define!=="undefined"&&define.amd){define("cytoscape-panzoom",function(){return a})}if(typeof cytoscape!=="undefined"){a(cytoscape,jQuery||{})}})();