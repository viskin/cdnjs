(function(){var a=function(d,e){if(!d){return}e.fn.cyPanzoom=e.fn.cytoscapePanzoom=function(f){b.apply(this,f);return this};d("core","panzoom",function(f){var g=this;b.apply(g.container(),f);return this})};var c={zoomFactor:0.05,zoomDelay:45,minZoom:0.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:0.25,panInactiveArea:8,panIndicatorMinOpacity:0.5,autodisableForMobile:true,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};var b=function(g){var d=$.extend(true,{},c,g);var e=g;var f={destroy:function(){var h=$(this);h.find(".ui-cytoscape-panzoom").remove()},init:function(){var h="ontouchstart" in window;if(h&&d.autodisableForMobile){return $(this)}return $(this).each(function(){var l=$(this);var K=$('<div class="ui-cytoscape-panzoom"></div>');l.append(K);if(d.staticPosition){K.addClass("ui-cytoscape-panzoom-static")}var B=$('<div class="ui-cytoscape-panzoom-zoom-in ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.zoomInIcon+'"></span></div>');K.append(B);var p=$('<div class="ui-cytoscape-panzoom-zoom-out ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.zoomOutIcon+'"></span></div>');K.append(p);var r=$('<div class="ui-cytoscape-panzoom-reset ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.resetIcon+'"></span></div>');K.append(r);var q=$('<div class="ui-cytoscape-panzoom-slider"></div>');K.append(q);q.append('<div class="ui-cytoscape-panzoom-slider-background"></div>');var H=$('<div class="ui-cytoscape-panzoom-slider-handle"><span class="icon '+d.sliderHandleIcon+'"></span></div>');q.append(H);var w=$('<div class="ui-cytoscape-panzoom-no-zoom-tick"></div>');q.append(w);var y=$('<div class="ui-cytoscape-panzoom-panner"></div>');K.append(y);var Q=$('<div class="ui-cytoscape-panzoom-panner-handle"></div>');y.append(Q);var I=$('<div class="ui-cytoscape-panzoom-pan-up ui-cytoscape-panzoom-pan-button"></div>');var R=$('<div class="ui-cytoscape-panzoom-pan-down ui-cytoscape-panzoom-pan-button"></div>');var M=$('<div class="ui-cytoscape-panzoom-pan-left ui-cytoscape-panzoom-pan-button"></div>');var u=$('<div class="ui-cytoscape-panzoom-pan-right ui-cytoscape-panzoom-pan-button"></div>');y.append(I).append(R).append(M).append(u);var i=$('<div class="ui-cytoscape-panzoom-pan-indicator"></div>');y.append(i);function z(W){var S={x:W.originalEvent.pageX-y.offset().left-y.width()/2,y:W.originalEvent.pageY-y.offset().top-y.height()/2};var U=d.panDragAreaSize;var X=Math.sqrt(S.x*S.x+S.y*S.y);var T=Math.min(X/U,1);if(X<d.panInactiveArea){return{x:NaN,y:NaN}}S={x:S.x/X,y:S.y/X};T=Math.max(d.panMinPercentSpeed,T);var V={x:-1*S.x*(T*d.panDistance),y:-1*S.y*(T*d.panDistance)};return V}function C(){clearInterval(v);$(window).unbind("mousemove",A);i.hide()}function j(Y){var aa=Y;var W=Math.sqrt(aa.x*aa.x+aa.y*aa.y);var X={x:-1*aa.x/W,y:-1*aa.y/W};var Z=y.width();var T=y.height();var V=W/d.panDistance;var U=Math.max(d.panIndicatorMinOpacity,V);var S=255-Math.round(U*255);i.show().css({left:Z/2*X.x+Z/2,top:T/2*X.y+T/2,background:"rgb("+S+", "+S+", "+S+")"})}function x(){var U=l.cytoscape("get");var T=U.pan();var S=U.zoom();N=l.width()/2;L=l.height()/2}var G=false;function k(){G=true;x()}function s(){G=false}var N,L;function O(T){var S=l.cytoscape("get");if(!G){x()}S.zoom({level:T,renderedPosition:{x:N,y:L}})}var v;var A=function(S){S.stopPropagation();S.preventDefault();clearInterval(v);var T=z(S);if(isNaN(T.x)||isNaN(T.y)){i.hide();return}j(T);v=setInterval(function(){l.cytoscape("get").panBy(T)},d.panSpeed)};Q.bind("mousedown",function(S){A(S);$(window).bind("mousemove",A)});Q.bind("mouseup",function(){C()});$(window).bind("mouseup blur",function(){C()});q.bind("mousedown",function(){return false});var E;var o=false;var m=2;function J(ac,T){if(T===undefined){T=0}var ab=m;var U=0+ab;var Z=q.height()-H.height()-2*ab;var Y=ac.pageY-q.offset().top-T;if(Y<U){Y=U}if(Y>Z){Y=Z}var W=1-(Y-U)/(Z-U);H.css("top",Y);var V=d.minZoom;var ad=d.maxZoom;var aa=Math.log(V)/Math.log(ad);var S=(1-aa)*W+aa;var X=Math.pow(ad,S);if(X<V){X=V}else{if(X>ad){X=ad}}O(X)}var n,P;H.bind("mousedown",n=function(U){var T=U.target===H[0]?U.offsetY:0;o=true;k();H.addClass("active");var S=0;$(window).bind("mousemove",P=function(W){var V=+new Date;if(V>S+10){S=V}else{return false}J(W,T);return false});$(window).bind("mouseup",function(){$(window).unbind("mousemove",P);o=false;H.removeClass("active");s()});return false});q.bind("mousedown",function(S){if(S.target!==H[0]){n(S);J(S)}});function D(){var T=l.cytoscape("get");var X=T.zoom();var V=d.minZoom;var ab=d.maxZoom;var aa=Math.log(V)/Math.log(ab);var S=Math.log(X)/Math.log(ab);var W=1-(S-aa)/(1-aa);var U=m;var Z=q.height()-H.height()-2*m;var Y=W*(Z-U);if(Y<U){Y=U}if(Y>Z){Y=Z}H.css("top",Y)}D();var t=l.cytoscape("get");t.on("zoom",function(){if(!o){D()}});(function(){var W=1;var U=d.minZoom;var aa=d.maxZoom;var Z=Math.log(U)/Math.log(aa);var S=Math.log(W)/Math.log(aa);var V=1-(S-Z)/(1-Z);if(V>1||V<0){w.hide();return}var T=m;var Y=q.height()-H.height()-2*m;var X=V*(Y-T);if(X<T){X=T}if(X>Y){X=Y}w.css("top",X)})();function F(T,S){var U;T.bind("mousedown",function(V){V.preventDefault();V.stopPropagation();if(V.button!=0){return}var X=l.cytoscape("get");var W=function(){var Z=X.zoom();var Y=X.zoom()*S;if(Y<d.minZoom){Y=d.minZoom}if(Y>d.maxZoom){Y=d.maxZoom}if((Y==d.maxZoom&&Z==d.maxZoom)||(Y==d.minZoom&&Z==d.minZoom)){return}O(Y)};k();W();U=setInterval(W,d.zoomDelay);return false});$(window).bind("mouseup blur",function(){clearInterval(U);s()})}F(B,(1+d.zoomFactor));F(p,(1-d.zoomFactor));r.bind("mousedown",function(S){if(S.button!=0){return}var T=l.cytoscape("get");if(T.elements().size()===0){T.reset()}else{T.fit(d.fitPadding)}return false})})}};if(f[e]){return f[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e=="object"||!e){return f.init.apply(this,arguments)}else{$.error("No such function `"+e+"` for jquery.cytoscapePanzoom")}}return $(this)};if(typeof module!=="undefined"&&module.exports){module.exports=a}if(typeof define!=="undefined"&&define.amd){define("cytoscape-panzoom",function(){return a})}if(typeof cytoscape!=="undefined"){a(cytoscape,jQuery||{})}})();