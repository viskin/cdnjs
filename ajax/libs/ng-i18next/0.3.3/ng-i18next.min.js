/*! ng-i18next - v0.3.3 - 2014-07-18 - Copyright (c) 2014 Andre Meyering; Licensed MIT */angular.module("jm.i18next",["ng"]),angular.module("jm.i18next").provider("$i18next",function(){"use strict";var a=this,b=null,c={},d=null,e=0;a.options={},a.$get=["$rootScope","$timeout",function(f,g){function h(a){window.i18n?window.i18n.init(a,function(a){c={},b=a,f.$$phase||f.$digest(),f.$broadcast("i18nextLanguageChange")}):(e++,5>e&&g(function(){h(a)},400))}function i(a,b){k.debugMsg.push(["i18next options changed:",b,a]),d=a,h(d)}function j(a,e,f){var g=e.lng||"auto";c[g]||(c[g]={}),b?(!c[g][a]||f)&&(c[g][a]=b(a,e)):c[g][a]="defaultLoadingValue"in e?e.defaultLoadingValue:"defaultValue"in e?e.defaultValue:"defaultLoadingValue"in d?d.defaultLoadingValue:a}function k(a,b){var d=b||{},e=b?angular.extend({},d,b):d;return j(a,e,!!b),b&&b.lng?c[b.lng][a]:d.lng?c[d.lng][a]:c.auto[a]}return k.debugMsg=[],k.options=a.options,a.options!==d&&i(a.options,d),k.reInit=function(){i(d,d)},f.$watch(function(){return k.options},function(a,b){a&&b!==a&&i(a,b)},!0),k}]}),angular.module("jm.i18next").directive("ngI18next",["$rootScope","$i18next","$compile","$parse","$interpolate",function(a,b,c,d,e){"use strict";function f(f,g,i){var j,k,l="text",m=[l];if(h&&h(),i=i.trim(),0===i.indexOf("[")){var n=i.split("]");if(n.length>2)for(k=2;k<n.length;k++)n[1]+="]"+n[k],n[k]=null;i=n[1],l=n[0].substr(1,n[0].length-1)}if(i.indexOf(";")===i.length-1&&(i=i.substr(0,i.length-2).trim()),l.indexOf(":")>=0?(m=l.split(":"),l=m[0]):"i18next"===l&&(m[1]="i18next",l="text"),"i18next"!==l&&"i18next"!==m[1])j=b(i);else{var o={},p=i;if(i.indexOf("(")>=0&&i.indexOf(")")>=0){var q=i.split(")");q[0]=q[0].substr(1,q[0].length),q.length>2?(p=q.pop(),o=d(q.join(")"))(f)):(o=d(q[0])(f),p=q[1].trim()),o.sprintf&&(o.postProcess="sprintf")}j=b(p,o)}if("html"===l)g.empty().append(j),c(g.contents())(f);else{var r=g.text.bind(g);"text"!==l&&(r=g.attr.bind(g,l)),h=f.$watch(e(j),r),r(j)}a.$$phase||a.$digest()}function g(a,b,c){if(c.indexOf(";")>=0)for(var d=c.split(";"),e=0;e<d.length;e++)""!==d[e]&&f(a,b,d[e]);else f(a,b,c)}var h;return{restrict:"A",scope:!1,link:function(a,b,c){function d(c){return h=c.replace(/^\s+|\s+$/g,""),""===h?f():void g(a,b,h)}function f(){if(!f.done){var c=e(b.html());a.$watch(c,d),f.done=!0}}var h;c.$observe("ngI18next",d),a.$on("i18nextLanguageChange",function(){g(a,b,h)})}}}]),angular.module("jm.i18next").filter("i18next",["$i18next",function(a){"use strict";return function(b,c){return a(b,c)}}]);