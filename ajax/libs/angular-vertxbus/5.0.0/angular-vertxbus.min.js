/*! angular-vertxbus - v5.0.0 - 2016-03-25
 * http://github.com/knalli/angular-vertxbus
 * Copyright (c) 2016 Jan Philipp
 * @license MIT */
!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("vertx-eventbus"));else if("function"==typeof define&&define.amd)define(["vertx-eventbus"],n);else{var t=n("object"==typeof exports?require("vertx-eventbus"):e.EventBus);for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(this,function(e){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(1),o=r(i);n["default"]=o["default"]},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(2),o=t(3),u=r(o),s=t(9),a=r(s);n["default"]=angular.module(i.moduleName,["ng"]).provider("vertxEventBus",u["default"]).provider("vertxEventBusService",a["default"]).name},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t="knalli.angular-vertxbus";n.moduleName=t},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(4),o=r(i),u=t(7),s=r(u),a=t(6),c=r(a),l=t(8),f=r(l),d={enabled:!0,debugEnabled:!1,initialConnectEnabled:!0,urlServer:location.protocol+"//"+location.hostname+(function(){return location.port?":"+location.port:void 0}()||""),urlPath:"/eventbus",reconnectEnabled:!0,sockjsReconnectInterval:1e4,sockjsOptions:{}},v=function(){var e=this,n=angular.extend({},d);this.enable=function(){var t=arguments.length<=0||void 0===arguments[0]?d.enabled:arguments[0];return n.enabled=t===!0,e},this.disableAutoConnect=function(){return n.initialConnectEnabled=!1,e},this.useDebug=function(){var t=arguments.length<=0||void 0===arguments[0]?d.debugEnabled:arguments[0];return n.debugEnabled=t===!0,e},this.useUrlServer=function(){var t=arguments.length<=0||void 0===arguments[0]?d.urlServer:arguments[0];return n.urlServer=t,e},this.useUrlPath=function(){var t=arguments.length<=0||void 0===arguments[0]?d.urlPath:arguments[0];return n.urlPath=t,e},this.useReconnect=function(){var t=arguments.length<=0||void 0===arguments[0]?d.reconnectEnabled:arguments[0];return n.reconnectEnabled=t,e},this.useSockJsReconnectInterval=function(){var t=arguments.length<=0||void 0===arguments[0]?d.sockjsReconnectInterval:arguments[0];return n.sockjsReconnectInterval=t,e},this.useSockJsOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?d.sockjsOptions:arguments[0];return n.sockjsOptions=t,e},this.$get=function(e,t,r){var i=angular.extend({},d,n);return i.enabled&&f["default"]?(i.debugEnabled&&t.debug("[Vert.x EB Stub] Enabled"),i.connectionConfig=new c["default"]({urlServer:i.urlServer,urlPath:i.urlPath}),delete i.urlServer,delete i.urlPath,new o["default"](f["default"],e,t,r,i)):(i.debugEnabled&&t.debug("[Vert.x EB Stub] Disabled"),new s["default"](f["default"],r))},this.$get.$inject=["$timeout","$log","$q"]};n["default"]=v},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function u(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t(2),c=t(5),l=r(c),f=t(6),d=r(f),v=function(e){function n(e,t,r,u,s){var a=s.enabled,c=s.debugEnabled,l=s.initialConnectEnabled,f=s.connectionConfig,d=s.reconnectEnabled,v=s.sockjsReconnectInterval,h=s.sockjsOptions;i(this,n);var p=o(this,Object.getPrototypeOf(n).call(this,u));return p.EventBus=e,p.$timeout=t,p.$log=r,p.$q=u,p.options={enabled:a,debugEnabled:c,initialConnectEnabled:l,connectionConfig:f,reconnectEnabled:d,sockjsReconnectInterval:v,sockjsOptions:h},p.disconnectTimeoutEnabled=!0,l&&p.connect(),p}return u(n,e),s(n,[{key:"configureConnection",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?"/eventbus":arguments[1];return this.options.connectionConfig=new d["default"]({urlServer:e,urlPath:n}),this}},{key:"connect",value:function(){var e=this,n=this.$q.defer(),t=""+this.options.connectionConfig.urlServer+this.options.connectionConfig.urlPath;return this.options.debugEnabled&&this.$log.debug("[Vert.x EB Stub] Enabled: connecting '"+t+"'"),this.instance=new this.EventBus(t,this.options.sockjsOptions),this.instance.onopen=function(){e.options.debugEnabled&&e.$log.debug("[Vert.x EB Stub] Connected"),angular.isFunction(e.onopen)&&e.onopen(),n.resolve()},this.instance.onclose=function(){e.options.debugEnabled&&e.$log.debug("[Vert.x EB Stub] Reconnect in "+e.options.sockjsReconnectInterval+"ms"),angular.isFunction(e.onclose)&&e.onclose(),e.instance=void 0,e.disconnectTimeoutEnabled?e.options.reconnectEnabled&&(e.options.debugEnabled&&e.$log.debug("[Vert.x EB Stub] Reconnect in "+e.options.sockjsReconnectInterval+"ms"),e.$timeout(function(){return e.connect()},e.options.sockjsReconnectInterval)):(e.options.debugEnabled&&e.$log.debug("[Vert.x EB Stub] Reconnect immediately"),e.disconnectTimeoutEnabled=!0,e.connect())},this.instance.onerror=function(n){angular.isFunction(e.onerror)&&e.onerror(n)},n.promise}},{key:"reconnect",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.instance&&this.instance.state===this.EventBus.OPEN?(e&&(this.disconnectTimeoutEnabled=!1),this.instance.close()):this.connect()}},{key:"close",value:function(){this.instance&&this.instance.close()}},{key:"send",value:function(e,n,t,r,i){this.instance&&(angular.isFunction(t)&&(i=r,r=t,t=void 0),this.instance.send(e,n,t,r,i))}},{key:"publish",value:function(e,n,t){this.instance&&this.instance.publish(e,n,t)}},{key:"registerHandler",value:function(e,n,t){var r=this;if(this.instance){angular.isFunction(n)&&!t&&(t=n,n=void 0),this.instance.registerHandler(e,n,t);var i=function(){r.unregisterHandler(e,n,t)};return i.displayName=a.moduleName+".wrapper.eventbus.registerHandler.deconstructor",i}}},{key:"unregisterHandler",value:function(e,n,t){this.instance&&this.instance.state===this.EventBus.OPEN&&(angular.isFunction(n)&&!t&&(t=n,n=void 0),this.instance.unregisterHandler(e,n,t))}},{key:"readyState",value:function(){return this.instance?this.instance.state:this.EventBus.CLOSED}},{key:"getOptions",value:function(){return angular.extend({},this.options)}},{key:"state",get:function(){return this.readyState()}}]),n}(l["default"]);n["default"]=v},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(n){t(this,e),this.$q=n}return r(e,[{key:"configureConnection",value:function(){}},{key:"connect",value:function(){return this.$q.reject()}},{key:"reconnect",value:function(){}},{key:"close",value:function(){}},{key:"send",value:function(){}},{key:"publish",value:function(){}},{key:"registerHandler",value:function(){}},{key:"unregisterHandler",value:function(){}},{key:"readyState",value:function(){}},{key:"getOptions",value:function(){return{}}},{key:"onopen",value:function(){}},{key:"onclose",value:function(){}}]),e}();n["default"]=i},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(n){var r=n.urlServer,i=n.urlPath;t(this,e),this._urlServer=r,this._urlPath=i}return r(e,[{key:"urlServer",get:function(){return this._urlServer}},{key:"urlPath",get:function(){return this._urlPath}}]),e}();n["default"]=i},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function u(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var s=t(5),a=r(s),c=function(e){function n(e,t){i(this,n);var r=o(this,Object.getPrototypeOf(n).call(this,t));return r.EventBus=e,r}return u(n,e),n}(a["default"]);n["default"]=c},function(n,t){n.exports=e},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(10),o=r(i),u=t(14),s=r(u),a=t(15),c=r(a),l={enabled:!0,debugEnabled:!1,prefix:"vertx-eventbus.",sockjsStateInterval:1e4,messageBuffer:1e4},f=function(){var e=this,n=angular.extend({},l);this.enable=function(){var t=arguments.length<=0||void 0===arguments[0]?l.enabled:arguments[0];return n.enabled=t===!0,e},this.useDebug=function(){var t=arguments.length<=0||void 0===arguments[0]?l.debugEnabled:arguments[0];return n.debugEnabled=t===!0,e},this.usePrefix=function(){var t=arguments.length<=0||void 0===arguments[0]?l.prefix:arguments[0];return n.prefix=t,e},this.useSockJsStateInterval=function(){var t=arguments.length<=0||void 0===arguments[0]?l.sockjsStateInterval:arguments[0];return n.sockjsStateInterval=t,e},this.useMessageBuffer=function(){var t=arguments.length<=0||void 0===arguments[0]?l.messageBuffer:arguments[0];return n.messageBuffer=t,e},this.$get=function(e,t,r,i,u){var a=angular.extend({},i.getOptions(),n);return a.enabled?new c["default"](new o["default"](e,r,u,t,i,a),u):new c["default"](new s["default"])},this.$get.$inject=["$rootScope","$q","$interval","vertxEventBus","$log"]};n["default"]=f},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function u(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t(2),c=t(11),l=r(c),f=t(12),d=r(f),v=t(13),h=r(v),p=function(e){function n(e,t,r,u,s,a){var c=a.enabled,f=a.debugEnabled,v=a.prefix,h=a.sockjsStateInterval,p=a.messageBuffer,b=a.loginRequired,g=a.loginInterceptor;i(this,n);var y=o(this,Object.getPrototypeOf(n).call(this));return y.$rootScope=e,y.$interval=t,y.$log=r,y.$q=u,y.eventBus=s,y.options={enabled:c,debugEnabled:f,prefix:v,sockjsStateInterval:h,messageBuffer:p,loginRequired:b},y.loginInterceptor=g,y.connectionState=y.eventBus.EventBus.CLOSED,y.states={connected:!1,validSession:!1},y.observers=[],y.messageQueue=new l["default"](y.options.messageBuffer),y.callbackMap=new d["default"],y.initialize(),y}return u(n,e),s(n,[{key:"initialize",value:function(){var e=this;this.eventBus.onopen=function(){return e.onEventbusOpen()},this.eventBus.onclose=function(){return e.onEventbusClose()};var n=function(){return e.getConnectionState(!0)};n.displayName="connectionIntervalCheck",this.$interval(function(){return n()},this.options.sockjsStateInterval)}},{key:"onEventbusOpen",value:function(){var e=!1;if(this.getConnectionState(!0),this.states.connected||(this.states.connected=!0,e=!0),this.afterEventbusConnected(),e&&this.$rootScope.$broadcast(this.options.prefix+"system.connected"),this.$rootScope.$digest(),this.options.messageBuffer&&this.messageQueue.size()){for(;this.messageQueue.size();){var n=this.messageQueue.first();angular.isFunction(n)&&n()}this.$rootScope.$digest()}}},{key:"onEventbusClose",value:function(){this.getConnectionState(!0),this.states.connected&&(this.states.connected=!1,this.$rootScope.$broadcast(this.options.prefix+"system.disconnected"))}},{key:"observe",value:function(e){this.observers.push(e)}},{key:"afterEventbusConnected",value:function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.observers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;angular.isFunction(o.afterEventbusConnected)&&o.afterEventbusConnected()}}catch(u){n=!0,t=u}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw t}}}},{key:"registerHandler",value:function(e,n,t){var r=this;if(angular.isFunction(n)&&!t&&(t=n,n=void 0),angular.isFunction(t)){this.options.debugEnabled&&this.$log.debug("[Vert.x EB Service] Register handler for "+e);var i=function(e,n,i){var o=n.body;t(o,i),r.$rootScope.$digest()};return i.displayName=a.moduleName+".service.delegate.live.registerHandler.callbackWrapper",this.callbackMap.put(t,i),this.eventBus.registerHandler(e,n,i)}}},{key:"unregisterHandler",value:function(e,n,t){angular.isFunction(n)&&!t&&(t=n,n=void 0),angular.isFunction(t)&&(this.options.debugEnabled&&this.$log.debug("[Vert.x EB Service] Unregister handler for "+e),this.eventBus.unregisterHandler(e,n,this.callbackMap.get(t)),this.callbackMap.remove(t))}},{key:"send",value:function(e,n,t){var r=this,i=arguments.length<=3||void 0===arguments[3]?1e4:arguments[3],o=arguments.length<=4||void 0===arguments[4]?!0:arguments[4];angular.isNumber(t)&&("boolean"==typeof i&&(o=i),i=t,t=void 0);var u=this.$q.defer(),s=function(){o?!function(){var o=r.$interval(function(){r.options.debugEnabled&&r.$log.debug("[Vert.x EB Service] send('"+e+"') timed out"),u.reject()},i,1);r.eventBus.send(e,n,t,function(e,n){r.$interval.cancel(o),e?u.reject(e):u.resolve(n)},function(e){r.$interval.cancel(o),u.reject(e)})}():(r.eventBus.send(e,n,t),u.resolve())};return s.displayName=a.moduleName+".service.delegate.live.send.next",this.ensureOpenAuthConnection(s)||u.reject(),u.promise}},{key:"publish",value:function(e,n,t){var r=this;return this.ensureOpenAuthConnection(function(){return r.eventBus.publish(e,n,t)})}},{key:"ensureOpenConnection",value:function(e){return this.isConnectionOpen()?(e(),!0):this.options.messageBuffer?(this.messageQueue.push(e),!0):!1}},{key:"ensureOpenAuthConnection",value:function(e){var n=this;if(this.options.loginRequired){var t=function(){return n.states.validSession?(e(),!0):(n.options.debugEnabled&&n.$log.debug("[Vert.x EB Service] Message was not sent because login is required"),!1)};return t.displayName=a.moduleName+".service.delegate.live.ensureOpenAuthConnection.fnWrapper",this.ensureOpenConnection(t)}return this.ensureOpenConnection(e)}},{key:"getConnectionState",value:function(e){return this.options.enabled?e&&(this.connectionState=this.eventBus.state):this.connectionState=this.eventBus.EventBus.CLOSED,this.connectionState}},{key:"isConnectionOpen",value:function(){return this.getConnectionState()===this.eventBus.EventBus.OPEN}},{key:"isValidSession",value:function(){return this.states.validSession}},{key:"isConnected",value:function(){return this.states.connected}},{key:"isEnabled",value:function(){return this.options.enabled}},{key:"getMessageQueueLength",value:function(){return this.messageQueue.size()}}]),n}(h["default"]);n["default"]=p},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){var n=arguments.length<=0||void 0===arguments[0]?10:arguments[0];t(this,e),this.maxSize=n,this.items=[]}return r(e,[{key:"push",value:function(e){return this.items.push(e),this.recalibrateBufferSize()}},{key:"recalibrateBufferSize",value:function(){for(;this.items.length>this.maxSize;)this.first();return this}},{key:"last",value:function(){return this.items.pop()}},{key:"first",value:function(){return this.items.shift(0)}},{key:"size",value:function(){return this.items.length}}]),e}();n["default"]=i},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){t(this,e),this.clear()}return r(e,[{key:"put",value:function(e,n){var t=this._indexForKey(e);return t>-1?this.values[t]=n:(this.keys.push(e),this.values.push(n)),this}},{key:"get",value:function(e){var n=this._indexForKey(e);return n>-1?this.values[n]:void 0}},{key:"containsKey",value:function(e){var n=this._indexForKey(e);return n>-1}},{key:"containsValue",value:function(e){var n=this._indexForValue(e);return n>-1}},{key:"remove",value:function(e){var n=this._indexForKey(e);n>-1&&(this.keys[n]=void 0,this.values[n]=void 0)}},{key:"clear",value:function(){return this.keys=[],this.values=[],this}},{key:"_indexForKey",value:function(e){for(var n in this.keys)if(e===this.keys[n])return n;return-1}},{key:"_indexForValue",value:function(e){for(var n in this.values)if(e===this.values[n])return n;return-1}}]),e}();n["default"]=i},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){t(this,e)}return r(e,[{key:"getConnectionState",value:function(){return 3}},{key:"isConnectionOpen",value:function(){return!1}},{key:"isValidSession",value:function(){return!1}},{key:"isEnabled",value:function(){return!1}},{key:"isConnected",value:function(){return!1}},{key:"send",value:function(){}},{key:"publish",value:function(){}}]),e}();n["default"]=i},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function u(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var s=t(13),a=r(s),c=function(e){function n(){return i(this,n),o(this,Object.getPrototypeOf(n).apply(this,arguments))}return u(n,e),n}(a["default"]);n["default"]=c},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=t(2),u=function(){function e(n,t){var i=this;r(this,e),this.delegate=n,this.$log=t,this.handlers=[],this.delegate.observe({afterEventbusConnected:function(){return i.afterEventbusConnected()}})}return i(e,[{key:"afterEventbusConnected",value:function(){for(var e in this.handlers){var n=this.handlers[e];if(n&&n.length){var t=!0,r=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var s=o.value,a=s.headers,c=s.callback;this.delegate.registerHandler(e,a,c)}}catch(l){r=!0,i=l}finally{try{!t&&u["return"]&&u["return"]()}finally{if(r)throw i}}}}}},{key:"registerHandler",value:function(e,n,t){var r=this;angular.isFunction(n)&&!t&&(t=n,n=void 0),this.handlers[e]||(this.handlers[e]=[]);var i={headers:n,callback:t};this.handlers[e].push(i);var u=null;this.delegate.isConnectionOpen()&&(this.delegate.registerHandler(e,n,t),u=function(){return r.delegate.unregisterHandler(e,n,t)});var s=function(){if(u&&(u(),u=void 0),r.handlers[e]){var n=r.handlers[e].indexOf(i);n>-1&&r.handlers[e].splice(n,1),r.handlers[e].length<1&&(r.handlers[e]=void 0)}};return s.displayName=o.moduleName+".service.registerHandler.deconstructor",s}},{key:"on",value:function(e,n,t){return"function"!=typeof n||t||(t=n,n=void 0),this.registerHandler(e,n,t)}},{key:"addListener",value:function(e,n,t){return"function"!=typeof n||t||(t=n,n=void 0),this.registerHandler(e,n,t)}},{key:"unregisterHandler",value:function(e,n,t){if("function"!=typeof n||t||(t=n,n=void 0),this.handlers[e]){var r=this.handlers[e].indexOf({headers:n,callback:t});r>-1&&this.handlers[e].splice(r,1),this.handlers[e].length<1&&(this.handlers[e]=void 0)}this.delegate.isConnectionOpen()&&this.delegate.unregisterHandler(e,n,t)}},{key:"un",value:function(e,n,t){return"function"!=typeof n||t||(t=n,n=void 0),this.unregisterHandler(e,n,t)}},{key:"removeListener",value:function(e,n,t){return"function"!=typeof n||t||(t=n,n=void 0),this.unregisterHandler(e,n,t)}},{key:"send",value:function(e,n){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return angular.isObject(t)?this.delegate.send(e,n,t.timeout,t.expectReply):(this.$log.error(o.moduleName+": Signature of vertxEventBusService.send() has been changed!"),this.send(e,n,{timeout:void 0!==arguments[2]?arguments[2]:1e4,expectReply:void 0!==arguments[3]?arguments[3]:!0}))}},{key:"publish",value:function(e,n){return this.delegate.publish(e,n)}},{key:"emit",value:function(e,n){return this.publish(e,n)}},{key:"getConnectionState",value:function(){return this.delegate.getConnectionState()}},{key:"readyState",value:function(){return this.getConnectionState()}},{key:"isEnabled",value:function(){return this.delegate.isEnabled()}},{key:"isConnected",value:function(){return this.delegate.isConnected()}},{key:"login",value:function(e,n,t){return this.delegate.login(e,n,t)}}]),e}();n["default"]=u}])});
//# sourceMappingURL=angular-vertxbus.min.js.map