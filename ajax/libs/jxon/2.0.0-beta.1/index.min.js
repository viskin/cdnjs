!function(e,t){"function"==typeof define&&define.amd?define([],t(window)):"object"==typeof exports?"object"==typeof window&&window.DOMImplementation?module.exports=t(window):module.exports=t(require("xmldom"),!0):e.JXON=t(window)}(this,function(e,t){var r,n={valueKey:"_",attrKey:"$",attrPrefix:"$",lowerCaseTags:!1,trueIsEmpty:!1,autoDate:!1,ignorePrefixedNodes:!1,parseValues:!1},o=[],i=/^\s*$/,a=/^(?:true|false)$/i;return new function(){function s(e){return n.parseValues?i.test(e)?null:a.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):n.autoDate&&isFinite(Date.parse(e))?new Date(e):e:e}function l(){}function u(e){return null===e?new l:e instanceof Object?e:new e.constructor(e)}function c(e,t,r,i){var a,l,f=o.length,d=e.hasChildNodes(),p=e.nodeType===e.ELEMENT_NODE&&e.hasAttributes(),m=Boolean(2&t),h=0,g="",x=m?{}:n.trueIsEmpty?!0:"";if(d)for(var w,y=0;y<e.childNodes.length;y++)w=e.childNodes.item(y),4===w.nodeType?g+=w.nodeValue:3===w.nodeType?g+=w.nodeValue.trim():1!==w.nodeType||n.ignorePrefixedNodes&&w.prefix||o.push(w);var T=o.length,v=s(g);m||!d&&!p||(x=0===t?u(v):{});for(var S=f;T>S;S++)a=o[S].nodeName,n.lowerCaseTags&&(a=a.toLowerCase()),l=c(o[S],t,r,i),x.hasOwnProperty(a)?(x[a].constructor!==Array&&(x[a]=[x[a]]),x[a].push(l)):(x[a]=l,h++);if(p){for(var N,b,E=e.attributes.length,O=i?"":n.attrPrefix,C=i?{}:x,D=0;E>D;h++,D++)N=e.attributes.item(D),b=N.name,n.lowerCaseTags&&(b=b.toLowerCase()),C[O+b]=s(N.value.trim());i&&(r&&Object.freeze(C),x[n.attrKey]=C,h-=E-1)}return 3===t||(2===t||1===t&&h>0)&&g?x[n.valueKey]=v:!m&&0===h&&g&&(x=v),r&&(m||h>0)&&Object.freeze(x),o.length=f,x}function f(e,r,o){var i,a,s;if(o.constructor===String||o.constructor===Number||o.constructor===Boolean){if(r.appendChild(e.createTextNode(o.toString())),o===o.valueOf())return}else o.constructor===Date&&r.appendChild(e.createTextNode(o.toISOString()));for(var l in o)if(i=o[l],null===i&&(i={}),!(isFinite(l)||i instanceof Function))if(l===n.valueKey)null!==i&&i!==!0&&r.appendChild(e.createTextNode(i.constructor===Date?i.toISOString():String(i)));else if(l===n.attrKey)for(var u in i)r.setAttribute(u,i[u]);else if(l===n.attrPrefix+"xmlns"&&t)r.setAttribute(l.slice(1),i);else if(l.charAt(0)===n.attrPrefix)r.setAttribute(l.slice(1),i);else if(i.constructor===Array)for(var c=0;c<i.length;c++)s=i[c][n.attrsPref+"xmlns"]||r.namespaceURI,a=s?e.createElementNS(s,l):e.createElement(l),f(e,a,i[c]),r.appendChild(a);else s=(i||{})[n.attrsPref+"xmlns"]||r.namespaceURI,a=s?e.createElementNS(s,l):e.createElement(l),i instanceof Object?f(e,a,i):null!==i&&i!==!0?a.appendChild(e.createTextNode(i.toString())):n.trueIsEmpty||i!==!0||a.appendChild(e.createTextNode(i.toString())),r.appendChild(a)}this.config=function(t){for(var o in t)n[o]=t[o];n.parserErrorHandler&&(r=new e.DOMParser({errorHandler:n.parserErrorHandler,locator:{}}))},l.prototype.toString=function(){return"null"},l.prototype.valueOf=function(){return null},this.xmlToJs=this.build=function(e,t,r,n){var o=arguments.length>1&&"number"==typeof t?3&t:1;return c(e,o,r||!1,arguments.length>3?n:3===o)},this.jsToXml=this.unbuild=function(t,r,n,o){var i=e.document&&e.document.implementation||new e.DOMImplementation,a=i.createDocument(r||null,n||"",o||null);return f(a,a.documentElement||a,t),a},this.stringToXml=function(t){return r||(r=new e.DOMParser),r.parseFromString(t,"application/xml")},this.xmlToString=function(t){return"undefined"!=typeof t.xml?t.xml:(new e.XMLSerializer).serializeToString(t)},this.stringToJs=function(e){var t=this.stringToXml(e);return this.xmlToJs(t)},this.jsToString=this.stringify=function(e,t,r,n){return this.xmlToString(this.jsToXml(e,t,r,n))},this.each=function(e,t,r){e instanceof Array?e.forEach(t,r):[e].forEach(t,r)}}});
//# sourceMappingURL=./index.min.js.map