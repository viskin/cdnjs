(function(a,b){if(typeof exports==="object"){module.exports=b(require("./URI"))}else{if(typeof define==="function"&&define.amd){define(["./URI"],b)}else{b(a.URI)}}}(this,function(d){var g=d.prototype;var e=g.fragment;var a=g.build;d.fragmentPrefix="!";var c=d._parts;d._parts=function(){var b=c();b.fragmentPrefix=d.fragmentPrefix;return b};g.fragmentPrefix=function(b){this._parts.fragmentPrefix=b;return this};g.fragment=function(b,j){var h=this._parts.fragmentPrefix;var f=this._parts.fragment||"";var i;if(b===true){if(f.substring(0,h.length)!==h){i=d("")}else{i=new d(f.substring(h.length))}this._fragmentURI=i;i._parentURI=this;return i}else{if(b!==undefined&&typeof b!=="string"){this._fragmentURI=b;b._parentURI=b;this._parts.fragment=h+b.toString();this.build(!j);return this}else{if(typeof b==="string"){this._fragmentURI=undefined}}}return e.call(this,b,j)};g.build=function(f){var b=a.call(this,f);if(f!==false&&this._parentURI){this._parentURI.fragment(this)}return b};return d}));