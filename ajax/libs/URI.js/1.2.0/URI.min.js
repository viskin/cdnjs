!function(r){function e(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return"[object Array]"===String(Object.prototype.toString.call(t))}function n(t,e){var n,i,a={};if(s(e))for(n=0,i=e.length;i>n;n++)a[e[n]]=!0;else a[e]=!0;for(n=0,i=t.length;i>n;n++)a[t[n]]!==r&&(t.splice(n,1),i--,n--);return t}var i=function(t,e){return this instanceof i?(t===r&&(t=location.href+""),this.href(t),e!==r?this.absoluteTo(e):this):new i(t)},a=i.prototype;i.idn_expression=/[^a-z0-9\.-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,i.defaultPorts={http:"80",https:"443",ftp:"21"},i.encode=encodeURIComponent,i.decode=decodeURIComponent,i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}}},i.encodeQuery=function(t){return encodeURIComponent(t+"").replace(/%20/g,"+")},i.decodeQuery=function(t){return decodeURIComponent((t+"").replace(/\+/g,"%20"))},i.recodePath=function(t){for(var r=(t+"").split("/"),e=0,s=r.length;s>e;e++)r[e]=i.encodePathSegment(i.decode(r[e]));return r.join("/")},i.decodePath=function(t){for(var r=(t+"").split("/"),e=0,s=r.length;s>e;e++)r[e]=i.decodePathSegment(r[e]);return r.join("/")};var o,h={encode:"encode",decode:"decode"};for(o in h)i[o+"PathSegment"]=function(t){return function(r){return window[t+"URIComponent"](r+"").replace(i.characters.pathname[t].expression,function(r){return i.characters.pathname[t].map[r]})}}(h[o]);i.parse=function(t){var r,e={};return r=t.indexOf("#"),r>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),r=t.indexOf("?"),r>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),r=t.indexOf("://"),r>-1&&(e.protocol=t.substring(0,r),t=t.substring(r+3),t=i.parseAuthority(t,e)),e.path=t,e},i.parseHost=function(r,e){var s=r.indexOf("/");if(-1===s&&(s=r.length),"["===r[0]){var n=r.indexOf("]");e.hostname=r.substring(1,n)||null,e.port=r.substring(n+2,s)||null}else r.indexOf(":")!==r.lastIndexOf(":")?(e.hostname=r.substring(0,s)||null,e.port=null):(t=r.substring(0,s).split(":"),e.hostname=t[0]||null,e.port=t[1]||null);return e.hostname&&"/"!==r.substring(s)[0]&&(s++,r="/"+r),r.substring(s)||"/"},i.parseAuthority=function(r,e){var s=r.indexOf("@"),n=r.indexOf("/");return s>-1&&(-1===n||n>s)?(t=r.substring(0,s).split(":"),e.username=t[0]?i.decode(t[0]):null,e.password=t[1]?i.decode(t[1]):null,r=r.substring(s+1)):(e.username=null,e.password=null),i.parseHost(r,e)},i.parseQuery=function(t){t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");for(var r={},e=t.split("&"),s=e.length,n=0;s>n;n++){var a=e[n].split("="),o=i.decodeQuery(a.shift()),h=a.length?i.decodeQuery(a.join("=")):null;r[o]?("string"==typeof r[o]&&(r[o]=[r[o]]),r[o].push(h)):r[o]=h}return r},i.build=function(t){var r="";return"string"==typeof t.protocol&&t.protocol.length&&(r+=t.protocol+"://"),r+=i.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path[0]&&"string"==typeof t.hostname&&(r+="/"),r+=t.path),"string"==typeof t.query&&(r+="?"+t.query),"string"==typeof t.fragment&&(r+="#"+t.fragment),r},i.buildHost=function(t){var r="";return t.hostname?(i.ip6_expression.test(t.hostname)?r+=t.port?"["+t.hostname+"]:"+t.port:t.hostname:(r+=t.hostname,t.port&&(r+=":"+t.port)),r):""},i.buildAuthority=function(t){var r="";return t.username&&(r+=i.encode(t.username),t.password&&(r+=":"+i.encode(t.password)),r+="@"),r+=i.buildHost(t)},i.buildQuery=function(t,e){var n="";for(var a in t)if(Object.hasOwnProperty.call(t,a)&&a)if(s(t[a]))for(var o={},h=0,u=t[a].length;u>h;h++)t[a][h]!==r&&o[t[a][h]+""]===r&&(n+="&"+i.buildQueryParameter(a,t[a][h]),e!==!0&&(o[t[a][h]+""]=!0));else t[a]!==r&&(n+="&"+i.buildQueryParameter(a,t[a]));return n.substring(1)},i.buildQueryParameter=function(t,r){return i.encodeQuery(t)+(null!==r?"="+i.encodeQuery(r):"")},i.addQuery=function(t,e,n){if("object"==typeof e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.addQuery(t,a,e[a]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(t[e]===r)return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),s(n)||(n=[n]),t[e]=t[e].concat(n)}},i.removeQuery=function(t,e,a){if(s(e))for(var o=0,h=e.length;h>o;o++)t[e[o]]=r;else if("object"==typeof e)for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&i.removeQuery(t,u,e[u]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");a!==r?t[e]===a?t[e]=r:s(t[e])&&(t[e]=n(t[e],a)):t[e]=r}},i.commonPath=function(t,r){var e,s=Math.min(t.length,r.length);for(e=0;s>e;e++)if(t[e]!==r[e]){e--;break}return 1>e?t[0]===r[0]&&"/"===t[0]?"/":"":("/"!==t[e]&&(e=t.substring(0,e).lastIndexOf("/")),t.substring(0,e+1))},i.withinString=function(t,r){return t.replace(i.find_uri_expression,r)},a.build=function(){return this._string=i.build(this._parts),this},a.toString=function(){return this._string},a.valueOf=function(){return this.toString()},h={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};for(o in h)a[o]=function(t){return function(e,s){return e===r?this._parts[t]||"":(this._parts[t]=e,s!==!1&&this.build(),this)}}(h[o]);h={query:"?",fragment:"#"};for(o in h)a[o]=function(t,e){return function(s,n){return s===r?this._parts[t]||"":(null!==s&&(s+="",s[0]===e&&(s=s.substring(1))),this._parts[t]=s,n!==!1&&this.build(),this)}}(o,h[o]);h={search:["?","query"],hash:["#","fragment"]};for(o in h)a[o]=function(t,r){return function(e,s){var n=this[t](e,s);return"string"==typeof n&&n.length?r+n:n}}(h[o][1],h[o][0]);a.pathname=function(t,e){if(t===r||t===!0){var s=this._parts.path||"/";return t?i.decodePath(s):s}return this._parts.path=t?i.recodePath(t):"/",e!==!1&&this.build(),this},a.path=a.pathname,a.href=function(t,e){if(t===r)return this.toString();this._string="",this._parts={protocol:null,username:null,password:null,hostname:null,port:null,path:null,query:null,fragment:null};var s,n=t instanceof i,a="object"==typeof t&&(t.hostname||t.path);if("string"==typeof t)this._parts=i.parse(t);else{if(!n&&!a)throw new TypeError("invalid input");var o=n?t._parts:t;for(s in o)Object.hasOwnProperty.call(this._parts,s)&&(this._parts[s]=o[s])}return e!==!1&&this.build(),this},a.is=function(t){var r=!1,e=!1,s=!1,n=!1,a=!1,o=!1,h=!0;switch(this._parts.hostname&&(h=!1,e=i.ip4_expression.test(this._parts.hostname),s=i.ip6_expression.test(this._parts.hostname),r=e||s,n=!r,a=n&&i.idn_expression.test(this._parts.hostname),o=n&&i.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return h;case"domain":case"name":return n;case"ip":return r;case"ip4":case"ipv4":case"inet4":return e;case"ip6":case"ipv6":case"inet6":return s;case"idn":return a;case"punycode":return o}return null},a.host=function(t,e){return t===r?this._parts.hostname?i.buildHost(this._parts):"":(i.parseHost(t,this._parts),e!==!1&&this.build(),this)},a.authority=function(t,e){return t===r?this._parts.hostname?i.buildAuthority(this._parts):"":(i.parseAuthority(t,this._parts),e!==!1&&this.build(),this)},a.domain=function(t,s){if(t===r)return!this._parts.hostname||this.is("IP")?"":this._parts.hostname.match(/\.?([^\.]+.[^\.]+)$/)[1]||this._parts.hostname;if(!t)throw new TypeError("cannot set domain empty");if(!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var n=new RegExp(e(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(n,t)}return s!==!1&&this.build(),this},a.tld=function(t,s){if(t===r){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf(".");return this._parts.hostname.substring(n+1)}if(!t)throw new TypeError("cannot set TLD empty");if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");var i=new RegExp(e(this.tld())+"$");return this._parts.hostname=this._parts.hostname.replace(i,t),s!==!1&&this.build(),this},a.directory=function(t,s){if(t===r||t===!0){if(!this._parts.path||"/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,a=this._parts.path.substring(0,n)||"/";return t?i.decodePath(a):a}var o=this._parts.path.length-this.filename().length,h=this._parts.path.substring(0,o),u=new RegExp("^"+e(h));return this.is("relative")||(t||(t="/"),"/"!==t[0]&&(t="/"+t)),t&&"/"!==t[t.length-1]&&(t+="/"),t=i.recodePath(t),this._parts.path=this._parts.path.replace(u,t),s!==!1&&this.build(),this},a.filename=function(t,s){if(t===r||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),a=this._parts.path.substring(n+1);return t?i.decodePathSegment(a):a}"/"===t[0]&&(t=t.substring(1));var o=new RegExp(e(this.filename())+"$");return t=i.recodePath(t),this._parts.path=this._parts.path.replace(o,t),s!==!1&&this.build(),this},a.suffix=function(t,s){if(t===r||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,a=this.filename(),o=a.lastIndexOf(".");return-1===o?"":(n=a.substring(o+1),res=/^[a-z0-9%]+$/i.test(n)?n:"",t?i.decodePathSegment(res):res)}"."===t[0]&&(t=t.substring(1));var h,u=this.suffix();if(u)h=new RegExp(t?e(u)+"$":e("."+u)+"$");else{if(!t)return this;this._parts.path+="."+i.recodePath(t)}return h&&(t=i.recodePath(t),this._parts.path=this._parts.path.replace(h,t)),s!==!1&&this.build(),this};var u=a.query;a.query=function(t,e){return t===!0?i.parseQuery(this._parts.query):t!==r&&"string"!=typeof t?(this._parts.query=i.buildQuery(t),e!==!1&&this.build(),this):u.call(this,t,e)},a.addQuery=function(t,r,e){var s=i.parseQuery(this._parts.query);return i.addQuery(s,t,r),this._parts.query=i.buildQuery(s),"string"!=typeof t&&(e=r),e!==!1&&this.build(),this},a.removeQuery=function(t,r,e){var s=i.parseQuery(this._parts.query);return i.removeQuery(s,t,r),this._parts.query=i.buildQuery(s),"string"!=typeof t&&(e=r),e!==!1&&this.build(),this},a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.normalize=function(){return this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),t!==!1&&this.build()),this},a.normalizeHostname=function(t){return this._parts.hostname&&(this.is("IDN")&&window.punycode?this._parts.hostname=punycode.toASCII(this._parts.hostname):this.is("IPv6")&&window.IPv6&&(this._parts.hostname=IPv6.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),t!==!1&&this.build()),this},a.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,t!==!1&&this.build()),this},a.normalizePath=function(t){if(!this._parts.path||"/"===this._parts.path)return this;var r,e,s,n,a=this._parts.path;for("/"!==a[0]&&("."===a[0]&&(e=a.substring(0,a.indexOf("/"))),r=!0,a="/"+a),a=a.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){if(s=a.indexOf("/../"),-1===s)break;if(0===s){a=a.substring(3);break}n=a.substring(0,s).lastIndexOf("/"),-1===n&&(n=s),a=a.substring(0,n)+a.substring(s+3)}return r&&this.is("relative")&&(a=e?e+a:a.substring(1)),a=i.recodePath(a),this._parts.path=a,t!==!1&&this.build(),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query)):this._parts.query=null,t!==!1&&this.build()),this},a.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,t!==!1&&this.build()),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.readable=function(){var t=new i(this);t.username("").password("").normalize();var e="";if(t._parts.protocol&&(e+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&window.punycode?(e+=punycode.toUnicode(t._parts.hostname),t._parts.port&&(e+=":"+t._parts.port)):e+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path[0]&&(e+="/"),e+=t.path(!0),t._parts.query){for(var s="",n=0,a=t._parts.query.split("&"),o=a.length;o>n;n++){var h=(a[n]||"").split("=");s+="&"+i.decodeQuery(h[0]).replace(/&/g,"%26"),h[1]!==r&&(s+="="+i.decodeQuery(h[1]).replace(/&/g,"%26"))}e+="?"+s.substring(1)}return e+=t.hash()},a.absoluteTo=function(t){if(!this.is("relative"))throw new Error("Cannot resolve non-relative URL");t instanceof i||(t=new i(t));for(var r,e=new i(this),s=["protocol","username","password","hostname","port"],n=0;r=s[n];n++)e._parts[r]=t._parts[r];return"/"!==e.path()[0]&&(e._parts.path=t.directory()+"/"+e._parts.path,e.normalizePath()),e.build(),e},a.relativeTo=function(t){if(t instanceof i||(t=new i(t)),"/"!==this.path()[0]||"/"!==t.path()[0])throw new Error("Cannot calculate common path from non-relative URLs");for(var r,s=new i(this),n=["protocol","username","password","hostname","port"],a=i.commonPath(s.path(),t.path()),o=t.directory(),h=0;r=n[h];h++)s._parts[r]=null;if(!a||"/"===a)return s;if(o+"/"===a)s._parts.path="./"+s.filename();else{for(var u="../",p=new RegExp("^"+e(a)),l=o.replace(p,"/").match(/\//g).length-1;l--;)u+="../";s._parts.path=s._parts.path.replace(p,u)}return s.build(),s},a.equals=function(t){var r,e,n,a=new i(this),o=new i(t),h={},u={},p={};if(a.normalize(),o.normalize(),a.toString()===o.toString())return!0;if(r=a.query(),e=o.query(),a.query(""),o.query(""),a.toString()!==o.toString())return!1;if(r.length!==e.length)return!1;h=i.parseQuery(r),u=i.parseQuery(e);for(n in h)if(Object.prototype.hasOwnProperty.call(h,n)){if(s(h[n])){if(!s(u[n]))return!1;if(h[n].length!==u[n].length)return!1;h[n].sort(),u[n].sort();for(var l=0,d=h[n].length;d>l;l++)if(h[n][l]!==u[n][l])return!1}else if(h[n]!==u[n])return!1;p[n]=!0}for(n in u)if(Object.prototype.hasOwnProperty.call(u,n)&&!p[n])return!1;return!0},window.URI=i}();