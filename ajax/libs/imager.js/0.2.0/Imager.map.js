{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnDirectValue","value","Imager","elements","opts","self","this","doc","undefined","selector","imagesOffScreen","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","alt","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","createWidthsMap","getKeys","sort","a","b","divs","querySelectorAll","changeDivsToEmptyImages","nextTick","init","addEvent","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","addEventListener","el","eventName","fn","attachEvent","Object","keys","object","key","push","prototype","scrollCheck","clearInterval","interval","slice","initialized","checkImagesNeedReplacing","registerResizeEvent","registerScrollEvent","createGif","element","match","RegExp","cloneNode","width","getAttribute","setAttribute","parentNode","replaceChild","isThisElementOnScreen","offset","getPageOffset","elementOffsetTop","offsetParent","offsetTop","images","isResizing","image","replaceImagesBasedOnScreenDimensions","computedWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","getClosestValue","clientWidth","devicePixelRatio","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","context","widths","interpolator","map","baseValue","candidates","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","call","module","exports","define","amd"],"mappings":"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"}