{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnDirectValue","value","Imager","elements","opts","self","this","doc","undefined","selector","imagesOffScreen","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","alt","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","removeAttribute","createWidthsMap","getKeys","sort","a","b","divs","querySelectorAll","changeDivsToEmptyImages","nextTick","init","addEvent","getNaturalWidth","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","Object","prototype","call","image","naturalWidth","source","img","width","addEventListener","el","eventName","fn","attachEvent","keys","object","key","push","scrollCheck","clearInterval","interval","slice","initialized","checkImagesNeedReplacing","registerResizeEvent","registerScrollEvent","createGif","element","match","RegExp","elementClassName","getAttribute","elementWidth","cloneNode","setAttribute","parentNode","replaceChild","isThisElementOnScreen","offset","getPageOffset","elementOffsetTop","offsetParent","offsetTop","images","isResizing","replaceImagesBasedOnScreenDimensions","computedWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","getClosestValue","clientWidth","devicePixelRatio","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","context","widths","interpolator","map","baseValue","candidates","parseFloat","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","module","exports","define","amd"],"mappings":"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"}