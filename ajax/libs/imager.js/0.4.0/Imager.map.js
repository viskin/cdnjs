{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnFn","value","noop","trueFn","debounce","fn","wait","timeout","context","this","args","arguments","later","apply","clearTimeout","setTimeout","Imager","elements","opts","self","doc","undefined","selector","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","alt","lazyloadOffset","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","removeAttribute","createWidthsMap","devicePixelRatio","getKeys","sort","a","b","divs","querySelectorAll","ready","onReady","changeDivsToEmptyImages","init","addEvent","addEventListener","el","eventName","attachEvent","Object","keys","object","key","push","prototype","scrollCheck","offscreenImageCount","element","isPlaceholder","isThisElementOnScreen","clearInterval","interval","initialized","filterFn","registerScrollEvent","checkImagesNeedReplacing","registerResizeEvent","createGif","match","RegExp","elementClassName","getAttribute","elementWidth","cloneNode","width","setAttribute","parentNode","replaceChild","elementOffsetTop","offset","getPageOffset","offsetParent","offsetTop","images","isResizing","image","replaceImagesBasedOnScreenDimensions","computedWidth","naturalWidth","getNaturalWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","getClosestValue","clientWidth","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","widths","interpolator","map","baseValue","candidates","parseFloat","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","Image","imageCopy","call","module","exports","define","amd"],"mappings":"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"}