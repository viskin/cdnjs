!function(t,e){"use strict";function i(t,e){for(var i=0,s=t.length,a=[];s>i;i++)a[i]=e(t[i],i);return a}function s(t){return t}function a(){}function n(){return!0}function r(t,e){var i;return function(){var s=this,a=arguments,n=function(){i=null,t.apply(s,a)};clearTimeout(i),i=setTimeout(n,e)}}function o(t,n){var r=this,l=e;n=n||{},void 0!==t&&("string"==typeof t?(n.selector=t,t=void 0):"undefined"==typeof t.length&&(n=t,t=void 0)),this.viewportHeight=l.documentElement.clientHeight,this.selector=n.selector||".delayed-image-load",this.className=n.className||"image-replace",this.gif=l.createElement("img"),this.gif.src="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7",this.gif.className=this.className,this.gif.alt="",this.lazyloadOffset=n.lazyloadOffset||0,this.scrollDelay=n.scrollDelay||250,this.onResize=n.hasOwnProperty("onResize")?n.onResize:!0,this.lazyload=n.hasOwnProperty("lazyload")?n.lazyload:!1,this.scrolled=!1,this.availablePixelRatios=n.availablePixelRatios||[1,2],this.availableWidths=n.availableWidths||h,this.onImagesReplaced=n.onImagesReplaced||a,this.widthsMap={},this.refreshPixelRatio(),this.widthInterpolator=n.widthInterpolator||s,this.gif.removeAttribute("height"),this.gif.removeAttribute("width"),"function"!=typeof this.availableWidths&&("number"==typeof this.availableWidths.length?this.widthsMap=o.createWidthsMap(this.availableWidths,this.widthInterpolator,this.devicePixelRatio):(this.widthsMap=this.availableWidths,this.availableWidths=c(this.availableWidths)),this.availableWidths=this.availableWidths.sort(function(t,e){return t-e})),t?(this.divs=i(t,s),this.selector=null):this.divs=i(l.querySelectorAll(this.selector),s),this.ready(n.onReady),this.changeDivsToEmptyImages(this.divs),setTimeout(function(){r.init()},0)}var l=function(){return e.addEventListener?function(t,e,i){return t.addEventListener(e,i,!1)}:function(t,e,i){return t.attachEvent("on"+e,i)}}(),h=[96,130,165,200,235,270,304,340,375,410,445,485,520,555,590,625,660,695,736],c="function"==typeof Object.keys?Object.keys:function(t){var e,i=[];for(e in t)i.push(e);return i};o.prototype.scrollCheck=function(){var e=this,s=0,a=[];this.scrolled&&(i(this.divs,function(t){e.isPlaceholder(t)&&(++s,e.isThisElementOnScreen(t)&&a.push(t))}),0===s&&t.clearInterval(e.interval),this.changeDivsToEmptyImages(a),this.scrolled=!1)},o.prototype.init=function(){var t=this;this.initialized=!0;var e=n;this.lazyload?(this.registerScrollEvent(),this.scrolled=!0,t.scrollCheck(),e=function(e){return t.isPlaceholder(e)===!1}):this.checkImagesNeedReplacing(this.divs),this.onResize&&this.registerResizeEvent(e),this.onReady()},o.prototype.ready=function(t){this.onReady=t||a},o.prototype.createGif=function(t){if(t.className.match(new RegExp("(^| )"+this.className+"( |$)")))return t;var e=t.getAttribute("data-class"),i=t.getAttribute("data-width"),s=this.gif.cloneNode(!1);return i&&(s.width=i,s.setAttribute("data-width",i)),s.className=(e?e+" ":"")+this.className,s.setAttribute("data-src",t.getAttribute("data-src")),s.setAttribute("alt",t.getAttribute("data-alt")||this.gif.alt),t.parentNode.replaceChild(s,t),s},o.prototype.changeDivsToEmptyImages=function(t){var e=this;i(t,function(i,s){t[s]=e.createGif(i)}),this.initialized&&this.checkImagesNeedReplacing(t)},o.prototype.isPlaceholder=function(t){return t.src===this.gif.src},o.prototype.isThisElementOnScreen=function(t){var e=0,i=o.getPageOffset()+this.lazyloadOffset;if(t.offsetParent)do e+=t.offsetTop;while(t=t.offsetParent);return e<this.viewportHeight+i},o.prototype.checkImagesNeedReplacing=function(t,e){var s=this;e=e||n,this.isResizing||(this.isResizing=!0,this.refreshPixelRatio(),i(t,function(t){e(t)&&s.replaceImagesBasedOnScreenDimensions(t)}),this.isResizing=!1,this.onImagesReplaced(t))},o.prototype.replaceImagesBasedOnScreenDimensions=function(t){var e,i;i=o.getNaturalWidth(t),e="function"==typeof this.availableWidths?this.availableWidths(t):this.determineAppropriateResolution(t),t.width=e,!this.isPlaceholder(t)&&i>=e||(t.src=this.changeImageSrcToUseNewImageDimensions(t.getAttribute("data-src"),e),t.removeAttribute("width"),t.removeAttribute("height"))},o.prototype.determineAppropriateResolution=function(t){return o.getClosestValue(t.getAttribute("data-width")||t.parentNode.clientWidth,this.availableWidths)},o.prototype.refreshPixelRatio=function(){this.devicePixelRatio=o.getClosestValue(o.getPixelRatio(),this.availablePixelRatios)},o.prototype.changeImageSrcToUseNewImageDimensions=function(t,e){return t.replace(/{width}/g,o.transforms.width(e,this.widthsMap)).replace(/{pixel_ratio}/g,o.transforms.pixelRatio(this.devicePixelRatio))},o.getPixelRatio=function(e){return(e||t).devicePixelRatio||1},o.createWidthsMap=function(t,e,i){for(var s={},a=t.length;a--;)s[t[a]]=e(t[a],i);return s},o.transforms={pixelRatio:function(t){return 1===t?"":"-"+t+"x"},width:function(t,e){return e[t]||t}},o.getClosestValue=function(t,e){var i=e.length,s=e[i-1];for(t=parseFloat(t);i--;)t<=e[i]&&(s=e[i]);return s},o.prototype.registerResizeEvent=function(e){var i=this;l(t,"resize",r(function(){i.checkImagesNeedReplacing(i.divs,e)},100))},o.prototype.registerScrollEvent=function(){var i=this;this.scrolled=!1,this.interval=t.setInterval(function(){i.scrollCheck()},i.scrollDelay),l(t,"scroll",function(){i.scrolled=!0}),l(t,"resize",function(){i.viewportHeight=e.documentElement.clientHeight,i.scrolled=!0})},o.getPageOffsetGenerator=function(i){return i?function(){return t.pageYOffset}:function(){return e.documentElement.scrollTop}},o.getNaturalWidth=function(){return"naturalWidth"in new Image?function(t){return t.naturalWidth}:function(t){var i=e.createElement("img");return i.src=t.src,i.width}}(),o.getPageOffset=o.getPageOffsetGenerator(Object.prototype.hasOwnProperty.call(t,"pageYOffset")),o.applyEach=i,o.addEvent=l,o.debounce=r,"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=o:"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof t&&(t.Imager=o)}(window,document);
//# sourceMappingURL=./Imager.map.js