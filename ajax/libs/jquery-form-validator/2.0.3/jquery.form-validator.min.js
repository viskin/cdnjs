/**
* jQuery Form Validator
* ------------------------------------------
* Created by Victor Jonsson <http://www.victorjonsson.se>
* Documentation and issue tracking on Github <https://github.com/victorjonsson/jQuery-Form-Validator/>
*
* @license Dual licensed under the MIT or GPL Version 2 licenses
* @version 2.0.3
*/
(function($){"use strict";$.fn.validateOnBlur=function(language,settings){this.find("textarea,input").blur(function(){$(this).doValidate(language,settings)});return this};$.fn.showHelpOnFocus=function(attrName){if(!attrName){attrName="data-validation-help"}this.find("textarea,input").each(function(){var $element=$(this);var help=$element.attr(attrName);if(help){var className="jquery_form_help_"+$element.attr("name");$element.focus(function(){var $help=$element.parent().find("."+className);if($help.length==0){$help=$("<span />").addClass(className).addClass("form-help").text(help).hide();$element.after($help)}$help.fadeIn()}).blur(function(){$(this).parent().find("."+className).fadeOut("slow")})}});return this};$.fn.doValidate=function(language,config,attachKeyupEvent){if(typeof attachKeyupEvent=="undefined"){attachKeyupEvent=true}var $element=this;var elementErrMsgObj=document.getElementById($element.attr("name")+"_err_msg");language=$.extend(language||{},$.formUtils.LANG);config=$.extend($.formUtils.defaultConfig(),config||{});config.errorMessagePosition="element";var $form=$element.closest("form");$.formUtils.figureOutDefaultBorderColor($element);var validationRule=$element.attr(config.validationRuleAttribute);if(validationRule=="validate_backend"||validationRule=="backend"){return this}$element.removeClass(config.errorElementClass).parent().find("."+config.errorMessageClass).remove();if(elementErrMsgObj!=null){elementErrMsgObj.innerHTML=""}if(config.borderColorOnError!==""){$element.css("border-color",$.formUtils.defaultBorderColor)}if(validationRule&&validationRule.indexOf("confirmation")>-1){var validateWhenBlurred=function($element){var $confirm=$form.find('input[name="'+$element.attr("name")+'_confirmation"]').eq(0);$confirm.one("blur",function(){$element.doValidate(language,settings,false)})};validateWhenBlurred($element)}var validation=$.formUtils.validateInput($element,language,config,$form);if(validation===true){$element.addClass("valid")}else{$element.addClass(config.errorElementClass).removeClass("valid");if(elementErrMsgObj!=null){elementErrMsgObj.innerHTML=validation}else{$element.parent().append('<span class="'+config.errorMessageClass+'">'+validation+"</span>")}if(config.borderColorOnError!==""){$element.css("border-color",config.borderColorOnError)}if(attachKeyupEvent){$element.bind("keyup",function(){$(this).doValidate(language,config,false)})}}return this};$.fn.valAttr=function(name,val){if(val===undefined){return this.attr("data-validation-"+name)}else if(val===false||val===null){return this.removeAttr("data-validation-"+name)}else{return this.attr("data-validation-"+name,val)}};$.fn.validate=function(language,config){language=$.extend($.formUtils.LANG,language||{});config=$.extend($.formUtils.defaultConfig(),config||{});var addErrorMessage=function(mess,$element){if($.inArray(mess,errorMessages)<0){errorMessages.push(mess)}errorInputs.push($element);$element.valAttr("current-error",mess).removeClass("valid")};var errorMessages=[];var errorInputs=[];var $form=this;var ignoreInput=function(name,type){if(type==="submit"||type==="button"){return true}return $.inArray(name,config.ignore||[])>-1};$.formUtils.haltValidation=false;$form.find("input,textarea,select").each(function(){var $element=$(this);var elementType=$element.attr("type");if(!ignoreInput($element.attr("name"),elementType)){$.formUtils.figureOutDefaultBorderColor($element);var validation=$.formUtils.validateInput($element,language,config,$form);if(validation!==true){addErrorMessage(validation,$element)}else{$element.valAttr("current-error",false).addClass("valid")}}});var borderStyleProp=$.formUtils.defaultBorderColor===null||$.formUtils.defaultBorderColor.indexOf(" ")>-1&&$.formUtils.defaultBorderColor.indexOf("rgb")==-1?"border":"border-color";$form.find("input,textarea,select").css(borderStyleProp,$.formUtils.defaultBorderColor).removeClass(config.errorElementClass);$("."+$.split(config.errorMessageClass," ").join(".")).remove();$("."+config.errorMessageClass).remove();if(typeof config.onValidate=="function"){var resp=config.onValidate($form);if(resp&&resp.element&&resp.message){addErrorMessage(resp.message,resp.element)}}if(!$.formUtils.haltValidation&&errorInputs.length>0){for(var i=0;i<errorInputs.length;i++){if(config.borderColorOnError!==""){errorInputs[i].css("border-color",config.borderColorOnError)}errorInputs[i].addClass(config.errorElementClass)}if(config.errorMessagePosition==="top"){var messages="<strong>"+language.errorTitle+"</strong>";for(var i=0;i<errorMessages.length;i++){messages+="<br />* "+errorMessages[i]}$form.children().eq(0).before('<div class="'+config.errorMessageClass+'">'+messages+"</div>");if(config.scrollToTopOnError){$(window).scrollTop($form.offset().top-20)}}else{for(var i=0;i<errorInputs.length;i++){var $parent=errorInputs[i].parent();var $errorSpan=$parent.find("span[class="+config.errorMessageClass+"]");if($errorSpan.length>0){$errorSpan.eq(0).text(errorInputs[i].valAttr("current-error"))}else{$parent.append('<span class="'+config.errorMessageClass+'">'+errorInputs[i].valAttr("current-error")+"</span>")}}}return false}return!$.formUtils.haltValidation};$.fn.restrictLength=function(maxLengthElement){new $.formUtils.lengthRestriction(this,maxLengthElement);return this};$.fn.addSuggestions=function(settings){var sugs=false;this.find("input").each(function(){var $field=$(this);sugs=$.split($field.attr("data-suggestions"));if(sugs.length>0){$.formUtils.suggest($field,sugs,settings)}});return this};$.split=function(val,func,delim){if(typeof func!="function"){if(!val)return[];var values=[];$.each(val.split(func?func:","),function(i,str){str=$.trim(str);if(str.length)values.push(str)});return values}else if(val){if(!delim)delim=",";$.each(val.split(delim),function(i,str){str=$.trim(str);if(str.length)return func(str,i)})}};$.setupForm=function(config){config=$.extend({form:"form",validateOnBlur:true,showHelpOnFocus:true,addSuggestions:true,modules:"",onModulesLoaded:null,language:false,onSuccess:false,onError:false},config||{});$.split(config.form,function(formQuery){var $form=$(formQuery);$form.bind("submit",function(){if($.formUtils.isLoadingModules){setTimeout(function(){$form.trigger("submit")},200);return false}var valid=$(this).validate(config.language,config);if(valid&&typeof config.onSuccess=="function"){var callbackResponse=config.onSuccess($form);if(callbackResponse===false)return false}else if(!valid&&typeof config.onError=="function"){config.onError($form);return false}else{return valid}});if(config.validateOnBlur){$form.validateOnBlur(config.language,config)}if(config.showHelpOnFocus){$form.showHelpOnFocus()}if(config.addSuggestions){$form.addSuggestions()}});if(config.modules!=""){if(typeof config.onModulesLoaded=="function"){$.formUtils.on("load",function(){config.onModulesLoaded()})}$.formUtils.loadModules(config.modules)}};$.formUtils={defaultConfig:function(){return{ignore:[],errorElementClass:"error",borderColorOnError:"red",errorMessageClass:"form-error",validationRuleAttribute:"data-validation",validationErrorMsgAttribute:"data-validation-error-msg",errorMessagePosition:"element",scrollToTopOnError:true,dateFormat:"yyyy-mm-dd"}},figureOutDefaultBorderColor:function($element){var elementType=$element.attr("type");if(this.defaultBorderColor===null&&elementType!=="submit"&&elementType!=="checkbox"&&elementType!=="radio"){this.defaultBorderColor=$element.css("border-color")}},defaultBorderColor:null,validators:{},_events:{load:[],valid:[],invalid:[]},haltValidation:false,addValidator:function(validator){var name=validator.name.indexOf("validate_")===0?validator.name:"validate_"+validator.name;this.validators[name]=validator},on:function(evt,callback){this._events[evt].push(callback)},trigger:function(evt,argA,argB){$.each(this._events[evt],function(i,func){func(argA,argB)})},isLoadingModules:false,loadModules:function(modules,path,fireEvent){if(fireEvent===undefined)fireEvent=true;if($.formUtils.isLoadingModules){setTimeout(function(){$.formUtils.loadModules(modules,path,fireEvent)});return}var loadModuleScripts=function(modules,path){var moduleList=$.split(modules),numModules=moduleList.length,moduleLoadedCallback=function(){numModules--;if(numModules==0){$.formUtils.isLoadingModules=false;if(fireEvent){$.formUtils.trigger("load",path)}}};if(numModules>0){$.formUtils.isLoadingModules=true}$.each(moduleList,function(i,modName){modName=$.trim(modName);if(modName.length==0){moduleLoadedCallback()}else{var scriptUrl=path+modName+(modName.substr(-3)==".js"?"":".js");$.ajax({url:scriptUrl,cache:scriptUrl.substr(-7)!=".dev.js",dataType:"script",async:false,success:function(){moduleLoadedCallback()},error:function(){moduleLoadedCallback();throw new Error("Unable to load form validation module "+modName)}})}})};if(path){loadModuleScripts(modules,path)}else{var findScriptPathAndLoadModules=function(){var foundPath=false;$("script").each(function(){if(this.src){var scriptName=this.src.substr(this.src.lastIndexOf("/")+1,this.src.length);if(scriptName.indexOf("jquery.form-validator.js")>-1||scriptName.indexOf("jquery.form-validator.min.js")>-1){foundPath=this.src.substr(0,this.src.lastIndexOf("/"))+"/";if(foundPath=="/")foundPath="";return false}}});if(foundPath!==false){loadModuleScripts(modules,foundPath);return true}return false};if(!findScriptPathAndLoadModules()){$(findScriptPathAndLoadModules)}}},validateInput:function($element,language,config,$form){var value=$.trim($element.val()||"");var optional=$element.valAttr("optional");var validationDependsOnCheckedInput=false;var validationDependentInputIsChecked=false;var validateIfCheckedElementName=$element.valAttr("if-checked");if(validateIfCheckedElementName!=null){validationDependsOnCheckedInput=true;var validateIfCheckedElement=$form.find('input[name="'+validateIfCheckedElementName+'"]');if(validateIfCheckedElement.prop("checked")){validationDependentInputIsChecked=true}}if(!value&&optional==="true"||validationDependsOnCheckedInput&&!validationDependentInputIsChecked){$.formUtils.trigger("valid",$element);return true}var validationRules=$element.attr(config.validationRuleAttribute);var validationErrorMsg=true;$.split(validationRules,function(rule){if(rule.indexOf("validate_")!==0){rule="validate_"+rule}var validator=$.formUtils.validators[rule];if(validator&&typeof validator["validate"]=="function"){var isValid=validator.validate(value,$element,config,language,$form);if(!isValid){$.formUtils.trigger("invalid",$element);validationErrorMsg=$element.attr(config.validationErrorMsgAttribute);if(!validationErrorMsg){validationErrorMsg=language[validator.errorMessageKey];if(!validationErrorMsg)validationErrorMsg=validator.errorMessage}return false}}else{console.warn('Using undefined validator "'+rule+'"')}}," ");if(typeof validationErrorMsg=="string"){return validationErrorMsg}else{$.formUtils.trigger("valid",$element);return true}},getAttributeInteger:function(attrValue,attrName){var regex=new RegExp("("+attrName+"[0-9-]+)","g");return attrValue.match(regex)[0].replace(/[^0-9\-]/g,"")},parseDate:function(val,dateFormat){var divider=dateFormat.replace(/[a-zA-Z]/gi,"").substring(0,1);var regexp="^";var formatParts=dateFormat.split(divider);for(var i=0;i<formatParts.length;i++){regexp+=(i>0?"\\"+divider:"")+"(\\d{"+formatParts[i].length+"})"}regexp+="$";var matches=val.match(new RegExp(regexp));if(matches===null){return false}var findDateUnit=function(unit,formatParts,matches){for(var i=0;i<formatParts.length;i++){if(formatParts[i].substring(0,1)===unit){return $.formUtils.parseDateInt(matches[i+1])}}return-1};var month=findDateUnit("m",formatParts,matches);var day=findDateUnit("d",formatParts,matches);var year=findDateUnit("y",formatParts,matches);if(month===2&&day>28&&(year%4!==0||year%100===0&&year%400!==0)||month===2&&day>29&&(year%4===0||year%100!==0&&year%400===0)||month>12||month===0){return false}if(this.isShortMonth(month)&&day>30||!this.isShortMonth(month)&&day>31||day===0){return false}return[year,month,day]},parseDateInt:function(val){if(val.indexOf("0")===0){val=val.replace("0","")}return parseInt(val,10)},isShortMonth:function(m){return m%2===0&&m<7||m%2!==0&&m>7},lengthRestriction:function($inputElement,$maxLengthElement){var maxChars=parseInt($maxLengthElement.text(),10),countCharacters=function(){var numChars=$inputElement.val().length;if(numChars>maxChars){var currScrollTopPos=$inputElement.scrollTop();$inputElement.val($inputElement.val().substring(0,maxChars));$inputElement.scrollTop(currScrollTopPos)}$maxLengthElement.text(maxChars-numChars)};$($inputElement).bind("keydown keyup keypress focus blur",countCharacters).bind("cut paste",function(){setTimeout(countCharacters,100)});$(document).bind("ready",countCharacters)},_numSuggestionElements:0,_selectedSuggestion:null,_previousTypedVal:null,suggest:function($element,suggestions,settings){var config={css:{maxHeight:"150px",background:"#FFF",lineHeight:"150%",textDecoration:"underline",overflowX:"hidden",overflowY:"auto",border:"#CCC solid 1px",borderTop:"none",cursor:"pointer"},activeSuggestionCSS:{background:"#E9E9E9"}};if(settings)$.extend(config,settings);config.css["position"]="absolute";config.css["z-index"]=9999;$element.attr("autocomplete","off");this._numSuggestionElements++;var onSelectSuggestion=function($el){var suggestionId=$el.valAttr("suggestion-nr");$.formUtils._selectedSuggestion=null;$.formUtils._previousTypedVal=null;$(".jquery-form-suggestion-"+suggestionId).fadeOut("fast")};$element.data("suggestions",suggestions).valAttr("suggestion-nr",this._numSuggestionElements).bind("focus",function(){$(this).trigger("keyup");$.formUtils._selectedSuggestion=null}).bind("keyup",function(){var $input=$(this);var foundSuggestions=[];var val=$.trim($input.val()).toLocaleLowerCase();if(val==$.formUtils._previousTypedVal){return}else{$.formUtils._previousTypedVal=val}var hasTypedSuggestion=false;var suggestionId=$input.valAttr("suggestion-nr");var $suggestionContainer=$(".jquery-form-suggestion-"+suggestionId);$suggestionContainer.scrollTop(0);if(val!=""){var findPartial=val.length>2;$.each($input.data("suggestions"),function(i,suggestion){var lowerCaseVal=suggestion.toLocaleLowerCase();if(lowerCaseVal==val){foundSuggestions.push("<strong>"+suggestion+"</strong>");hasTypedSuggestion=true;return false}else if(lowerCaseVal.indexOf(val)===0||findPartial&&lowerCaseVal.indexOf(val)>-1){foundSuggestions.push(suggestion.replace(new RegExp(val,"gi"),"<strong>$&</strong>"))}})}if(hasTypedSuggestion||foundSuggestions.length==0&&$suggestionContainer.length>0){$suggestionContainer.hide()}else if(foundSuggestions.length>0&&$suggestionContainer.length==0){$suggestionContainer=$("<div></div>").css(config.css).appendTo("body");$suggestionContainer.addClass("jquery-form-suggestions");$suggestionContainer.addClass("jquery-form-suggestion-"+suggestionId)}else if(foundSuggestions.length>0&&!$suggestionContainer.is(":visible")){$suggestionContainer.show()}if(foundSuggestions.length>0&&val.length!=foundSuggestions[0].length){var offset=$input.offset();$suggestionContainer.css({width:$input.outerWidth(),left:offset.left+"px",top:offset.top+$input.outerHeight()+"px"});$suggestionContainer.html("");$.each(foundSuggestions,function(i,text){$("<div></div>").append(text).css({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}).addClass("form-suggest-element").appendTo($suggestionContainer).click(function(){$input.focus();$input.val($(this).text());onSelectSuggestion($input)})})}}).bind("keydown",function(e){var code=e.keyCode?e.keyCode:e.which,suggestionId,$suggestionContainer,$input=$(this);if(code==13&&$.formUtils._selectedSuggestion!==null){suggestionId=$input.valAttr("suggestion-nr");$suggestionContainer=$(".jquery-form-suggestion-"+suggestionId);if($suggestionContainer.length>0){var newText=$suggestionContainer.find("div").eq($.formUtils._selectedSuggestion).text();$input.val(newText);onSelectSuggestion($input);e.preventDefault()}}else{suggestionId=$input.valAttr("suggestion-nr");$suggestionContainer=$(".jquery-form-suggestion-"+suggestionId);var $suggestions=$suggestionContainer.children();if($suggestions.length>0&&$.inArray(code,[38,40])>-1){if(code==38){if($.formUtils._selectedSuggestion===null)$.formUtils._selectedSuggestion=$suggestions.length-1;else $.formUtils._selectedSuggestion--;if($.formUtils._selectedSuggestion<0)$.formUtils._selectedSuggestion=$suggestions.length-1}else if(code==40){if($.formUtils._selectedSuggestion===null)$.formUtils._selectedSuggestion=0;else $.formUtils._selectedSuggestion++;if($.formUtils._selectedSuggestion>$suggestions.length-1)$.formUtils._selectedSuggestion=0}var containerInnerHeight=$suggestionContainer.innerHeight();var containerScrollTop=$suggestionContainer.scrollTop();var suggestionHeight=$suggestionContainer.children().eq(0).outerHeight();var activeSuggestionPosY=suggestionHeight*$.formUtils._selectedSuggestion;if(activeSuggestionPosY<containerScrollTop||activeSuggestionPosY>containerScrollTop+containerInnerHeight){$suggestionContainer.scrollTop(activeSuggestionPosY)}$suggestions.removeClass("active-suggestion").css("background","none").eq($.formUtils._selectedSuggestion).addClass("active-suggestion").css(config.activeSuggestionCSS);e.preventDefault();return false}}}).bind("blur",function(){onSelectSuggestion($(this))});return $element},LANG:{errorTitle:"Form submission failed!",requiredFields:"You have not answered all required fields",badTime:"You have not given a correct time",badEmail:"You have not given a correct e-mail address",badTelephone:"You have not given a correct phone number",badSecurityAnswer:"You have not given a correct answer to the security question",badDate:"You have not given a correct date",tooLongStart:"You have given an answer longer than ",tooLongEnd:" characters",tooShortStart:"You have given an answer shorter than ",tooShortEnd:" characters",badLength:"You have to give an answer between ",notConfirmed:"Values could not be confirmed",badDomain:"Incorrect domain value",badUrl:"The answer you gave was not a correct URL",badCustomVal:"You gave an incorrect answer",badInt:"The answer you gave was not a correct number",badSecurityNumber:"Your social security number was incorrect",badUKVatAnswer:"Incorrect UK VAT Number",badStrength:"The password isn't strong enough",badNumberOfSelectedOptionsStart:"You have to choose at least ",badNumberOfSelectedOptionsEnd:" answers",badAlphaNumeric:"The answer you gave must contain only alphanumeric characters ",badAlphaNumericExtra:" and "}};$.formUtils.addValidator({name:"validate_email",validate:function(email){var emailFilter=/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(emailFilter.test(email)){var parts=email.split("@");if(parts.length==2){return $.formUtils.validators.validate_domain.validate(parts[1])}}return false},errorMessage:"",errorMessageKey:"badEmail"});$.formUtils.addValidator({name:"validate_domain",validate:function(val,$input){var topDomains=[".com",".net",".org",".biz",".coop",".info",".museum",".name",".pro",".edu",".gov",".int",".mil",".ac",".ad",".ae",".af",".ag",".ai",".al",".am",".an",".ao",".aq",".ar",".as",".at",".au",".aw",".az",".ba",".bb",".bd",".be",".bf",".bg",".bh",".bi",".bj",".bm",".bn",".bo",".br",".bs",".bt",".bv",".bw",".by",".bz",".ca",".cc",".cd",".cf",".cg",".ch",".ci",".ck",".cl",".cm",".cn",".co",".cr",".cu",".cv",".cx",".cy",".cz",".de",".dj",".dk",".dm",".do",".dz",".ec",".ee",".eg",".eh",".er",".es",".et",".fi",".fj",".fk",".fm",".fo",".fr",".ga",".gd",".ge",".gf",".gg",".gh",".gi",".gl",".gm",".gn",".gp",".gq",".gr",".gs",".gt",".gu",".gv",".gy",".hk",".hm",".hn",".hr",".ht",".hu",".id",".ie",".il",".im",".in",".io",".iq",".ir",".is",".it",".je",".jm",".jo",".jp",".ke",".kg",".kh",".ki",".km",".kn",".kp",".kr",".kw",".ky",".kz",".la",".lb",".lc",".li",".lk",".lr",".ls",".lt",".lu",".lv",".ly",".ma",".mc",".md",".me",".mg",".mh",".mk",".ml",".mm",".mn",".mo",".mp",".mq",".mr",".ms",".mt",".mu",".mv",".mw",".mx",".my",".mz",".na",".nc",".ne",".nf",".ng",".ni",".nl",".no",".np",".nr",".nu",".nz",".om",".pa",".pe",".pf",".pg",".ph",".pk",".pl",".pm",".pn",".pr",".ps",".pt",".pw",".py",".qa",".re",".ro",".rs",".rw",".ru",".sa",".sb",".sc",".sd",".se",".sg",".sh",".si",".sj",".sk",".sl",".sm",".sn",".so",".sr",".st",".sv",".sy",".sz",".tc",".td",".tf",".tg",".th",".tj",".tk",".tm",".tn",".to",".tp",".tr",".tt",".tv",".tw",".tz",".ua",".ug",".uk",".um",".us",".uy",".uz",".va",".vc",".ve",".vg",".vi",".vn",".vu",".ws",".wf",".ye",".yt",".za",".zm",".zw",".mobi",".xxx",".asia"],ukTopDomains=["co","me","ac","gov","judiciary","ltd","mod","net","nhs","nic","org","parliament","plc","police","sch","bl","british-library","jet","nls"],dot=val.lastIndexOf("."),domain=val.substring(0,dot),ext=val.substring(dot,val.length),hasTopDomain=false;for(var i=0;i<topDomains.length;i++){if(topDomains[i]===ext){if(ext===".uk"){var domainParts=val.split(".");var tld2=domainParts[domainParts.length-2];for(var j=0;j<ukTopDomains.length;j++){if(ukTopDomains[j]===tld2){hasTopDomain=true;break}}if(hasTopDomain)break}else{hasTopDomain=true;break}}}if(!hasTopDomain){return false}else if(dot<2||dot>57){return false}else{var firstChar=domain.substring(0,1);var lastChar=domain.substring(domain.length-1,domain.length);if(firstChar==="-"||firstChar==="."||lastChar==="-"||lastChar==="."){return false}if(domain.split(".").length>3||domain.split("..").length>1){return false}if(domain.replace(/[0-9a-z\.\-]/g,"")!==""){return false}}if(typeof $input!=="undefined"){$input.val(val)}return true},errorMessage:"",errorMessageKey:"badDomain"});$.formUtils.addValidator({name:"validate_required",validate:function(val,$el){return $el.attr("type")=="checkbox"?$el.is(":checked"):$.trim(val)!==""},errorMessage:"",errorMessageKey:"requiredFields"});$.formUtils.addValidator({name:"validate_length",validate:function(value,$el,config,language){var len=$el.valAttr("length");if(len==undefined){var elementType=$el.get(0).nodeName;alert('Please add attribute "data-validation-length" to '+elementType+" named "+$el.attr("name"));return true}var range=$.split(len,"-");if(range.length==2&&(value.length<parseInt(range[0],10)||value.length>parseInt(range[1],10))){this.errorMessage=language.badLength+len+language.tooLongEnd;return false}else if(len.indexOf("min")===0){var minLength=parseInt(len.substr(3),10);if(minLength>value.length){this.errorMessage=language.tooShortStart+minLength+language.tooShortEnd;return false}}else if(len.indexOf("max")===0){var maxLength=parseInt(len.substr(3),10);if(maxLength<value.length){this.errorMessage=language.tooLongStart+maxLength+language.tooLongEnd;return false}}return true},errorMessage:"",errorMessageKey:""});$.formUtils.addValidator({name:"validate_url",validate:function(url){var urlFilter=/^(https|http|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|\[|\]|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;if(urlFilter.test(url)){var domain=url.split("://")[1];var domainSlashPos=domain.indexOf("/");if(domainSlashPos>-1)domain=domain.substr(0,domainSlashPos);return $.formUtils.validators.validate_domain.validate(domain)}return false},errorMessage:"",errorMessageKey:"badUrl"});$.formUtils.addValidator({name:"validate_number",validate:function(val,$el){if(val!==""){var allowing=$el.valAttr("allowing")||"";if(allowing.indexOf("number")==-1)allowing+=",number";if(allowing.indexOf("negative")>-1&&val.indexOf("-")===0){val=val.substr(1)}if(allowing.indexOf("number")>-1&&val.replace(/[0-9]/g,"")===""){return true}if(allowing.indexOf("float")>-1&&val.match(/^([0-9]+)\.([0-9]+)$/)!==null){return true}}return false},errorMessage:"",errorMessageKey:"badInt"});$.formUtils.addValidator({name:"validate_alphanumeric",validate:function(val,$el,config,language){var patternStart="^([a-zA-Z0-9",patternEnd="]+)$",additionalChars=$el.attr("data-validation-allowing"),pattern="";if(additionalChars){pattern=patternStart+additionalChars+patternEnd;var extra=additionalChars.replace(/\\/g,"");if(extra.indexOf(" ")>-1){extra=extra.replace(" ","");extra+=" and spaces "}this.errorMessage=language.badAlphaNumeric+language.badAlphaNumericExtra+extra}else{pattern=patternStart+patternEnd;this.errorMessage=language.badAlphaNumeric}return new RegExp(pattern).test(val)},errorMessage:"",errorMessageKey:""});$.formUtils.addValidator({name:"validate_custom",validate:function(val,$el,config){var regexp=new RegExp($el.valAttr("regexp"));return regexp.test(val)},errorMessage:"",errorMessageKey:"badCustomVal"});$.formUtils.addValidator({name:"validate_date",validate:function(date,$el,conf){var dateFormat="yyyy-mm-dd";if($el.attr("data-validation-format")){dateFormat=$el.attr("data-validation-format")}else if(typeof conf.dateFormat!="undefined"){dateFormat=conf.dateFormat}return $.formUtils.parseDate(date,dateFormat)!==false},errorMessage:"",errorMessageKey:"badDate"})})(jQuery);