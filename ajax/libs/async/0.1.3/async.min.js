(function(){var d={};var k=this;var m=k.async;if(typeof module!=="undefined"&&module.exports){module.exports=d}else{k.async=d}d.noConflict=function(){k.async=m;return d};var f=function(p,r){if(p.forEach){return p.forEach(r)}for(var q=0;q<p.length;q++){r(p[q],q,p)}};var c=function(p,r){if(p.map){return p.map(r)}var q=[];f(p,function(s,u,t){q.push(r(s,u,t))});return q};var a=function(p,r,q){if(p.reduce){return p.reduce(r,q)}f(p,function(s,u,t){q=r(q,s,u,t)});return q};var j=function(r){if(Object.keys){return Object.keys(r)}var q=[];for(var p in r){if(r.hasOwnProperty(p)){q.push(p)}}return q};var n=function(p,r){if(p.indexOf){return p.indexOf(r)}for(var q=0;q<p.length;q++){if(p[q]===r){return q}}return -1};d.nextTick=function(p){if(typeof process=="undefined"||!(process.nextTick)){setTimeout(p,0)}else{process.nextTick(p)}};d.forEach=function(p,r,s){if(!p.length){return s()}var q=0;f(p,function(t){r(t,function(u){if(u){s(u);s=function(){}}else{q++;if(q==p.length){s()}}})})};d.forEachSeries=function(p,s,t){if(!p.length){return t()}var r=0;var q=function(){s(p[r],function(u){if(u){t(u);t=function(){}}else{r++;if(r==p.length){t()}else{q()}}})};q()};var g=function(p){return function(){var q=Array.prototype.slice.call(arguments);return p.apply(null,[d.forEach].concat(q))}};var o=function(p){return function(){var q=Array.prototype.slice.call(arguments);return p.apply(null,[d.forEachSeries].concat(q))}};var l=function(s,p,r,t){var q=[];p=c(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(x,w){q[u.index]=w;v(x)})},function(u){t(u,q)})};d.map=g(l);d.mapSeries=o(l);d.reduce=function(p,q,r,s){d.forEachSeries(p,function(t,u){r(q,t,function(x,w){q=w;u(x)})},function(t){s(t,q)})};d.inject=d.reduce;d.foldl=d.reduce;d.reduceRight=function(p,q,r,t){var s=c(p,function(u){return u}).reverse();d.reduce(s,q,r,t)};d.foldr=d.reduceRight;var i=function(s,p,r,t){var q=[];p=c(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(w){if(w){q.push(u)}v()})},function(u){t(c(q.sort(function(w,v){return w.index-v.index}),function(v){return v.value}))})};d.filter=g(i);d.filterSeries=o(i);d.select=d.filter;d.selectSeries=d.filterSeries;var e=function(s,p,r,t){var q=[];p=c(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(w){if(!w){q.push(u)}v()})},function(u){t(c(q.sort(function(w,v){return w.index-v.index}),function(v){return v.value}))})};d.reject=g(e);d.rejectSeries=o(e);var h=function(r,p,q,s){r(p,function(t,u){q(t,function(v){if(v){s(t)}else{u()}})},function(t){s()})};d.detect=g(h);d.detectSeries=o(h);d.some=function(p,q,r){d.forEach(p,function(s,t){q(s,function(u){if(u){r(true);r=function(){}}t()})},function(s){r(false)})};d.any=d.some;d.every=function(p,q,r){d.forEach(p,function(s,t){q(s,function(u){if(!u){r(false);r=function(){}}t()})},function(s){r(true)})};d.all=d.every;d.sortBy=function(p,q,r){d.map(p,function(s,t){q(s,function(u,v){if(u){t(u)}else{t(null,{value:s,criteria:v})}})},function(t,s){if(t){return r(t)}else{r(null,c(s.sort(function(x,w){var v=x.criteria,u=w.criteria;return v<u?-1:v>u?1:0}),function(u){return u.value}))}})};d.auto=function(w,v){v=v||function(){};var t=j(w);if(!t.length){return v(null)}var s=[];var r=[];var p=function(x){r.unshift(x)};var q=function(y){for(var x=0;x<r.length;x++){if(r[x]===y){r.splice(x,1);return}}};var u=function(){f(r,function(x){x()})};p(function(){if(s.length==t.length){v(null)}});f(t,function(y){var x=(w[y] instanceof Function)?[w[y]]:w[y];var C=function(D){if(D){v(D);v=function(){}}else{s.push(y);u()}};var A=x.slice(0,Math.abs(x.length-1))||[];var z=function(){return a(A,function(E,D){return(E&&n(s,D)!=-1)},true)};if(z()){x[x.length-1](C)}else{var B=function(){if(z()){q(B);x[x.length-1](C)}};p(B)}})};d.waterfall=function(r,q){if(!r.length){return q()}q=q||function(){};var p=function(s){return function(v){if(v){q(v);q=function(){}}else{var t=Array.prototype.slice.call(arguments,1);var u=s.next();if(u){t.push(p(u))}else{t.push(q)}d.nextTick(function(){s.apply(null,t)})}}};p(d.iterator(r))()};d.parallel=function(q,p){p=p||function(){};d.map(q,function(r,s){if(r){r(function(u){var t=Array.prototype.slice.call(arguments,1);if(t.length<=1){t=t[0]}s.call(null,u,t||null)})}},p)};d.series=function(q,p){p=p||function(){};d.mapSeries(q,function(r,s){if(r){r(function(u){var t=Array.prototype.slice.call(arguments,1);if(t.length<=1){t=t[0]}s.call(null,u,t||null)})}},p)};d.iterator=function(q){var p=function(r){var s=function(){if(q.length){q[r].apply(null,arguments)}return s.next()};s.next=function(){return(r<q.length-1)?p(r+1):null};return s};return p(0)};d.apply=function(q){var p=Array.prototype.slice.call(arguments,1);return function(){q.apply(null,p.concat(Array.prototype.slice.call(arguments)))}};var b=function(p){return function(r){var q=Array.prototype.slice.call(arguments,1);r.apply(null,q.concat([function(t){var s=Array.prototype.slice.call(arguments,1);if(typeof console!="undefined"){if(t){if(console.error){console.error(t)}}else{if(console[p]){f(s,function(u){console[p](u)})}}}}]))}};d.log=b("log");d.dir=b("dir")})();