(function(){var f={};var o,j;o=this;if(o!=null){j=o.async}f.noConflict=function(){o.async=j;return f};function q(u){var v=false;return function(){if(v){throw new Error("Callback was already called.")}v=true;u.apply(o,arguments)}}var e=function(u,w){if(u.forEach){return u.forEach(w)}for(var v=0;v<u.length;v+=1){w(u[v],v,u)}};var a=function(u,w){if(u.map){return u.map(w)}var v=[];e(u,function(y,A,z){v.push(w(y,A,z))});return v};var s=function(u,w,v){if(u.reduce){return u.reduce(w,v)}e(u,function(y,A,z){v=w(v,y,A,z)});return v};var c=function(w){if(Object.keys){return Object.keys(w)}var v=[];for(var u in w){if(w.hasOwnProperty(u)){v.push(u)}}return v};if(typeof process==="undefined"||!(process.nextTick)){if(typeof setImmediate==="function"){f.nextTick=function(u){setImmediate(u)}}else{f.nextTick=function(u){setTimeout(u,0)}}}else{f.nextTick=process.nextTick}f.forEach=function(u,w,x){x=x||function(){};if(!u.length){return x()}var v=0;e(u,function(y){w(y,q(function(z){if(z){x(z);x=function(){}}else{v+=1;if(v>=u.length){x(null)}}}))})};f.forEachSeries=function(u,x,y){y=y||function(){};if(!u.length){return y()}var w=0;var v=function(){var z=true;x(u[w],function(A){if(A){y(A);y=function(){}}else{w+=1;if(w>=u.length){y(null)}else{if(z){f.nextTick(v)}else{v()}}}});z=false};v()};f.forEachLimit=function(u,v,x,y){var w=t(v);w.apply(null,[u,x,y])};var t=function(u){return function(v,z,B){B=B||function(){};if(!v.length||u<=0){return B()}var y=0;var w=0;var x=0;(function A(){if(y>=v.length){return B()}while(x<u&&w<v.length){w+=1;x+=1;z(v[w-1],function(C){if(C){B(C);B=function(){}}else{y+=1;x-=1;if(y>=v.length){B()}else{A()}}})}})()}};var p=function(u){return function(){var v=Array.prototype.slice.call(arguments);return u.apply(null,[f.forEach].concat(v))}};var n=function(u,v){return function(){var w=Array.prototype.slice.call(arguments);return v.apply(null,[t(u)].concat(w))}};var l=function(u){return function(){var v=Array.prototype.slice.call(arguments);return u.apply(null,[f.forEachSeries].concat(v))}};var h=function(x,u,w,y){var v=[];u=a(u,function(z,A){return{index:A,value:z}});x(u,function(z,A){w(z.value,function(C,B){v[z.index]=B;A(C)})},function(z){y(z,v)})};f.map=p(h);f.mapSeries=l(h);f.mapLimit=function(u,v,w,x){return d(v)(u,w,x)};var d=function(u){return n(u,h)};f.reduce=function(u,v,w,x){f.forEachSeries(u,function(y,z){w(v,y,function(B,A){v=A;z(B)})},function(y){x(y,v)})};f.inject=f.reduce;f.foldl=f.reduce;f.reduceRight=function(u,v,w,y){var x=a(u,function(z){return z}).reverse();f.reduce(x,v,w,y)};f.foldr=f.reduceRight;var r=function(x,u,w,y){var v=[];u=a(u,function(z,A){return{index:A,value:z}});x(u,function(z,A){w(z.value,function(B){if(B){v.push(z)}A()})},function(z){y(a(v.sort(function(B,A){return B.index-A.index}),function(A){return A.value}))})};f.filter=p(r);f.filterSeries=l(r);f.select=f.filter;f.selectSeries=f.filterSeries;var k=function(x,u,w,y){var v=[];u=a(u,function(z,A){return{index:A,value:z}});x(u,function(z,A){w(z.value,function(B){if(!B){v.push(z)}A()})},function(z){y(a(v.sort(function(B,A){return B.index-A.index}),function(A){return A.value}))})};f.reject=p(k);f.rejectSeries=l(k);var g=function(w,u,v,x){w(u,function(y,z){v(y,function(A){if(A){x(y);x=function(){}}else{z()}})},function(y){x()})};f.detect=p(g);f.detectSeries=l(g);f.some=function(u,v,w){f.forEach(u,function(y,z){v(y,function(x){if(x){w(true);w=function(){}}z()})},function(x){w(false)})};f.any=f.some;f.every=function(u,v,w){f.forEach(u,function(y,z){v(y,function(x){if(!x){w(false);w=function(){}}z()})},function(x){w(true)})};f.all=f.every;f.sortBy=function(u,v,w){f.map(u,function(y,z){v(y,function(x,A){if(x){z(x)}else{z(null,{value:y,criteria:A})}})},function(z,x){if(z){return w(z)}else{var y=function(D,C){var B=D.criteria,A=C.criteria;return B<A?-1:B>A?1:0};w(null,a(x.sort(y),function(A){return A.value}))}})};f.auto=function(B,A){A=A||function(){};var y=c(B);if(!y.length){return A(null)}var v={};var x=[];var u=function(C){x.unshift(C)};var w=function(D){for(var C=0;C<x.length;C+=1){if(x[C]===D){x.splice(C,1);return}}};var z=function(){e(x.slice(0),function(C){C()})};u(function(){if(c(v).length===y.length){A(null,v);A=function(){}}});e(y,function(D){var C=(B[D] instanceof Function)?[B[D]]:B[D];var H=function(J){if(J){A(J);A=function(){}}else{var I=Array.prototype.slice.call(arguments,1);if(I.length<=1){I=I[0]}v[D]=I;f.nextTick(z)}};var F=C.slice(0,Math.abs(C.length-1))||[];var E=function(){return s(F,function(J,I){return(J&&v.hasOwnProperty(I))},true)&&!v.hasOwnProperty(D)};if(E()){C[C.length-1](H,v)}else{var G=function(){if(E()){w(G);C[C.length-1](H,v)}};u(G)}})};f.waterfall=function(w,v){v=v||function(){};if(!w.length){return v()}var u=function(x){return function(A){if(A){v.apply(null,arguments);v=function(){}}else{var y=Array.prototype.slice.call(arguments,1);var z=x.next();if(z){y.push(u(z))}else{y.push(v)}f.nextTick(function(){x.apply(null,y)})}}};u(f.iterator(w))()};var b=function(v,x,w){w=w||function(){};if(x.constructor===Array){v.map(x,function(y,z){if(y){y(function(B){var A=Array.prototype.slice.call(arguments,1);if(A.length<=1){A=A[0]}z.call(null,B,A)})}},w)}else{var u={};v.forEach(c(x),function(y,z){x[y](function(B){var A=Array.prototype.slice.call(arguments,1);if(A.length<=1){A=A[0]}u[y]=A;z(B)})},function(y){w(y,u)})}};f.parallel=function(v,u){b({map:f.map,forEach:f.forEach},v,u)};f.parallelLimit=function(w,u,v){b({map:d(u),forEach:t(u)},w,v)};f.series=function(w,v){v=v||function(){};if(w.constructor===Array){f.mapSeries(w,function(x,y){if(x){x(function(A){var z=Array.prototype.slice.call(arguments,1);if(z.length<=1){z=z[0]}y.call(null,A,z)})}},v)}else{var u={};f.forEachSeries(c(w),function(x,y){w[x](function(A){var z=Array.prototype.slice.call(arguments,1);if(z.length<=1){z=z[0]}u[x]=z;y(A)})},function(x){v(x,u)})}};f.iterator=function(v){var u=function(w){var x=function(){if(v.length){v[w].apply(null,arguments)}return x.next()};x.next=function(){return(w<v.length-1)?u(w+1):null};return x};return u(0)};f.apply=function(v){var u=Array.prototype.slice.call(arguments,1);return function(){return v.apply(null,u.concat(Array.prototype.slice.call(arguments)))}};var m=function(x,u,v,y){var w=[];x(u,function(A,z){v(A,function(B,C){w=w.concat(C||[]);z(B)})},function(z){y(z,w)})};f.concat=p(m);f.concatSeries=l(m);f.whilst=function(x,u,w){if(x()){var v=true;u(function(y){if(y){return w(y)}if(v){f.nextTick(function(){f.whilst(x,u,w)})}else{f.whilst(x,u,w)}});v=false}else{w()}};f.doWhilst=function(u,x,w){var v=true;u(function(y){if(y){return w(y)}if(x()){if(v){f.nextTick(function(){f.doWhilst(u,x,w)})}else{f.doWhilst(u,x,w)}}else{w()}});v=false};f.until=function(x,u,w){if(!x()){var v=true;u(function(y){if(y){return w(y)}if(v){f.nextTick(function(){f.until(x,u,w)})}else{f.until(x,u,w)}});v=false}else{w()}};f.doUntil=function(u,x,w){var v=true;u(function(y){if(y){return w(y)}if(!x()){if(v){f.nextTick(function(){f.doUntil(u,x,w)})}else{f.doUntil(u,x,w)}}else{w()}});v=false};f.queue=function(x,v){var u=0;var w={tasks:[],concurrency:v,saturated:null,empty:null,drain:null,push:function(y,z){if(y.constructor!==Array){y=[y]}e(y,function(A){w.tasks.push({data:A,callback:typeof z==="function"?z:null});if(w.saturated&&w.tasks.length===v){w.saturated()}f.nextTick(w.process)})},process:function(){if(u<w.concurrency&&w.tasks.length){var z=w.tasks.shift();if(w.empty&&w.tasks.length===0){w.empty()}u+=1;var B=true;var A=function(){u-=1;if(z.callback){z.callback.apply(z,arguments)}if(w.drain&&w.tasks.length+u===0){w.drain()}w.process()};var y=q(function(){if(B){f.nextTick(function(){A.apply(null,arguments)})}else{A.apply(null,arguments)}});x(z.data,y);B=false}},length:function(){return w.tasks.length},running:function(){return u}};return w};f.cargo=function(y,x){var u=false,z=[];var v={tasks:z,payload:x,saturated:null,empty:null,drain:null,push:function(A,B){if(A.constructor!==Array){A=[A]}e(A,function(C){z.push({data:C,callback:typeof B==="function"?B:null});if(v.saturated&&z.length===x){v.saturated()}});f.nextTick(v.process)},process:function w(){if(u){return}if(z.length===0){if(v.drain){v.drain()}return}var A=typeof x==="number"?z.splice(0,x):z.splice(0);var B=a(A,function(C){return C.data});if(v.empty){v.empty()}u=true;y(B,function(){u=false;var C=arguments;e(A,function(D){if(D.callback){D.callback.apply(null,C)}});w()})},length:function(){return z.length},running:function(){return u}};return v};var i=function(u){return function(w){var v=Array.prototype.slice.call(arguments,1);w.apply(null,v.concat([function(y){var x=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(y){if(console.error){console.error(y)}}else{if(console[u]){e(x,function(z){console[u](z)})}}}}]))}};f.log=i("log");f.dir=i("dir");f.memoize=function(y,w){var v={};var x={};w=w||function(z){return z};var u=function(){var z=Array.prototype.slice.call(arguments);var B=z.pop();var A=w.apply(null,z);if(A in v){B.apply(null,v[A])}else{if(A in x){x[A].push(B)}else{x[A]=[B];y.apply(null,z.concat([function(){v[A]=arguments;var E=x[A];delete x[A];for(var D=0,C=E.length;D<C;D++){E[D].apply(null,arguments)}}]))}}};u.memo=v;u.unmemoized=y;return u};f.unmemoize=function(u){return function(){return(u.unmemoized||u).apply(null,arguments)}};f.times=function(x,w,y){var u=[];for(var v=0;v<x;v++){u.push(v)}return f.map(u,w,y)};f.timesSeries=function(x,w,y){var u=[];for(var v=0;v<x;v++){u.push(v)}return f.mapSeries(u,w,y)};if(typeof define!=="undefined"&&define.amd){define([],function(){return f})}else{if(typeof module!=="undefined"&&module.exports){module.exports=f}else{o.async=f}}}());