"use strict";(function(a,b){if(typeof define==="function"&&define.amd){define(["react"],b)}else{if(typeof exports==="object"){module.exports=b(require("react"))}else{a.Reactable=b(a.React)}}}(this,function(b){var d={};if(!Array.prototype.map){Array.prototype.map=function(x,w){var q,p,r;if(this==null){throw new TypeError(" this is null or not defined")}var t=Object(this);var u=t.length>>>0;if(typeof x!=="function"){throw new TypeError(x+" is not a function")}if(arguments.length>1){q=w}p=new Array(u);r=0;while(r<u){var s,v;if(r in t){s=t[r];v=x.call(q,s,r,t);p[r]=v}r++}return p}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(q){var p=this.length>>>0;var r=Number(arguments[1])||0;r=(r<0)?Math.ceil(r):Math.floor(r);if(r<0){r+=p}for(;r<p;r++){if(r in this&&this[r]===q){return r}}return -1}}if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{enumerable:false,configurable:true,writable:true,value:function(p){if(this==null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof p!=="function"){throw new TypeError("predicate must be a function")}var u=Object(this);var s=u.length>>>0;var q=arguments[1];var t;for(var r=0;r<s;r++){if(r in u){t=u[r];if(p.call(q,t,r,u)){return t}}}return undefined}})}if(!Array.isArray){Array.isArray=function(p){return Object.prototype.toString.call(p)==="[object Array]"}}function k(p){this.content=p}function m(p){return typeof(p)!=="undefined"&&typeof(p.toString==="function")}function g(p){return typeof(p)==="object"&&typeof(p.props)!=="undefined"}b.Children.children=function(p){return b.Children.map(p,function(q){return q})||[]};k.prototype.toString=function(){return this.content};d.unsafe=function(p){return new k(p)};d.Sort={Numeric:function(r,p){var s=parseFloat(r.toString().replace(",",""));var q=parseFloat(p.toString().replace(",",""));if(isNaN(s)&&isNaN(q)){s=r;q=p}else{if(isNaN(s)){return 1}if(isNaN(q)){return -1}}if(s<q){return -1}if(s>q){return 1}return 0},Currency:function(q,p){if(q[0]==="$"){q=q.substring(1)}if(p[0]==="$"){p=p.substring(1)}return d.Sort.Numeric(q,p)},Date:function(r,p){var s=Date.parse(r);var q=Date.parse(p);if(isNaN(s)||isNaN(q)){return d.Sort.Numeric(r,p)}if(s>q){return 1}if(q>s){return -1}return 0},CaseInsensitive:function(r,p){var s=r.toLowerCase();var q=p.toLowerCase();if(s>q){return 1}if(q>s){return -1}return 0}};var f=d.Td=b.createClass({displayName:"Td",handleClick:function(p){if(typeof this.props.handleClick!=="undefined"){return this.props.handleClick(p,this)}},render:function(){var r={"data-column":this.props.column.key,className:this.props.className,onClick:this.handleClick};for(var p in this.props.column){if(p!=="key"&&p!=="name"){r[p]=this.props.column[p]}}var q=this.props.data;if(typeof(this.props.children)!=="undefined"){if(g(this.props.children)){q=this.props.children}else{if(typeof(this.props.data)==="undefined"&&m(this.props.children)){if(g(this.props.children)){console.log("child is component")}q=this.props.children.toString()}}if(this.props.children instanceof k){r.dangerouslySetInnerHTML={__html:this.props.children.toString()}}else{r.children=q}}return b.DOM.td(r)}});var l=d.Tr=b.createClass({displayName:"Tr",statics:{childNode:f,dataType:"object"},render:function(){var p=b.Children.children(this.props.children);if(this.props.data&&this.props.columns&&typeof this.props.columns.map==="function"){p=p.concat(this.props.columns.map(function(s,r){if(this.props.data.hasOwnProperty(s.key)){return f({column:s,key:s.key},this.props.data[s.key])}else{return f({column:s,key:s.key})}}.bind(this)))}var q=n(this.props);return b.DOM.tr(q,p)}});var e=d.Thead=b.createClass({displayName:"Thead",getColumns:function(){return b.Children.map(this.props.children,function(p){if(typeof p.props.children==="string"){return p.props.children}else{throw new TypeError("<th> must have a string child")}})},handleClickTh:function(p){this.props.onSort(p.key)},render:function(){var t=[];for(var q=0;q<this.props.columns.length;q++){var s=this.props.columns[q];var p="";if(this.props.sort.column===s.key){p="reactable-header-sort";if(this.props.sort.direction===1){p+="-asc"}else{p+="-desc"}}t.push(b.DOM.th({className:p,key:q,onClick:this.handleClickTh.bind(this,s)},s.label))}var r=n(this.props);return b.DOM.thead(r,(this.props.filtering===true?j({colSpan:this.props.columns.length,onFilter:this.props.onFilter}):""),b.DOM.tr({className:"reactable-column-header"},t))}});var c=d.Th=b.createClass({displayName:"Th",render:function(){return this.transferPropsTo(b.DOM.th(null,this.props.children))}});var o=b.createClass({displayName:"FiltererInput",render:function(){return(b.DOM.input({type:"text",className:"reactable-filter-input",onKeyUp:function(){this.props.onFilter(this.getDOMNode().value)}.bind(this)}))}});var j=b.createClass({displayName:"Filterer",render:function(){if(typeof this.props.colSpan==="undefined"){throw new TypeError("Must pass a colSpan argument to Filterer")}return(b.DOM.tr({className:"reactable-filterer"},b.DOM.td({colSpan:this.props.colSpan},o({onFilter:this.props.onFilter}))))}});var a=b.createClass({displayName:"Paginator",render:function(){if(typeof this.props.colSpan==="undefined"){throw new TypeError("Must pass a colSpan argument to Paginator")}if(typeof this.props.numPages==="undefined"){throw new TypeError("Must pass a non-zero numPages argument to Paginator")}if(typeof this.props.currentPage==="undefined"){throw new TypeError("Must pass a currentPage argument to Paginator")}var r=[];for(var p=0;p<this.props.numPages;p++){var s=p;var q="reactable-page-button";if(this.props.currentPage===p){q+=" reactable-current-page"}r.push(b.DOM.a({className:q,key:p,onClick:(function(t){return function(){this.props.onPageChange(t)}.bind(this)}.bind(this))(p)},p+1))}return(b.DOM.tbody({className:"reactable-pagination"},b.DOM.tr(null,b.DOM.td({colSpan:this.props.colSpan},r))))}});var i=d.Table=b.createClass({displayName:"Table",translateColumnsArray:function(p){return p.map(function(s,r){if(typeof(s)==="string"){return{key:s,label:s}}else{if(typeof(s.sortable)!=="undefined"){var q=s.sortable===true?"default":s.sortable;this._sortable[s.key]=q}return s}}.bind(this))},parseChildData:function(p){var q=[];if(typeof(p.children)!=="undefined"){b.Children.forEach(p.children,function(s){var r=s.props.data||{};b.Children.forEach(s.props.children,function(t){if(true){if(typeof(t.props.column)!=="undefined"){if(typeof(t.props.data)!=="undefined"){r[t.props.column]=t.props.data}else{if(typeof(t.props.children)!=="undefined"){r[t.props.column]=t.props.children}else{console.warn("exports.Td specified without a `data` property or children, ignoring")}}}else{console.warn("exports.Td specified without a `column` property, ignoring")}}});q.push(r)}.bind(this))}return q},initialize:function(p){this.data=p.data||[];this.data=this.data.concat(this.parseChildData(p));this.initializeSorts(p)},initializeSorts:function(){this._sortable={};for(var r in this.props.sortable){var s=this.props.sortable[r];var q,p;if(s instanceof Object){if(typeof(s.column)!=="undefined"){q=s.column}else{console.warn("Sortable column specified without column name");return}if(typeof(s.sortFunction)==="function"){p=s.sortFunction}else{p="default"}}else{q=s;p="default"}this._sortable[q]=p}},getDefaultProps:function(){var p={sortBy:false,defaultSort:false,itemsPerPage:0};return p},getInitialState:function(){var p={currentPage:0,currentSort:{column:null,direction:1},filter:""};if(this.props.sortBy!==false||this.props.defaultSort!==false){var q=this.props.sortBy||this.props.defaultSort;p.currentSort=this.getCurrentSort(q)}return p},getCurrentSort:function(q){if(q instanceof Object){var p,r;if(typeof(q.column)!=="undefined"){p=q.column}else{console.warn("Default column specified without column name");return}if(typeof(q.direction)!=="undefined"){if(q.direction===1||q.direction==="asc"){r=1}else{if(q.direction===-1||q.direction==="desc"){r=-1}else{console.warn("Invalid default sort specified.  Defaulting to ascending");r=1}}}else{r=1}}else{p=q;r=1}return{column:p,direction:r}},updateCurrentSort:function(p){if(p!==false&&p.column!==this.state.currentSort.column&&p.direction!==this.state.currentSort.direction){this.setState({currentSort:this.getCurrentSort(p)})}},componentWillMount:function(){this.initialize(this.props);this.sortByCurrentSort()},componentWillReceiveProps:function(p){this.initialize(p);this.updateCurrentSort(p.sortBy);this.sortByCurrentSort()},onPageChange:function(p){this.setState({currentPage:p})},onFilter:function(p){this.setState({filter:p})},applyFilter:function(s,r){var s=s.toLowerCase();var t=[];for(var q=0;q<r.length;q++){var u=r[q].props.data;for(var p=0;p<this.props.filterable.length;p++){var v=this.props.filterable[p];if(typeof(u[v])!=="undefined"&&u[v].toString().toLowerCase().indexOf(s)>-1){t.push(r[q]);break}}}return t},sortByCurrentSort:function(){var p=this.state.currentSort;if(p.column===null){return}this.data.sort(function(t,r){var s=t[p.column];s=m(s)?s.toString():"";var q=r[p.column];q=m(q)?q.toString():"";if(this._sortable[p.column]==="default"){if(s<q){return -1*p.direction}if(s>q){return 1*p.direction}return 0}else{if(p.direction===1){return this._sortable[p.column](s,q)}else{return this._sortable[p.column](q,s)}}}.bind(this))},onSort:function(q){if(typeof(this._sortable[q])==="undefined"){return}var p=this.state.currentSort;if(p.column===q){p.direction*=-1}else{p.column=q;p.direction=1}this.setState({currentSort:p});this.sortByCurrentSort()},render:function(){var q=[];var t;var x=false;if(this.props.children&&this.props.children.length>0&&this.props.children[0].type.ConvenienceConstructor===e){t=this.props.children[0].getColumns()}else{t=this.props.columns||[]}if(t.length>0){x=true;t=this.translateColumnsArray(t)}if(this.data&&typeof this.data.map==="function"){q=q.concat(this.data.map(function(E,C){for(var B in E){if(E.hasOwnProperty(B)){if(x===false){var D={key:B,label:B};if(t.find(function(F){return F.key===D.key})===undefined){t.push(D)}}}}return(l({columns:t,key:C,data:E}))}.bind(this)))}if(this.props.sortable===true){for(var u=0;u<t.length;u++){this._sortable[t[u].key]="default"}}var A=false;if(this.props.filterable&&Array.isArray(this.props.filterable)&&this.props.filterable.length>0){A=true}var p=q;if(this.state.filter!==""){p=this.applyFilter(this.state.filter,p)}var r=0;var y=false;var s;var v=this.state.currentPage;var z=p;if(this.props.itemsPerPage>0){r=this.props.itemsPerPage;s=Math.ceil(p.length/r);if(v>s-1){v=s-1}y=true;z=p.slice(v*r,(v+1)*r)}var w=n(this.props);return b.DOM.table(w,(t&&t.length>0?e({columns:t,filtering:A,onFilter:this.onFilter,sort:this.state.currentSort,onSort:this.onSort}):null),b.DOM.tbody({className:"reactable-data"},z),(y===true?a({colSpan:t.length,numPages:s,currentPage:v,onPageChange:this.onPageChange}):""))}});function n(p){p=p||{};var r={};for(var q in p){if(!(q in h)){r[q]=p[q]}}return r}var h={columns:true,sortable:true,filterable:true,sortBy:true,defaultSort:true,itemsPerPage:true,childNode:true,data:true};return d}));