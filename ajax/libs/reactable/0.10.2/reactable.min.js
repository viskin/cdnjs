(function(a,b){if(typeof define==="function"&&define.amd){define(["react"],b)}else{if(typeof exports==="object"){module.exports=b(require("react"))}else{a.Reactable=b(a.React)}}}(this,function(c){var f={};if(!Array.prototype.map){Array.prototype.map=function(z,y){var s,r,t;if(this===null){throw new TypeError(" this is null or not defined")}var v=Object(this);var w=v.length>>>0;if(typeof z!=="function"){throw new TypeError(z+" is not a function")}if(arguments.length>1){s=y}r=new Array(w);t=0;while(t<w){var u,x;if(t in v){u=v[t];x=z.call(s,u,t,v);r[t]=x}t++}return r}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(s){var r=this.length>>>0;var t=Number(arguments[1])||0;t=(t<0)?Math.ceil(t):Math.floor(t);if(t<0){t+=r}for(;t<r;t++){if(t in this&&this[t]===s){return t}}return -1}}if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{enumerable:false,configurable:true,writable:true,value:function(r){if(this===null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof r!=="function"){throw new TypeError("predicate must be a function")}var w=Object(this);var u=w.length>>>0;var s=arguments[1];var v;for(var t=0;t<u;t++){if(t in w){v=w[t];if(r.call(s,v,t,w)){return v}}}return undefined}})}if(!Array.isArray){Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"}}if(!Object.assign){Object.defineProperty(Object,"assign",{enumerable:false,configurable:true,writable:true,value:function(y,r){if(y===undefined||y===null){throw new TypeError("Cannot convert first argument to object")}var A=Object(y);for(var s=1;s<arguments.length;s++){var v=arguments[s];if(v===undefined||v===null){continue}var t=Object.keys(Object(v));for(var u=0,x=t.length;u<x;u++){var z=t[u];var w=Object.getOwnPropertyDescriptor(v,z);if(w!==undefined&&w.enumerable){A[z]=v[z]}}}return A}})}function m(r){this.content=r}m.prototype.toString=function(){return this.content};function o(r){return r!==null&&typeof(r)!=="undefined"&&typeof(r.toString==="function")}function i(r){return r!==null&&typeof(r)==="object"&&typeof(r.props)!=="undefined"}c.Children.children=function(r){return c.Children.map(r,function(s){return s})||[]};f.unsafe=function(r){return new m(r)};f.Sort={Numeric:function(t,r){var u=parseFloat(t.toString().replace(/,/g,""));var s=parseFloat(r.toString().replace(/,/g,""));if(isNaN(u)&&isNaN(s)){u=t;s=r}else{if(isNaN(u)){return 1}if(isNaN(s)){return -1}}if(u<s){return -1}if(u>s){return 1}return 0},NumericInteger:function(s,r){if(isNaN(s)||isNaN(r)){return s>r?1:-1}return s-r},Currency:function(s,r){if(s[0]==="$"){s=s.substring(1)}if(r[0]==="$"){r=r.substring(1)}return f.Sort.Numeric(s,r)},Date:function(t,r){var u=Date.parse(t);var s=Date.parse(r);if(isNaN(u)||isNaN(s)){return f.Sort.Numeric(t,r)}if(u>s){return 1}if(s>u){return -1}return 0},CaseInsensitive:function(s,r){return s.toLowerCase().localeCompare(r.toLowerCase())}};var h=f.Td=c.createClass({displayName:"Td",handleClick:function(r){if(typeof this.props.handleClick==="function"){return this.props.handleClick(r,this)}},render:function(){var t={className:this.props.className,onClick:this.handleClick};if(typeof(this.props.column)==="object"){for(var r in this.props.column){if(r!=="key"&&r!=="name"){t[r]=this.props.column[r]}}}var s=this.props.data;if(typeof(this.props.children)!=="undefined"){if(i(this.props.children)){s=this.props.children}else{if(typeof(this.props.data)==="undefined"&&o(this.props.children)){s=this.props.children.toString()}}if(this.props.children instanceof m){t.dangerouslySetInnerHTML={__html:this.props.children.toString()}}else{t.children=s}}return c.DOM.td(t)}});var n=f.Tr=c.createClass({displayName:"Tr",statics:{childNode:h,dataType:"object"},render:function(){var r=e(c.Children.children(this.props.children));if(this.props.data&&this.props.columns&&typeof this.props.columns.map==="function"){if(typeof(r.concat)==="undefined"){console.log(r)}r=r.concat(this.props.columns.map(function(v,t){if(this.props.data.hasOwnProperty(v.key)){var w=this.props.data[v.key];var u={};if(typeof(w)!=="undefined"&&w!==null&&w.__reactableMeta===true){u=w.props;w=w.value}return c.createElement(h,c.__spread({column:v,key:v.key},u),w)}else{return c.createElement(h,{column:v,key:v.key})}}.bind(this)))}var s=p(this.props);return c.DOM.tr(s,r)}});var g=f.Thead=c.createClass({displayName:"Thead",getColumns:function(){return c.Children.map(this.props.children,function(r){if(typeof r.props.children==="string"){return r.props.children}else{throw new TypeError("<th> must have a string child")}})},handleClickTh:function(r){this.props.onSort(r.key)},render:function(){var v=[];for(var s=0;s<this.props.columns.length;s++){var u=this.props.columns[s];var r="";if(this.props.sortableColumns[u.key]){r+="reactable-header-sortable "}if(this.props.sort.column===u.key){r+="reactable-header-sort";if(this.props.sort.direction===1){r+="-asc"}else{r+="-desc"}}v.push(c.createElement(d,{className:r,key:s,onClick:this.handleClickTh.bind(this,u)},u.label))}var t=p(this.props);return(c.createElement("thead",c.__spread({},t),this.props.filtering===true?c.createElement(l,{colSpan:this.props.columns.length,onFilter:this.props.onFilter,placeholder:this.props.filterPlaceholder,value:this.props.currentFilter}):"",c.createElement("tr",{className:"reactable-column-header"},v)))}});var d=f.Th=c.createClass({displayName:"Th",render:function(){var r;if(this.props.children instanceof m){return c.createElement("th",c.__spread({},p(this.props),{dangerouslySetInnerHTML:{__html:this.props.children.toString()}}))}else{return c.createElement("th",c.__spread({},p(this.props)),this.props.children)}}});var q=c.createClass({displayName:"FiltererInput",onChange:function(){this.props.onFilter(this.getDOMNode().value)},render:function(){return(c.createElement("input",{type:"text",className:"reactable-filter-input",placeholder:this.props.placeholder,value:this.props.value,onKeyUp:this.onChange,onChange:this.onChange}))}});var l=c.createClass({displayName:"Filterer",render:function(){if(typeof this.props.colSpan==="undefined"){throw new TypeError("Must pass a colSpan argument to Filterer")}return(c.createElement("tr",{className:"reactable-filterer"},c.createElement("td",{colSpan:this.props.colSpan},c.createElement(q,{onFilter:this.props.onFilter,value:this.props.value,placeholder:this.props.placeholder}))))}});var b=c.createClass({displayName:"Paginator",render:function(){if(typeof this.props.colSpan==="undefined"){throw new TypeError("Must pass a colSpan argument to Paginator")}if(typeof this.props.numPages==="undefined"){throw new TypeError("Must pass a non-zero numPages argument to Paginator")}if(typeof this.props.currentPage==="undefined"){throw new TypeError("Must pass a currentPage argument to Paginator")}var t=[];for(var r=0;r<this.props.numPages;r++){var u=r;var s="reactable-page-button";if(this.props.currentPage===r){s+=" reactable-current-page"}t.push(c.createElement("a",{className:s,key:r,onClick:(function(v){return function(){this.props.onPageChange(v)}.bind(this)}.bind(this))(r)},r+1))}return(c.createElement("tbody",{className:"reactable-pagination"},c.createElement("tr",null,c.createElement("td",{colSpan:this.props.colSpan},t))))}});var k=f.Table=c.createClass({displayName:"Table",translateColumnsArray:function(r){return r.map(function(u,t){if(typeof(u)==="string"){return{key:u,label:u}}else{if(typeof(u.sortable)!=="undefined"){var s=u.sortable===true?"default":u.sortable;this._sortable[u.key]=s}return u}}.bind(this))},parseChildData:function(r){var s=[];if(typeof(r.children)!=="undefined"){c.Children.forEach(r.children,function(u){if(u==null||typeof(u.props)!=="object"){return}var t=u.props.data||{};c.Children.forEach(u.props.children,function(v){if(typeof(v)!=="object"||v==null){return}else{if(typeof(v.props.column)!=="undefined"){var w;if(typeof(v.props.data)!=="undefined"){w=v.props.data}else{if(typeof(v.props.children)!=="undefined"){w=v.props.children}else{console.warn("exports.Td specified without a `data` property or children, ignoring");return}}t[v.props.column]={value:w,props:p(v.props),__reactableMeta:true}}else{console.warn("exports.Td specified without a `column` property, ignoring")}}});s.push({data:t,props:p(u.props),__reactableMeta:true})}.bind(this))}return s},initialize:function(r){this.data=r.data||[];this.data=this.data.concat(this.parseChildData(r));this.initializeSorts(r)},initializeSorts:function(){this._sortable={};for(var t in this.props.sortable){var u=this.props.sortable[t];var s,r;if(u instanceof Object){if(typeof(u.column)!=="undefined"){s=u.column}else{console.warn("Sortable column specified without column name");return}if(typeof(u.sortFunction)==="function"){r=u.sortFunction}else{r="default"}}else{s=u;r="default"}this._sortable[s]=r}},getDefaultProps:function(){var r={sortBy:false,defaultSort:false,itemsPerPage:0};return r},getInitialState:function(){var r={currentPage:0,currentSort:{column:null,direction:1},filter:""};if(this.props.sortBy!==false||this.props.defaultSort!==false){var s=this.props.sortBy||this.props.defaultSort;r.currentSort=this.getCurrentSort(s)}return r},getCurrentSort:function(s){var r,t;if(s instanceof Object){if(typeof(s.column)!=="undefined"){r=s.column}else{console.warn("Default column specified without column name");return}if(typeof(s.direction)!=="undefined"){if(s.direction===1||s.direction==="asc"){t=1}else{if(s.direction===-1||s.direction==="desc"){t=-1}else{console.warn("Invalid default sort specified.  Defaulting to ascending");t=1}}}else{t=1}}else{r=s;t=1}return{column:r,direction:t}},updateCurrentSort:function(r){if(r!==false&&r.column!==this.state.currentSort.column&&r.direction!==this.state.currentSort.direction){this.setState({currentSort:this.getCurrentSort(r)})}},componentWillMount:function(){this.initialize(this.props);this.sortByCurrentSort()},componentWillReceiveProps:function(r){this.initialize(r);this.updateCurrentSort(r.sortBy);this.sortByCurrentSort()},onPageChange:function(r){this.setState({currentPage:r})},filterBy:function(r){this.setState({filter:r})},applyFilter:function(u,t){u=u.toLowerCase();var v=[];for(var s=0;s<t.length;s++){var w=t[s].props.data;for(var r=0;r<this.props.filterable.length;r++){var x=this.props.filterable[r];if(typeof(w[x])!=="undefined"&&a(w,x).toString().toLowerCase().indexOf(u)>-1){v.push(t[s]);break}}}return v},sortByCurrentSort:function(){var r=this.state.currentSort;if(r.column===null){return}this.data.sort(function(v,t){var u=a(v,r.column);u=(u instanceof m)?u.toString():u||"";var s=a(t,r.column);s=(s instanceof m)?s.toString():s||"";if(typeof(this._sortable[r.column])==="undefined"||this._sortable[r.column]==="default"){if(u<s){return -1*r.direction}if(u>s){return 1*r.direction}return 0}else{if(r.direction===1){return this._sortable[r.column](u,s)}else{return this._sortable[r.column](s,u)}}}.bind(this))},onSort:function(s){if(typeof(this._sortable[s])==="undefined"){return}var r=this.state.currentSort;if(r.column===s){r.direction*=-1}else{r.column=s;r.direction=1}this.setState({currentSort:r});this.sortByCurrentSort()},render:function(){var s=[];var v;var z=false;if(this.props.children&&this.props.children.length>0&&this.props.children[0].type.ConvenienceConstructor===g){v=this.props.children[0].getColumns()}else{v=this.props.columns||[]}if(v.length>0){z=true;v=this.translateColumnsArray(v)}if(this.data&&typeof this.data.map==="function"){s=s.concat(this.data.map(function(I,E){var H=I;var G={};if(I.__reactableMeta===true){H=I.data;G=I.props}for(var D in H){if(H.hasOwnProperty(D)){if(z===false){var F={key:D,label:D};if(v.find(function(J){return J.key===F.key})===undefined){v.push(F)}}}}return(c.createElement(n,c.__spread({columns:v,key:E,data:H},G)))}.bind(this)))}if(this.props.sortable===true){for(var w=0;w<v.length;w++){this._sortable[v[w].key]="default"}}var C=false;if(this.props.filterable&&Array.isArray(this.props.filterable)&&this.props.filterable.length>0){C=true}var r=s;if(this.state.filter!==""){r=this.applyFilter(this.state.filter,r)}var t=0;var A=false;var u;var x=this.state.currentPage;var B=r;if(this.props.itemsPerPage>0){t=this.props.itemsPerPage;u=Math.ceil(r.length/t);if(x>u-1){x=u-1}A=true;B=r.slice(x*t,(x+1)*t)}var y=p(this.props);return c.createElement("table",c.__spread({},y),[(v&&v.length>0?c.createElement(g,{columns:v,filtering:C,onFilter:this.filterBy,filterPlaceholder:this.props.filterPlaceholder,currentFilter:this.state.filter,sort:this.state.currentSort,sortableColumns:this._sortable,onSort:this.onSort,key:"thead"}):null),c.createElement("tbody",{className:"reactable-data",key:"tbody"},B),(A===true?c.createElement(b,{colSpan:v.length,numPages:u,currentPage:x,onPageChange:this.onPageChange,key:"paginator"}):null)])}});function e(t){var s=[];for(var r in t){s[r]=t}return s}function p(r){r=r||{};var t={};for(var s in r){if(!(s in j)){t[s]=r[s]}}return t}function a(r,s){var t;if(typeof(r)!=="undefined"&&r!==null&&r.__reactableMeta===true){t=r.data[s]}else{t=r[s]}if(typeof(t)!=="undefined"&&t!==null&&t.__reactableMeta===true){t=(typeof(t.props.value)!=="undefined"&&t.props.value!==null)?t.props.value:t.value}return(o(t)?t:"")}var j={columns:true,sortable:true,filterable:true,sortBy:true,defaultSort:true,itemsPerPage:true,childNode:true,data:true,children:true};return f}));