(function(){var d,a,j,e,h,k,n,o,l,s,f,b,i,v,q,t,g,r,u,p,m={}.hasOwnProperty,c=[].indexOf||function(y){for(var x=0,w=this.length;x<w;x++){if(x in this&&this[x]===y){return x}}return -1};o={is_unordered:false,is_counting:false,is_exclusive:false,is_solitary:false,prevent_default:false,prevent_repeat:false};u=["meta","alt","option","ctrl","shift","cmd"];g="ctrl";window.keypress={};keypress.debug=false;d=(function(){function w(z){var y,x;for(y in z){if(!m.call(z,y)){continue}x=z[y];if(x!==false){this[y]=x}}this.keys=this.keys||[];this.count=this.count||0}w.prototype.allows_key_repeat=function(){return !this.prevent_repeat&&typeof this.on_keydown==="function"};w.prototype.reset=function(){this.count=0;return this.keyup_fired=null};return w})();keypress.Listener=(function(){function w(x,B){var y,A,z,C=this;this.should_suppress_event_defaults=false;this.should_force_event_defaults=false;this.sequence_delay=800;this._registered_combos=[];this._keys_down=[];this._active_combos=[];this._sequence=[];this._sequence_timer=null;this._prevent_capture=false;this._defaults=B||{};for(A in o){if(!m.call(o,A)){continue}z=o[A];this._defaults[A]=this._defaults[A]||z}x=x||document.body;y=function(F,E,D){if(F.addEventListener){return F.addEventListener(E,D)}else{if(F.attachEvent){return F.attachEvent("on"+E,D)}}};y(x,"keydown",function(D){D=D||window.event;C._receive_input(D,true);return C._bug_catcher(D)});y(x,"keyup",function(D){D=D||window.event;return C._receive_input(D,false)});y(window,"blur",function(){var E,G,D,F;F=C._keys_down;for(G=0,D=F.length;G<D;G++){E=F[G];C._key_up(E,{})}return C._keys_down=[]})}w.prototype._bug_catcher=function(y){var x;if(g==="cmd"&&c.call(this._keys_down,"cmd")>=0&&((x=h(y.keyCode))!=="cmd"&&x!=="shift"&&x!=="alt"&&x!=="caps"&&x!=="tab")){return this._receive_input(y,false)}};w.prototype._cmd_bug_check=function(x){if(g==="cmd"&&c.call(this._keys_down,"cmd")>=0&&c.call(x,"cmd")<0){return false}return true};w.prototype._prevent_default=function(y,x){if((x||this.should_suppress_event_defaults)&&!this.should_force_event_defaults){if(y.preventDefault){y.preventDefault()}else{y.returnValue=false}if(y.stopPropagation){return y.stopPropagation()}}};w.prototype._get_active_combos=function(x){var A,y,z=this;A=[];y=l(this._keys_down,function(B){return B!==x});y.push(x);this._match_combo_arrays(y,function(B){if(z._cmd_bug_check(B.keys)){return A.push(B)}});this._fuzzy_match_combo_arrays(y,function(B){if(c.call(A,B)>=0){return}if(!(B.is_solitary||!z._cmd_bug_check(B.keys))){return A.push(B)}});return A};w.prototype._get_potential_combos=function(z){var C,x,B,y,A;x=[];A=this._registered_combos;for(B=0,y=A.length;B<y;B++){C=A[B];if(C.is_sequence){continue}if(c.call(C.keys,z)>=0&&this._cmd_bug_check(C.keys)){x.push(C)}}return x};w.prototype._add_to_active_combos=function(y){var M,z,B,L,J,H,C,I,F,E,A,K,x,G,D;I=false;C=true;L=false;if(c.call(this._active_combos,y)>=0){return true}else{if(this._active_combos.length){for(H=F=0,G=this._active_combos.length;0<=G?F<G:F>G;H=0<=G?++F:--F){M=this._active_combos[H];if(!(M&&M.is_exclusive&&y.is_exclusive)){continue}B=M.keys;if(!I){for(E=0,K=B.length;E<K;E++){z=B[E];I=true;if(c.call(y.keys,z)<0){I=false;break}}}if(C&&!I){D=y.keys;for(A=0,x=D.length;A<x;A++){J=D[A];C=false;if(c.call(B,J)<0){C=true;break}}}if(I){if(L){M=this._active_combos.splice(H,1)[0];if(M!=null){M.reset()}}else{M=this._active_combos.splice(H,1,y)[0];if(M!=null){M.reset()}L=true}C=false}}}}if(C){this._active_combos.unshift(y)}return I||C};w.prototype._remove_from_active_combos=function(B){var y,x,A,z;for(x=A=0,z=this._active_combos.length;0<=z?A<z:A>z;x=0<=z?++A:--A){y=this._active_combos[x];if(y===B){B=this._active_combos.splice(x,1)[0];B.reset();break}}};w.prototype._get_possible_sequences=function(){var x,G,E,I,H,B,D,C,z,J,F,A,y;H=[];F=this._registered_combos;for(D=0,J=F.length;D<J;D++){x=F[D];for(E=C=1,A=this._sequence.length;1<=A?C<=A:C>=A;E=1<=A?++C:--C){B=this._sequence.slice(-E);if(!x.is_sequence){continue}if(c.call(x.keys,"shift")<0){B=l(B,function(K){return K!=="shift"});if(!B.length){continue}}for(G=z=0,y=B.length;0<=y?z<y:z>y;G=0<=y?++z:--z){if(x.keys[G]===B[G]){I=true}else{I=false;break}}if(I){H.push(x)}}}return H};w.prototype._add_key_to_sequence=function(y,C){var B,z,A,x;this._sequence.push(y);z=this._get_possible_sequences();if(z.length){for(A=0,x=z.length;A<x;A++){B=z[A];this._prevent_default(C,B.prevent_default)}if(this._sequence_timer){clearTimeout(this._sequence_timer)}if(this.sequence_delay>-1){this._sequence_timer=setTimeout(function(){return this._sequence=[]},this.sequence_delay)}}else{this._sequence=[]}};w.prototype._get_sequence=function(K){var x,G,E,H,I,C,D,B,z,J,F,A,y;F=this._registered_combos;for(D=0,J=F.length;D<J;D++){x=F[D];if(!x.is_sequence){continue}for(E=B=1,A=this._sequence.length;1<=A?B<=A:B>=A;E=1<=A?++B:--B){C=(l(this._sequence,function(L){if(c.call(x.keys,"shift")>=0){return true}return L!=="shift"})).slice(-E);if(x.keys.length!==C.length){continue}for(G=z=0,y=C.length;0<=y?z<y:z>y;G=0<=y?++z:--z){I=C[G];if(c.call(x.keys,"shift")<0?I==="shift":void 0){continue}if(K==="shift"&&c.call(x.keys,"shift")<0){continue}if(x.keys[G]===I){H=true}else{H=false;break}}}if(H){return x}}return false};w.prototype._receive_input=function(y,z){var x;if(this._prevent_capture){if(this._keys_down.length){this._keys_down=[]}return}x=h(y.keyCode);if(!z&&!this._keys_down.length&&(x==="alt"||x===g)){return}if(!x){return}if(z){return this._key_down(x,y)}else{return this._key_up(x,y)}};w.prototype._fire=function(z,A,x,y){if(typeof A["on_"+z]==="function"){this._prevent_default(x,A["on_"+z].call(A["this"],x,A.count,y)!==true)}if(z==="release"){A.count=0}if(z==="keyup"){return A.keyup_fired=true}};w.prototype._match_combo_arrays=function(y,A){var x,C,z,B;B=this._registered_combos;for(C=0,z=B.length;C<z;C++){x=B[C];if((!x.is_unordered&&e(y,x.keys))||(x.is_unordered&&j(y,x.keys))){A(x)}}};w.prototype._fuzzy_match_combo_arrays=function(y,A){var x,C,z,B;B=this._registered_combos;for(C=0,z=B.length;C<z;C++){x=B[C];if((!x.is_unordered&&f(x.keys,y))||(x.is_unordered&&s(x.keys,y))){A(x)}}};w.prototype._keys_remain=function(C){var y,B,A,x,z;z=C.keys;for(A=0,x=z.length;A<x;A++){y=z[A];if(c.call(this._keys_down,y)>=0){B=true;break}}return B};w.prototype._key_down=function(L,H){var A,N,x,F,I,y,K,G,M,D,C,B,J,z,E;M=k(L,H);if(M){L=M}this._add_key_to_sequence(L,H);G=this._get_sequence(L);if(G){this._fire("keydown",G,H)}for(I in r){x=r[I];if(!H[x]){continue}if(I===L||c.call(this._keys_down,I)>=0){continue}this._keys_down.push(I)}for(I in r){x=r[I];if(I===L){continue}if(c.call(this._keys_down,I)>=0&&!H[x]){if(I==="cmd"&&g!=="cmd"){continue}for(F=D=0,E=this._keys_down.length;0<=E?D<E:D>E;F=0<=E?++D:--D){if(this._keys_down[F]===I){this._keys_down.splice(F,1)}}}}N=this._get_active_combos(L);K=this._get_potential_combos(L);for(C=0,J=N.length;C<J;C++){A=N[C];this._handle_combo_down(A,K,L,H)}if(K.length){for(B=0,z=K.length;B<z;B++){y=K[B];this._prevent_default(H,y.prevent_default)}}if(c.call(this._keys_down,L)<0){this._keys_down.push(L)}};w.prototype._handle_combo_down=function(y,E,F,B){var A,x,C,G,z,D;if(c.call(y.keys,F)<0){return false}this._prevent_default(B,y&&y.prevent_default);A=false;if(c.call(this._keys_down,F)>=0){A=true;if(!y.allows_key_repeat()){return false}}G=this._add_to_active_combos(y,F);y.keyup_fired=false;x=false;if(y.is_exclusive){for(z=0,D=E.length;z<D;z++){C=E[z];if(C.is_exclusive&&C.keys.length>y.keys.length){x=true;break}}}if(!x){if(y.is_counting&&typeof y.on_keydown==="function"){y.count+=1}if(G){return this._fire("keydown",y,B,A)}}};w.prototype._key_up=function(R,M){var J,I,N,E,L,H,K,F,B,z,y,x,O,Q,P,G,D,C,A;F=R;K=k(R,M);if(K){R=K}K=q[F];if(M.shiftKey){if(!(K&&c.call(this._keys_down,K)>=0)){R=F}}else{if(!(F&&c.call(this._keys_down,F)>=0)){R=K}}H=this._get_sequence(R);if(H){this._fire("keyup",H,M)}if(c.call(this._keys_down,R)<0){return false}for(L=B=0,G=this._keys_down.length;0<=G?B<G:B>G;L=0<=G?++B:--B){if((D=this._keys_down[L])===R||D===K||D===F){this._keys_down.splice(L,1);break}}I=this._active_combos.length;E=[];C=this._active_combos;for(z=0,O=C.length;z<O;z++){J=C[z];if(c.call(J.keys,R)>=0){E.push(J)}}for(y=0,Q=E.length;y<Q;y++){N=E[y];this._handle_combo_up(N,M,R)}if(I>1){A=this._active_combos;for(x=0,P=A.length;x<P;x++){J=A[x];if(J===void 0||c.call(E,J)>=0){continue}if(!this._keys_remain(J)){this._remove_from_active_combos(J)}}}};w.prototype._handle_combo_up=function(B,A,x){var y,z;this._prevent_default(A,B&&B.prevent_default);z=this._keys_remain(B);if(!B.keyup_fired){y=this._keys_down.slice();y.push(x);if(!B.is_solitary||j(y,B.keys)){this._fire("keyup",B,A);if(B.is_counting&&typeof B.on_keyup==="function"&&typeof B.on_keydown!=="function"){B.count+=1}}}if(!z){this._fire("release",B,A);this._remove_from_active_combos(B)}};w.prototype.simple_combo=function(x,y){return this.register_combo({keys:x,on_keydown:y})};w.prototype.counting_combo=function(y,x){return this.register_combo({keys:y,is_counting:true,is_unordered:false,on_keydown:x})};w.prototype.sequence_combo=function(x,y){return this.register_combo({keys:x,on_keydown:y,is_sequence:true})};w.prototype.register_combo=function(B){var A,z,y,x;if(typeof B.keys==="string"){B.keys=B.keys.split(" ")}x=this._defaults;for(z in x){if(!m.call(x,z)){continue}y=x[z];if(B[z]===void 0){B[z]=y}}A=new d(B);if(p(A)){this._registered_combos.push(A);return true}};w.prototype.register_many=function(B){var A,z,y,x;x=[];for(z=0,y=B.length;z<y;z++){A=B[z];x.push(this.register_combo(A))}return x};w.prototype.unregister_combo=function(z){var C,x,B,y,A,D=this;if(!z){return false}x=function(I){var F,H,G,E;E=[];for(F=H=0,G=D._registered_combos.length;0<=G?H<G:H>G;F=0<=G?++H:--H){if(I===D._registered_combos[F]){D._registered_combos.splice(F,1);break}else{E.push(void 0)}}return E};if(z.keys){return x(z)}else{A=this._registered_combos;for(B=0,y=A.length;B<y;B++){C=A[B];if(!C){continue}}if(typeof z==="string"){z=z.split(" ")}if((C.is_unordered&&j(z,C.keys))||(!C.is_unordered&&e(z,C.keys))){return x(C)}}};w.prototype.unregister_many=function(B){var A,z,y,x;x=[];for(z=0,y=B.length;z<y;z++){A=B[z];x.push(this.unregister_combo(A))}return x};w.prototype.get_registered_combos=function(){return this._registered_combos};w.prototype.reset=function(){return this._registered_combos=[]};w.prototype.listen=function(){return this._prevent_capture=false};w.prototype.stop_listening=function(){return this._prevent_capture=true};w.prototype.get_meta_key=function(){return g};return w})();n=function(){if(navigator.userAgent.indexOf("Mac OS X")!==-1){g="cmd"}};a=function(){if(navigator.userAgent.indexOf("Opera")!==-1){v["17"]="cmd"}};h=function(w){return v[w]};l=function(y,x){var w;if(y.filter){return y.filter(x)}else{return(function(){var B,A,z;z=[];for(B=0,A=y.length;B<A;B++){w=y[B];if(x(w)){z.push(w)}}return z})()}};j=function(y,w){var z,A,x;if(y.length!==w.length){return false}for(A=0,x=y.length;A<x;A++){z=y[A];if(c.call(w,z)>=0){continue}return false}return true};e=function(x,w){var y,A,z;if(x.length!==w.length){return false}for(y=A=0,z=x.length;0<=z?A<z:A>z;y=0<=z?++A:--A){if(x[y]!==w[y]){return false}}return true};s=function(y,w){var z,A,x;for(A=0,x=y.length;A<x;A++){z=y[A];if(c.call(w,z)<0){return false}}return true};f=function(y,w){var z,B,A,C,x;A=0;for(C=0,x=y.length;C<x;C++){B=y[C];z=w.indexOf(B);if(z>=A){A=z}else{return false}}return true};t=function(){if(keypress.debug){return console.log.apply(console,arguments)}};b=function(x){var y,z,w;y=false;for(w in v){z=v[w];if(x===z){y=true;break}}if(!y){for(w in q){z=q[w];if(x===z){y=true;break}}}return y};p=function(y){var F,E,L,G,I,K,x,J,C,B,z,H,w,D,A;x=true;if(!y.keys.length){t("You're trying to bind a combo with no keys:",y)}for(E=C=0,D=y.keys.length;0<=D?C<D:C>D;E=0<=D?++C:--C){L=y.keys[E];F=i[L];if(F){L=y.keys[E]=F}if(L==="meta"){y.keys.splice(E,1,g)}if(L==="cmd"){t('Warning: use the "meta" key rather than "cmd" for Windows compatibility')}}A=y.keys;for(B=0,H=A.length;B<H;B++){L=A[B];if(!b(L)){t('Do not recognize the key "'+L+'"');x=false}}if(c.call(y.keys,"meta")>=0||c.call(y.keys,"cmd")>=0){I=y.keys.slice();for(z=0,w=u.length;z<w;z++){G=u[z];if((E=I.indexOf(G))>-1){I.splice(E,1)}}if(I.length>1){t("META and CMD key combos cannot have more than 1 non-modifier keys",y,I);x=false}}for(K in y){J=y[K];if(o[K]==="undefined"){t("The property "+K+" is not a valid combo property. Your combo has still been registered.")}}return x};k=function(x,y){var w;if(!y.shiftKey){return false}w=q[x];if(w!=null){return w}return false};r={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"};i={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"};q={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")"};v={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num"};n();a()}).call(this);