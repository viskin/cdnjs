/*!
 * jQuery Plugin: Are-You-Sure (Dirty Form Detection)
 * https://github.com/codedance/jquery.AreYouSure/
 *
 * Copyright (c) 2012-2013, Chris Dance and PaperCut Software http://www.papercut.com/
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Author:   chris.dance@papercut.com
 * Version:  1.5.0
 * Date:     15th Nov 2013
 */
(function(a){a.fn.areYouSure=function(f){var g=a.extend({message:"You have unsaved changes!",dirtyClass:"dirty",change:null,silent:false,fieldSelector:"select,textarea,input[type='text'],input[type='password'],input[type='checkbox'],input[type='radio'],input[type='hidden'],input[type='color'],input[type='date'],input[type='datetime'],input[type='datetime-local'],input[type='email'],input[type='month'],input[type='number'],input[type='range'],input[type='search'],input[type='tel'],input[type='time'],input[type='url'],input[type='week']"},f);var e=function(k){if(k.hasClass("ays-ignore")||k.hasClass("aysIgnore")||k.attr("data-ays-ignore")||k.attr("name")===undefined){return null}if(k.is(":disabled")){return"ays-disabled"}var l;var j=k.attr("type");if(k.is("select")){j="select"}switch(j){case"checkbox":case"radio":l=k.is(":checked");break;case"select":l="";k.children("option").each(function(n){var m=a(this);if(m.is(":selected")){l+=m.val()}});break;default:l=k.val()}return l};var i=function(){var j=a(this);j.data("ays-orig",e(j))};var c=function(j){var l=function(n){return(e(n)!=n.data("ays-orig"))};var m=false;var k=a(this).parents("form");if(l(a(j.target))){m=true}if(!m){k.find(g.fieldSelector).each(function(){$field=a(this);if(l($field)){m=true;return false}})}h(k,m)};var h=function(j,k){var l=k!=j.hasClass(g.dirtyClass);j.toggleClass(g.dirtyClass,k);if(l){if(g.change){g.change.call(j,j)}if(k){j.trigger("dirty.areYouSure",[j])}if(!k){j.trigger("clean.areYouSure",[j])}j.trigger("change.areYouSure",[j])}};var b=function(){var k=a(this);var j=k.find(g.fieldSelector).not("[ays-orig]");a(j).each(i);a(j).bind("change keyup",c)};var d=function(){var j=a(this);var k=j.find(g.fieldSelector);a(k).each(i);h(j,false)};if(!g.silent){a(window).bind("beforeunload",function(){$dirtyForms=a("form").filter("."+g.dirtyClass);if($dirtyForms.length>0){return g.message}})}return this.each(function(l){if(!a(this).is("form")){return}var k=a(this);k.submit(function(){k.removeClass(g.dirtyClass)});k.bind("reset",function(){h(k,false)});k.bind("rescan.areYouSure",b);k.bind("reinitialize.areYouSure",d);var j=k.find(g.fieldSelector);a(j).each(i);a(j).bind("change keyup",c)})}})(jQuery);