function splitLines(a){return a.split(/\r\n?|\n/)}var countColumn=function(d,b,f,g,c){if(b==null){b=d.search(/[^\s\u00a0]/);if(b==-1){b=d.length}}for(var e=g||0,h=c||0;;){var a=d.indexOf("\t",e);if(a<0||a>=b){return h+(b-e)}h+=a-e;h+=f-(h%f);e=a+1}};function StringStream(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0}StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(a){var c=this.string.charAt(this.pos);if(typeof a=="string"){var b=c==a}else{var b=c&&(a.test?a.test(c):a(c))}if(b){++this.pos;return c}},eatWhile:function(a){var b=this.pos;while(this.eat(a)){}return this.pos>b},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1){this.pos=b;return true}},backUp:function(a){this.pos-=a},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},match:function(e,b,a){if(typeof e=="string"){var f=function(g){return a?g.toLowerCase():g};var d=this.string.substr(this.pos,e.length);if(f(d)==f(e)){if(b!==false){this.pos+=e.length}return true}}else{var c=this.string.slice(this.pos).match(e);if(c&&c.index>0){return null}if(c&&b!==false){this.pos+=c[0].length}return c}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(b,a){this.lineStart+=b;try{return a()}finally{this.lineStart-=b}}};exports.StringStream=StringStream;exports.startState=function(c,b,a){return c.startState?c.startState(b,a):true};var modes=exports.modes={},mimeModes=exports.mimeModes={};exports.defineMode=function(a,b){if(arguments.length>2){b.dependencies=Array.prototype.slice.call(arguments,2)}modes[a]=b};exports.defineMIME=function(b,a){mimeModes[b]=a};exports.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});exports.defineMIME("text/plain","null");exports.resolveMode=function(a){if(typeof a=="string"&&mimeModes.hasOwnProperty(a)){a=mimeModes[a]}else{if(a&&typeof a.name=="string"&&mimeModes.hasOwnProperty(a.name)){a=mimeModes[a.name]}}if(typeof a=="string"){return{name:a}}else{return a||{name:"null"}}};function copyObj(c,b,a){if(!b){b={}}for(var d in c){if(c.hasOwnProperty(d)&&(a!==false||!b.hasOwnProperty(d))){b[d]=c[d]}}return b}var modeExtensions=exports.modeExtensions={};exports.extendMode=function(c,b){var a=modeExtensions.hasOwnProperty(c)?modeExtensions[c]:(modeExtensions[c]={});copyObj(b,a)};exports.getMode=function(b,a){var a=exports.resolveMode(a);var d=modes[a.name];if(!d){return exports.getMode(b,"text/plain")}var e=d(b,a);if(modeExtensions.hasOwnProperty(a.name)){var c=modeExtensions[a.name];for(var f in c){if(!c.hasOwnProperty(f)){continue}if(e.hasOwnProperty(f)){e["_"+f]=e[f]}e[f]=c[f]}}e.name=a.name;if(a.helperType){e.helperType=a.helperType}if(a.modeProps){for(var f in a.modeProps){e[f]=a.modeProps[f]}}return e};exports.registerHelper=exports.registerGlobalHelper=Math.min;exports.runMode=function(g,c,k,l){var f=exports.getMode({indentUnit:2},c);var m=splitLines(g),b=(l&&l.state)||exports.startState(f);for(var d=0,h=m.length;d<h;++d){if(d){k("\n")}var j=new exports.StringStream(m[d]);if(!j.string&&f.blankLine){f.blankLine(b)}while(!j.eol()){var a=f.token(j,b);k(j.current(),a,d,j.start,b);j.start=j.pos}}};require.cache[require.resolve("../../lib/codemirror")]=require.cache[require.resolve("./runmode.node")];require.cache[require.resolve("../../addon/runmode/runmode")]=require.cache[require.resolve("./runmode.node")];