!function(){var e=function(t){return e.utils.extend(e.plugins,(new e.Storage).init(t))};e.version="0.3.4",e.utils={extend:function(){for(var e="object"==typeof arguments[0]?arguments[0]:{},t=1;t<arguments.length;t++)if(arguments[t]&&"object"==typeof arguments[t])for(var n in arguments[t])e[n]=arguments[t][n];return e},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},registerPlugin:function(t){e.plugins=this.extend(t,e.plugins)}},e.plugins={},e.options=e.utils.extend({namespace:"b45i1",storage:null,storages:["local","cookie","session","memory"],expireDays:365},window.Basil?window.Basil.options:{}),e.Storage=function(){var t="b45i1"+(Math.random()+1).toString(36).substring(7),n={},i=function(t){return t?e.utils.isArray(t)?t:[t]:null},s=function(t,n){var i="";if("string"==typeof n)i=t+":"+n;else if(e.utils.isArray(n)){i=t;for(var s=0;s<n.length;s++)n[s]&&(i+=":"+n[s])}return i},r=function(e,t){return e?t.replace(new RegExp("^"+e+":"),""):t},o=function(e){return JSON.stringify(e)},a=function(e){return JSON.parse(e)};return n.local={engine:window.localStorage,check:function(){try{this.engine.setItem(t,!0),this.engine.removeItem(t)}catch(e){return!1}return!0},set:function(e,t){e&&this.engine.setItem(e,t)},get:function(e){return this.engine.getItem(e)},remove:function(e){this.engine.removeItem(e)},reset:function(e){for(var t,n=0;n<this.engine.length;n++)t=this.engine.key(n),e&&0!==t.indexOf(e)||(this.remove(t),n--)},keys:function(e){for(var t,n=[],i=0;i<this.engine.length;i++)t=this.engine.key(i),e&&0!==t.indexOf(e)||n.push(r(e,t));return n}},n.session=e.utils.extend({},n.local,{engine:window.sessionStorage}),n.memory={_hash:{},check:function(){return!0},set:function(e,t){e&&(this._hash[e]=t)},get:function(e){return this._hash[e]||null},remove:function(e){delete this._hash[e]},reset:function(e){for(var t in this._hash)e&&0!==t.indexOf(e)||this.remove(t)},keys:function(e){var t=[];for(var n in this._hash)e&&0!==n.indexOf(e)||t.push(r(e,n));return t}},n.cookie={check:function(){return navigator.cookieEnabled},set:function(e,t,n){if(e){n=n||{};var i=e+"="+t;if(n.expireDays){var s=new Date;s.setTime(s.getTime()+24*n.expireDays*60*60*1e3),i+="; expires="+s.toGMTString()}n.domain&&(i+="; domain="+n.domain),document.cookie=i+"; path=/"}},get:function(e){for(var t,n=document.cookie.split(";"),i=0;i<n.length;i++)if(t=n[i].replace(/^\s*/,""),0===t.indexOf(e+"="))return t.substring(e.length+1,t.length);return null},remove:function(e){if(e){this.set(e,"",{expireDays:-1});for(var t=document.domain.split("."),n=t.length-1;n>0;n--)this.set(e,"",{expireDays:-1,domain:"."+t.slice(-n).join(".")})}},reset:function(e){for(var t,n,i=document.cookie.split(";"),s=0;s<i.length;s++)t=i[s].replace(/^\s*/,""),n=t.substr(0,t.indexOf("=")),e&&0!==n.indexOf(e)||this.remove(n)},keys:function(e){for(var t,n,i=[],s=document.cookie.split(";"),o=0;o<s.length;o++)t=s[o].replace(/^\s*/,""),n=t.substr(0,t.indexOf("=")),e&&0!==n.indexOf(e)||i.push(r(e,n));return i}},{init:function(t){this.options=e.utils.extend({},e.options,t),this.supportedStorages={};for(var i,s=0;s<this.options.storages.length;s++)i=this.options.storages[s],n.hasOwnProperty(i)&&(this.supportedStorages[i]=n[i]);return this.defaultStorage=this.check(this.options.storage)?this.options.storage:this.detect(),this},detect:function(){for(var e in this.supportedStorages)if(this.check(e))return e;return null},check:function(e){return e=e||this.defaultStorage,this.supportedStorages.hasOwnProperty(e)?this.supportedStorages[e].check():!1},set:function(t,r,a){if(a=a||{},t=s(a.namespace||this.options.namespace,t)){r=o(r),a=e.utils.extend({expireDays:this.options.expireDays},a);for(var u,c=i(a.storages)||[this.defaultStorage],h=0;h<c.length;h++)u=c[h],this.check(u)&&n[u].set(t,r,a)}},get:function(e,t){if(t=t||{},!(e=s(t.namespace||this.options.namespace,e)))return null;for(var r,o=null,u=i(t.storages)||[this.defaultStorage],c=0;null===o&&c<u.length;c++)r=u[c],this.check(r)&&(o=a(n[r].get(e)));return o},remove:function(e,t){if(t=t||{},!(e=s(t.namespace||this.options.namespace,e)))return null;for(var r,o=i(t.storages)||[this.defaultStorage],a=0;a<o.length;a++)r=o[a],this.check(r)&&n[r].remove(e)},reset:function(e){e=e||{};for(var t,s=i(e.storages)||[this.defaultStorage],r=e.namespace||this.options.namespace,o=0;o<s.length;o++)t=s[o],this.check(t)&&n[t].reset(r)},keys:function(e){e=e||{};var t=[];for(var n in this.keysMap(e))t.push(n);return t},keysMap:function(e){e=e||{};for(var t,s,r={},o=i(e.storages)||this.options.storages,a=e.namespace||this.options.namespace,u=0;u<o.length;u++)if(t=o[u],this.check(t)){s=n[t].keys(a);for(var c,h=0;h<s.length;h++)c=s[h],r[c]=r[c]instanceof Array?r[c]:[],r[c].push(t)}return r},memory:n.memory,cookie:n.cookie,localStorage:n.local,sessionStorage:n.session}},window.Basil=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports&&(module.exports=e)}();