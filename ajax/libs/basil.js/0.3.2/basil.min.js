!function(){var e=function(t){return(new e.Storage).init(t)};e.version="0.3.2",e.utils={extend:function(){for(var e="object"==typeof arguments[0]?arguments[0]:{},t=1;t<arguments.length;t++)if(arguments[t]&&"object"==typeof arguments[t])for(var n in arguments[t])e[n]=arguments[t][n];return e}},e.options=e.utils.extend({namespace:"b45i1",storage:null,storages:["local","cookie","session","memory"],expireDays:365},window.Basil?window.Basil.options:{}),e.Storage=function(){var t="b45i1"+(Math.random()+1).toString(36).substring(7),n={},i=function(e){return e?"[object Array]"===Object.prototype.toString.call(e)?e:[e]:null},o=function(e,t){var n="";if("string"==typeof t)n=e+":"+t;else if(t instanceof Array){n=e;for(var i=0;i<t.length;i++)t[i]&&(n+=":"+t[i])}return n},r=function(e){return JSON.stringify(e)},s=function(e){return JSON.parse(e)};return n.local={engine:window.localStorage,check:function(){try{this.engine.setItem(t,!0),this.engine.removeItem(t)}catch(e){return!1}return!0},set:function(e,t){e&&this.engine.setItem(e,t)},get:function(e){return this.engine.getItem(e)},remove:function(e){this.engine.removeItem(e)},reset:function(e){for(var t,n=0;n<this.engine.length;n++)t=this.engine.key(n),0===t.indexOf(e)&&(this.remove(t),n--)}},n.session=e.utils.extend({},n.local,{engine:window.sessionStorage}),n.memory={_hash:{},check:function(){return!0},set:function(e,t){e&&(this._hash[e]=t)},get:function(e){return this._hash[e]||null},remove:function(e){delete this._hash[e]},reset:function(e){for(var t in this._hash)0===t.indexOf(e)&&this.remove(t)}},n.cookie={check:function(){return navigator.cookieEnabled},set:function(e,t,n){if(e){n=n||{};var i=e+"="+t;if(n.expireDays){var o=new Date;o.setTime(o.getTime()+24*n.expireDays*60*60*1e3),i+="; expires="+o.toGMTString()}n.domain&&(i+="; domain="+n.domain),document.cookie=i+"; path=/"}},get:function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].replace(/^\s*/,"");if(0===i.indexOf(e+"="))return i.substring(e.length+1,i.length)}return null},remove:function(e){if(e){this.set(e,"",{expireDays:-1});for(var t=document.domain.split("."),n=t.length-1;n>0;n--)this.set(e,"",{expireDays:-1,domain:"."+t.slice(-n).join(".")})}},reset:function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].replace(/^\s*/,""),o=i.substr(0,i.indexOf("="));0===o.indexOf(e)&&this.remove(o)}}},{init:function(t){this.options=e.utils.extend({},e.options,t),this.supportedStorages={};for(var i,o=0;o<this.options.storages.length;o++)i=this.options.storages[o],n.hasOwnProperty(i)&&(this.supportedStorages[i]=n[i]);return this.defaultStorage=this.check(this.options.storage)?this.options.storage:this.detect(),this},detect:function(){for(var e in this.supportedStorages)if(this.check(e))return e;return null},check:function(e){return e=e||this.defaultStorage,this.supportedStorages.hasOwnProperty(e)?this.supportedStorages[e].check():!1},set:function(t,s,a){if(t=o(this.options.namespace,t)){s=r(s),a=e.utils.extend({expireDays:this.options.expireDays},a);for(var u=i(a.storages)||[this.defaultStorage],c=0;c<u.length;c++)this.check(u[c])&&n[u[c]].set(t,s,a)}},get:function(e,t){if(!(e=o(this.options.namespace,e)))return null;t=t||{};for(var r=null,a=i(t.storages)||[this.defaultStorage],u=0;null===r&&u<a.length;u++)this.check(a[u])&&(r=s(n[a[u]].get(e)));return r},remove:function(e,t){if(!(e=o(this.options.namespace,e)))return null;t=t||{};for(var r=i(t.storages)||[this.defaultStorage],s=0;s<r.length;s++)this.check(r[s])&&n[r[s]].remove(e)},reset:function(e){e=e||{};for(var t=i(e.storages)||[this.defaultStorage],o=0;o<t.length;o++)this.check(t[o])&&n[t[o]].reset(this.options.namespace)},cookie:n.cookie,localStorage:n.local,sessionStorage:n.session}},window.Basil=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports&&(module.exports=e)}();