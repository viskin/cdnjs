/*! Jets.js - v0.2.0 - 2015-09-15
* http://NeXTs.github.com/Jets.js/
* Copyright (c) 2015 Denis Lukov; Licensed MIT */

(function(f,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):this[f]=b()})("Jets",function(){function f(b){if(!(this instanceof f))return new f(b);var a=this;["searchTag","contentTag"].forEach(function(d){var c=d.replace("Tag","");a[c+"_tag"]=document.querySelector(b[d]);a[c+"_param"]=b[d];if(!a[c+"_tag"])throw Error("Error! Could not find "+d+" element");});var c={searchSelector:"*AND"};a.options={};["columns","addImportant","searchSelector",
"manualContentHandling"].forEach(function(d){a.options[d]=b[d]||c[d]});if(1<this.options.searchSelector.length){var g=a.options.searchSelector.trim();a.options.searchSelector=g.substr(0,1);a.options.searchSelectorMode=g.substr(1).toUpperCase()}var e,h=function(){e!=(e=a.search_tag.value)&&a._applyCSS()};a._onSearch=function(a){if("keydown"==a.type)return setTimeout(h,0);h()};a.destroy=function(){a._processEventListeners("remove");a._destroy()};a._processEventListeners("add");a._addStyleTag();a._setJets();
a._applyCSS()}f.prototype={constructor:f,_processEventListeners:function(b){["input","keydown","change"].forEach(function(a){this.search_tag[b+"EventListener"](a,this._onSearch)}.bind(this))},_applyCSS:function(){for(var b=this.search_tag.value.trim().toLowerCase().replace(/\s\s+/g," "),a=this.options.searchSelectorMode?b.split(" ").filter(function(a,b,c){return c.indexOf(a)==b}):[b],c="AND"==this.options.searchSelectorMode,g=[],e=0,h=a.length;e<h;e++)g.push((c?this.content_param+">":"")+":not([data-jets"+
this.options.searchSelector+'="'+a[e]+'"])');a=(c?"":this.content_param+">")+g.join(c?",":"")+"{display:none"+(this.options.addImportant?"!important":"")+"}";this.styleTag.innerHTML=b.length?a:""},_addStyleTag:function(){this.styleTag=document.createElement("style");document.head.appendChild(this.styleTag)},_getText:function(b){return b&&(b.innerText||b.textContent)||""},_getContentTags:function(b){return Array.prototype.slice.call(this.content_tag.querySelectorAll(b||":scope > *"))},_setJets:function(b,
a){for(var c=this,g=c._getContentTags(a?"":b),e,h=0,d;d=g[h];h++)if(!d.hasAttribute("data-jets")||a)e=this.options.manualContentHandling?this.options.manualContentHandling(d):c.options.columns&&c.options.columns.length?c.options.columns.map(function(a){return c._getText(d.children[a])}).join(" "):c._getText(d),d.setAttribute("data-jets",e.trim().replace(/\s+/g," ").toLowerCase())},update:function(b){this._setJets(":scope > :not([data-jets])",b)},_destroy:function(){this.styleTag.parentNode&&document.head.removeChild(this.styleTag);
for(var b=this._getContentTags(),a=0,c;c=b[a];a++)c.removeAttribute("data-jets")}};(function(b,a){try{b.querySelector(":scope body")}catch(c){["querySelector","querySelectorAll"].forEach(function(c){var e=a[c];a[c]=function(a){if(/(^|,)\s*:scope/.test(a)){var d=this.id;this.id="ID_"+Date.now();a=a.replace(/((^|,)\s*):scope/g,"$1#"+this.id);a=b[c](a);this.id=d;return a}return e.call(this,a)}})}})(window.document,Element.prototype);return f});