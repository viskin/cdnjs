(function($){var englishLanguageDefaults={name:"English (United States)",nameEnglish:"English (United States)",isRTL:false,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(j){var ending=["st","nd","rd","th"];return j<11||j>13?ending[Math.min((j-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};$.jgrid=$.jgrid||{};var jgrid=$.jgrid;jgrid.locales=jgrid.locales||{};var locales=jgrid.locales;var COMPONENT_NAMES={GRID_BOX_DIV:0,GRID_OVERLAY_DIV:1,LOADING_DIV:2,DIALOG_ALERT_DIV:3,DIALOG_SEARCH_DIV:4,DIALOG_VIEW_DIV:5,DIALOG_EDIT_DIV:6,DIALOG_DELETE_DIV:7,GRID_VIEW_DIV:8,TITLE_BAR_DIV:9,UPPER_TOOLBAR_DIV:10,TOP_PAGER_DIV:11,HEADER_DIV:12,HEADER_BOX_DIV:13,HEADER_TABLE:14,HEADER_COLS_ROW:15,HEADER_COLS:16,HEADER_ROWS:47,HEADER_TH:48,HEADER_SORTABLE_DIV:49,HEADER_RESIZABLE_SPAN:50,HEADER_SELECT_ALL_ROWS_CHECKBOX:45,SEARCH_TOOLBAR:17,BODY_DIV:18,BODY_SCROLL_FULL_DIV:19,BODY_SCROLL_TOP_DIV:20,BODY_TABLE:21,GRID:21,BODY_COLS_ROW:22,BODY_COLS:23,BODY_DATA_ROWS:24,FOOTER_DIV:25,FOOTER_BOX_DIV:26,FOOTER_TABLE:27,FOOTER_DATA_ROWS:28,BOTTOM_TOOLBAR_DIV:29,FROZEN_HEADER_DIV:30,FROZEN_HEADER_TABLE:31,FROZEN_HEADER_COLS_ROW:32,FROZEN_HEADER_COLS:33,FROZEN_SEARCH_TOOLBAR:34,FROZEN_FOOTER_DIV:35,FROZEN_FOOTER_TABLE:36,FROZEN_FOOTER_DATA_ROWS:37,FROZEN_BODY_DIV:38,FROZEN_BODY_TABLE:39,FROZEN_BODY_COLS_ROW:40,FROZEN_BODY_COLS:41,FROZEN_BODY_DATA_ROWS:42,COLUMN_RESIZER_DIV:43,BOTTOM_PAGER_DIV:44,SEARCH_OPERATION_MENU_UL:46};if(jgrid.defaults==null||$.isEmptyObject(locales)||locales["en-US"]===undefined){if(locales["en-US"]===undefined){$.extend(true,jgrid,{locales:{"en-US":englishLanguageDefaults}})}jgrid.defaults=jgrid.defaults||{};if(jgrid.defaults.locale===undefined){jgrid.defaults.locale="en-US"}}jgrid.defaults=jgrid.defaults||{};var defaults=jgrid.defaults;$.extend(true,jgrid,{version:"4.8.0",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-carat-1-sw",openRtl:"ui-icon-carat-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"ui-state-default fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"ui-resizable-se ui-state-default fa fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"ui-state-default fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"}}},guiStyles:{jQueryUI:{gBox:"ui-widget ui-widget-content ui-corner-all",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-widget ui-widget-content ui-corner-all ui-front",content:"ui-widget-content",hr:"ui-widget-content",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewLabel:"ui-widget-content",viewData:"ui-widget-content",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default test",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",tdData:"ui-widget-content"},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content",top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"}},htmlDecode:function(value){if(value&&(value==="&nbsp;"||value==="&#160;"||(value.length===1&&value.charCodeAt(0)===160))){return""}return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},clearArray:function(ar){while(ar.length>0){ar.pop()}},format:function(format){var args=$.makeArray(arguments).slice(1);if(format==null){format=""}return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})},template:function(format){var args=$.makeArray(arguments).slice(1),j,al=args.length;if(format==null){format=""}return format.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(m,i){var nmarr,k;if(!isNaN(parseInt(i,10))){return args[parseInt(i,10)]}for(j=0;j<al;j++){if($.isArray(args[j])){nmarr=args[j];k=nmarr.length;while(k--){if(i===nmarr[k].nm){return nmarr[k].v}}}}})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var rv=-1,match=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);if(match!=null&&match.length===3){rv=parseFloat(match[2]||-1)}return rv},fixMaxHeightOfDiv:function(height){if(navigator.appName==="Microsoft Internet Explorer"){return Math.min(height,1533917)}if(/(Firefox)/.exec(navigator.userAgent)!=null){return Math.min(height,17895696)}return height},getCellIndex:function(cell){var c=$(cell);if(c.is("tr")){return -1}c=(!c.is("td")&&!c.is("th")?c.closest("td,th"):c)[0];if(c===undefined){return -1}if(jgrid.msie){return $.inArray(c,c.parentNode.cells)}return c.cellIndex},stripHtml:function(v){v=String(v);if(v){v=v.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,"");return(v&&v!=="&nbsp;"&&v!=="&#160;")?v.replace(/\"/g,"'"):""}return v},stripPref:function(pref,id){var obj=$.type(pref);if(obj==="string"||obj==="number"){pref=String(pref);id=pref!==""?String(id).replace(String(pref),""):id}return id},parse:function(jsonString){var js=jsonString;if(js.substr(0,9)==="while(1);"){js=js.substr(9)}if(js.substr(0,2)==="/*"){js=js.substr(2,js.length-4)}if(!js){js="{}"}return(jgrid.useJSON===true&&typeof JSON==="object"&&$.isFunction(JSON.parse))?JSON.parse(js):eval("("+js+")")},getRes:function(base,path){var pathParts=path.split("."),n=pathParts.length,i;if(base==null){return undefined}for(i=0;i<n;i++){if(!pathParts[i]){return null}base=base[pathParts[i]];if(base===undefined){break}if(typeof base==="string"){return base}}return base},parseDate:function(format,date,newformat,opts){var token=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,dM,k,hl,timestamp=0,offset=0,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g,timezoneClip=/[^\-+\dA-Z]/g,msMatch=((typeof date==="string")?date.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null),pad=function(value,length){value=String(value);length=parseInt(length,10)||2;while(value.length<length){value="0"+value}return value},ts={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},h12To24=function(ampm,h){if(ampm===0){if(h===12){h=0}}else{if(h!==12){h+=12}}return h};opts=$.extend(true,{},(jgrid.formatter||{}).date,this.p!=null?jgrid.getRes(locales[this.p.locale],"formatter.date")||{}:{},opts||{});if(opts.parseRe===undefined){opts.parseRe=/[#%\\\/:_;.,\t\s\-]/}if(opts.masks.hasOwnProperty(format)){format=opts.masks[format]}if(date&&date!=null){if(!isNaN(date)&&String(format).toLowerCase()==="u"){timestamp=new Date(parseFloat(date)*1000)}else{if(date.constructor===Date){timestamp=date}else{if(msMatch!==null){timestamp=new Date(parseInt(msMatch[1],10));if(msMatch[3]){offset=Number(msMatch[5])*60+Number(msMatch[6]);offset*=((msMatch[4]==="-")?1:-1);offset-=timestamp.getTimezoneOffset();timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}else{if(opts.srcformat==="ISO8601Long"&&date.charAt(date.length-1)==="Z"){offset-=(new Date()).getTimezoneOffset()}date=String(date).replace(/\T/g,"#").replace(/\t/,"%").split(opts.parseRe);format=format.replace(/\T/g,"#").replace(/\t/,"%").split(opts.parseRe);for(k=0,hl=Math.min(format.length,date.length);k<hl;k++){switch(format[k]){case"M":dM=$.inArray(date[k],opts.monthNames);if(dM!==-1&&dM<12){date[k]=dM+1;ts.m=date[k]}break;case"F":dM=$.inArray(date[k],opts.monthNames,12);if(dM!==-1&&dM>11){date[k]=dM+1-12;ts.m=date[k]}break;case"n":ts.m=parseInt(date[k],10);break;case"j":ts.d=parseInt(date[k],10);break;case"g":ts.h=parseInt(date[k],10);break;case"a":dM=$.inArray(date[k],opts.AmPm);if(dM!==-1&&dM<2&&date[k]===opts.AmPm[dM]){date[k]=dM;ts.h=h12To24(date[k],ts.h)}break;case"A":dM=$.inArray(date[k],opts.AmPm);if(dM!==-1&&dM>1&&date[k]===opts.AmPm[dM]){date[k]=dM-2;ts.h=h12To24(date[k],ts.h)}break}if(date[k]!==undefined){ts[format[k].toLowerCase()]=parseInt(date[k],10)}}if(ts.f){ts.m=ts.f}if(ts.m===0&&ts.y===0&&ts.d===0){return"&#160;"}ts.m=parseInt(ts.m,10)-1;var ty=ts.y;if(ty>=70&&ty<=99){ts.y=1900+ts.y}else{if(ty>=0&&ty<=69){ts.y=2000+ts.y}}timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u);if(offset>0){timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}}}}else{timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u)}if(opts.userLocalTime&&offset===0){offset-=(new Date()).getTimezoneOffset();if(offset>0){timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}if(newformat===undefined){return timestamp}if(opts.masks.hasOwnProperty(newformat)){newformat=opts.masks[newformat]}else{if(!newformat){newformat="Y-m-d"}}var hours=timestamp.getHours(),i=timestamp.getMinutes(),j=timestamp.getDate(),n=timestamp.getMonth()+1,o=timestamp.getTimezoneOffset(),s=timestamp.getSeconds(),u=timestamp.getMilliseconds(),w=timestamp.getDay(),year=timestamp.getFullYear(),dayOfWeek=(w+6)%7+1,z=(new Date(year,n-1,j)-new Date(year,0,1))/86400000,weekNumberOfYear=dayOfWeek<5?Math.floor((z+dayOfWeek-1)/7)+1:Math.floor((z+dayOfWeek-1)/7)||((new Date(year-1,0,1).getDay()+6)%7<4?53:52),flags={d:pad(j),D:opts.dayNames[w],j:j,l:opts.dayNames[w+7],N:dayOfWeek,S:opts.S(j),w:w,z:z,W:weekNumberOfYear,F:opts.monthNames[n-1+12],m:pad(n),M:opts.monthNames[n-1],n:n,t:"?",L:"?",o:"?",Y:year,y:String(year).substring(2),a:hours<12?opts.AmPm[0]:opts.AmPm[1],A:hours<12?opts.AmPm[2]:opts.AmPm[3],B:"?",g:hours%12||12,G:hours,h:pad(hours%12||12),H:pad(hours),i:pad(i),s:pad(s),u:u,e:"?",I:"?",O:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),P:"?",T:(String(timestamp).match(timezone)||[""]).pop().replace(timezoneClip,""),Z:"?",c:"?",r:"?",U:Math.floor(timestamp/1000)};return newformat.replace(token,function($0){return flags.hasOwnProperty($0)?flags[$0]:$0.substring(1)})},jqID:function(sid){return String(sid).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(componentName){var self=this;if(self.p==null||!self.p.id){return""}var id=self.p.id;switch(componentName){case COMPONENT_NAMES.GRID:return id;case COMPONENT_NAMES.GRID_BOX_DIV:return"gbox_"+id;case COMPONENT_NAMES.GRID_VIEW_DIV:return"gview_"+id;case COMPONENT_NAMES.DIALOG_ALERT_DIV:return"alertmod_"+id;case COMPONENT_NAMES.COLUMN_RESIZER_DIV:return"rs_m"+id;case COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX:return"cb_"+id;case COMPONENT_NAMES.SEARCH_OPERATION_MENU_UL:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(componentName){var id=jgrid.getGridComponentId.call(this,componentName);return id?"#"+jgrid.jqID(id):""},isHTMLElement:function(elem){return(typeof HTMLElement==="object"||typeof HTMLElement==="function")?elem instanceof HTMLElement:elem!=null&&typeof elem==="object"&&elem.nodeType===1&&typeof elem.nodeName==="string"},getGridComponent:function(componentName,$p,p1){var p;if($p instanceof $||$p.length>0){p=$p[0]}else{if(jgrid.isHTMLElement($p)){p=$p;$p=$(p)}else{return $()}}switch(componentName){case COMPONENT_NAMES.BODY_TABLE:return $p.hasClass("ui-jqgrid-bdiv")?$p.find(">div>.ui-jqgrid-btable"):$();case COMPONENT_NAMES.HEADER_TABLE:return $p.hasClass("ui-jqgrid-hdiv")?$p.find(">div>.ui-jqgrid-htable"):$();case COMPONENT_NAMES.FOOTER_TABLE:return $p.hasClass("ui-jqgrid-sdiv")?$p.find(">div>.ui-jqgrid-ftable"):$();case COMPONENT_NAMES.FROZEN_HEADER_TABLE:return $p.hasClass("ui-jqgrid-hdiv")?$p.children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FROZEN_FOOTER_TABLE:return $p.hasClass("ui-jqgrid-sdiv")?$p.children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.BODY_DIV:return $p.hasClass("ui-jqgrid-btable")&&p.grid!=null?$(p.grid.bDiv):$();case COMPONENT_NAMES.HEADER_DIV:return $p.hasClass("ui-jqgrid-btable")&&p.grid!=null?$(p.grid.hDiv):$();case COMPONENT_NAMES.FOOTER_DIV:return $p.hasClass("ui-jqgrid-btable")&&p.grid!=null?$(p.grid.sDiv):$();default:return $()}},fixScrollOffsetAndhBoxPadding:function(){var self=this,grid=self.grid;if(!grid){return}var p=self.p,bDiv=grid.bDiv,fixhBox=function(hDiv){var $hDivhBox=$(hDiv).children("div").first();$hDivhBox.css($hDivhBox.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",p.scrollOffset);hDiv.scrollLeft=bDiv.scrollLeft};if($(bDiv).width()>0){p.scrollOffset=(bDiv.offsetWidth-bDiv.clientWidth);fixhBox(grid.hDiv);if(grid.sDiv){fixhBox(grid.sDiv)}}},mergeCssClasses:function(){var args=$.makeArray(arguments),map={},i,j,ar,cssClass,classes=[];for(i=0;i<args.length;i++){ar=String(args[i]).split(" ");for(j=0;j<ar.length;j++){cssClass=ar[j];if(cssClass!==""&&!map.hasOwnProperty(cssClass)){map[cssClass]=true;classes.push(cssClass)}}}return classes.join(" ")},hasOneFromClasses:function(elem,classes){var $elem=$(elem),arClasses=classes.split(" "),i,n=arClasses.length;for(i=0;i<n;i++){if($elem.hasClass(arClasses[i])){return true}}return false},detectRowEditing:function(rowid){var i,savedRowInfo,tr,self=this,rows=self.rows,p=self.p,isFunction=$.isFunction;if(!self.grid||rows==null||p==null){return null}if(p.savedRow===undefined||p.savedRow.length===0){return null}for(i=0;i<p.savedRow.length;i++){savedRowInfo=p.savedRow[i];if(typeof savedRowInfo.id==="number"&&typeof savedRowInfo.ic==="number"&&savedRowInfo.name!==undefined&&savedRowInfo.v!==undefined&&rows[savedRowInfo.id]!=null&&rows[savedRowInfo.id].id===rowid&&isFunction($.fn.jqGrid.restoreCell)){tr=rows[savedRowInfo.id];if(tr!=null&&tr.id===rowid){return{mode:"cellEditing",savedRow:savedRowInfo}}}else{if(savedRowInfo.id===rowid&&isFunction($.fn.jqGrid.restoreRow)){return{mode:"inlineEditing",savedRow:savedRowInfo}}}}return null},getCell:function(tr,iCol){var grid=this.grid,p=this.p,frozenRows,$td;if(!grid||!p){return}if(tr instanceof $||tr.length>0){tr=tr[0]}if(!((typeof HTMLTableRowElement==="object"||typeof HTMLTableRowElement==="function")&&tr instanceof HTMLTableRowElement)||tr.cells==null){return $()}$td=$(tr.cells[iCol]);frozenRows=grid.fbRows;return frozenRows!=null&&iCol<frozenRows[0].cells.length?$td.add(frozenRows[tr.rowIndex].cells[iCol]):$td},getDataFieldOfCell:function(tr,iCol){var p=this.p,$td=jgrid.getCell.call(this,tr,iCol);if(p.treeGrid&&$td.children("div.tree-wrap").length>0){$td=$td.children("span.cell-wrapperleaf,span.cell-wrapper")}return p.colModel[iCol].autoResizable?$td.children("span."+p.autoResizing.wrapperClassName):$td},enumEditableCells:function(tr,mode,callback){var self=this,grid=self.grid,rows=self.rows,p=self.p;if(grid==null||rows==null||p==null||tr==null||tr.rowIndex==null||!tr.id||!$.isFunction(callback)){return null}var iCol,colModel=p.colModel,nCol=colModel.length,cm,nm,options,isEditable,iRow=tr.rowIndex,td,$dataElement,dataWidth,frozenRows=grid.fbRows,frozen=frozenRows!=null,trFrozen=frozen?frozenRows[iRow]:null;if(frozen){tr=self.rows[iRow]}for(iCol=0;iCol<nCol;iCol++){cm=colModel[iCol];nm=cm.name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if(frozen&&!cm.frozen){frozen=false}td=(frozen?trFrozen:tr).cells[iCol];$dataElement=$(td);if(!$dataElement.hasClass("not-editable-cell")){dataWidth=$dataElement.width();if(p.treeGrid===true&&nm===p.ExpandColumn){dataWidth-=$dataElement.children("div.tree-wrap").outerWidth();$dataElement=$dataElement.children("span.cell-wrapperleaf,span.cell-wrapper").first()}else{dataWidth=0}options={rowid:tr.id,iCol:iCol,iRow:iRow,cmName:nm,cm:cm,mode:mode,td:td,tr:tr,trFrozen:trFrozen,dataElement:$dataElement[0],dataWidth:dataWidth};if(!cm.edittype){cm.edittype="text"}isEditable=cm.editable;isEditable=$.isFunction(isEditable)?isEditable.call(self,options):isEditable;if(isEditable===true){if(callback.call(self,options)===false){break}}}}}},getEditedValue:function($dataFiled,cm,useTextInSelects){var result,checkBoxValues,newformat,$field,valuesOrTexts,selectMethod=useTextInSelects?"text":"val",formatoptions=cm.formatoptions||{},editoptions=cm.editoptions||{},customValue=cm.custom_value,nameSelector="[name="+jgrid.jqID(cm.name)+"]",$t=this,$self=$($t),info_dialog,getRes,errcap,bClose;switch(cm.edittype){case"checkbox":checkBoxValues=["Yes","No"];if(typeof editoptions.value==="string"){checkBoxValues=editoptions.value.split(":")}result=$dataFiled.find("input[type=checkbox]").is(":checked")?checkBoxValues[0]:checkBoxValues[1];break;case"text":case"password":case"textarea":case"button":$field=$dataFiled.find("input"+nameSelector+",textarea"+nameSelector);result=$field.val();if($field[$t.p.propOrAttr]("type")==="date"&&String(result).split("-").length===3){newformat=formatoptions.newformat||$self.jqGrid("getGridRes","formatter.date.newformat");result=jgrid.parseDate.call($t,"Y-m-d",result,newformat)}break;case"select":$field=$dataFiled.find("select option:selected");if(editoptions.multiple){valuesOrTexts=[];$field.each(function(i,option){valuesOrTexts.push($(this)[selectMethod]())});result=valuesOrTexts.join(",")}else{result=$field[selectMethod]()}break;case"custom":try{if($.isFunction(customValue)){result=customValue.call($t,$dataFiled.find(".customelement"),"get");if(result===undefined){throw"e2"}}else{throw"e1"}}catch(e){info_dialog=jgrid.info_dialog;getRes=function(path){$self.jqGrid("getGridRes",path)};errcap=getRes("errors.errcap");bClose=getRes("edit.bClose");if(e==="e1"){info_dialog.call($t,errcap,"function 'custom_value' "+getRes("edit.msg.nodefined"),bClose)}if(e==="e2"){info_dialog.call($t,errcap,"function 'custom_value' "+getRes("edit.msg.novalue"),bClose)}else{info_dialog.call($t,errcap,e.message,bClose)}}break;default:result=$dataFiled.find("*"+nameSelector).text();break}return result},guid:1,uidPref:"jqg",randId:function(prefix){return(prefix||jgrid.uidPref)+(jgrid.guid++)},getAccessor:function(obj,expr){var ret,p,prm=[],i;if($.isFunction(expr)){return expr(obj)}ret=obj[expr];if(ret===undefined){try{if(typeof expr==="string"){prm=expr.split(".")}i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p]}}}catch(ignore){}}return ret},getXmlData:function(obj,expr,returnObj){var m=typeof expr==="string"?expr.match(/^(.*)\[(\w+)\]$/):null;if($.isFunction(expr)){return expr(obj)}if(m&&m[2]){return m[1]?$(m[1],obj).attr(m[2]):$(obj).attr(m[2])}if(obj===undefined){alert("expr")}var ret=$(obj).find(expr);if(returnObj){return ret}return ret.length>0?$(ret).text():undefined},cellWidth:function(){var $testDiv=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),testCell=$testDiv.appendTo("body").find("td").width();$testDiv.remove();return Math.abs(testCell-5)>0.1},cell_width:true,ajaxOptions:{},from:function(source){var context=this,QueryObject=function(d,q){var self=this,_data=d,_usecase=true,_trim=false,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=false,_queuedOperator="",_sorting=[],toString=Object.prototype.toString,_useProperties=true;if(typeof d==="object"&&d.push){if(d.length>0){if(typeof d[0]!=="object"){_useProperties=false}else{_useProperties=true}}}else{throw"data provides is not an array"}this._hasData=function(){return _data===null?false:_data.length===0?false:true};this._getStr=function(s){var phrase=[];if(_trim){phrase.push("jQuery.trim(")}phrase.push("String("+s+")");if(_trim){phrase.push(")")}if(!_usecase){phrase.push(".toUpperCase()")}return phrase.join("")};this._strComp=function(val){if(typeof val==="string"){return".toString()"}return""};this._group=function(f,u){return({field:f.toString(),unique:u,items:[]})};this._toStr=function(phrase){if(_trim){phrase=$.trim(phrase)}phrase=phrase.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return _usecase?phrase:phrase.toUpperCase()};this._funcLoop=function(func){var results=[];$.each(_data,function(i,v){results.push(func(v))});return results};this._append=function(s){var i;if(_query===null){_query=""}else{_query+=_queuedOperator===""?" && ":_queuedOperator}for(i=0;i<_orDepth;i++){_query+="("}if(_negate){_query+="!"}_query+="("+s+")";_negate=false;_queuedOperator="";_orDepth=0};this._setCommand=function(f,c){_lastCommand=f;_lastField=c};this._resetNegate=function(){_negate=false};this._repeatCommand=function(f,v){if(_lastCommand===null){return self}if(f!==null&&v!==null){return _lastCommand(f,v)}if(_lastField===null){return _lastCommand(f)}if(!_useProperties){return _lastCommand(f)}return _lastCommand(_lastField,f)};this._equals=function(a,b){return(self._compare(a,b,1)===0)};this._compare=function(a,b,d){if(d===undefined){d=1}if(a===undefined){a=null}if(b===undefined){b=null}if(a===null&&b===null){return 0}if(a===null&&b!==null){return 1}if(a!==null&&b===null){return -1}if(toString.call(a)==="[object Date]"&&toString.call(b)==="[object Date]"){if(a<b){return -d}if(a>b){return d}return 0}if(!_usecase&&typeof a!=="number"&&typeof b!=="number"){a=String(a);b=String(b)}if(a<b){return -d}if(a>b){return d}return 0};this._performSort=function(){if(_sorting.length===0){return}_data=self._doSort(_data,0)};this._doSort=function(d,q){var by=_sorting[q].by,dir=_sorting[q].dir,type=_sorting[q].type,dfmt=_sorting[q].datefmt,sfunc=_sorting[q].sfunc;if(q===_sorting.length-1){return self._getOrder(d,by,dir,type,dfmt,sfunc)}q++;var values=self._getGroup(d,by,dir,type,dfmt),results=[],i,j,sorted;for(i=0;i<values.length;i++){sorted=self._doSort(values[i].items,q);for(j=0;j<sorted.length;j++){results.push(sorted[j])}}return results};this._getOrder=function(data,by,dir,type,dfmt,sfunc){var sortData=[],_sortData=[],newDir=dir==="a"?1:-1,i,ab,findSortKey;if(type===undefined){type="text"}if(type==="float"||type==="number"||type==="currency"||type==="numeric"){findSortKey=function($cell){var key=parseFloat(String($cell).replace(_stripNum,""));return isNaN(key)?Number.NEGATIVE_INFINITY:key}}else{if(type==="int"||type==="integer"){findSortKey=function($cell){return $cell?parseFloat(String($cell).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}}else{if(type==="date"||type==="datetime"){findSortKey=function($cell){return jgrid.parseDate.call(context,dfmt,$cell).getTime()}}else{if($.isFunction(type)){findSortKey=type}else{findSortKey=function($cell){$cell=$cell!=null?$.trim(String($cell)):"";return _usecase?$cell:$cell.toUpperCase()}}}}}$.each(data,function(i,v){ab=by!==""?jgrid.getAccessor(v,by):v;if(ab===undefined){ab=""}ab=findSortKey(ab,v);_sortData.push({vSort:ab,index:i})});if($.isFunction(sfunc)){_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return sfunc.call(this,a,b,newDir)})}else{_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return self._compare(a,b,newDir)})}var j=0,nrec=data.length;while(j<nrec){i=_sortData[j].index;sortData.push(data[i]);j++}return sortData};this._getGroup=function(data,by,dir,type,dfmt){var results=[],group=null,last=null;$.each(self._getOrder(data,by,dir,type,dfmt),function(i,v){var val=jgrid.getAccessor(v,by);if(val==null){val=""}if(!self._equals(last,val)){last=val;if(group!==null){results.push(group)}group=self._group(by,val)}group.items.push(v)});if(group!==null){results.push(group)}return results};this.ignoreCase=function(){_usecase=false;return self};this.useCase=function(){_usecase=true;return self};this.trim=function(){_trim=true;return self};this.noTrim=function(){_trim=false;return self};this.execute=function(){var match=_query,results=[];if(match===null){return self}$.each(_data,function(){if(eval(match)){results.push(this)}});_data=results;return self};this.data=function(){return _data};this.select=function(f){self._performSort();if(!self._hasData()){return[]}self.execute();if($.isFunction(f)){var results=[];$.each(_data,function(i,v){results.push(f(v))});return results}return _data};this.hasMatch=function(){if(!self._hasData()){return false}self.execute();return _data.length>0};this.andNot=function(f,v,x){_negate=!_negate;return self.and(f,v,x)};this.orNot=function(f,v,x){_negate=!_negate;return self.or(f,v,x)};this.not=function(f,v,x){return self.andNot(f,v,x)};this.and=function(f,v,x){_queuedOperator=" && ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.or=function(f,v,x){_queuedOperator=" || ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.orBegin=function(){_orDepth++;return self};this.orEnd=function(){if(_query!==null){_query+=")"}return self};this.isNot=function(f){_negate=!_negate;return self.is(f)};this.is=function(f){self._append("this."+f);self._resetNegate();return self};this._compareValues=function(func,f,v,how,t){var fld;if(_useProperties){fld=f}else{fld="this"}if(v===undefined){v=null}var val=v,swst=t.stype===undefined?"text":t.stype;if(v!==null){switch(swst){case"int":case"integer":val=String(val).replace(_stripNum,"");val=(isNaN(Number(val))||val==="")?"0":Number(val);fld="parseInt("+fld+",10)";val=String(parseInt(val,10));break;case"float":case"number":case"currency":case"numeric":val=String(val).replace(_stripNum,"");val=(isNaN(Number(val))||val==="")?"0":Number(val);fld="parseFloat("+fld+")";val=String(val);break;case"date":case"datetime":val=String(jgrid.parseDate.call(context,t.newfmt||"Y-m-d",val).getTime());fld='jQuery.jgrid.parseDate.call(jQuery("'+context.p.idSel+'")[0],"'+t.srcfmt+'",'+fld+").getTime()";break;default:fld=self._getStr(fld);val=self._getStr('"'+self._toStr(val)+'"')}}self._append(fld+" "+how+" "+val);self._setCommand(func,f);self._resetNegate();return self};this.equals=function(f,v,t){return self._compareValues(self.equals,f,v,"==",t)};this.notEquals=function(f,v,t){return self._compareValues(self.equals,f,v,"!==",t)};this.isNull=function(f,v,t){return self._compareValues(self.equals,f,null,"===",t)};this.greater=function(f,v,t){return self._compareValues(self.greater,f,v,">",t)};this.less=function(f,v,t){return self._compareValues(self.less,f,v,"<",t)};this.greaterOrEquals=function(f,v,t){return self._compareValues(self.greaterOrEquals,f,v,">=",t)};this.lessOrEquals=function(f,v,t){return self._compareValues(self.lessOrEquals,f,v,"<=",t)};this.startsWith=function(f,v){var val=(v==null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr(f)+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(v)+'"'))}else{if(v!=null){length=_trim?$.trim(v.toString()).length:v.toString().length}self._append(self._getStr("this")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(f)+'"'))}self._setCommand(self.startsWith,f);self._resetNegate();return self};this.endsWith=function(f,v){var val=(v==null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr(f)+".substr("+self._getStr(f)+".length-"+length+","+length+') == "'+self._toStr(v)+'"')}else{self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(f)+'".length,"'+self._toStr(f)+'".length) == "'+self._toStr(f)+'"')}self._setCommand(self.endsWith,f);self._resetNegate();return self};this.contains=function(f,v){if(_useProperties){self._append(self._getStr(f)+'.indexOf("'+self._toStr(v)+'",0) > -1')}else{self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1')}self._setCommand(self.contains,f);self._resetNegate();return self};this.groupBy=function(by,dir,type,datefmt){if(!self._hasData()){return null}return self._getGroup(_data,by,dir,type,datefmt)};this.orderBy=function(by,dir,stype,dfmt,sfunc){dir=dir==null?"a":$.trim(dir.toString().toLowerCase());if(stype==null){stype="text"}if(dfmt==null){dfmt="Y-m-d"}if(sfunc==null){sfunc=false}if(dir==="desc"||dir==="descending"){dir="d"}if(dir==="asc"||dir==="ascending"){dir="a"}_sorting.push({by:by,dir:dir,type:stype,datefmt:dfmt,sfunc:sfunc});return self};this.custom=function(ruleOp,field,data){self._append('jQuery("'+context.p.idSel+'")[0].p.customSortOperations.'+ruleOp+'.filter.call(jQuery("'+context.p.idSel+'")[0],{item:this,cmName:"'+field+'",searchValue:"'+data+'"})');self._setCommand(self.custom,field);self._resetNegate();return self};return self};return new QueryObject(typeof source==="string"?$.data(source):source,null)},serializeFeedback:function(callback,eventName,postData){var self=this,eventResult;if(self instanceof $&&self.length>0){self=self[0]}if(typeof postData==="string"){return postData}eventResult=$(self).triggerHandler(eventName,postData);if(typeof eventResult==="string"){return eventResult}if(eventResult==null||typeof eventResult!=="object"){eventResult=postData}return $.isFunction(callback)?callback.call(self,eventResult):eventResult},fullBoolFeedback:function(callback,eventName){var self=this,args=$.makeArray(arguments).slice(2),result=$(self).triggerHandler(eventName,args);result=(result===false||result==="stop")?false:true;if($.isFunction(callback)){var callbackResult=callback.apply(self,args);if(callbackResult===false||callbackResult==="stop"){result=false}}return result},feedback:function(p,eventPrefix,callbackSuffix,callbackName){var self=this;if(self instanceof $&&self.length>0){self=self[0]}if(p==null||typeof callbackName!=="string"||callbackName.length<2){return null}var eventName=callbackName.substring(0,2)==="on"?"jqGrid"+eventPrefix+callbackName.charAt(2).toUpperCase()+callbackName.substring(3):"jqGrid"+eventPrefix+callbackName.charAt(0).toUpperCase()+callbackName.substring(1),args=$.makeArray(arguments).slice(4),callback=p[callbackName+callbackSuffix];args.unshift(eventName);args.unshift(callback);return jgrid.fullBoolFeedback.apply(self,args)},getIconRes:function(base,path){var pathParts=path.split("."),root,n=pathParts.length,part,i,classes=[];base=jgrid.icons[base];if(base==null){return""}root=base;if(root.common){classes.push(root.common)}for(i=0;i<n;i++){part=pathParts[i];if(!part){break}root=root[part];if(root===undefined){if(part==="common"){break}return""}if(typeof root==="string"){classes.push(root);break}if(root!=null&&root.common){classes.push(root.common)}}return jgrid.mergeCssClasses.apply(this,classes)},builderSortIcons:function(){var p=this.p,disabledStateClasses=jgrid.getRes(jgrid.guiStyles[p.guiStyle],"states.disabled"),getClasses=function(ascOrDesc){return jgrid.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+ascOrDesc,p.viewsortcols[1]==="horizontal"?"ui-i-"+ascOrDesc:"",disabledStateClasses,jgrid.getIconRes(p.iconSet,"sort."+ascOrDesc),"ui-sort-"+p.direction)};return"<span class='s-ico' style='display:none'><span class='"+getClasses("asc")+"'></span><span class='"+getClasses("desc")+"'></span></span>"},builderFmButon:function(id,text,icon,iconOnLeftOrRight,conner){var p=this.p,getDialogGuiStyles=function(name){return jgrid.getRes(jgrid.guiStyles[p.guiStyle],"dialog."+name)};if(p==null){return}return"<a id='"+id+"' class='"+jgrid.mergeCssClasses("fm-button",getDialogGuiStyles("fmButton"),getDialogGuiStyles(conner==="right"?"rightCorner":(conner==="left"?"leftCorner":"defaultCorner")),iconOnLeftOrRight==="right"?"fm-button-icon-right":(iconOnLeftOrRight==="left"?"fm-button-icon-left":""))+"' role='button' tabindex='0'>"+(icon?"<span class='fm-button-icon "+(jgrid.getIconRes(p.iconSet,icon)||icon)+"'></span>":"")+(text?"<span class='fm-button-text'>"+text+"</span>":"")+"</a>"},convertOnSaveLocally:function(nData,cm,oData,rowid,item,iCol){var self=this,p=self.p;if(p==null){return nData}if($.isFunction(cm.convertOnSave)){return cm.convertOnSave.call(this,{newValue:nData,cm:cm,oldValue:oData,id:rowid,item:item,iCol:iCol})}if(typeof oData!=="boolean"&&typeof oData!=="number"){return nData}if(typeof oData==="boolean"&&(cm.edittype==="checkbox"||cm.formatter==="checkbox")){var lnData=String(nData).toLowerCase(),cbv=cm.editoptions!=null&&typeof cm.editoptions.value==="string"?cm.editoptions.value.split(":"):["yes","no"];if($.inArray(lnData,["1","true",cbv[0].toLowerCase()])>=0){nData=true}else{if($.inArray(lnData,["0","false",cbv[1].toLowerCase()])>=0){nData=false}}}else{if(typeof oData==="number"&&!isNaN(nData)){if(cm.formatter==="number"||cm.formatter==="currency"){nData=parseFloat(nData)}else{if(cm.formatter==="integer"){nData=parseInt(nData,10)}}}}return nData},parseDataToHtml:function(len,ids,items,cellsToDisplay,rcnt,adjust,readAllInputData){var self=this,p=self.p,$self=$(self),i,j,altr,cn1,selr,idr,rd,cells,iStartTrTag,selected=false,rowData=[],cn=(p.altRows===true)?p.altclass:"",grpdata=[],hiderow=p.grouping?p.groupingView.groupCollapse===true:false,rn=parseInt(p.rowNum,10),cmName,$j=$.fn.jqGrid,rowIndex=p.treeGrid===true&&p.treeANode>-1?self.rows[p.treeANode].rowIndex+1:self.rows.length,formatCol=self.formatCol,addCell=function(rowId,cell,pos,irow,srvr,rdata){var v=self.formatter(rowId,cell,pos,srvr,"add",rdata);return"<td role='gridcell' "+formatCol(pos,irow,v,srvr,rowId,rdata)+">"+v+"</td>"},addMulti=function(rowid,pos,irow,checked){return"<td role='gridcell' "+formatCol(pos,irow,"",null,rowid,true)+"><input role='checkbox' type='checkbox' id='jqg_"+p.id+"_"+rowid+"' class='cbox' name='jqg_"+p.id+"_"+rowid+"'"+(checked?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/></td>"},addRowNum=function(pos,irow,pG,rN){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow;return"<td role='gridcell' class='"+$j.getGuiStyles.call($self,"rowNum","jqgrid-rownum")+"' "+formatCol(pos,irow,v,null,irow,true)+">"+v+"</td>"};if(rowIndex<=1){p.rowIndexes={}}if(p.datatype==="local"&&!p.deselectAfterSort){selected=true}if(adjust){rn*=adjust+1}for(i=0;i<Math.min(len,rn);i++){idr=ids[i];rd=items[i];cells=cellsToDisplay!=null?cellsToDisplay[i]:rd;altr=rcnt===1?0:rcnt;cn1=(altr+i)%2===1?cn:"";if(selected){if(p.multiselect){selr=($.inArray(idr,p.selarrrow)!==-1)}else{selr=(idr===p.selrow)}}iStartTrTag=rowData.length;rowData.push("");for(j=0;j<p.colModel.length;j++){cmName=p.colModel[j].name;switch(cmName){case"rn":rowData.push(addRowNum(j,i,p.page,p.rowNum));break;case"cb":rowData.push(addMulti(idr,j,i,selr));break;case"subgrid":rowData.push($j.addSubGridCell.call($self,j,i+rcnt));break;default:rowData.push(addCell(idr,rd[cmName],j,i+rcnt,cells,rd))}}rowData[iStartTrTag]=self.constructTr(idr,hiderow,cn1,rd,cells,selr);rowData.push("</tr>");p.rowIndexes[idr]=rowIndex;rowIndex++;if(p.grouping){grpdata.push(rowData);if(!p.groupingView._locgr){$j.groupingPrepare.call($self,rd,i)}rowData=[]}if(rowData.length>p.maxItemsToJoin){rowData=[rowData.join("")]}}if(p.grouping){if(readAllInputData){p.groupingView._locgr=true}rowData=[$j.groupingRender.call($self,grpdata,p.colModel.length,p.page,rn)];jgrid.clearArray(grpdata)}return rowData},getMethod:function(name){return this.getAccessor($.fn.jqGrid,name)},extend:function(methods){$.extend($.fn.jqGrid,methods);if(!this.no_legacy_api){$.fn.extend(methods)}}});var clearArray=jgrid.clearArray,jqID=jgrid.jqID,getGridComponentIdSelector=jgrid.getGridComponentIdSelector,getGridComponentId=jgrid.getGridComponentId,getGridComponent=jgrid.getGridComponent,stripPref=jgrid.stripPref,randId=jgrid.randId,getAccessor=jgrid.getAccessor,convertOnSaveLocally=jgrid.convertOnSaveLocally,stripHtml=jgrid.stripHtml,htmlEncode=jgrid.htmlEncode,htmlDecode=jgrid.htmlDecode,mergeCssClasses=jgrid.mergeCssClasses,hasOneFromClasses=jgrid.hasOneFromClasses,feedback=function(){var args=$.makeArray(arguments);args.unshift("");args.unshift("");args.unshift(this.p);return jgrid.feedback.apply(this,args)};$.fn.jqGrid=function(pin){var $j=$.fn.jqGrid,fn;if(typeof pin==="string"){fn=$j[pin];if(!fn){throw ("jqGrid - No such method: "+pin)}return fn.apply(this,$.makeArray(arguments).slice(1))}return this.each(function(){if(this.grid){return}var ts=this,localData,localDataStr,$self0=$(ts),isFunction=$.isFunction,isArray=$.isArray,extend=$.extend,inArray=$.inArray,trim=$.trim,each=$.each,setSelection=$j.setSelection,getGridRes=$j.getGridRes,fatalErrorFunction=isFunction(defaults.fatalError)?defaults.fatalError:alert,locale=pin.locale||defaults.locale||"en-US",direction=locales[locale]!=null&&typeof locales[locale].isRTL==="boolean"?(locales[locale].isRTL?"rtl":"ltr"):"ltr",iconSet=pin.iconSet||defaults.iconSet||"jQueryUI",guiStyle=pin.guiStyle||defaults.guiStyle||"jQueryUI",getIcon=function(path){return jgrid.getIconRes(iconSet,path)},getGuiStyles=function(path,jqClasses){return mergeCssClasses(jgrid.getRes(jgrid.guiStyles[guiStyle],path),jqClasses||"")};if(pin==null){pin={datatype:"local"}}if(pin.datastr!==undefined&&isArray(pin.datastr)){localDataStr=pin.datastr;pin.datastr=[]}if(pin.data!==undefined){localData=pin.data;pin.data=[]}if(jgrid.formatter==null||jgrid.formatter.unused==null){fatalErrorFunction("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n\t$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n\t$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken.")}if(pin.datatype===undefined&&pin.dataType!==undefined){pin.datatype=pin.dataType;delete pin.dataType}if(pin.mtype===undefined&&pin.type!==undefined){pin.mtype=pin.type;delete pin.type}var p=extend(true,{height:"auto",page:1,rowNum:20,maxRowNum:10000,autoresizeOnLoad:false,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:true,compact:false,fixWidthOnShrink:false},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:"clientArray",search:false,caption:"",hidegrid:true,hiddengrid:false,useUnformattedDataForCellAttr:true,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:(pin==null||pin.afterInsertRow==null),rownumWidth:25,rownumbers:false,pagerpos:"center",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:direction,toppager:false,headertitles:false,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:true,_index:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],summary:[],summaryval:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:false,commonIconClass:getIcon("grouping.common"),plusicon:getIcon("grouping.plus"),minusicon:getIcon("grouping.minus")},ignoreCase:true,cmTemplate:{},idPrefix:"",iconSet:iconSet,guiStyle:guiStyle,locale:locale,multiSort:false,treeIcons:{commonIconClass:getIcon("treeGrid.common"),plusLtr:getIcon("treeGrid.plusLtr"),plusRtl:getIcon("treeGrid.plusRtl"),minus:getIcon("treeGrid.minus"),leaf:getIcon("treeGrid.leaf")},subGridOptions:{commonIconClass:getIcon("subgrid.common"),plusicon:getIcon("subgrid.plus"),minusicon:getIcon("subgrid.minus")}},defaults,{navOptions:extend(true,{commonIconClass:getIcon("nav.common"),editicon:getIcon("nav.edit"),addicon:getIcon("nav.add"),delicon:getIcon("nav.del"),searchicon:getIcon("nav.search"),refreshicon:getIcon("nav.refresh"),viewicon:getIcon("nav.view"),saveicon:getIcon("nav.save"),cancelicon:getIcon("nav.cancel"),buttonicon:getIcon("nav.newbutton")},jgrid.nav||{}),actionsNavOptions:extend(true,{commonIconClass:getIcon("actions.common"),editicon:getIcon("actions.edit"),delicon:getIcon("actions.del"),saveicon:getIcon("actions.save"),cancelicon:getIcon("actions.cancel")},jgrid.actionsNav||{}),formEditing:extend(true,{commonIconClass:getIcon("form.common"),prevIcon:getIcon("form.prev"),nextIcon:getIcon("form.next"),saveicon:[true,"left",getIcon("form.save")],closeicon:[true,"left",getIcon("form.undo")]},jgrid.edit||{}),searching:extend(true,{commonIconClass:getIcon("search.common"),findDialogIcon:getIcon("search.search"),resetDialogIcon:getIcon("search.reset"),queryDialogIcon:getIcon("search.query")},jgrid.search||{}),formViewing:extend(true,{commonIconClass:getIcon("form.common"),prevIcon:getIcon("form.prev"),nextIcon:getIcon("form.next"),closeicon:[true,"left",getIcon("form.cancel")]},jgrid.view||{}),formDeleting:extend(true,{commonIconClass:getIcon("form.common"),delicon:[true,"left",getIcon("form.del")],cancelicon:[true,"left",getIcon("form.cancel")]},jgrid.del||{})},pin||{}),getRes=function(path){return getGridRes.call($self0,path)},getDef=function(path){var gridParam=jgrid.getRes(p,path);return gridParam!==undefined?gridParam:getGridRes.call($self0,"defaults."+path)};p.recordpos=p.recordpos||(p.direction==="rtl"?"left":"right");p.subGridOptions.openicon=p.direction==="rtl"?getIcon("subgrid.openRtl"):getIcon("subgrid.openLtr");p.autoResizing.widthOfVisiblePartOfSortIcon=p.autoResizing.widthOfVisiblePartOfSortIcon!==undefined?p.autoResizing.widthOfVisiblePartOfSortIcon:(p.iconSet==="fontAwesome"?13:12);p.datatype=p.datatype!==undefined?p.datatype:localData!==undefined||p.url==null?"local":p.jsonReader!=null&&typeof p.jsonReader==="object"?"json":"xml";p.jsonReader=p.jsonReader||{};p.url=p.url||"";p.cellsubmit=p.cellsubmit!==undefined?p.cellsubmit:p.cellurl===undefined?"clientArray":"remote";p.gridview=p.gridview!==undefined?p.gridview:(p.afterInsertRow==null);if(localData!==undefined){p.data=localData;pin.data=localData}if(localDataStr!==undefined){p.datastr=localDataStr;pin.datastr=localDataStr}if(ts.tagName.toUpperCase()!=="TABLE"){fatalErrorFunction("Element is not a table!");return}if(ts.id===""){$self0.attr("id",randId())}if(document.documentMode!==undefined){if(document.documentMode<=5){fatalErrorFunction("Grid can not be used in this ('quirks') mode!");return}}$self0.empty().attr("tabindex","0");ts.p=p;p.id=ts.id;p.idSel="#"+jqID(ts.id);p.gBoxId=getGridComponentId.call(ts,COMPONENT_NAMES.GRID_BOX_DIV);p.gBox=getGridComponentIdSelector.call(ts,COMPONENT_NAMES.GRID_BOX_DIV);p.gViewId=getGridComponentId.call(ts,COMPONENT_NAMES.GRID_VIEW_DIV);p.gView=getGridComponentIdSelector.call(ts,COMPONENT_NAMES.GRID_VIEW_DIV);p.rsId=getGridComponentId.call(ts,COMPONENT_NAMES.COLUMN_RESIZER_DIV);p.rs=getGridComponentIdSelector.call(ts,COMPONENT_NAMES.COLUMN_RESIZER_DIV);p.cbId=getGridComponentId.call(ts,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX);p.cb=getGridComponentIdSelector.call(ts,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX);p.useProp=!!$.fn.prop;p.propOrAttr=p.useProp?"prop":"attr";var propOrAttr=p.propOrAttr,fixScrollOffsetAndhBoxPadding=jgrid.fixScrollOffsetAndhBoxPadding,buildColNameMap=function(colModel){var m={},i,n=colModel.length;for(i=0;i<n;i++){m[colModel[i].name]=i}return m},buildAddPropMap=function(additionalProperties){var m={},i,n=additionalProperties.length,addPropInfo;for(i=0;i<n;i++){addPropInfo=additionalProperties[i];m[typeof addPropInfo==="string"?addPropInfo:addPropInfo.name]=i}return m},rebuildRowIndexes=function(){var rowIndexes={},row,i;this.p.rowIndexes=rowIndexes;for(i=0;i<this.rows.length;i++){row=this.rows[i];if($(row).hasClass("jqgrow")){rowIndexes[row.id]=row.rowIndex}}},buildArrayReader=function(){var i,colModel=p.colModel,cmNamesInputOrder=p.cmNamesInputOrder,additionalProperties=p.additionalProperties,n=cmNamesInputOrder.length,arrayReaderInfos,name,index,order=0;p.arrayReaderInfos={};arrayReaderInfos=p.arrayReaderInfos;for(order=0;order<n;order++){name=cmNamesInputOrder[order];if(inArray(name,p.reservedColumnNames)<0&&!arrayReaderInfos.hasOwnProperty(name)){index=p.iColByName[name];if(index!==undefined){arrayReaderInfos[name]={name:colModel[index].name,index:index,order:order,type:0}}else{index=p.iPropByName[name];if(index!==undefined){arrayReaderInfos[name]={name:colModel[index].name,index:index,order:order,type:1}}else{if(name===(p.prmNames.rowidName||"rowid")){arrayReaderInfos[name]={index:index,type:2}}}}}}n=colModel.length;for(i=0;i<n;i++){name=colModel[i].name;if(inArray(name,p.reservedColumnNames)<0&&!arrayReaderInfos.hasOwnProperty(name)){arrayReaderInfos[name]={name:name,index:i,order:order,type:0};order++}}n=additionalProperties.length;for(i=0;i<n;i++){name=additionalProperties[i];if(name!=null&&!arrayReaderInfos.hasOwnProperty(name)){if(typeof name==="object"&&$.type(name.name)==="string"){name=name.name}arrayReaderInfos[name]={name:name,index:i,order:order,type:1};order++}}},myResizerClickHandler=function(e){var pageX=$(this).data("pageX");if(pageX){pageX=String(pageX).split(";");pageX=pageX[pageX.length-1];$(this).data("pageX",pageX+";"+e.pageX)}else{$(this).data("pageX",e.pageX)}},intNum=function(val,defval){val=parseInt(val,10);if(isNaN(val)){return defval||0}return val},grid={headers:[],cols:[],footers:[],dragStart:function(i,x,y,$th){var self=this,$bDiv=$(self.bDiv),gridOffset=$bDiv.closest(p.gBox).offset(),startX=$th.offset().left+self.headers[i].width+(jgrid.cell_width?0:intNum(p.cellLayout,0))-2;self.resizing={idx:i,startX:startX,sOL:startX,moved:false,delta:startX-x.pageX};self.curGbox=$(p.rs);self.curGbox.prependTo("body");self.curGbox.css({display:"block",left:startX,top:y[1]+gridOffset.top,height:y[2]});self.curGbox.data("idx",i);self.curGbox.data("delta",startX-x.pageX);myResizerClickHandler.call(this.curGbox,x);feedback.call(getGridComponent(COMPONENT_NAMES.BODY_TABLE,$bDiv),"resizeStart",x,i);document.onselectstart=function(){return false};$(document).bind("mousemove.jqGrid",function(e){if(grid.resizing){grid.dragMove(e);return false}}).bind("mouseup.jqGrid"+p.id,function(){if(grid.resizing){grid.dragEnd();return false}})},dragMove:function(x){var self=this,resizing=self.resizing;if(resizing){var diff=x.pageX+resizing.delta-resizing.startX,headers=self.headers,h=headers[resizing.idx],newWidth=p.direction==="ltr"?h.width+diff:h.width-diff,hn,nWn;resizing.moved=true;if(newWidth>p.minResizingWidth){if(self.curGbox==null){self.curGbox=$(p.rs)}self.curGbox.css({left:resizing.sOL+diff});if(p.forceFit===true){hn=headers[resizing.idx+p.nv];nWn=p.direction==="ltr"?hn.width-diff:hn.width+diff;if(nWn>p.autoResizing.minColWidth){h.newWidth=newWidth;hn.newWidth=nWn}}else{self.newWidth=p.direction==="ltr"?p.tblwidth+diff:p.tblwidth-diff;h.newWidth=newWidth}}}},resizeColumn:function(idx,skipCallbacks,skipGridAdjustments){var self=this,headers=self.headers,footers=self.footers,h=headers[idx],hn,nw=h.newWidth||h.width,$bTable=getGridComponent(COMPONENT_NAMES.BODY_TABLE,self.bDiv),$hTable=getGridComponent(COMPONENT_NAMES.HEADER_TABLE,self.hDiv),hCols=$hTable.children("thead").children("tr").first()[0].cells;nw=parseInt(nw,10);p.colModel[idx].width=nw;h.width=nw;hCols[idx].style.width=nw+"px";self.cols[idx].style.width=nw+"px";if(self.fbRows){$(self.fbRows[0].cells[idx]).css("width",nw);$(getGridComponent(COMPONENT_NAMES.FROZEN_HEADER_TABLE,self.fhDiv)[0].rows[0].cells[idx]).css("width",nw);if(p.footerrow){$(getGridComponent(COMPONENT_NAMES.FROZEN_FOOTER_TABLE,self.fsDiv)[0].rows[0].cells[idx]).css("width",nw)}}if(footers.length>0){footers[idx].style.width=nw+"px"}if(skipGridAdjustments!==true){fixScrollOffsetAndhBoxPadding.call($bTable[0])}if(p.forceFit===true){hn=headers[idx+p.nv];nw=hn.newWidth||hn.width;hn.width=nw;hCols[idx+p.nv].style.width=nw+"px";self.cols[idx+p.nv].style.width=nw+"px";if(footers.length>0){footers[idx+p.nv].style.width=nw+"px"}p.colModel[idx+p.nv].width=nw}else{p.tblwidth=self.newWidth||p.tblwidth;$bTable.css("width",p.tblwidth+"px");getGridComponent(COMPONENT_NAMES.HEADER_TABLE,self.hDiv).css("width",p.tblwidth+"px");if(skipGridAdjustments!==true){self.hDiv.scrollLeft=self.bDiv.scrollLeft;if(p.footerrow){getGridComponent(COMPONENT_NAMES.FOOTER_TABLE,self.sDiv).css("width",p.tblwidth+"px");self.sDiv.scrollLeft=self.bDiv.scrollLeft}}}if(!p.autowidth&&(p.widthOrg===undefined||p.widthOrg==="auto"||p.widthOrg==="100%")&&skipGridAdjustments!=true){$j.setGridWidth.call($bTable,self.newWidth+p.scrollOffset,false)}if(!skipCallbacks){feedback.call($bTable[0],"resizeStop",nw,idx)}},dragEnd:function(){var self=this;self.hDiv.style.cursor="default";if(self.resizing){if(self.resizing!==null&&self.resizing.moved===true){$(self.headers[self.resizing.idx].el).removeData("autoResized");self.resizeColumn(self.resizing.idx,false)}$(p.rs).removeData("pageX");self.resizing=false;setTimeout(function(){$(p.rs).css("display","none").prependTo(p.gBox)},p.doubleClickSensitivity)}self.curGbox=null;document.onselectstart=function(){return true};$(document).unbind("mousemove.jqGrid").unbind("mouseup.jqGrid"+p.id)},populateVisible:function(){var self=this,$self=$(self),gridSelf=self.grid,bDiv=gridSelf.bDiv,$bDiv=$(bDiv);if(gridSelf.timer){clearTimeout(gridSelf.timer)}gridSelf.timer=null;var dh=$bDiv.height();if(!dh){return}var firstDataRow,rh;if(self.rows.length){try{firstDataRow=self.rows[1];rh=firstDataRow?$(firstDataRow).outerHeight()||gridSelf.prevRowHeight:gridSelf.prevRowHeight}catch(pv){rh=gridSelf.prevRowHeight}}if(!rh){return}gridSelf.prevRowHeight=rh;var rn=p.rowNum;gridSelf.scrollTop=bDiv.scrollTop;var scrollTop=gridSelf.scrollTop;var ttop=Math.round($self.position().top)-scrollTop;var tbot=ttop+$self.height();var div=rh*rn;var page,npage,empty;if(tbot<dh&&ttop<=0&&(p.lastpage===undefined||(parseInt((tbot+scrollTop+div-1)/div,10)||0)<=p.lastpage)){npage=parseInt((dh-tbot+div-1)/div,10)||1;if(tbot>=0||npage<2||p.scroll===true){page=(Math.round((tbot+scrollTop)/div)||0)+1;ttop=-1}else{ttop=1}}if(ttop>0){page=(parseInt(scrollTop/div,10)||0)+1;npage=(parseInt((scrollTop+dh)/div,10)||0)+2-page;empty=true}if(npage){if(p.lastpage&&(page>p.lastpage||p.lastpage===1||(page===p.page&&page===p.lastpage))){return}if(gridSelf.hDiv.loading){gridSelf.timer=setTimeout(function(){gridSelf.populateVisible.call(self)},p.scrollTimeout)}else{p.page=page;if(empty){gridSelf.selectionPreserver.call(self);gridSelf.emptyRows.call(self,false,false)}gridSelf.populate.call(self,npage)}}},scrollGrid:function(e){var bDiv=this,$bTable=getGridComponent(COMPONENT_NAMES.BODY_TABLE,bDiv);if(e){e.stopPropagation()}if($bTable.length===0){return true}var gridSelf=$bTable[0].grid;if(p.scroll){var scrollTop=bDiv.scrollTop;if(gridSelf.scrollTop===undefined){gridSelf.scrollTop=0}if(scrollTop!==gridSelf.scrollTop){gridSelf.scrollTop=scrollTop;if(gridSelf.timer){clearTimeout(gridSelf.timer)}gridSelf.timer=setTimeout(function(){gridSelf.populateVisible.call($bTable[0])},p.scrollTimeout)}}gridSelf.hDiv.scrollLeft=bDiv.scrollLeft;if(p.footerrow){gridSelf.sDiv.scrollLeft=bDiv.scrollLeft}},selectionPreserver:function(){var self=this,$self=$(self),sr=p.selrow,sra=p.selarrrow?$.makeArray(p.selarrrow):null,bDiv=self.grid.bDiv,left=bDiv.scrollLeft,restoreSelection=function(){var i;p.selrow=null;clearArray(p.selarrrow);if(p.multiselect&&sra&&sra.length>0){for(i=0;i<sra.length;i++){if(sra[i]!==sr){setSelection.call($self,sra[i],false,null)}}}if(sr){setSelection.call($self,sr,false,null)}bDiv.scrollLeft=left;$self.unbind(".selectionPreserver",restoreSelection)};$self.bind("jqGridGridComplete.selectionPreserver",restoreSelection)}};ts.grid=grid;feedback.call(ts,"beforeInitGrid");p.iColByName=buildColNameMap(p.colModel);p.iPropByName=buildAddPropMap(p.additionalProperties);var iCol,dir;if(p.colNames.length===0){for(iCol=0;iCol<p.colModel.length;iCol++){p.colNames[iCol]=p.colModel[iCol].label!==undefined?p.colModel[iCol].label:p.colModel[iCol].name}}if(p.colNames.length!==p.colModel.length){fatalErrorFunction(getRes("errors.model"));return}var gv=$("<div class='ui-jqgrid-view' role='grid' aria-multiselectable='"+!!p.multiselect+"'></div>"),isMSIE=jgrid.msie,isMSIE7=isMSIE&&jgrid.msiever()<8;p.direction=trim(p.direction.toLowerCase());if(inArray(p.direction,["ltr","rtl"])===-1){p.direction="ltr"}dir=p.direction;$(gv).insertBefore(ts);$self0.removeClass("scroll").appendTo(gv);var eg=$("<div class='"+getGuiStyles("gBox","ui-jqgrid")+"'></div>");$(eg).attr({id:p.gBoxId,dir:dir}).insertBefore(gv);$(gv).attr("id",p.gViewId).appendTo(eg);$("<div class='"+getGuiStyles("overlay","jqgrid-overlay")+"' id='lui_"+p.id+"'></div>").insertBefore(gv);$("<div class='"+getGuiStyles("loading","loading")+"' id='load_"+p.id+"'>"+getDef("loadtext")+"</div>").insertBefore(gv);if(isMSIE7){$self0.attr({cellspacing:"0"})}$self0.attr({role:"presentation","aria-labelledby":"gbox_"+ts.id});var sortkeys=["shiftKey","altKey","ctrlKey"],normalizeRemapColumns=function(){var remapColumns=p.remapColumns,colModel=p.colModel,nCol=colModel.length,cmNames=[],i,remappedCmNames,name;for(iCol=0;iCol<nCol;iCol++){name=colModel[iCol].name;if(inArray(name,p.reservedColumnNames)<0){cmNames.push(name);i++}}if(remapColumns==null){remappedCmNames=cmNames.slice();for(i=0;i<remapColumns.length;i++){cmNames[i]=remappedCmNames[remapColumns[i]]}}p.cmNamesInputOrder=cmNames},stripGridPrefix=function(rowId){return stripPref(p.idPrefix,rowId)},formatCol=function(pos,rowInd,tv,rawObject,rowId,rdata){var cm=p.colModel[pos],cellAttrFunc,cellValue=tv,rPrefix,ral=cm.align,result='style="',clas=cm.classes,nm=cm.name,celp,acp=[];if(ral){result+="text-align:"+ral+";"}if(cm.hidden===true){result+="display:none;"}if(rowInd===0){result+="width: "+grid.headers[pos].width+"px;"}else{if(isFunction(cm.cellattr)||(typeof cm.cellattr==="string"&&jgrid.cellattr!=null&&isFunction(jgrid.cellattr[cm.cellattr]))){cellAttrFunc=isFunction(cm.cellattr)?cm.cellattr:jgrid.cellattr[cm.cellattr];if(p.useUnformattedDataForCellAttr&&rdata!=null){cellValue=rdata[cm.name]}else{if(cm.autoResizable){rPrefix="<span class='"+p.autoResizing.wrapperClassName+"'>";cellValue=tv.substring(rPrefix.length,tv.length-"</span>".length)}}celp=cellAttrFunc.call(ts,rowId,cellValue,rawObject,cm,rdata);if(celp&&typeof celp==="string"){celp=celp.replace(/style/i,"style").replace(/title/i,"title");if(celp.indexOf("title")>-1){cm.title=false}if(celp.indexOf("class")>-1){clas=undefined}acp=celp.replace(/\-style/g,"-sti").split(/style/);if(acp.length===2){acp[1]=trim(acp[1].replace(/\-sti/g,"-style").replace("=",""));if(acp[1].indexOf("'")===0||acp[1].indexOf('"')===0){acp[1]=acp[1].substring(1)}result+=acp[1].replace(/'/gi,'"')}else{result+='"'}}}}if(!acp.length){acp[0]="";result+='"'}result+=(clas!==undefined?(' class="'+clas+'"'):"")+((cm.title&&cellValue)?(' title="'+stripHtml(tv)+'"'):"");result+=' aria-describedby="'+p.id+"_"+nm+'"';return result+acp[0]},cellVal=function(val){return val==null||val===""?"&#160;":(p.autoencode?htmlEncode(val):String(val))},normalizeTreeGridProperties=function(ldat){var treeReader=p.treeReader,loaded=treeReader.loaded,isLeaf=treeReader.leaf_field,expanded=treeReader.expanded_field,getBool=function(val){return val===true||val==="true"||val==="1"};if(ldat[loaded]!==undefined){ldat[loaded]=getBool(ldat[loaded])}ldat[isLeaf]=getBool(ldat[isLeaf]);ldat[expanded]=getBool(ldat[expanded])},formatter=function(rowId,cellval,colpos,rwdat,act,rdata){var cm=p.colModel[colpos],v;if(cm.formatter!==undefined){rowId=String(p.idPrefix)!==""?stripGridPrefix(rowId):rowId;var opts={rowId:rowId,colModel:cm,gid:p.id,pos:colpos,rowData:rdata};if(isFunction(cm.cellBuilder)){v=cm.cellBuilder.call(ts,cellval,opts,rwdat,act)}else{if(isFunction(cm.formatter)){v=cm.formatter.call(ts,cellval,opts,rwdat,act)}else{if($.fmatter){v=$.fn.fmatter.call(ts,cm.formatter,cellval,opts,rwdat,act)}else{v=cellVal(cellval)}}}}else{v=cellVal(cellval)}v=cm.autoResizable&&cm.formatter!=="actions"?"<span class='"+p.autoResizing.wrapperClassName+"'>"+v+"</span>":v;if(p.treeGrid&&act!=="edit"&&((p.ExpandColumn===undefined&&colpos===0)||(p.ExpandColumn===cm.name))){if(rdata==null){rdata=p.data[p._index[rowId]]}var curLevel=parseInt(rdata[p.treeReader.level_field]||0,10),levelOffset=18,rootLevel=parseInt(p.tree_root_level,10),lftpos=rootLevel===0?curLevel:curLevel-1,isLeaf=rdata[p.treeReader.leaf_field],isExpanded=rdata[p.treeReader.expanded_field],icon=rdata[p.treeReader.icon_field],iconClass=isLeaf?((icon!==undefined&&icon!=="")?icon:p.treeIcons.leaf)+" tree-leaf":(isExpanded?p.treeIcons.minus+" tree-minus":p.treeIcons.plus+" tree-plus");v="<div class='tree-wrap tree-wrap-"+p.direction+"' style='width:"+((lftpos+1)*levelOffset)+"px;'><div class='"+mergeCssClasses(p.treeIcons.commonIconClass,iconClass,"treeclick")+"' style='"+(p.ExpandColClick===true?"cursor:pointer;":"")+(p.direction==="rtl"?"right:":"left:")+(lftpos*levelOffset)+"px;'></div></div><span class='cell-wrapper"+(isLeaf?"leaf":"")+"'"+(p.ExpandColClick?" style='cursor:pointer;'":"")+">"+v+"</span>"}return v},emptyRows=function(scroll,locdata){var self=this,bDiv=grid.bDiv,frozenTable=grid.fbDiv!=null?grid.fbDiv.children(".ui-jqgrid-btable")[0]:null,removeRows=function(table){if(!table){return}var tableRows=table.rows,firstrow;if(p.deepempty){if(tableRows){$(tableRows).slice(1).remove()}}else{if(p.quickEmpty){while(tableRows.length>1){table.deleteRow(tableRows.length-1)}}else{firstrow=tableRows[0];$(table.firstChild).empty().append(firstrow)}}};$(self).unbind(".jqGridFormatter");removeRows(self);removeRows(frozenTable);if(scroll&&p.scroll){$(bDiv.firstChild).css({height:"auto"});$(bDiv.firstChild.firstChild).css({height:0,display:"none"});if(bDiv.scrollTop!==0){bDiv.scrollTop=0}}if(locdata===true&&p.treeGrid){clearArray(p.data);clearArray(p.lastSelectedData);p._index={}}p.rowIndexes={}},normalizeData=function(){var data=p.data,dataLength=data.length,i,cur,cells,idName,idIndex,v,rd,id,localReader=p.localReader,additionalProperties=p.additionalProperties,cellName=localReader.cell,cmName,isArrayCells,addProp,info,arrayReaderInfos=p.arrayReaderInfos;if(p.datatype!=="local"||localReader.repeatitems!==true){if(p.treeGrid){for(i=0;i<dataLength;i++){normalizeTreeGridProperties(data[i])}}return}idName=p.keyName===false?(isFunction(localReader.id)?localReader.id.call(ts,data):localReader.id):p.keyName;if(!isNaN(idName)){idIndex=Number(idName)}else{if(!isFunction(idName)){if(p.arrayReaderInfos[idName]!=null){idIndex=p.arrayReaderInfos[idName].order}}}for(i=0;i<dataLength;i++){cur=data[i];cells=cellName?getAccessor(cur,cellName)||cur:cur;isArrayCells=isArray(cells);rd={};for(cmName in arrayReaderInfos){if(arrayReaderInfos.hasOwnProperty(cmName)){info=arrayReaderInfos[cmName];v=getAccessor(cells,isArrayCells?info.order:info.name);if(info.type===1){addProp=additionalProperties[info.index];if(addProp!=null&&isFunction(addProp.convert)){v=addProp.convert(v)}}if(v!==undefined){rd[cmName]=v}}}if(rd[idName]!==undefined){id=rd[idName]!==undefined?rd[idName]:randId()}else{id=getAccessor(cur,isArray(cur)?idIndex:idName);if(id===undefined){id=getAccessor(cells,isArray(cells)?idIndex:idName)}if(id===undefined){id=randId()}}id=String(id);rd[localReader.id]=id;if(p.treeGrid){normalizeTreeGridProperties(rd)}extend(data[i],rd)}},refreshIndex=function(){var datalen=p.data.length,idname,i,val;if(p.keyName===false||p.loadonce){idname=p.localReader.id}else{idname=p.keyName}p._index={};for(i=0;i<datalen;i++){val=getAccessor(p.data[i],idname);if(val===undefined){val=String(i+1)}p._index[val]=i}},constructTr=function(id,hide,altClass,rd,cur,selected){var tabindex="-1",restAttr="",attrName,style=hide?"display:none;":"",self=this,classes=getGuiStyles("gridRow","jqgrow ui-row-"+p.direction)+(altClass?" "+altClass:"")+(selected?" "+getGuiStyles("states.select"):""),rowAttrObj=$(self).triggerHandler("jqGridRowAttr",[rd,cur,id]);if(typeof rowAttrObj!=="object"){rowAttrObj=isFunction(p.rowattr)?p.rowattr.call(self,rd,cur,id):(typeof p.rowattr==="string"&&jgrid.rowattr!=null&&isFunction(jgrid.rowattr[p.rowattr])?jgrid.rowattr[p.rowattr].call(self,rd,cur,id):{})}if(rowAttrObj!=null&&!$.isEmptyObject(rowAttrObj)){if(rowAttrObj.hasOwnProperty("id")){id=rowAttrObj.id;delete rowAttrObj.id}if(rowAttrObj.hasOwnProperty("tabindex")){tabindex=rowAttrObj.tabindex;delete rowAttrObj.tabindex}if(rowAttrObj.hasOwnProperty("style")){style+=rowAttrObj.style;delete rowAttrObj.style}if(rowAttrObj.hasOwnProperty("class")){classes+=" "+rowAttrObj["class"];delete rowAttrObj["class"]}try{delete rowAttrObj.role}catch(ignore){}for(attrName in rowAttrObj){if(rowAttrObj.hasOwnProperty(attrName)){restAttr+=" "+attrName+"="+rowAttrObj[attrName]}}}if(p.treeGrid){if(parseInt(rd[p.treeReader.level_field],10)!==parseInt(p.tree_root_level,10)){var parentId=rd[p.treeReader.parent_id_field],iParent=p._index[parentId],pn=iParent!=undefined?p.data[iParent]:null,expan=pn&&pn.hasOwnProperty(p.treeReader.expanded_field)?pn[p.treeReader.expanded_field]:true;if(!expan&&!hide){style+="display:none;"}}}return'<tr role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(style===""?"":' style="'+style+'"')+restAttr+">"},finalizationFormatters=function(){var i,formatName,fmatter=$.fn.fmatter;for(i=0;i<p.colModel.length;i++){formatName=p.colModel[i].formatter;if(typeof formatName==="string"&&fmatter!=null&&isFunction(fmatter[formatName])&&isFunction(fmatter[formatName].pageFinalization)){fmatter[formatName].pageFinalization.call(this,i)}}},fillOrClearCellBuilder=function(clear,act){var i,cm,colModel=p.colModel,n=colModel.length,opt,autoencodeCellBuilder=function(v){return v==null||v===""?"&#160;":htmlEncode(v)},simpleCellBuilder=function(v){return v==null||v===""?"&#160;":String(v)};for(i=0;i<n;i++){cm=colModel[i];cm.cellBuilder=null;if(!clear){opt={colModel:cm,gid:p.id,pos:i};if(cm.formatter===undefined){cm.cellBuilder=p.autoencode?autoencodeCellBuilder:simpleCellBuilder}else{if(typeof cm.formatter==="string"){cm.cellBuilder=$.fn.fmatter.getCellBuilder.call(ts,cm.formatter,opt,act||"add")}else{if(isFunction(cm.getCellBuilder)){cm.cellBuilder=cm.getCellBuilder.call(ts,opt,act||"add")}}}}}},readInput=function(data,rcnt,more,adjust){var self=this,$self=$(self),startReq=new Date(),datatype=p.datatype,readAllInputData=(datatype!=="local"&&p.loadonce)||datatype==="xmlstring"||datatype==="jsonstring",isXML=(datatype==="xmlstring"||datatype==="xml")&&$.isXMLDoc(data),locid="_id_",dataReader=p.localReader,fieldReader=getAccessor;if(data){if(datatype==="xml"&&!isXML){return}if(p.treeANode===-1&&!p.scroll){grid.emptyRows.call(self,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}if(readAllInputData){clearArray(p.data);clearArray(p.lastSelectedData);p._index={};p.localReader.id=locid}p.reccount=0;switch(datatype){case"xml":case"xmlstring":dataReader=p.xmlReader;fieldReader=jgrid.getXmlData;break;case"json":case"jsonp":case"jsonstring":dataReader=p.jsonReader;break;default:break}var i,cells,len,drows,idName,idIndex,rd={},idr,colModel=p.colModel,nCol=colModel.length,cm,cmName,iChild,children,nChildren,child,arrayReaderInfos=p.arrayReaderInfos,info,preloadedNodes={},attrReader=function(nodeName){return function(obj){var attrValue=obj.getAttribute(nodeName);return attrValue!==null?attrValue:undefined}},nodeReader=function(nodeName){return function(obj){var elem=preloadedNodes[nodeName],childNodes;if(elem==null){return undefined}childNodes=elem.childNodes;return childNodes.length>0?childNodes[0].nodeValue:undefined}};p.page=intNum(fieldReader(data,dataReader.page),p.page);p.lastpage=intNum(fieldReader(data,dataReader.total),1);p.records=intNum(fieldReader(data,dataReader.records));if(isFunction(dataReader.userdata)){p.userData=dataReader.userdata.call(self,data)||{}}else{if(isXML){fieldReader(data,dataReader.userdata,true).each(function(){p.userData[this.getAttribute("name")]=$(this).text()})}else{p.userData=fieldReader(data,dataReader.userdata)||{}}}fillOrClearCellBuilder();var colReader={},nameReader,isArrayCells,v,addProp,items,additionalProperties=p.additionalProperties,setSimpleColReaderIfPossible=function(nameReaderOrAddProp){if(isXML&&typeof nameReaderOrAddProp==="string"){if(/^\w+$/.test(nameReaderOrAddProp)){colReader[nameReaderOrAddProp]=nodeReader(nameReaderOrAddProp)}else{if(/^\[\w+\]$/.test(nameReaderOrAddProp)){colReader[nameReaderOrAddProp]=attrReader(nameReaderOrAddProp.substring(1,nameReaderOrAddProp.length-1))}}}};for(i=0;i<nCol;i++){cm=colModel[i];cmName=cm.name;if(cmName!=="cb"&&cmName!=="subgrid"&&cmName!=="rn"){nameReader=isXML?cm.xmlmap||cmName:(datatype==="local"&&!p.dataTypeOrg)||datatype==="json"||datatype==="jsonp"?cm.jsonmap||cmName:cmName;if(p.keyName!==false&&cm.key===true){p.keyName=cmName}if(typeof nameReader==="string"||isFunction(nameReader)){colReader[cmName]=nameReader}setSimpleColReaderIfPossible(cmName)}}nCol=additionalProperties.length;for(i=0;i<nCol;i++){addProp=additionalProperties[i];if(typeof addProp==="object"&&addProp!=null){addProp=addProp.name}setSimpleColReaderIfPossible(addProp)}idName=p.keyName===false?(isFunction(dataReader.id)?dataReader.id.call(self,data):dataReader.id):p.keyName;if(!isNaN(idName)){idIndex=Number(idName)}else{if(!isFunction(idName)){if(arrayReaderInfos[cmName]){idIndex=arrayReaderInfos[cmName].order}if(isXML){if(typeof idName==="string"&&/^\[\w+\]$/.test(idName)){idName=attrReader(idName.substring(1,idName.length-1))}else{if(typeof idName==="string"&&/^\w+$/.test(idName)){idName=nodeReader(idName)}}}}}drows=fieldReader(data,dataReader.root,true);if(dataReader.row){if(drows.length===1&&typeof dataReader.row==="string"&&/^\w+$/.test(dataReader.row)){items=[];children=drows[0].childNodes;nChildren=children.length;for(iChild=0;iChild<nChildren;iChild++){child=children[iChild];if(child.nodeType===1&&child.nodeName===dataReader.row){items.push(child)}}drows=items}else{drows=fieldReader(drows,dataReader.row,true)}}if(drows==null&&isArray(data)){drows=data}if(!drows){drows=[]}len=drows.length;if(len>0&&p.page<=0){p.page=1}var rn=parseInt(p.rowNum,10);if(adjust){rn*=adjust+1}var cellsToDisplay=[],ids=[],id,cur;items=[];for(i=0;i<len;i++){cur=drows[i];cells=dataReader.repeatitems&&dataReader.cell?fieldReader(cur,dataReader.cell,true)||cur:cur;isArrayCells=dataReader.repeatitems&&(isXML||isArray(cells));rd={};preloadedNodes={};if(isXML&&!isArrayCells&&cells!=null){children=cells.childNodes;nChildren=children.length;for(iChild=0;iChild<nChildren;iChild++){child=children[iChild];if(child.nodeType===1){preloadedNodes[child.nodeName]=child}}}for(cmName in arrayReaderInfos){if(arrayReaderInfos.hasOwnProperty(cmName)){info=arrayReaderInfos[cmName];if(isArrayCells){v=cells[info.order];if(isXML&&v!=null){v=v.textContent||v.text}}else{if(colReader[cmName]!=null&&typeof colReader[cmName]!=="string"){v=colReader[cmName](cells)}else{v=fieldReader(cells,typeof colReader[cmName]==="string"?colReader[cmName]:info.name)}}if(info.type===1){addProp=additionalProperties[info.index];if(addProp!=null&&isFunction(addProp.convert)){v=addProp.convert(v)}}if(v!==undefined){rd[cmName]=v}}}if(rd[idName]!==undefined){id=rd[idName]!==undefined?rd[idName]:randId()}else{id=fieldReader(cur,isArray(cur)?idIndex:idName);if(id===undefined){id=fieldReader(cells,isArray(cells)?idIndex:idName)}if(id===undefined){id=randId()}}id=String(id);idr=p.idPrefix+id;if(i<rn){ids.push(idr);cellsToDisplay.push(cells);items.push(rd)}else{if(!readAllInputData){break}}if(readAllInputData||p.treeGrid===true){rd[locid]=id;p.data.push(rd);p._index[rd[locid]]=p.data.length-1}}var rowData=jgrid.parseDataToHtml.call(self,len,ids,items,cellsToDisplay,rcnt,adjust,readAllInputData);fillOrClearCellBuilder(true);var fpos=p.treeANode>-1?p.treeANode:0;var $tbody=$(self.tBodies[0]);if(p.treeGrid===true&&fpos>0){$(self.rows[fpos]).after(rowData.join(""))}else{if(p.scroll){$tbody.append(rowData.join(""))}else{if(self.firstElementChild==null||(document.documentMode!=undefined&&document.documentMode<=9)){$tbody.html($tbody.html()+rowData.join(""));self.grid.cols=self.rows[0].cells}else{self.firstElementChild.innerHTML+=rowData.join("");self.grid.cols=self.rows[0].cells}}}if(p.grouping){rebuildRowIndexes.call(self)}if(p.subGrid===true){try{$j.addSubGrid.call($self,p.iColByName.subgrid)}catch(ignore){}}if(p.gridview===false||isFunction(p.afterInsertRow)){for(i=0;i<Math.min(len,rn);i++){feedback.call(self,"afterInsertRow",ids[i],items[i],cellsToDisplay[i])}}p.totaltime=new Date()-startReq;if(i>0){if(p.records===0){p.records=len}}clearArray(rowData);if(p.treeGrid===true){try{$j.setTreeNode.call($self,fpos+1,i+fpos+1)}catch(ignore){}}p.reccount=Math.min(len,rn);p.treeANode=-1;if(p.userDataOnFooter){$j.footerData.call($self,"set",p.userData,true)}if(readAllInputData){p.records=len;p.lastpage=Math.ceil(len/rn)}if(!more){self.updatepager(false,true)}finalizationFormatters.call(self)},addLocalData=function(){var $self=$(this),st=p.multiSort?[]:"",sto=[],fndsort=false,cmtypes={},grtypes=[],grindexes=[],srcformat,sorttype,newformat,dateDefaults=getRes("formatter.date");if(!isArray(p.data)){return{}}var grpview=p.grouping?p.groupingView:false,lengrp,gin;each(p.colModel,function(iCol){var cm=this,grindex=cm.index||cm.name;sorttype=cm.sorttype||"text";cmtypes[cm.name]={reader:!p.dataTypeOrg?cm.jsonmap||cm.name:cm.name,iCol:iCol,stype:sorttype,srcfmt:"",newfmt:"",sfunc:cm.sortfunc||null};if(sorttype==="date"||sorttype==="datetime"){if(cm.formatter&&typeof cm.formatter==="string"&&cm.formatter==="date"){if(cm.formatoptions&&cm.formatoptions.srcformat){srcformat=cm.formatoptions.srcformat}else{srcformat=dateDefaults.srcformat}if(cm.formatoptions&&cm.formatoptions.newformat){newformat=cm.formatoptions.newformat}else{newformat=dateDefaults.newformat}}else{srcformat=newformat=cm.datefmt||"Y-m-d"}cmtypes[cm.name].srcfmt=srcformat;cmtypes[cm.name].newfmt=newformat}if(p.grouping){for(gin=0,lengrp=grpview.groupField.length;gin<lengrp;gin++){if(cm.name===grpview.groupField[gin]){grtypes[gin]=cmtypes[grindex];grindexes[gin]=grindex}}}if(p.multiSort){if(cm.lso){st.push(cm.name);var tmplso=cm.lso.split("-");sto.push(tmplso[tmplso.length-1])}}else{if(!fndsort&&(cm.index===p.sortname||cm.name===p.sortname)){st=cm.name;fndsort=true}}});if(p.treeGrid){$j.SortTree.call($self,st,p.sortorder,cmtypes[st]!=null&&cmtypes[st].stype?cmtypes[st].stype:"text",cmtypes[st]!=null&&cmtypes[st].srcfmt?cmtypes[st].srcfmt:"");return false}var compareFnMap={eq:function(queryObj){return queryObj.equals},ne:function(queryObj){return queryObj.notEquals},lt:function(queryObj){return queryObj.less},le:function(queryObj){return queryObj.lessOrEquals},gt:function(queryObj){return queryObj.greater},ge:function(queryObj){return queryObj.greaterOrEquals},cn:function(queryObj){return queryObj.contains},nc:function(queryObj,op){return op==="OR"?queryObj.orNot().contains:queryObj.andNot().contains},bw:function(queryObj){return queryObj.startsWith},bn:function(queryObj,op){return op==="OR"?queryObj.orNot().startsWith:queryObj.andNot().startsWith},en:function(queryObj,op){return op==="OR"?queryObj.orNot().endsWith:queryObj.andNot().endsWith},ew:function(queryObj){return queryObj.endsWith},ni:function(queryObj,op){return op==="OR"?queryObj.orNot().equals:queryObj.andNot().equals},"in":function(queryObj){return queryObj.equals},nu:function(queryObj){return queryObj.isNull},nn:function(queryObj,op){return op==="OR"?queryObj.orNot().isNull:queryObj.andNot().isNull}},query=jgrid.from.call(this,p.data);if(p.ignoreCase){query=query.ignoreCase()}function tojLinq(group){var s=0,index,gor,ror,opr,rule,r,cmi;if(group.groups!=null){gor=group.groups.length&&group.groupOp.toString().toUpperCase()==="OR";if(gor){query.orBegin()}for(index=0;index<group.groups.length;index++){if(s>0&&gor){query.or()}try{tojLinq(group.groups[index])}catch(e){fatalErrorFunction(e)}s++}if(gor){query.orEnd()}}if(group.rules!=null){try{ror=group.rules.length&&group.groupOp.toString().toUpperCase()==="OR";if(ror){query.orBegin()}for(index=0;index<group.rules.length;index++){rule=group.rules[index];opr=group.groupOp.toString().toUpperCase();if(compareFnMap[rule.op]&&rule.field){if(s>0&&opr&&opr==="OR"){query=query.or()}cmi=cmtypes[rule.field];r=cmi.reader;query=compareFnMap[rule.op](query,opr)(isFunction(r)?'jQuery.jgrid.getAccessor(this,jQuery("'+p.idSel+'")[0].p.colModel['+cmi.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+r+"')",rule.data,cmtypes[rule.field])}else{if(p.customSortOperations!=null&&p.customSortOperations[rule.op]!=null&&isFunction(p.customSortOperations[rule.op].filter)){query=query.custom(rule.op,rule.field,rule.data)}}s++}if(ror){query.orEnd()}}catch(g){fatalErrorFunction(g)}}}if(p.search===true){var srules=p.postData.filters;if(srules){if(typeof srules==="string"){srules=jgrid.parse(srules)}tojLinq(srules)}else{try{query=compareFnMap[p.postData.searchOper](query)(p.postData.searchField,p.postData.searchString,cmtypes[p.postData.searchField])}catch(ignore){}}}if(p.grouping){for(gin=0;gin<lengrp;gin++){query.orderBy(grindexes[gin],grpview.groupOrder[gin],grtypes[gin].stype,grtypes[gin].srcfmt)}}if(p.multiSort){each(st,function(i){query.orderBy(this,sto[i],cmtypes[this].stype,cmtypes[this].srcfmt,cmtypes[this].sfunc)})}else{if(st&&p.sortorder&&fndsort){if(p.sortorder.toUpperCase()==="DESC"){query.orderBy(p.sortname,"d",cmtypes[st].stype,cmtypes[st].srcfmt,cmtypes[st].sfunc)}else{query.orderBy(p.sortname,"a",cmtypes[st].stype,cmtypes[st].srcfmt,cmtypes[st].sfunc)}}}p.lastSelectedData=query.select();var recordsperpage=parseInt(p.rowNum,10),total=p.lastSelectedData.length,page=parseInt(p.page,10),totalpages=Math.ceil(total/recordsperpage),retresult={};if(p.grouping&&p.groupingView._locgr){p.groupingView.groups=[];var j,key,udc;if(p.footerrow&&p.userDataOnFooter){for(key in p.userData){if(p.userData.hasOwnProperty(key)){p.userData[key]=0}}udc=true}for(j=0;j<total;j++){if(udc){for(key in p.userData){if(p.userData.hasOwnProperty(key)){p.userData[key]+=parseFloat(p.lastSelectedData[j][key]||0)}}}$j.groupingPrepare.call($self,p.lastSelectedData[j],j,recordsperpage)}}query=null;cmtypes=null;var localReader=p.localReader;retresult[localReader.total]=totalpages;retresult[localReader.page]=page;retresult[localReader.records]=total;retresult[localReader.root]=p.lastSelectedData.slice((page-1)*recordsperpage,page*recordsperpage);retresult[localReader.userdata]=p.userData;return retresult},setWidthOfPagerTdWithPager=function($pgTable){var self=this,w=$pgTable.outerWidth(),fontSize;if(w<=0){fontSize=$(self).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";$(document.body).append("<div id='testpg' class='"+getGuiStyles("gBox","ui-jqgrid")+"' style='font-size:"+fontSize+";visibility:hidden;margin:0;padding:0;' ></div>");$($pgTable).clone().appendTo("#testpg");w=$("#testpg>.ui-pg-table").width();$("#testpg").remove()}if(w>0){$pgTable.parent().width(w)}return w},updatepager=function(rn,dnd){var self=this,$self=$(self),gridSelf=self.grid,cp,last,base,from,to,tot,fmt,pgboxes=p.pager||"",sppg,tspg=p.pager?"_"+p.pager.substr(1):"",bDiv=gridSelf.bDiv,numberFormat=$.fmatter?$.fmatter.NumberFormat:null,tspgTop=p.toppager?"_"+p.toppager.substr(1):"",hoverClasses=getGuiStyles("states.hover"),disabledClasses=getGuiStyles("states.disabled");base=parseInt(p.page,10)-1;if(base<0){base=0}base=base*parseInt(p.rowNum,10);to=base+p.reccount;if(p.scroll){var rows=$(getGridComponent(COMPONENT_NAMES.BODY_TABLE,bDiv)[0].rows).slice(1);base=to-rows.length;p.reccount=rows.length;var rh=rows.outerHeight()||gridSelf.prevRowHeight;if(rh){var top=base*rh;var height=jgrid.fixMaxHeightOfDiv.call(self,parseInt(p.records,10)*rh);$(bDiv).children("div").first().css({height:height+"px"}).children("div").first().css({height:top+"px",display:top+"px"?"":"none"});if(bDiv.scrollTop===0&&p.page>1){bDiv.scrollTop=p.rowNum*(p.page-1)*rh}}bDiv.scrollLeft=gridSelf.hDiv.scrollLeft}pgboxes+=p.toppager?(pgboxes?",":"")+p.toppager:"";if(pgboxes){fmt=getRes("formatter.integer")||{};cp=intNum(p.page);last=intNum(p.lastpage);$(".selbox",pgboxes)[propOrAttr]("disabled",false);if(p.pginput===true){$(".ui-pg-input",pgboxes).val(p.page);sppg=p.toppager?"#sp_1"+tspg+",#sp_1"+tspgTop:"#sp_1"+tspg;$(sppg).html($.fmatter?numberFormat(p.lastpage,fmt):p.lastpage).closest(".ui-pg-table").each(function(){setWidthOfPagerTdWithPager.call(self,$(this))})}if(p.viewrecords){if(p.reccount===0){$(".ui-paging-info",pgboxes).html(getDef("emptyrecords"))}else{from=base+1;tot=p.records;if($.fmatter){from=numberFormat(from,fmt);to=numberFormat(to,fmt);tot=numberFormat(tot,fmt)}$(".ui-paging-info",pgboxes).html(jgrid.format(getDef("recordtext"),from,to,tot))}}if(p.pgbuttons===true){if(cp<=0){cp=last=0}if(cp===1||cp===0){$("#first"+tspg+", #prev"+tspg).addClass(disabledClasses).removeClass(hoverClasses);if(p.toppager){$("#first_t"+tspgTop+", #prev_t"+tspgTop).addClass(disabledClasses).removeClass(hoverClasses)}}else{$("#first"+tspg+", #prev"+tspg).removeClass(disabledClasses);if(p.toppager){$("#first_t"+tspgTop+", #prev_t"+tspgTop).removeClass(disabledClasses)}}if(cp===last||cp===0){$("#next"+tspg+", #last"+tspg).addClass(disabledClasses).removeClass(hoverClasses);if(p.toppager){$("#next_t"+tspgTop+", #last_t"+tspgTop).addClass(disabledClasses).removeClass(hoverClasses)}}else{$("#next"+tspg+", #last"+tspg).removeClass(disabledClasses);if(p.toppager){$("#next_t"+tspgTop+", #last_t"+tspgTop).removeClass(disabledClasses)}}}}if(rn===true&&p.rownumbers===true){$(">td.jqgrid-rownum",self.rows).each(function(i){$(this).html(base+1+i)})}if(dnd&&p.jqgdnd){$self.jqGrid("gridDnD","updateDnD")}feedback.call(self,"gridComplete");$self.triggerHandler("jqGridAfterGridComplete")},beginReq=function(){var self=this;self.grid.hDiv.loading=true;if(p.hiddengrid){return}$j.progressBar.call($(self),{method:"show",loadtype:p.loadui,htmlcontent:getDef("loadtext")})},endReq=function(){var self=this;self.grid.hDiv.loading=false;$j.progressBar.call($(self),{method:"hide",loadtype:p.loadui})},populate=function(npage){var self=this,$self=$(self),gridSelf=self.grid;if(!gridSelf.hDiv.loading){var pvis=p.scroll&&npage===false,prm={},dt,dstr,pN=p.prmNames;if(p.page<=0){p.page=Math.min(1,p.lastpage)}if(pN.search!==null){prm[pN.search]=p.search}if(pN.nd!==null){prm[pN.nd]=new Date().getTime()}if(isNaN(parseInt(p.rowNum,10))||parseInt(p.rowNum,10)<=0){p.rowNum=p.maxRowNum}if(pN.rows!==null){prm[pN.rows]=p.rowNum}if(pN.page!==null){prm[pN.page]=p.page}if(pN.sort!==null){prm[pN.sort]=p.sortname}if(pN.order!==null){prm[pN.order]=p.sortorder}if(p.rowTotal!==null&&pN.totalrows!==null){prm[pN.totalrows]=p.rowTotal}var lcf=isFunction(p.loadComplete),lc=lcf?p.loadComplete:null;var adjust=0;npage=npage||1;if(npage>1){if(pN.npage!==null){prm[pN.npage]=npage;adjust=npage-1;npage=1}else{lc=function(req){p.page++;gridSelf.hDiv.loading=false;if(lcf){p.loadComplete.call(self,req)}populate.call(self,npage-1)}}}else{if(pN.npage!==null){delete p.postData[pN.npage]}}if(p.grouping){$j.groupingSetup.call($self);var grp=p.groupingView,gi,gs="",index,iColumn,cmValue;for(gi=0;gi<grp.groupField.length;gi++){index=grp.groupField[gi];for(iColumn=0;iColumn<p.colModel.length;iColumn++){cmValue=p.colModel[iColumn];if(cmValue.name===index&&cmValue.index){index=cmValue.index}}gs+=index+" "+grp.groupOrder[gi]+", "}prm[pN.sort]=gs+prm[pN.sort]}extend(p.postData,prm);var rcnt=!p.scroll?1:self.rows.length-1,fixDisplayingHorizontalScrollbar=function(){var gBodyWidth=$self.width(),gViewWidth=$self.closest(".ui-jqgrid-view").width(),gridCssHeight=$self.css("height");if(gViewWidth<gBodyWidth&&p.reccount===0){$self.css("height","1px")}else{if(gridCssHeight!=="0"&&gridCssHeight!=="0px"){$self.css("height","")}}},resort=function(){var iRes;if(p.autoresizeOnLoad){$j.autoResizeAllColumns.call($self);clearArray(p.columnsToReResizing)}else{for(iRes=0;iRes<p.columnsToReResizing.length;iRes++){$j.autoResizeColumn.call($self,p.columnsToReResizing[iRes])}clearArray(p.columnsToReResizing)}},finalReportSteps=function(){feedback.call(self,"loadComplete",dstr);resort();$self.triggerHandler("jqGridAfterLoadComplete",[dstr]);endReq.call(self);p.datatype="local";p.datastr=null;fixScrollOffsetAndhBoxPadding.call(self);fixDisplayingHorizontalScrollbar()},finalReportVirtual=function(data){$self.triggerHandler("jqGridLoadComplete",[data]);if(lc){lc.call(self,data)}resort();$self.triggerHandler("jqGridAfterLoadComplete",[data]);if(pvis){gridSelf.populateVisible.call(self)}if(npage===1){endReq.call(self)}fixScrollOffsetAndhBoxPadding.call(self);fixDisplayingHorizontalScrollbar()};if(!feedback.call(self,"beforeRequest")){return}if(isFunction(p.datatype)){p.datatype.call(self,p.postData,"load_"+p.id,rcnt,npage,adjust);return}dt=p.datatype.toLowerCase();switch(dt){case"json":case"jsonp":case"xml":case"script":$.ajax(extend({url:p.url,type:p.mtype,dataType:dt,data:jgrid.serializeFeedback.call(ts,p.serializeGridData,"jqGridSerializeGridData",p.postData),success:function(data,textStatus,jqXHR){if(isFunction(p.beforeProcessing)){if(p.beforeProcessing.call(self,data,textStatus,jqXHR)===false){endReq.call(self);return}}readInput.call(self,data,rcnt,npage>1,adjust);finalReportVirtual(data);if(p.loadonce||p.treeGrid){p.dataTypeOrg=p.datatype;p.datatype="local"}},error:function(jqXHR,textStatus,errorThrown){if(isFunction(p.loadError)){p.loadError.call(self,jqXHR,textStatus,errorThrown)}if(npage===1){endReq.call(self)}},beforeSend:function(jqXHR,settings){var gotoreq=true;if(isFunction(p.loadBeforeSend)){gotoreq=p.loadBeforeSend.call(self,jqXHR,settings)}if(gotoreq===undefined){gotoreq=true}if(gotoreq===false){return false}beginReq.call(self)}},jgrid.ajaxOptions,p.ajaxGridOptions));break;case"xmlstring":beginReq.call(self);dstr=typeof p.datastr==="string"?$.parseXML(p.datastr):p.datastr;readInput.call(self,dstr);finalReportSteps();break;case"jsonstring":beginReq.call(self);dstr=typeof p.datastr==="string"?jgrid.parse(p.datastr):p.datastr;readInput.call(self,dstr);finalReportSteps();break;case"local":case"clientside":beginReq.call(self);p.datatype="local";var req=addLocalData.call(self);readInput.call(self,req,rcnt,npage>1,adjust);finalReportVirtual(req);break}}},setHeadCheckBox=function(checked){var self=this,gridSelf=self.grid;$(p.cb,gridSelf.hDiv)[p.propOrAttr]("checked",checked);if(p.frozenColumns){$(p.cb,gridSelf.fhDiv)[p.propOrAttr]("checked",checked)}},setPager=function(pgid,tp){var hoverClasses=getGuiStyles("states.hover"),disabledClasses=getGuiStyles("states.disabled"),sep="<td class='ui-pg-button "+disabledClasses+"'><span class='ui-separator'></span></td>",pginp="",blockAlign=p.pagerpos==="left"?"margin-right:auto;":(p.pagerpos==="right"?"margin-left:auto;":"margin-left:auto;margin-right:auto;"),pgl="<table "+(isMSIE7?"cellspacing='0' ":"")+"style='table-layout:auto;white-space: pre;"+blockAlign+"' class='ui-pg-table'><tbody><tr>",str="",pgcnt,lft,cent,rgt,twd,i,clearVals=function(onpaging,newPage,newRowNum){if(!feedback.call(ts,"onPaging",onpaging,{newPage:newPage,currentPage:intNum(p.page,1),lastPage:intNum(p.lastpage,1),currentRowNum:intNum(p.rowNum,10),newRowNum:newRowNum})){return false}p.selrow=null;if(p.multiselect){clearArray(p.selarrrow);setHeadCheckBox.call(ts,false)}clearArray(p.savedRow);return true};tp+="_"+pgid;pgcnt="pg_"+pgid;lft=pgid+"_left";cent=pgid+"_center";rgt=pgid+"_right";$("#"+jqID(pgid)).append("<div id='"+pgcnt+"' class='ui-pager-control' role='group'><table "+(isMSIE7?"cellspacing='0' ":"")+"class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+lft+"' style='text-align:left;'></td><td id='"+cent+"' style='text-align:center;white-space:pre;'></td><td id='"+rgt+"' style='text-align:right;'></td></tr></tbody></table></div>").attr("dir","ltr");pgcnt="#"+jqID(pgcnt);if(p.rowList.length>0){str="<td dir='"+dir+"'>";var pgrecs=getDef("pgrecs");str+="<select class='"+getGuiStyles("pagerSelect","ui-pg-selbox")+"' role='listbox' "+(pgrecs?"title='"+pgrecs+"'":"")+">";var strnm;for(i=0;i<p.rowList.length;i++){strnm=p.rowList[i].toString().split(":");if(strnm.length===1){strnm[1]=strnm[0]}str+='<option role="option" value="'+strnm[0]+'"'+((intNum(p.rowNum,0)===intNum(strnm[0],0))?' selected="selected"':"")+">"+strnm[1]+"</option>"}str+="</select></td>"}if(dir==="rtl"){pgl+=str}if(p.pginput===true){pginp="<td dir='"+dir+"'>"+jgrid.format(getDef("pgtext")||"","<input class='"+getGuiStyles("pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+pgid+"'>0</span>")+"</td>"}pgid="#"+jqID(pgid);if(p.pgbuttons===true){var po=["first","prev","next","last"],buttonClasses=getGuiStyles("pagerButton","ui-pg-button"),buildPagerButton=function(buttonName){var titleText=getDef("pg"+buttonName);return"<td role='button' tabindex='0' id='"+buttonName+tp+"' class='"+buttonClasses+"' "+(titleText?"title='"+titleText+"'":"")+"><span class='"+getIcon("pager."+buttonName)+"'></span></td>"};if(dir==="rtl"){po.reverse()}for(i=0;i<po.length;i++){pgl+=buildPagerButton(po[i]);if(i===1){pgl+=pginp!==""?sep+pginp+sep:""}}}else{if(pginp!==""){pgl+=pginp}}if(dir==="ltr"){pgl+=str}pgl+="</tr></tbody></table>";if(p.viewrecords===true){$("td"+pgid+"_"+p.recordpos,pgcnt).append("<span dir='"+dir+"' style='text-align:"+p.recordpos+"' class='ui-paging-info'></span>")}var $pagerIn=$("td"+pgid+"_"+p.pagerpos,pgcnt);$pagerIn.append(pgl);twd=setWidthOfPagerTdWithPager.call(this,$pagerIn.children(".ui-pg-table"));p._nvtd=[];p._nvtd[0]=twd?Math.floor((p.width-twd)/2):Math.floor(p.width/3);p._nvtd[1]=0;pgl=null;$(".ui-pg-selbox",pgcnt).bind("change",function(){var newRowNum=intNum(this.value,10),newPage=Math.round(p.rowNum*(p.page-1)/newRowNum-0.5)+1;if(!clearVals("records",newPage,newRowNum)){return false}p.page=newPage;p.rowNum=newRowNum;if(p.pager){$(".ui-pg-selbox",p.pager).val(newRowNum)}if(p.toppager){$(".ui-pg-selbox",p.toppager).val(newRowNum)}populate.call(ts);return false});if(p.pgbuttons===true){$(".ui-pg-button",pgcnt).hover(function(){if(hasOneFromClasses(this,disabledClasses)){this.style.cursor="default"}else{$(this).addClass(hoverClasses);this.style.cursor="pointer"}},function(){if(!hasOneFromClasses(this,disabledClasses)){$(this).removeClass(hoverClasses);this.style.cursor="default"}});$("#first"+jqID(tp)+", #prev"+jqID(tp)+", #next"+jqID(tp)+", #last"+jqID(tp)).click(function(){if(hasOneFromClasses(this,disabledClasses)){return false}var cp=intNum(p.page,1),newPage=cp,onpaging=this.id,last=intNum(p.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp===last){np=false;lp=false}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(this.id==="first"+tp&&fp){onpaging="first";newPage=1;selclick=true}if(this.id==="prev"+tp&&pp){onpaging="prev";newPage=(cp-1);selclick=true}if(this.id==="next"+tp&&np){onpaging="next";newPage=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){onpaging="last";newPage=last;selclick=true}if(!clearVals(onpaging,newPage,intNum(p.rowNum,10))){return false}p.page=newPage;if(selclick){populate.call(ts)}return false})}if(p.pginput===true){$("input.ui-pg-input",pgcnt).keypress(function(e){var key=e.charCode||e.keyCode||0,newPage=intNum($(this).val(),1);if(key===13){if(!clearVals("user",newPage,intNum(p.rowNum,10))){return false}$(this).val(newPage);p.page=($(this).val()>0)?$(this).val():p.page;populate.call(ts);return false}return this})}$pagerIn.children(".ui-pg-table").bind("keydown.jqGrid",function(e){var $focused;if(e.which===13){$focused=$pagerIn.find(":focus");if($focused.length>0){$focused.trigger("click");return false}}})},multiSort=function(iCol,obj){var splas,sort="",colModel=p.colModel,cm=colModel[iCol],fs=false,so="",disabledClasses=getGuiStyles("states.disabled"),$selTh=p.frozenColumns?$(obj):$(ts.grid.headers[iCol].el),$iconsSpan=$selTh.find("span.s-ico"),$iconAsc=$iconsSpan.children("span.ui-icon-asc"),$iconDesc=$iconsSpan.children("span.ui-icon-desc"),$iconsActive=$iconAsc,$iconsInictive=$iconDesc;$selTh.find("span.ui-grid-ico-sort").addClass(disabledClasses);$selTh.attr("aria-selected","false");if(cm.lso){if(cm.lso==="asc"){cm.lso+="-desc";so="desc";$iconsActive=$iconDesc;$iconsInictive=$iconAsc}else{if(cm.lso==="desc"){cm.lso+="-asc";so="asc"}else{if(cm.lso==="asc-desc"||cm.lso==="desc-asc"){cm.lso="";if(!p.viewsortcols[0]){$iconsSpan.hide()}}}}}else{cm.lso=so=cm.firstsortorder||"asc";$iconsActive=$iconAsc;$iconsInictive=$iconDesc}if(so){$iconsSpan.show();$iconsActive.removeClass(disabledClasses).css("display","");if(p.showOneSortIcon){$iconsInictive.hide()}$selTh.attr("aria-selected","true")}p.sortorder="";each(colModel,function(i){if(this.lso){if(i>0&&fs){sort+=", "}splas=this.lso.split("-");sort+=colModel[i].index||colModel[i].name;sort+=" "+splas[splas.length-1];fs=true;p.sortorder=splas[splas.length-1]}});sort=sort.substring(0,sort.lastIndexOf(p.sortorder));p.sortname=sort},sortData=function(index,idxcol,reload,sor,obj){var self=this,mygrid=self.grid,disabledClasses=getGuiStyles("states.disabled");if(!p.colModel[idxcol].sortable){return}if(p.savedRow.length>0){return}if(!reload){if(p.lastsort===idxcol&&p.sortname!==""){if(p.sortorder==="asc"){p.sortorder="desc"}else{if(p.sortorder==="desc"){p.sortorder="asc"}}}else{p.sortorder=p.colModel[idxcol].firstsortorder||"asc"}p.page=1}if(p.multiSort){multiSort(idxcol,obj)}else{if(sor){if(p.lastsort===idxcol&&p.sortorder===sor&&!reload){return}p.sortorder=sor}var headers=mygrid.headers,fhDiv=mygrid.fhDiv,$previousSelectedTh=headers[p.lastsort]?$(headers[p.lastsort].el):$(),$newSelectedTh=p.frozenColumns?$(obj):$(headers[idxcol].el),$iconsSpan=$newSelectedTh.find("span.s-ico"),cm=p.colModel[p.lastsort],$iconsActive=$iconsSpan.children("span.ui-icon-"+p.sortorder),$iconsInictive=$iconsSpan.children("span.ui-icon-"+(p.sortorder==="asc"?"desc":"asc"));$previousSelectedTh.find("span.ui-grid-ico-sort").addClass(disabledClasses);$previousSelectedTh.attr("aria-selected","false");if(p.frozenColumns){fhDiv.find("span.ui-grid-ico-sort").addClass(disabledClasses);fhDiv.find("th").attr("aria-selected","false")}$iconsActive.removeClass(disabledClasses).css("display","");if(p.showOneSortIcon){$iconsInictive.removeClass(disabledClasses).hide()}$newSelectedTh.attr("aria-selected","true");if(!p.viewsortcols[0]){if(p.lastsort!==idxcol){if(p.frozenColumns){fhDiv.find("span.s-ico").hide()}$previousSelectedTh.find("span.s-ico").hide();$iconsSpan.show()}else{if(p.sortname===""){$iconsSpan.show()}}}if(p.lastsort!==idxcol){if($previousSelectedTh.data("autoResized")==="true"&&((cm!=null&&cm.autoResizing!=null&&cm.autoResizing.compact)||p.autoResizing.compact)){p.columnsToReResizing.push(p.lastsort)}}if(p.lastsort!==idxcol&&$newSelectedTh.data("autoResized")==="true"){cm=p.colModel[idxcol];if((cm!=null&&cm.autoResizing!=null&&cm.autoResizing.compact)||p.autoResizing.compact){p.columnsToReResizing.push(idxcol)}}index=index.substring(5+p.id.length+1);p.sortname=p.colModel[idxcol].index||index}if(!feedback.call(self,"onSortCol",p.sortname,idxcol,p.sortorder)){p.lastsort=idxcol;return}if(p.datatype==="local"){if(p.deselectAfterSort){$j.resetSelection.call($(self))}}else{p.selrow=null;if(p.multiselect){setHeadCheckBox.call(self,false)}clearArray(p.selarrrow);clearArray(p.savedRow)}if(p.scroll){var sscroll=mygrid.bDiv.scrollLeft;grid.emptyRows.call(self,true,false);mygrid.hDiv.scrollLeft=sscroll}if(p.subGrid&&p.datatype==="local"){$("td.sgexpanded","#"+jqID(p.id)).each(function(){$(this).trigger("click")})}populate.call(self);p.lastsort=idxcol;if(p.sortname!==index&&idxcol){p.lastsort=idxcol}},setInitialColWidth=function(){var initialWidth=0,borderAndPaddingWidth=jgrid.cell_width?0:intNum(p.cellLayout,0),numberOfVariableColumns=0,iLastVariableColumn,scrollbarWidth=intNum(p.scrollOffset,0),columnWidth,hasScrollbar=false,totalVariableWidth,fixedColumnsWidth=0,correctur;each(p.colModel,function(){if(this.hidden===undefined){this.hidden=false}if(p.grouping&&p.autowidth){var ind=inArray(this.name,p.groupingView.groupField);if(ind>=0&&p.groupingView.groupColumnShow.length>ind){this.hidden=!p.groupingView.groupColumnShow[ind]}}this.widthOrg=columnWidth=intNum(this.width,0);if(this.hidden===false){initialWidth+=columnWidth+borderAndPaddingWidth;if(this.fixed){fixedColumnsWidth+=columnWidth+borderAndPaddingWidth}else{numberOfVariableColumns++}}});if(isNaN(p.width)){p.width=initialWidth+((p.shrinkToFit===false&&!isNaN(p.height))?scrollbarWidth:0)}grid.width=p.width;p.tblwidth=initialWidth;if(p.shrinkToFit===false&&p.forceFit===true){p.forceFit=false}if(p.shrinkToFit===true&&numberOfVariableColumns>0){totalVariableWidth=grid.width-borderAndPaddingWidth*numberOfVariableColumns-fixedColumnsWidth;if(!isNaN(p.height)){totalVariableWidth-=scrollbarWidth;hasScrollbar=true}initialWidth=0;each(p.colModel,function(i){if(this.hidden===false&&!this.fixed){columnWidth=Math.round(totalVariableWidth*this.width/(p.tblwidth-borderAndPaddingWidth*numberOfVariableColumns-fixedColumnsWidth));this.width=columnWidth;initialWidth+=columnWidth;iLastVariableColumn=i}});correctur=0;if(hasScrollbar){if(grid.width-fixedColumnsWidth-(initialWidth+borderAndPaddingWidth*numberOfVariableColumns)!==scrollbarWidth){correctur=grid.width-fixedColumnsWidth-(initialWidth+borderAndPaddingWidth*numberOfVariableColumns)-scrollbarWidth}}else{if(!hasScrollbar&&Math.abs(grid.width-fixedColumnsWidth-(initialWidth+borderAndPaddingWidth*numberOfVariableColumns))!==1){correctur=grid.width-fixedColumnsWidth-(initialWidth+borderAndPaddingWidth*numberOfVariableColumns)}}p.colModel[iLastVariableColumn].width+=correctur;p.tblwidth=initialWidth+correctur+borderAndPaddingWidth*numberOfVariableColumns+fixedColumnsWidth;if(p.tblwidth>p.width){p.colModel[iLastVariableColumn].width-=(p.tblwidth-parseInt(p.width,10));p.tblwidth=p.width}}},nextVisible=function(iCol){var ret=iCol,j=iCol,i;for(i=iCol+1;i<p.colModel.length;i++){if(p.colModel[i].hidden!==true){j=i;break}}return j-ret},getColumnHeaderIndex=function(th){return p.iColByName[(th.id||"").substring(p.id.length+1)]},colTemplate;if(inArray(p.multikey,sortkeys)===-1){p.multikey=false}p.keyName=false;p.sortorder=p.sortorder.toLowerCase();jgrid.cell_width=jgrid.cellWidth();var jgridCmTemplate=jgrid.cmTemplate;for(iCol=0;iCol<p.colModel.length;iCol++){colTemplate=typeof p.colModel[iCol].template==="string"?(jgridCmTemplate!=null&&(typeof jgridCmTemplate[p.colModel[iCol].template]==="object"||$.isFunction(jgridCmTemplate[p.colModel[iCol].template]))?jgridCmTemplate[p.colModel[iCol].template]:{}):p.colModel[iCol].template;if(isFunction(colTemplate)){colTemplate=colTemplate.call(ts,{cm:p.colModel[iCol],iCol:iCol})}p.colModel[iCol]=extend(true,{},p.cmTemplate,colTemplate||{},p.colModel[iCol]);if(p.keyName===false&&p.colModel[iCol].key===true){p.keyName=p.colModel[iCol].name}}if(p.grouping===true){p.scroll=false;p.rownumbers=false;p.treeGrid=false;p.gridview=true}if(p.subGrid){try{$j.setSubGrid.call($self0)}catch(ignore){}}if(p.multiselect&&(p.multiselectPosition==="left"||p.multiselectPosition==="right")){var insertMethod=p.multiselectPosition==="left"?"unshift":"push";p.colNames[insertMethod]("<input role='checkbox' id='"+p.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>");p.colModel[insertMethod]({name:"cb",width:jgrid.cell_width?p.multiselectWidth+p.cellLayout:p.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true,frozen:true})}if(p.rownumbers){p.colNames.unshift("");p.colModel.unshift({name:"rn",width:jgrid.cell_width?p.rownumWidth+p.cellLayout:p.rownumWidth,labelClasses:"jqgh_rn",classes:"td_rn",sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true,frozen:true})}p.iColByName=buildColNameMap(p.colModel);p.xmlReader=extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},p.xmlReader);p.jsonReader=extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},p.jsonReader);p.localReader=extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},p.localReader);if(p.scroll){p.pgbuttons=false;p.pginput=false;p.rowList=[]}if(p.treeGrid===true){try{$j.setTreeGrid.call($self0)}catch(ignore){}if(p.datatype!=="local"){p.localReader={id:"_id_"}}p.iPropByName=buildAddPropMap(p.additionalProperties)}normalizeRemapColumns();buildArrayReader();if(p.data.length){normalizeData.call(ts);refreshIndex()}if(p.shrinkToFit===true&&p.forceFit===true){for(iCol=p.colModel.length-1;iCol>=0;iCol--){if(p.colModel[iCol].hidden!==true){p.colModel[iCol].resizable=false;break}}}var tdc,idn,w,res,sort,cmi,tooltip,labelStyle,ptr,tbody,sortarr=[],sortord=[],sotmp=[],thead="<thead><tr class='ui-jqgrid-labels' role='row'>",hoverStateClasses=getGuiStyles("states.hover"),disabledStateClasses=getGuiStyles("states.disabled");tdc=isMSIE?"ui-th-div-ie":"";if(p.multiSort){sortarr=p.sortname.split(",");var iSort;for(iSort=0;iSort<sortarr.length;iSort++){sotmp=trim(sortarr[iSort]).split(" ");sortarr[iSort]=trim(sotmp[0]);sortord[iSort]=sotmp[1]?trim(sotmp[1]):p.sortorder||"asc"}}for(iCol=0;iCol<p.colNames.length;iCol++){cmi=p.colModel[iCol];tooltip=p.headertitles?(' title="'+stripHtml(p.colNames[iCol])+'"'):"";thead+="<th id='"+p.id+"_"+cmi.name+"' role='columnheader' class='"+getGuiStyles("colHeaders","ui-th-column ui-th-"+dir)+"'"+tooltip+">";idn=cmi.index||cmi.name;switch(cmi.labelAlign){case"left":labelStyle="text-align:left;";break;case"right":labelStyle="text-align:right;"+(cmi.sortable===false?"":"padding-right:"+p.autoResizing.widthOfVisiblePartOfSortIcon+"px;");break;case"likeData":labelStyle=cmi.align===undefined||cmi.align==="left"?"text-align:left;":(cmi.align==="right"?"text-align:right;"+(cmi.sortable===false?"":"padding-right:"+p.autoResizing.widthOfVisiblePartOfSortIcon+"px;"):"");break;default:labelStyle=""}thead+="<div id='jqgh_"+p.id+"_"+cmi.name+"'"+(tdc===""&&!cmi.labelClasses?"":" class='"+(tdc!==""?tdc+" ":"")+(cmi.labelClasses||"")+"'")+(labelStyle===""?"":" style='"+labelStyle+"'")+">"+(cmi.autoResizable&&cmi.formatter!=="actions"?"<span class='"+p.autoResizing.wrapperClassName+"'>"+p.colNames[iCol]+"</span>":p.colNames[iCol]);cmi.width=cmi.width?parseInt(cmi.width,10):150;if(typeof cmi.title!=="boolean"){cmi.title=true}cmi.lso="";if(idn===p.sortname){p.lastsort=iCol}if(p.multiSort){sotmp=inArray(idn,sortarr);if(sotmp!==-1){cmi.lso=sortord[sotmp]}}thead+=(p.builderSortIcons||jgrid.builderSortIcons).call(ts,iCol)+"</div></th>"}thead+="</tr></thead>";$self0.append(thead);$(ts.tHead).children("tr").children("th").hover(function(){$(this).addClass(hoverStateClasses)},function(){$(this).removeClass(hoverStateClasses)});if(p.multiselect){$(p.cb,ts).bind("click",function(){clearArray(p.selarrrow);var highlightClass=getGuiStyles("states.select"),toCheck,emp=[],iColCb=p.iColByName.cb,selectUnselectRow=function(tr,toSelect){$(tr)[toSelect?"addClass":"removeClass"](highlightClass).attr(toSelect?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"});if(iColCb!==undefined){$(tr.cells[iColCb]).children("input.cbox")[p.propOrAttr]("checked",toSelect)}},frozenRows=grid.fbRows,skipClasses=disabledStateClasses+" ui-subgrid jqgroup jqfoot jqgfirstrow";if(this.checked){toCheck=true;p.selrow=ts.rows.length>1?ts.rows[ts.rows.length-1].id:null}else{toCheck=false;p.selrow=null}$(ts.rows).each(function(i){if(!hasOneFromClasses(this,skipClasses)){selectUnselectRow(this,toCheck);(toCheck?p.selarrrow:emp).push(this.id);if(frozenRows){selectUnselectRow(frozenRows[i],toCheck)}}});feedback.call(ts,"onSelectAll",toCheck?p.selarrrow:emp,toCheck)}).closest("th.ui-th-column").css("padding","0")}if(p.autowidth===true){var pw=Math.floor($(eg).innerWidth());p.width=pw>0?pw:"nw"}p.widthOrg=p.width;setInitialColWidth();$(eg).css("width",grid.width+"px").append("<div class='"+getGuiStyles("resizer","ui-jqgrid-resize-mark")+"' id='"+p.rsId+"'>&#160;</div>");$(p.rs).bind("selectstart",function(){return false}).click(myResizerClickHandler).dblclick(function(e){var iColIndex=$(this).data("idx"),pageX=$(this).data("pageX"),cm=p.colModel[iColIndex];if(pageX==null){return false}var arPageX=String(pageX).split(";"),pageX1=parseFloat(arPageX[0]),pageX2=parseFloat(arPageX[1]);if(arPageX.length===2&&(Math.abs(pageX1-pageX2)>5||Math.abs(e.pageX-pageX1)>5||Math.abs(e.pageX-pageX2)>5)){return false}if(feedback.call(ts,"resizeDblClick",iColIndex,cm,e)&&cm!=null&&cm.autoResizable){$j.autoResizeColumn.call($self0,iColIndex)}return false});$(gv).css("width",grid.width+"px");var tfoot="";if(p.footerrow){tfoot+="<table role='presentation' style='width:"+p.tblwidth+"px' class='ui-jqgrid-ftable'"+(isMSIE7?" cellspacing='0'":"")+"><tbody><tr role='row' class='"+getGuiStyles("rowFooter","footrow footrow-"+dir)+"'>"}var firstr="<tr class='jqgfirstrow' role='row' style='height:auto'>";p.disableClick=false;$("th",ts.tHead.rows[0]).each(function(j){var cm=p.colModel[j],nm=cm.name,$th=$(this),$sortableDiv=$th.children("div"),$iconsSpan=$sortableDiv.children("span.s-ico"),showOneSortIcon=p.showOneSortIcon;w=cm.width;if(cm.resizable===undefined){cm.resizable=true}if(cm.resizable){res=document.createElement("span");$(res).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+dir).bind("selectstart",function(){return false});$th.addClass(p.resizeclass)}else{res=""}$th.css("width",w+"px").prepend(res);res=null;var hdcol="";if(cm.hidden===true){$th.css("display","none");hdcol="display:none;"}firstr+="<td role='gridcell' style='height:0;width:"+w+"px;"+hdcol+"'></td>";grid.headers[j]={width:w,el:this};sort=cm.sortable;if(typeof sort!=="boolean"){cm.sortable=true;sort=true}if(!(nm==="cb"||nm==="subgrid"||nm==="rn")&&sort){if(p.viewsortcols[2]){$sortableDiv.addClass("ui-jqgrid-sortable")}}if(sort){if(p.multiSort){var notLso=cm.lso==="desc"?"asc":"desc";if(p.viewsortcols[0]){$iconsSpan.show();if(cm.lso){$iconsSpan.children("span.ui-icon-"+cm.lso).removeClass(disabledStateClasses);if(showOneSortIcon){$iconsSpan.children("span.ui-icon-"+notLso).hide()}}}else{if(cm.lso){$iconsSpan.show();$iconsSpan.children("span.ui-icon-"+cm.lso).removeClass(disabledStateClasses);if(showOneSortIcon){$iconsSpan.children("span.ui-icon-"+notLso).hide()}}}}else{var notSortOrder=p.sortorder==="desc"?"asc":"desc";if(p.viewsortcols[0]){$iconsSpan.show();if(j===p.lastsort){$iconsSpan.children("span.ui-icon-"+p.sortorder).removeClass(disabledStateClasses);if(showOneSortIcon){$iconsSpan.children("span.ui-icon-"+notSortOrder).hide()}}}else{if(j===p.lastsort&&p.sortname!==""){$iconsSpan.show();$iconsSpan.children("span.ui-icon-"+p.sortorder).removeClass(disabledStateClasses);if(showOneSortIcon){$iconsSpan.children("span.ui-icon-"+notSortOrder).hide()}}}}}if(p.footerrow){tfoot+="<td role='gridcell' "+formatCol(j,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(e){var $th=$(this),isFrozen=$th.closest(".ui-jqgrid-hdiv").hasClass("frozen-div"),getOffset=function(iCol){var ret=[$th.position().left+$th.outerWidth()];if(p.direction==="rtl"){ret[0]=p.width-ret[0]}ret[0]-=isFrozen?0:grid.bDiv.scrollLeft;ret.push($(grid.hDiv).position().top);ret.push($(grid.bDiv).offset().top-$(grid.hDiv).offset().top+$(grid.bDiv).height()+(grid.sDiv?$(grid.sDiv).height():0));return ret},ci;if($(e.target).closest("th>span.ui-jqgrid-resize").length!==1){return}ci=getColumnHeaderIndex(this);if(ci!=null){if(p.forceFit===true){p.nv=nextVisible(ci)}grid.dragStart(ci,e,getOffset(ci),$th)}return false}).click(function(e){if(p.disableClick){p.disableClick=false;return false}var s="th.ui-th-column>div",r,d;if(!p.viewsortcols[2]){s+=">span.s-ico>span.ui-grid-ico-sort"}else{s+=".ui-jqgrid-sortable"}var t=$(e.target).closest(s);if(t.length!==1){return}if(!p.viewsortcols[2]){r=true;d=t.hasClass("ui-icon-desc")?"desc":"asc"}var ci=getColumnHeaderIndex(this);if(ci!=null){sortData.call(ts,$("div",this)[0].id,ci,r,d,this)}return false});if(p.sortable&&$.fn.sortable){try{$j.sortableColumns.call($self0,$(ts.tHead.rows[0]))}catch(ignore){}}if(p.footerrow){tfoot+="</tr></tbody></table>"}firstr+="</tr>";tbody=document.createElement("tbody");ts.appendChild(tbody);$self0.addClass(getGuiStyles("grid","ui-jqgrid-btable")).append(firstr);firstr=null;var hTable=$("<table class='"+getGuiStyles("hTable","ui-jqgrid-htable")+"' style='width:"+p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+p.id+"'"+(isMSIE7?" cellspacing='0'":"")+"></table>").append(ts.tHead),hg=(p.caption&&p.hiddengrid===true)?true:false,hb=$("<div class='ui-jqgrid-hbox"+(dir==="rtl"?"-rtl":"")+"'></div>"),bottomClasses=getGuiStyles("bottom");grid.hDiv=document.createElement("div");$(grid.hDiv).css({width:grid.width+"px"}).addClass(getGuiStyles("hDiv","ui-jqgrid-hdiv")).append(hb);$(hb).append(hTable);hTable=null;if(hg){$(grid.hDiv).hide()}p.rowNum=parseInt(p.rowNum,10);if(isNaN(p.rowNum)||p.rowNum<=0){p.rowNum=p.maxRowNum}if(p.pager){var $pager,pagerId;if(typeof p.pager==="string"&&p.pager.substr(0,1)!=="#"){pagerId=p.pager;$pager=$("#"+jqID(p.pager))}else{if(p.pager===true){pagerId=randId();$pager=$("<div id='"+pagerId+"'></div>");$pager.appendTo("body");p.pager="#"+jqID(pagerId)}else{$pager=$(p.pager);pagerId=$pager.attr("id")}}if($pager.length>0){$pager.css({width:grid.width+"px"}).addClass(getGuiStyles("pager","ui-jqgrid-pager "+bottomClasses)).appendTo(eg);if(hg){$pager.hide()}setPager.call(ts,pagerId,"");p.pager="#"+jqID(pagerId)}else{p.pager=""}}if(p.cellEdit===false&&p.hoverrows===true){$self0.bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="ui-subgrid"){$(ptr).addClass(hoverStateClasses)}}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass(hoverStateClasses)})}var ri,ci,tdHtml,getTdFromTarget=function(target){var $td,$tr,$table;do{$td=$(target).closest("td");if($td.length>0){$tr=$td.parent();$table=$tr.parent().parent();if($tr.is(".jqgrow")&&($table[0]===this||($table.is("table.ui-jqgrid-btable")&&($table[0].id||"").replace("_frozen","")===this.id))){break}target=$td.parent()}}while($td.length>0);return $td};$self0.before(grid.hDiv).click(function(e){var highlightClass=getGuiStyles("states.select"),target=e.target,$td=getTdFromTarget.call(this,target),$tr=$td.parent();if($tr.length===0||hasOneFromClasses($tr,disabledStateClasses)){return}ri=$tr[0].id;var scb=$(target).hasClass("cbox"),cSel=feedback.call(ts,"beforeSelectRow",ri,e),editingInfo=jgrid.detectRowEditing.call(ts,ri),locked=editingInfo!=null&&editingInfo.mode!=="cellEditing";if(target.tagName==="A"||(locked&&!scb)){return}ci=$td[0].cellIndex;tdHtml=$td.html();feedback.call(ts,"onCellSelect",ri,ci,tdHtml,e);if(p.cellEdit===true){if(p.multiselect&&scb&&cSel){setSelection.call($self0,ri,true,e)}else{ri=$tr[0].rowIndex;try{$j.editCell.call($self0,ri,ci,true)}catch(ignore){}}return}if(!cSel){return}if(!p.multikey){if(p.multiselect&&p.multiboxonly){if(scb){setSelection.call($self0,ri,true,e)}else{var frz=p.frozenColumns?p.id+"_frozen":"";$(p.selarrrow).each(function(i,n){var trid=$j.getGridRowById.call($self0,n);if(trid){$(trid).removeClass(highlightClass)}$("#jqg_"+jqID(p.id)+"_"+jqID(n))[p.propOrAttr]("checked",false);if(frz){$("#"+jqID(n),"#"+jqID(frz)).removeClass(highlightClass);$("#jqg_"+jqID(p.id)+"_"+jqID(n),"#"+jqID(frz))[p.propOrAttr]("checked",false)}});clearArray(p.selarrrow);setSelection.call($self0,ri,true,e)}}else{var oldSelRow=p.selrow;setSelection.call($self0,ri,true,e);if(p.singleSelectClickMode==="toggle"&&!p.multiselect&&oldSelRow===ri){if(this.grid.fbRows){$tr=$tr.add(this.grid.fbRows[ri])}$tr.removeClass(highlightClass).attr({"aria-selected":"false",tabindex:"-1"});p.selrow=null}}}else{if(e[p.multikey]){setSelection.call($self0,ri,true,e)}else{if(p.multiselect&&scb){scb=$("#jqg_"+jqID(p.id)+"_"+ri).is(":checked");$("#jqg_"+jqID(p.id)+"_"+ri)[propOrAttr]("checked",!scb)}}}}).bind("reloadGrid",function(e,opts){var self=this,gridSelf=self.grid,$self=$(this);if(p.treeGrid===true){p.datatype=p.treedatatype}opts=extend({},defaults.reloadGridOptions||{},p.reloadGridOptions||{},opts||{});if(p.datatype==="local"&&p.dataTypeOrg&&p.loadonce&&opts.fromServer){p.datatype=p.dataTypeOrg;delete p.dataTypeOrg}if(opts.current){gridSelf.selectionPreserver.call(self)}if(p.datatype==="local"){$j.resetSelection.call($self);if(p.data.length){normalizeData.call(self);refreshIndex()}}else{if(!p.treeGrid){p.selrow=null;if(p.multiselect){clearArray(p.selarrrow);setHeadCheckBox.call(self,false)}clearArray(p.savedRow)}}if(p.scroll){grid.emptyRows.call(self,true,false)}if(opts.page){var page=parseInt(opts.page,10);if(page>p.lastpage){page=p.lastpage}if(page<1){page=1}p.page=page;if(gridSelf.prevRowHeight){gridSelf.bDiv.scrollTop=(page-1)*gridSelf.prevRowHeight*p.rowNum}else{gridSelf.bDiv.scrollTop=0}}if(gridSelf.prevRowHeight&&p.scroll&&opts.page===undefined){delete p.lastpage;gridSelf.populateVisible.call(self)}else{gridSelf.populate.call(self)}if(p._inlinenav===true){$self.jqGrid("showAddEditButtons",false)}return false}).dblclick(function(e){var $td=getTdFromTarget.call(this,e.target),$tr=$td.parent();if($td.length>0&&!feedback.call(ts,"ondblClickRow",$tr.attr("id"),$tr[0].rowIndex,$td[0].cellIndex,e)){return false}}).bind("contextmenu",function(e){var $td=getTdFromTarget.call(this,e.target),$tr=$td.parent(),rowid=$tr.attr("id");if($td.length===0){return}if(!p.multiselect){setSelection.call($self0,rowid,true,e)}if(!feedback.call(ts,"onRightClickRow",rowid,$tr[0].rowIndex,$td[0].cellIndex,e)){return false}});grid.bDiv=document.createElement("div");if(isMSIE){if(String(p.height).toLowerCase()==="auto"){p.height="100%"}}$(grid.bDiv).append($('<div style="position:relative;'+(isMSIE7?"height:0.01%;":"")+'"></div>').append("<div></div>").append(ts)).addClass("ui-jqgrid-bdiv").css({height:p.height+(isNaN(p.height)?"":"px"),width:(grid.width)+"px"}).scroll(grid.scrollGrid);$self0.css({width:p.tblwidth+"px"});if(!$.support.tbody){if($(">tbody",ts).length===2){$(">tbody:gt(0)",ts).remove()}}if(p.multikey){$(grid.bDiv).bind(jgrid.msie?"selectstart":"mousedown",function(){return false})}if(hg){$(grid.bDiv).hide()}grid.cDiv=document.createElement("div");var visibleGridIcon=getIcon("gridMinimize.visible"),hiddenGridIcon=getIcon("gridMinimize.hidden"),showhide=getDef("showhide"),arf=p.hidegrid===true?$("<a role='link' class='"+getGuiStyles("titleButton","ui-jqgrid-titlebar-close")+"'"+(showhide?" title='"+showhide+"'":"")+"/>").hover(function(){arf.addClass(hoverStateClasses)},function(){arf.removeClass(hoverStateClasses)}).append("<span class='"+visibleGridIcon+"'></span>"):"";$(grid.cDiv).append("<span class='ui-jqgrid-title'>"+p.caption+"</span>").append(arf).addClass(getGuiStyles("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+(dir==="rtl"?"-rtl":"")));$(grid.cDiv).insertBefore(grid.hDiv);if(p.toolbar[0]){grid.uDiv=document.createElement("div");if(p.toolbar[1]==="top"){$(grid.uDiv).insertBefore(grid.hDiv)}else{if(p.toolbar[1]==="bottom"){$(grid.uDiv).insertAfter(grid.hDiv)}}var toolbarUpperClasses=getGuiStyles("toolbarUpper","ui-userdata");if(p.toolbar[1]==="both"){grid.ubDiv=document.createElement("div");$(grid.uDiv).addClass(toolbarUpperClasses).attr("id","t_"+p.id).insertBefore(grid.hDiv);$(grid.ubDiv).addClass(getGuiStyles("toolbarBottom","ui-userdata")).attr("id","tb_"+p.id).insertAfter(grid.hDiv);if(hg){$(grid.ubDiv).hide()}}else{$(grid.uDiv).width(grid.width).addClass(toolbarUpperClasses).attr("id","t_"+p.id)}if(hg){$(grid.uDiv).hide()}}if(typeof p.datatype==="string"){p.datatype=p.datatype.toLowerCase()}if(p.toppager){p.toppager=p.id+"_toppager";grid.topDiv=$("<div id='"+p.toppager+"'></div>")[0];$(grid.topDiv).addClass(getGuiStyles("pager","ui-jqgrid-toppager")).css({width:grid.width+"px"}).insertBefore(grid.hDiv);setPager.call(ts,p.toppager,"_t");p.toppager="#"+jqID(p.toppager)}else{if(p.pager===""&&!p.scroll){p.rowNum=p.maxRowNum}}if(p.footerrow){grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];hb=$("<div class='ui-jqgrid-hbox"+(dir==="rtl"?"-rtl":"")+"'></div>");$(grid.sDiv).append(hb).width(grid.width).insertAfter(grid.hDiv);$(hb).append(tfoot);grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells;if(p.rownumbers){grid.footers[0].className=getGuiStyles("rowNum","jqgrid-rownum")}if(hg){$(grid.sDiv).hide()}}hb=null;if(p.caption){var tdt=p.datatype;if(p.hidegrid===true){$(".ui-jqgrid-titlebar-close",grid.cDiv).click(function(e){var elems=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",self=this;if(p.toolbar[0]===true){if(p.toolbar[1]==="both"){elems+=",#"+jqID($(grid.ubDiv).attr("id"))}elems+=",#"+jqID($(grid.uDiv).attr("id"))}var counter=$(elems,p.gView).length;if(p.toppager){elems+=","+p.toppager}if(p.gridstate==="visible"){$(elems,p.gBox).slideUp("fast",function(){counter--;if(counter===0){$("span",self).removeClass(visibleGridIcon).addClass(hiddenGridIcon);p.gridstate="hidden";if($(p.gBox).hasClass("ui-resizable")){$(".ui-resizable-handle",p.gBox).hide()}$(grid.cDiv).addClass(bottomClasses);if(!hg){feedback.call(ts,"onHeaderClick",p.gridstate,e)}}})}else{if(p.gridstate==="hidden"){$(grid.cDiv).removeClass(bottomClasses);$(elems,p.gBox).slideDown("fast",function(){counter--;if(counter===0){$("span",self).removeClass(hiddenGridIcon).addClass(visibleGridIcon);if(hg){p.datatype=tdt;populate.call(ts);hg=false}p.gridstate="visible";if($(p.gBox).hasClass("ui-resizable")){$(".ui-resizable-handle",p.gBox).show()}if(!hg){feedback.call(ts,"onHeaderClick",p.gridstate,e)}}})}}return false});if(hg){p.datatype="local";$(".ui-jqgrid-titlebar-close",grid.cDiv).trigger("click")}}}else{$(grid.cDiv).hide();$(grid.cDiv).nextAll("div:visible").first().addClass("ui-corner-top")}$(grid.hDiv).after(grid.bDiv);$(eg).click(myResizerClickHandler).dblclick(function(e){var $resizer=$(p.rs),resizerOffset=$resizer.offset(),iColIndex=$resizer.data("idx"),delta=$resizer.data("delta"),cm=p.colModel[iColIndex],pageX=$(this).data("pageX")||$resizer.data("pageX");if(pageX==null){return false}var arPageX=String(pageX).split(";"),pageX1=parseFloat(arPageX[0]),pageX2=parseFloat(arPageX[1]);if(arPageX.length===2&&(Math.abs(pageX1-pageX2)>5||Math.abs(e.pageX-pageX1)>5||Math.abs(e.pageX-pageX2)>5)){return false}if(feedback.call(ts,"resizeDblClick",iColIndex,cm)&&(resizerOffset.left-1<=e.pageX+delta&&e.pageX+delta<=resizerOffset.left+$resizer.outerWidth()+1)&&cm!=null&&cm.autoResizable){$j.autoResizeColumn.call($self0,iColIndex)}return false});if(!p.pager){$(grid.cDiv).nextAll("div:visible").filter(":last").addClass(bottomClasses)}$(".ui-jqgrid-labels",grid.hDiv).bind("selectstart",function(){return false});ts.formatCol=formatCol;ts.sortData=sortData;ts.updatepager=updatepager;ts.refreshIndex=refreshIndex;ts.setHeadCheckBox=setHeadCheckBox;ts.fixScrollOffsetAndhBoxPadding=fixScrollOffsetAndhBoxPadding;ts.constructTr=constructTr;ts.formatter=formatter;extend(grid,{populate:populate,emptyRows:emptyRows,beginReq:beginReq,endReq:endReq});ts.addXmlData=readInput;ts.addJSONData=readInput;ts.rebuildRowIndexes=rebuildRowIndexes;ts.grid.cols=ts.rows[0].cells;feedback.call(ts,"onInitGrid");if(p.treeGrid&&p.datatype==="local"&&p.data!=null&&p.data.length>0){p.datatype="jsonstring";p.datastr=p.data;p.data=[]}populate.call(ts);p.hiddengrid=false})};var base=$.fn.jqGrid;jgrid.extend({getGridRes:function(defaultPropName){var $t=this[0];if(!$t||!$t.grid||!$t.p){return null}var res=jgrid.getRes(locales[$t.p.locale],defaultPropName)||jgrid.getRes(locales["en-US"],defaultPropName),resDef=jgrid.getRes(jgrid,defaultPropName);return typeof res==="object"&&res!==null&&!$.isArray(res)?$.extend(true,{},res,resDef||{}):resDef!==undefined?resDef:res},getGuiStyles:function(path,jqClasses){var $t=this instanceof $&&this.length>0?this[0]:this;if(!$t||!$t.grid||!$t.p){return""}var p=$t.p,guiStyle=p.guiStyle||jgrid.defaults.guiStyle||"jQueryUI";return jgrid.mergeCssClasses(jgrid.getRes(jgrid.guiStyles[guiStyle],path),jqClasses||"")},getGridParam:function(pName){var $t=this[0];if(!$t||!$t.grid){return null}if(!pName){return $t.p}return $t.p[pName]!==undefined?$t.p[pName]:null},setGridParam:function(newParams,overwrite){return this.each(function(){var self=this;if(overwrite==null){overwrite=false}if(self.grid&&typeof newParams==="object"){if(overwrite===true){var params=$.extend({},self.p,newParams);self.p=params}else{$.extend(true,self.p,newParams)}}})},getGridRowById:function(rowid){if(rowid==null){return null}var row,rowId=rowid.toString();this.each(function(){var i,rows=this.rows,tr,rowIndex;if(this.p.rowIndexes!=null){rowIndex=this.p.rowIndexes[rowId];tr=rows[rowIndex];if(tr&&tr.id===rowId){row=tr}}if(!row){try{i=rows.length;while(i--){tr=rows[i];if(rowId===tr.id){row=tr;break}}}catch(e){row=$(this.grid.bDiv).find("#"+jqID(rowid));row=row.length>0?row[0]:null}}});return row},getDataIDs:function(){var ids=[];this.each(function(){var rows=this.rows,len=rows.length,i,tr;if(len&&len>0){for(i=0;i<len;i++){tr=rows[i];if($(tr).hasClass("jqgrow")){ids.push(tr.id)}}}});return ids},setSelection:function(selection,onsr,e){return this.each(function(){var $t=this,$self=$($t),p=$t.p,stat,pt,ner,ia,tpsr,csr,$tr,getGuiStyles=base.getGuiStyles,getGridRowById=base.getGridRowById,highlightClass=getGuiStyles.call($self,"states.select"),disabledClasses=getGuiStyles.call($self,"states.disabled"),frozenRows=$t.grid.fbRows,selectUnselectRow=function(tr1,toSelect){var method=toSelect?"addClass":"removeClass",iColCb=p.iColByName.cb,attributes=toSelect?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"},selectUnselectRowInTable=function(tr){$(tr)[method](highlightClass).attr(attributes);if(iColCb!==undefined){$(tr.cells[iColCb]).children("input.cbox")[p.propOrAttr]("checked",toSelect)}};selectUnselectRowInTable(tr1);if(frozenRows){selectUnselectRowInTable(frozenRows[tr1.rowIndex])}};if(selection===undefined){return}onsr=onsr===false?false:true;if(e!=null){$tr=$(e.target).closest("tr.jqgrow");if($tr.length>0){pt=$tr[0];if(frozenRows){pt=$t.rows[pt.rowIndex]}}}if(pt==null){pt=getGridRowById.call($self,selection)}if(!pt||!pt.className||pt.className.indexOf(disabledClasses)>-1){return}function scrGrid(tr,bDiv){var ch=bDiv.clientHeight,st=bDiv.scrollTop,rpos=$(tr).position().top,rh=tr.clientHeight;if(rpos+rh>=ch+st){bDiv.scrollTop=rpos-(ch+st)+rh+st}else{if(rpos<ch+st){if(rpos<st){bDiv.scrollTop=rpos}}}}if(p.scrollrows===true){ner=getGridRowById.call($self,selection);if(ner!=null){ner=ner.rowIndex;if(ner>=0){scrGrid($t.rows[ner],$t.grid.bDiv)}}}if(!p.multiselect){if(pt.className!=="ui-subgrid"){if(p.selrow!==pt.id){if(p.selrow!==null){csr=getGridRowById.call($self,p.selrow);if(csr){selectUnselectRow(csr,false)}}selectUnselectRow(pt,true);stat=true}else{stat=false}p.selrow=pt.id;if(onsr){feedback.call($t,"onSelectRow",pt.id,stat,e)}}}else{$t.setHeadCheckBox(false);p.selrow=pt.id;ia=$.inArray(p.selrow,p.selarrrow);if(ia===-1){stat=true;p.selarrrow.push(p.selrow)}else{if(jgrid.detectRowEditing.call($t,pt.id)!==null){stat=true}else{stat=false;p.selarrrow.splice(ia,1);tpsr=p.selarrrow[0];p.selrow=(tpsr===undefined)?null:tpsr}}if(pt.className!=="ui-subgrid"){selectUnselectRow(pt,stat)}if(onsr){feedback.call($t,"onSelectRow",pt.id,stat,e)}}})},resetSelection:function(rowid){return this.each(function(){var $t=this,$self=$(this),p=$t.p,row,getGuiStyles=base.getGuiStyles,getGridRowById=base.getGridRowById,highlightClass=getGuiStyles.call($self,"states.select"),cellEditCellHighlightClasses="edit-cell "+highlightClass,cellEditRowHighlightClasses="selected-row "+getGuiStyles.call($self,"states.hover"),iColCb=p.iColByName.cb,multiselectChechboxes=iColCb!==undefined,frozenRows=$t.grid.fbRows,deselectRow=function(tr){var method="removeClass",frozenRow,attributes={"aria-selected":"false",tabindex:"-1"};$(tr)[method](highlightClass).attr(attributes);if(multiselectChechboxes){$(tr.cells[iColCb]).children("input.cbox")[p.propOrAttr]("checked",false)}if(frozenRows){frozenRow=frozenRows[tr.rowIndex];$(frozenRow)[method](highlightClass).attr(attributes);if(multiselectChechboxes){$(frozenRow.cells[iColCb]).children("input.cbox")[p.propOrAttr]("checked",false)}}};if(rowid!==undefined){row=getGridRowById.call($self,rowid);deselectRow(row);if(multiselectChechboxes){$t.setHeadCheckBox(false);var ia=$.inArray(rowid,p.selarrrow);if(ia!==-1){p.selarrrow.splice(ia,1)}}}else{if(!p.multiselect){if(p.selrow){row=getGridRowById.call($self,p.selrow);deselectRow(row);p.selrow=null}}else{$($t.rows).each(function(i){var iSel=$.inArray(this.id,p.selarrrow);if(iSel!==-1){deselectRow(this);p.selarrrow.splice(iSel,1)}});$t.setHeadCheckBox(false);clearArray(p.selarrrow);p.selrow=null}}if(p.cellEdit===true){if(parseInt(p.iCol,10)>=0&&parseInt(p.iRow,10)>=0){row=$t.rows[p.iRow];if(row!=null){$(row.cells[p.iCol]).removeClass(cellEditCellHighlightClasses);$(row).removeClass(cellEditRowHighlightClasses)}if(frozenRows){row=frozenRows[p.iRow];if(row!=null){$(row.cells[p.iCol]).removeClass(cellEditCellHighlightClasses);$(row).removeClass(cellEditRowHighlightClasses)}}}}clearArray(p.savedRow)})},getRowData:function(rowid){var res={},resall;this.each(function(){var $t=this,p=$t.p,getall=false,ind,len=2,j=0,rows=$t.rows,i,$td,cm,nm,td;if(rowid===undefined){getall=true;resall=[];len=rows.length}else{ind=base.getGridRowById.call($($t),rowid);if(!ind){return res}}while(j<len){if(getall){ind=rows[j]}if($(ind).hasClass("jqgrow")){$td=$("td[role=gridcell]",ind);for(i=0;i<$td.length;i++){cm=p.colModel[i];nm=cm.name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"&&cm.formatter!=="actions"){td=$td[i];if(p.treeGrid===true&&nm===p.ExpandColumn){res[nm]=htmlDecode($("span",td).first().html())}else{try{res[nm]=$.unformat.call($t,td,{rowId:ind.id,colModel:cm},i)}catch(exception){res[nm]=htmlDecode($(td).html())}}}}if(getall){resall.push(res);res={}}}j++}});return resall||res},delRowData:function(rowid){var success=false,rowInd,ia,nextRow;this.each(function(){var $t=this,p=$t.p;rowInd=base.getGridRowById.call($($t),rowid);if(!rowInd){return false}if(p.subGrid){nextRow=$(rowInd).next();if(nextRow.hasClass("ui-subgrid")){nextRow.remove()}}$(rowInd).remove();p.records--;p.reccount--;$t.updatepager(true,false);success=true;if(p.multiselect){ia=$.inArray(rowid,p.selarrrow);if(ia!==-1){p.selarrrow.splice(ia,1)}}if(p.multiselect&&p.selarrrow.length>0){p.selrow=p.selarrrow[p.selarrrow.length-1]}else{if(p.selrow===rowid){p.selrow=null}}if(p.datatype==="local"){var id=stripPref(p.idPrefix,rowid),pos=p._index[id];if(pos!==undefined){p.data.splice(pos,1);$t.refreshIndex()}}$t.rebuildRowIndexes();if(p.altRows===true&&success){var cn=p.altclass,frozenRows=$t.grid.fbRows;$($t.rows).each(function(i){var $row=$(this);if(frozenRows){$row=$row.add(frozenRows[this.rowIndex])}$row[i%2===0?"addClass":"removeClass"](cn)})}feedback.call($t,"afterDelRow",rowid)});return success},setRowData:function(rowid,data,cssp){var success=true;this.each(function(){var t=this,p=t.p,vl,ind,cp=typeof cssp,lcdata={};if(!t.grid){return false}ind=base.getGridRowById.call($(t),rowid);if(!ind){return false}if(data){try{var id=stripPref(p.idPrefix,rowid),key,pos=p._index[id],oData=pos!=null?p.data[pos]:undefined;$(p.colModel).each(function(i){var cm=this,nm=cm.name,title,dval=getAccessor(data,nm);if(dval!==undefined){if(p.datatype==="local"&&oData!=null){vl=convertOnSaveLocally.call(t,dval,cm,oData[nm],id,oData,i);if($.isFunction(cm.saveLocally)){cm.saveLocally.call(t,{newValue:vl,newItem:lcdata,oldItem:oData,id:id,cm:cm,cmName:nm,iCol:i})}else{lcdata[nm]=vl}}vl=t.formatter(rowid,dval,i,data,"edit");title=cm.title?{title:stripHtml(vl)}:{};var $dataFiled=$(ind.cells[i]);if(p.treeGrid===true&&nm===p.ExpandColumn){$dataFiled=$dataFiled.children("span.cell-wrapperleaf,span.cell-wrapper").first()}$dataFiled.html(vl).attr(title)}});if(p.datatype==="local"){if(p.treeGrid){for(key in p.treeReader){if(p.treeReader.hasOwnProperty(key)){delete lcdata[p.treeReader[key]]}}}if(oData!==undefined){p.data[pos]=$.extend(true,oData,lcdata)}lcdata=null}feedback.call(t,"afterSetRow",{rowid:rowid,inputData:data,iData:pos,iRow:ind.rowIndex,tr:ind,localData:lcdata,cssProp:cssp})}catch(exception){success=false}}if(success){if(cp==="string"){$(ind).addClass(cssp)}else{if(cssp!==null&&cp==="object"){$(ind).css(cssp)}}$(t).triggerHandler("jqGridAfterGridComplete")}});return success},addRowData:function(rowid,rdata,pos,src){if($.inArray(pos,["first","last","before","after","afterSelected","beforeSelected"])<0){pos="last"}var success=false,nm,row,sind,i,v,aradd,cnm,cn,data,cm,id;if(rdata){if($.isArray(rdata)){aradd=true;cnm=rowid}else{rdata=[rdata];aradd=false}this.each(function(){var t=this,p=t.p,datalen=rdata.length,$self=$(t),rows=t.rows,k=0,getGridRowById=base.getGridRowById,colModel=p.colModel,lcdata={},additionalProperties=p.additionalProperties;if(!aradd){if(rowid!==undefined){rowid=String(rowid)}else{rowid=randId();if(p.keyName!==false){cnm=p.keyName;if(rdata[0][cnm]!==undefined){rowid=rdata[0][cnm]}}}}cn=p.altclass;while(k<datalen){data=rdata[k];row=[];if(aradd){try{rowid=data[cnm];if(rowid===undefined){rowid=randId()}}catch(exception){rowid=randId()}}id=rowid;for(i=0;i<colModel.length;i++){cm=colModel[i];nm=cm.name;if(nm!=="rn"&&nm!=="cb"&&nm!=="subgrid"){v=convertOnSaveLocally.call(t,data[nm],cm,undefined,id,{},i);if($.isFunction(cm.saveLocally)){cm.saveLocally.call(t,{newValue:v,newItem:lcdata,oldItem:{},id:id,cm:cm,cmName:nm,iCol:i})}else{lcdata[nm]=v}}}for(i=0;i<additionalProperties.length;i++){v=getAccessor(data,additionalProperties[i]);if(v!==undefined){lcdata[additionalProperties[i]]=v}}if(p.datatype==="local"){lcdata[p.localReader.id]=id;p._index[id]=p.data.length;p.data.push(lcdata)}row=jgrid.parseDataToHtml.call(t,1,[rowid],[data]);row=row.join("");if(rows.length===0){$("table:first",t.grid.bDiv).append(row)}else{if(pos==="afterSelected"||pos==="beforeSelected"){if(src===undefined&&p.selrow!==null){src=p.selrow;pos=(pos==="afterSelected")?"after":"before"}else{pos=(pos==="afterSelected")?"last":"first"}}switch(pos){case"last":$(rows[rows.length-1]).after(row);sind=rows.length-1;break;case"first":$(rows[0]).after(row);sind=1;break;case"after":sind=getGridRowById.call($self,src);if(sind){if($(rows[sind.rowIndex+1]).hasClass("ui-subgrid")){$(rows[sind.rowIndex+1]).after(row);sind=sind.rowIndex+2}else{$(sind).after(row);sind=sind.rowIndex+1}}break;case"before":sind=getGridRowById.call($self,src);if(sind){$(sind).before(row);sind=sind.rowIndex-1}break}}if(p.subGrid===true){base.addSubGrid.call($self,p.iColByName.subgrid,sind)}p.records++;p.reccount++;if(p.lastpage===0){p.lastpage=1}feedback.call(t,"afterAddRow",{rowid:rowid,inputData:rdata,position:pos,srcRowid:src,iRow:sind,localData:lcdata,iData:p.data.length-1});k++}if(p.altRows===true&&!aradd){if(pos==="last"){if((rows.length-1)%2===0){$(rows[rows.length-1]).addClass(cn)}}else{$(rows).each(function(i){if(i%2===1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}}t.rebuildRowIndexes();t.updatepager(true,true);success=true})}return success},footerData:function(action,data,format){var nm,success=false,res={},title;function isEmpty(obj){var i;for(i in obj){if(obj.hasOwnProperty(i)){return false}}return true}if(action==null){action="get"}if(typeof format!=="boolean"){format=true}action=action.toLowerCase();this.each(function(){var t=this,p=t.p,vl;if(!t.grid||!p.footerrow){return false}if(action==="set"){if(isEmpty(data)){return false}}success=true;$(p.colModel).each(function(i){nm=this.name;if(action==="set"){if(data[nm]!==undefined){vl=format?t.formatter("",data[nm],i,data,"edit"):data[nm];title=this.title?{title:stripHtml(vl)}:{};$("tr.footrow td:eq("+i+")",t.grid.sDiv).html(vl).attr(title);success=true}}else{if(action==="get"){res[nm]=$("tr.footrow td:eq("+i+")",t.grid.sDiv).html()}}})});return action==="get"?res:success},showHideCol:function(colname,show){return this.each(function(){var $t=this,$self=$($t),grid=$t.grid,fndh=false,p=$t.p,brd=jgrid.cell_width?0:p.cellLayout,cw;if(!grid){return}if(typeof colname==="string"){colname=[colname]}show=show!=="none"?"":"none";var sw=show===""?true:false,groupHeader=p.groupHeader,gh=groupHeader&&(typeof groupHeader==="object"||$.isFunction(groupHeader));if(gh){base.destroyGroupHeader.call($self,false)}$(p.colModel).each(function(i){if($.inArray(this.name,colname)!==-1&&this.hidden===sw){if(p.frozenColumns===true&&this.frozen===true){return true}$("tr[role=row]",grid.hDiv).each(function(){$(this.cells[i]).css("display",show)});$($t.rows).each(function(){var cell=this.cells[i];if(!$(this).hasClass("jqgroup")||(cell!==undefined&&cell.colSpan===1)){$(cell).css("display",show)}});if(p.footerrow){$("tr.footrow td:eq("+i+")",grid.sDiv).css("display",show)}cw=parseInt(this.width,10);if(show==="none"){p.tblwidth-=cw+brd}else{p.tblwidth+=cw+brd}this.hidden=!sw;fndh=true;feedback.call($t,"onShowHideCol",sw,this.name,i)}});if(fndh===true){base.setGridWidth.call($self,(!p.autowidth&&(p.widthOrg===undefined||p.widthOrg==="auto"||p.widthOrg==="100%")?p.tblwidth:p.width)+parseInt(p.scrollOffset,10))}if(gh){base.setGroupHeaders.call($self,p.groupHeader)}})},hideCol:function(colname){return this.each(function(){base.showHideCol.call($(this),colname,"none")})},showCol:function(colname){return this.each(function(){base.showHideCol.call($(this),colname,"")})},remapColumns:function(permutation,updateCells,keepHeader){var ts=this[0],p=ts.p,grid=ts.grid,i,n,makeArray=$.makeArray;function resortArray(a){var ac=a.length?makeArray(a):$.extend({},a);$.each(permutation,function(i){a[i]=ac[this]})}function resortRows($parent,selector){var $rows=selector?$parent.children(selector):$parent.children();$rows.each(function(){var row=this,elems=makeArray(row.cells);$.each(permutation,function(i){var e=elems[this],oldElem=row.cells[i];if(e.cellIndex!==i){e.parentNode.insertBefore(e,oldElem)}})})}if(grid==null||p==null){return}resortArray(p.colModel);resortArray(p.colNames);resortArray(grid.headers);resortRows($(grid.hDiv).find(">div>.ui-jqgrid-htable>thead"),keepHeader&&":not(.ui-jqgrid-labels)");if(updateCells){resortRows($(ts.tBodies[0]),"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")}if(p.footerrow){resortRows($(grid.sDiv).find(">div>.ui-jqgrid-ftable>tbody").first())}if(p.remapColumns){if(!p.remapColumns.length){p.remapColumns=makeArray(permutation)}else{resortArray(p.remapColumns)}}p.lastsort=$.inArray(p.lastsort,permutation);p.iColByName={};for(i=0,n=p.colModel.length;i<n;i++){p.iColByName[p.colModel[i].name]=i}feedback.call(ts,"onRemapColumns",permutation,updateCells,keepHeader)},remapColumnsByName:function(permutationByName,updateCells,keepHeader){var ts=this[0],p=ts.p,permutation=[],i,n,cmNames=permutationByName.slice(),inArray=$.inArray;if(p.subGrid&&inArray("subgrid",cmNames)<0){cmNames.unshift("subgrid")}if(p.multiselect&&inArray("cb",cmNames)<0){cmNames.unshift("cb")}if(p.rownumbers&&inArray("rn",cmNames)<0){cmNames.unshift("rn")}for(i=0,n=cmNames.length;i<n;i++){permutation.push(p.iColByName[cmNames[i]])}base.remapColumns.call(this,permutation,updateCells,keepHeader);return this},setGridWidth:function(newGridWidth,shrink){return this.each(function(){var $t=this,p=$t.p,columnWidth,grid=$t.grid,initialWidth=0,iLastVariableColumn,numberOfVariableColumns=0,hasScrollbar=false,totalVariableWidth,fixedColumnsWidth=0,correctur;if(!grid||p==null){return}$t.fixScrollOffsetAndhBoxPadding();var colModel=p.colModel,cm,scrollbarWidth=p.scrollOffset,borderAndPaddingWidth=jgrid.cell_width?0:p.cellLayout,thInfo,headers=grid.headers,footers=grid.footers,bDiv=grid.bDiv,hDiv=grid.hDiv,sDiv=grid.sDiv,cols=grid.cols,delta,colsExist,shrinkFactor,hCols=$(hDiv).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,setWidthOfAllDivs=function(newWidth){grid.width=p.width=newWidth;$(p.gBox).css("width",newWidth+"px");$(p.gView).css("width",newWidth+"px");$(bDiv).css("width",newWidth+"px");$(hDiv).css("width",newWidth+"px");if(p.pager){$(p.pager).css("width",newWidth+"px")}if(p.toppager){$(p.toppager).css("width",newWidth+"px")}if(p.toolbar[0]===true){$(grid.uDiv).css("width",newWidth+"px");if(p.toolbar[1]==="both"){$(grid.ubDiv).css("width",newWidth+"px")}}if(p.footerrow){$(sDiv).css("width",newWidth+"px")}};if(typeof shrink!=="boolean"){shrink=p.shrinkToFit}if(isNaN(newGridWidth)){return}newGridWidth=parseInt(newGridWidth,10);setWidthOfAllDivs(newGridWidth);if(shrink===false&&p.forceFit===true){p.forceFit=false}if(shrink===true){$.each(colModel,function(){if(this.hidden===false){columnWidth=this.widthOrg;initialWidth+=columnWidth+borderAndPaddingWidth;if(this.fixed){fixedColumnsWidth+=this.width+borderAndPaddingWidth}else{numberOfVariableColumns++}}});if(numberOfVariableColumns===0){return}p.tblwidth=parseInt(initialWidth,10);totalVariableWidth=newGridWidth-borderAndPaddingWidth*numberOfVariableColumns-fixedColumnsWidth;if(!isNaN(p.height)){if(bDiv.clientHeight<bDiv.scrollHeight||$t.rows.length===1){hasScrollbar=true;totalVariableWidth-=scrollbarWidth}}shrinkFactor=totalVariableWidth/(p.tblwidth-borderAndPaddingWidth*numberOfVariableColumns-fixedColumnsWidth);if(shrinkFactor<0){return}initialWidth=0;colsExist=cols.length>0;$.each(colModel,function(i){if(this.hidden===false&&!this.fixed){columnWidth=Math.round(this.widthOrg*shrinkFactor);this.width=columnWidth;initialWidth+=columnWidth;headers[i].width=columnWidth;hCols[i].style.width=columnWidth+"px";if(p.footerrow){footers[i].style.width=columnWidth+"px"}if(colsExist){cols[i].style.width=columnWidth+"px"}iLastVariableColumn=i}});if(!iLastVariableColumn){return}correctur=0;if(hasScrollbar){if(newGridWidth-fixedColumnsWidth-(initialWidth+borderAndPaddingWidth*numberOfVariableColumns)!==scrollbarWidth){correctur=newGridWidth-fixedColumnsWidth-(initialWidth+borderAndPaddingWidth*numberOfVariableColumns)-scrollbarWidth}}else{if(Math.abs(newGridWidth-fixedColumnsWidth-(initialWidth+borderAndPaddingWidth*numberOfVariableColumns))!==1){correctur=newGridWidth-fixedColumnsWidth-(initialWidth+borderAndPaddingWidth*numberOfVariableColumns)}}cm=colModel[iLastVariableColumn];cm.width+=correctur;p.tblwidth=parseInt(initialWidth+correctur+borderAndPaddingWidth*numberOfVariableColumns+fixedColumnsWidth,10);if(p.tblwidth>newGridWidth){delta=p.tblwidth-parseInt(newGridWidth,10);p.tblwidth=newGridWidth;cm.width=cm.width-delta}columnWidth=cm.width;thInfo=headers[iLastVariableColumn];thInfo.width=columnWidth;hCols[iLastVariableColumn].style.width=columnWidth+"px";if(colsExist){cols[iLastVariableColumn].style.width=columnWidth+"px"}if(p.footerrow){footers[iLastVariableColumn].style.width=columnWidth+"px"}if(p.tblwidth+(hasScrollbar?scrollbarWidth:0)<p.width){setWidthOfAllDivs(p.tblwidth+(hasScrollbar?scrollbarWidth:0))}if(bDiv.offsetWidth>bDiv.clientWidth){if(!p.autowidth&&(p.widthOrg===undefined||p.widthOrg==="auto"||p.widthOrg==="100%")){setWidthOfAllDivs(bDiv.offsetWidth)}}}if(p.tblwidth){p.tblwidth=parseInt(p.tblwidth,10);newGridWidth=p.tblwidth;$($t).css("width",newGridWidth+"px");getGridComponent(COMPONENT_NAMES.HEADER_TABLE,hDiv).css("width",newGridWidth+"px");hDiv.scrollLeft=bDiv.scrollLeft;if(p.footerrow){getGridComponent(COMPONENT_NAMES.FOOTER_TABLE,sDiv).css("width",newGridWidth+"px")}delta=Math.abs(newGridWidth-p.width);if(p.shrinkToFit&&!shrink&&delta<3&&delta>0){if(newGridWidth<p.width){setWidthOfAllDivs(newGridWidth)}if(bDiv.offsetWidth>bDiv.clientWidth){if(!p.autowidth&&(p.widthOrg===undefined||p.widthOrg==="auto"||p.widthOrg==="100%")){setWidthOfAllDivs(bDiv.offsetWidth)}}}}$t.fixScrollOffsetAndhBoxPadding();$($t).triggerHandler("jqGridResetFrozenHeights")})},setGridHeight:function(nh){return this.each(function(){var $t=this,grid=$t.grid,p=$t.p;if(!grid){return}var bDiv=$(grid.bDiv);bDiv.css({height:nh+(isNaN(nh)?"":"px")});if(p.frozenColumns===true){$(p.idSel+"_frozen").parent().height(bDiv.height()-16)}p.height=nh;if(p.scroll){grid.populateVisible.call($t)}$t.fixScrollOffsetAndhBoxPadding();$($t).triggerHandler("jqGridResetFrozenHeights")})},setCaption:function(newcap){return this.each(function(){var self=this,cDiv=self.grid.cDiv;self.p.caption=newcap;$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",cDiv).html(newcap);$(cDiv).show();$(cDiv).nextAll("div").removeClass(base.getGuiStyles.call(self,"top"));$(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(colname,nData,prop,attrp){return this.each(function(){var $t=this,pos=-1,p=$t.p;if(!$t.grid){return}if(isNaN(colname)){pos=p.iColByName[colname];if(pos===undefined){return}}else{pos=parseInt(colname,10)}if(pos>=0){var thecol=$("tr.ui-jqgrid-labels th:eq("+pos+")",$t.grid.hDiv);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico);p.colNames[pos]=nData}if(prop){if(typeof prop==="string"){$(thecol).addClass(prop)}else{$(thecol).css(prop)}}if(typeof attrp==="object"){$(thecol).attr(attrp)}}})},setCell:function(rowid,colName,nData,cssp,attrp,forceUpdate){return this.each(function(){var $t=this,p=$t.p,iCol=-1,colModel=p.colModel,v,title,i,cm,item,tr,$td,$tdi,val,rawdat={},id,index;if(!$t.grid){return}iCol=isNaN(colName)?p.iColByName[colName]:parseInt(colName,10);if(iCol>=0){tr=base.getGridRowById.call($($t),rowid);if(tr){$td=jgrid.getCell.call($t,tr,iCol);if(nData!==""||forceUpdate===true){cm=colModel[iCol];if(p.datatype==="local"){id=stripPref(p.idPrefix,rowid);index=p._index[id];if(index!==undefined){item=p.data[index]}}if(item==null){for(i=0;i<tr.cells.length;i++){if(i!==iCol){$tdi=jgrid.getDataFieldOfCell.call($t,tr,i);if($tdi.length>0){try{val=$.unformat.call($t,$tdi,{rowId:rowid,colModel:colModel[i]},i)}catch(exception){val=htmlDecode($tdi[0].innerHTML)}rawdat[colModel[i].name]=val}}}}else{rawdat=item}rawdat[cm.name]=nData;v=$t.formatter(rowid,nData,iCol,rawdat,"edit");title=p.colModel[iCol].title?{title:stripHtml(v)}:{};$td.html(v).attr(title);if(item!=null){v=convertOnSaveLocally.call($t,nData,cm,item[cm.name],id,item,iCol);if($.isFunction(cm.saveLocally)){cm.saveLocally.call($t,{newValue:v,newItem:item,oldItem:item,id:id,cm:cm,cmName:cm.name,iCol:iCol})}else{item[cm.name]=v}}}if(cssp||attrp){$td=jgrid.getCell.call($t,tr,iCol);if(cssp){$td[typeof cssp==="string"?"addClass":"css"](cssp)}if(typeof attrp==="object"){$td.attr(attrp)}}}}})},getCell:function(rowid,colName){var ret=false;this.each(function(){var $t=this,iCol=-1,p=$t.p,tr,$td;if(!$t.grid){return}iCol=isNaN(colName)?p.iColByName[colName]:parseInt(colName,10);if(iCol>=0){tr=base.getGridRowById.call($($t),rowid);if(tr){$td=jgrid.getDataFieldOfCell.call($t,tr,iCol).first();try{ret=$.unformat.call($t,$td,{rowId:tr.id,colModel:p.colModel[iCol]},iCol)}catch(exception){ret=htmlDecode($td.html())}}}});return ret},getCol:function(colName,obj,mathopr){var ret=[],val,sum=0,min,max,v;obj=typeof obj!=="boolean"?false:obj;if(mathopr===undefined){mathopr=false}this.each(function(){var $t=this,iCol=-1,p=$t.p,$td;if(!$t.grid){return}iCol=isNaN(colName)?p.iColByName[colName]:parseInt(colName,10);if(iCol>=0){var rows=$t.rows,ln=rows.length,i=0,dlen=0,tr;if(ln&&ln>0){while(i<ln){tr=rows[i];if($(tr).hasClass("jqgrow")){$td=jgrid.getDataFieldOfCell.call($t,tr,iCol).first();try{val=$.unformat.call($t,$td,{rowId:tr.id,colModel:p.colModel[iCol]},iCol)}catch(exception){val=htmlDecode($td.html())}if(mathopr){v=parseFloat(val);if(!isNaN(v)){sum+=v;if(max===undefined){max=min=v}min=Math.min(min,v);max=Math.max(max,v);dlen++}}else{if(obj){ret.push({id:tr.id,value:val})}else{ret.push(val)}}}i++}if(mathopr){switch(mathopr.toLowerCase()){case"sum":ret=sum;break;case"avg":ret=sum/dlen;break;case"count":ret=(ln-1);break;case"min":ret=min;break;case"max":ret=max;break}}}}});return ret},clearGridData:function(clearfooter){return this.each(function(){var $t=this,p=$t.p,rows=$t.rows,grid=$t.grid;if(!grid||!p||!rows){return}if(typeof clearfooter!=="boolean"){clearfooter=false}$($t).unbind(".jqGridFormatter");grid.emptyRows.call($t,false,true);if(p.footerrow&&clearfooter){$(".ui-jqgrid-ftable td",grid.sDiv).html("&#160;")}p.selrow=null;clearArray(p.selarrrow);clearArray(p.savedRow);p.records=0;p.page=1;p.lastpage=0;p.reccount=0;$t.updatepager(true,false)})},getInd:function(rowid,rc){var tr=base.getGridRowById.call($(this),rowid);return tr?(rc===true?tr:tr.rowIndex):false},bindKeys:function(settings){var o=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},settings||{});return this.each(function(){var $t=this,p=$t.p,$self=$($t);if(!$("body").is("[role]")){$("body").attr("role","application")}p.scrollrows=o.scrollingRows;$self.bind("keydown.jqGrid",function(event){var tr=$(this).find("tr[tabindex=0]")[0],moveVerical=function(siblingProperty){do{tr=tr[siblingProperty];if(tr===null){return}}while($(tr).is(":hidden")||!$(tr).hasClass("jqgrow"));base.setSelection.call($self,tr.id,true);event.preventDefault()},feedbackKey=function(name,callbackSuffix){var callback=o["on"+name+(callbackSuffix||"")];$self.triggerHandler("jqGridKey"+name,[p.selrow]);if($.isFunction(callback)){callback.call($t,p.selrow)}},moveHorizontal=function(stringLeftOrRight){if(p.treeGrid){var expanded=p.data[p._index[stripPref(p.idPrefix,tr.id)]][p.treeReader.expanded_field];if(stringLeftOrRight==="Right"){expanded=!expanded}if(expanded){$(tr).find("div.treeclick").trigger("click")}}feedbackKey(stringLeftOrRight,"Key")};if(tr){switch(event.keyCode){case 38:moveVerical("previousSibling");break;case 40:moveVerical("nextSibling");break;case 37:moveHorizontal("Left");break;case 39:moveHorizontal("Right");break;case 13:feedbackKey("Enter");break;case 32:feedbackKey("Space");break;default:break}}})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown.jqGrid")})},getLocalRow:function(rowid){var ret=false,ind;this.each(function(){if(rowid!==undefined){ind=this.p._index[stripPref(this.p.idPrefix,rowid)];if(ind>=0){ret=this.p.data[ind]}}});return ret},progressBar:function(p){p=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},p||{});return this.each(function(){var sh=p.method==="show"?true:false,gridIdEscaped=jqID(this.p.id),$loading=$("#load_"+gridIdEscaped);if(p.htmlcontent!==""){$loading.html(p.htmlcontent)}switch(p.loadtype){case"disable":break;case"enable":$loading.toggle(sh);break;case"block":$("#lui_"+gridIdEscaped).toggle(sh);$loading.toggle(sh);break}})},setColWidth:function(iCol,newWidth,adjustGridWidth,skipGridAdjustments){return this.each(function(){var self=this,$self=$(self),grid=self.grid,p=self.p,h;if(typeof iCol==="string"){iCol=p.iColByName[iCol];if(iCol===undefined){return}}else{if(typeof iCol!=="number"){return}}h=grid.headers[iCol];if(h!=null){h.newWidth=newWidth;grid.newWidth=p.tblwidth+newWidth-h.width;grid.resizeColumn(iCol,!p.frozenColumns,skipGridAdjustments);if(adjustGridWidth!==false&&!skipGridAdjustments){self.fixScrollOffsetAndhBoxPadding();base.setGridWidth.call($self,grid.newWidth+p.scrollOffset,false)}}})},getAutoResizableWidth:function(iCol){var self=this;if(self.length===0){return -1}self=self[0];var rows=self.rows,row,cell,iRow,$cell,$cellFirstChild,p=self.p,cm=p.colModel[iCol],$th=$(self.grid.headers[iCol].el),$thDiv=$th.find(">div"),thPaddingLeft=parseFloat($th.css("padding-left")||0),thPaddingRight=parseFloat($th.css("padding-right")||0),$incosDiv=$thDiv.find("span.s-ico"),$wrapper=$thDiv.find(">."+p.autoResizing.wrapperClassName),wrapperOuterWidth=$wrapper.outerWidth(),wrapperCssWidth=parseFloat($wrapper.css("width")||0),widthOuter=0,colWidth=0,compact=(cm.autoResizing!=null&&cm.autoResizable.compact!==undefined)?cm.autoResizable.compact:p.autoResizing.compact,wrapperClassName=p.autoResizing.wrapperClassName;if(cm==null||!cm.autoResizable||$wrapper.length===0||cm.hidden||cm.fixed){return -1}if(!compact||$incosDiv.is(":visible")||($incosDiv.css("display")!=="none")){colWidth=p.autoResizing.widthOfVisiblePartOfSortIcon;if($thDiv.css("text-align")==="center"){colWidth+=colWidth}if(p.viewsortcols[1]==="horizontal"){colWidth+=colWidth}}colWidth+=wrapperOuterWidth+thPaddingLeft+(wrapperCssWidth===wrapperOuterWidth?thPaddingLeft+thPaddingRight:0)+parseFloat($thDiv.css("margin-left")||0)+parseFloat($thDiv.css("margin-right")||0);for(iRow=0,rows=self.rows;iRow<rows.length;iRow++){row=rows[iRow];cell=row.cells[iCol];$cell=$(row.cells[iCol]);if(cell!=null&&($(row).hasClass("jqgrow")||($(row).hasClass("jqgroup")&&cell.colSpan===1))){$cellFirstChild=$(cell.firstChild);if($cellFirstChild.hasClass(wrapperClassName)){colWidth=Math.max(colWidth,$cellFirstChild.outerWidth()+widthOuter)}else{if(p.treeGrid&&p.ExpandColumn===cm.name){$cellFirstChild=$cell.children(".cell-wrapper,.cell-wrapperleaf");colWidth=Math.max(colWidth,$cellFirstChild.outerWidth()+widthOuter+$cell.children(".tree-wrap").outerWidth())}}}else{if($(row).hasClass("jqgfirstrow")){widthOuter=(jgrid.cell_width?parseFloat($cell.css("padding-left")||0)+parseFloat($cell.css("padding-right")||0):0)+parseFloat($cell.css("border-right")||0)+parseFloat($cell.css("border-left")||0)}}}colWidth=Math.max(colWidth,cm.autoResizing!=null&&cm.autoResizing.minColWidth!==undefined?cm.autoResizing.minColWidth:p.autoResizing.minColWidth);return Math.min(colWidth,cm.autoResizing!=null&&cm.autoResizing.maxColWidth!==undefined?cm.autoResizing.maxColWidth:p.autoResizing.maxColWidth)},autoResizeColumn:function(iCol,skipGridAdjustments){return this.each(function(){var self=this,$self=$(this),p=self.p,cm=p.colModel[iCol],widthOrg,$th=$(self.grid.headers[iCol].el),newWidth=base.getAutoResizableWidth.call($self,iCol);if(cm==null||newWidth<0){return}base.setColWidth.call($self,iCol,newWidth,p.autoResizing.adjustGridWidth&&!p.autoResizing.fixWidthOnShrink&&!skipGridAdjustments,skipGridAdjustments);if(p.autoResizing.fixWidthOnShrink&&p.shrinkToFit&&!skipGridAdjustments){cm.fixed=true;widthOrg=cm.widthOrg;cm.widthOrg=cm.width;base.setGridWidth.call($self,p.width,true);cm.widthOrg=widthOrg;cm.fixed=false}$th.data("autoResized","true")})},autoResizeAllColumns:function(){return this.each(function(){var self=this,$self=$(self),p=self.p,colModel=p.colModel,nCol=colModel.length,iCol,cm,shrinkToFit=p.shrinkToFit,adjustGridWidth=p.autoResizing.adjustGridWidth,fixWidthOnShrink=p.autoResizing.fixWidthOnShrink,width=parseInt(p.widthOrg,10),grid=self.grid,autoResizeColumn=base.autoResizeColumn;p.shrinkToFit=false;p.autoResizing.adjustGridWidth=true;p.autoResizing.fixWidthOnShrink=false;for(iCol=0;iCol<nCol;iCol++){cm=colModel[iCol];if(cm.autoResizable&&cm.formatter!=="actions"){autoResizeColumn.call($self,iCol,true)}}grid.hDiv.scrollLeft=grid.bDiv.scrollLeft;if(p.footerrow){grid.sDiv.scrollLeft=grid.bDiv.scrollLeft}self.fixScrollOffsetAndhBoxPadding();if(!isNaN(width)){base.setGridWidth.call($self,width,false)}else{if(adjustGridWidth){base.setGridWidth.call($self,grid.newWidth+p.scrollOffset,false)}}p.autoResizing.fixWidthOnShrink=fixWidthOnShrink;p.autoResizing.adjustGridWidth=adjustGridWidth;p.shrinkToFit=shrinkToFit})}})}(jQuery));(function(e){var c=e.jgrid,a=function(){var f=e.makeArray(arguments);f.unshift("");f.unshift("");f.unshift(this.p);return c.feedback.apply(this,f)},b=function(g,f){return c.mergeCssClasses(c.getRes(c.guiStyles[this.p.guiStyle],"states."+g),f||"")},d=function(h,f){var i=this,g=i.grid.fbRows;return e((g!=null&&g[0].cells.length>f?g[h.rowIndex]:h).cells[f])};c.extend({editCell:function(h,g,f){return this.each(function(){var B=this,C=e(B),x=B.p,k,F,v,o,r=B.rows;if(!B.grid||x.cellEdit!==true||r==null||r[h]==null){return}h=parseInt(h,10);g=parseInt(g,10);var j=r[h],m=j.id,G=e(j),w,z=parseInt(x.iCol,10),l=parseInt(x.iRow,10),s=e(r[l]),H=x.savedRow;x.selrow=m;if(!x.knv){C.jqGrid("GridNav")}if(H.length>0){if(f===true){if(h===l&&g===z){return}}C.jqGrid("saveCell",H[0].id,H[0].ic)}else{setTimeout(function(){e("#"+c.jqID(x.knv)).attr("tabindex","-1").focus()},1)}o=x.colModel[g];k=o.name;if(k==="subgrid"||k==="cb"||k==="rn"){return}v=d.call(B,j,g);var A=o.editable,u="cell";if(e.isFunction(A)){A=A.call(B,{rowid:m,iCol:g,iRow:h,name:k,cm:o,mode:u})}var n=b.call(B,"select","edit-cell"),E=b.call(B,"hover","selected-row");if(A===true&&f===true&&!v.hasClass("not-editable-cell")){if(z>=0&&l>=0){d.call(B,s[0],z).removeClass(n);s.removeClass(E)}v.addClass(n);G.addClass(E);if(!o.edittype){o.edittype="text"}w=o.edittype;try{F=e.unformat.call(B,v,{rowId:m,colModel:o},g)}catch(D){F=w==="textarea"?v.text():v.html()}if(x.autoencode){F=c.htmlDecode(F)}H.push({id:h,ic:g,name:k,v:F});if(F==="&nbsp;"||F==="&#160;"||(F.length===1&&F.charCodeAt(0)===160)){F=""}if(e.isFunction(x.formatCell)){var y=x.formatCell.call(B,m,k,F,h,g);if(y!==undefined){F=y}}a.call(B,"beforeEditCell",m,k,F,h,g);var i=e.extend({},o.editoptions||{},{id:h+"_"+k,name:k,rowId:m,mode:u});var t=c.createEl.call(B,w,i,F,true,e.extend({},c.ajaxOptions,x.ajaxSelectOptions||{})),q=v,I=x.treeGrid===true&&k===x.ExpandColumn;if(I){q=v.children("span.cell-wrapperleaf,span.cell-wrapper")}q.html("").append(t).attr("tabindex","0");if(I){e(t).width(v.width()-v.children("div.tree-wrap").outerWidth())}c.bindEv.call(B,t,i);setTimeout(function(){e(t).focus()},1);e("input, select, textarea",v).bind("keydown",function(p){if(p.keyCode===27){if(e("input.hasDatepicker",v).length>0){if(e(".ui-datepicker").is(":hidden")){C.jqGrid("restoreCell",h,g)}else{e("input.hasDatepicker",v).datepicker("hide")}}else{C.jqGrid("restoreCell",h,g)}}if(p.keyCode===13&&!p.shiftKey){C.jqGrid("saveCell",h,g);return false}if(p.keyCode===9){if(!B.grid.hDiv.loading){if(p.shiftKey){C.jqGrid("prevCell",h,g)}else{C.jqGrid("nextCell",h,g)}}else{return false}}p.stopPropagation()});a.call(B,"afterEditCell",m,k,F,h,g);C.triggerHandler("jqGridAfterEditCell",[m,k,F,h,g])}else{if(z>=0&&l>=0){d.call(B,s[0],z).removeClass(n);s.removeClass(E)}v.addClass(n);G.addClass(E);F=v.html().replace(/\&#160\;/ig,"");a.call(B,"onSelectCell",m,k,F,h,g)}x.iCol=g;x.iRow=h})},saveCell:function(g,f){return this.each(function(){var F=this,G=e(F),A=F.p,q=c.info_dialog,D=c.jqID;if(!F.grid||A.cellEdit!==true){return}var u=G.jqGrid("getGridRes","errors"),i=u.errcap,B=G.jqGrid("getGridRes","edit"),E=B.bClose,K=A.savedRow,l=K.length>=1?0:null;if(l!==null){var h=F.rows[g],m=h.id,J=e(h),r=A.colModel[f],j=r.name,x,C,z=d.call(F,h,f);x=c.getEditedValue.call(F,z,r,!r.formatter);if(x!==K[l].v){C=G.triggerHandler("jqGridBeforeSaveCell",[m,j,x,g,f]);if(C!==undefined){x=C}if(e.isFunction(A.beforeSaveCell)){C=A.beforeSaveCell.call(F,m,j,x,g,f);if(C!==undefined){x=C}}var k=c.checkValues.call(F,x,f),o=r.formatoptions||{};if(k[0]===true){var t=G.triggerHandler("jqGridBeforeSubmitCell",[m,j,x,g,f])||{};if(e.isFunction(A.beforeSubmitCell)){t=A.beforeSubmitCell.call(F,m,j,x,g,f);if(!t){t={}}}if(e("input.hasDatepicker",z).length>0){e("input.hasDatepicker",z).datepicker("hide")}if(r.formatter==="date"&&o.sendFormatted!==true){x=e.unformat.date.call(F,x,r)}if(A.cellsubmit==="remote"){if(A.cellurl){var I={};if(A.autoencode){x=c.htmlEncode(x)}I[j]=x;var s=A.prmNames,y=s.id,w=s.oper,n=F.grid.hDiv;I[y]=c.stripPref(A.idPrefix,m);I[w]=s.editoper;I=e.extend(t,I);G.jqGrid("progressBar",{method:"show",loadtype:A.loadui,htmlcontent:c.defaults.savetext||"Saving..."});n.loading=true;e.ajax(e.extend({url:A.cellurl,data:c.serializeFeedback.call(F,A.serializeCellData,"jqGridSerializeCellData",I),type:"POST",complete:function(v){G.jqGrid("progressBar",{method:"hide",loadtype:A.loadui});n.loading=false;if((v.status<300||v.status===304)&&(v.status!==0||v.readyState!==4)){var p=G.triggerHandler("jqGridAfterSubmitCell",[F,v,I.id,j,x,g,f])||[true,""];if(p[0]===true&&e.isFunction(A.afterSubmitCell)){p=A.afterSubmitCell.call(F,v,I.id,j,x,g,f)}if(p[0]===true){G.jqGrid("setCell",m,f,x,false,false,true);z.addClass("dirty-cell");J.addClass("edited");a.call(F,"afterSaveCell",m,j,x,g,f);K.splice(0,1)}else{q.call(F,i,p[1],E);G.jqGrid("restoreCell",g,f)}}},error:function(p,L,v){e("#lui_"+D(A.id)).hide();n.loading=false;G.triggerHandler("jqGridErrorCell",[p,L,v]);if(e.isFunction(A.errorCell)){A.errorCell.call(F,p,L,v);G.jqGrid("restoreCell",g,f)}else{q.call(F,i,p.status+" : "+p.statusText+"<br/>"+L,E);G.jqGrid("restoreCell",g,f)}}},c.ajaxOptions,A.ajaxCellOptions||{}))}else{try{q.call(F,i,u.nourl,E);G.jqGrid("restoreCell",g,f)}catch(H){}}}if(A.cellsubmit==="clientArray"){G.jqGrid("setCell",m,f,x,false,false,true);z.addClass("dirty-cell");J.addClass("edited");a.call(F,"afterSaveCell",m,j,x,g,f);K.splice(0,1)}}else{try{setTimeout(function(){q.call(F,i,x+" "+k[1],E)},100);G.jqGrid("restoreCell",g,f)}catch(H){}}}else{G.jqGrid("restoreCell",g,f)}}setTimeout(function(){e("#"+D(A.knv)).attr("tabindex","-1").focus()},0)})},restoreCell:function(g,f){return this.each(function(){var k=this,h=k.p,o=k.rows[g],i=o.id,r,q,m;if(!k.grid||h.cellEdit!==true){return}var l=h.savedRow,j=d.call(k,o,f);if(l.length>=1){if(e.isFunction(e.fn.datepicker)){try{e("input.hasDatepicker",j).datepicker("hide")}catch(n){}}q=h.colModel[f];if(h.treeGrid===true&&q.name===h.ExpandColumn){j.children("span.cell-wrapperleaf,span.cell-wrapper").empty()}else{j.empty()}j.attr("tabindex","-1");r=l[0].v;m=q.formatoptions||{};if(q.formatter==="date"&&m.sendFormatted!==true){r=e.unformat.date.call(k,r,q)}e(k).jqGrid("setCell",i,f,r,false,false,true);a.call(k,"afterRestoreCell",i,r,g,f);l.splice(0,1)}setTimeout(function(){e("#"+h.knv).attr("tabindex","-1").focus()},0)})},nextCell:function(g,f){return this.each(function(){var q=this,n=e(q),m=q.p,o=false,k,j,h,l=q.rows;if(!q.grid||m.cellEdit!==true||l==null||l[g]==null){return}for(k=f+1;k<m.colModel.length;k++){h=m.colModel[k];j=h.editable;if(e.isFunction(j)){j=j.call(q,{rowid:l[g].id,iCol:k,iRow:g,name:h.name,cm:h,mode:"cell"})}if(j===true){o=k;break}}if(o!==false){n.jqGrid("editCell",g,o,true)}else{if(m.savedRow.length>0){n.jqGrid("saveCell",g,f)}}})},prevCell:function(g,f){return this.each(function(){var q=this,n=e(q),m=q.p,o=false,k,j,h,l=q.rows;if(!q.grid||m.cellEdit!==true||l==null||l[g]==null){return}for(k=f-1;k>=0;k--){h=m.colModel[k];j=h.editable;if(e.isFunction(j)){j=j.call(q,{rowid:l[g].id,iCol:k,iRow:g,name:h.name,cm:h,mode:"cell"})}if(j===true){o=k;break}}if(o!==false){n.jqGrid("editCell",g,o,true)}else{if(m.savedRow.length>0){n.jqGrid("saveCell",g,f)}}})},GridNav:function(){return this.each(function(){var l=this,o=e(l),h=l.p,f=l.grid,m,k;if(!f||h.cellEdit!==true){return}var n=f.bDiv;h.knv=h.id+"_kn";var q=e("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+h.knv+"'></div></div>");function g(z,w,y){var x=l.rows[z];if(y.substr(0,1)==="v"){var p=n.clientHeight,A=n.scrollTop,u=x.offsetTop+x.clientHeight,B=x.offsetTop;if(y==="vd"){if(u>=p){n.scrollTop=n.scrollTop+x.clientHeight}}if(y==="vu"){if(B<A){n.scrollTop=n.scrollTop-x.clientHeight}}}if(y==="h"){var t=n.clientWidth,s=n.scrollLeft,r=x.cells[w],v=r.offsetLeft+r.clientWidth,i=r.offsetLeft;if(v>=t+parseInt(s,10)){n.scrollLeft=n.scrollLeft+r.clientWidth}else{if(i<s){n.scrollLeft=n.scrollLeft-r.clientWidth}}}}function j(t,i){var s=0,r,p=h.colModel;if(i==="lft"){s=t+1;for(r=t;r>=0;r--){if(p[r].hidden!==true){s=r;break}}}if(i==="rgt"){s=t-1;for(r=t;r<p.length;r++){if(p[r].hidden!==true){s=r;break}}}return s}e(q).insertBefore(f.cDiv);e("#"+h.knv).focus().keydown(function(p){var i=parseInt(h.iRow,10),r=parseInt(h.iCol,10);k=p.keyCode;if(h.direction==="rtl"){if(k===37){k=39}else{if(k===39){k=37}}}switch(k){case 38:if(i-1>0){g(i-1,r,"vu");o.jqGrid("editCell",i-1,r,false)}break;case 40:if(i+1<=l.rows.length-1){g(i+1,r,"vd");o.jqGrid("editCell",i+1,r,false)}break;case 37:if(r-1>=0){m=j(r-1,"lft");g(i,m,"h");o.jqGrid("editCell",i,m,false)}break;case 39:if(r+1<=h.colModel.length-1){m=j(r+1,"rgt");g(i,m,"h");o.jqGrid("editCell",i,m,false)}break;case 13:if(r>=0&&i>=0){o.jqGrid("editCell",i,r,true)}break;default:return true}return false})})},getChangedCells:function(g){var f=[];if(!g){g="all"}this.each(function(){var k=this,j=k.p,h=c.htmlDecode,i=k.rows;if(!k.grid||j.cellEdit!==true){return}e(i).each(function(l){var m={};if(e(this).hasClass("edited")){var n=this;e(this.cells).each(function(q){var p=j.colModel[q],o=p.name,s=d.call(k,n,q);if(o!=="cb"&&o!=="subgrid"&&o!=="rn"&&(g!=="dirty"||s.hasClass("dirty-cell"))){try{m[o]=e.unformat.call(k,s[0],{rowId:i[l].id,colModel:p},q)}catch(r){m[o]=h(s.html())}}});m.id=this.id;f.push(m)}})});return f}})}(jQuery));(function(d){var a=d.jgrid,b=a.getMethod("getGridRes"),c=function(f,e){return a.mergeCssClasses(a.getRes(a.guiStyles[this.p.guiStyle],f),e||"")};a.jqModal=a.jqModal||{};d.extend(true,a.jqModal,{toTop:true});d.extend(a,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true");if(e.o){e.o.remove()}},hideModal:function(f,k){k=d.extend({jqm:true,gb:"",removemodal:false,formprop:false,form:""},k||{});var j=k.gb&&typeof k.gb==="string"&&k.gb.substr(0,6)==="#gbox_"?d("#"+k.gb.substr(6))[0]:false;if(k.onClose){var i=j?k.onClose.call(j,f):k.onClose(f);if(typeof i==="boolean"&&!i){return}}if(k.formprop&&j&&k.form){var e=d(f)[0].style.height;if(e.indexOf("px")>-1){e=parseFloat(e)}var h,g;if(k.form==="edit"){h="#"+a.jqID("FrmGrid_"+k.gb.substr(6));g="formProp"}else{if(k.form==="view"){h="#"+a.jqID("ViewGrid_"+k.gb.substr(6));g="viewProp"}}d(j).data(g,{top:parseFloat(d(f).css("top")),left:parseFloat(d(f).css("left")),width:d(f).width(),height:e,dataheight:d(h).height(),datawidth:d(h).width()})}if(d.fn.jqm&&k.jqm===true){d(f).attr("aria-hidden","true").jqmHide()}else{if(k.gb!==""){try{d(">.jqgrid-overlay",k.gb).filter(":first").hide()}catch(l){}}d(f).hide().attr("aria-hidden","true")}if(k.removemodal){d(f).remove()}},findPos:function(f){var g=0,e=0;if(f.offsetParent){do{g+=f.offsetLeft;e+=f.offsetTop;f=f.offsetParent}while(f)}return[g,e]},createModal:function(l,u,r,f,A,g,k){var t=a.jqID,n=this.p,e=n!=null?n.jqModal||{}:{};r=d.extend(true,{resizingRightBottomIcon:"ui-icon ui-icon-gripsmall-diagonal-se"},a.jqModal||{},e,r);var m=document.createElement("div"),i="#"+t(l.themodal),v=d(r.gbox).attr("dir")==="rtl"?true:false,z=l.resizeAlso?"#"+t(l.resizeAlso):false;k=d.extend({},k||{});m.className=c.call(this,"dialog.window","ui-jqdialog");m.id=l.themodal;m.dir=v?"rtl":"ltr";var y=document.createElement("div");y.className=c.call(this,"dialog.header","ui-jqdialog-titlebar "+(v?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr"));y.id=l.modalhead;d(y).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>");var x=c.call(this,"states.hover"),q=d("<a class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){q.addClass(x)},function(){q.removeClass(x)}).append("<span class='"+a.getIconRes(n.iconSet,"form.close")+"'></span>");d(y).append(q);var B=document.createElement("div");d(B).addClass(c.call(this,"dialog.content","ui-jqdialog-content")).attr("id",l.modalcontent);d(B).append(u);m.appendChild(B);d(m).prepend(y);if(g===true){d("body").append(m)}else{if(typeof g==="string"){d(g).append(m)}else{d(m).insertBefore(f)}}d(m).css(k);if(r.jqModal===undefined){r.jqModal=true}var s={};if(d.fn.jqm&&r.jqModal===true){if(r.left===0&&r.top===0&&r.overlay){var h=[];h=a.findPos(A);r.left=h[0]+4;r.top=h[1]+4}s.top=r.top+"px";s.left=r.left}else{if(r.left!==0||r.top!==0){s.left=r.left;s.top=r.top+"px"}}d("a.ui-jqdialog-titlebar-close",y).click(function(){var o=d(i).data("onClose")||r.onClose;var p=d(i).data("gbox")||r.gbox;a.hideModal(i,{gb:p,jqm:r.jqModal,onClose:o,removemodal:r.removemodal||false,formprop:!r.recreateForm||false,form:r.form||""});return false});if(r.width===0||!r.width){r.width=300}if(r.height===0||!r.height){r.height=200}if(!r.zIndex){var j=d(f).parents("*[role=dialog]").filter(":first").css("z-index");if(j){r.zIndex=parseInt(j,10)+2;r.toTop=true}else{r.zIndex=950}}if(s.left){s.left+="px"}d(m).css(d.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},s)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":l.modalhead,"aria-hidden":"true"});if(r.drag===undefined){r.drag=true}if(r.resize===undefined){r.resize=true}if(r.drag){if(d.fn.jqDrag){d(y).css("cursor","move");d(m).jqDrag(y)}else{try{d(m).draggable({handle:d("#"+t(y.id))})}catch(w){}}}if(r.resize){if(d.fn.jqResize){d(m).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+r.resizingRightBottomIcon+"'></div>");d(i).jqResize(".jqResize",z)}else{try{d(m).resizable({handles:"se, sw",alsoResize:z})}catch(w){}}}if(r.closeOnEscape===true){d(m).keydown(function(p){if(p.which===27){var o=d(i).data("onClose")||r.onClose;a.hideModal(i,{gb:r.gbox,jqm:r.jqModal,onClose:o,removemodal:r.removemodal||false,formprop:!r.recreateForm||false,form:r.form||""})}})}},viewModal:function(e,f){f=d.extend(true,{overlay:30,modal:false,overlayClass:"ui-widget-overlay",onShow:a.showModal,onHide:a.closeModal,gbox:"",jqm:true,jqM:true},a.jqModal||{},f||{});if(d.fn.jqm&&f.jqm===true){if(f.jqM){d(e).attr("aria-hidden","false").jqm(f).jqmShow()}else{d(e).attr("aria-hidden","false").jqmShow()}}else{if(f.gbox!==""){d(">.jqgrid-overlay",f.gbox).filter(":first").show();d(e).data("gbox",f.gbox)}d(e).show().attr("aria-hidden","false");try{d(":input:visible",e)[0].focus()}catch(g){}}},info_dialog:function(v,n,h,u){var l=this,e=l.p,f=e!=null?e.jqModal||{}:{},s=d.extend(true,{width:290,height:"auto",dataheight:"auto",drag:true,resize:false,left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]},a.jqModal||{},f,{caption:"<b>"+v+"</b>"},u||{}),j=s.jqModal;if(d.fn.jqm&&!j){j=false}var m="",k,r=c.call(l,"states.hover");if(s.buttons.length>0){for(k=0;k<s.buttons.length;k++){if(s.buttons[k].id===undefined){s.buttons[k].id="info_button_"+k}m+=a.builderFmButon.call(l,s.buttons[k].id,s.buttons[k].text)}}var q=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px",t="text-align:"+s.align+";",g="<div id='info_id'>";g+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+q+";"+t+"'>"+n+"</div>";if(h||m!==""){g+="<hr class='"+c.call(l,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+s.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(h?a.builderFmButon.call(l,"closedialog",h):"")+m+"</div>"}g+="</div>";try{if(d("#info_dialog").attr("aria-hidden")==="false"){a.hideModal("#info_dialog",{jqm:j})}d("#info_dialog").remove()}catch(o){}a.createModal.call(l,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},g,s,"","",true);if(m){d.each(s.buttons,function(i){d("#"+a.jqID(l.id),"#info_id").bind("click",function(){s.buttons[i].onClick.call(d("#info_dialog"));return false})})}d("#closedialog","#info_id").click(function(){a.hideModal("#info_dialog",{jqm:j,onClose:d("#info_dialog").data("onClose")||s.onClose,gb:d("#info_dialog").data("gbox")||s.gbox});return false});d(".fm-button","#info_dialog").hover(function(){d(this).addClass(r)},function(){d(this).removeClass(r)});if(d.isFunction(s.beforeOpen)){s.beforeOpen()}a.viewModal("#info_dialog",{onHide:function(i){i.w.hide().remove();if(i.o){i.o.remove()}},modal:s.modal,jqm:j});if(d.isFunction(s.afterOpen)){s.afterOpen()}try{d("#info_dialog").focus()}catch(o){}},bindEv:function(f,e){var g=this;if(d.isFunction(e.dataInit)){e.dataInit.call(g,f,e)}if(e.dataEvents){d.each(e.dataEvents,function(){if(this.data!==undefined){d(f).bind(this.type,this.data,this.fn)}else{d(f).bind(this.type,this.fn)}})}},createEl:function(E,y,s,h,o){var M="",f=this,K=f.p,q=a.info_dialog,x=function(e){return b.call(d(f),e)},v=x("errors.errcap"),u=x("edit"),m=u.msg,j=u.bClose;function J(T,p,i){var e=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","selectFilled","rowId","mode"];if(i!==undefined&&d.isArray(i)){d.merge(e,i)}d.each(p,function(U,V){if(d.inArray(U,e)===-1){d(T).attr(U,V)}});if(!p.hasOwnProperty("id")){d(T).attr("id",a.randId())}}switch(E){case"textarea":M=document.createElement("textarea");if(h){if(!y.cols){d(M).css({width:"100%","box-sizing":"border-box"})}}else{if(!y.cols){y.cols=20}}if(!y.rows){y.rows=2}if(s==="&nbsp;"||s==="&#160;"||(s.length===1&&s.charCodeAt(0)===160)){s=""}M.value=s;J(M,y);d(M).attr({role:"textbox"});break;case"checkbox":M=document.createElement("input");M.type="checkbox";if(!y.value){var F=String(s).toLowerCase();if(F.search(/(false|f|0|no|n|off|undefined)/i)<0&&F!==""){M.checked=true;M.defaultChecked=true;M.value=s}else{M.value="on"}d(M).data("offval","off")}else{var H=y.value.split(":");if(s===H[0]){M.checked=true;M.defaultChecked=true}M.value=H[0];d(M).data("offval",H[1])}J(M,y,["value"]);d(M).attr({role:"checkbox","aria-checked":M.checked?"true":"false"});break;case"select":M=document.createElement("select");M.setAttribute("role","listbox");var I,z=[],C,S;S=K.iColByName[y.name];C=K.colModel[S];if(y.multiple===true){I=true;M.multiple="multiple";d(M).attr("aria-multiselectable","true")}else{I=false}if(y.dataUrl!==undefined){var n=null,w=y.postData||o.postData;try{n=y.rowId}catch(g){}if(K&&K.idPrefix){n=a.stripPref(K.idPrefix,n)}d.ajax(d.extend({url:d.isFunction(y.dataUrl)?y.dataUrl.call(f,n,s,String(y.name)):y.dataUrl,type:"GET",dataType:"html",data:d.isFunction(w)?w.call(f,n,s,String(y.name)):w,context:{elem:M,options:y,vl:s,cm:C,iCol:S},success:function(i,e,W){var T=[],Z=this.elem,Y=this.vl,p=this.cm,V=this.iCol,aa=d.extend({},this.options),X=aa.multiple===true,U=d.isFunction(aa.buildSelect)?aa.buildSelect.call(f,i,W):i;if(typeof U==="string"){U=d(d.trim(U)).html()}if(U){d(Z).append(U);J(Z,aa,w?["postData"]:undefined);if(aa.size===undefined){aa.size=X?3:1}if(X){T=Y.split(",");T=d.map(T,function(ab){return d.trim(ab)})}else{T[0]=d.trim(Y)}setTimeout(function(){d("option",Z).each(function(ab){if(ab===0&&Z.multiple){this.selected=false}d(this).attr("role","option");if(d.inArray(d.trim(d(this).text()),T)>-1||d.inArray(d.trim(d(this).val()),T)>-1){this.selected="selected"}});a.fullBoolFeedback.call(f,aa.selectFilled,"jqGridSelectFilled",{elem:Z,options:aa,cm:p,cmName:p.name,iCol:V})},0)}}},o||{}))}else{if(y.value){var N;if(y.size===undefined){y.size=I?3:1}if(I){z=s.split(",");z=d.map(z,function(e){return d.trim(e)})}if(typeof y.value==="function"){y.value=y.value()}var r,l,A,Q,R,B=y.separator===undefined?":":y.separator,k=y.delimiter===undefined?";":y.delimiter,P=function(i,e){if(e>0){return i}};if(typeof y.value==="string"){r=y.value.split(k);for(N=0;N<r.length;N++){l=r[N].split(B);if(l.length>2){l[1]=d.map(l,P).join(B)}A=document.createElement("option");A.setAttribute("role","option");A.value=l[0];A.innerHTML=l[1];M.appendChild(A);Q=d.trim(l[0]);R=d.trim(l[1]);if(!I&&(Q===d.trim(s)||R===d.trim(s))){A.selected="selected"}if(I&&(d.inArray(R,z)>-1||d.inArray(Q,z)>-1)){A.selected="selected"}}}else{if(typeof y.value==="object"){var L=y.value,t;for(t in L){if(L.hasOwnProperty(t)){A=document.createElement("option");A.setAttribute("role","option");A.value=t;A.innerHTML=L[t];M.appendChild(A);if(!I&&(d.trim(t)===d.trim(s)||d.trim(L[t])===d.trim(s))){A.selected="selected"}if(I&&(d.inArray(d.trim(L[t]),z)>-1||d.inArray(d.trim(t),z)>-1)){A.selected="selected"}}}}}J(M,y,["value"]);a.fullBoolFeedback.call(f,y.selectFilled,"jqGridSelectFilled",{elem:M,options:y,cm:C,cmName:C.name,iCol:S})}}break;case"text":case"password":case"button":var G;if(E==="button"){G="button"}else{G="textbox"}M=document.createElement("input");M.type=E;M.value=s;J(M,y);if(E!=="button"){if(h){if(!y.size){d(M).css({width:"100%","box-sizing":"border-box"})}}else{if(!y.size){y.size=20}}}d(M).attr("role",G);break;case"image":case"file":M=document.createElement("input");M.type=E;J(M,y);break;case"custom":M=document.createElement("span");try{if(d.isFunction(y.custom_element)){var D=y.custom_element.call(f,s,y);if(D instanceof jQuery||a.isHTMLElement(D)||typeof D==="string"){D=d(D).addClass("customelement").attr({id:y.id,name:y.name});d(M).empty().append(D)}else{throw"editoptions.custom_element returns value of a wrong type"}}else{throw"editoptions.custom_element is not a function"}}catch(O){if(O==="e1"){q.call(f,v,"function 'custom_element' "+m.nodefined,j)}if(O==="e2"){q.call(f,v,"function 'custom_element' "+m.novalue,j)}else{q.call(f,v,typeof O==="string"?O:O.message,j)}}break}return M},checkDate:function(q,g){var o=function(i){return(((i%4===0)&&(i%100!==0||(i%400===0)))?29:28)},k={},s;q=q.toLowerCase();if(q.indexOf("/")!==-1){s="/"}else{if(q.indexOf("-")!==-1){s="-"}else{if(q.indexOf(".")!==-1){s="."}else{s="/"}}}q=q.split(s);g=g.split(s);if(g.length!==3){return false}var l=-1,r,m=-1,h=-1,n,f;for(n=0;n<q.length;n++){f=isNaN(g[n])?0:parseInt(g[n],10);k[q[n]]=f;r=q[n];if(r.indexOf("y")!==-1){l=n}if(r.indexOf("m")!==-1){h=n}if(r.indexOf("d")!==-1){m=n}}if(q[l]==="y"||q[l]==="yyyy"){r=4}else{if(q[l]==="yy"){r=2}else{r=-1}}var p,e=[0,31,29,31,30,31,30,31,31,30,31,30,31];if(l===-1){return false}p=k[q[l]].toString();if(r===2&&p.length===1){r=1}if(p.length!==r||(k[q[l]]===0&&g[l]!=="00")){return false}if(h===-1){return false}p=k[q[h]].toString();if(p.length<1||k[q[h]]<1||k[q[h]]>12){return false}if(m===-1){return false}p=k[q[m]].toString();if(p.length<1||k[q[m]]<1||k[q[m]]>31||(k[q[h]]===2&&k[q[m]]>o(k[q[l]]))||k[q[m]]>e[k[q[h]]]){return false}return true},isEmpty:function(e){if(e.match(/^\s+$/)||e===""){return true}return false},checkTime:function(g){var f=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/,e;if(!a.isEmpty(g)){e=g.match(f);if(e){if(e[3]){if(e[1]<1||e[1]>12){return false}}else{if(e[1]>23){return false}}if(e[2]>59){return false}}else{return false}}return true},checkValues:function(h,t,v,o){var n,w,i,q=this,f=q.p,s=f.colModel,u,m=a.isEmpty,l=b.call(d(q),"edit.msg"),k=b.call(d(q),"formatter.date.masks");if(v===undefined){if(typeof t==="string"){t=f.iColByName[t]}if(t===undefined||t<0){return[true,"",""]}u=s[t];n=u.editrules;if(u.formoptions!=null){w=u.formoptions.label}}else{n=v;w=o===undefined?"_":o;u=s[t]}if(n){if(!w){w=f.colNames!=null?f.colNames[t]:u.label}if(n.required===true){if(m(h)){return[false,w+": "+l.required,""]}}var j=n.required===false?false:true;if(n.number===true){if(!(j===false&&m(h))){if(isNaN(h)){return[false,w+": "+l.number,""]}}}if(n.minValue!==undefined&&!isNaN(n.minValue)){if(parseFloat(h)<parseFloat(n.minValue)){return[false,w+": "+l.minValue+" "+n.minValue,""]}}if(n.maxValue!==undefined&&!isNaN(n.maxValue)){if(parseFloat(h)>parseFloat(n.maxValue)){return[false,w+": "+l.maxValue+" "+n.maxValue,""]}}var e;if(n.email===true){if(!(j===false&&m(h))){e=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!e.test(h)){return[false,w+": "+l.email,""]}}}if(n.integer===true){if(!(j===false&&m(h))){if(isNaN(h)){return[false,w+": "+l.integer,""]}if((h%1!==0)||(h.indexOf(".")!==-1)){return[false,w+": "+l.integer,""]}}}if(n.date===true){if(!(j===false&&m(h))){if(u.formatoptions&&u.formatoptions.newformat){i=u.formatoptions.newformat;if(k.hasOwnProperty(i)){i=k[i]}}else{i=s[t].datefmt||"Y-m-d"}if(!a.checkDate(i,h)){return[false,w+": "+l.date+" - "+i,""]}}}if(n.time===true){if(!(j===false&&m(h))){if(!a.checkTime(h)){return[false,w+": "+l.date+" - hh:mm (am/pm)",""]}}}if(n.url===true){if(!(j===false&&m(h))){e=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!e.test(h)){return[false,w+": "+l.url,""]}}}if(n.custom===true){if(!(j===false&&m(h))){if(d.isFunction(n.custom_func)){var r=n.custom_func.call(q,h,w,t);return d.isArray(r)?r:[false,l.customarray,""]}return[false,l.customfcheck,""]}}}return[true,"",""]}})}(jQuery));(function(e){var b=e.jgrid,c=b.getMethod("getGridRes"),a=b.jqID,d=function(i,g){var h=this.p,f=h.guiStyle||b.defaults.guiStyle||"jQueryUI";return b.mergeCssClasses(b.getRes(b.guiStyles[f],i),g||"")};b.extend({getColProp:function(i){var g={},h=this[0],f;if(h!=null&&h.grid){f=h.p.iColByName[i];if(f!==undefined){return h.p.colModel[f]}}return g},setColProp:function(g,f){return this.each(function(){var h=this,j=h.p,i;if(h.grid&&j!=null&&f){i=j.iColByName[g];if(i!==undefined){e.extend(true,j.colModel[i],f)}}})},sortGrid:function(g,f,h){return this.each(function(){var t=this,j=t.grid,k=t.p,r=k.colModel,m=r.length,s,o,q=false,n;if(!j){return}if(!g){g=k.sortname}if(typeof f!=="boolean"){f=false}for(o=0;o<m;o++){s=r[o];if(s.index===g||s.name===g){if(k.frozenColumns===true&&s.frozen===true){q=j.fhDiv.find("#"+k.id+"_"+g)}if(!q||q.length===0){q=j.headers[o].el}n=s.sortable;if(typeof n!=="boolean"||n){t.sortData("jqgh_"+k.id+"_"+g,o,f,h,q)}break}}})},clearBeforeUnload:function(){return this.each(function(){var o=this,g=o.p,f=o.grid,k,h=b.clearArray,j=Object.prototype.hasOwnProperty;if(e.isFunction(f.emptyRows)){f.emptyRows.call(o,true,true)}e(document).unbind("mouseup.jqGrid"+g.id);e(f.hDiv).unbind("mousemove");e(o).unbind();var n,m=f.headers.length;for(n=0;n<m;n++){f.headers[n].el=null}for(k in f){if(f.hasOwnProperty(k)){f.propOrMethod=null}}var q=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"];m=q.length;for(n=0;n<m;n++){if(j.call(o,q[n])){o[q[n]]=null}}o._index={};h(g.data);h(g.lastSelectedData);h(g.selarrrow);h(g.savedRow)})},GridDestroy:function(){return this.each(function(){var f=this,g=f.p;if(f.grid&&g!=null){if(g.pager){e(g.pager).remove()}try{e("#alertmod_"+g.idSel).remove();e(f).jqGrid("clearBeforeUnload");e(g.gBox).remove()}catch(h){}}})},GridUnload:function(){return this.each(function(){var f=this,i=e(f),g=f.p,h=e.fn.jqGrid;if(!f.grid){return}i.removeClass(h.getGuiStyles.call(i,"grid","ui-jqgrid-btable"));if(g.pager){e(g.pager).empty().removeClass(h.getGuiStyles.call(i,"pagerBottom","ui-jqgrid-pager")).removeAttr("style").removeAttr("dir")}i.jqGrid("clearBeforeUnload");i.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style");i.empty();i.insertBefore(g.gBox).show();e(g.pager).insertBefore(g.gBox).show();e(g.gBox).remove()})},setGridState:function(f){return this.each(function(){var l=this,h=l.p,g=l.grid,i=g.cDiv,m=e(g.uDiv),j=e(g.ubDiv);if(!g||h==null){return}var o=h.iconSet||b.defaults.iconSet||"jQueryUI",k=function(p){return b.getIconRes(o,"gridMinimize."+p)},q=k("visible"),n=k("hidden");if(f==="hidden"){e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",h.gView).slideUp("fast");if(h.pager){e(h.pager).slideUp("fast")}if(h.toppager){e(h.toppager).slideUp("fast")}if(h.toolbar[0]===true){if(h.toolbar[1]==="both"){j.slideUp("fast")}m.slideUp("fast")}if(h.footerrow){e(".ui-jqgrid-sdiv",h.gBox).slideUp("fast")}e(".ui-jqgrid-titlebar-close span",i).removeClass(q).addClass(n);h.gridstate="hidden"}else{if(f==="visible"){e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",h.gView).slideDown("fast");if(h.pager){e(h.pager).slideDown("fast")}if(h.toppager){e(h.toppager).slideDown("fast")}if(h.toolbar[0]===true){if(h.toolbar[1]==="both"){j.slideDown("fast")}m.slideDown("fast")}if(h.footerrow){e(".ui-jqgrid-sdiv",h.gBox).slideDown("fast")}e(".ui-jqgrid-titlebar-close span",i).removeClass(n).addClass(q);h.gridstate="visible"}}})},filterToolbar:function(f){return this.each(function(){var B=this,g=B.grid,C=e(B),w=B.p,q=b.bindEv,n=b.info_dialog;if(this.ftoolbar){return}var y=e.extend(true,{autosearch:true,autosearchDelay:500,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:false,groupOp:"AND",defaultSearch:"bw",searchOperators:false,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},b.search,w.searching||{},f||{}),s=w.colModel,t=function(o){return c.call(C,o)},j=t("errors.errcap"),A=t("edit.bClose"),m=t("edit.msg"),D=d.call(B,"states.hover"),E=d.call(B,"states.select"),k=d.call(B,"filterToolbar.dataField"),h=function(){var H={},G=0,p={};e.each(s,function(){var R=this,U=R.index||R.name,S,M,L=e("#gs_"+a(R.name),(R.frozen===true&&w.frozenColumns===true)?g.fhDiv:g.hDiv),N=function(W,V){var X=R.formatoptions||{};return X[W]!==undefined?X[W]:t("formatter."+(V||R.formatter)+"."+W)},P=function(W){var V=N("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return W.replace(new RegExp(V,"g"),"")};if(y.searchOperators){M=L.parent().prev().children("a").data("soper")||y.defaultSearch}else{M=(R.searchoptions&&R.searchoptions.sopt)?R.searchoptions.sopt[0]:R.stype==="select"?"eq":y.defaultSearch}if(R.stype==="custom"&&e.isFunction(R.searchoptions.custom_value)&&L.length>0&&L[0].nodeName.toUpperCase()==="SPAN"){S=R.searchoptions.custom_value.call(B,L.children(".customelement").filter(":first"),"get")}else{S=e.trim(L.val());switch(R.formatter){case"integer":S=P(S).replace(N("decimalSeparator","number"),".");if(S!==""){S=String(parseInt(S,10))}break;case"number":S=P(S).replace(N("decimalSeparator"),".");if(S!==""){S=String(parseFloat(S))}break;case"currency":var O=N("prefix"),T=N("suffix");if(O&&O.length){S=S.substr(O.length)}if(T&&T.length){S=S.substr(0,S.length-T.length)}S=P(S).replace(N("decimalSeparator"),".");if(S!==""){S=String(parseFloat(S))}break;default:break}}if(S||M==="nu"||M==="nn"){H[U]=S;p[U]=M;G++}else{try{delete w.postData[U]}catch(Q){}}});var I=G>0?true:false;if(y.stringResult||y.searchOperators||w.datatype==="local"){var o='{"groupOp":"'+y.groupOp+'","rules":[';var F=0;e.each(H,function(L,M){if(F>0){o+=","}o+='{"field":"'+L+'",';o+='"op":"'+p[L]+'",';M+="";o+='"data":"'+M.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';F++});o+="]}";e.extend(w.postData,{filters:o});e.each(["searchField","searchString","searchOper"],function(L,M){if(w.postData.hasOwnProperty(M)){delete w.postData[M]}})}else{e.extend(w.postData,H)}var K;if(w.searchurl){K=w.url;C.jqGrid("setGridParam",{url:w.searchurl})}var J=C.triggerHandler("jqGridToolbarBeforeSearch")==="stop"?true:false;if(!J&&e.isFunction(y.beforeSearch)){J=y.beforeSearch.call(B)}if(!J){C.jqGrid("setGridParam",{search:I}).trigger("reloadGrid",[e.extend({page:1},y.reloadGridSearchOptions||{})])}if(K){C.jqGrid("setGridParam",{url:K})}C.triggerHandler("jqGridToolbarAfterSearch");if(e.isFunction(y.afterSearch)){y.afterSearch.call(B)}},l=function(o){var F={},p=0,L;o=(typeof o!=="boolean")?true:o;e.each(s,function(){var O,M=this,N=e("#gs_"+a(M.name),(M.frozen===true&&w.frozenColumns===true)?g.fhDiv:g.hDiv),P;if(M.searchoptions&&M.searchoptions.defaultValue!==undefined){O=M.searchoptions.defaultValue}L=M.index||M.name;switch(M.stype){case"select":P=N.length>0?!N[0].multiple:true;N.find("option").each(function(R){this.selected=R===0&&P;if(e(this).val()===O){this.selected=true;return false}});if(O!==undefined){F[L]=O;p++}else{try{delete w.postData[L]}catch(Q){}}break;case"text":N.val(O||"");if(O!==undefined){F[L]=O;p++}else{try{delete w.postData[L]}catch(Q){}}break;case"custom":if(e.isFunction(M.searchoptions.custom_value)&&N.length>0&&N[0].nodeName.toUpperCase()==="SPAN"){M.searchoptions.custom_value.call(B,N.children(".customelement").filter(":first"),"set",O||"")}break}});var I=p>0?true:false;w.resetsearch=true;if(y.stringResult||y.searchOperators||w.datatype==="local"){var J='{"groupOp":"'+y.groupOp+'","rules":[';var H=0;e.each(F,function(M,N){if(H>0){J+=","}J+='{"field":"'+M+'",';J+='"op":"eq",';N+="";J+='"data":"'+N.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';H++});J+="]}";e.extend(w.postData,{filters:J});e.each(["searchField","searchString","searchOper"],function(M,N){if(w.postData.hasOwnProperty(N)){delete w.postData[N]}})}else{e.extend(w.postData,F)}var G;if(w.searchurl){G=w.url;C.jqGrid("setGridParam",{url:w.searchurl})}var K=C.triggerHandler("jqGridToolbarBeforeClear")==="stop"?true:false;if(!K&&e.isFunction(y.beforeClear)){K=y.beforeClear.call(B)}if(!K){if(o){C.jqGrid("setGridParam",{search:I}).trigger("reloadGrid",[e.extend({page:1},y.reloadGridResetOptions||{})])}}if(G){C.jqGrid("setGridParam",{url:G})}C.triggerHandler("jqGridToolbarAfterClear");if(e.isFunction(y.afterClear)){y.afterClear()}},u=function(){var o=e("tr.ui-search-toolbar",g.hDiv),p=w.frozenColumns===true?e("tr.ui-search-toolbar",g.fhDiv):false;if(o.css("display")==="none"){o.show();if(p){p.show()}}else{o.hide();if(p){p.hide()}}},r=t("search.odata")||[],z=w.customSortOperations,x=function(T,G,M){e("#sopt_menu").remove();G=parseInt(G,10);M=parseInt(M,10)+18;var P,L,R=0,Q=[],N=e(T).data("soper"),p=e(T).data("colname"),I=e(".ui-jqgrid-view").css("font-size")||"11px",O='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+I+";left:"+G+"px;top:"+M+'px;">';R=w.iColByName[p];if(R===undefined){return}var K=s[R],F=e.extend({},K.searchoptions),S,U,H,o,J;if(!F.sopt){F.sopt=[];F.sopt[0]=K.stype==="select"?"eq":y.defaultSearch}e.each(r,function(){Q.push(this.oper)});if(z!=null){e.each(z,function(V){Q.push(V)})}for(R=0;R<F.sopt.length;R++){H=F.sopt[R];L=e.inArray(H,Q);if(L!==-1){S=r[L];if(S!==undefined){o=y.operands[H];J=S.text}else{if(z!=null){U=z[H];o=U.operand;J=U.text}}P=N===H?E:"";O+='<li class="ui-menu-item '+P+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+H+'" data-oper="'+o+'"><table'+(b.msie&&b.msiever()<8?' cellspacing="0"':"")+'><tr><td style="width:25px">'+o+"</td><td>"+J+"</td></tr></table></a></li>"}}O+="</ul>";e("body").append(O);e("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");e("#sopt_menu > li > a").hover(function(){e(this).addClass(D)},function(){e(this).removeClass(D)}).click(function(){var W=e(this).attr("value"),X=e(this).data("oper");C.triggerHandler("jqGridToolbarSelectOper",[W,X,T]);e("#sopt_menu").hide();e(T).text(X).data("soper",W);if(y.autosearch===true){var V=e(T).parent().next().children()[0];if(e(V).val()||W==="nu"||W==="nn"){h()}}})},v,i=e("<tr class='ui-search-toolbar' role='row'></tr>");e.each(s,function(N){var K=this,T,O="filter",I,P,S="",ad,X,W,J=K.searchoptions,af=K.editoptions,G=e("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+w.direction+"'></th>"),M=e("<div style='position:relative;height:auto;'></div>"),H=e("<table class='ui-search-table'"+(b.msie&&b.msiever()<8?" cellspacing='0'":"")+"><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></table>");if(this.hidden===true){e(G).css("display","none")}this.search=this.search===false?false:true;if(this.stype===undefined){this.stype="text"}T=e.extend({mode:O},J||{});if(this.search){if(y.searchOperators){X=(T.sopt)?T.sopt[0]:K.stype==="select"?"eq":y.defaultSearch;for(W=0;W<r.length;W++){if(r[W].oper===X){ad=y.operands[X]||"";break}}if(ad===undefined&&z!=null){var ac;for(ac in z){if(z.hasOwnProperty(ac)&&ac===X){ad=z[ac].operand;break}}}if(ad===undefined){ad="="}var U=T.searchtitle!=null?T.searchtitle:t("search.operandTitle");S="<a title='"+U+"' style='padding-right: 0.5em;' data-soper='"+X+"' class='soptclass' data-colname='"+this.name+"'>"+ad+"</a>"}e("td",H).filter(":first").data("colindex",N).append(S);if(T.sopt==null||T.sopt.length===1){e("td.ui-search-oper",H).hide()}if(T.clearSearch===undefined){T.clearSearch=this.stype==="text"?true:false}if(T.clearSearch){var L=t("search.resetTitle")||"Clear Search Value";e("td",H).eq(2).append("<a title='"+L+"' style='padding-right: 0.2em;padding-left: 0.3em;' class='clearsearchclass'>"+y.resetIcon+"</a>")}else{e("td",H).eq(2).hide()}switch(this.stype){case"select":I=this.surl||T.dataUrl;if(I){P=M;e(P).append(H);e.ajax(e.extend({url:I,dataType:"html",success:function(ai,ak,ah){if(T.buildSelect!==undefined){var aj=T.buildSelect(ai,ah);if(aj){e("td",H).eq(1).append(aj)}}else{e("td",H).eq(1).append(ai)}var ag=H.find("td.ui-search-input>select");if(T.defaultValue!==undefined){ag.val(T.defaultValue)}ag.attr({name:K.index||K.name,id:"gs_"+K.name});if(T.attr){ag.attr(T.attr)}ag.addClass(k);ag.css({width:"100%"});q.call(B,ag[0],T);b.fullBoolFeedback.call(B,T.selectFilled,"jqGridSelectFilled",{elem:ag[0],options:T,cm:K,cmName:K.name,iCol:N,mode:O});if(y.autosearch===true){ag.change(function(){h();return false})}}},b.ajaxOptions,w.ajaxSelectOptions||{}))}else{var p,Q,ab;if(J){p=J.value===undefined?"":J.value;Q=J.separator===undefined?":":J.separator;ab=J.delimiter===undefined?";":J.delimiter}else{if(af){p=af.value===undefined?"":af.value;Q=af.separator===undefined?":":af.separator;ab=af.delimiter===undefined?";":af.delimiter}}if(p){var Z=document.createElement("select");Z.style.width="100%";e(Z).attr({name:K.index||K.name,id:"gs_"+K.name,role:"listbox"});var R,F,ae,V;if(typeof p==="string"){X=p.split(ab);for(V=0;V<X.length;V++){R=X[V].split(Q);F=document.createElement("option");F.value=R[0];F.innerHTML=R[1];Z.appendChild(F)}}else{if(typeof p==="object"){for(ae in p){if(p.hasOwnProperty(ae)){F=document.createElement("option");F.value=ae;F.innerHTML=p[ae];Z.appendChild(F)}}}}if(T.defaultValue!==undefined){e(Z).val(T.defaultValue)}if(T.attr){e(Z).attr(T.attr)}e(Z).addClass(k);e(M).append(H);q.call(B,Z,T);e("td",H).eq(1).append(Z);b.fullBoolFeedback.call(B,T.selectFilled,"jqGridSelectFilled",{elem:Z,options:J||af||{},cm:K,cmName:K.name,iCol:N,mode:O});if(y.autosearch===true){e(Z).change(function(){h();return false})}}}break;case"text":var aa=T.defaultValue!==undefined?T.defaultValue:"";e("td",H).eq(1).append("<input type='text' role='textbox' class='"+k+"' style='width:100%;padding:0;' name='"+(K.index||K.name)+"' id='gs_"+K.name+"' value='"+aa+"'/>");e(M).append(H);if(T.attr){e("input",M).attr(T.attr)}q.call(B,e("input",M)[0],T);if(y.autosearch===true){if(y.searchOnEnter){e("input",M).keypress(function(ah){var ag=ah.charCode||ah.keyCode||0;if(ag===13){h();return false}return this})}else{e("input",M).keydown(function(ah){var ag=ah.which;switch(ag){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:if(v){clearTimeout(v)}v=setTimeout(function(){h()},y.autosearchDelay)}})}}break;case"custom":e("td",H).eq(1).append("<span style='width:95%;padding:0;' class='"+k+"' name='"+(K.index||K.name)+"' id='gs_"+K.name+"'/>");e(M).append(H);try{if(e.isFunction(T.custom_element)){var o=T.custom_element.call(B,T.defaultValue!==undefined?T.defaultValue:"",T);if(o){o=e(o).addClass("customelement");e(M).find("span[name='"+(K.index||K.name)+"']").append(o)}else{throw"e2"}}else{throw"e1"}}catch(Y){if(Y==="e1"){n.call(B,j,"function 'custom_element' "+m.nodefined,A)}if(Y==="e2"){n.call(B,j,"function 'custom_element' "+m.novalue,A)}else{n.call(B,j,typeof Y==="string"?Y:Y.message,A)}}break}}e(G).append(M);e(i).append(G);if(!y.searchOperators){e("td",H).eq(0).hide()}});e("table thead",g.hDiv).append(i);if(y.searchOperators){e(".soptclass",i).click(function(F){var G=e(this).offset(),p=(G.left),o=(G.top);x(this,p,o);F.stopPropagation()});e("body").on("click",function(o){if(o.target.className!=="soptclass"){e("#sopt_menu").hide()}})}e(".clearsearchclass",i).click(function(){var G=e(this).parents("tr").filter(":first"),F=parseInt(e("td.ui-search-oper",G).data("colindex"),10),o=e.extend({},s[F].searchoptions||{}),p=o.defaultValue||"";if(s[F].stype==="select"){if(p){e("td.ui-search-input select",G).val(p)}else{e("td.ui-search-input select",G)[0].selectedIndex=0}}else{e("td.ui-search-input input",G).val(p)}if(y.autosearch===true){h()}});B.ftoolbar=true;B.triggerToolbar=h;B.clearToolbar=l;B.toggleToolbar=u})},destroyFilterToolbar:function(){return this.each(function(){var f=this;if(!f.ftoolbar){return}f.triggerToolbar=null;f.clearToolbar=null;f.toggleToolbar=null;f.ftoolbar=false;e(f.grid.hDiv).find("table thead tr.ui-search-toolbar").remove()})},destroyGroupHeader:function(f){if(f===undefined){f=true}return this.each(function(){var n=this,o,k,t,j,g=n.grid,s=n.p.colModel,q,r=e("table.ui-jqgrid-htable thead",g.hDiv);if(!g){return}e(n).unbind(".setGroupHeaders");var p=e("<tr>",{role:"row"}).addClass("ui-jqgrid-labels");var h=g.headers;for(o=0,k=h.length;o<k;o++){q=s[o].hidden?"none":"";t=e(h[o].el).width(h[o].width).css("display",q);try{t.removeAttr("rowSpan")}catch(m){t.attr("rowSpan",1)}p.append(t);j=t.children("span.ui-jqgrid-resize");if(j.length>0){j[0].style.height=""}t.children("div")[0].style.top=""}e(r).children("tr.ui-jqgrid-labels").remove();e(r).prepend(p);if(f===true){e(n).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(f){f=e.extend({useColSpanStyle:false,groupHeaders:[]},f||{});return this.each(function(){this.p.groupHeader=f;var g=this,C,y,z=0,E,r,n,k,m,l,D,t,s,w,q=g.p.colModel,u=q.length,h=g.grid.headers,v,B=e("table.ui-jqgrid-htable",g.grid.hDiv),j=B.children("thead").children("tr.ui-jqgrid-labels"),x=j.last().addClass("jqg-second-row-header"),p=B.children("thead"),o=B.find(".jqg-first-row-header");if(o[0]===undefined){o=e("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{o.empty()}var A=function(H,F){var G=F.length,i;for(i=0;i<G;i++){if(F[i].startColumnName===H){return i}}return -1};e(g).prepend(p);E=e("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(C=0;C<u;C++){n=h[C].el;k=e(n);y=q[C];m={height:"0",width:h[C].width+"px",display:(y.hidden?"none":"")};e("<th>",{role:"gridcell"}).css(m).addClass("ui-first-th-"+g.p.direction).appendTo(o);n.style.width="";l=A(y.name,f.groupHeaders);if(l>=0){D=f.groupHeaders[l];t=D.numberOfColumns;s=D.titleText;for(w=0,l=0;l<t&&(C+l<u);l++){if(!q[C+l].hidden){w++}}r=e("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+g.p.direction).css({height:"22px","border-top":"0 none"}).html(s);if(w>0){r.attr("colspan",String(w))}if(g.p.headertitles){r.attr("title",r.text())}if(w===0){r.hide()}k.before(r);E.append(n);z=t-1}else{if(z===0){if(f.useColSpanStyle){k.attr("rowspan",j.length+1)}else{e("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+g.p.direction).css({display:y.hidden?"none":"","border-top":"0 none"}).insertBefore(k);E.append(n)}}else{E.append(n);z--}}}v=e(g).children("thead");v.prepend(o);E.insertAfter(x);B.append(v);if(f.useColSpanStyle){B.find("span.ui-jqgrid-resize").each(function(){var i=e(this).parent();if(i.is(":visible")){this.style.cssText="height: "+i.height()+"px !important; cursor: col-resize;"}});B.find("div.ui-jqgrid-sortable").each(function(){var i=e(this),F=i.parent();if(F.is(":visible")&&F.is(":has(span.ui-jqgrid-resize)")){i.css("top",(F.height()-i.outerHeight(true))/2+"px")}})}e(g).triggerHandler("jqGridAfterSetGroupHeaders")})},setFrozenColumns:function(){return this.each(function(){var z=this,B=e(z),t=z.p,g=z.grid;if(!g||t==null||t.frozenColumns===true){return}var o=t.colModel,x,y=o.length,f=-1,E=false,H=[],m,A=a(t.id),D=d.call(z,"states.hover"),j=d.call(z,"states.disabled");if(t.subGrid===true||t.treeGrid===true||t.scroll){return}for(x=0;x<y;x++){if(o[x].frozen!==true){break}E=true;f=x;H.push("#jqgh_"+A+"_"+a(o[x].name))}if(t.sortable){m=e(g.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");m.sortable("destroy");B.jqGrid("setGridParam",{sortable:{options:{items:H.length>0?">th:not(:has("+H.join(",")+"),:hidden)":">th:not(:hidden)"}}});B.jqGrid("sortableColumns",m)}if(f>=0&&E){var r=t.caption?e(g.cDiv).outerHeight():0,C=e(".ui-jqgrid-htable",t.gView).height();if(t.toppager){r=r+e(g.topDiv).outerHeight()}if(t.toolbar[0]===true){if(t.toolbar[1]!=="bottom"){r=r+e(g.uDiv).outerHeight()}}g.fhDiv=e('<div style="position:absolute;left:0;top:'+r+"px;height:"+C+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');g.fbDiv=e('<div style="position:absolute;left:0;top:'+(parseInt(r,10)+parseInt(C,10)+1)+'px;overflow:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');e(t.gView).append(g.fhDiv);var v=e(".ui-jqgrid-htable",t.gView).clone(true);if(t.groupHeader){e("tr.jqg-first-row-header",v).each(function(){e("th:gt("+f+")",this).remove()});e("tr.jqg-third-row-header",v).each(function(){e(this).children("th[id]").each(function(){var p=e(this).attr("id"),i;if(p&&p.substr(0,z.id.length+1)===z.id+"_"){i=p.substr(z.id.length+1);if(t.iColByName[i]>f){e(this).remove()}}})});var u=-1,s=-1,l,n;e("tr.jqg-second-row-header th",v).each(function(){l=parseInt(e(this).attr("colspan")||1,10);n=parseInt(e(this).attr("rowspan")||1,10);if(n>1){u++;s++}else{if(l){u=u+l;s++}}if(u===f){return false}});if(u!==f){s=f}e("tr.jqg-second-row-header",v).each(function(){e("th:gt("+s+")",this).remove()})}else{e("tr",v).each(function(){e("th:gt("+f+")",this).remove()})}e(v).width(1);e(g.fhDiv).append(v).mousemove(function(i){if(g.resizing){g.dragMove(i);return false}});if(t.footerrow){var w=e(".ui-jqgrid-bdiv",t.gView).height();g.fsDiv=e('<div style="position:absolute;left:0;top:'+(parseInt(r,10)+parseInt(C,10)+parseInt(w,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>');e(t.gView).append(g.fsDiv);var q=e(".ui-jqgrid-ftable",t.gView).clone(true);e("tr",q).each(function(){e("td:gt("+f+")",this).remove()});e(q).width(1);e(g.fsDiv).append(q)}B.bind("jqGridSortCol.setFrozenColumns",function(K,p,J){var i=e("tr.ui-jqgrid-labels:last th:eq("+t.lastsort+")",g.fhDiv),I=e("tr.ui-jqgrid-labels:last th:eq("+J+")",g.fhDiv);e("span.ui-grid-ico-sort",i).addClass(j);e(i).attr("aria-selected","false");e("span.ui-icon-"+t.sortorder,I).removeClass(j);e(I).attr("aria-selected","true");if(!t.viewsortcols[0]){if(t.lastsort!==J){e("span.s-ico",i).hide();e("span.s-ico",I).show()}}});e(t.gView).append(g.fbDiv);e(g.bDiv).scroll(function(){e(g.fbDiv).scrollTop(e(this).scrollTop())});if(t.hoverrows===true){e(t.idSel).unbind("mouseover").unbind("mouseout")}var k=function(I,p){var i=I.height();if(Math.abs(i-p)>=1){I.height(p);i=I.height();if(Math.abs(p-i)>=1){I.height(p+Math.round((p-i)))}}},h=function(i,I){var p=i.width();if(Math.abs(p-I)>=1){i.width(I);p=i.width();if(Math.abs(I-p)>=1){i.width(I+Math.round((I-p)))}}},G=function(Q,K){var N,p,O,R,M,L,i,S,I,J=e(K).position().top,T,P;if(Q!=null&&Q.length>0){Q.css({top:J,left:t.direction==="rtl"?K.clientWidth-g.fhDiv.width():0});O=Q.children("table").children("tbody,thead").children("tr");R=e(K).children("div").children("table").children("tbody,thead").children("tr");p=Math.min(O.length,R.length);T=p>0?e(O[0]).position().top:0;P=p>0?e(R[0]).position().top:0;for(N=0;N<p;N++){M=e(R[N]);J=M.position().top;L=e(O[N]);i=L.position().top;S=M.height();I=S+(J-P)+(T-i);k(L,I)}k(Q,K.clientHeight)}};B.bind("jqGridAfterGridComplete.setFrozenColumns",function(){e(t.idSel+"_frozen").remove();e(g.fbDiv).height(g.hDiv.clientHeight);var p=e(this).clone(true),i=p[0].rows,J=B[0].rows;e(i).filter("tr[role=row]").each(function(){e(this.cells).filter("td[role=gridcell]:gt("+f+")").remove()});g.fbRows=i;p.width(1).attr("id",t.id+"_frozen");p.appendTo(g.fbDiv);if(t.hoverrows===true){var I=function(L,M,K){e(L)[M](D);e(K[L.rowIndex])[M](D)};e(i).filter(".jqgrow").hover(function(){I(this,"addClass",J)},function(){I(this,"removeClass",J)});e(J).filter(".jqgrow").hover(function(){I(this,"addClass",i)},function(){I(this,"removeClass",i)})}G(g.fhDiv,g.hDiv);G(g.fbDiv,g.bDiv);if(g.sDiv){G(g.fsDiv,g.sDiv)}});var F=function(){e(g.fbDiv).scrollTop(e(g.bDiv).scrollTop());G(g.fhDiv,g.hDiv);G(g.fbDiv,g.bDiv);if(g.sDiv){G(g.fsDiv,g.sDiv)}var i=g.fhDiv[0].clientWidth;if(g.fhDiv!=null&&g.fhDiv.length>=1){k(e(g.fhDiv),g.hDiv.clientHeight)}if(g.fbDiv!=null&&g.fbDiv.length>0){h(e(g.fbDiv),i)}if(g.fsDiv!=null&&g.fsDiv.length>=0){h(e(g.fsDiv),i)}};e(t.gBox).bind("resizestop.setFrozenColumns",function(){setTimeout(function(){F()},50)});B.bind("jqGridInlineEditRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridResetFrozenHeights.setFrozenColumns jqGridGroupingClickGroup.setFrozenColumns jqGridResizeStop.setFrozenColumns",F);if(!g.hDiv.loading){B.triggerHandler("jqGridAfterGridComplete")}t.frozenColumns=true}})},destroyFrozenColumns:function(){return this.each(function(){var m=this,k=e(m),h=m.grid,j=m.p,i=a(j.id);if(!h){return}if(j.frozenColumns===true){e(h.fhDiv).remove();e(h.fbDiv).remove();h.fhDiv=null;h.fbDiv=null;h.fbRows=null;if(j.footerrow){e(h.fsDiv).remove();h.fsDiv=null}k.unbind(".setFrozenColumns");if(j.hoverrows===true){var l,g=d.call(m,"states.hover");k.bind("mouseover",function(n){l=e(n.target).closest("tr.jqgrow");if(e(l).attr("class")!=="ui-subgrid"){e(l).addClass(g)}}).bind("mouseout",function(n){l=e(n.target).closest("tr.jqgrow");e(l).removeClass(g)})}j.frozenColumns=false;if(j.sortable){var f=e(h.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");f.sortable("destroy");k.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+i+"_cb,#jqgh_"+i+"_rn,#jqgh_"+i+"_subgrid),:hidden)"}}});k.jqGrid("sortableColumns",f)}}})}})}(jQuery));(function(b){var a=b.jgrid;b.fn.jqFilter=function(c){if(typeof c==="string"){var e=b.fn.jqFilter[c];if(!e){throw ("jqFilter - No such method: "+c)}var d=b.makeArray(arguments).slice(1);return e.apply(this,d)}var f=b.extend(true,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:false,errmsg:"",errorcheck:true,showQuery:true,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:true,ruleButtons:true,direction:"ltr"},a.filter,c||{});return this.each(function(){if(this.filter){return}this.p=f;if(f.filter===null||f.filter===undefined){f.filter={groupOp:f.groupOps[0].op,rules:[],groups:[]}}var k,l=f.columns.length,o,j=/msie/i.test(navigator.userAgent)&&!window.opera,g=function(){return b("#"+a.jqID(f.id))[0]||null},h=function(p){return a.getRes(a.guiStyles[g().p.guiStyle],p)},m=h("states.error"),i=h("dialog.content");f.initFilter=b.extend(true,{},f.filter);if(!l){return}for(k=0;k<l;k++){o=f.columns[k];if(o.stype){o.inputtype=o.stype}else{if(!o.inputtype){o.inputtype="text"}}if(o.sorttype){o.searchtype=o.sorttype}else{if(!o.searchtype){o.searchtype="string"}}if(o.hidden===undefined){o.hidden=false}if(!o.label){o.label=o.name}if(o.index){o.name=o.index}if(!o.hasOwnProperty("searchoptions")){o.searchoptions={}}if(!o.hasOwnProperty("searchrules")){o.searchrules={}}}if(f.showQuery){b(this).append("<table class='queryresult "+i+"' style='display:block;max-width:440px;border:0px none;' dir='"+f.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>")}var n=function(r,p){var q=[true,""],t=g();if(b.isFunction(p.searchrules)){q=p.searchrules.call(t,r,p)}else{if(a&&a.checkValues){try{q=a.checkValues.call(t,r,-1,p.searchrules,p.label)}catch(s){}}}if(q&&q.length&&q[0]===false){f.error=!q[0];f.errmsg=q[1]}};this.onchange=function(){f.error=false;f.errmsg="";return b.isFunction(f.onChange)?f.onChange.call(this,f):false};this.reDraw=function(){b("table.group:first",this).remove();var p=this.createTableForGroup(f.filter,null);b(this).append(p);if(b.isFunction(f.afterRedraw)){f.afterRedraw.call(this,f)}};this.createTableForGroup=function(s,F){var r=this,B,C=g();var D=b("<table class='group "+i+"' style='border:0px none;'><tbody></tbody></table>"),z="left";if(f.direction==="rtl"){z="right";D.attr("dir","rtl")}if(F===null){D.append("<tr class='error' style='display:none;'><th colspan='5' class='"+m+"' align='"+z+"'></th></tr>")}var p=b("<tr></tr>");D.append(p);var q=b("<th colspan='5' align='"+z+"'></th>");p.append(q);if(f.ruleButtons===true){var w=b("<select class='opsel'></select>");q.append(w);var y="",x;for(B=0;B<f.groupOps.length;B++){x=s.groupOp===r.p.groupOps[B].op?" selected='selected'":"";y+="<option value='"+r.p.groupOps[B].op+"'"+x+">"+r.p.groupOps[B].text+"</option>"}w.append(y).bind("change",function(){s.groupOp=b(w).val();r.onchange()})}var H="<span></span>";if(f.groupButton){H=b("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>");H.bind("click",function(){if(s.groups===undefined){s.groups=[]}s.groups.push({groupOp:f.groupOps[0].op,rules:[],groups:[]});r.reDraw();r.onchange();return false})}q.append(H);if(f.ruleButtons===true){var u=b("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),t;u.bind("click",function(){var I,L,K;if(s.rules===undefined){s.rules=[]}for(B=0;B<r.p.columns.length;B++){I=(r.p.columns[B].search===undefined)?true:r.p.columns[B].search;L=(r.p.columns[B].hidden===true);K=(r.p.columns[B].searchoptions.searchhidden===true);if((K&&I)||(I&&!L)){t=r.p.columns[B];break}}var J;if(t.searchoptions.sopt){J=t.searchoptions.sopt}else{if(r.p.sopt){J=r.p.sopt}else{if(b.inArray(t.searchtype,r.p.strarr)!==-1){J=r.p.stropts}else{J=r.p.numopts}}}s.rules.push({field:t.name,op:J[0],data:""});r.reDraw();return false});q.append(u)}if(F!==null){var v=b("<input type='button' value='-' title='Delete group' class='delete-group'/>");q.append(v);v.bind("click",function(){for(B=0;B<F.groups.length;B++){if(F.groups[B]===s){F.groups.splice(B,1);break}}r.reDraw();r.onchange();return false})}if(s.groups!==undefined){var A,E,G;for(B=0;B<s.groups.length;B++){A=b("<tr></tr>");D.append(A);E=b("<td class='first'></td>");A.append(E);G=b("<td colspan='4'></td>");G.append(this.createTableForGroup(s.groups[B],s));A.append(G)}}if(s.groupOp===undefined){s.groupOp=r.p.groupOps[0].op}if(s.rules!==undefined){for(B=0;B<s.rules.length;B++){D.append(this.createTableRowForRule(s.rules[B],s))}}return D};this.createTableRowForRule=function(y,A){var z=this,M=g(),q=b("<tr></tr>"),L,C,B,F="",E;q.append("<td class='first'></td>");var s=b("<td class='columns'></td>");q.append(s);var N=b("<select></select>"),D,H=[];s.append(N);N.bind("change",function(){y.field=b(N).val();var X=b(this).parents("tr:first"),S,T;for(T=0;T<z.p.columns.length;T++){if(z.p.columns[T].name===y.field){S=z.p.columns[T];break}}if(!S){return}var Y=b.extend({},S.searchoptions||{},{id:a.randId(),name:S.name,mode:"search"});if(j&&S.inputtype==="text"){if(!Y.size){Y.size=10}}var U=a.createEl.call(M,S.inputtype,Y,"",true,z.p.ajaxSelectOptions||{},true);b(U).addClass("input-elm");if(Y.sopt){C=Y.sopt}else{if(z.p.sopt){C=z.p.sopt}else{if(b.inArray(S.searchtype,z.p.strarr)!==-1){C=z.p.stropts}else{C=z.p.numopts}}}var Z="",P=0,Q,R,W;H=[];b.each(z.p.ops,function(){H.push(this.oper)});if(z.p.cops){b.each(z.p.cops,function(aa){H.push(aa)})}for(T=0;T<C.length;T++){R=C[T];D=b.inArray(C[T],H);if(D!==-1){Q=z.p.ops[D];W=Q!==undefined?Q.text:z.p.cops[R].text;if(P===0){y.op=R}Z+="<option value='"+R+"'>"+W+"</option>";P++}}b(".selectopts",X).empty().append(Z);b(".selectopts",X)[0].selectedIndex=0;if(a.msie&&a.msiever()<9){var V=parseInt(b("select.selectopts",X)[0].offsetWidth,10)+1;b(".selectopts",X).width(V);b(".selectopts",X).css("width","auto")}b(".data",X).empty().append(U);a.bindEv.call(M,U,Y);b(".input-elm",X).bind("change",function(ab){var aa=ab.target;y.data=aa.nodeName.toUpperCase()==="SPAN"&&Y&&b.isFunction(Y.custom_value)?Y.custom_value.call(M,b(aa).children(".customelement:first"),"get"):aa.value;z.onchange()});setTimeout(function(){y.data=b(U).val();z.onchange()},0)});var I=0,w,K,O;for(L=0;L<z.p.columns.length;L++){w=(z.p.columns[L].search===undefined)?true:z.p.columns[L].search;K=(z.p.columns[L].hidden===true);O=(z.p.columns[L].searchoptions.searchhidden===true);if((O&&w)||(w&&!K)){E="";if(y.field===z.p.columns[L].name){E=" selected='selected'";I=L}F+="<option value='"+z.p.columns[L].name+"'"+E+">"+z.p.columns[L].label+"</option>"}}N.append(F);var G=b("<td class='operators'></td>");q.append(G);B=f.columns[I];if(j&&B.inputtype==="text"){if(!B.searchoptions.size){B.searchoptions.size=10}}var r=a.createEl.call(M,B.inputtype,b.extend({},B.searchoptions||{},{id:a.randId(),name:B.name}),y.data,true,z.p.ajaxSelectOptions||{},true);if(y.op==="nu"||y.op==="nn"){b(r).attr("readonly","true");b(r).attr("disabled","true")}var p=b("<select class='selectopts'></select>");G.append(p);p.bind("change",function(){y.op=b(p).val();var Q=b(this).parents("tr:first"),P=b(".input-elm",Q)[0];if(y.op==="nu"||y.op==="nn"){y.data="";if(P.tagName.toUpperCase()!=="SELECT"){P.value=""}P.setAttribute("readonly","true");P.setAttribute("disabled","true")}else{if(P.tagName.toUpperCase()==="SELECT"){y.data=P.value}P.removeAttribute("readonly");P.removeAttribute("disabled")}z.onchange()});if(B.searchoptions.sopt){C=B.searchoptions.sopt}else{if(z.p.sopt){C=z.p.sopt}else{if(b.inArray(B.searchtype,z.p.strarr)!==-1){C=z.p.stropts}else{C=z.p.numopts}}}F="";var J,v;b.each(z.p.ops,function(){H.push(this.oper)});if(z.p.cops){b.each(z.p.cops,function(P){H.push(P)})}for(L=0;L<C.length;L++){v=C[L];D=b.inArray(C[L],H);if(D!==-1){J=z.p.ops[D];E=y.op===v?" selected='selected'":"";F+="<option value='"+v+"'"+E+">"+(J!==undefined?J.text:z.p.cops[v].text)+"</option>"}}p.append(F);var u=b("<td class='data'></td>");q.append(u);u.append(r);a.bindEv.call(M,r,B.searchoptions);b(r).addClass("input-elm").bind("change",function(){y.data=B.inputtype==="custom"?B.searchoptions.custom_value.call(M,b(this).children(".customelement:first"),"get"):b(this).val();z.onchange()});var x=b("<td></td>");q.append(x);if(f.ruleButtons===true){var t=b("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");x.append(t);t.bind("click",function(){for(L=0;L<A.rules.length;L++){if(A.rules[L]===y){A.rules.splice(L,1);break}}z.reDraw();z.onchange();return false})}return q};this.getStringForGroup=function(t){var q="(",p;if(t.groups!==undefined){for(p=0;p<t.groups.length;p++){if(q.length>1){q+=" "+t.groupOp+" "}try{q+=this.getStringForGroup(t.groups[p])}catch(u){alert(u)}}}if(t.rules!==undefined){try{for(p=0;p<t.rules.length;p++){if(q.length>1){q+=" "+t.groupOp+" "}q+=this.getStringForRule(t.rules[p])}}catch(r){alert(r)}}q+=")";if(q==="()"){return""}return q};this.getStringForRule=function(v){var t="",q="",s,x,u,p=v.data,r,w=["int","integer","float","number","currency"];for(s=0;s<f.ops.length;s++){if(f.ops[s].oper===v.op){t=f.operands.hasOwnProperty(v.op)?f.operands[v.op]:"";q=f.ops[s].oper;break}}if(q===""&&f.cops!=null){for(r in f.cops){if(f.cops.hasOwnProperty(r)){q=r;t=f.cops[r].operand;if(b.isFunction(f.cops[r].buildQueryValue)){return f.cops[r].buildQueryValue.call(f,{cmName:v.field,searchValue:p,operand:t})}}}}for(s=0;s<f.columns.length;s++){if(f.columns[s].name===v.field){x=f.columns[s];break}}if(x==null){return""}if(q==="bw"||q==="bn"){p=p+"%"}if(q==="ew"||q==="en"){p="%"+p}if(q==="cn"||q==="nc"){p="%"+p+"%"}if(q==="in"||q==="ni"){p=" ("+p+")"}if(f.errorcheck){n(v.data,x)}if(b.inArray(x.searchtype,w)!==-1||q==="nn"||q==="nu"){u=v.field+" "+t+" "+p}else{u=v.field+" "+t+' "'+p+'"'}return u};this.resetFilter=function(){f.filter=b.extend(true,{},f.initFilter);this.reDraw();this.onchange()};this.hideError=function(){b("th."+m,this).html("");b("tr.error",this).hide()};this.showError=function(){b("th."+m,this).html(f.errmsg);b("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){var q=this;function r(u){if(q.p.errorcheck){var t,s;for(t=0;t<q.p.columns.length;t++){if(q.p.columns[t].name===u.field){s=q.p.columns[t];break}}if(s){n(u.data,s)}}return u.op+"(item."+u.field+",'"+u.data+"')"}function p(v){var u="(",t;if(v.groups!==undefined){for(t=0;t<v.groups.length;t++){if(u.length>1){if(v.groupOp==="OR"){u+=" || "}else{u+=" && "}}u+=p(v.groups[t])}}if(v.rules!==undefined){for(t=0;t<v.rules.length;t++){if(u.length>1){if(v.groupOp==="OR"){u+=" || "}else{u+=" && "}}u+=r(v.rules[t])}}u+=")";if(u==="()"){return""}return u}return p(f.filter)};this.reDraw();if(f.showQuery){this.onchange()}this.filter=true})};b.extend(b.fn.jqFilter,{toSQLString:function(){var c="";this.each(function(){c=this.toUserFriendlyString()});return c},filterData:function(){var c;this.each(function(){c=this.p.filter});return c},getParameter:function(c){if(c!==undefined){if(this.p.hasOwnProperty(c)){return this.p[c]}}return this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(c){if(typeof c==="string"){c=a.parse(c)}this.each(function(){this.p.filter=c;this.reDraw();this.onchange()})}})}(jQuery));(function(d){var h=d.jgrid,b=h.feedback,m=h.fullBoolFeedback,k=h.jqID,i=h.hideModal,q=h.viewModal,c=h.createModal,f=h.info_dialog,a=h.mergeCssClasses,l=h.hasOneFromClasses,r=d.fn.jqGrid,n=h.builderFmButon,p=function(t,u){var s=t[0].style[u];return s.indexOf("px")>=0?parseFloat(s):s},o=function(v,u,w){var t=w.w,A=d(u),z=w.c.toTop,x,y=p(t,"top"),s=p(t,"left");if(z){x=t.closest(".ui-jqgrid").offset();y-=x.top;s-=x.left}this.data(v,{top:y,left:s,width:p(t,"width"),height:p(t,"height"),dataheight:p(A,"height")||"auto",datawidth:p(A,"width")||"auto"});t.remove();if(w.o){w.o.remove()}},g=function(v,t,s){var u;if(t[0]===true){u="<span class='"+a("fm-button-icon",s,t[2])+"'></span>";if(t[1]==="right"){v.addClass("fm-button-icon-right").append(u)}else{v.addClass("fm-button-icon-left").prepend(u)}}},e=function(t,s){return h.mergeCssClasses(h.getRes(h.guiStyles[this.p.guiStyle],t),s||"")},j=function(s){return e.call(this,"states."+s)};h.extend({searchGrid:function(s){return this.each(function(){var L=this,M=d(L),G=L.p;if(!L.grid||G==null){return}var J=d.extend(true,{recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,searchOnEnter:false,multipleSearch:false,multipleGroup:false,top:0,left:0,removemodal:true,resize:true,width:450,height:"auto",dataheight:"auto",showQuery:false,errorcheck:true,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:false,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},r.getGridRes.call(M,"search"),h.search||{},G.searching||{},s||{});var t="fbox_"+G.id,C=J.commonIconClass,K={themodal:"searchmod"+t,modalhead:"searchhd"+t,modalcontent:"searchcnt"+t,resizeAlso:t},x="#"+k(K.themodal),E=G.gBox,B=G.gView,v=G.postData[J.sFilter],Q=function(){var S=d.makeArray(arguments);S.unshift("Search");S.unshift("Filter");S.unshift(J);return b.apply(L,S)};if(typeof v==="string"){v=h.parse(v)}if(J.recreateFilter===true){d(x).remove()}else{if(M.data("searchProp")){d.extend(J,M.data("searchProp"))}}function w(S){if(Q("beforeShow",S)){d(x).data("onClose",J.onClose);q(x,{gbox:E,jqm:J.jqModal,overlay:J.overlay,modal:J.modal,overlayClass:J.overlayClass,toTop:J.toTop,onHide:function(T){o.call(M,"searchProp",t,T)}});Q("afterShow",S)}}if(d(x)[0]!==undefined){w(d("#fbox_"+G.idSel))}else{var O=d("<div><div id='"+t+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore(B);if(G.direction==="rtl"){O.attr("dir","rtl")}var I="",y="",A,D=false,P,H=-1,u=d.extend([],G.colModel),F=n.call(L,t+"_search",J.Find,a(C,J.findDialogIcon),"right"),R=n.call(L,t+"_reset",J.Reset,a(C,J.resetDialogIcon),"left");if(J.showQuery){I=n.call(L,t+"_query","Query",a(C,J.queryDialogIcon),"left")+"&#160;"}if(!J.columns.length){d.each(u,function(T,W){if(!W.label){W.label=G.colNames[T]}if(!D){var S=(W.search===undefined)?true:W.search,V=(W.hidden===true),U=(W.searchoptions&&W.searchoptions.searchhidden===true);if((U&&S)||(S&&!V)){D=true;A=W.index||W.name;H=T}}})}else{u=J.columns;H=0;A=u[0].index||u[0].name}if((!v&&A)||J.multipleSearch===false){var z="eq";if(H>=0&&u[H].searchoptions&&u[H].searchoptions.sopt){z=u[H].searchoptions.sopt[0]}else{if(J.sopt&&J.sopt.length){z=J.sopt[0]}}v={groupOp:"AND",rules:[{field:A,op:z,data:""}]}}D=false;if(J.tmplNames&&J.tmplNames.length){D=true;y=J.tmplLabel;y+="<select class='ui-template'>";y+="<option value='default'>Default</option>";d.each(J.tmplNames,function(S,T){y+="<option value='"+S+"'>"+T+"</option>"});y+="</select>"}P="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='"+e.call(L,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+G.direction+"'  style='float:"+(G.direction==="rtl"?"right":"left")+";'>"+R+y+"</td><td class='EditButton EditButton-"+G.direction+"'>"+I+F+"</td></tr></tbody></table>";t=k(t);J.gbox="#gbox_"+t;J.height="auto";t="#"+t;d(t).jqFilter({columns:u,filter:J.loadDefaults?v:null,showQuery:J.showQuery,errorcheck:J.errorcheck,sopt:J.sopt,groupButton:J.multipleGroup,ruleButtons:J.multipleSearch,afterRedraw:J.afterRedraw,ops:J.odata,cops:G.customSortOperations,operands:J.operands,ajaxSelectOptions:G.ajaxSelectOptions,groupOps:J.groupOps,onChange:function(){if(this.p.showQuery){d(".query",this).html(this.toUserFriendlyString())}m.call(L,J.afterChange,"jqGridFilterAfterChange",d(t),J)},direction:G.direction,id:G.id});O.append(P);if(D&&J.tmplFilters&&J.tmplFilters.length){d(".ui-template",O).bind("change",function(){var S=d(this).val();if(S==="default"){d(t).jqFilter("addFilter",v)}else{d(t).jqFilter("addFilter",J.tmplFilters[parseInt(S,10)])}return false})}if(J.multipleGroup===true){J.multipleSearch=true}Q("onInitialize",d(t));if(J.layer){c.call(L,K,O,J,B,d(E)[0],"#"+k(J.layer),{position:"relative"})}else{c.call(L,K,O,J,B,d(E)[0])}if(J.searchOnEnter||J.closeOnEscape){d(x).keydown(function(T){var S=d(T.target);if(J.searchOnEnter&&T.which===13&&!S.hasClass("add-group")&&!S.hasClass("add-rule")&&!S.hasClass("delete-group")&&!S.hasClass("delete-rule")&&(!S.hasClass("fm-button")||!S.is("[id$=_query]"))){d(t+"_search").click();return false}if(J.closeOnEscape&&T.which===27){d("#"+k(K.modalhead)).find(".ui-jqdialog-titlebar-close").click();return false}})}if(I){d(t+"_query").bind("click",function(){d(".queryresult",O).toggle();return false})}if(J.stringResult===undefined){J.stringResult=J.multipleSearch}d(t+"_search").bind("click",function(){var U={},T,V,W=d(t),S=W.find(".input-elm");if(S.filter(":focus")){S=S.filter(":focus")}S.change();V=W.jqFilter("filterData");if(J.errorcheck){W[0].hideError();if(!J.showQuery){W.jqFilter("toSQLString")}if(W[0].p.error){W[0].showError();return false}}if(J.stringResult||G.datatype==="local"){try{T=xmlJsonClass.toJson(V,"","",false)}catch(X){try{T=JSON.stringify(V)}catch(Y){}}if(typeof T==="string"){U[J.sFilter]=T;d.each([J.sField,J.sValue,J.sOper],function(){U[this]=""})}}else{if(J.multipleSearch){U[J.sFilter]=V;d.each([J.sField,J.sValue,J.sOper],function(){U[this]=""})}else{U[J.sField]=V.rules[0].field;U[J.sValue]=V.rules[0].data;U[J.sOper]=V.rules[0].op;U[J.sFilter]=""}}G.search=true;d.extend(G.postData,U);if(m.call(L,J.onSearch,"jqGridFilterSearch",G.filters)){M.trigger("reloadGrid",[d.extend({page:1},J.reloadGridSearchOptions||{})])}if(J.closeAfterSearch){i(x,{gb:E,jqm:J.jqModal,onClose:J.onClose,removemodal:J.removemodal})}return false});d(t+"_reset").bind("click",function(){var T={},S=d(t);G.search=false;G.resetsearch=true;if(J.multipleSearch===false){T[J.sField]=T[J.sValue]=T[J.sOper]=""}else{T[J.sFilter]=""}S[0].resetFilter();if(D){d(".ui-template",O).val("default")}d.extend(G.postData,T);if(m.call(L,J.onReset,"jqGridFilterReset")){M.trigger("reloadGrid",[d.extend({page:1},J.reloadGridResetOptions||{})])}if(J.closeAfterReset){i(x,{gb:E,jqm:J.jqModal,onClose:J.onClose,removemodal:J.removemodal})}return false});w(d(t));var N=j.call(L,"hover");d(".fm-button:not(."+j.call(L,"disabled").split(" ").join(".")+")",O).hover(function(){d(this).addClass(N)},function(){d(this).removeClass(N)})}})},editGridRow:function(t,s){return this.each(function(){var v=this,Q=d(v),ar=v.p;if(!v.grid||ar==null||!t){return}var ah=ar.id,F=r.getGridRes,ap=r.setSelection,au=d.extend(true,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true,overlayClass:"ui-widget-overlay",removemodal:true,form:"edit"},F.call(Q,"edit"),h.edit,ar.formEditing||{},s||{});var Z="FrmGrid_"+ah,aa=Z,ay="TblGrid_"+ah,R="#"+k(ay),L=R+"_2",aD={themodal:"editmod"+ah,modalhead:"edithd"+ah,modalcontent:"editcnt"+ah,resizeAlso:Z},U="#"+k(aD.themodal),z=ar.gBox,ad=ar.propOrAttr,ae=ar.colModel,T=ar.iColByName,aj=1,M=0,af,ac,ai,aA=au.commonIconClass,X=F.call(Q,"errors.errcap"),S=function(){var aE=d.makeArray(arguments);aE.unshift("");aE.unshift("AddEdit");aE.unshift(au);return b.apply(v,aE)},w=j.call(v,"hover"),B=j.call(v,"disabled"),an=j.call(v,"select"),u=j.call(v,"active"),ag=j.call(v,"error");Z="#"+k(Z);if(t==="new"){t="_empty";ai="add";au.caption=au.addCaption}else{au.caption=au.editCaption;ai="edit"}if(!au.recreateForm){var ab=Q.data("formProp");if(ab){ab.top=Math.max(ab.top,0);ab.left=Math.max(ab.left,0);d.extend(au,ab)}}var H=true;if(au.checkOnUpdate&&(au.jqModal===true||au.jqModal===undefined)&&!au.modal){H=false}function aB(){d(R+" > tbody > tr > td .FormElement").each(function(){var aJ=d(".customelement",this),aM=this.name,aK,aL,aF,aG,aI;if(aJ.length){aM=aJ.attr("name");aL=T[aM];if(aL!==undefined){aK=ae[aL];aF=aK.editoptions||{};if(d.isFunction(aF.custom_value)){try{af[aM]=aF.custom_value.call(v,d("#"+k(aM),R),"get");if(af[aM]===undefined){throw"e1"}}catch(aH){if(aH==="e1"){f.call(v,X,"function 'custom_value' "+au.msg.novalue,au.bClose)}else{f.call(v,X,aH.message,au.bClose)}}return true}}}else{switch(d(this)[0].type){case"checkbox":af[aM]=d(this).is(":checked")?d(this).val():d(this).data("offval");break;case"select-one":af[aM]=d("option:selected",this).val();break;case"select-multiple":af[aM]=d(this).val();af[aM]=af[aM]?af[aM].join(","):"";var aE=[];d("option:selected",this).each(function(aN,aO){aE[aN]=d(aO).text()});break;case"password":case"text":case"textarea":case"button":af[aM]=d(this).val();break;case"date":af[aM]=d(this).val();if(String(af[aM]).split("-").length===3){aL=T[aM];if(aL!==undefined){aK=ae[aL];aG=aK.formatoptions||{};aI=aG.newformat||F.call(Q,"formatter.date.newformat");af[aM]=h.parseDate.call(Q[0],"Y-m-d",af[aM],aI)}}break}if(ar.autoencode){af[aM]=h.htmlEncode(af[aM])}}});return true}function O(aE,aI,aG){var aH=0,aL=[],aF=false,aK="<td class='CaptionTD'></td><td class='DataTD'></td>",aN="",aJ;for(aJ=1;aJ<=aG;aJ++){aN+=aK}if(aE!=="_empty"){aF=r.getInd.call(Q,aE)}d(ae).each(function(a4){var aX=this,aQ=aX.name,aU,aV,a2,a5,a6,a1,a3=aX.editable,aT=false,a0=false,aZ=aE==="_empty"?"addForm":"editForm";if(d.isFunction(a3)){a3=a3.call(v,{rowid:aE,iCol:a4,iRow:aF,cmName:aQ,cm:aX,mode:aZ})}if(aX.editrules&&aX.editrules.edithidden===true){aV=false}else{aV=aX.hidden===true||a3==="hidden"?true:false}a6=aV?"style='display:none'":"";switch(String(a3).toLowerCase()){case"hidden":a3=true;break;case"disabled":a3=true;aT=true;break;case"readonly":a3=true;a0=true;break}if(aQ!=="cb"&&aQ!=="subgrid"&&a3===true&&aQ!=="rn"){if(aF===false){a5=""}else{aU=d(v.rows[aF].cells[a4]);try{a5=d.unformat.call(v,aU,{rowId:aE,colModel:aX},a4)}catch(a8){a5=(aX.edittype&&aX.edittype==="textarea")?aU.text():aU.html()}if(a5==="&nbsp;"||a5==="&#160;"||(a5.length===1&&a5.charCodeAt(0)===160)){a5=""}}var aO=d.extend({},aX.editoptions||{},{id:aQ,name:aQ,rowId:aE,mode:aZ}),aP=d.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},aX.formoptions||{}),aY=parseInt(aP.rowpos,10)||aH+1,aW=parseInt((parseInt(aP.colpos,10)||1)*2,10);if(aE==="_empty"&&aO.defaultValue){a5=d.isFunction(aO.defaultValue)?aO.defaultValue.call(v):aO.defaultValue}if(!aX.edittype){aX.edittype="text"}if(ar.autoencode){a5=h.htmlDecode(a5)}a1=h.createEl.call(v,aX.edittype,aO,a5,false,d.extend({},h.ajaxOptions,ar.ajaxSelectOptions||{}));if(au.checkOnSubmit||au.checkOnUpdate){au._savedData[aQ]=a5}d(a1).addClass("FormElement");if(d.inArray(aX.edittype,["text","textarea","password","select"])>-1){d(a1).addClass(e.call(v,"dialog.dataField"))}a2=d(aI).find("tr[data-rowpos="+aY+"]");if(aP.rowabove){var aR=d("<tr><td class='contentinfo' colspan='"+(aG*2)+"'>"+aP.rowcontent+"</td></tr>");d(aI).append(aR);aR[0].rp=aY}if(a2.length===0){a2=d("<tr "+a6+" data-rowpos='"+aY+"'></tr>").addClass("FormData").attr("id","tr_"+aQ);d(a2).append(aN);d(aI).append(a2);a2[0].rp=aY}var a7=d("td:eq("+(aW-2)+")",a2[0]),aS=d("td:eq("+(aW-1)+")",a2[0]);a7.html(aP.label===undefined?ar.colNames[a4]:aP.label);aS.html(aP.elmprefix).append(a1).append(aP.elmsuffix);if(aT){a7.addClass(B);aS.addClass(B);d(a1).prop("readonly",true);d(a1).prop("disabled",true)}else{if(a0){d(a1).prop("readonly",true)}}if(aX.edittype==="custom"&&d.isFunction(aO.custom_value)){aO.custom_value.call(v,d("#"+k(aQ),Z),"set",a5)}h.bindEv.call(v,a1,aO);aL[aH]=a4;aH++}});if(aH>0){var aM=d("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(aG*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+ah+"_id' value='"+aE+"'/></td></tr>");aM[0].rp=aH+999;d(aI).append(aM);if(au.checkOnSubmit||au.checkOnUpdate){au._savedData[ah+"_id"]=aE}}return aL}function K(aE,aH){var aO,aI=0,aL,aK,aF,aJ,aM;if(au.checkOnSubmit||au.checkOnUpdate){au._savedData={};au._savedData[ah+"_id"]=aE}var aN=ar.colModel;if(aE==="_empty"){d(aN).each(function(){aO=this.name;aF=d.extend({},this.editoptions||{});aK=d("#"+k(aO),aH);if(aK&&aK.length&&aK[0]!==null){aJ="";if(this.edittype==="custom"&&d.isFunction(aF.custom_value)){aF.custom_value.call(v,aK,"set",aJ)}else{if(aF.defaultValue){aJ=d.isFunction(aF.defaultValue)?aF.defaultValue.call(v):aF.defaultValue;if(aK[0].type==="checkbox"){aM=aJ.toLowerCase();if(aM.search(/(false|f|0|no|n|off|undefined)/i)<0&&aM!==""){aK[0].checked=true;aK[0].defaultChecked=true;aK[0].value=aJ}else{aK[0].checked=false;aK[0].defaultChecked=false}}else{aK.val(aJ)}}else{if(aK[0].type==="checkbox"){aK[0].checked=false;aK[0].defaultChecked=false;aJ=d(aK).data("offval")}else{if(aK[0].type&&aK[0].type.substr(0,6)==="select"){aK[0].selectedIndex=0}else{aK.val(aJ)}}}}if(au.checkOnSubmit===true||au.checkOnUpdate){au._savedData[aO]=aJ}}});d("#id_g",aH).val(aE);return}var aG=r.getInd.call(Q,aE,true);if(!aG){return}d(aG.cells).filter("td[role=gridcell]").each(function(aS){aO=aN[aS].name;if(aO!=="cb"&&aO!=="subgrid"&&aO!=="rn"&&aN[aS].editable===true){try{aL=d.unformat.call(v,d(this),{rowId:aE,colModel:aN[aS]},aS)}catch(aR){aL=aN[aS].edittype==="textarea"?d(this).text():d(this).html()}if(ar.autoencode){aL=h.htmlDecode(aL)}if(au.checkOnSubmit===true||au.checkOnUpdate){au._savedData[aO]=aL}aO="#"+k(aO);switch(aN[aS].edittype){case"password":case"text":case"button":case"image":case"textarea":if(aL==="&nbsp;"||aL==="&#160;"||(aL.length===1&&aL.charCodeAt(0)===160)){aL=""}d(aO,aH).val(aL);break;case"select":var aQ=aL.split(",");aQ=d.map(aQ,function(aU){return d.trim(aU)});d(aO+" option",aH).each(function(){var aW=this,aX=d(aW),aU=d.trim(aX.val()),aV=d.trim(aX.text());if(!aN[aS].editoptions.multiple&&(d.trim(aL)===aV||aQ[0]===aV||aQ[0]===aU)){aW.selected=true}else{if(aN[aS].editoptions.multiple){if(d.inArray(aV,aQ)>-1||d.inArray(aU,aQ)>-1){aW.selected=true}else{aW.selected=false}}else{aW.selected=false}}});break;case"checkbox":aL=String(aL);if(aN[aS].editoptions&&aN[aS].editoptions.value){var aP=aN[aS].editoptions.value.split(":");if(aP[0]===aL){d(aO,aH)[ad]({checked:true,defaultChecked:true})}else{d(aO,aH)[ad]({checked:false,defaultChecked:false})}}else{aL=aL.toLowerCase();if(aL.search(/(false|f|0|no|n|off|undefined)/i)<0&&aL!==""){d(aO,aH)[ad]("checked",true);d(aO,aH)[ad]("defaultChecked",true)}else{d(aO,aH)[ad]("checked",false);d(aO,aH)[ad]("defaultChecked",false)}}break;case"custom":try{if(aN[aS].editoptions&&d.isFunction(aN[aS].editoptions.custom_value)){aN[aS].editoptions.custom_value.call(v,d(aO,aH),"set",aL)}else{throw"e1"}}catch(aT){if(aT==="e1"){f.call(v,X,"function 'custom_value' "+au.msg.nodefined,au.bClose)}else{f.call(v,X,aT.message,au.bClose)}}break}aI++}});if(aI>0){d("#id_g",R).val(aE)}}function y(){var aE=au.url||ar.editurl;d.each(ae,function(aG,aF){var aI=aF.name,aH=af[aI];if(aF.formatter==="date"&&(aF.formatoptions==null||aF.formatoptions.sendFormatted!==true)){af[aI]=d.unformat.date.call(v,aH,aF)}if(aE!=="clientArray"&&aF.editoptions&&aF.editoptions.NullIfEmpty===true){if(af.hasOwnProperty(aI)&&aH===""){af[aI]="null"}}})}function E(){var aO=[true,"",""],aE={},aI=ar.prmNames,aN,aH,aR,aK,aJ,aF,aQ;var aL=Q.triggerHandler("jqGridAddEditBeforeCheckValues",[d(Z),ai]);if(aL&&typeof aL==="object"){af=aL}if(d.isFunction(au.beforeCheckValues)){aL=au.beforeCheckValues.call(v,af,d(Z),ai);if(aL&&typeof aL==="object"){af=aL}}for(aR in af){if(af.hasOwnProperty(aR)){aO=h.checkValues.call(v,af[aR],aR);if(aO[0]===false){break}}}y();if(aO[0]){aE=Q.triggerHandler("jqGridAddEditClickSubmit",[au,af,ai]);if(aE===undefined&&d.isFunction(au.onclickSubmit)){aE=au.onclickSubmit.call(v,au,af,ai)||{}}aO=Q.triggerHandler("jqGridAddEditBeforeSubmit",[af,d(Z),ai]);if(aO===undefined){aO=[true,"",""]}if(aO[0]&&d.isFunction(au.beforeSubmit)){aO=au.beforeSubmit.call(v,af,d(Z),ai)}}if(aO[0]&&!au.processing){au.processing=true;d("#sData",L).addClass(u);aF=au.url||ar.editurl;aH=aI.oper;aN=aF==="clientArray"&&ar.keyName!==false?ar.keyName:aI.id;af[aH]=(d.trim(af[ah+"_id"])==="_empty")?aI.addoper:aI.editoper;if(af[aH]!==aI.addoper){af[aN]=af[ah+"_id"]}else{if(af[aN]===undefined){af[aN]=af[ah+"_id"]}}delete af[ah+"_id"];af=d.extend(af,au.editData,aE);if(ar.treeGrid===true){if(af[aH]===aI.addoper){aK=ar.selrow;var aM=ar.treeGridModel==="adjacency"?ar.treeReader.parent_id_field:"parent_id";af[aM]=aK}for(aJ in ar.treeReader){if(ar.treeReader.hasOwnProperty(aJ)){aQ=ar.treeReader[aJ];if(af.hasOwnProperty(aQ)){if(af[aH]===aI.addoper&&aJ==="parent_id_field"){continue}delete af[aQ]}}}}af[aN]=h.stripPref(ar.idPrefix,af[aN]);var aG=d.extend({url:aF,type:au.mtype,data:h.serializeFeedback.call(v,d.isFunction(au.serializeEditData)?au.serializeEditData:ar.serializeEditData,"jqGridAddEditSerializeEditData",af),complete:function(aU,aX){d("#sData",L).removeClass(u);af[aN]=ar.idPrefix+d("#id_g",R).val();if((aU.status>=300&&aU.status!==304)||(aU.status===0&&aU.readyState===4)){aO[0]=false;aO[1]=Q.triggerHandler("jqGridAddEditErrorTextFormat",[aU,ai]);if(d.isFunction(au.errorTextFormat)){aO[1]=au.errorTextFormat.call(v,aU,ai)}else{aO[1]=aX+" Status: '"+aU.statusText+"'. Error code: "+aU.status}}else{aO=Q.triggerHandler("jqGridAddEditAfterSubmit",[aU,af,ai]);if(aO===undefined){aO=[true,"",""]}if(aO[0]&&d.isFunction(au.afterSubmit)){aO=au.afterSubmit.call(v,aU,af,ai)}}if(aO[0]===false){d("#FormError>td",R).html(aO[1]);d("#FormError",R).show()}else{if(ar.autoencode){d.each(af,function(aZ,aY){af[aZ]=h.htmlDecode(aY)})}var aS=[d.extend({},au.reloadGridOptions||{})];if(af[aH]===aI.addoper){if(!aO[2]){aO[2]=h.randId()}if(af[aN]==null||af[aN]==="_empty"||af[aH]===aI.addoper){af[aN]=aO[2]}else{aO[2]=af[aN]}if(au.reloadAfterSubmit){Q.trigger("reloadGrid",aS)}else{if(ar.treeGrid===true){r.addChildNode.call(Q,aO[2],aK,af)}else{r.addRowData.call(Q,aO[2],af,au.addedrow)}}if(au.closeAfterAdd){if(ar.treeGrid!==true){ap.call(Q,aO[2])}i(U,{gb:z,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form})}else{if(au.clearAfterAdd){K("_empty",Z)}}}else{if(au.reloadAfterSubmit){Q.trigger("reloadGrid",aS);if(!au.closeAfterEdit){setTimeout(function(){ap.call(Q,af[aN])},1000)}}else{if(ar.treeGrid===true){r.setTreeRow.call(Q,af[aN],af)}else{r.setRowData.call(Q,af[aN],af)}}if(au.closeAfterEdit){i(U,{gb:z,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form})}}if(d.isFunction(au.afterComplete)){var aV=aU;setTimeout(function(){Q.triggerHandler("jqGridAddEditAfterComplete",[aV,af,d(Z),ai]);au.afterComplete.call(v,aV,af,d(Z),ai);aV=null},50)}if(au.checkOnSubmit||au.checkOnUpdate){d(Z).data("disabled",false);if(au._savedData[ah+"_id"]!=="_empty"){var aT;for(aT in au._savedData){if(au._savedData.hasOwnProperty(aT)&&af[aT]){au._savedData[aT]=af[aT]}}}}}au.processing=false;try{d(":input:visible",Z)[0].focus()}catch(aW){}}},h.ajaxOptions,au.ajaxEditOptions);if(!aG.url&&!au.useDataProxy){if(d.isFunction(ar.dataProxy)){au.useDataProxy=true}else{aO[0]=false;aO[1]+=" "+h.errors.nourl}}if(aO[0]){if(au.useDataProxy){var aP=ar.dataProxy.call(v,aG,"set_"+ah);if(aP===undefined){aP=[true,""]}if(aP[0]===false){aO[0]=false;aO[1]=aP[1]||"Error deleting the selected row!"}else{if(aG.data.oper===aI.addoper&&au.closeAfterAdd){i(U,{gb:z,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form})}if(aG.data.oper===aI.editoper&&au.closeAfterEdit){i(U,{gb:z,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form})}}}else{if(aG.url==="clientArray"){au.reloadAfterSubmit=false;af=aG.data;aG.complete({status:200,statusText:""},"")}else{d.ajax(aG)}}}}if(aO[0]===false){d("#FormError>td",R).html(aO[1]);d("#FormError",R).show()}}function al(aH,aE){var aF=false,aG;for(aG in aH){if(aH.hasOwnProperty(aG)&&String(aH[aG])!==String(aE[aG])){aF=true;break}}return aF}function C(){var aE=true;d("#FormError",R).hide();if(au.checkOnUpdate){af={};aB();ac=al(af,au._savedData);if(ac){d(Z).data("disabled",true);d(".confirm",U).show();aE=false}}return aE}function az(){var aF=h.detectRowEditing.call(v,t);if(aF!=null){if(aF.mode==="inlineEditing"){r.restoreRow.call(Q,t)}else{var aE=aF.savedRow,aG=v.rows[aE.id];r.restoreCell.call(Q,aE.id,aE.ic);d(aG.cells[aE.ic]).removeClass("edit-cell "+an);d(aG).addClass(an).attr({"aria-selected":"true",tabindex:"0"})}}}function ak(aF,aE){var aG=aE[1].length-1;if(aF===0){d("#pData",L).addClass(B)}else{if(aE[1][aF-1]!==undefined&&l(d("#"+k(aE[1][aF-1])),B)){d("#pData",L).addClass(B)}else{d("#pData",L).removeClass(B)}}if(aF===aG){d("#nData",L).addClass(B)}else{if(aE[1][aF+1]!==undefined&&l(d("#"+k(aE[1][aF+1])),B)){d("#nData",L).addClass(B)}else{d("#nData",L).removeClass(B)}}}function aC(){var aF=r.getDataIDs.call(Q),aE=d("#id_g",R).val(),aG=d.inArray(aE,aF);return[aG,aF]}var N=isNaN(au.dataheight)?au.dataheight:au.dataheight+"px",A=isNaN(au.datawidth)?au.datawidth:au.datawidth+"px",aw=d("<form name='FormPost' id='"+aa+"' class='FormGrid' onSubmit='return false;' style='width:"+A+";overflow:auto;position:relative;height:"+N+";'></form>").data("disabled",false),Y=d("<table id='"+ay+"' class='EditTable'"+(h.msie&&h.msiever()<8?" cellspacing='0'":"")+"><tbody></tbody></table>");d(ae).each(function(){var aE=this.formoptions;aj=Math.max(aj,aE?aE.colpos||0:0);M=Math.max(M,aE?aE.rowpos||0:0)});d(aw).append(Y);var am=d("<tr id='FormError' style='display:none'><td class='"+ag+"' colspan='"+(aj*2)+"'></td></tr>");am[0].rp=0;d(Y).append(am);am=d("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+(aj*2)+"'>"+au.topinfo+"</td></tr>");am[0].rp=0;d(Y).append(am);if(!S("beforeInitData",aw,ai)){return}az();var x=ar.direction==="rtl"?true:false,av=x?"nData":"pData",ax=x?"pData":"nData";O(t,Y,aj);var G=n.call(v,av,"",a(aA,au.prevIcon),"","left"),I=n.call(v,ax,"",a(aA,au.nextIcon),"","right"),D=n.call(v,"sData",au.bSubmit),P=n.call(v,"cData",au.bCancel),aq="<table"+(h.msie&&h.msiever()<8?" cellspacing='0'":"")+" class='EditTable' id='"+ay+"_2'><tbody><tr><td colspan='2'><hr class='"+e.call(v,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+ar.direction+"'>"+(x?I+G:G+I)+"</td><td class='EditButton EditButton-"+ar.direction+"'>"+D+"&#160;"+P+"</td></tr>";aq+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+au.bottominfo+"</td></tr>";aq+="</tbody></table>";if(M>0){var W=[];d.each(d(Y)[0].rows,function(aE,aF){W[aE]=aF});W.sort(function(aF,aE){if(aF.rp>aE.rp){return 1}if(aF.rp<aE.rp){return -1}return 0});d.each(W,function(aE,aF){d("tbody",Y).append(aF)})}au.gbox=z;var J=false;if(au.closeOnEscape===true){au.closeOnEscape=false;J=true}var ao=d("<div></div>").append(aw).append(aq);c.call(v,aD,ao,au,ar.gView,d(z)[0]);if(au.topinfo){d(".tinfo",R).show()}if(au.bottominfo){d(".binfo",L).show()}ao=null;aq=null;d(U).keydown(function(aH){var aE=(aH.target.tagName||"").toUpperCase(),aF,aG;if(d(Z).data("disabled")===true){return false}if(aH.which===13){if(aE!=="TEXTAREA"){aF=d(L).find(":focus");aG=aF.attr("id");if(aF.length>0&&d.inArray(aG,["pData","nData","cData"])>=0){aF.trigger("click");return false}if(au.savekey[0]===true&&au.savekey[1]===13){d("#sData",L).trigger("click");return false}}}if(au.savekey[0]===true&&aH.which===au.savekey[1]){if(aE!=="TEXTAREA"){d("#sData",L).trigger("click");return false}}if(aH.which===27){if(!C()){return false}if(J){i(U,{gb:au.gbox,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form})}return false}if(au.navkeys[0]===true){if(d("#id_g",R).val()==="_empty"){return true}if(aH.which===au.navkeys[1]){d("#pData",L).trigger("click");return false}if(aH.which===au.navkeys[2]){d("#nData",L).trigger("click");return false}}});if(au.checkOnUpdate){d("a.ui-jqdialog-titlebar-close span",U).removeClass("jqmClose");d("a.ui-jqdialog-titlebar-close",U).unbind("click").click(function(){if(!C()){return false}i(U,{gb:z,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form});return false})}g(d("#sData",L),au.saveicon,aA);g(d("#cData",L),au.closeicon,aA);if(au.checkOnSubmit||au.checkOnUpdate){D=n.call(v,"sNew",au.bYes);I=n.call(v,"nNew",au.bNo);P=n.call(v,"cNew",au.bExit);var V=au.zIndex||999;V++;d("<div class='"+au.overlayClass+" jqgrid-overlay confirm' style='z-index:"+V+";display:none;'>&#160;</div><div class='"+e.call(v,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(V+1)+"'>"+au.saveData+"<br/><br/>"+D+I+P+"</div>").insertAfter(Z);d("#sNew",U).click(function(){E();d(Z).data("disabled",false);d(".confirm",U).hide();return false});d("#nNew",U).click(function(){d(".confirm",U).hide();d(Z).data("disabled",false);setTimeout(function(){d(":input:visible",Z)[0].focus()},0);return false});d("#cNew",U).click(function(){d(".confirm",U).hide();d(Z).data("disabled",false);i(U,{gb:z,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form});return false})}S("onInitializeForm",d(Z),ai);if(t==="_empty"||!au.viewPagerButtons){d("#pData,#nData",L).hide()}else{d("#pData,#nData",L).show()}S("beforeShowForm",d(Z),ai);d(U).data("onClose",au.onClose);q(U,{gbox:z,jqm:au.jqModal,overlay:au.overlay,modal:au.modal,overlayClass:au.overlayClass,toTop:au.toTop,onHide:function(aE){o.call(Q,"formProp",Z,aE)}});if(!H){d("."+k(au.overlayClass)).click(function(){if(!C()){return false}i(U,{gb:z,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form});return false})}d(".fm-button",U).hover(function(){d(this).addClass(w)},function(){d(this).removeClass(w)});d("#sData",L).click(function(){af={};d("#FormError",R).hide();aB();if(af[ah+"_id"]==="_empty"){E()}else{if(au.checkOnSubmit===true){ac=al(af,au._savedData);if(ac){d(Z).data("disabled",true);d(".confirm",U).show()}else{E()}}else{E()}}return false});d("#cData",L).click(function(){if(!C()){return false}i(U,{gb:z,jqm:au.jqModal,onClose:au.onClose,removemodal:au.removemodal,formprop:!au.recreateForm,form:au.form});return false});d("#nData",L).click(function(){if(!C()){return false}d("#FormError",R).hide();var aE=aC();aE[0]=parseInt(aE[0],10);if(aE[0]!==-1&&aE[1][aE[0]+1]){if(!S("onclickPgButtons","next",d(Z),aE[1][aE[0]])){return false}K(aE[1][aE[0]+1],Z);ap.call(Q,aE[1][aE[0]+1]);S("afterclickPgButtons","next",d(Z),aE[1][aE[0]+1]);ak(aE[0]+1,aE)}return false});d("#pData",L).click(function(){if(!C()){return false}d("#FormError",R).hide();var aE=aC();if(aE[0]!==-1&&aE[1][aE[0]-1]){if(!S("onclickPgButtons","prev",d(Z),aE[1][aE[0]])){return false}if(l(d("#"+k(aE[1][aE[0]-1])),B)){return false}K(aE[1][aE[0]-1],Z);ap.call(Q,aE[1][aE[0]-1]);S("afterclickPgButtons","prev",d(Z),aE[1][aE[0]-1]);ak(aE[0]-1,aE)}return false});S("afterShowForm",d(Z),ai);var at=aC();ak(at[0],at)})},viewGridRow:function(t,s){return this.each(function(){var u=this,J=d(u),W=u.p;if(!u.grid||W==null||!t){return}var R=W.id,Y=d.extend(true,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:true,resize:true,closeOnEscape:false,labelswidth:"30%",navkeys:[false,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:true,recreateForm:false,removemodal:true,form:"view"},r.getGridRes.call(J,"view"),h.view||{},W.formViewing||{},s||{});var N="#ViewGrid_"+k(R),K="#ViewTbl_"+k(R),E=K+"_2",P="ViewGrid_"+R,S="ViewTbl_"+R,ad=Y.commonIconClass,af={themodal:"viewmod"+R,modalhead:"viewhd"+R,modalcontent:"viewcnt"+R,resizeAlso:P},L="#"+k(af.themodal),x=W.gBox,Q=W.colModel,T=1,F=0,A=function(){var ag=d.makeArray(arguments);ag.unshift("");ag.unshift("View");ag.unshift(Y);return b.apply(u,ag)},v=j.call(u,"hover"),z=j.call(u,"disabled");if(!Y.recreateForm){if(J.data("viewProp")){d.extend(Y,J.data("viewProp"))}}function ac(){if(Y.closeOnEscape===true||Y.navkeys[0]===true){setTimeout(function(){d(".ui-jqdialog-titlebar-close","#"+k(af.modalhead)).attr("tabindex","-1").focus()},0)}}function H(al,ap,az){var ah,ak,at,ax=0,aC,aD,aB=[],aq=r.getInd.call(J,al),ay,aw=e.call(u,"dialog.viewData","DataTD form-view-data"),ar=e.call(u,"dialog.viewLabel","CaptionTD form-view-label"),an="<td class='"+ar+"' width='"+Y.labelswidth+"'></td><td class='"+aw+" ui-helper-reset'></td>",ao="",ai="<td class='"+ar+"'></td><td class='"+aw+"'></td>",am=["integer","number","currency"],av=0,au=0,aj,ag,aA;for(ay=1;ay<=az;ay++){ao+=ay===1?an:ai}d(Q).each(function(){var aF=this;if(aF.editrules&&aF.editrules.edithidden===true){ak=false}else{ak=aF.hidden===true?true:false}if(!ak&&aF.align==="right"){if(aF.formatter&&d.inArray(aF.formatter,am)!==-1){av=Math.max(av,parseInt(aF.width,10))}else{au=Math.max(au,parseInt(aF.width,10))}}});aj=av!==0?av:au!==0?au:0;d(Q).each(function(aG){var aM,aF=this;ah=aF.name;ag=false;if(aF.editrules&&aF.editrules.edithidden===true){ak=false}else{ak=aF.hidden===true?true:false}aD=ak?"style='display:none'":"";aA=(typeof aF.viewable!=="boolean")?true:aF.viewable;if(ah!=="cb"&&ah!=="subgrid"&&ah!=="rn"&&aA){if(aq===false){aC=""}else{aM=d("td:eq("+aG+")",u.rows[aq]);if(ah===W.ExpandColumn&&W.treeGrid===true){aC=aM.text()}else{aC=aF.autoResizable&&aM.length>0&&d(aM[0].firstChild).hasClass(W.autoResizableWrapperClassName)?d(aM[0].firstChild).html():aM.html()}}ag=aF.align==="right"&&aj!==0?true:false;var aL=d.extend({},{rowabove:false,rowcontent:""},aF.formoptions||{}),aH=parseInt(aL.rowpos,10)||ax+1,aK=parseInt((parseInt(aL.colpos,10)||1)*2,10);if(aL.rowabove){var aJ=d("<tr><td class='contentinfo' colspan='"+(az*2)+"'>"+aL.rowcontent+"</td></tr>");d(ap).append(aJ);aJ[0].rp=aH}at=d(ap).find("tr[data-rowpos="+aH+"]");if(at.length===0){at=d("<tr "+aD+" data-rowpos='"+aH+"'></tr>").addClass("FormData").attr("id","trv_"+ah);d(at).append(ao);d(ap).append(at);at[0].rp=aH}var aI=(aL.label===undefined?W.colNames[aG]:aL.label);d("td:eq("+(aK-2)+")",at[0]).html("<b>"+(aI||"&nbsp;")+"</b>");d("td:eq("+(aK-1)+")",at[0]).html("<span>"+(aC||"&nbsp;")+"</span>").attr("id","v_"+ah);if(ag){d("td:eq("+(aK-1)+") span",at[0]).css({"text-align":"right",width:aj+"px"})}aB[ax]=aG;ax++}});if(ax>0){var aE=d("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(az*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+al+"'/></td></tr>");aE[0].rp=ax+99;d(ap).append(aE)}return aB}function D(ak){var ah,am,aj=0,ai,al=r.getInd.call(J,ak,true),ag;if(!al){return}d("td",al).each(function(an){ag=Q[an];ah=ag.name;if(ag.editrules&&ag.editrules.edithidden===true){am=false}else{am=ag.hidden===true?true:false}if(ah!=="cb"&&ah!=="subgrid"&&ah!=="rn"){if(ah===W.ExpandColumn&&W.treeGrid===true){ai=d(this).text()}else{ai=ag.autoResizable&&d(this.firstChild).hasClass(W.autoResizableWrapperClassName)?d(this.firstChild).html():d(this).html()}ah=k("v_"+ah);d("#"+ah+" span",K).html(ai);if(am){d("#"+ah,K).parents("tr:first").hide()}aj++}});if(aj>0){d("#id_g",K).val(ak)}}function U(ah,ag){var ai=ag[1].length-1;if(ah===0){d("#pData",E).addClass(z)}else{if(ag[1][ah-1]!==undefined&&l(d("#"+k(ag[1][ah-1])),z)){d("#pData",E).addClass(z)}else{d("#pData",E).removeClass(z)}}if(ah===ai){d("#nData",E).addClass(z)}else{if(ag[1][ah+1]!==undefined&&l(d("#"+k(ag[1][ah+1])),z)){d("#nData",E).addClass(z)}else{d("#nData",E).removeClass(z)}}}function ae(){var ah=r.getDataIDs.call(J),ag=d("#id_g",K).val(),ai=d.inArray(ag,ah);return[ai,ah]}var G=isNaN(Y.dataheight)?Y.dataheight:Y.dataheight+"px",y=isNaN(Y.datawidth)?Y.datawidth:Y.datawidth+"px",aa=d("<form name='FormPost' id='"+P+"' class='FormGrid' style='width:"+y+";overflow:auto;position:relative;height:"+G+";'></form>"),O=d("<table id='"+S+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");d(Q).each(function(){var ag=this.formoptions;T=Math.max(T,ag?ag.colpos||0:0);F=Math.max(F,ag?ag.rowpos||0:0)});aa.append(O);if(!A("beforeInitData",aa)){return}H(t,O,T);var w=W.direction==="rtl"?true:false,Z=w?"nData":"pData",ab=w?"pData":"nData",B=n.call(u,Z,"",a(ad,Y.prevIcon),"","left"),C=n.call(u,ab,"",a(ad,Y.nextIcon),"","right"),I=n.call(u,"cData",Y.bClose);if(F>0){var M=[];d.each(d(O)[0].rows,function(ag,ah){M[ag]=ah});M.sort(function(ah,ag){if(ah.rp>ag.rp){return 1}if(ah.rp<ag.rp){return -1}return 0});d.each(M,function(ag,ah){d("tbody",O).append(ah)})}Y.gbox=x;var V=d("<div></div>").append(aa).append("<table border='0' class='EditTable' id='"+S+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+W.direction+"' width='"+(Y.labelswidth||"auto")+"'>"+(w?C+B:B+C)+"</td><td class='EditButton EditButton-"+W.direction+"'>"+I+"</td></tr></tbody></table>");c.call(u,af,V,Y,W.gView,d(W.gView)[0]);if(!Y.viewPagerButtons){d("#pData, #nData",E).hide()}V=null;d(L).keydown(function(ai){var ag,ah;if(d(N).data("disabled")===true){return false}if(ai.which===13){ag=d(E).find(":focus");ah=ag.attr("id");if(ag.length>0&&d.inArray(ah,["pData","nData","cData"])>=0){ag.trigger("click");return false}}if(ai.which===27){if(Y.closeOnEscape){i(L,{gb:x,jqm:Y.jqModal,onClose:Y.onClose,removemodal:Y.removemodal,formprop:!Y.recreateForm,form:Y.form})}return false}if(Y.navkeys[0]===true){if(ai.which===Y.navkeys[1]){d("#pData",E).trigger("click");return false}if(ai.which===Y.navkeys[2]){d("#nData",E).trigger("click");return false}}});g(d("#cData",E),Y.closeicon,ad);A("beforeShowForm",d(N));q(L,{gbox:x,jqm:Y.jqModal,overlay:Y.overlay,toTop:Y.toTop,modal:Y.modal,onHide:function(ag){o.call(J,"viewProp",N,ag)}});d(".fm-button:not(."+z.split(" ").join(".")+")",E).hover(function(){d(this).addClass(v)},function(){d(this).removeClass(v)});ac();d("#cData",E).click(function(){i(L,{gb:x,jqm:Y.jqModal,onClose:Y.onClose,removemodal:Y.removemodal,formprop:!Y.recreateForm,form:Y.form});return false});d("#nData",E).click(function(){d("#FormError",K).hide();var ag=ae();ag[0]=parseInt(ag[0],10);if(ag[0]!==-1&&ag[1][ag[0]+1]){if(!A("onclickPgButtons","next",d(N),ag[1][ag[0]])){return false}D(ag[1][ag[0]+1]);r.setSelection.call(J,ag[1][ag[0]+1]);A("afterclickPgButtons","next",d(N),ag[1][ag[0]+1]);U(ag[0]+1,ag)}ac();return false});d("#pData",E).click(function(){d("#FormError",K).hide();var ag=ae();if(ag[0]!==-1&&ag[1][ag[0]-1]){if(!A("onclickPgButtons","prev",d(N),ag[1][ag[0]])){return false}D(ag[1][ag[0]-1]);r.setSelection.call(J,ag[1][ag[0]-1]);A("afterclickPgButtons","prev",d(N),ag[1][ag[0]-1]);U(ag[0]-1,ag)}ac();return false});var X=ae();U(X[0],X)})},delGridRow:function(s,t){return this.each(function(){var L=this,I=L.p,M=d(L);if(!L.grid||I==null||!s){return}var H=I.id,J=d.extend(true,{top:0,left:0,width:240,removemodal:true,height:"auto",dataheight:"auto",drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:false,delData:{},onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},r.getGridRes.call(M,"del"),h.del||{},I.formDeleting||{},t||{});var O="DelTbl_"+H,u="#DelTbl_"+k(H),G,E,z,A,K={themodal:"delmod"+H,modalhead:"delhd"+H,modalcontent:"delcnt"+H,resizeAlso:O},x="#"+k(K.themodal),D=I.gBox,B=J.commonIconClass,y=function(){var S=d.makeArray(arguments);S.unshift("");S.unshift("Delete");S.unshift(J);return b.apply(L,S)},P=j.call(L,"hover"),R=j.call(L,"active"),v=j.call(L,"error");if(!d.isArray(s)){s=[String(s)]}if(d(x)[0]!==undefined){if(!y("beforeInitData",d(u))){return}d("#DelData>td",u).text(s.join()).data("rowids",s);d("#DelError",u).hide();if(J.processing===true){J.processing=false;d("#dData",u).removeClass(R)}y("beforeShowForm",d(u));q(x,{gbox:D,jqm:J.jqModal,jqM:false,overlay:J.overlay,toTop:J.toTop,modal:J.modal});y("afterShowForm",d(u))}else{var N=isNaN(J.dataheight)?J.dataheight:J.dataheight+"px",C=isNaN(J.datawidth)?J.datawidth:J.datawidth+"px",w="<div id='"+O+"' class='formdata' style='width:"+C+";overflow:auto;position:relative;height:"+N+";'>";w+="<table class='DelTable'><tbody>";w+="<tr id='DelError' style='display:none'><td class='"+v+"'></td></tr>";w+="<tr id='DelData' style='display:none'><td >"+s.join()+"</td></tr>";w+='<tr><td class="delmsg" style="white-space:pre;">'+J.msg+"</td></tr><tr><td >&#160;</td></tr>";w+="</tbody></table></div>";var F=n.call(L,"dData",J.bSubmit),Q=n.call(L,"eData",J.bCancel);w+="<table"+(h.msie&&h.msiever()<8?" cellspacing='0'":"")+" class='EditTable' id='"+O+"_2'><tbody><tr><td><hr class='"+e.call(L,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+I.direction+"'>"+F+"&#160;"+Q+"</td></tr></tbody></table>";J.gbox=D;c.call(L,K,w,J,I.gView,d(I.gView)[0]);d("#DelData>td",u).data("rowids",s);if(!y("beforeInitData",d(w))){return}d(".fm-button",u+"_2").hover(function(){d(this).addClass(P)},function(){d(this).removeClass(P)});g(d("#dData",u+"_2"),J.delicon,B);g(d("#eData",u+"_2"),J.cancelicon,B);d("#dData",u+"_2").click(function(){var U=[true,""],Y,Z=d("#DelData>td",u),V=Z.text(),X=Z.data("rowids"),W={};if(d.isFunction(J.onclickSubmit)){W=J.onclickSubmit.call(L,J,V)||{}}if(d.isFunction(J.beforeSubmit)){U=J.beforeSubmit.call(L,V)}if(U[0]&&!J.processing){J.processing=true;z=I.prmNames;G=d.extend({},J.delData,W);A=z.oper;G[A]=z.deloper;E=z.id;V=X.slice();if(!V.length){return false}for(Y in V){if(V.hasOwnProperty(Y)){V[Y]=h.stripPref(I.idPrefix,V[Y])}}G[E]=V.join();d(this).addClass(R);var S=d.extend({url:J.url||I.editurl,type:J.mtype,data:d.isFunction(J.serializeDelData)?J.serializeDelData.call(L,G):G,complete:function(ab,ad){var aa;d("#dData",u+"_2").removeClass(R);if((ab.status>=300&&ab.status!==304)||(ab.status===0&&ab.readyState===4)){U[0]=false;if(d.isFunction(J.errorTextFormat)){U[1]=J.errorTextFormat.call(L,ab)}else{U[1]=ad+" Status: '"+ab.statusText+"'. Error code: "+ab.status}}else{if(d.isFunction(J.afterSubmit)){U=J.afterSubmit.call(L,ab,G)}}if(U[0]===false){d("#DelError>td",u).html(U[1]);d("#DelError",u).show()}else{if(J.reloadAfterSubmit&&I.datatype!=="local"){M.trigger("reloadGrid",[d.extend({},J.reloadGridOptions||{})])}else{if(I.treeGrid===true){try{r.delTreeNode.call(M,X[0])}catch(ac){}}else{X=X.slice();for(aa=0;aa<X.length;aa++){r.delRowData.call(M,X[aa])}}}setTimeout(function(){y("afterComplete",ab,V,d(u))},50)}J.processing=false;if(U[0]){i(x,{gb:D,jqm:J.jqModal,onClose:J.onClose,removemodal:J.removemodal})}}},h.ajaxOptions,J.ajaxDelOptions);if(!S.url&&!J.useDataProxy){if(d.isFunction(I.dataProxy)){J.useDataProxy=true}else{U[0]=false;U[1]+=" "+h.errors.nourl}}if(U[0]){if(J.useDataProxy){var T=I.dataProxy.call(L,S,"del_"+H);if(T===undefined){T=[true,""]}if(T[0]===false){U[0]=false;U[1]=T[1]||"Error deleting the selected row!"}else{i(x,{gb:D,jqm:J.jqModal,onClose:J.onClose,removemodal:J.removemodal})}}else{if(S.url==="clientArray"){G=S.data;S.complete({status:200,statusText:""},"")}else{d.ajax(S)}}}}if(U[0]===false){d("#DelError>td",u).html(U[1]);d("#DelError",u).show()}return false});d("#eData",u+"_2").click(function(){i(x,{gb:D,jqm:J.jqModal,onClose:J.onClose,removemodal:J.removemodal});return false});y("beforeShowForm",d(u));q(x,{gbox:D,jqm:J.jqModal,overlay:J.overlay,toTop:J.toTop,modal:J.modal});y("afterShowForm",d(u))}if(J.closeOnEscape===true){setTimeout(function(){d(".ui-jqdialog-titlebar-close","#"+k(K.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(w,v,u,x,t,s,y){if(typeof w==="object"){y=s;s=t;t=x;x=u;u=v;v=w;w=undefined}x=x||{};u=u||{};y=y||{};t=t||{};s=s||{};return this.each(function(){var z=this,ae=z.p,J=d(z);if(!z.grid||ae==null||(z.nav&&d(w).find(".navtable").length>0)){return}var X=ae.id,af=d.extend({edit:true,add:true,del:true,search:true,refresh:true,refreshstate:"firstpage",view:false,closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false,hideEmptyPagerParts:true,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:true,alertleft:null,alertzIndex:null,iconsOverText:false},r.getGridRes.call(J,"nav"),h.nav||{},ae.navOptions||{},v||{});af.position=af.position||(ae.direction==="rtl"?"right":"left");var aa,Z,N=ae.idSel,B=ae.gBox,ah=af.commonIconClass,U={themodal:"alertmod_"+X,modalhead:"alerthd_"+X,modalcontent:"alertcnt_"+X},Y=function(){return function(){var an=document.documentElement,ak=window,ap,ao,al=J.closest(".ui-jqgrid").offset();if(d("#"+k(U.themodal))[0]===undefined){if(!af.alerttop&&!af.alertleft){if(ak.innerWidth!==undefined){ap=ak.innerWidth;ao=ak.innerHeight}else{if(an!==null&&an.clientWidth!==undefined&&an.clientWidth!==0){ap=an.clientWidth;ao=an.clientHeight}else{ap=1024;ao=768}}ap=ap/2-parseInt(af.alertwidth,10)/2-al.left;ao=ao/2-25-al.top}c.call(z,U,"<div>"+af.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='"+X+"_jqg_alrt'></span></span>",{gbox:B,jqModal:af.jqModal,drag:true,resize:true,caption:af.alertcap,top:af.alerttop!=null?af.alerttop:ao,left:af.alertleft!=null?af.alertleft:ap,width:af.alertwidth,height:af.alertheight,closeOnEscape:af.closeOnEscape,zIndex:af.alertzIndex,removemodal:af.removemodal},ae.gView,d(B)[0],false)}q("#"+k(U.themodal),{gbox:B,toTop:af.alertToTop,jqm:af.jqModal});var am=d("#"+k(U.modalhead)).find(".ui-jqdialog-titlebar-close");am.attr({tabindex:"0",href:"#",role:"button"});setTimeout(function(){am.focus()},50)}},W=Y(),E,R=function(al){var ak;if(al.which===13){ak=d(this).find(":focus");if(ak.length>0){ak.trigger("click");return false}}},A=j.call(z,"hover"),F=j.call(z,"disabled");if(!z.grid){return}z.modalAlert=W;if(w===undefined){if(ae.pager){w=ae.pager;if(ae.toppager){af.cloneToTop=true}}else{if(ae.toppager){w=ae.toppager}}}var O=1,ag,S,ab,C,Q,ai,G,M=["left","center","right"],T="<div class='ui-pg-button "+F+"'><span class='ui-separator'></span></div>",L=function(){if(!l(this,F)){d(this).addClass(A)}},I=function(){d(this).removeClass(A)},V=function(){if(!l(this,F)){if(d.isFunction(af.addfunc)){af.addfunc.call(z)}else{r.editGridRow.call(J,"new",x)}}return false},aj=function(am,ak,an){if(!l(this,F)){var al=ae.selrow;if(al){if(d.isFunction(am)){am.call(z,al)}else{r[ak].call(J,al,an)}}else{W()}}return false},P=function(){return aj.call(this,af.editfunc,"editGridRow",u)},D=function(){return aj.call(this,af.viewfunc,"viewGridRow",y)},ad=function(){var ak;if(!l(this,F)){if(ae.multiselect){ak=ae.selarrrow;if(ak.length===0){ak=null}}else{ak=ae.selrow}if(ak){if(d.isFunction(af.delfunc)){af.delfunc.call(z,ak)}else{r.delGridRow.call(J,ak,t)}}else{W()}}return false},K=function(){if(!l(this,F)){if(d.isFunction(af.searchfunc)){af.searchfunc.call(z,s)}else{r.searchGrid.call(J,s)}}return false},ac=function(){if(!l(this,F)){if(d.isFunction(af.beforeRefresh)){af.beforeRefresh.call(z)}ae.search=false;ae.resetsearch=true;try{if(af.refreshstate!=="currentfilter"){ae.postData.filters="";try{d("#fbox_"+N).jqFilter("resetFilter")}catch(ak){}if(d.isFunction(z.clearToolbar)){z.clearToolbar(false)}}}catch(ak){}switch(af.refreshstate){case"firstpage":J.trigger("reloadGrid",[d.extend({},af.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":J.trigger("reloadGrid",[d.extend({},af.reloadGridOptions||{},{current:true})]);break}if(d.isFunction(af.afterRefresh)){af.afterRefresh.call(z)}}return false},H=function(am,ar,aq,ap,al){var ao=d("<div class='ui-pg-button ui-corner-all' tabindex='0' role='button'></div>"),ak=af[am+"icon"],an=d.trim(af[am+"text"]);ao.append("<div class='ui-pg-div'><span class='"+(af.iconsOverText?a("ui-pg-button-icon-over-text",ah,ak):a(ah,ak))+"'></span>"+(an?"<span class='ui-pg-button-text"+(af.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+an+"</span>":"")+"</div>");d(ap).append(ao);ao.attr({title:af[am+"title"]||"",id:ar||am+"_"+al}).click(aq).hover(L,I);return ao};if(af.cloneToTop&&ae.toppager){O=2}for(ag=0;ag<O;ag++){E=d("<div class='ui-pg-table navtable' role='toolbar' style='float:"+(ae.direction==="rtl"?"right":"left")+";table-layout:auto;'></div>");if(ag===0){ab=w;C=X;if(ab===ae.toppager){C+="_top";O=1}}else{ab=ae.toppager;C=X+"_top"}if(af.add){H("add",x.id,V,E,C)}if(af.edit){H("edit",u.id,P,E,C)}if(af.view){H("view",y.id,D,E,C)}if(af.del){H("del",t.id,ad,E,C)}if(af.add||af.edit||af.del||af.view){d(E).append(T)}if(af.search){S=H("search",s.id,K,E,C);if(s.showOnLoad&&s.showOnLoad===true){d(S,E).click()}}if(af.refresh){H("refresh","",ac,E,C)}Z=d(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";d("body").append("<div id='testpg2' class='"+e.call(z,"gBox","ui-jqgrid")+"' style='font-size:"+Z+";visibility:hidden;' ></div>");aa=d(E).clone().appendTo("#testpg2").width();d("#testpg2").remove();d(ab+"_"+af.position,ab).append(E);if(af.hideEmptyPagerParts){for(Q=0;Q<M.length;Q++){if(M[Q]!==af.position){G=d(ab+"_"+M[Q],ab);if(G.length===0||G[0].childNodes.length===0){G.hide()}else{if(G[0].childNodes.length===1){ai=G[0].firstChild;if(d(ai).is("table.ui-pg-table")&&(ai.rows===0||ai.rows[0].cells.length===0)){G.hide()}}}}}}if(ae._nvtd){if(aa>ae._nvtd[0]){d(ab+"_"+af.position,ab).width(aa);ae._nvtd[0]=aa}ae._nvtd[1]=aa}z.nav=true;E.bind("keydown.jqGrid",R)}J.triggerHandler("jqGridResetFrozenHeights")})},navButtonAdd:function(t,s){if(typeof t==="object"){s=t;t=undefined}return this.each(function(){var B=this,y=B.p;if(!B.grid){return}var A=d.extend({caption:"newButton",title:"",onClickButton:null,position:"last",cursor:"pointer",iconsOverText:false},r.getGridRes.call(d(B),"nav"),h.nav||{},y.navOptions||{},s||{}),v=j.call(B,"hover"),z=j.call(B,"disabled");if(t===undefined){if(y.pager){r.navButtonAdd.call(d(B),y.pager,A);if(y.toppager){t=y.toppager}else{return}}else{if(y.toppager){t=y.toppager}}}if(typeof t==="string"&&t.indexOf("#")!==0){t="#"+k(t)}var w=d(".navtable",t),u=A.commonIconClass;if(w.length>0){if(A.id&&w.find("#"+k(A.id)).length>0){return}var x=d("<div tabindex='0' role='button'></div>");if(A.buttonicon.toString().toUpperCase()==="NONE"){d(x).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+(A.caption?"<span class='ui-pg-button-text"+(A.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+A.caption+"</span>":"")+"</div>")}else{d(x).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='"+(A.iconsOverText?a("ui-pg-button-icon-over-text",u,A.buttonicon):a(u,A.buttonicon))+"'></span>"+(A.caption?"<span class='ui-pg-button-text"+(A.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+A.caption+"</span>":"")+"</div>")}if(A.id){d(x).attr("id",A.id)}if(A.position==="first"&&w.children("div.ui-pg-button").length>0){w.children("div.ui-pg-button").filter(":first").before(x)}else{w.append(x)}d(x,w).attr("title",A.title||"").click(function(C){if(!l(this,z)){if(d.isFunction(A.onClickButton)){A.onClickButton.call(B,A,C)}}return false}).hover(function(){if(!l(this,z)){d(this).addClass(v)}},function(){d(this).removeClass(v)});d(B).triggerHandler("jqGridResetFrozenHeights")}})},navSeparatorAdd:function(s,t){t=d.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},t||{});return this.each(function(){if(!this.grid){return}if(typeof s==="string"&&s.indexOf("#")!==0){s="#"+k(s)}var v=d(".navtable",s)[0];if(v.length>0){var u="<div class='ui-pg-button "+j.call(this,"disabled")+"'><span class='"+t.sepclass+"'></span>"+t.sepcontent+"</div>";if(t.position==="first"){if(d(">div.ui-pg-button",v).length===0){v.append(u)}else{d(">div.ui-pg-button",v).filter(":first").before(u)}}else{v.append(u)}}})},GridToForm:function(s,t){return this.each(function(){var A=this,w,x,z,v;if(!A.grid){return}var y=r.getRowData.call(d(A),s),u=A.p.propOrAttr;if(y){for(w in y){if(y.hasOwnProperty(w)){x=d("[name="+k(w)+"]",t);if(x.is("input:radio")||x.is("input:checkbox")){for(z=0;z<x.length;z++){v=d(x[z]);v[u]("checked",v.val()===String(y[w]))}}else{x.val(y[w])}}}}})},FormToGrid:function(t,u,v,s){return this.each(function(){var y=this;if(!y.grid){return}if(!v){v="set"}if(!s){s="first"}var w=d(u).serializeArray();var x={};d.each(w,function(z,A){x[A.name]=A.value});if(v==="add"){r.addRowData.call(d(y),t,x,s)}else{if(v==="set"){r.setRowData.call(d(y),t,x)}}})}})}(jQuery));(function(c){var a=c.jgrid,b=c.fn.jqGrid;a.extend({groupingSetup:function(){return this.each(function(){var f=this,g,e,o,d=f.p,l=d.colModel,n=d.groupingView,m,k,h=function(){return""};if(n!==null&&((typeof n==="object")||c.isFunction(n))){if(!n.groupField.length){d.grouping=false}else{if(n.visibiltyOnNextGrouping===undefined){n.visibiltyOnNextGrouping=[]}n.lastvalues=[];if(!n._locgr){n.groups=[]}n.counters=[];for(g=0;g<n.groupField.length;g++){if(!n.groupOrder[g]){n.groupOrder[g]="asc"}if(!n.groupText[g]){n.groupText[g]="{0}"}if(typeof n.groupColumnShow[g]!=="boolean"){n.groupColumnShow[g]=true}if(typeof n.groupSummary[g]!=="boolean"){n.groupSummary[g]=false}if(!n.groupSummaryPos[g]){n.groupSummaryPos[g]="footer"}m=l[d.iColByName[n.groupField[g]]];if(n.groupColumnShow[g]===true){n.visibiltyOnNextGrouping[g]=true;if(m!=null&&m.hidden===true){b.showCol.call(c(f),n.groupField[g])}}else{n.visibiltyOnNextGrouping[g]=c("#"+a.jqID(d.id+"_"+n.groupField[g])).is(":visible");if(m!=null&&m.hidden!==true){b.hideCol.call(c(f),n.groupField[g])}}}n.summary=[];if(n.hideFirstGroupCol){n.formatDisplayField[0]=function(i){return i}}for(e=0,o=l.length;e<o;e++){m=l[e];if(n.hideFirstGroupCol){if(!m.hidden&&n.groupField[0]===m.name){m.formatter=h}}if(m.summaryType){k={nm:m.name,st:m.summaryType,v:"",sr:m.summaryRound,srt:m.summaryRoundType||"round"};if(m.summaryDivider){k.sd=m.summaryDivider;k.vd=""}n.summary.push(k)}}}}else{d.grouping=false}})},groupingPrepare:function(d,e){this.each(function(){var l=this,w=l.p.groupingView,j=w.groups,r=w.counters,p=w.lastvalues,m=w.isInTheSameGroup,u=w.groupField.length,n,h,g,x,t,s,q,k=0,f=b.groupingCalculations.handler,o=function(){if(c.isFunction(this.st)){this.v=this.st.call(l,this.v,this.nm,d)}else{this.v=f.call(c(l),this.st,this.v,this.nm,this.sr,this.srt,d);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=f.call(c(l),this.st,this.vd,this.sd,this.sr,this.srt,d)}}};for(n=0;n<u;n++){x=w.groupField[n];s=w.displayField[n];t=d[x];q=s==null?null:d[s];if(q==null){q=t}if(t!==undefined){h={idx:n,dataIndex:x,value:t,displayValue:q,startRow:e,cnt:1,summary:[]};if(e===0){j.push(h);p[n]=t;r[n]={cnt:1,pos:j.length-1,summary:c.extend(true,[],w.summary)};c.each(r[n].summary,o);j[r[n].pos].summary=r[n].summary}else{g={cnt:1,pos:j.length,summary:c.extend(true,[],w.summary)};if(typeof t!=="object"&&(c.isArray(m)&&c.isFunction(m[n])?!m[n].call(l,p[n],t,n,w):p[n]!==t)){j.push(h);p[n]=t;k=1;r[n]=g;c.each(r[n].summary,o);j[r[n].pos].summary=r[n].summary}else{if(k===1){j.push(h);p[n]=t;r[n]=g;c.each(r[n].summary,o);j[r[n].pos].summary=r[n].summary}else{r[n].cnt+=1;j[r[n].pos].cnt=r[n].cnt;c.each(r[n].summary,o);j[r[n].pos].summary=r[n].summary}}}}}});return this},groupingToggle:function(d){this.each(function(){var w=this,m=w.p,q=a.jqID,i=m.groupingView,e=i.minusicon,x=i.plusicon,v=c("#"+q(d)),l=v.length?v[0].nextSibling:null,j=c("#"+q(d)+" span.tree-wrap-"+m.direction),s,k,f=false,n=m.frozenColumns?m.id+"_frozen":false,o=n?c("#"+q(d),"#"+q(n)):false,t=(o&&o.length)?o[0].nextSibling:null,y=d.split("_"),h=parseInt(y[y.length-2],10),g,u=function(p){var r=c.map(p.split(" "),function(z){if(z.substring(0,g.length+1)===g+"_"){return parseInt(z.substring(g.length+1),10)}});return r.length>0?r[0]:undefined};y.splice(y.length-2,2);g=y.join("_");if(j.hasClass(e)){while(l){if(c(l).hasClass("jqfoot")){s=parseInt(c(l).data("jqfootlevel"),10);if((!i.showSummaryOnHide&&s===h)||s>h){c(l).hide();if(n){c(t).hide()}}if(s<h){break}}else{s=u(l.className);if(s!==undefined&&s<=h){break}c(l).hide();if(n){c(t).hide()}}l=l.nextSibling;if(n){t=t.nextSibling}}j.removeClass(e).addClass(x);f=true}else{k=undefined;while(l){if(c(l).hasClass("jqfoot")){s=parseInt(c(l).data("jqfootlevel"),10);if(s===h||(i.showSummaryOnHide&&s===h+1)){c(l).show();if(n){c(t).show()}}if(s<=h){break}}s=u(l.className);if(k===undefined){k=s===undefined}if(s!==undefined){if(s<=h){break}if(s===h+1){c(l).show().find(">td>span.tree-wrap-"+m.direction).removeClass(e).addClass(x);if(n){c(t).show().find(">td>span.tree-wrap-"+m.direction).removeClass(e).addClass(x)}}}else{if(k){c(l).show();if(n){c(t).show()}}}l=l.nextSibling;if(n){t=t.nextSibling}}j.removeClass(x).addClass(e)}c(w).triggerHandler("jqGridGroupingClickGroup",[d,f]);if(c.isFunction(m.onClickGroup)){m.onClickGroup.call(w,d,f)}});return false},groupingRender:function(w,j,g,l){var s="",u=this[0],q=u.p,o=0,k=q.groupingView,r=c.makeArray(k.groupSummary),m,i=[],v="",f,e,n=(k.groupCollapse?k.plusicon:k.minusicon)+" tree-wrap-"+q.direction,t=k.groupField.length;function h(z,A,p){var x=false,y,B;if(A===0){x=p[z]}else{B=p[z].idx;if(B===0){x=p[z]}else{for(y=z;y>=0;y--){if(p[y].idx===B-A){x=p[y];break}}}}return x}function d(y,C,F,B){var A=h(y,C,F),D=q.colModel,E=A.cnt,H="",x,p,G,z=function(){var K,J=this;if(J.nm===D[x].name){G=D[x].summaryTpl||"{0}";if(typeof J.st==="string"&&J.st.toLowerCase()==="avg"){if(J.sd&&J.vd){J.v=(J.v/J.vd)}else{if(J.v&&E>0){J.v=(J.v/E)}}}try{J.groupCount=A.cnt;J.groupIndex=A.dataIndex;J.groupValue=A.value;K=u.formatter("",J.v,x,J)}catch(I){K=J.v}p="<td "+u.formatCol(x,1,"")+">"+a.format(G,K)+"</td>";return false}};for(x=B;x<j;x++){p="<td "+u.formatCol(x,1,"")+">&#160;</td>";c.each(A.summary,z);H+=p}return H}c.each(q.colModel,function(p,y){var x;for(x=0;x<t;x++){if(k.groupField[x]===y.name){i[x]=p;break}}});r.reverse();c.each(k.groups,function(E,z){if(k._locgr){if(!(z.startRow+z.cnt>(g-1)*l&&z.startRow<g*l)){return true}}o++;e=q.id+"ghead_"+z.idx;f=e+"_"+E;v="<span style='cursor:pointer;' class='"+k.commonIconClass+" "+n+"' onclick=\"jQuery('#"+a.jqID(q.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+f+"');return false;\"></span>";try{if(c.isArray(k.formatDisplayField)&&c.isFunction(k.formatDisplayField[z.idx])){z.displayValue=k.formatDisplayField[z.idx].call(u,z.displayValue,z.value,q.colModel[i[z.idx]],z.idx,k);m=z.displayValue}else{m=u.formatter(f,z.displayValue,i[z.idx],z.value)}}catch(K){m=z.displayValue}s+='<tr id="'+f+'"'+(k.groupCollapse&&z.idx>0?' style="display:none;" ':" ")+'role="row" class="ui-widget-content jqgroup ui-row-'+q.direction+" "+e+'"><td style="padding-left:'+(z.idx*12)+'px;"';var p=c.isFunction(k.groupText[z.idx])?k.groupText[z.idx].call(u,m,z.cnt,z.summary):a.template(k.groupText[z.idx],m,z.cnt,z.summary),C,A=1,F,I,x,J,D=0,y,H,B,G=t-1===z.idx;if(typeof p!=="string"&&typeof p!=="number"){p=m}if(k.groupSummaryPos[z.idx]==="header"){A=1;if(q.colModel[0].name==="cb"||q.colModel[1].name==="cb"){A++}if(q.colModel[0].name==="subgrid"||q.colModel[1].name==="subgrid"){A++}s+=(A>1?" colspan='"+A+"'":"")+">"+v+p+"</td>";s+=d(E,0,k.groups,k.groupColumnShow[z.idx]===false?A-1:A)}else{s+=' colspan="'+(k.groupColumnShow[z.idx]===false?j-1:j)+'">'+v+p+"</td>"}s+="</tr>";if(G){H=k.groups[E+1];y=z.startRow;B=H!==undefined?H.startRow:k.groups[E].startRow+k.groups[E].cnt;if(k._locgr){D=(g-1)*l;if(D>z.startRow){y=D}}for(x=y;x<B;x++){if(!w[x-D]){break}s+=w[x-D].join("")}if(k.groupSummaryPos[z.idx]!=="header"){if(H!==undefined){for(F=0;F<k.groupField.length;F++){if(H.dataIndex===k.groupField[F]){break}}o=k.groupField.length-F}for(J=0;J<o;J++){if(!r[J]){continue}I="";if(k.groupCollapse&&!k.showSummaryOnHide){I=' style="display:none;"'}s+="<tr"+I+' data-jqfootlevel="'+(z.idx-J)+'" role="row" class="ui-widget-content jqfoot ui-row-'+q.direction+'">';s+=d(E,J,k.groups,0);s+="</tr>"}o=F}}});return s},groupingGroupBy:function(e,d){return this.each(function(){var k=this,j=k.p,g=j.groupingView,h,f;if(typeof e==="string"){e=[e]}j.grouping=true;g._locgr=false;if(g.visibiltyOnNextGrouping===undefined){g.visibiltyOnNextGrouping=[]}for(h=0;h<g.groupField.length;h++){f=j.colModel[j.iColByName[g.groupField[h]]];if(!g.groupColumnShow[h]&&g.visibiltyOnNextGrouping[h]&&f!=null&&f.hidden===true){b.showCol.call(c(k),g.groupField[h])}}for(h=0;h<e.length;h++){g.visibiltyOnNextGrouping[h]=c(j.idSel+"_"+a.jqID(e[h])).is(":visible")}j.groupingView=c.extend(j.groupingView,d||{});g.groupField=e;c(k).trigger("reloadGrid")})},groupingRemove:function(d){return this.each(function(){var j=this,h=j.p,f=j.tBodies[0],e=h.groupingView,g;if(d===undefined){d=true}h.grouping=false;if(d===true){for(g=0;g<e.groupField.length;g++){if(!e.groupColumnShow[g]&&e.visibiltyOnNextGrouping[g]){b.showCol.call(c(j),e.groupField)}}c("tr.jqgroup, tr.jqfoot",f).remove();c("tr.jqgrow:hidden",f).show()}else{c(j).trigger("reloadGrid")}})},groupingCalculations:{handler:function(h,k,i,l,j,d){var e={sum:function(){return parseFloat(k||0)+parseFloat((d[i]||0))},min:function(){if(k===""){return parseFloat(d[i]||0)}return Math.min(parseFloat(k),parseFloat(d[i]||0))},max:function(){if(k===""){return parseFloat(d[i]||0)}return Math.max(parseFloat(k),parseFloat(d[i]||0))},count:function(){if(k===""){k=0}if(d.hasOwnProperty(i)){return k+1}return 0},avg:function(){return e.sum()}},g,f;if(!e[h]){throw ("jqGrid Grouping No such method: "+h)}g=e[h]();if(l!=null){if(j==="fixed"){g=g.toFixed(l)}else{f=Math.pow(10,l);g=Math.round(g*f)/f}}return g}}})}(jQuery));(function(a){a.jgrid.extend({jqGridImport:function(b){b=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},b||{});return this.each(function(){var f=this,c=function(h,m){var g=a(m.xmlGrid.config,h)[0],l=a(m.xmlGrid.data,h)[0],n,j,i,k;if(xmlJsonClass.xml2json&&a.jgrid.parse){n=xmlJsonClass.xml2json(g," ");n=a.jgrid.parse(n);for(i in n){if(n.hasOwnProperty(i)){j=n[i]}}if(j!==undefined){if(l){k=n.grid.datatype;n.grid.datatype="xmlstring";n.grid.datastr=h;a(f).jqGrid(j).jqGrid("setGridParam",{datatype:k})}else{a(f).jqGrid(j)}}}else{alert("xml2json or parse are not present")}},e=function(i,l){if(i&&typeof i==="string"){var g=false,h,m,j,k;if(a.jgrid.useJSON){a.jgrid.useJSON=false;g=true}h=a.jgrid.parse(i);if(g){a.jgrid.useJSON=true}m=h[l.jsonGrid.config];j=h[l.jsonGrid.data];if(j){k=m.datatype;m.datatype="jsonstring";m.datastr=j;a(f).jqGrid(m).jqGrid("setGridParam",{datatype:k})}else{a(f).jqGrid(m)}}},d;switch(b.imptype){case"xml":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"xml",complete:function(g){if((g.status<300||g.status===304)&&(g.status!==0||g.readyState!==4)){c(g.responseXML,b);a(f).triggerHandler("jqGridImportComplete",[g,b]);if(a.isFunction(b.importComplete)){b.importComplete(g)}}}},b.ajaxOptions));break;case"xmlstring":if(b.impstring&&typeof b.impstring==="string"){d=a.parseXML(b.impstring);if(d){c(d,b);a(f).triggerHandler("jqGridImportComplete",[d,b]);if(a.isFunction(b.importComplete)){b.importComplete(d)}b.impstring=null}}break;case"json":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"json",complete:function(g){try{if((g.status<300||g.status===304)&&(g.status!==0||g.readyState!==4)){e(g.responseText,b);a(f).triggerHandler("jqGridImportComplete",[g,b]);if(a.isFunction(b.importComplete)){b.importComplete(g)}}}catch(h){}}},b.ajaxOptions));break;case"jsonstring":if(b.impstring&&typeof b.impstring==="string"){e(b.impstring,b);a(f).triggerHandler("jqGridImportComplete",[b.impstring,b]);if(a.isFunction(b.importComplete)){b.importComplete(b.impstring)}b.impstring=null}break}})},jqGridExport:function(c){c=a.extend({exptype:"xmlstring",root:"grid",ident:"\t"},c||{});var b=null;this.each(function(){if(!this.grid){return}var d,e=a.extend(true,{},a(this).jqGrid("getGridParam"));if(e.rownumbers){e.colNames.splice(0,1);e.colModel.splice(0,1)}if(e.multiselect){e.colNames.splice(0,1);e.colModel.splice(0,1)}if(e.subGrid){e.colNames.splice(0,1);e.colModel.splice(0,1)}e.knv=null;if(e.treeGrid){for(d in e.treeReader){if(e.treeReader.hasOwnProperty(d)){e.colNames.splice(e.colNames.length-1);e.colModel.splice(e.colModel.length-1)}}}switch(c.exptype){case"xmlstring":b="<"+c.root+">"+xmlJsonClass.json2xml(e,c.ident)+"</"+c.root+">";break;case"jsonstring":b="{"+xmlJsonClass.toJson(e,c.root,c.ident,false)+"}";if(e.postData.filters!==undefined){b=b.replace(/filters":"/,'filters":');b=b.replace(/\}\]\}"/,"}]}")}break}});return b},excelExport:function(b){b=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},b||{});return this.each(function(){var c,d,e;if(!this.grid){return}if(b.exptype==="remote"){d=a.extend({},this.p.postData);d[b.oper]=b.tag;e=jQuery.param(d);if(b.url.indexOf("?")!==-1){c=b.url+"&"+e}else{c=b.url+"?"+e}window.location=c}})}})}(jQuery));(function(g){var c=g.jgrid,f=c.fullBoolFeedback,h=c.hasOneFromClasses,e=c.enumEditableCells,d=c.info_dialog,a=function(j){var i=g.makeArray(arguments).slice(1);i.unshift("");i.unshift("Inline");i.unshift(j);return c.feedback.apply(this,i)},b=function(i){return c.getRes(c.guiStyles[this.p.guiStyle],"states."+i)};c.inlineEdit=c.inlineEdit||{};c.extend({editRow:function(j,t,s,l,i,m,k,n,p,r){var o={},q=g.makeArray(arguments).slice(1);if(g.type(q[0])==="object"){o=q[0]}else{if(t!==undefined){o.keys=t}if(g.isFunction(s)){o.oneditfunc=s}if(g.isFunction(l)){o.successfunc=l}if(i!==undefined){o.url=i}if(m!=null){o.extraparam=m}if(g.isFunction(k)){o.aftersavefunc=k}if(g.isFunction(n)){o.errorfunc=n}if(g.isFunction(p)){o.afterrestorefunc=p}if(g.isFunction(r)){o.beforeEditRow=r}}return this.each(function(){var z=this,F=g(z),u=z.p,x=0,I=null,H={},E=u.colModel,A=u.prmNames;if(!z.grid){return}var v=g.extend(true,{keys:false,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,beforeEditRow:null,mtype:"POST",focusField:true},c.inlineEdit,u.inlineEditing||{},o),w=F.jqGrid("getInd",j,true),B=v.focusField;if(w===false){return}if(v.extraparam[A.oper]!==A.addoper){if(!a.call(z,v,"beforeEditRow",v,j)){return}}if((g(w).attr("editable")||"0")==="0"&&!g(w).hasClass("not-editable-row")){var D=c.detectRowEditing.call(z,j);if(D!=null&&D.mode==="cellEditing"){var y=D.savedRow,C=z.rows[y.id],G=b.call(z,"select");F.jqGrid("restoreCell",y.id,y.ic);g(C.cells[y.ic]).removeClass("edit-cell "+G);g(C).addClass(G).attr({"aria-selected":"true",tabindex:"0"})}e.call(z,w,g(w).hasClass("jqgrid-new-row")?"add":"edit",function(T){var P=T.cm,O=g(T.dataElement),M=T.dataWidth,N,K,J,U=P.name,S=P.edittype,R=T.iCol,L=P.editoptions||{};try{N=g.unformat.call(this,T.td,{rowId:j,colModel:P},R)}catch(Q){N=S==="textarea"?O.text():O.html()}H[U]=N;O.html("");K=g.extend({},L,{id:j+"_"+U,name:U,rowId:j,mode:T.mode});if(N==="&nbsp;"||N==="&#160;"||(N.length===1&&N.charCodeAt(0)===160)){N=""}J=c.createEl.call(z,S,K,N,true,g.extend({},c.ajaxOptions,u.ajaxSelectOptions||{}));g(J).addClass("editable");O.append(J);if(M){g(J).width(T.dataWidth)}c.bindEv.call(z,J,K);if(S==="select"&&L.multiple===true&&L.dataUrl===undefined&&c.msie){g(J).width(g(J).width())}if(I===null){I=R}x++});if(x>0){H.id=j;u.savedRow.push(H);g(w).attr("editable","1");if(B){if(typeof B==="number"&&parseInt(B,10)<=E.length){I=B}else{if(typeof B==="string"){I=u.iColByName[B]}}setTimeout(function(){var J=g(w.cells[I]).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)");if(J.length>0){J.focus()}},0)}if(v.keys===true){g(w).bind("keydown",function(K){if(K.keyCode===27){F.jqGrid("restoreRow",j,v.afterrestorefunc);return false}if(K.keyCode===13){var J=K.target;if(J.tagName==="TEXTAREA"){return true}F.jqGrid("saveRow",j,v);return false}})}f.call(z,v.oneditfunc,"jqGridInlineEditRow",j,v)}}})},saveRow:function(w,W,r,H,l,J,s,G){var M=g.makeArray(arguments).slice(1),P={},j=this[0],x=g(j),O=j!=null?j.p:null,I;if(!j.grid||O==null){return}if(g.type(M[0])==="object"){P=M[0]}else{if(g.isFunction(W)){P.successfunc=W}if(r!==undefined){P.url=r}if(H!==undefined){P.extraparam=H}if(g.isFunction(l)){P.aftersavefunc=l}if(g.isFunction(J)){P.errorfunc=J}if(g.isFunction(s)){P.afterrestorefunc=s}if(g.isFunction(G)){P.beforeSaveRow=G}}var C=function(i){return x.jqGrid("getGridRes",i)};P=g.extend(true,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:C("defaults.savetext")||"Saving..."},c.inlineEdit,O.inlineEditing||{},P);var N={},T={},B={},K,Q,E,y,A,S=x.jqGrid("getInd",w,true),L=g(S),D=O.prmNames,z=C("errors.errcap"),t=C("edit.bClose"),u;if(S===false){return}I=P.extraparam[D.oper]===D.addoper?"add":"edit";if(!a.call(j,P,"beforeSaveRow",P,w,I)){return}K=L.attr("editable");P.url=P.url||O.editurl;u=P.url!=="clientArray";if(K==="1"){e.call(j,S,L.hasClass("jqgrid-new-row")?"add":"edit",function(o){var i=o.cm,k,p=i.formatter,X=i.editoptions||{},Y=i.formatoptions||{};k=c.getEditedValue.call(j,g(o.dataElement),i,!p);A=c.checkValues.call(j,k,o.iCol);if(A[0]===false){return false}if(u&&O.autoencode){k=c.htmlEncode(k)}if(p==="date"&&Y.sendFormatted!==true){k=g.unformat.date.call(j,k,i)}if(u&&X.NullIfEmpty===true){if(k===""){k="null"}}N[i.name]=k});if(A[0]===false){try{var V=x.jqGrid("getGridRowById",w),v=c.findPos(V);d.call(j,z,A[1],t,{left:v[0],top:v[1]+g(V).outerHeight()})}catch(U){alert(A[1])}return}var q,m=w;D=O.prmNames;if(O.keyName===false){q=D.id}else{q=O.keyName}if(N){N[D.oper]=D.editoper;if(N[q]===undefined||N[q]===""){N[q]=w}else{if(S.id!==O.idPrefix+N[q]){var n=c.stripPref(O.idPrefix,w);if(O._index[n]!==undefined){O._index[N[q]]=O._index[n];delete O._index[n]}w=O.idPrefix+N[q];L.attr("id",w);if(O.selrow===m){O.selrow=w}if(g.isArray(O.selarrrow)){var R=g.inArray(m,O.selarrrow);if(R>=0){O.selarrrow[R]=w}}if(O.multiselect){var F="jqg_"+O.id+"_"+w;L.find("input.cbox").attr("id",F).attr("name",F)}}}N=g.extend({},N,O.inlineData||{},P.extraparam)}if(!u){N=g.extend({},N,T);y=x.jqGrid("setRowData",w,N);L.attr("editable","0");for(Q=0;Q<O.savedRow.length;Q++){if(String(O.savedRow[Q].id)===String(m)){E=Q;break}}if(E>=0){O.savedRow.splice(E,1)}f.call(j,P.aftersavefunc,"jqGridInlineAfterSaveRow",w,y,N,P);L.removeClass("jqgrid-new-row").unbind("keydown")}else{x.jqGrid("progressBar",{method:"show",loadtype:P.saveui,htmlcontent:P.savetext});B=g.extend({},N,B);B[q]=c.stripPref(O.idPrefix,B[q]);g.ajax(g.extend({url:P.url,data:c.serializeFeedback.call(j,g.isFunction(P.serializeSaveData)?P.serializeSaveData:O.serializeRowData,"jqGridInlineSerializeSaveData",B),type:P.mtype,complete:function(o,X){x.jqGrid("progressBar",{method:"hide",loadtype:P.saveui,htmlcontent:P.savetext});if((o.status<300||o.status===304)&&(o.status!==0||o.readyState!==4)){var k,p,i;p=x.triggerHandler("jqGridInlineSuccessSaveRow",[o,w,P]);if(!g.isArray(p)){p=[true,N]}if(p[0]&&g.isFunction(P.successfunc)){p=P.successfunc.call(j,o)}if(g.isArray(p)){k=p[0];N=p[1]||N}else{k=p}if(k===true){if(O.autoencode){g.each(N,function(Z,Y){N[Z]=c.htmlDecode(Y)})}N=g.extend({},N,T);x.jqGrid("setRowData",w,N);L.attr("editable","0");for(i=0;i<O.savedRow.length;i++){if(String(O.savedRow[i].id)===String(w)){E=i;break}}if(E>=0){O.savedRow.splice(E,1)}f.call(j,P.aftersavefunc,"jqGridInlineAfterSaveRow",w,o,N,P);L.removeClass("jqgrid-new-row").unbind("keydown")}else{f.call(j,P.errorfunc,"jqGridInlineErrorSaveRow",w,o,X,null,P);if(P.restoreAfterError===true){x.jqGrid("restoreRow",w,P.afterrestorefunc)}}}},error:function(k,o,p){g("#lui_"+c.jqID(O.id)).hide();x.triggerHandler("jqGridInlineErrorSaveRow",[w,k,o,p,P]);if(g.isFunction(P.errorfunc)){P.errorfunc.call(j,w,k,o,p)}else{var i=k.responseText||k.statusText;try{d.call(j,z,'<div class="'+b.call(j,"error")+'">'+i+"</div>",t,{buttonalign:"right"})}catch(X){alert(i)}}if(P.restoreAfterError===true){x.jqGrid("restoreRow",w,P.afterrestorefunc)}}},c.ajaxOptions,O.ajaxRowOptions,P.ajaxSaveOptions||{}))}}return},restoreRow:function(l,i){var j=g.makeArray(arguments).slice(1),k={};if(g.type(j[0])==="object"){k=j[0]}else{if(g.isFunction(i)){k.afterrestorefunc=i}}return this.each(function(){var t=this,w=g(t),m=t.p,u=-1,r={},s;if(!t.grid){return}var n=g.extend(true,{},c.inlineEdit,m.inlineEditing||{},k);var q=w.jqGrid("getInd",l,true);if(q===false){return}if(!a.call(t,n,"beforeCancelRow",n,l)){return}for(s=0;s<m.savedRow.length;s++){if(String(m.savedRow[s].id)===String(l)){u=s;break}}if(u>=0){if(g.isFunction(g.fn.datepicker)){try{g("input.hasDatepicker","#"+c.jqID(q.id)).datepicker("hide")}catch(v){}}g.each(m.colModel,function(p){var o=this.name;if(m.savedRow[u].hasOwnProperty(o)){r[o]=m.savedRow[u][o];if(this.formatter&&this.formatter==="date"&&(this.formatoptions==null||this.formatoptions.sendFormatted!==true)){r[o]=g.unformat.date.call(t,r[o],this)}}});w.jqGrid("setRowData",l,r);g(q).attr("editable","0").unbind("keydown");m.savedRow.splice(u,1);if(g("#"+c.jqID(l),t).hasClass("jqgrid-new-row")){setTimeout(function(){w.jqGrid("delRowData",l);w.jqGrid("showAddEditButtons",false)},0)}}f.call(t,n.afterrestorefunc,"jqGridInlineAfterRestoreRow",l)})},addRow:function(i){return this.each(function(){if(!this.grid){return}var q=this,m=g(q),k=q.p,l=g.extend(true,{rowID:null,initdata:{},position:"first",useDefValues:true,useFormatter:false,beforeAddRow:null,addRowParams:{extraparam:{}}},c.inlineEdit,k.inlineEditing||{},i||{});if(!a.call(q,l,"beforeAddRow",l.addRowParams)){return}l.rowID=g.isFunction(l.rowID)?l.rowID.call(q,l):((l.rowID!=null)?l.rowID:c.randId());if(l.useDefValues===true){g(k.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var o=this.editoptions.defaultValue;l.initdata[this.name]=g.isFunction(o)?o.call(q):o}})}m.jqGrid("addRowData",l.rowID,l.initdata,l.position);l.rowID=k.idPrefix+l.rowID;g("#"+c.jqID(l.rowID),q).addClass("jqgrid-new-row");if(l.useFormatter){g("#"+c.jqID(l.rowID)+" .ui-inline-edit",q).click()}else{var j=k.prmNames,n=j.oper;l.addRowParams.extraparam[n]=j.addoper;m.jqGrid("editRow",l.rowID,l.addRowParams);m.jqGrid("setSelection",l.rowID)}})},inlineNav:function(j,i){if(typeof j==="object"){i=j;j=undefined}return this.each(function(){var t=this,y=g(t),l=t.p;if(!this.grid||l==null){return}var m,k=j===l.toppager?l.idSel+"_top":l.idSel,v=j===l.toppager?l.id+"_top":l.id,u=b.call(t,"disabled"),n=g.extend(true,{edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",save:true,saveicon:"ui-icon-disk",cancel:true,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:false,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:true},y.jqGrid("getGridRes","nav"),c.nav||{},l.navOptions||{},i||{}),w=function(){t.modalAlert()};if(j===undefined){if(l.pager){y.jqGrid("inlineNav",l.pager,n);if(l.toppager){j=l.toppager;k=l.idSel+"_top";v=l.id+"_top"}else{return}}else{if(l.toppager){j=l.toppager;k=l.idSel+"_top";v=l.id+"_top"}}}if(j===undefined){return}m=g(j);if(m.length<=0){return}if(m.find(".navtable").length<=0){y.jqGrid("navGrid",j,{add:false,edit:false,del:false,search:false,refresh:false,view:false})}l._inlinenav=true;if(n.addParams.useFormatter===true){var x=l.colModel,s,q,r;for(s=0;s<x.length;s++){if(x[s].formatter&&x[s].formatter==="actions"){if(x[s].formatoptions){q={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null};r=g.extend(q,x[s].formatoptions);n.addParams.addRowParams={keys:r.keys,oneditfunc:r.onEdit,successfunc:r.onSuccess,url:r.url,extraparam:r.extraparam,aftersavefunc:r.afterSave,errorfunc:r.onError,afterrestorefunc:r.afterRestore}}break}}}if(n.add){y.jqGrid("navButtonAdd",j,{caption:n.addtext,title:n.addtitle,commonIconClass:n.commonIconClass,buttonicon:n.addicon,iconsOverText:n.iconsOverText,id:v+"_iladd",onClickButton:function(){if(!h(this,u)){y.jqGrid("addRow",n.addParams)}}})}if(n.edit){y.jqGrid("navButtonAdd",j,{caption:n.edittext,title:n.edittitle,commonIconClass:n.commonIconClass,buttonicon:n.editicon,iconsOverText:n.iconsOverText,id:v+"_iledit",onClickButton:function(){if(!h(this,u)){var o=l.selrow;if(o){y.jqGrid("editRow",o,n.editParams)}else{w()}}}})}if(n.save){y.jqGrid("navButtonAdd",j,{caption:n.savetext||"",title:n.savetitle||"Save row",commonIconClass:n.commonIconClass,buttonicon:n.saveicon,iconsOverText:n.iconsOverText,id:v+"_ilsave",onClickButton:function(){if(!h(this,u)){var p=l.savedRow[0].id;if(p){var o=l.prmNames,A=o.oper,z=n.editParams;if(g("#"+c.jqID(p),t).hasClass("jqgrid-new-row")){n.addParams.addRowParams.extraparam[A]=o.addoper;z=n.addParams.addRowParams}else{if(!n.editParams.extraparam){n.editParams.extraparam={}}n.editParams.extraparam[A]=o.editoper}y.jqGrid("saveRow",p,z)}else{w()}}}});g(k+"_ilsave").addClass(u)}if(n.cancel){y.jqGrid("navButtonAdd",j,{caption:n.canceltext||"",title:n.canceltitle||"Cancel row editing",commonIconClass:n.commonIconClass,buttonicon:n.cancelicon,iconsOverText:n.iconsOverText,id:v+"_ilcancel",onClickButton:function(){if(!h(this,u)){var p=l.savedRow[0].id,o=n.editParams;if(p){if(g("#"+c.jqID(p),t).hasClass("jqgrid-new-row")){o=n.addParams.addRowParams}y.jqGrid("restoreRow",p,o)}else{w()}}}});g(k+"_ilcancel").addClass(u)}if(n.restoreAfterSelect===true){y.bind("jqGridSelectRow",function(z,p){if(l.savedRow.length>0&&l._inlinenav===true){var o=l.savedRow[0].id;if(p!==o&&typeof o!=="number"){y.jqGrid("restoreRow",o,n.editParams)}}})}y.bind("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){y.jqGrid("showAddEditButtons",false)});y.bind("jqGridInlineEditRow",function(p,o){y.jqGrid("showAddEditButtons",true,o)})})},showAddEditButtons:function(i){return this.each(function(){var o=this;if(!o.grid){return}var k=o.p,j=k.idSel,n=b.call(o,"disabled"),m=j+"_ilsave,"+j+"_ilcancel"+(k.toppager?","+j+"_top_ilsave,"+j+"_top_ilcancel":""),l=j+"_iladd,"+j+"_iledit"+(k.toppager?","+j+"_top_iladd,"+j+"_top_iledit":"");g(i?l:m).addClass(n);g(i?m:l).removeClass(n)})}})}(jQuery));(function(e){var c=e.jgrid,b=e.ui!=null?e.ui.multiselect:null,a=c.jqID;if(c.msie&&c.msiever()===8){e.expr[":"].hidden=function(f){return f.offsetWidth===0||f.offsetHeight===0||f.style.display==="none"}}c._multiselect=false;if(e.ui){if(b){if(b.prototype._setSelected){var d=b.prototype._setSelected;b.prototype._setSelected=function(j,i){var f=this,h=d.call(f,j,i);if(i&&f.selectedList){var g=f.element;f.selectedList.find("li").each(function(){if(e(f).data("optionLink")){e(f).data("optionLink").remove().appendTo(g)}})}return h}}if(b.prototype.destroy){b.prototype.destroy=function(){var f=this;f.element.show();f.container.remove();if(e.Widget===undefined){e.widget.prototype.destroy.apply(f,arguments)}else{e.Widget.prototype.destroy.apply(f,arguments)}}}c._multiselect=true}}c.extend({sortableColumns:function(f){return this.each(function(){var k=this,m=k.p,l=a(m.id);function n(){m.disableClick=true}var j={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+l+"_cb,#jqgh_"+l+"_rn,#jqgh_"+l+"_subgrid),:hidden)",placeholder:{element:function(p){var o=e(document.createElement(p[0].nodeName)).addClass(p[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return o},update:function(p,q){q.height(p.currentItem.innerHeight()-parseInt(p.currentItem.css("paddingTop")||0,10)-parseInt(p.currentItem.css("paddingBottom")||0,10));q.width(p.currentItem.innerWidth()-parseInt(p.currentItem.css("paddingLeft")||0,10)-parseInt(p.currentItem.css("paddingRight")||0,10))}},update:function(q,r){var p=e(">th",e(r.item).parent()),s=m.id+"_",o=[];p.each(function(){var u=e(">div",this).get(0).id.replace(/^jqgh_/,"").replace(s,""),t=m.iColByName[u];if(t!==undefined){o.push(t)}});e(k).jqGrid("remapColumns",o,true,true);if(e.isFunction(m.sortable.update)){m.sortable.update(o)}setTimeout(function(){m.disableClick=false},50)}};if(m.sortable.options){e.extend(j,m.sortable.options)}else{if(e.isFunction(m.sortable)){m.sortable={update:m.sortable}}}if(j.start){var i=j.start;j.start=function(p,o){n();i.call(this,p,o)}}else{j.start=n}if(m.sortable.exclude){j.items+=":not("+m.sortable.exclude+")"}var h=f.sortable(j),g=h.data("sortable")||h.data("uiSortable")||h.data("ui-sortable");if(g!=null){g.floating=true}})},columnChooser:function(r){var C=this,s=C[0],t=s.p,z,u,H={},q=[],k,B,n,y,v,o=t.colModel,I=o.length,D=t.colNames,h=function(i){return(b&&b.prototype&&i.data(b.prototype.widgetFullName||b.prototype.widgetName))||i.data("ui-multiselect")||i.data("multiselect")};if(e("#colchooser_"+a(t.id)).length){return}z=e('<div id="colchooser_'+t.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');u=e("select",z);function f(K,J,p){var l,j;if(J>=0){l=K.slice();j=l.splice(J,Math.max(K.length-J,J));if(J>K.length){J=K.length}l[J]=p;return l.concat(j)}return K}function G(i,j){if(!i){return}if(typeof i==="string"){if(e.fn[i]){e.fn[i].apply(j,e.makeArray(arguments).slice(2))}}else{if(e.isFunction(i)){i.apply(j,e.makeArray(arguments).slice(2))}}}r=e.extend({width:400,height:240,classname:null,done:function(i){if(i&&t.groupHeader==null){C.jqGrid("remapColumns",i,true)}},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(i){var j={};j[i.bSubmit]=function(){i.apply_perm();i.cleanup(false)};j[i.bCancel]=function(){i.cleanup(true)};return e.extend(true,{buttons:j,close:function(){i.cleanup(true)},modal:i.modal||false,resizable:i.resizable||true,width:i.width+70,resize:function(){var p=h(u),l=p.container.closest(".ui-dialog-content");if(l.length>0&&typeof l[0].style==="object"){l[0].style.width=""}else{l.css("width","")}p.selectedList.height(Math.max(p.selectedContainer.height()-p.selectedActions.outerHeight()-1,1));p.availableList.height(Math.max(p.availableContainer.height()-p.availableActions.outerHeight()-1,1))}},i.dialog_opts||{})},apply_perm:function(){var i=[];e("option",u).each(function(){if(e(this).is(":selected")){C.jqGrid("showCol",o[this.value].name)}else{C.jqGrid("hideCol",o[this.value].name)}});e("option",u).filter(":selected").each(function(){i.push(parseInt(this.value,10))});e.each(i,function(){delete H[o[parseInt(this,10)].name]});e.each(H,function(){var j=parseInt(this,10);i=f(i,j,j)});if(r.done){r.done.call(C,i)}C.jqGrid("setGridWidth",!t.autowidth&&(t.widthOrg===undefined||t.widthOrg==="auto"||t.widthOrg==="100%")?t.tblwidth:t.width,t.shrinkToFit)},cleanup:function(i){G(r.dlog,z,"destroy");G(r.msel,u,"destroy");z.remove();if(i&&r.done){r.done.call(C)}},msel_opts:{}},C.jqGrid("getGridRes","col"),c.col,r||{});if(e.ui){if(b&&b.defaults){if(!c._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}r.msel_opts=e.extend(b.defaults,r.msel_opts)}}if(r.caption){z.attr("title",r.caption)}if(r.classname){z.addClass(r.classname);u.addClass(r.classname)}if(r.width){e(">div",z).css({width:r.width,margin:"0 auto"});u.css("width",r.width)}if(r.height){e(">div",z).css("height",r.height);u.css("height",r.height-10)}u.empty();var E=t.groupHeader,m={},A,x,w,g,F;if(E!=null&&E.groupHeaders!=null){for(A=0,w=E.groupHeaders.length;A<w;A++){F=E.groupHeaders[A];for(x=0;x<F.numberOfColumns;x++){g=t.iColByName[F.startColumnName]+x;m[g]=e.isFunction(r.buildItemText)?r.buildItemText.call(C[0],{iCol:g,cm:o[g],cmName:o[g].name,colName:D[g],groupTitleText:F.titleText}):e.jgrid.stripHtml(F.titleText)+": "+e.jgrid.stripHtml(D[g]===""?o[g].name:D[g])}}}for(g=0;g<I;g++){if(m[g]===undefined){m[g]=e.isFunction(r.buildItemText)?r.buildItemText.call(C[0],{iCol:g,cm:o[g],cmName:o[g].name,colName:D[g],groupTitleText:null}):e.jgrid.stripHtml(D[g])}}e.each(o,function(j){H[this.name]=j;if(this.hidedlg){if(!this.hidden){q.push(j)}return}u.append("<option value='"+j+"' "+(this.hidden?"":"selected='selected'")+">"+m[j]+"</option>")});k=e.isFunction(r.dlog_opts)?r.dlog_opts.call(C,r):r.dlog_opts;G(r.dlog,z,k);B=e.isFunction(r.msel_opts)?r.msel_opts.call(C,r):r.msel_opts;G(r.msel,u,B);n=e("#colchooser_"+a(t.id));n.css({margin:"auto"});n.find(">div").css({width:"100%",height:"100%",margin:"auto"});y=h(u);if(y){y.container.css({width:"100%",height:"100%",margin:"auto"});y.selectedContainer.css({width:y.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});y.availableContainer.css({width:(100-y.options.dividerLocation*100)+"%",height:"100%",margin:"auto",boxSizing:"border-box"});y.selectedList.css("height","auto");y.availableList.css("height","auto");v=Math.max(y.selectedList.height(),y.availableList.height());v=Math.min(v,e(window).height());y.selectedList.css("height",v);y.availableList.css("height",v)}},sortableRows:function(f){return this.each(function(){var i=this,g=i.grid,h=i.p;if(!g){return}if(h.treeGrid){return}if(e.fn.sortable){f=e.extend({cursor:"move",axis:"y",items:">.jqgrow"},f||{});if(f.start&&e.isFunction(f.start)){f._start_=f.start;delete f.start}else{f._start_=false}if(f.update&&e.isFunction(f.update)){f._update_=f.update;delete f.update}else{f._update_=false}f.start=function(k,l){e(l.item).css("border-width","0");e("td",l.item).each(function(n){this.style.width=g.cols[n].style.width});if(h.subGrid){var j=e(l.item).attr("id");try{e(i).jqGrid("collapseSubGridRow",j)}catch(m){}}if(f._start_){f._start_.apply(this,[k,l])}};f.update=function(j,k){e(k.item).css("border-width","");if(h.rownumbers===true){e("td.jqgrid-rownum",i.rows).each(function(l){e(this).html(l+1+(parseInt(h.page,10)-1)*parseInt(h.rowNum,10))})}if(f._update_){f._update_.apply(this,[j,k])}};e("tbody:first",i).sortable(f);if(e.isFunction(e.fn.disableSelection)){e("tbody:first>.jqgrow",i).disableSelection()}}})},gridDnD:function(f){return this.each(function(){var l=this,h,k;if(!l.grid){return}if(l.p.treeGrid){return}if(!e.fn.draggable||!e.fn.droppable){return}function i(){var j=e.data(l,"dnd");e("tr.jqgrow:not(.ui-draggable)",l).draggable(e.isFunction(j.drag)?j.drag.call(e(l),j):j.drag)}var g="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(e("#jqgrid_dnd")[0]===undefined){e("body").append(g)}if(typeof f==="string"&&f==="updateDnD"&&l.p.jqgdnd===true){i();return}f=e.extend({drag:function(j){return e.extend({start:function(o,p){var n,m;if(l.p.subGrid){m=e(p.helper).attr("id");try{e(l).jqGrid("collapseSubGridRow",m)}catch(q){}}for(n=0;n<e.data(l,"dnd").connectWith.length;n++){if(e(e.data(l,"dnd").connectWith[n]).jqGrid("getGridParam","reccount")===0){e(e.data(l,"dnd").connectWith[n]).jqGrid("addRowData","jqg_empty_row",{})}}p.helper.addClass("ui-state-highlight");e("td",p.helper).each(function(r){this.style.width=l.grid.headers[r].width+"px"});if(j.onstart&&e.isFunction(j.onstart)){j.onstart.call(e(l),o,p)}},stop:function(o,p){var m,n;if(p.helper.dropped&&!j.dragcopy){n=e(p.helper).attr("id");if(n===undefined){n=e(this).attr("id")}e(l).jqGrid("delRowData",n)}for(m=0;m<e.data(l,"dnd").connectWith.length;m++){e(e.data(l,"dnd").connectWith[m]).jqGrid("delRowData","jqg_empty_row")}if(j.onstop&&e.isFunction(j.onstop)){j.onstop.call(e(l),o,p)}}},j.drag_opts||{})},drop:function(j){return e.extend({accept:function(o){if(!e(o).hasClass("jqgrow")){return o}var n=e(o).closest("table.ui-jqgrid-btable");if(n.length>0&&e.data(n[0],"dnd")!==undefined){var m=e.data(n[0],"dnd").connectWith;return e.inArray("#"+a(this.id),m)!==-1?true:false}return false},drop:function(u,t){if(!e(t.draggable).hasClass("jqgrow")){return}var q=e(t.draggable).attr("id");var o=t.draggable.parent().parent().jqGrid("getRowData",q);if(!j.dropbyname){var r=0,n={},x,w;var v=e("#"+a(this.id)).jqGrid("getGridParam","colModel");try{for(w in o){if(o.hasOwnProperty(w)){x=v[r].name;if(!(x==="cb"||x==="rn"||x==="subgrid")){if(o.hasOwnProperty(w)&&v[r]){n[x]=o[w]}}r++}}o=n}catch(s){}}t.helper.dropped=true;if(j.beforedrop&&e.isFunction(j.beforedrop)){var p=j.beforedrop.call(this,u,t,o,e("#"+a(l.p.id)),e(this));if(p!==undefined&&p!==null&&typeof p==="object"){o=p}}if(t.helper.dropped){var m;if(j.autoid){if(e.isFunction(j.autoid)){m=j.autoid.call(this,o)}else{m=Math.ceil(Math.random()*1000);m=j.autoidprefix+m}}e("#"+a(this.id)).jqGrid("addRowData",m,o,j.droppos)}if(j.ondrop&&e.isFunction(j.ondrop)){j.ondrop.call(this,u,t,o)}}},j.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},f||{});if(!f.connectWith){return}f.connectWith=f.connectWith.split(",");f.connectWith=e.map(f.connectWith,function(j){return e.trim(j)});e.data(l,"dnd",f);if(l.p.reccount!==0&&!l.p.jqgdnd){i()}l.p.jqgdnd=true;for(h=0;h<f.connectWith.length;h++){k=f.connectWith[h];e(k).droppable(e.isFunction(f.drop)?f.drop.call(e(l),f):f.drop)}})},gridResize:function(f){return this.each(function(){var n=this,i=n.grid,m=n.p,j=m.gView+">.ui-jqgrid-bdiv",h=false,l,k=m.height;if(!i||!e.fn.resizable){return}f=e.extend({},f||{});if(f.alsoResize){f._alsoResize_=f.alsoResize;delete f.alsoResize}else{f._alsoResize_=false}if(f.stop&&e.isFunction(f.stop)){f._stop_=f.stop;delete f.stop}else{f._stop_=false}f.stop=function(o,p){e(n).jqGrid("setGridWidth",p.size.width,f.shrinkToFit);e(m.gView+">.ui-jqgrid-titlebar").css("width","");if(!h){e(n).jqGrid("setGridParam",{height:e(j).height()})}else{e(l).each(function(){e(this).css("height","")});if(k==="auto"||k==="100%"){e(i.bDiv).css("height",k)}}if(n.fixScrollOffsetAndhBoxPadding){n.fixScrollOffsetAndhBoxPadding()}if(f._stop_){f._stop_.call(n,o,p)}};l=j;if((k==="auto"||k==="100%")&&f.handles===undefined){f.handles="e,w"}if(f.handles){var g=e.map(String(f.handles).split(","),function(o){return e.trim(o)});if(g.length===2&&((g[0]==="e"&&g[1]==="w")||(g[1]==="e"&&g[1]==="w"))){l=m.gView+">div:not(.frozen-div)";h=true;if(m.pager){l+=","+m.pager}}}if(f._alsoResize_){f.alsoResize=l+","+f._alsoResize_}else{f.alsoResize=l}delete f._alsoResize_;e(m.gBox).resizable(f)})}})}(jQuery));(function(d){function a(g,e,f){if(!(this instanceof a)){return new a(g)}this.aggregator=g;this.finilized=false;this.context=e;this.pivotOptions=f}a.prototype.calc=function(f,j,i,h,g){var e=this;if(f!==undefined){e.result=e.result||0;f=parseFloat(f);switch(e.aggregator){case"sum":e.result+=f;break;case"count":e.result++;break;case"avg":if(e.finilized){e.count=e.count||0;e.result=(e.result*e.count+f)/(e.count+1);e.count++}else{e.result+=f;e.count=e.count||0;e.count++}break;case"min":e.result=Math.min(e.result,f);break;case"max":e.result=Math.max(e.result,f);break;default:if(d.isFunction(e.aggregator)){e.result=e.aggregator.call(e.context,{previousResult:e.result,value:f,fieldName:j,item:i,iItem:h,items:g})}break}}};a.prototype.getResult=function(h,g,f){var e=this;if(e.result!==undefined||f){if(f){if(e.result!==undefined){e.result=0;e.count=0}}if(e.result!==undefined&&!e.finilized&&e.aggregator==="avg"){e.result=e.result/e.count;e.finilized=true}h[g]=e.result}};function c(m,i,h,g,n){var k,f=g.length,l,j=function(r,p){var q=r,s=p;if(q==null){q=""}if(s==null){s=""}q=String(q);s=String(s);if(!this.caseSensitive){q=q.toUpperCase();s=s.toUpperCase()}if(q===s){if(r===p){return 0}if(r===undefined){return -1}if(p===undefined){return 1}if(r===null){return -1}if(p===null){return 1}}if(q<s){return -1}return 1},o=function(q,p){q=Number(q);p=Number(p);if(q===p){return 0}if(q<p){return -1}return 1},e=function(q,p){q=Math.floor(Number(q));p=Math.floor(Number(p));if(q===p){return 0}if(q<p){return -1}return 1};this.items=[];this.indexesOfSourceData=[];this.trimByCollect=m;this.caseSensitive=i;this.skipSort=h;this.fieldLength=f;this.fieldNames=new Array(f);this.fieldCompare=new Array(f);for(k=0;k<f;k++){l=g[k];this.fieldNames[k]=l[n||"dataName"];switch(l.sorttype){case"integer":case"int":this.fieldCompare[k]=e;break;case"number":case"currency":case"float":this.fieldCompare[k]=o;break;default:this.fieldCompare[k]=d.isFunction(l.compare)?l.compare:j;break}}}c.prototype.compareVectorsEx=function(h,g){var e=this,i=e.fieldLength,j,f;for(j=0;j<i;j++){f=e.fieldCompare[j](h[j],g[j]);if(f!==0){return{index:j,result:f}}}return{index:-1,result:0}};c.prototype.getIndexOfDifferences=function(f,e){if(e===null||f===null){return 0}return this.compareVectorsEx(f,e).index};c.prototype.compareVectors=function(f,e){return this.compareVectorsEx(f,e).result};c.prototype.getItem=function(e){return this.items[e]};c.prototype.getIndexLength=function(){return this.items.length};c.prototype.getIndexesOfSourceData=function(e){return this.indexesOfSourceData[e]};c.prototype.createDataIndex=function(k){var t=this,m,p=k.length,j=t.fieldLength,q,r,u=t.fieldNames,n=t.indexesOfSourceData,o,f,h,s,l=t.items,e,g;for(m=0;m<p;m++){s=k[m];q=new Array(j);for(o=0;o<j;o++){r=s[u[o]];if(r!==undefined){if(typeof r==="string"&&t.trimByCollect){r=d.trim(r)}q[o]=r}}e=0;g=l.length-1;if(g<0){l.push(q);n.push([m]);continue}f=t.compareVectors(q,l[g]);if(f===0){n[g].push(m);continue}if(f===1||t.skipSort){l.push(q);n.push([m]);continue}f=t.compareVectors(l[0],q);if(f===1){l.unshift(q);n.unshift([m]);continue}if(f===0){n[0].push(m);continue}while(true){if(g-e<2){l.splice(g,0,q);n.splice(g,0,[m]);break}h=Math.floor((e+g)/2);f=t.compareVectors(l[h],q);if(f===0){n[h].push(m);break}if(f===1){g=h}else{e=h}}}};var b=d.jgrid;b.extend({pivotSetup:function(ap,L){var p=this[0],K=d.isArray,S={},ab={groupField:[],groupSummary:[],groupSummaryPos:[]},D={grouping:true,groupingView:ab},ai=d.extend({totals:false,useColSpanStyle:false,trimByCollect:true,skipSortByX:false,skipSortByY:false,caseSensitive:false,footerTotals:false,groupSummary:true,groupSummaryPos:"header",frozenStaticCols:false,defaultFormatting:true,data:ap},L||{}),C,al,ak,Z=ap.length,ad,ac,O,n,I,an,g,A,am,m=ai.xDimension,v=ai.yDimension,N=ai.aggregates,J,s=ai.totalText||ai.totals||ai.rowTotals||ai.totalHeader,aj,w,W=K(m)?m.length:0,j=K(v)?v.length:0,G=K(N)?N.length:0,ao=j-(G===1?1:0),e=[],ah=[],R=[],u=[],H=new Array(G),Y=new Array(j),h,F,V,ae,E,f,aq,B,T,X,l,z,ag,Q,U=function(o,k){var i=new c(ai.trimByCollect,ai.caseSensitive,k,o);i.createDataIndex(ap);return i},M=function(ar,k,y,au,i){var x,o,at;switch(ar){case 1:x=v[au].totalText||"{0} {1} {2}";o="y"+i+"t"+au;break;case 2:x=ai.totalText||"{0}";o="t";break;default:x=G>1?k.label||"{0}":ag.getItem(i)[au];o="y"+i;break}at=d.extend({},k,{name:o+(G>1?"a"+y:""),label:d.isFunction(x)?(x.call(p,ar===2?{aggregate:k,iAggregate:y,pivotOptions:ai}:{yIndex:ag.getItem(i),aggregate:k,iAggregate:y,yLevel:au,pivotOptions:ai})):(b.template.apply(p,ar===2?[x,k.aggregator,k.member,y]:[x,k.aggregator,k.member,ag.getItem(i)[au],au]))});delete at.member;delete at.aggregator;return at},r=function(x,y,i){var o,k;for(o=0;o<G;o++){k=N[o];if(k.template===undefined&&k.formatter===undefined&&ai.defaultFormatting){k.template=k.aggregator==="count"?"integer":"number"}R.push(M(x,k,o,y,i))}},t=function(i,at,ar){var k,x,o,y;for(k=ao-1;k>=at;k--){if(ah[k]){for(x=0;x<=k;x++){X=e[x].groupHeaders;X[X.length-1].numberOfColumns+=G}ac=v[k];o=ac.totalHeader;y=ac.headerOnTop;for(x=k+1;x<=ao-1;x++){e[x].groupHeaders.push({titleText:((y&&x===k+1)||(!y&&x===ao-1))?(d.isFunction(o)?o.call(p,ar,k):b.template.call(p,o||"",ar[k],k)):"",startColumnName:"y"+(i-1)+"t"+k+(G===1?"":"a0"),numberOfColumns:G})}}}},q=function(k){var i=new a(N[k].aggregator==="count"?"sum":N[k].aggregator,p,L);i.groupInfo={iRows:[],rows:[],ys:[],iYs:[]};return i},af=function(){var i,k;for(i=ao-1;i>=0;i--){if(ah[i]){if(Y[i]==null){Y[i]=new Array(G)}for(k=0;k<G;k++){Y[i][k]=q(k)}}}},aa=function(i,y,ar,x){var o,au=ag.getIndexOfDifferences(y,ar),at,k;if(ar!==null){au=Math.max(au,0);for(o=ao-1;o>=au;o--){at="y"+i+"t"+o+(G>1?"a"+x:"");if(ah[o]&&B[at]===undefined){k=Y[o][x];k.getResult(B,at);B.pivotInfos[at]={colType:1,iA:x,a:N[x],level:o,iRows:k.groupInfo.iRows,rows:k.groupInfo.rows,ys:k.groupInfo.ys,iYs:k.groupInfo.iYs};if(y!==ar){Y[o][x]=q(x)}}}}},P=function(av,y,x,at,aw,au,ar){var o,k,i;if(av!==y){for(o=ao-1;o>=0;o--){if(ah[o]){k=Y[o][at];k.calc(aw[x.member],x.member,aw,au,ap);i=k.groupInfo;if(d.inArray(ar,i.iYs)<0){i.iYs.push(ar);i.ys.push(av)}if(d.inArray(au,i.iRows)<0){i.iRows.push(au);i.rows.push(aw)}}}}};if(W===0||G===0){throw ("xDimension or aggregates options are not set!")}z=U(m,ai.skipSortByX);ag=U(v,ai.skipSortByY);L.xIndex=z;L.yIndex=ag;for(al=0;al<W;al++){ad=m[al];O={name:"x"+al,label:ad.label!=null?(d.isFunction(ad.label)?ad.label.call(p,ad,al,ai):ad.label):ad.dataName,frozen:ai.frozenStaticCols};if(al<W-1){ab.groupField.push(O.name);ab.groupSummary.push(ai.groupSummary);ab.groupSummaryPos.push(ai.groupSummaryPos)}O=d.extend(O,ad);delete O.dataName;delete O.footerText;R.push(O)}if(W<2){D.grouping=false}D.sortname=R[W-1].name;ab.hideFirstGroupCol=true;for(al=0;al<j;al++){ac=v[al];ah.push(ac.totals||ac.rowTotals||ac.totalText||ac.totalHeader?true:false)}T=ag.getItem(0);r(0,j-1,0);Q=ag.getIndexLength();for(V=1;V<Q;V++){ae=ag.getItem(V);al=ag.getIndexOfDifferences(ae,T);for(ak=ao-1;ak>=al;ak--){if(ah[ak]){r(1,ak,V-1)}}T=ae;r(0,j-1,V)}for(al=ao-1;al>=0;al--){if(ah[al]){r(1,al,Q-1)}}if(s){r(2)}T=ag.getItem(0);for(ak=0;ak<ao;ak++){e.push({useColSpanStyle:ai.useColSpanStyle,groupHeaders:[{titleText:T[ak],startColumnName:G===1?"y0":"y0a0",numberOfColumns:G}]})}for(V=1;V<Q;V++){ae=ag.getItem(V);al=ag.getIndexOfDifferences(ae,T);t(V,al,T);for(ak=ao-1;ak>=al;ak--){e[ak].groupHeaders.push({titleText:ae[ak],startColumnName:"y"+V+(G===1?"":"a0"),numberOfColumns:G})}for(ak=0;ak<al;ak++){X=e[ak].groupHeaders;X[X.length-1].numberOfColumns+=G}T=ae}t(Q,0,T);if(s){for(al=0;al<ao;al++){e[al].groupHeaders.push({titleText:(al<ao-1?"":ai.totalHeader||""),startColumnName:"t"+(G===1?"":"a0"),numberOfColumns:G})}}h=z.getIndexLength();for(an=0;an<h;an++){g=z.getItem(an);A={iX:an,x:g};B={pivotInfos:A};for(al=0;al<W;al++){B["x"+al]=g[al]}F=z.getIndexesOfSourceData(an);if(s){for(ak=0;ak<G;ak++){H[ak]=q(ak)}}T=null;af();for(V=0;V<Q;V++){ae=ag.getItem(V);E=ag.getIndexesOfSourceData(V);for(ak=0;ak<G;ak++){if(T!==null){aa(V-1,ae,T,ak)}f=[];for(al=0;al<E.length;al++){l=E[al];if(d.inArray(l,F)>=0){f.push(l)}}if(f.length>0){am=new Array(f.length);aq=N[ak];J=new a(aq.aggregator,p,L);for(n=0;n<f.length;n++){al=f[n];C=ap[al];am[n]=C;J.calc(C[aq.member],aq.member,C,al,ap);if(s){aj=H[ak];aj.calc(C[aq.member],aq.member,C,al,ap);w=aj.groupInfo;if(d.inArray(al,w.iYs)<0){w.iYs.push(V);w.ys.push(ae)}if(d.inArray(al,w.iRows)<0){w.iRows.push(al);w.rows.push(C)}}P(ae,T,aq,ak,C,al,V)}I="y"+V+(G===1?"":"a"+ak);J.getResult(B,I);A[I]={colType:0,iY:V,y:ae,iA:ak,a:aq,iRows:f,rows:am}}}T=ae}if(T!==null){for(ak=0;ak<G;ak++){aa(Q-1,T,T,ak)}}if(s){for(ak=0;ak<G;ak++){I="t"+(G===1?"":"a"+ak);aj=H[ak];aj.getResult(B,I);w=aj.groupInfo;A[I]={colType:2,iA:ak,a:N[ak],iRows:w.iRows,rows:w.rows,iYs:w.iYs,ys:w.ys}}}u.push(B)}if(ai.footerTotals||ai.colTotals){Z=u.length;for(al=0;al<W;al++){S["x"+al]=m[al].footerText||""}for(al=W;al<R.length;al++){I=R[al].name;J=new a(ai.footerAggregator||"sum",p,L);for(n=0;n<Z;n++){B=u[n];J.calc(B[I],I,B,n,u)}J.getResult(S,I)}}return{colModel:R,options:L,rows:u,groupOptions:D,groupHeaders:e,summary:S}},jqPivot:function(h,f,e,g){return this.each(function(){var l=this,k=d(l),j=d.fn.jqGrid;function i(r){var o=j.pivotSetup.call(k,r,f),n=o.groupHeaders,t=function(w){var v=0,u;for(u in w){if(w.hasOwnProperty(u)){v++}}return v},s=t(o.summary)>0?true:false,m=o.groupOptions.groupingView,q=b.from.call(l,o.rows),p;if(f.skipSortByX){for(p=0;p<m.groupField.length;p++){q.orderBy(m.groupField[p],e!=null&&e.groupingView&&e.groupingView.groupOrder!=null&&e.groupingView.groupOrder[p]==="desc"?"d":"a","text","")}}f.data=r;j.call(k,d.extend(true,{datastr:d.extend(q.select(),s?{userdata:o.summary}:{}),datatype:"jsonstring",footerrow:s,userDataOnFooter:s,colModel:o.colModel,pivotOptions:o.options,additionalProperties:["pivotInfos"],viewrecords:true,sortname:f.xDimension[0].dataName},o.groupOptions,e||{}));if(n.length){for(p=0;p<n.length;p++){if(n[p]&&n[p].groupHeaders.length){j.setGroupHeaders.call(k,n[p])}}}if(f.frozenStaticCols){j.setFrozenColumns.call(k)}}if(typeof h==="string"){d.ajax(d.extend({url:h,dataType:"json",success:function(m){i(b.getAccessor(m,g&&g.reader?g.reader:"rows"))}},g||{}))}else{i(h)}})}})}(jQuery));(function(e){var c=e.jgrid,a=c.jqID,d=e.fn.jqGrid,b=function(){var f=e.makeArray(arguments);f[0]="subGrid"+f[0].charAt(0).toUpperCase()+f[0].substring(1);f.unshift("");f.unshift("");f.unshift(this.p);return c.feedback.apply(this,f)};c.extend({setSubGrid:function(){return this.each(function(){var j=this,h=j.p,f=h.subGridModel[0],g;h.subGridOptions=e.extend({expandOnLoad:false,delayOnLoad:50,selectOnExpand:false,selectOnCollapse:false,reloadOnExpand:true},h.subGridOptions||{});h.colNames.unshift("");h.colModel.unshift({name:"subgrid",width:c.cell_width?h.subGridWidth+h.cellLayout:h.subGridWidth,labelClasses:"jqgh_subgrid",sortable:false,resizable:false,hidedlg:true,search:false,fixed:true,frozen:true});if(f){f.align=e.extend([],f.align||[]);for(g=0;g<f.name.length;g++){f.align[g]=f.align[g]||"left"}}})},addSubGridCell:function(i,h){var f=this[0],g=f.p.subGridOptions;return f==null||f.p==null||g==null?"":'<td role="gridcell" aria-describedby="'+f.p.id+"_subgrid\" class='"+d.getGuiStyles.call(this,"subgrid.tdStart","ui-sgcollapsed sgcollapsed")+"' "+f.formatCol(i,h)+"><a style='cursor:pointer;'><span class='"+c.mergeCssClasses(g.commonIconClass,g.plusicon)+"'></span></a></td>"},addSubGrid:function(g,f){return this.each(function(){var s=this,k=s.p,t=function(p,x){return d.getGuiStyles.call(s,"subgrid."+p,x||"")},w=t("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+k.direction),i=t("rowSubTable","ui-subtblcell"),m=t("row","ui-subgrid ui-row-"+k.direction),u=t("tdWithIcon","subgrid-cell"),o=t("tdData","subgrid-data"),j=function(x,p,z){var y=e("<td align='"+k.subGridModel[0].align[z]+"'></td>").html(p);e(x).append(y)},h=function(x,D){var C,z,y,A,B=e("<table"+(c.msie&&c.msiever()<8?" cellspacing='0'":"")+"><tbody></tbody></table>"),p=e("<tr></tr>");for(z=0;z<k.subGridModel[0].name.length;z++){C=e("<th class='"+w+"'></th>");e(C).html(k.subGridModel[0].name[z]);e(C).width(k.subGridModel[0].width[z]);e(p).append(C)}e(B).append(p);if(x){y=k.xmlReader.subgrid;e(y.root+" "+y.row,x).each(function(){p=e("<tr class='"+i+"'></tr>");if(y.repeatitems===true){e(y.cell,this).each(function(E){j(p,e(this).text()||"&#160;",E)})}else{A=k.subGridModel[0].mapping||k.subGridModel[0].name;if(A){for(z=0;z<A.length;z++){j(p,e(A[z],this).text()||"&#160;",z)}}}e(B).append(p)})}e("#"+a(k.id+"_"+D)).append(B);s.grid.hDiv.loading=false;e("#load_"+a(k.id)).hide();return false},l=function(D,A){var F,G,B,E,p,z,C,y=e("<table"+(c.msie&&c.msiever()<8?" cellspacing='0'":"")+"><tbody></tbody></table>"),x=e("<tr></tr>");for(B=0;B<k.subGridModel[0].name.length;B++){F=e("<th class='"+w+"'></th>");e(F).html(k.subGridModel[0].name[B]);e(F).width(k.subGridModel[0].width[B]);e(x).append(F)}e(y).append(x);if(D){p=k.jsonReader.subgrid;G=c.getAccessor(D,p.root);if(G!==undefined){for(B=0;B<G.length;B++){E=G[B];x=e("<tr class='"+i+"'></tr>");if(p.repeatitems===true){if(p.cell){E=E[p.cell]}for(z=0;z<E.length;z++){j(x,E[z]||"&#160;",z)}}else{C=k.subGridModel[0].mapping||k.subGridModel[0].name;if(C.length){for(z=0;z<C.length;z++){j(x,E[C[z]]||"&#160;",z)}}}e(y).append(x)}}}e("#"+a(k.id+"_"+A)).append(y);s.grid.hDiv.loading=false;e("#load_"+a(k.id)).hide();return false},r=function(z){var p=e(z).attr("id"),A={nd_:(new Date().getTime())},y,x;A[k.prmNames.subgridid]=p;if(!k.subGridModel[0]){return false}if(k.subGridModel[0].params){for(x=0;x<k.subGridModel[0].params.length;x++){y=k.iColByName[k.subGridModel[0].params[x]];if(y!==undefined){A[k.colModel[y].name]=e(z.cells[y]).text().replace(/\&#160\;/ig,"")}}}if(!s.grid.hDiv.loading){s.grid.hDiv.loading=true;e("#load_"+a(k.id)).show();if(!k.subgridtype){k.subgridtype=k.datatype}if(e.isFunction(k.subgridtype)){k.subgridtype.call(s,A)}else{k.subgridtype=k.subgridtype.toLowerCase()}switch(k.subgridtype){case"xml":case"json":e.ajax(e.extend({type:k.mtype,url:e.isFunction(k.subGridUrl)?k.subGridUrl.call(s,A):k.subGridUrl,dataType:k.subgridtype,data:c.serializeFeedback.call(s,k.serializeSubGridData,"jqGridSerializeSubGridData",A),complete:function(B){if(k.subgridtype==="xml"){h(B.responseXML,p)}else{l(c.parse(B.responseText),p)}}},c.ajaxOptions,k.ajaxSubgridOptions||{}));break}}return false},v=function(){var B=e(this).parent("tr")[0],z=B.nextSibling,y=B.id,x=k.id+"_"+y,A,p=function(D){return[k.subGridOptions.commonIconClass,k.subGridOptions[D]].join(" ")},C=1;e.each(k.colModel,function(){if(this.hidden===true||this.name==="rn"||this.name==="cb"){C++}});if(e(this).hasClass("sgcollapsed")){if(k.subGridOptions.reloadOnExpand===true||(k.subGridOptions.reloadOnExpand===false&&!e(z).hasClass("ui-subgrid"))){A=g>=1?"<td colspan='"+g+"'>&#160;</td>":"";if(!b.call(s,"beforeExpand",x,y)){return}e(B).after("<tr role='row' class='"+m+"'>"+A+"<td class='"+u+"'><span class='"+p("openicon")+"'></span></td><td colspan='"+parseInt(k.colNames.length-C,10)+"' class='"+o+"'><div id="+x+" class='tablediv'></div></td></tr>");e(s).triggerHandler("jqGridSubGridRowExpanded",[x,y]);if(e.isFunction(k.subGridRowExpanded)){k.subGridRowExpanded.call(s,x,y)}else{r(B)}}else{e(z).show()}e(this).html("<a style='cursor:pointer;'><span class='"+p("minusicon")+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");if(k.subGridOptions.selectOnExpand){e(s).jqGrid("setSelection",y)}}else{if(e(this).hasClass("sgexpanded")){if(!b.call(s,"beforeCollapse",x,y)){return}if(k.subGridOptions.reloadOnExpand===true){e(z).remove(".ui-subgrid")}else{if(e(z).hasClass("ui-subgrid")){e(z).hide()}}e(this).html("<a style='cursor:pointer;'><span class='"+p("plusicon")+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");if(k.subGridOptions.selectOnCollapse){e(s).jqGrid("setSelection",y)}}}return false},n,q=1;if(!s.grid){return}n=s.rows.length;if(f!==undefined&&f>0){q=f;n=f+1}while(q<n){if(e(s.rows[q]).hasClass("jqgrow")){if(k.scroll){e(s.rows[q].cells[g]).unbind("click")}e(s.rows[q].cells[g]).bind("click",v)}q++}if(k.subGridOptions.expandOnLoad===true){e(s.rows).filter(".jqgrow").each(function(p,x){e(x.cells[0]).click()})}s.subGridXml=function(x,p){h(x,p)};s.subGridJson=function(x,p){l(x,p)}})},expandSubGridRow:function(f){return this.each(function(){var h=this,g;if(!h.grid&&!f){return}if(h.p.subGrid===true){g=e(this).jqGrid("getInd",f,true);e(g).find(">td.sgcollapsed").trigger("click")}})},collapseSubGridRow:function(f){return this.each(function(){var h=this,g;if(!h.grid&&!f){return}if(h.p.subGrid===true){g=e(this).jqGrid("getInd",f,true);e(g).find(">td.sgexpanded").trigger("click")}})},toggleSubGridRow:function(f){return this.each(function(){var h=this,g;if(!h.grid&&!f){return}if(h.p.subGrid===true){g=e(this).jqGrid("getInd",f,true);e(g).find(">td.ui-sgcollapsed").trigger("click")}})}})}(jQuery));(function(a){window.tableToGrid=function(b,c){a(b).each(function(){var p=this,n=a(this),o,r,i,e,h,j,l,d,k=[],q=[],g=[],f=[],m=[];if(p.grid){return}n.width("99%");o=n.width();r=a("tr td:first-child input[type=checkbox]:first",n);i=a("tr td:first-child input[type=radio]:first",n);e=r.length>0;h=!e&&i.length>0;j=e||h;a("th",n).each(function(){if(k.length===0&&j){k.push({name:"__selection__",index:"__selection__",width:0,hidden:true});q.push("__selection__")}else{k.push({name:a(this).attr("id")||a.trim(a.jgrid.stripHtml(a(this).html())).split(" ").join("_"),index:a(this).attr("id")||a.trim(a.jgrid.stripHtml(a(this).html())).split(" ").join("_"),width:a(this).width()||150});q.push(a(this).html())}});a("tbody > tr",n).each(function(){var t={},s=0;a("td",a(this)).each(function(){if(s===0&&j){var u=a("input",a(this)),v=u.attr("value");f.push(v||g.length);if(u.is(":checked")){m.push(v)}t[k[s].name]=u.attr("value")}else{t[k[s].name]=a(this).html()}s++});if(s>0){g.push(t)}});n.empty();n.jqGrid(a.extend({datatype:"local",width:o,colNames:q,colModel:k,multiselect:e},c||{}));for(l=0;l<g.length;l++){d=null;if(f.length>0){d=f[l];if(d&&d.replace){d=encodeURIComponent(d).replace(/[.\-%]/g,"_")}}if(d===null){d=a.jgrid.randId()}n.jqGrid("addRowData",d,g[l])}for(l=0;l<m.length;l++){n.jqGrid("setSelection",m[l])}})}}(jQuery));(function(g){var b=g.jgrid,c=b.getAccessor,e=b.stripPref,a=b.jqID,f=g.fn.jqGrid,d=function(){var h=g.makeArray(arguments);h[0]="treeGrid"+h[0].charAt(0).toUpperCase()+h[0].substring(1);h.unshift("");h.unshift("");h.unshift(this.p);return b.feedback.apply(this,h)};b.extend({setTreeNode:function(){return this.each(function(){var m=this,l=g(m),k=m.p;if(!m.grid||!k.treeGrid){return}var i=k.treeReader.expanded_field,h=k.treeReader.leaf_field,j=function(r,q,o){var p=function(v){var u=k.data[k._index[e(k.idPrefix,v)]],t=u[i]?"collapse":"expand";if(!u[h]){f[t+"Row"].call(l,u);f[t+"Node"].call(l,u)}};if(o!=null){var n=g(o.target);if(n.is("div.treeclick")){p(q)}else{if(k.ExpandColClick){var s=n.closest("tr.jqgrow>td");if(s.length>0&&n.closest("span.ui-jqgrid-cell-wrapper",s).length>0){p(q)}}}return true}};l.unbind("jqGridBeforeSelectRow.setTreeNode",j);l.bind("jqGridBeforeSelectRow.setTreeNode",j)})},setTreeGrid:function(){return this.each(function(){var n=this,m=n.p,i,j,l,h=[],k=["leaf_field","expanded_field","loaded"];if(!m.treeGrid){return}if(!m.treedatatype){g.extend(n.p,{treedatatype:m.datatype})}m.subGrid=false;m.altRows=false;m.pgbuttons=false;m.pginput=false;m.gridview=true;if(m.rowTotal===null){m.rowNum=m.maxRowNum}m.rowList=[];m.treeIcons.plus=m.direction==="rtl"?m.treeIcons.plusRtl:m.treeIcons.plusLtr;if(m.treeGridModel==="nested"){m.treeReader=g.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},m.treeReader)}else{if(m.treeGridModel==="adjacency"){m.treeReader=g.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},m.treeReader)}}for(j in m.colModel){if(m.colModel.hasOwnProperty(j)){i=m.colModel[j].name;for(l in m.treeReader){if(m.treeReader.hasOwnProperty(l)&&m.treeReader[l]===i){h.push(i)}}}}g.each(m.treeReader,function(p){var o=String(this);if(o&&g.inArray(o,h)===-1){if(g.inArray(p,k)>=0){m.additionalProperties.push({name:o,convert:function(q){return q===true||String(q).toLowerCase()==="true"||String(q)==="1"?true:false}})}else{m.additionalProperties.push(o)}}})})},expandRow:function(h){this.each(function(){var n=this,m=g(n),l=n.p;if(!n.grid||!l.treeGrid){return}var i=l.treeReader.expanded_field,k=h[l.localReader.id];if(!d.call(n,"beforeExpandRow",{rowid:k,item:h})){return}var j=f.getNodeChildren.call(m,h);g(j).each(function(){var o=l.idPrefix+c(this,l.localReader.id);g(f.getGridRowById.call(m,o)).css("display","");if(this[i]){f.expandRow.call(m,this)}});d.call(n,"afterExpandRow",{rowid:k,item:h})})},collapseRow:function(h){this.each(function(){var n=this,m=g(n),l=n.p;if(!n.grid||!l.treeGrid){return}var i=l.treeReader.expanded_field,k=h[l.localReader.id];if(!d.call(n,"beforeCollapseRow",{rowid:k,item:h})){return}var j=f.getNodeChildren.call(m,h);g(j).each(function(){var o=l.idPrefix+c(this,l.localReader.id);g(f.getGridRowById.call(m,o)).css("display","none");if(this[i]){f.collapseRow.call(m,this)}});d.call(n,"afterCollapseRow",{rowid:k,item:h})})},getRootNodes:function(){var h=[];this.each(function(){var l=this,i=l.p;if(!l.grid||!i.treeGrid){return}switch(i.treeGridModel){case"nested":var k=i.treeReader.level_field;g(i.data).each(function(){if(parseInt(this[k],10)===parseInt(i.tree_root_level,10)){h.push(this)}});break;case"adjacency":var j=i.treeReader.parent_id_field;g(i.data).each(function(){if(this[j]===null||String(this[j]).toLowerCase()==="null"){h.push(this)}});break}});return h},getNodeDepth:function(i){var h=null;this.each(function(){var l=this,j=l.p;if(!l.grid||!j.treeGrid){return}switch(j.treeGridModel){case"nested":var k=j.treeReader.level_field;h=parseInt(i[k],10)-parseInt(j.tree_root_level,10);break;case"adjacency":h=f.getNodeAncestors.call(g(l),i).length;break}});return h},getNodeParent:function(j){var m=this[0];if(!m||!m.grid||m.p==null||!m.p.treeGrid||j==null){return null}var k=m.p,i=k.treeReader.parent_id_field,l=j[i];if(l===null||l==="null"){return null}var h=k._index[l];return h!=undefined?k.data[h]:null},getNodeChildren:function(i){var h=[];this.each(function(){var n=this,k=n.p;if(!n.grid||!k.treeGrid){return}switch(k.treeGridModel){case"nested":var m=k.treeReader.left_field,t=k.treeReader.right_field,q=k.treeReader.level_field,s=parseInt(i[m],10),r=parseInt(i[t],10),j=parseInt(i[q],10);g(k.data).each(function(){if(parseInt(this[q],10)===j+1&&parseInt(this[m],10)>s&&parseInt(this[t],10)<r){h.push(this)}});break;case"adjacency":var o=k.treeReader.parent_id_field,l=k.localReader.id;g(k.data).each(function(){if(String(this[o])===String(i[l])){h.push(this)}});break}});return h},getFullTreeNode:function(i){var h=[];this.each(function(){var n=this,k=n.p,q;if(!n.grid||!k.treeGrid){return}switch(k.treeGridModel){case"nested":var m=k.treeReader.left_field,u=k.treeReader.right_field,r=k.treeReader.level_field,t=parseInt(i[m],10),s=parseInt(i[u],10),j=parseInt(i[r],10);g(k.data).each(function(){if(parseInt(this[r],10)>=j&&parseInt(this[m],10)>=t&&parseInt(this[m],10)<=s){h.push(this)}});break;case"adjacency":if(i){h.push(i);var o=k.treeReader.parent_id_field,l=k.localReader.id;g(k.data).each(function(){var p;q=h.length;for(p=0;p<q;p++){if(h[p][l]===this[o]){h.push(this);break}}})}break}});return h},getNodeAncestors:function(i){var h=[];this.each(function(){var m=this,l=g(m),k=f.getNodeParent;if(!m.grid||!m.p.treeGrid){return}var j=k.call(l,i);while(j){h.push(j);j=k.call(l,j)}});return h},isVisibleNode:function(i){var h=true;this.each(function(){var m=this,l=m.p;if(!m.grid||!l.treeGrid){return}var k=f.getNodeAncestors.call(g(m),i),j=l.treeReader.expanded_field;g(k).each(function(){h=h&&this[j];if(!h){return false}})});return h},isNodeLoaded:function(i){var h;this.each(function(){var m=this,l=m.p;if(!m.grid||!l.treeGrid){return}var j=l.treeReader.leaf_field,k=l.treeReader.loaded;if(i!==undefined){if(i[k]!==undefined){h=i[k]}else{if(i[j]||f.getNodeChildren.call(g(m),i).length>0){h=true}else{h=false}}}else{h=false}});return h},expandNode:function(h){return this.each(function(){var m=this,k=m.p;if(!m.grid||!k.treeGrid){return}var q=k.treeReader.expanded_field,r=k.treeReader.parent_id_field,n=k.treeReader.loaded,i=k.treeReader.level_field,t=k.treeReader.left_field,s=k.treeReader.right_field;if(!h[q]){var j=c(h,k.localReader.id);if(!d.call(m,"beforeExpandNode",{rowid:j,item:h})){return}var l=g("#"+k.idPrefix+a(j),m.grid.bDiv)[0],o=k._index[j];if(k.datatype==="local"||f.isNodeLoaded.call(g(m),k.data[o])){h[q]=true;g("div.treeclick",l).removeClass(k.treeIcons.plus+" tree-plus").addClass(k.treeIcons.minus+" tree-minus")}else{if(!m.grid.hDiv.loading){h[q]=true;g("div.treeclick",l).removeClass(k.treeIcons.plus+" tree-plus").addClass(k.treeIcons.minus+" tree-minus");k.treeANode=l.rowIndex;k.datatype=k.treedatatype;f.setGridParam.call(g(m),{postData:k.treeGridModel==="nested"?{nodeid:j,n_level:h[i],n_left:h[t],n_right:h[s]}:{nodeid:j,n_level:h[i],parentid:h[r]}});g(m).trigger("reloadGrid");h[n]=true;f.setGridParam.call(g(m),{postData:k.treeGridModel==="nested"?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})}}d.call(m,"afterExpandNode",{rowid:j,item:h})}})},collapseNode:function(h){return this.each(function(){var m=this,k=m.p;if(!m.grid||!k.treeGrid){return}var j=k.treeReader.expanded_field;if(h[j]){var l=c(h,k.localReader.id);if(!d.call(m,"beforeCollapseNode",{rowid:l,item:h})){return}h[j]=false;var i=g("#"+k.idPrefix+a(l),m.grid.bDiv)[0];g("div.treeclick",i).removeClass(k.treeIcons.minus+" tree-minus").addClass(k.treeIcons.plus+" tree-plus");d.call(m,"afterCollapseNode",{rowid:l,item:h})}})},SortTree:function(k,i,h,j){return this.each(function(){var q=this,l=q.p,u=g(q);if(!q.grid||!l.treeGrid){return}var r,s,o,m=[],n=f.getRootNodes.call(u),t=b.from.call(q,n);t.orderBy(k,i,h,j);var v=t.select();for(r=0,s=v.length;r<s;r++){o=v[r];m.push(o);f.collectChildrenSortTree.call(u,m,o,k,i,h,j)}g.each(m,function(p){var w=c(this,l.localReader.id);g(q.rows[p]).after(u.find(">tbody>tr#"+a(w)))})})},collectChildrenSortTree:function(h,l,m,j,i,k){return this.each(function(){var u=this,s=g(u);if(!u.grid||!u.p.treeGrid){return}var p,n,t,q=f.getNodeChildren.call(s,l),r=b.from.call(u,q);r.orderBy(m,j,i,k);var o=r.select();for(p=0,n=o.length;p<n;p++){t=o[p];h.push(t);f.collectChildrenSortTree.call(s,h,t,m,j,i,k)}})},setTreeRow:function(h,i){var j=false;this.each(function(){var k=this;if(!k.grid||!k.p.treeGrid){return}j=f.setRowData.call(g(k),h,i)});return j},delTreeNode:function(h){return this.each(function(){var q=this,l=q.p,k,m,s,v,w=l.localReader.id,r,t=g(q),o=l.treeReader.left_field,u=l.treeReader.right_field;if(!q.grid||!l.treeGrid){return}var j=l._index[h];if(j!==undefined){k=parseInt(l.data[j][u],10);m=k-parseInt(l.data[j][o],10)+1;var n=f.getFullTreeNode.call(t,l.data[j]);if(n.length>0){for(r=0;r<n.length;r++){f.delRowData.call(t,n[r][w])}}if(l.treeGridModel==="nested"){s=b.from.call(q,l.data).greater(o,k,{stype:"integer"}).select();if(s.length){for(v in s){if(s.hasOwnProperty(v)){s[v][o]=parseInt(s[v][o],10)-m}}}s=b.from.call(q,l.data).greater(u,k,{stype:"integer"}).select();if(s.length){for(v in s){if(s.hasOwnProperty(v)){s[v][u]=parseInt(s[v][u],10)-m}}}}}})},addChildNode:function(n,v,J,r){var D=g(this),B=D[0],t=B.p,H=f.getInd;if(J){var j,I,q,u,z,A,y=0,s=v,E,C,w=t.treeReader.expanded_field,F=t.treeReader.leaf_field,h=t.treeReader.level_field,o=t.treeReader.parent_id_field,k=t.treeReader.left_field,G=t.treeReader.right_field,x=t.treeReader.loaded;if(r===undefined){r=false}if(n==null){z=t.data.length-1;if(z>=0){while(z>=0){y=Math.max(y,parseInt(t.data[z][t.localReader.id],10));z--}}n=y+1}var M=H.call(D,v);E=false;if(v===undefined||v===null||v===""){v=null;s=null;j="last";u=t.tree_root_level;z=t.data.length+1}else{j="after";I=t._index[v];q=t.data[I];v=q[t.localReader.id];u=parseInt(q[h],10)+1;var l=f.getFullTreeNode.call(D,q);if(l.length){z=l[l.length-1][t.localReader.id];s=z;z=H.call(D,s)+1}else{z=H.call(D,v)+1}if(q[F]){E=true;q[w]=true;g(B.rows[M]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(t.treeIcons.leaf+" tree-leaf").addClass(t.treeIcons.minus+" tree-minus");t.data[I][F]=false;q[x]=true}}A=z+1;if(J[w]===undefined){J[w]=false}if(J[x]===undefined){J[x]=false}J[h]=u;if(J[F]===undefined){J[F]=true}if(t.treeGridModel==="adjacency"){J[o]=v}if(t.treeGridModel==="nested"){var m,L,K;if(v!==null){C=parseInt(q[G],10);m=b.from.call(B,t.data);m=m.greaterOrEquals(G,C,{stype:"integer"});L=m.select();if(L.length){for(K in L){if(L.hasOwnProperty(K)){L[K][k]=L[K][k]>C?parseInt(L[K][k],10)+2:L[K][k];L[K][G]=L[K][G]>=C?parseInt(L[K][G],10)+2:L[K][G]}}}J[k]=C;J[G]=C+1}else{C=parseInt(f.getCol.call(D,G,false,"max"),10);L=b.from.call(B,t.data).greater(k,C,{stype:"integer"}).select();if(L.length){for(K in L){if(L.hasOwnProperty(K)){L[K][k]=parseInt(L[K][k],10)+2}}}L=b.from.call(B,t.data).greater(G,C,{stype:"integer"}).select();if(L.length){for(K in L){if(L.hasOwnProperty(K)){L[K][G]=parseInt(L[K][G],10)+2}}}J[k]=C+1;J[G]=C+2}}if(v===null||f.isNodeLoaded.call(D,q)||E){f.addRowData.call(D,n,J,j,s);f.setTreeNode.call(D,z,A)}if(q&&!q[w]&&r){g(B.rows[M]).find("div.treeclick").click()}}}})}(jQuery));(function(f){var e=".jqGrid",b="mousedown",d="mousemove",a="mouseup",c=function(k){var i=k.originalEvent,j=i.targetTouches;if(j){j=j[0];return{x:j.pageX,y:j.pageY}}return{x:k.pageX,y:k.pageY}},g={drag:function(n){var o=n.data,m=o.e,j=o.dnr,i=o.ar,l=o.dnrAr,k=c(n);if(j.k==="move"){m.css({left:j.X+k.x-j.pX,top:j.Y+k.y-j.pY})}else{m.css({width:Math.max(k.x-j.pX+j.W,0),height:Math.max(k.y-j.pY+j.H,0)});if(l){i.css({width:Math.max(k.x-l.pX+l.W,0),height:Math.max(k.y-l.pY+l.H,0)})}}return false},stop:function(){f(document).unbind(d,g.drag).unbind(a,g.stop)}},h=function(l,k,i,j){return l.each(function(){k=k?f(k,l):l;k.bind(b,{e:l,k:i},function(t){var v=t.data,q={},w,x,A,n,r,o=function(B,p){return parseInt(B.css(p),10)||false},m=function(p){return o(x,p)},s=function(p){return o(n,p)},z=c(t),y;if(f(t.target).hasClass("ui-jqdialog-titlebar-close")||f(t.target).parent().hasClass("ui-jqdialog-titlebar-close")){f(t.target).click();return}x=v.e;n=j?f(j):false;if(x.css("position")!=="relative"){try{x.position(q)}catch(u){}}A={X:q.left||m("left")||0,Y:q.top||m("top")||0,W:m("width")||x[0].scrollWidth||0,H:m("height")||x[0].scrollHeight||0,pX:z.x,pY:z.y,k:v.k};if(n&&v.k!=="move"){r={X:q.left||s("left")||0,Y:q.top||s("top")||0,W:n[0].offsetWidth||s("width")||0,H:n[0].offsetHeight||s("height")||0,pX:z.x,pY:z.y,k:v.k}}else{r=false}w=x.find("input.hasDatepicker");if(w.length>0){try{w.datepicker("hide")}catch(u){}}y={e:x,dnr:A,ar:n,dnrAr:r};f(document).bind(d,y,g.drag);f(document).bind(a,y,g.stop);return false})})};if(window.PointerEvent){b+=e+" pointerdown"+e;d+=e+" pointermove"+e;a+=e+" pointerup"+e}else{if(window.MSPointerEvent){b+=e+" mspointerdown"+e;d+=e+" mspointermove"+e;a+=e+" mspointerup"}else{b+=e+" touchstart"+e;d+=e+" touchmove"+e;a+=e+" touchend"+e}}f.jqDnR=g;f.fn.jqDrag=function(i){return h(this,i,"move")};f.fn.jqResize=function(j,i){return h(this,j,"resize",i)}}(jQuery));(function(e){var a=0,g,i=[],h=function(j){try{e(":input:visible",j.w).first().focus()}catch(k){}},f=function(j){h(j)},c=function(o){var m=g[i[i.length-1]],n=!e(o.target).parents(".jqmID"+m.s)[0],p=e(o.target).offset(),l=o.pageX!==undefined?o.pageX:p.left,k=o.pageY!==undefined?o.pageY:p.top,j=function(){var q=false;e(".jqmID"+m.s).each(function(){var s=e(this),r=s.offset();if(r.top<=k&&k<=r.top+s.height()&&r.left<=l&&l<=r.left+s.width()){q=true;return false}});return q};if(o.type!=="mousedown"&&j()){return true}if(o.type==="mousedown"&&n){if(j()){n=false}if(n&&!e(o.target).is(":input")){h(m)}}return !n},d=function(j){e(document)[j]("keypress keydown mousedown",c)},b=function(j,k,l){return j.each(function(){var m=this._jqm;e(k).each(function(){if(!this[l]){this[l]=[];e(this).click(function(){var p,q,o,n=["jqmShow","jqmHide"];for(p=0;p<n.length;p++){q=n[p];for(o in this[q]){if(this[q].hasOwnProperty(o)&&g[this[q][o]]){g[this[q][o]].w[q](this)}}}return false})}this[l].push(m)})})};e.fn.jqm=function(k){var j={overlay:50,closeoverlay:false,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:false,ajaxText:"",target:false,modal:false,toTop:false,onShow:false,onHide:false,onLoad:false};return this.each(function(){if(this._jqm){g[this._jqm].c=e.extend({},g[this._jqm].c,k);return g[this._jqm].c}a++;this._jqm=a;g[a]={c:e.extend(j,e.jqm.params,k),a:false,w:e(this).addClass("jqmID"+a),s:a};if(j.trigger){e(this).jqmAddTrigger(j.trigger)}})};e.fn.jqmAddClose=function(j){return b(this,j,"jqmHide")};e.fn.jqmAddTrigger=function(j){return b(this,j,"jqmShow")};e.fn.jqmShow=function(j){return this.each(function(){e.jqm.open(this._jqm,j)})};e.fn.jqmHide=function(j){return this.each(function(){e.jqm.close(this._jqm,j)})};e.jqm={hash:{},open:function(u,l){var o=g[u],t,p,k,v=o.c,j=o.w.parent().offset(),n,r,m="."+v.closeClass,q=(parseInt(o.w.css("z-index"),10));q=(q>0)?q:3000;t=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":q-1,opacity:v.overlay/100});if(o.a){return false}o.t=l;o.a=true;o.w.css("z-index",q);if(v.modal){if(!i[0]){setTimeout(function(){d("bind")},1)}i.push(u)}else{if(v.overlay>0){if(v.closeoverlay){o.w.jqmAddClose(t)}}else{t=false}}o.o=t?t.addClass(v.overlayClass).prependTo("body"):false;if(v.ajax){p=v.target||o.w;k=v.ajax;p=(typeof p==="string")?e(p,o.w):e(p);k=(k.substr(0,1)==="@")?e(l).attr(k.substring(1)):k;p.html(v.ajaxText).load(k,function(){if(v.onLoad){v.onLoad.call(this,o)}if(m){o.w.jqmAddClose(e(m,o.w))}f(o)})}else{if(m){o.w.jqmAddClose(e(m,o.w))}}if(v.toTop&&o.o){j=o.w.parent().offset();n=parseFloat(o.w.css("left")||0);r=parseFloat(o.w.css("top")||0);o.w.before('<span id="jqmP'+o.w[0]._jqm+'"></span>').insertAfter(o.o);o.w.css({top:j.top+r,left:j.left+n})}if(v.onShow){v.onShow(o)}else{o.w.show()}f(o);return false},close:function(k){var j=g[k];if(!j.a){return false}j.a=false;if(i[0]){i.pop();if(!i[0]){d("unbind")}}if(j.c.toTop&&j.o){e("#jqmP"+j.w[0]._jqm).after(j.w).remove()}if(j.c.onHide){j.c.onHide(j)}else{j.w.hide();if(j.o){j.o.remove()}}return false},params:{}};g=e.jqm.hash}(jQuery));(function(e){e.fmatter=e.fmatter||{};e.jgrid=e.jgrid||{};var d=e.fmatter,f=e.jgrid,b=f.getMethod("getGridRes");e.extend(true,f,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:true,userLocalTime:false},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:true},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(j){var k=j.newValue;return isNaN(k)?k:parseInt(k,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(j){var k=j.newValue;return isNaN(k)?k:parseFloat(k)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(l){var m=l.newValue,k=l.cm,n=String(m).toLowerCase(),j=k.editoptions!=null&&typeof k.editoptions.value==="string"?k.editoptions.value.split(":"):["yes","no"];if(e.inArray(n,["1","true",j[0].toLowerCase()])>=0){m=true}else{if(e.inArray(n,["0","false",j[1].toLowerCase()])>=0){m=false}}return m},stype:"select",searchoptions:{sopt:["eq","ne"],value:":Any;true:Yes;false:No"}},booleanCheckboxFa:{align:"center",formatter:"checkboxFontAwesome4",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(l){var m=l.newValue,k=l.cm,n=String(m).toLowerCase(),j=k.editoptions!=null&&typeof k.editoptions.value==="string"?k.editoptions.value.split(":"):["yes","no"];if(e.inArray(n,["1","true",j[0].toLowerCase()])>=0){m=true}else{if(e.inArray(n,["0","false",j[1].toLowerCase()])>=0){m=false}}return m},stype:"select",searchoptions:{sopt:["eq","ne"],value:":Any;true:Yes;false:No"}},actions:function(){return{formatter:"actions",width:(this.p!=null&&this.p.fontAwesomeIcons?33:36)+(f.cellWidth()?5:0),align:"center",label:"",autoResizable:false,frozen:true,fixed:true,hidedlg:true,resizable:false,sortable:false,search:false,editable:false,viewable:false}}}});e.extend(d,{isObject:function(j){return(j&&(typeof j==="object"||e.isFunction(j)))||false},isNumber:function(j){return typeof j==="number"&&isFinite(j)},isValue:function(j){return(this.isObject(j)||typeof j==="string"||this.isNumber(j)||typeof j==="boolean")},isEmpty:function(j){if(typeof j!=="string"&&this.isValue(j)){return false}if(!this.isValue(j)){return true}j=e.trim(j).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return j===""},NumberFormat:function(l,j){var v=d.isNumber;if(!v(l)){l*=1}if(v(l)){var n=(l<0);var s=String(l);var p=j.decimalSeparator||".";var q;if(v(j.decimalPlaces)){var r=j.decimalPlaces;var m=Math.pow(10,r);s=String(Math.round(l*m)/m);q=s.lastIndexOf(".");if(r>0){if(q<0){s+=p;q=s.length-1}else{if(p!=="."){s=s.replace(".",p)}}while((s.length-1-q)<r){s+="0"}}}if(j.thousandsSeparator){var u=j.thousandsSeparator;q=s.lastIndexOf(p);q=(q>-1)?q:s.length;var t=j.decimalSeparator===undefined?"":s.substring(q);var k=-1,o;for(o=q;o>0;o--){k++;if((k%3===0)&&(o!==q)&&(!n||(o>1))){t=u+t}t=s.charAt(o-1)+t}s=t}return s}return l}});var c=function(n,o,m,j,k){var l=o;m=e.extend({},b.call(e(this),"formatter"),m);try{l=e.fn.fmatter[n].call(this,o,m,j,k)}catch(p){}return l};e.fn.fmatter=c;c.getCellBuilder=function(l,k,j){var m=e.fn.fmatter[l].getCellBuilder;return e.isFunction(m)?m.call(this,e.extend({},b.call(e(this),"formatter"),k),j):null};c.defaultFormat=function(k,j){return(d.isValue(k)&&k!=="")?k:j.defaultValue||"&#160;"};var i=c.defaultFormat;c.email=function(k,j){if(!d.isEmpty(k)){return'<a href="mailto:'+k+'">'+k+"</a>"}return i(k,j)};c.checkbox=function(n,l){var j=l.colModel,o=e.extend({},l.checkbox),m;if(j!=null){o=e.extend({},o,j.formatoptions||{})}if(o.disabled===true){m='disabled="disabled"'}else{m=""}if(d.isEmpty(n)||n===undefined){n=i(n,o)}n=String(n);n=String(n).toLowerCase();var k=n.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+k+' value="'+n+'" data-offval="no" '+m+"/>"};c.checkbox.getCellBuilder=function(l){var k=l.colModel,m=e.extend({},l.checkbox),j;if(k!=null){m=e.extend({},m,k.formatoptions||{})}j='" data-offval="no" '+(m.disabled===true?'disabled="disabled"':"")+"/>";return function(n){if(d.isEmpty(n)||n===undefined){n=i(n,m)}n=String(n).toLowerCase();return'<input type="checkbox" '+(n.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"")+' value="'+n+j}};c.checkboxFontAwesome4=function(n,l){var k=l.colModel,p=k.title!==false?' title="'+(l.colName||k.label||k.name)+'"':"",m=String(n).toLowerCase(),o=k.editoptions||{},j=typeof o.value==="string"?o.value.split(":")[0]:"yes";return(n===1||m==="1"||m==="x"||n===true||m==="true"||m==="yes"||m===j)?'<i class="fa fa-check-square-o fa-lg"'+p+"></i>":'<i class="fa fa-square-o fa-lg"'+p+"></i>"};c.checkboxFontAwesome4.getCellBuilder=function(l){var k=l.colModel,p=k.title!==false?' title="'+(l.colName||k.label||k.name)+'"':"",o=k.editoptions||{},j=typeof o.value==="string"?o.value.split(":")[0]:"yes",n='<i class="fa fa-check-square-o fa-lg"'+p+"></i>",m='<i class="fa fa-square-o fa-lg"'+p+"></i>";return function(r){var q=String(r).toLowerCase();return(r===true||r===1||q==="1"||q==="x"||q==="true"||q==="yes"||q===j)?n:m}};c.checkboxFontAwesome4.unformat=function(n,l,m){var k=l.colModel,o=k.editoptions||{},j=typeof o.value==="string"?o.value.split(":"):["Yes","No"];return e(">i",m).hasClass("fa-check-square-o")?j[0]:j[1]};c.link=function(m,k){var j=k.colModel,l="",n={target:k.target};if(j!=null){n=e.extend({},n,j.formatoptions||{})}if(n.target){l="target="+n.target}if(!d.isEmpty(m)){return"<a "+l+' href="'+m+'">'+m+"</a>"}return i(m,n)};c.showlink=function(l,j,k){var t=this,q=j.colModel,m={baseLinkUrl:j.baseLinkUrl,showAction:j.showAction,addParam:j.addParam||"",target:j.target,idName:j.idName,hrefDefaultValue:"#"},p="",s,o,n,r=function(u){return e.isFunction(u)?u.call(t,{cellValue:l,rowid:j.rowId,rowData:k,options:m}):u||""};if(q!=null){m=e.extend({},m,q.formatoptions||{})}if(m.target){p="target="+r(m.target)}s=r(m.baseLinkUrl)+r(m.showAction);o=m.idName?encodeURIComponent(r(m.idName))+"="+encodeURIComponent(r(m.rowId)||j.rowId):"";n=r(m.addParam);if(typeof n==="object"&&n!==null){n=(o!==""?"&":"")+e.param(n)}s+=!o&&!n?"":"?"+o+n;if(s===""){s=r(m.hrefDefaultValue)}if(typeof l==="string"||d.isNumber(l)||e.isFunction(m.cellValue)){return"<a "+p+' href="'+s+'">'+(e.isFunction(m.cellValue)?r(m.cellValue):l)+"</a>"}return i(l,m)};c.showlink.getCellBuilder=function(k){var l={baseLinkUrl:k.baseLinkUrl,showAction:k.showAction,addParam:k.addParam||"",target:k.target,idName:k.idName,hrefDefaultValue:"#"},j=k.colModel;if(j!=null){l=e.extend({},l,j.formatoptions||{})}return function(p,m,o){var v=this,n=m.rowId,r="",u,s,q,t=function(w){return e.isFunction(w)?w.call(v,{cellValue:p,rowid:n,rowData:o,options:l}):w||""};if(l.target){r="target="+t(l.target)}u=t(l.baseLinkUrl)+t(l.showAction);s=l.idName?encodeURIComponent(t(l.idName))+"="+encodeURIComponent(t(n)||m.rowId):"";q=t(l.addParam);if(typeof q==="object"&&q!==null){q=(s!==""?"&":"")+e.param(q)}u+=!s&&!q?"":"?"+s+q;if(u===""){u=t(l.hrefDefaultValue)}if(typeof p==="string"||d.isNumber(p)||e.isFunction(l.cellValue)){return"<a "+r+' href="'+u+'">'+(e.isFunction(l.cellValue)?t(l.cellValue):p)+"</a>"}return i(p,l)}};c.showlink.pageFinalization=function(s){var q=e(this),j=this.p,o=j.colModel,r=o[s],l,u=this.rows,n=u.length,t,k,m=function(v){var p=e(this).closest(".jqgrow");if(p.length>0){return r.formatoptions.onClick.call(q[0],{iCol:s,iRow:p[0].rowIndex,rowid:p.attr("id"),cm:r,cmName:r.name,cellValue:e(this).text(),a:this,event:v})}};if(r.formatoptions!=null&&e.isFunction(r.formatoptions.onClick)){for(l=0;l<n;l++){t=u[l];if(e(t).hasClass("jqgrow")){k=t.cells[s];if(r.autoResizable&&k!=null&&e(k.firstChild).hasClass(j.autoResizing.wrapperClassName)){k=k.firstChild}e(k.firstChild).bind("click",m)}}}};var g=function(k,j){k=(j.prefix)?j.prefix+k:k;return(j.suffix)?k+j.suffix:k},a=function(m,k,l){var j=k.colModel,n=e.extend({},k[l]);if(j!=null){n=e.extend({},n,j.formatoptions||{})}if(d.isEmpty(m)){return g(n.defaultValue,n)}return g(d.NumberFormat(m,n),n)};c.integer=function(k,j){return a(k,j,"integer")};c.number=function(k,j){return a(k,j,"number")};c.currency=function(k,j){return a(k,j,"currency")};var h=function(m,n){var l=m.colModel,o=e.extend({},m[n]);if(l!=null){o=e.extend({},o,l.formatoptions||{})}var j=d.NumberFormat,k=o.defaultValue?g(o.defaultValue,o):"";return function(p){if(d.isEmpty(p)){return k}return g(j(p,o),o)}};c.integer.getCellBuilder=function(j){return h(j,"integer")};c.number.getCellBuilder=function(j){return h(j,"number")};c.currency.getCellBuilder=function(j){return h(j,"currency")};c.date=function(n,m,j,k){var l=m.colModel,o=e.extend({},m.date);if(l!=null){o=e.extend({},o,l.formatoptions||{})}if(!o.reformatAfterEdit&&k==="edit"){return i(n,o)}if(!d.isEmpty(n)){return f.parseDate.call(this,o.srcformat,n,o.newformat,o)}return i(n,o)};c.date.getCellBuilder=function(l,j){var o=e.extend({},l.date);if(l.colModel!=null){o=e.extend({},o,l.colModel.formatoptions||{})}var n=f.parseDate,k=o.srcformat,m=o.newformat;if(!o.reformatAfterEdit&&j==="edit"){return function(p){return i(p,o)}}return function(p){return d.isEmpty(p)?i(p,o):n.call(this,k,p,m,o)}};c.select=function(n,j){var q=[],t=j.colModel,r,p=e.extend({},t.editoptions||{},t.formatoptions||{}),m=p.value,z=p.separator||":",l=p.delimiter||";";if(m){var y=p.multiple===true?true:false,x=[],w,s=function(A,v){if(v>0){return A}};if(y){x=e.map(String(n).split(","),function(v){return e.trim(v)})}if(typeof m==="string"){var k=m.split(l),o,u;for(o=0;o<k.length;o++){w=k[o].split(z);if(w.length>2){w[1]=e.map(w,s).join(z)}u=e.trim(w[0]);if(p.defaultValue===u){r=w[1]}if(y){if(e.inArray(u,x)>-1){q.push(w[1])}}else{if(u===e.trim(n)){q=[w[1]];break}}}}else{if(d.isObject(m)){r=m[p.defaultValue];if(y){q=e.map(x,function(v){return m[v]})}else{q=[m[n]===undefined?"":m[n]]}}}}n=q.join(", ");return n!==""?n:(p.defaultValue!==undefined?r:i(n,p))};c.select.getCellBuilder=function(j){var u=j.colModel,x=c.defaultFormat,r=e.extend({},u.editoptions||{},u.formatoptions||{}),o=r.value,y=r.separator||":",l=r.delimiter||";",s,n=r.defaultValue!==undefined,q=r.multiple===true?true:false,w,k,p,v,m={},t=function(A,z){if(z>0){return A}};if(typeof o==="string"){k=o.split(l);v=k.length;for(p=v-1;p>=0;p--){w=k[p].split(y);if(w.length>2){w[1]=e.map(w,t).join(y)}m[e.trim(w[0])]=w[1]}}else{if(d.isObject(o)){m=o}else{return function(z){return z?String(z):x(z,r)}}}if(n){s=m[r.defaultValue]}return q?function(B){var z=[],A,C=e.map(String(B).split(","),function(D){return e.trim(D)});for(A=0;A<C.length;A++){B=C[A];if(m.hasOwnProperty(B)){z.push(m[B])}}B=z.join(", ");return B!==""?B:(n?s:x(B,r))}:function(A){var z=m[String(A)];return z!==""&&z!==undefined?z:(n?s:x(A,r))}};c.rowactions=function(s,t){var r=e(this).closest("tr.jqgrow"),v=r.attr("id"),x=e(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),w=e("#"+f.jqID(x)),m=w[0],j=m.p,u=j.colModel[f.getCellIndex(this)],q=e.extend(true,{extraparam:{}},f.actionsNav||{},j.actionsNavOptions||{},u.formatoptions||{});if(j.editOptions!==undefined){q.editOptions=j.editOptions}if(j.delOptions!==undefined){q.delOptions=j.delOptions}if(r.hasClass("jqgrid-new-row")){q.extraparam[j.prmNames.oper]=j.prmNames.addoper}var o={keys:q.keys,oneditfunc:q.onEdit,successfunc:q.onSuccess,url:q.url,extraparam:q.extraparam,aftersavefunc:q.afterSave,errorfunc:q.onError,afterrestorefunc:q.afterRestore,restoreAfterError:q.restoreAfterError,mtype:q.mtype};if((!j.multiselect&&v!==j.selrow)||(j.multiselect&&e.inArray(v,j.selarrrow)<0)){w.jqGrid("setSelection",v,true,s)}else{f.fullBoolFeedback.call(m,"onSelectRow","jqGridSelectRow",v,true,s)}switch(t){case"edit":w.jqGrid("editRow",v,o);break;case"save":w.jqGrid("saveRow",v,o);break;case"cancel":w.jqGrid("restoreRow",v,q.afterRestore);break;case"del":q.delOptions=q.delOptions||{};if(q.delOptions.top===undefined){q.delOptions.top=r.offset().top+r.outerHeight()-w.closest(".ui-jqgrid").offset().top}w.jqGrid("delGridRow",v,q.delOptions);break;case"formedit":q.editOptions=q.editOptions||{};if(q.editOptions.top===undefined){q.editOptions.top=r.offset().top+r.outerHeight()-w.closest(".ui-jqgrid").offset().top;q.editOptions.recreateForm=true}w.jqGrid("editGridRow",v,q.editOptions);break;default:if(q.custom!=null&&q.custom.length>0){var l,k=q.custom.length,y;for(l=0;l<k;l++){y=q.custom[l];if(y.action===t&&e.isFunction(y.onClick)){y.onClick.call(m,{rowid:v,event:s,action:t,options:y})}}}}if(s.stopPropagation){s.stopPropagation()}return false};c.actions=function(m,s,r,G){var o=s.rowId,x="",B=this,u=B.p,C=e(B),A,E,F,j={},v=b.call(C,"edit")||{},q=e.extend({editbutton:true,delbutton:true,editformbutton:false,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:v.bSubmit||"",canceltitle:v.bCancel||""},b.call(C,"nav")||{},f.nav||{},u.navOptions||{},b.call(C,"actionsNav")||{},f.actionsNav||{},u.actionsNavOptions||{},s.colModel.formatoptions||{}),k=f.mergeCssClasses,z=function(n){return k(q.commonIconClass,q[n+"icon"])},l=k(f.getRes(f.guiStyles[u.guiStyle],"states.hover")),y="onmouseover=jQuery(this).addClass('"+l+"'); onmouseout=jQuery(this).removeClass('"+l+"'); ",H=[{action:"edit",actionName:"formedit",display:q.editformbutton},{action:"edit",display:!q.editformbutton&&q.editbutton},{action:"del",idPrefix:"Delete",display:q.delbutton},{action:"save",display:q.editformbutton||q.editbutton,hidden:true},{action:"cancel",display:q.editformbutton||q.editbutton,hidden:true}],t=function(p){var J=p.action,n=p.actionName||J,I=p.idPrefix!==undefined?p.idPrefix:(J.charAt(0).toUpperCase()+J.substring(1));return"<div title='"+q[J+"title"]+(p.hidden?"' style='display:none;":"")+"' class='ui-pg-div ui-inline-"+J+"' "+(I!==null?"id='j"+I+"Button_"+o:"")+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'"+n+"');\" "+(p.noHovering?"":y)+"><span class='"+z(J)+"'></span></div>"},w=q.custom!=null?q.custom.length-1:-1;if(o===undefined||d.isEmpty(o)){return""}if(e.isFunction(q.isDisplayButtons)){try{j=q.isDisplayButtons.call(B,s,r,G)||{}}catch(D){}}while(w>=0){E=q.custom[w--];H[E.position==="first"?"unshift":"push"](E)}for(A=0,w=H.length;A<w;A++){F=e.extend({},H[A],j[H[A].action]||{});if(F.display!==false){x+=t(F)}}return"<div class='ui-jqgrid-actions'>"+x+"</div>"};c.actions.pageFinalization=function(m){var q=e(this),o=this.p,l=o.colModel,k=l[m],r=function(s,w){var v=0,x,t,p=l.length,u;for(u=0;u<p;u++){if(l[u].frozen!==true){break}v=u}x=q.jqGrid("getGridRowById",w);if(x!=null&&x.cells!=null){m=o.iColByName[k.name];t=e(x.cells[m]).children(".ui-jqgrid-actions");if(k.frozen&&o.frozenColumns&&m<=v){t=t.add(e(q[0].grid.fbRows[x.rowIndex].cells[m]).children(".ui-jqgrid-actions"))}if(s){t.find(">.ui-inline-edit,>.ui-inline-del").show();t.find(">.ui-inline-save,>.ui-inline-cancel").hide()}else{t.find(">.ui-inline-edit,>.ui-inline-del").hide();t.find(">.ui-inline-save,>.ui-inline-cancel").show()}}},j=function(s,p){r(true,p);return false},n=function(s,p){r(false,p);return false};if(k.formatoptions==null||!k.formatoptions.editformbutton){q.unbind("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",j);q.bind("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",j);q.unbind("jqGridInlineEditRow.jqGridFormatter",n);q.bind("jqGridInlineEditRow.jqGridFormatter",n)}};e.unformat=function(n,z,v,k){var t,w=z.colModel,o=w.formatter,j=this.p,r=w.formatoptions||{},u=w.unformat||(c[o]&&c[o].unformat);if(n instanceof jQuery&&n.length>0){n=n[0]}if(j.treeGrid&&n!=null&&e(n.firstChild).hasClass("tree-wrap")&&(e(n.lastChild).hasClass("cell-wrapper")||e(n.lastChild).hasClass("cell-wrapperleaf"))){n=n.lastChild}if(w.autoResizable&&n!=null&&e(n.firstChild).hasClass(j.autoResizing.wrapperClassName)){n=n.firstChild}if(u!==undefined&&e.isFunction(u)){t=u.call(this,e(n).text(),z,n)}else{if(o!==undefined&&typeof o==="string"){var x=e(this),m=function(A,p){return r[p]!==undefined?r[p]:b.call(x,"formatter."+A+"."+p)},s=function(p,B){var A=m(p,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return B.replace(new RegExp(A,"g"),"")};switch(o){case"integer":t=s("integer",e(n).text());break;case"number":t=s("number",e(n).text()).replace(m("number","decimalSeparator"),".");break;case"currency":t=e(n).text();var q=m("currency","prefix"),y=m("currency","suffix");if(q&&q.length){t=t.substr(q.length)}if(y&&y.length){t=t.substr(0,t.length-y.length)}t=s("number",t).replace(m("number","decimalSeparator"),".");break;case"checkbox":var l=(w.editoptions!=null&&typeof w.editoptions.value==="string")?w.editoptions.value.split(":"):["Yes","No"];t=e("input",n).is(":checked")?l[0]:l[1];break;case"select":t=e.unformat.select(n,z,v,k);break;case"actions":return"";default:t=e(n).text()}}}t=t!==undefined?t:k===true?e(n).text():f.htmlDecode(e(n).html());return t};e.unformat.select=function(n,o,p,w){var B=[],l=e(n).text(),s=o.colModel;if(w===true){return l}var r=e.extend({},s.editoptions||{},s.formatoptions||{}),t=r.separator===undefined?":":r.separator,A=r.delimiter===undefined?";":r.delimiter;if(r.value){var q=r.value,m=r.multiple===true?true:false,k=[],u,z=function(C,j){if(j>0){return C}};if(m){k=l.split(",");k=e.map(k,function(j){return e.trim(j)})}if(typeof q==="string"){var y=q.split(A),v=0,x;for(x=0;x<y.length;x++){u=y[x].split(t);if(u.length>2){u[1]=e.map(u,z).join(t)}if(m){if(e.inArray(e.trim(u[1]),k)>-1){B[v]=u[0];v++}}else{if(e.trim(u[1])===e.trim(l)){B[0]=u[0];break}}}}else{if(d.isObject(q)||e.isArray(q)){if(!m){k[0]=l}B=e.map(k,function(C){var j;e.each(q,function(D,E){if(E===C){j=D;return false}});if(j!==undefined){return j}})}}return B.join(", ")}return l||""};e.unformat.date=function(k,j){var l=e.extend(true,{},b.call(e(this),"formatter.date"),f.formatter.date||{},j.formatoptions||{});return !d.isEmpty(k)?f.parseDate.call(this,l.newformat,k,l.srcformat,l):""}}(jQuery));(function(){window.xmlJsonClass={xml2json:function(b,d){if(b.nodeType===9){b=b.documentElement}var a=this.removeWhite(b),e=this.toObj(a),c=this.toJson(e,b.nodeName,"\t");return"{\n"+d+(d?c.replace(/\t/g,d):c.replace(/\t|\n/g,""))+"\n}"},json2xml:function(d,b){var e=function(q,f,h){var o="",l,g,p,k,j;if(q instanceof Array){if(q.length===0){o+=h+"<"+f+">__EMPTY_ARRAY_</"+f+">\n"}else{for(l=0,g=q.length;l<g;l+=1){p=h+e(q[l],f,h+"\t")+"\n";o+=p}}}else{if(typeof q==="object"){k=false;o+=h+"<"+f;for(j in q){if(q.hasOwnProperty(j)){if(j.charAt(0)==="@"){o+=" "+j.substr(1)+'="'+q[j].toString()+'"'}else{k=true}}}o+=k?">":"/>";if(k){for(j in q){if(q.hasOwnProperty(j)){if(j==="#text"){o+=q[j]}else{if(j==="#cdata"){o+="<![CDATA["+q[j]+"]]>"}else{if(j.charAt(0)!=="@"){o+=e(q[j],j,h+"\t")}}}}}o+=(o.charAt(o.length-1)==="\n"?h:"")+"</"+f+">"}}else{if(typeof q==="function"){o+=h+"<"+f+"><![CDATA["+q+"]]></"+f+">"}else{if(q===undefined){q=""}if(q.toString()==='""'||q.toString().length===0){o+=h+"<"+f+">__EMPTY_STRING_</"+f+">"}else{o+=h+"<"+f+">"+q.toString()+"</"+f+">"}}}}return o},c="",a;for(a in d){if(d.hasOwnProperty(a)){c+=e(d[a],a,"")}}return b?c.replace(/\t/g,b):c.replace(/\t|\n/g,"")},toObj:function(b){var g={},f=/function/i,e,a=0,d=0,c=false,h;if(b.nodeType===1){if(b.attributes.length){for(e=0;e<b.attributes.length;e+=1){g["@"+b.attributes[e].nodeName]=(b.attributes[e].nodeValue||"").toString()}}if(b.firstChild){for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===1){c=true}else{if(h.nodeType===3&&h.nodeValue.match(/[^ \f\n\r\t\v]/)){a+=1}else{if(h.nodeType===4){d+=1}}}}if(c){if(a<2&&d<2){this.removeWhite(b);for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===3){g["#text"]=this.escape(h.nodeValue)}else{if(h.nodeType===4){if(f.test(h.nodeValue)){g[h.nodeName]=[g[h.nodeName],h.nodeValue]}else{g["#cdata"]=this.escape(h.nodeValue)}}else{if(g[h.nodeName]){if(g[h.nodeName] instanceof Array){g[h.nodeName][g[h.nodeName].length]=this.toObj(h)}else{g[h.nodeName]=[g[h.nodeName],this.toObj(h)]}}else{g[h.nodeName]=this.toObj(h)}}}}}else{if(!b.attributes.length){g=this.escape(this.innerXml(b))}else{g["#text"]=this.escape(this.innerXml(b))}}}else{if(a){if(!b.attributes.length){g=this.escape(this.innerXml(b));if(g==="__EMPTY_ARRAY_"){g="[]"}else{if(g==="__EMPTY_STRING_"){g=""}}}else{g["#text"]=this.escape(this.innerXml(b))}}else{if(d){if(d>1){g=this.escape(this.innerXml(b))}else{for(h=b.firstChild;h;h=h.nextSibling){if(f.test(b.firstChild.nodeValue)){g=b.firstChild.nodeValue;break}g["#cdata"]=this.escape(h.nodeValue)}}}}}}if(!b.attributes.length&&!b.firstChild){g=null}}else{if(b.nodeType===9){g=this.toObj(b.documentElement)}else{alert("unhandled node type: "+b.nodeType)}}return g},toJson:function(b,a,d,e){if(e===undefined){e=true}var p=a?('"'+a+'"'):"",f="\t",g="\n",c,k,j=[],l=[],h;if(!e){f="";g=""}if(b==="[]"){p+=(a?":[]":"[]")}else{if(b instanceof Array){for(k=0,c=b.length;k<c;k+=1){j[k]=this.toJson(b[k],"",d+f,e)}p+=(a?":[":"[")+(j.length>1?(g+d+f+j.join(","+g+d+f)+g+d):j.join(""))+"]"}else{if(b===null){p+=(a&&":")+"null"}else{if(typeof b==="object"){for(h in b){if(b.hasOwnProperty(h)){l[l.length]=this.toJson(b[h],h,d+f,e)}}p+=(a?":{":"{")+(l.length>1?(g+d+f+l.join(","+g+d+f)+g+d):l.join(""))+"}"}else{if(typeof b==="string"){p+=(a&&":")+'"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'}else{p+=(a&&":")+b.toString()}}}}}return p},innerXml:function(c){var b="",d,a=function(h){var f="",e,g;if(h.nodeType===1){f+="<"+h.nodeName;for(e=0;e<h.attributes.length;e+=1){f+=" "+h.attributes[e].nodeName+'="'+(h.attributes[e].nodeValue||"").toString()+'"'}if(h.firstChild){f+=">";for(g=h.firstChild;g;g=g.nextSibling){f+=a(g)}f+="</"+h.nodeName+">"}else{f+="/>"}}else{if(h.nodeType===3){f+=h.nodeValue}else{if(h.nodeType===4){f+="<![CDATA["+h.nodeValue+"]]>"}}}return f};if(c.hasOwnProperty("innerHTML")){b=c.innerHTML}else{for(d=c.firstChild;d;d=d.nextSibling){b+=a(d)}}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(b){b.normalize();var c=b.firstChild,a;while(c){if(c.nodeType===3){if(!c.nodeValue.match(/[^ \f\n\r\t\v]/)){a=c.nextSibling;b.removeChild(c);c=a}else{c=c.nextSibling}}else{if(c.nodeType===1){this.removeWhite(c);c=c.nextSibling}else{c=c.nextSibling}}}return b}}}());