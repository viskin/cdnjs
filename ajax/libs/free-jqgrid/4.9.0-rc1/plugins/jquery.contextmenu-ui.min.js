(function(f){var b,i,g,e,c,h=f.ui!=null&&typeof f.ui.version==="string"?/^([0-9]+)\.([0-9]+)\.([0-9]+)$/.exec(f.ui.version):[],a=h!=null&&h.length===4&&h[1]==="1"&&h[2]<11,d={menuClasses:"ui-menu ui-widget ui-widget-content ui-corner-all",menuIconClasses:"ui-menu-icons ui-menu ui-widget ui-widget-content ui-corner-all",menuDivStyle:{position:"absolute",zIndex:"500"},menuStyle:{width:"100%"},itemClasses:"ui-menu-item",itemStyle:{},itemHoverStyle:{},itemAnchorClasses:"ui-corner-all",itemAnchorStyle:{position:"relative",paddingRight:"0"},itemIconAnchorStyle:{paddingLeft:"2em"},itemIconSpanStyle:{left:".2em",top:".3em",marginRight:".5em",position:"absolute","float":"left"},itemHoverAnchorClasses:"ui-state-hover",eventPosX:"pageX",eventPosY:"pageY",shadow:true,menuShadowClasses:"ui-widget-shadow",menuShadowStyle:{position:"absolute",zIndex:"499",margin:"0",padding:"1px 0 0 6px"},onContextMenu:null,onShowMenu:null};f.fn.contextMenu=function(n,k){e=e||[];e.push({id:n,menuDivStyle:f.extend({},d.menuDivStyle,k.menuDivStyle||{}),menuStyle:f.extend({},d.menuStyle,k.menuStyle||{}),menuShadowStyle:f.extend({},d.menuShadowStyle,k.menuShadowStyle||{}),itemStyle:f.extend({},d.itemStyle,k.itemStyle||{}),itemHoverStyle:f.extend({},d.itemHoverStyle,k.itemHoverStyle||{}),menuClasses:k.menuClasses||d.menuClasses,menuIconClasses:k.menuIconClasses||d.menuIconClasses,menuShadowClasses:k.menuShadowClasses||d.menuShadowClasses,itemClasses:k.itemClasses||d.itemClasses,itemAnchorClasses:k.itemAnchorClasses||d.itemAnchorClasses,itemAnchorStyle:f.extend({},d.itemAnchorStyle,k.itemAnchorStyle||{}),itemIconSpanStyle:f.extend({},d.itemIconSpanStyle,k.itemIconSpanStyle||{}),itemIconAnchorStyle:f.extend({},d.itemIconAnchorStyle,k.itemIconAnchorStyle||{}),itemHoverAnchorClasses:k.itemHoverAnchorClasses||d.itemHoverAnchorClasses,bindings:k.bindings||{},shadow:k.shadow||k.shadow===false?k.shadow:d.shadow,onContextMenu:k.onContextMenu||d.onContextMenu,onShowMenu:k.onShowMenu||d.onShowMenu,eventPosX:k.eventPosX||d.eventPosX,eventPosY:k.eventPosY||d.eventPosY});function l(){b.hide().attr("aria-hidden","true");i.hide().attr("aria-hidden","true")}function m(r,q,s){var u=e[r],p;g=f("#"+u.id).find("ul:first").clone(true);b.html(g);if(!!u.onShowMenu){b=u.onShowMenu(s,b)}if(u.menuClasses){if(u.menuIconClasses&&g.find(".ui-icon").length>0){g.addClass(u.menuIconClasses)}else{g.addClass(u.menuClasses)}}if(!f.isEmptyObject(u.menuStyle)){g.css(u.menuStyle)}p=g.attr("role","menu").find("li");if(u.itemClasses){p.addClass(u.itemClasses).attr("role",a?"presentation":"menuitem")}if(!f.isEmptyObject(u.itemStyle)){p.css(u.itemStyle)}if(u.itemAnchorClasses){if(a){p.children("a").addClass(u.itemAnchorClasses).filter(":not([role])").attr("role","menuitem")}else{p.addClass(u.itemAnchorClasses)}}if(!f.isEmptyObject(u.itemAnchorStyle)){p.children("a").css(u.itemAnchorStyle)}if(!f.isEmptyObject(u.itemIconSpanStyle)){p.children("a").children("span.ui-icon").css(u.itemIconSpanStyle).parent("a").css(u.itemIconAnchorStyle)}if(f.isEmptyObject(u.itemHoverStyle)){p.hover(function(){var v=a?f(this).children("a"):f(this);v.addClass(u.itemHoverAnchorClasses)},function(){var v=a?f(this).children("a"):f(this);v.removeClass(u.itemHoverAnchorClasses)})}else{if(!f.isEmptyObject(u.itemHoverStyle)){p.hover(function(){f(this).css(u.itemHoverStyle)},function(){f(this).css(u.itemStyle)})}}p.find("img").css({verticalAlign:"middle",paddingRight:"2px"});f.each(u.bindings,function(w,v){f("#"+w,b).bind("click",function(){l();v(q,c)})});b.css({left:s[u.eventPosX],top:s[u.eventPosY],"white-space":"pre"}).show().removeAttr("aria-hidden");if(u.shadow){i.css({width:b.width(),height:b.height(),left:s.pageX+2,top:s.pageY+2}).show().removeAttr("aria-hidden")}var t=b.offset(),o=0;if(t.top+b.height()>f(window).scrollTop()+window.innerHeight){o=f(window).scrollTop()-t.top-b.height()+window.innerHeight;t.top+=o;b.offset(t);t=i.offset();t.top+=o;i.offset(t)}f(document).one("click",l)}var j=e.length-1;if(!b){b=f('<div class="jqContextMenu"></div>').hide().attr("aria-hidden","true").css(e[j].menuDivStyle).appendTo("body").bind("click",function(o){o.stopPropagation()}).mouseleave(function(o){if(o.pageX===-1&&o.pageY===-1){return}l()})}if(!i){i=f("<div></div>").addClass(e[j].menuShadowClasses).css(e[j].menuShadowStyle).appendTo("body").hide().attr("aria-hidden","true")}f(this).bind("contextmenu",function(p){var o=(!!e[j].onContextMenu)?e[j].onContextMenu(p):true;c=p.target;if(o){m(j,this,p,k);return false}l();return true});return this};f.contextMenu={defaults:function(j){f.each(j,function(k,l){if(typeof l==="object"&&d[k]){f.extend(d[k],l)}else{d[k]=l}})}};f(function(){f("div.contextMenu").hide().attr("aria-hidden","true")})}(jQuery));