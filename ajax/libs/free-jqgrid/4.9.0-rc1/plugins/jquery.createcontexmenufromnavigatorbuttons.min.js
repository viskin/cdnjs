(function(a){a.jgrid.extend({createContexMenuFromNavigatorButtons:function(b,e){var d=this,h="menu_"+d[0].id,c=a("<ul>"),f=a("<div>").attr("id",h),g=function(){var i="";if(window.getSelection){i=window.getSelection()}else{if(document.getSelection){i=document.getSelection()}else{if(document.selection){i=document.selection.createRange().text}}}return typeof i==="string"?i:i.toString()};c.appendTo(f);f.appendTo("body");d.contextMenu(h,{bindings:{},onContextMenu:function(q){var o=d[0].p,l,m,j=a(q.target),n=j.closest("tr.jqgrow").attr("id"),k=j.is(":text:enabled")||j.is("input[type=textarea]:enabled")||j.is("textarea:enabled");if(n&&!k&&g()===""){l=a.inArray(n,o.selarrrow);if(o.selrow!==n&&l<0){d.jqGrid("setSelection",n)}else{if(o.multiselect){m=o.selarrrow[o.selarrrow.length-1];if(l!==o.selarrrow.length-1){o.selarrrow[o.selarrrow.length-1]=n;o.selarrrow[l]=m;o.selrow=n}}}return true}return false},onShowMenu:function(m,k){var i=this,l=k.children("ul").first().empty(),j=a.ui!=null&&typeof a.ui.version==="string"?/^([0-9]+)\.([0-9]+)\.([0-9]+)$/.exec(a.ui.version):[],n=j!=null&&j.length===4&&j[1]==="1"&&j[2]<11;a(b).find(".navtable .ui-pg-button").filter(function(){return !(a(this).prop("disabled")||a(this).hasClass("ui-state-disabled"))}).each(function(){var p,r,q,t,s,o=a(this).children("div.ui-pg-div").first();if(o.length===1){r=o.children(".ui-pg-button-text").html();q=o.parent();if(a.trim(r)===""){r=q.attr("title")}if(this.id!==""&&r!==""){t="menuitem_"+this.id}else{t=a.jgrid.randId()}s=a("<li>").attr("id",t);p=o.children("span").not(".ui-pg-button-text").first();if(p.length>0){if(n){s.append(a("<a>").html(r).prepend(p.clone().removeClass("ui-pg-button-icon-over-text").css({"float":"left",marginTop:p.hasClass("ui-icon")?"0.25em":"0.125em",marginRight:"0.5em"})))}else{s.html(r).prepend(p.clone().removeClass("ui-pg-button-icon-over-text").css({"float":"left",marginTop:p.first().hasClass("ui-icon")?"0.25em":"0.125em",marginRight:"0.5em"}))}if(o.parent().hasClass("ui-state-active")){s.find("span").addClass("ui-state-active")}if(s.find("select,input").length>0){s.hide()}l.append(s);i.bindings[t]=(function(u){return function(){u.click()}}(o))}}});a.jgrid.fullBoolFeedback.call(d,(e||{}).onShowContextMenu,"jqGridShowContextMenu",l,i);return k}})}})}(jQuery));