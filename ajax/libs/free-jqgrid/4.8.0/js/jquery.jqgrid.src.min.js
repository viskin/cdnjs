(function($){var englishLanguageDefaults={name:"English (United States)",nameEnglish:"English (United States)",isRTL:false,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(j){var ending=["st","nd","rd","th"];return j<11||j>13?ending[Math.min((j-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};$.jgrid=$.jgrid||{};var jgrid=$.jgrid;jgrid.locales=jgrid.locales||{};var locales=jgrid.locales;if(jgrid.defaults==null||$.isEmptyObject(locales)||locales["en-US"]===undefined){if(locales["en-US"]===undefined){$.extend(true,$.jgrid,{locales:{"en-US":englishLanguageDefaults}})}jgrid.defaults=jgrid.defaults||{};if(jgrid.defaults.locale===undefined){jgrid.defaults.locale="en-US"}}$.extend(true,jgrid,{version:"4.8.0",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-carat-1-sw",openRtl:"ui-icon-carat-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"ui-state-default fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"ui-resizable-se ui-state-default fa fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"ui-state-default fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"}}},htmlDecode:function(value){if(value&&(value==="&nbsp;"||value==="&#160;"||(value.length===1&&value.charCodeAt(0)===160))){return""}return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},clearArray:function(ar){while(ar.length>0){ar.pop()}},format:function(format){var args=$.makeArray(arguments).slice(1);if(format==null){format=""}return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var rv=-1,match=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);if(match.length===3){rv=parseFloat(match[2]||-1)}return rv},getCellIndex:function(cell){var c=$(cell);if(c.is("tr")){return -1}c=(!c.is("td")&&!c.is("th")?c.closest("td,th"):c)[0];if(jgrid.msie){return $.inArray(c,c.parentNode.cells)}return c.cellIndex},stripHtml:function(v){v=String(v);if(v){v=v.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,"");return(v&&v!=="&nbsp;"&&v!=="&#160;")?v.replace(/\"/g,"'"):""}return v},stripPref:function(pref,id){var obj=$.type(pref);if(obj==="string"||obj==="number"){pref=String(pref);id=pref!==""?String(id).replace(String(pref),""):id}return id},parse:function(jsonString){var js=jsonString;if(js.substr(0,9)==="while(1);"){js=js.substr(9)}if(js.substr(0,2)==="/*"){js=js.substr(2,js.length-4)}if(!js){js="{}"}return(jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function")?JSON.parse(js):eval("("+js+")")},getRes:function(base,path){var pathParts=path.split("."),n=pathParts.length,i;if(base==null){return undefined}for(i=0;i<n;i++){if(!pathParts[i]){return null}base=base[pathParts[i]];if(base===undefined){break}if(typeof base==="string"){return base}}return base},parseDate:function(format,date,newformat,opts){var token=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g,timezoneClip=/[^\-+\dA-Z]/g,msMatch=((typeof date==="string")?date.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null),pad=function(value,length){value=String(value);length=parseInt(length,10)||2;while(value.length<length){value="0"+value}return value},ts={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},timestamp=0,dM,k,hl,h12To24=function(ampm,h){if(ampm===0){if(h===12){h=0}}else{if(h!==12){h+=12}}return h},offset=0;if(opts===undefined){opts=this.p!=null?jgrid.getRes(locales[this.p.locale],"formatter.date")||jgrid.formatter.date:jgrid.formatter.date}if(opts.parseRe===undefined){opts.parseRe=/[#%\\\/:_;.,\t\s\-]/}if(opts.masks.hasOwnProperty(format)){format=opts.masks[format]}if(date&&date!=null){if(!isNaN(date)&&String(format).toLowerCase()==="u"){timestamp=new Date(parseFloat(date)*1000)}else{if(date.constructor===Date){timestamp=date}else{if(msMatch!==null){timestamp=new Date(parseInt(msMatch[1],10));if(msMatch[3]){offset=Number(msMatch[5])*60+Number(msMatch[6]);offset*=((msMatch[4]==="-")?1:-1);offset-=timestamp.getTimezoneOffset();timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}else{if(opts.srcformat==="ISO8601Long"&&date.charAt(date.length-1)==="Z"){offset-=(new Date()).getTimezoneOffset()}date=String(date).replace(/\T/g,"#").replace(/\t/,"%").split(opts.parseRe);format=format.replace(/\T/g,"#").replace(/\t/,"%").split(opts.parseRe);for(k=0,hl=format.length;k<hl;k++){switch(format[k]){case"M":dM=$.inArray(date[k],opts.monthNames);if(dM!==-1&&dM<12){date[k]=dM+1;ts.m=date[k]}break;case"F":dM=$.inArray(date[k],opts.monthNames,12);if(dM!==-1&&dM>11){date[k]=dM+1-12;ts.m=date[k]}break;case"n":ts.m=parseInt(date[k],10);break;case"j":ts.d=parseInt(date[k],10);break;case"g":ts.h=parseInt(date[k],10);break;case"a":dM=$.inArray(date[k],opts.AmPm);if(dM!==-1&&dM<2&&date[k]===opts.AmPm[dM]){date[k]=dM;ts.h=h12To24(date[k],ts.h)}break;case"A":dM=$.inArray(date[k],opts.AmPm);if(dM!==-1&&dM>1&&date[k]===opts.AmPm[dM]){date[k]=dM-2;ts.h=h12To24(date[k],ts.h)}break}if(date[k]!==undefined){ts[format[k].toLowerCase()]=parseInt(date[k],10)}}if(ts.f){ts.m=ts.f}if(ts.m===0&&ts.y===0&&ts.d===0){return"&#160;"}ts.m=parseInt(ts.m,10)-1;var ty=ts.y;if(ty>=70&&ty<=99){ts.y=1900+ts.y}else{if(ty>=0&&ty<=69){ts.y=2000+ts.y}}timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u);if(offset>0){timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}}}}else{timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u)}if(opts.userLocalTime&&offset===0){offset-=(new Date()).getTimezoneOffset();if(offset>0){timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}if(newformat===undefined){return timestamp}if(opts.masks.hasOwnProperty(newformat)){newformat=opts.masks[newformat]}else{if(!newformat){newformat="Y-m-d"}}var hours=timestamp.getHours(),i=timestamp.getMinutes(),j=timestamp.getDate(),n=timestamp.getMonth()+1,o=timestamp.getTimezoneOffset(),s=timestamp.getSeconds(),u=timestamp.getMilliseconds(),w=timestamp.getDay(),year=timestamp.getFullYear(),dayOfWeek=(w+6)%7+1,z=(new Date(year,n-1,j)-new Date(year,0,1))/86400000,weekNumberOfYear=dayOfWeek<5?Math.floor((z+dayOfWeek-1)/7)+1:Math.floor((z+dayOfWeek-1)/7)||((new Date(year-1,0,1).getDay()+6)%7<4?53:52),flags={d:pad(j),D:opts.dayNames[w],j:j,l:opts.dayNames[w+7],N:dayOfWeek,S:opts.S(j),w:w,z:z,W:weekNumberOfYear,F:opts.monthNames[n-1+12],m:pad(n),M:opts.monthNames[n-1],n:n,t:"?",L:"?",o:"?",Y:year,y:String(year).substring(2),a:hours<12?opts.AmPm[0]:opts.AmPm[1],A:hours<12?opts.AmPm[2]:opts.AmPm[3],B:"?",g:hours%12||12,G:hours,h:pad(hours%12||12),H:pad(hours),i:pad(i),s:pad(s),u:u,e:"?",I:"?",O:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),P:"?",T:(String(timestamp).match(timezone)||[""]).pop().replace(timezoneClip,""),Z:"?",c:"?",r:"?",U:Math.floor(timestamp/1000)};return newformat.replace(token,function($0){return flags.hasOwnProperty($0)?flags[$0]:$0.substring(1)})},jqID:function(sid){return String(sid).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(componentName){var self=this;if(self.p==null||!self.p.id){return""}var id=self.p.id;switch(componentName){case"grid":return id;case"gBox":return"gbox_"+id;case"gView":return"gview_"+id;case"alertMod":return"alertmod_"+id;case"columnResizer":return"rs_m"+id;case"selectAllCheckbox":return"cb_"+id;case"searchOperationMenu":return"sopt_menu";default:return""}},getGridComponentIdSelector:function(componentName){var id=jgrid.getGridComponentId.call(this,componentName);return id?"#"+jgrid.jqID(id):""},getGridComponent:function(componentName,$p,p1){var p;if($p instanceof $||$p.length>0){p=$p[0]}else{if($p instanceof HTMLElement){p=$p;$p=$(p)}else{return $()}}switch(componentName){case"bTable":return $p.hasClass("ui-jqgrid-bdiv")?$p.find(">div>.ui-jqgrid-btable"):$();case"hTable":return $p.hasClass("ui-jqgrid-hdiv")?$p.find(">div>.ui-jqgrid-htable"):$();case"fTable":return $p.hasClass("ui-jqgrid-sdiv")?$p.find(">div>.ui-jqgrid-ftable"):$();case"bDiv":return $p.hasClass("ui-jqgrid-btable")&&p.grid!=null?$(p.grid.bDiv):$();case"hDiv":return $p.hasClass("ui-jqgrid-btable")&&p.grid!=null?$(p.grid.hDiv):$();case"sDiv":return $p.hasClass("ui-jqgrid-btable")&&p.grid!=null?$(p.grid.sDiv):$();case"colHeader":return !isNaN(p1)&&p.grid!=null&&p.grid.headers!=null&&p.grid.headers[p1]!=null?$(p.grid.headers[p1].el):$();default:return $()}},fixScrollOffsetAndhBoxPadding:function(){var self=this,grid=self.grid;if(!grid){return}var p=self.p,bDiv=grid.bDiv,fixhBox=function(hDiv){var $hDivhBox=$(hDiv).children("div").first();$hDivhBox.css($hDivhBox.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",p.scrollOffset);hDiv.scrollLeft=bDiv.scrollLeft};if($(bDiv).width()>0){p.scrollOffset=(bDiv.offsetWidth-bDiv.clientWidth);fixhBox(grid.hDiv);if(grid.sDiv){fixhBox(grid.sDiv)}}},mergeCssClasses:function(){var args=$.makeArray(arguments),map={},i,j,ar,cssClass,classes=[];for(i=0;i<args.length;i++){ar=String(args[i]).split(" ");for(j=0;j<ar.length;j++){cssClass=ar[j];if(cssClass!==""&&!map.hasOwnProperty(cssClass)){map[cssClass]=true;classes.push(cssClass)}}}return classes.join(" ")},detectRowEditing:function(rowid){var i,savedRowInfo,tr,self=this,rows=self.rows,p=self.p;if(!self.grid||rows==null||p==null){return null}if(p.savedRow===undefined||p.savedRow.length===0){return null}for(i=0;i<p.savedRow.length;i++){savedRowInfo=p.savedRow[i];if(typeof savedRowInfo.id==="number"&&typeof savedRowInfo.ic==="number"&&savedRowInfo.name!==undefined&&savedRowInfo.v!==undefined&&rows[savedRowInfo.id]!=null&&rows[savedRowInfo.id].id===rowid&&$.isFunction($.fn.jqGrid.restoreCell)){tr=rows[savedRowInfo.id];if(tr!=null&&tr.id===rowid){return{mode:"cellEditing",savedRow:savedRowInfo}}}else{if(savedRowInfo.id===rowid&&$.isFunction($.fn.jqGrid.restoreRow)){return{mode:"inlineEditing",savedRow:savedRowInfo}}}}return null},guid:1,uidPref:"jqg",randId:function(prefix){return(prefix||jgrid.uidPref)+(jgrid.guid++)},getAccessor:function(obj,expr){var ret,p,prm=[],i;if(typeof expr==="function"){return expr(obj)}ret=obj[expr];if(ret===undefined){try{if(typeof expr==="string"){prm=expr.split(".")}i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p]}}}catch(ignore){}}return ret},getXmlData:function(obj,expr,returnObj){var m=typeof expr==="string"?expr.match(/^(.*)\[(\w+)\]$/):null;if(typeof expr==="function"){return expr(obj)}if(m&&m[2]){return m[1]?$(m[1],obj).attr(m[2]):$(obj).attr(m[2])}var ret=$(expr,obj);if(returnObj){return ret}return ret.length>0?$(ret).text():undefined},cellWidth:function(){var $testDiv=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),testCell=$testDiv.appendTo("body").find("td").width();$testDiv.remove();return Math.abs(testCell-5)>0.1},cell_width:true,ajaxOptions:{},from:function(source){var context=this,QueryObject=function(d,q){if(typeof d==="string"){d=$.data(d)}var self=this,_data=d,_usecase=true,_trim=false,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=false,_queuedOperator="",_sorting=[],_useProperties=true;if(typeof d==="object"&&d.push){if(d.length>0){if(typeof d[0]!=="object"){_useProperties=false}else{_useProperties=true}}}else{throw"data provides is not an array"}this._hasData=function(){return _data===null?false:_data.length===0?false:true};this._getStr=function(s){var phrase=[];if(_trim){phrase.push("jQuery.trim(")}phrase.push("String("+s+")");if(_trim){phrase.push(")")}if(!_usecase){phrase.push(".toLowerCase()")}return phrase.join("")};this._strComp=function(val){if(typeof val==="string"){return".toString()"}return""};this._group=function(f,u){return({field:f.toString(),unique:u,items:[]})};this._toStr=function(phrase){if(_trim){phrase=$.trim(phrase)}phrase=phrase.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return _usecase?phrase:phrase.toLowerCase()};this._funcLoop=function(func){var results=[];$.each(_data,function(i,v){results.push(func(v))});return results};this._append=function(s){var i;if(_query===null){_query=""}else{_query+=_queuedOperator===""?" && ":_queuedOperator}for(i=0;i<_orDepth;i++){_query+="("}if(_negate){_query+="!"}_query+="("+s+")";_negate=false;_queuedOperator="";_orDepth=0};this._setCommand=function(f,c){_lastCommand=f;_lastField=c};this._resetNegate=function(){_negate=false};this._repeatCommand=function(f,v){if(_lastCommand===null){return self}if(f!==null&&v!==null){return _lastCommand(f,v)}if(_lastField===null){return _lastCommand(f)}if(!_useProperties){return _lastCommand(f)}return _lastCommand(_lastField,f)};this._equals=function(a,b){return(self._compare(a,b,1)===0)};this._compare=function(a,b,d){var toString=Object.prototype.toString;if(d===undefined){d=1}if(a===undefined){a=null}if(b===undefined){b=null}if(a===null&&b===null){return 0}if(a===null&&b!==null){return 1}if(a!==null&&b===null){return -1}if(toString.call(a)==="[object Date]"&&toString.call(b)==="[object Date]"){if(a<b){return -d}if(a>b){return d}return 0}if(!_usecase&&typeof a!=="number"&&typeof b!=="number"){a=String(a);b=String(b)}if(a<b){return -d}if(a>b){return d}return 0};this._performSort=function(){if(_sorting.length===0){return}_data=self._doSort(_data,0)};this._doSort=function(d,q){var by=_sorting[q].by,dir=_sorting[q].dir,type=_sorting[q].type,dfmt=_sorting[q].datefmt,sfunc=_sorting[q].sfunc;if(q===_sorting.length-1){return self._getOrder(d,by,dir,type,dfmt,sfunc)}q++;var values=self._getGroup(d,by,dir,type,dfmt),results=[],i,j,sorted;for(i=0;i<values.length;i++){sorted=self._doSort(values[i].items,q);for(j=0;j<sorted.length;j++){results.push(sorted[j])}}return results};this._getOrder=function(data,by,dir,type,dfmt,sfunc){var sortData=[],_sortData=[],newDir=dir==="a"?1:-1,i,ab,findSortKey;if(type===undefined){type="text"}if(type==="float"||type==="number"||type==="currency"||type==="numeric"){findSortKey=function($cell){var key=parseFloat(String($cell).replace(_stripNum,""));return isNaN(key)?Number.NEGATIVE_INFINITY:key}}else{if(type==="int"||type==="integer"){findSortKey=function($cell){return $cell?parseFloat(String($cell).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}}else{if(type==="date"||type==="datetime"){findSortKey=function($cell){return jgrid.parseDate.call(context,dfmt,$cell).getTime()}}else{if($.isFunction(type)){findSortKey=type}else{findSortKey=function($cell){$cell=$cell?$.trim(String($cell)):"";return _usecase?$cell:$cell.toLowerCase()}}}}}$.each(data,function(i,v){ab=by!==""?jgrid.getAccessor(v,by):v;if(ab===undefined){ab=""}ab=findSortKey(ab,v);_sortData.push({vSort:ab,index:i})});if($.isFunction(sfunc)){_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return sfunc.call(this,a,b,newDir)})}else{_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return self._compare(a,b,newDir)})}var j=0,nrec=data.length;while(j<nrec){i=_sortData[j].index;sortData.push(data[i]);j++}return sortData};this._getGroup=function(data,by,dir,type,dfmt){var results=[],group=null,last=null;$.each(self._getOrder(data,by,dir,type,dfmt),function(i,v){var val=jgrid.getAccessor(v,by);if(val==null){val=""}if(!self._equals(last,val)){last=val;if(group!==null){results.push(group)}group=self._group(by,val)}group.items.push(v)});if(group!==null){results.push(group)}return results};this.ignoreCase=function(){_usecase=false;return self};this.useCase=function(){_usecase=true;return self};this.trim=function(){_trim=true;return self};this.noTrim=function(){_trim=false;return self};this.execute=function(){var match=_query,results=[];if(match===null){return self}$.each(_data,function(){if(eval(match)){results.push(this)}});_data=results;return self};this.data=function(){return _data};this.select=function(f){self._performSort();if(!self._hasData()){return[]}self.execute();if($.isFunction(f)){var results=[];$.each(_data,function(i,v){results.push(f(v))});return results}return _data};this.hasMatch=function(){if(!self._hasData()){return false}self.execute();return _data.length>0};this.andNot=function(f,v,x){_negate=!_negate;return self.and(f,v,x)};this.orNot=function(f,v,x){_negate=!_negate;return self.or(f,v,x)};this.not=function(f,v,x){return self.andNot(f,v,x)};this.and=function(f,v,x){_queuedOperator=" && ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.or=function(f,v,x){_queuedOperator=" || ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.orBegin=function(){_orDepth++;return self};this.orEnd=function(){if(_query!==null){_query+=")"}return self};this.isNot=function(f){_negate=!_negate;return self.is(f)};this.is=function(f){self._append("this."+f);self._resetNegate();return self};this._compareValues=function(func,f,v,how,t){var fld;if(_useProperties){fld=f}else{fld="this"}if(v===undefined){v=null}var val=v,swst=t.stype===undefined?"text":t.stype;if(v!==null){switch(swst){case"int":case"integer":val=(isNaN(Number(val))||val==="")?"0":val;fld="parseInt("+fld+",10)";val="parseInt("+val+",10)";break;case"float":case"number":case"numeric":val=String(val).replace(_stripNum,"");val=(isNaN(Number(val))||val==="")?"0":val;fld="parseFloat("+fld+")";val="parseFloat("+val+")";break;case"date":case"datetime":val=String(jgrid.parseDate.call(context,t.newfmt||"Y-m-d",val).getTime());fld='jQuery.jgrid.parseDate.call(jQuery("'+context.p.idSel+'")[0],"'+t.srcfmt+'",'+fld+").getTime()";break;default:fld=self._getStr(fld);val=self._getStr('"'+self._toStr(val)+'"')}}self._append(fld+" "+how+" "+val);self._setCommand(func,f);self._resetNegate();return self};this.equals=function(f,v,t){return self._compareValues(self.equals,f,v,"==",t)};this.notEquals=function(f,v,t){return self._compareValues(self.equals,f,v,"!==",t)};this.isNull=function(f,v,t){return self._compareValues(self.equals,f,null,"===",t)};this.greater=function(f,v,t){return self._compareValues(self.greater,f,v,">",t)};this.less=function(f,v,t){return self._compareValues(self.less,f,v,"<",t)};this.greaterOrEquals=function(f,v,t){return self._compareValues(self.greaterOrEquals,f,v,">=",t)};this.lessOrEquals=function(f,v,t){return self._compareValues(self.lessOrEquals,f,v,"<=",t)};this.startsWith=function(f,v){var val=(v==null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr(f)+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(v)+'"'))}else{if(v!=null){length=_trim?$.trim(v.toString()).length:v.toString().length}self._append(self._getStr("this")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(f)+'"'))}self._setCommand(self.startsWith,f);self._resetNegate();return self};this.endsWith=function(f,v){var val=(v==null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr(f)+".substr("+self._getStr(f)+".length-"+length+","+length+') == "'+self._toStr(v)+'"')}else{self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(f)+'".length,"'+self._toStr(f)+'".length) == "'+self._toStr(f)+'"')}self._setCommand(self.endsWith,f);self._resetNegate();return self};this.contains=function(f,v){if(_useProperties){self._append(self._getStr(f)+'.indexOf("'+self._toStr(v)+'",0) > -1')}else{self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1')}self._setCommand(self.contains,f);self._resetNegate();return self};this.groupBy=function(by,dir,type,datefmt){if(!self._hasData()){return null}return self._getGroup(_data,by,dir,type,datefmt)};this.orderBy=function(by,dir,stype,dfmt,sfunc){dir=dir==null?"a":$.trim(dir.toString().toLowerCase());if(stype==null){stype="text"}if(dfmt==null){dfmt="Y-m-d"}if(sfunc==null){sfunc=false}if(dir==="desc"||dir==="descending"){dir="d"}if(dir==="asc"||dir==="ascending"){dir="a"}_sorting.push({by:by,dir:dir,type:stype,datefmt:dfmt,sfunc:sfunc});return self};this.custom=function(ruleOp,field,data){self._append('jQuery("'+context.p.idSel+'")[0].p.customSortOperations.'+ruleOp+'.filter.call(jQuery("'+context.p.idSel+'")[0],{item:this,cmName:"'+field+'",searchValue:"'+data+'"})');self._setCommand(self.custom,field);self._resetNegate();return self};return self};return new QueryObject(source,null)},serializeFeedback:function(callback,eventName,postData){var self=this,eventResult;if(self instanceof $&&self.length>0){self=self[0]}if(typeof postData==="string"){return postData}eventResult=$(self).triggerHandler(eventName,postData);if(typeof eventResult==="string"){return eventResult}if(eventResult==null||typeof eventResult!=="object"){eventResult=postData}return $.isFunction(callback)?callback.call(self,eventResult):eventResult},fullBoolFeedback:function(callback,eventName){var self=this,args=$.makeArray(arguments).slice(2),result=$(self).triggerHandler(eventName,args);result=(result===false||result==="stop")?false:true;if($.isFunction(callback)){var callbackResult=callback.apply(self,args);if(callbackResult===false||callbackResult==="stop"){result=false}}return result},feedback:function(p,eventPrefix,callbackSuffix,callbackName){var self=this;if(self instanceof $&&self.length>0){self=self[0]}if(p==null||typeof callbackName!=="string"||callbackName.length<2){return null}var eventName=callbackName.substring(0,2)==="on"?"jqGrid"+eventPrefix+callbackName.charAt(2).toUpperCase()+callbackName.substring(3):"jqGrid"+eventPrefix+callbackName.charAt(0).toUpperCase()+callbackName.substring(1),args=$.makeArray(arguments).slice(4),callback=p[callbackName+callbackSuffix];args.unshift(eventName);args.unshift(callback);return jgrid.fullBoolFeedback.apply(self,args)},getIconRes:function(base,path){var pathParts=path.split("."),root,n=pathParts.length,i,classes=[];base=jgrid.icons[base];if(base==null){return""}root=base;if(root.common){classes.push(root.common)}for(i=0;i<n;i++){if(!pathParts[i]){break}root=root[pathParts[i]];if(root===undefined){break}if(typeof root==="string"){classes.push(root);break}if(root!=null&&root.common){classes.push(root.common)}}return jgrid.mergeCssClasses.apply(this,classes)},convertOnSaveLocally:function(nData,cm,oData,rowid,item,iCol){var self=this,p=self.p;if(p==null){return nData}if($.isFunction(cm.convertOnSave)){return cm.convertOnSave.call(this,{newValue:nData,cm:cm,oldValue:oData,id:rowid,item:item,iCol:iCol})}if(typeof oData!=="boolean"&&typeof oData!=="number"){return nData}if(typeof oData==="boolean"&&(cm.edittype==="checkbox"||cm.formatter==="checkbox")){var lnData=String(nData).toLowerCase(),cbv=cm.editoptions!=null&&typeof cm.editoptions.value==="string"?cm.editoptions.value.split(":"):["yes","no"];if($.inArray(lnData,["1","true",cbv[0].toLowerCase()])>=0){nData=true}else{if($.inArray(lnData,["0","false",cbv[1].toLowerCase()])>=0){nData=false}}}else{if(typeof oData==="number"&&!isNaN(nData)){if(cm.formatter==="number"||cm.formatter==="currency"){nData=parseFloat(nData)}else{if(cm.formatter==="integer"){nData=parseInt(nData,10)}}}}return nData},getMethod:function(name){return this.getAccessor($.fn.jqGrid,name)},extend:function(methods){$.extend($.fn.jqGrid,methods);if(!this.no_legacy_api){$.fn.extend(methods)}}});var clearArray=jgrid.clearArray,jqID=jgrid.jqID,getGridComponentIdSelector=jgrid.getGridComponentIdSelector,getGridComponentId=jgrid.getGridComponentId,getGridComponent=jgrid.getGridComponent,stripPref=jgrid.stripPref,randId=jgrid.randId,getAccessor=jgrid.getAccessor,getCellIndex=jgrid.getCellIndex,convertOnSaveLocally=jgrid.convertOnSaveLocally,stripHtml=jgrid.stripHtml,htmlEncode=jgrid.htmlEncode,htmlDecode=jgrid.htmlDecode,feedback=function(){var args=$.makeArray(arguments);args.unshift("");args.unshift("");args.unshift(this.p);return jgrid.feedback.apply(this,args)};$.fn.jqGrid=function(pin){if(typeof pin==="string"){var fn=jgrid.getMethod(pin);if(!fn){throw ("jqGrid - No such method: "+pin)}var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}return this.each(function(){if(this.grid){return}var ts=this,localData,localDataStr,fatalErrorFunction=jgrid.defaults!=null&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert,locale=pin.locale||($.jgrid.defaults||{}).locale||"en-US",direction=locales[locale]!=null&&typeof locales[locale].isRTL==="boolean"?(locales[locale].isRTL?"rtl":"ltr"):"ltr",iconSet=pin.iconSet||($.jgrid.defaults||{}).iconSet||"jQueryUI",getIcon=function(path){return jgrid.getIconRes(iconSet,path)};if(pin==null){pin={datatype:"local"}}if(pin.datastr!==undefined&&$.isArray(pin.datastr)){localDataStr=pin.datastr;pin.datastr=[]}if(pin.data!==undefined){localData=pin.data;pin.data=[]}if(jgrid.formatter==null||jgrid.formatter.unused==null){fatalErrorFunction("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n	$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n	$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken.")}if(pin.datatype===undefined&&pin.dataType!==undefined){pin.datatype=pin.dataType;delete pin.dataType}if(pin.mtype===undefined&&pin.type!==undefined){pin.mtype=pin.type;delete pin.type}var p=$.extend(true,{height:"auto",page:1,rowNum:20,maxRowNum:10000,autoresizeOnLoad:false,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:true,compact:false,fixWidthOnShrink:false},doubleClickSensitivity:250,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:"clientArray",search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,gridview:(pin==null||pin.afterInsertRow==null),rownumWidth:25,rownumbers:false,pagerpos:"center",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:direction,toppager:false,headertitles:false,scrollTimeout:40,data:[],lastSelectedData:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],summary:[],summaryval:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:false,commonIconClass:getIcon("grouping.common"),plusicon:getIcon("grouping.plus"),minusicon:getIcon("grouping.minus")},ignoreCase:true,cmTemplate:{},idPrefix:"",iconSet:"fontAwesome",locale:locale,multiSort:false,treeIcons:{commonIconClass:getIcon("treeGrid.common"),plusLtr:getIcon("treeGrid.plusLtr"),plusRtl:getIcon("treeGrid.plusRtl"),minus:getIcon("treeGrid.minus"),leaf:getIcon("treeGrid.leaf")},subGridOptions:{commonIconClass:getIcon("subgrid.common"),plusicon:getIcon("subgrid.plus"),minusicon:getIcon("subgrid.minus")}},jgrid.defaults,{navOptions:$.extend(true,{commonIconClass:getIcon("nav.common"),editicon:getIcon("nav.edit"),addicon:getIcon("nav.add"),delicon:getIcon("nav.del"),searchicon:getIcon("nav.search"),refreshicon:getIcon("nav.refresh"),viewicon:getIcon("nav.view"),saveicon:getIcon("nav.save"),cancelicon:getIcon("nav.cancel"),buttonicon:getIcon("nav.newbutton")},jgrid.nav||{}),actionsNavOptions:$.extend(true,{commonIconClass:getIcon("actions.common"),editicon:getIcon("actions.edit"),delicon:getIcon("actions.del"),saveicon:getIcon("actions.save"),cancelicon:getIcon("actions.cancel")},jgrid.actionsNav||{}),formEditing:$.extend(true,{commonIconClass:getIcon("form.common"),prevIcon:getIcon("form.prev"),nextIcon:getIcon("form.next"),saveicon:[true,"left",getIcon("form.save")],closeicon:[true,"left",getIcon("form.undo")]},jgrid.edit||{}),searching:$.extend(true,{commonIconClass:getIcon("search.common"),findDialogIcon:getIcon("search.search"),resetDialogIcon:getIcon("search.reset"),queryDialogIcon:getIcon("search.query")},jgrid.search||{}),formViewing:$.extend(true,{commonIconClass:getIcon("form.common"),prevIcon:getIcon("form.prev"),nextIcon:getIcon("form.next"),closeicon:[true,"left",getIcon("form.cancel")]},jgrid.view||{}),formDeleting:$.extend(true,{commonIconClass:getIcon("form.common"),delicon:[true,"left",getIcon("form.del")],cancelicon:[true,"left",getIcon("form.cancel")]},jgrid.del||{})},pin||{}),getRes=function(path){return $(ts).jqGrid("getGridRes",path)},getDef=function(path){return $(ts).jqGrid("getGridRes","defaults."+path)};p.recordpos=p.recordpos||(p.direction==="rtl"?"left":"right");p.subGridOptions.openicon=p.direction==="rtl"?getIcon("subgrid.openRtl"):getIcon("subgrid.openLtr");p.autoResizing.widthOfVisiblePartOfSortIcon=p.autoResizing.widthOfVisiblePartOfSortIcon!==undefined?p.autoResizing.widthOfVisiblePartOfSortIcon:(p.iconSet==="fontAwesome"?13:12);p.datatype=p.datatype!==undefined?p.datatype:localData!==undefined||p.url==null?"local":p.jsonReader!=null&&typeof p.jsonReader==="object"?"json":"xml";p.jsonReader=p.jsonReader||{};p.url=p.url||"";p.cellsubmit=p.cellsubmit!==undefined?p.cellsubmit:p.cellurl===undefined?"clientArray":"remote";p.gridview=p.gridview!==undefined?p.gridview:(p.afterInsertRow==null);if(localData!==undefined){p.data=localData;pin.data=localData}if(localDataStr!==undefined){p.datastr=localDataStr;pin.datastr=localDataStr}if(ts.tagName.toUpperCase()!=="TABLE"){fatalErrorFunction("Element is not a table!");return}if(ts.id===""){$(ts).attr("id",randId())}if(document.documentMode!==undefined){if(document.documentMode<=5){fatalErrorFunction("Grid can not be used in this ('quirks') mode!");return}}$(ts).empty().attr("tabindex","0");ts.p=p;p.id=ts.id;p.idSel="#"+jqID(ts.id);p.gBoxId=getGridComponentId.call(ts,"gBox");p.gBox=getGridComponentIdSelector.call(ts,"gBox");p.gViewId=getGridComponentId.call(ts,"gView");p.gView=getGridComponentIdSelector.call(ts,"gView");p.rsId=getGridComponentId.call(ts,"columnResizer");p.rs=getGridComponentIdSelector.call(ts,"columnResizer");p.cbId=getGridComponentId.call(ts,"selectAllCheckbox");p.cb=getGridComponentIdSelector.call(ts,"selectAllCheckbox");p.useProp=!!$.fn.prop;p.propOrAttr=p.useProp?"prop":"attr";var propOrAttr=p.propOrAttr,fixScrollOffsetAndhBoxPadding=jgrid.fixScrollOffsetAndhBoxPadding,myResizerClickHandler=function(e){var pageX=$(this).data("pageX");if(pageX){pageX=String(pageX).split(";");pageX=pageX[pageX.length-1];$(this).data("pageX",pageX+";"+e.pageX)}else{$(this).data("pageX",e.pageX)}},grid={headers:[],cols:[],footers:[],dragStart:function(i,x,y){var self=this,$bDiv=$(self.bDiv),gridLeftPos=$bDiv.offset().left;self.resizing={idx:i,startX:x.pageX,sOL:x.pageX-gridLeftPos,moved:false};self.hDiv.style.cursor="col-resize";self.curGbox=$(p.rs,p.gBox);self.curGbox.css({display:"block",left:x.pageX-gridLeftPos,top:y[1],height:y[2]});self.curGbox.data("idx",i);myResizerClickHandler.call(this.curGbox,x);feedback.call(getGridComponent("bTable",$bDiv),"resizeStart",x,i);document.onselectstart=function(){return false}},dragMove:function(x){var self=this,resizing=self.resizing;if(resizing){var diff=x.pageX-resizing.startX,headers=self.headers,h=headers[resizing.idx],newWidth=p.direction==="ltr"?h.width+diff:h.width-diff,hn,nWn;resizing.moved=true;if(newWidth>33){if(self.curGbox==null){self.curGbox=$(p.rs,p.gBox)}self.curGbox.css({left:resizing.sOL+diff});if(p.forceFit===true){hn=headers[resizing.idx+p.nv];nWn=p.direction==="ltr"?hn.width-diff:hn.width+diff;if(nWn>p.autoResizing.minColWidth){h.newWidth=newWidth;hn.newWidth=nWn}}else{self.newWidth=p.direction==="ltr"?p.tblwidth+diff:p.tblwidth-diff;h.newWidth=newWidth}}}},resizeColumn:function(idx,skipCallbacks){var self=this,headers=self.headers,footers=self.footers,h=headers[idx],hn,nw=h.newWidth||h.width,$bTable=getGridComponent("bTable",$(self.bDiv)),$hTable=getGridComponent("hTable",$(self.hDiv)),hCols=$hTable.children("thead").children("tr").first()[0].cells;nw=parseInt(nw,10);p.colModel[idx].width=nw;h.width=nw;hCols[idx].style.width=nw+"px";self.cols[idx].style.width=nw+"px";if(footers.length>0){footers[idx].style.width=nw+"px"}fixScrollOffsetAndhBoxPadding.call($bTable[0]);if(p.forceFit===true){hn=headers[idx+p.nv];nw=hn.newWidth||hn.width;hn.width=nw;hCols[idx+p.nv].style.width=nw+"px";self.cols[idx+p.nv].style.width=nw+"px";if(footers.length>0){footers[idx+p.nv].style.width=nw+"px"}p.colModel[idx+p.nv].width=nw}else{p.tblwidth=self.newWidth||p.tblwidth;$bTable.css("width",p.tblwidth+"px");getGridComponent("hTable",$(self.hDiv)).css("width",p.tblwidth+"px");self.hDiv.scrollLeft=self.bDiv.scrollLeft;if(p.footerrow){getGridComponent("fTable",$(self.sDiv)).css("width",p.tblwidth+"px");self.sDiv.scrollLeft=self.bDiv.scrollLeft}}if(!p.autowidth&&(p.widthOrg===undefined||p.widthOrg==="auto"||p.widthOrg==="100%")){$bTable.jqGrid("setGridWidth",self.newWidth,false)}if(!skipCallbacks){feedback.call($bTable[0],"resizeStop",nw,idx)}},dragEnd:function(){var self=this;self.hDiv.style.cursor="default";if(self.resizing){if(self.resizing!==null&&self.resizing.moved===true){$(self.headers[self.resizing.idx].el).removeData("autoResized");self.resizeColumn(self.resizing.idx,false)}$(p.rs).removeData("pageX");self.resizing=false;setTimeout(function(){$(p.rs).css("display","none")},p.doubleClickSensitivity)}self.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){var self=this,$self=$(self),gridSelf=self.grid,bDiv=gridSelf.bDiv,$bDiv=$(bDiv);if(gridSelf.timer){clearTimeout(gridSelf.timer)}gridSelf.timer=null;var dh=$bDiv.height();if(!dh){return}var firstDataRow,rh;if(self.rows.length){try{firstDataRow=self.rows[1];rh=firstDataRow?$(firstDataRow).outerHeight()||gridSelf.prevRowHeight:gridSelf.prevRowHeight}catch(pv){rh=gridSelf.prevRowHeight}}if(!rh){return}gridSelf.prevRowHeight=rh;var rn=p.rowNum;gridSelf.scrollTop=bDiv.scrollTop;var scrollTop=gridSelf.scrollTop;var ttop=Math.round($self.position().top)-scrollTop;var tbot=ttop+$self.height();var div=rh*rn;var page,npage,empty;if(tbot<dh&&ttop<=0&&(p.lastpage===undefined||(parseInt((tbot+scrollTop+div-1)/div,10)||0)<=p.lastpage)){npage=parseInt((dh-tbot+div-1)/div,10)||1;if(tbot>=0||npage<2||p.scroll===true){page=(Math.round((tbot+scrollTop)/div)||0)+1;ttop=-1}else{ttop=1}}if(ttop>0){page=(parseInt(scrollTop/div,10)||0)+1;npage=(parseInt((scrollTop+dh)/div,10)||0)+2-page;empty=true}if(npage){if(p.lastpage&&(page>p.lastpage||p.lastpage===1||(page===p.page&&page===p.lastpage))){return}if(gridSelf.hDiv.loading){gridSelf.timer=setTimeout(function(){gridSelf.populateVisible.call(self)},p.scrollTimeout)}else{p.page=page;if(empty){gridSelf.selectionPreserver.call(self);gridSelf.emptyRows.call(self,false,false)}gridSelf.populate.call(self,npage)}}},scrollGrid:function(e){var bDiv=this,$bTable=getGridComponent("bTable",$(bDiv));if(e){e.stopPropagation()}if($bTable.length===0){return true}var gridSelf=$bTable[0].grid;if(p.scroll){var scrollTop=bDiv.scrollTop;if(gridSelf.scrollTop===undefined){gridSelf.scrollTop=0}if(scrollTop!==gridSelf.scrollTop){gridSelf.scrollTop=scrollTop;if(gridSelf.timer){clearTimeout(gridSelf.timer)}gridSelf.timer=setTimeout(function(){gridSelf.populateVisible.call($bTable[0])},p.scrollTimeout)}}gridSelf.hDiv.scrollLeft=bDiv.scrollLeft;if(p.footerrow){gridSelf.sDiv.scrollLeft=bDiv.scrollLeft}},selectionPreserver:function(){var self=this,$self=$(self),sr=p.selrow,sra=p.selarrrow?$.makeArray(p.selarrrow):null,bDiv=self.grid.bDiv,left=bDiv.scrollLeft,restoreSelection=function(){var i;p.selrow=null;clearArray(p.selarrrow);if(p.multiselect&&sra&&sra.length>0){for(i=0;i<sra.length;i++){if(sra[i]!==sr){$self.jqGrid("setSelection",sra[i],false,null)}}}if(sr){$self.jqGrid("setSelection",sr,false,null)}bDiv.scrollLeft=left;$self.unbind(".selectionPreserver",restoreSelection)};$self.bind("jqGridGridComplete.selectionPreserver",restoreSelection)}};ts.grid=grid;feedback.call(ts,"beforeInitGrid");var iCol,dir;if(p.colNames.length===0){for(iCol=0;iCol<p.colModel.length;iCol++){p.colNames[iCol]=p.colModel[iCol].label||p.colModel[iCol].name}}if(p.colNames.length!==p.colModel.length){fatalErrorFunction(getRes("errors.model"));return}var gv=$("<div class='ui-jqgrid-view' role='grid' aria-multiselectable='"+!!p.multiselect+"'></div>"),isMSIE=jgrid.msie,isMSIE7=isMSIE&&jgrid.msiever()<8;p.direction=$.trim(p.direction.toLowerCase());if($.inArray(p.direction,["ltr","rtl"])===-1){p.direction="ltr"}dir=p.direction;$(gv).insertBefore(ts);$(ts).removeClass("scroll").appendTo(gv);var eg=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(eg).attr({id:p.gBoxId,dir:dir}).insertBefore(gv);$(gv).attr("id",p.gViewId).appendTo(eg);$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+p.id+"'></div>").insertBefore(gv);$("<div class='loading ui-state-default ui-state-active' id='load_"+p.id+"'>"+getDef("loadtext")+"</div>").insertBefore(gv);if(isMSIE7){$(ts).attr({cellspacing:"0"})}$(ts).attr({role:"presentation","aria-labelledby":"gbox_"+ts.id});var sortkeys=["shiftKey","altKey","ctrlKey"],stripGridPrefix=function(rowId){return stripPref(p.idPrefix,rowId)},intNum=function(val,defval){val=parseInt(val,10);if(isNaN(val)){return defval||0}return val},formatCol=function(pos,rowInd,tv,rawObject,rowId,rdata){var cm=p.colModel[pos],cellAttrFunc,ral=cm.align,result='style="',clas=cm.classes,nm=cm.name,celp,acp=[];if(ral){result+="text-align:"+ral+";"}if(cm.hidden===true){result+="display:none;"}if(rowInd===0){result+="width: "+grid.headers[pos].width+"px;"}else{if($.isFunction(cm.cellattr)||(typeof cm.cellattr==="string"&&jgrid.cellattr!=null&&$.isFunction(jgrid.cellattr[cm.cellattr]))){cellAttrFunc=$.isFunction(cm.cellattr)?cm.cellattr:jgrid.cellattr[cm.cellattr];celp=cellAttrFunc.call(ts,rowId,tv,rawObject,cm,rdata);if(celp&&typeof celp==="string"){celp=celp.replace(/style/i,"style").replace(/title/i,"title");if(celp.indexOf("title")>-1){cm.title=false}if(celp.indexOf("class")>-1){clas=undefined}acp=celp.replace(/\-style/g,"-sti").split(/style/);if(acp.length===2){acp[1]=$.trim(acp[1].replace(/\-sti/g,"-style").replace("=",""));if(acp[1].indexOf("'")===0||acp[1].indexOf('"')===0){acp[1]=acp[1].substring(1)}result+=acp[1].replace(/'/gi,'"')}else{result+='"'}}}}if(!acp.length){acp[0]="";result+='"'}result+=(clas!==undefined?(' class="'+clas+'"'):"")+((cm.title&&tv)?(' title="'+stripHtml(tv)+'"'):"");result+=' aria-describedby="'+p.id+"_"+nm+'"';return result+acp[0]},cellVal=function(val){return val==null||val===""?"&#160;":(p.autoencode?htmlEncode(val):String(val))},formatter=function(rowId,cellval,colpos,rwdat,act){var cm=p.colModel[colpos],v;if(cm.formatter!==undefined){rowId=String(p.idPrefix)!==""?stripGridPrefix(rowId):rowId;var opts={rowId:rowId,colModel:cm,gid:p.id,pos:colpos};if($.isFunction(cm.formatter)){v=cm.formatter.call(ts,cellval,opts,rwdat,act)}else{if($.fmatter){v=$.fn.fmatter.call(ts,cm.formatter,cellval,opts,rwdat,act)}else{v=cellVal(cellval)}}}else{v=cellVal(cellval)}return cm.autoResizable&&cm.formatter!=="actions"?"<span class='"+p.autoResizing.wrapperClassName+"'>"+v+"</span>":v},addCell=function(rowId,cell,pos,irow,srvr,rdata){var v=formatter(rowId,cell,pos,srvr,"add");return'<td role="gridcell" '+formatCol(pos,irow,v,srvr,rowId,rdata)+">"+v+"</td>"},addMulti=function(rowid,pos,irow,checked){var v='<input role="checkbox" type="checkbox" id="jqg_'+p.id+"_"+rowid+'" class="cbox" name="jqg_'+p.id+"_"+rowid+'"'+(checked?' checked="checked" aria-checked="true"':' aria-checked="false"')+"/>";return'<td role="gridcell" '+formatCol(pos,irow,"",null,rowid,true)+">"+v+"</td>"},addRowNum=function(pos,irow,pG,rN){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+formatCol(pos,irow,v,null,irow,true)+">"+v+"</td>"},reader=function(datatype){var field,f=[],i,colModel=p.colModel,nCol=colModel.length,name;for(i=0;i<nCol;i++){field=colModel[i];if(field.name!=="cb"&&field.name!=="subgrid"&&field.name!=="rn"){name=(datatype==="xml"||datatype==="xmlstring")?field.xmlmap||field.name:(datatype==="local"&&!p.dataTypeOrg)||datatype==="json"?field.jsonmap||field.name:field.name;if(p.keyName!==false&&field.key===true){p.keyName=name}f.push(name)}}return f},orderedCols=function(offset){var order=p.remapColumns;if(!order||!order.length){order=$.map(p.colModel,function(v,i){return i})}if(offset){order=$.map(order,function(v){return v<offset?null:v-offset})}return order},emptyRows=function(scroll,locdata){var firstrow,self=this,rows=self.rows,bDiv=self.grid.bDiv;$(self).unbind(".jqGridFormatter");if(p.deepempty){$(rows).slice(1).remove()}else{firstrow=rows.length>0?rows[0]:null;$(self.firstChild).empty().append(firstrow)}if(scroll&&p.scroll){$(bDiv.firstChild).css({height:"auto"});$(bDiv.firstChild.firstChild).css({height:0,display:"none"});if(bDiv.scrollTop!==0){bDiv.scrollTop=0}}if(locdata===true&&p.treeGrid){clearArray(p.data);clearArray(p.lastSelectedData);p._index={}}},normalizeData=function(){var data=p.data,dataLength=data.length,i,j,cur,cells,idn,idi,idr,v,rd,localReader=p.localReader,colModel=p.colModel,cellName=localReader.cell,iOffset=(p.multiselect===true?1:0)+(p.subGrid===true?1:0)+(p.rownumbers===true?1:0),br=p.scroll?randId():1,arrayReader,objectReader,rowReader;if(p.datatype!=="local"||localReader.repeatitems!==true){return}arrayReader=orderedCols(iOffset);objectReader=reader("local");idn=p.keyName===false?($.isFunction(localReader.id)?localReader.id.call(this,data):localReader.id):p.keyName;if(!isNaN(idn)){idi=Number(idn)}for(i=0;i<colModel.length;i++){if(colModel[i].name===idn){idi=i-iOffset;break}}for(i=0;i<dataLength;i++){cur=data[i];cells=cellName?getAccessor(cur,cellName)||cur:cur;rowReader=$.isArray(cells)?arrayReader:objectReader;idr=p.keyName===false?getAccessor(cur,idn):getAccessor(cells,rowReader[idi]);if(idr===undefined){if(!isNaN(idn)&&colModel[Number(idn)+iOffset]!=null){idr=getAccessor(cells,rowReader[Number(idn)])}if(idr===undefined){idr=br+i}}rd={};rd[localReader.id]=idr;for(j=0;j<rowReader.length;j++){v=getAccessor(cells,rowReader[j]);rd[colModel[j+iOffset].name]=v}$.extend(true,data[i],rd)}},refreshIndex=function(){var datalen=p.data.length,idname,i,val;if(p.keyName===false||p.loadonce){idname=p.localReader.id}else{idname=p.keyName}p._index={};for(i=0;i<datalen;i++){val=getAccessor(p.data[i],idname);if(val===undefined){val=String(i+1)}p._index[val]=i}},constructTr=function(id,hide,altClass,rd,cur,selected){var tabindex="-1",restAttr="",attrName,style=hide?"display:none;":"",self=this,classes="ui-widget-content jqgrow ui-row-"+p.direction+(altClass?" "+altClass:"")+(selected?" ui-state-highlight":""),rowAttrObj=$(self).triggerHandler("jqGridRowAttr",[rd,cur,id]);if(typeof rowAttrObj!=="object"){rowAttrObj=$.isFunction(p.rowattr)?p.rowattr.call(self,rd,cur,id):(typeof p.rowattr==="string"&&jgrid.rowattr!=null&&$.isFunction(jgrid.rowattr[p.rowattr])?jgrid.rowattr[p.rowattr].call(self,rd,cur,id):{})}if(rowAttrObj!=null&&!$.isEmptyObject(rowAttrObj)){if(rowAttrObj.hasOwnProperty("id")){id=rowAttrObj.id;delete rowAttrObj.id}if(rowAttrObj.hasOwnProperty("tabindex")){tabindex=rowAttrObj.tabindex;delete rowAttrObj.tabindex}if(rowAttrObj.hasOwnProperty("style")){style+=rowAttrObj.style;delete rowAttrObj.style}if(rowAttrObj.hasOwnProperty("class")){classes+=" "+rowAttrObj["class"];delete rowAttrObj["class"]}try{delete rowAttrObj.role}catch(ignore){}for(attrName in rowAttrObj){if(rowAttrObj.hasOwnProperty(attrName)){restAttr+=" "+attrName+"="+rowAttrObj[attrName]}}}return'<tr role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(style===""?"":' style="'+style+'"')+restAttr+">"},finalizationFormatters=function(){var i,formatName;for(i=0;i<p.colModel.length;i++){formatName=p.colModel[i].formatter;if(typeof formatName==="string"&&$.fn.fmatter!=null&&$.isFunction($.fn.fmatter[formatName])&&$.isFunction($.fn.fmatter[formatName].pageFinalization)){$.fn.fmatter[formatName].pageFinalization.call(this,i)}}},addXmlData=function(xml,rcnt,more,adjust){var self=this,$self=$(this),startReq=new Date(),getXmlData=jgrid.getXmlData,locdata=(p.datatype!=="local"&&p.loadonce)||p.datatype==="xmlstring",xmlid="_id_",xmlRd=p.xmlReader,colModel=p.colModel,frd=p.datatype==="local"?"local":"xml";if(locdata){clearArray(p.data);clearArray(p.lastSelectedData);p._index={};p.localReader.id=xmlid}p.reccount=0;if($.isXMLDoc(xml)){if(p.treeANode===-1&&!p.scroll){emptyRows.call(self,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}var i,fpos,ir=0,v,gi=p.multiselect===true?1:0,si=0,addSubGridCell,ni=p.rownumbers===true?1:0,idn,getId,f=[],colOrder,rd={},xmlr,rid,rowData=[],cn=(p.altRows===true)?p.altclass:"",cn1;if(p.subGrid===true){si=1;addSubGridCell=jgrid.getMethod("addSubGridCell")}if(!xmlRd.repeatitems){f=reader(frd)}if(p.keyName===false){idn=$.isFunction(xmlRd.id)?xmlRd.id.call(self,xml):xmlRd.id}else{idn=p.keyName}if(isNaN(idn)&&xmlRd.repeatitems){for(i=0;i<colModel.length;i++){if(colModel[i].name===idn){idn=i-(gi+si+ni);break}}}if(String(idn).indexOf("[")===-1){if(f.length){getId=function(trow,k){return $(idn,trow).text()||k}}else{getId=function(trow,k){return $(xmlRd.cell,trow).eq(idn).text()||k}}}else{getId=function(trow,k){return trow.getAttribute(idn.replace(/[\[\]]/g,""))||k}}p.userData={};p.page=intNum(getXmlData(xml,xmlRd.page),p.page);p.lastpage=intNum(getXmlData(xml,xmlRd.total),1);p.records=intNum(getXmlData(xml,xmlRd.records));if($.isFunction(xmlRd.userdata)){p.userData=xmlRd.userdata.call(self,xml)||{}}else{getXmlData(xml,xmlRd.userdata,true).each(function(){p.userData[this.getAttribute("name")]=$(this).text()})}var hiderow=false,groupingPrepare,gxml=getXmlData(xml,xmlRd.root,true);gxml=getXmlData(gxml,xmlRd.row,true)||[];var gl=gxml.length,j=0,grpdata=[],rn=parseInt(p.rowNum,10),br=p.scroll?randId():1,altr,iStartTrTag,cells;if(gl>0&&p.page<=0){p.page=1}if(p.grouping){hiderow=p.groupingView.groupCollapse===true;groupingPrepare=jgrid.getMethod("groupingPrepare")}var cell,$tbody=$(self.tBodies[0]);if(gxml&&gl){if(adjust){rn*=adjust+1}while(j<gl){xmlr=gxml[j];rid=getId(xmlr,br+j);rid=p.idPrefix+rid;altr=rcnt===0?0:rcnt+1;cn1=(altr+j)%2===1?cn:"";iStartTrTag=rowData.length;rowData.push("");if(ni){rowData.push(addRowNum(0,j,p.page,p.rowNum))}if(gi){rowData.push(addMulti(rid,ni,j,false))}if(si){rowData.push(addSubGridCell.call($self,gi+ni,j+rcnt))}if(xmlRd.repeatitems){if(!colOrder){colOrder=orderedCols(gi+si+ni)}cells=getXmlData(xmlr,xmlRd.cell,true);for(i=0;i<colOrder.length;i++){cell=cells[colOrder[i]];if(!cell){break}v=cell.textContent||cell.text;rd[colModel[i+gi+si+ni].name]=v;rowData.push(addCell(rid,v,i+gi+si+ni,j+rcnt,xmlr,rd))}}else{for(i=0;i<f.length;i++){v=getXmlData(xmlr,f[i]);rd[colModel[i+gi+si+ni].name]=v;rowData.push(addCell(rid,v,i+gi+si+ni,j+rcnt,xmlr,rd))}}rowData[iStartTrTag]=constructTr.call(self,rid,hiderow,cn1,rd,xmlr,false);rowData.push("</tr>");if(p.grouping){grpdata.push(rowData);if(!p.groupingView._locgr){groupingPrepare.call($self,rd,j)}rowData=[]}if(locdata||p.treeGrid===true){rd[xmlid]=stripGridPrefix(rid);p.data.push(rd);p._index[rd[xmlid]]=p.data.length-1}if(p.gridview===false){$tbody.append(rowData.join(""));feedback.call(self,"afterInsertRow",rid,rd,xmlr);clearArray(rowData)}rd={};ir++;j++;if(ir===rn){break}}}if(p.gridview===true){fpos=p.treeANode>-1?p.treeANode:0;if(p.grouping){if(!locdata){$self.jqGrid("groupingRender",grpdata,colModel.length,p.page,rn);grpdata=null}}else{if(p.treeGrid===true&&fpos>0){$(self.rows[fpos]).after(rowData.join(""))}else{if(self.firstElementChild){self.firstElementChild.innerHTML+=rowData.join("");self.grid.cols=self.rows[0].cells}else{$tbody($tbody.html()+rowData.join(""));self.grid.cols=self.rows[0].cells}}}}if(p.subGrid===true){try{$self.jqGrid("addSubGrid",gi+ni)}catch(ignore){}}p.totaltime=new Date()-startReq;if(ir>0){if(p.records===0){p.records=gl}}clearArray(rowData);if(p.treeGrid===true){try{$self.jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(ignore){}}p.reccount=ir;p.treeANode=-1;if(p.userDataOnFooter){$self.jqGrid("footerData","set",p.userData,true)}if(locdata){p.records=gl;p.lastpage=Math.ceil(gl/rn)}if(!more){self.updatepager(false,true)}finalizationFormatters.call(self);if(locdata){while(ir<gl){xmlr=gxml[ir];rid=getId(xmlr,ir+br);rid=p.idPrefix+rid;if(xmlRd.repeatitems){if(!colOrder){colOrder=orderedCols(gi+si+ni)}cells=getXmlData(xmlr,xmlRd.cell,true);for(i=0;i<colOrder.length;i++){cell=cells[colOrder[i]];if(!cell){break}rd[colModel[i+gi+si+ni].name]=cell.textContent||cell.text}}else{for(i=0;i<f.length;i++){v=getXmlData(xmlr,f[i]);rd[colModel[i+gi+si+ni].name]=v}}rd[xmlid]=stripGridPrefix(rid);if(p.grouping){groupingPrepare.call($self,rd,ir)}p.data.push(rd);p._index[rd[xmlid]]=p.data.length-1;rd={};ir++}if(p.grouping){p.groupingView._locgr=true;$self.jqGrid("groupingRender",grpdata,colModel.length,p.page,rn);grpdata=null}}},addJSONData=function(data,rcnt,more,adjust){var self=this,$self=$(self),startReq=new Date();if(data){if(p.treeANode===-1&&!p.scroll){emptyRows.call(self,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}var dReader,locid="_id_",frd,locdata=(p.datatype!=="local"&&p.loadonce)||p.datatype==="jsonstring";if(locdata){clearArray(p.data);clearArray(p.lastSelectedData);p._index={};p.localReader.id=locid}p.reccount=0;if(p.datatype==="local"){dReader=p.localReader;frd="local"}else{dReader=p.jsonReader;frd="json"}var ir,v,i,j,cur,cells,gi=p.multiselect?1:0,si=p.subGrid===true?1:0,addSubGridCell,ni=p.rownumbers===true?1:0,arrayReader=orderedCols(gi+si+ni),objectReader=reader(frd),rowReader,len,drows,idn,idi,rd={},fpos,idr,rowData=[],cn=(p.altRows===true)?p.altclass:"",cn1;p.page=intNum(getAccessor(data,dReader.page),p.page);p.lastpage=intNum(getAccessor(data,dReader.total),1);p.records=intNum(getAccessor(data,dReader.records));p.userData=getAccessor(data,dReader.userdata)||{};if(si){addSubGridCell=jgrid.getMethod("addSubGridCell")}if(p.keyName===false){idn=$.isFunction(dReader.id)?dReader.id.call(self,data):dReader.id}else{idn=p.keyName}if(!isNaN(idn)){idi=Number(idn)}for(i=0;i<p.colModel.length;i++){if(p.colModel[i].name===idn){idi=i-(gi+si+ni);break}}drows=getAccessor(data,dReader.root);if(drows==null&&$.isArray(data)){drows=data}if(!drows){drows=[]}len=drows.length;if(len>0&&p.page<=0){p.page=1}var rn=parseInt(p.rowNum,10),br=p.scroll?randId():1,altr,selected=false,selr;if(adjust){rn*=adjust+1}if(p.datatype==="local"&&!p.deselectAfterSort){selected=true}var grpdata=[],hiderow=false,groupingPrepare,iStartTrTag;if(p.grouping){hiderow=p.groupingView.groupCollapse===true;groupingPrepare=jgrid.getMethod("groupingPrepare")}var $tbody=$(self.tBodies[0]);for(i=0;i<len&&i<rn;i++){cur=drows[i];cells=dReader.repeatitems&&dReader.cell?getAccessor(cur,dReader.cell)||cur:cur;rowReader=dReader.repeatitems&&$.isArray(cells)?arrayReader:objectReader;idr=p.keyName===false?getAccessor(cur,idn):getAccessor(cells,rowReader[idi]);if(idr===undefined){if(!isNaN(idn)&&p.colModel[Number(idn)+gi+si+ni]!=null){idr=getAccessor(cells,rowReader[Number(idn)])}if(idr===undefined){idr=br+i}}idr=p.idPrefix+idr;altr=rcnt===1?0:rcnt;cn1=(altr+i)%2===1?cn:"";if(selected){if(p.multiselect){selr=($.inArray(idr,p.selarrrow)!==-1)}else{selr=(idr===p.selrow)}}iStartTrTag=rowData.length;rowData.push("");if(ni){rowData.push(addRowNum(0,i,p.page,p.rowNum))}if(gi){rowData.push(addMulti(idr,ni,i,selr))}if(si){rowData.push(addSubGridCell.call($self,gi+ni,i+rcnt))}for(j=0;j<rowReader.length;j++){v=getAccessor(cells,rowReader[j]);rd[p.colModel[j+gi+si+ni].name]=v;rowData.push(addCell(idr,v,j+gi+si+ni,i+rcnt,cells,rd))}rowData[iStartTrTag]=constructTr.call(self,idr,hiderow,cn1,rd,cells,selr);rowData.push("</tr>");if(p.grouping){grpdata.push(rowData);if(!p.groupingView._locgr){groupingPrepare.call($self,rd,i)}rowData=[]}if(locdata||p.treeGrid===true){rd[locid]=stripGridPrefix(idr);p.data.push(rd);p._index[rd[locid]]=p.data.length-1}if(p.gridview===false){$tbody.append(rowData.join(""));feedback.call(self,"afterInsertRow",idr,rd,cells);clearArray(rowData)}rd={}}if(p.gridview===true){fpos=p.treeANode>-1?p.treeANode:0;if(p.grouping){if(!locdata){$self.jqGrid("groupingRender",grpdata,p.colModel.length,p.page,rn);grpdata=null}}else{if(p.treeGrid===true&&fpos>0){$(self.rows[fpos]).after(rowData.join(""))}else{if(self.firstElementChild){self.firstElementChild.innerHTML+=rowData.join("");self.grid.cols=self.rows[0].cells}else{$tbody.html($tbody.html()+rowData.join(""));self.grid.cols=self.rows[0].cells}}}}if(p.subGrid===true){try{$self.jqGrid("addSubGrid",gi+ni)}catch(ignore){}}p.totaltime=new Date()-startReq;if(i>0){if(p.records===0){p.records=len}}clearArray(rowData);if(p.treeGrid===true){try{$self.jqGrid("setTreeNode",fpos+1,i+fpos+1)}catch(ignore){}}p.reccount=i;p.treeANode=-1;if(p.userDataOnFooter){$self.jqGrid("footerData","set",p.userData,true)}if(locdata){p.records=len;p.lastpage=Math.ceil(len/rn)}if(!more){self.updatepager(false,true)}finalizationFormatters.call(self);if(locdata){for(ir=i;ir<len&&drows[ir];ir++){cur=drows[ir];cells=dReader.repeatitems&&dReader.cell?getAccessor(cur,dReader.cell)||cur:cur;rowReader=dReader.repeatitems&&$.isArray(cells)?arrayReader:objectReader;idr=p.keyName===false?getAccessor(cur,idn):getAccessor(cells,rowReader[idi]);if(idr===undefined){if(!isNaN(idn)&&p.colModel[Number(idn)+gi+si+ni]!=null){idr=getAccessor(cells,rowReader[Number(idn)])}if(idr===undefined){idr=br+ir}}if(cells){for(j=0;j<rowReader.length;j++){rd[p.colModel[j+gi+si+ni].name]=getAccessor(cells,rowReader[j])}rd[locid]=stripGridPrefix(idr);if(p.grouping){groupingPrepare.call($self,rd,ir)}p.data.push(rd);p._index[rd[locid]]=p.data.length-1;rd={}}}if(p.grouping){p.groupingView._locgr=true;$self.jqGrid("groupingRender",grpdata,p.colModel.length,p.page,rn);grpdata=null}}},addLocalData=function(){var $self=$(this),st=p.multiSort?[]:"",sto=[],fndsort=false,cmtypes={},grtypes=[],grindexes=[],srcformat,sorttype,newformat,dateDefaults=getRes("formatter.date");if(!$.isArray(p.data)){return{}}var grpview=p.grouping?p.groupingView:false,lengrp,gin;$.each(p.colModel,function(iCol){var cm=this,grindex=cm.index||cm.name;sorttype=cm.sorttype||"text";cmtypes[cm.name]={reader:!p.dataTypeOrg?cm.jsonmap||cm.name:cm.name,iCol:iCol,stype:sorttype,srcfmt:"",newfmt:"",sfunc:cm.sortfunc||null};if(sorttype==="date"||sorttype==="datetime"){if(cm.formatter&&typeof cm.formatter==="string"&&cm.formatter==="date"){if(cm.formatoptions&&cm.formatoptions.srcformat){srcformat=cm.formatoptions.srcformat}else{srcformat=dateDefaults.srcformat}if(cm.formatoptions&&cm.formatoptions.newformat){newformat=cm.formatoptions.newformat}else{newformat=dateDefaults.newformat}}else{srcformat=newformat=cm.datefmt||"Y-m-d"}cmtypes[cm.name].srcfmt=srcformat;cmtypes[cm.name].newfmt=newformat}if(p.grouping){for(gin=0,lengrp=grpview.groupField.length;gin<lengrp;gin++){if(cm.name===grpview.groupField[gin]){grtypes[gin]=cmtypes[grindex];grindexes[gin]=grindex}}}if(p.multiSort){if(cm.lso){st.push(cm.name);var tmplso=cm.lso.split("-");sto.push(tmplso[tmplso.length-1])}}else{if(!fndsort&&(cm.index===p.sortname||cm.name===p.sortname)){st=cm.name;fndsort=true}}});if(p.treeGrid){$self.jqGrid("SortTree",st,p.sortorder,cmtypes[st]!=null&&cmtypes[st].stype?cmtypes[st].stype:"text",cmtypes[st]!=null&&cmtypes[st].srcfmt?cmtypes[st].srcfmt:"");return false}var compareFnMap={eq:function(queryObj){return queryObj.equals},ne:function(queryObj){return queryObj.notEquals},lt:function(queryObj){return queryObj.less},le:function(queryObj){return queryObj.lessOrEquals},gt:function(queryObj){return queryObj.greater},ge:function(queryObj){return queryObj.greaterOrEquals},cn:function(queryObj){return queryObj.contains},nc:function(queryObj,op){return op==="OR"?queryObj.orNot().contains:queryObj.andNot().contains},bw:function(queryObj){return queryObj.startsWith},bn:function(queryObj,op){return op==="OR"?queryObj.orNot().startsWith:queryObj.andNot().startsWith},en:function(queryObj,op){return op==="OR"?queryObj.orNot().endsWith:queryObj.andNot().endsWith},ew:function(queryObj){return queryObj.endsWith},ni:function(queryObj,op){return op==="OR"?queryObj.orNot().equals:queryObj.andNot().equals},"in":function(queryObj){return queryObj.equals},nu:function(queryObj){return queryObj.isNull},nn:function(queryObj,op){return op==="OR"?queryObj.orNot().isNull:queryObj.andNot().isNull}},query=jgrid.from.call(this,p.data);if(p.ignoreCase){query=query.ignoreCase()}function tojLinq(group){var s=0,index,gor,ror,opr,rule,r,cmi;if(group.groups!=null){gor=group.groups.length&&group.groupOp.toString().toUpperCase()==="OR";if(gor){query.orBegin()}for(index=0;index<group.groups.length;index++){if(s>0&&gor){query.or()}try{tojLinq(group.groups[index])}catch(e){fatalErrorFunction(e)}s++}if(gor){query.orEnd()}}if(group.rules!=null){try{ror=group.rules.length&&group.groupOp.toString().toUpperCase()==="OR";if(ror){query.orBegin()}for(index=0;index<group.rules.length;index++){rule=group.rules[index];opr=group.groupOp.toString().toUpperCase();if(compareFnMap[rule.op]&&rule.field){if(s>0&&opr&&opr==="OR"){query=query.or()}cmi=cmtypes[rule.field];r=cmi.reader;query=compareFnMap[rule.op](query,opr)($.isFunction(r)?'jQuery.jgrid.getAccessor(this,jQuery("'+p.idSel+'")[0].p.colModel['+cmi.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+r+"')",rule.data,cmtypes[rule.field])}else{if(p.customSortOperations!=null&&p.customSortOperations[rule.op]!=null&&$.isFunction(p.customSortOperations[rule.op].filter)){query=query.custom(rule.op,rule.field,rule.data)}}s++}if(ror){query.orEnd()}}catch(g){fatalErrorFunction(g)}}}if(p.search===true){var srules=p.postData.filters;if(srules){if(typeof srules==="string"){srules=jgrid.parse(srules)}tojLinq(srules)}else{try{query=compareFnMap[p.postData.searchOper](query)(p.postData.searchField,p.postData.searchString,cmtypes[p.postData.searchField])}catch(ignore){}}}if(p.grouping){for(gin=0;gin<lengrp;gin++){query.orderBy(grindexes[gin],grpview.groupOrder[gin],grtypes[gin].stype,grtypes[gin].srcfmt)}}if(p.multiSort){$.each(st,function(i){query.orderBy(this,sto[i],cmtypes[this].stype,cmtypes[this].srcfmt,cmtypes[this].sfunc)})}else{if(st&&p.sortorder&&fndsort){if(p.sortorder.toUpperCase()==="DESC"){query.orderBy(p.sortname,"d",cmtypes[st].stype,cmtypes[st].srcfmt,cmtypes[st].sfunc)}else{query.orderBy(p.sortname,"a",cmtypes[st].stype,cmtypes[st].srcfmt,cmtypes[st].sfunc)}}}p.lastSelectedData=query.select();var recordsperpage=parseInt(p.rowNum,10),total=p.lastSelectedData.length,page=parseInt(p.page,10),totalpages=Math.ceil(total/recordsperpage),retresult={};if((p.search||p.resetsearch)&&p.grouping&&p.groupingView._locgr){p.groupingView.groups=[];var j,grPrepare=jgrid.getMethod("groupingPrepare"),key,udc;if(p.footerrow&&p.userDataOnFooter){for(key in p.userData){if(p.userData.hasOwnProperty(key)){p.userData[key]=0}}udc=true}for(j=0;j<total;j++){if(udc){for(key in p.userData){if(p.userData.hasOwnProperty(key)){p.userData[key]+=parseFloat(p.lastSelectedData[j][key]||0)}}}grPrepare.call($self,p.lastSelectedData[j],j,recordsperpage)}}query=null;cmtypes=null;var localReader=p.localReader;retresult[localReader.total]=totalpages;retresult[localReader.page]=page;retresult[localReader.records]=total;retresult[localReader.root]=p.lastSelectedData.slice((page-1)*recordsperpage,page*recordsperpage);retresult[localReader.userdata]=p.userData;return retresult},setWidthOfPagerTdWithPager=function($pgTable){var self=this,w=$pgTable.outerWidth(),fontSize;if(w<=0){fontSize=$(self).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+fontSize+";visibility:hidden;' ></div>");$($pgTable).clone().appendTo("#testpg");w=$("#testpg>.ui-pg-table").width();$("#testpg").remove()}if(w>0){$pgTable.parent().width(w)}return w},updatepager=function(rn,dnd){var self=this,$self=$(self),gridSelf=self.grid,cp,last,base,from,to,tot,fmt,pgboxes=p.pager||"",sppg,tspg=p.pager?"_"+p.pager.substr(1):"",bDiv=gridSelf.bDiv,numberFormat=$.fmatter?$.fmatter.NumberFormat:null,tspgTop=p.toppager?"_"+p.toppager.substr(1):"";base=parseInt(p.page,10)-1;if(base<0){base=0}base=base*parseInt(p.rowNum,10);to=base+p.reccount;if(p.scroll){var rows=$(getGridComponent("bTable",$(bDiv))[0].rows).slice(1);base=to-rows.length;p.reccount=rows.length;var rh=rows.outerHeight()||gridSelf.prevRowHeight;if(rh){var top=base*rh;var height=parseInt(p.records,10)*rh;$(bDiv).children("div").first().css({height:height+"px"}).children("div").first().css({height:top+"px",display:top+"px"?"":"none"});if(bDiv.scrollTop===0&&p.page>1){bDiv.scrollTop=p.rowNum*(p.page-1)*rh}}bDiv.scrollLeft=gridSelf.hDiv.scrollLeft}pgboxes+=p.toppager?(pgboxes?",":"")+p.toppager:"";if(pgboxes){fmt=getRes("formatter.integer")||{};cp=intNum(p.page);last=intNum(p.lastpage);$(".selbox",pgboxes)[propOrAttr]("disabled",false);if(p.pginput===true){$(".ui-pg-input",pgboxes).val(p.page);sppg=p.toppager?"#sp_1"+tspg+",#sp_1"+tspgTop:"#sp_1"+tspg;$(sppg).html($.fmatter?numberFormat(p.lastpage,fmt):p.lastpage).closest(".ui-pg-table").each(function(){setWidthOfPagerTdWithPager.call(self,$(this))})}if(p.viewrecords){if(p.reccount===0){$(".ui-paging-info",pgboxes).html(getDef("emptyrecords"))}else{from=base+1;tot=p.records;if($.fmatter){from=numberFormat(from,fmt);to=numberFormat(to,fmt);tot=numberFormat(tot,fmt)}$(".ui-paging-info",pgboxes).html(jgrid.format(getDef("recordtext"),from,to,tot))}}if(p.pgbuttons===true){if(cp<=0){cp=last=0}if(cp===1||cp===0){$("#first"+tspg+", #prev"+tspg).addClass("ui-state-disabled").removeClass("ui-state-hover");if(p.toppager){$("#first_t"+tspgTop+", #prev_t"+tspgTop).addClass("ui-state-disabled").removeClass("ui-state-hover")}}else{$("#first"+tspg+", #prev"+tspg).removeClass("ui-state-disabled");if(p.toppager){$("#first_t"+tspgTop+", #prev_t"+tspgTop).removeClass("ui-state-disabled")}}if(cp===last||cp===0){$("#next"+tspg+", #last"+tspg).addClass("ui-state-disabled").removeClass("ui-state-hover");if(p.toppager){$("#next_t"+tspgTop+", #last_t"+tspgTop).addClass("ui-state-disabled").removeClass("ui-state-hover")}}else{$("#next"+tspg+", #last"+tspg).removeClass("ui-state-disabled");if(p.toppager){$("#next_t"+tspgTop+", #last_t"+tspgTop).removeClass("ui-state-disabled")}}}}if(rn===true&&p.rownumbers===true){$(">td.jqgrid-rownum",self.rows).each(function(i){$(this).html(base+1+i)})}if(dnd&&p.jqgdnd){$self.jqGrid("gridDnD","updateDnD")}feedback.call(self,"gridComplete");$self.triggerHandler("jqGridAfterGridComplete")},beginReq=function(){var self=this;self.grid.hDiv.loading=true;if(p.hiddengrid){return}$(self).jqGrid("progressBar",{method:"show",loadtype:p.loadui,htmlcontent:getDef("loadtext")})},endReq=function(){var self=this;self.grid.hDiv.loading=false;$(self).jqGrid("progressBar",{method:"hide",loadtype:p.loadui})},populate=function(npage){var self=this,$self=$(self),gridSelf=self.grid;if(!gridSelf.hDiv.loading){var pvis=p.scroll&&npage===false,prm={},dt,dstr,pN=p.prmNames;if(p.page<=0){p.page=Math.min(1,p.lastpage)}if(pN.search!==null){prm[pN.search]=p.search}if(pN.nd!==null){prm[pN.nd]=new Date().getTime()}if(isNaN(parseInt(p.rowNum,10))||parseInt(p.rowNum,10)<=0){p.rowNum=p.maxRowNum}if(pN.rows!==null){prm[pN.rows]=p.rowNum}if(pN.page!==null){prm[pN.page]=p.page}if(pN.sort!==null){prm[pN.sort]=p.sortname}if(pN.order!==null){prm[pN.order]=p.sortorder}if(p.rowTotal!==null&&pN.totalrows!==null){prm[pN.totalrows]=p.rowTotal}var lcf=$.isFunction(p.loadComplete),lc=lcf?p.loadComplete:null;var adjust=0;npage=npage||1;if(npage>1){if(pN.npage!==null){prm[pN.npage]=npage;adjust=npage-1;npage=1}else{lc=function(req){p.page++;gridSelf.hDiv.loading=false;if(lcf){p.loadComplete.call(self,req)}populate.call(self,npage-1)}}}else{if(pN.npage!==null){delete p.postData[pN.npage]}}if(p.grouping){$self.jqGrid("groupingSetup");var grp=p.groupingView,gi,gs="",index,iColumn,cmValue;for(gi=0;gi<grp.groupField.length;gi++){index=grp.groupField[gi];for(iColumn=0;iColumn<p.colModel.length;iColumn++){cmValue=p.colModel[iColumn];if(cmValue.name===index&&cmValue.index){index=cmValue.index}}gs+=index+" "+grp.groupOrder[gi]+", "}prm[pN.sort]=gs+prm[pN.sort]}$.extend(p.postData,prm);var rcnt=!p.scroll?1:self.rows.length-1,fixDisplayingHorizontalScrollbar=function(){var gBodyWidth=$self.width(),gViewWidth=$self.closest(".ui-jqgrid-view").width(),gridCssHeight=$self.css("height");if(gViewWidth<gBodyWidth&&p.reccount===0){$self.css("height","1px")}else{if(gridCssHeight!=="0"&&gridCssHeight!=="0px"){$self.css("height","")}}},resort=function(){var iRes;if(p.autoresizeOnLoad){$self.jqGrid("autoResizeAllColumns");clearArray(p.columnsToReResizing)}else{for(iRes=0;iRes<p.columnsToReResizing.length;iRes++){$self.jqGrid("autoResizeColumn",p.columnsToReResizing[iRes])}clearArray(p.columnsToReResizing)}},finalReportSteps=function(){feedback.call(self,"loadComplete",dstr);resort();$self.triggerHandler("jqGridAfterLoadComplete",[dstr]);endReq.call(self);p.datatype="local";p.datastr=null;fixScrollOffsetAndhBoxPadding.call(self);fixDisplayingHorizontalScrollbar()},finalReportVirtual=function(data){$self.triggerHandler("jqGridLoadComplete",[data]);if(lc){lc.call(self,data)}resort();$self.triggerHandler("jqGridAfterLoadComplete",[data]);if(pvis){gridSelf.populateVisible.call(self)}if(npage===1){endReq.call(self)}fixScrollOffsetAndhBoxPadding.call(self);fixDisplayingHorizontalScrollbar()};if(!feedback.call(self,"beforeRequest")){return}if($.isFunction(p.datatype)){p.datatype.call(self,p.postData,"load_"+p.id,rcnt,npage,adjust);return}dt=p.datatype.toLowerCase();switch(dt){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:p.url,type:p.mtype,dataType:dt,data:jgrid.serializeFeedback.call(ts,p.serializeGridData,"jqGridSerializeGridData",p.postData),success:function(data,textStatus,jqXHR){if($.isFunction(p.beforeProcessing)){if(p.beforeProcessing.call(self,data,textStatus,jqXHR)===false){endReq.call(self);return}}if(dt==="xml"){addXmlData.call(self,data,rcnt,npage>1,adjust)}else{addJSONData.call(self,data,rcnt,npage>1,adjust)}finalReportVirtual(data);if(p.loadonce||p.treeGrid){p.dataTypeOrg=p.datatype;p.datatype="local"}},error:function(jqXHR,textStatus,errorThrown){if($.isFunction(p.loadError)){p.loadError.call(self,jqXHR,textStatus,errorThrown)}if(npage===1){endReq.call(self)}},beforeSend:function(jqXHR,settings){var gotoreq=true;if($.isFunction(p.loadBeforeSend)){gotoreq=p.loadBeforeSend.call(self,jqXHR,settings)}if(gotoreq===undefined){gotoreq=true}if(gotoreq===false){return false}beginReq.call(self)}},jgrid.ajaxOptions,p.ajaxGridOptions));break;case"xmlstring":beginReq.call(self);dstr=typeof p.datastr==="string"?$.parseXML(p.datastr):p.datastr;addXmlData.call(self,dstr);finalReportSteps();break;case"jsonstring":beginReq.call(self);dstr=typeof p.datastr==="string"?jgrid.parse(p.datastr):p.datastr;addJSONData.call(self,dstr);finalReportSteps();break;case"local":case"clientside":beginReq.call(self);p.datatype="local";var req=addLocalData.call(self);addJSONData.call(self,req,rcnt,npage>1,adjust);finalReportVirtual(req);break}}},setHeadCheckBox=function(checked){var self=this,gridSelf=self.grid;$(p.cb,gridSelf.hDiv)[p.propOrAttr]("checked",checked);var fid=p.frozenColumns?p.id+"_frozen":"";if(fid){$(p.cb,gridSelf.fhDiv)[p.propOrAttr]("checked",checked)}},setPager=function(pgid,tp){var sep="<td class='ui-pg-button ui-state-disabled'><span class='ui-separator'></span></td>",pginp="",blockAlign=p.pagerpos==="left"?"margin-right:auto;":(p.pagerpos==="right"?"margin-left:auto;":"margin-left:auto;margin-right:auto;"),pgl="<table "+(isMSIE7?"cellspacing='0' ":"")+"style='table-layout:auto;"+blockAlign+"' class='ui-pg-table'><tbody><tr>",str="",pgcnt,lft,cent,rgt,twd,i,clearVals=function(onpaging,newPage,newRowNum){if(!feedback.call(ts,"onPaging",onpaging,{newPage:newPage,currentPage:intNum(p.page,1),lastPage:intNum(p.lastpage,1),currentRowNum:intNum(p.rowNum,10),newRowNum:newRowNum})){return false}p.selrow=null;if(p.multiselect){clearArray(p.selarrrow);setHeadCheckBox.call(ts,false)}clearArray(p.savedRow);return true};tp+="_"+pgid;pgcnt="pg_"+pgid;lft=pgid+"_left";cent=pgid+"_center";rgt=pgid+"_right";$("#"+jqID(pgid)).append("<div id='"+pgcnt+"' class='ui-pager-control' role='group'><table "+(isMSIE7?"cellspacing='0' ":"")+"class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+lft+"' style='text-align:left;'></td><td id='"+cent+"' style='text-align:center;white-space:pre;'></td><td id='"+rgt+"' style='text-align:right;'></td></tr></tbody></table></div>").attr("dir","ltr");pgcnt="#"+jqID(pgcnt);if(p.rowList.length>0){str="<td dir='"+dir+"'>";var pgrecs=getDef("pgrecs");str+="<select class='ui-pg-selbox' role='listbox' "+(pgrecs?"title='"+pgrecs+"'":"")+">";var strnm;for(i=0;i<p.rowList.length;i++){strnm=p.rowList[i].toString().split(":");if(strnm.length===1){strnm[1]=strnm[0]}str+='<option role="option" value="'+strnm[0]+'"'+((intNum(p.rowNum,0)===intNum(strnm[0],0))?' selected="selected"':"")+">"+strnm[1]+"</option>"}str+="</select></td>"}if(dir==="rtl"){pgl+=str}if(p.pginput===true){pginp="<td dir='"+dir+"'>"+jgrid.format(getDef("pgtext")||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+pgid+"'>0</span>")+"</td>"}pgid="#"+jqID(pgid);if(p.pgbuttons===true){var po=["first"+tp,"prev"+tp,"next"+tp,"last"+tp],pgfirst=getDef("pgfirst"),pgprev=getDef("pgprev"),pgnext=getDef("pgnext"),pglast=getDef("pglast");if(dir==="rtl"){po.reverse()}pgl+="<td id='"+po[0]+"' class='ui-pg-button ui-corner-all' "+(pgfirst?"title='"+pgfirst+"'":"")+"><span class='"+getIcon("pager.first")+"'></span></td>";pgl+="<td id='"+po[1]+"' class='ui-pg-button ui-corner-all' "+(pgprev?"title='"+pgprev+"'":"")+"><span class='"+getIcon("pager.prev")+"'></span></td>";pgl+=pginp!==""?sep+pginp+sep:"";pgl+="<td id='"+po[2]+"' class='ui-pg-button ui-corner-all' "+(pgnext?"title='"+pgnext+"'":"")+"><span class='"+getIcon("pager.next")+"'></span></td>";pgl+="<td id='"+po[3]+"' class='ui-pg-button ui-corner-all' "+(pglast?"title='"+pglast+"'":"")+"><span class='"+getIcon("pager.last")+"'></span></td>"}else{if(pginp!==""){pgl+=pginp}}if(dir==="ltr"){pgl+=str}pgl+="</tr></tbody></table>";if(p.viewrecords===true){$("td"+pgid+"_"+p.recordpos,pgcnt).append("<div dir='"+dir+"' style='text-align:"+p.recordpos+"' class='ui-paging-info'></div>")}var $pagerIn=$("td"+pgid+"_"+p.pagerpos,pgcnt);$pagerIn.append(pgl);twd=setWidthOfPagerTdWithPager.call(this,$pagerIn.children(".ui-pg-table"));p._nvtd=[];p._nvtd[0]=twd?Math.floor((p.width-twd)/2):Math.floor(p.width/3);p._nvtd[1]=0;pgl=null;$(".ui-pg-selbox",pgcnt).bind("change",function(){var newRowNum=intNum(this.value,10),newPage=Math.round(p.rowNum*(p.page-1)/newRowNum-0.5)+1;if(!clearVals("records",newPage,newRowNum)){return false}p.page=newPage;p.rowNum=newRowNum;if(p.pager){$(".ui-pg-selbox",p.pager).val(newRowNum)}if(p.toppager){$(".ui-pg-selbox",p.toppager).val(newRowNum)}populate.call(ts);return false});if(p.pgbuttons===true){$(".ui-pg-button",pgcnt).hover(function(){if($(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{$(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!$(this).hasClass("ui-state-disabled")){$(this).removeClass("ui-state-hover");this.style.cursor="default"}});$("#first"+jqID(tp)+", #prev"+jqID(tp)+", #next"+jqID(tp)+", #last"+jqID(tp)).click(function(){if($(this).hasClass("ui-state-disabled")){return false}var cp=intNum(p.page,1),newPage=cp,onpaging=this.id,last=intNum(p.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp===last){np=false;lp=false}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(this.id==="first"+tp&&fp){onpaging="first";newPage=1;selclick=true}if(this.id==="prev"+tp&&pp){onpaging="prev";newPage=(cp-1);selclick=true}if(this.id==="next"+tp&&np){onpaging="next";newPage=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){onpaging="last";newPage=last;selclick=true}if(!clearVals(onpaging,newPage,intNum(p.rowNum,10))){return false}p.page=newPage;if(selclick){populate.call(ts)}return false})}if(p.pginput===true){$("input.ui-pg-input",pgcnt).keypress(function(e){var key=e.charCode||e.keyCode||0,newPage=intNum($(this).val(),1);if(key===13){if(!clearVals("user",newPage,intNum(p.rowNum,10))){return false}$(this).val(newPage);p.page=($(this).val()>0)?$(this).val():p.page;populate.call(ts);return false}return this})}},multiSort=function(iCol,obj){var splas,sort="",colModel=p.colModel,cm=colModel[iCol],fs=false,so="",$selTh=p.frozenColumns?$(obj):$(ts.grid.headers[iCol].el),$iconsSpan=$selTh.find("span.s-ico"),$iconAsc=$iconsSpan.children("span.ui-icon-asc"),$iconDesc=$iconsSpan.children("span.ui-icon-desc"),$iconsActive=$iconAsc,$iconsInictive=$iconDesc;$selTh.find("span.ui-grid-ico-sort").addClass("ui-state-disabled");$selTh.attr("aria-selected","false");if(cm.lso){if(cm.lso==="asc"){cm.lso+="-desc";so="desc";$iconsActive=$iconDesc;$iconsInictive=$iconAsc}else{if(cm.lso==="desc"){cm.lso+="-asc";so="asc"}else{if(cm.lso==="asc-desc"||cm.lso==="desc-asc"){cm.lso="";if(!p.viewsortcols[0]){$iconsSpan.hide()}}}}}else{cm.lso=so=cm.firstsortorder||"asc";$iconsActive=$iconAsc;$iconsInictive=$iconDesc}if(so){$iconsSpan.show();$iconsActive.removeClass("ui-state-disabled").css("display","");if(p.showOneSortIcon){$iconsInictive.hide()}$selTh.attr("aria-selected","true")}p.sortorder="";$.each(colModel,function(i){if(this.lso){if(i>0&&fs){sort+=", "}splas=this.lso.split("-");sort+=colModel[i].index||colModel[i].name;sort+=" "+splas[splas.length-1];fs=true;p.sortorder=splas[splas.length-1]}});sort=sort.substring(0,sort.lastIndexOf(p.sortorder));p.sortname=sort},sortData=function(index,idxcol,reload,sor,obj){var self=this,mygrid=self.grid;if(!p.colModel[idxcol].sortable){return}if(p.savedRow.length>0){return}if(!reload){if(p.lastsort===idxcol&&p.sortname!==""){if(p.sortorder==="asc"){p.sortorder="desc"}else{if(p.sortorder==="desc"){p.sortorder="asc"}}}else{p.sortorder=p.colModel[idxcol].firstsortorder||"asc"}p.page=1}if(p.multiSort){multiSort(idxcol,obj)}else{if(sor){if(p.lastsort===idxcol&&p.sortorder===sor&&!reload){return}p.sortorder=sor}var headers=mygrid.headers,fhDiv=mygrid.fhDiv,$previousSelectedTh=headers[p.lastsort]?$(headers[p.lastsort].el):$(),$newSelectedTh=p.frozenColumns?$(obj):$(headers[idxcol].el),$iconsSpan=$newSelectedTh.find("span.s-ico"),cm=p.colModel[p.lastsort],$iconsActive=$iconsSpan.children("span.ui-icon-"+p.sortorder),$iconsInictive=$iconsSpan.children("span.ui-icon-"+(p.sortorder==="asc"?"desc":"asc"));$previousSelectedTh.find("span.ui-grid-ico-sort").addClass("ui-state-disabled");$previousSelectedTh.attr("aria-selected","false");if(p.frozenColumns){fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled");fhDiv.find("th").attr("aria-selected","false")}$iconsActive.removeClass("ui-state-disabled").css("display","");if(p.showOneSortIcon){$iconsInictive.removeClass("ui-state-disabled").hide()}$newSelectedTh.attr("aria-selected","true");if(!p.viewsortcols[0]){if(p.lastsort!==idxcol){if(p.frozenColumns){fhDiv.find("span.s-ico").hide()}$previousSelectedTh.find("span.s-ico").hide();$iconsSpan.show()}else{if(p.sortname===""){$iconsSpan.show()}}}if(p.lastsort!==idxcol){if($previousSelectedTh.data("autoResized")==="true"&&((cm!=null&&cm.autoResizing!=null&&cm.autoResizing.compact)||p.autoResizing.compact)){p.columnsToReResizing.push(p.lastsort)}}if(p.lastsort!==idxcol&&$newSelectedTh.data("autoResized")==="true"){cm=p.colModel[idxcol];if((cm!=null&&cm.autoResizing!=null&&cm.autoResizing.compact)||p.autoResizing.compact){p.columnsToReResizing.push(idxcol)}}index=index.substring(5+p.id.length+1);p.sortname=p.colModel[idxcol].index||index}if(!feedback.call(self,"onSortCol",p.sortname,idxcol,p.sortorder)){p.lastsort=idxcol;return}if(p.datatype==="local"){if(p.deselectAfterSort){$(self).jqGrid("resetSelection")}}else{p.selrow=null;if(p.multiselect){setHeadCheckBox.call(self,false)}clearArray(p.selarrrow);clearArray(p.savedRow)}if(p.scroll){var sscroll=mygrid.bDiv.scrollLeft;emptyRows.call(self,true,false);mygrid.hDiv.scrollLeft=sscroll}if(p.subGrid&&p.datatype==="local"){$("td.sgexpanded","#"+jqID(p.id)).each(function(){$(this).trigger("click")})}populate.call(self);p.lastsort=idxcol;if(p.sortname!==index&&idxcol){p.lastsort=idxcol}},setColWidth=function(){var initwidth=0,brd=jgrid.cell_width?0:intNum(p.cellLayout,0),vc=0,lvc,scw=intNum(p.scrollOffset,0),cw,hs=false,aw,gw=0,cr;$.each(p.colModel,function(){if(this.hidden===undefined){this.hidden=false}if(p.grouping&&p.autowidth){var ind=$.inArray(this.name,p.groupingView.groupField);if(ind>=0&&p.groupingView.groupColumnShow.length>ind){this.hidden=!p.groupingView.groupColumnShow[ind]}}this.widthOrg=cw=intNum(this.width,0);if(this.hidden===false){initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}}});if(isNaN(p.width)){p.width=initwidth+((p.shrinkToFit===false&&!isNaN(p.height))?scw:0)}grid.width=p.width;p.tblwidth=initwidth;if(p.shrinkToFit===false&&p.forceFit===true){p.forceFit=false}if(p.shrinkToFit===true&&vc>0){aw=grid.width-brd*vc-gw;if(!isNaN(p.height)){aw-=scw;hs=true}initwidth=0;$.each(p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=Math.round(aw*this.width/(p.tblwidth-brd*vc-gw));this.width=cw;initwidth+=cw;lvc=i}});cr=0;if(hs){if(grid.width-gw-(initwidth+brd*vc)!==scw){cr=grid.width-gw-(initwidth+brd*vc)-scw}}else{if(!hs&&Math.abs(grid.width-gw-(initwidth+brd*vc))!==1){cr=grid.width-gw-(initwidth+brd*vc)}}p.colModel[lvc].width+=cr;p.tblwidth=initwidth+cr+brd*vc+gw;if(p.tblwidth>p.width){p.colModel[lvc].width-=(p.tblwidth-parseInt(p.width,10));p.tblwidth=p.width}}},nextVisible=function(iCol){var ret=iCol,j=iCol,i;for(i=iCol+1;i<p.colModel.length;i++){if(p.colModel[i].hidden!==true){j=i;break}}return j-ret},getOffset=function(iCol){var $th=$(ts.grid.headers[iCol].el),ret=[$th.position().left+$th.outerWidth()];if(p.direction==="rtl"){ret[0]=p.width-ret[0]}ret[0]-=ts.grid.bDiv.scrollLeft;ret.push($(ts.grid.hDiv).position().top);ret.push($(ts.grid.bDiv).offset().top-$(ts.grid.hDiv).offset().top+$(ts.grid.bDiv).height());return ret},getColumnHeaderIndex=function(th){var i,headers=ts.grid.headers,ci=getCellIndex(th);for(i=0;i<headers.length;i++){if(th===headers[i].el){ci=i;break}}return ci},colTemplate;if($.inArray(p.multikey,sortkeys)===-1){p.multikey=false}p.keyName=false;p.sortorder=p.sortorder.toLowerCase();jgrid.cell_width=jgrid.cellWidth();var jgridCmTemplate=jgrid.cmTemplate;for(iCol=0;iCol<p.colModel.length;iCol++){colTemplate=typeof p.colModel[iCol].template==="string"?(jgridCmTemplate!=null&&(typeof jgridCmTemplate[p.colModel[iCol].template]==="object"||typeof jgridCmTemplate[p.colModel[iCol].template]==="function")?jgridCmTemplate[p.colModel[iCol].template]:{}):p.colModel[iCol].template;if($.isFunction(colTemplate)){colTemplate=colTemplate.call(ts,{cm:p.colModel[iCol],iCol:iCol})}p.colModel[iCol]=$.extend(true,{},p.cmTemplate,colTemplate||{},p.colModel[iCol]);if(p.keyName===false&&p.colModel[iCol].key===true){p.keyName=p.colModel[iCol].name}}if(p.grouping===true){p.scroll=false;p.rownumbers=false;p.treeGrid=false;p.gridview=true}if(p.treeGrid===true){try{$(ts).jqGrid("setTreeGrid")}catch(ignore){}if(p.datatype!=="local"){p.localReader={id:"_id_"}}}if(p.subGrid){try{$(ts).jqGrid("setSubGrid")}catch(ignore){}}if(p.multiselect){p.colNames.unshift("<input role='checkbox' id='"+p.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>");p.colModel.unshift({name:"cb",width:jgrid.cell_width?p.multiselectWidth+p.cellLayout:p.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}if(p.rownumbers){p.colNames.unshift("");p.colModel.unshift({name:"rn",width:jgrid.cell_width?p.rownumWidth+p.cellLayout:p.rownumWidth,labelClasses:"jqgh_rn",classes:"td_rn",sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}p.xmlReader=$.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},p.xmlReader);p.jsonReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},p.jsonReader);p.localReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},p.localReader);if(p.scroll){p.pgbuttons=false;p.pginput=false;p.rowList=[]}if(p.data.length){normalizeData.call(ts);refreshIndex()}var thead="<thead><tr class='ui-jqgrid-labels' role='row'>",tdc,idn,w,res,sort,cmi,tooltip,labelStyle,td,ptr,tbody,imgs,iac="",idc="",sortarr=[],sortord=[],sotmp=[];if(p.shrinkToFit===true&&p.forceFit===true){for(iCol=p.colModel.length-1;iCol>=0;iCol--){if(p.colModel[iCol].hidden!==true){p.colModel[iCol].resizable=false;break}}}if(p.viewsortcols[1]==="horizontal"){iac=" ui-i-asc";idc=" ui-i-desc"}tdc=isMSIE?"ui-th-div-ie":"";imgs="<span class='s-ico' style='display:none'><span class='ui-grid-ico-sort ui-icon-asc"+iac+" ui-state-disabled "+getIcon("sort.asc")+" ui-sort-"+dir+"'></span>";imgs+="<span class='ui-grid-ico-sort ui-icon-desc"+idc+" ui-state-disabled "+getIcon("sort.desc")+" ui-sort-"+dir+"'></span></span>";if(p.multiSort){sortarr=p.sortname.split(",");var iSort;for(iSort=0;iSort<sortarr.length;iSort++){sotmp=$.trim(sortarr[iSort]).split(" ");sortarr[iSort]=$.trim(sotmp[0]);sortord[iSort]=sotmp[1]?$.trim(sotmp[1]):p.sortorder||"asc"}}for(iCol=0;iCol<p.colNames.length;iCol++){cmi=p.colModel[iCol];tooltip=p.headertitles?(' title="'+stripHtml(p.colNames[iCol])+'"'):"";thead+="<th id='"+p.id+"_"+cmi.name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+dir+"'"+tooltip+">";idn=cmi.index||cmi.name;switch(cmi.labelAlign){case"left":labelStyle="text-align:left;";break;case"right":labelStyle="text-align:right;"+(cmi.sortable===false?"":"padding-right:"+p.autoResizing.widthOfVisiblePartOfSortIcon+"px;");break;case"likeData":labelStyle=cmi.align===undefined||cmi.align==="left"?"text-align:left;":(cmi.align==="right"?"text-align:right;"+(cmi.sortable===false?"":"padding-right:"+p.autoResizing.widthOfVisiblePartOfSortIcon+"px;"):"");break;default:labelStyle=""}thead+="<div id='jqgh_"+p.id+"_"+cmi.name+"'"+(tdc===""&&!cmi.labelClasses?"":" class='"+(tdc!==""?tdc+" ":"")+(cmi.labelClasses||"")+"'")+(labelStyle===""?"":" style='"+labelStyle+"'")+">"+(cmi.autoResizable&&cmi.formatter!=="actions"?"<span class='"+p.autoResizing.wrapperClassName+"'>"+p.colNames[iCol]+"</span>":p.colNames[iCol]);if(!cmi.width){cmi.width=150}else{cmi.width=parseInt(cmi.width,10)}if(typeof cmi.title!=="boolean"){cmi.title=true}cmi.lso="";if(idn===p.sortname){p.lastsort=iCol}if(p.multiSort){sotmp=$.inArray(idn,sortarr);if(sotmp!==-1){cmi.lso=sortord[sotmp]}}thead+=imgs+"</div></th>"}thead+="</tr></thead>";imgs=null;$(ts).append(thead);$(ts.tHead).children("tr").children("th").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});if(p.multiselect){var emp=[],chk;$(p.cb,ts).bind("click",function(){clearArray(p.selarrrow);var froz=p.frozenColumns===true?p.id+"_frozen":"";if(this.checked){$(ts.rows).each(function(i){if(i>0){if(!$(this).hasClass("ui-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass("ui-state-disabled")&&!$(this).hasClass("jqfoot")){$("#jqg_"+jqID(p.id)+"_"+jqID(this.id))[p.propOrAttr]("checked",true);$(this).addClass("ui-state-highlight").attr("aria-selected","true");p.selarrrow.push(this.id);p.selrow=this.id;if(froz){$("#jqg_"+jqID(p.id)+"_"+jqID(this.id),ts.grid.fbDiv)[p.propOrAttr]("checked",true);$("#"+jqID(this.id),ts.grid.fbDiv).addClass("ui-state-highlight")}}}});chk=true;emp=[]}else{$(ts.rows).each(function(i){if(i>0){if(!$(this).hasClass("ui-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass("ui-state-disabled")&&!$(this).hasClass("jqfoot")&&jgrid.detectRowEditing.call(ts,this.id)===null){$("#jqg_"+jqID(p.id)+"_"+jqID(this.id))[p.propOrAttr]("checked",false);$(this).removeClass("ui-state-highlight").attr("aria-selected","false");emp.push(this.id);if(froz){$("#jqg_"+jqID(p.id)+"_"+jqID(this.id),ts.grid.fbDiv)[p.propOrAttr]("checked",false);$("#"+jqID(this.id),ts.grid.fbDiv).removeClass("ui-state-highlight")}}}});p.selrow=null;chk=false}feedback.call(ts,"onSelectAll",chk?p.selarrrow:emp,chk)})}if(p.autowidth===true){var pw=$(eg).innerWidth();p.width=pw>0?pw:"nw"}p.widthOrg=p.width;setColWidth();$(eg).css("width",grid.width+"px").append("<div class='ui-jqgrid-resize-mark' id='"+p.rsId+"'>&#160;</div>");$(p.rs).bind("selectstart",function(){return false}).click(myResizerClickHandler).dblclick(function(e){var iColIndex=$(this).data("idx"),pageX=$(this).data("pageX"),cm=p.colModel[iColIndex];if(pageX==null){return false}var arPageX=String(pageX).split(";"),pageX1=parseFloat(arPageX[0]),pageX2=parseFloat(arPageX[1]);if(arPageX.length===2&&(Math.abs(pageX1-pageX2)>5||Math.abs(e.pageX-pageX1)>5||Math.abs(e.pageX-pageX2)>5)){return false}if(feedback.call(ts,"resizeDblClick",iColIndex,cm,e)&&cm!=null&&cm.autoResizable){$(ts).jqGrid("autoResizeColumn",iColIndex)}return false});$(gv).css("width",grid.width+"px");var tfoot="";if(p.footerrow){tfoot+="<table role='presentation' style='width:"+p.tblwidth+"px' class='ui-jqgrid-ftable'"+(isMSIE7?" cellspacing='0'":"")+"><tbody><tr role='row' class='ui-widget-content footrow footrow-"+dir+"'>"}var firstr="<tr class='jqgfirstrow' role='row' style='height:auto'>";p.disableClick=false;$("th",ts.tHead.rows[0]).each(function(j){var cm=p.colModel[j],nm=cm.name,$th=$(this),$sortableDiv=$th.children("div"),$iconsSpan=$sortableDiv.children("span.s-ico"),showOneSortIcon=p.showOneSortIcon;w=cm.width;if(cm.resizable===undefined){cm.resizable=true}if(cm.resizable){res=document.createElement("span");$(res).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+dir).bind("selectstart",function(){return false});$th.addClass(p.resizeclass)}else{res=""}$th.css("width",w+"px").prepend(res);res=null;var hdcol="";if(cm.hidden===true){$th.css("display","none");hdcol="display:none;"}firstr+="<td role='gridcell' style='height:0;width:"+w+"px;"+hdcol+"'></td>";grid.headers[j]={width:w,el:this};sort=cm.sortable;if(typeof sort!=="boolean"){cm.sortable=true;sort=true}if(!(nm==="cb"||nm==="subgrid"||nm==="rn")&&sort){if(p.viewsortcols[2]){$sortableDiv.addClass("ui-jqgrid-sortable")}}if(sort){if(p.multiSort){var notLso=cm.lso==="desc"?"asc":"desc";if(p.viewsortcols[0]){$iconsSpan.show();if(cm.lso){$iconsSpan.children("span.ui-icon-"+cm.lso).removeClass("ui-state-disabled");if(showOneSortIcon){$iconsSpan.children("span.ui-icon-"+notLso).hide()}}}else{if(cm.lso){$iconsSpan.show();$iconsSpan.children("span.ui-icon-"+cm.lso).removeClass("ui-state-disabled");if(showOneSortIcon){$iconsSpan.children("span.ui-icon-"+notLso).hide()}}}}else{var notSortOrder=p.sortorder==="desc"?"asc":"desc";if(p.viewsortcols[0]){$iconsSpan.show();if(j===p.lastsort){$iconsSpan.children("span.ui-icon-"+p.sortorder).removeClass("ui-state-disabled");if(showOneSortIcon){$iconsSpan.children("span.ui-icon-"+notSortOrder).hide()}}}else{if(j===p.lastsort&&p.sortname!==""){$iconsSpan.show();$iconsSpan.children("span.ui-icon-"+p.sortorder).removeClass("ui-state-disabled");if(showOneSortIcon){$iconsSpan.children("span.ui-icon-"+notSortOrder).hide()}}}}}if(p.footerrow){tfoot+="<td role='gridcell' "+formatCol(j,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(e){if($(e.target).closest("th>span.ui-jqgrid-resize").length!==1){return}var ci=getColumnHeaderIndex(this);if(p.forceFit===true){p.nv=nextVisible(ci)}grid.dragStart(ci,e,getOffset(ci));return false}).click(function(e){if(p.disableClick){p.disableClick=false;return false}var s="th.ui-th-column>div",r,d;if(!p.viewsortcols[2]){s+=">span.s-ico>span.ui-grid-ico-sort"}else{s+=".ui-jqgrid-sortable"}var t=$(e.target).closest(s);if(t.length!==1){return}var ci;if(p.frozenColumns){var tid=$(this)[0].id.substring(p.id.length+1);$(p.colModel).each(function(i){if(this.name===tid){ci=i;return false}})}else{ci=getColumnHeaderIndex(this)}if(!p.viewsortcols[2]){r=true;d=t.hasClass("ui-icon-desc")?"desc":"asc"}if(ci!=null){sortData.call(ts,$("div",this)[0].id,ci,r,d,this)}return false});if(p.sortable&&$.fn.sortable){try{$(ts).jqGrid("sortableColumns",$(ts.tHead.rows[0]))}catch(ignore){}}if(p.footerrow){tfoot+="</tr></tbody></table>"}firstr+="</tr>";tbody=document.createElement("tbody");ts.appendChild(tbody);$(ts).addClass("ui-jqgrid-btable").append(firstr);firstr=null;var hTable=$("<table class='ui-jqgrid-htable' style='width:"+p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+p.id+"'"+(isMSIE7?" cellspacing='0'":"")+"></table>").append(ts.tHead),hg=(p.caption&&p.hiddengrid===true)?true:false,hb=$("<div class='ui-jqgrid-hbox"+(dir==="rtl"?"-rtl":"")+"'></div>");grid.hDiv=document.createElement("div");$(grid.hDiv).css({width:grid.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(hb);$(hb).append(hTable);hTable=null;if(hg){$(grid.hDiv).hide()}p.rowNum=parseInt(p.rowNum,10);if(isNaN(p.rowNum)||p.rowNum<=0){p.rowNum=p.maxRowNum}if(p.pager){var $pager,pagerId;if(typeof p.pager==="string"&&p.pager.substr(0,1)!=="#"){pagerId=p.pager;$pager=$("#"+jqID(p.pager))}else{if(p.pager===true){pagerId=randId();$pager=$("<div id='"+pagerId+"'></div>");$pager.appendTo("body");p.pager="#"+jqID(pagerId)}else{$pager=$(p.pager);pagerId=$pager.attr("id")}}if($pager.length>0){$pager.css({width:grid.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(eg);if(hg){$pager.hide()}setPager.call(ts,pagerId,"");p.pager="#"+jqID(pagerId)}else{p.pager=""}}if(p.cellEdit===false&&p.hoverrows===true){$(ts).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="ui-subgrid"){$(ptr).addClass("ui-state-hover")}}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass("ui-state-hover")})}var ri,ci,tdHtml;$(ts).before(grid.hDiv).click(function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0||ptr[0].className.indexOf("ui-state-disabled")>-1||($(td,ts).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==ts.id){return this}ri=ptr[0].id;var scb=$(td).hasClass("cbox"),cSel=feedback.call(ts,"beforeSelectRow",ri,e),editingInfo=jgrid.detectRowEditing.call(ts,ri),locked=editingInfo!=null&&editingInfo.mode!=="cellEditing";if(td.tagName==="A"||(locked&&!scb)){return}td=$(td).closest("tr.jqgrow>td");if(td.length>0){ci=getCellIndex(td);tdHtml=$(td).closest("td,th").html();feedback.call(ts,"onCellSelect",ri,ci,tdHtml,e)}if(p.cellEdit===true){if(p.multiselect&&scb&&cSel){$(ts).jqGrid("setSelection",ri,true,e)}else{if(td.length>0){ri=ptr[0].rowIndex;try{$(ts).jqGrid("editCell",ri,ci,true)}catch(ignore){}}}return}if(!cSel){return}if(!p.multikey){if(p.multiselect&&p.multiboxonly){if(scb){$(ts).jqGrid("setSelection",ri,true,e)}else{var frz=p.frozenColumns?p.id+"_frozen":"";$(p.selarrrow).each(function(i,n){var trid=$(ts).jqGrid("getGridRowById",n);if(trid){$(trid).removeClass("ui-state-highlight")}$("#jqg_"+jqID(p.id)+"_"+jqID(n))[p.propOrAttr]("checked",false);if(frz){$("#"+jqID(n),"#"+jqID(frz)).removeClass("ui-state-highlight");$("#jqg_"+jqID(p.id)+"_"+jqID(n),"#"+jqID(frz))[p.propOrAttr]("checked",false)}});clearArray(p.selarrrow);$(ts).jqGrid("setSelection",ri,true,e)}}else{var oldSelRow=p.selrow;$(ts).jqGrid("setSelection",ri,true,e);if(p.singleSelectClickMode==="toggle"&&!p.multiselect&&oldSelRow===ri){td.parent().removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"});p.selrow=null}}}else{if(e[p.multikey]){$(ts).jqGrid("setSelection",ri,true,e)}else{if(p.multiselect&&scb){scb=$("#jqg_"+jqID(p.id)+"_"+ri).is(":checked");$("#jqg_"+jqID(p.id)+"_"+ri)[propOrAttr]("checked",scb)}}}}).bind("reloadGrid",function(e,opts){var self=this,gridSelf=self.grid,$self=$(this);if(p.treeGrid===true){p.datatype=p.treedatatype}opts=opts||{};if(p.datatype==="local"&&p.dataTypeOrg&&p.loadonce&&opts.fromServer){p.datatype=p.dataTypeOrg;delete p.dataTypeOrg}if(opts.current){gridSelf.selectionPreserver.call(self)}if(p.datatype==="local"){$self.jqGrid("resetSelection");if(p.data.length){normalizeData.call(self);refreshIndex()}}else{if(!p.treeGrid){p.selrow=null;if(p.multiselect){clearArray(p.selarrrow);setHeadCheckBox.call(self,false)}clearArray(p.savedRow)}}if(p.scroll){emptyRows.call(self,true,false)}if(opts.page){var page=parseInt(opts.page,10);if(page>p.lastpage){page=p.lastpage}if(page<1){page=1}p.page=page;if(gridSelf.prevRowHeight){gridSelf.bDiv.scrollTop=(page-1)*gridSelf.prevRowHeight*p.rowNum}else{gridSelf.bDiv.scrollTop=0}}if(gridSelf.prevRowHeight&&p.scroll){delete p.lastpage;gridSelf.populateVisible.call(self)}else{gridSelf.populate.call(self)}if(p._inlinenav===true){$self.jqGrid("showAddEditButtons",false)}return false}).dblclick(function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return}ri=ptr[0].rowIndex;ci=getCellIndex(td);if(!feedback.call(ts,"ondblClickRow",$(ptr).attr("id"),ri,ci,e)){return false}}).bind("contextmenu",function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return}if(!p.multiselect){$(ts).jqGrid("setSelection",ptr[0].id,true,e)}ri=ptr[0].rowIndex;ci=getCellIndex(td);if(!feedback.call(ts,"onRightClickRow",$(ptr).attr("id"),ri,ci,e)){return false}});grid.bDiv=document.createElement("div");if(isMSIE){if(String(p.height).toLowerCase()==="auto"){p.height="100%"}}$(grid.bDiv).append($('<div style="position:relative;'+(isMSIE7?"height:0.01%;":"")+'"></div>').append("<div></div>").append(ts)).addClass("ui-jqgrid-bdiv").css({height:p.height+(isNaN(p.height)?"":"px"),width:(grid.width)+"px"}).scroll(grid.scrollGrid);$(ts).css({width:p.tblwidth+"px"});if(!$.support.tbody){if($(">tbody",ts).length===2){$(">tbody:gt(0)",ts).remove()}}if(p.multikey){if(jgrid.msie){$(grid.bDiv).bind("selectstart",function(){return false})}else{$(grid.bDiv).bind("mousedown",function(){return false})}}if(hg){$(grid.bDiv).hide()}grid.cDiv=document.createElement("div");var visibleGridIcon=getIcon("gridMinimize.visible"),hiddenGridIcon=getIcon("gridMinimize.hidden"),showhide=getDef("showhide"),arf=p.hidegrid===true?$("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all'"+(showhide?" title='"+showhide+"'":"")+"/>").hover(function(){arf.addClass("ui-state-hover")},function(){arf.removeClass("ui-state-hover")}).append("<span class='"+visibleGridIcon+"'></span>"):"";$(grid.cDiv).append("<span class='ui-jqgrid-title'>"+p.caption+"</span>").append(arf).addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(dir==="rtl"?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix");$(grid.cDiv).insertBefore(grid.hDiv);if(p.toolbar[0]){grid.uDiv=document.createElement("div");if(p.toolbar[1]==="top"){$(grid.uDiv).insertBefore(grid.hDiv)}else{if(p.toolbar[1]==="bottom"){$(grid.uDiv).insertAfter(grid.hDiv)}}if(p.toolbar[1]==="both"){grid.ubDiv=document.createElement("div");$(grid.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+p.id).insertBefore(grid.hDiv);$(grid.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+p.id).insertAfter(grid.hDiv);if(hg){$(grid.ubDiv).hide()}}else{$(grid.uDiv).width(grid.width).addClass("ui-userdata ui-state-default").attr("id","t_"+p.id)}if(hg){$(grid.uDiv).hide()}}p.datatype=p.datatype.toLowerCase();if(p.toppager){p.toppager=p.id+"_toppager";grid.topDiv=$("<div id='"+p.toppager+"'></div>")[0];$(grid.topDiv).addClass("ui-state-default ui-jqgrid-toppager").css({width:grid.width+"px"}).insertBefore(grid.hDiv);setPager.call(ts,p.toppager,"_t");p.toppager="#"+jqID(p.toppager)}else{if(p.pager===""&&!p.scroll){p.rowNum=p.maxRowNum}}if(p.footerrow){grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];hb=$("<div class='ui-jqgrid-hbox"+(dir==="rtl"?"-rtl":"")+"'></div>");$(grid.sDiv).append(hb).width(grid.width).insertAfter(grid.hDiv);$(hb).append(tfoot);grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells;if(p.rownumbers){grid.footers[0].className="ui-state-default jqgrid-rownum"}if(hg){$(grid.sDiv).hide()}}hb=null;if(p.caption){var tdt=p.datatype;if(p.hidegrid===true){$(".ui-jqgrid-titlebar-close",grid.cDiv).click(function(e){var elems=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",self=this;if(p.toolbar[0]===true){if(p.toolbar[1]==="both"){elems+=",#"+jqID($(grid.ubDiv).attr("id"))}elems+=",#"+jqID($(grid.uDiv).attr("id"))}var counter=$(elems,p.gView).length;if(p.toppager){elems+=","+p.toppager}if(p.gridstate==="visible"){$(elems,p.gBox).slideUp("fast",function(){counter--;if(counter===0){$("span",self).removeClass(visibleGridIcon).addClass(hiddenGridIcon);p.gridstate="hidden";if($(p.gBox).hasClass("ui-resizable")){$(".ui-resizable-handle",p.gBox).hide()}$(grid.cDiv).addClass("ui-corner-bottom");if(!hg){feedback.call(ts,"onHeaderClick",p.gridstate,e)}}})}else{if(p.gridstate==="hidden"){$(grid.cDiv).removeClass("ui-corner-bottom");$(elems,p.gBox).slideDown("fast",function(){counter--;if(counter===0){$("span",self).removeClass(hiddenGridIcon).addClass(visibleGridIcon);if(hg){p.datatype=tdt;populate.call(ts);hg=false}p.gridstate="visible";if($(p.gBox).hasClass("ui-resizable")){$(".ui-resizable-handle",p.gBox).show()}if(!hg){feedback.call(ts,"onHeaderClick",p.gridstate,e)}}})}}return false});if(hg){p.datatype="local";$(".ui-jqgrid-titlebar-close",grid.cDiv).trigger("click")}}}else{$(grid.cDiv).hide();$(grid.cDiv).nextAll("div:visible").first().addClass("ui-corner-top")}$(grid.hDiv).after(grid.bDiv).mousemove(function(e){if(grid.resizing){grid.dragMove(e);return false}});$(eg).click(myResizerClickHandler).dblclick(function(e){var $resizer=$(p.rs),resizerOffset=$resizer.offset(),iColIndex=$resizer.data("idx"),cm=p.colModel[iColIndex],pageX=$(this).data("pageX")||$resizer.data("pageX");if(pageX==null){return false}var arPageX=String(pageX).split(";"),pageX1=parseFloat(arPageX[0]),pageX2=parseFloat(arPageX[1]);if(arPageX.length===2&&(Math.abs(pageX1-pageX2)>5||Math.abs(e.pageX-pageX1)>5||Math.abs(e.pageX-pageX2)>5)){return false}if(feedback.call(ts,"resizeDblClick",iColIndex,cm)&&(resizerOffset.left-1<=e.pageX&&e.pageX<=resizerOffset.left+$resizer.outerWidth()+1)&&cm!=null&&cm.autoResizable){$(ts).jqGrid("autoResizeColumn",iColIndex)}return false});if(!p.pager){$(grid.cDiv).nextAll("div:visible").filter(":last").addClass("ui-corner-bottom")}$(".ui-jqgrid-labels",grid.hDiv).bind("selectstart",function(){return false});$(document).bind("mouseup.jqGrid"+p.id,function(){if(grid.resizing!==false){grid.dragEnd();return false}return true});ts.formatCol=formatCol;ts.sortData=sortData;ts.updatepager=updatepager;ts.refreshIndex=refreshIndex;ts.setHeadCheckBox=setHeadCheckBox;ts.fixScrollOffsetAndhBoxPadding=fixScrollOffsetAndhBoxPadding;ts.constructTr=constructTr;ts.formatter=function(rowId,cellval,colpos,rwdat,act){return formatter(rowId,cellval,colpos,rwdat,act)};$.extend(grid,{populate:populate,emptyRows:emptyRows,beginReq:beginReq,endReq:endReq});ts.addXmlData=function(d){addXmlData.call(ts,d)};ts.addJSONData=function(d){addJSONData.call(ts,d)};ts.grid.cols=ts.rows[0].cells;feedback.call(ts,"onInitGrid");if(p.treeGrid&&p.datatype==="local"&&p.data!=null&&p.data.length>0){p.datatype="jsonstring";p.datastr=p.data;p.data=[]}populate.call(ts);p.hiddengrid=false})};jgrid.extend({getGridRes:function(defaultPropName){var $t=this[0];if(!$t||!$t.grid||!$t.p){return null}var res=jgrid.getRes(locales[$t.p.locale],defaultPropName)||jgrid.getRes(locales["en-US"],defaultPropName),resDef=jgrid.getRes(jgrid,defaultPropName);return typeof res==="object"&&res!==null&&!$.isArray(res)?$.extend(true,{},res,resDef||{}):resDef!==undefined?resDef:res},getGridParam:function(pName){var $t=this[0];if(!$t||!$t.grid){return null}if(!pName){return $t.p}return $t.p[pName]!==undefined?$t.p[pName]:null},setGridParam:function(newParams,overwrite){return this.each(function(){var self=this;if(overwrite==null){overwrite=false}if(self.grid&&typeof newParams==="object"){if(overwrite===true){var params=$.extend({},self.p,newParams);self.p=params}else{$.extend(true,self.p,newParams)}}})},getGridRowById:function(rowid){if(rowid==null){return null}var row,rowId=rowid.toString();this.each(function(){var i,rows=this.rows,tr;try{i=rows.length;while(i--){tr=rows[i];if(rowId===tr.id){row=tr;break}}}catch(e){row=$(this.grid.bDiv).find("#"+jqID(rowid));row=row.length>0?row[0]:null}});return row},getDataIDs:function(){var ids=[];this.each(function(){var rows=this.rows,len=rows.length,i,tr;if(len&&len>0){for(i=0;i<len;i++){tr=rows[i];if($(tr).hasClass("jqgrow")){ids.push(tr.id)}}}});return ids},setSelection:function(selection,onsr,e){return this.each(function(){var $t=this,p=$t.p,stat,pt,ner,ia,tpsr,fid,csr;if(selection===undefined){return}onsr=onsr===false?false:true;pt=$($t).jqGrid("getGridRowById",selection);if(!pt||!pt.className||pt.className.indexOf("ui-state-disabled")>-1){return}function scrGrid(tr,bDiv){var ch=bDiv.clientHeight,st=bDiv.scrollTop,rpos=$(tr).position().top,rh=tr.clientHeight;if(rpos+rh>=ch+st){bDiv.scrollTop=rpos-(ch+st)+rh+st}else{if(rpos<ch+st){if(rpos<st){bDiv.scrollTop=rpos}}}}if(p.scrollrows===true){ner=$($t).jqGrid("getGridRowById",selection).rowIndex;if(ner>=0){scrGrid($t.rows[ner],$t.grid.bDiv)}}if(p.frozenColumns===true){fid=p.id+"_frozen"}if(!p.multiselect){if(pt.className!=="ui-subgrid"){if(p.selrow!==pt.id){if(p.selrow!==null){csr=$($t).jqGrid("getGridRowById",p.selrow);if(csr){$(csr).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"})}}$(pt).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"});if(fid){$("#"+jqID(p.selrow),"#"+jqID(fid)).removeClass("ui-state-highlight");$("#"+jqID(selection),"#"+jqID(fid)).addClass("ui-state-highlight")}stat=true}else{stat=false}p.selrow=pt.id;if(onsr){feedback.call($t,"onSelectRow",pt.id,stat,e)}}}else{$t.setHeadCheckBox(false);p.selrow=pt.id;ia=$.inArray(p.selrow,p.selarrrow);if(ia===-1){if(pt.className!=="ui-subgrid"){$(pt).addClass("ui-state-highlight").attr("aria-selected","true")}stat=true;p.selarrrow.push(p.selrow)}else{if(jgrid.detectRowEditing.call($t,pt.id)!==null){stat=true}else{if(pt.className!=="ui-subgrid"){$(pt).removeClass("ui-state-highlight").attr("aria-selected","false")}stat=false;p.selarrrow.splice(ia,1);tpsr=p.selarrrow[0];p.selrow=(tpsr===undefined)?null:tpsr}}$("#jqg_"+jqID(p.id)+"_"+jqID(pt.id))[p.propOrAttr]("checked",stat);if(fid){if(ia===-1||stat){$("#"+jqID(selection),"#"+jqID(fid)).addClass("ui-state-highlight")}else{$("#"+jqID(selection),"#"+jqID(fid)).removeClass("ui-state-highlight")}$("#jqg_"+jqID(p.id)+"_"+jqID(selection),"#"+jqID(fid))[p.propOrAttr]("checked",stat)}if(onsr){feedback.call($t,"onSelectRow",pt.id,stat,e)}}})},resetSelection:function(rowid){return this.each(function(){var t=this,p=t.p,sr,frozenColumns=p.frozenColumns===true,gridIdEscaped=jqID(p.id),gridIdSelector=p.idSel,fid=p.id+"_frozen",gridIdFrozenSelector="#"+jqID(fid);if(p.frozenColumns===true){fid=p.id+"_frozen"}if(rowid!==undefined){sr=rowid===p.selrow?p.selrow:rowid;$(gridIdSelector+">tbody>tr#"+jqID(sr)).removeClass("ui-state-highlight").attr("aria-selected","false");if(frozenColumns){$("#"+jqID(sr),gridIdFrozenSelector).removeClass("ui-state-highlight")}if(p.multiselect){$("#jqg_"+jqID(p.id)+"_"+jqID(sr),gridIdSelector)[p.propOrAttr]("checked",false);if(frozenColumns){$("#jqg_"+gridIdEscaped+"_"+jqID(sr),gridIdFrozenSelector)[p.propOrAttr]("checked",false)}t.setHeadCheckBox(false);var ia=$.inArray(jqID(sr),p.selarrrow);if(ia!==-1){p.selarrrow.splice(ia,1)}}sr=null}else{if(!p.multiselect){if(p.selrow){$(gridIdSelector+">tbody>tr#"+jqID(p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");if(frozenColumns){$("#"+jqID(p.selrow),gridIdFrozenSelector).removeClass("ui-state-highlight")}p.selrow=null}}else{$(p.selarrrow).each(function(i,n){var selRowIdEscaped=jqID(n);$($(t).jqGrid("getGridRowById",n)).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+gridIdEscaped+"_"+selRowIdEscaped)[p.propOrAttr]("checked",false);if(frozenColumns){$("#"+selRowIdEscaped,gridIdFrozenSelector).removeClass("ui-state-highlight");$("#jqg_"+gridIdEscaped+"_"+selRowIdEscaped,gridIdFrozenSelector)[p.propOrAttr]("checked",false)}});t.setHeadCheckBox(false);clearArray(p.selarrrow);p.selrow=null}}if(p.cellEdit===true){if(parseInt(p.iCol,10)>=0&&parseInt(p.iRow,10)>=0){$("td:eq("+p.iCol+")",t.rows[p.iRow]).removeClass("edit-cell ui-state-highlight");$(t.rows[p.iRow]).removeClass("selected-row ui-state-hover")}}clearArray(p.savedRow)})},getRowData:function(rowid){var res={},resall;this.each(function(){var $t=this,p=$t.p,getall=false,ind,len=2,j=0,rows=$t.rows,i,$td,cm,nm,td;if(rowid===undefined){getall=true;resall=[];len=rows.length}else{ind=$($t).jqGrid("getGridRowById",rowid);if(!ind){return res}}while(j<len){if(getall){ind=rows[j]}if($(ind).hasClass("jqgrow")){$td=$('td[role="gridcell"]',ind);for(i=0;i<$td.length;i++){cm=p.colModel[i];nm=cm.name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"&&cm.formatter!=="actions"){td=$td[i];if(p.treeGrid===true&&nm===p.ExpandColumn){res[nm]=htmlDecode($("span",td).first().html())}else{try{res[nm]=$.unformat.call($t,td,{rowId:ind.id,colModel:cm},i)}catch(exception){res[nm]=htmlDecode($(td).html())}}}}if(getall){resall.push(res);res={}}}j++}});return resall||res},delRowData:function(rowid){var success=false,rowInd,ia,nextRow;this.each(function(){var $t=this,p=$t.p;rowInd=$($t).jqGrid("getGridRowById",rowid);if(!rowInd){return false}if(p.subGrid){nextRow=$(rowInd).next();if(nextRow.hasClass("ui-subgrid")){nextRow.remove()}}$(rowInd).remove();p.records--;p.reccount--;$t.updatepager(true,false);success=true;if(p.multiselect){ia=$.inArray(rowid,p.selarrrow);if(ia!==-1){p.selarrrow.splice(ia,1)}}if(p.multiselect&&p.selarrrow.length>0){p.selrow=p.selarrrow[p.selarrrow.length-1]}else{if(p.selrow===rowid){p.selrow=null}}if(p.datatype==="local"){var id=stripPref(p.idPrefix,rowid),pos=p._index[id];if(pos!==undefined){p.data.splice(pos,1);$t.refreshIndex()}}if(p.altRows===true&&success){var cn=p.altclass;$($t.rows).each(function(i){if(i%2===1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}});return success},setRowData:function(rowid,data,cssp){var success=true;this.each(function(){var t=this,p=t.p,vl,ind,cp=typeof cssp,lcdata={};if(!t.grid){return false}ind=$(t).jqGrid("getGridRowById",rowid);if(!ind){return false}if(data){try{var id=stripPref(p.idPrefix,rowid),key,pos=p._index[id],oData=pos!=null?p.data[pos]:undefined;$(p.colModel).each(function(i){var cm=this,nm=cm.name,title,dval=getAccessor(data,nm);if(dval!==undefined){if(p.datatype==="local"&&oData!=null){vl=convertOnSaveLocally.call(t,dval,cm,oData[nm],id,oData,i);if($.isFunction(cm.saveLocally)){cm.saveLocally.call(t,{newValue:vl,newItem:lcdata,oldItem:oData,id:id,cm:cm,cmName:nm,iCol:i})}else{lcdata[nm]=vl}}vl=t.formatter(rowid,dval,i,data,"edit");title=cm.title?{title:stripHtml(vl)}:{};if(p.treeGrid===true&&nm===p.ExpandColumn){$("td[role='gridcell']:eq("+i+") > span:first",ind).first().html(vl).attr(title)}else{$("td[role='gridcell']:eq("+i+")",ind).html(vl).attr(title)}}});if(p.datatype==="local"){if(p.treeGrid){for(key in p.treeReader){if(p.treeReader.hasOwnProperty(key)){delete lcdata[p.treeReader[key]]}}}if(oData!==undefined){p.data[pos]=$.extend(true,oData,lcdata)}lcdata=null}}catch(exception){success=false}}if(success){if(cp==="string"){$(ind).addClass(cssp)}else{if(cssp!==null&&cp==="object"){$(ind).css(cssp)}}$(t).triggerHandler("jqGridAfterGridComplete")}});return success},addRowData:function(rowid,rdata,pos,src){if($.inArray(pos,["first","last","before","after"])<0){pos="last"}var success=false,nm,row,gi,si,ni,sind,i,v,prp="",aradd,cnm,cn,data,cm,id;if(rdata){if($.isArray(rdata)){aradd=true;cnm=rowid}else{rdata=[rdata];aradd=false}this.each(function(){var t=this,p=t.p,datalen=rdata.length;ni=p.rownumbers===true?1:0;gi=p.multiselect===true?1:0;si=p.subGrid===true?1:0;if(!aradd){if(rowid!==undefined){rowid=String(rowid)}else{rowid=randId();if(p.keyName!==false){cnm=p.keyName;if(rdata[0][cnm]!==undefined){rowid=rdata[0][cnm]}}}}cn=p.altclass;var k=0,cna="",lcdata={};while(k<datalen){data=rdata[k];row=[];if(aradd){try{rowid=data[cnm];if(rowid===undefined){rowid=randId()}}catch(exception){rowid=randId()}cna=p.altRows===true?(t.rows.length-1)%2===0?cn:"":""}id=rowid;rowid=p.idPrefix+rowid;if(ni){prp=t.formatCol(0,1,"",null,rowid,true);row.push('<td role="gridcell" class="ui-state-default jqgrid-rownum" '+prp+">0</td>")}if(gi){v='<input role="checkbox" type="checkbox" id="jqg_'+p.id+"_"+rowid+'" class="cbox" aria-checked="false"/>';prp=t.formatCol(ni,1,"",null,rowid,true);row.push('<td role="gridcell" '+prp+">"+v+"</td>")}if(si){row.push($(t).jqGrid("addSubGridCell",gi+ni,1))}for(i=gi+si+ni;i<p.colModel.length;i++){cm=p.colModel[i];nm=cm.name;v=convertOnSaveLocally.call(t,data[nm],cm,undefined,id,{},i);if($.isFunction(cm.saveLocally)){cm.saveLocally.call(t,{newValue:v,newItem:lcdata,oldItem:{},id:id,cm:cm,cmName:nm,iCol:i})}else{lcdata[nm]=v}v=t.formatter(rowid,getAccessor(data,nm),i,data);prp=t.formatCol(i,1,v,data,rowid,lcdata);row.push('<td role="gridcell" '+prp+">"+v+"</td>")}row.unshift(t.constructTr(rowid,false,cna,lcdata,data,false));row.push("</tr>");row=row.join("");if(t.rows.length===0){$("table:first",t.grid.bDiv).append(row)}else{switch(pos){case"last":$(t.rows[t.rows.length-1]).after(row);sind=t.rows.length-1;break;case"first":$(t.rows[0]).after(row);sind=1;break;case"after":sind=$(t).jqGrid("getGridRowById",src);if(sind){if($(t.rows[sind.rowIndex+1]).hasClass("ui-subgrid")){$(t.rows[sind.rowIndex+1]).after(row);sind=sind.rowIndex+2}else{$(sind).after(row);sind=sind.rowIndex+1}}break;case"before":sind=$(t).jqGrid("getGridRowById",src);if(sind){$(sind).before(row);sind=sind.rowIndex-1}break}}if(p.subGrid===true){$(t).jqGrid("addSubGrid",gi+ni,sind)}p.records++;p.reccount++;if(p.lastpage===0){p.lastpage=1}feedback.call(t,"afterInsertRow",rowid,data,data);k++;if(p.datatype==="local"){lcdata[p.localReader.id]=id;p._index[id]=p.data.length;p.data.push(lcdata);lcdata={}}}if(p.altRows===true&&!aradd){if(pos==="last"){if((t.rows.length-1)%2===1){$(t.rows[t.rows.length-1]).addClass(cn)}}else{$(t.rows).each(function(i){if(i%2===1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}}t.updatepager(true,true);success=true})}return success},footerData:function(action,data,format){var nm,success=false,res={},title;function isEmpty(obj){var i;for(i in obj){if(obj.hasOwnProperty(i)){return false}}return true}if(action==null){action="get"}if(typeof format!=="boolean"){format=true}action=action.toLowerCase();this.each(function(){var t=this,p=t.p,vl;if(!t.grid||!p.footerrow){return false}if(action==="set"){if(isEmpty(data)){return false}}success=true;$(p.colModel).each(function(i){nm=this.name;if(action==="set"){if(data[nm]!==undefined){vl=format?t.formatter("",data[nm],i,data,"edit"):data[nm];title=this.title?{title:stripHtml(vl)}:{};$("tr.footrow td:eq("+i+")",t.grid.sDiv).html(vl).attr(title);success=true}}else{if(action==="get"){res[nm]=$("tr.footrow td:eq("+i+")",t.grid.sDiv).html()}}})});return action==="get"?res:success},showHideCol:function(colname,show){return this.each(function(){var $t=this,fndh=false,p=$t.p,brd=jgrid.cell_width?0:p.cellLayout,cw;if(!$t.grid){return}if(typeof colname==="string"){colname=[colname]}show=show!=="none"?"":"none";var sw=show===""?true:false,gh=p.groupHeader&&(typeof p.groupHeader==="object"||$.isFunction(p.groupHeader));if(gh){$($t).jqGrid("destroyGroupHeader",false)}$(p.colModel).each(function(i){if($.inArray(this.name,colname)!==-1&&this.hidden===sw){if(p.frozenColumns===true&&this.frozen===true){return true}$("tr[role=row]",$t.grid.hDiv).each(function(){$(this.cells[i]).css("display",show)});$($t.rows).each(function(){if(!$(this).hasClass("jqgroup")){$(this.cells[i]).css("display",show)}});if(p.footerrow){$("tr.footrow td:eq("+i+")",$t.grid.sDiv).css("display",show)}cw=parseInt(this.width,10);if(show==="none"){p.tblwidth-=cw+brd}else{p.tblwidth+=cw+brd}this.hidden=!sw;fndh=true;feedback.call($t,"onShowHideCol",sw,this.name,i)}});if(fndh===true){if(p.shrinkToFit===true&&!isNaN(p.height)){p.tblwidth+=parseInt(p.scrollOffset,10)}$($t).jqGrid("setGridWidth",p.shrinkToFit===true?p.tblwidth:p.width)}if(gh){$($t).jqGrid("setGroupHeaders",p.groupHeader)}})},hideCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"none")})},showCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"")})},remapColumns:function(permutation,updateCells,keepHeader){function resortArray(a){var ac;if(a.length){ac=$.makeArray(a)}else{ac=$.extend({},a)}$.each(permutation,function(i){a[i]=ac[this]})}var ts=this.get(0),p=ts.p,grid=ts.grid;function resortRows(parent,clobj){$(">tr"+(clobj||""),parent).each(function(){var row=this;var elems=$.makeArray(row.cells);$.each(permutation,function(){var e=elems[this];if(e){row.appendChild(e)}})})}resortArray(p.colModel);resortArray(p.colNames);resortArray(grid.headers);resortRows($("thead:first",grid.hDiv),keepHeader&&":not(.ui-jqgrid-labels)");if(updateCells){resortRows($(ts.tBodies[0]),".jqgfirstrow, tr.jqgrow, tr.jqfoot")}if(p.footerrow){resortRows($("tbody:first",grid.sDiv))}if(p.remapColumns){if(!p.remapColumns.length){p.remapColumns=$.makeArray(permutation)}else{resortArray(p.remapColumns)}}p.lastsort=$.inArray(p.lastsort,permutation);if(p.treeGrid){p.expColInd=$.inArray(p.expColInd,permutation)}feedback.call(ts,"onRemapColumns",permutation,updateCells,keepHeader)},setGridWidth:function(nwidth,shrink){return this.each(function(){var $t=this,p=$t.p,cw,grid=$t.grid,initwidth=0,lvc,vc=0,hs=false,aw,gw=0,cr;if(!grid||p==null){return}var colModel=p.colModel,cm,scw=p.scrollOffset,brd=jgrid.cell_width?0:p.cellLayout,thInfo,headers=grid.headers,footers=grid.footers,bDiv=grid.bDiv,hDiv=grid.hDiv,sDiv=grid.sDiv,cols=grid.cols,delta,cle,hCols=$(hDiv).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,setWidthOfAllDivs=function(newWidth){grid.width=p.width=newWidth;$(p.gBox).css("width",newWidth+"px");$(p.gView).css("width",newWidth+"px");$(bDiv).css("width",newWidth+"px");$(hDiv).css("width",newWidth+"px");if(p.pager){$(p.pager).css("width",newWidth+"px")}if(p.toppager){$(p.toppager).css("width",newWidth+"px")}if(p.toolbar[0]===true){$(grid.uDiv).css("width",newWidth+"px");if(p.toolbar[1]==="both"){$(grid.ubDiv).css("width",newWidth+"px")}}if(p.footerrow){$(sDiv).css("width",nwidth+"px")}};if(typeof shrink!=="boolean"){shrink=p.shrinkToFit}if(isNaN(nwidth)){return}nwidth=parseInt(nwidth,10);setWidthOfAllDivs(nwidth);if(shrink===false&&p.forceFit===true){p.forceFit=false}if(shrink===true){$.each(colModel,function(){if(this.hidden===false){cw=this.widthOrg;initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}}});if(vc===0){return}p.tblwidth=parseInt(initwidth,10);aw=nwidth-brd*vc-gw;if(!isNaN(p.height)){if(bDiv.clientHeight<bDiv.scrollHeight||$t.rows.length===1){hs=true;aw-=scw}}initwidth=0;cle=cols.length>0;$.each(colModel,function(i){if(this.hidden===false&&!this.fixed){cw=this.widthOrg;cw=Math.round(aw*cw/(p.tblwidth-brd*vc-gw));if(cw<0){return}this.width=cw;initwidth+=cw;headers[i].width=cw;hCols[i].style.width=cw+"px";if(p.footerrow){footers[i].style.width=cw+"px"}if(cle){cols[i].style.width=cw+"px"}lvc=i}});if(!lvc){return}cr=0;if(hs){if(nwidth-gw-(initwidth+brd*vc)!==scw){cr=nwidth-gw-(initwidth+brd*vc)-scw}}else{if(Math.abs(nwidth-gw-(initwidth+brd*vc))!==1){cr=nwidth-gw-(initwidth+brd*vc)}}cm=colModel[lvc];cm.width+=cr;p.tblwidth=parseInt(initwidth+cr+brd*vc+gw,10);if(p.tblwidth>nwidth){delta=p.tblwidth-parseInt(nwidth,10);p.tblwidth=nwidth;cm.width=cm.width-delta}cw=cm.width;thInfo=headers[lvc];thInfo.width=cw;hCols[lvc].style.width=cw+"px";if(cle){cols[lvc].style.width=cw+"px"}if(p.footerrow){footers[lvc].style.width=cw+"px"}if(p.tblwidth<p.width){setWidthOfAllDivs(p.tblwidth)}if(bDiv.offsetWidth>bDiv.clientWidth){if(!p.autowidth&&(p.widthOrg===undefined||p.widthOrg==="auto"||p.widthOrg==="100%")){setWidthOfAllDivs(bDiv.offsetWidth)}}}if(p.tblwidth){p.tblwidth=parseInt(p.tblwidth,10);$($t).css("width",p.tblwidth+"px");getGridComponent("hTable",$(hDiv)).css("width",p.tblwidth+"px");hDiv.scrollLeft=bDiv.scrollLeft;if(p.footerrow){getGridComponent("fTable",$(sDiv)).css("width",p.tblwidth+"px")}delta=Math.abs(p.tblwidth-p.width);if(p.shrinkToFit&&!shrink&&delta<3&&delta>0){if(p.tblwidth<p.width){setWidthOfAllDivs(p.tblwidth)}if(bDiv.offsetWidth>bDiv.clientWidth){if(!p.autowidth&&(p.widthOrg===undefined||p.widthOrg==="auto"||p.widthOrg==="100%")){setWidthOfAllDivs(bDiv.offsetWidth)}}}}})},setGridHeight:function(nh){return this.each(function(){var $t=this,grid=$t.grid,p=$t.p;if(!$t.grid){return}var bDiv=$(grid.bDiv);bDiv.css({height:nh+(isNaN(nh)?"":"px")});if(p.frozenColumns===true){$(p.idSel+"_frozen").parent().height(bDiv.height()-16)}p.height=nh;if(p.scroll){grid.populateVisible.call($t)}})},setCaption:function(newcap){return this.each(function(){var self=this,cDiv=self.grid.cDiv;self.p.caption=newcap;$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",cDiv).html(newcap);$(cDiv).show();$(cDiv).nextAll("div").removeClass("ui-corner-top")})},setLabel:function(colname,nData,prop,attrp){return this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(colname!==undefined){$($t.p.colModel).each(function(i){if(this.name===colname){pos=i;return false}})}else{return}if(pos>=0){var thecol=$("tr.ui-jqgrid-labels th:eq("+pos+")",$t.grid.hDiv);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico);$t.p.colNames[pos]=nData}if(prop){if(typeof prop==="string"){$(thecol).addClass(prop)}else{$(thecol).css(prop)}}if(typeof attrp==="object"){$(thecol).attr(attrp)}}})},setCell:function(rowid,colname,nData,cssp,attrp,forceupd){return this.each(function(){var $t=this,p=$t.p,pos=-1,v,title,cl,cm,item,ind,tcell,rawdat=[],id,index;if(!$t.grid){return}if(isNaN(colname)){$(p.colModel).each(function(i){if(this.name===colname){pos=i;return false}})}else{pos=parseInt(colname,10)}if(pos>=0){ind=$($t).jqGrid("getGridRowById",rowid);if(ind){tcell=$("td:eq("+pos+")",ind);if(nData!==""||forceupd===true){for(cl=0;cl<ind.cells.length;cl++){rawdat.push(ind.cells[cl].innerHTML)}v=$t.formatter(rowid,nData,pos,rawdat,"edit");title=p.colModel[pos].title?{title:stripHtml(v)}:{};if(p.treeGrid&&$(".tree-wrap",$(tcell)).length>0){$("span",$(tcell)).html(v).attr(title)}else{$(tcell).html(v).attr(title)}if(p.datatype==="local"){id=stripPref(p.idPrefix,rowid);index=p._index[id];if(index!==undefined){item=p.data[index];if(item!=null){cm=p.colModel[pos];v=convertOnSaveLocally.call($t,nData,cm,item[cm.name],id,item,pos);if($.isFunction(cm.saveLocally)){cm.saveLocally.call($t,{newValue:v,newItem:item,oldItem:item,id:id,cm:cm,cmName:cm.name,iCol:pos})}else{item[cm.name]=v}}}}}if(typeof cssp==="string"){$(tcell).addClass(cssp)}else{if(cssp){$(tcell).css(cssp)}}if(typeof attrp==="object"){$(tcell).attr(attrp)}}}})},getCell:function(rowid,col){var ret=false;this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ind=$($t).jqGrid("getGridRowById",rowid);if(ind){try{ret=$.unformat.call($t,$("td:eq("+pos+")",ind),{rowId:ind.id,colModel:$t.p.colModel[pos]},pos)}catch(exception){ret=htmlDecode($("td:eq("+pos+")",ind).html())}}}});return ret},getCol:function(col,obj,mathopr){var ret=[],val,sum=0,min,max,v;obj=typeof obj!=="boolean"?false:obj;if(mathopr===undefined){mathopr=false}this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.p.colModel).each(function(j){if(this.name===col){pos=j;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ln=$t.rows.length,i=0,dlen=0;if(ln&&ln>0){while(i<ln){if($($t.rows[i]).hasClass("jqgrow")){try{val=$.unformat.call($t,$($t.rows[i].cells[pos]),{rowId:$t.rows[i].id,colModel:$t.p.colModel[pos]},pos)}catch(exception){val=htmlDecode($t.rows[i].cells[pos].innerHTML)}if(mathopr){v=parseFloat(val);if(!isNaN(v)){sum+=v;if(max===undefined){max=min=v}min=Math.min(min,v);max=Math.max(max,v);dlen++}}else{if(obj){ret.push({id:$t.rows[i].id,value:val})}else{ret.push(val)}}}i++}if(mathopr){switch(mathopr.toLowerCase()){case"sum":ret=sum;break;case"avg":ret=sum/dlen;break;case"count":ret=(ln-1);break;case"min":ret=min;break;case"max":ret=max;break}}}}});return ret},clearGridData:function(clearfooter){return this.each(function(){var $t=this,p=$t.p,gridIdEscaped=jqID(p.id);if(!$t.grid){return}if(typeof clearfooter!=="boolean"){clearfooter=false}$($t).unbind(".jqGridFormatter");if(p.deepempty){$("#"+gridIdEscaped+" tbody:first tr:gt(0)").remove()}else{var trf=$("#"+gridIdEscaped+" tbody:first tr:first")[0];$("#"+gridIdEscaped+" tbody:first").empty().append(trf)}if(p.footerrow&&clearfooter){$(".ui-jqgrid-ftable td",$t.grid.sDiv).html("&#160;")}p.selrow=null;clearArray(p.selarrrow);clearArray(p.savedRow);p.records=0;p.page=1;p.lastpage=0;p.reccount=0;clearArray(p.data);clearArray(p.lastSelectedData);p._index={};$t.updatepager(true,false)})},getInd:function(rowid,rc){var ret=false,rw;this.each(function(){rw=$(this).jqGrid("getGridRowById",rowid);if(rw){ret=rc===true?rw:rw.rowIndex}});return ret},bindKeys:function(settings){var o=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},settings||{});return this.each(function(){var $t=this,p=$t.p;if(!$("body").is("[role]")){$("body").attr("role","application")}p.scrollrows=o.scrollingRows;$($t).keydown(function(event){var target=$($t).find("tr[tabindex=0]")[0],id,r,mind,expanded=p.treeReader.expanded_field;if(target){mind=p._index[stripPref(p.idPrefix,target.id)];if(event.keyCode===37||event.keyCode===38||event.keyCode===39||event.keyCode===40){if(event.keyCode===38){r=target.previousSibling;id="";if(r){if($(r).is(":hidden")){while(r){r=r.previousSibling;if(!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}}else{id=r.id}}$($t).jqGrid("setSelection",id,true,event);event.preventDefault()}if(event.keyCode===40){r=target.nextSibling;id="";if(r){if($(r).is(":hidden")){while(r){r=r.nextSibling;if(!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}}else{id=r.id}}$($t).jqGrid("setSelection",id,true,event);event.preventDefault()}if(event.keyCode===37){if(p.treeGrid&&p.data[mind][expanded]){$(target).find("div.treeclick").trigger("click")}$($t).triggerHandler("jqGridKeyLeft",[p.selrow]);if($.isFunction(o.onLeftKey)){o.onLeftKey.call($t,p.selrow)}}if(event.keyCode===39){if(p.treeGrid&&!p.data[mind][expanded]){$(target).find("div.treeclick").trigger("click")}$($t).triggerHandler("jqGridKeyRight",[p.selrow]);if($.isFunction(o.onRightKey)){o.onRightKey.call($t,p.selrow)}}}else{if(event.keyCode===13){$($t).triggerHandler("jqGridKeyEnter",[p.selrow]);if($.isFunction(o.onEnter)){o.onEnter.call($t,p.selrow)}}else{if(event.keyCode===32){$($t).triggerHandler("jqGridKeySpace",[p.selrow]);if($.isFunction(o.onSpace)){o.onSpace.call($t,p.selrow)}}}}}})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(rowid){var ret=false,ind;this.each(function(){if(rowid!==undefined){ind=this.p._index[stripPref(this.p.idPrefix,rowid)];if(ind>=0){ret=this.p.data[ind]}}});return ret},progressBar:function(p){p=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},p||{});return this.each(function(){var sh=p.method==="show"?true:false,gridIdEscaped=jqID(this.p.id);if(p.htmlcontent!==""){$("#load_"+gridIdEscaped).html(p.htmlcontent)}switch(p.loadtype){case"disable":break;case"enable":$("#load_"+gridIdEscaped).toggle(sh);break;case"block":$("#lui_"+gridIdEscaped).toggle(sh);$("#load_"+gridIdEscaped).toggle(sh);break}})},setColWidth:function(iCol,newWidth,adjustGridWidth){return this.each(function(){var self=this,$self=$(self),grid=self.grid,p=self.p,colModel=p.colModel,colName,i,nCol;if(typeof iCol==="string"){colName=iCol;for(i=0,nCol=colModel.length;i<nCol;i++){if(colModel[i].name===colName){iCol=i;break}}if(i>=nCol){return}}else{if(typeof iCol!=="number"){return}}grid.headers[iCol].newWidth=newWidth;grid.newWidth=p.tblwidth+newWidth-grid.headers[iCol].width;grid.resizeColumn(iCol,true);if(adjustGridWidth!==false){$self.jqGrid("setGridWidth",grid.newWidth,false)}})},getAutoResizableWidth:function(iCol){var self=this;if(self.length===0){return -1}self=self[0];var rows=self.rows,row,cell,iRow,$cell,$cellFirstChild,p=self.p,cm=p.colModel[iCol],$th=$($(self.grid.hDiv).find(".ui-jqgrid-labels>.ui-th-column")[iCol]),$thDiv=$th.find(">div"),thPaddingLeft=parseFloat($th.css("padding-left")||0),thPaddingRight=parseFloat($th.css("padding-right")||0),$incosDiv=$thDiv.find("span.s-ico"),$wrapper=$thDiv.find(">."+p.autoResizing.wrapperClassName),wrapperOuterWidth=$wrapper.outerWidth(),wrapperCssWidth=parseFloat($wrapper.css("width")||0),widthOuter=0,colWidth=0,compact=(cm.autoResizing!=null&&cm.autoResizing.compact!==undefined)?cm.autoResizing.compact:p.autoResizing.compact,wrapperClassName=p.autoResizing.wrapperClassName;if(cm==null||!cm.autoResizable||$wrapper.length===0||cm.hidden||cm.fixed){return -1}if(!compact||$incosDiv.is(":visible")||($incosDiv.css("display")!=="none")){colWidth=p.autoResizing.widthOfVisiblePartOfSortIcon;if($thDiv.css("text-align")==="center"){colWidth+=colWidth}if(p.viewsortcols[1]==="horizontal"){colWidth+=colWidth}}colWidth+=wrapperOuterWidth+thPaddingLeft+(wrapperCssWidth===wrapperOuterWidth?thPaddingLeft+thPaddingRight:0)+parseFloat($thDiv.css("margin-left")||0)+parseFloat($thDiv.css("margin-right")||0);for(iRow=0,rows=self.rows;iRow<rows.length;iRow++){row=rows[iRow];cell=row.cells[iCol];$cell=$(row.cells[iCol]);if($(row).hasClass("jqgrow")&&cell!=null){$cellFirstChild=$(cell.firstChild);if($cellFirstChild.hasClass(wrapperClassName)){colWidth=Math.max(colWidth,$cellFirstChild.outerWidth()+widthOuter)}else{if(p.treeGrid&&p.ExpandColumn===cm.name){$cellFirstChild=$cell.children(".cell-wrapper,.cell-wrapperleaf");colWidth=Math.max(colWidth,$cellFirstChild.outerWidth()+widthOuter+$cell.children(".tree-wrap").outerWidth())}}}else{if($(row).hasClass("jqgfirstrow")){widthOuter=(jgrid.cell_width?parseFloat($cell.css("padding-left")||0)+parseFloat($cell.css("padding-right")||0):0)+parseFloat($cell.css("border-right")||0)+parseFloat($cell.css("border-left")||0)}}}colWidth=Math.max(colWidth,cm.autoResizing!=null&&cm.autoResizing.minColWidth!==undefined?cm.autoResizing.minColWidth:p.autoResizing.minColWidth);return Math.min(colWidth,cm.autoResizing!=null&&cm.autoResizing.maxColWidth!==undefined?cm.autoResizing.maxColWidth:p.autoResizing.maxColWidth)},autoResizeColumn:function(iCol){return this.each(function(){var self=this,$self=$(this),p=self.p,cm=p.colModel[iCol],widthOrg,$th=$($(self.grid.hDiv).find(".ui-jqgrid-labels>.ui-th-column")[iCol]),newWidth=$self.jqGrid("getAutoResizableWidth",iCol);if(cm==null||newWidth<0){return}$self.jqGrid("setColWidth",iCol,newWidth,p.autoResizing.adjustGridWidth&&!p.autoResizing.fixWidthOnShrink);if(p.autoResizing.fixWidthOnShrink&&p.shrinkToFit){cm.fixed=true;widthOrg=cm.widthOrg;cm.widthOrg=cm.width;$self.jqGrid("setGridWidth",p.width,true);cm.widthOrg=widthOrg;cm.fixed=false}$th.data("autoResized","true")})},autoResizeAllColumns:function(){return this.each(function(){var $self=$(this),p=this.p,colModel=p.colModel,nCol=colModel.length,iCol,cm,shrinkToFit=p.shrinkToFit,adjustGridWidth=p.autoResizing.adjustGridWidth,fixWidthOnShrink=p.autoResizing.fixWidthOnShrink,width=parseInt(p.widthOrg,10),autoResizeColumn=jgrid.getMethod("autoResizeColumn");p.shrinkToFit=false;p.autoResizing.adjustGridWidth=true;p.autoResizing.fixWidthOnShrink=false;for(iCol=0;iCol<nCol;iCol++){cm=colModel[iCol];if(cm.autoResizable&&cm.formatter!=="actions"){autoResizeColumn.call($self,iCol)}}if(!isNaN(width)){$(this).jqGrid("setGridWidth",width,false)}p.autoResizing.fixWidthOnShrink=fixWidthOnShrink;p.autoResizing.adjustGridWidth=adjustGridWidth;p.shrinkToFit=shrinkToFit})}})}(jQuery));(function(b){var a=b.jgrid;a.extend({editCell:function(e,d,c){return this.each(function(){var o=this,t=b(o),j=o.p,w,q,l,u,g=a.feedback;if(!o.grid||j.cellEdit!==true||o.rows==null||o.rows[e]==null){return}e=parseInt(e,10);d=parseInt(d,10);var s=o.rows[e],i=s.id,r=b(s),n=b(o.rows[j.iRow]);j.selrow=i;if(!j.knv){t.jqGrid("GridNav")}if(j.savedRow.length>0){if(c===true){if(e===j.iRow&&d===j.iCol){return}}t.jqGrid("saveCell",j.savedRow[0].id,j.savedRow[0].ic)}else{window.setTimeout(function(){b("#"+a.jqID(j.knv)).attr("tabindex","-1").focus()},1)}u=j.colModel[d];w=u.name;if(w==="subgrid"||w==="cb"||w==="rn"){return}l=b("td:eq("+d+")",s);var k=u.editable;if(b.isFunction(k)){k=k.call(o,{rowid:i,iCol:d,iRow:e,name:w,cm:u})}if(k===true&&c===true&&!l.hasClass("not-editable-cell")){if(parseInt(j.iCol,10)>=0&&parseInt(j.iRow,10)>=0){b("td:eq("+j.iCol+")",n).removeClass("edit-cell ui-state-highlight");n.removeClass("selected-row ui-state-hover")}l.addClass("edit-cell ui-state-highlight");r.addClass("selected-row ui-state-hover");try{q=b.unformat.call(o,l,{rowId:i,colModel:u},d)}catch(v){q=(u.edittype&&u.edittype==="textarea")?l.text():l.html()}if(j.autoencode){q=a.htmlDecode(q)}if(!u.edittype){u.edittype="text"}j.savedRow.push({id:e,ic:d,name:w,v:q});if(q==="&nbsp;"||q==="&#160;"||(q.length===1&&q.charCodeAt(0)===160)){q=""}if(b.isFunction(j.formatCell)){var m=j.formatCell.call(o,i,w,q,e,d);if(m!==undefined){q=m}}g.call(o,"beforeEditCell",i,w,q,e,d);var h=b.extend({},u.editoptions||{},{id:e+"_"+w,name:w,rowId:i});var f=a.createEl.call(o,u.edittype,h,q,true,b.extend({},a.ajaxOptions,j.ajaxSelectOptions||{}));l.html("").append(f).attr("tabindex","0");a.bindEv.call(o,f,h);window.setTimeout(function(){b(f).focus()},1);b("input, select, textarea",l).bind("keydown",function(p){if(p.keyCode===27){if(b("input.hasDatepicker",l).length>0){if(b(".ui-datepicker").is(":hidden")){t.jqGrid("restoreCell",e,d)}else{b("input.hasDatepicker",l).datepicker("hide")}}else{t.jqGrid("restoreCell",e,d)}}if(p.keyCode===13&&!p.shiftKey){t.jqGrid("saveCell",e,d);return false}if(p.keyCode===9){if(!o.grid.hDiv.loading){if(p.shiftKey){t.jqGrid("prevCell",e,d)}else{t.jqGrid("nextCell",e,d)}}else{return false}}p.stopPropagation()});g.call(o,"afterEditCell",i,w,q,e,d);t.triggerHandler("jqGridAfterEditCell",[i,w,q,e,d])}else{if(parseInt(j.iCol,10)>=0&&parseInt(j.iRow,10)>=0){b("td:eq("+j.iCol+")",n).removeClass("edit-cell ui-state-highlight");n.removeClass("selected-row ui-state-hover")}l.addClass("edit-cell ui-state-highlight");r.addClass("selected-row ui-state-hover");q=l.html().replace(/\&#160\;/ig,"");g.call(o,"onSelectCell",i,w,q,e,d)}j.iCol=d;j.iRow=e})},saveCell:function(d,c){return this.each(function(){var I=this,J=b(I),A=I.p,l,j=a.feedback,o=a.info_dialog,G=a.jqID,t=J.jqGrid("getGridRes","errors"),g=t.errcap,B=J.jqGrid("getGridRes","edit"),m=B.msg,H=B.bClose;if(!I.grid||A.cellEdit!==true){return}if(A.savedRow.length>=1){l=0}else{l=null}if(l!==null){var f=I.rows[d],n=f.id,O=b(f),y=b("td:eq("+c+")",f),w,h,q=A.colModel[c],i=q.name,D="#"+d+"_"+G(i);switch(q.edittype){case"select":if(q.editoptions==null||!q.editoptions.multiple){w=b(D+" option:selected",f).val();h=b(D+" option:selected",f).text()}else{var F=b(D,f),E=[];w=b(F).val();if(w){w.join(",")}else{w=""}b("option:selected",F).each(function(e,p){E[e]=b(p).text()});h=E.join(",")}if(q.formatter){h=w}break;case"checkbox":var z=["Yes","No"];if(q.editoptions&&q.editoptions.value){z=q.editoptions.value.split(":")}w=b(D,f).is(":checked")?z[0]:z[1];h=w;break;case"password":case"text":case"textarea":case"button":w=b(D,f).val();h=w;break;case"custom":try{if(q.editoptions&&b.isFunction(q.editoptions.custom_value)){w=q.editoptions.custom_value.call(I,b(".customelement",y),"get");if(w===undefined){throw"e2"}h=w}else{throw"e1"}}catch(L){if(L==="e1"){o.call(I,g,"function 'custom_value' "+m.nodefined,H)}if(L==="e2"){o.call(I,g,"function 'custom_value' "+m.novalue,H)}else{o.call(I,g,L.message,H)}}break}if(h!==A.savedRow[l].v){var N=J.triggerHandler("jqGridBeforeSaveCell",[n,i,w,d,c]);if(N){w=N;h=N}if(b.isFunction(A.beforeSaveCell)){var C=A.beforeSaveCell.call(I,n,i,w,d,c);if(C){w=C;h=C}}var k=a.checkValues.call(I,w,c);if(k[0]===true){var s=J.triggerHandler("jqGridBeforeSubmitCell",[n,i,w,d,c])||{};if(b.isFunction(A.beforeSubmitCell)){s=A.beforeSubmitCell.call(I,n,i,w,d,c);if(!s){s={}}}if(b("input.hasDatepicker",y).length>0){b("input.hasDatepicker",y).datepicker("hide")}if(q.formatter&&q.formatter==="date"&&(q.formatoptions==null||q.formatoptions.sendFormatted!==true)){h=b.unformat.date.call(I,h,q)}if(A.cellsubmit==="remote"){if(A.cellurl){var M={};if(A.autoencode){w=a.htmlEncode(w)}M[i]=w;var x,u,r;r=A.prmNames;x=r.id;u=r.oper;M[x]=a.stripPref(A.idPrefix,n);M[u]=r.editoper;M=b.extend(s,M);J.jqGrid("progressBar",{method:"show",loadtype:A.loadui,htmlcontent:a.defaults.savetext||"Saving..."});I.grid.hDiv.loading=true;b.ajax(b.extend({url:A.cellurl,data:a.serializeFeedback.call(I,A.serializeCellData,"jqGridSerializeCellData",M),type:"POST",complete:function(p){J.jqGrid("progressBar",{method:"hide",loadtype:A.loadui});I.grid.hDiv.loading=false;if((p.status<300||p.status===304)&&(p.status!==0||p.readyState!==4)){var e=J.triggerHandler("jqGridAfterSubmitCell",[I,p,M.id,i,w,d,c])||[true,""];if(e[0]===true&&b.isFunction(A.afterSubmitCell)){e=A.afterSubmitCell.call(I,p,M.id,i,w,d,c)}if(e[0]===true){y.empty();J.jqGrid("setCell",n,c,h,false,false,true);y.addClass("dirty-cell");O.addClass("edited");j.call(I,"afterSaveCell",n,i,w,d,c);A.savedRow.splice(0,1)}else{o.call(I,g,e[1],H);J.jqGrid("restoreCell",d,c)}}},error:function(e,v,p){b("#lui_"+G(A.id)).hide();I.grid.hDiv.loading=false;J.triggerHandler("jqGridErrorCell",[e,v,p]);if(b.isFunction(A.errorCell)){A.errorCell.call(I,e,v,p);J.jqGrid("restoreCell",d,c)}else{o.call(I,g,e.status+" : "+e.statusText+"<br/>"+v,H);J.jqGrid("restoreCell",d,c)}}},a.ajaxOptions,A.ajaxCellOptions||{}))}else{try{o.call(I,g,t.nourl,H);J.jqGrid("restoreCell",d,c)}catch(K){}}}if(A.cellsubmit==="clientArray"){y.empty();J.jqGrid("setCell",n,c,h,false,false,true);y.addClass("dirty-cell");O.addClass("edited");j.call(I,"afterSaveCell",n,i,w,d,c);A.savedRow.splice(0,1)}}else{try{window.setTimeout(function(){o.call(I,g,w+" "+k[1],H)},100);J.jqGrid("restoreCell",d,c)}catch(K){}}}else{J.jqGrid("restoreCell",d,c)}}window.setTimeout(function(){b("#"+G(A.knv)).attr("tabindex","-1").focus()},0)})},restoreCell:function(d,c){return this.each(function(){var l=this,i=l.p,h=l.rows[d],g=h.id,f,e;if(!l.grid||i.cellEdit!==true){return}if(i.savedRow.length>=1){var k=b("td:eq("+c+")",h);if(b.isFunction(b.fn.datepicker)){try{b("input.hasDatepicker",k).datepicker("hide")}catch(j){}}b(k).empty().attr("tabindex","-1");f=i.savedRow[0].v;e=i.colModel[c];if(e.formatter&&e.formatter==="date"&&(e.formatoptions==null||e.formatoptions.sendFormatted!==true)){f=b.unformat.date.call(l,f,e)}b(l).jqGrid("setCell",g,c,f,false,false,true);a.feedback.call(l,"afterRestoreCell",g,f,d,c);i.savedRow.splice(0,1)}window.setTimeout(function(){b("#"+i.knv).attr("tabindex","-1").focus()},0)})},nextCell:function(d,c){return this.each(function(){var l=this,j=b(l),h=l.p,k=false,g,f,e;if(!l.grid||h.cellEdit!==true||l.rows==null||l.rows[d]==null){return}for(g=c+1;g<h.colModel.length;g++){e=h.colModel[g];f=e.editable;if(b.isFunction(f)){f=f.call(l,{rowid:l.rows[d].id,iCol:g,iRow:d,name:e.name,cm:e})}if(f===true){k=g;break}}if(k!==false){j.jqGrid("editCell",d,k,true)}else{if(h.savedRow.length>0){j.jqGrid("saveCell",d,c)}}})},prevCell:function(d,c){return this.each(function(){var l=this,j=b(l),h=l.p,k=false,g,f,e;if(!l.grid||h.cellEdit!==true||l.rows==null||l.rows[d]==null){return}for(g=c-1;g>=0;g--){e=h.colModel[g];f=e.editable;if(b.isFunction(f)){f=f.call(l,{rowid:l.rows[d].id,iCol:g,iRow:d,name:e.name,cm:e,mode:"cell"})}if(f===true){k=g;break}}if(k!==false){j.jqGrid("editCell",d,k,true)}else{if(h.savedRow.length>0){j.jqGrid("saveCell",d,c)}}})},GridNav:function(){return this.each(function(){var h=this,l=b(h),e=h.p,c=h.grid;if(!c||e.cellEdit!==true){return}var k=c.bDiv;e.knv=e.id+"_kn";var m=b("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+e.knv+"'></div></div>"),j,g;function d(w,t,v){var u=h.rows[w];if(v.substr(0,1)==="v"){var n=k.clientHeight,x=k.scrollTop,r=u.offsetTop+u.clientHeight,y=u.offsetTop;if(v==="vd"){if(r>=n){k.scrollTop=k.scrollTop+u.clientHeight}}if(v==="vu"){if(y<x){k.scrollTop=k.scrollTop-u.clientHeight}}}if(v==="h"){var q=k.clientWidth,p=k.scrollLeft,o=u.cells[t],s=o.offsetLeft+o.clientWidth,i=o.offsetLeft;if(s>=q+parseInt(p,10)){k.scrollLeft=k.scrollLeft+o.clientWidth}else{if(i<p){k.scrollLeft=k.scrollLeft-o.clientWidth}}}}function f(q,i){var p=0,o,n=e.colModel;if(i==="lft"){p=q+1;for(o=q;o>=0;o--){if(n[o].hidden!==true){p=o;break}}}if(i==="rgt"){p=q-1;for(o=q;o<n.length;o++){if(n[o].hidden!==true){p=o;break}}}return p}b(m).insertBefore(c.cDiv);b("#"+e.knv).focus().keydown(function(i){g=i.keyCode;if(e.direction==="rtl"){if(g===37){g=39}else{if(g===39){g=37}}}switch(g){case 38:if(e.iRow-1>0){d(e.iRow-1,e.iCol,"vu");l.jqGrid("editCell",e.iRow-1,e.iCol,false)}break;case 40:if(e.iRow+1<=h.rows.length-1){d(e.iRow+1,e.iCol,"vd");l.jqGrid("editCell",e.iRow+1,e.iCol,false)}break;case 37:if(e.iCol-1>=0){j=f(e.iCol-1,"lft");d(e.iRow,j,"h");l.jqGrid("editCell",e.iRow,j,false)}break;case 39:if(e.iCol+1<=e.colModel.length-1){j=f(e.iCol+1,"rgt");d(e.iRow,j,"h");l.jqGrid("editCell",e.iRow,j,false)}break;case 13:if(parseInt(e.iCol,10)>=0&&parseInt(e.iRow,10)>=0){l.jqGrid("editCell",e.iRow,e.iCol,true)}break;default:return true}return false})})},getChangedCells:function(d){var c=[];if(!d){d="all"}this.each(function(){var g=this,f=g.p,e=a.htmlDecode;if(!g.grid||f.cellEdit!==true){return}b(g.rows).each(function(h){var i={};if(b(this).hasClass("edited")){b("td",this).each(function(l){var k=f.colModel[l],j=k.name,n=b(this);if(j!=="cb"&&j!=="subgrid"){if(d==="dirty"){if(n.hasClass("dirty-cell")){try{i[j]=b.unformat.call(g,this,{rowId:g.rows[h].id,colModel:k},l)}catch(m){i[j]=e(n.html())}}}else{try{i[j]=b.unformat.call(g,this,{rowId:g.rows[h].id,colModel:k},l)}catch(m){i[j]=e(n.html())}}}});i.id=this.id;c.push(i)}})});return c}})}(jQuery));(function(c){var a=c.jgrid,b=a.getMethod("getGridRes");c.extend(a,{showModal:function(d){d.w.show()},closeModal:function(d){d.w.hide().attr("aria-hidden","true");if(d.o){d.o.remove()}},hideModal:function(e,j){j=c.extend({jqm:true,gb:"",removemodal:false,formprop:false,form:""},j||{});var i=j.gb&&typeof j.gb==="string"&&j.gb.substr(0,6)==="#gbox_"?c("#"+j.gb.substr(6))[0]:false;if(j.onClose){var h=i?j.onClose.call(i,e):j.onClose(e);if(typeof h==="boolean"&&!h){return}}if(j.formprop&&i&&j.form){var d=c(e)[0].style.height;if(d.indexOf("px")>-1){d=parseFloat(d)}var g,f;if(j.form==="edit"){g="#"+a.jqID("FrmGrid_"+j.gb.substr(6));f="formProp"}else{if(j.form==="view"){g="#"+a.jqID("ViewGrid_"+j.gb.substr(6));f="viewProp"}}c(i).data(f,{top:parseFloat(c(e).css("top")),left:parseFloat(c(e).css("left")),width:c(e).width(),height:d,dataheight:c(g).height(),datawidth:c(g).width()})}if(c.fn.jqm&&j.jqm===true){c(e).attr("aria-hidden","true").jqmHide()}else{if(j.gb!==""){try{c(">.jqgrid-overlay",j.gb).filter(":first").hide()}catch(k){}}c(e).hide().attr("aria-hidden","true")}if(j.removemodal){c(e).remove()}},findPos:function(e){var f=0,d=0;if(e.offsetParent){do{f+=e.offsetLeft;d+=e.offsetTop;e=e.offsetParent}while(e)}return[f,d]},createModal:function(k,t,q,e,y,f,j){var s=a.jqID,m=this.p,d=m!=null?m.jqModal||{}:{};q=c.extend(true,{resizingRightBottomIcon:"ui-icon ui-icon-gripsmall-diagonal-se"},a.jqModal||{},d,q);var l=document.createElement("div"),h="#"+s(k.themodal),u=c(q.gbox).attr("dir")==="rtl"?true:false,x=k.resizeAlso?"#"+s(k.resizeAlso):false;j=c.extend({},j||{});l.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";l.id=k.themodal;l.dir=u?"rtl":"ltr";var w=document.createElement("div");w.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix "+(u?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr");w.id=k.modalhead;c(w).append("<span class='ui-jqdialog-title'>"+q.caption+"</span>");var n=c("<a class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){n.addClass("ui-state-hover")},function(){n.removeClass("ui-state-hover")}).append("<span class='"+a.getIconRes(m.iconSet,"form.close")+"'></span>");c(w).append(n);var z=document.createElement("div");c(z).addClass("ui-jqdialog-content ui-widget-content").attr("id",k.modalcontent);c(z).append(t);l.appendChild(z);c(l).prepend(w);if(f===true){c("body").append(l)}else{if(typeof f==="string"){c(f).append(l)}else{c(l).insertBefore(e)}}c(l).css(j);if(q.jqModal===undefined){q.jqModal=true}var r={};if(c.fn.jqm&&q.jqModal===true){if(q.left===0&&q.top===0&&q.overlay){var g=[];g=a.findPos(y);q.left=g[0]+4;q.top=g[1]+4}r.top=q.top+"px";r.left=q.left}else{if(q.left!==0||q.top!==0){r.left=q.left;r.top=q.top+"px"}}c("a.ui-jqdialog-titlebar-close",w).click(function(){var o=c(h).data("onClose")||q.onClose;var p=c(h).data("gbox")||q.gbox;a.hideModal(h,{gb:p,jqm:q.jqModal,onClose:o,removemodal:q.removemodal||false,formprop:!q.recreateForm||false,form:q.form||""});return false});if(q.width===0||!q.width){q.width=300}if(q.height===0||!q.height){q.height=200}if(!q.zIndex){var i=c(e).parents("*[role=dialog]").filter(":first").css("z-index");if(i){q.zIndex=parseInt(i,10)+2}else{q.zIndex=950}}if(r.left){r.left+="px"}c(l).css(c.extend({width:isNaN(q.width)?"auto":q.width+"px",height:isNaN(q.height)?"auto":q.height+"px",zIndex:q.zIndex,overflow:"hidden"},r)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":k.modalhead,"aria-hidden":"true"});if(q.drag===undefined){q.drag=true}if(q.resize===undefined){q.resize=true}if(q.drag){if(c.fn.jqDrag){c(w).addClass("ui-draggable");c(l).jqDrag(w)}else{try{c(l).draggable({handle:c("#"+s(w.id))})}catch(v){}}}if(q.resize){if(c.fn.jqResize){c(l).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+q.resizingRightBottomIcon+"'></div>");c(h).jqResize(".jqResize",x)}else{try{c(l).resizable({handles:"se, sw",alsoResize:x})}catch(v){}}}if(q.closeOnEscape===true){c(l).keydown(function(p){if(p.which===27){var o=c(h).data("onClose")||q.onClose;a.hideModal(h,{gb:q.gbox,jqm:q.jqModal,onClose:o,removemodal:q.removemodal||false,formprop:!q.recreateForm||false,form:q.form||""})}})}},viewModal:function(d,e){e=c.extend({toTop:false,overlay:10,modal:false,overlayClass:"ui-widget-overlay",onShow:a.showModal,onHide:a.closeModal,gbox:"",jqm:true,jqM:true},e||{});if(c.fn.jqm&&e.jqm===true){if(e.jqM){c(d).attr("aria-hidden","false").jqm(e).jqmShow()}else{c(d).attr("aria-hidden","false").jqmShow()}}else{if(e.gbox!==""){c(">.jqgrid-overlay",e.gbox).filter(":first").show();c(d).data("gbox",e.gbox)}c(d).show().attr("aria-hidden","false");try{c(":input:visible",d)[0].focus()}catch(f){}}},info_dialog:function(p,j,e,o){var m={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};c.extend(true,m,a.jqModal||{},{caption:"<b>"+p+"</b>"},o||{});var f=m.jqModal;if(c.fn.jqm&&!f){f=false}var h="",g;if(m.buttons.length>0){for(g=0;g<m.buttons.length;g++){if(m.buttons[g].id===undefined){m.buttons[g].id="info_button_"+g}h+="<a id='"+m.buttons[g].id+"' class='fm-button ui-state-default ui-corner-all'>"+m.buttons[g].text+"</a>"}}var l=isNaN(m.dataheight)?m.dataheight:m.dataheight+"px",n="text-align:"+m.align+";";var d="<div id='info_id'>";d+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+n+"'>"+j+"</div>";d+=e?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+m.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+e+"</a>"+h+"</div>":h!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+m.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+h+"</div>":"";d+="</div>";try{if(c("#info_dialog").attr("aria-hidden")==="false"){a.hideModal("#info_dialog",{jqm:f})}c("#info_dialog").remove()}catch(k){}a.createModal.call(this,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},d,m,"","",true);if(h){c.each(m.buttons,function(q){c("#"+a.jqID(this.id),"#info_id").bind("click",function(){m.buttons[q].onClick.call(c("#info_dialog"));return false})})}c("#closedialog","#info_id").click(function(){a.hideModal("#info_dialog",{jqm:f,onClose:c("#info_dialog").data("onClose")||m.onClose,gb:c("#info_dialog").data("gbox")||m.gbox});return false});c(".fm-button","#info_dialog").hover(function(){c(this).addClass("ui-state-hover")},function(){c(this).removeClass("ui-state-hover")});if(c.isFunction(m.beforeOpen)){m.beforeOpen()}a.viewModal("#info_dialog",{onHide:function(i){i.w.hide().remove();if(i.o){i.o.remove()}},modal:m.modal,jqm:f});if(c.isFunction(m.afterOpen)){m.afterOpen()}try{c("#info_dialog").focus()}catch(k){}},bindEv:function(e,d){var f=this;if(c.isFunction(d.dataInit)){d.dataInit.call(f,e,d)}if(d.dataEvents){c.each(d.dataEvents,function(){if(this.data!==undefined){c(e).bind(this.type,this.data,this.fn)}else{c(e).bind(this.type,this.fn)}})}},createEl:function(D,x,r,g,n){var L="",d=this,J=d.p,o=a.info_dialog,w=function(e){return b.call(c(d),e)},u=w("errors.errcap"),t=w("edit"),l=t.msg,h=t.bClose;function I(S,p,i){var e=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","selectFilled"];if(i!==undefined&&c.isArray(i)){c.merge(e,i)}c.each(p,function(T,U){if(c.inArray(T,e)===-1){c(S).attr(T,U)}});if(!p.hasOwnProperty("id")){c(S).attr("id",a.randId())}}switch(D){case"textarea":L=document.createElement("textarea");if(g){if(!x.cols){c(L).css({width:"98%"})}}else{if(!x.cols){x.cols=20}}if(!x.rows){x.rows=2}if(r==="&nbsp;"||r==="&#160;"||(r.length===1&&r.charCodeAt(0)===160)){r=""}L.value=r;I(L,x);c(L).attr({role:"textbox",multiline:"true"});break;case"checkbox":L=document.createElement("input");L.type="checkbox";if(!x.value){var E=String(r).toLowerCase();if(E.search(/(false|f|0|no|n|off|undefined)/i)<0&&E!==""){L.checked=true;L.defaultChecked=true;L.value=r}else{L.value="on"}c(L).attr("offval","off")}else{var G=x.value.split(":");if(r===G[0]){L.checked=true;L.defaultChecked=true}L.value=G[0];c(L).attr("offval",G[1])}I(L,x,["value"]);c(L).attr("role","checkbox");break;case"select":L=document.createElement("select");L.setAttribute("role","select");var H,y=[],B,R;for(R=0;R<J.colModel.length;R++){B=J.colModel[R];if(B.name===x.name){break}}if(x.multiple===true){H=true;L.multiple="multiple";c(L).attr("aria-multiselectable","true")}else{H=false}if(x.dataUrl!==undefined){var m=null,v=x.postData||n.postData;try{m=x.rowId}catch(f){}if(J&&J.idPrefix){m=a.stripPref(J.idPrefix,m)}c.ajax(c.extend({url:c.isFunction(x.dataUrl)?x.dataUrl.call(d,m,r,String(x.name)):x.dataUrl,type:"GET",dataType:"html",data:c.isFunction(v)?v.call(d,m,r,String(x.name)):v,context:{elem:L,options:x,vl:r,cm:B,iCol:R},success:function(e){var p=[],W=this.elem,V=this.vl,i=this.cm,T=this.iCol,X=c.extend({},this.options),U=X.multiple===true,S=c.isFunction(X.buildSelect)?X.buildSelect.call(d,e):e;if(typeof S==="string"){S=c(c.trim(S)).html()}if(S){c(W).append(S);I(W,X,v?["postData"]:undefined);if(X.size===undefined){X.size=U?3:1}if(U){p=V.split(",");p=c.map(p,function(Y){return c.trim(Y)})}else{p[0]=c.trim(V)}setTimeout(function(){c("option",W).each(function(Y){if(Y===0&&W.multiple){this.selected=false}c(this).attr("role","option");if(c.inArray(c.trim(c(this).text()),p)>-1||c.inArray(c.trim(c(this).val()),p)>-1){this.selected="selected"}});a.fullBoolFeedback.call(d,X.selectFilled,"jqGridSelectFilled",{elem:W,options:X,cm:i,cmName:i.name,iCol:T})},0)}}},n||{}))}else{if(x.value){var M;if(x.size===undefined){x.size=H?3:1}if(H){y=r.split(",");y=c.map(y,function(e){return c.trim(e)})}if(typeof x.value==="function"){x.value=x.value()}var q,k,z,P,Q,A=x.separator===undefined?":":x.separator,j=x.delimiter===undefined?";":x.delimiter,O=function(i,e){if(e>0){return i}};if(typeof x.value==="string"){q=x.value.split(j);for(M=0;M<q.length;M++){k=q[M].split(A);if(k.length>2){k[1]=c.map(k,O).join(A)}z=document.createElement("option");z.setAttribute("role","option");z.value=k[0];z.innerHTML=k[1];L.appendChild(z);P=c.trim(k[0]);Q=c.trim(k[1]);if(!H&&(P===c.trim(r)||Q===c.trim(r))){z.selected="selected"}if(H&&(c.inArray(Q,y)>-1||c.inArray(P,y)>-1)){z.selected="selected"}}}else{if(typeof x.value==="object"){var K=x.value,s;for(s in K){if(K.hasOwnProperty(s)){z=document.createElement("option");z.setAttribute("role","option");z.value=s;z.innerHTML=K[s];L.appendChild(z);if(!H&&(c.trim(s)===c.trim(r)||c.trim(K[s])===c.trim(r))){z.selected="selected"}if(H&&(c.inArray(c.trim(K[s]),y)>-1||c.inArray(c.trim(s),y)>-1)){z.selected="selected"}}}}}I(L,x,["value"]);a.fullBoolFeedback.call(d,x.selectFilled,"jqGridSelectFilled",{elem:L,options:x,cm:B,cmName:B.name,iCol:R})}}break;case"text":case"password":case"button":var F;if(D==="button"){F="button"}else{F="textbox"}L=document.createElement("input");L.type=D;L.value=r;I(L,x);if(D!=="button"){if(g){if(!x.size){c(L).css({width:"98%"})}}else{if(!x.size){x.size=20}}}c(L).attr("role",F);break;case"image":case"file":L=document.createElement("input");L.type=D;I(L,x);break;case"custom":L=document.createElement("span");try{if(c.isFunction(x.custom_element)){var C=x.custom_element.call(d,r,x);if(C instanceof jQuery||C instanceof HTMLElement||typeof C==="string"){C=c(C).addClass("customelement").attr({id:x.id,name:x.name});c(L).empty().append(C)}else{throw"editoptions.custom_element returns value of a wrong type"}}else{throw"editoptions.custom_element is not a function"}}catch(N){if(N==="e1"){o.call(d,u,"function 'custom_element' "+l.nodefined,h)}if(N==="e2"){o.call(d,u,"function 'custom_element' "+l.novalue,h)}else{o.call(d,u,typeof N==="string"?N:N.message,h)}}break}return L},checkDate:function(p,f){var n=function(i){return(((i%4===0)&&(i%100!==0||(i%400===0)))?29:28)},h={},r;p=p.toLowerCase();if(p.indexOf("/")!==-1){r="/"}else{if(p.indexOf("-")!==-1){r="-"}else{if(p.indexOf(".")!==-1){r="."}else{r="/"}}}p=p.split(r);f=f.split(r);if(f.length!==3){return false}var k=-1,q,l=-1,g=-1,m,e;for(m=0;m<p.length;m++){e=isNaN(f[m])?0:parseInt(f[m],10);h[p[m]]=e;q=p[m];if(q.indexOf("y")!==-1){k=m}if(q.indexOf("m")!==-1){g=m}if(q.indexOf("d")!==-1){l=m}}if(p[k]==="y"||p[k]==="yyyy"){q=4}else{if(p[k]==="yy"){q=2}else{q=-1}}var d=[0,31,29,31,30,31,30,31,31,30,31,30,31],o;if(k===-1){return false}o=h[p[k]].toString();if(q===2&&o.length===1){q=1}if(o.length!==q||(h[p[k]]===0&&f[k]!=="00")){return false}if(g===-1){return false}o=h[p[g]].toString();if(o.length<1||h[p[g]]<1||h[p[g]]>12){return false}if(l===-1){return false}o=h[p[l]].toString();if(o.length<1||h[p[l]]<1||h[p[l]]>31||(h[p[g]]===2&&h[p[l]]>n(h[p[k]]))||h[p[l]]>d[h[p[g]]]){return false}return true},isEmpty:function(d){if(d.match(/^\s+$/)||d===""){return true}return false},checkTime:function(f){var e=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/,d;if(!a.isEmpty(f)){d=f.match(e);if(d){if(d[3]){if(d[1]<1||d[1]>12){return false}}else{if(d[1]>23){return false}}if(d[2]>59){return false}}else{return false}}return true},checkValues:function(x,r,q,l){var v,s,e,n,t,u=this,o=u.p,h=o.colModel,m=a.isEmpty,f=b.call(c(u),"edit.msg"),j=b.call(c(u),"formatter.date.masks");if(q===undefined){if(typeof r==="string"){for(s=0,t=h.length;s<t;s++){if(h[s].name===r){v=h[s].editrules;r=s;if(h[s].formoptions!=null){e=h[s].formoptions.label}break}}}else{if(r>=0){v=h[r].editrules}}}else{v=q;e=l===undefined?"_":l}if(v){if(!e){e=o.colNames!=null?o.colNames[r]:h[r].label}if(v.required===true){if(m(x)){return[false,e+": "+f.required,""]}}var d=v.required===false?false:true;if(v.number===true){if(!(d===false&&m(x))){if(isNaN(x)){return[false,e+": "+f.number,""]}}}if(v.minValue!==undefined&&!isNaN(v.minValue)){if(parseFloat(x)<parseFloat(v.minValue)){return[false,e+": "+f.minValue+" "+v.minValue,""]}}if(v.maxValue!==undefined&&!isNaN(v.maxValue)){if(parseFloat(x)>parseFloat(v.maxValue)){return[false,e+": "+f.maxValue+" "+v.maxValue,""]}}var k;if(v.email===true){if(!(d===false&&m(x))){k=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!k.test(x)){return[false,e+": "+f.email,""]}}}if(v.integer===true){if(!(d===false&&m(x))){if(isNaN(x)){return[false,e+": "+f.integer,""]}if((x%1!==0)||(x.indexOf(".")!==-1)){return[false,e+": "+f.integer,""]}}}if(v.date===true){if(!(d===false&&m(x))){if(h[r].formatoptions&&h[r].formatoptions.newformat){n=h[r].formatoptions.newformat;if(j.hasOwnProperty(n)){n=j[n]}}else{n=h[r].datefmt||"Y-m-d"}if(!a.checkDate(n,x)){return[false,e+": "+f.date+" - "+n,""]}}}if(v.time===true){if(!(d===false&&m(x))){if(!a.checkTime(x)){return[false,e+": "+f.date+" - hh:mm (am/pm)",""]}}}if(v.url===true){if(!(d===false&&m(x))){k=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!k.test(x)){return[false,e+": "+f.url,""]}}}if(v.custom===true){if(!(d===false&&m(x))){if(c.isFunction(v.custom_func)){var w=v.custom_func.call(u,x,e,r);return c.isArray(w)?w:[false,f.customarray,""]}return[false,f.customfcheck,""]}}}return[true,"",""]}})}(jQuery));(function(c){var a=c.jgrid,b=a.getMethod("getGridRes");a.extend({getColProp:function(f){var d={},h=this[0];if(!h.grid){return false}var g=h.p.colModel,e;for(e=0;e<g.length;e++){if(g[e].name===f){d=g[e];break}}return d},setColProp:function(e,d){return this.each(function(){var f=this,h=f.p;if(f.grid&&h!=null&&d){var j=h.colModel,g;for(g=0;g<j.length;g++){if(j[g].name===e){c.extend(true,j[g],d);break}}}})},sortGrid:function(e,d,f){return this.each(function(){var r=this,g=r.grid,h=r.p,o=h.colModel,j=o.length,q,m,n=false,k;if(!g){return}if(!e){e=h.sortname}if(typeof d!=="boolean"){d=false}for(m=0;m<j;m++){q=o[m];if(q.index===e||q.name===e){if(h.frozenColumns===true&&q.frozen===true){n=g.fhDiv.find("#"+h.id+"_"+e)}if(!n||n.length===0){n=g.headers[m].el}k=q.sortable;if(typeof k!=="boolean"||k){r.sortData("jqgh_"+h.id+"_"+e,m,d,f,n)}break}}})},clearBeforeUnload:function(){return this.each(function(){var g=this,m=g.p,k=g.grid,e,j=a.clearArray;if(c.isFunction(k.emptyRows)){k.emptyRows.call(g,true,true)}c(document).unbind("mouseup.jqGrid"+m.id);c(k.hDiv).unbind("mousemove");c(g).unbind();var h,d=k.headers.length;for(h=0;h<d;h++){k.headers[h].el=null}for(e in k){if(k.hasOwnProperty(e)){k.propOrMethod=null}}var f=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","nav","grid","p"];d=f.length;for(h=0;h<d;h++){if(g.hasOwnProperty(f[h])){g[f[h]]=null}}g._index={};j(m.data);j(m.lastSelectedData);j(m.selarrrow);j(m.savedRow)})},GridDestroy:function(){return this.each(function(){var e=this,f=e.p,d=f.pager;if(e.grid){if(d){c(d).remove()}try{c(e).jqGrid("clearBeforeUnload");c(f.gBox).remove();c("#alertmod_"+f.idSel).remove()}catch(g){}}})},GridUnload:function(){return this.each(function(){var e=this,g=e.p;if(!e.grid){return}var f={id:c(e).attr("id"),cl:c(e).attr("class")};if(g.pager){c(g.pager).empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom")}var d=document.createElement("table");c(d).attr({id:f.id});d.className=f.cl;c(d).removeClass("ui-jqgrid-btable");if(c(g.pager).parents(g.gBox).length===1){c(d).insertBefore(g.gBox).show();c(g.pager).insertBefore(g.gBox)}else{c(d).insertBefore(g.gBox).show()}c(e).jqGrid("clearBeforeUnload");c(g.gBox).remove()})},setGridState:function(d){return this.each(function(){var j=this,i=j.p,g=j.grid,h=g.cDiv,e=c(g.uDiv),f=c(g.ubDiv);if(!g){return}if(d==="hidden"){c(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",i.gView).slideUp("fast");if(i.pager){c(i.pager).slideUp("fast")}if(i.toppager){c(i.toppager).slideUp("fast")}if(i.toolbar[0]===true){if(i.toolbar[1]==="both"){f.slideUp("fast")}e.slideUp("fast")}if(i.footerrow){c(".ui-jqgrid-sdiv",i.gBox).slideUp("fast")}c(".ui-jqgrid-titlebar-close span",h).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");i.gridstate="hidden"}else{if(d==="visible"){c(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",i.gView).slideDown("fast");if(i.pager){c(i.pager).slideDown("fast")}if(i.toppager){c(i.toppager).slideDown("fast")}if(i.toolbar[0]===true){if(i.toolbar[1]==="both"){f.slideDown("fast")}e.slideDown("fast")}if(i.footerrow){c(".ui-jqgrid-sdiv",i.gBox).slideDown("fast")}c(".ui-jqgrid-titlebar-close span",h).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");i.gridstate="visible"}}})},filterToolbar:function(d){return this.each(function(){var z=this,e=z.grid,A=c(z),t=z.p,l=a.bindEv,k=a.info_dialog;if(this.ftoolbar){return}var v=c.extend(true,{autosearch:true,autosearchDelay:500,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:false,groupOp:"AND",defaultSearch:"bw",searchOperators:false,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},a.search,t.searching||{},d||{});var m=t.colModel,q=function(o){return b.call(A,o)},h=q("errors.errcap"),y=q("edit.bClose"),j=q("edit.msg"),x=a.jqID;var f=function(){var D={},C=0,I,J,o={},p;c.each(m,function(){var K=this,L=c("#gs_"+x(K.name),(K.frozen===true&&t.frozenColumns===true)?e.fhDiv:e.hDiv);J=K.index||K.name;if(v.searchOperators){p=L.parent().prev().children("a").data("soper")||v.defaultSearch}else{p=(K.searchoptions&&K.searchoptions.sopt)?K.searchoptions.sopt[0]:K.stype==="select"?"eq":v.defaultSearch}I=K.stype==="custom"&&c.isFunction(K.searchoptions.custom_value)&&L.length>0&&L[0].nodeName.toUpperCase()==="SPAN"?K.searchoptions.custom_value.call(z,L.children(".customelement").filter(":first"),"get"):L.val();if(I||p==="nu"||p==="nn"){D[J]=I;o[J]=p;C++}else{try{delete t.postData[J]}catch(M){}}});var G=C>0?true:false;if(v.stringResult===true||t.datatype==="local"||v.searchOperators===true){var H='{"groupOp":"'+v.groupOp+'","rules":[';var F=0;c.each(D,function(K,L){if(F>0){H+=","}H+='{"field":"'+K+'",';H+='"op":"'+o[K]+'",';L+="";H+='"data":"'+L.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';F++});H+="]}";c.extend(t.postData,{filters:H});c.each(["searchField","searchString","searchOper"],function(K,L){if(t.postData.hasOwnProperty(L)){delete t.postData[L]}})}else{c.extend(t.postData,D)}var E;if(t.searchurl){E=t.url;A.jqGrid("setGridParam",{url:t.searchurl})}var B=A.triggerHandler("jqGridToolbarBeforeSearch")==="stop"?true:false;if(!B&&c.isFunction(v.beforeSearch)){B=v.beforeSearch.call(z)}if(!B){A.jqGrid("setGridParam",{search:G}).trigger("reloadGrid",[{page:1}])}if(E){A.jqGrid("setGridParam",{url:E})}A.triggerHandler("jqGridToolbarAfterSearch");if(c.isFunction(v.afterSearch)){v.afterSearch.call(z)}},i=function(o){var B={},p=0,H;o=(typeof o!=="boolean")?true:o;c.each(m,function(){var K,I=this,J=c("#gs_"+x(I.name),(I.frozen===true&&t.frozenColumns===true)?e.fhDiv:e.hDiv),L;if(I.searchoptions&&I.searchoptions.defaultValue!==undefined){K=I.searchoptions.defaultValue}H=I.index||I.name;switch(I.stype){case"select":L=J.length>0?!J[0].multiple:true;J.find("option").each(function(N){this.selected=N===0&&L;if(c(this).val()===K){this.selected=true;return false}});if(K!==undefined){B[H]=K;p++}else{try{delete t.postData[H]}catch(M){}}break;case"text":J.val(K||"");if(K!==undefined){B[H]=K;p++}else{try{delete t.postData[H]}catch(M){}}break;case"custom":if(c.isFunction(I.searchoptions.custom_value)&&J.length>0&&J[0].nodeName.toUpperCase()==="SPAN"){I.searchoptions.custom_value.call(z,J.children(".customelement").filter(":first"),"set",K||"")}break}});var E=p>0?true:false;t.resetsearch=true;if(v.stringResult===true||t.datatype==="local"){var F='{"groupOp":"'+v.groupOp+'","rules":[';var D=0;c.each(B,function(I,J){if(D>0){F+=","}F+='{"field":"'+I+'",';F+='"op":"eq",';J+="";F+='"data":"'+J.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';D++});F+="]}";c.extend(t.postData,{filters:F});c.each(["searchField","searchString","searchOper"],function(I,J){if(t.postData.hasOwnProperty(J)){delete t.postData[J]}})}else{c.extend(t.postData,B)}var C;if(t.searchurl){C=t.url;A.jqGrid("setGridParam",{url:t.searchurl})}var G=A.triggerHandler("jqGridToolbarBeforeClear")==="stop"?true:false;if(!G&&c.isFunction(v.beforeClear)){G=v.beforeClear.call(z)}if(!G){if(o){A.jqGrid("setGridParam",{search:E}).trigger("reloadGrid",[{page:1}])}}if(C){A.jqGrid("setGridParam",{url:C})}A.triggerHandler("jqGridToolbarAfterClear");if(c.isFunction(v.afterClear)){v.afterClear()}},r=function(){var o=c("tr.ui-search-toolbar",e.hDiv),p=t.frozenColumns===true?c("tr.ui-search-toolbar",e.fhDiv):false;if(o.css("display")==="none"){o.show();if(p){p.show()}}else{o.hide();if(p){p.hide()}}},n=q("search.odata")||[],w=t.customSortOperations,u=function(Q,C,I){c("#sopt_menu").remove();C=parseInt(C,10);I=parseInt(I,10)+18;var E=c(".ui-jqgrid-view").css("font-size")||"11px";var K='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+E+";left:"+C+"px;top:"+I+'px;">',J=c(Q).data("soper"),L,M=[],H;var N=0,p=c(Q).data("colname"),P=m.length;while(N<P){if(m[N].name===p){break}N++}var G=m[N],B=c.extend({},G.searchoptions),O,R,D,o,F;if(!B.sopt){B.sopt=[];B.sopt[0]=G.stype==="select"?"eq":v.defaultSearch}c.each(n,function(){M.push(this.oper)});if(w!=null){c.each(w,function(S){M.push(S)})}for(N=0;N<B.sopt.length;N++){D=B.sopt[N];H=c.inArray(D,M);if(H!==-1){O=n[H];if(O!==undefined){o=v.operands[D];F=O.text}else{if(w!=null){R=w[D];o=R.operand;F=R.text}}L=J===D?"ui-state-highlight":"";K+='<li class="ui-menu-item '+L+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+D+'" data-oper="'+o+'"><table'+(a.msie&&a.msiever()<8?' cellspacing="0"':"")+'><tr><td style="width:25px">'+o+"</td><td>"+F+"</td></tr></table></a></li>"}}K+="</ul>";c("body").append(K);c("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");c("#sopt_menu > li > a").hover(function(){c(this).addClass("ui-state-hover")},function(){c(this).removeClass("ui-state-hover")}).click(function(){var T=c(this).attr("value"),U=c(this).data("oper");A.triggerHandler("jqGridToolbarSelectOper",[T,U,Q]);c("#sopt_menu").hide();c(Q).text(U).data("soper",T);if(v.autosearch===true){var S=c(Q).parent().next().children()[0];if(c(S).val()||T==="nu"||T==="nn"){f()}}})};var g=c("<tr class='ui-search-toolbar' role='row'></tr>");var s;c.each(m,function(J){var G=this,O,E,K,N="",Y,S,R,F=G.searchoptions,aa=G.editoptions,C=c("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+t.direction+"'></th>"),I=c("<div style='position:relative;height:auto;padding-right:0.3em;padding-left:0.3em;'></div>"),D=c("<table class='ui-search-table'"+(a.msie&&a.msiever()<8?" cellspacing='0'":"")+"><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear'></td></tr></table>");if(this.hidden===true){c(C).css("display","none")}this.search=this.search===false?false:true;if(this.stype===undefined){this.stype="text"}O=c.extend({},this.searchoptions||{});if(this.search){if(v.searchOperators){S=(O.sopt)?O.sopt[0]:G.stype==="select"?"eq":v.defaultSearch;for(R=0;R<n.length;R++){if(n[R].oper===S){Y=v.operands[S]||"";break}}if(Y===undefined&&w!=null){var X;for(X in w){if(w.hasOwnProperty(X)){Y=w[X].operand}}}if(Y===undefined){Y="="}var P=O.searchtitle!=null?O.searchtitle:q("search.operandTitle");N="<a title='"+P+"' style='padding-right: 0.5em;' data-soper='"+S+"' class='soptclass' data-colname='"+this.name+"'>"+Y+"</a>"}c("td",D).filter(":first").data("colindex",J).append(N);if(O.sopt==null||O.sopt.length===1){c("td.ui-search-oper",D).hide()}if(O.clearSearch===undefined){O.clearSearch=this.stype==="text"?true:false}if(O.clearSearch){var H=q("search.resetTitle")||"Clear Search Value";c("td",D).eq(2).append("<a title='"+H+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+v.resetIcon+"</a>")}else{c("td",D).eq(2).hide()}switch(this.stype){case"select":E=this.surl||O.dataUrl;if(E){K=I;c(K).append(D);c.ajax(c.extend({url:E,dataType:"html",success:function(ac){if(O.buildSelect!==undefined){var ad=O.buildSelect(ac);if(ad){c("td",D).eq(1).append(ad)}}else{c("td",D).eq(1).append(ac)}var ab=D.find("td.ui-search-input>select");if(O.defaultValue!==undefined){ab.val(O.defaultValue)}ab.attr({name:G.index||G.name,id:"gs_"+G.name});if(O.attr){ab.attr(O.attr)}ab.css({width:"100%"});l.call(z,ab[0],O);a.fullBoolFeedback.call(z,O.selectFilled,"jqGridSelectFilled",{elem:ab[0],options:O,cm:G,cmName:G.name,iCol:J});if(v.autosearch===true){ab.change(function(){f();return false})}}},a.ajaxOptions,t.ajaxSelectOptions||{}))}else{var p,L,W;if(F){p=F.value===undefined?"":F.value;L=F.separator===undefined?":":F.separator;W=F.delimiter===undefined?";":F.delimiter}else{if(aa){p=aa.value===undefined?"":aa.value;L=aa.separator===undefined?":":aa.separator;W=aa.delimiter===undefined?";":aa.delimiter}}if(p){var U=document.createElement("select");U.style.width="100%";c(U).attr({name:G.index||G.name,id:"gs_"+G.name});var M,B,Z,Q;if(typeof p==="string"){S=p.split(W);for(Q=0;Q<S.length;Q++){M=S[Q].split(L);B=document.createElement("option");B.value=M[0];B.innerHTML=M[1];U.appendChild(B)}}else{if(typeof p==="object"){for(Z in p){if(p.hasOwnProperty(Z)){B=document.createElement("option");B.value=Z;B.innerHTML=p[Z];U.appendChild(B)}}}}if(O.defaultValue!==undefined){c(U).val(O.defaultValue)}if(O.attr){c(U).attr(O.attr)}c(I).append(D);l.call(z,U,O);c("td",D).eq(1).append(U);a.fullBoolFeedback.call(z,F.selectFilled,"jqGridSelectFilled",{elem:U,options:F,cm:G,cmName:G.name,iCol:J});if(v.autosearch===true){c(U).change(function(){f();return false})}}}break;case"text":var V=O.defaultValue!==undefined?O.defaultValue:"";c("td",D).eq(1).append("<input type='text' style='width:100%;padding:0;' name='"+(G.index||G.name)+"' id='gs_"+G.name+"' value='"+V+"'/>");c(I).append(D);if(O.attr){c("input",I).attr(O.attr)}l.call(z,c("input",I)[0],O);if(v.autosearch===true){if(v.searchOnEnter){c("input",I).keypress(function(ac){var ab=ac.charCode||ac.keyCode||0;if(ab===13){f();return false}return this})}else{c("input",I).keydown(function(ac){var ab=ac.which;switch(ab){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:if(s){clearTimeout(s)}s=setTimeout(function(){f()},v.autosearchDelay)}})}}break;case"custom":c("td",D).eq(1).append("<span style='width:95%;padding:0;' name='"+(G.index||G.name)+"' id='gs_"+G.name+"'/>");c(I).append(D);try{if(c.isFunction(O.custom_element)){var o=O.custom_element.call(z,O.defaultValue!==undefined?O.defaultValue:"",O);if(o){o=c(o).addClass("customelement");c(I).find("span[name='"+(G.index||G.name)+"']").append(o)}else{throw"e2"}}else{throw"e1"}}catch(T){if(T==="e1"){k.call(z,h,"function 'custom_element' "+j.nodefined,y)}if(T==="e2"){k.call(z,h,"function 'custom_element' "+j.novalue,y)}else{k.call(z,h,typeof T==="string"?T:T.message,y)}}break}}c(C).append(I);c(g).append(C);if(!v.searchOperators){c("td",D).eq(0).hide()}});c("table thead",e.hDiv).append(g);if(v.searchOperators){c(".soptclass",g).click(function(B){var C=c(this).offset(),p=(C.left),o=(C.top);u(this,p,o);B.stopPropagation()});c("body").on("click",function(o){if(o.target.className!=="soptclass"){c("#sopt_menu").hide()}})}c(".clearsearchclass",g).click(function(){var C=c(this).parents("tr").filter(":first"),B=parseInt(c("td.ui-search-oper",C).data("colindex"),10),o=c.extend({},m[B].searchoptions||{}),p=o.defaultValue||"";if(m[B].stype==="select"){if(p){c("td.ui-search-input select",C).val(p)}else{c("td.ui-search-input select",C)[0].selectedIndex=0}}else{c("td.ui-search-input input",C).val(p)}if(v.autosearch===true){f()}});z.ftoolbar=true;z.triggerToolbar=f;z.clearToolbar=i;z.toggleToolbar=r})},destroyFilterToolbar:function(){return this.each(function(){var d=this;if(!d.ftoolbar){return}d.triggerToolbar=null;d.clearToolbar=null;d.toggleToolbar=null;d.ftoolbar=false;c(d.grid.hDiv).find("table thead tr.ui-search-toolbar").remove()})},destroyGroupHeader:function(d){if(d===undefined){d=true}return this.each(function(){var k=this,m,h,r,g,e=k.grid,p=c("table.ui-jqgrid-htable thead",e.hDiv),q=k.p.colModel,o;if(!e){return}c(k).unbind(".setGroupHeaders");var n=c("<tr>",{role:"row"}).addClass("ui-jqgrid-labels");var f=e.headers;for(m=0,h=f.length;m<h;m++){o=q[m].hidden?"none":"";r=c(f[m].el).width(f[m].width).css("display",o);try{r.removeAttr("rowSpan")}catch(j){r.attr("rowSpan",1)}n.append(r);g=r.children("span.ui-jqgrid-resize");if(g.length>0){g[0].style.height=""}r.children("div")[0].style.top=""}c(p).children("tr.ui-jqgrid-labels").remove();c(p).prepend(n);if(d===true){c(k).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(d){d=c.extend({useColSpanStyle:false,groupHeaders:[]},d||{});return this.each(function(){this.p.groupHeader=d;var e=this,z,v,w=0,B,p,l,h,k,j,A,r,q,u,o=e.p.colModel,s=o.length,f=e.grid.headers,y=c("table.ui-jqgrid-htable",e.grid.hDiv),g=y.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),n=y.children("thead"),t,m=y.find(".jqg-first-row-header");if(m[0]===undefined){m=c("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{m.empty()}var x=function(E,C){var D=C.length,i;for(i=0;i<D;i++){if(C[i].startColumnName===E){return i}}return -1};c(e).prepend(n);B=c("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(z=0;z<s;z++){l=f[z].el;h=c(l);v=o[z];k={height:"0",width:f[z].width+"px",display:(v.hidden?"none":"")};c("<th>",{role:"gridcell"}).css(k).addClass("ui-first-th-"+e.p.direction).appendTo(m);l.style.width="";j=x(v.name,d.groupHeaders);if(j>=0){A=d.groupHeaders[j];r=A.numberOfColumns;q=A.titleText;for(u=0,j=0;j<r&&(z+j<s);j++){if(!o[z+j].hidden){u++}}p=c("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+e.p.direction).css({height:"22px","border-top":"0 none"}).html(q);if(u>0){p.attr("colspan",String(u))}if(e.p.headertitles){p.attr("title",p.text())}if(u===0){p.hide()}h.before(p);B.append(l);w=r-1}else{if(w===0){if(d.useColSpanStyle){h.attr("rowspan","2")}else{c("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+e.p.direction).css({display:v.hidden?"none":"","border-top":"0 none"}).insertBefore(h);B.append(l)}}else{B.append(l);w--}}}t=c(e).children("thead");t.prepend(m);B.insertAfter(g);y.append(t);if(d.useColSpanStyle){y.find("span.ui-jqgrid-resize").each(function(){var i=c(this).parent();if(i.is(":visible")){this.style.cssText="height: "+i.height()+"px !important; cursor: col-resize;"}});y.find("div.ui-jqgrid-sortable").each(function(){var i=c(this),C=i.parent();if(C.is(":visible")&&C.is(":has(span.ui-jqgrid-resize)")){i.css("top",(C.height()-i.outerHeight())/2+"px")}})}})},setFrozenColumns:function(){return this.each(function(){var u=this,v=c(u),m=u.p,e=u.grid,o=a.jqID;if(!e){return}var h=m.colModel,s=0,t=h.length,d=-1,x=false;if(m.subGrid===true||m.treeGrid===true||m.cellEdit===true||m.sortable||m.scroll){return}if(m.rownumbers){s++}if(m.multiselect){s++}while(s<t){if(h[s].frozen===true){x=true;d=s}else{break}s++}if(d>=0&&x){var k=m.caption?c(e.cDiv).outerHeight():0,w=c(".ui-jqgrid-htable",m.gView).height();if(m.toppager){k=k+c(e.topDiv).outerHeight()}if(m.toolbar[0]===true){if(m.toolbar[1]!=="bottom"){k=k+c(e.uDiv).outerHeight()}}e.fhDiv=c('<div style="position:absolute;left:0;top:'+k+"px;height:"+w+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');e.fbDiv=c('<div style="position:absolute;left:0;top:'+(parseInt(k,10)+parseInt(w,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');c(m.gView).append(e.fhDiv);var q=c(".ui-jqgrid-htable",m.gView).clone(true);if(m.groupHeader){c("tr.jqg-first-row-header, tr.jqg-third-row-header",q).each(function(){c("th:gt("+d+")",this).remove()});var n=-1,l=-1,f,g;c("tr.jqg-second-row-header th",q).each(function(){f=parseInt(c(this).attr("colspan"),10);g=parseInt(c(this).attr("rowspan"),10);if(g){n++;l++}if(f){n=n+f;l++}if(n===d){return false}});if(n!==d){l=d}c("tr.jqg-second-row-header",q).each(function(){c("th:gt("+l+")",this).remove()})}else{c("tr",q).each(function(){c("th:gt("+d+")",this).remove()})}c(q).width(1);c(e.fhDiv).append(q).mousemove(function(i){if(e.resizing){e.dragMove(i);return false}});if(m.footerrow){var r=c(".ui-jqgrid-bdiv",m.gView).height();e.fsDiv=c('<div style="position:absolute;left:0;top:'+(parseInt(k,10)+parseInt(w,10)+parseInt(r,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>');c(m.gView).append(e.fsDiv);var j=c(".ui-jqgrid-ftable",m.gView).clone(true);c("tr",j).each(function(){c("td:gt("+d+")",this).remove()});c(j).width(1);c(e.fsDiv).append(j)}v.bind("jqGridResizeStop.setFrozenColumns",function(B,i,z){var A=c(".ui-jqgrid-htable",e.fhDiv);c("th:eq("+z+")",A).width(i);var p=c(".ui-jqgrid-btable",e.fbDiv);c("tr:first td:eq("+z+")",p).width(i);if(m.footerrow){var C=c(".ui-jqgrid-ftable",e.fsDiv);c("tr:first td:eq("+z+")",C).width(i)}});v.bind("jqGridSortCol.setFrozenColumns",function(B,p,A){var i=c("tr.ui-jqgrid-labels:last th:eq("+m.lastsort+")",e.fhDiv),z=c("tr.ui-jqgrid-labels:last th:eq("+A+")",e.fhDiv);c("span.ui-grid-ico-sort",i).addClass("ui-state-disabled");c(i).attr("aria-selected","false");c("span.ui-icon-"+m.sortorder,z).removeClass("ui-state-disabled");c(z).attr("aria-selected","true");if(!m.viewsortcols[0]){if(m.lastsort!==A){c("span.s-ico",i).hide();c("span.s-ico",z).show()}}});c(m.gView).append(e.fbDiv);c(e.bDiv).scroll(function(){c(e.fbDiv).scrollTop(c(this).scrollTop())});if(m.hoverrows===true){c(m.idSel).unbind("mouseover").unbind("mouseout")}var y=function(p,i){var z=c(i).position();if(p!=null&&p.length>0){p.css({top:z.top,left:m.direction==="rtl"?i.clientWidth-e.fhDiv.width():0})}p.height(i.clientHeight)};v.bind("jqGridAfterGridComplete.setFrozenColumns",function(){c(m.idSel+"_frozen").remove();c(e.fbDiv).height(e.hDiv.clientHeight);var i=c(m.idSel).clone(true);c("tr[role=row]",i).each(function(){c("td[role=gridcell]:gt("+d+")",this).remove()});c(i).width(1).attr("id",m.id+"_frozen");c(e.fbDiv).append(i);if(m.hoverrows===true){c("tr.jqgrow",i).hover(function(){var p=this;c(p).addClass("ui-state-hover");c("#"+o(p.id),m.idSel).addClass("ui-state-hover")},function(){var p=this;c(p).removeClass("ui-state-hover");c("#"+o(p.id),m.idSel).removeClass("ui-state-hover")});c("tr.jqgrow",m.idSel).hover(function(){var p=this;c(p).addClass("ui-state-hover");c("#"+o(p.id),m.idSel+"_frozen").addClass("ui-state-hover")},function(){var p=this;c(p).removeClass("ui-state-hover");c("#"+o(p.id),m.idSel+"_frozen").removeClass("ui-state-hover")})}y(e.fhDiv,e.hDiv);y(e.fbDiv,e.bDiv);y(e.fsDiv,e.sDiv);i=null});c(m.gBox).bind("resizestop.setFrozenColumns",function(){setTimeout(function(){y(e.fhDiv,e.hDiv);y(e.fbDiv,e.bDiv);y(e.fsDiv,e.sDiv);var i=e.fhDiv[0].clientWidth;if(e.fhDiv!=null&&e.fhDiv.length>0){c(e.fhDiv).height(e.hDiv.clientHeight)}if(e.fbDiv!=null&&e.fbDiv.length>0){c(e.fbDiv).width(i)}if(e.fsDiv!=null&&e.fsDiv.length>0){c(e.fsDiv).width(i)}},50)});if(!e.hDiv.loading){v.triggerHandler("jqGridAfterGridComplete")}m.frozenColumns=true}})},destroyFrozenColumns:function(){return this.each(function(){var h=this,f=c(h),d=h.grid,e=h.p;if(!d){return}if(e.frozenColumns===true){c(d.fhDiv).remove();c(d.fbDiv).remove();d.fhDiv=null;d.fbDiv=null;if(e.footerrow){c(d.fsDiv).remove();d.fsDiv=null}f.unbind(".setFrozenColumns");if(e.hoverrows===true){var g;f.bind("mouseover",function(i){g=c(i.target).closest("tr.jqgrow");if(c(g).attr("class")!=="ui-subgrid"){c(g).addClass("ui-state-hover")}}).bind("mouseout",function(i){g=c(i.target).closest("tr.jqgrow");c(g).removeClass("ui-state-hover")})}e.frozenColumns=false}})}})}(jQuery));(function(b){var a=b.jgrid;b.fn.jqFilter=function(c){if(typeof c==="string"){var e=b.fn.jqFilter[c];if(!e){throw ("jqFilter - No such method: "+c)}var d=b.makeArray(arguments).slice(1);return e.apply(this,d)}var f=b.extend(true,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:false,errmsg:"",errorcheck:true,showQuery:true,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:true,ruleButtons:true,direction:"ltr"},a.filter,c||{});return this.each(function(){if(this.filter){return}this.p=f;if(f.filter===null||f.filter===undefined){f.filter={groupOp:f.groupOps[0].op,rules:[],groups:[]}}var j,g=f.columns.length,h,k=/msie/i.test(navigator.userAgent)&&!window.opera;f.initFilter=b.extend(true,{},f.filter);if(!g){return}for(j=0;j<g;j++){h=f.columns[j];if(h.stype){h.inputtype=h.stype}else{if(!h.inputtype){h.inputtype="text"}}if(h.sorttype){h.searchtype=h.sorttype}else{if(!h.searchtype){h.searchtype="string"}}if(h.hidden===undefined){h.hidden=false}if(!h.label){h.label=h.name}if(h.index){h.name=h.index}if(!h.hasOwnProperty("searchoptions")){h.searchoptions={}}if(!h.hasOwnProperty("searchrules")){h.searchrules={}}}if(f.showQuery){b(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+f.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>")}var l=function(){return b("#"+a.jqID(f.id))[0]||null};var i=function(o,m){var n=[true,""],q=l();if(b.isFunction(m.searchrules)){n=m.searchrules.call(q,o,m)}else{if(a&&a.checkValues){try{n=a.checkValues.call(q,o,-1,m.searchrules,m.label)}catch(p){}}}if(n&&n.length&&n[0]===false){f.error=!n[0];f.errmsg=n[1]}};this.onchange=function(){f.error=false;f.errmsg="";return b.isFunction(f.onChange)?f.onChange.call(this,f):false};this.reDraw=function(){b("table.group:first",this).remove();var m=this.createTableForGroup(f.filter,null);b(this).append(m);if(b.isFunction(f.afterRedraw)){f.afterRedraw.call(this,f)}};this.createTableForGroup=function(p,A){var o=this,y;var z=b("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),w="left";if(f.direction==="rtl"){w="right";z.attr("dir","rtl")}if(A===null){z.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+w+"'></th></tr>")}var m=b("<tr></tr>");z.append(m);var n=b("<th colspan='5' align='"+w+"'></th>");m.append(n);if(f.ruleButtons===true){var t=b("<select class='opsel'></select>");n.append(t);var v="",u;for(y=0;y<f.groupOps.length;y++){u=p.groupOp===o.p.groupOps[y].op?" selected='selected'":"";v+="<option value='"+o.p.groupOps[y].op+"'"+u+">"+o.p.groupOps[y].text+"</option>"}t.append(v).bind("change",function(){p.groupOp=b(t).val();o.onchange()})}var D="<span></span>";if(f.groupButton){D=b("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>");D.bind("click",function(){if(p.groups===undefined){p.groups=[]}p.groups.push({groupOp:f.groupOps[0].op,rules:[],groups:[]});o.reDraw();o.onchange();return false})}n.append(D);if(f.ruleButtons===true){var r=b("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),q;r.bind("click",function(){var E,H,G;if(p.rules===undefined){p.rules=[]}for(y=0;y<o.p.columns.length;y++){E=(o.p.columns[y].search===undefined)?true:o.p.columns[y].search;H=(o.p.columns[y].hidden===true);G=(o.p.columns[y].searchoptions.searchhidden===true);if((G&&E)||(E&&!H)){q=o.p.columns[y];break}}var F;if(q.searchoptions.sopt){F=q.searchoptions.sopt}else{if(o.p.sopt){F=o.p.sopt}else{if(b.inArray(q.searchtype,o.p.strarr)!==-1){F=o.p.stropts}else{F=o.p.numopts}}}p.rules.push({field:q.name,op:F[0],data:""});o.reDraw();return false});n.append(r)}if(A!==null){var s=b("<input type='button' value='-' title='Delete group' class='delete-group'/>");n.append(s);s.bind("click",function(){for(y=0;y<A.groups.length;y++){if(A.groups[y]===p){A.groups.splice(y,1);break}}o.reDraw();o.onchange();return false})}if(p.groups!==undefined){var x,B,C;for(y=0;y<p.groups.length;y++){x=b("<tr></tr>");z.append(x);B=b("<td class='first'></td>");x.append(B);C=b("<td colspan='4'></td>");C.append(this.createTableForGroup(p.groups[y],p));x.append(C)}}if(p.groupOp===undefined){p.groupOp=o.p.groupOps[0].op}if(p.rules!==undefined){for(y=0;y<p.rules.length;y++){z.append(this.createTableRowForRule(p.rules[y],p))}}return z};this.createTableRowForRule=function(w,y){var x=this,K=l(),n=b("<tr></tr>"),J,A,p,z,D="",C;n.append("<td class='first'></td>");var q=b("<td class='columns'></td>");n.append(q);var L=b("<select></select>"),B,F=[];q.append(L);L.bind("change",function(){w.field=b(L).val();p=b(this).parents("tr:first");for(J=0;J<x.p.columns.length;J++){if(x.p.columns[J].name===w.field){z=x.p.columns[J];break}}if(!z){return}z.searchoptions.id=a.randId();if(k&&z.inputtype==="text"){if(!z.searchoptions.size){z.searchoptions.size=10}}var T=a.createEl.call(K,z.inputtype,z.searchoptions,"",true,x.p.ajaxSelectOptions||{},true);b(T).addClass("input-elm");if(z.searchoptions.sopt){A=z.searchoptions.sopt}else{if(x.p.sopt){A=x.p.sopt}else{if(b.inArray(z.searchtype,x.p.strarr)!==-1){A=x.p.stropts}else{A=x.p.numopts}}}var R="",S=0,Q,P,O;F=[];b.each(x.p.ops,function(){F.push(this.oper)});if(x.p.cops){b.each(x.p.cops,function(U){F.push(U)})}for(J=0;J<A.length;J++){P=A[J];B=b.inArray(A[J],F);if(B!==-1){Q=x.p.ops[B];O=Q!==undefined?Q.text:x.p.cops[P].text;if(S===0){w.op=P}R+="<option value='"+P+"'>"+O+"</option>";S++}}b(".selectopts",p).empty().append(R);b(".selectopts",p)[0].selectedIndex=0;if(a.msie&&a.msiever()<9){var N=parseInt(b("select.selectopts",p)[0].offsetWidth,10)+1;b(".selectopts",p).width(N);b(".selectopts",p).css("width","auto")}b(".data",p).empty().append(T);a.bindEv.call(K,T,z.searchoptions);b(".input-elm",p).bind("change",function(V){var U=V.target;w.data=U.nodeName.toUpperCase()==="SPAN"&&z.searchoptions&&b.isFunction(z.searchoptions.custom_value)?z.searchoptions.custom_value.call(K,b(U).children(".customelement:first"),"get"):U.value;x.onchange()});setTimeout(function(){w.data=b(T).val();x.onchange()},0)});var G=0,u,I,M;for(J=0;J<x.p.columns.length;J++){u=(x.p.columns[J].search===undefined)?true:x.p.columns[J].search;I=(x.p.columns[J].hidden===true);M=(x.p.columns[J].searchoptions.searchhidden===true);if((M&&u)||(u&&!I)){C="";if(w.field===x.p.columns[J].name){C=" selected='selected'";G=J}D+="<option value='"+x.p.columns[J].name+"'"+C+">"+x.p.columns[J].label+"</option>"}}L.append(D);var E=b("<td class='operators'></td>");n.append(E);z=f.columns[G];z.searchoptions.id=a.randId();if(k&&z.inputtype==="text"){if(!z.searchoptions.size){z.searchoptions.size=10}}var o=a.createEl.call(K,z.inputtype,z.searchoptions,w.data,true,x.p.ajaxSelectOptions||{},true);if(w.op==="nu"||w.op==="nn"){b(o).attr("readonly","true");b(o).attr("disabled","true")}var m=b("<select class='selectopts'></select>");E.append(m);m.bind("change",function(){w.op=b(m).val();p=b(this).parents("tr:first");var N=b(".input-elm",p)[0];if(w.op==="nu"||w.op==="nn"){w.data="";if(N.tagName.toUpperCase()!=="SELECT"){N.value=""}N.setAttribute("readonly","true");N.setAttribute("disabled","true")}else{if(N.tagName.toUpperCase()==="SELECT"){w.data=N.value}N.removeAttribute("readonly");N.removeAttribute("disabled")}x.onchange()});if(z.searchoptions.sopt){A=z.searchoptions.sopt}else{if(x.p.sopt){A=x.p.sopt}else{if(b.inArray(z.searchtype,x.p.strarr)!==-1){A=x.p.stropts}else{A=x.p.numopts}}}D="";var H,t;b.each(x.p.ops,function(){F.push(this.oper)});if(x.p.cops){b.each(x.p.cops,function(N){F.push(N)})}for(J=0;J<A.length;J++){t=A[J];B=b.inArray(A[J],F);if(B!==-1){H=x.p.ops[B];C=w.op===t?" selected='selected'":"";D+="<option value='"+t+"'"+C+">"+(H!==undefined?H.text:x.p.cops[t].text)+"</option>"}}m.append(D);var s=b("<td class='data'></td>");n.append(s);s.append(o);a.bindEv.call(K,o,z.searchoptions);b(o).addClass("input-elm").bind("change",function(){w.data=z.inputtype==="custom"?z.searchoptions.custom_value.call(K,b(this).children(".customelement:first"),"get"):b(this).val();x.onchange()});var v=b("<td></td>");n.append(v);if(f.ruleButtons===true){var r=b("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");v.append(r);r.bind("click",function(){for(J=0;J<y.rules.length;J++){if(y.rules[J]===w){y.rules.splice(J,1);break}}x.reDraw();x.onchange();return false})}return n};this.getStringForGroup=function(p){var n="(",m;if(p.groups!==undefined){for(m=0;m<p.groups.length;m++){if(n.length>1){n+=" "+p.groupOp+" "}try{n+=this.getStringForGroup(p.groups[m])}catch(q){alert(q)}}}if(p.rules!==undefined){try{for(m=0;m<p.rules.length;m++){if(n.length>1){n+=" "+p.groupOp+" "}n+=this.getStringForRule(p.rules[m])}}catch(o){alert(o)}}n+=")";if(n==="()"){return""}return n};this.getStringForRule=function(r){var s="",n="",p,u,q,m=r.data,o,t=["int","integer","float","number","currency"];for(p=0;p<f.ops.length;p++){if(f.ops[p].oper===r.op){s=f.operands.hasOwnProperty(r.op)?f.operands[r.op]:"";n=f.ops[p].oper;break}}if(n===""&&f.cops!=null){for(o in f.cops){if(f.cops.hasOwnProperty(o)){n=o;s=f.cops[o].operand;if(b.isFunction(f.cops[o].buildQueryValue)){return f.cops[o].buildQueryValue.call(f,{cmName:r.field,searchValue:m,operand:s})}}}}for(p=0;p<f.columns.length;p++){if(f.columns[p].name===r.field){u=f.columns[p];break}}if(u==null){return""}if(n==="bw"||n==="bn"){m=m+"%"}if(n==="ew"||n==="en"){m="%"+m}if(n==="cn"||n==="nc"){m="%"+m+"%"}if(n==="in"||n==="ni"){m=" ("+m+")"}if(f.errorcheck){i(r.data,u)}if(b.inArray(u.searchtype,t)!==-1||n==="nn"||n==="nu"){q=r.field+" "+s+" "+m}else{q=r.field+" "+s+' "'+m+'"'}return q};this.resetFilter=function(){f.filter=b.extend(true,{},f.initFilter);this.reDraw();this.onchange()};this.hideError=function(){b("th.ui-state-error",this).html("");b("tr.error",this).hide()};this.showError=function(){b("th.ui-state-error",this).html(f.errmsg);b("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){var n=this;function o(r){if(n.p.errorcheck){var q,p;for(q=0;q<n.p.columns.length;q++){if(n.p.columns[q].name===r.field){p=n.p.columns[q];break}}if(p){i(r.data,p)}}return r.op+"(item."+r.field+",'"+r.data+"')"}function m(r){var q="(",p;if(r.groups!==undefined){for(p=0;p<r.groups.length;p++){if(q.length>1){if(r.groupOp==="OR"){q+=" || "}else{q+=" && "}}q+=m(r.groups[p])}}if(r.rules!==undefined){for(p=0;p<r.rules.length;p++){if(q.length>1){if(r.groupOp==="OR"){q+=" || "}else{q+=" && "}}q+=o(r.rules[p])}}q+=")";if(q==="()"){return""}return q}return m(f.filter)};this.reDraw();if(f.showQuery){this.onchange()}this.filter=true})};b.extend(b.fn.jqFilter,{toSQLString:function(){var c="";this.each(function(){c=this.toUserFriendlyString()});return c},filterData:function(){var c;this.each(function(){c=this.p.filter});return c},getParameter:function(c){if(c!==undefined){if(this.p.hasOwnProperty(c)){return this.p[c]}}return this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(c){if(typeof c==="string"){c=a.parse(c)}this.each(function(){this.p.filter=c;this.reDraw();this.onchange()})}})}(jQuery));(function(h){var m=h.jgrid,c=m.feedback,b=m.fullBoolFeedback,k=m.jqID,a=m.hideModal,e=m.viewModal,l=m.createModal,g=m.info_dialog,j=m.mergeCssClasses,f=function(o,p){var n=o[0].style[p];return n.indexOf("px")>=0?parseFloat(n):n},i=function(r,o,p){var q=p.w,n=h(o);this.data(r,{top:f(q,"top"),left:f(q,"left"),width:f(q,"width"),height:f(q,"height"),dataheight:f(n,"height")||"auto",datawidth:f(n,"width")||"auto"});q.remove();if(p.o){p.o.remove()}},d=function(q,o,n){var p;if(o[0]===true){p="<span class='"+j("fm-button-icon",n,o[2])+"'></span>";if(o[1]==="right"){q.addClass("fm-button-icon-right").append(p)}else{q.addClass("fm-button-icon-left").prepend(p)}}};m.extend({searchGrid:function(n){return this.each(function(){var I=this,J=h(I),D=I.p;if(!I.grid||D==null){return}var G=h.extend(true,{recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,searchOnEnter:false,multipleSearch:false,multipleGroup:false,top:0,left:0,removemodal:true,jqModal:true,modal:false,resize:true,width:450,height:"auto",dataheight:"auto",showQuery:false,errorcheck:true,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:false,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:false,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},J.jqGrid("getGridRes","search"),m.search||{},D.searching||{},n||{});var q="fbox_"+D.id,z=G.commonIconClass,H={themodal:"searchmod"+q,modalhead:"searchhd"+q,modalcontent:"searchcnt"+q,resizeAlso:q},u="#"+k(H.themodal),B=D.gBox,y=D.gView,s=D.postData[G.sFilter],M=function(){var o=h.makeArray(arguments);o.unshift("Search");o.unshift("Filter");o.unshift(G);return c.apply(I,o)};if(typeof s==="string"){s=m.parse(s)}if(G.recreateFilter===true){h(u).remove()}else{if(J.data("searchProp")){h.extend(G,J.data("searchProp"))}}function t(o){if(M("beforeShow",o)){h(u).data("onClose",G.onClose);e(u,{gbox:B,jqm:G.jqModal,overlay:G.overlay,modal:G.modal,overlayClass:G.overlayClass,toTop:G.toTop,onHide:function(p){i.call(J,"searchProp",q,p)}});M("afterShow",o)}}if(h(u)[0]!==undefined){t(h("#fbox_"+D.idSel))}else{var K=h("<div><div id='"+q+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore(y);if(D.direction==="rtl"){K.attr("dir","rtl")}var r=h.extend([],D.colModel),C="<a id='"+q+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='fm-button-icon "+j(z,G.findDialogIcon)+"'></span><span class='fm-button-text'>"+G.Find+"</span></a>",N="<a id='"+q+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='fm-button-icon "+j(z,G.resetDialogIcon)+"'></span><span class='fm-button-text'>"+G.Reset+"</span></a>",F="",v="",x,A=false,L,E=-1;if(G.showQuery){F="<a id='"+q+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='fm-button-icon "+j(z,G.queryDialogIcon)+"'></span><span class='fm-button-text'>Query</span></a>&#160;"}if(!G.columns.length){h.each(r,function(p,Q){if(!Q.label){Q.label=D.colNames[p]}if(!A){var o=(Q.search===undefined)?true:Q.search,P=(Q.hidden===true),O=(Q.searchoptions&&Q.searchoptions.searchhidden===true);if((O&&o)||(o&&!P)){A=true;x=Q.index||Q.name;E=p}}})}else{r=G.columns;E=0;x=r[0].index||r[0].name}if((!s&&x)||G.multipleSearch===false){var w="eq";if(E>=0&&r[E].searchoptions&&r[E].searchoptions.sopt){w=r[E].searchoptions.sopt[0]}else{if(G.sopt&&G.sopt.length){w=G.sopt[0]}}s={groupOp:"AND",rules:[{field:x,op:w,data:""}]}}A=false;if(G.tmplNames&&G.tmplNames.length){A=true;v=G.tmplLabel;v+="<select class='ui-template'>";v+="<option value='default'>Default</option>";h.each(G.tmplNames,function(o,p){v+="<option value='"+o+"'>"+p+"</option>"});v+="</select>"}L="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+q+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+D.direction+"'  style='float:"+(D.direction==="rtl"?"right":"left")+";'>"+N+v+"</td><td class='EditButton EditButton-"+D.direction+"'>"+F+C+"</td></tr></tbody></table>";q=k(q);G.gbox="#gbox_"+q;G.height="auto";q="#"+q;h(q).jqFilter({columns:r,filter:G.loadDefaults?s:null,showQuery:G.showQuery,errorcheck:G.errorcheck,sopt:G.sopt,groupButton:G.multipleGroup,ruleButtons:G.multipleSearch,afterRedraw:G.afterRedraw,ops:G.odata,cops:D.customSortOperations,operands:G.operands,ajaxSelectOptions:D.ajaxSelectOptions,groupOps:G.groupOps,onChange:function(){if(this.p.showQuery){h(".query",this).html(this.toUserFriendlyString())}b.call(I,G.afterChange,"jqGridFilterAfterChange",h(q),G)},direction:D.direction,id:D.id});K.append(L);if(A&&G.tmplFilters&&G.tmplFilters.length){h(".ui-template",K).bind("change",function(){var o=h(this).val();if(o==="default"){h(q).jqFilter("addFilter",s)}else{h(q).jqFilter("addFilter",G.tmplFilters[parseInt(o,10)])}return false})}if(G.multipleGroup===true){G.multipleSearch=true}M("onInitialize",h(q));if(G.layer){l.call(I,H,K,G,y,h(B)[0],"#"+k(G.layer),{position:"relative"})}else{l.call(I,H,K,G,y,h(B)[0])}if(G.searchOnEnter||G.closeOnEscape){h(u).keydown(function(p){var o=h(p.target);if(G.searchOnEnter&&p.which===13&&!o.hasClass("add-group")&&!o.hasClass("add-rule")&&!o.hasClass("delete-group")&&!o.hasClass("delete-rule")&&(!o.hasClass("fm-button")||!o.is("[id$=_query]"))){h(q+"_search").click();return false}if(G.closeOnEscape&&p.which===27){h("#"+k(H.modalhead)).find(".ui-jqdialog-titlebar-close").click();return false}})}if(F){h(q+"_query").bind("click",function(){h(".queryresult",K).toggle();return false})}if(G.stringResult===undefined){G.stringResult=G.multipleSearch}h(q+"_search").bind("click",function(){var O={},p,P,Q=h(q),o=Q.find(".input-elm");if(o.filter(":focus")){o=o.filter(":focus")}o.change();P=Q.jqFilter("filterData");if(G.errorcheck){Q[0].hideError();if(!G.showQuery){Q.jqFilter("toSQLString")}if(Q[0].p.error){Q[0].showError();return false}}if(G.stringResult){try{p=xmlJsonClass.toJson(P,"","",false)}catch(R){try{p=JSON.stringify(P)}catch(S){}}if(typeof p==="string"){O[G.sFilter]=p;h.each([G.sField,G.sValue,G.sOper],function(){O[this]=""})}}else{if(G.multipleSearch){O[G.sFilter]=P;h.each([G.sField,G.sValue,G.sOper],function(){O[this]=""})}else{O[G.sField]=P.rules[0].field;O[G.sValue]=P.rules[0].data;O[G.sOper]=P.rules[0].op;O[G.sFilter]=""}}D.search=true;h.extend(D.postData,O);if(b.call(I,G.onSearch,"jqGridFilterSearch",D.filters)){J.trigger("reloadGrid",[{page:1}])}if(G.closeAfterSearch){a(u,{gb:B,jqm:G.jqModal,onClose:G.onClose,removemodal:G.removemodal})}return false});h(q+"_reset").bind("click",function(){var p={},o=h(q);D.search=false;D.resetsearch=true;if(G.multipleSearch===false){p[G.sField]=p[G.sValue]=p[G.sOper]=""}else{p[G.sFilter]=""}o[0].resetFilter();if(A){h(".ui-template",K).val("default")}h.extend(D.postData,p);if(b.call(I,G.onReset,"jqGridFilterReset")){J.trigger("reloadGrid",[{page:1}])}if(G.closeAfterReset){a(u,{gb:B,jqm:G.jqModal,onClose:G.onClose,removemodal:G.removemodal})}return false});t(h(q));h(".fm-button:not(.ui-state-disabled)",K).hover(function(){h(this).addClass("ui-state-hover")},function(){h(this).removeClass("ui-state-hover")})}})},editGridRow:function(o,n){return this.each(function(){var q=this,I=h(q),ac=q.p;if(!q.grid||ac==null||!o){return}var R=ac.id,ae=h.extend(true,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true,overlayClass:"ui-widget-overlay",removemodal:true,form:"edit"},I.jqGrid("getGridRes","edit"),m.edit,ac.formEditing||{},n||{});var P="FrmGrid_"+R,ab=P,ai="TblGrid_"+R,J="#"+k(ai),D=J+"_2",an={themodal:"editmod"+R,modalhead:"edithd"+R,modalcontent:"editcnt"+R,resizeAlso:P},L="#"+k(an.themodal),s=ac.gBox,S=ac.propOrAttr,V=1,E=0,T,Q,U,ak=ae.commonIconClass,K=function(){var p=h.makeArray(arguments);p.unshift("");p.unshift("AddEdit");p.unshift(ae);return c.apply(q,p)};P="#"+k(P);if(o==="new"){o="_empty";U="add";ae.caption=ae.addCaption}else{ae.caption=ae.editCaption;U="edit"}if(!ae.recreateForm){if(I.data("formProp")){h.extend(ae,I.data("formProp"))}}var z=true;if(ae.checkOnUpdate&&ae.jqModal&&!ae.modal){z=false}function al(){h(J+" > tbody > tr > td .FormElement").each(function(){var ar=h(".customelement",this);if(ar.length){var ap=ar[0],p=h(ap).attr("name");h.each(ac.colModel,function(){if(this.name===p&&this.editoptions&&h.isFunction(this.editoptions.custom_value)){try{T[p]=this.editoptions.custom_value.call(q,h("#"+k(p),J),"get");if(T[p]===undefined){throw"e1"}}catch(at){if(at==="e1"){g.call(q,m.errors.errcap,"function 'custom_value' "+m.edit.msg.novalue,m.edit.bClose)}else{g.call(q,m.errors.errcap,at.message,m.edit.bClose)}}return true}})}else{switch(h(this).get(0).type){case"checkbox":if(h(this).is(":checked")){T[this.name]=h(this).val()}else{var ao=h(this).attr("offval");T[this.name]=ao}break;case"select-one":T[this.name]=h("option:selected",this).val();break;case"select-multiple":T[this.name]=h(this).val();if(T[this.name]){T[this.name]=T[this.name].join(",")}else{T[this.name]=""}var aq=[];h("option:selected",this).each(function(at,au){aq[at]=h(au).text()});break;case"password":case"text":case"textarea":case"button":T[this.name]=h(this).val();break}if(ac.autoencode){T[this.name]=m.htmlEncode(T[this.name])}}});return true}function G(p,ar,ap){var aq=0,av=[],ao=false,au="<td class='CaptionTD'></td><td class='DataTD'></td>",ax="",at;for(at=1;at<=ap;at++){ax+=au}if(p!=="_empty"){ao=I.jqGrid("getInd",p)}h(ac.colModel).each(function(aM){var aG=this,aA=aG.name,aE,aK,aN,aO,aJ,aL=aG.editable,aD=false,aI=false;if(h.isFunction(aL)){aL=aL.call(q,{rowid:p,iCol:aM,iRow:ao,name:aA,cm:aG,mode:p==="_empty"?"addForm":"editForm"})}if(aG.editrules&&aG.editrules.edithidden===true){aE=false}else{aE=aG.hidden===true||aL==="hidden"?true:false}aO=aE?"style='display:none'":"";switch(String(aL).toLowerCase()){case"hidden":aL=true;break;case"disabled":aL=true;aD=true;break;case"readonly":aL=true;aI=true;break}if(aA!=="cb"&&aA!=="subgrid"&&aL===true&&aA!=="rn"){if(ao===false){aN=""}else{if(aA===ac.ExpandColumn&&ac.treeGrid===true){aN=h("td[role='gridcell']:eq("+aM+")",q.rows[ao]).text()}else{try{aN=h.unformat.call(q,h("td[role='gridcell']:eq("+aM+")",q.rows[ao]),{rowId:p,colModel:aG},aM)}catch(aQ){aN=(aG.edittype&&aG.edittype==="textarea")?h("td[role='gridcell']:eq("+aM+")",q.rows[ao]).text():h("td[role='gridcell']:eq("+aM+")",q.rows[ao]).html()}if(!aN||aN==="&nbsp;"||aN==="&#160;"||(aN.length===1&&aN.charCodeAt(0)===160)){aN=""}}}var ay=h.extend({},aG.editoptions||{},{id:aA,name:aA,rowId:p}),az=h.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},aG.formoptions||{}),aH=parseInt(az.rowpos,10)||aq+1,aF=parseInt((parseInt(az.colpos,10)||1)*2,10);if(p==="_empty"&&ay.defaultValue){aN=h.isFunction(ay.defaultValue)?ay.defaultValue.call(q):ay.defaultValue}if(!aG.edittype){aG.edittype="text"}if(ac.autoencode){aN=m.htmlDecode(aN)}aJ=m.createEl.call(q,aG.edittype,ay,aN,false,h.extend({},m.ajaxOptions,ac.ajaxSelectOptions||{}));if(ae.checkOnSubmit||ae.checkOnUpdate){ae._savedData[aA]=aN}h(aJ).addClass("FormElement");if(h.inArray(aG.edittype,["text","textarea","password","select"])>-1){h(aJ).addClass("ui-widget-content ui-corner-all")}aK=h(ar).find("tr[rowpos="+aH+"]");if(az.rowabove){var aB=h("<tr><td class='contentinfo' colspan='"+(ap*2)+"'>"+az.rowcontent+"</td></tr>");h(ar).append(aB);aB[0].rp=aH}if(aK.length===0){aK=h("<tr "+aO+" rowpos='"+aH+"'></tr>").addClass("FormData").attr("id","tr_"+aA);h(aK).append(ax);h(ar).append(aK);aK[0].rp=aH}var aP=h("td:eq("+(aF-2)+")",aK[0]),aC=h("td:eq("+(aF-1)+")",aK[0]);aP.html(az.label===undefined?ac.colNames[aM]:az.label);aC.html(az.elmprefix).append(aJ).append(az.elmsuffix);if(aD){aP.addClass("ui-state-disabled");aC.addClass("ui-state-disabled");h(aJ).prop("readonly",true);h(aJ).prop("disabled",true)}else{if(aI){h(aJ).prop("readonly",true)}}if(aG.edittype==="custom"&&h.isFunction(ay.custom_value)){ay.custom_value.call(q,h("#"+k(aA),P),"set",aN)}m.bindEv.call(q,aJ,ay);av[aq]=aM;aq++}});if(aq>0){var aw=h("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(ap*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+R+"_id' value='"+p+"'/></td></tr>");aw[0].rp=aq+999;h(ar).append(aw);if(ae.checkOnSubmit||ae.checkOnUpdate){ae._savedData[R+"_id"]=p}}return av}function C(p,aq){var ay,ar=0,av,au,ao,at,aw;if(ae.checkOnSubmit||ae.checkOnUpdate){ae._savedData={};ae._savedData[R+"_id"]=p}var ax=ac.colModel;if(p==="_empty"){h(ax).each(function(){ay=this.name;ao=h.extend({},this.editoptions||{});au=h("#"+k(ay),aq);if(au&&au.length&&au[0]!==null){at="";if(this.edittype==="custom"&&h.isFunction(ao.custom_value)){ao.custom_value.call(q,au,"set",at)}else{if(ao.defaultValue){at=h.isFunction(ao.defaultValue)?ao.defaultValue.call(q):ao.defaultValue;if(au[0].type==="checkbox"){aw=at.toLowerCase();if(aw.search(/(false|f|0|no|n|off|undefined)/i)<0&&aw!==""){au[0].checked=true;au[0].defaultChecked=true;au[0].value=at}else{au[0].checked=false;au[0].defaultChecked=false}}else{au.val(at)}}else{if(au[0].type==="checkbox"){au[0].checked=false;au[0].defaultChecked=false;at=h(au).attr("offval")}else{if(au[0].type&&au[0].type.substr(0,6)==="select"){au[0].selectedIndex=0}else{au.val(at)}}}}if(ae.checkOnSubmit===true||ae.checkOnUpdate){ae._savedData[ay]=at}}});h("#id_g",aq).val(p);return}var ap=I.jqGrid("getInd",p,true);if(!ap){return}h('td[role="gridcell"]',ap).each(function(aC){ay=ax[aC].name;if(ay!=="cb"&&ay!=="subgrid"&&ay!=="rn"&&ax[aC].editable===true){if(ay===ac.ExpandColumn&&ac.treeGrid===true){av=h(this).text()}else{try{av=h.unformat.call(q,h(this),{rowId:p,colModel:ax[aC]},aC)}catch(aB){av=ax[aC].edittype==="textarea"?h(this).text():h(this).html()}}if(ac.autoencode){av=m.htmlDecode(av)}if(ae.checkOnSubmit===true||ae.checkOnUpdate){ae._savedData[ay]=av}ay="#"+k(ay);switch(ax[aC].edittype){case"password":case"text":case"button":case"image":case"textarea":if(av==="&nbsp;"||av==="&#160;"||(av.length===1&&av.charCodeAt(0)===160)){av=""}h(ay,aq).val(av);break;case"select":var aA=av.split(",");aA=h.map(aA,function(aE){return h.trim(aE)});h(ay+" option",aq).each(function(){var aG=this,aH=h(aG),aE=h.trim(aH.val()),aF=h.trim(aH.text());if(!ax[aC].editoptions.multiple&&(h.trim(av)===aF||aA[0]===aF||aA[0]===aE)){aG.selected=true}else{if(ax[aC].editoptions.multiple){if(h.inArray(aF,aA)>-1||h.inArray(aE,aA)>-1){aG.selected=true}else{aG.selected=false}}else{aG.selected=false}}});break;case"checkbox":av=String(av);if(ax[aC].editoptions&&ax[aC].editoptions.value){var az=ax[aC].editoptions.value.split(":");if(az[0]===av){h(ay,aq)[S]({checked:true,defaultChecked:true})}else{h(ay,aq)[S]({checked:false,defaultChecked:false})}}else{av=av.toLowerCase();if(av.search(/(false|f|0|no|n|off|undefined)/i)<0&&av!==""){h(ay,aq)[S]("checked",true);h(ay,aq)[S]("defaultChecked",true)}else{h(ay,aq)[S]("checked",false);h(ay,aq)[S]("defaultChecked",false)}}break;case"custom":try{if(ax[aC].editoptions&&h.isFunction(ax[aC].editoptions.custom_value)){ax[aC].editoptions.custom_value.call(q,h(ay,aq),"set",av)}else{throw"e1"}}catch(aD){if(aD==="e1"){g.call(q,m.errors.errcap,"function 'custom_value' "+m.edit.msg.nodefined,m.edit.bClose)}else{g.call(q,m.errors.errcap,aD.message,m.edit.bClose)}}break}ar++}});if(ar>0){h("#id_g",J).val(p)}}function t(){var p=ae.url||ac.editurl;h.each(ac.colModel,function(ap,ao){var ar=ao.name,aq=T[ar];if(ao.formatter&&ao.formatter==="date"&&(ao.formatoptions==null||ao.formatoptions.sendFormatted!==true)){T[ar]=h.unformat.date.call(q,aq,ao)}if(p!=="clientArray"&&ao.editoptions&&ao.editoptions.NullIfEmpty===true){if(T.hasOwnProperty(ar)&&aq===""){T[ar]="null"}}})}function x(){var az,ay=[true,"",""],p={},au=ac.prmNames,ax,ar,aC,av,at,ap,aB;var aw=I.triggerHandler("jqGridAddEditBeforeCheckValues",[h(P),U]);if(aw&&typeof aw==="object"){T=aw}if(h.isFunction(ae.beforeCheckValues)){aw=ae.beforeCheckValues.call(q,T,h(P),U);if(aw&&typeof aw==="object"){T=aw}}for(aC in T){if(T.hasOwnProperty(aC)){ay=m.checkValues.call(q,T[aC],aC);if(ay[0]===false){break}}}t();if(ay[0]){p=I.triggerHandler("jqGridAddEditClickSubmit",[ae,T,U]);if(p===undefined&&h.isFunction(ae.onclickSubmit)){p=ae.onclickSubmit.call(q,ae,T,U)||{}}ay=I.triggerHandler("jqGridAddEditBeforeSubmit",[T,h(P),U]);if(ay===undefined){ay=[true,"",""]}if(ay[0]&&h.isFunction(ae.beforeSubmit)){ay=ae.beforeSubmit.call(q,T,h(P),U)}}if(ay[0]&&!ae.processing){ae.processing=true;h("#sData",D).addClass("ui-state-active");ap=ae.url||ac.editurl;ar=au.oper;ax=ap==="clientArray"?ac.keyName:au.id;T[ar]=(h.trim(T[R+"_id"])==="_empty")?au.addoper:au.editoper;if(T[ar]!==au.addoper){T[ax]=T[R+"_id"]}else{if(T[ax]===undefined){T[ax]=T[R+"_id"]}}delete T[R+"_id"];T=h.extend(T,ae.editData,p);if(ac.treeGrid===true){if(T[ar]===au.addoper){av=ac.selrow;var ao=ac.treeGridModel==="adjacency"?ac.treeReader.parent_id_field:"parent_id";T[ao]=av}for(at in ac.treeReader){if(ac.treeReader.hasOwnProperty(at)){aB=ac.treeReader[at];if(T.hasOwnProperty(aB)){if(T[ar]===au.addoper&&at==="parent_id_field"){continue}delete T[aB]}}}}T[ax]=m.stripPref(ac.idPrefix,T[ax]);var aq=h.extend({url:ap,type:ae.mtype,data:m.serializeFeedback.call(q,h.isFunction(ae.serializeEditData)?ae.serializeEditData:ac.serializeEditData,"jqGridAddEditSerializeEditData",T),complete:function(aE,aG){h("#sData",D).removeClass("ui-state-active");T[ax]=ac.idPrefix+h("#id_g",J).val();if((aE.status>=300&&aE.status!==304)||(aE.status===0&&aE.readyState===4)){ay[0]=false;ay[1]=I.triggerHandler("jqGridAddEditErrorTextFormat",[aE,U]);if(h.isFunction(ae.errorTextFormat)){ay[1]=ae.errorTextFormat.call(q,aE,U)}else{ay[1]=aG+" Status: '"+aE.statusText+"'. Error code: "+aE.status}}else{ay=I.triggerHandler("jqGridAddEditAfterSubmit",[aE,T,U]);if(ay===undefined){ay=[true,"",""]}if(ay[0]&&h.isFunction(ae.afterSubmit)){ay=ae.afterSubmit.call(q,aE,T,U)}}if(ay[0]===false){h("#FormError>td",J).html(ay[1]);h("#FormError",J).show()}else{if(ac.autoencode){h.each(T,function(aI,aH){T[aI]=m.htmlDecode(aH)})}if(T[ar]===au.addoper){if(!ay[2]){ay[2]=m.randId()}if(T[ax]==null||T[ax]==="_empty"){T[ax]=ay[2]}else{ay[2]=T[ax]}if(ae.reloadAfterSubmit){I.trigger("reloadGrid")}else{if(ac.treeGrid===true){I.jqGrid("addChildNode",ay[2],av,T)}else{I.jqGrid("addRowData",ay[2],T,ae.addedrow)}}if(ae.closeAfterAdd){if(ac.treeGrid!==true){I.jqGrid("setSelection",ay[2])}a(L,{gb:s,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form})}else{if(ae.clearAfterAdd){C("_empty",P)}}}else{if(ae.reloadAfterSubmit){I.trigger("reloadGrid");if(!ae.closeAfterEdit){setTimeout(function(){I.jqGrid("setSelection",T[ax])},1000)}}else{if(ac.treeGrid===true){I.jqGrid("setTreeRow",T[ax],T)}else{I.jqGrid("setRowData",T[ax],T)}}if(ae.closeAfterEdit){a(L,{gb:s,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form})}}if(h.isFunction(ae.afterComplete)){az=aE;setTimeout(function(){I.triggerHandler("jqGridAddEditAfterComplete",[az,T,h(P),U]);ae.afterComplete.call(q,az,T,h(P),U);az=null},500)}if(ae.checkOnSubmit||ae.checkOnUpdate){h(P).data("disabled",false);if(ae._savedData[R+"_id"]!=="_empty"){var aD;for(aD in ae._savedData){if(ae._savedData.hasOwnProperty(aD)&&T[aD]){ae._savedData[aD]=T[aD]}}}}}ae.processing=false;try{h(":input:visible",P)[0].focus()}catch(aF){}}},m.ajaxOptions,ae.ajaxEditOptions);if(!aq.url&&!ae.useDataProxy){if(h.isFunction(ac.dataProxy)){ae.useDataProxy=true}else{ay[0]=false;ay[1]+=" "+m.errors.nourl}}if(ay[0]){if(ae.useDataProxy){var aA=ac.dataProxy.call(q,aq,"set_"+R);if(aA===undefined){aA=[true,""]}if(aA[0]===false){ay[0]=false;ay[1]=aA[1]||"Error deleting the selected row!"}else{if(aq.data.oper===au.addoper&&ae.closeAfterAdd){a(L,{gb:s,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form})}if(aq.data.oper===au.editoper&&ae.closeAfterEdit){a(L,{gb:s,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form})}}}else{if(aq.url==="clientArray"){ae.reloadAfterSubmit=false;T=aq.data;aq.complete({status:200,statusText:""},"")}else{h.ajax(aq)}}}}if(ay[0]===false){h("#FormError>td",J).html(ay[1]);h("#FormError",J).show()}}function X(aq,p){var ao=false,ap;for(ap in aq){if(aq.hasOwnProperty(ap)&&aq[ap]!=p[ap]){ao=true;break}}return ao}function v(){var p=true;h("#FormError",J).hide();if(ae.checkOnUpdate){T={};al();Q=X(T,ae._savedData);if(Q){h(P).data("disabled",true);h(".confirm",L).show();p=false}}return p}function aj(){var ao=m.detectRowEditing.call(q,o);if(ao!=null){if(ao.mode==="inlineEditing"){I.jqGrid("restoreRow",o)}else{var p=ao.savedRow,ap=q.rows[p.id];I.jqGrid("restoreCell",p.id,p.ic);h(ap.cells[p.ic]).removeClass("edit-cell ui-state-highlight");h(ap).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"})}}}function W(ao,p){var ap=p[1].length-1;if(ao===0){h("#pData",D).addClass("ui-state-disabled")}else{if(p[1][ao-1]!==undefined&&h("#"+k(p[1][ao-1])).hasClass("ui-state-disabled")){h("#pData",D).addClass("ui-state-disabled")}else{h("#pData",D).removeClass("ui-state-disabled")}}if(ao===ap){h("#nData",D).addClass("ui-state-disabled")}else{if(p[1][ao+1]!==undefined&&h("#"+k(p[1][ao+1])).hasClass("ui-state-disabled")){h("#nData",D).addClass("ui-state-disabled")}else{h("#nData",D).removeClass("ui-state-disabled")}}}function am(){var ao=I.jqGrid("getDataIDs"),p=h("#id_g",J).val(),ap=h.inArray(p,ao);return[ap,ao]}var F=isNaN(ae.dataheight)?ae.dataheight:ae.dataheight+"px",u=isNaN(ae.datawidth)?ae.datawidth:ae.datawidth+"px",ag=h("<form name='FormPost' id='"+ab+"' class='FormGrid' onSubmit='return false;' style='width:"+u+";overflow:auto;position:relative;height:"+F+";'></form>").data("disabled",false),O=h("<table id='"+ai+"' class='EditTable'"+(m.msie&&m.msiever()<8?" cellspacing='0'":"")+"><tbody></tbody></table>");h(ac.colModel).each(function(){var p=this.formoptions;V=Math.max(V,p?p.colpos||0:0);E=Math.max(E,p?p.rowpos||0:0)});h(ag).append(O);var Y=h("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+(V*2)+"'></td></tr>");Y[0].rp=0;h(O).append(Y);Y=h("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+(V*2)+"'>"+ae.topinfo+"</td></tr>");Y[0].rp=0;h(O).append(Y);if(!K("beforeInitData",ag,U)){return}aj();var r=ac.direction==="rtl"?true:false,af=r?"nData":"pData",ah=r?"pData":"nData";G(o,O,V);var y="<a id='"+af+"' class='fm-button ui-state-default ui-corner-left'><span class='"+j(ak,ae.prevIcon)+"'></span></a>",A="<a id='"+ah+"' class='fm-button ui-state-default ui-corner-right'><span class='"+j(ak,ae.nextIcon)+"'></span></a>",w="<a id='sData' class='fm-button ui-state-default ui-corner-all'><span class='fm-button-text'>"+ae.bSubmit+"</span></a>",H="<a id='cData' class='fm-button ui-state-default ui-corner-all'><span class='fm-button-text'>"+ae.bCancel+"</span></a>";var aa="<table"+(m.msie&&m.msiever()<8?" cellspacing='0'":"")+" class='EditTable' id='"+ai+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+ac.direction+"'>"+(r?A+y:y+A)+"</td><td class='EditButton EditButton-"+ac.direction+"'>"+w+"&#160;"+H+"</td></tr>";aa+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+ae.bottominfo+"</td></tr>";aa+="</tbody></table>";if(E>0){var N=[];h.each(h(O)[0].rows,function(p,ao){N[p]=ao});N.sort(function(ao,p){if(ao.rp>p.rp){return 1}if(ao.rp<p.rp){return -1}return 0});h.each(N,function(p,ao){h("tbody",O).append(ao)})}ae.gbox=s;var B=false;if(ae.closeOnEscape===true){ae.closeOnEscape=false;B=true}var Z=h("<div></div>").append(ag).append(aa);l.call(q,an,Z,ae,ac.gView,h(s)[0]);if(ae.topinfo){h(".tinfo",J).show()}if(ae.bottominfo){h(".binfo",D).show()}Z=null;aa=null;h(L).keydown(function(p){var ao=p.target;if(h(P).data("disabled")===true){return false}if(ae.savekey[0]===true&&p.which===ae.savekey[1]){if(ao.tagName!=="TEXTAREA"){h("#sData",D).trigger("click");return false}}if(p.which===27){if(!v()){return false}if(B){a(L,{gb:ae.gbox,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form})}return false}if(ae.navkeys[0]===true){if(h("#id_g",J).val()==="_empty"){return true}if(p.which===ae.navkeys[1]){h("#pData",D).trigger("click");return false}if(p.which===ae.navkeys[2]){h("#nData",D).trigger("click");return false}}});if(ae.checkOnUpdate){h("a.ui-jqdialog-titlebar-close span",L).removeClass("jqmClose");h("a.ui-jqdialog-titlebar-close",L).unbind("click").click(function(){if(!v()){return false}a(L,{gb:s,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form});return false})}d(h("#sData",D),ae.saveicon,ak);d(h("#cData",D),ae.closeicon,ak);if(ae.checkOnSubmit||ae.checkOnUpdate){w="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+ae.bYes+"</a>";A="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+ae.bNo+"</a>";H="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+ae.bExit+"</a>";var M=ae.zIndex||999;M++;h("<div class='"+ae.overlayClass+" jqgrid-overlay confirm' style='z-index:"+M+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(M+1)+"'>"+ae.saveData+"<br/><br/>"+w+A+H+"</div>").insertAfter(P);h("#sNew",L).click(function(){x();h(P).data("disabled",false);h(".confirm",L).hide();return false});h("#nNew",L).click(function(){h(".confirm",L).hide();h(P).data("disabled",false);setTimeout(function(){h(":input:visible",P)[0].focus()},0);return false});h("#cNew",L).click(function(){h(".confirm",L).hide();h(P).data("disabled",false);a(L,{gb:s,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form});return false})}K("onInitializeForm",h(P),U);if(o==="_empty"||!ae.viewPagerButtons){h("#pData,#nData",D).hide()}else{h("#pData,#nData",D).show()}K("beforeShowForm",h(P),U);h(L).data("onClose",ae.onClose);e(L,{gbox:s,jqm:ae.jqModal,overlay:ae.overlay,modal:ae.modal,overlayClass:ae.overlayClass,onHide:function(p){i.call(I,"formProp",P,p)}});if(!z){h("."+k(ae.overlayClass)).click(function(){if(!v()){return false}a(L,{gb:s,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form});return false})}h(".fm-button",L).hover(function(){h(this).addClass("ui-state-hover")},function(){h(this).removeClass("ui-state-hover")});h("#sData",D).click(function(){T={};h("#FormError",J).hide();al();if(T[R+"_id"]==="_empty"){x()}else{if(ae.checkOnSubmit===true){Q=X(T,ae._savedData);if(Q){h(P).data("disabled",true);h(".confirm",L).show()}else{x()}}else{x()}}return false});h("#cData",D).click(function(){if(!v()){return false}a(L,{gb:s,jqm:ae.jqModal,onClose:ae.onClose,removemodal:ae.removemodal,formprop:!ae.recreateForm,form:ae.form});return false});h("#nData",D).click(function(){if(!v()){return false}h("#FormError",J).hide();var p=am();p[0]=parseInt(p[0],10);if(p[0]!==-1&&p[1][p[0]+1]){if(!K("onclickPgButtons","next",h(P),p[1][p[0]])){return false}C(p[1][p[0]+1],P);I.jqGrid("setSelection",p[1][p[0]+1]);K("afterclickPgButtons","next",h(P),p[1][p[0]+1]);W(p[0]+1,p)}return false});h("#pData",D).click(function(){if(!v()){return false}h("#FormError",J).hide();var p=am();if(p[0]!==-1&&p[1][p[0]-1]){if(!K("onclickPgButtons","prev",h(P),p[1][p[0]])){return false}if(h("#"+k(p[1][p[0]-1])).hasClass("ui-state-disabled")){return false}C(p[1][p[0]-1],P);I.jqGrid("setSelection",p[1][p[0]-1]);K("afterclickPgButtons","prev",h(P),p[1][p[0]-1]);W(p[0]-1,p)}return false});K("afterShowForm",h(P),U);var ad=am();W(ad[0],ad)})},viewGridRow:function(o,n){return this.each(function(){var Q=this,R=h(Q),K=Q.p;if(!Q.grid||K==null||!o){return}var C=K.id,M=h.extend(true,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",navkeys:[false,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:true,recreateForm:false,removemodal:true,form:"view"},R.jqGrid("getGridRes","view"),m.view||{},K.formViewing||{},n||{});var U="#ViewGrid_"+k(C),J="#ViewTbl_"+k(C),G=J+"_2",D="ViewGrid_"+C,I="ViewTbl_"+C,E=M.commonIconClass,O={themodal:"viewmod"+C,modalhead:"viewhd"+C,modalcontent:"viewcnt"+C,resizeAlso:D},A="#"+k(O.themodal),H=K.gBox,t=1,s=0,L=function(){var p=h.makeArray(arguments);p.unshift("");p.unshift("View");p.unshift(M);return c.apply(Q,p)};if(!M.recreateForm){if(R.data("viewProp")){h.extend(M,R.data("viewProp"))}}function v(){if(M.closeOnEscape===true||M.navkeys[0]===true){setTimeout(function(){h(".ui-jqdialog-titlebar-close","#"+k(O.modalhead)).attr("tabindex","-1").focus()},0)}}function y(ad,ah,ao){var Z,ac,aj,am=0,ar,at,aq=[],ai=R.jqGrid("getInd",ad),an,ae="<td class='CaptionTD form-view-label ui-widget-content' width='"+M.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'></td>",ag="",aa="<td class='CaptionTD form-view-label ui-widget-content'></td><td class='DataTD form-view-data ui-widget-content'></td>",af=["integer","number","currency"],al=0,ak=0,ab,p,ap;for(an=1;an<=ao;an++){ag+=an===1?ae:aa}h(K.colModel).each(function(){var av=this;if(av.editrules&&av.editrules.edithidden===true){ac=false}else{ac=av.hidden===true?true:false}if(!ac&&av.align==="right"){if(av.formatter&&h.inArray(av.formatter,af)!==-1){al=Math.max(al,parseInt(av.width,10))}else{ak=Math.max(ak,parseInt(av.width,10))}}});ab=al!==0?al:ak!==0?ak:0;h(K.colModel).each(function(aw){var aC,av=this;Z=av.name;p=false;if(av.editrules&&av.editrules.edithidden===true){ac=false}else{ac=av.hidden===true?true:false}at=ac?"style='display:none'":"";ap=(typeof av.viewable!=="boolean")?true:av.viewable;if(Z!=="cb"&&Z!=="subgrid"&&Z!=="rn"&&ap){if(ai===false){ar=""}else{aC=h("td:eq("+aw+")",Q.rows[ai]);if(Z===K.ExpandColumn&&K.treeGrid===true){ar=aC.text()}else{ar=av.autoResizable&&aC.length>0&&h(aC[0].firstChild).hasClass(K.autoResizableWrapperClassName)?h(aC[0].firstChild).html():aC.html()}}p=av.align==="right"&&ab!==0?true:false;var aB=h.extend({},{rowabove:false,rowcontent:""},av.formoptions||{}),ax=parseInt(aB.rowpos,10)||am+1,aA=parseInt((parseInt(aB.colpos,10)||1)*2,10);if(aB.rowabove){var az=h("<tr><td class='contentinfo' colspan='"+(ao*2)+"'>"+aB.rowcontent+"</td></tr>");h(ah).append(az);az[0].rp=ax}aj=h(ah).find("tr[rowpos="+ax+"]");if(aj.length===0){aj=h("<tr "+at+" rowpos='"+ax+"'></tr>").addClass("FormData").attr("id","trv_"+Z);h(aj).append(ag);h(ah).append(aj);aj[0].rp=ax}var ay=(aB.label===undefined?K.colNames[aw]:aB.label);h("td:eq("+(aA-2)+")",aj[0]).html("<b>"+(ay||"&nbsp;")+"</b>");h("td:eq("+(aA-1)+")",aj[0]).html("<span>"+(ar||"&nbsp;")+"</span>").attr("id","v_"+Z);if(p){h("td:eq("+(aA-1)+") span",aj[0]).css({"text-align":"right",width:ab+"px"})}aq[am]=aw;am++}});if(am>0){var au=h("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(ao*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+ad+"'/></td></tr>");au[0].rp=am+99;h(ah).append(au)}return aq}function x(ac){var Z,ae,ab=0,aa,ad=R.jqGrid("getInd",ac,true),p;if(!ad){return}h("td",ad).each(function(af){p=K.colModel[af];Z=p.name;if(p.editrules&&p.editrules.edithidden===true){ae=false}else{ae=p.hidden===true?true:false}if(Z!=="cb"&&Z!=="subgrid"&&Z!=="rn"){if(Z===K.ExpandColumn&&K.treeGrid===true){aa=h(this).text()}else{aa=p.autoResizable&&h(this.firstChild).hasClass(K.autoResizableWrapperClassName)?h(this.firstChild).html():h(this).html()}Z=k("v_"+Z);h("#"+Z+" span",J).html(aa);if(ae){h("#"+Z,J).parents("tr:first").hide()}ab++}});if(ab>0){h("#id_g",J).val(ac)}}function z(Z,p){var aa=p[1].length-1;if(Z===0){h("#pData",G).addClass("ui-state-disabled")}else{if(p[1][Z-1]!==undefined&&h("#"+k(p[1][Z-1])).hasClass("ui-state-disabled")){h("#pData",G).addClass("ui-state-disabled")}else{h("#pData",G).removeClass("ui-state-disabled")}}if(Z===aa){h("#nData",G).addClass("ui-state-disabled")}else{if(p[1][Z+1]!==undefined&&h("#"+k(p[1][Z+1])).hasClass("ui-state-disabled")){h("#nData",G).addClass("ui-state-disabled")}else{h("#nData",G).removeClass("ui-state-disabled")}}}function u(){var Z=R.jqGrid("getDataIDs"),p=h("#id_g",J).val(),aa=h.inArray(p,Z);return[aa,Z]}var T=isNaN(M.dataheight)?M.dataheight:M.dataheight+"px",F=isNaN(M.datawidth)?M.datawidth:M.datawidth+"px",W=h("<form name='FormPost' id='"+D+"' class='FormGrid' style='width:"+F+";overflow:auto;position:relative;height:"+T+";'></form>"),w=h("<table id='"+I+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");h(K.colModel).each(function(){var p=this.formoptions;t=Math.max(t,p?p.colpos||0:0);s=Math.max(s,p?p.rowpos||0:0)});W.append(w);if(!L("beforeInitData",W)){return}y(o,w,t);var S=K.direction==="rtl"?true:false,Y=S?"nData":"pData",r=S?"pData":"nData",N="<a id='"+Y+"' class='fm-button ui-state-default ui-corner-left'><span class='fm-button-icon "+j(E,M.prevIcon)+"'></span></a>",P="<a id='"+r+"' class='fm-button ui-state-default ui-corner-right'><span class='fm-button-icon "+j(E,M.nextIcon)+"'></span></a>",X="<a id='cData' class='fm-button ui-state-default ui-corner-all'><span class='fm-button-text'>"+M.bClose+"</span></a>";if(s>0){var q=[];h.each(h(w)[0].rows,function(p,Z){q[p]=Z});q.sort(function(Z,p){if(Z.rp>p.rp){return 1}if(Z.rp<p.rp){return -1}return 0});h.each(q,function(p,Z){h("tbody",w).append(Z)})}M.gbox=H;var V=h("<div></div>").append(W).append("<table border='0' class='EditTable' id='"+I+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+K.direction+"' width='"+(M.labelswidth||"auto")+"'>"+(S?P+N:N+P)+"</td><td class='EditButton EditButton-"+K.direction+"'>"+X+"</td></tr></tbody></table>");l.call(Q,O,V,M,K.gView,h(K.gView)[0]);if(!M.viewPagerButtons){h("#pData, #nData",G).hide()}V=null;h(A).keydown(function(p){if(p.which===27){if(M.closeOnEscape){a(A,{gb:H,jqm:M.jqModal,onClose:M.onClose,removemodal:M.removemodal,formprop:!M.recreateForm,form:M.form})}return false}if(M.navkeys[0]===true){if(p.which===M.navkeys[1]){h("#pData",G).trigger("click");return false}if(p.which===M.navkeys[2]){h("#nData",G).trigger("click");return false}}});d(h("#cData",G),M.closeicon,E);L("beforeShowForm",h(U));e(A,{gbox:H,jqm:M.jqModal,overlay:M.overlay,modal:M.modal,onHide:function(p){i.call(R,"viewProp",U,p)}});h(".fm-button:not(.ui-state-disabled)",G).hover(function(){h(this).addClass("ui-state-hover")},function(){h(this).removeClass("ui-state-hover")});v();h("#cData",G).click(function(){a(A,{gb:H,jqm:M.jqModal,onClose:M.onClose,removemodal:M.removemodal,formprop:!M.recreateForm,form:M.form});return false});h("#nData",G).click(function(){h("#FormError",J).hide();var p=u();p[0]=parseInt(p[0],10);if(p[0]!==-1&&p[1][p[0]+1]){if(!L("onclickPgButtons","next",h(U),p[1][p[0]])){return false}x(p[1][p[0]+1]);R.jqGrid("setSelection",p[1][p[0]+1]);L("afterclickPgButtons","next",h(U),p[1][p[0]+1]);z(p[0]+1,p)}v();return false});h("#pData",G).click(function(){h("#FormError",J).hide();var p=u();if(p[0]!==-1&&p[1][p[0]-1]){if(!L("onclickPgButtons","prev",h(U),p[1][p[0]])){return false}x(p[1][p[0]-1]);R.jqGrid("setSelection",p[1][p[0]-1]);L("afterclickPgButtons","prev",h(U),p[1][p[0]-1]);z(p[0]-1,p)}v();return false});var B=u();z(B[0],B)})},delGridRow:function(n,o){return this.each(function(){var H=this,E=H.p,I=h(H);if(!H.grid||E==null||!n){return}var u=E.id,F=h.extend(true,{top:0,left:0,width:240,removemodal:true,height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},I.jqGrid("getGridRes","del"),m.del||{},E.formDeleting||{},o||{});var A="DelTbl_"+u,q="#DelTbl_"+k(u),D,B,v,w,G={themodal:"delmod"+u,modalhead:"delhd"+u,modalcontent:"delcnt"+u,resizeAlso:A},s="#"+k(G.themodal),z=E.gBox,x=F.commonIconClass,t=function(){var p=h.makeArray(arguments);p.unshift("");p.unshift("Delete");p.unshift(F);return c.apply(H,p)};if(!h.isArray(n)){n=[String(n)]}if(h(s)[0]!==undefined){if(!t("beforeInitData",h(q))){return}h("#DelData>td",q).text(n.join()).data("rowids",n);h("#DelError",q).hide();if(F.processing===true){F.processing=false;h("#dData",q).removeClass("ui-state-active")}t("beforeShowForm",h(q));e(s,{gbox:z,jqm:F.jqModal,jqM:false,overlay:F.overlay,modal:F.modal});t("afterShowForm",h(q))}else{var J=isNaN(F.dataheight)?F.dataheight:F.dataheight+"px",y=isNaN(F.datawidth)?F.datawidth:F.datawidth+"px",r="<div id='"+A+"' class='formdata' style='width:"+y+";overflow:auto;position:relative;height:"+J+";'>";r+="<table class='DelTable'><tbody>";r+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>";r+="<tr id='DelData' style='display:none'><td >"+n.join()+"</td></tr>";r+='<tr><td class="delmsg" style="white-space:pre;">'+F.msg+"</td></tr><tr><td >&#160;</td></tr>";r+="</tbody></table></div>";var C="<a id='dData' class='fm-button ui-state-default ui-corner-all'><span class='fm-button-text'>"+F.bSubmit+"</span></a>",K="<a id='eData' class='fm-button ui-state-default ui-corner-all'><span class='fm-button-text'>"+F.bCancel+"</span></a>";r+="<table"+(m.msie&&m.msiever()<8?" cellspacing='0'":"")+" class='EditTable' id='"+A+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+E.direction+"'>"+C+"&#160;"+K+"</td></tr></tbody></table>";F.gbox=z;l.call(H,G,r,F,E.gView,h(E.gView)[0]);h("#DelData>td",q).data("rowids",n);if(!t("beforeInitData",h(r))){return}h(".fm-button",q+"_2").hover(function(){h(this).addClass("ui-state-hover")},function(){h(this).removeClass("ui-state-hover")});d(h("#dData",q+"_2"),F.delicon,x);d(h("#eData",q+"_2"),F.cancelicon,x);h("#dData",q+"_2").click(function(){var M=[true,""],Q,R=h("#DelData>td",q),N=R.text(),P=R.data("rowids"),O={};if(h.isFunction(F.onclickSubmit)){O=F.onclickSubmit.call(H,F,N)||{}}if(h.isFunction(F.beforeSubmit)){M=F.beforeSubmit.call(H,N)}if(M[0]&&!F.processing){F.processing=true;v=E.prmNames;D=h.extend({},F.delData,O);w=v.oper;D[w]=v.deloper;B=v.id;N=P;if(!N.length){return false}for(Q in N){if(N.hasOwnProperty(Q)){N[Q]=m.stripPref(E.idPrefix,N[Q])}}D[B]=N.join();h(this).addClass("ui-state-active");var p=h.extend({url:F.url||E.editurl,type:F.mtype,data:h.isFunction(F.serializeDelData)?F.serializeDelData.call(H,D):D,complete:function(T,V){var S;h("#dData",q+"_2").removeClass("ui-state-active");if((T.status>=300&&T.status!==304)||(T.status===0&&T.readyState===4)){M[0]=false;if(h.isFunction(F.errorTextFormat)){M[1]=F.errorTextFormat.call(H,T)}else{M[1]=V+" Status: '"+T.statusText+"'. Error code: "+T.status}}else{if(h.isFunction(F.afterSubmit)){M=F.afterSubmit.call(H,T,D)}}if(M[0]===false){h("#DelError>td",q).html(M[1]);h("#DelError",q).show()}else{if(F.reloadAfterSubmit&&E.datatype!=="local"){I.trigger("reloadGrid")}else{if(E.treeGrid===true){try{I.jqGrid("delTreeNode",P[0])}catch(U){}}else{for(S=0;S<P.length;S++){I.jqGrid("delRowData",P[S])}}}setTimeout(function(){t("afterComplete",T,N,h(q))},500)}F.processing=false;if(M[0]){a(s,{gb:z,jqm:F.jqModal,onClose:F.onClose,removemodal:F.removemodal})}}},m.ajaxOptions,F.ajaxDelOptions);if(!p.url&&!F.useDataProxy){if(h.isFunction(E.dataProxy)){F.useDataProxy=true}else{M[0]=false;M[1]+=" "+m.errors.nourl}}if(M[0]){if(F.useDataProxy){var L=E.dataProxy.call(H,p,"del_"+u);if(L===undefined){L=[true,""]}if(L[0]===false){M[0]=false;M[1]=L[1]||"Error deleting the selected row!"}else{a(s,{gb:z,jqm:F.jqModal,onClose:F.onClose,removemodal:F.removemodal})}}else{if(p.url==="clientArray"){D=p.data;p.complete({status:200,statusText:""},"")}else{h.ajax(p)}}}}if(M[0]===false){h("#DelError>td",q).html(M[1]);h("#DelError",q).show()}return false});h("#eData",q+"_2").click(function(){a(s,{gb:z,jqm:F.jqModal,onClose:F.onClose,removemodal:F.removemodal});return false});t("beforeShowForm",h(q));e(s,{gbox:z,jqm:F.jqModal,overlay:F.overlay,modal:F.modal});t("afterShowForm",h(q))}if(F.closeOnEscape===true){setTimeout(function(){h(".ui-jqdialog-titlebar-close","#"+k(G.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(r,q,p,s,o,n,t){if(typeof r==="object"){t=n;n=o;o=s;s=p;p=q;q=r;r=undefined}s=s||{};p=p||{};t=t||{};o=o||{};n=n||{};return this.each(function(){var Q=this,K=Q.p,R=h(Q);if(!Q.grid||K==null||(Q.nav&&h(r).find(".navtable").length>0)){return}var J=K.id,L=h.extend({edit:true,add:true,del:true,search:true,refresh:true,refreshstate:"firstpage",view:false,closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,iconsOverText:false},R.jqGrid("getGridRes","nav"),m.nav||{},K.navOptions||{},q||{});L.position=L.position||(K.direction==="rtl"?"right":"left");var D={themodal:"alertmod_"+J,modalhead:"alerthd_"+J,modalcontent:"alertcnt_"+J},E,M,T=K.idSel,C=K.gBox,B=L.commonIconClass,w=function(){e("#"+k(D.themodal),{gbox:C,jqm:true});h("#jqg_alrt").focus()};if(!Q.grid){return}if(r===undefined){if(K.pager){r=K.pager;if(K.toppager){L.cloneToTop=true}}else{if(K.toppager){r=K.toppager}}}if(h("#"+k(D.themodal))[0]===undefined){if(!L.alerttop&&!L.alertleft){if(window.innerWidth!==undefined){L.alertleft=window.innerWidth;L.alerttop=window.innerHeight}else{if(document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0){L.alertleft=document.documentElement.clientWidth;L.alerttop=document.documentElement.clientHeight}else{L.alertleft=1024;L.alerttop=768}}L.alertleft=L.alertleft/2-parseInt(L.alertwidth,10)/2;L.alerttop=L.alerttop/2-25}l.call(Q,D,"<div>"+L.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:C,jqModal:true,drag:true,resize:true,caption:L.alertcap,top:L.alerttop,left:L.alertleft,width:L.alertwidth,height:L.alertheight,closeOnEscape:L.closeOnEscape,zIndex:L.alertzIndex,removemodal:false},K.gView,h(C)[0],false)}var S=1,P,A,u,y,U,I="<div class='ui-pg-button ui-state-disabled'><span class='ui-separator'></span></div>",v=function(){if(!h(this).hasClass("ui-state-disabled")){h(this).addClass("ui-state-hover")}},V=function(){h(this).removeClass("ui-state-hover")},O=function(){if(!h(this).hasClass("ui-state-disabled")){if(h.isFunction(L.addfunc)){L.addfunc.call(Q)}else{R.jqGrid("editGridRow","new",s)}}return false},z=function(){if(!h(this).hasClass("ui-state-disabled")){var W=K.selrow;if(W){if(h.isFunction(L.editfunc)){L.editfunc.call(Q,W)}else{R.jqGrid("editGridRow",W,p)}}else{w()}}return false},x=function(){if(!h(this).hasClass("ui-state-disabled")){var W=K.selrow;if(W){if(h.isFunction(L.viewfunc)){L.viewfunc.call(Q,W)}else{R.jqGrid("viewGridRow",W,t)}}else{w()}}return false},H=function(){var W;if(!h(this).hasClass("ui-state-disabled")){if(K.multiselect){W=K.selarrrow;if(W.length===0){W=null}}else{W=K.selrow}if(W){if(h.isFunction(L.delfunc)){L.delfunc.call(Q,W)}else{R.jqGrid("delGridRow",W,o)}}else{w()}}return false},N=function(){if(!h(this).hasClass("ui-state-disabled")){if(h.isFunction(L.searchfunc)){L.searchfunc.call(Q,n)}else{R.jqGrid("searchGrid",n)}}return false},G=function(){if(!h(this).hasClass("ui-state-disabled")){if(h.isFunction(L.beforeRefresh)){L.beforeRefresh.call(Q)}K.search=false;K.resetsearch=true;try{if(L.refreshstate!=="currentfilter"){K.postData.filters="";try{h("#fbox_"+T).jqFilter("resetFilter")}catch(W){}if(h.isFunction(Q.clearToolbar)){Q.clearToolbar(false)}}}catch(W){}switch(L.refreshstate){case"firstpage":R.trigger("reloadGrid",[h.extend({},L.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":R.trigger("reloadGrid",[h.extend({},L.reloadGridOptions||{},{current:true})]);break}if(h.isFunction(L.afterRefresh)){L.afterRefresh.call(Q)}}return false},F=function(Y,ad,ac,ab,X){var aa=h("<div class='ui-pg-button ui-corner-all'></div>"),W=L[Y+"icon"],Z=h.trim(L[Y+"text"]);aa.append("<div class='ui-pg-div'><span class='"+(L.iconsOverText?j("ui-pg-button-icon-over-text",B,W):j(B,W))+"'></span>"+(Z?"<span class='ui-pg-button-text"+(L.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+Z+"</span>":"")+"</div>");h(ab).append(aa);aa.attr({title:L[Y+"title"]||"",id:ad||Y+"_"+X}).click(ac).hover(v,V);return aa};if(L.cloneToTop&&K.toppager){S=2}for(P=0;P<S;P++){u=h("<div class='ui-pg-table navtable' style='float:left;table-layout:auto;'></div>");if(P===0){y=r;U=J;if(y===K.toppager){U+="_top";S=1}}else{y=K.toppager;U=J+"_top"}if(K.direction==="rtl"){h(u).attr("dir","rtl").css("float","right")}if(L.add){F("add",s.id,O,u,U)}if(L.edit){F("edit",p.id,z,u,U)}if(L.view){F("view",t.id,x,u,U)}if(L.del){F("del",o.id,H,u,U)}if(L.add||L.edit||L.del||L.view){h(u).append(I)}if(L.search){A=F("search",n.id,N,u,U);if(n.showOnLoad&&n.showOnLoad===true){h(A,u).click()}}if(L.refresh){F("refresh","",G,u,U)}M=h(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";h("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+M+";visibility:hidden;' ></div>");E=h(u).clone().appendTo("#testpg2").width();h("#testpg2").remove();h(y+"_"+L.position,y).append(u);if(K._nvtd){if(E>K._nvtd[0]){h(y+"_"+L.position,y).width(E);K._nvtd[0]=E}K._nvtd[1]=E}Q.nav=true}})},navButtonAdd:function(o,n){if(typeof o==="object"){n=o;o=undefined}return this.each(function(){var v=this,t=v.p;if(!v.grid){return}var u=h.extend({caption:"newButton",title:"",onClickButton:null,position:"last",cursor:"pointer",iconsOverText:false},h(v).jqGrid("getGridRes","nav"),m.nav||{},t.navOptions||{},n||{});if(o===undefined){if(t.pager){h(v).jqGrid("navButtonAdd",t.pager,u);if(t.toppager){o=t.toppager}else{return}}else{if(t.toppager){o=t.toppager}}}if(typeof o==="string"&&o.indexOf("#")!==0){o="#"+k(o)}var r=h(".navtable",o),q=u.commonIconClass;if(r.length>0){if(u.id&&r.find("#"+k(u.id)).length>0){return}var s=h("<div></div>");if(u.buttonicon.toString().toUpperCase()==="NONE"){h(s).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+(u.caption?"<span class='ui-pg-button-text"+(u.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+u.caption+"</span>":"")+"</div>")}else{h(s).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='"+(u.iconsOverText?j("ui-pg-button-icon-over-text",q,u.buttonicon):j(q,u.buttonicon))+"'></span>"+(u.caption?"<span class='ui-pg-button-text"+(u.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+u.caption+"</span>":"")+"</div>")}if(u.id){h(s).attr("id",u.id)}if(u.position==="first"&&r.children("div.ui-pg-button").length>0){r.children("div.ui-pg-button").filter(":first").before(s)}else{r.append(s)}h(s,r).attr("title",u.title||"").click(function(p){if(!h(this).hasClass("ui-state-disabled")){if(h.isFunction(u.onClickButton)){u.onClickButton.call(v,u,p)}}return false}).hover(function(){if(!h(this).hasClass("ui-state-disabled")){h(this).addClass("ui-state-hover")}},function(){h(this).removeClass("ui-state-hover")})}})},navSeparatorAdd:function(n,o){o=h.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},o||{});return this.each(function(){if(!this.grid){return}if(typeof n==="string"&&n.indexOf("#")!==0){n="#"+k(n)}var q=h(".navtable",n)[0];if(q.length>0){var p="<div class='ui-pg-button ui-state-disabled'><span class='"+o.sepclass+"'></span>"+o.sepcontent+"</div>";if(o.position==="first"){if(h(">div.ui-pg-button",q).length===0){q.append(p)}else{h(">div.ui-pg-button",q).filter(":first").before(p)}}else{q.append(p)}}})},GridToForm:function(n,o){return this.each(function(){var v=this,r,s,u,q;if(!v.grid){return}var t=h(v).jqGrid("getRowData",n),p=v.p.useProp;if(t){for(r in t){if(t.hasOwnProperty(r)){s=h("[name="+k(r)+"]",o);if(s.is("input:radio")||s.is("input:checkbox")){for(u=0;u<s.length;u++){q=h(s[u]);q[p]("checked",q.val()===String(t[r]))}}else{s.val(t[r])}}}}})},FormToGrid:function(o,p,q,n){return this.each(function(){var t=this;if(!t.grid){return}if(!q){q="set"}if(!n){n="first"}var r=h(p).serializeArray();var s={};h.each(r,function(u,v){s[v.name]=v.value});if(q==="add"){h(t).jqGrid("addRowData",o,s,n)}else{if(q==="set"){h(t).jqGrid("setRowData",o,s)}}})}})}(jQuery));(function(b){var a=b.jgrid;b.extend(a,{template:function(f){var d=b.makeArray(arguments).slice(1),c,e=d.length;if(f==null){f=""}return f.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(g,l){var j,h;if(!isNaN(parseInt(l,10))){return d[parseInt(l,10)]}for(c=0;c<e;c++){if(b.isArray(d[c])){j=d[c];h=j.length;while(h--){if(l===j[h].nm){return j[h].v}}}}})}});a.extend({groupingSetup:function(){return this.each(function(){var l=this,f,e,k,h=l.p,d=h.colModel,c=h.groupingView,g=function(){return""};if(c!==null&&((typeof c==="object")||b.isFunction(c))){if(!c.groupField.length){h.grouping=false}else{if(c.visibiltyOnNextGrouping===undefined){c.visibiltyOnNextGrouping=[]}c.lastvalues=[];if(!c._locgr){c.groups=[]}c.counters=[];for(f=0;f<c.groupField.length;f++){if(!c.groupOrder[f]){c.groupOrder[f]="asc"}if(!c.groupText[f]){c.groupText[f]="{0}"}if(typeof c.groupColumnShow[f]!=="boolean"){c.groupColumnShow[f]=true}if(typeof c.groupSummary[f]!=="boolean"){c.groupSummary[f]=false}if(!c.groupSummaryPos[f]){c.groupSummaryPos[f]="footer"}if(c.groupColumnShow[f]===true){c.visibiltyOnNextGrouping[f]=true;b(l).jqGrid("showCol",c.groupField[f])}else{c.visibiltyOnNextGrouping[f]=b("#"+a.jqID(h.id+"_"+c.groupField[f])).is(":visible");b(l).jqGrid("hideCol",c.groupField[f])}}c.summary=[];if(c.hideFirstGroupCol){c.formatDisplayField[0]=function(i){return i}}for(e=0,k=d.length;e<k;e++){if(c.hideFirstGroupCol){if(!d[e].hidden&&c.groupField[0]===d[e].name){d[e].formatter=g}}if(d[e].summaryType){if(d[e].summaryDivider){c.summary.push({nm:d[e].name,st:d[e].summaryType,v:"",sd:d[e].summaryDivider,vd:"",sr:d[e].summaryRound,srt:d[e].summaryRoundType||"round"})}else{c.summary.push({nm:d[e].name,st:d[e].summaryType,v:"",sr:d[e].summaryRound,srt:d[e].summaryRoundType||"round"})}}}}}else{h.grouping=false}})},groupingPrepare:function(c,d){this.each(function(){var p=this.p.groupingView,h=this,j,f,e,o=p.groupField.length,q,n,m,l,g=0,k=function(){if(b.isFunction(this.st)){this.v=this.st.call(h,this.v,this.nm,c)}else{this.v=b(h).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,c);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=b(h).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,c)}}};for(j=0;j<o;j++){q=p.groupField[j];m=p.displayField[j];n=c[q];l=m==null?null:c[m];if(l==null){l=n}if(n!==undefined){f={idx:j,dataIndex:q,value:n,displayValue:l,startRow:d,cnt:1,summary:[]};if(d===0){p.groups.push(f);p.lastvalues[j]=n;p.counters[j]={cnt:1,pos:p.groups.length-1,summary:b.extend(true,[],p.summary)};b.each(p.counters[j].summary,k);p.groups[p.counters[j].pos].summary=p.counters[j].summary}else{e={cnt:1,pos:p.groups.length,summary:b.extend(true,[],p.summary)};if(typeof n!=="object"&&(b.isArray(p.isInTheSameGroup)&&b.isFunction(p.isInTheSameGroup[j])?!p.isInTheSameGroup[j].call(h,p.lastvalues[j],n,j,p):p.lastvalues[j]!==n)){p.groups.push(f);p.lastvalues[j]=n;g=1;p.counters[j]=e;b.each(p.counters[j].summary,k);p.groups[p.counters[j].pos].summary=p.counters[j].summary}else{if(g===1){p.groups.push(f);p.lastvalues[j]=n;p.counters[j]=e;b.each(p.counters[j].summary,k);p.groups[p.counters[j].pos].summary=p.counters[j].summary}else{p.counters[j].cnt+=1;p.groups[p.counters[j].pos].cnt=p.counters[j].cnt;b.each(p.counters[j].summary,k);p.groups[p.counters[j].pos].summary=p.counters[j].summary}}}}}});return this},groupingToggle:function(c){this.each(function(){var v=this,l=v.p,o=a.jqID,h=l.groupingView,x=c.split("_"),g=parseInt(x[x.length-2],10);x.splice(x.length-2,2);var f=x.join("_"),d=h.minusicon,w=h.plusicon,u=b("#"+o(c)),k=u.length?u[0].nextSibling:null,i=b("#"+o(c)+" span.tree-wrap-"+l.direction),t=function(p){var r=b.map(p.split(" "),function(y){if(y.substring(0,f.length+1)===f+"_"){return parseInt(y.substring(f.length+1),10)}});return r.length>0?r[0]:undefined},s,j,e=false,m=l.frozenColumns?l.id+"_frozen":false,n=m?b("#"+o(c),"#"+o(m)):false,q=(n&&n.length)?n[0].nextSibling:null;if(i.hasClass(d)){while(k){if(b(k).hasClass("jqfoot")){s=parseInt(b(k).data("jqfootlevel"),10);if((!h.showSummaryOnHide&&s===g)||s>g){b(k).hide();if(m){b(q).hide()}}if(s<g){break}}else{s=t(k.className);if(s!==undefined&&s<=g){break}b(k).hide();if(m){b(q).hide()}}k=k.nextSibling;if(m){q=q.nextSibling}}i.removeClass(d).addClass(w);e=true}else{j=undefined;while(k){if(b(k).hasClass("jqfoot")){s=parseInt(b(k).data("jqfootlevel"),10);if(s===g||(h.showSummaryOnHide&&s===g+1)){b(k).show();if(m){b(q).show()}}if(s<=g){break}}s=t(k.className);if(j===undefined){j=s===undefined}if(s!==undefined){if(s<=g){break}if(s===g+1){b(k).show().find(">td>span.tree-wrap-"+l.direction).removeClass(d).addClass(w);if(m){b(q).show().find(">td>span.tree-wrap-"+l.direction).removeClass(d).addClass(w)}}}else{if(j){b(k).show();if(m){b(q).show()}}}k=k.nextSibling;if(m){q=q.nextSibling}}i.removeClass(w).addClass(d)}b(v).triggerHandler("jqGridGroupingClickGroup",[c,e]);if(b.isFunction(l.onClickGroup)){l.onClickGroup.call(v,c,e)}});return false},groupingRender:function(e,f,d,c){return this.each(function(){var k=this,h=k.p,u=h.groupingView,o="",q="",r,t,m=u.groupCollapse?u.plusicon:u.minusicon,g,n=[],l=u.groupField.length;m+=" tree-wrap-"+h.direction;b.each(h.colModel,function(p,x){var w;for(w=0;w<l;w++){if(u.groupField[w]===x.name){n[w]=p;break}}});var j=0;function v(y,z,p){var w=false,x;if(z===0){w=p[y]}else{var A=p[y].idx;if(A===0){w=p[y]}else{for(x=y;x>=0;x--){if(p[x].idx===A-z){w=p[x];break}}}}return w}function i(x,B,E,A){var z=v(x,B,E),C=h.colModel,D=z.cnt,G="",w,p,F,y=function(){var J,I=this;if(I.nm===C[w].name){F=C[w].summaryTpl||"{0}";if(typeof I.st==="string"&&I.st.toLowerCase()==="avg"){if(I.sd&&I.vd){I.v=(I.v/I.vd)}else{if(I.v&&D>0){I.v=(I.v/D)}}}try{I.groupCount=z.cnt;I.groupIndex=z.dataIndex;I.groupValue=z.value;J=k.formatter("",I.v,w,I)}catch(H){J=I.v}p="<td "+k.formatCol(w,1,"")+">"+a.format(F,J)+"</td>";return false}};for(w=A;w<f;w++){p="<td "+k.formatCol(w,1,"")+">&#160;</td>";b.each(z.summary,y);G+=p}return G}var s=b.makeArray(u.groupSummary);s.reverse();b.each(u.groups,function(C,y){if(u._locgr){if(!(y.startRow+y.cnt>(d-1)*c&&y.startRow<d*c)){return true}}j++;t=h.id+"ghead_"+y.idx;r=t+"_"+C;q="<span style='cursor:pointer;' class='"+u.commonIconClass+" "+m+"' onclick=\"jQuery('#"+a.jqID(h.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+r+"');return false;\"></span>";try{if(b.isArray(u.formatDisplayField)&&b.isFunction(u.formatDisplayField[y.idx])){y.displayValue=u.formatDisplayField[y.idx].call(k,y.displayValue,y.value,h.colModel[n[y.idx]],y.idx,u);g=y.displayValue}else{g=k.formatter(r,y.displayValue,n[y.idx],y.value)}}catch(I){g=y.displayValue}o+='<tr id="'+r+'"'+(u.groupCollapse&&y.idx>0?' style="display:none;" ':" ")+'role="row" class="ui-widget-content jqgroup ui-row-'+h.direction+" "+t+'"><td style="padding-left:'+(y.idx*12)+'px;"';var p=b.isFunction(u.groupText[y.idx])?u.groupText[y.idx].call(k,g,y.cnt,y.summary):a.template(u.groupText[y.idx],g,y.cnt,y.summary);if(typeof p!=="string"&&typeof p!=="number"){p=g}if(u.groupSummaryPos[y.idx]==="header"){var z=h.multiselect?' colspan="2"':"";o+=z+">"+q+p+"</td>";o+=i(C,0,u.groups,u.groupColumnShow[y.idx]===false?(z===""?2:3):((z==="")?1:2))}else{o+=' colspan="'+(u.groupColumnShow[y.idx]===false?f-1:f)+'">'+q+p+"</td>"}o+="</tr>";var E=l-1===y.idx;if(E){var F=u.groups[C+1],w,H,B=0,x=y.startRow,A=F!==undefined?F.startRow:u.groups[C].startRow+u.groups[C].cnt;if(u._locgr){B=(d-1)*c;if(B>y.startRow){x=B}}for(w=x;w<A;w++){if(!e[w-B]){break}o+=e[w-B].join("")}if(u.groupSummaryPos[y.idx]!=="header"){var D,G;if(F!==undefined){for(D=0;D<u.groupField.length;D++){if(F.dataIndex===u.groupField[D]){break}}j=u.groupField.length-D}for(H=0;H<j;H++){if(!s[H]){continue}G="";if(u.groupCollapse&&!u.showSummaryOnHide){G=' style="display:none;"'}o+="<tr"+G+' data-jqfootlevel="'+(y.idx-H)+'" role="row" class="ui-widget-content jqfoot ui-row-'+h.direction+'">';o+=i(C,H,u.groups,0);o+="</tr>"}j=D}}});b(k.tBodies[0]).append(o);o=null})},groupingGroupBy:function(d,c){return this.each(function(){var h=this,g=h.p;if(typeof d==="string"){d=[d]}var e=g.groupingView;g.grouping=true;e._locgr=false;if(e.visibiltyOnNextGrouping===undefined){e.visibiltyOnNextGrouping=[]}var f;for(f=0;f<e.groupField.length;f++){if(!e.groupColumnShow[f]&&e.visibiltyOnNextGrouping[f]){b(h).jqGrid("showCol",e.groupField[f])}}for(f=0;f<d.length;f++){e.visibiltyOnNextGrouping[f]=b(g.idSel+"_"+a.jqID(d[f])).is(":visible")}g.groupingView=b.extend(g.groupingView,c||{});e.groupField=d;b(h).trigger("reloadGrid")})},groupingRemove:function(c){return this.each(function(){var h=this,g=h.p,e=h.tBodies[0];if(c===undefined){c=true}g.grouping=false;if(c===true){var d=g.groupingView,f;for(f=0;f<d.groupField.length;f++){if(!d.groupColumnShow[f]&&d.visibiltyOnNextGrouping[f]){b(h).jqGrid("showCol",d.groupField)}}b("tr.jqgroup, tr.jqfoot",e).remove();b("tr.jqgrow:hidden",e).show()}else{b(h).trigger("reloadGrid")}})},groupingCalculations:{handler:function(g,j,h,k,i,c){var d={sum:function(){return parseFloat(j||0)+parseFloat((c[h]||0))},min:function(){if(j===""){return parseFloat(c[h]||0)}return Math.min(parseFloat(j),parseFloat(c[h]||0))},max:function(){if(j===""){return parseFloat(c[h]||0)}return Math.max(parseFloat(j),parseFloat(c[h]||0))},count:function(){if(j===""){j=0}if(c.hasOwnProperty(h)){return j+1}return 0},avg:function(){return d.sum()}};if(!d[g]){throw ("jqGrid Grouping No such method: "+g)}var f=d[g]();if(k!=null){if(i==="fixed"){f=f.toFixed(k)}else{var e=Math.pow(10,k);f=Math.round(f*e)/e}}return f}}})}(jQuery));(function(a){a.jgrid.extend({jqGridImport:function(b){b=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},b||{});return this.each(function(){var f=this;var c=function(h,m){var g=a(m.xmlGrid.config,h)[0];var l=a(m.xmlGrid.data,h)[0],n,j,i;if(xmlJsonClass.xml2json&&a.jgrid.parse){n=xmlJsonClass.xml2json(g," ");n=a.jgrid.parse(n);for(i in n){if(n.hasOwnProperty(i)){j=n[i]}}if(j!==undefined){if(l){var k=n.grid.datatype;n.grid.datatype="xmlstring";n.grid.datastr=h;a(f).jqGrid(j).jqGrid("setGridParam",{datatype:k})}else{a(f).jqGrid(j)}}}else{alert("xml2json or parse are not present")}};var e=function(i,l){if(i&&typeof i==="string"){var g=false;if(a.jgrid.useJSON){a.jgrid.useJSON=false;g=true}var h=a.jgrid.parse(i);if(g){a.jgrid.useJSON=true}var m=h[l.jsonGrid.config];var j=h[l.jsonGrid.data];if(j){var k=m.datatype;m.datatype="jsonstring";m.datastr=j;a(f).jqGrid(m).jqGrid("setGridParam",{datatype:k})}else{a(f).jqGrid(m)}}};switch(b.imptype){case"xml":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"xml",complete:function(g){if((g.status<300||g.status===304)&&(g.status!==0||g.readyState!==4)){c(g.responseXML,b);a(f).triggerHandler("jqGridImportComplete",[g,b]);if(a.isFunction(b.importComplete)){b.importComplete(g)}}}},b.ajaxOptions));break;case"xmlstring":if(b.impstring&&typeof b.impstring==="string"){var d=a.parseXML(b.impstring);if(d){c(d,b);a(f).triggerHandler("jqGridImportComplete",[d,b]);if(a.isFunction(b.importComplete)){b.importComplete(d)}b.impstring=null}}break;case"json":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"json",complete:function(g){try{if((g.status<300||g.status===304)&&(g.status!==0||g.readyState!==4)){e(g.responseText,b);a(f).triggerHandler("jqGridImportComplete",[g,b]);if(a.isFunction(b.importComplete)){b.importComplete(g)}}}catch(h){}}},b.ajaxOptions));break;case"jsonstring":if(b.impstring&&typeof b.impstring==="string"){e(b.impstring,b);a(f).triggerHandler("jqGridImportComplete",[b.impstring,b]);if(a.isFunction(b.importComplete)){b.importComplete(b.impstring)}b.impstring=null}break}})},jqGridExport:function(c){c=a.extend({exptype:"xmlstring",root:"grid",ident:"\t"},c||{});var b=null;this.each(function(){if(!this.grid){return}var d,e=a.extend(true,{},a(this).jqGrid("getGridParam"));if(e.rownumbers){e.colNames.splice(0,1);e.colModel.splice(0,1)}if(e.multiselect){e.colNames.splice(0,1);e.colModel.splice(0,1)}if(e.subGrid){e.colNames.splice(0,1);e.colModel.splice(0,1)}e.knv=null;if(e.treeGrid){for(d in e.treeReader){if(e.treeReader.hasOwnProperty(d)){e.colNames.splice(e.colNames.length-1);e.colModel.splice(e.colModel.length-1)}}}switch(c.exptype){case"xmlstring":b="<"+c.root+">"+xmlJsonClass.json2xml(e,c.ident)+"</"+c.root+">";break;case"jsonstring":b="{"+xmlJsonClass.toJson(e,c.root,c.ident,false)+"}";if(e.postData.filters!==undefined){b=b.replace(/filters":"/,'filters":');b=b.replace(/\}\]\}"/,"}]}")}break}});return b},excelExport:function(b){b=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},b||{});return this.each(function(){if(!this.grid){return}var c;if(b.exptype==="remote"){var d=a.extend({},this.p.postData);d[b.oper]=b.tag;var e=jQuery.param(d);if(b.url.indexOf("?")!==-1){c=b.url+"&"+e}else{c=b.url+"?"+e}window.location=c}})}})}(jQuery));(function(e){var b=e.jgrid,d=b.fullBoolFeedback,c=b.getMethod("getGridRes"),a=function(g){var f=e.makeArray(arguments).slice(1);f.unshift("");f.unshift("Inline");f.unshift(g);return b.feedback.apply(this,f)};b.inlineEdit=b.inlineEdit||{};b.extend({editRow:function(g,q,p,i,f,j,h,k,m,o){var l={},n=e.makeArray(arguments).slice(1);if(e.type(n[0])==="object"){l=n[0]}else{if(q!==undefined){l.keys=q}if(e.isFunction(p)){l.oneditfunc=p}if(e.isFunction(i)){l.successfunc=i}if(f!==undefined){l.url=f}if(j!==undefined){l.extraparam=j}if(e.isFunction(h)){l.aftersavefunc=h}if(e.isFunction(k)){l.errorfunc=k}if(e.isFunction(m)){l.afterrestorefunc=m}if(e.isFunction(o)){l.beforeEditRow=o}}return this.each(function(){var y=this,E=e(y),r=y.p,H,z,v=0,G=null,F={},C=r.colModel,D,x=r.prmNames;if(!y.grid){return}var s=e.extend(true,{keys:false,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,beforeEditRow:null,mtype:"POST",focusField:true},b.inlineEdit,r.inlineEditing||{},l);var u=E.jqGrid("getInd",g,true);if(u===false){return}if(s.extraparam[x.oper]!==x.addoper){if(!a.call(y,s,"beforeEditRow",s,g)){return}}var t=e(u).attr("editable")||"0";if(t==="0"&&!e(u).hasClass("not-editable-row")){var B=b.detectRowEditing.call(y,g);if(B!=null&&B.mode==="cellEditing"){var w=B.savedRow,A=y.rows[w.id];E.jqGrid("restoreCell",w.id,w.ic);e(A.cells[w.ic]).removeClass("edit-cell ui-state-highlight");e(A).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"})}e('td[role="gridcell"]',u).each(function(M){D=C[M];H=D.name;var L=r.treeGrid===true&&H===r.ExpandColumn;if(L){z=e("span:first",this).html()}else{try{z=e.unformat.call(y,this,{rowId:g,colModel:D},M)}catch(J){z=(D.edittype&&D.edittype==="textarea")?e(this).text():e(this).html()}}if(H!=="cb"&&H!=="subgrid"&&H!=="rn"){if(r.autoencode){z=b.htmlDecode(z)}F[H]=z;var I=D.editable;if(e.isFunction(I)){I=I.call(y,{rowid:g,iCol:M,iRow:u.rowIndex,name:H,cm:D,mode:e(u).hasClass("jqgrid-new-row")?"add":"edit"})}if(I===true){if(G===null){G=M}if(L){e("span:first",this).html("")}else{e(this).html("")}var K=e.extend({},D.editoptions||{},{id:g+"_"+H,name:H,rowId:g});if(!D.edittype){D.edittype="text"}if(z==="&nbsp;"||z==="&#160;"||(z.length===1&&z.charCodeAt(0)===160)){z=""}var N=b.createEl.call(y,D.edittype,K,z,true,e.extend({},b.ajaxOptions,r.ajaxSelectOptions||{}));e(N).addClass("editable");if(L){e("span:first",this).append(N)}else{e(this).append(N)}b.bindEv.call(y,N,K);if(D.edittype==="select"&&D.editoptions!==undefined&&D.editoptions.multiple===true&&D.editoptions.dataUrl===undefined&&b.msie){e(N).width(e(N).width())}v++}}});if(v>0){F.id=g;r.savedRow.push(F);e(u).attr("editable","1");if(s.focusField){if(typeof s.focusField==="number"&&parseInt(s.focusField,10)<=C.length){G=s.focusField}setTimeout(function(){var I=e("td:eq("+G+") :input:visible",u).not(":disabled");if(I.length>0){I.focus()}},0)}if(s.keys===true){e(u).bind("keydown",function(J){if(J.keyCode===27){E.jqGrid("restoreRow",g,s.afterrestorefunc);return false}if(J.keyCode===13){var I=J.target;if(I.tagName==="TEXTAREA"){return true}E.jqGrid("saveRow",g,s);return false}})}d.call(y,s.oneditfunc,"jqGridInlineEditRow",g,s)}}})},saveRow:function(t,U,m,F,g,H,n,E){var J=e.makeArray(arguments).slice(1),M={},f=this[0],u=e(f),L=f!=null?f.p:null,G;if(!f.grid||L==null){return}if(e.type(J[0])==="object"){M=J[0]}else{if(e.isFunction(U)){M.successfunc=U}if(m!==undefined){M.url=m}if(F!==undefined){M.extraparam=F}if(e.isFunction(g)){M.aftersavefunc=g}if(e.isFunction(H)){M.errorfunc=H}if(e.isFunction(n)){M.afterrestorefunc=n}if(e.isFunction(E)){M.beforeSaveRow=E}}var z=function(i){return c.call(u,i)};M=e.extend(true,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:z("defaults.savetext")||"Saving..."},b.inlineEdit,L.inlineEditing||{},M);var T,K={},Q={},y={},I,B,x,P=u.jqGrid("getInd",t,true),w=z("errors.errcap"),q=z("edit.bClose"),r=z("edit.msg");if(P===false){return}var A=L.prmNames;G=M.extraparam[A.oper]===A.addoper?"add":"edit";if(!a.call(f,M,"beforeSaveRow",M,t,G)){return}I=e(P).attr("editable");M.url=M.url||L.editurl;if(I==="1"){var C;e('td[role="gridcell"]',P).each(function(p){C=L.colModel[p];T=C.name;var o=C.editable;if(e.isFunction(o)){o=o.call(f,{rowid:t,iCol:p,iRow:P.rowIndex,name:T,cm:C,mode:e(P).hasClass("jqgrid-new-row")?"add":"edit"})}if(T!=="cb"&&T!=="subgrid"&&o===true&&T!=="rn"&&!e(this).hasClass("not-editable-cell")){switch(C.edittype){case"checkbox":var k=["Yes","No"];if(C.editoptions){k=C.editoptions.value.split(":")}K[T]=e("input",this).is(":checked")?k[0]:k[1];break;case"text":case"password":case"textarea":case"button":K[T]=e("input, textarea",this).val();break;case"select":if(!C.editoptions.multiple){K[T]=e("select option:selected",this).val();Q[T]=e("select option:selected",this).text()}else{var V=e("select",this),X=[];K[T]=e(V).val();if(K[T]){K[T]=K[T].join(",")}else{K[T]=""}e("select option:selected",this).each(function(Y,Z){X[Y]=e(Z).text()});Q[T]=X.join(",")}if(C.formatter&&C.formatter==="select"){Q={}}break;case"custom":try{if(C.editoptions&&e.isFunction(C.editoptions.custom_value)){K[T]=C.editoptions.custom_value.call(f,e(".customelement",this),"get");if(K[T]===undefined){throw"e2"}}else{throw"e1"}}catch(W){if(W==="e1"){b.info_dialog.call(f,w,"function 'custom_value' "+r.nodefined,q)}if(W==="e2"){b.info_dialog.call(f,w,"function 'custom_value' "+r.novalue,q)}else{b.info_dialog.call(f,w,W.message,q)}}break}x=b.checkValues.call(f,K[T],p);if(x[0]===false){return false}if(L.autoencode){K[T]=b.htmlEncode(K[T])}if(C.formatter&&C.formatter==="date"&&(C.formatoptions==null||C.formatoptions.sendFormatted!==true)){K[T]=e.unformat.date.call(f,K[T],C)}if(M.url!=="clientArray"&&C.editoptions&&C.editoptions.NullIfEmpty===true){if(K[T]===""){K[T]="null"}}}});if(x[0]===false){try{var S=u.jqGrid("getGridRowById",t),s=b.findPos(S);b.info_dialog.call(f,w,x[1],q,{left:s[0],top:s[1]+e(S).outerHeight()})}catch(R){alert(x[1])}return}var l,h=t;A=L.prmNames;if(L.keyName===false){l=A.id}else{l=L.keyName}if(K){K[A.oper]=A.editoper;if(K[l]===undefined||K[l]===""){K[l]=t}else{if(P.id!==L.idPrefix+K[l]){var j=b.stripPref(L.idPrefix,t);if(L._index[j]!==undefined){L._index[K[l]]=L._index[j];delete L._index[j]}t=L.idPrefix+K[l];e(P).attr("id",t);if(L.selrow===h){L.selrow=t}if(e.isArray(L.selarrrow)){var O=e.inArray(h,L.selarrrow);if(O>=0){L.selarrrow[O]=t}}if(L.multiselect){var D="jqg_"+L.id+"_"+t;e("input.cbox",P).attr("id",D).attr("name",D)}}}if(L.inlineData===undefined){L.inlineData={}}K=e.extend({},K,L.inlineData,M.extraparam)}if(M.url==="clientArray"){K=e.extend({},K,Q);if(L.autoencode){e.each(K,function(k,i){K[k]=b.htmlDecode(i)})}var N,v=u.jqGrid("setRowData",t,K);e(P).attr("editable","0");for(N=0;N<L.savedRow.length;N++){if(String(L.savedRow[N].id)===String(h)){B=N;break}}if(B>=0){L.savedRow.splice(B,1)}d.call(f,M.aftersavefunc,"jqGridInlineAfterSaveRow",t,v,K,M);e(P).removeClass("jqgrid-new-row").unbind("keydown")}else{u.jqGrid("progressBar",{method:"show",loadtype:M.saveui,htmlcontent:M.savetext});y=e.extend({},K,y);y[l]=b.stripPref(L.idPrefix,y[l]);e.ajax(e.extend({url:M.url,data:b.serializeFeedback.call(f,e.isFunction(M.serializeSaveData)?M.serializeSaveData:L.serializeRowData,"jqGridInlineSerializeSaveData",y),type:M.mtype,complete:function(o,V){u.jqGrid("progressBar",{method:"hide",loadtype:M.saveui,htmlcontent:M.savetext});if((o.status<300||o.status===304)&&(o.status!==0||o.readyState!==4)){var k,p,i;p=u.triggerHandler("jqGridInlineSuccessSaveRow",[o,t,M]);if(!e.isArray(p)){p=[true,K]}if(p[0]&&e.isFunction(M.successfunc)){p=M.successfunc.call(f,o)}if(e.isArray(p)){k=p[0];K=p[1]||K}else{k=p}if(k===true){if(L.autoencode){e.each(K,function(X,W){K[X]=b.htmlDecode(W)})}K=e.extend({},K,Q);u.jqGrid("setRowData",t,K);e(P).attr("editable","0");for(i=0;i<L.savedRow.length;i++){if(String(L.savedRow[i].id)===String(t)){B=i;break}}if(B>=0){L.savedRow.splice(B,1)}d.call(f,M.aftersavefunc,"jqGridInlineAfterSaveRow",t,o,K,M);e(P).removeClass("jqgrid-new-row").unbind("keydown")}else{d.call(f,M.errorfunc,"jqGridInlineErrorSaveRow",t,o,V,null,M);if(M.restoreAfterError===true){u.jqGrid("restoreRow",t,M.afterrestorefunc)}}}},error:function(k,o,p){e("#lui_"+b.jqID(L.id)).hide();u.triggerHandler("jqGridInlineErrorSaveRow",[t,k,o,p,M]);if(e.isFunction(M.errorfunc)){M.errorfunc.call(f,t,k,o,p)}else{var i=k.responseText||k.statusText;try{b.info_dialog.call(f,w,'<div class="ui-state-error">'+i+"</div>",q,{buttonalign:"right"})}catch(V){alert(i)}}if(M.restoreAfterError===true){u.jqGrid("restoreRow",t,M.afterrestorefunc)}}},b.ajaxOptions,L.ajaxRowOptions,M.ajaxSaveOptions||{}))}}return},restoreRow:function(i,f){var g=e.makeArray(arguments).slice(1),h={};if(e.type(g[0])==="object"){h=g[0]}else{if(e.isFunction(f)){h.afterrestorefunc=f}}return this.each(function(){var r=this,u=e(r),j=r.p,s=-1,n={},q;if(!r.grid){return}var l=e.extend(true,{},b.inlineEdit,j.inlineEditing||{},h);var m=u.jqGrid("getInd",i,true);if(m===false){return}if(!a.call(r,l,"beforeCancelRow",l,i)){return}for(q=0;q<j.savedRow.length;q++){if(String(j.savedRow[q].id)===String(i)){s=q;break}}if(s>=0){if(e.isFunction(e.fn.datepicker)){try{e("input.hasDatepicker","#"+b.jqID(m.id)).datepicker("hide")}catch(t){}}e.each(j.colModel,function(p){var o=this.editable,k=this.name;if(e.isFunction(o)){o=o.call(r,{rowid:i,iCol:p,iRow:m.rowIndex,name:k,cm:this,mode:e(m).hasClass("jqgrid-new-row")?"add":"edit"})}if(o===true&&j.savedRow[s].hasOwnProperty(k)){n[k]=j.savedRow[s][k];if(this.formatter&&this.formatter==="date"&&(this.formatoptions==null||this.formatoptions.sendFormatted!==true)){n[k]=e.unformat.date.call(r,n[k],this)}}});u.jqGrid("setRowData",i,n);e(m).attr("editable","0").unbind("keydown");j.savedRow.splice(s,1);if(e("#"+b.jqID(i),r).hasClass("jqgrid-new-row")){setTimeout(function(){u.jqGrid("delRowData",i);u.jqGrid("showAddEditButtons",false)},0)}}d.call(r,l.afterrestorefunc,"jqGridInlineAfterRestoreRow",i)})},addRow:function(f){return this.each(function(){if(!this.grid){return}var l=this,j=e(l),h=l.p,i=e.extend(true,{rowID:null,initdata:{},position:"first",useDefValues:true,useFormatter:false,beforeAddRow:null,addRowParams:{extraparam:{}}},b.inlineEdit,h.inlineEditing||{},f||{});if(!a.call(l,i,"beforeAddRow",i.addRowParams)){return}i.rowID=e.isFunction(i.rowID)?i.rowID.call(l,i):((i.rowID!=null)?i.rowID:b.randId());if(i.useDefValues===true){e(h.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var n=this.editoptions.defaultValue,m=e.isFunction(n)?n.call(l):n;i.initdata[this.name]=m}})}j.jqGrid("addRowData",i.rowID,i.initdata,i.position);i.rowID=h.idPrefix+i.rowID;e("#"+b.jqID(i.rowID),l).addClass("jqgrid-new-row");if(i.useFormatter){e("#"+b.jqID(i.rowID)+" .ui-inline-edit",l).click()}else{var g=h.prmNames,k=g.oper;i.addRowParams.extraparam[k]=g.addoper;j.jqGrid("editRow",i.rowID,i.addRowParams);j.jqGrid("setSelection",i.rowID)}})},inlineNav:function(g,f){if(typeof g==="object"){f=g;g=undefined}return this.each(function(){var r=this,t=e(r),j=r.p;if(!this.grid||j==null){return}var k,h=g===j.toppager?j.idSel+"_top":j.idSel,s=g===j.toppager?j.id+"_top":j.id,l=e.extend(true,{edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",save:true,saveicon:"ui-icon-disk",cancel:true,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:false,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:true},t.jqGrid("getGridRes","nav"),b.nav||{},j.navOptions||{},f||{});if(g===undefined){if(j.pager){t.jqGrid("inlineNav",j.pager,l);if(j.toppager){g=j.toppager;h=j.idSel+"_top";s=j.id+"_top"}else{return}}else{if(j.toppager){g=j.toppager;h=j.idSel+"_top";s=j.id+"_top"}}}if(g===undefined){return}k=e(g);if(k.length<=0){return}if(k.find(".navtable").length<=0){t.jqGrid("navGrid",g,{add:false,edit:false,del:false,search:false,refresh:false,view:false})}j._inlinenav=true;if(l.addParams.useFormatter===true){var u=j.colModel,q,m,n;for(q=0;q<u.length;q++){if(u[q].formatter&&u[q].formatter==="actions"){if(u[q].formatoptions){m={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null};n=e.extend(m,u[q].formatoptions);l.addParams.addRowParams={keys:n.keys,oneditfunc:n.onEdit,successfunc:n.onSuccess,url:n.url,extraparam:n.extraparam,aftersavefunc:n.afterSave,errorfunc:n.onError,afterrestorefunc:n.afterRestore}}break}}}if(l.add){t.jqGrid("navButtonAdd",g,{caption:l.addtext,title:l.addtitle,commonIconClass:l.commonIconClass,buttonicon:l.addicon,iconsOverText:l.iconsOverText,id:s+"_iladd",onClickButton:function(){t.jqGrid("addRow",l.addParams)}})}if(l.edit){t.jqGrid("navButtonAdd",g,{caption:l.edittext,title:l.edittitle,commonIconClass:l.commonIconClass,buttonicon:l.editicon,iconsOverText:l.iconsOverText,id:s+"_iledit",onClickButton:function(){var i=j.selrow;if(i){t.jqGrid("editRow",i,l.editParams)}else{b.viewModal("#alertmod",{gbox:j.gBox,jqm:true});e("#jqg_alrt").focus()}}})}if(l.save){t.jqGrid("navButtonAdd",g,{caption:l.savetext||"",title:l.savetitle||"Save row",commonIconClass:l.commonIconClass,buttonicon:l.saveicon,iconsOverText:l.iconsOverText,id:s+"_ilsave",onClickButton:function(){var o=j.savedRow[0].id;if(o){var i=j.prmNames,v=i.oper,p=l.editParams;if(e("#"+b.jqID(o),r).hasClass("jqgrid-new-row")){l.addParams.addRowParams.extraparam[v]=i.addoper;p=l.addParams.addRowParams}else{if(!l.editParams.extraparam){l.editParams.extraparam={}}l.editParams.extraparam[v]=i.editoper}t.jqGrid("saveRow",o,p)}else{b.viewModal("#alertmod",{gbox:j.gBox,jqm:true});e("#jqg_alrt").focus()}}});e(h+"_ilsave").addClass("ui-state-disabled")}if(l.cancel){t.jqGrid("navButtonAdd",g,{caption:l.canceltext||"",title:l.canceltitle||"Cancel row editing",commonIconClass:l.commonIconClass,buttonicon:l.cancelicon,iconsOverText:l.iconsOverText,id:s+"_ilcancel",onClickButton:function(){var o=j.savedRow[0].id,i=l.editParams;if(o){if(e("#"+b.jqID(o),r).hasClass("jqgrid-new-row")){i=l.addParams.addRowParams}t.jqGrid("restoreRow",o,i)}else{b.viewModal("#alertmod",{gbox:j.gBox,jqm:true});e("#jqg_alrt").focus()}}});e(h+"_ilcancel").addClass("ui-state-disabled")}if(l.restoreAfterSelect===true){t.bind("jqGridSelectRow",function(p,o){if(j.savedRow.length>0&&j._inlinenav===true){var i=j.savedRow[0].id;if(o!==i){t.jqGrid("restoreRow",i,l.editParams)}}})}t.bind("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){t.jqGrid("showAddEditButtons",false)});t.bind("jqGridInlineEditRow",function(o,i){t.jqGrid("showAddEditButtons",true,i)})})},showAddEditButtons:function(f,g){return this.each(function(){var l=this;if(!l.grid){return}var i=l.p,h=i.idSel,k=h+"_ilsave,"+h+"_ilcancel"+(i.toppager?","+h+"_top_ilsave,"+h+"_top_ilcancel":""),j=h+"_iladd,"+h+"_iledit"+(i.toppager?","+h+"_top_iladd,"+h+"_top_iledit":"");e(f?j:k).addClass("ui-state-disabled");e(f?k:j).removeClass("ui-state-disabled")})}})}(jQuery));(function(e){var c=e.jgrid,b=e.ui!=null?e.ui.multiselect:null,a=c.jqID;if(c.msie&&c.msiever()===8){e.expr[":"].hidden=function(f){return f.offsetWidth===0||f.offsetHeight===0||f.style.display==="none"}}c._multiselect=false;if(e.ui){if(b){if(b.prototype._setSelected){var d=b.prototype._setSelected;b.prototype._setSelected=function(j,i){var f=this,h=d.call(f,j,i);if(i&&f.selectedList){var g=f.element;f.selectedList.find("li").each(function(){if(e(f).data("optionLink")){e(f).data("optionLink").remove().appendTo(g)}})}return h}}if(b.prototype.destroy){b.prototype.destroy=function(){var f=this;f.element.show();f.container.remove();if(e.Widget===undefined){e.widget.prototype.destroy.apply(f,arguments)}else{e.Widget.prototype.destroy.apply(f,arguments)}}}c._multiselect=true}}c.extend({sortableColumns:function(f){return this.each(function(){var k=this,m=k.p,l=a(m.id);function n(){m.disableClick=true}var j={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+l+"_cb,#jqgh_"+l+"_rn,#jqgh_"+l+"_subgrid),:hidden)",placeholder:{element:function(p){var o=e(document.createElement(p[0].nodeName)).addClass(p[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return o},update:function(p,q){q.height(p.currentItem.innerHeight()-parseInt(p.currentItem.css("paddingTop")||0,10)-parseInt(p.currentItem.css("paddingBottom")||0,10));q.width(p.currentItem.innerWidth()-parseInt(p.currentItem.css("paddingLeft")||0,10)-parseInt(p.currentItem.css("paddingRight")||0,10))}},update:function(r,t){var q=e(">th",e(t.item).parent()),o=m.colModel,s={},u=m.id+"_",p=[];e.each(o,function(v){s[this.name]=v});q.each(function(){var v=e(">div",this).get(0).id.replace(/^jqgh_/,"").replace(u,"");if(s.hasOwnProperty(v)){p.push(s[v])}});e(k).jqGrid("remapColumns",p,true,true);if(e.isFunction(m.sortable.update)){m.sortable.update(p)}setTimeout(function(){m.disableClick=false},50)}};if(m.sortable.options){e.extend(j,m.sortable.options)}else{if(e.isFunction(m.sortable)){m.sortable={update:m.sortable}}}if(j.start){var i=j.start;j.start=function(p,o){n();i.call(this,p,o)}}else{j.start=n}if(m.sortable.exclude){j.items+=":not("+m.sortable.exclude+")"}var h=f.sortable(j),g=h.data("sortable")||h.data("uiSortable")||h.data("ui-sortable");if(g!=null){g.floating=true}})},columnChooser:function(l){var u=this,m=u[0],n=m.p,s,o,x={},k=[],h,t,i,r,q,j=n.colModel,v=n.colNames,g=function(p){return(b&&b.prototype&&p.data(b.prototype.widgetFullName||b.prototype.widgetName))||p.data("ui-multiselect")||p.data("multiselect")};if(e("#colchooser_"+a(n.id)).length){return}s=e('<div id="colchooser_'+n.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');o=e("select",s);function f(B,A,z){var y,p;if(A>=0){y=B.slice();p=y.splice(A,Math.max(B.length-A,A));if(A>B.length){A=B.length}y[A]=z;return y.concat(p)}return B}function w(p,y){if(!p){return}if(typeof p==="string"){if(e.fn[p]){e.fn[p].apply(y,e.makeArray(arguments).slice(2))}}else{if(e.isFunction(p)){p.apply(y,e.makeArray(arguments).slice(2))}}}l=e.extend({width:400,height:240,classname:null,done:function(p){if(p){u.jqGrid("remapColumns",p,true)}},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(p){var y={};y[p.bSubmit]=function(){p.apply_perm();p.cleanup(false)};y[p.bCancel]=function(){p.cleanup(true)};return e.extend(true,{buttons:y,close:function(){p.cleanup(true)},modal:p.modal||false,resizable:p.resizable||true,width:p.width+70,resize:function(){var A=g(o),z=A.container.closest(".ui-dialog-content");if(z.length>0&&typeof z[0].style==="object"){z[0].style.width=""}else{z.css("width","")}A.selectedList.height(Math.max(A.selectedContainer.height()-A.selectedActions.outerHeight()-1,1));A.availableList.height(Math.max(A.availableContainer.height()-A.availableActions.outerHeight()-1,1))}},p.dialog_opts||{})},apply_perm:function(){var p=[];e("option",o).each(function(){if(e(this).is("[selected]")){u.jqGrid("showCol",j[this.value].name)}else{u.jqGrid("hideCol",j[this.value].name)}});e("option[selected]",o).each(function(){p.push(parseInt(this.value,10))});e.each(p,function(){delete x[j[parseInt(this,10)].name]});e.each(x,function(){var y=parseInt(this,10);p=f(p,y,y)});if(l.done){l.done.call(u,p)}u.jqGrid("setGridWidth",n.tblwidth,n.shrinkToFit)},cleanup:function(p){w(l.dlog,s,"destroy");w(l.msel,o,"destroy");s.remove();if(p&&l.done){l.done.call(u)}},msel_opts:{}},u.jqGrid("getGridRes","col"),c.col,l||{});if(e.ui){if(b&&b.defaults){if(!c._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}l.msel_opts=e.extend(b.defaults,l.msel_opts)}}if(l.caption){s.attr("title",l.caption)}if(l.classname){s.addClass(l.classname);o.addClass(l.classname)}if(l.width){e(">div",s).css({width:l.width,margin:"0 auto"});o.css("width",l.width)}if(l.height){e(">div",s).css("height",l.height);o.css("height",l.height-10)}o.empty();e.each(j,function(p){x[this.name]=p;if(this.hidedlg){if(!this.hidden){k.push(p)}return}o.append("<option value='"+p+"' "+(this.hidden?"":"selected='selected'")+">"+c.stripHtml(v[p])+"</option>")});h=e.isFunction(l.dlog_opts)?l.dlog_opts.call(u,l):l.dlog_opts;w(l.dlog,s,h);t=e.isFunction(l.msel_opts)?l.msel_opts.call(u,l):l.msel_opts;w(l.msel,o,t);i=e("#colchooser_"+a(n.id));i.css({margin:"auto"});i.find(">div").css({width:"100%",height:"100%",margin:"auto"});r=g(o);if(r){r.container.css({width:"100%",height:"100%",margin:"auto"});r.selectedContainer.css({width:r.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});r.availableContainer.css({width:(100-r.options.dividerLocation*100)+"%",height:"100%",margin:"auto",boxSizing:"border-box"});r.selectedList.css("height","auto");r.availableList.css("height","auto");q=Math.max(r.selectedList.height(),r.availableList.height());q=Math.min(q,e(window).height());r.selectedList.css("height",q);r.availableList.css("height",q)}},sortableRows:function(f){return this.each(function(){var i=this,g=i.grid,h=i.p;if(!g){return}if(h.treeGrid){return}if(e.fn.sortable){f=e.extend({cursor:"move",axis:"y",items:">.jqgrow"},f||{});if(f.start&&e.isFunction(f.start)){f._start_=f.start;delete f.start}else{f._start_=false}if(f.update&&e.isFunction(f.update)){f._update_=f.update;delete f.update}else{f._update_=false}f.start=function(k,l){e(l.item).css("border-width","0");e("td",l.item).each(function(n){this.style.width=g.cols[n].style.width});if(h.subGrid){var j=e(l.item).attr("id");try{e(i).jqGrid("collapseSubGridRow",j)}catch(m){}}if(f._start_){f._start_.apply(this,[k,l])}};f.update=function(j,k){e(k.item).css("border-width","");if(h.rownumbers===true){e("td.jqgrid-rownum",i.rows).each(function(l){e(this).html(l+1+(parseInt(h.page,10)-1)*parseInt(h.rowNum,10))})}if(f._update_){f._update_.apply(this,[j,k])}};e("tbody:first",i).sortable(f);if(e.isFunction(e.fn.disableSelection)){e("tbody:first>.jqgrow",i).disableSelection()}}})},gridDnD:function(f){return this.each(function(){var l=this,h,k;if(!l.grid){return}if(l.p.treeGrid){return}if(!e.fn.draggable||!e.fn.droppable){return}function i(){var j=e.data(l,"dnd");e("tr.jqgrow:not(.ui-draggable)",l).draggable(e.isFunction(j.drag)?j.drag.call(e(l),j):j.drag)}var g="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(e("#jqgrid_dnd")[0]===undefined){e("body").append(g)}if(typeof f==="string"&&f==="updateDnD"&&l.p.jqgdnd===true){i();return}f=e.extend({drag:function(j){return e.extend({start:function(o,p){var n,m;if(l.p.subGrid){m=e(p.helper).attr("id");try{e(l).jqGrid("collapseSubGridRow",m)}catch(q){}}for(n=0;n<e.data(l,"dnd").connectWith.length;n++){if(e(e.data(l,"dnd").connectWith[n]).jqGrid("getGridParam","reccount")===0){e(e.data(l,"dnd").connectWith[n]).jqGrid("addRowData","jqg_empty_row",{})}}p.helper.addClass("ui-state-highlight");e("td",p.helper).each(function(r){this.style.width=l.grid.headers[r].width+"px"});if(j.onstart&&e.isFunction(j.onstart)){j.onstart.call(e(l),o,p)}},stop:function(o,p){var m,n;if(p.helper.dropped&&!j.dragcopy){n=e(p.helper).attr("id");if(n===undefined){n=e(this).attr("id")}e(l).jqGrid("delRowData",n)}for(m=0;m<e.data(l,"dnd").connectWith.length;m++){e(e.data(l,"dnd").connectWith[m]).jqGrid("delRowData","jqg_empty_row")}if(j.onstop&&e.isFunction(j.onstop)){j.onstop.call(e(l),o,p)}}},j.drag_opts||{})},drop:function(j){return e.extend({accept:function(o){if(!e(o).hasClass("jqgrow")){return o}var n=e(o).closest("table.ui-jqgrid-btable");if(n.length>0&&e.data(n[0],"dnd")!==undefined){var m=e.data(n[0],"dnd").connectWith;return e.inArray("#"+a(this.id),m)!==-1?true:false}return false},drop:function(u,t){if(!e(t.draggable).hasClass("jqgrow")){return}var q=e(t.draggable).attr("id");var o=t.draggable.parent().parent().jqGrid("getRowData",q);if(!j.dropbyname){var r=0,n={},x,w;var v=e("#"+a(this.id)).jqGrid("getGridParam","colModel");try{for(w in o){if(o.hasOwnProperty(w)){x=v[r].name;if(!(x==="cb"||x==="rn"||x==="subgrid")){if(o.hasOwnProperty(w)&&v[r]){n[x]=o[w]}}r++}}o=n}catch(s){}}t.helper.dropped=true;if(j.beforedrop&&e.isFunction(j.beforedrop)){var p=j.beforedrop.call(this,u,t,o,e("#"+a(l.p.id)),e(this));if(p!==undefined&&p!==null&&typeof p==="object"){o=p}}if(t.helper.dropped){var m;if(j.autoid){if(e.isFunction(j.autoid)){m=j.autoid.call(this,o)}else{m=Math.ceil(Math.random()*1000);m=j.autoidprefix+m}}e("#"+a(this.id)).jqGrid("addRowData",m,o,j.droppos)}if(j.ondrop&&e.isFunction(j.ondrop)){j.ondrop.call(this,u,t,o)}}},j.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},f||{});if(!f.connectWith){return}f.connectWith=f.connectWith.split(",");f.connectWith=e.map(f.connectWith,function(j){return e.trim(j)});e.data(l,"dnd",f);if(l.p.reccount!==0&&!l.p.jqgdnd){i()}l.p.jqgdnd=true;for(h=0;h<f.connectWith.length;h++){k=f.connectWith[h];e(k).droppable(e.isFunction(f.drop)?f.drop.call(e(l),f):f.drop)}})},gridResize:function(f){return this.each(function(){var n=this,i=n.grid,m=n.p,j=m.gView+">.ui-jqgrid-bdiv",h=false,l,k=m.height;if(!i||!e.fn.resizable){return}f=e.extend({},f||{});if(f.alsoResize){f._alsoResize_=f.alsoResize;delete f.alsoResize}else{f._alsoResize_=false}if(f.stop&&e.isFunction(f.stop)){f._stop_=f.stop;delete f.stop}else{f._stop_=false}f.stop=function(o,p){e(n).jqGrid("setGridWidth",p.size.width,f.shrinkToFit);e(m.gView+">.ui-jqgrid-titlebar").css("width","");if(!h){e(n).jqGrid("setGridParam",{height:e(j).height()})}else{e(l).each(function(){e(this).css("height","")});if(k==="auto"||k==="100%"){e(i.bDiv).css("height",k)}}if(n.fixScrollOffsetAndhBoxPadding){n.fixScrollOffsetAndhBoxPadding()}if(f._stop_){f._stop_.call(n,o,p)}};l=j;if((k==="auto"||k==="100%")&&f.handles===undefined){f.handles="e,w"}if(f.handles){var g=e.map(String(f.handles).split(","),function(o){return e.trim(o)});if(g.length===2&&((g[0]==="e"&&g[1]==="w")||(g[1]==="e"&&g[1]==="w"))){l=m.gView+">div:not(.frozen-div)";h=true;if(m.pager){l+=","+m.pager}}}if(f._alsoResize_){f.alsoResize=l+","+f._alsoResize_}else{f.alsoResize=l}delete f._alsoResize_;e(m.gBox).resizable(f)})}})}(jQuery));(function(c){var a=c.jgrid,b=function(g,f){var e,j,d=[];if(typeof g!=="function"||(g instanceof RegExp)){throw new TypeError()}var h=this.length;for(e=0;e<h;e++){if(this.hasOwnProperty(e)){j=this[e];if(g.call(f,j,e,this)){d.push(j);break}}}return d};c.assocArraySize=function(f){var e=0,d;for(d in f){if(f.hasOwnProperty(d)){e++}}return e};a.extend({pivotSetup:function(i,m){var g=[],k=[],l=[],h=[],j=[],d={grouping:true,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},f=[],e=c.extend({rowTotals:false,rowTotalsText:"Total",colTotals:false,groupSummary:true,groupSummaryPos:"header",frozenStaticCols:false},m||{});this.each(function(){var v,t,L,S=i.length,F,M,G,Q,w,B=0;function D(U,T,r){var V;V=b.call(U,T,r);return V.length>0?V[0]:null}var u=function(W,V){var U=0,T=true,r;for(r in W){if(W.hasOwnProperty(r)){if(W[r]!=this[U]){T=false;break}U++;if(U>=this.length){break}}}if(T){t=V}return T};function z(W,r,V,U){var T;switch(W){case"sum":T=parseFloat(r||0)+parseFloat((U[V]||0));break;case"count":if(r===""||r==null){r=0}if(U.hasOwnProperty(V)){T=r+1}else{T=0}break;case"min":if(r===""||r==null){T=parseFloat(U[V]||0)}else{T=Math.min(parseFloat(r),parseFloat(U[V]||0))}break;case"max":if(r===""||r==null){T=parseFloat(U[V]||0)}else{T=Math.max(parseFloat(r),parseFloat(U[V]||0))}break}return T}function R(ae,W,ac,af){var U=W.length,r,ab,X,ad,V="",Y=[],aa,T;if(c.isArray(ac)){ad=ac.length;Y=ac}else{ad=1;Y[0]=ac}h=[];j=[];h.root=0;for(X=0;X<ad;X++){aa=[];for(r=0;r<U;r++){if(ac==null){ab=c.trim(W[r].member)+"_"+W[r].aggregator;T=ab;Y[X]=T}else{T=ac[X].replace(/\s+/g,"");try{ab=(U===1?V+T:V+T+"_"+W[r].aggregator+"_"+String(r))}catch(Z){}}ab=!isNaN(parseInt(ab,10))?ab+" ":ab;af[ab]=aa[ab]=z(W[r].aggregator,af[ab],W[r].member,ae);if(X<=1&&T!=="_r_Totals"&&V===""){V=T}}h[ab]=aa;j[ab]=Y[X]}return af}if(e.rowTotals&&e.yDimension.length>0){var I=e.yDimension[0].dataName;e.yDimension.splice(0,0,{dataName:I});e.yDimension[0].converter=function(){return"_r_Totals"}}F=c.isArray(e.xDimension)?e.xDimension.length:0;M=e.yDimension.length;G=c.isArray(e.aggregates)?e.aggregates.length:0;if(F===0||G===0){throw ("xDimension or aggregates optiona are not set!")}var N;for(L=0;L<F;L++){N={name:e.xDimension[L].dataName,frozen:e.frozenStaticCols};if(e.xDimension[L].isGroupField==null){e.xDimension[L].isGroupField=true}N=c.extend(true,N,e.xDimension[L]);g.push(N)}var J=F-1,A={},H,O,K,s,E,C,q;while(B<S){v=i[B];H=[];O=[];Q={};L=0;do{H[L]=c.trim(v[e.xDimension[L].dataName]);Q[e.xDimension[L].dataName]=H[L];L++}while(L<F);K=0;t=-1;w=D(k,u,H);if(!w){K=0;if(M>=1){for(K=0;K<M;K++){O[K]=c.trim(v[e.yDimension[K].dataName]);if(e.yDimension[K].converter&&c.isFunction(e.yDimension[K].converter)){O[K]=e.yDimension[K].converter.call(this,O[K],H,O)}}Q=R(v,e.aggregates,O,Q)}else{if(M===0){Q=R(v,e.aggregates,null,Q)}}k.push(Q)}else{if(t>=0){K=0;if(M>=1){for(K=0;K<M;K++){O[K]=c.trim(v[e.yDimension[K].dataName]);if(e.yDimension[K].converter&&c.isFunction(e.yDimension[K].converter)){O[K]=e.yDimension[K].converter.call(this,O[K],H,O)}}w=R(v,e.aggregates,O,w)}else{if(M===0){w=R(v,e.aggregates,null,w)}}k[t]=w}}s=0;E=null;C=null;for(q in h){if(h.hasOwnProperty(q)){if(s===0){if(!A.children||A.children===undefined){A={text:q,level:0,children:[],label:q}}E=A.children}else{C=null;for(L=0;L<E.length;L++){if(E[L].text===q){C=E[L];break}}if(C){E=C.children}else{E.push({children:[],text:q,level:s,fields:h[q],label:j[q]});E=E[E.length-1].children}}s++}}B++}var p=[],n=g.length,y=n;if(M>0){f[M-1]={useColSpanStyle:false,groupHeaders:[]}}function P(Z){var X,Y,ab,T,U,r,W,V,aa;for(ab in Z){if(Z.hasOwnProperty(ab)){if(typeof Z[ab]!=="object"){if(ab==="level"){if(p[Z.level]===undefined){p[Z.level]="";if(Z.level>0&&Z.text!=="_r_Totals"){f[Z.level-1]={useColSpanStyle:false,groupHeaders:[]}}}if(p[Z.level]!==Z.text&&Z.children.length&&Z.text!=="_r_Totals"){if(Z.level>0){f[Z.level-1].groupHeaders.push({titleText:Z.label,numberOfColumns:0});r=f[Z.level-1].groupHeaders.length-1;W=r===0?y:n+G;if(Z.level-1===(e.rowTotals?1:0)){if(r>0){V=f[Z.level-1].groupHeaders[r-1].numberOfColumns;if(V){W=V+1+e.aggregates.length}}}f[Z.level-1].groupHeaders[r].startColumnName=g[W].name;f[Z.level-1].groupHeaders[r].numberOfColumns=g.length-W;n=g.length}}p[Z.level]=Z.text}if(Z.level===M&&ab==="level"&&M>0){if(G>1){aa=1;for(X in Z.fields){if(Z.fields.hasOwnProperty(X)){if(aa===1){f[M-1].groupHeaders.push({startColumnName:X,numberOfColumns:1,titleText:Z.label})}aa++}}f[M-1].groupHeaders[f[M-1].groupHeaders.length-1].numberOfColumns=aa-1}else{f.splice(M-1,1)}}}if(Z[ab]!=null&&typeof Z[ab]==="object"){P(Z[ab])}if(ab==="level"){if(Z.level>0){Y=0;for(X in Z.fields){if(Z.fields.hasOwnProperty(X)){U={};for(T in e.aggregates[Y]){if(e.aggregates[Y].hasOwnProperty(T)){switch(T){case"member":case"label":case"aggregator":break;default:U[T]=e.aggregates[Y][T]}}}if(G>1){U.name=X;U.label=e.aggregates[Y].label||Z.label}else{U.name=Z.text;U.label=Z.text==="_r_Totals"?e.rowTotalsText:Z.label}g.push(U);Y++}}}}}}}P(A);var o;if(e.colTotals){var x=k.length;while(x--){for(L=F;L<g.length;L++){o=g[L].name;if(!l[o]){l[o]=parseFloat(k[x][o]||0)}else{l[o]+=parseFloat(k[x][o]||0)}}}}if(J>0){for(L=0;L<J;L++){if(g[L].isGroupField){d.groupingView.groupField.push(g[L].name);d.groupingView.groupSummary.push(e.groupSummary);d.groupingView.groupSummaryPos.push(e.groupSummaryPos)}}}else{d.grouping=false}d.sortname=g[J].name;d.groupingView.hideFirstGroupCol=true});return{colModel:g,rows:k,groupOptions:d,groupHeaders:f,summary:l}},jqPivot:function(g,e,d,f){return this.each(function(){var i=this;function h(n){var k=c(i).jqGrid("pivotSetup",n,e),o=c.assocArraySize(k.summary)>0?true:false,m=a.from.call(i,k.rows),l;for(l=0;l<k.groupOptions.groupingView.groupField.length;l++){m.orderBy(k.groupOptions.groupingView.groupField[l],"a","text","")}c(i).jqGrid(c.extend(true,{datastr:c.extend(m.select(),o?{userdata:k.summary}:{}),datatype:"jsonstring",footerrow:o,userDataOnFooter:o,colModel:k.colModel,viewrecords:true,sortname:e.xDimension[0].dataName},k.groupOptions,d||{}));var j=k.groupHeaders;if(j.length){for(l=0;l<j.length;l++){if(j[l]&&j[l].groupHeaders.length){c(i).jqGrid("setGroupHeaders",j[l])}}}if(e.frozenStaticCols){c(i).jqGrid("setFrozenColumns")}}if(typeof g==="string"){c.ajax(c.extend({url:g,dataType:"json",success:function(j){h(a.getAccessor(j,f&&f.reader?f.reader:"rows"))}},f||{}))}else{h(g)}})}})}(jQuery));(function(d){var c=d.jgrid,a=c.jqID,b=function(){var e=d.makeArray(arguments);e[0]="subGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1);e.unshift("");e.unshift("");e.unshift(this.p);return c.feedback.apply(this,e)};c.extend({setSubGrid:function(){return this.each(function(){var h=this,g=h.p,e=g.subGridModel[0],f;g.subGridOptions=d.extend({expandOnLoad:false,delayOnLoad:50,selectOnExpand:false,selectOnCollapse:false,reloadOnExpand:true},g.subGridOptions||{});g.colNames.unshift("");g.colModel.unshift({name:"subgrid",width:c.cell_width?g.subGridWidth+g.cellLayout:g.subGridWidth,labelClasses:"jqgh_subgrid",sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});if(e){e.align=d.extend([],e.align||[]);for(f=0;f<e.name.length;f++){e.align[f]=e.align[f]||"left"}}})},addSubGridCell:function(g,f){var e=this[0];return e==null||e.p==null||e.p.subGridOptions==null?"":'<td role="gridcell" aria-describedby="'+e.p.id+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+e.formatCol(g,f)+"><a style='cursor:pointer;'><span class='"+c.mergeCssClasses(e.p.subGridOptions.commonIconClass,e.p.subGridOptions.plusicon)+"'></span></a></td>"},addSubGrid:function(f,e){return this.each(function(){var m=this,h=m.p;if(!m.grid){return}var i=function(q,p,s){var r=d("<td align='"+h.subGridModel[0].align[s]+"'></td>").html(p);d(q).append(r)};var g=function(v,s){var w,t,p,u,r=d("<table"+(c.msie&&c.msiever()<8?" cellspacing='0'":"")+"><tbody></tbody></table>"),q=d("<tr></tr>");for(t=0;t<h.subGridModel[0].name.length;t++){w=d("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+h.direction+"'></th>");d(w).html(h.subGridModel[0].name[t]);d(w).width(h.subGridModel[0].width[t]);d(q).append(w)}d(r).append(q);if(v){p=h.xmlReader.subgrid;d(p.root+" "+p.row,v).each(function(){q=d("<tr class='ui-widget-content ui-subtblcell'></tr>");if(p.repeatitems===true){d(p.cell,this).each(function(y){i(q,d(this).text()||"&#160;",y)})}else{u=h.subGridModel[0].mapping||h.subGridModel[0].name;if(u){for(t=0;t<u.length;t++){i(q,d(u[t],this).text()||"&#160;",t)}}}d(r).append(q)})}var x=h.id+"_";d("#"+a(x+s)).append(r);m.grid.hDiv.loading=false;d("#load_"+a(h.id)).hide();return false};var j=function(w,t){var y,A,u,x,p,s,v,r=d("<table"+(c.msie&&c.msiever()<8?" cellspacing='0'":"")+"><tbody></tbody></table>"),q=d("<tr></tr>");for(u=0;u<h.subGridModel[0].name.length;u++){y=d("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+h.direction+"'></th>");d(y).html(h.subGridModel[0].name[u]);d(y).width(h.subGridModel[0].width[u]);d(q).append(y)}d(r).append(q);if(w){p=h.jsonReader.subgrid;A=c.getAccessor(w,p.root);if(A!==undefined){for(u=0;u<A.length;u++){x=A[u];q=d("<tr class='ui-widget-content ui-subtblcell'></tr>");if(p.repeatitems===true){if(p.cell){x=x[p.cell]}for(s=0;s<x.length;s++){i(q,x[s]||"&#160;",s)}}else{v=h.subGridModel[0].mapping||h.subGridModel[0].name;if(v.length){for(s=0;s<v.length;s++){i(q,x[v[s]]||"&#160;",s)}}}d(r).append(q)}}}var z=h.id+"_";d("#"+a(z+t)).append(r);m.grid.hDiv.loading=false;d("#load_"+a(h.id)).hide();return false};var n=function(s){var p=d(s).attr("id"),t={nd_:(new Date().getTime())},r,q;t[h.prmNames.subgridid]=p;if(!h.subGridModel[0]){return false}if(h.subGridModel[0].params){for(q=0;q<h.subGridModel[0].params.length;q++){for(r=0;r<h.colModel.length;r++){if(h.colModel[r].name===h.subGridModel[0].params[q]){t[h.colModel[r].name]=d(s.cells[r]).text().replace(/\&#160\;/ig,"")}}}}if(!m.grid.hDiv.loading){m.grid.hDiv.loading=true;d("#load_"+a(h.id)).show();if(!h.subgridtype){h.subgridtype=h.datatype}if(d.isFunction(h.subgridtype)){h.subgridtype.call(m,t)}else{h.subgridtype=h.subgridtype.toLowerCase()}switch(h.subgridtype){case"xml":case"json":d.ajax(d.extend({type:h.mtype,url:d.isFunction(h.subGridUrl)?h.subGridUrl.call(m,t):h.subGridUrl,dataType:h.subgridtype,data:c.serializeFeedback.call(m,h.serializeSubGridData,"jqGridSerializeSubGridData",t),complete:function(u){if(h.subgridtype==="xml"){g(u.responseXML,p)}else{j(c.parse(u.responseText),p)}}},c.ajaxOptions,h.ajaxSubgridOptions||{}));break}}return false};var k=m.rows.length,l=1;if(e!==undefined&&e>0){l=e;k=e+1}var o=function(){var v=d(this).parent("tr")[0],t=v.nextSibling,s=v.id,q=h.id+"_"+s,u,p=function(r){return[h.subGridOptions.commonIconClass,h.subGridOptions[r]].join(" ")},w=1;d.each(h.colModel,function(){if(this.hidden===true||this.name==="rn"||this.name==="cb"){w++}});if(d(this).hasClass("sgcollapsed")){if(h.subGridOptions.reloadOnExpand===true||(h.subGridOptions.reloadOnExpand===false&&!d(t).hasClass("ui-subgrid"))){u=f>=1?"<td colspan='"+f+"'>&#160;</td>":"";if(!b.call(m,"beforeExpand",q,s)){return}d(v).after("<tr role='row' class='ui-widget-content ui-subgrid ui-row-"+h.direction+"'>"+u+"<td class='ui-widget-content subgrid-cell'><span class='"+p("openicon")+"'></span></td><td colspan='"+parseInt(h.colNames.length-w,10)+"' class='ui-widget-content subgrid-data'><div id="+q+" class='tablediv'></div></td></tr>");d(m).triggerHandler("jqGridSubGridRowExpanded",[q,s]);if(d.isFunction(h.subGridRowExpanded)){h.subGridRowExpanded.call(m,q,s)}else{n(v)}}else{d(t).show()}d(this).html("<a style='cursor:pointer;'><span class='"+p("minusicon")+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");if(h.subGridOptions.selectOnExpand){d(m).jqGrid("setSelection",s)}}else{if(d(this).hasClass("sgexpanded")){if(!b.call(m,"beforeCollapse",q,s)){return}if(h.subGridOptions.reloadOnExpand===true){d(t).remove(".ui-subgrid")}else{if(d(t).hasClass("ui-subgrid")){d(t).hide()}}d(this).html("<a style='cursor:pointer;'><span class='"+p("plusicon")+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");if(h.subGridOptions.selectOnCollapse){d(m).jqGrid("setSelection",s)}}}return false};while(l<k){if(d(m.rows[l]).hasClass("jqgrow")){if(h.scroll){d(m.rows[l].cells[f]).unbind("click")}d(m.rows[l].cells[f]).bind("click",o)}l++}if(h.subGridOptions.expandOnLoad===true){d(m.rows).filter(".jqgrow").each(function(p,q){d(q.cells[0]).click()})}m.subGridXml=function(q,p){g(q,p)};m.subGridJson=function(q,p){j(q,p)}})},expandSubGridRow:function(e){return this.each(function(){var g=this;if(!g.grid&&!e){return}if(g.p.subGrid===true){var f=d(this).jqGrid("getInd",e,true);d(f).find(">td.sgcollapsed").trigger("click")}})},collapseSubGridRow:function(e){return this.each(function(){var g=this;if(!g.grid&&!e){return}if(g.p.subGrid===true){var f=d(this).jqGrid("getInd",e,true);d(f).find(">td.sgexpanded").trigger("click")}})},toggleSubGridRow:function(e){return this.each(function(){var g=this;if(!g.grid&&!e){return}if(g.p.subGrid===true){var f=d(this).jqGrid("getInd",e,true);d(f).find(">td.ui-sgcollapsed").trigger("click")}})}})}(jQuery));(function(a){window.tableToGrid=function(b,c){a(b).each(function(){var p=this,n=a(this);if(p.grid){return}n.width("99%");var o=n.width();var r=a("tr td:first-child input[type=checkbox]:first",n);var i=a("tr td:first-child input[type=radio]:first",n);var e=r.length>0;var h=!e&&i.length>0;var j=e||h;var l=[];var q=[];a("th",n).each(function(){if(l.length===0&&j){l.push({name:"__selection__",index:"__selection__",width:0,hidden:true});q.push("__selection__")}else{l.push({name:a(this).attr("id")||a.trim(a.jgrid.stripHtml(a(this).html())).split(" ").join("_"),index:a(this).attr("id")||a.trim(a.jgrid.stripHtml(a(this).html())).split(" ").join("_"),width:a(this).width()||150});q.push(a(this).html())}});var g=[];var f=[];var m=[];a("tbody > tr",n).each(function(){var t={};var s=0;a("td",a(this)).each(function(){if(s===0&&j){var u=a("input",a(this));var v=u.attr("value");f.push(v||g.length);if(u.is(":checked")){m.push(v)}t[l[s].name]=u.attr("value")}else{t[l[s].name]=a(this).html()}s++});if(s>0){g.push(t)}});n.empty();n.jqGrid(a.extend({datatype:"local",width:o,colNames:q,colModel:l,multiselect:e},c||{}));var k,d;for(k=0;k<g.length;k++){d=null;if(f.length>0){d=f[k];if(d&&d.replace){d=encodeURIComponent(d).replace(/[.\-%]/g,"_")}}if(d===null){d=a.jgrid.randId()}n.jqGrid("addRowData",d,g[k])}for(k=0;k<m.length;k++){n.jqGrid("setSelection",m[k])}})}}(jQuery));(function(f){var b=f.jgrid,c=b.getAccessor,e=b.stripPref,a=b.jqID,d=function(){var g=f.makeArray(arguments);g[0]="treeGrid"+g[0].charAt(0).toUpperCase()+g[0].substring(1);g.unshift("");g.unshift("");g.unshift(this.p);return b.feedback.apply(this,g)};b.extend({setTreeNode:function(h,g){return this.each(function(){var A=this,B=f(A),t=A.p,o=A.rows;if(!A.grid||!t.treeGrid){return}var s=t.expColInd,v=t.treeReader.expanded_field,E=t.treeReader.leaf_field,i=t.treeReader.level_field,D=t.treeReader.icon_field,x=t.treeReader.loaded,G,u,k,q,w,H,F,r,z,j,m,l,C,n=function(I){var K=e(t.idPrefix,f(I.target||I.srcElement,o).closest("tr.jqgrow")[0].id),J=t._index[K],p=t.data[J];if(!p[E]){if(p[v]){B.jqGrid("collapseRow",p);B.jqGrid("collapseNode",p)}else{B.jqGrid("expandRow",p);B.jqGrid("expandNode",p)}}return false},y=function(p){var I=e(t.idPrefix,f(p.target||p.srcElement,o).closest("tr.jqgrow")[0].id);n.call(this,p);B.jqGrid("setSelection",I);return false};while(h<g){j=o[h];m=e(t.idPrefix,j.id);l=t._index[m];F=t.data[l];if(t.treeGridModel==="nested"){if(!F[E]){G=parseInt(F[t.treeReader.left_field],10);u=parseInt(F[t.treeReader.right_field],10);F[E]=(u===G+1)?"true":"false";j.cells[t._treeleafpos].innerHTML=F[E]}}k=parseInt(F[i],10);if(t.tree_root_level===0){q=k+1;w=k}else{q=k;w=k-1}H="<div class='tree-wrap tree-wrap-"+t.direction+"' style='width:"+(q*18)+"px;'>";H+="<div style='"+(t.direction==="rtl"?"right:":"left:")+(w*18)+"px;' class='"+t.treeIcons.commonIconClass+" ";if(F[x]!==undefined){F[x]=F[x]==="true"||F[x]===true}if(F[E]==="true"||F[E]===true){H+=((F[D]!==undefined&&F[D]!=="")?F[D]:t.treeIcons.leaf)+" tree-leaf treeclick";F[E]=true;r="leaf"}else{F[E]=false;r=""}F[v]=(F[v]==="true"||F[v]===true)?true:false;F[v]=F[v]&&(F[x]||F[x]===undefined);H+=F[E]===true?"'":(F[v]===false?t.treeIcons.plus+" tree-plus":t.treeIcons.minus+" tree-minus")+" treeclick'";H+="></div></div>";f(j.cells[s]).wrapInner("<span class='cell-wrapper"+r+"'></span>").prepend(H);if(k!==parseInt(t.tree_root_level,10)){z=B.jqGrid("getNodeParent",F);C=z&&z.hasOwnProperty(v)?z[v]:true;if(!C){f(j).css("display","none")}}f(j.cells[s]).find("div.treeclick").bind("click",n);if(t.ExpandColClick===true){f(j.cells[s]).find("span.cell-wrapper").css("cursor","pointer").bind("click",y)}h++}})},setTreeGrid:function(){return this.each(function(){var o=this,n=o.p,k=0,m=false,h,j,l,g=[];if(!n.treeGrid){return}if(!n.treedatatype){f.extend(o.p,{treedatatype:n.datatype})}n.subGrid=false;n.altRows=false;n.pgbuttons=false;n.pginput=false;n.gridview=true;if(n.rowTotal===null){n.rowNum=n.maxRowNum}n.multiselect=false;n.rowList=[];n.expColInd=0;n.treeIcons.plus=n.direction==="rtl"?n.treeIcons.plusRtl:n.treeIcons.plusLtr;if(n.treeGridModel==="nested"){n.treeReader=f.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},n.treeReader)}else{if(n.treeGridModel==="adjacency"){n.treeReader=f.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},n.treeReader)}}for(j in n.colModel){if(n.colModel.hasOwnProperty(j)){h=n.colModel[j].name;if(h===n.ExpandColumn&&!m){m=true;n.expColInd=k}k++;for(l in n.treeReader){if(n.treeReader.hasOwnProperty(l)&&n.treeReader[l]===h){g.push(h)}}}}f.each(n.treeReader,function(i,p){if(p&&f.inArray(p,g)===-1){if(i==="leaf_field"){n._treeleafpos=k}k++;n.colNames.push(p);n.colModel.push({name:p,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})})},expandRow:function(g){this.each(function(){var m=this,l=f(m),k=m.p;if(!m.grid||!k.treeGrid){return}var j=g[k.localReader.id];if(!d.call(m,"beforeExpandRow",{rowid:j,item:g})){return}var i=l.jqGrid("getNodeChildren",g),h=k.treeReader.expanded_field;f(i).each(function(){var n=k.idPrefix+c(this,k.localReader.id);f(l.jqGrid("getGridRowById",n)).css("display","");if(this[h]){l.jqGrid("expandRow",this)}});d.call(m,"afterExpandRow",{rowid:j,item:g})})},collapseRow:function(g){this.each(function(){var m=this,l=f(m),k=m.p;if(!m.grid||!k.treeGrid){return}var j=g[k.localReader.id];if(!d.call(m,"beforeCollapseRow",{rowid:j,item:g})){return}var i=l.jqGrid("getNodeChildren",g),h=k.treeReader.expanded_field;f(i).each(function(){var n=k.idPrefix+c(this,k.localReader.id);f(l.jqGrid("getGridRowById",n)).css("display","none");if(this[h]){l.jqGrid("collapseRow",this)}});d.call(m,"afterCollapseRow",{rowid:j,item:g})})},getRootNodes:function(){var g=[];this.each(function(){var k=this,h=k.p;if(!k.grid||!h.treeGrid){return}switch(h.treeGridModel){case"nested":var j=h.treeReader.level_field;f(h.data).each(function(){if(parseInt(this[j],10)===parseInt(h.tree_root_level,10)){g.push(this)}});break;case"adjacency":var i=h.treeReader.parent_id_field;f(h.data).each(function(){if(this[i]===null||String(this[i]).toLowerCase()==="null"){g.push(this)}});break}});return g},getNodeDepth:function(h){var g=null;this.each(function(){var k=this,i=k.p;if(!k.grid||!i.treeGrid){return}switch(i.treeGridModel){case"nested":var j=i.treeReader.level_field;g=parseInt(h[j],10)-parseInt(i.tree_root_level,10);break;case"adjacency":g=f(k).jqGrid("getNodeAncestors",h).length;break}});return g},getNodeParent:function(h){var g=null;this.each(function(){var n=this,j=n.p;if(!n.grid||!j.treeGrid){return}switch(j.treeGridModel){case"nested":var m=j.treeReader.left_field,u=j.treeReader.right_field,q=j.treeReader.level_field,t=parseInt(h[m],10),s=parseInt(h[u],10),i=parseInt(h[q],10);f(j.data).each(function(){if(parseInt(this[q],10)===i-1&&parseInt(this[m],10)<t&&parseInt(this[u],10)>s){g=this;return false}});break;case"adjacency":var o=j.treeReader.parent_id_field,l=j.localReader.id,k=h[l],r=j._index[k];while(r--){if(j.data[r][l]===h[o]){g=j.data[r];break}}break}});return g},getNodeChildren:function(h){var g=[];this.each(function(){var m=this,j=m.p;if(!m.grid||!j.treeGrid){return}switch(j.treeGridModel){case"nested":var l=j.treeReader.left_field,s=j.treeReader.right_field,o=j.treeReader.level_field,r=parseInt(h[l],10),q=parseInt(h[s],10),i=parseInt(h[o],10);f(j.data).each(function(){if(parseInt(this[o],10)===i+1&&parseInt(this[l],10)>r&&parseInt(this[s],10)<q){g.push(this)}});break;case"adjacency":var n=j.treeReader.parent_id_field,k=j.localReader.id;f(j.data).each(function(){if(this[n]==h[k]){g.push(this)}});break}});return g},getFullTreeNode:function(h){var g=[];this.each(function(){var m=this,j=m.p,o;if(!m.grid||!j.treeGrid){return}switch(j.treeGridModel){case"nested":var l=j.treeReader.left_field,t=j.treeReader.right_field,q=j.treeReader.level_field,s=parseInt(h[l],10),r=parseInt(h[t],10),i=parseInt(h[q],10);f(j.data).each(function(){if(parseInt(this[q],10)>=i&&parseInt(this[l],10)>=s&&parseInt(this[l],10)<=r){g.push(this)}});break;case"adjacency":if(h){g.push(h);var n=j.treeReader.parent_id_field,k=j.localReader.id;f(j.data).each(function(){var p;o=g.length;for(p=0;p<o;p++){if(g[p][k]===this[n]){g.push(this);break}}})}break}});return g},getNodeAncestors:function(h){var g=[];this.each(function(){var k=this,j=f(k);if(!k.grid||!k.p.treeGrid){return}var i=j.jqGrid("getNodeParent",h);while(i){g.push(i);i=j.jqGrid("getNodeParent",i)}});return g},isVisibleNode:function(h){var g=true;this.each(function(){var l=this,k=l.p;if(!l.grid||!k.treeGrid){return}var j=f(l).jqGrid("getNodeAncestors",h),i=k.treeReader.expanded_field;f(j).each(function(){g=g&&this[i];if(!g){return false}})});return g},isNodeLoaded:function(h){var g;this.each(function(){var l=this,k=l.p;if(!l.grid||!k.treeGrid){return}var i=k.treeReader.leaf_field,j=k.treeReader.loaded;if(h!==undefined){if(h[j]!==undefined){g=h[j]}else{if(h[i]||f(l).jqGrid("getNodeChildren",h).length>0){g=true}else{g=false}}}else{g=false}});return g},expandNode:function(g){return this.each(function(){var l=this,j=l.p;if(!l.grid||!j.treeGrid){return}var o=j.treeReader.expanded_field,q=j.treeReader.parent_id_field,m=j.treeReader.loaded,h=j.treeReader.level_field,s=j.treeReader.left_field,r=j.treeReader.right_field;if(!g[o]){var i=c(g,j.localReader.id);if(!d.call(l,"beforeExpandNode",{rowid:i,item:g})){return}var k=f("#"+j.idPrefix+a(i),l.grid.bDiv)[0];var n=j._index[i];if(f(l).jqGrid("isNodeLoaded",j.data[n])){g[o]=true;f("div.treeclick",k).removeClass(j.treeIcons.plus+" tree-plus").addClass(j.treeIcons.minus+" tree-minus")}else{if(!l.grid.hDiv.loading){g[o]=true;f("div.treeclick",k).removeClass(j.treeIcons.plus+" tree-plus").addClass(j.treeIcons.minus+" tree-minus");j.treeANode=k.rowIndex;j.datatype=j.treedatatype;f(l).jqGrid("setGridParam",{postData:j.treeGridModel==="nested"?{nodeid:i,n_level:g[h],n_left:g[s],n_right:g[r]}:{nodeid:i,n_level:g[h],parentid:g[q]}});f(l).trigger("reloadGrid");g[m]=true;f(l).jqGrid("setGridParam",{postData:j.treeGridModel==="nested"?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})}}d.call(l,"afterExpandNode",{rowid:i,item:g})}})},collapseNode:function(g){return this.each(function(){var l=this,j=l.p;if(!l.grid||!j.treeGrid){return}var i=j.treeReader.expanded_field;if(g[i]){var k=c(g,j.localReader.id);if(!d.call(l,"beforeCollapseNode",{rowid:k,item:g})){return}g[i]=false;var h=f("#"+j.idPrefix+a(k),l.grid.bDiv)[0];f("div.treeclick",h).removeClass(j.treeIcons.minus+" tree-minus").addClass(j.treeIcons.plus+" tree-plus");d.call(l,"afterCollapseNode",{rowid:k,item:g})}})},SortTree:function(j,h,g,i){return this.each(function(){var o=this,k=o.p,t=f(o);if(!o.grid||!k.treeGrid){return}var q,r,n,l=[],m=t.jqGrid("getRootNodes"),s=b.from.call(o,m);s.orderBy(j,h,g,i);var u=s.select();for(q=0,r=u.length;q<r;q++){n=u[q];l.push(n);t.jqGrid("collectChildrenSortTree",l,n,j,h,g,i)}f.each(l,function(p){var v=c(this,k.localReader.id);f(o.rows[p]).after(t.find(">tbody>tr#"+a(v)))})})},collectChildrenSortTree:function(g,k,l,i,h,j){return this.each(function(){var t=this,r=f(t);if(!t.grid||!t.p.treeGrid){return}var o,m,s,p=r.jqGrid("getNodeChildren",k),q=b.from.call(t,p);q.orderBy(l,i,h,j);var n=q.select();for(o=0,m=n.length;o<m;o++){s=n[o];g.push(s);r.jqGrid("collectChildrenSortTree",g,s,l,i,h,j)}})},setTreeRow:function(g,h){var i=false;this.each(function(){var j=this;if(!j.grid||!j.p.treeGrid){return}i=f(j).jqGrid("setRowData",g,h)});return i},delTreeNode:function(g){return this.each(function(){var o=this,l=o.p,v=l.localReader.id,q,s=f(o),n=l.treeReader.left_field,u=l.treeReader.right_field,j,k,r,t;if(!o.grid||!l.treeGrid){return}var h=l._index[g];if(h!==undefined){j=parseInt(l.data[h][u],10);k=j-parseInt(l.data[h][n],10)+1;var m=s.jqGrid("getFullTreeNode",l.data[h]);if(m.length>0){for(q=0;q<m.length;q++){s.jqGrid("delRowData",m[q][v])}}if(l.treeGridModel==="nested"){r=b.from.call(o,l.data).greater(n,j,{stype:"integer"}).select();if(r.length){for(t in r){if(r.hasOwnProperty(t)){r[t][n]=parseInt(r[t][n],10)-k}}}r=b.from.call(o,l.data).greater(u,j,{stype:"integer"}).select();if(r.length){for(t in r){if(r.hasOwnProperty(t)){r[t][u]=parseInt(r[t][u],10)-k}}}}}})},addChildNode:function(m,u,H,q){var D=f(this),A=D[0],t=A.p;if(H){var v=t.treeReader.expanded_field,E=t.treeReader.leaf_field,g=t.treeReader.level_field,n=t.treeReader.parent_id_field,j=t.treeReader.left_field,F=t.treeReader.right_field,w=t.treeReader.loaded,h,G,o,s,y,z,x=0,r=u,C,B;if(q===undefined){q=false}if(m==null){y=t.data.length-1;if(y>=0){while(y>=0){x=Math.max(x,parseInt(t.data[y][t.localReader.id],10));y--}}m=x+1}var K=D.jqGrid("getInd",u);C=false;if(u===undefined||u===null||u===""){u=null;r=null;h="last";s=t.tree_root_level;y=t.data.length+1}else{h="after";G=t._index[u];o=t.data[G];u=o[t.localReader.id];s=parseInt(o[g],10)+1;var k=D.jqGrid("getFullTreeNode",o);if(k.length){y=k[k.length-1][t.localReader.id];r=y;y=D.jqGrid("getInd",r)+1}else{y=D.jqGrid("getInd",u)+1}if(o[E]){C=true;o[v]=true;f(A.rows[K]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(t.treeIcons.leaf+" tree-leaf").addClass(t.treeIcons.minus+" tree-minus");t.data[G][E]=false;o[w]=true}}z=y+1;if(H[v]===undefined){H[v]=false}if(H[w]===undefined){H[w]=false}H[g]=s;if(H[E]===undefined){H[E]=true}if(t.treeGridModel==="adjacency"){H[n]=u}if(t.treeGridModel==="nested"){var l,J,I;if(u!==null){B=parseInt(o[F],10);l=b.from.call(A,t.data);l=l.greaterOrEquals(F,B,{stype:"integer"});J=l.select();if(J.length){for(I in J){if(J.hasOwnProperty(I)){J[I][j]=J[I][j]>B?parseInt(J[I][j],10)+2:J[I][j];J[I][F]=J[I][F]>=B?parseInt(J[I][F],10)+2:J[I][F]}}}H[j]=B;H[F]=B+1}else{B=parseInt(D.jqGrid("getCol",F,false,"max"),10);J=b.from.call(A,t.data).greater(j,B,{stype:"integer"}).select();if(J.length){for(I in J){if(J.hasOwnProperty(I)){J[I][j]=parseInt(J[I][j],10)+2}}}J=b.from.call(A,t.data).greater(F,B,{stype:"integer"}).select();if(J.length){for(I in J){if(J.hasOwnProperty(I)){J[I][F]=parseInt(J[I][F],10)+2}}}H[j]=B+1;H[F]=B+2}}if(u===null||D.jqGrid("isNodeLoaded",o)||C){D.jqGrid("addRowData",m,H,h,r);D.jqGrid("setTreeNode",y,z)}if(o&&!o[v]&&q){f(A.rows[K]).find("div.treeclick").click()}}}})}(jQuery));(function(f){var e=".jqGrid",b="mousedown",d="mousemove",a="mouseup",c=function(k){var i=k.originalEvent,j=i.targetTouches;if(j){j=j[0];return{x:j.pageX,y:j.pageY}}return{x:k.pageX,y:k.pageY}},g={drag:function(n){var o=n.data,m=o.e,j=o.dnr,i=o.ar,l=o.dnrAr,k=c(n);if(j.k==="move"){m.css({left:j.X+k.x-j.pX,top:j.Y+k.y-j.pY})}else{m.css({width:Math.max(k.x-j.pX+j.W,0),height:Math.max(k.y-j.pY+j.H,0)});if(l){i.css({width:Math.max(k.x-l.pX+l.W,0),height:Math.max(k.y-l.pY+l.H,0)})}}return false},stop:function(){f(document).unbind(d,g.drag).unbind(a,g.stop)}},h=function(l,k,i,j){return l.each(function(){k=k?f(k,l):l;k.bind(b,{e:l,k:i},function(t){var v=t.data,q={},w,x,A,n,r,o=function(B,p){return parseInt(B.css(p),10)||false},m=function(p){return o(x,p)},s=function(p){return o(n,p)},z=c(t),y;if(f(t.target).hasClass("ui-jqdialog-titlebar-close")||f(t.target).parent().hasClass("ui-jqdialog-titlebar-close")){f(t.target).click();return}x=v.e;n=j?f(j):false;if(x.css("position")!=="relative"){try{x.position(q)}catch(u){}}A={X:q.left||m("left")||0,Y:q.top||m("top")||0,W:m("width")||x[0].scrollWidth||0,H:m("height")||x[0].scrollHeight||0,pX:z.x,pY:z.y,k:v.k};if(n&&v.k!=="move"){r={X:q.left||s("left")||0,Y:q.top||s("top")||0,W:n[0].offsetWidth||s("width")||0,H:n[0].offsetHeight||s("height")||0,pX:z.x,pY:z.y,k:v.k}}else{r=false}w=x.find("input.hasDatepicker");if(w.length>0){try{w.datepicker("hide")}catch(u){}}y={e:x,dnr:A,ar:n,dnrAr:r};f(document).bind(d,y,g.drag);f(document).bind(a,y,g.stop);return false})})};if(window.PointerEvent){b+=e+" pointerdown"+e;d+=e+" pointermove"+e;a+=e+" pointerup"+e}else{if(window.MSPointerEvent){b+=e+" mspointerdown"+e;d+=e+" mspointermove"+e;a+=e+" mspointerup"}else{b+=e+" touchstart"+e;d+=e+" touchmove"+e;a+=e+" touchend"+e}}f.jqDnR=g;f.fn.jqDrag=function(i){return h(this,i,"move")};f.fn.jqResize=function(j,i){return h(this,j,"resize",i)}}(jQuery));(function(e){var a=0,g,i=[],h=function(j){try{e(":input:visible",j.w).first().focus()}catch(k){}},f=function(j){h(j)},c=function(l){var j=g[i[i.length-1]],k=!e(l.target).parents(".jqmID"+j.s)[0];if(k){e(".jqmID"+j.s).each(function(){var n=e(this),m=n.offset();if(m.top<=l.pageY&&l.pageY<=m.top+n.height()&&m.left<=l.pageX&&l.pageX<=m.left+n.width()){k=false;return false}});h(j)}return !k},d=function(j){e(document)[j]("keypress keydown mousedown",c)},b=function(j,k,l){return j.each(function(){var m=this._jqm;e(k).each(function(){if(!this[l]){this[l]=[];e(this).click(function(){var p,q,o,n=["jqmShow","jqmHide"];for(p=0;p<n.length;p++){q=n[p];for(o in this[q]){if(this[q].hasOwnProperty(o)&&g[this[q][o]]){g[this[q][o]].w[q](this)}}}return false})}this[l].push(m)})})};e.fn.jqm=function(k){var j={overlay:50,closeoverlay:false,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:false,ajaxText:"",target:false,modal:false,toTop:false,onShow:false,onHide:false,onLoad:false};return this.each(function(){if(this._jqm){g[this._jqm].c=e.extend({},g[this._jqm].c,k);return g[this._jqm].c}a++;this._jqm=a;g[a]={c:e.extend(j,e.jqm.params,k),a:false,w:e(this).addClass("jqmID"+a),s:a};if(j.trigger){e(this).jqmAddTrigger(j.trigger)}})};e.fn.jqmAddClose=function(j){return b(this,j,"jqmHide")};e.fn.jqmAddTrigger=function(j){return b(this,j,"jqmShow")};e.fn.jqmShow=function(j){return this.each(function(){e.jqm.open(this._jqm,j)})};e.fn.jqmHide=function(j){return this.each(function(){e.jqm.close(this._jqm,j)})};e.jqm={hash:{},open:function(q,k){var m=g[q],p,n,j,r=m.c,l="."+r.closeClass,o=(parseInt(m.w.css("z-index"),10));o=(o>0)?o:3000;p=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":o-1,opacity:r.overlay/100});if(m.a){return false}m.t=k;m.a=true;m.w.css("z-index",o);if(r.modal){if(!i[0]){setTimeout(function(){d("bind")},1)}i.push(q)}else{if(r.overlay>0){if(r.closeoverlay){m.w.jqmAddClose(p)}}else{p=false}}m.o=p?p.addClass(r.overlayClass).prependTo("body"):false;if(r.ajax){n=r.target||m.w;j=r.ajax;n=(typeof n==="string")?e(n,m.w):e(n);j=(j.substr(0,1)==="@")?e(k).attr(j.substring(1)):j;n.html(r.ajaxText).load(j,function(){if(r.onLoad){r.onLoad.call(this,m)}if(l){m.w.jqmAddClose(e(l,m.w))}f(m)})}else{if(l){m.w.jqmAddClose(e(l,m.w))}}if(r.toTop&&m.o){m.w.before('<span id="jqmP'+m.w[0]._jqm+'"></span>').insertAfter(m.o)}if(r.onShow){r.onShow(m)}else{m.w.show()}f(m);return false},close:function(k){var j=g[k];if(!j.a){return false}j.a=false;if(i[0]){i.pop();if(!i[0]){d("unbind")}}if(j.c.toTop&&j.o){e("#jqmP"+j.w[0]._jqm).after(j.w).remove()}if(j.c.onHide){j.c.onHide(j)}else{j.w.hide();if(j.o){j.o.remove()}}return false},params:{}};g=e.jqm.hash}(jQuery));(function(d){d.fmatter=d.fmatter||{};d.jgrid=d.jgrid||{};var c=d.fmatter,a=d.jgrid,b=a.getMethod("getGridRes");d.extend(true,a,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:true,userLocalTime:false},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:true},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(g){var h=g.newValue;return isNaN(h)?h:parseInt(h,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(g){var h=g.newValue;return isNaN(h)?h:parseFloat(h)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(i){var j=i.newValue,h=i.cm,k=String(j).toLowerCase(),g=h.editoptions!=null&&typeof h.editoptions.value==="string"?h.editoptions.value.split(":"):["yes","no"];if(d.inArray(k,["1","true",g[0].toLowerCase()])>=0){j=true}else{if(d.inArray(k,["0","false",g[1].toLowerCase()])>=0){j=false}}return j},stype:"select",searchoptions:{sopt:["eq","ne"],value:":Any;true:Yes;false:No"}},booleanCheckboxFa:{align:"center",formatter:"checkboxFontAwesome4",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(i){var j=i.newValue,h=i.cm,k=String(j).toLowerCase(),g=h.editoptions!=null&&typeof h.editoptions.value==="string"?h.editoptions.value.split(":"):["yes","no"];if(d.inArray(k,["1","true",g[0].toLowerCase()])>=0){j=true}else{if(d.inArray(k,["0","false",g[1].toLowerCase()])>=0){j=false}}return j},stype:"select",searchoptions:{sopt:["eq","ne"],value:":Any;true:Yes;false:No"}},actions:function(){return{formatter:"actions",width:(this.p!=null&&this.p.fontAwesomeIcons?33:36)+(d.jgrid.cellWidth()?5:0),align:"center",autoResizable:false,frozen:true,fixed:true,resizable:false,sortable:false,search:false,editable:false,viewable:false}}}});d.extend(c,{isObject:function(g){return(g&&(typeof g==="object"||d.isFunction(g)))||false},isNumber:function(g){return typeof g==="number"&&isFinite(g)},isValue:function(g){return(this.isObject(g)||typeof g==="string"||this.isNumber(g)||typeof g==="boolean")},isEmpty:function(g){if(typeof g!=="string"&&this.isValue(g)){return false}if(!this.isValue(g)){return true}g=d.trim(g).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return g===""},NumberFormat:function(j,g){var t=c.isNumber;if(!t(j)){j*=1}if(t(j)){var l=(j<0);var q=String(j);var n=g.decimalSeparator||".";var o;if(t(g.decimalPlaces)){var p=g.decimalPlaces;var k=Math.pow(10,p);q=String(Math.round(j*k)/k);o=q.lastIndexOf(".");if(p>0){if(o<0){q+=n;o=q.length-1}else{if(n!=="."){q=q.replace(".",n)}}while((q.length-1-o)<p){q+="0"}}}if(g.thousandsSeparator){var s=g.thousandsSeparator;o=q.lastIndexOf(n);o=(o>-1)?o:q.length;var r=q.substring(o);var h=-1,m;for(m=o;m>0;m--){h++;if((h%3===0)&&(m!==o)&&(!l||(m>1))){r=s+r}r=q.charAt(m-1)+r}q=r}q=(g.prefix)?g.prefix+q:q;q=(g.suffix)?q+g.suffix:q;return q}return j}});var f=function(k,l,j,g,h){var i=l;j=d.extend(true,{},b.call(d(this),"formatter"),j);try{i=d.fn.fmatter[k].call(this,l,j,g,h)}catch(m){}return i};d.fn.fmatter=f;f.defaultFormat=function(h,g){return(c.isValue(h)&&h!=="")?h:g.defaultValue||"&#160;"};f.email=function(h,g){if(!c.isEmpty(h)){return'<a href="mailto:'+h+'">'+h+"</a>"}return f.defaultFormat(h,g)};f.checkbox=function(j,h){var k=d.extend({},h.checkbox),i;if(h.colModel!==undefined&&h.colModel.formatoptions!==undefined){k=d.extend({},k,h.colModel.formatoptions)}if(k.disabled===true){i='disabled="disabled"'}else{i=""}if(c.isEmpty(j)||j===undefined){j=f.defaultFormat(j,k)}j=String(j);j=String(j).toLowerCase();var g=j.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+g+' value="'+j+'" offval="no" '+i+"/>"};f.checkboxFontAwesome4=function(j,h){var l=h.colModel.title!==false?' title="'+(h.colName||h.colModel.label||h.colModel.name)+'"':"",i=String(j).toLowerCase(),k=h.colModel.editoptions,g=k!=null&&typeof k.value==="string"?k.value.split(":")[0]:"yes";return(j===1||i==="1"||i==="x"||j===true||i==="true"||i==="yes"||i===g)?'<i class="fa fa-check-square-o fa-lg"'+l+"></i>":'<i class="fa fa-square-o fa-lg"'+l+"></i>"};f.checkboxFontAwesome4.unformat=function(j,h,i){var g=(h.colModel.editoptions!=null&&h.colModel.editoptions.value)?h.colModel.editoptions.value.split(":"):["Yes","No"];return d(">i",i).hasClass("fa-check-square-o")?g[0]:g[1]};f.link=function(i,g){var j={target:g.target};var h="";if(g.colModel!==undefined&&g.colModel.formatoptions!==undefined){j=d.extend({},j,g.colModel.formatoptions)}if(j.target){h="target="+j.target}if(!c.isEmpty(i)){return"<a "+h+' href="'+i+'">'+i+"</a>"}return f.defaultFormat(i,g)};f.showlink=function(i,g,h){var p=this,j={baseLinkUrl:g.baseLinkUrl,showAction:g.showAction,addParam:g.addParam||"",target:g.target,idName:g.idName,hrefDefaultValue:"#"},l="",o,m,k,n=function(q){return d.isFunction(q)?q.call(p,{cellValue:i,rowid:g.rowId,rowData:h,options:j}):q||""};if(g.colModel!==undefined&&g.colModel.formatoptions!==undefined){j=d.extend({},j,g.colModel.formatoptions)}if(j.target){l="target="+n(j.target)}o=n(j.baseLinkUrl)+n(j.showAction);m=j.idName?encodeURIComponent(n(j.idName))+"="+encodeURIComponent(n(j.rowId)||g.rowId):"";k=n(j.addParam);if(typeof k==="object"&&k!==null){k=(m!==""?"&":"")+d.param(k)}o+=!m&&!k?"":"?"+m+k;if(o===""){o=n(j.hrefDefaultValue)}if(typeof i==="string"||c.isNumber(i)||d.isFunction(j.cellValue)){return"<a "+l+' href="'+o+'">'+(d.isFunction(j.cellValue)?n(j.cellValue):i)+"</a>"}return f.defaultFormat(i,g)};var e=function(i,g,h){var j=d.extend({},g[h]);if(g.colModel!==undefined&&g.colModel.formatoptions!==undefined){j=d.extend({},j,g.colModel.formatoptions)}if(c.isEmpty(i)){return j.defaultValue}return c.NumberFormat(i,j)};f.integer=function(h,g){return e(h,g,"integer")};f.number=function(h,g){return e(h,g,"number")};f.currency=function(h,g){return e(h,g,"currency")};f.date=function(j,i,g,h){var k=d.extend({},i.date);if(i.colModel!==undefined&&i.colModel.formatoptions!==undefined){k=d.extend({},k,i.colModel.formatoptions)}if(!k.reformatAfterEdit&&h==="edit"){return f.defaultFormat(j,i)}if(!c.isEmpty(j)){return a.parseDate.call(this,k.srcformat,j,k.newformat,k)}return f.defaultFormat(j,i)};f.select=function(n,g){n=String(n);var l=false,p=[],u,k;if(g.colModel.formatoptions!==undefined){l=g.colModel.formatoptions.value;u=g.colModel.formatoptions.separator===undefined?":":g.colModel.formatoptions.separator;k=g.colModel.formatoptions.delimiter===undefined?";":g.colModel.formatoptions.delimiter}else{if(g.colModel.editoptions!==undefined){l=g.colModel.editoptions.value;u=g.colModel.editoptions.separator===undefined?":":g.colModel.editoptions.separator;k=g.colModel.editoptions.delimiter===undefined?";":g.colModel.editoptions.delimiter}}if(l){var t=(g.colModel.editoptions!=null&&g.colModel.editoptions.multiple===true)===true?true:false,s=[],r,q=function(v,j){if(j>0){return v}};if(t){s=n.split(",");s=d.map(s,function(i){return d.trim(i)})}if(typeof l==="string"){var h=l.split(k),m=0,o;for(o=0;o<h.length;o++){r=h[o].split(u);if(r.length>2){r[1]=d.map(r,q).join(u)}if(t){if(d.inArray(d.trim(r[0]),s)>-1){p[m]=r[1];m++}}else{if(d.trim(r[0])===d.trim(n)){p[0]=r[1];break}}}}else{if(c.isObject(l)){if(t){p=d.map(s,function(i){return l[i]})}else{p[0]=l[n]||""}}}}n=p.join(", ");return n===""?f.defaultFormat(n,g):n};f.rowactions=function(l,m){var k=d(this).closest("tr.jqgrow"),o=k.attr("id"),r=d(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),q=d("#"+a.jqID(r)),h=q[0],g=h.p,n=g.colModel[a.getCellIndex(this)],j=d.extend(true,{extraparam:{}},n.formatoptions||{});if(g.editOptions!==undefined){j.editOptions=g.editOptions}if(g.delOptions!==undefined){j.delOptions=g.delOptions}if(k.hasClass("jqgrid-new-row")){j.extraparam[g.prmNames.oper]=g.prmNames.addoper}var i={keys:j.keys,oneditfunc:j.onEdit,successfunc:j.onSuccess,url:j.url,extraparam:j.extraparam,aftersavefunc:j.afterSave,errorfunc:j.onError,afterrestorefunc:j.afterRestore,restoreAfterError:j.restoreAfterError,mtype:j.mtype};if((!g.multiselect&&o!==g.selrow)||(g.multiselect&&d.inArray(o,g.selarrrow)<0)){q.jqGrid("setSelection",o,true,l)}else{a.fullBoolFeedback.call(h,"onSelectRow","jqGridSelectRow",o,true,l)}switch(m){case"edit":q.jqGrid("editRow",o,i);break;case"save":q.jqGrid("saveRow",o,i);break;case"cancel":q.jqGrid("restoreRow",o,j.afterRestore);break;case"del":q.jqGrid("delGridRow",o,j.delOptions);break;case"formedit":q.jqGrid("editGridRow",o,j.editOptions);break}if(l.stopPropagation){l.stopPropagation()}return false};f.actions=function(j,g){var i=g.rowId,n="",r,k=this,h=k.p,q=d(k),o=b.call(q,"edit")||{},l=d.extend({editbutton:true,delbutton:true,editformbutton:false,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:o.bSubmit||"",canceltitle:o.bCancel||""},b.call(q,"nav")||{},a.nav||{},h.navOptions||{},b.call(q,"actionsNav")||{},a.actionsNav||{},h.actionsNavOptions||{},g.colModel.formatoptions||{}),m=function(p){return a.mergeCssClasses(l.commonIconClass,l[p+"icon"])};if(i===undefined||c.isEmpty(i)){return""}if(l.editformbutton){r="id='jEditButton_"+i+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'formedit');\" onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";n+="<div title='"+l.edittitle+"' class='ui-pg-div ui-inline-edit' "+r+"><span class='"+m("edit")+"'></span></div>"}else{if(l.editbutton){r="id='jEditButton_"+i+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'edit');\" onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ";n+="<div title='"+l.edittitle+"' class='ui-pg-div ui-inline-edit' "+r+"><span class='"+m("edit")+"'></span></div>"}}if(l.delbutton){r="id='jDeleteButton_"+i+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'del');\" onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";n+="<div title='"+l.deltitle+"' class='ui-pg-div ui-inline-del' "+r+"><span class='"+m("del")+"'></span></div>"}r="id='jSaveButton_"+i+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'save');\" onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";n+="<div title='"+l.savetitle+"' style='display:none' class='ui-pg-div ui-inline-save' "+r+"><span class='"+m("save")+"'></span></div>";r="id='jCancelButton_"+i+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'cancel');\" onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";n+="<div title='"+l.canceltitle+"' style='display:none;' class='ui-pg-div ui-inline-cancel' "+r+"><span class='"+m("cancel")+"'></span></div>";return"<div class='ui-jqgrid-actions'>"+n+"</div>"};f.actions.pageFinalization=function(j){var m=d(this),l=this.p,i=l.colModel,h=i[j],n=function(o,q){var r=m.jqGrid("getGridRowById",q);if(r!=null&&r.cells!=null){var p=d(r.cells[j]).children(".ui-jqgrid-actions");if(o){p.find(">.ui-inline-edit,>.ui-inline-del").show();p.find(">.ui-inline-save,>.ui-inline-cancel").hide()}else{p.find(">.ui-inline-edit,>.ui-inline-del").hide();p.find(">.ui-inline-save,>.ui-inline-cancel").show()}}},g=function(p,o){n(true,o);return false},k=function(p,o){n(false,o);return false};if(h.formatoptions==null||!h.formatoptions.editformbutton){m.unbind("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",g);m.bind("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",g);m.unbind("jqGridInlineEditRow.jqGridFormatter",k);m.bind("jqGridInlineEditRow.jqGridFormatter",k)}};d.unformat=function(k,u,q,i){var n,l=u.colModel.formatter,h=this.p,m=u.colModel.formatoptions||{},t,s=/([\.\*\_\'\(\)\{\}\+\?\\])/g,o=u.colModel.unformat||(f[l]&&f[l].unformat);if(k instanceof jQuery&&k.length>0){k=k[0]}if(u.colModel.autoResizable&&k!=null&&d(k.firstChild).hasClass(h.autoResizing.wrapperClassName)){k=k.firstChild}if(o!==undefined&&d.isFunction(o)){n=o.call(this,d(k).text(),u,k)}else{if(l!==undefined&&typeof l==="string"){var g=b.call(d(this),"formatter"),r;switch(l){case"integer":m=d.extend({},g.integer,m);t=m.thousandsSeparator.replace(s,"\\$1");r=new RegExp(t,"g");n=d(k).text().replace(r,"");break;case"number":m=d.extend({},g.number,m);t=m.thousandsSeparator.replace(s,"\\$1");r=new RegExp(t,"g");n=d(k).text().replace(r,"").replace(m.decimalSeparator,".");break;case"currency":m=d.extend({},g.currency,m);t=m.thousandsSeparator.replace(s,"\\$1");r=new RegExp(t,"g");n=d(k).text();if(m.prefix&&m.prefix.length){n=n.substr(m.prefix.length)}if(m.suffix&&m.suffix.length){n=n.substr(0,n.length-m.suffix.length)}n=n.replace(r,"").replace(m.decimalSeparator,".");break;case"checkbox":var j=(u.colModel.editoptions!=null&&typeof u.colModel.editoptions.value==="string")?u.colModel.editoptions.value.split(":"):["Yes","No"];n=d("input",k).is(":checked")?j[0]:j[1];break;case"select":n=d.unformat.select(k,u,q,i);break;case"actions":return"";default:n=d(k).text()}}}n=n!==undefined?n:i===true?d(k).text():a.htmlDecode(d(k).html());return n};d.unformat.select=function(n,x,r,k){var q=[];var v=d(n).text();if(k===true){return v}var p=d.extend({},x.colModel.formatoptions!==undefined?x.colModel.formatoptions:x.colModel.editoptions),y=p.separator===undefined?":":p.separator,h=p.delimiter===undefined?";":p.delimiter;if(p.value){var l=p.value,w=p.multiple===true?true:false,u=[],t,s=function(z,j){if(j>0){return z}};if(w){u=v.split(",");u=d.map(u,function(i){return d.trim(i)})}if(typeof l==="string"){var g=l.split(h),m=0,o;for(o=0;o<g.length;o++){t=g[o].split(y);if(t.length>2){t[1]=d.map(t,s).join(y)}if(w){if(d.inArray(d.trim(t[1]),u)>-1){q[m]=t[0];m++}}else{if(d.trim(t[1])===d.trim(v)){q[0]=t[0];break}}}}else{if(c.isObject(l)||d.isArray(l)){if(!w){u[0]=v}q=d.map(u,function(j){var i;d.each(l,function(z,A){if(A===j){i=z;return false}});if(i!==undefined){return i}})}}return q.join(", ")}return v||""};d.unformat.date=function(h,g){var i=d.extend(true,{},b.call(d(this),"formatter.date"),a.formatter!=null&&a.formatter.date!=null?a.formatter.date:{});if(g.formatoptions!==undefined){i=d.extend({},i,g.formatoptions)}if(!c.isEmpty(h)){return a.parseDate.call(this,i.newformat,h,i.srcformat,i)}return f.defaultFormat(h,g)}}(jQuery));(function(){window.xmlJsonClass={xml2json:function(b,d){if(b.nodeType===9){b=b.documentElement}var a=this.removeWhite(b);var e=this.toObj(a);var c=this.toJson(e,b.nodeName,"\t");return"{\n"+d+(d?c.replace(/\t/g,d):c.replace(/\t|\n/g,""))+"\n}"},json2xml:function(d,c){var e=function(q,f,h){var o="",l,g,p,k,j;if(q instanceof Array){if(q.length===0){o+=h+"<"+f+">__EMPTY_ARRAY_</"+f+">\n"}else{for(l=0,g=q.length;l<g;l+=1){p=h+e(q[l],f,h+"\t")+"\n";o+=p}}}else{if(typeof q==="object"){k=false;o+=h+"<"+f;for(j in q){if(q.hasOwnProperty(j)){if(j.charAt(0)==="@"){o+=" "+j.substr(1)+'="'+q[j].toString()+'"'}else{k=true}}}o+=k?">":"/>";if(k){for(j in q){if(q.hasOwnProperty(j)){if(j==="#text"){o+=q[j]}else{if(j==="#cdata"){o+="<![CDATA["+q[j]+"]]>"}else{if(j.charAt(0)!=="@"){o+=e(q[j],j,h+"\t")}}}}}o+=(o.charAt(o.length-1)==="\n"?h:"")+"</"+f+">"}}else{if(typeof q==="function"){o+=h+"<"+f+"><![CDATA["+q+"]]></"+f+">"}else{if(q===undefined){q=""}if(q.toString()==='""'||q.toString().length===0){o+=h+"<"+f+">__EMPTY_STRING_</"+f+">"}else{o+=h+"<"+f+">"+q.toString()+"</"+f+">"}}}}return o};var b="",a;for(a in d){if(d.hasOwnProperty(a)){b+=e(d[a],a,"")}}return c?b.replace(/\t/g,c):b.replace(/\t|\n/g,"")},toObj:function(b){var g={};var f=/function/i;if(b.nodeType===1){if(b.attributes.length){var e;for(e=0;e<b.attributes.length;e+=1){g["@"+b.attributes[e].nodeName]=(b.attributes[e].nodeValue||"").toString()}}if(b.firstChild){var a=0,d=0,c=false;var h;for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===1){c=true}else{if(h.nodeType===3&&h.nodeValue.match(/[^ \f\n\r\t\v]/)){a+=1}else{if(h.nodeType===4){d+=1}}}}if(c){if(a<2&&d<2){this.removeWhite(b);for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===3){g["#text"]=this.escape(h.nodeValue)}else{if(h.nodeType===4){if(f.test(h.nodeValue)){g[h.nodeName]=[g[h.nodeName],h.nodeValue]}else{g["#cdata"]=this.escape(h.nodeValue)}}else{if(g[h.nodeName]){if(g[h.nodeName] instanceof Array){g[h.nodeName][g[h.nodeName].length]=this.toObj(h)}else{g[h.nodeName]=[g[h.nodeName],this.toObj(h)]}}else{g[h.nodeName]=this.toObj(h)}}}}}else{if(!b.attributes.length){g=this.escape(this.innerXml(b))}else{g["#text"]=this.escape(this.innerXml(b))}}}else{if(a){if(!b.attributes.length){g=this.escape(this.innerXml(b));if(g==="__EMPTY_ARRAY_"){g="[]"}else{if(g==="__EMPTY_STRING_"){g=""}}}else{g["#text"]=this.escape(this.innerXml(b))}}else{if(d){if(d>1){g=this.escape(this.innerXml(b))}else{for(h=b.firstChild;h;h=h.nextSibling){if(f.test(b.firstChild.nodeValue)){g=b.firstChild.nodeValue;break}g["#cdata"]=this.escape(h.nodeValue)}}}}}}if(!b.attributes.length&&!b.firstChild){g=null}}else{if(b.nodeType===9){g=this.toObj(b.documentElement)}else{alert("unhandled node type: "+b.nodeType)}}return g},toJson:function(b,a,d,e){if(e===undefined){e=true}var p=a?('"'+a+'"'):"",f="\t",g="\n";if(!e){f="";g=""}if(b==="[]"){p+=(a?":[]":"[]")}else{if(b instanceof Array){var c,k,j=[];for(k=0,c=b.length;k<c;k+=1){j[k]=this.toJson(b[k],"",d+f,e)}p+=(a?":[":"[")+(j.length>1?(g+d+f+j.join(","+g+d+f)+g+d):j.join(""))+"]"}else{if(b===null){p+=(a&&":")+"null"}else{if(typeof b==="object"){var l=[],h;for(h in b){if(b.hasOwnProperty(h)){l[l.length]=this.toJson(b[h],h,d+f,e)}}p+=(a?":{":"{")+(l.length>1?(g+d+f+l.join(","+g+d+f)+g+d):l.join(""))+"}"}else{if(typeof b==="string"){p+=(a&&":")+'"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'}else{p+=(a&&":")+b.toString()}}}}}return p},innerXml:function(c){var b="",d;if(c.hasOwnProperty("innerHTML")){b=c.innerHTML}else{var a=function(h){var f="",e,g;if(h.nodeType===1){f+="<"+h.nodeName;for(e=0;e<h.attributes.length;e+=1){f+=" "+h.attributes[e].nodeName+'="'+(h.attributes[e].nodeValue||"").toString()+'"'}if(h.firstChild){f+=">";for(g=h.firstChild;g;g=g.nextSibling){f+=a(g)}f+="</"+h.nodeName+">"}else{f+="/>"}}else{if(h.nodeType===3){f+=h.nodeValue}else{if(h.nodeType===4){f+="<![CDATA["+h.nodeValue+"]]>"}}}return f};for(d=c.firstChild;d;d=d.nextSibling){b+=a(d)}}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(b){b.normalize();var c=b.firstChild,a;while(c){if(c.nodeType===3){if(!c.nodeValue.match(/[^ \f\n\r\t\v]/)){a=c.nextSibling;b.removeChild(c);c=a}else{c=c.nextSibling}}else{if(c.nodeType===1){this.removeWhite(c);c=c.nextSibling}else{c=c.nextSibling}}}return b}}}());