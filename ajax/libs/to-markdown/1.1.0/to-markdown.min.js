(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.toMarkdown=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(k,i,A){var B;var l;var v=k("./lib/md-converters");var h=k("./lib/gfm-converters");var g=k("collapse-whitespace");var u=(typeof window!=="undefined"?window:this),w;if(typeof document==="undefined"){w=k("jsdom").jsdom()}else{w=document}function t(C){return C.replace(/^[ \r\n\t]+|[ \r\n\t]+$/g,"")}var x=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"];function o(C){return x.indexOf(C.nodeName.toLowerCase())!==-1}var e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function s(C){return e.indexOf(C.nodeName.toLowerCase())!==-1}function n(){var E=u.DOMParser,C=false;try{if(new E().parseFromString("","text/html")){C=true}}catch(D){}return C}function z(){var C=function(){};C.prototype.parseFromString=function(E){var D=w.implementation.createHTMLDocument("");if(E.toLowerCase().indexOf("<!doctype")>-1){D.documentElement.innerHTML=E}else{D.body.innerHTML=E}return D};return C}var j=n()?u.DOMParser:z();function q(D){var C=new j().parseFromString(D,"text/html");g(C,o);return C}function m(H){var D=[H],C=[],G,F,E;while(D.length>0){G=D.shift();C.push(G);F=G.childNodes;for(E=0;E<F.length;E++){if(F[E].nodeType===1){D.push(F[E])}}}C.shift();return C}function y(D){var E="";for(var C=0;C<D.childNodes.length;C++){if(D.childNodes[C].nodeType===1){E+=D.childNodes[C]._replacement}else{if(D.childNodes[C].nodeType===3){E+=D.childNodes[C].data}else{continue}}}return E}function p(D,C){if(typeof C==="string"){return C===D.nodeName.toLowerCase()}if(Array.isArray(C)){return C.indexOf(D.nodeName.toLowerCase())!==-1}else{if(typeof C==="function"){return C.call(B,D)}else{throw new TypeError("`filter` needs to be a string, array, or function")}}}function f(E,G){var F,D,C;if(E==="left"){F=G.previousSibling;D=/ $/}else{F=G.nextSibling;D=/^ /}if(F){if(F.nodeType===3){C=D.test(F.nodeValue)}else{if(F.nodeType===1&&!o(F)){C=D.test(G.textContent)}}}return C}function r(H){var F=H.outerHTML;for(var D=0;D<l.length;D++){var E=l[D];if(p(H,E.filter)){if(typeof E.replacement!=="function"){throw new TypeError("`replacement` needs to be a function that returns a string")}var J="",I="";if(!o(H)){var G=/^[ \r\n\t]/.test(H.innerHTML),C=/[ \r\n\t]$/.test(H.innerHTML);H.innerHTML=t(H.innerHTML);if(G&&!f("left",H)){J=" "}if(C&&!f("right",H)){I=" "}}F=E.replacement.call(B,y(H),H);F=J+F+I;break}}if(!s(H)&&!/A/.test(H.nodeName)&&/^\s*$/i.test(H.innerHTML)){F=""}H._replacement=F}B=function(E,F){F=F||{};if(typeof E!=="string"){throw new TypeError(E+" is not a string")}E=E.replace(/(\d+)\. /g,"$1\\. ");var H=q(E).body,D=m(H),C;l=v.slice(0);if(F.gfm){l=h.concat(l)}for(var G=D.length-1;G>=0;G--){r(D[G])}C=y(H);return C.replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")};B.isBlock=o;B.trim=t;i.exports=B},{"./lib/gfm-converters":2,"./lib/md-converters":3,"collapse-whitespace":6,jsdom:4}],2:[function(g,h,f){function e(l,k){var j=Array.prototype.indexOf.call(k.parentNode.childNodes,k);var m=" ";if(j===0){m="| "}return m+l+" |"}var i=/highlight highlight-(\S+)/;h.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(j){return"~~"+j+"~~"}},{filter:function(j){return j.type==="checkbox"&&j.parentNode.nodeName==="LI"},replacement:function(k,j){return(j.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(k,j){return e(k,j)}},{filter:"tr",replacement:function(o,n){var j="";var m={left:":--",right:"--:",center:":-:"};if(n.parentNode.nodeName==="THEAD"){for(var l=0;l<n.childNodes.length;l++){var p=n.childNodes[l].attributes.align;var k="---";if(p){k=m[p.value]||k}j+=e(k,n.childNodes[l])}}return"\n"+o+(j?"\n"+j:"")}},{filter:"table",replacement:function(j){return"\n\n"+j+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(j){return j}},{filter:function(j){return j.nodeName==="PRE"&&j.firstChild&&j.firstChild.nodeName==="CODE"},replacement:function(k,j){return"\n\n```\n"+j.firstChild.textContent+"\n```\n\n"}},{filter:function(j){return j.nodeName==="PRE"&&j.parentNode.nodeName==="DIV"&&i.test(j.parentNode.className)},replacement:function(k,j){var l=j.parentNode.className.match(i)[1];return"\n\n```"+l+"\n"+j.textContent+"\n```\n\n"}},{filter:function(j){return j.nodeName==="DIV"&&i.test(j.className)},replacement:function(j){return"\n\n"+j+"\n\n"}}]},{}],3:[function(f,g,e){g.exports=[{filter:"p",replacement:function(h){return"\n\n"+h+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(m,l){var h=l.nodeName.charAt(1);var j="";for(var k=0;k<h;k++){j+="#"}return"\n\n"+j+" "+m+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(h){return"_"+h+"_"}},{filter:["strong","b"],replacement:function(h){return"**"+h+"**"}},{filter:function(j){var h=j.previousSibling||j.nextSibling;var i=j.parentNode.nodeName==="PRE"&&!h;return j.nodeName==="CODE"&&!i},replacement:function(h){return"`"+h+"`"}},{filter:"a",replacement:function(l,k){var h=k.getAttribute("href");var m=k.title;var j=h?"["+l+"]":"";var i=m?' "'+m+'"':"";if(h){return j+"("+h+i+")"}else{return k.outerHTML}}},{filter:"img",replacement:function(j,i){var k=i.alt||"";var m=i.getAttribute("src")||"";var l=i.title||"";var h=l?' "'+l+'"':"";return m?"!["+k+"]("+m+h+")":""}},{filter:function(h){return h.nodeName==="PRE"&&h.firstChild.nodeName==="CODE"},replacement:function(i,h){return"\n\n    "+h.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(h){h=this.trim(h);h=h.replace(/\n{3,}/g,"\n\n");h=h.replace(/^/gm,"> ");return"\n\n"+h+"\n\n"}},{filter:"li",replacement:function(k,j){k=k.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var l="*   ";var i=j.parentNode;var h=Array.prototype.indexOf.call(i.children,j)+1;l=/ol/i.test(i.nodeName)?h+".  ":"*   ";return l+k}},{filter:["ul","ol"],replacement:function(l,k){var h=[];for(var j=0;j<k.childNodes.length;j++){h.push(k.childNodes[j]._replacement)}if(/li/i.test(k.parentNode.nodeName)){return"\n"+h.join("\n")}return"\n\n"+h.join("\n")+"\n\n"}},{filter:function(h){return this.isBlock(h)},replacement:function(i,h){return"\n\n"+h.outerHTML+"\n\n"}}]},{}],4:[function(f,g,e){},{}],5:[function(f,g,e){g.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],6:[function(g,h,e){var k=g("block-elements").map(function(m){return m.toUpperCase()});function i(m){return j(m)&&k.indexOf(m.nodeName)>=0}function l(m){return m&&m.nodeType===3}function j(m){return m&&m.nodeType===1}function f(v,o){var p=/^ /,x=/ $/,q,m,u,n,w;if(typeof o!=="function"){o=i}function t(y){while(y&&y!==v){if(y.nextSibling){return y.nextSibling}y=y.parentNode;if(u&&o(y)){u.data=u.data.replace(/[ \r\n\t]$/,"");u=null}}return null}function s(y){return y.firstChild?y.firstChild:t(y)}function r(z){var y=t(z);z.parentNode.removeChild(z);return y}if(v.nodeName==="PRE"){return}v.normalize();n=s(v);while(n){m=n.previousSibling;q=n.nextSibling;if(l(n)){w=n.data.replace(/[ \r\n\t]+/g," ");if(!u||m&&o(m)){w=w.replace(p,"")}if(q&&o(q)){w=w.replace(x,"")}if(u&&x.test(u.data)&&p.test(w)){w=w.substr(1)}if(w){n.data=w;u=n;n=t(n)}else{n=r(n)}}else{if(j(n)){if(n.nodeName==="PRE"){n=t(n);continue}if(u&&o(n)){u.data=u.data.replace(x,"");u=null}n=s(n)}else{n=r(n)}}}if(u){u.data=u.data.replace(x,"")}}h.exports=f},{"block-elements":5}]},{},[1])(1)});