(function(factory){if(typeof define==="function"&&define.amd){define(["../cldr"],factory)}else if(typeof module==="object"&&typeof module.exports==="object"){module.exports=factory(require("cldrjs"))}else{factory(Cldr)}})(function(Cldr){var coreLoad=Cldr._coreLoad;var jsonMerge=Cldr._jsonMerge;var pathNormalize=Cldr._pathNormalize;var resourceGet=Cldr._resourceGet;var validatePresence=Cldr._validatePresence;var validateTypePath=Cldr._validateTypePath;var bundleParentLookup=function(Cldr,locale){var normalizedPath,parent;if(locale==="root"){return}normalizedPath=pathNormalize(["supplemental/parentLocales/parentLocale",locale]);parent=resourceGet(Cldr._resolved,normalizedPath)||resourceGet(Cldr._raw,normalizedPath);if(parent){return parent}parent=locale.substr(0,locale.lastIndexOf(Cldr.localeSep));if(!parent){return"root"}return parent};var resourceSet=function(data,path,value){var i,node=data,length=path.length;for(i=0;i<length-1;i++){if(!node[path[i]]){node[path[i]]={}}node=node[path[i]]}node[path[i]]=value};var itemLookup=function(){var lookup;lookup=function(Cldr,locale,path,attributes,childLocale){var normalizedPath,parent,value;if(typeof locale==="undefined"||locale===childLocale){return}normalizedPath=pathNormalize(path,attributes);value=resourceGet(Cldr._resolved,normalizedPath);if(value&&typeof value!=="object"){return value}value=resourceGet(Cldr._raw,normalizedPath);if(!value){parent=bundleParentLookup(Cldr,locale);value=lookup(Cldr,parent,path,jsonMerge(attributes,{bundle:parent}),locale)}if(value){resourceSet(Cldr._resolved,normalizedPath,value)}return value};return lookup}();Cldr._raw={};Cldr.load=function(){Cldr._raw=coreLoad(Cldr,Cldr._raw,arguments)};Cldr.prototype.get=function(path){validatePresence(path,"path");validateTypePath(path,"path");return itemLookup(Cldr,this.attributes&&this.attributes.bundle||"",path,this.attributes)};if(Cldr._eventInit){Cldr._eventInit()}return Cldr});
