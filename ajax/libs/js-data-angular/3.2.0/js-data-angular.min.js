/*!
* js-data-angular
* @version 3.2.0 - Homepage <https://github.com/js-data/js-data-angular>
* @copyright (c) 2014-2016 js-data-angular project authors
* @license MIT <https://github.com/js-data/js-data-angular/blob/master/LICENSE>
*
* @overview Angular wrapper for js-data.
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("js-data"),require("angular"),function(){try{return require("axios")}catch(e){}}()):"function"==typeof define&&define.amd?define(["js-data","angular"],function(r,a){return t(r,a,e.axios)}):"object"==typeof exports?exports.jsDataAngularModuleName=t(require("js-data"),require("angular"),function(){try{return require("axios")}catch(e){}}()):e.jsDataAngularModuleName=t(e.JSData,e.angular,e.axios)}(this,function(e,t,r){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){var t=void 0;try{t=r(5)(e.project)}catch(e){}t||(t=window[e.class]),t&&(e.loaded=!0,s.module("js-data").provider(e.class,function(){var e=this;e.defaults={},e.$get=[function(){return new t(e.defaults)}]}))}var i=r(1),o=r(2),s=r(4),u=i.DSUtils,l=i.DSErrors,f=u.get,d=u.isString,c=u.isNumber,p=u.isObject,h=u.set,m=u.resolveId,v=[{project:"js-data-localstorage",name:"localstorage",class:"DSLocalStorageAdapter"},{project:"js-data-localforage",name:"localforage",class:"DSLocalForageAdapter"},{project:"js-data-firebase",name:"firebase",class:"DSFirebaseAdapter"},{project:"js-data-sql",name:"sql",class:"DSSqlAdapter"}],y=["compute","digest","eject","inject"],g=function e(){a(this,e);var t={};this.defaults=t,this.$get=["$http","DS",function(e,r){t.http=t.http||e;var a=new o(t);return r.registerAdapter("http",a,{default:!0}),a}]},b=function e(){function t(){function e(e){var t=l.defer();try{e(s.bind(t,t.resolve),s.bind(t,t.reject))}catch(e){t.reject(e)}return t.promise}for(var t=arguments.length,a=Array(t),n=0;t>n;n++)a[n]=arguments[n];var o=a[a.length-2],l=a[a.length-1],f=new i.DS(r.defaults),d={};if(e.all=l.all,e.when=l.when,e.reject=l.reject,u.Promise=e,a.length)for(var c=0;c<a.length;c++)for(var p=0;p<v.length;p++)if(v[p].loaded&&!v[p].registered){v[p].registered=!0,f.registerAdapter(v[p].name,a[c]);break}for(var h=function(){var e=y[m];d[e]=f[e],f[e]=function(){for(var t=arguments.length,r=Array(t),a=0;t>a;a++)r[a]=arguments[a];return o.$$phase?d[e].apply(f,r):o.$apply(function(){return d[e].apply(f,r)})}},m=0;m<y.length;m++)h();return"function"==typeof Object.observe&&"function"==typeof Array.observe||o.$watch(function(){return f.observe.Platform.performMicrotaskCheckpoint()}),f}a(this,e);for(var r=this,n=[],o=0;o<v.length;o++)v[o].loaded&&n.push(v[o].class);r.defaults={},i.DS.prototype.bindAll=function(e,t,r,a,n){var i=this;if(t=t||{},!i.definitions[e])throw new l.NER(e);if(!p(t))throw new l.IA('"params" must be an object!');if(!p(r))throw new l.IA('"scope" must be an object!');if(!d(a))throw new l.IA('"expr" must be a string!');var o=i.definitions[e].idAttribute;try{return r.$watch(function(){return i.lastModified(e)},function(){var u=i.filter(e,t);u&&u.length&&s.forEach(u,function(t){i.compute(e,f(t,o))}),h(r,a,u),n&&n(null,u)})}catch(e){if(!n)throw e;n(e)}},i.DS.prototype.bindOne=function(e,t,r,a,n){var i=this;if(t=m(i.definitions[e],t),!i.definitions[e])throw new l.NER(e);if(!d(t)&&!c(t))throw new l.IA('"id" must be a string or a number!');if(!p(r))throw new l.IA('"scope" must be an object!');if(!d(a))throw new l.IA('"expr" must be a string!');try{return r.$watch(function(){return i.lastModified(e,t)},function(){var o=i.get(e,t);o&&i.compute(e,t),h(r,a,o),n&&n(null,o)})}catch(e){if(!n)throw e;n(e)}},n.push("$rootScope"),n.push("$q"),n.push(t),r.$get=n};s.module("js-data",["ng"]).value("DSUtils",u).value("DSErrors",l).value("DSVersion",i.version).provider("DS",b).provider("DSHttpAdapter",g).run(["DS","DSHttpAdapter",function(e,t){e.registerAdapter("http",t,{default:!0})}]);for(var w=0;w<v.length;w++)n(v[w]);e.exports="js-data";try{e.exports.name="js-data"}catch(e){}},function(t,r){t.exports=e},function(e,t,r){"use strict";function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),u=null;try{u=r(3)}catch(e){}var l=s.DSUtils,f=l.deepMixIn,d=l.removeCircular,c=l.copy,p=l.makePath,h=l.isString,m=l.isNumber,v=function(){function e(){n(this,e)}return o(e,[{key:"queryTransform",value:function(e,t){return t}},{key:"deserialize",value:function(e,t){return t&&"data"in t?t.data:t}},{key:"serialize",value:function(e,t){return t}},{key:"log",value:function(){}},{key:"error",value:function(){}}]),e}(),y=v.prototype;y.basePath="",y.forceTrailingSlash="",y.httpConfig={},y.verbsUseBasePath=!1;var g=function(){function e(t){n(this,e),t=t||{},this.defaults=new v,console&&(this.defaults.log=function(e,t){return console["function"==typeof console.info?"info":"log"](e,t)}),console&&(this.defaults.error=function(e,t){return console["function"==typeof console.error?"error":"log"](e,t)}),f(this.defaults,t),this.http=t.http||u}return o(e,[{key:"getEndpoint",value:function(e,t,r){r=r||{},r.params=r.params||{};var n=r.hasOwnProperty("endpoint")?r.endpoint:e.endpoint,i=e.parents||(e.parent?a({},e.parent,{key:e.parentKey,field:e.parentField}):{});return l.forOwn(i,function(a,i){var o=this,s=void 0,u=a.key,f=a.field,d=e.getResource(i),c=r.params[u];c!==!1&&u&&d?(delete r.params[u],l._sn(t)?s=e.get(t):l._o(t)&&(s=t),console.log("item",s),s&&(c=c||s[u]||(s[f]?s[f][d.idAttribute]:null)),c&&!function(){delete r.endpoint;var e={};l.forOwn(r,function(t,r){e[r]=t}),n=l.makePath(o.getEndpoint(d,c,l._(d,e)),c,n)}()):c===!1&&delete r.params[u]},this),n}},{key:"getPath",value:function(e,t,r,a){var n=this;if(a=a||{},h(a.urlPath))return p.apply(l,[a.basePath||n.defaults.basePath||t.basePath,a.urlPath]);var i=[a.basePath||n.defaults.basePath||t.basePath,this.getEndpoint(t,h(r)||m(r)||"create"===e?r:null,a)];return"find"!==e&&"update"!==e&&"destroy"!==e||i.push(r),p.apply(l,i)}},{key:"HTTP",value:function(e){function t(t,n){if(t=t||{},t instanceof Error)return r.defaults.error("FAILED: "+(t.message||"Unknown Error"),t),l.Promise.reject(t);if("object"===("undefined"==typeof t?"undefined":i(t))){var o=a.toUTCString()+" - "+e.method+" "+e.url+" - "+t.status+" "+((new Date).getTime()-a.getTime())+"ms";return t.status>=200&&t.status<300&&!n?(r.defaults.log&&r.defaults.log(o,t),t):(r.defaults.error&&r.defaults.error("FAILED: "+o,t),l.Promise.reject(t))}return r.defaults.error("FAILED",t),l.Promise.reject(t)}var r=this,a=new Date,n=e.data,o=e.cache,s=e.timeout;e=c(e,null,null,null,["data","cache","timeout"]),e=f(e,r.defaults.httpConfig),e.data=n,e.cache=o,e.timeout=s,"verbsUseBasePath"in e||(e.verbsUseBasePath=r.defaults.verbsUseBasePath),!e.urlOverride&&e.verbsUseBasePath&&(e.url=p(e.basePath||r.defaults.basePath,e.url)),r.defaults.forceTrailingSlash&&"/"!==e.url[e.url.length-1]&&!e.urlOverride&&(e.url+="/"),"object"===i(e.data)&&(e.data=d(e.data)),e.method=e.method.toUpperCase();var u=e.suffix||r.defaults.suffix;if(u&&e.url.substr(e.url.length-u.length)!==u&&!e.urlOverride&&(e.url+=u),!this.http)throw new Error("You have not configured this adapter with an http library!");return this.http(e).then(t,function(e){return t(e,!0)})}},{key:"GET",value:function(e,t){return t=t||{},t.method=t.method||"get",t.urlOverride=!!t.url,t.url=t.url||e,this.HTTP(t)}},{key:"POST",value:function(e,t,r){return r=r||{},r.method=r.method||"post",r.urlOverride=!!r.url,r.url=r.url||e,r.data=r.data||t,this.HTTP(r)}},{key:"PUT",value:function(e,t,r){return r=r||{},r.method=r.method||"put",r.urlOverride=!!r.url,r.url=r.url||e,r.data=r.data||t,this.HTTP(r)}},{key:"DEL",value:function(e,t){return t=t||{},t.method=t.method||"delete",t.urlOverride=!!t.url,t.url=t.url||e,this.HTTP(t)}},{key:"find",value:function(e,t,r){var a=this;return r=r?c(r):{},r.suffix=r.suffix||e.suffix,r.params=r.params||{},r.params=a.defaults.queryTransform(e,r.params),a.GET(a.getPath("find",e,t,r),r).then(function(t){var n=(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t);return n?n:l.Promise.reject(new Error("Not Found!"))})}},{key:"findAll",value:function(e,t,r){var a=this;return r=r?c(r):{},r.suffix=r.suffix||e.suffix,r.params=r.params||{},t&&(t=a.defaults.queryTransform(e,t),f(r.params,t)),a.GET(a.getPath("findAll",e,t,r),r).then(function(t){return(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t)})}},{key:"create",value:function(e,t,r){var a=this;return r=r?c(r):{},r.suffix=r.suffix||e.suffix,r.params=r.params||{},r.params=a.defaults.queryTransform(e,r.params),a.POST(a.getPath("create",e,t,r),r.serialize?r.serialize(e,t):a.defaults.serialize(e,t),r).then(function(t){return(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t)})}},{key:"update",value:function(e,t,r,a){var n=this;return a=a?c(a):{},a.suffix=a.suffix||e.suffix,a.params=a.params||{},a.params=n.defaults.queryTransform(e,a.params),n.PUT(n.getPath("update",e,t,a),a.serialize?a.serialize(e,r):n.defaults.serialize(e,r),a).then(function(t){return(a.deserialize?a.deserialize:n.defaults.deserialize)(e,t)})}},{key:"updateAll",value:function(e,t,r,a){var n=this;return a=a?c(a):{},a.suffix=a.suffix||e.suffix,a.params=a.params||{},r&&(r=n.defaults.queryTransform(e,r),f(a.params,r)),this.PUT(n.getPath("updateAll",e,t,a),a.serialize?a.serialize(e,t):n.defaults.serialize(e,t),a).then(function(t){return(a.deserialize?a.deserialize:n.defaults.deserialize)(e,t)})}},{key:"destroy",value:function(e,t,r){var a=this;return r=r?c(r):{},r.suffix=r.suffix||e.suffix,r.params=r.params||{},r.params=a.defaults.queryTransform(e,r.params),a.DEL(a.getPath("destroy",e,t,r),r).then(function(t){return(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t)})}},{key:"destroyAll",value:function(e,t,r){var a=this;return r=r?c(r):{},r.suffix=r.suffix||e.suffix,r.params=r.params||{},t&&(t=a.defaults.queryTransform(e,t),f(r.params,t)),this.DEL(a.getPath("destroyAll",e,t,r),r).then(function(t){return(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t)})}}]),e}();g.version={full:"<%= pkg.version %>",major:parseInt("<%= major %>",10),minor:parseInt("<%= minor %>",10),patch:parseInt("<%= patch %>",10),alpha:"<%= alpha %>",beta:"<%= beta %>"},e.exports=g},function(e,t){if("undefined"==typeof r){var a=new Error('Cannot find module "axios"');throw a.code="MODULE_NOT_FOUND",a}e.exports=r},function(e,r){e.exports=t},function(e,t,r){function a(e){return r(n(e))}function n(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={};a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=5}])});
//# sourceMappingURL=js-data-angular.min.map