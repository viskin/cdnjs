/*!
* js-data-angular
* @version 3.0.0-beta.2 - Homepage <https://www.js-data.io/docs/js-data-angular/>
* @author Jason Dobry <jason.dobry@gmail.com>
* @copyright (c) 2014-2015 Jason Dobry <https://github.com/jmdobry/>
* @license MIT <https://github.com/js-data/js-data-angular/blob/master/LICENSE>
*
* @overview Angular wrapper for js-data.
*/

!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("js-data"),require("angular"),function(){try{return require("axios")}catch(a){}}()):"function"==typeof define&&define.amd?define(["js-data","angular"],function(c,d){return b(c,d,a.axios)}):"object"==typeof exports?exports.jsDataAngularModuleName=b(require("js-data"),require("angular"),function(){try{return require("axios")}catch(a){}}()):a.jsDataAngularModuleName=b(a.JSData,a.angular,a.axios)}(this,function(a,b,c){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){var b=void 0;try{b=c(3)(a.project)}catch(d){}b||(b=window[a["class"]]),b&&(a.loaded=!0,l["default"].module("js-data").provider(a["class"],function(){var a=this;a.defaults={},a.$get=[function(){return new b(a.defaults)}]}))}var e=function(a){return a&&a.__esModule?a:{"default":a}},f=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=e(g),i=c(4),j=e(i),k=c(2),l=e(k),m=h["default"].DSUtils,n=h["default"].DSErrors,o=m.isString,p=m.isNumber,q=m.isObject,r=m.set,s=m.resolveId,t=[{project:"js-data-localstorage",name:"localstorage","class":"DSLocalStorageAdapter"},{project:"js-data-localforage",name:"localforage","class":"DSLocalForageAdapter"},{project:"js-data-firebase",name:"firebase","class":"DSFirebaseAdapter"},{project:"js-data-sql",name:"sql","class":"DSSqlAdapter"}],u=["compute","digest","eject","inject"],v=function y(){f(this,y);var a={};this.defaults=a,this.$get=["$http","DS",function(b,c){a.http=a.http||b;var d=new j["default"](a);return c.registerAdapter("http",d,{"default":!0}),d}]},w=function z(){function a(){function a(a){var b=g.defer();try{a.call(void 0,l["default"].bind(b,b.resolve),l["default"].bind(b,b.reject))}catch(c){b.reject(c)}return b.promise}for(var c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];var f=d[d.length-2],g=d[d.length-1],i=new h["default"].DS(b.defaults),j={};if(a.all=g.all,a.when=g.when,a.reject=g.reject,m.Promise=a,d.length)for(var k=0;k<d.length;k++)for(var n=0;n<t.length;n++)if(t[n].loaded&&!t[n].registered){t[n].registered=!0,i.registerAdapter(t[n].name,d[k]);break}for(var o=function(){var a=u[p];j[a]=i[a],i[a]=function(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];return f.$$phase?j[a].apply(i,c):f.$apply(function(){return j[a].apply(i,c)})}},p=0;p<u.length;p++)o();return("function"!=typeof Object.observe||"function"!=typeof Array.observe)&&f.$watch(function(){return i.observe.Platform.performMicrotaskCheckpoint()}),i}f(this,z);for(var b=this,c=[],d=0;d<t.length;d++)t[d].loaded&&c.push(t[d]["class"]);b.defaults={},h["default"].DS.prototype.bindAll=function(a,b,c,d,e){var f=this;if(b=b||{},!f.definitions[a])throw new n.NER(a);if(!q(b))throw new n.IA('"params" must be an object!');if(!q(c))throw new n.IA('"scope" must be an object!');if(!o(d))throw new n.IA('"expr" must be a string!');try{return c.$watch(function(){return f.lastModified(a)},function(){var g=f.filter(a,b);r(c,d,g),e&&e(null,g)})}catch(g){if(!e)throw g;e(g)}},h["default"].DS.prototype.bindOne=function(a,b,c,d,e){var f=this;if(b=s(f.definitions[a],b),!f.definitions[a])throw new n.NER(a);if(!o(b)&&!p(b))throw new n.IA('"id" must be a string or a number!');if(!q(c))throw new n.IA('"scope" must be an object!');if(!o(d))throw new n.IA('"expr" must be a string!');try{return c.$watch(function(){return f.lastModified(a,b)},function(){var g=f.get(a,b);g&&f.compute(a,b),r(c,d,g),e&&e(null,g)})}catch(g){if(!e)throw g;e(g)}},c.push("$rootScope"),c.push("$q"),c.push(a),b.$get=c};l["default"].module("js-data",["ng"]).value("DSUtils",m).value("DSErrors",n).value("DSVersion",h["default"].version).provider("DS",w).provider("DSHttpAdapter",v).run(["DS","DSHttpAdapter",function(a,b){a.registerAdapter("http",b,{"default":!0})}]);for(var x=0;x<t.length;x++)d(t[x]);b["default"]="js-data",a.exports=b["default"]},function(b,c,d){b.exports=a},function(a,c,d){a.exports=b},function(a,b,c){function d(a){return c(e(a))}function e(a){return f[a]||function(){throw new Error("Cannot find module '"+a+"'.")}()}var f={};d.keys=function(){return Object.keys(f)},d.resolve=e,a.exports=d,d.id=3},function(a,b,c){var d=function(a){return a&&a.__esModule?a:{"default":a}},e=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=d(g),i=null;try{i=c(5)}catch(j){}var k=h["default"].DSUtils,l=k.deepMixIn,m=k.removeCircular,n=k.copy,o=k.makePath,p=k.isString,q=k.isNumber,r=function(){function a(){e(this,a)}return f(a,[{key:"queryTransform",value:function(a,b){return b}},{key:"deserialize",value:function(a,b){return b&&"data"in b?b.data:b}},{key:"serialize",value:function(a,b){return b}},{key:"log",value:function(){}},{key:"error",value:function(){}}]),a}(),s=r.prototype;s.basePath="",s.forceTrailingSlash="",s.httpConfig={};var t=function(){function a(b){e(this,a),this.defaults=new r,console&&(this.defaults.log=function(a,b){return console["function"==typeof console.info?"info":"log"](a,b)}),console&&(this.defaults.error=function(a,b){return console["function"==typeof console.error?"error":"log"](a,b)}),l(this.defaults,b),this.http=b.http||i}return f(a,[{key:"getPath",value:function(a,b,c,d){var e=this;d=d||{};var f=[d.basePath||e.defaults.basePath||b.basePath,b.getEndpoint(p(c)||q(c)||"create"===a?c:null,d)];return("find"===a||"update"===a||"destroy"===a)&&f.push(c),o.apply(k,f)}},{key:"HTTP",value:function(a){function b(a){var b=""+d.toUTCString()+" - "+a.config.method.toUpperCase()+" "+a.config.url+" - "+a.status+" "+((new Date).getTime()-d.getTime())+"ms";return a.status>=200&&a.status<300?(c.defaults.log&&c.defaults.log(b,a),a):(c.defaults.error&&c.defaults.error("'FAILED: "+b,a),k.Promise.reject(a))}var c=this,d=new Date;a=n(a),a=l(a,c.defaults.httpConfig),c.defaults.forceTrailingSlash&&"/"!==a.url[a.url.length-1]&&(a.url+="/"),"object"==typeof a.data&&(a.data=m(a.data)),a.method=a.method.toUpperCase();var e=a.suffix||c.defaults.suffix;if(e&&a.url.substr(a.url.length-e.length)!==e&&(a.url+=e),!this.http)throw new Error("You have not configured this adapter with an http library!");return this.http(a).then(b,b)}},{key:"GET",value:function(a,b){return b=b||{},"method"in b||(b.method="get"),this.HTTP(l(b,{url:a}))}},{key:"POST",value:function(a,b,c){return c=c||{},"method"in c||(c.method="post"),this.HTTP(l(c,{url:a,data:b}))}},{key:"PUT",value:function(a,b,c){return c=c||{},"method"in c||(c.method="put"),this.HTTP(l(c,{url:a,data:b||{}}))}},{key:"DEL",value:function(a,b){return b=b||{},"method"in b||(b.method="delete"),this.HTTP(l(b,{url:a}))}},{key:"find",value:function(a,b,c){var d=this;return c=c?n(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.GET(d.getPath("find",a,b,c),c).then(function(b){var e=(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b);return e?e:k.Promise.reject(new Error("Not Found!"))})}},{key:"findAll",value:function(a,b,c){var d=this;return c=c?n(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},b&&(b=d.defaults.queryTransform(a,b),l(c.params,b)),d.GET(d.getPath("findAll",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"create",value:function(a,b,c){var d=this;return c=c?n(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.POST(d.getPath("create",a,b,c),c.serialize?c.serialize(a,b):d.defaults.serialize(a,b),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"update",value:function(a,b,c,d){var e=this;return d=d?n(d):{},d.suffix=d.suffix||a.suffix,d.params=d.params||{},d.params=e.defaults.queryTransform(a,d.params),e.PUT(e.getPath("update",a,b,d),d.serialize?d.serialize(a,c):e.defaults.serialize(a,c),d).then(function(b){return(d.deserialize?d.deserialize:e.defaults.deserialize)(a,b)})}},{key:"updateAll",value:function(a,b,c,d){var e=this;return d=d?n(d):{},d.suffix=d.suffix||a.suffix,d.params=d.params||{},c&&(c=e.defaults.queryTransform(a,c),l(d.params,c)),this.PUT(e.getPath("updateAll",a,b,d),d.serialize?d.serialize(a,b):e.defaults.serialize(a,b),d).then(function(b){return(d.deserialize?d.deserialize:e.defaults.deserialize)(a,b)})}},{key:"destroy",value:function(a,b,c){var d=this;return c=c?n(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.DEL(d.getPath("destroy",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"destroyAll",value:function(a,b,c){var d=this;return c=c?n(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},b&&(b=d.defaults.queryTransform(a,b),l(c.params,b)),this.DEL(d.getPath("destroyAll",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}}]),a}();b["default"]=t,a.exports=b["default"]},function(a,b,d){if("undefined"==typeof c){var e=new Error('Cannot find module "axios"');throw e.code="MODULE_NOT_FOUND",e}a.exports=c}])});
//# sourceMappingURL=js-data-angular.min.map