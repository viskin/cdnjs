angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function a(b,c){if(!c){return undefined}if(angular.isFunction(b.$parent[c])){return b.$parent[c]}return function(d){return d[c]}}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:false,link:function(d,c,b){$(function(){if(!angular.isArray(d.model)){d.model=[]}var e=$("select",c);e.tagsinput({typeahead:{source:angular.isFunction(d.$parent[b.typeaheadSource])?d.$parent[b.typeaheadSource]:null},itemValue:a(d,b.itemvalue),itemText:a(d,b.itemtext),tagClass:angular.isFunction(d.$parent[b.tagclass])?d.$parent[b.tagclass]:function(h){return b.tagclass}});for(var f=0;f<d.model.length;f++){e.tagsinput("add",d.model[f])}e.on("itemAdded",function(h){if(d.model.indexOf(h.item)===-1){d.model.push(h.item)}});e.on("itemRemoved",function(i){var h=d.model.indexOf(i.item);if(h!==-1){d.model.splice(h,1)}});var g=d.model.slice();d.$watch("model",function(){var j=d.model.filter(function(l){return g.indexOf(l)===-1}),k=g.filter(function(l){return d.model.indexOf(l)===-1}),h;g=d.model.slice();for(h=0;h<k.length;h++){e.tagsinput("remove",k[h])}e.tagsinput("refresh");for(h=0;h<j.length;h++){e.tagsinput("add",j[h])}},true)})}}}]);