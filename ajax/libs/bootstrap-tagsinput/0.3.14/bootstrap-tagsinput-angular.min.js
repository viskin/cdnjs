angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function a(b,c){if(!c){return undefined}if(angular.isFunction(b.$parent[c])){return b.$parent[c]}return function(d){return d[c]}}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:false,link:function(d,c,b){$(function(){if(!angular.isArray(d.model)){d.model=[]}var e=$("select",c);var h=b.typeaheadSource?b.typeaheadSource.split("."):null;var j=h?(h.length>1?d.$parent[h[0]][h[1]]:d.$parent[h[0]]):null;e.tagsinput(d.$parent[b.options||""]||{typeahead:{source:angular.isFunction(j)?j:null},itemValue:a(d,b.itemvalue),itemText:a(d,b.itemtext),confirmKeys:a(d,b.confirmkeys)?JSON.parse(b.confirmkeys):[13],tagClass:angular.isFunction(d.$parent[b.tagclass])?d.$parent[b.tagclass]:function(i){return b.tagclass}});for(var f=0;f<d.model.length;f++){e.tagsinput("add",d.model[f])}e.on("itemAdded",function(i){if(d.model.indexOf(i.item)===-1){d.model.push(i.item)}});e.on("itemRemoved",function(k){var i=d.model.indexOf(k.item);if(i!==-1){d.model.splice(i,1)}});var g=d.model.slice();d.$watch("model",function(){var l=d.model.filter(function(n){return g.indexOf(n)===-1}),m=g.filter(function(n){return d.model.indexOf(n)===-1}),k;g=d.model.slice();for(k=0;k<m.length;k++){e.tagsinput("remove",m[k])}e.tagsinput("refresh");for(k=0;k<l.length;k++){e.tagsinput("add",l[k])}},true)})}}}]);