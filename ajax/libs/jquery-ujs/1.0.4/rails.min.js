(function(b,d){if(b.rails!==d){b.error("jquery-ujs has already been loaded!")}var a;var c=b(document);b.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(f){var e=b('meta[name="csrf-token"]').attr("content");if(e){f.setRequestHeader("X-CSRF-Token",e)}},refreshCSRFTokens:function(){var e=b("meta[name=csrf-token]").attr("content");var f=b("meta[name=csrf-param]").attr("content");b('form input[name="'+f+'"]').val(e)},fire:function(h,e,g){var f=b.Event(e);h.trigger(f,g);return f.result!==false},confirm:function(e){return confirm(e)},ajax:function(e){return b.ajax(e)},href:function(e){return e[0].href},handleRemote:function(j){var l,h,k,f,e,g;if(a.fire(j,"ajax:before")){f=j.data("with-credentials")||null;e=j.data("type")||(b.ajaxSettings&&b.ajaxSettings.dataType);if(j.is("form")){l=j.attr("method");h=j.attr("action");k=j.serializeArray();var i=j.data("ujs:submit-button");if(i){k.push(i);j.data("ujs:submit-button",null)}}else{if(j.is(a.inputChangeSelector)){l=j.data("method");h=j.data("url");k=j.serialize();if(j.data("params")){k=k+"&"+j.data("params")}}else{if(j.is(a.buttonClickSelector)){l=j.data("method")||"get";h=j.data("url");k=j.serialize();if(j.data("params")){k=k+"&"+j.data("params")}}else{l=j.data("method");h=a.href(j);k=j.data("params")||null}}}g={type:l||"GET",data:k,dataType:e,beforeSend:function(n,m){if(m.dataType===d){n.setRequestHeader("accept","*/*;q=0.5, "+m.accepts.script)}if(a.fire(j,"ajax:beforeSend",[n,m])){j.trigger("ajax:send",n)}else{return false}},success:function(n,m,o){j.trigger("ajax:success",[n,m,o])},complete:function(n,m){j.trigger("ajax:complete",[n,m])},error:function(o,m,n){j.trigger("ajax:error",[o,m,n])},crossDomain:a.isCrossDomain(h)};if(f){g.xhrFields={withCredentials:f}}if(h){g.url=h}return a.ajax(g)}else{return false}},isCrossDomain:function(g){var f=document.createElement("a");f.href=location.href;var h=document.createElement("a");try{h.href=g;h.href=h.href;return !h.protocol||!h.host||(f.protocol+"//"+f.host!==h.protocol+"//"+h.host)}catch(i){return true}},handleMethod:function(j){var g=a.href(j),l=j.data("method"),k=j.attr("target"),e=b("meta[name=csrf-token]").attr("content"),h=b("meta[name=csrf-param]").attr("content"),i=b('<form method="post" action="'+g+'"></form>'),f='<input name="_method" value="'+l+'" type="hidden" />';if(h!==d&&e!==d&&!a.isCrossDomain(g)){f+='<input name="'+h+'" value="'+e+'" type="hidden" />'}if(k){i.attr("target",k)}i.hide().append(f).appendTo("body");i.submit()},formElements:function(f,e){return f.is("form")?b(f[0].elements).filter(e):f.find(e)},disableFormElements:function(e){a.formElements(e,a.disableSelector).each(function(){a.disableFormElement(b(this))})},disableFormElement:function(e){var g,f;g=e.is("button")?"html":"val";f=e.data("disable-with");e.data("ujs:enable-with",e[g]());if(f!==d){e[g](f)}e.prop("disabled",true)},enableFormElements:function(e){a.formElements(e,a.enableSelector).each(function(){a.enableFormElement(b(this))})},enableFormElement:function(e){var f=e.is("button")?"html":"val";if(e.data("ujs:enable-with")){e[f](e.data("ujs:enable-with"))}e.prop("disabled",false)},allowAction:function(e){var f=e.data("confirm"),g=false,h;if(!f){return true}if(a.fire(e,"confirm")){g=a.confirm(f);h=a.fire(e,"confirm:complete",[g])}return g&&h},blankInputs:function(k,h,j){var g=b(),i,f,e=h||"input,textarea",l=k.find(e);l.each(function(){i=b(this);f=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val();if(!f===!j){if(i.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length){return true}g=g.add(i)}});return g.length?g:false},nonBlankInputs:function(f,e){return a.blankInputs(f,e,true)},stopEverything:function(f){b(f.target).trigger("ujs:everythingStopped");f.stopImmediatePropagation();return false},disableElement:function(e){var f=e.data("disable-with");e.data("ujs:enable-with",e.html());if(f!==d){e.html(f)}e.bind("click.railsDisable",function(g){return a.stopEverything(g)})},enableElement:function(e){if(e.data("ujs:enable-with")!==d){e.html(e.data("ujs:enable-with"));e.removeData("ujs:enable-with")}e.unbind("click.railsDisable")}};if(a.fire(c,"rails:attachBindings")){b.ajaxPrefilter(function(e,g,f){if(!e.crossDomain){a.CSRFProtection(f)}});b(window).on("pageshow.rails",function(){b(b.rails.enableSelector).each(function(){var e=b(this);if(e.data("ujs:enable-with")){b.rails.enableFormElement(e)}});b(b.rails.linkDisableSelector).each(function(){var e=b(this);if(e.data("ujs:enable-with")){b.rails.enableElement(e)}})});c.delegate(a.linkDisableSelector,"ajax:complete",function(){a.enableElement(b(this))});c.delegate(a.buttonDisableSelector,"ajax:complete",function(){a.enableFormElement(b(this))});c.delegate(a.linkClickSelector,"click.rails",function(j){var h=b(this),k=h.data("method"),i=h.data("params"),g=j.metaKey||j.ctrlKey;if(!a.allowAction(h)){return a.stopEverything(j)}if(!g&&h.is(a.linkDisableSelector)){a.disableElement(h)}if(h.data("remote")!==d){if(g&&(!k||k==="GET")&&!i){return true}var f=a.handleRemote(h);if(f===false){a.enableElement(h)}else{f.fail(function(){a.enableElement(h)})}return false}else{if(k){a.handleMethod(h);return false}}});c.delegate(a.buttonClickSelector,"click.rails",function(h){var g=b(this);if(!a.allowAction(g)){return a.stopEverything(h)}if(g.is(a.buttonDisableSelector)){a.disableFormElement(g)}var f=a.handleRemote(g);if(f===false){a.enableFormElement(g)}else{f.fail(function(){a.enableFormElement(g)})}return false});c.delegate(a.inputChangeSelector,"change.rails",function(g){var f=b(this);if(!a.allowAction(f)){return a.stopEverything(g)}a.handleRemote(f);return false});c.delegate(a.formSubmitSelector,"submit.rails",function(k){var h=b(this),j=h.data("remote")!==d,g,f;if(!a.allowAction(h)){return a.stopEverything(k)}if(h.attr("novalidate")==d){g=a.blankInputs(h,a.requiredInputSelector);if(g&&a.fire(h,"ajax:aborted:required",[g])){return a.stopEverything(k)}}if(j){f=a.nonBlankInputs(h,a.fileInputSelector);if(f){setTimeout(function(){a.disableFormElements(h)},13);var i=a.fire(h,"ajax:aborted:file",[f]);if(!i){setTimeout(function(){a.enableFormElements(h)},13)}return i}a.handleRemote(h);return false}else{setTimeout(function(){a.disableFormElements(h)},13)}});c.delegate(a.formInputClickSelector,"click.rails",function(g){var f=b(this);if(!a.allowAction(f)){return a.stopEverything(g)}var e=f.attr("name"),h=e?{name:e,value:f.val()}:null;f.closest("form").data("ujs:submit-button",h)});c.delegate(a.formSubmitSelector,"ajax:send.rails",function(e){if(this==e.target){a.disableFormElements(b(this))}});c.delegate(a.formSubmitSelector,"ajax:complete.rails",function(e){if(this==e.target){a.enableFormElements(b(this))}});b(function(){a.refreshCSRFTokens()})}})(jQuery);