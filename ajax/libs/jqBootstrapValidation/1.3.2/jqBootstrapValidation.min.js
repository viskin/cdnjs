(function(d){var e={options:{sniffHtml:true,preventSubmit:true,submitError:false,submitSuccess:false},methods:{init:function(h){var i=d.extend(true,{},e);i.options=d.extend(true,i.options,h);var j=this;var g=d.unique(j.map(function(){return d(this).parents("form")[0]}).toArray());d(g).bind("submit",function(m){var k=d(this);var n=0;var l=k.find("input,textarea,select").not("[type=submit],[type=image]");l.trigger("submit.validation").trigger("validationLostFocus.validation");l.each(function(o,p){var q=d(p),r=q.parents(".control-group").first();if(r.hasClass("warning")){r.removeClass("warning").addClass("error");n++}});l.trigger("validationLostFocus.validation");if(n){if(i.options.preventSubmit){m.preventDefault()}k.addClass("error");if(d.isFunction(i.options.submitError)){i.options.submitError(k,m,l.jqBootstrapValidation("collectErrors",true))}}else{k.removeClass("error");if(d.isFunction(i.options.submitSuccess)){i.options.submitSuccess(k,m)}}});return this.each(function(){var p=d(this),o=p.parents(".control-group").first(),s=o.find(".help-block").first(),u=p.parents("form").first(),k=[];if(i.options.sniffHtml){var t="";if(p.attr("pattern")!==undefined){t="Not in the expected format<!-- data-validation-pattern-message to override -->";if(p.data("validationPatternMessage")){t=p.data("validationPatternMessage")}p.data("validationPatternMessage",t);p.data("validationPatternRegex",p.attr("pattern"))}if(p.attr("max")!==undefined||p.attr("aria-valuemax")!==undefined){var r=(p.attr("max")!==undefined?p.attr("max"):p.attr("aria-valuemax"));t="Too high: Maximum of '"+r+"'<!-- data-validation-max-message to override -->";if(p.data("validationMaxMessage")){t=p.data("validationMaxMessage")}p.data("validationMaxMessage",t);p.data("validationMaxMax",r)}if(p.attr("min")!==undefined||p.attr("aria-valuemin")!==undefined){var m=(p.attr("min")!==undefined?p.attr("min"):p.attr("aria-valuemin"));t="Too low: Minimum of '"+m+"'<!-- data-validation-min-message to override -->";if(p.data("validationMinMessage")){t=p.data("validationMinMessage")}p.data("validationMinMessage",t);p.data("validationMinMin",m)}if(p.attr("maxlength")!==undefined){t="Too long: Maximum of '"+p.attr("maxlength")+"' characters<!-- data-validation-maxlength-message to override -->";if(p.data("validationMaxlengthMessage")){t=p.data("validationMaxlengthMessage")}p.data("validationMaxlengthMessage",t);p.data("validationMaxlengthMaxlength",p.attr("maxlength"))}if(p.attr("minlength")!==undefined){t="Too short: Minimum of '"+p.attr("minlength")+"' characters<!-- data-validation-minlength-message to override -->";if(p.data("validationMinlengthMessage")){t=p.data("validationMinlengthMessage")}p.data("validationMinlengthMessage",t);p.data("validationMinlengthMinlength",p.attr("minlength"))}if(p.attr("required")!==undefined||p.attr("aria-required")!==undefined){t=i.builtInValidators.required.message;if(p.data("validationRequiredMessage")){t=p.data("validationRequiredMessage")}p.data("validationRequiredMessage",t)}if(p.attr("type")!==undefined&&p.attr("type").toLowerCase()=="number"){t=i.builtInValidators.number.message;if(p.data("validationNumberMessage")){t=p.data("validationNumberMessage")}p.data("validationNumberMessage",t)}if(p.attr("type")!==undefined&&p.attr("type").toLowerCase()=="email"){t="Not a valid email address<!-- data-validator-validemail-message to override -->";if(p.data("validationValidemailMessage")){t=p.data("validationValidemailMessage")}else{if(p.data("validationEmailMessage")){t=p.data("validationEmailMessage")}}p.data("validationValidemailMessage",t)}if(p.attr("minchecked")!==undefined){t="Not enough options checked; Minimum of '"+p.attr("minchecked")+"' required<!-- data-validation-minchecked-message to override -->";if(p.data("validationMincheckedMessage")){t=p.data("validationMincheckedMessage")}p.data("validationMincheckedMessage",t);p.data("validationMincheckedMinchecked",p.attr("minchecked"))}if(p.attr("maxchecked")!==undefined){t="Too many options checked; Maximum of '"+p.attr("maxchecked")+"' required<!-- data-validation-maxchecked-message to override -->";if(p.data("validationMaxcheckedMessage")){t=p.data("validationMaxcheckedMessage")}p.data("validationMaxcheckedMessage",t);p.data("validationMaxcheckedMaxchecked",p.attr("maxchecked"))}}if(p.data("validation")!=undefined){k=p.data("validation").split(",")}d.each(p.data(),function(v,w){var x=v.replace(/([A-Z])/g,",$1").split(",");if(x[0]=="validation"&&x[1]){k.push(x[1])}});var n=k;var q=[];do{d.each(k,function(v,w){k[v]=c(w)});k=d.unique(k);q=[];d.each(n,function(w,x){if(p.data("validation"+x+"Shortcut")!=undefined){d.each(p.data("validation"+x+"Shortcut").split(","),function(z,y){q.push(y)})}else{if(i.builtInValidators[x.toLowerCase()]){var v=i.builtInValidators[x.toLowerCase()];if(v.type.toLowerCase()=="shortcut"){d.each(v.shortcut.split(","),function(y,z){z=c(z);q.push(z);k.push(z)})}}}});n=q}while(n.length>0);var l={};d.each(k,function(w,y){var z=p.data("validation"+y+"Message");var B=(z!=undefined);var x=false;z=(z?z:"'"+y+"' validation failed <!-- Add attribute 'data-validation-"+y.toLowerCase()+"-message' to input to change this message -->");d.each(i.validatorTypes,function(C,D){if(l[C]==undefined){l[C]=[]}if(!x&&p.data("validation"+y+c(D.name))!==undefined){l[C].push(d.extend(true,{name:c(D.name),message:z},D.init(p,y)));x=true}});if(!x&&i.builtInValidators[y.toLowerCase()]){var v=d.extend(true,{},i.builtInValidators[y.toLowerCase()]);if(B){v.message=z}var A=v.type.toLowerCase();if(A=="shortcut"){x=true}else{d.each(i.validatorTypes,function(C,D){if(l[C]==undefined){l[C]=[]}if(!x&&A==C.toLowerCase()){p.data("validation"+y+c(D.name),v[D.name.toLowerCase()]);l[A].push(d.extend(v,D.init(p,y)));x=true}})}}if(!x){d.error("Cannot find validation info for '"+y+"'")}});s.data("original-contents",(s.data("original-contents")?s.data("original-contents"):s.html()));s.data("original-role",(s.data("original-role")?s.data("original-role"):s.attr("role")));o.data("original-classes",(o.data("original-clases")?o.data("original-classes"):o.attr("class")));p.data("original-aria-invalid",(p.data("original-aria-invalid")?p.data("original-aria-invalid"):p.attr("aria-invalid")));p.bind("validation.validation",function(w,y){w=w;var x=b(p);var v=[];d.each(l,function(z,A){if(x||x.length||(y&&y.includeEmpty)||(!!i.validatorTypes[z].blockSubmit&&y&&!!y.submitting)){d.each(A,function(C,B){if(i.validatorTypes[z].validate(p,x,B)){v.push(B.message)}})}});return v});p.bind("getValidators.validation",function(v){v=v;return l});p.bind("submit.validation",function(){return p.triggerHandler("change.validation",{submitting:true})});p.bind(["keyup","focus","blur","click","keydown","keypress","change"].join(".validation ")+".validation",function(x,y){var w=b(p);var v=[];o.find("input,textarea,select").each(function(B,C){var z=v.length;d.each(d(C).triggerHandler("validation.validation",y),function(D,E){v.push(E)});if(v.length>z){d(C).attr("aria-invalid","true")}else{var A=p.data("original-aria-invalid");d(C).attr("aria-invalid",(A!==undefined?A:false))}});u.find("input,select,textarea").not(p).not('[name="'+p.attr("name")+'"]').trigger("validationLostFocus.validation");v=d.unique(v);if(v.length){o.removeClass("success error").addClass("warning");s.html('<ul role="alert"><li>'+v.join("</li><li>")+"</li></ul>")}else{o.removeClass("warning error success");if(w.length>0){o.addClass("success")}s.html(s.data("original-contents"))}if(x.type=="blur"){o.removeClass("success")}});p.bind("validationLostFocus.validation",function(){o.removeClass("success")})})},destroy:function(){return this.each(function(){var g=d(this),i=g.parents(".control-group").first(),h=i.find(".help-block").first();g.unbind(".validation");h.html(h.data("original-contents"));i.attr("class",i.data("original-classes"));g.attr("aria-invalid",g.data("original-aria-invalid"));h.attr("role",g.data("original-role"))})},collectErrors:function(g){var h={};this.each(function(l,m){var k=d(m);var j=k.attr("name");var n=k.triggerHandler("validation.validation",{includeEmpty:true});h[j]=d.extend(true,n,h[j])});d.each(h,function(j,k){if(k.length==0){delete h[j]}});return h},hasErrors:function(){var g=[];this.each(function(h,j){g=g.concat(d(j).triggerHandler("getValidators.validation")?d(j).triggerHandler("validation.validation",{submitting:true}):[])});return(g.length>0)},override:function(g){e=d.extend(true,e,g)}},validatorTypes:{callback:{name:"callback",init:function(h,g){return{validatorName:g,callback:h.data("validation"+g+"Callback"),lastValue:h.val(),lastValid:true,lastFinished:true}},validate:function(j,i,h){if(h.lastValue==i&&h.lastFinished){return !h.lastValid}if(h.lastFinished==true){h.lastValue=i;h.lastValid=true;h.lastFinished=false;var k=h;var g=j;a(h.callback,window,j,i,function(l){if(k.lastValue==l.value){k.lastValid=l.valid;if(l.message){k.message=l.message}k.lastFinished=true;g.data("validation"+k.validatorName+"Message",k.message);setTimeout(function(){g.trigger("change.validation")},1)}})}return false}},ajax:{name:"ajax",init:function(h,g){return{validatorName:g,url:h.data("validation"+g+"Ajax"),lastValue:h.val(),lastValid:true,lastFinished:true}},validate:function(i,h,g){console.log(i);if(g.lastValue==h&&g.lastFinished==true){return g.lastValid==false}if(g.lastFinished==true){g.lastValue=h;g.lastValid=true;g.lastFinished=false;d.ajax({url:g.url,data:"value="+h+"&field="+i.attr("name"),dataType:"json",success:function(j){if(g.lastValue==j.value){g.lastValid=(j.valid);if(j.message){g.message=j.message}g.lastFinished=true;i.data("validation"+g.validatorName+"Message",g.message);setTimeout(function(){i.trigger("change.validation")},1)}},failure:function(){g.lastValid=true;g.message="ajax call failed";g.lastFinished=true;i.data("validation"+g.validatorName+"Message",g.message);setTimeout(function(){i.trigger("change.validation")},1)}})}return false}},regex:{name:"regex",init:function(h,g){return{regex:f(h.data("validation"+g+"Regex"))}},validate:function(i,h,g){return(!g.regex.test(h)&&!g.negative)||(g.regex.test(h)&&g.negative)}},required:{name:"required",init:function(h,g){return{}},validate:function(i,h,g){return !!(h.length==0&&!g.negative)||!!(h.length>0&&g.negative)},blockSubmit:true},match:{name:"match",init:function(i,g){var h=i.parents("form").first().find('[name="'+i.data("validation"+g+"Match")+'"]').first();h.bind("validation.validation",function(){i.trigger("change.validation",{submitting:true})});return{element:h}},validate:function(i,h,g){return(h!=g.element.val()&&!g.negative)||(h==g.element.val()&&g.negative)},blockSubmit:true},max:{name:"max",init:function(h,g){return{max:h.data("validation"+g+"Max")}},validate:function(i,h,g){return(parseFloat(h,10)>parseFloat(g.max,10)&&!g.negative)||(parseFloat(h,10)<=parseFloat(g.max,10)&&g.negative)}},min:{name:"min",init:function(h,g){return{min:h.data("validation"+g+"Min")}},validate:function(i,h,g){return(parseFloat(h)<parseFloat(g.min)&&!g.negative)||(parseFloat(h)>=parseFloat(g.min)&&g.negative)}},maxlength:{name:"maxlength",init:function(h,g){return{maxlength:h.data("validation"+g+"Maxlength")}},validate:function(i,h,g){return((h.length>g.maxlength)&&!g.negative)||((h.length<=g.maxlength)&&g.negative)}},minlength:{name:"minlength",init:function(h,g){return{minlength:h.data("validation"+g+"Minlength")}},validate:function(i,h,g){return((h.length<g.minlength)&&!g.negative)||((h.length>=g.minlength)&&g.negative)}},maxchecked:{name:"maxchecked",init:function(i,g){var h=i.parents("form").first().find('[name="'+i.attr("name")+'"]');h.bind("click.validation",function(){i.trigger("change.validation",{includeEmpty:true})});return{maxchecked:i.data("validation"+g+"Maxchecked"),elements:h}},validate:function(i,h,g){return(g.elements.filter(":checked").length>g.maxchecked&&!g.negative)||(g.elements.filter(":checked").length<=g.maxchecked&&g.negative)},blockSubmit:true},minchecked:{name:"minchecked",init:function(i,g){var h=i.parents("form").first().find('[name="'+i.attr("name")+'"]');h.bind("click.validation",function(){i.trigger("change.validation",{includeEmpty:true})});return{minchecked:i.data("validation"+g+"Minchecked"),elements:h}},validate:function(i,h,g){return(g.elements.filter(":checked").length<g.minchecked&&!g.negative)||(g.elements.filter(":checked").length>=g.minchecked&&g.negative)},blockSubmit:true}},builtInValidators:{email:{name:"Email",type:"shortcut",shortcut:"validemail"},validemail:{name:"Validemail",type:"regex",regex:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",message:"Not a valid email address<!-- data-validator-validemail-message to override -->"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},number:{name:"Number",type:"regex",regex:"([+-]?\\\d+(\\.\\\d*)?([eE][+-]?[0-9]+)?)?",message:"Must be a number<!-- data-validator-number-message to override -->"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\\d+",message:"No decimal places allowed<!-- data-validator-integer-message to override -->"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"},required:{name:"Required",type:"required",message:"This is required<!-- data-validator-required-message to override -->"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option<!-- data-validation-checkone-message to override -->"}}};var c=function(g){return g.toLowerCase().replace(/(^|\s)([a-z])/g,function(h,j,i){return j+i.toUpperCase()})};var b=function(i){var h=i.val();var g=i.attr("type");if(g=="checkbox"){h=(i.is(":checked")?h:"")}if(g=="radio"){h=(d('input[name="'+i.attr("name")+'"]:checked').length>0?h:"")}return h};function f(g){return new RegExp("^"+g+"$")}function a(m,j){var g=Array.prototype.slice.call(arguments).splice(2);var l=m.split(".");var k=l.pop();for(var h=0;h<l.length;h++){j=j[l[h]]}return j[k].apply(this,g)}d.fn.jqBootstrapValidation=function(g){if(e.methods[g]){return e.methods[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return e.methods.init.apply(this,arguments)}else{d.error("Method "+g+" does not exist on jQuery.jqBootstrapValidation");return null}}};d.jqBootstrapValidation=function(g){d(":input").not("[type=image],[type=submit]").jqBootstrapValidation(g)}})(jQuery);