(function(d){var e={options:{sniffHtml:true,preventSubmit:true,submitError:false,submitSuccess:false},methods:{init:function(g){var h=d.extend(true,{},e);h.options=d.extend(true,h.options,g);var i=this;d.unique(i.map(function(){var j=d(this);return j.parents("form")[0]})).bind("submit",function(l){var j=d(this);var m=0;var k=j.find("input,textarea,select").not("[type=submit],[type=image]");k.trigger("submit.validation").trigger("validationLostFocus.validation");k.each(function(n,o){var p=d(o),q=p.parents(".control-group").first();if(q.hasClass("warning")){q.removeClass("warning").addClass("error");m++}});k.trigger("validationLostFocus.validation");if(m){if(h.options.preventSubmit){l.preventDefault()}j.addClass("error");if(d.isFunction(h.options.submitError)){h.options.submitError(j,l,k.jqBootstrapValidation("collectErrors",true))}}else{j.removeClass("error");if(d.isFunction(h.options.submitSuccess)){h.options.submitSuccess(j,l)}}});return this.each(function(){var o=d(this),n=o.parents(".control-group").first(),r=n.find(".help-block").first(),t=o.parents("form").first(),j=[];if(h.options.sniffHtml){var s="";if(o.attr("pattern")!==undefined){s="Not in the expected format<!-- data-validation-pattern-message to override -->";if(o.data("validationPatternMessage")){s=o.data("validationPatternMessage")}o.data("validationPatternMessage",s);o.data("validationPatternRegex",o.attr("pattern"))}if(o.attr("max")!==undefined||o.attr("aria-valuemax")!==undefined){var q=(o.attr("max")!==undefined?o.attr("max"):o.attr("aria-valuemax"));s="Too high: Maximum of '"+q+"'<!-- data-validation-max-message to override -->";if(o.data("validationMaxMessage")){s=o.data("validationMaxMessage")}o.data("validationMaxMessage",s);o.data("validationMaxMax",q)}if(o.attr("min")!==undefined||o.attr("aria-valuemin")!==undefined){var l=(o.attr("min")!==undefined?o.attr("min"):o.attr("aria-valuemin"));s="Too low: Minimum of '"+l+"'<!-- data-validation-min-message to override -->";if(o.data("validationMinMessage")){s=o.data("validationMinMessage")}o.data("validationMinMessage",s);o.data("validationMinMin",l)}if(o.attr("maxlength")!==undefined){s="Too long: Maximum of '"+o.attr("maxlength")+"' characters<!-- data-validation-maxlength-message to override -->";if(o.data("validationMaxlengthMessage")){s=o.data("validationMaxlengthMessage")}o.data("validationMaxlengthMessage",s);o.data("validationMaxlengthMaxlength",o.attr("maxlength"))}if(o.attr("minlength")!==undefined){s="Too short: Minimum of '"+o.attr("minlength")+"' characters<!-- data-validation-minlength-message to override -->";if(o.data("validationMinlengthMessage")){s=o.data("validationMinlengthMessage")}o.data("validationMinlengthMessage",s);o.data("validationMinlengthMinlength",o.attr("minlength"))}if(o.attr("required")!==undefined||o.attr("aria-required")!==undefined){s=h.builtInValidators.required.message;if(o.data("validationRequiredMessage")){s=o.data("validationRequiredMessage")}o.data("validationRequiredMessage",s)}if(o.attr("type")!==undefined&&o.attr("type").toLowerCase()=="number"){s=h.builtInValidators.number.message;if(o.data("validationNumberMessage")){s=o.data("validationNumberMessage")}o.data("validationNumberMessage",s)}if(o.attr("type")!==undefined&&o.attr("type").toLowerCase()=="email"){s="Not a valid email address<!-- data-validator-validemail-message to override -->";if(o.data("validationValidemailMessage")){s=o.data("validationValidemailMessage")}else{if(o.data("validationEmailMessage")){s=o.data("validationEmailMessage")}}o.data("validationValidemailMessage",s)}if(o.attr("minchecked")!==undefined){s="Not enough options checked; Minimum of '"+o.attr("minchecked")+"' required<!-- data-validation-minchecked-message to override -->";if(o.data("validationMincheckedMessage")){s=o.data("validationMincheckedMessage")}o.data("validationMincheckedMessage",s);o.data("validationMincheckedMinchecked",o.attr("minchecked"))}if(o.attr("maxchecked")!==undefined){s="Too many options checked; Maximum of '"+o.attr("maxchecked")+"' required<!-- data-validation-maxchecked-message to override -->";if(o.data("validationMaxcheckedMessage")){s=o.data("validationMaxcheckedMessage")}o.data("validationMaxcheckedMessage",s);o.data("validationMaxcheckedMaxchecked",o.attr("maxchecked"))}}if(o.data("validation")!=undefined){j=o.data("validation").split(",")}d.each(o.data(),function(u,v){var w=u.replace(/([A-Z])/g,",$1").split(",");if(w[0]=="validation"&&w[1]){j.push(w[1])}});var m=j;var p=[];do{d.each(j,function(u,v){j[u]=c(v)});j=d.unique(j);p=[];d.each(m,function(v,w){if(o.data("validation"+w+"Shortcut")!=undefined){d.each(o.data("validation"+w+"Shortcut").split(","),function(y,x){p.push(x)})}else{if(h.builtInValidators[w.toLowerCase()]){var u=h.builtInValidators[w.toLowerCase()];if(u.type.toLowerCase()=="shortcut"){d.each(u.shortcut.split(","),function(x,y){y=c(y);p.push(y);j.push(y)})}}}});m=p}while(m.length>0);var k={};d.each(j,function(v,x){var y=o.data("validation"+x+"Message");var A=(y!=undefined);var w=false;y=(y?y:"'"+x+"' validation failed <!-- Add attribute 'data-validation-"+x.toLowerCase()+"-message' to input to change this message -->");d.each(h.validatorTypes,function(B,C){if(k[B]==undefined){k[B]=[]}if(!w&&o.data("validation"+x+c(C.name))!==undefined){k[B].push(d.extend(true,{name:c(C.name),message:y},C.init(o,x)));w=true}});if(!w&&h.builtInValidators[x.toLowerCase()]){var u=d.extend(true,{},h.builtInValidators[x.toLowerCase()]);if(A){u.message=y}var z=u.type.toLowerCase();if(z=="shortcut"){w=true}else{d.each(h.validatorTypes,function(B,C){if(k[B]==undefined){k[B]=[]}if(!w&&z==B.toLowerCase()){o.data("validation"+x+c(C.name),u[C.name.toLowerCase()]);k[z].push(d.extend(u,C.init(o,x)));w=true}})}}if(!w){d.error("Cannot find validation info for '"+x+"'")}});r.data("original-contents",(r.data("original-contents")?r.data("original-contents"):r.html()));r.data("original-role",(r.data("original-role")?r.data("original-role"):r.attr("role")));n.data("original-classes",(n.data("original-clases")?n.data("original-classes"):n.attr("class")));o.data("original-aria-invalid",(o.data("original-aria-invalid")?o.data("original-aria-invalid"):o.attr("aria-invalid")));o.bind("validation.validation",function(v,x){v=v;var w=b(o);var u=[];d.each(k,function(y,z){if(w||w.length||(x&&x.includeEmpty)||(!!h.validatorTypes[y].blockSubmit&&x&&!!x.submitting)){d.each(z,function(B,A){if(h.validatorTypes[y].validate(o,w,A)){u.push(A.message)}})}});return u});o.bind("getValidators.validation",function(u){u=u;return k});o.bind("submit.validation",function(){return o.triggerHandler("change.validation",{submitting:true})});o.bind(["keyup","focus","blur","click","keydown","keypress","change"].join(".validation ")+".validation",function(w,x){var v=b(o);var u=[];n.find("input,textarea,select").each(function(A,B){var y=u.length;d.each(d(B).triggerHandler("validation.validation",x),function(C,D){u.push(D)});if(u.length>y){d(B).attr("aria-invalid","true")}else{var z=o.data("original-aria-invalid");d(B).attr("aria-invalid",(z!==undefined?z:false))}});t.find("input,select,textarea").not(o).not('[name="'+o.attr("name")+'"]').trigger("validationLostFocus.validation");u=d.unique(u);if(u.length){n.removeClass("success error").addClass("warning");r.html('<ul role="alert"><li>'+u.join("</li><li>")+"</li></ul>")}else{n.removeClass("warning error success");if(v.length>0){n.addClass("success")}r.html(r.data("original-contents"))}if(w.type=="blur"){n.removeClass("success")}});o.bind("validationLostFocus.validation",function(){n.removeClass("success")})})},destroy:function(){return this.each(function(){var g=d(this),i=g.parents(".control-group").first(),h=i.find(".help-block").first();g.unbind(".validation");h.html(h.data("original-contents"));i.attr("class",i.data("original-classes"));g.attr("aria-invalid",g.data("original-aria-invalid"));h.attr("role",g.data("original-role"))})},collectErrors:function(g){var h={};this.each(function(l,m){var k=d(m);var j=k.attr("name");var n=k.triggerHandler("validation.validation",{includeEmpty:true});h[j]=d.extend(true,n,h[j])});d.each(h,function(j,k){if(k.length==0){delete h[j]}});return h},hasErrors:function(){var g=[];this.each(function(h,j){g=g.concat(d(j).triggerHandler("getValidators.validation")?d(j).triggerHandler("validation.validation",{submitting:true}):[])});return(g.length>0)},override:function(g){e=d.extend(true,e,g)}},validatorTypes:{callback:{name:"callback",init:function(h,g){return{validatorName:g,callback:h.data("validation"+g+"Callback"),lastValue:h.val(),lastValid:true,lastFinished:true}},validate:function(j,i,h){if(h.lastValue==i&&h.lastFinished){return !h.lastValid}if(h.lastFinished==true){h.lastValue=i;h.lastValid=true;h.lastFinished=false;var k=h;var g=j;a(h.callback,window,j,i,function(l){if(k.lastValue==l.value){k.lastValid=l.valid;if(l.message){k.message=l.message}k.lastFinished=true;g.data("validation"+k.validatorName+"Message",k.message);setTimeout(function(){g.trigger("change.validation")},1)}})}return false}},ajax:{name:"ajax",init:function(h,g){return{validatorName:g,url:h.data("validation"+g+"Ajax"),lastValue:h.val(),lastValid:true,lastFinished:true}},validate:function(i,h,g){console.log(i);if(g.lastValue==h&&g.lastFinished==true){return g.lastValid==false}if(g.lastFinished==true){g.lastValue=h;g.lastValid=true;g.lastFinished=false;d.ajax({url:g.url,data:"value="+h+"&field="+i.attr("name"),dataType:"json",success:function(j){if(g.lastValue==j.value){g.lastValid=(j.valid);if(j.message){g.message=j.message}g.lastFinished=true;i.data("validation"+g.validatorName+"Message",g.message);setTimeout(function(){i.trigger("change.validation")},1)}},failure:function(){g.lastValid=true;g.message="ajax call failed";g.lastFinished=true;i.data("validation"+g.validatorName+"Message",g.message);setTimeout(function(){i.trigger("change.validation")},1)}})}return false}},regex:{name:"regex",init:function(h,g){return{regex:f(h.data("validation"+g+"Regex"))}},validate:function(i,h,g){return(!g.regex.test(h)&&!g.negative)||(g.regex.test(h)&&g.negative)}},required:{name:"required",init:function(h,g){return{}},validate:function(i,h,g){return !!(h.length==0&&!g.negative)||!!(h.length>0&&g.negative)},blockSubmit:true},match:{name:"match",init:function(i,g){var h=i.parents("form").first().find('[name="'+i.data("validation"+g+"Match")+'"]').first();h.bind("validation.validation",function(){i.trigger("change.validation",{submitting:true})});return{element:h}},validate:function(i,h,g){return(h!=g.element.val()&&!g.negative)||(h==g.element.val()&&g.negative)},blockSubmit:true},max:{name:"max",init:function(h,g){return{max:h.data("validation"+g+"Max")}},validate:function(i,h,g){return(parseFloat(h,10)>parseFloat(g.max,10)&&!g.negative)||(parseFloat(h,10)<=parseFloat(g.max,10)&&g.negative)}},min:{name:"min",init:function(h,g){return{min:h.data("validation"+g+"Min")}},validate:function(i,h,g){return(parseFloat(h)<parseFloat(g.min)&&!g.negative)||(parseFloat(h)>=parseFloat(g.min)&&g.negative)}},maxlength:{name:"maxlength",init:function(h,g){return{maxlength:h.data("validation"+g+"Maxlength")}},validate:function(i,h,g){return((h.length>g.maxlength)&&!g.negative)||((h.length<=g.maxlength)&&g.negative)}},minlength:{name:"minlength",init:function(h,g){return{minlength:h.data("validation"+g+"Minlength")}},validate:function(i,h,g){return((h.length<g.minlength)&&!g.negative)||((h.length>=g.minlength)&&g.negative)}},maxchecked:{name:"maxchecked",init:function(i,g){var h=i.parents("form").first().find('[name="'+i.attr("name")+'"]');h.bind("click.validation",function(){i.trigger("change.validation",{includeEmpty:true})});return{maxchecked:i.data("validation"+g+"Maxchecked"),elements:h}},validate:function(i,h,g){return(g.elements.filter(":checked").length>g.maxchecked&&!g.negative)||(g.elements.filter(":checked").length<=g.maxchecked&&g.negative)},blockSubmit:true},minchecked:{name:"minchecked",init:function(i,g){var h=i.parents("form").first().find('[name="'+i.attr("name")+'"]');h.bind("click.validation",function(){i.trigger("change.validation",{includeEmpty:true})});return{minchecked:i.data("validation"+g+"Minchecked"),elements:h}},validate:function(i,h,g){return(g.elements.filter(":checked").length<g.minchecked&&!g.negative)||(g.elements.filter(":checked").length>=g.minchecked&&g.negative)},blockSubmit:true}},builtInValidators:{email:{name:"Email",type:"shortcut",shortcut:"validemail"},validemail:{name:"Validemail",type:"regex",regex:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",message:"Not a valid email address<!-- data-validator-validemail-message to override -->"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},number:{name:"Number",type:"regex",regex:"([+-]?\\\d+(\\.\\\d*)?([eE][+-]?[0-9]+)?)?",message:"Must be a number<!-- data-validator-number-message to override -->"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\\d+",message:"No decimal places allowed<!-- data-validator-integer-message to override -->"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"},required:{name:"Required",type:"required",message:"This is required<!-- data-validator-required-message to override -->"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option<!-- data-validation-checkone-message to override -->"}}};var c=function(g){return g.toLowerCase().replace(/(^|\s)([a-z])/g,function(h,j,i){return j+i.toUpperCase()})};var b=function(i){var h=i.val();var g=i.attr("type");if(g=="checkbox"){h=(i.is(":checked")?h:"")}if(g=="radio"){h=(d('input[name="'+i.attr("name")+'"]:checked').length>0?h:"")}return h};function f(g){return new RegExp("^"+g+"$")}function a(m,j){var g=Array.prototype.slice.call(arguments).splice(2);var l=m.split(".");var k=l.pop();for(var h=0;h<l.length;h++){j=j[l[h]]}return j[k].apply(this,g)}d.fn.jqBootstrapValidation=function(g){if(e.methods[g]){return e.methods[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return e.methods.init.apply(this,arguments)}else{d.error("Method "+g+" does not exist on jQuery.jqBootstrapValidation");return null}}};d.jqBootstrapValidation=function(g){d(":input").not("[type=image],[type=submit]").jqBootstrapValidation(g)}})(jQuery);