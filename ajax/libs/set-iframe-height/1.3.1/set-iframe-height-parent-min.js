!function(e,r){"use strict";var t=e.jQuery;if("function"==typeof define&&define.amd)t?define([],r.bind(null,t)):define(["jquery"],r);else if("object"==typeof exports)module.exports=r(t?t:require("jquery"));else{if(!t)throw"Missing required jQuery dependency";e.setIframeHeight=r(t)}}(this,function(e){"use strict";function r(r){var t=null;return e("iframe").each(function(n,a){var f=e(a),d=f.attr("data-iframeAutoHeight-currentSrc")||a.src;return d&&(d=i(d),d===r)?(t=a,!1):void 0}),t}function t(r){var t=null;return e("iframe").each(function(i,n){var a=e(n);return a.data("setIframeHeight_id")===r?(t=n,!1):void 0}),t}function i(e){return 0===e.indexOf("/")&&(e=n(document.location.href)+e),e}function n(e){var r=e.match(/https?:\/\/.[^/]+/)||[];return r[0]}function a(e){return e.replace(/^https?:\/\//,"//")}function f(n,f){var d;if(d=t(f.iframeId),d||(d=r(f.iframeSrc)),!d&&f.iframeReferrer&&(d=r(f.iframeReferrer)),d){var o=e(d),h=e(window);o.data("setIframeHeight_id",f.iframeId),o.height(f.height);var g=a(o.attr("data-iframeAutoHeight-currentSrc")||d.src)!==a(f.iframeSrc);o.attr("data-iframeAutoHeight-currentSrc",f.iframeSrc);var s=c[f.iframeId],u=f.height;if(void 0===s?h.trigger("setIframeHeight:determined",f):s>u?h.trigger("setIframeHeight:shrinked",f):u>s&&e(window).trigger("setIframeHeight:enlarged",f),c[f.iframeId]=u,window.history.replaceState&&o.attr("data-iframeAutoHeight-deepLinkPattern")&&g){var m=i(o.attr("data-iframeAutoHeight-deepLinkPattern").replace(/%deepLinkIframeSrc%/,encodeURIComponent(f.iframeSrc)));a(document.location.href)!==a(m)&&(window.history.replaceState({},"",m),e(window).trigger("setIframeHeight:deepLink:changed",{childUrl:f.iframeSrc,parentUrl:m})),d.contentWindow&&d.contentWindow.postMessage&&d.contentWindow.postMessage('setIframeHeight:deepLink:changed::{ "parentUrl": "'+m+'", "childUrl": "'+f.iframeSrc+'"}',"*")}}}function d(r){var t=r.originalEvent.data;if("string"==typeof t&&t.indexOf("::")){var t=t.split("::");if(2===t.length&&"setIframeHeight"===t[0]){var i=e.parseJSON(t[1]);o.setHeight(i)}}}e(window).bind("setIframeHeight",f).bind("message",d);var o={setHeight:function(r){r.height=parseInt(r.height,10),e(window).trigger("setIframeHeight",[r])}},c={};return o});