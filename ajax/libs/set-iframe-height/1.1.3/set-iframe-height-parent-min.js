!function(e,r){var t=e.jQuery;if("function"==typeof define&&define.amd)t?define([],r.bind(null,t)):define(["jquery"],r);else if("object"==typeof exports)module.exports=r(t?t:require("jquery"));else{if(!t)throw"Missing required jQuery dependency";e.setIframeHeight=r(t)}}(this,function(e){function r(r){var i=null;return e("iframe").each(function(a,n){var f=e(n),d=f.attr("data-iframeAutoHeight-currentSrc")||n.src;d&&(0===d.indexOf("/")&&(d=t(document.location.href)+d),d===r?i=n:t(d)===t(r)&&(i=n))}),i}function t(e){var r=e.match(/https?:\/\/.[^/]+/)||[];return r[0]}function i(t,i){var a=r(i.iframeSrc);if(!a&&i.iframeReferrer&&(a=r(i.iframeReferrer)),a){var n=e(a);if(n.height(i.height),n.attr("data-iframeAutoHeight-currentSrc",i.iframeSrc),window.history.replaceState&&n.attr("data-iframeAutoHeight-deepLinkPattern")){var f=n.attr("data-iframeAutoHeight-deepLinkPattern").replace(/%deepLinkIframeSrc%/,encodeURIComponent(i.iframeSrc));document.location.href!==f&&(window.history.replaceState({},"",f),e(window).trigger("setIframeHeight:deepLink:changed",{childUrl:i.iframeSrc,parentUrl:f}))}}}function a(r){var t=r.originalEvent.data;if(t.indexOf("::")){var t=t.split("::");if(2===t.length&&"setIframeHeight"===t[0]){var i=e.parseJSON(t[1]);f.setHeight(i.iframeSrc,i.height,i.iframeReferrer)}}}e(window).bind("setIframeHeight",i).bind("message",a);var n,f={setHeight:function(r,t,i){t=parseInt(t,10);var a=[{iframeSrc:r,height:t,lastHeight:n,iframeReferrer:i}],f=e(window);f.trigger("setIframeHeight",a),void 0===n?f.trigger("setIframeHeight:determined",a):n>t?f.trigger("setIframeHeight:shrinked",a):t>n&&e(window).trigger("setIframeHeight:enlarged",a),n=t}};return f});