/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=Object,ba=Math,ca=window,da=parseInt,ea=document,e=Array,fa=Error,ga=JSON,ha=String;function ia(a,b){return a.table=b}function ja(a,b){return a.name=b}function ka(a,b){return a.dump=b}function la(a,b){return a.clone=b}function ma(a,b){return a.exec=b}function na(a,b){return a.getName=b}function oa(a,b){return a.close=b}function pa(a,b){return a.value=b}function qa(a,b){return a.update=b}function ra(a,b){return a.delete=b}function sa(a,b){return a.onsuccess=b}
function ta(a,b){return a.clear=b}function ua(a,b){return a.values=b}function va(a,b){return a.remove=b}function wa(a,b){return a.child=b}function xa(a,b){return a.next=b}function ya(a,b){return a.onerror=b}function za(a,b){return a.length=b}function f(a,b){return a.toString=b}function Aa(a,b){return a.bind=b}function Ba(a,b){return a.subscribe=b}function Ca(a,b){return a.forEach=b}function Ea(a,b){return a.getPriority=b}
var Fa="openCursor",Ga="filter",Ha="once",Ia="objectStoreNames",Ja="split",h="table",Ka="reduce",m="join",La="reject",Ma="timing",Na="item",n="slice",Oa="target",q="name",r="call",t="prototype",Pa="exec",u="getName",Qa="close",Ra="concat",v="value",Sa="setImmediate",Ta="every",Ua="update",Va="global",Wa="propertyIsEnumerable",Xa="delete",Ya="sort",Za="indexOf",$a="some",ab="count",bb="orderByChild",cb="clear",db="values",fb="replace",gb="reverse",hb="continue",ib="removeChild",jb="remove",kb="child",
lb="create",w="push",x="then",mb="transaction",nb="index",ob="context",z="splice",pb="autoIncrement",qb="next",rb="shift",sb="hasOwnProperty",tb="contains",ub="version",vb="objectStore",wb="offset",xb="apply",yb="stringify",A="entries",B="length",zb="info",C="toString",Ab="compare",D="bind",Bb="getParent",Cb="rows",E="forEach",Db="getPriority",Eb="getTime",Fb="resolve",Gb="result",F="size";function Hb(){return function(){}}function Ib(a){return function(b){this[a]=b}}
function G(a){return function(){return this[a]}}function Jb(a){return function(){return a}}var H,Kb=this;function Lb(a){return void 0!==a}function I(a,b,c){a=a[Ja](".");c=c||Kb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[B]&&(d=a[rb]());)!a[B]&&Lb(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function Mb(){}function Nb(a){a.Je=function(){return a.wg?a.wg:a.wg=new a}}
function Ob(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof aa)return b;var c=aa[t][C][r](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[B]&&"undefined"!=typeof a[z]&&"undefined"!=typeof a[Wa]&&!a[Wa]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[r]&&"undefined"!=typeof a[Wa]&&!a[Wa]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[r])return"object";return b}
function Pb(a){return null===a}function Qb(a){return null!=a}function Rb(a){var b=Ob(a);return"array"==b||"object"==b&&"number"==typeof a[B]}function Sb(a){return"string"==typeof a}function Tb(a){return"function"==Ob(a)}function Ub(a){return a[Vb]||(a[Vb]=++Wb)}var Vb="closure_uid_"+(1E9*ba.random()>>>0),Wb=0;function Xb(a,b,c){return a[r][xb](a[D],arguments)}
function Yb(a,b,c){if(!a)throw fa();if(2<arguments[B]){var d=e[t][n][r](arguments,2);return function(){var c=e[t][n][r](arguments);e[t].unshift[xb](c,d);return a[xb](b,c)}}return function(){return a[xb](b,arguments)}}function J(a,b,c){J=Function[t][D]&&-1!=Function[t][D][C]()[Za]("native code")?Xb:Yb;return J[xb](null,arguments)}function Zb(a,b){var c=e[t][n][r](arguments,1);return function(){var b=c[n]();b[w][xb](b,arguments);return a[xb](this,b)}}
function K(a,b){function c(){}c.prototype=b[t];a.Nb=b[t];a.prototype=new c;a[t].constructor=a;a.Fl=function(a,c,k){for(var l=e(arguments[B]-2),p=2;p<arguments[B];p++)l[p-2]=arguments[p];return b[t][c][xb](a,l)}};function $b(a){if(fa.captureStackTrace)fa.captureStackTrace(this,$b);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=ha(a))}K($b,fa);ja($b[t],"CustomError");function ac(a,b){for(var c=a[Ja]("%s"),d="",g=e[t][n][r](arguments,1);g[B]&&1<c[B];)d+=c[rb]()+g[rb]();return d+c[m]("%s")};function bc(a,b){b.unshift(a);$b[r](this,ac[xb](null,b));b[rb]()}K(bc,$b);ja(bc[t],"AssertionError");function cc(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),k=d;else a&&(g+=": "+a,k=b);throw new bc(""+g,k||[]);}function L(a,b,c){a||cc("",null,b,e[t][n][r](arguments,2));return a}function dc(a,b){throw new bc("Failure"+(a?": "+a:""),e[t][n][r](arguments,1));}function ec(a,b,c){Tb(a)||cc("Expected function but got %s: %s.",[Ob(a),a],b,e[t][n][r](arguments,2));return a};function fc(a,b,c){this.yk=c;this.Mi=a;this.gl=b;this.ae=0;this.Vd=null}fc[t].get=function(){var a;0<this.ae?(this.ae--,a=this.Vd,this.Vd=a[qb],xa(a,null)):a=this.Mi();return a};fc[t].put=function(a){this.gl(a);this.ae<this.yk&&(this.ae++,xa(a,this.Vd),this.Vd=a)};var gc=e[t],hc=gc[Za]?function(a,b,c){L(null!=a[B]);return gc[Za][r](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ba.max(0,a[B]+c):c;if(Sb(a))return Sb(b)&&1==b[B]?a[Za](b,c):-1;for(;c<a[B];c++)if(c in a&&a[c]===b)return c;return-1},ic=gc[E]?function(a,b,c){L(null!=a[B]);gc[E][r](a,b,c)}:function(a,b,c){for(var d=a[B],g=Sb(a)?a[Ja](""):a,k=0;k<d;k++)k in g&&b[r](c,g[k],k,a)},jc=gc.map?function(a,b,c){L(null!=a[B]);return gc.map[r](a,b,c)}:function(a,b,c){for(var d=a[B],g=e(d),k=Sb(a)?a[Ja](""):a,l=0;l<
d;l++)l in k&&(g[l]=b[r](c,k[l],l,a));return g},kc=gc[Ka]?function(a,b,c,d){L(null!=a[B]);d&&(b=J(b,d));return gc[Ka][r](a,b,c)}:function(a,b,c,d){var g=c;ic(a,function(c,l){g=b[r](d,g,c,l,a)});return g},lc=gc[$a]?function(a,b,c){L(null!=a[B]);return gc[$a][r](a,b,c)}:function(a,b,c){for(var d=a[B],g=Sb(a)?a[Ja](""):a,k=0;k<d;k++)if(k in g&&b[r](c,g[k],k,a))return!0;return!1};function mc(a,b){L(null!=a[B]);return 1==gc[z][r](a,b,1)[B]}
function nc(a,b,c){a:{for(var d=a[B],g=Sb(a)?a[Ja](""):a,k=0;k<d;k++)if(k in g&&b[r](c,g[k],k,a)){b=k;break a}b=-1}return 0<=b?(mc(a,b),!0):!1}function oc(a){var b=a[B];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function pc(a,b){for(var c=1;c<arguments[B];c++){var d=arguments[c];if(Rb(d)){var g=a[B]||0,k=d[B]||0;za(a,g+k);for(var l=0;l<k;l++)a[g+l]=d[l]}else a[w](d)}}function qc(a,b,c,d){L(null!=a[B]);return gc[z][xb](a,rc(arguments,1))}
function rc(a,b,c){L(null!=a[B]);return 2>=arguments[B]?gc[n][r](a,b):gc[n][r](a,b,c)}function sc(a,b){return a>b?1:a<b?-1:0}function tc(a,b,c){var d;c=c||sc;for(var g=0,k=a[B];g<k;){var l=g+k>>1,p;p=c(b,a[l]);0<p?g=l+1:(k=l,d=!p)}d=d?g:~g;return 0>d?(qc(a,-(d+1),0,b),!0):!1}function uc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}
function vc(a){for(var b=[],c=0;c<arguments[B];c++){var d=arguments[c];if("array"==Ob(d))for(var g=0;g<d[B];g+=8192)for(var k=rc(d,g,g+8192),k=vc[xb](null,k),l=0;l<k[B];l++)b[w](k[l]);else b[w](d)}return b};function wc(a,b,c){for(var d in a)b[r](c,a[d],d,a)}function xc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function yc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var zc;a:{var Ac=Kb.navigator;if(Ac){var Cc=Ac.userAgent;if(Cc){zc=Cc;break a}}zc=""};function Dc(a){Kb.setTimeout(function(){throw a;},0)}var Ec;
function Fc(){var a=Kb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof ca&&ca.postMessage&&ca.addEventListener&&-1==zc[Za]("Presto")&&(a=function(){var a=ea.createElement("IFRAME");a.style.display="none";a.src="";ea.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[Qa]();var c="callImmediate"+ba.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=J(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==zc[Za]("Trident")&&-1==zc[Za]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(Lb(c[qb])){c=c[qb];var a=c.Mf;c.Mf=null;a()}};return function(a){xa(d,{Mf:a});d=d[qb];b.port2.postMessage(0)}}return"undefined"!==typeof ea&&"onreadystatechange"in ea.createElement("SCRIPT")?function(a){var b=ea.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=
null;b.parentNode[ib](b);b=null;a();a=null};ea.documentElement.appendChild(b)}:function(a){Kb.setTimeout(a,0)}};function Gc(){this.me=this.lc=null}var Ic=new fc(function(){return new Hc},function(a){a.reset()},100);Gc[t].add=function(a,b){var c=this.$j();c.set(a,b);this.me?xa(this.me,c):(L(!this.lc),this.lc=c);this.me=c};va(Gc[t],function(){var a=null;this.lc&&(a=this.lc,this.lc=this.lc[qb],this.lc||(this.me=null),xa(a,null));return a});Gc[t].hl=function(a){Ic.put(a)};Gc[t].$j=function(){return Ic.get()};function Hc(){this.scope=this.Fe=null;xa(this,null)}
Hc[t].set=function(a,b){this.Fe=a;this.scope=b;xa(this,null)};Hc[t].reset=function(){this.scope=this.Fe=null;xa(this,null)};function Jc(a,b){Kc||Lc();Mc||(Kc(),Mc=!0);Nc.add(a,b)}var Kc;function Lc(){if(Kb.Promise&&Kb.Promise[Fb]){var a=Kb.Promise[Fb](void 0);Kc=function(){a[x](Oc)}}else Kc=function(){var a=Oc;if(!Tb(Kb[Sa])||Kb.Window&&Kb.Window[t]&&Kb.Window[t][Sa]==Kb[Sa])Ec||(Ec=Fc()),Ec(a);else Kb[Sa](a)}}var Mc=!1,Nc=new Gc;[][w](function(){Mc=!1;Nc=new Gc});function Oc(){for(var a=null;a=Nc[jb]();){try{a.Fe[r](a.scope)}catch(b){Dc(b)}Nc.hl(a)}Mc=!1};function M(a,b){this.Ja=0;this.gh=void 0;this.yd=this.pc=this.D=null;this.Td=this.Ee=!1;if(a!=Mb)try{var c=this;a[r](b,function(a){c.Dc(2,a)},function(a){if(!(a instanceof Pc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.Dc(3,a)})}catch(d){this.Dc(3,d)}}function Qc(){wa(this,null);this.context=this.Ac=this.ac=null;xa(this,null);this.pe=!1}Qc[t].reset=function(){wa(this,null);this.context=this.Ac=this.ac=null;this.pe=!1};
var Rc=new fc(function(){return new Qc},function(a){a.reset()},100);function Sc(a,b,c){var d=Rc.get();d.ac=a;d.Ac=b;d.context=c;return d}function Tc(a){if(a instanceof M)return a;var b=new M(Mb);b.Dc(2,a);return b}function Uc(a){return new M(function(b,c){c(a)})}function Vc(a,b,c){Wc(a,b,c,null)||Jc(Zb(b,a))}function Xc(a){return new M(function(b,c){var d=a[B],g=[];if(d)for(var k=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,y;p<a[B];p++)y=a[p],Vc(y,Zb(k,p),l);else b(g)})}
function Yc(){var a,b,c=new M(function(c,g){a=c;b=g});return new Zc(c,a,b)}M[t].then=function(a,b,c){null!=a&&ec(a,"opt_onFulfilled should be a function.");null!=b&&ec(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.Df(Tb(a)?a:null,Tb(b)?b:null,c)};M[t].then=M[t][x];M[t].$goog_Thenable=!0;H=M[t];
H.tl=function(a,b,c){null!=a&&ec(a,"opt_onFulfilled should be a function.");null!=b&&ec(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.Cf(Sc(a||Mb,b||null,c))};H.uh=function(a,b){return this.Df(null,a,b)};H.Cf=function(a){this.ik()||2!=this.Ja&&3!=this.Ja||this.jh();this.Xk(a)};
H.Df=function(a,b,c){var d=Sc(null,null,null);wa(d,new M(function(g,k){d.ac=a?function(b){try{var d=a[r](c,b);g(d)}catch(y){k(y)}}:g;d.Ac=b?function(a){try{var d=b[r](c,a);!Lb(d)&&a instanceof Pc?k(a):g(d)}catch(y){k(y)}}:k}));d[kb].D=this;this.Cf(d);return d[kb]};H.wl=function(a){L(1==this.Ja);this.Ja=0;this.Dc(2,a)};H.xl=function(a){L(1==this.Ja);this.Ja=0;this.Dc(3,a)};
H.Dc=function(a,b){0==this.Ja&&(this==b&&(a=3,b=new TypeError("Promise cannot resolve to itself")),this.Ja=1,Wc(b,this.wl,this.xl,this)||(this.gh=b,this.Ja=a,this.D=null,this.jh(),3!=a||b instanceof Pc||$c(this,b)))};
function Wc(a,b,c,d){if(a instanceof M)return a.tl(b,c,d),!0;var g;if(a)try{g=!!a.$goog_Thenable}catch(k){g=!1}else g=!1;if(g)return a[x](b,c,d),!0;g=typeof a;if("object"==g&&null!=a||"function"==g)try{var l=a[x];if(Tb(l))return ad(a,l,b,c,d),!0}catch(p){return c[r](d,p),!0}return!1}function ad(a,b,c,d,g){function k(a){p||(p=!0,d[r](g,a))}function l(a){p||(p=!0,c[r](g,a))}var p=!1;try{b[r](a,l,k)}catch(y){k(y)}}H.jh=function(){this.Ee||(this.Ee=!0,Jc(this.fj,this))};H.ik=function(){return!!this.pc};
H.Xk=function(a){L(null!=a.ac);this.yd?xa(this.yd,a):this.pc=a;this.yd=a};H.Rk=function(){var a=null;this.pc&&(a=this.pc,this.pc=a[qb],xa(a,null));this.pc||(this.yd=null);null!=a&&L(null!=a.ac);return a};H.fj=function(){for(var a=null;a=this.Rk();)this.ej(a,this.Ja,this.gh);this.Ee=!1};H.ej=function(a,b,c){3==b&&a.Ac&&!a.pe&&this.el();if(a[kb])a[kb].D=null,bd(a,b,c);else try{a.pe?a.ac[r](a[ob]):bd(a,b,c)}catch(d){cd[r](null,d)}Rc.put(a)};
function bd(a,b,c){2==b?a.ac[r](a[ob],c):a.Ac&&a.Ac[r](a[ob],c)}H.Mh=Hb();H.el=function(){var a;for(a=this;a&&a.Td;a=a.D)a.Td=!1};function $c(a,b){a.Td=!0;Jc(function(){a.Td&&(a.Mh(b),cd[r](null,b))})}var cd=Dc;function Pc(a){$b[r](this,a)}K(Pc,$b);ja(Pc[t],"cancel");function Zc(a,b,c){this.ka=a;this.resolve=b;this.reject=c};
function dd(a,b){this.ya=a;this.cc=b||this.Zf()}var ed=0;H=dd[t];H.id=G("ya");H.Vh=Ib("ya");H.s=G("cc");H.Zf=function(){return{}};H.vh=G("cc");H.Ia=function(){return{id:this.ya,value:this.vh()}};H.Zb=function(a){return"#"==a.substr(-1)?this.ya:null};function fd(a){return new dd(a.id,a[v])}function gd(a){return new dd(ed++,a||{})}function hd(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a[B];++c)var d=a[c][C](16),b=b+(2>d[B]?"0"+d:d);return b};function id(a){this.type=a}function jd(a){dd[r](this,-1,a)}K(jd,dd);function kd(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[B],k=b[B],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var y=0;y<k+1;y++)l[0][y]=0;for(p=1;p<=g;p++)for(y=1;y<=k;y++)c(a[p-1],b[y-1])?l[p][y]=l[p-1][y-1]+1:l[p][y]=ba.max(l[p-1][y],l[p][y-1]);for(var Da=[],p=g,y=k;0<p&&0<y;)c(a[p-1],b[y-1])?(Da.unshift(d(p-1,y-1)),p--,y--):l[p-1][y]>l[p][y-1]?p--:y--;return Da}function ld(a){return kc(arguments,function(a,c){return a+c},0)}
function md(a){return ld[xb](null,arguments)/arguments[B]}function nd(a){var b=arguments[B];if(2>b)return 0;var c=md[xb](null,arguments);return ld[xb](null,jc(arguments,function(a){return ba.pow(a-c,2)}))/(b-1)}function od(a){return ba.sqrt(nd[xb](null,arguments))};var pd="StopIteration"in Kb?Kb.StopIteration:{message:"StopIteration",stack:""};function qd(){}xa(qd[t],function(){throw pd;});qd[t].Fc=function(){return this};function rd(a){if(a instanceof qd)return a;if("function"==typeof a.Fc)return a.Fc(!1);if(Rb(a)){var b=0,c=new qd;xa(c,function(){for(;;){if(b>=a[B])throw pd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function sd(a,b,c){if(Rb(a))try{ic(a,b,c)}catch(d){if(d!==pd)throw d;}else{a=rd(a);try{for(;;)b[r](c,a[qb](),void 0,a)}catch(g){if(g!==pd)throw g;}}}function td(a){if(lc(arguments,function(a){return!a[B]})||!arguments[B])return new qd;var b=new qd,c=arguments,d=uc(0,c[B]);xa(b,function(){if(d){for(var a=jc(d,function(a,b){return c[b][a]}),b=d[B]-1;0<=b;b--){L(d);if(d[b]<c[b][B]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw pd;});return b};function ud(a,b){this.h={};this.b=[];this.Ra=this.aa=0;var c=arguments[B];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}H=ud[t];H.Ub=G("aa");H.ga=function(){this.Ad();for(var a=[],b=0;b<this.b[B];b++)a[w](this.h[this.b[b]]);return a};H.Ua=function(){this.Ad();return this.b[Ra]()};H.ma=function(a){return vd(this.h,a)};H.zc=function(){return 0==this.aa};ta(H,function(){this.h={};za(this.b,0);this.Ra=this.aa=0});
va(H,function(a){return vd(this.h,a)?(delete this.h[a],this.aa--,this.Ra++,this.b[B]>2*this.aa&&this.Ad(),!0):!1});H.Ad=function(){if(this.aa!=this.b[B]){for(var a=0,b=0;a<this.b[B];){var c=this.b[a];vd(this.h,c)&&(this.b[b++]=c);a++}za(this.b,b)}if(this.aa!=this.b[B]){for(var d={},b=a=0;a<this.b[B];)c=this.b[a],vd(d,c)||(this.b[b++]=c,d[c]=1),a++;za(this.b,b)}};H.get=function(a,b){return vd(this.h,a)?this.h[a]:b};H.set=function(a,b){vd(this.h,a)||(this.aa++,this.b[w](a),this.Ra++);this.h[a]=b};
H.addAll=function(a){var b;a instanceof ud?(b=a.Ua(),a=a.ga()):(b=yc(a),a=xc(a));for(var c=0;c<b[B];c++)this.set(b[c],a[c])};Ca(H,function(a,b){for(var c=this.Ua(),d=0;d<c[B];d++){var g=c[d],k=this.get(g);a[r](b,k,g,this)}});la(H,function(){return new ud(this)});H.Fc=function(a){this.Ad();var b=0,c=this.Ra,d=this,g=new qd;xa(g,function(){if(c!=d.Ra)throw fa("The map has changed since the iterator was created");if(b>=d.b[B])throw pd;var g=d.b[b++];return a?g:d.h[g]});return g};
function vd(a,b){return aa[t][sb][r](a,b)};
function wd(){this.h=new ud;aa.defineProperty(this,"size",{get:function(){return this.h.Ub()}})}ta(wd[t],function(){this.h[cb]()});ta(wd[t],wd[t][cb]);ra(wd[t],function(a){return this.h[jb](a)});wd[t]["delete"]=wd[t][Xa];Ca(wd[t],function(a,b){return this.h[E](a,b)});Ca(wd[t],wd[t][E]);wd[t].get=function(a){return this.h.get(a)};wd[t].get=wd[t].get;wd[t].has=function(a){return this.h.ma(a)};wd[t].has=wd[t].has;wd[t].set=function(a,b){return this.h.set(a,b)};wd[t].set=wd[t].set;
function N(){return ca.Map&&ca.Map[t][db]&&ca.Map[t][E]?new Map:new wd}function xd(a){if(a instanceof wd)return a.h.Ua();var b=0,c=e(a[F]);a[E](function(a,g){c[b++]=g});return c}function yd(a){if(a instanceof wd)return a.h.ga();var b=0,c=e(a[F]);a[E](function(a){c[b++]=a});return c};var zd={};I("lf.TransactionType",zd,void 0);zd.READ_ONLY=0;zd.READ_WRITE=1;function Ad(a,b){this.Va=a;this.wh=b;this.Z=Yc()}H=Ad[t];H.Kj=G("Va");H.oa=function(){try{this.Va.ii()}catch(a){return Uc(a)}return(0==this.wh?this.Mc():this.Dk())[x](J(function(a){this.Va.oa();return a},this))};H.Dk=function(){this.Ek();this.Ck();return this.Mc()};
H.Ek=function(){this.Va.ig()[E](function(a,b){var c=this.Va.da().get(b),c=this.K(c[u](),J(c.sc,c)),d=yd(a.Wc()).map(function(a){return a.id()});0<d[B]&&c[jb](d).uh(this.Pe,this);d=yd(a.Yc()).map(function(a){return a[1]})[Ra](yd(a.Uc()));c.put(d).uh(this.Pe,this)},this)};H.Ck=function(){this.Va.Hj()[E](function(a){var b=this.K(a[u](),fd),c;b.get([-1])[x](function(a){c=a;return b[jb]([])})[x](function(){b.put(c);b.put(a.Ia())},J(this.Pe,this))},this)};H.Pe=function(a){this.Z[La](a)};function Bd(a){this.il=a}f(Bd[t],G("il"));var Cd=new Bd("backstore"),Dd=new Bd("cache"),Ed=new Bd("indexstore"),Fd=new Bd("engine"),Gd=new Bd("runner"),Hd=new Bd("observerregistry"),Id=new Bd("schema");function Jd(a){if("function"==typeof a.ga)return a.ga();if(Sb(a))return a[Ja]("");if(Rb(a)){for(var b=[],c=a[B],d=0;d<c;d++)b[w](a[d]);return b}return xc(a)};function Kd(a){this.h=new ud;a&&this.addAll(a)}function Ld(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Ub(a):b.substr(0,1)+a}H=Kd[t];H.Ub=function(){return this.h.Ub()};H.add=function(a){this.h.set(Ld(a),a)};H.addAll=function(a){a=Jd(a);for(var b=a[B],c=0;c<b;c++)this.add(a[c])};va(H,function(a){return this.h[jb](Ld(a))});ta(H,function(){this.h[cb]()});H.zc=function(){return this.h.zc()};H.contains=function(a){return this.h.ma(Ld(a))};H.ga=function(){return this.h.ga()};la(H,function(){return new Kd(this)});
H.Fc=function(){return this.h.Fc(!1)};function Md(a){this.ic=new Kd(a);aa.defineProperty(this,"size",{get:function(){return this.ic.Ub()}})}Md[t].add=function(a){this.ic.add(a)};Md[t].add=Md[t].add;ta(Md[t],function(){this.ic[cb]()});ta(Md[t],Md[t][cb]);ra(Md[t],function(a){return this.ic[jb](a)});Md[t]["delete"]=Md[t][Xa];Ca(Md[t],function(a,b){this.ic.ga()[E](a,b)});Md[t].has=function(a){return this.ic[tb](a)};Md[t].has=Md[t].has;function O(a){return ca.Set&&ca.Set[t][db]&&ca.Set[t][E]?new ca.Set(a):new Md(a)}
function Nd(a){if(a instanceof Md)return a.ic.ga();var b=0,c=e(a[F]);a[E](function(a){c[b++]=a});return c}function Od(a,b){if(b[F]>a[F])return!1;var c=!0;b[E](function(b){c=c&&a.has(b)});return c};function Pd(a,b){this.ya=a;this.cc=b||{}}function Qd(a){var b=O();a[E](function(a){b.add(a>>9)});return Nd(b)}H=Pd[t];H.Y=G("ya");H.yc=G("cc");H.oh=function(a){a[E](function(a){this.cc[a.id()]=a.Ia()},this)};H.dl=function(a){a[E](function(a){var c=this.cc;a in c&&delete c[a]},this)};H.Ia=function(){return{id:this.ya,value:ga[yb](this.cc)}};function Rd(a){return new Pd(a.id,ga.parse(a[v]))};function Sd(a,b,c){this.X=a;this.Tb=b;this.hh=c}H=Sd[t];H.get=function(a){return 0==a[B]?this.Vc():this.Oj(a)[x](J(function(b){return a.map(function(a){var d=b.get(a>>9);L(d,"Containing page is empty");return this.Tb(d.yc()[a])},this)},this))};H.Oj=function(a){var b=N(),c=Yc();a=Qd(a).map(function(a){return new M(function(c,k){var l;try{l=this.X.get(a)}catch(p){k(p);return}ya(l,k);sa(l,J(function(a){a=Rd(a[Oa][Gb]);b.set(a.Y(),a);c()},this))},this)},this);Xc(a)[x](function(){c[Fb](b)});return c.ka};
H.Vc=function(){return new M(function(a,b){var c=[],d;try{d=this.X[Fa]()}catch(g){b(g);return}ya(d,b);sa(d,J(function(){var b=d[Gb];if(b){var g=Rd(b[v]).yc(),p;for(p in g)c[w](this.Tb(g[p]));b[hb]()}else a(c)},this))},this)};H.dc=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}sa(d,b);ya(d,c)},this)};
H.put=function(a){if(0==a[B])return Tc();var b=N();a[E](function(a){var d;d=a.id()>>9;var g=b.get(d)||null;null===g&&(g=this.hh(this.X[q],d));g.oh([a]);b.set(d,g)},this);a=yd(b).map(function(a){return this.dc(J(function(){return this.X.put(a.Ia())},this))},this);return Xc(a)};
va(H,function(a){if(0==a[B])return this.dc(J(function(){return this.X[cb]()},this));var b=N();a[E](function(a){var d=a>>9,g=b.get(d)||null;null===g&&(g=this.hh(this.X[q],d));g.dl([a]);b.set(d,g)},this);a=yd(b).map(function(a){return this.dc(J(function(){var b;a:{b=a.yc();for(var g in b){b=!1;break a}b=!0}return b?this.X[Xa](a.Y()):this.X.put(a.Ia())},this))},this);return Xc(a)});function Td(a,b,c){a=a.m(Dd);var d=[c<<9,(c+1<<9)-1];b=a.nb(b,d[0],d[1]);c=new Pd(c);c.oh(b);return c}
function Ud(a,b){return new Pd(b)};function Vd(){};function Wd(a){this.ua=a.m(Dd);this.G=a.m(Ed);this.o=a.m(Id)}H=Wd[t];qa(H,function(a){a[E](function(a){this.Bl(a);this.yl(a)},this)});H.yl=function(a){var b=a[u]();a.Wc()[E](function(a,d){this.ua[jb](b,[d])},this);a.Uc()[E](function(a){this.ua.set(b,[a])},this);a.Yc()[E](function(a){this.ua.set(b,[a[1]])},this)};H.Bl=function(a){var b=this.o[h](a[u]());a.Ej()[E](function(a){this.Bh(b,a)},this)};
H.Bh=function(a,b){var c=[];this.G.pg(a[u]())[E](function(a){try{this.Ah(a,b),c[w](a)}catch(g){throw c[E](function(a){this.Ah(a,[b[1],b[0]])},this),g;}},this)};H.Ah=function(a,b){var c=null===b[1]?void 0:b[1].Zb(a[u]()),d=null===b[0]?void 0:b[0].Zb(a[u]());if(!Lb(d)&&Lb(c))a.add(c,b[1].id());else if(Lb(d)&&Lb(c)){if(null===c||null===d){if(c==d)return}else if(0==a.Nc()[Ab](d,c))return;a.add(c,b[1].id());a[jb](d,b[0].id())}else Lb(d)&&!Lb(c)&&a[jb](d,b[0].id())};var Xd={};I("lf.ConstraintAction",Xd,void 0);Xd.RESTRICT=0;Xd.CASCADE=1;var Yd={};I("lf.ConstraintTiming",Yd,void 0);Yd.IMMEDIATE=0;Yd.DEFERRABLE=1;var Zd={};I("lf.Order",Zd,void 0);Zd.DESC=0;Zd.ASC=1;var $d={};I("lf.Type",$d,void 0);$d.ARRAY_BUFFER=0;$d.BOOLEAN=1;$d.DATE_TIME=2;$d.INTEGER=3;$d.NUMBER=4;$d.STRING=5;$d.OBJECT=6;var ae={0:null,1:!1,2:aa.freeze(new Date(0)),3:0,4:0,5:"",6:null};I("lf.type.DEFAULT_VALUES",ae,void 0);
function P(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments[B])for(var c=1;c<=ba.min(4,arguments[B]-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(ha(arguments[c][C]()[n](0,64)))}K(P,fa);function be(a){this.G=a.m(Ed);this.o=a.m(Id)}H=be[t];H.mj=function(a,b){var c=a.Ib().Pd();return null===c?null:this.lj(c,b)};H.lj=function(a,b){var c=a.l(),d=b.Zb(c),c=this.G.get(c).get(d);return 0==c[B]?null:c[0]};H.xe=function(a,b){var c=a.Ib().Mj();b[E](function(a){c[E](function(b){if(null==a.s()[b[u]()])throw new P(202,b.l());},this)},this)};H.Rf=function(a,b,c){a.Ib().Ie()[E](function(a){a[Ma]==c&&this.wi(a,b)},this)};
H.wi=function(a,b){var c=this.lg(a);b[E](function(b){if(ce(b[0],b[1],a[q])&&(b=b[1].s()[a.Qb],null!==b&&!c.ma(b)))throw new P(203,a[q]);},this)};H.lg=function(a){var b=this.o[h](a.eb)[a.Bc].Ea()[Ga](function(b){return 1==b.f[B]&&b.f[0].ea[u]()==a.Bc})[0];return this.G.get(b.l())};function ce(a,b,c){return(null===a?null!==b:null===b)||a.Zb(c)!=b.Zb(c)}
H.Sf=function(a,b,c){a=this.o[zb]().Uj(a[u]());null!=a&&a[E](function(a){if(a[Ma]==c){var g=this.G.get(a[q]);b[E](function(b){var c=this.lg(a);if(ce(b[0],b[1],c[u]())&&g.ma(b[0].s()[a.Bc]))throw new P(203,a[q]);},this)}},this)};H.ve=function(a,b,c){0!=b[B]&&(b=b.map(function(a){return[null,a]}),this.Rf(a,b,c))};H.we=function(a,b,c){0!=b[B]&&(this.Rf(a,b,c),this.Sf(a,b,c))};H.Pf=function(a,b,c){0!=b[B]&&(b=b.map(function(a){return[a,null]}),this.Sf(a,b,c))};function de(a){this.hb=N();this.Na=N();this.kb=N();this.w=a}H=de[t];na(H,G("w"));H.Uc=G("hb");H.Yc=G("Na");H.Wc=G("kb");H.add=function(a){if(this.kb.has(a.id())){var b=[this.kb.get(a.id()),a];this.Na.set(a.id(),b);this.kb[Xa](a.id())}else this.hb.set(a.id(),a)};H.modify=function(a){var b=a[0],c=a[1];L(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.hb.has(b)?this.hb.set(b,c):(this.Na.has(b)&&(a=[this.Na.get(a[0].id())[0],c]),this.Na.set(b,a))};
ra(H,function(a){if(this.hb.has(a.id()))this.hb[Xa](a.id());else if(this.Na.has(a.id())){var b=this.Na.get(a.id())[0];this.Na[Xa](a.id());this.kb.set(a.id(),b)}else this.kb.set(a.id(),a)});H.Ej=function(){var a=[];this.hb[E](function(b){a[w]([null,b])});this.Na[E](function(b){a[w](b)});this.kb[E](function(b){a[w]([b,null])});return a};f(H,function(){return"["+xd(this.hb)[C]()+"], ["+xd(this.Na)[C]()+"], ["+xd(this.kb)[C]()+"]"});
H.Vj=function(){var a=new de(this.w);this.hb[E](function(b){a[Xa](b)});this.kb[E](function(b){a.add(b)});this.Na[E](function(b){a.modify([b[1],b[0]])});return a};H.zc=function(){return 0==this.hb[F]&&0==this.kb[F]&&0==this.Na[F]};function ee(a,b){this.sa=N();b[E](function(a){this.sa.set(a[u](),a)},this);this.ua=a.m(Dd);this.G=a.m(Ed);this.Sa=new be(a);this.Wd=new Wd(a);this.ef=this.ke=!1;this.Fb=N()}H=ee[t];H.ig=G("Fb");H.Hj=function(){var a=[];xd(this.Fb).map(function(a){return this.sa.get(a)},this)[E](function(b){b.Kb()&&(b.Ea()[E](function(b){a[w](this.G.get(b.l()))},this),a[w](this.G.get(b[u]()+".#")))},this);return a};H.da=G("sa");
H.Ij=function(){var a=[];this.sa[E](function(b){b.Kb()&&(b.Ea()[E](function(b){a[w](b.l())}),a[w](b[u]()+".#"))});return a};H.Bb=function(a,b){this.Jc();this.zd(a);this.Sa.xe(a,b);this.Sa.ve(a,b,0);for(var c=0;c<b[B];c++)this.Xd(a,[null,b[c]])};
H.Xd=function(a,b){var c=a[u](),d=this.Fb.get(c)||new de(c);this.Fb.set(c,d);try{this.Wd.Bh(a,b)}catch(g){throw this.ef=!0,g;}var k=b[0],l=b[1];null===k&&null!==l?(this.ua.set(c,[l]),d.add(l)):null!==k&&null!==l?(this.ua.set(c,[l]),d.modify(b)):null!==k&&null===l&&(this.ua[jb](c,[k.id()]),d[Xa](k))};qa(H,function(a,b){this.Jc();this.zd(a);this.Sa.xe(a,b);for(var c=0;c<b[B];c++){var d=b[c],d=[this.ua.get([d.id()])[0],d];this.Sa.we(a,[d],0);this.Xd(a,d)}});
H.Re=function(a,b){this.Jc();this.zd(a);this.Sa.xe(a,b);for(var c=0;c<b[B];c++){var d=b[c],g=null,k=this.Sa.mj(a,d);null!=k?(g=this.ua.get([k])[0],d.Vh(k),this.Sa.we(a,[[g,d]],0)):this.Sa.ve(a,[d],0);this.Xd(a,[g,d])}};va(H,function(a,b){this.Jc();this.zd(a);this.Sa.Pf(a,b,0);for(var c=0;c<b[B];c++)this.Xd(a,[b[c],null])});H.ii=function(){this.Fb[E](function(a){var b=this.sa.get(a[u]());this.Sa.ve(b,yd(a.Uc()),1);this.Sa.Pf(b,yd(a.Wc()),1);this.Sa.we(b,yd(a.Yc()),1)},this)};
H.oa=function(){this.Jc();this.ke=!0};H.Jc=function(){L(!this.ef,"Attemptted to use journal that needs to be rolled back.");L(!this.ke,"Attemptted to commit a terminated journal.")};H.Lb=function(){L(!this.ke,"Attempted to rollback a terminated journal.");var a=yd(this.Fb).map(function(a){return a.Vj()});this.Wd[Ua](a);this.ke=!0;this.ef=!1};H.zd=function(a){if(!this.sa.has(a[u]()))throw new P(106,a[u]());};function fe(a,b,c,d){this.c=a;this.u=b;this.ba=null===this.c?!1:c;this.na=null===this.u?!1:d}H=fe[t];f(H,function(){return(this.ba?"(":"[")+(null===this.c?"unbound":this.c)+", "+(null===this.u?"unbound":this.u)+(this.na?")":"]")});H.Bi=function(){if(null===this.c&&null===this.u)return[];var a=null,b=null;null===this.c||(a=new fe(null,this.c,!1,!this.ba));null===this.u||(b=new fe(this.u,null,!this.na,!1));return[a,b][Ga](function(a){return null!==a})};
H.reverse=function(){return new fe(this.u,this.c,this.na,this.ba)};H.Vg=function(a){var b=ge(this.c,a.c,!0,this.ba,a.ba);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.u||c.u>a.c||c.u==a.c&&!c.na&&!a.ba};function he(){return new fe(null,null,!1,!1)}H.xg=function(){return null===this.c&&null===this.u};H.Cg=function(){return null!=this.c&&this.c==this.u&&!this.ba&&!this.na};
H.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.na;return(null===this.c||a>this.c||a==this.c&&!this.ba)&&b};function ge(a,b,c,d,g){function k(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?k(1):k(-1):0:k(-1):null===b?k(1):a<b?-1:a==b?(d?!g:g)?d?k(1):k(-1):0:1}function ie(a,b){var c=ge(a.c,b.c,!0,a.ba,b.ba);0==c&&(c=ge(a.u,b.u,!1,a.na,b.na));return c};function je(a,b){this.entries=a;this.H=O(b);this.Ob=null}H=je[t];H.tk=function(a){var b=this.H;a=a.H;return b[F]==a[F]&&Od(b,a)};function ke(a,b){L(a.tk(b),"Intersection/union operations only apply to compatible relations.")}H.U=function(){return Nd(this.H)};H.Ue=function(){return 1<this.H[F]};H.Ke=function(){return this[A].map(function(a){return a.wa.s()})};H.Xj=function(){return this[A].map(function(a){return a.wa.id()})};H.lh=function(a,b){null===this.Ob&&(this.Ob=N());this.Ob.set(a.l(),b)};
H.xc=function(a){L(null!==this.Ob,"getAggregationResult called before any results have been calculated.");var b=this.Ob.get(a.l());L(Lb(b),"Could not find result for "+a.l());return b};H.tg=function(a){return null!==this.Ob&&this.Ob.has(a.l())};var le=null;function me(){null===le&&(le=new je([],[]));return le}
function ne(a){if(0==a[B])return me();for(var b=a[Ka](function(b,c){ke(a[0],c);return b+c[A][B]},0),c=e(b),d=0,b=a.map(function(a){var b=N();a[A][E](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=N(),k=0;k<c[B];k++)b[Ta](function(a){return a.has(c[k].id)})&&g.set(c[k].id,c[k]);return new je(yd(g),Nd(a[0].H))}function oe(a){if(0==a[B])return me();var b=N();a[E](function(c){ke(a[0],c);c[A][E](function(a){b.set(a.id,a)})});return new je(yd(b),Nd(a[0].H))}
function pe(a,b){var c=1<b[B],d=a.map(function(a){return new qe(a,c)});return new je(d,b)}function qe(a,b){this.wa=a;this.id=re++;this.Ve=b}var re=0;qe[t].S=function(a){var b=a.bb();return null!==b&&this.wa.s()[sb](b)?this.wa.s()[b]:this.Ve?this.wa.s()[a.K().pa()][a[u]()]:this.wa.s()[a[u]()]};qe[t].rf=function(a,b){var c=a.bb();if(null!=c)this.wa.s()[c]=b;else if(this.Ve){var c=a.K().pa(),d=this.wa.s()[c];null==d&&(d={},this.wa.s()[c]=d);d[a[u]()]=b}else this.wa.s()[a[u]()]=b};
function se(a,b,c,d){function g(a,b){if(a.Ve){var c=a.wa.s(),d;for(d in c)k[d]=c[d]}else L(!k[sb](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),k[b[0]]=a.wa.s()}var k={};g(a,b);g(c,d);a=new dd(-1,k);return new qe(a,!0)};I("lf.bind",function(a){return new te(a)},void 0);function te(a){this.qa=a}I("lf.Binder",te,void 0);te[t].yb=G("qa");function ue(){var a=ve();this.vc=N();this.vc.set(1,we());this.vc.set(2,xe());this.vc.set(4,a);this.vc.set(3,a);this.vc.set(5,ye())}Nb(ue);ue[t].He=function(a,b){var c=this.vc.get(a)||null;L(null!==c,"Could not find evaluation map for "+a);c=c.get(b)||null;L(null!==c,"Could not find evaluator for "+a+", "+b);return c};function we(){var a=N();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function ve(){var a=we();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c[Za](a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function ye(){var a=ve();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function xe(){var a=N();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a[Eb]()>=c[0][Eb]()&&a[Eb]()<=c[1][Eb]()});a.set("eq",function(a,c){return(null===a?-1:a[Eb]())==(null===c?-1:c[Eb]())});a.set("gte",function(a,c){return null===a||null===c?!1:a[Eb]()>=c[Eb]()});a.set("gt",function(a,c){return null===a||null===c?!1:a[Eb]()>c[Eb]()});a.set("in",function(a,c){return c[$a](function(c){return c[Eb]()==a[Eb]()})});a.set("lte",function(a,c){return null===a||null===c?!1:a[Eb]()<=
c[Eb]()});a.set("lt",function(a,c){return null===a||null===c?!1:a[Eb]()<c[Eb]()});a.set("neq",function(a,c){return(null===a?-1:a[Eb]())!=(null===c?-1:c[Eb]())});return a};function ze(a,b){this.Jg=a;this.Ch=b}ze[t].getKey=G("Jg");ze[t].ak=G("Ch");la(ze[t],function(){return new ze(this.Jg,this.Ch)});function Ae(a,b){ze[r](this,a,b);this.g=this.D=null}K(Ae,ze);var Be=[];H=Ae[t];la(H,function(){return new Ae(this.getKey(),this.ak())});H.getParent=G("D");H.Ag=function(){return!this.xa()};H.ca=function(){return this.g||Be};H.lb=function(a){return this.ca()[a]||null};H.xa=function(){return this.ca()[B]};H.Gj=function(){for(var a=0,b=this;b[Bb]();)a++,b=b[Bb]();return a};H.ob=function(){for(var a=this;a[Bb]();)a=a[Bb]();return a};H.contains=function(a){do a=a[Bb]();while(a&&a!=this);return Boolean(a)};
H.Ec=function(a,b){if(!1!==a[r](b,this))for(var c=this.ca(),d=0;d<c[B];d++)c[d].Ec(a,b)};H.mh=Ib("D");H.la=function(a){this.Gc(a,this.g?this.g[B]:0)};H.Gc=function(a,b){L(!a[Bb]());a.mh(this);this.g=this.g||[];L(0<=b&&b<=this.g[B]);qc(this.g,b,0,a)};H.ge=function(a){var b=this.g&&this.g[a];return b?(b.mh(null),mc(this.g,a),0==this.g[B]&&(this.g=null),b):null};H.removeChild=function(a){return this.ge(hc(this.ca(),a))};function Ce(){Ae[r](this,"","");this.ya=De++}K(Ce,Ae);var De=0;Ce[t].Y=G("ya");Ce[t].sf=Ib("ya");function Ee(a,b,c){Ce[r](this);this.J=a;pa(this,b);this.I=c;this.Fd=ue.Je().He(this.J.V(),this.I);this.cb=!1;this.oc=b}K(Ee,Ce);H=Ee[t];H.Rb=function(){var a=new Ee(this.J,this[v],this.I);a.jl(this.oc);a.ie(this.cb);a.sf(this.Y());return a};H.mb=function(a){return null!=a?(a[w](this.J),a):[this.J]};H.ie=Ib("cb");H.jl=Ib("oc");H.Nf=function(){var a=!1;this[v]instanceof te||(a="array"==Ob(this[v])?!this[v][$a](function(a){return a instanceof te}):!0);if(!a)throw new P(501);};
H.eval=function(a){this.Nf();if("in"==this.I)return this.Ti(a);var b=a[A][Ga](function(a){return this.Fd(a.S(this.J),this[v])!=this.cb},this);return new je(b,a.U())};Aa(H,function(a){if(this.oc instanceof te){var b=this.oc.yb();if(a[B]<=b)throw new P(510);pa(this,a[b])}else"array"==Ob(this.oc)&&pa(this,this.oc.map(function(b){if(b instanceof te){if(a[B]<=b.yb())throw new P(510);return a[b.yb()]}return b}))});
H.Ti=function(a){L("in"==this.I,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=O(this[v]),c=J(function(a){return null===a?!1:b.has(a)!=this.cb},this),d=a[A][Ga](function(a){return c(a.S(this.J))},this);return new je(d,a.U())};f(H,function(){return"value_pred("+this.J.l()+" "+this.I+(this.cb?"(complement)":"")+" "+this[v]+")"});H.zg=function(){this.Nf();return null!==this[v]&&("between"==this.I||"eq"==this.I||"gt"==this.I||"gte"==this.I||"lt"==this.I||"lte"==this.I)};
H.ul=function(){L(this.zg(),"Could not convert predicate to key range.");var a=null;"between"==this.I?a=new fe(this[v][0],this[v][1],!1,!1):"eq"==this.I?(a=this[v],a=new fe(a,a,!1,!1)):a="gte"==this.I?new fe(this[v],null,!1,!1):"gt"==this.I?new fe(this[v],null,!0,!1):"lte"==this.I?new fe(null,this[v],!1,!1):new fe(null,this[v],!1,!0);return this.cb?a.Bi():[a]};function Fe(a){this.ea=a;this.Lc=this.va=null}Fe[t].Od=function(a){null===this.va&&null!=this.B&&(this.va=Ge(this.B));a=this.va.get(a)||null;L(null!==a);return a};function Ge(a){var b=N();a.Ec(function(a){b.set(a.Y(),a)});return b}Fe[t].Bd=function(a){a.B&&(this.B=a.B.Rb());this.Lc=a};Aa(Fe[t],function(){L(null==this.Lc);return this});Fe[t].se=function(a){var b=this.B;null!=b&&b.Ec(function(b){b instanceof Ee&&b[D](a)})};function He(a){Fe[r](this,a)}K(He,Fe);function Ie(a){var b="";a[E](function(c,d){b+=c.J.l()+" ";b+=1==c.rb?"ASC":"DESC";d<a[B]-1&&(b+=", ")});return b}He[t].da=function(){return O(this.c)};la(He[t],function(){var a=new He(this.ea);a.Bd(this);this.f&&(a.f=this.f[n]());this.c&&(a.c=this.c[n]());a.W=this.W;a.M=this.M;this.L&&(a.L=this.L[n]());this.ha&&(a.ha=this.ha[n]());this.$b&&(a.$b=this.$b);this.kc&&(a.kc=this.kc);a.Cb=this.Cb;return a});
Aa(He[t],function(a){He.Nb[D][r](this,a);null!=this.$b&&(this.W=a[this.$b.yb()]);null!=this.kc&&(this.M=a[this.kc.yb()]);this.se(a);return this});function Je(a,b){this.Da=a;this.sa=b}Je[t].ob=G("Da");Je[t].dg=Jb("plan description");Je[t].da=G("sa");function Ke(a){var b=O();a[E](function(a){a.da()[E](b.add[D](b))});return b};function Le(a,b){this.global=a;this.Gb=a.m(Cd);this.ee=b.map(function(a){return a[ob]});this.Yg=b.map(function(a){return a.ff});this.Vf=Ke(this.Yg);this.xh=this.Pi();this.fc=Yc()}H=Le[t];H.Pi=function(){return this.ee[$a](function(a){return!(a instanceof He)})?1:0};
ma(H,function(){var a=new ee(this[Va],this.Vf),b=[],c=this.Yg[n](),d=J(function(){var g=c[rb]();if(g){var k=this.ee[b[B]];return g.ob()[Pa](a,k)[x](function(a){b[w](a[0]);return d()})}return Tc()},this);return d()[x](J(function(){return this.Gb.Sb(this.xh,a).oa()},this))[x](J(function(){this.cf(b);return b},this),J(function(b){a.Lb();throw b;},this))});H.V=G("xh");H.da=G("Vf");H.Zc=G("fc");H.Y=function(){return Ub(this)};H.cf=Hb();function Me(a,b){Le[r](this,a,b);this.Jb=a.m(Hd)}K(Me,Le);Ea(Me[t],Jb(0));Me[t].cf=function(a){this.ee[E](function(b,c){this.Jb.zh(b,a[c])},this)};function Ne(a,b){this.j=a;this.Jb=a.m(Hd);this.Ya=a.m(Gd);this.Wd=new Wd(a);this.Fb=b;var c=a.m(Id),d=this.Fb.map(function(a){return c[h](a[u]())});this.sa=O(d);this.fc=Yc()}H=Ne[t];ma(H,function(){this.Wd[Ua](this.Fb);this.ld();return Tc()});H.V=Jb(1);H.da=G("sa");H.Zc=G("fc");H.Y=function(){return Ub(this)};Ea(H,Jb(1));H.ld=function(){var a=this.Jb.Oe(this.sa);0!=a[B]&&(a=new Me(this.j,a),this.Ya.hc(a))};function Oe(a){this.j=a;this.Gb=a.m(Cd);this.Ya=a.m(Gd)}Oe[t].ql=function(){this.Gb.subscribe(this.af[D](this))};Oe[t].af=function(a){a=new Ne(this.j,a);this.Ya.hc(a)};function Pe(a,b){this.Ra=a;this.i=b;this.gb=N()}I("lf.backstore.FirebaseRawBackStore",Pe,void 0);H=Pe[t];H.Qd=G("i");H.Rd=function(){throw new P(351);};function Qe(a,b){var c=Yc(),d=a;b[B]&&(d=a[kb](b));d[Ha]("value",function(a){c[Fb](a.val())},function(a){c[La](a)});return c.ka}function Re(a,b,c){function d(a){a?g[La](a):g[Fb]()}c=c||!1;var g=Yc();c?a.set(b,d):a[Ua](b,d);return g.ka}
H.Fa=function(a){return Qe(this.i,"@rev/R")[x](function(a){this.Xa=a;return Qe(this.i,"@table")}[D](this))[x](function(b){var c=0,d;for(d in b)this.gb.set(d,b[d]),b[d]>c&&(c=b[d]);a.$a()[E](function(a){this.gb.has(a[u]())||(b[a[u]()]=++c)},this);d=this.i[kb]("@table");return Re(d,b)}[D](this))};
H.le=function(a,b){var c=this.gb.get(a);return null!=c?function(){var a={},g=Yc();this.i[bb]("T").equalTo(c)[Ha]("value",function(c){c[E](function(c){var g=b(c.val());a[da(c.key(),10)]=g});g[Fb](a)});return g.ka}[r](this)[x](function(a){a["@rev"]={R:++this.Xa};return Re(this.i,a)}[D](this)):Tc()};H.Pc=function(a){return this.le(a,Jb(null))[x](function(){this.gb[Xa](a);return Re(this.i[kb]("@table/"+a),null,!0)}[D](this))};Pe[t].dropTable=Pe[t].Pc;
Pe[t].Hc=function(a,b,c){return this.le(a,function(a){var g=a.P;g[b]=c;return{R:this.Xa+1,T:a.T,P:g}}[D](this))};Pe[t].addTableColumn=Pe[t].Hc;Pe[t].Qc=function(a,b){return this.le(a,function(a){var d=a.P;delete d[b];return{R:this.Xa+1,T:a.T,P:d}}[D](this))};Pe[t].dropTableColumn=Pe[t].Qc;Pe[t].kd=function(a,b,c){return this.le(a,function(a){var g=a.P;g[c]=g[b];delete g[b];return{R:this.Xa+1,T:a.T,P:g}}[D](this))};Pe[t].renameTableColumn=Pe[t].kd;Pe[t].Hb=function(){throw new P(351);};
Pe[t].createRow=Pe[t].Hb;Pe[t].bd=G("Ra");Pe[t].getVersion=Pe[t].bd;Pe[t].tc=function(a){var b=Yc();a=this.gb.get(a);this.i[bb]("T").equalTo(a)[Ha]("value",function(a){var d=[];a[E](function(a){d[w](a.val().P)});b[Fb](d)});return b.ka};ka(Pe[t],function(){var a={},b=xd(this.gb).map(function(b){return this.tc(b)[x](function(d){a[b]=d})}[D](this));return Xc(b)[x](function(){return a})});ka(Pe[t],Pe[t].dump);function Se(a,b,c){Ad[r](this,c,b);this.i=a}K(Se,Ad);Se[t].K=function(a){return this.i.$c(a)};
Se[t].Mc=function(){var a=this.Kj().ig();if(0==a[F])this.Z[Fb]();else{var b=this.i.Wj()+1;this.i.nh(b);var c={"@rev":{R:b}};a[E](function(a,g){var k=this.i.og(g);a.Uc()[E](function(a,d){c[d]={R:b,T:k,P:a.s()}});a.Yc()[E](function(a,d){c[d]={R:b,T:k,P:a[1].s()}});a.Wc()[E](function(a,b){c[b]=null})},this);this.i.Tj()[Ua](c,function(c){if(null===c)this.Z[Fb]();else this.i.nh(b-1),c=yd(a).map(function(a){return this.i.bh(a[u]())},this),Xc(c)[x](this.Z[La][D](this.Z),this.Z[La][D](this.Z))}[D](this))}return this.Z.ka};function Te(){this.xb=N()}H=Te[t];H.Ne=function(a){if(0==a[B])return yd(this.xb);var b=[];a[E](function(a){a=this.xb.get(a)||null;null===a||b[w](a)},this);return b};H.getData=G("xb");H.get=function(a){return Tc(this.Ne(a))};H.hf=function(a){a[E](function(a){this.xb.set(a.id(),a)},this)};H.put=function(a){this.hf(a);return Tc()};H.dh=function(a){0==a[B]||a[B]==this.xb[F]?this.xb[cb]():a[E](function(a){this.xb[Xa](a)},this)};va(H,function(a){this.dh(a);return Tc()});
H.Lj=function(){return 0==this.xb[F]?0:xd(this.xb)[Ka](function(a,b){return a>b?a:b},0)};function Ue(a,b){this.o=a;this.Lh=b;this.jd=N();this.Xa=-1;this.H=N();this.gb=N();this.te=null}H=Ue[t];H.Wj=G("Xa");H.nh=Ib("Xa");
H.Fa=function(a){this.i=this.Lh[kb](this.o[q]());var b=a||function(){return Tc()};return Qe(this.i,"@db/version")[x](function(a){return null===a?Re(this.i,this.Fi(),!0)[x](function(){var a=new Pe(0,this.i);return b(a)}[D](this)):a==this.o[ub]()?Qe(this.i,"@rev/R")[x](function(a){this.Xa=a;return Qe(this.i,"@table")}[D](this))[x](function(a){for(var b in a)this.gb.set(b,a[b]);a=this.o.$a().map(function(a){return this.bh(a[u]())},this);return Xc(a)}[D](this))[x](function(){this.mk();this.Ng();return Tc()}[D](this)):
this.df(a,b)[x](function(){return this.Fa()}[D](this))}[D](this))};H.df=function(a,b){var c=new Pe(a,this.i);return c.Fa(this.o)[x](function(){return this.Al()}[D](this))[x](function(){return b(c)})[x](function(){var a=this.i[kb]("@db");return Re(a,{version:this.o[ub]()},!0)}[D](this))};H.Al=function(){return Tc()};H.Ng=function(){this.i.off();this.i.on("child_removed",this.Kk[D](this));this.ue&&(this.ue.off(),this.jd[cb]());this.ue=this.i[bb]("R").startAt(this.Xa+1);this.ue.on("value",this.af[D](this))};
H.mk=function(){ed=yd(this.H).map(function(a){return a.Lj()})[Ka](function(a,b){return a>b?a:b},0)+1};H.Kk=function(a){var b=a.val(),c=this.jd.get(b.T)||null;null===c&&(c=O(),this.jd.set(b.T,c));c.add(da(a.key(),10))};H.af=function(a){var b=a[kb]("@rev/R").val();null!=b&&b!=this.Xa&&(this.Xa=b,a=this.sj(a),a[E](function(a){var b=this.H.get(a[u]()),g=xd(a.Wc());0<g[B]&&b.dh(g);var k=yd(a.Uc());a.Yc()[E](function(a){k[w](a[1])});b.hf(k)},this),0<a[B]&&this.fd(a),this.Ng())};
H.sj=function(a){var b=O(),c=N();this.gb[E](function(a,g){var k=this.H.get(g),l=new de(g);if(this.jd.has(a)){var p=Nd(this.jd.get(a));p[E](function(a){b.add(a)});k.Ne(p)[E](function(a){l[Xa](a)})}c.set(a,l)}[D](this));a[E](function(a){if("@rev"!=a.key()){var g=da(a.key(),10);if(!b.has(g)){a=a.val();var k=c.get(a.T),l=this.H.get(k[u]());l.getData().has(g)?k.modify([l.Ne([g])[0],new dd(g,a.P)]):k.add(new dd(g,a.P))}}}[D](this));return yd(c)[Ga](function(a){return!a.zc()})};
H.bh=function(a){var b=Yc(),c=this.og(a);this.i[bb]("T").equalTo(c)[Ha]("value",function(c){var g=new Te,k=[];c[E](function(a){k[w](new dd(da(a.key(),10),a.val().P))});g.hf(k);this.H.set(a,g);b[Fb]()}[D](this));return b.ka};H.og=function(a){return this.gb.get(a)};H.Fi=function(){var a={};a["@db"]={version:this.o[ub]()};a["@rev"]={R:1};this.Xa=1;a["@table"]={};this.o.$a()[E](function(b,c){var d=b[u]();a["@table"][d]=c;this.H.set(d,new Te);this.gb.set(d,c)},this);return a};
H.Sb=function(a,b){return new Se(this,a,b)};H.$c=function(a){var b=this.H.get(a)||null;if(null!==b)return b;throw new P(101,a);};H.Tj=G("i");oa(H,Hb());Ba(H,Ib("te"));H.fd=function(a){null!=this.te&&this.te(a)};function Q(a,b,c,d){this.i=b;this.Qa=c;this.Ra=a;this.wd=d}I("lf.backstore.IndexedDBRawBackStore",Q,void 0);Q[t].Qd=G("i");Q[t].getRawDBInstance=Q[t].Qd;Q[t].Rd=G("Qa");Q[t].getRawTransaction=Q[t].Rd;Q[t].Pc=function(a){return new M(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};Q[t].dropTable=Q[t].Pc;
Q[t].Ok=function(a,b,c){return new M(function(d,g){var k;try{var l=this.Qa[vb](a);k=l[Fa]()}catch(p){g(p);return}sa(k,function(){var a=k[Gb];a?(b(a),a[hb]()):(c(l),d())});ya(k,g)},this)};function Ve(a){var b=null;return b=a instanceof ArrayBuffer?hd(a):a instanceof Date?a[Eb]():a}Q[t].wf=function(a,b){function c(a){var c=Rd(a[v]),d=c.yc(),p;for(p in d){var y=fd(d[p]);b(y);d[p]=y.Ia()}a[Ua](c.Ia())}function d(a){var c=fd(a[v]);b(c);a[Ua](c.Ia())}return this.Ok(a,this.wd?c:d,Hb())};
Q[t].Hc=function(a,b,c){var d=Ve(c);return this.wf(a,function(a){a.s()[b]=d})};Q[t].addTableColumn=Q[t].Hc;Q[t].Qc=function(a,b){return this.wf(a,function(a){delete a.s()[b]})};Q[t].dropTableColumn=Q[t].Qc;Q[t].kd=function(a,b,c){return this.wf(a,function(a){a.s()[c]=a.s()[b];delete a.s()[b]})};Q[t].renameTableColumn=Q[t].kd;
Q[t].Zj=function(a){var b=[];return new M(function(c,d){var g;try{g=this.Qa[vb](a)[Fa]()}catch(k){d(k);return}sa(g,J(function(){var a=g[Gb];if(a){if(this.wd){var d=Rd(a[v]).yc(),k;for(k in d)b[w](d[k])}else b[w](a[v]);a[hb]()}else c(b)},this));ya(g,d)},this)};Q[t].Hb=function(a){var b={};wc(a,J(function(a,d){b[d]=Ve(a)},this));return gd(b)};Q[t].createRow=Q[t].Hb;Q[t].bd=G("Ra");Q[t].getVersion=Q[t].bd;
ka(Q[t],function(){for(var a=this.i[Ia],b=[],c=0;c<a[B];++c){var d=a[Na](c);b[w](this.tc(d))}return Xc(b)[x](function(b){var c={};b[E](function(b,d){c[a[Na](d)]=b});return c})});ka(Q[t],Q[t].dump);Q[t].tc=function(a){return this.Zj(a)[x](function(a){return a.map(function(a){return a[v]})})};function We(a,b){this.X=a;this.Tb=b}H=We[t];H.get=function(a){if(0==a[B])return this.Vc();a=a.map(function(a){return new M(function(c,d){var g;try{g=this.X.get(a)}catch(k){d(k);return}ya(g,d);sa(g,J(function(a){c(this.Tb(a[Oa][Gb]))},this))},this)},this);return Xc(a)};H.Vc=function(){return new M(function(a,b){var c=[],d;try{d=this.X[Fa]()}catch(g){b(g);return}ya(d,b);sa(d,J(function(){var b=d[Gb];b?(c[w](this.Tb(b[v])),b[hb]()):a(c)},this))},this)};
H.dc=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}sa(d,b);ya(d,c)},this)};H.put=function(a){if(0==a[B])return Tc();a=a.map(function(a){return this.dc(J(function(){return this.X.put(a.Ia())},this))},this);return Xc(a)};
va(H,function(a){return new M(function(b,c){var d=this.X[ab]();sa(d,J(function(d){if(0==a[B]||d[Oa][Gb]==a[B])return this.dc(J(function(){return this.X[cb]()},this))[x](b,c);d=a.map(function(a){return this.dc(J(function(){return this.X[Xa](a)},this))},this);Xc(d)[x](b,c)},this));ya(d,c)},this)});function Xe(a,b,c,d,g){Ad[r](this,c,d);this.j=a;this.Qa=b;this.wd=g;this.Qa.oncomplete=J(this.Z[Fb],this.Z);this.Qa.onabort=J(this.Z[La],this.Z)}K(Xe,Ad);Xe[t].K=function(a,b,c){return this.wd?(c=null!=c?c:0,a=this.Qa[vb](a),new Sd(a,b,0==c?Zb(Td,this.j):Ud)):new We(this.Qa[vb](a),b)};Xe[t].Mc=function(){return this.Z.ka};function Ye(a,b){this.j=a;this.o=b;this.xd=b.Zg().Ri||!1}H=Ye[t];H.Fa=function(a){var b=ca.indexedDB||ca.mozIndexedDB||ca.webkitIndexedDB||ca.msIndexedDB;if(null==b)throw new P(352);var c=a||function(){return Tc()};return new M(function(a,g){var k;try{k=b.open(this.o[q](),this.o[ub]())}catch(l){g(l);return}ya(k,g);k.onupgradeneeded=J(function(a){this.Nk(c,a)[x](Hb(),g)},this);sa(k,J(function(b){this.i=b[Oa][Gb];this.of()[x](J(function(b){ed=b+1;a(this.i)},this))},this))},this)};
H.Nk=function(a,b){var c=b[Oa][Gb],d=b[Oa][mb],g=new Q(b.oldVersion,c,d,this.xd);this.cl(c,d);this.Ki(c,d);return a(g)};H.cl=function(a){for(var b=[],c=0;c<a[Ia][B];++c){var d=a[Ia][Na](c);-1!=d[Za](".")&&b[w](d)}b[E](function(b){try{a.deleteObjectStore(b)}catch(c){}})};H.Ki=function(a,b){this.o.$a()[E](Zb(this.Hi,a,b),this)};H.Hi=function(a,b,c){a[Ia][tb](c[u]())||a.createObjectStore(c[u](),{keyPath:"id"});c.Kb()&&(c.Ea()[E](function(c){this.Oc(a,b,c.l(),"btree")},this),this.Oc(a,b,c.Vb(),"rowid"))};
H.Oc=function(a,b,c,d){a[Ia][tb](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[vb](c),(this.xd?new Sd(a,fd,Ud):new We(a,fd)).put([new jd(new id(d))]))};H.Sb=function(a,b){var c=xd(b.da());b.Ij()[E](function(a){c[w](a)});var d=this.i[mb](c,0==a?"readonly":"readwrite");return new Xe(this.j,d,b,a,this.xd)};
H.of=function(a){function b(){if(0==c[B])return Tc();var a=c[rb]();return l(a)[x](b)}var c=this.o.$a().map(function(a){return a[u]()}),d=this.i,g=0,k=J(function(a){return this.xd?(a=Rd(a[v]),yc(a.yc())[Ka](function(a,b){return ba.max(a,b)},0)):a.key},this),l=J(function(b){return new M(function(c,l){var eb;try{eb=(a||d[mb]([b]))[vb](b)[Fa](null,"prev")}catch(Bc){l(Bc);return}sa(eb,function(a){(a=a[Oa][Gb])&&(g=ba.max(g,k(a)));c(g)});ya(eb,function(){c(g)})},this)},this);return new M(function(a){b()[x](function(){a(g)})})};
oa(H,function(){this.i[Qa]()});H.$c=function(){throw new P(511);};Ba(H,Hb());H.fd=Hb();function Ze(a,b,c){Ad[r](this,c,b);this.X=a;0==b&&this.Z[Fb]()}K(Ze,Ad);Ze[t].K=function(a){return this.X.$c(a)};Ze[t].Mc=function(){this.Z[Fb]();return this.Z.ka};function $e(a){this.o=a;this.H=N()}H=$e[t];H.Fa=function(){this.o.$a()[E](this.pk,this);return Tc()};H.$c=function(a){var b=this.H.get(a)||null;if(null===b)throw new P(101,a);return b};H.Sb=function(a,b){return new Ze(this,a,b)};H.Xf=function(a){if(!this.H.has(a)){var b=new Te;this.H.set(a,b);return b}return null};H.pk=function(a){this.Xf(a[u]());a.Kb()&&(a.Ea()[E](function(a){this.Oc(a.l(),"btree")},this),this.Oc(a.Vb(),"rowid"))};H.Oc=function(a,b){var c=this.Xf(a);null===c||c.put([new jd(new id(b))])};
oa(H,Hb());Ba(H,Hb());H.fd=Hb();function af(a){$e[r](this,a);this.$d=null}K(af,$e);Ba(af[t],function(a){null===this.$d&&(this.$d=a)});af[t].fd=function(a){null===this.$d||this.$d(a)};function bf(a,b,c){this.Qa=a;this.w=b;this.Tb=c}bf[t].get=function(a){var b=this.Tb;this.Qa.Oa("SELECT id, value FROM "+this.w+" "+(0==a[B]?"":"WHERE id IN ("+a[m](",")+")"),[],function(a){for(var d=a[Cb][B],g=e(d),k=0;k<d;++k)g[k]=b({id:a[Cb][Na](k).id,value:ga.parse(a[Cb][Na](k)[v])});return g});return this.Qa.oa()};bf[t].put=function(a){if(0==a[B])return Tc();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a[E](function(a){this.Qa.Oa(b,[a.id(),ga[yb](a.s())])},this);return Tc()};
va(bf[t],function(a){this.Qa.Oa("DELETE FROM "+this.w+" "+(0==a[B]?"":"WHERE id IN ("+a[m](",")+")"),[]);return Tc()});function cf(a,b,c){Ad[r](this,b,c);this.i=a;this.H=N();this.Ae=[]}K(cf,Ad);cf[t].K=function(a,b){var c=this.H.get(a)||null;null===c&&(c=new bf(this,a,b),this.H.set(a,c));return c};cf[t].Oa=function(a,b,c){this.Ae[w]({rl:a,Pk:b,transform:c})};
cf[t].Mc=function(){var a,b,c=this.Z[La][D](this.Z),d=function(a,b){this.Z[La](b)}[D](this),g=J(function(c,l){a=l;if(this.Ae[B]){var p=this.Ae[rb]();b=p.transform;c.executeSql(p.rl,p.Pk,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.Z[Fb](p)},this);0==this.wh?this.i.readTransaction(g,c):this.i[mb](g,c);return this.Z.ka};function R(a,b,c){this.i=c;this.j=a;this.Ra=b}I("lf.backstore.WebSqlRawBackStore",R,void 0);R[t].Qd=G("i");R[t].getRawDBInstance=R[t].Qd;R[t].Rd=function(){throw new P(356);};R[t].getRawTransaction=R[t].Rd;R[t].Ed=function(){return new cf(this.i,new ee(this.j,O()),1)};R[t].Pc=function(a){var b=this.Ed();b.Oa("DROP TABLE "+a,[]);return b.oa()};R[t].dropTable=R[t].Pc;
R[t].tc=function(a){var b=this.Ed();b.Oa("SELECT id, value FROM "+a,[]);return b.oa()[x](function(a){for(var b=a[Cb][B],g=e(b),k=0;k<b;++k)g[k]={id:a[Cb][Na](k).id,value:ga.parse(a[Cb][Na](k)[v])};return Tc(g)})};R[t].vf=function(a,b){var c=this.Ed(),d="UPDATE "+a+" SET value=? WHERE id=?";return this.tc(a)[x](function(a){a[E](function(a){a=b(a);c.Oa(d,[ga[yb](a[v]),a.id])});return c.oa()})};R[t].Hc=function(a,b,c){var d=Ve(c);return this.vf(a,function(a){a[v][b]=d;return a})};
R[t].addTableColumn=R[t].Hc;R[t].Qc=function(a,b){return this.vf(a,function(a){delete a[v][b];return a})};R[t].dropTableColumn=R[t].Qc;R[t].kd=function(a,b,c){return this.vf(a,function(a){a[v][c]=a[v][b];delete a[v][b];return a})};R[t].renameTableColumn=R[t].kd;R[t].Hb=function(a){var b={},c;for(c in a)b[c]=Ve(a[c]);return gd(b)};R[t].createRow=R[t].Hb;R[t].bd=G("Ra");R[t].getVersion=R[t].bd;
function df(a){a.Oa('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[Cb][B]),d=0;d<c[B];++d)c[d]=a[Cb][Na](d).tbl_name;return c})}ka(R[t],function(){var a=Yc(),b=this.Ed();df(b);var c={};b.oa()[x](J(function(b){b=b[Ga](function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.tc(a)[x](function(b){c[a]=b})},this);Xc(b)[x](function(){a[Fb](c)})},this));return a.ka});ka(R[t],R[t].dump);
function ef(a,b,c){this.j=a;this.o=b;this.nl=c||4194304}H=ef[t];H.Jd=function(){return new ee(this.j,O())};H.Fa=function(a){if(null==ca.openDatabase)throw new P(353);var b=a||function(){return Tc()};return new M(J(function(a,d){try{var g=ca.openDatabase(this.o[q](),"",this.o[q](),this.nl);if(null!=g)this.i=g,this.xi(b)[x](a,d);else throw new P(354);}catch(k){d(k)}},this))};
H.xi=function(a){var b=Yc(),c=new cf(this.i,this.Jd(),1);c.Oa("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.Oa("SELECT v FROM __lf_ver WHERE id = 0",[]);c.oa()[x](J(function(c){var g=0;c[Cb][B]&&(g=c[Cb][Na](0).v);g<this.o[ub]()?this.df(a,g)[x](b[Fb][D](b)):g>this.o[ub]()?b[La](new P(108)):b[Fb]()},this));return b.ka};H.Sb=function(a,b){if(null!=this.i)return new cf(this.i,b,a);throw new P(2);};oa(H,Hb());H.$c=function(){throw new P(512);};
H.Qg=function(){throw new P(355);};Ba(H,function(){this.Qg()});H.fd=function(){this.Qg()};H.df=function(a,b){var c=Yc();this.Sk()[x](J(function(){a(new R(this.j,b,this.i))[x](J(function(){return this.of()},this))[x](c[Fb][D](c))},this),c[La][D](c));return c.ka};
H.Sk=function(){var a=this.o.$a(),b=new cf(this.i,this.Jd(),1),c=new cf(this.i,this.Jd(),1);b.Oa("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.o[ub]()]);df(b);return b.oa()[x](function(b){b[Ga](function(a){return-1!=a[Za](".")})[E](function(a){c.Oa("DROP TABLE "+a,[])});var g=b[Ga](function(a){return-1==a[Za](".")});a.map(function(a){return a[u]()})[Ga](function(a){return-1==g[Za](a)})[E](function(a){c.Oa("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.oa()})};
H.of=function(){var a=0,b=Yc(),c=J(function(b){var c=new cf(this.i,this.Jd(),0);c.Oa("SELECT MAX(id) FROM "+b,[]);return c.oa()[x](function(b){b=b[Cb][Na](0)[0];a=ba.max(b,a)})},this),d=this.o.$a().map(function(a){return c(a[u]())});Xc(d)[x](function(){b[Fb](a)},function(a){b[La](a)});return b.ka};function gf(){this.h=N();this.sh=N()}H=gf[t];H.Sd=function(a){var b=this.sh.get(a);Lb(b)||(b=O(),this.sh.set(a,b));return b};H.set=function(a,b){var c=this.Sd(a);b[E](J(function(a){this.h.set(a.id(),a);c.add(a.id())},this))};H.get=function(a){return a.map(J(function(a){return this.h.get(a)||null},this))};
H.nb=function(a,b,c){var d=[],g=ba.min(b,c),k=ba.max(b,c);a=this.Sd(a);if(a[F]<k-g)a[E](function(a){a>=g&&a<=k&&(a=this.h.get(a),L(null!=a,"Inconsistent cache"),d[w](a))},this);else for(b=g;b<=k;++b)a.has(b)&&(c=this.h.get(b),L(null!=c,"Inconsistent cache"),d[w](c));return d};va(H,function(a,b){var c=this.Sd(a);b[E](function(a){this.h[Xa](a);c[Xa](a)},this)});H.Ub=function(a){return null!=a?this.Sd(a)[F]:this.h[F]};
function hf(a,b){for(var c=0,d=a[B];c<d;){var g=c+d>>1;a[g]<b?c=g+1:d=g}return c==d&&a[c]==b?c:~c};function jf(a,b,c,d){a=b?a[gb]():a;if(null==c&&null==d)return a;c=ba.min(Lb(c)?c:a[B],a[B]);if(0==c)return[];d=ba.min(d||0,a[B]);return a[n](d,d+c)};function kf(){this.ta=0}kf[t].add=function(a,b){this.ta+=b};va(kf[t],function(a,b){this.ta-=b});ta(kf[t],function(){this.ta=0});kf[t].zl=function(a){this[cb]();a[E](function(a){this.ta+=a.ta},this)};function mf(a,b,c,d){this.w=a;this.O=b;this.yf=c;this.ub=new kf;if(d){a=511;a*=a*a;if(d[B]>=a)throw new P(6,a);d=nf(this,d);this.ra=d=of(d)}else this[cb]()}var pf=[];H=mf[t];na(H,G("w"));f(H,function(){return this.ra[C]()});H.add=function(a,b){this.ra=this.ra.Bb(a,b)};H.set=function(a,b){this.ra=this.ra.Bb(a,b,!0)};va(H,function(a,b){this.ra=this.ra[jb](a,b)});H.get=function(a){return this.ra.get(a)};
H.Dd=function(a){if(null==a)return this.Za().ta;if(a instanceof fe){if(a.xg())return this.Za().ta;if(a.Cg())return this.get(a.c)[B]}return this.nb([a])[B]};H.Za=G("ub");H.Vc=function(a,b,c,d){c=e(a);this.ra.fill({offset:b?this.ub.ta-a-d:d,count:a,uf:0},c);return b?c[gb]():c};
H.nb=function(a,b,c,d){var g=this.ra.Md().b[0];if(!Lb(g)||0==c)return pf;b=b||!1;c=null!=c?ba.min(c,this.ub.ta):this.ub.ta;d=d||0;var k=ba.min(ba.max(this.ub.ta-d,0),c);if(0==k)return pf;if(!Lb(a)||1==a[B]&&a[0]instanceof fe&&a[0].xg())return this.Vc(k,b,c,d);a=this.O.qh(a);var l=e(b?this.ub.ta:k),p={count:0,W:l[B],reverse:b,M:d};a[E](function(a){for(var b=this.O.fe(a),b=this.O.Te(a)?g:b[0],b=this.ra.hg(b),c=p[ab],d=0;null!=b&&p[ab]<p.W;)b.nb(a,p,l),p[ab]!=c?(d=0,c=p[ab]):d++,b=2==d?null:b[qb]()},
this);l[z](p[ab],k-p[ab]);return b?jf(l,b,c,d):l};ta(H,function(){this.ra=qf(this);this.ub[cb]()});H.ma=function(a){return this.ra.ma(a)};H.min=function(){return this.ed(J(this.O.min,this.O))};H.max=function(){return this.ed(J(this.O.max,this.O))};H.ed=function(a){var b=this.ra.Md(),c=this.ra.ng();if(0==b.b[B]&&0==c.b[B])return null;var d=b.b[0],b=b.A[0],g=c.b[c.b[B]-1],c=c.A[c.b[B]-1];return 1==a(d,g)?[d,this.yf?[b]:b]:[g,this.yf?[c]:c]};H.La=G("yf");H.Nc=G("O");
H.Ye=function(a,b){return null!=a?-1==this.O[Ab](a,b):!1};H.Ta=function(a,b){return null!=a?0==this.O[Ab](a,b):!1};H.Ia=function(){for(var a=[],b=this.ra.Md();b;)a[w](new dd(b.ya,[b.b,b.A])),b=b.za;return a};function rf(a,b,c,d){a=new mf(b,a,c);d=sf(d,a);a.ra=d;return a}function tf(a,b){this.ya=a;this.C=b;this.pb=0;this.za=this.Db=this.D=null;this.b=[];this.A=[];this.g=[]}function qf(a){return new tf(ed++,a)}H=tf[t];H.ja=function(){return 0==this.pb};H.Gg=function(){return null==this.D};xa(H,G("za"));
function uf(a){function b(a){return null!=a?a.ya[C]():"_"}var c=a.ya+"["+a.b[m]("|")+"]",d=a.g.map(function(a){return a.ya})[m]("|"),g=a.A[m]("/"),k=b(a.Db)+"{",k=a.ja()?k+g:k+d,k=k+"}"+b(a.D);a.za&&(a=uf(a.za),c=c+"  "+a[0],k=k+"  "+a[1]);return[c,k]}f(H,function(){var a="",b=uf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g[B]&&(a+=this.g[0][C]());return a});H.Md=function(){return this.ja()?this:this.g[0].Md()};H.ng=function(){return this.ja()?this:this.g[this.g[B]-1].ng()};
function vf(a,b){b&&(b.Db=a);a&&(a.za=b)}function nf(a,b){for(var c=b[B],d=0,g=qf(a),k=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[n](d,d+l);g.b=p.map(function(a){return a.key});g.A=p.map(function(a){return a[v]});d+=l;c-=l;0<c&&(l=qf(g.C),vf(g,l),g=l)}return k}function wf(a){var b=a[0],c=qf(b.C);c.pb=b.pb+1;c.g=a;for(b=0;b<a[B];++b)a[b].D=c,0<b&&c.b[w](a[b].b[0]);return c}
function of(a){var b=a,c=[];do c[w](b),b=b.za;while(b);if(512>=c[B])b=wf(c);else{var d=c[B],g=0,b=qf(a.C);for(b.pb=a.pb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var k=c[n](g,g+a),l=wf(k);l.D=b;b.g[B]&&(b.b[w](k[0].b[0]),vf(b.g[b.g[B]-1],l));b.g[w](l);g+=a;d-=a}}return b}H.get=function(a){var b=this.md(a);if(this.ja()){var c=pf;this.C.Ta(this.b[b],a)&&(c=c[Ra](this.A[b]));return c}b=this.C.Ta(this.b[b],a)?b+1:b;return this.g[b].get(a)};
H.ma=function(a){var b=this.md(a);return this.C.Ta(this.b[b],a)?!0:this.ja()?!1:this.g[b].ma(a)};va(H,function(a,b){this.$f(a,-1,b);if(this.Gg()){var c=this;1==this.g[B]&&(c=this.g[0],c.D=null);return c}return this});function xf(a){return a.ja()?a.b[0]:xf(a.g[0])}H.Gd=function(){this.b=[];for(var a=1;a<this.g[B];++a)this.b[w](xf(this.g[a]))};
H.$f=function(a,b,c){var d=this.md(a),g=this.ja();if(!g){var k=this.C.Ta(this.b[d],a)?d+1:d;if(this.g[k].$f(a,k,c))this.Gd();else return!1}else if(!this.C.Ta(this.b[d],a))return!1;if(this.b[B]>d&&this.C.Ta(this.b[d],a)){if(Lb(c)&&!this.C.La()&&g&&(k=this.A[d],c=hf(k,c),0>c?c=!1:(k[z](c,1),c=!0),c&&this.C.Za()[jb](a,1),this.A[d][B]))return!1;this.b[z](d,1);g&&(g=this.C.La()?1:this.A[d][B],this.A[z](d,1),this.C.Za()[jb](a,g))}256>this.b[B]&&!this.Gg()&&(this.sl()||this.Gk(b));return!0};
H.sl=function(){var a=null,b,c,d;if(this.za&&256<this.za.b[B])a=this.za,c=b=0,d=this.b[B]+1;else if(this.Db&&256<this.Db.b[B])a=this.Db,b=this.Db.b[B]-1,c=this.ja()?b:b+1,d=0;else return!1;this.b[z](d,0,a.b[b]);a.b[z](b,1);b=this.ja()?this.A:this.g;var g=null;this.ja()?g=a.A:(g=a.g,g[c].D=this);b[z](d,0,g[c]);g[z](c,1);a.ja()||(a.Gd(),this.Gd());return!0};
H.Gk=function(a){var b,c,d;this.za&&511>this.za.b[B]?(b=this.za,d=c=0):this.Db&&(b=this.Db,c=b.b[B],d=b.ja()?b.A[B]:b.g[B]);c=[c,0][Ra](this.b);e[t][z][xb](b.b,c);c=null;this.ja()?c=this.A:(c=this.g,c[E](function(a){a.D=b}));c=[d,0][Ra](c);e[t][z][xb](b.ja()?b.A:b.g,c);vf(this.Db,this.za);b.ja()||b.Gd();-1!=a&&(this.D.b[z](a,1),this.D.g[z](a,1))};
H.Bb=function(a,b,c){var d=this.md(a);if(this.ja()){if(this.C.Ta(this.b[d],a)){if(c)this.C.Za()[jb](a,this.C.La()?1:this.A[d][B]),this.A[d]=this.C.La()?b:[b];else{if(this.C.La())throw new P(201);d=this.A[d];c=hf(d,b);0>c?(d[z](-(c+1),0,b),b=!0):b=!1;if(!b)throw new P(109);}this.C.Za().add(a,1);return this}this.b[z](d,0,a);this.A[z](d,0,this.C.La()?b:[b]);this.C.Za().add(a,1);return 512==this.b[B]?this.pl():this}d=this.C.Ta(this.b[d],a)?d+1:d;a=this.g[d].Bb(a,b,c);a.ja()||1!=a.b[B]||(this.b[z](d,0,
a.b[0]),a.g[1].D=this,a.g[0].D=this,this.g[z](d,1,a.g[1]),this.g[z](d,0,a.g[0]));return 512==this.b[B]?this.ol():this};H.pl=function(){var a=qf(this.C),b=qf(this.C);b.pb=1;b.b=[this.b[256]];b.g=[this,a];b.D=this.D;this.D=b;a.b=this.b[z](256);a.A=this.A[z](256);a.D=b;vf(a,this.za);vf(this,a);return b};
H.ol=function(){var a=qf(this.C),b=qf(this.C);a.D=this.D;a.pb=this.pb+1;a.b=[this.b[256]];a.g=[this,b];this.b[z](256,1);b.D=a;b.pb=this.pb;b.b=this.b[z](256);b.g=this.g[z](257);b.g[E](function(a){a.D=b});this.D=a;vf(b,this.za);vf(this,b);return a};H.md=function(a){for(var b=0,c=this.b[B];b<c;){var d=b+c>>1;this.C.Ye(this.b[d],a)?b=d+1:c=d}return b};H.hg=function(a){if(!this.ja()){var b=this.md(a);this.C.Ta(this.b[b],a)&&b++;return this.g[b].hg(a)}return this};
H.nb=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var g=this.C.Nc(),k=0,l=this.b[B]-1,p=this.b,y=d(g.wb(p[k],a)),Da=d(g.wb(p[l],a));if(1!=y&&(-1!=y||-1!=Da)){var eb=function(a,b){var c=a+b>>1;return c==a?c+1:c},Bc=function(b,c,k){if(b>=c)return 0==k?c:-1;var l=d(g.wb(p[b],a));if(0==l)return b;if(1==l)return-1;l=eb(b,c);if(l==c)return 0==k?c:-1;var y=d(g.wb(p[l],a));return 0==y?Bc(b,l,y):-1==y?Bc(l+1,c,k):Bc(b+1,l,y)},ff=function(b,c){if(b>=c)return b;var k=d(g.wb(p[c],a));if(0==k)return c;
if(-1==k)return b;k=eb(b,c);if(k==c)return b;var l=d(g.wb(p[k],a));return 0==l?ff(k,c):1==l?ff(b,k-1):-1};0!=y&&(k=Bc(k+1,l,Da));-1!=k&&(l=ff(k,l),-1!=l&&l>=k&&this.Nh(b,c,k,l+1))}};H.Nh=function(a,b,c,d){for(;c<d&&(a[gb]||!(a[ab]>=a.W));++c)if(this.C.La())!a[gb]&&a.M?a.M--:b[a.count++]=this.A[c];else for(var g=0;g<this.A[c][B]&&a[ab]<b[B];++g)!a[gb]&&a.M?a.M--:b[a.count++]=this.A[c][g]};
H.fill=function(a,b){if(this.ja())for(var c=0;c<this.A[B]&&0<a[ab];++c)if(0<a[wb]){if(a.offset=a[wb]-(this.C.La()?1:this.A[c][B]),0>a[wb])for(var d=this.A[c][B]+a[wb];d<this.A[c][B]&&0<a[ab];++d)b[a.uf++]=this.A[c][d],a.count--}else if(this.C.La())b[a.uf++]=this.A[c],a.count--;else for(d=0;d<this.A[c][B]&&0<a[ab];++d)b[a.uf++]=this.A[c][d],a.count--;else for(c=0;c<this.g[B]&&0<a[ab];++c)this.g[c].fill(a,b)};
function sf(a,b){for(var c=b.Za(),d=a.map(function(a){var d=new tf(a.id(),b);d.b=a.s()[0];d.A=a.s()[1];d.b[E](function(a,g){c.add(a,b.La()?1:d.A[g][B])});return d}),g=0;g<d[B]-1;++g)vf(d[g],d[g+1]);return 1<d[B]?of(d[0]):d[0]};
function yf(a){if(1==a.f[B])return new zf(a.f[0].rb);a=a.f.map(function(a){return a.rb});return new Af(a)}function zf(a){this.Cd=0==a?Bf:Cf;this.Ze=0==a?function(a){return null!=a?a[gb]():null}:function(a){return a||null};this.Ug=0==a?Df:Ef}K(zf,Vd);function Cf(a,b){return a>b?1:a<b?-1:0}function Bf(a,b){return Cf(b,a)}function Ef(a,b){return ie(a,b)}function Df(a,b){return ie(b,a)}H=zf[t];
H.wb=function(a,b){var c=this.Ze(b),d=[null===c.c,null===c.u];if(!d[0]){var g=this.Cd(a,c.c);d[0]=c.ba?1==g:-1!=g}d[1]||(g=this.Cd(a,c.u),d[1]=c.na?-1==g:1!=g);return d};H.compare=function(a,b){return this.Cd(a,b)};H.min=function(a,b){return a<b?1:a==b?0:-1};H.max=function(a,b){return a>b?1:a==b?0:-1};H.Se=function(a,b){var c=this.wb(a,b);return c[0]&&c[1]};H.Tg=function(a,b){return this.Ug(a,b)};
H.qh=function(a){return a[Ga](function(a){return null!==a})[Ya](J(function(a,c){return this.Ug(a,c)},this))};H.Te=function(a){return Pb(this.Ze(a).c)};H.fe=function(a){a=this.Ze(a);return[a.c,a.u]};f(H,function(){return this.Cd==Bf?"SimpleComparator_DESC":"SimpleComparator_ASC"});function Af(a){this.Ka=a.map(function(a){return new zf(a)})}K(Af,Vd);H=Af[t];H.Ge=function(a,b,c){for(var d=0,g=0;g<this.Ka[B]&&0==d;++g)d=c(this.Ka[g],a[g],b[g]);return d};
H.compare=function(a,b){return this.Ge(a,b,function(a,b,g){return a[Ab](b,g)})};H.min=function(a,b){return this.Ge(a,b,function(a,b,g){return a.min(b,g)})};H.max=function(a,b){return this.Ge(a,b,function(a,b,g){return a.max(b,g)})};H.wb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka[B]&&(c[0]||c[1]);++d){var g=this.Ka[d].wb(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};H.Se=function(a,b){for(var c=!0,d=0;d<this.Ka[B]&&c;++d)c=this.Ka[d].Se(a[d],b[d]);return c};
H.qh=function(a){var b=a[Ga](function(a){return a[Ta](Qb)});a=e(this.Ka[B]);for(var c=0;c<a[B];c++)a[c]=b.map(function(a){return a[c]});a[E](function(a,b){a[Ya](J(function(a,c){return this.Ka[b].Tg(a,c)},this))},this);b=e(b[B]);for(c=0;c<b[B];c++)b[c]=a.map(function(a){return a[c]});return b[Ya](J(function(a,b){for(var c=0,l=0;l<this.Ka[B]&&0==c;++l)c=this.Ka[l].Tg(a[l],b[l]);return c},this))};H.Te=function(a){return this.Ka[0].Te(a[0])};
H.fe=function(a){var b=a.map(function(a,b){return this.Ka[b].fe(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].fe(a)[1]},this);return[b,a]};function Ff(a){this.qa=a;this.qb=O();this.nd=new kf;this.ub=new kf}H=Ff[t];na(H,function(){return this.qa[u]()});H.add=function(a,b){null===a?(this.qb.add(b),this.nd.add(a,1)):this.qa.add(a,b)};H.set=function(a,b){null===a?(this.qb[cb](),this.nd[cb](),this.add(a,b)):this.qa.set(a,b)};va(H,function(a,b){if(null===a)b?(this.qb[Xa](b),this.nd[jb](a,1)):(this.qb[cb](),this.nd[cb]());else this.qa[jb](a,b)});H.get=function(a){return null===a?Nd(this.qb):this.qa.get(a)};H.Dd=function(a){return this.qa.Dd(a)};
H.Za=function(){this.ub.zl([this.qa.Za(),this.nd]);return this.ub};H.nb=function(a,b,c,d){b=this.qa.nb(a,b,c,d);return null!=a?b:b[Ra](Nd(this.qb))};ta(H,function(){this.qb[cb]();this.qa[cb]()});H.ma=function(a){return null===a?0!=this.qb[F]:this.qa.ma(a)};H.min=function(){return this.qa.min()};H.max=function(){return this.qa.max()};H.Ia=function(){return[new dd(-2,Nd(this.qb))][Ra](this.qa.Ia())};H.Nc=function(){return this.qa.Nc()};
function Gf(a,b){for(var c=-1,d=0;d<b[B];++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new P(102);var d=b[c].s(),g=b[n](0);g[z](c,1);var c=a(g),k=new Ff(c);d[E](function(a){k.qb.add(a)});return k}H.La=function(){return this.qa.La()};function Hf(a){this.w=a;this.tb=O();this.O=new zf(1)}H=Hf[t];na(H,G("w"));H.add=function(a){if("number"!=typeof a)throw new P(103);this.tb.add(a)};H.set=function(a,b){this.add(a,b)};va(H,function(a){this.tb[Xa](a)});H.get=function(a){return this.ma(a)?[a]:[]};H.min=function(){return this.ed(J(this.O.min,this.O))};H.max=function(){return this.ed(J(this.O.max,this.O))};
H.ed=function(a){if(0==this.tb[F])return null;var b=Nd(this.tb)[Ka](J(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};H.Dd=function(){return this.tb[F]};H.nb=function(a,b,c,d){var g=a||[he()];a=Nd(this.tb)[Ga](function(a){return g[$a](function(b){return this.O.Se(a,b)},this)},this);return jf(a,b,c,d)};ta(H,function(){this.tb[cb]()});H.ma=function(a){return this.tb.has(a)};H.Ia=function(){return[new dd(0,Nd(this.tb))]};H.Nc=G("O");
function If(a,b){var c=new Hf(a);b[0].s()[E](function(a){c.add(a,a)});return c}H.La=Jb(!0);H.Za=function(){var a=new kf;a.ta=this.tb[F];return a};function Jf(a){this.j=a;this.Gb=a.m(Cd);this.G=a.m(Ed);this.ua=a.m(Dd)}H=Jf[t];H.Fa=function(a){var b=a.$a(),c=J(function(){if(0==b[B])return Tc();var a=b[rb]();return(a.Kb()?this.gj(a):this.hj(a))[x](c)},this);return c()};H.hj=function(a){var b=new ee(this.j,O([a]));return this.Gb.Sb(0,b).K(a[u](),J(a.sc,a)).get([])[x](J(function(b){this.ua.set(a[u](),b);this.Yk(a,b)},this))};H.Yk=function(a,b){var c=this.G.pg(a[u]());b[E](function(a){c[E](function(b){var c=a.Zb(b[u]());b.add(c,a.id())})})};
H.gj=function(a){var b=new ee(this.j,O([a])),c=this.Gb.Sb(0,b),b=c.K(a[u](),a.sc).get([])[x](J(function(b){this.ua.set(a[u](),b)},this)),d=a.Ea().map(function(a){return this.Zk(a,c)},this)[Ra](this.$k(a,c));return Xc(d[Ra](b))};H.Zk=function(a,b){var c=b.K(a.l(),fd,1),d=yf(a);return c.get([])[x](J(function(b){L("btree"==b[0].s().type);if(1<b[B]){if(a.ug()){var c=rf[D](void 0,d,a.l(),a.cd);b=Gf(c,b[n](1))}else b=rf(d,a.l(),a.cd,b[n](1));this.G.set(a.od,b)}},this))};
H.$k=function(a,b){return b.K(a.Vb(),fd,1).get([])[x](J(function(b){L("rowid"==b[0].s().type);1<b[B]&&(b=If(a.Vb(),b[n](1)),this.G.set(a[u](),b))},this))};function Kf(){this.X=N();this.je=N()}Kf[t].Fa=function(a){a.$a()[E](function(a){var c=[];this.je.set(a[u](),c);var d=a.Vb();if(null===this.get(d)){var g=new Hf(d);c[w](g);this.X.set(d,g)}a.Ea()[E](function(a){var b;b=yf(a);b=new mf(a.l(),b,a.cd);b=a.ug()?new Ff(b):b;c[w](b);this.X.set(a.l(),b)},this)},this);return Tc()};Kf[t].get=function(a){return this.X.get(a)||null};
Kf[t].set=function(a,b){var c=this.je.get(a)||null;null===c&&(c=[],this.je.set(a,c));for(var d=null,g=0;g<c[B];g++)if(c[g][u]()==b[u]()){d=g;break}null!==d&&0<c[B]?c[z](d,1,b):c[w](b);this.X.set(b[u](),b)};Kf[t].pg=function(a){return this.je.get(a)||[]};function Lf(a){this.Cc=[];Lb(a)&&this.add(a)}f(Lf[t],function(){return this.Cc.map(function(a){return a[C]()})[m](",")});Lf[t].ma=function(a){return this.Cc[$a](function(b){return b[tb](a)})};Lf[t].ga=G("Cc");
Lf[t].add=function(a){if(0!=a[B])if(a=this.Cc[Ra](a),1==a[B])this.Cc=a;else{a[Ya](ie);for(var b=[],c=a[0],d=1;d<a[B];++d)if(c.Vg(a[d])){var g=a[d],k=he();if(null!==c.c&&null!==g.c){var l=ge(c.c,g.c,!0);1!=l?(k.c=c.c,k.ba=0!=l?c.ba:c.ba&&g.ba):(k.c=g.c,k.ba=g.ba)}null!==c.u&&null!==g.u&&(l=ge(c.u,g.u,!1),-1!=l?(k.u=c.u,k.na=0!=l?c.na:c.na&&g.na):(k.u=g.u,k.na=g.na));c=k}else b[w](c),c=a[d];b[w](c);this.Cc=b}};
function Mf(a,b){var c=[];a.ga().map(function(a){return b.ga().map(function(b){var c;if(a.Vg(b)){c=he();var l=ge(a.c,b.c,!0),l=0==l?a.ba?a:b:-1!=l?a:b;c.c=l.c;c.ba=l.ba;null===a.u||null===b.u?b=null===a.u?b:a:(l=ge(a.u,b.u,!1),b=0==l?a.na?a:b:-1==l?a:b);c.u=b.u;c.na=b.na}else c=null;return c})})[E](function(a){c=c[Ra](a)});return new Lf(c[Ga](function(a){return null!==a}))};function Nf(a,b){var c=[],d=null,g=null;a.Ec(function(a){var l=b(a);null==a[Bb]()?g=l:d.la(l);var p=a[Bb]();null!==p&&p.xa()==d.xa()&&(p=c[Za](d),-1!=p&&c[z](p,1));1<a.xa()&&c[w](l);d=a.Ag()?c[c[B]-1]:l});return g}function Of(a){return Pf(a,function(a){return a.Ag()})}function Qf(a){var b=a[Bb](),c=0;null!==b&&(c=b.ca()[Za](a),b[ib](a));var d=a.ca()[n]();d[E](function(d,k){a[ib](d);null===b||b.Gc(d,c+k)});return{parent:b,children:d}}
function Rf(a,b){a.ca()[n]()[E](function(c){a[ib](c);b.la(c)});a.la(b)}function Sf(a){L(1==a.xa());var b=a.lb(0);L(1==b.xa());Qf(a);Rf(b,a);return b}function Tf(a,b,c){L(1==a.xa());var d=a.lb(0);L(1<d.xa());var g=d.ca()[n]();if(!g[$a](function(a){return b(a)}))return a;Qf(a);g[E](function(g,l){if(b(g)){var p=c(a);d.ge(l);p.la(g);d.Gc(p,l)}});return d}function Uf(a,b,c,d){var g=a[Bb]();null!==g&&(a=g.ca()[Za](a),g.ge(a),g.Gc(c,a));b.ca()[n]()[E](function(a){b[ib](a);d.la(a)});return c}
function Pf(a,b,c){function d(a){b(a)&&g[w](a);null!=c&&c(a)||a.ca()[E](d)}var g=[];d(a);return g}function Vf(a,b){var c=b||function(a){return a[C]()+"\n"},d="";a.Ec(function(a){for(var b=0;b<a.Gj();b++)d+="-";d+=c(a)});return d};function Wf(a){Ce[r](this);this.bc=a;this.cb=!1}K(Wf,Ce);H=Wf[t];H.Rb=function(){return Nf(this,function(a){if(a instanceof Wf){var b=new Wf(a.bc);b.cb=a.cb;b.sf(a.Y());return b}return a.Rb()}[D](this))};H.mb=function(a){var b=a||[];this.Ec(function(a){a!=this&&a.mb(b)}[D](this));a=O(b);return Nd(a)};H.ie=function(a){this.cb!=a&&(this.cb=a,this.bc="and"==this.bc?"or":"and",this.ca()[E](function(b){return b.ie(a)}))};H.eval=function(a){var b=this.ca().map(function(b){return b.eval(a)});return this.Ai(b)};
H.Ai=function(a){return"and"==this.bc?ne(a):oe(a)};f(H,function(){return"combined_pred_"+this.bc[C]()});function Xf(){this[cb]()}var Yf=aa[t][Wa],Zf=aa[t][sb];H=Xf[t];H.set=function(a,b){this.ud(a);var c=!this.Ud(a);this.h[a]=b;if("__proto__"==a||!$f&&!Yf[r](this.h,a)){delete this.h[a];var d=hc(this.Mb,a);if(c=0>d)d=this.Mb[B];this.Mb[d]=a;this.pf[d]=b}c&&this.aa++};H.get=function(a,b){this.ud(a);if(this.Ud(a))return this.h[a];var c=hc(this.Mb,a);return 0<=c?this.pf[c]:b};
va(H,function(a){this.ud(a);if(this.Ud(a))return this.aa--,delete this.h[a],!0;a=hc(this.Mb,a);return 0<=a?(this.aa--,mc(this.Mb,a),mc(this.pf,a),!0):!1});H.addAll=function(a){ic(a.Ua(),function(b){this.set(b,a.get(b))},this)};H.zc=function(){return!this.aa};H.Ub=G("aa");H.ma=function(a){this.ud(a);return this.Ud(a)||0<=hc(this.Mb,a)};H.Ua=function(){var a;if(ag)a=oc(aa.keys(this.h));else{a=[];for(var b in this.h)Zf[r](this.h,b)&&a[w](b)}pc(a,this.Mb);return a};
H.ga=function(){for(var a=[],b=this.Ua(),c=0;c<b[B];c++)a[w](this.get(b[c]));return a};H.getEntries=function(){for(var a=[],b=this.Ua(),c=0;c<b[B];c++){var d=b[c];a[w]([d,this.get(d)])}return a};ta(H,function(){this.h=$f?aa[lb](null):{};this.Mb=[];this.pf=[];this.aa=0});la(H,function(){var a=new Xf;a.addAll(this);return a});H.Ud=function(a){return"__proto__"==a?!1:$f?a in this.h:Zf[r](this.h,a)};H.ud=function(a){L(Sb(a),"key must be a string.")};var $f=!!aa[lb],ag=!!aa.keys;function bg(){this[cb]()}H=bg[t];H.aa=0;ta(H,function(){this.aa=0;this.h=new Xf});la(H,function(){var a=new bg;a.Fh(this);return a});H.add=function(a,b){var c=this.h.get(a);c||this.h.set(a,c=[]);c[w](b);this.aa++};H.Fh=function(a){ic(a.getEntries(),function(a){this.add(a[0],a[1])},this)};H.get=function(a){return(a=this.h.get(a))?oc(a):[]};
va(H,function(a,b){var c=this.h.get(a);if(!c)return!1;var d=nc(c,function(a){return b===a?0!==b||1/b===1/a:b!==b&&a!==a});d&&(this.aa--,0==c[B]&&this.h[jb](a));return d});H.zc=function(){return!this.aa};H.Ub=G("aa");H.ma=function(a){return this.h.ma(a)};H.Ua=function(){return this.h.Ua()};H.ga=function(){return vc(this.h.ga())};H.getEntries=function(){for(var a=this.Ua(),b=[],c=0;c<a[B];c++)for(var d=a[c],g=this.get(d),k=0;k<g[B];k++)b[w]([d,g[k]]);return b};function cg(a,b,c){Ce[r](this);this.Ma=a;this.Ca=b;this.I=c;this.$e=null;this.Fd=ue.Je().He(this.Ma.V(),this.I)}K(cg,Ce);H=cg[t];H.Rb=function(){var a=new cg(this.Ma,this.Ca,this.I);a.sf(this.Y());return a};H.mb=function(a){return null!=a?(a[w](this.Ma),a[w](this.Ca),a):[this.Ma,this.Ca]};H.reverse=function(){var a=this.I;switch(this.I){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new cg(this.Ca,this.Ma,a)};
H.eval=function(a){var b=a[A][Ga](function(a){var b=a.S(this.Ma);a=a.S(this.Ca);return this.Fd(b,a)},this);return new je(b,a.U())};f(H,function(){return"join_pred("+this.Ma.l()+", "+this.Ca.l()+")"});H.If=function(a){return-1!=a.U()[Za](this.Ma.K().pa())};H.Oh=function(a){return-1!=a.U()[Za](this.Ca.K().pa())};H.Oi=function(a,b){var c=null,d=null;this.If(a)?(this.Kf(a,b),c=a,d=b):(this.Kf(b,a),c=b,d=a);return[c,d]};
H.Kf=function(a,b){L(this.If(a),"Mismatch between join predicate left operand and right relation.");L(this.Oh(b),"Mismatch between join predicate right operand and right relation.")};H.Vi=function(a,b,c){var d=[a,b];c||(d=this.Oi(a,b));a=d[0];d=d[1];return"eq"==this.I?this.Wi(a,d,c):this.Xi(a,d,c)};H.Gi=function(a){var b={};a.mb()[E](function(a){b[a[u]()]=null});return b};H.Wf=function(a,b){null===this.$e&&(this.$e=this.Gi(this.Ca.K()));var c=new qe(new dd(-1,this.$e),!1);return se(a,b,c,[this.Ca.K().pa()])};
H.Xi=function(a,b,c){for(var d=[],g=a.U(),k=b.U(),l=0;l<a[A][B];l++){var p=!1,y=a[A][l].S(this.Ma);if(null!==y)for(var Da=0;Da<b[A][B];Da++)if(this.Fd(y,b[A][Da].S(this.Ca))){var p=!0,eb=se(a[A][l],g,b[A][Da],k);d[w](eb)}c&&!p&&d[w](this.Wf(a[A][l],g))}a=a.U()[Ra](b.U());return new je(d,a)};
H.Wi=function(a,b,c){var d=a,g=b,k=this.Ma,l=this.Ca;if(c||a[A][B]>b[A][B])d=b,g=a,k=this.Ca,l=this.Ma;var p=new bg,y=[];d[A][E](function(a){var b=ha(a.S(k));p.add(b,a)});var Da=d.U(),eb=g.U();g[A][E](function(a){var b=a.S(l),d=ha(b);null!==b&&p.ma(d)?p.get(d)[E](function(b){b=se(a,eb,b,Da);y[w](b)}):c&&y[w](this.Wf(a,eb))}[D](this));a=a.U()[Ra](b.U());return new je(y,a)};function dg(a,b,c){return null===b?new Ee(a,b,c):Lb(b.l)?new cg(a,b,c):new Ee(a,b,c)};var eg={};I("lf.schema.DataStoreType",eg,void 0);eg.INDEXED_DB=0;eg.MEMORY=1;eg.LOCAL_STORAGE=2;eg.FIREBASE=3;eg.WEB_SQL=4;eg.OBSERVABLE_STORE=5;function fg(a,b,c,d){this.od=a;ja(this,b);this.cd=c;this.f=d}fg[t].l=function(){return this.od+"."+this[q]};fg[t].ug=function(){return this.f[$a](function(a){return a.ea.Yb()})};function S(a,b,c,d){this.w=a;this.ia=c;this.F=b;this.be=d;this.ib=null}I("lf.schema.Table",S,void 0);na(S[t],G("w"));na(S[t],S[t][u]);S[t].bb=G("ib");
S[t].pa=function(){return this.ib||this.w};S[t].Ic=function(a){var b=new this.constructor(this.w);b.ib=a;b.al=this.al;return b};S[t].as=S[t].Ic;S[t].createRow=S[t].Hb;S[t].deserializeRow=S[t].sc;S[t].Ea=G("ia");S[t].getIndices=S[t].Ea;S[t].mb=G("F");S[t].getColumns=S[t].mb;S[t].getConstraint=S[t].Ib;S[t].Kb=G("be");S[t].persistentIndex=S[t].Kb;S[t].Vb=function(){return this.w+".#"};function T(a,b){wa(this,a);this.Pb=b;this.ib=null}H=T[t];na(H,function(){return this.Pb+"("+this[kb][u]()+")"});H.l=function(){return this.Pb+"("+this[kb].l()+")"};H.K=function(){return this[kb].K()};f(H,function(){return this.l()});H.V=function(){return this[kb].V()};H.bb=G("ib");H.Ea=function(){return[]};H.Yb=Jb(!1);H.Ic=function(a){this.ib=a;return this};T[t].as=T[t].Ic;T[t].gg=function(){for(var a=[this],b=this;b instanceof T;)a[w](b[kb]),b=b[kb];return a};
function gg(a){this.ib=a||null;this.N=new S("#UnknownTable",[],[],!1)}H=gg[t];na(H,Jb("*"));H.l=function(){return this[u]()};f(H,function(){return this.l()});H.K=G("N");H.V=Jb(4);H.bb=G("ib");H.Ea=function(){return[]};H.Yb=Jb(!1);I("lf.fn.avg",function(a){return new T(a,"AVG")},void 0);function hg(a){return new T(a||new gg,"COUNT")}I("lf.fn.count",hg,void 0);function ig(a){return new T(a,"DISTINCT")}I("lf.fn.distinct",ig,void 0);I("lf.fn.max",function(a){return new T(a,"MAX")},void 0);I("lf.fn.min",function(a){return new T(a,"MIN")},void 0);I("lf.fn.stddev",function(a){return new T(a,"STDDEV")},void 0);I("lf.fn.sum",function(a){return new T(a,"SUM")},void 0);I("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")},void 0);function U(a,b){Ae[r](this,"","");this.dj=b;this.Rg=a}K(U,Ae);H=U[t];ma(H,function(a,b){switch(this.dj){case 1:return this.Zi(a,b);case 0:return this.Yi(a,b);default:return this.aj(a,b)}});f(H,Jb("dummy_node"));H.pd=function(){return this[C]()};H.Jf=function(a){L(-1==this.Rg||a[B]==this.Rg)};H.aj=function(a,b){return new M(J(function(c){c(this.fa(a,[],b))},this))};H.Zi=function(a,b){return this.lb(0)[Pa](a,b)[x](J(function(c){this.Jf(c);return this.fa(a,c,b)},this))};
H.Yi=function(a,b){var c=this.ca().map(function(c){return c[Pa](a,b)});return Xc(c)[x](J(function(c){var g=[];c[E](function(a){for(var b=0;b<a[B];++b)g[w](a[b])});this.Jf(g);return this.fa(a,g,b)},this))};function jg(a){U[r](this,-1,1);this.Gf=a}K(jg,U);f(jg[t],function(){return"aggregation("+this.Gf.map(function(a){return a.l()})[C]()+")"});jg[t].fa=function(a,b){b[E](function(a){(new kg(a,this.Gf)).ai()},this);return b};function kg(a,b){this.Ha=a;this.F=b}kg[t].ai=function(){this.F[E](function(a){a=a.gg()[gb]();for(var b=1;b<a[B];b++){var c=a[b],d=c.gg()[n](-1)[0],g=this.Jj(c);if(g.tg(c))break;d=lg(c.Pb,g,d);this.Ha.lh(c,d)}},this)};
kg[t].Jj=function(a){return a[kb]instanceof T?this.Ha.xc(a[kb]):this.Ha};function lg(a,b,c){var d=null;switch(a){case "MIN":d=mg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=mg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ng(b,c);break;case "COUNT":d=og(b,c);break;case "SUM":d=pg(b,c);break;case "AVG":a=og(b,c);0<a&&(d=pg(b,c)/a);break;case "GEOMEAN":d=qg(b,c);break;default:d=rg(b,c)}return d}
function mg(a,b,c){return a[A][Ka](function(a,g){var k=g.S(b);return null===k?a:null===a?k:c(a,k)},null)}function og(a,b){return b instanceof gg?a[A][B]:a[A][Ka](function(a,d){return a+(Pb(d.S(b))?0:1)},0)}function pg(a,b){return mg(a,b,function(a,b){return b+a})}function rg(a,b){var c=[];a[A][E](function(a){a=a.S(b);null===a||c[w](a)});return 0==c[B]?null:od[xb](null,c)}
function qg(a,b){var c=0,d=a[A][Ka](function(a,d){var l=d.S(b);if(0==l||null===l)return a;c++;return a+ba.log(l)},0);return 0==c?null:ba.pow(ba.E,d/c)}function ng(a,b){var c=N();a[A][E](function(a){var g=a.S(b);c.set(g,a)});return new je(yd(c),a.U())};function sg(a,b){this.Da=a;this.sa=b}sg[t].ob=G("Da");sg[t].da=G("sa");function V(){Ae[r](this,"","")}K(V,Ae);function tg(a,b){V[r](this);ia(this,a);ua(this,b)}K(tg,V);function ug(a,b){tg[r](this,a,b)}K(ug,tg);function vg(a){V[r](this);ia(this,a)}K(vg,V);f(vg[t],function(){return"delete("+this[h][u]()+")"});function wg(a,b){V[r](this);ia(this,a);this.zf=b}K(wg,V);f(wg[t],function(){var a=[];this.zf&&(a=this.zf.map(function(a){return a.J[u]()},this));return"update("+this[h][u]()+", ["+a[m](",")+"])"});
function xg(a){V[r](this);this.Ba=a}K(xg,V);f(xg[t],function(){return"select("+this.Ba[C]()+")"});function yg(a){V[r](this);ia(this,a)}K(yg,V);f(yg[t],function(){var a="table_access("+this[h][u]();null===this[h].bb()||(a+=" as "+this[h].bb());return a+")"});function zg(){V[r](this)}K(zg,V);f(zg[t],Jb("cross_product"));function Ag(a,b){V[r](this);this.f=a;this.Wb=b}K(Ag,V);
f(Ag[t],function(){var a="project("+this.f[C]();if(null!==this.Wb)var b=this.Wb.map(function(a){return a.l()})[m](", "),a=a+(", groupBy("+b+")");return a+")"});function Bg(a){V[r](this);this.L=a}K(Bg,V);f(Bg[t],function(){return"order_by("+Ie(this.L)+")"});function Cg(a){V[r](this);this.f=a}K(Cg,V);f(Cg[t],function(){return"aggregation("+this.f[C]()+")"});function Dg(a){V[r](this);this.f=a}K(Dg,V);f(Dg[t],function(){return"group_by("+this.f[C]()+")"});function Eg(a){V[r](this);this.W=a}K(Eg,V);
f(Eg[t],function(){return"limit("+this.W+")"});function Fg(a){V[r](this);this.M=a}K(Fg,V);f(Fg[t],function(){return"skip("+this.M+")"});function Gg(a,b){V[r](this);this.Ba=a;this.Dg=b}K(Gg,V);f(Gg[t],function(){return"join(type: "+(this.Dg?"outer":"inner")+", "+this.Ba[C]()+")"});function Hg(){};function Ig(){}K(Ig,Hg);Ig[t].Eb=function(a){this.$=a;this.ab(this.$);return this.$};Ig[t].ab=function(a){if(a instanceof xg){L(1==a.xa(),"SelectNode must have exactly one child.");var b=this.Lf(a.Ba),b=this.Ii(b);Uf(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}a.ca()[E](function(a){this.ab(a)},this)};Ig[t].Lf=function(a){if(0==a.xa()||"and"!=a.bc)return[a];var b=a.ca()[n]().map(function(b){a[ib](b);return this.Lf(b)},this);return vc(b)};
Ig[t].Ii=function(a){var b=null,c=null;a.map(function(a,g){var k=new xg(a);0==g?b=k:c.la(k);c=k},this);return[b,c]};function Jg(){}K(Jg,Hg);Jg[t].Eb=function(a){this.$=a;this.ab(this.$);return this.$};Jg[t].ab=function(a){if(a instanceof zg)for(;2<a.xa();){for(var b=new zg,c=0;2>c;c++){var d=a.ge(0);b.la(d)}a.Gc(b,0)}a.ca()[E](function(a){this.ab(a)},this)};function Kg(){U[r](this,2,0)}K(Kg,U);f(Kg[t],Jb("cross_product"));Kg[t].fa=function(a,b){for(var c=b[0],d=b[1],g=[],k=c.U(),l=d.U(),p=0;p<c[A][B];p++)for(var y=0;y<d[A][B];y++){var Da=se(c[A][p],k,d[A][y],l);g[w](Da)}c=c.U()[Ra](d.U());return[new je(g,c)]};function Lg(a,b){Le[r](this,a,b);this.Ya=a.m(Gd);this.Jb=a.m(Hd)}K(Lg,Le);Ea(Lg[t],Jb(2));Lg[t].cf=function(a){0==this.V()?this.Ik(a):this.ld()};Lg[t].Ik=function(a){this.ee[E](function(b,c){b instanceof He&&this.Jb.zh(b,a[c])},this)};Lg[t].ld=function(){var a=this.Jb.Oe(this.da());0!=a[B]&&(a=new Me(this[Va],a),this.Ya.hc(a))};function Mg(a){Fe[r](this,a)}K(Mg,Fe);Mg[t].da=function(){var a=O();a.add(this.c);this.ea[zb]().fg(this.c[u]())[E](a.add[D](a));return a};la(Mg[t],function(){var a=new Mg(this.ea);a.Bd(this);a.c=this.c;return a});Aa(Mg[t],function(a){Mg.Nb[D][r](this,a);this.se(a);return this});function Ng(a){Fe[r](this,a)}K(Ng,Fe);Ng[t].da=function(){var a=O();a.add(this.Ga);var b=this.ea[zb]();b.Pj(this.Ga[u]())[E](a.add[D](a));this.mc&&b.fg(this.Ga[u]())[E](a.add[D](a));return a};la(Ng[t],function(){var a=new Ng(this.ea);a.Bd(this);a.Ga=this.Ga;this[db]&&ua(a,this[db]instanceof te?this[db]:this[db][n]());a.mc=this.mc;a.nc=this.nc;return a});
Aa(Ng[t],function(a){Ng.Nb[D][r](this,a);this.nc&&ua(this,this.nc instanceof te?a[this.nc.yb()]:this.nc.map(function(b){return b instanceof te?a[b.yb()]:b}));return this});function Og(a){Fe[r](this,a)}K(Og,Fe);Og[t].da=function(){var a=O();a.add(this[h]);var b=this.set.map(function(a){return a.J.l()}),c=this.ea[zb]();c.Qj(b)[E](a.add[D](a));c.Fj(b)[E](a.add[D](a));return a};la(Og[t],function(){var a=new Og(this.ea);a.Bd(this);ia(a,this[h]);a.set=this.set?this.set[n]():this.set;return a});Aa(Og[t],function(a){Og.Nb[D][r](this,a);this.set[E](function(b){-1!=b.vd&&pa(b,a[b.vd])});this.se(a);return this});function Pg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+hd(b)+"'";default:return"'"+b[C]()+"'"}}function Qg(a,b){var c=a.mc?"INSERT OR REPLACE":"INSERT",d=a.Ga.mb(),c=c+(" INTO "+a.Ga[u]()+"("),c=c+d.map(function(a){return a[u]()})[m](", "),c=c+") VALUES (";return a[db].map(function(a){var k=d.map(function(c){var d=a.s()[c[u]()];return b?null!=d?"#":"NULL":Pg(c.V(),d)});return c+k[m](", ")+");"})[m]("\n")}
function Rg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Sg(a,b,c,d){return a instanceof te?"?"+a.yb()[C]():d?null!=a?"#":"NULL":"match"==b?"'"+a[C]()+"'":"in"==b?"("+a.map(function(a){return Pg(c,a)})[m](", ")+")":"between"==b?Pg(c,a[0])+" AND "+Pg(c,a[1]):Pg(c,a)[C]()}
function Tg(a,b){return a.ca().map(function(a){return"("+Ug(a,b)+")"})[m]("and"==a.bc?" AND ":" OR ")}function Vg(a){return[a.Ma.l(),Rg(a.I),a.Ca.l()][m](" ")}function Ug(a,b){if(a instanceof Ee){var c=a.J.l(),d=Rg(a.I),g=Sg(a[v],a.I,a.J.V(),b);return"="==d&&"NULL"==g?[c,"IS NULL"][m](" "):"<>"==d&&"NULL"==g?[c,"IS NOT NULL"][m](" "):[c,d,g][m](" ")}if(a instanceof Wf)return Tg(a,b);if(a instanceof cg)return Vg(a);throw new P(357,typeof a);}function Wg(a,b){var c=Ug(a,b);return c?" WHERE "+c:""}
function Xg(a,b){var c="UPDATE "+a[h][u]()+" SET ",c=c+a.set.map(function(a){var b=a.J.l()+" = ";return-1!=a.vd?b+"?"+a.vd[C]():b+Pg(a.J.V(),a[v])[C]()})[m](", ");a.B&&(c+=Wg(a.B,b));return c+";"}
function Yg(a,b){var c="*";a.f[B]&&(c=a.f.map(function(a){return a.bb()?a.l()+" AS "+a.bb():a.l()})[m](", "));c="SELECT "+c+" FROM ";null!=a.Cb&&0!=a.Cb[F]?c+=Zg(a,b):(c+=a.c.map($g)[m](", "),a.B&&(c+=Wg(a.B,b)));if(a.L)var d=a.L.map(function(a){return a.J.l()+(0==a.rb?" DESC":" ASC")})[m](", "),c=c+(" ORDER BY "+d);a.ha&&(d=a.ha.map(function(a){return a.l()})[m](", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W[C]());a.M&&(c+=" SKIP "+a.M[C]());return c+";"}
function $g(a){return a.pa()!=a[u]()?a[u]()+" AS "+a.pa():a[u]()}function Zg(a,b){for(var c=Pf(a.B,function(a){return a instanceof cg}),d=c.map(Vg),g=$g(a.c[0]),k=1;k<a.c[B];k++)var l=$g(a.c[k]),g=a.Cb.has(c[d[B]-k].Y())?g+(" LEFT OUTER JOIN "+l):g+(" INNER JOIN "+l),g=g+(" ON ("+d[d[B]-k]+")");c=a.B.lb(0);c instanceof cg||(g+=" WHERE "+Ug(c,b));return g}
function ah(a,b){var c=b||!1,d=a.mg();if(d instanceof Ng)return Qg(d,c);if(d instanceof Mg){var g="DELETE FROM "+d.c[u]();d.B&&(g+=Wg(d.B,c));return g+";"}if(d instanceof Og)return Xg(d,c);if(d instanceof He)return Yg(d,c);throw new P(358,typeof d);};function bh(a,b){this.global=a;this.Wk=a.m(Fd);this.Ya=a.m(Gd);this.a=b}I("lf.query.BaseBuilder",bh,void 0);ma(bh[t],function(){try{this.jb()}catch(a){return Uc(a)}return new M(function(a,c){var d=new Lg(this[Va],[this.ad()]);this.Ya.hc(d)[x](function(c){a(c[0].Ke())},c)},this)});ma(bh[t],bh[t][Pa]);bh[t].dg=function(){var a=J(function(a){return a.pd(this.a)+"\n"},this);return Vf(this.Le().ob(),a)};bh[t].explain=bh[t].dg;Aa(bh[t],function(a){this.a[D](a);return this});Aa(bh[t],bh[t][D]);
bh[t].vl=function(a){return ah(this,a)};bh[t].toSql=bh[t].vl;H=bh[t];H.jb=Hb();H.mg=function(){return this.a.clone()};H.Nd=G("a");H.Le=function(){null==this.Xg&&(this.Xg=this.Wk.Rj(this.a));return this.Xg};H.ad=function(){return{context:this.mg(),ff:this.Le()}};H.Nj=function(){return{context:this.Nd(),ff:this.Le()}};function ch(a){bh[r](this,a,new Mg(a.m(Id)))}K(ch,bh);I("lf.query.DeleteBuilder",ch,void 0);ch[t].c=function(a){this.Sh();this.a.c=a;return this};ch[t].from=ch[t].c;ch[t].B=function(a){this.qe();this.a.B=a;return this};ch[t].where=ch[t].B;ch[t].Sh=function(){if(null!=this.a.c)throw new P(515);};ch[t].qe=function(){if(null!=this.a.B)throw new P(516);};ch[t].jb=function(){ch.Nb.jb[r](this);if(null==this.a.c)throw new P(517);};function dh(a,b){bh[r](this,a,new Ng(a.m(Id)));this.a.mc=b||!1}K(dh,bh);I("lf.query.InsertBuilder",dh,void 0);dh[t].jb=function(){dh.Nb.jb[r](this);var a=this.a;if(null==a.Ga||null==a[db])throw new P(518);if(a.mc&&null===a.Ga.Ib().Pd())throw new P(519);};dh[t].Ga=function(a){this.Th();this.a.Ga=a;return this};dh[t].into=dh[t].Ga;ua(dh[t],function(a){this.Uh();a instanceof te||a[$a](function(a){return a instanceof te})?this.a.nc=a:ua(this.a,a);return this});ua(dh[t],dh[t][db]);
dh[t].Th=function(){if(null!=this.a.Ga)throw new P(520);};dh[t].Uh=function(){if(null!=this.a[db])throw new P(521);};function eh(a){return fh("and",e[t][n][r](arguments))}I("lf.op.and",eh,void 0);I("lf.op.or",function(a){return fh("or",e[t][n][r](arguments))},void 0);function fh(a,b){var c=new Wf(a);b[E](function(a){c.la(a)});return c}I("lf.op.not",function(a){a.ie(!0);return a},void 0);function W(a,b){bh[r](this,a,new He(a.m(Id)));this.eg=this.Dh=!1;this.a.f=b;this.ji();this.hi()}K(W,bh);I("lf.query.SelectBuilder",W,void 0);H=W[t];H.jb=function(){W.Nb.jb[r](this);var a=this.a;if(null==a.c)throw new P(522);if(Lb(a.$b)&&!Lb(a.W)||Lb(a.kc)&&!Lb(a.M))throw new P(523);this.vi()};H.ji=function(){var a=this.a.f[Ga](function(a){return a instanceof T&&"DISTINCT"==a.Pb},this);if(0!=a[B]&&(1!=a[B]||1!=this.a.f[B]))throw new P(524);};H.vi=function(){null!=this.a.ha?this.ni():this.ui()};
H.ni=function(){var a=this.a.f[Ga](function(a){return!(a instanceof T)}).map(function(a){return a.l()}),b=!1;if(0==this.a.ha[B]||0==this.a.f[B])b=!0;else{var c=this.a.ha.map(function(a){return a.l()});(b=a[$a](function(a){return-1==c[Za](a)}))||(b=this.a.ha[$a](function(a){a=a.V();return 6==a||0==a}))}if(b)throw new P(525);};
H.ui=function(){var a=this.a.f[$a](function(a){return a instanceof T},this),b=this.a.f[$a](function(a){return!(a instanceof T)},this)||0==this.a.f[B];if(a&&b)throw new P(526);};H.hi=function(){this.a.f[E](function(a){if(a instanceof T&&!gh(a.Pb,a.V()))throw new P(527,a.l());},this)};H.c=function(a){if(this.eg)throw new P(515);this.eg=!0;null==this.a.c&&(this.a.c=[]);this.a.c[w][xb](this.a.c,e[t][n][r](arguments));return this};W[t].from=W[t].c;
W[t].B=function(a){if(this.Dh)throw new P(516);this.Dh=!0;this.re(a);return this};W[t].where=W[t].B;W[t].re=function(a){null!=this.a.B&&(a=eh(a,this.a.B));this.a.B=a};W[t].rk=function(a,b){if(null==this.a.c)throw new P(542);this.a.c[w](a);this.re(b);return this};W[t].innerJoin=W[t].rk;
W[t].xk=function(a,b){if(!(b instanceof cg))throw new P(541);if(null==this.a.c)throw new P(542);this.a.c[w](a);null==this.a.Cb&&(this.a.Cb=O());var c=b;a.pa()!=b.Ca.K().pa()&&(c=b[gb]());this.a.Cb.add(c.Y());this.re(c);return this};W[t].leftOuterJoin=W[t].xk;W[t].W=function(a){if(null!=(this.a.W||this.a.$b))throw new P(528);if(a instanceof te)this.a.$b=a;else{if(0>a)throw new P(531);this.a.W=a}return this};W[t].limit=W[t].W;
W[t].M=function(a){if(null!=(this.a.M||this.a.kc))throw new P(529);if(a instanceof te)this.a.kc=a;else{if(0>a)throw new P(531);this.a.M=a}return this};W[t].skip=W[t].M;W[t].L=function(a,b){null==this.a.L&&(this.a.L=[]);this.a.L[w]({J:a,rb:null!=b?b:1});return this};W[t].orderBy=W[t].L;W[t].ha=function(a){if(null!=this.a.ha)throw new P(530);null==this.a.ha&&(this.a.ha=[]);this.a.ha[w][xb](this.a.ha,e[t][n][r](arguments));return this};W[t].groupBy=W[t].ha;
function gh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}la(W[t],function(){var a=new W(this[Va],this.a.f);a.a=this.a.clone();a.a.Lc=null;return a});la(W[t],W[t].clone);function hh(a,b){bh[r](this,a,new Og(a.m(Id)));ia(this.a,b)}K(hh,bh);I("lf.query.UpdateBuilder",hh,void 0);hh[t].set=function(a,b){var c={vd:b instanceof te?b.yb():-1,J:a,value:b};null!=this.a.set?this.a.set[w](c):this.a.set=[c];return this};hh[t].set=hh[t].set;hh[t].B=function(a){this.qe();this.a.B=a;return this};hh[t].where=hh[t].B;hh[t].qe=function(){if(null!=this.a.B)throw new P(516);};
hh[t].jb=function(){hh.Nb.jb[r](this);if(null==this.a.set)throw new P(532);if(this.a.set[$a](function(a){return a[v]instanceof te}))throw new P(501);};function ih(a){this.a=a;this.Da=null}ih[t].wc=function(){null===this.Da&&(this.Da=this.Id());return this.Da};function jh(a){ih[r](this,a)}K(jh,ih);jh[t].Id=function(){return this.a.mc?new ug(this.a.Ga,this.a[db]):new tg(this.a.Ga,this.a[db])};function kh(a){ih[r](this,a)}K(kh,ih);kh[t].Id=function(){var a=new wg(this.a[h],this.a.set),b=null!=this.a.B?new xg(this.a.B.Rb()):null,c=new yg(this.a[h]);null===b?a.la(c):(b.la(c),a.la(b));return a};function lh(a,b,c){this.Da=a;this.jf=b;this.gc=c}lh[t].wc=function(){this.gc[E](function(a){this.Da=a.Eb(this.Da,this.jf)},this);return this.Da};function mh(a,b){ih[r](this,a);this.gc=b}K(mh,ih);mh[t].Id=function(){var a=new vg(this.a.c),b=null!=this.a.B?new xg(this.a.B.Rb()):null,c=new yg(this.a.c);null===b?a.la(c):(b.la(c),a.la(b));return(new lh(a,this.a,this.gc)).wc()};function nh(){}K(nh,Hg);nh[t].Eb=function(a,b){this.$=a;this.ab(this.$,b);return this.$};nh[t].ab=function(a,b){if(a instanceof xg&&a.Ba instanceof cg){L(1==a.xa(),"SelectNode must have exactly one child.");var c=a.Ba.Y(),d=a.lb(0);d instanceof zg&&(c=Lb(b)&&null!=b.Cb&&b.Cb.has(c),c=new Gg(a.Ba,c),Uf(a,d,c,c),a==this.$&&(this.$=c),a=c)}a.ca()[E](function(a){this.ab(a,b)},this)};function oh(){this.oe=O()}K(oh,Hg);H=oh[t];H.Tf=function(){this.oe[cb]()};H.Eb=function(a){this.Tf();this.$=a;this.ab(this.$);this.Tf();return this.$};H.ab=function(a){if(this.yg(a)){var b=a.Ba instanceof Ee?this.Vk(a):this.Uk(a);this.oe.add(a);b==a&&(b=a.lb(0));null!==b&&(Pb(b[Bb]())&&(this.$=b),this.yg(b)&&!this.oe.has(b)&&this.ab(b))}else a.ca()[E](function(a){this.ab(a)},this)};
H.de=function(a,b){var c=a;if(this.ml(a))c=Sf(a),this.de(a,b);else if(this.ll(a)){var d=[],c=Tf(a,b,function(a){a=new xg(a.Ba);d[w](a);return a});d[E](function(a){this.de(a,b)},this)}return c};H.Vk=function(a){var b=O([a.Ba.J.K().pa()]),c=function(a){return this.ag(a,b)}[D](this);return this.de(a,c)};H.Uk=function(a){var b=O([a.Ba.Ma.K().pa(),a.Ba.Ca.K().pa()]),c=function(a){return this.ag(a,b)}[D](this);return this.de(a,c)};
H.ag=function(a,b){var c=O();Of(a)[E](function(a){c.add(a[h].pa())},this);a instanceof yg&&c.add(a[h].pa());return Od(c,b)};H.yg=function(a){return a instanceof xg&&!(a.Ba instanceof Wf)};H.ll=function(a){a=a.lb(0);return a instanceof zg||a instanceof Gg};H.ml=function(a){return a.lb(0)instanceof xg};function ph(a,b){ih[r](this,a);this.gc=b;this.ah=this.Mg=this.ph=this.Sg=this.Hf=this.sg=this.kh=this.Yf=this.rh=null}K(ph,ih);H=ph[t];H.Id=function(){this.wj();var a=this.Ci();return(new lh(a,this.a,this.gc)).wc()};H.wj=function(){this.Cj();this.rj();this.Aj();this.xj();this.Bj();this.vj();this.tj();this.qj();this.yj()};
H.Ci=function(){for(var a=[this.Mg,this.ph,this.ah,this.Sg,this.Hf,this.sg,this.kh,this.Yf],b=null,c=null,d=0;d<a[B];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].la(g),b=d)}this.rh[E](function(c){a[b].la(c)});return c};H.Cj=function(){this.rh=this.a.c.map(function(a){return new yg(a)},this)};H.rj=function(){2<=this.a.c[B]&&(this.Yf=new zg)};H.Aj=function(){this.kh=null!=this.a.B?new xg(this.a.B.Rb()):null};H.xj=function(){this.a.L&&(this.Sg=new Bg(this.a.L))};
H.vj=function(){null!=this.a.W&&(this.Mg=new Eg(this.a.W))};H.Bj=function(){null!=this.a.M&&0<this.a.M&&(this.ph=new Fg(this.a.M))};H.tj=function(){null!=this.a.ha&&(this.sg=new Dg(this.a.ha))};H.qj=function(){var a=this.a.f[Ga](function(a){return a instanceof T});null!=this.a.L&&this.a.L[E](function(b){b.J instanceof T&&a[w](b.J)});0<a[B]&&(this.Hf=new Cg(a))};H.yj=function(){this.ah=new Ag(this.a.f||[],this.a.ha||null)};function qh(){this.qf=[new Ig,new Jg,new oh,new nh];this.De=[new Ig]}qh[t].create=function(a){var b=null;if(a instanceof Ng)b=new jh(a);else if(a instanceof Mg)b=new mh(a,this.De);else if(a instanceof He)b=new ph(a,this.qf);else if(a instanceof Og)b=new kh(a);else throw new P(513);b=b.wc();return new sg(b,a.da())};function rh(a){U[r](this,1,1);this.N=a}K(rh,U);f(rh[t],function(){return"delete("+this.N[u]()+")"});rh[t].fa=function(a,b){var c=b[0][A].map(function(a){return a.wa});a[jb](this.N,c);return[me()]};function sh(a,b){U[r](this,0,-1);ia(this,b);this.G=a.m(Ed)}K(sh,U);f(sh[t],function(){return"get_row_count("+this[h][u]()+")"});sh[t].fa=function(){var a=this.G.get(this[h].Vb()),b=new je([],[this[h][u]()]);b.lh(hg(),a.Za().ta);return[b]};function th(a,b){U[r](this,0,-1);this.ua=a.m(Dd);this.G=a.m(Ed);ia(this,b)}K(th,U);f(th[t],function(){var a="table_access("+this[h][u]();null===this[h].bb()||(a+=" as "+this[h].bb());return a+")"});th[t].fa=function(){var a=this.G.get(this[h].Vb()).nb();return[pe(this.ua.get(a),[this[h].pa()])]};function uh(a){this.j=a}K(uh,Hg);uh[t].Eb=function(a,b){this.$=a;if(!this.gi(b))return a;var c=Pf(a,function(a){return a instanceof th})[0],d=new sh(this.j,c[h]);Uf(c,c,d,d);return this.$};uh[t].gi=function(a){return 1==a.f[B]&&1==a.c[B]&&null==a.B&&null==a.W&&null==a.M&&null==a.ha?(a=a.f[0],a instanceof T&&"COUNT"==a.Pb&&a[kb]instanceof gg):!1};function vh(a){U[r](this,1,1);this.rg=a}K(vh,U);f(vh[t],function(){return"groupBy("+this.rg.map(function(a){return a.l()})[C]()+")"});vh[t].fa=function(a,b){return this.ci(b[0])};vh[t].ci=function(a){var b=new bg,c=function(a){return this.rg.map(function(b){return a.S(b)},this)[m](",")}[D](this);a[A][E](function(a){b.add(c(a),a)},this);return b.Ua().map(function(c){return new je(b.get(c),a.U())},this)};function wh(a){L(1<a[B],"Should only be called for cross-column indices.");a=a.map(function(a){return a.ga()});a=td[xb](null,a);var b=[];sd(a,function(a){b[w](a)});return b}function xh(a){this.Xb=a}xh[t].Ld=function(){return 1==this.Xb.f[B]?[he()]:[this.Xb.f.map(function(){return he()})]};function yh(a,b){this.Xb=a;this.va=b;this.ze=this.Kg=null}
yh[t].di=function(a){var b=N();this.va.Ua()[E](function(c){var d=this.va.get(c).map(function(b){return a.Od(b)},this),g=new Lf([he()]);d[E](function(a){a=new Lf(a.ul());g=Mf(g,a)});b.set(c,g)},this);return b};yh[t].ij=function(a){for(var b=this.Xb.f[B]-1;0<=b;b--){var c=this.Xb.f[b];if(null!==(a.get(c.ea[u]())||null))break;a.set(c.ea[u](),new Lf([he()]))}};yh[t].Ld=function(a){if(this.Kg==a)return this.ze;var b=this.di(a);this.ij(b);this.ze=1==this.Xb.f[B]?yd(b)[0].ga():wh(this.Yj(b));this.Kg=a;return this.ze};
yh[t].Yj=function(a){var b=N(),c=0;this.Xb.f[E](function(a){b.set(a.ea[u](),c);c++});return xd(a)[Ya](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};function zh(a,b){this.th=b;this.G=a.m(Ed)}zh[t].yi=function(a,b){var c=b[Ga](this.sk,this);if(0==c[B])return null;c=this.uj(c);if(0==c[B])return null;if(1==c[B])return c[0];var d=Number.MAX_VALUE;return c[Ka](function(b,c){var l=c.bi(a);return l<d?(d=l,c):b},null)};zh[t].uj=function(a){return this.th.Ea().map(function(b){b=new Ah(this.G,b);b.Ei(a);return b},this)[Ga](function(a){return a.wk()})};zh[t].sk=function(a){return a instanceof Ee&&a.zg()?a.J.K()==this.th:!1};
function Ah(a,b){this.G=a;this.Ab=b;this.lk=O(this.Ab.f.map(function(a){return a.ea[u]()}));this.Xe=this.va=null}H=Ah[t];H.Sj=function(){return null===this.va?[]:this.va.ga()};H.kg=function(){L(this.va);null===this.Xe&&(this.Xe=new yh(this.Ab,this.va));return this.Xe};H.Ei=function(a){a[E](function(a){var c=a.mb()[0][u]();this.lk.has(c)&&(null===this.va&&(this.va=new bg),this.va.add(c,a.Y()))},this)};
H.wk=function(){if(null===this.va)return!1;for(var a=!1,b=!0,c=0;c<this.Ab.f[B];c++){var d=this.va.ma(this.Ab.f[c].ea[u]());if(a&&d){b=!1;break}d||(a=!0)}return b};H.bi=function(a){a=this.kg().Ld(a);var b=this.G.get(this.Ab.l());return a[Ka](function(a,d){return a+b.Dd(d)},0)};function Bh(a,b,c,d){U[r](this,0,-1);this.G=a.m(Ed);this.index=b;this.Ig=c;this.nf=d;this.td=this.sd=!1}K(Bh,U);f(Bh[t],function(){return"index_range_scan("+this[nb].l()+", ?, "+(this.nf?"reverse":"natural")+(this.sd?", limit:?":"")+(this.td?", skip:?":"")+")"});Bh[t].pd=function(a){var b=this[C](),c=this.Ig.Ld(a),b=b[fb]("?",c[C]());this.sd&&(b=b[fb]("?",a.W[C]()));this.td&&(b=b[fb]("?",a.M[C]()));return b};
Bh[t].fa=function(a,b,c){a=this.Ig.Ld(c);b=this.G.get(this[nb].l());c=(1==a[B]&&a[0]instanceof fe&&a[0].Cg()?jf(b.get(a[0].c),!1,this.sd?c.W:void 0,this.td?c.M:void 0):b.nb(a,this.nf,this.sd?c.W:void 0,this.td?c.M:void 0)).map(function(a){return new dd(a,{})},this);return[pe(c,[this[nb].od])]};function Ch(a){U[r](this,1,1);this.ce=a}K(Ch,U);f(Ch[t],Jb("select(?)"));Ch[t].pd=function(a){a=a.Od(this.ce);return this[C]()[fb]("?",a[C]())};Ch[t].fa=function(a,b,c){return[c.Od(this.ce).eval(b[0])]};function Dh(a,b){U[r](this,1,1);this.ua=a.m(Dd);this.N=b}K(Dh,U);f(Dh[t],function(){return"table_access_by_row_id("+this.N[u]()+")"});Dh[t].fa=function(a,b){return[pe(this.ua.get(b[0].Xj()),[this.N.pa()])]};function Eh(a){this.j=a}K(Eh,Hg);Eh[t].Eb=function(a,b){this.$=a;Pf(a,function(a){return a instanceof th})[E](function(a){var d=this.oj(a);if(0!=d[B]){var g=(new zh(this.j,a[h])).yi(b,d.map(function(a){return b.Od(a.ce)}));if(null!==g){var k=N();d[E](function(a){k.set(a.ce,a)},this);this.$=this.fl(g,k,a,b)}}},this);return this.$};Eh[t].oj=function(a){var b=[];for(a=a[Bb]();a;)a instanceof Ch&&b[w](a),a=a[Bb]();return b};
Eh[t].fl=function(a,b,c){a.Sj().map(function(a){return b.get(a)})[E](Qf);a=new Bh(this.j,a.Ab,a.kg(),!1);var d=new Dh(this.j,c[h]);d.la(a);Uf(c,c,d,a);return a.ob()};function Fh(a,b){U[r](this,0,-1);this.G=a.m(Ed);this.N=b}K(Fh,U);f(Fh[t],function(){return"insert("+this.N[u]()+")"});Fh[t].fa=function(a,b,c){Gh(this.N,c[db],this.G);a.Bb(this.N,c[db]);return[pe(c[db],[this.N[u]()])]};function Gh(a,b,c){a=a.Ib().Pd();if(null===a?0:a.f[0][pb]){var d=a.f[0].ea[u]();c=c.get(a.l()).max();var g=null===c?0:c[0];b[E](function(a){if(0==a.s()[d]||null==a.s()[d])g++,a.s()[d]=g})}}function Hh(a,b){U[r](this,0,-1);this.G=a.m(Ed);this.N=b}K(Hh,U);
f(Hh[t],function(){return"insert_replace("+this.N[u]()+")"});Hh[t].fa=function(a,b,c){Gh(this.N,c[db],this.G);a.Re(this.N,c[db]);return[pe(c[db],[this.N[u]()])]};function Ih(a,b){U[r](this,2,0);this.gf=a;this.Eg=b;this.Kh="eq"==this.gf.I?0:2}K(Ih,U);var Jh=["hash","index_nested_loop","nested_loop"];f(Ih[t],function(){return"join(type: "+(this.Eg?"outer":"inner")+", impl: "+Jh[this.Kh]+", "+this.gf[C]()+")"});Ih[t].fa=function(a,b){return[this.gf.Vi(b[0],b[1],this.Eg)]};function Kh(){U[r](this,1,1)}K(Kh,U);f(Kh[t],Jb("limit(?)"));Kh[t].pd=function(a){return this[C]()[fb]("?",a.W[C]())};Kh[t].fa=function(a,b,c){b[0][A][z](c.W);return b};function Lh(a){U[r](this,-1,1);this.L=a}K(Lh,U);H=Lh[t];f(H,function(){return"order_by("+Ie(this.L)+")"});H.fa=function(a,b){if(1==b[B]){var c=this.kj(b[0]);(null===c?b[0]:b[0].xc(c))[A][Ya](this.Si[D](this))}else b[Ya](this.bl[D](this));return b};H.kj=function(a){for(var b=null,c=0;c<this.L[B];c++){var d=ig(this.L[c].J);if(a.tg(d)){b=d;break}}return b};
H.O=function(a,b){var c=null,d=null,g=null,k=-1;do k++,g=this.L[k].J,c=this.L[k].rb,d=a(g),g=b(g);while(d==g&&k+1<this.L[B]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};H.bl=function(a,b){return this.O(function(b){return b instanceof T?a.xc(b):a[A][a[A][B]-1].S(b)},function(a){return a instanceof T?b.xc(a):b[A][b[A][B]-1].S(a)})};H.Si=function(a,b){return this.O(function(b){return a.S(b)},function(a){return b.S(a)})};function Mh(a,b){this.Ha=a;this.F=b}Mh[t].qg=function(){return this.F[$a](function(a){return a instanceof T},this)?this.fk():this.gk()};
Mh[t].fk=function(){if(1==this.F[B]&&"DISTINCT"==this.F[0].Pb){var a=this.Ha.xc(this.F[0])[A].map(function(a){var b=new qe(new dd(-1,{}),this.Ha.Ue());b.rf(this.F[0],a.S(this.F[0][kb]));return b},this);return new je(a,[])}var b=new qe(new dd(-1,{}),this.Ha.Ue());this.F[E](function(a){var d=a instanceof T?this.Ha.xc(a):this.Ha[A][0].S(a);b.rf(a,d)},this);return new je([b],this.Ha.U())};
Mh[t].gk=function(){var a=e(this.Ha[A][B]),b=this.Ha.Ue();this.Ha[A][E](function(c,d){a[d]=new qe(new dd(c.wa.id(),{}),b);this.F[E](function(b){a[d].rf(b,c.S(b))},this)},this);return new je(a,this.Ha.U())};function Nh(a,b){var c=a.map(function(a){return(new Mh(a,b)).qg()[A][0]});return new je(c,a[0].U())};function Oh(a,b){U[r](this,-1,1);this.f=a;this.Wb=b}K(Oh,U);H=Oh[t];f(H,function(){var a="project("+this.f[C]();if(null!==this.Wb)var b=this.Wb.map(function(a){return a.l()})[m](", "),a=a+(", groupBy("+b+")");return a+")"});H.fa=function(a,b){return 0==b[B]?[me()]:1==b[B]?[this.bj(b[0])]:[this.$i(b)]};H.hk=function(){return this.f[$a](function(a){return a instanceof T})||null!==this.Wb};H.$i=function(a){return Nh(a,this.f)};H.bj=function(a){return 0==this.f[B]?a:(new Mh(a,this.f)).qg()};function Ph(){U[r](this,1,1)}K(Ph,U);f(Ph[t],Jb("skip(?)"));Ph[t].pd=function(a){return this[C]()[fb]("?",a.M[C]())};Ph[t].fa=function(a,b,c){return[new je(b[0][A][n](c.M),b[0].U())]};function Qh(){}K(Qh,Hg);Qh[t].Eb=function(a){var b=Pf(a,function(a){return a instanceof Kh||a instanceof Ph});if(0==b[B])return a;var c=this.nj(a);if(null===c)return a;b[E](function(a){this.Fk(a,c)},this);return c.ob()};Qh[t].Fk=function(a,b){a instanceof Kh?b.sd=!0:b.td=!0;return Qf(a).parent};Qh[t].nj=function(a){a=Pf(a,function(a){return a instanceof Bh},function(a){return a instanceof Oh&&a.hk()||a instanceof Lh||1!=a.xa()||a instanceof Ch});return 0<a[B]?a[0]:null};function Rh(a){this.j=a}K(Rh,Hg);Rh[t].Eb=function(a){var b=Sh(a);if(null===b)return a;a=this.Rh(b);a==b&&(a=this.Qh(b));return a.ob()};Rh[t].Rh=function(a){var b=a,c=Th(a.lb(0));if(null!==c){var d;d=a.L;for(var g=null,k=c[h].Ea(),l=0;l<k[B]&&null===g;l++)g=Uh(k[l],d);d=g;if(null===d)return b;b=new Bh(this.j,d.Ab,new xh(d.Ab),d.Fg);d=new Dh(this.j,c[h]);d.la(b);Qf(a);b=Uf(c,c,d,b)}return b};
Rh[t].Qh=function(a){var b=a,c=Vh(a.lb(0));if(null!==c){var d=Uh(c[nb],a.L);if(null===d)return b;c.nf=d.Fg;b=Qf(a).parent}return b};function Vh(a){a=Pf(a,function(a){return a instanceof Bh},function(a){return 1!=a.xa()});return 0<a[B]?a[0]:null}function Th(a){a=Pf(a,function(a){return a instanceof th},function(a){return 1!=a.xa()});return 0<a[B]?a[0]:null}function Sh(a){a=Pf(a,function(a){return a instanceof Lh});return 0<a[B]?a[0]:null}
function Uh(a,b){if(a.f[B]!=b[B]||!b[Ta](function(b,c){return b.J[u]()==a.f[c].ea[u]()}))return null;var c=Wh(b,a);return c[0]||c[1]?{Ab:a,Fg:c[1]}:null}function Wh(a,b){var c=a[Ka](function(a,b){return a<<1|(0==b.rb?0:1)},0),d=b.f[Ka](function(a,b){return a<<1|(0==b.rb?0:1)},0),d=c^d,c=0==d,d=d==ba.pow(2,ba.max(a[B],b.f[B]))-1;return[c,d]};function Xh(a,b,c){this.Da=a;this.jf=b;this.gc=c}Xh[t].wc=function(){this.gc[E](function(a){this.Da=a.Eb(this.Da,this.jf)},this);return this.Da};function Yh(a,b){U[r](this,1,1);this.N=a;this.Dl=b}K(Yh,U);f(Yh[t],function(){return"update("+this.N[u]()+")"});Yh[t].fa=function(a,b){var c=b[0][A].map(function(a){var b=this.N.sc(a.wa.Ia());this.Dl[E](function(a){b.s()[a.J[u]()]=a[v]},this);return b},this);a[Ua](this.N,c);return[me()]};function Zh(a){this.j=a;this.qf=[new Eh(this.j),new Rh(this.j),new Qh,new uh(this.j)];this.De=[new Eh(this.j)]}Zh[t].create=function(a,b){var c=a.ob();if(c instanceof ug||c instanceof tg)return this.Ce(a,b);if(c instanceof Ag||c instanceof Eg||c instanceof Fg)return this.Ce(a,b,this.qf);if(c instanceof vg||c instanceof wg)return this.Ce(a,b,this.De);throw new P(8);};Zh[t].Ce=function(a,b,c){var d=Nf(a.ob(),J(this.Bk,this));null!=c&&(d=(new Xh(d,b,c)).wc());return new Je(d,a.da())};
Zh[t].Bk=function(a){if(a instanceof Ag)return new Oh(a.f,a.Wb);if(a instanceof Dg)return new vh(a.f);if(a instanceof Cg)return new jg(a.f);if(a instanceof Bg)return new Lh(a.L);if(a instanceof Fg)return new Ph;if(a instanceof Eg)return new Kh;if(a instanceof xg)return new Ch(a.Ba.Y());if(a instanceof zg)return new Kg;if(a instanceof Gg)return new Ih(a.Ba,a.Dg);if(a instanceof yg)return new th(this.j,a[h]);if(a instanceof vg)return new rh(a[h]);if(a instanceof wg)return new Yh(a[h],a.zf);if(a instanceof
ug)return new Hh(this.j,a[h]);if(a instanceof tg)return new Fh(this.j,a[h]);throw new P(514);};function $h(a){this.zk=new qh;this.Qk=new Zh(a)}$h[t].Rj=function(a){var b=this.zk[lb](a);return this.Qk[lb](b,a)};function ai(){this.Og=N()}H=ai[t];H.Kd=function(a){var b=this.Og.get(a[u]())||null;null===b&&(b=new bi,this.Og.set(a[u](),b));return b};H.ck=function(a,b,c){b[E](function(b){this.Kd(b).bk(a,c)},this)};H.fi=function(a,b,c){var d=!0;b[E](function(b){d&&(d=this.Kd(b).ei(a,c))},this);return d};H.eh=function(a,b,c){var d=this.fi(a,b,c);d&&this.ck(a,b,c);return d};H.releaseLock=function(a,b){b[E](function(b){this.Kd(b).releaseLock(a)},this)};H.zi=function(a){a[E](function(a){this.Kd(a).fb=null},this)};
function bi(){this.jc=this.Wa=this.fb=this.Rc=null}bi[t].releaseLock=function(a){this.Rc==a&&(this.Rc=null);this.fb==a&&(this.fb=null);null===this.Wa||this.Wa[Xa](a);null===this.jc||this.jc[Xa](a)};bi[t].ei=function(a,b){var c=null===this.Wa||0==this.Wa[F];return 0==b?(null===this.jc||0==this.jc[F])&&c&&null===this.Rc&&null!==this.fb&&this.fb==a:3==b?null===this.Rc&&null===this.fb&&null!==this.Wa&&this.Wa.has(a):1==b?null===this.fb:c&&(null===this.fb||this.fb==a)};
bi[t].bk=function(a,b){0==b?(this.fb=null,this.Rc=a):3==b?(null===this.jc&&(this.jc=O()),this.jc.add(a),null===this.Wa&&(this.Wa=O()),this.Wa[Xa](a)):1==b?(null===this.Wa&&(this.Wa=O()),this.Wa.add(a)):2==b&&(this.fb=a)};function ci(){this.ec=new di;this.dd=new ai}H=ci[t];H.hc=function(a){(2>a[Db]()||2>a[Db]())&&this.dd.zi(a.da());this.ec.Bb(a);this.Be();return a.Zc().ka};H.Be=function(){for(var a=this.ec.ga(),b=0;b<a[B];b++){var c=a[b],d=!1;if(d=0==c.V()?this.fh(c,1,3):this.fh(c,2,0))this.ec[jb](c),this.cj(c)}};H.fh=function(a,b,c){var d=!1;this.dd.eh(a.Y(),a.da(),b)&&(d=this.dd.eh(a.Y(),a.da(),c));return d};H.cj=function(a){a[Pa]()[x](J(this.Mk,this,a),J(this.Lk,this,a))};
H.Mk=function(a,b){this.dd.releaseLock(a.Y(),a.da());a.Zc()[Fb](b);this.Be()};H.Lk=function(a,b){this.dd.releaseLock(a.Y(),a.da());a.Zc()[La](b);this.Be()};function di(){this.ec=[]}di[t].Bb=function(a){tc(this.ec,a,function(a,c){var d=a[Db]()-c[Db]();return 0==d?a.Y()-c.Y():d})};di[t].ga=function(){return this.ec[n]()};va(di[t],function(a){var b=this.ec;a=hc(b,a);var c;(c=0<=a)&&mc(b,a);return c});function ei(a,b){this.Ui=ue.Je();this.kf=a;this.Zd=b;this.F=this.Ni()}ei[t].Ni=function(){if(0<this.kf.f[B])return this.kf.f;var a=[];this.kf.c[E](function(b){b.mb()[E](function(b){a[w](b)})});return a};ei[t].O=function(a,b){return this.F[Ta](function(c){return this.Ui.He(c.V(),"eq")(a.S(c),b.S(c))},this)};
ei[t].Ph=function(a,b){for(var c=null===a?[]:a[A],d=kd(c,b[A],J(this.O,this),function(a){return c[a]}),g=[],k=0,l=0;l<c[B];l++){var p=c[l];d[k]==p?k++:(p=this.Zd[z](k,1),p=fi(l,p,0,this.Zd),g[w](p))}d=kd(c,b[A],J(this.O,this),function(a,c){return b[A][c]});for(l=k=0;l<b[A][B];l++)p=b[A][l],d[k]==p?k++:(this.Zd[z](l,0,p.wa.s()),p=fi(l,[],1,this.Zd),g[w](p));return g};function fi(a,b,c,d){return{El:c,index:a,object:d,Gl:b,type:"splice"}};function gi(){this.uc=N()}H=gi[t];H.Me=function(a){return Ub(a)[C]()};H.ne=function(a,b){var c=this.Me(a.Nd()),d=this.uc.get(c)||null;null===d&&(d=new hi(a),this.uc.set(c,d));d.ne(b)};H.mf=function(a,b){var c=this.Me(a.Nd()),d=this.uc.get(c)||null;L(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.mf(b);L(g,"removeObserver: Inconsistent state detected.");d.jk()||this.uc[Xa](c)};
H.Oe=function(a){var b=O();a[E](function(a){b.add(a[u]())});var c=[];this.uc[E](function(a){a=a.ad();a[ob].c[$a](function(a){return b.has(a[u]())})&&c[w](a)});return c};H.zh=function(a,b){var c=this.Me(null!=a.Lc?a.Lc:a),c=this.uc.get(c)||null;return null!==c?(c.Cl(b),!0):!1};function hi(a){this.$h=a;this.hd=O();this.Jk=[];this.Lg=null;this.Qi=new ei(a.Nd(),this.Jk)}H=hi[t];H.ne=function(a){this.hd.has(a)?dc("Attempted to register observer twice."):this.hd.add(a)};H.mf=function(a){return this.hd[Xa](a)};
H.ad=function(){return this.$h.Nj()};H.jk=function(){return 0<this.hd[F]};H.Cl=function(a){var b=this.Qi.Ph(this.Lg,a);this.Lg=a;0<b[B]&&this.hd[E](function(a){a(b)})};function ii(a,b){var c=a.m(Id),d=b||{},g=new gf;a.sb(Dd,g);var g=null,k=!1;switch(d.storeType||0){case 1:g=new $e(c);break;case 5:g=new af(c);break;case 4:g=new ef(a,c,d.webSqlDbSize);break;case 3:g=new Ue(c,d.firebase);k=!0;break;default:g=new Ye(a,c)}a.sb(Cd,g);var l=new Kf;a.sb(Ed,l);return g.Fa(d.onUpgrade)[x](function(){var b=new $h(a);a.sb(Fd,b);b=new ci;a.sb(Gd,b);b=new gi;a.sb(Hd,b);return l.Fa(c)})[x](function(){k&&(new Oe(a)).ql();return(new Jf(a)).Fa(c)})};function ji(a,b){this.j=a;this.Gb=a.m(Cd);this.Ya=a.m(Gd);this.Jb=a.m(Hd);this.sa=O(b);this.Va=new ee(this.j,this.sa);this.fc=Yc();this.Sc=Yc();this.Bf=Yc()}H=ji[t];ma(H,function(){this.Bf[Fb]();return this.Sc.ka});H.V=Jb(1);H.da=G("sa");H.Zc=G("fc");H.Y=function(){return Ub(this)};Ea(H,Jb(2));H.Eh=function(){this.Ya.hc(this);return this.Bf.ka};
H.Xh=function(a){a=a.ad();return a.ff.ob()[Pa](this.Va,a[ob])[x](function(a){return a[0].Ke()},J(function(a){this.Va.Lb();var c=new Pc(a[q]);this.Sc[La](c);throw a;},this))};H.oa=function(){this.Gb.Sb(this.V(),this.Va).oa()[x](J(function(){this.ld();this.Sc[Fb]()},this),J(function(a){this.Va.Lb();this.Sc[La](a)},this));return this.fc.ka};H.Lb=function(){this.Va.Lb();this.Sc[Fb]();return this.fc.ka};H.ld=function(){var a=this.Jb.Oe(this.sa);0!=a[B]&&(a=new Me(this.j,a),this.Ya.hc(a))};function ki(a){this.j=a;this.Ya=a.m(Gd);this.qd=null;this.Ja=0;0==li[F]&&this.nk()}I("lf.proc.Transaction",ki,void 0);var li=N();ki[t].nk=function(){li.set(0,O([1,4]));li.set(1,O([2]));li.set(2,O([3,5,6]));li.set(3,O([2,7]));li.set(4,O([7]));li.set(5,O([7]));li.set(6,O([7]))};ki[t].Pa=function(a){var b=li.get(this.Ja)||null;if(null===b||!b.has(a))throw new P(107,this.Ja,a);this.Ja=a};
ma(ki[t],function(a){this.Pa(4);var b=[];try{a[E](function(a){a.jb();b[w](a.ad())},this)}catch(c){return this.Pa(7),Uc(c)}a=new Lg(this.j,b);return this.Ya.hc(a)[x](J(function(a){this.Pa(7);return a.map(function(a){return a.Ke()})},this),J(function(a){this.Pa(7);throw a;},this))});ma(ki[t],ki[t][Pa]);ki[t].Yh=function(a){this.Pa(1);this.qd=new ji(this.j,a);return this.qd.Eh()[x](J(function(){this.Pa(2)},this))};ki[t].begin=ki[t].Yh;
ki[t].Wh=function(a){this.Pa(3);return this.qd.Xh(a)[x](J(function(a){this.Pa(2);return a},this),J(function(a){this.Pa(7);throw a;},this))};ki[t].attach=ki[t].Wh;ki[t].oa=function(){this.Pa(5);return this.qd.oa()[x](J(function(){this.Pa(7)},this))};ki[t].commit=ki[t].oa;ki[t].Lb=function(){this.Pa(6);return this.qd.Lb()[x](J(function(){this.Pa(7)},this))};ki[t].rollback=ki[t].Lb;function X(a){this.j=a;this.o=a.m(Id);this.Qe=!1}I("lf.proc.Database",X,void 0);X[t].Fa=function(a){this.j.sb(Id,this.o);return ii(this.j,a)[x](J(function(){this.Qe=!0;return this},this))};X[t].init=X[t].Fa;X[t].zb=G("o");X[t].getSchema=X[t].zb;X[t].qc=function(){if(!this.Qe)throw new P(2);};X[t].select=function(a){this.qc();return new W(this.j,1!=arguments[B]||null!=arguments[0]?e[t][n][r](arguments):[])};X[t].select=X[t].select;X[t].Bb=function(){this.qc();return new dh(this.j)};X[t].insert=X[t].Bb;
X[t].Re=function(){this.qc();return new dh(this.j,!0)};X[t].insertOrReplace=X[t].Re;qa(X[t],function(a){this.qc();return new hh(this.j,a)});qa(X[t],X[t][Ua]);ra(X[t],function(){this.qc();return new ch(this.j)});X[t]["delete"]=X[t][Xa];X[t].observe=function(a,b){this.j.m(Hd).ne(a,b)};X[t].observe=X[t].observe;X[t].unobserve=function(a,b){this.j.m(Hd).mf(a,b)};X[t].unobserve=X[t].unobserve;X[t].Li=function(){this.qc();return new ki(this.j)};X[t].createTransaction=X[t].Li;
oa(X[t],function(){try{this.j.m(Cd)[Qa]()}catch(a){}this.j[cb]();this.Qe=!1});oa(X[t],X[t][Qa]);function Y(a,b,c,d,g,k){this.N=a;this.w=b;this.Hg=c;this.Bg=d;this.yh=g;this.ib=k||null}I("lf.schema.BaseColumn",Y,void 0);H=Y[t];na(H,G("w"));H.l=function(){return this.N.pa()+"."+this.w};f(H,function(){return this.l()});H.K=G("N");H.V=G("yh");Y[t].getType=Y[t].V;Y[t].bb=G("ib");Y[t].Ea=function(){null==this.ia&&(this.ia=[],this.K().Ea()[E](function(a){-1!=a.f.map(function(a){return a.ea[u]()})[Za](this.w)&&this.ia[w](a)},this));return this.ia};Y[t].Yb=G("Bg");Y[t].isNullable=Y[t].Yb;Y[t].cd=G("Hg");
Y[t].Ta=function(a){return dg(this,a,"eq")};Y[t].eq=Y[t].Ta;Y[t].Pg=function(a){return dg(this,a,"neq")};Y[t].neq=Y[t].Pg;Y[t].Ye=function(a){return dg(this,a,"lt")};Y[t].lt=Y[t].Ye;Y[t].Ak=function(a){return dg(this,a,"lte")};Y[t].lte=Y[t].Ak;Y[t].dk=function(a){return dg(this,a,"gt")};Y[t].gt=Y[t].dk;Y[t].ek=function(a){return dg(this,a,"gte")};Y[t].gte=Y[t].ek;Y[t].match=function(a){return dg(this,a,"match")};Y[t].match=Y[t].match;Y[t].Zh=function(a,b){return dg(this,[a,b],"between")};
Y[t].between=Y[t].Zh;Y[t].kk=function(a){return dg(this,a,"in")};Y[t]["in"]=Y[t].kk;Y[t].vk=function(){return this.Ta(null)};Y[t].isNull=Y[t].vk;Y[t].uk=function(){return this.Pg(null)};Y[t].isNotNull=Y[t].uk;Y[t].Ic=function(a){return new Y(this.N,this.w,this.Hg,this.Bg,this.yh,a)};Y[t].as=Y[t].Ic;function mi(){this.he=N()}var ni;ta(mi[t],function(){this.he[cb]()});ta(mi[t],mi[t][cb]);mi[t].sb=function(a,b){this.he.set(a[C](),b);return b};mi[t].registerService=mi[t].sb;mi[t].m=function(a){var b=this.he.get(a[C]())||null;if(null===b)throw new P(7,a[C]());return b};mi[t].getService=mi[t].m;mi[t].We=function(a){return this.he.has(a[C]())};mi[t].isRegistered=mi[t].We;function oi(a){this.o=a;this.lf=N();this.Wg=N();this.Uf=N();this.g=N();this.ye=N();this.qk()}H=oi[t];H.qk=function(){this.o.$a()[E](function(a){var b=O();a.Ib().Ie()[E](function(c){var d=this.lf.get(c.eb)||[];d[w](c);this.lf.set(c.eb,d);b.add(this.o[h](c.eb));(d=this.g.get(c.eb))||(d=O());d.add(a);this.g.set(c.eb,d);this.Uf.set(a[u]()+"."+c.Qb,c.eb);c=c.eb+"."+c.Bc;d=this.ye.get(c)||[];d[w](a[u]());this.ye.set(c,d)},this);0!=b[F]&&this.Wg.set(a[u](),b)},this)};
H.Uj=function(a){return this.lf.get(a)||null};H.cg=function(a,b){var c=b.get(a);return c?Nd(c):[]};H.Pj=function(a){return this.cg(a,this.Wg)};H.Qj=function(a){var b=O();a[E](function(a){(a=this.Uf.get(a))&&b.add(a)},this);return Nd(b).map(function(a){return this.o[h](a)},this)};H.fg=function(a){return this.cg(a,this.g)};H.Fj=function(a){var b=O();a[E](function(a){(a=this.ye.get(a))&&a[E](function(a){b.add(a)})},this);return Nd(b).map(function(a){return this.o[h](a)},this)};function pi(a,b,c){this.Tk=a;this.Hk=b;this.pj=c}I("lf.schema.Constraint",pi,void 0);pi[t].Pd=G("Tk");pi[t].getPrimaryKey=pi[t].Pd;pi[t].Mj=G("Hk");pi[t].Ie=G("pj");pi[t].getForeignKeys=pi[t].Ie;function qi(a,b){var c=a.ref[Ja](".");if(2!=c[B])throw new P(540,b);this.Qb=a.local;this.eb=c[0];this.Bc=c[1];ja(this,b);this.action=a.action;this.timing=a[Ma]};function Z(a){this.rc(a);this.w=a;this.F=N();this.xf=O();this.rd=O();this.gd=O();this.Aa=null;this.ia=N();this.be=!1;this.Hd=[]}I("lf.schema.TableBuilder",Z,void 0);function ri(a){ja(this,a[q]);this.rb=a.order;this.autoIncrement=a[pb]}var si=O([0,6]);H=Z[t];H.rc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new P(502,a);};H.Kc=function(a){if(a==this.w)throw new P(546,a);if(this.F.has(a)||this.ia.has(a)||this.rd.has(a))throw new P(503,this.w+"."+a);};
H.ti=function(a){var b=!1;a[E](function(a){var d=this.F.get(a[q]);b=b||a[pb];if(a[pb]&&3!=d)throw new P(504);},this);if(b&&1<a[B])throw new P(505);};H.ri=function(){if(null!==this.Aa){var a=this.ia.get(this.Aa).map(function(a){return a[q]}),b=0;if(this.Hd[$a](function(c,d){b=d;return-1!=a[Za](c.Qb)},this))throw new P(543,this.Hd[b][q]);}};
H.pi=function(){if(null!==this.Aa){var a=function(a){return a[q]},b=ga[yb](this.ia.get(this.Aa).map(a));this.ia[E](function(c,d){if(d!=this.Aa){var g=c.map(a);if(ga[yb](g)==b)throw new P(544,this.w+"."+d);}},this)}};H.si=function(){null===this.Aa||this.ia.get(this.Aa)[E](function(a){if(this.gd.has(a[q]))throw new P(545,this.w+"."+a[q]);},this)};H.Gh=function(a,b){this.rc(a);this.Kc(a);this.F.set(a,b);si.has(b)&&this.Ff([a]);return this};Z[t].addColumn=Z[t].Gh;
Z[t].Ih=function(a,b){var c=this.w;this.Aa="pk"+(c[0].toUpperCase()+c.substring(1));this.rc(this.Aa);this.Kc(this.Aa);c=this.Yd(a,!0,void 0,b);this.ti(c);1==c[B]&&this.xf.add(c[0][q]);this.rd.add(this.Aa);this.ia.set(this.Aa,c);return this};Z[t].addPrimaryKey=Z[t].Ih;
Z[t].Hh=function(a,b){this.rc(a);this.Kc(a);var c=new qi(b,this.w+"."+a);Lb(c.action)||(c.action=0);Lb(c[Ma])||(c.timing=0);if(1==c.action&&1==c[Ma])throw new P(506);if(!this.F.has(c.Qb))throw new P(540,a);this.Hd[w](c);this.Ef(a,[c.Qb],!1);return this};Z[t].addForeignKey=Z[t].Hh;Z[t].Jh=function(a,b){this.rc(a);this.Kc(a);var c=this.Yd(b,!0);this.Qf(a,c);1==c[B]&&this.xf.add(c[0][q]);this.ia.set(a,c);this.rd.add(a);return this};Z[t].addUnique=Z[t].Jh;
Z[t].Ff=function(a){a=this.Yd(a,!1);this.oi(a);a[E](function(a){this.gd.add(a[q])},this);return this};Z[t].addNullable=Z[t].Ff;Z[t].oi=function(a){xd(this.ia)[E](function(b){var c=O();this.ia.get(b)[E](function(a){c.add(a[q])});var d=a[Ga](function(a){return c.has(a[q])});if(1<c[F]&&0<d[B])throw new P(507,b,d[m](","));},this)};Z[t].Ef=function(a,b,c,d){this.rc(a);this.Kc(a);b=this.Yd(b,!0,d);this.Qf(a,b);c&&this.rd.add(a);this.ia.set(a,b);return this};Z[t].addIndex=Z[t].Ef;
Z[t].Qf=function(a,b){if(1<b[B]){var c=b[Ga](function(a){return this.gd.has(a[q])},this);if(0<c[B])throw new P(507,a,c[m](","));}};Z[t].Kb=Ib("be");Z[t].persistentIndex=Z[t].Kb;Z[t].zb=function(){this.ri();this.pi();this.si();return new (this.Dj())};Z[t].getSchema=Z[t].zb;Z[t].Xc=G("Hd");
Z[t].Yd=function(a,b,c,d){var g=a,g="string"==typeof a[0]?a.map(function(a){return new ri({name:a,order:null!=c?c:1,autoIncrement:d||!1})}):a.map(function(a){return new ri(a)});g[E](function(a){if(!this.F.has(a[q]))throw new P(508,this.w,a[q]);if(b){var c=this.F.get(a[q]);if(0==c||6==c)throw new P(509,this.w,a[q]);}},this);return g};
Z[t].Dj=function(){function a(){function a(c){return b.ia.get(c).map(function(a){return{ea:this[a[q]],rb:a.rb,autoIncrement:a[pb]}},this)}var d=xd(b.F).map(function(a){this[a]=new Y(this,a,b.xf.has(a),b.gd.has(a),b.F.get(a));return this[a]},this),g=xd(b.ia).map(function(d){return new fg(b.w,d,b.rd.has(d),a[r](this,d))},this);S[r](this,b.w,d,g,b.be);var k=null===b.Aa?null:new fg(b.w,b.Aa,!0,a[r](this,b.Aa)),l=d[Ga](function(a){return!b.gd.has(a[u]())});this.Di=new pi(k,l,b.Xc());this.ih=b.zj(d,g)}
var b=this;K(a,S);a[t].Hb=function(a){return new this.ih(ed++,a)};a[t].createRow=a[t].Hb;a[t].sc=function(a){var b={};this.mb()[E](function(g){var k=g[u]();g=g.V();var l=a[v][k];if(0==g)if(g=l,null!=g&&""!=g){0!=g[B]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[B]/2),p=new Uint8Array(l),y=0,Da=0;y<g[B];y+=2)p[Da++]=da(g.substr(y,2),16);g=l}else g=null;else g=2==g?null!=l?new Date(l):null:l;b[k]=g},this);return new this.ih(a.id,b)};a[t].deserializeRow=a[t].sc;a[t].Ib=G("Di");a[t].getConstraint=a[t].Ib;
return a};
Z[t].zj=function(a,b){function c(c,d){this.F=a;this.ia=b;dd[r](this,c,d)}K(c,dd);c[t].Zf=function(){var a={};this.F[E](function(b){a[b[u]()]=b.Yb()?null:ae[b.V()]});return a};c[t].vh=function(){var a={};this.F[E](function(b){var c=b[u]();b=b.V();var d=this.s()[c];a[c]=0==b?null!=d?hd(d):null:2==b?null!=d?d[Eb]():null:6==b?null!=d?d:null:d},this);return a};var d=J(function(a){var b=this.F.get(a[u]());return 2==b?function(b){b=b[a[u]()];return a.Yb()&&null===b?null:b[Eb]()}:1==b?function(b){return a.Yb()?(b=
b[a[u]()],null===b?null:b?1:0):b[a[u]()]?1:0}:function(b){return b[a[u]()]}},this),g=J(function(a){var b=a.map(function(a){return d(a.ea)});return function(a){return b.map(function(b){return b(a)})}},this),k={};b[E](function(a){var b=a.l();a=1==a.f[B]?d(a.f[0].ea):g(a.f);k[b]=a});c[t].Zb=function(a){return-1!=a[Za]("#")?this.id():k[sb](a)?k[a](this.s()):null};return c};function ti(a,b){this.o=new ui(a,b);this.vb=N();this.Tc=!1}I("lf.schema.Builder",ti,void 0);H=ti[t];H.mi=function(a){a.Xc()[E](function(b){var c=b.eb;if(!this.vb.has(c))throw new P(536,b[q]);var c=this.vb.get(c).zb(),d=b.Bc;if(!c[sb](d))throw new P(537,b[q]);if(a.zb()[b.Qb].V()!=c[d].V())throw new P(538,b[q]);if(!c[d].cd())throw new P(539,b[q]);},this)};H.li=function(a){a.Xc()[E](function(a){this.vb.get(a.eb).Xc()[E](function(c){if(c.Qb==a.Bc)throw new P(534,a[q]);},this)},this)};
H.jj=function(){this.Tc||(this.vb[E](function(a){this.mi(a);this.o.kl(a.zb())},this),yd(this.vb)[E](this.li,this),this.ki(),this.vb[cb](),this.Tc=!0)};H.Of=function(a,b){a.Af||(a.Af=!0,a.bf=!0,a.bg[E](function(c){c=b.get(c);if(!c.Af)this.Of(c,b);else if(c.bf&&a!=c)throw new P(533);},this));a.bf=!1};H.ki=function(){var a=N();this.o.H[E](function(b,c){a.set(c,new vi(c))},this);this.vb[E](function(b,c){b.Xc()[E](function(b){a.get(b.eb).bg.add(c)})});yd(a)[E](function(b){this.Of(b,a)},this)};
function vi(a){this.bf=this.Af=!1;this.bg=O();this.od=a}H.zb=function(){this.Tc||this.jj();return this.o};ti[t].getSchema=ti[t].zb;ti[t].jg=function(){var a=new Bd("ns_"+this.o[q]()),b;ni||(ni=new mi);b=ni;var c=null;b.We(a)?c=b.m(a):(c=new mi,b.sb(a,c));return c};ti[t].getGlobal=ti[t].jg;ti[t].connect=function(a){var b=this.jg();b.We(Id)||b.sb(Id,this.zb());return(new X(b)).Fa(a)};ti[t].connect=ti[t].connect;
ti[t].Ji=function(a){if(this.vb.has(a))throw new P(503,a);if(this.Tc)throw new P(535);this.vb.set(a,new Z(a));return this.vb.get(a)};ti[t].createTable=ti[t].Ji;ti[t].tf=function(a){if(this.Tc)throw new P(535);this.o.tf(a);return this};ti[t].setPragma=ti[t].tf;function ui(a,b){this.w=a;this.Ra=b;this.H=N();this.$g={Ri:!1}}I("lf.schema.DatabaseSchema",ui,void 0);ja(ui[t],G("w"));ja(ui[t],ui[t][q]);ui[t].version=G("Ra");ui[t].version=ui[t][ub];ui[t].$a=function(){return yd(this.H)};ui[t].tables=ui[t].$a;
ia(ui[t],function(a){if(!this.H.has(a))throw new P(101,a);return this.H.get(a)});ia(ui[t],ui[t][h]);ui[t].info=function(){this.vg||(this.vg=new oi(this));return this.vg};ui[t].kl=function(a){this.H.set(a[u](),a)};ui[t].Zg=G("$g");ui[t].pragma=ui[t].Zg;ui[t].tf=Ib("$g");I("lf.schema.create",function(a,b){return new ti(a,b)},void 0);}.bind(window))()
