if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.fb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Mg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.ig=c;this.Lf=a;this.Bg=b;this.pd=0;this.fd=null}wa.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Lf();return a};wa.prototype.put=function(a){this.Bg(a);this.pd<this.ig&&(this.pd++,a.next=this.fd,this.fd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=p.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function u(a){return-1!=Fa.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ce;c.Ce=null;a()}};return function(a){d.next={Ce:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.xd=this.qc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.xd?this.xd.next=c:this.qc=c;this.xd=c};Oa.prototype.remove=function(){var a=null;this.qc&&(a=this.qc,this.qc=this.qc.next,this.qc||(this.xd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Pd=null}Pa.prototype.set=function(a,b){this.Pd=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Pd=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&!u("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Pd.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ua=0;this.lf=void 0;this.Vc=this.ec=this.G=null;this.ed=this.Nd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.kc=this.Hc=this.child=null;this.Ad=!1}Ya.prototype.reset=function(){this.context=this.kc=this.Hc=this.child=null;this.Ad=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Hc=a;d.kc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Xa(b,2,a);return b}function ab(a){return new v(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],bb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new eb(c,a,b)}
v.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.pe=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.ec||2!=a.Ua&&3!=a.Ua||hb(a);a.Vc?a.Vc.next=b:a.ec=b;a.Vc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new v(function(a,h){e.Hc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.kc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(A){h(A)}}:h});e.child.G=a;gb(a,e);return e.child}v.prototype.Hg=function(a){this.Ua=0;Xa(this,2,a)};v.prototype.Ig=function(a){this.Ua=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,cb(c,a.Hg,a.Ig,a)||(a.lf=c,a.Ua=b,a.G=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof v)return gb(a,$a(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function hb(a){a.Nd||(a.Nd=!0,Ra(a.Qf,a))}function lb(a){var b=null;a.ec&&(b=a.ec,a.ec=b.next,b.next=null);a.ec||(a.Vc=null);return b}
v.prototype.Qf=function(){for(var a=null;a=lb(this);){var b=this.Ua,c=this.lf;if(3==b&&a.kc&&!a.Ad)for(var d=void 0,d=this;d&&d.ed;d=d.G)d.ed=!1;if(a.child)a.child.G=null,mb(a,b,c);else try{a.Ad?a.Hc.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Nd=!1};function mb(a,b,c){2==b?a.Hc.call(a.context,c):a.kc&&a.kc.call(a.context,c)}function jb(a,b){a.ed=!0;Ra(function(){a.ed&&nb.call(null,b)})}var nb=La;function ib(a){ra.call(this,a)}t(ib,ra);ib.prototype.name="cancel";
function eb(a,b,c){this.fa=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function ub(){}ub.prototype.next=function(){throw tb;};ub.prototype.ve=function(){return this};function xb(a){if(a instanceof ub)return a;if("function"==typeof a.ve)return a.ve(!1);if(ha(a)){var b=0,c=new ub;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new ub;var b=new ub,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function Ab(a){Bb(a);return a.b.concat()}function Bb(a){if(a.Hf!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Cb(a.aa,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Hf!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Cb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Eb=Ja(),Fb=u("Trident")||u("MSIE"),Gb=u("Edge"),Hb=u("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ib=-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge");function Jb(){var a=Fa;if(Hb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Eb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Jb())&&(a=b?b[1]:"");return Fb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Kb={};var Lb=Db()||u("iPod"),Mb=u("iPad"),Nb=Ka(),Ob=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Db()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Pb(){this.Cg=Ob||Mb||Lb;this.$f=!(this.Cg||Fb&&!Kb[10]&&!(Kb[10]=0<=ta(10)));!Fb||Kb[11]||(Kb[11]=0<=ta(11));this.Kg=Nb||Ob}var Qb;function y(){return new window.Map}function Rb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(a,b){this.ra=a;this.o=b||this.He()}var Tb=0;m=Sb.prototype;m.id=g("ra");m.He=function(){return{}};m.tf=g("o");m.Ha=function(){return{id:this.ra,value:this.tf()}};m.nb=function(a){return"#"==a.substr(-1)?this.ra:null};function Ub(a){return new Sb(a.id,a.value)}function Vb(a){return new Sb(Tb++,a||{})}function Wb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var Xb={};r("lf.TransactionType",Xb);Xb.READ_ONLY=0;Xb.READ_WRITE=1;function Yb(a,b){this.re=a;this.Ra=b||null;this.S=x()}Yb.prototype.ka=function(){return 0==this.re?this.tc():Zb(this)};function Zb(a){try{ac(a.Ra)}catch(b){return ab(b)}return bc(a).then(function(a){this.Ra.ka();return a}.bind(a))}function bc(a){cc(a);dc(a);return a.tc()}
function cc(a){a.Ra.wb.forEach(function(a,c){var d=this.Ra.ea().get(c),d=this.J(d.getName(),d.kb.bind(d),0),e=z(a.za).map(function(a){return a.id()});0<e.length&&d.remove(e).pe(this.Pe,this);e=z(a.oa).map(function(a){return a[1]}).concat(z(a.wa));d.put(e).pe(this.Pe,this)},a)}function dc(a){ec(a.Ra).forEach(function(a){var c=this.J(a.getName(),Ub,1);c.remove([]);c.put(a.Ha())},a)}Yb.prototype.Pe=function(a){this.S.reject(a)};function fc(a){this.Dg=a}fc.prototype.toString=g("Dg");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),B=new fc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function D(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function mc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function nc(a,b){this.ra=a;this.o=b||{}}function oc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}nc.prototype.$=g("ra");function pc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ha()},a)}function qc(a,b){b.forEach(function(a){delete this.o[a]},a)}nc.prototype.Ha=function(){return{id:this.ra,value:JSON.stringify(this.o)}};function rc(a){return new nc(a.id,JSON.parse(a.value))};function sc(a,b,c){this.Y=a;this.Ib=b;this.mf=c}m=sc.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Ib;return tc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function tc(a,b){var c=y(),d=x(),e=oc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Y.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=rc(a.target.result);c.set(a.$(),a);b()}},this)},a);db(e).then(function(){d.resolve(c)});return d.fa}
m.Qd=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=rc(b.value).o;for(var h in f)c.push(this.Ib(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.mf(this.Y.name,d));pc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Ub(function(){return this.Y.put(a.Ha())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.mf(this.Y.name,d));qc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Ub(function(){return 0==Object.keys(a.o).length?this.Y.delete(a.$()):this.Y.put(a.Ha())}.bind(this))},this);return db(a)};function uc(a,b,c){a=a.f(hc);var d=[c<<9,(c+1<<9)-1];b=a.Pa(b,d[0],d[1]);c=new nc(c);pc(c,b);return c}
function vc(a,b){return new nc(b)};function wc(a){this.V=a.f(hc);this.F=a.f(ic);this.i=a.f(B)}wc.prototype.update=function(a){a.forEach(function(a){xc(this,a);yc(this,a)},this)};function yc(a,b){var c=b.getName();b.za.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.oa.forEach(function(a){this.V.set(c,a[1])},a)}function xc(a,b){var c=a.i.table(b.getName());zc(b).forEach(function(a){Ac(this,c,a)},a)}
function Ac(a,b,c){var d=a.F.nc.get(b.getName())||[],e=0;d.forEach(function(a){try{Bc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Bc(a,[c[1],c[0]])},this),b;}},a)}function Bc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.ib().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Cc={};r("lf.ConstraintAction",Cc);Cc.RESTRICT=0;Cc.CASCADE=1;var Dc={};r("lf.ConstraintTiming",Dc);Dc.IMMEDIATE=0;Dc.DEFERRABLE=1;var Ec={};r("lf.Order",Ec);Ec.DESC=0;Ec.ASC=1;var Fc={};r("lf.Type",Fc);Fc.ARRAY_BUFFER=0;Fc.BOOLEAN=1;Fc.DATE_TIME=2;Fc.INTEGER=3;Fc.NUMBER=4;Fc.STRING=5;Fc.OBJECT=6;var Gc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Gc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Hc(){this.aa=y();this.size=0}m=Hc.prototype;m.has=function(a){return this.aa.has(a)};m.set=function(a,b){var c=this.aa.get(a)||null;null===c&&(c=C(),this.aa.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Xb=function(a,b){var c=this.aa.get(a)||null;null===c&&(c=C(),this.aa.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Xd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Xb(b,c)},this);return this};
m.delete=function(a,b){var c=this.aa.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.aa.delete(a));return d};m.get=function(a){a=this.aa.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.aa.clear();this.size=0};m.keys=function(){return Rb(this.aa)};m.values=function(){var a=[];this.aa.forEach(function(b){a.push.apply(a,D(b))});return a};function Ic(a){this.F=a.f(ic);this.i=a.f(B);this.V=a.f(hc);this.Zc=null}function Jc(a,b,c){var d=b.Jb().og;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new E(202,b.m());},this)},a)}function Kc(a,b,c,d){b.Jb().Rd().forEach(function(a){a.timing==d&&Lc(this,a,c)},a)}function Lc(a,b,c){var d=Mc(a,b);c.forEach(function(a){if(Nc(a[0],a[1],b.name)&&(a=a[1].nb(b.name),null!==a&&!d.jb(a)))throw new E(203,b.name);},a)}
function Mc(a,b){null===a.Zc&&(a.Zc=y());var c=a.Zc.get(b.name)||null;null===c&&(c=a.i.table(b.Sa)[b.Ic].Aa(),c=a.F.get(c.m()),a.Zc.set(b.name,c));return c}function Nc(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function Pc(a,b,c,d){b=Qc(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Rc(a,b,c,function(a,b,c){if(b.jb(c))throw new E(203,a.name);}))}
function Sc(a,b,c){b=Qc(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Hc;Rc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Xb(a.De,b)});return d}function Tc(a,b,c){var d=new Hc;Rc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Od:a,tg:k[1]})})});return d}function Rc(a,b,c,d){b.forEach(function(a){var b=this.F.get(a.name),h=Mc(this,a);c.forEach(function(c){if(Nc(c[0],c[1],h.getName())){var n=c[0].nb(h.getName());d(a,b,n,c)}},this)},a)}
function Uc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Kc(a,b,c,d))}function Vc(a,b,c,d){0!=c.length&&(Kc(a,b,c,d),Pc(a,b,c,d))}function Wc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Pc(a,b,c,d))}
function Xc(a,b,c){var d={oe:[],of:new Hc},e=new Hc;e.Xb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Hc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=Sc(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Xd(b))},a);e=f;d.of.Xd(e)}while(0<e.size);return d};function Yc(a){this.wa=y();this.oa=y();this.za=y();this.B=a}m=Yc.prototype;m.getName=g("B");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.oa.set(a.id(),b);this.za.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.oa.has(c)&&(a=[this.oa.get(a[0].id())[0],b]),this.oa.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.oa.has(a.id())){var b=this.oa.get(a.id())[0];this.oa.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};m.Xd=function(a){a.wa.forEach(function(a){this.add(a)},this);a.oa.forEach(function(a){this.modify(a)},this);a.za.forEach(function(a){this.delete(a)},this)};
function zc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.oa.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Rb(this.wa).toString()+"], ["+Rb(this.oa).toString()+"], ["+Rb(this.za).toString()+"]"};function Zc(a){var b=new Yc(a.B);a.wa.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.oa.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.dg=function(){return 0==this.wa.size&&0==this.za.size&&0==this.oa.size};function $c(a,b){this.ba=y();b.forEach(function(a){this.ba.set(a.getName(),a)},this);this.i=a.f(B);this.V=a.f(hc);this.F=a.f(ic);this.xa=new Ic(a);this.gd=new wc(a);this.wb=y()}function ec(a){var b=[];Rb(a.wb).map(function(a){return this.ba.get(a)},a).forEach(function(a){a.Gb()&&(a.Ba().forEach(function(a){b.push(this.F.get(a.m()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=$c.prototype;m.ea=g("ba");
m.Db=function(a,b){ad(this,a);Jc(this.xa,a,b);Uc(this.xa,a,b,0);for(var c=0;c<b.length;c++)bd(this,a,[null,b[c]])};function bd(a,b,c){var d=b.getName(),e=a.wb.get(d)||new Yc(d);a.wb.set(d,e);try{Ac(a.gd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){ad(this,a);Jc(this.xa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);cd(this,a,c);Vc(this.xa,a,c,0);c.forEach(function(b){bd(this,a,b)},this)};m.Sd=function(a,b){ad(this,a);Jc(this.xa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Jb().bd();if(null===h)f=null;else{f=this.xa;var h=h.m(),k=d.nb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.ra=f,Vc(this.xa,a,[[e,d]],0)):Uc(this.xa,a,[d],0);bd(this,a,[e,d])}};
m.remove=function(a,b){ad(this,a);dd(this,a,b);Wc(this.xa,a,b,0);for(var c=0;c<b.length;c++)bd(this,a,[b[c],null])};function cd(a,b,c){b=Qc(a.i.info(),b.getName(),1);if(null!==b){var d=Tc(a.xa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Od.De),d=this.V.get(a),n=c.kb(d.Ha());n.o[b.Od.xb]=b.tg.o[b.Od.Ic];bd(this,c,[d,n])},this)},a)}}
function dd(a,b,c){if(null!==Qc(a.i.info(),b.getName(),1)){b=Xc(a.xa,b,c);var d=b.of;b.oe.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);Wc(this.xa,b,a,0);a.forEach(function(a){bd(this,b,[a,null])},this)},a)}}function ac(a){a.wb.forEach(function(a){var c=this.ba.get(a.getName());Uc(this.xa,c,z(a.wa),1);Wc(this.xa,c,z(a.za),1);Vc(this.xa,c,z(a.oa),1)},a)}m.ka=aa();m.Mb=function(){var a=z(this.wb).map(function(a){return Zc(a)});this.gd.update(a)};
function ad(a,b){if(!a.ba.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.c=a;this.s=b;this.ga=this.c==G?!1:c;this.na=this.s==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.ga?"(":"[")+(this.c==G?"unbound":this.c)+", "+(this.s==G?"unbound":this.s)+(this.na?")":"]")};function ed(a){if(fd(a))return[];var b=null,c=null;a.c==G||(b=new F(G,a.c,!1,!a.ga));a.s==G||(c=new F(a.s,G,!a.na,!1));return[b,c].filter(function(a){return null!==a})}F.prototype.reverse=function(){return new F(this.s,this.c,this.na,this.ga)};
function gd(a,b){var c=hd(a.c,b.c,!0,a.ga,b.ga);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.s==G||d.s>c.c||d.s==c.c&&!d.na&&!c.ga}function id(){return new F(G,G,!1,!1)}function fd(a){return a.c==G&&a.s==G}function jd(a){return a.c==a.s&&a.c!=G&&!a.ga&&!a.na}F.prototype.contains=function(a){var b=this.s==G||a<this.s||a==this.s&&!this.na;return(this.c==G||a>this.c||a==this.c&&!this.ga)&&b};
function hd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function kd(a,b){var c=hd(a.c,b.c,!0,a.ga,b.ga);0==c&&(c=hd(a.s,b.s,!1,a.na,b.na));return c}function ld(a){if(0==a.length)return[];a.sort(kd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].c,!1,!0):c==b.length-1?new F(a[c-1].s,G,!0,!1):new F(a[c-1].s,a[c].c,!0,!0);return b};function md(a){this.mc=[];q(a)&&this.add(a)}md.prototype.toString=function(){return this.mc.map(function(a){return a.toString()}).join(",")};md.prototype.jb=function(a){return this.mc.some(function(b){return b.contains(a)})};md.prototype.Cb=g("mc");
md.prototype.add=function(a){if(0!=a.length)if(a=this.mc.concat(a),1==a.length)this.mc=a;else{a.sort(kd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(gd(c,a[d])){var e=a[d],f=id();if(c.c!=G&&e.c!=G){var h=hd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ga=0!=h?c.ga:c.ga&&e.ga):(f.c=e.c,f.ga=e.ga)}c.s!=G&&e.s!=G&&(h=hd(c.s,e.s,!1),-1!=h?(f.s=c.s,f.na=0!=h?c.na:c.na&&e.na):(f.s=e.s,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.mc=b}};
function nd(a,b){var c=[];a.Cb().map(function(a){return b.Cb().map(function(b){var c;if(gd(a,b)){c=id();var h=hd(a.c,b.c,!0),h=0==h?a.ga?a:b:-1!=h?a:b;c.c=h.c;c.ga=h.ga;a.s==G||b.s==G?b=a.s==G?b:a:(h=hd(a.s,b.s,!1),b=0==h?a.na?a:b:-1==h?a:b);c.s=b.s;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new md(c.filter(function(a){return null!==a}))};function H(a,b){this.entries=a;this.N=C(b);this.Ya=null}H.prototype.u=function(){return D(this.N)};function od(a){return a.entries.map(function(a){return a.ua.o})}function pd(a){return a.entries.map(function(a){return a.ua.id()})}function qd(a,b){return a.Ya.get(b.m())}var rd=null;function sd(){null===rd&&(rd=new H([],[]));return rd}
function td(a){if(0==a.length)return sd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(z(e),D(a[0].N))}function ud(a){if(0==a.length)return sd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(z(b),D(a[0].N))}
function vd(a,b){var c=1<b.length,d=a.map(function(a){return new wd(a,c)});return new H(d,b)}function wd(a,b){this.ua=a;this.id=xd++;this.Ud=b}var xd=0;function I(a,b){var c=b.Za();return null!==c&&a.ua.o.hasOwnProperty(c)?a.ua.o[c]:a.Ud?a.ua.o[yd(b.J())][b.getName()]:a.ua.o[b.getName()]}function zd(a,b,c){var d=b.Za();if(null!=d)a.ua.o[d]=c;else if(a.Ud){var d=yd(b.J()),e=a.ua.o[d];null==e&&(e={},a.ua.o[d]=e);e[b.getName()]=c}else a.ua.o[b.getName()]=c}
function Ad(a,b,c,d){function e(a,b){if(a.Ud){var c=a.ua.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.o}var f={};e(a,b);e(c,d);a=new Sb(-1,f);return new wd(a,!0)};r("lf.bind",function(a){return new Bd(a)});function Bd(a){this.ha=a}r("lf.Binder",Bd);Bd.prototype.Aa=g("ha");function Cd(){this.Ve=Dd();var a=Ed();this.hc=y();this.hc.set(1,Fd());this.hc.set(2,Gd());this.hc.set(4,a);this.hc.set(3,a);this.hc.set(5,Hd())}var Id;function Jd(){null!=Id||(Id=new Cd);return Id}function Kd(a,b,c){return(a.hc.get(b)||null).get(c)||null}function Dd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Fd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Ed(){var a=Fd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Hd(){var a=Ed();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Gd(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.j=this.G=null}var Ld=[];J.prototype.getParent=g("G");J.prototype.$a=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Md(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.j||Ld}function Nd(a,b){return K(a)[b]||null}function Od(a,b,c){b.G=a;null===a.j?a.j=[b]:a.j.splice(c,0,b)}function L(a,b){b.G=a;null===a.j?a.j=[b]:a.j.push(b)}
function Pd(a,b){var c=a.j&&a.j[b];return c?(c.G=null,a.j.splice(b,1),0==a.j.length&&(a.j=null),c):null}J.prototype.removeChild=function(a){return Pd(this,K(this).indexOf(a))};function Qd(a,b,c){Nd(a,c).G=null;b.G=a;a.j[c]=b}function Rd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Rd(a,b,c)})};function Sd(){J.call(this);this.ra=Td++}t(Sd,J);var Td=0;Sd.prototype.$=g("ra");function Ud(a,b,c){Sd.call(this);this.I=a;this.value=b;this.D=c;this.wc=Kd(Jd(),this.I.K(),this.D);this.Qa=!1;this.dc=b}t(Ud,Sd);m=Ud.prototype;m.Ob=function(){var a=new Ud(this.I,this.value,this.D);a.dc=this.dc;a.td(this.Qa);var b=this.$();a.ra=b;return a};m.lb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.u=function(a){a=null!=a?a:C();a.add(this.I.J());return a};m.td=ca("Qa");
function Vd(a){var b=!1;a.value instanceof Bd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Bd}):!0);if(!b)throw new E(501);}m.eval=function(a){Vd(this);if("in"==this.D)return Wd(this,a);var b=a.entries.filter(function(a){return this.wc(I(a,this.I),this.value)!=this.Qa},this);return new H(b,a.u())};
m.bind=function(a){if(this.dc instanceof Bd){var b=this.dc.Aa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.dc)&&(this.value=this.dc.map(function(b){if(b instanceof Bd){var d=b.Aa();if(a.length<=d)throw new E(510);return a[b.Aa()]}return b}))};function Wd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Qa}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.I))},a);return new H(e,b.u())}
m.toString=function(){return"value_pred("+this.I.m()+" "+this.D+(this.Qa?"(complement)":"")+" "+this.value+")"};m.kd=function(){Vd(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new F(Xd(this,this.value[0]),Xd(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new F(a,a,!1,!1)}),new md(this.Qa?ld(a):a);a=Xd(this,this.value);a="eq"==this.D?new F(a,a,!1,!1):"gte"==this.D?new F(a,G,!1,!1):"gt"==this.D?new F(a,G,!0,!1):"lte"==this.D?new F(G,a,!1,!1):new F(G,a,!1,!0)}return new md(this.Qa?ed(a):[a])};function Xd(a,b){return 2==a.I.K()?b.getTime():b};function Yd(a){this.ca=a;this.Wc=this.Ea=null}function Zd(a,b){null===a.Ea&&null!=a.A&&(a.Ea=$d(a.A));return a.Ea.get(b)||null}function $d(a){var b=y();Rd(a,function(a){b.set(a.$(),a)});return b}function ae(a,b){b.A&&(a.A=b.A.Ob());a.Wc=b}Yd.prototype.bind=function(){return this};function be(a,b){var c=a.A;null!=c&&Rd(c,function(a){a instanceof Ud&&a.bind(b)})};function de(a){Yd.call(this,a)}t(de,Yd);function ee(a){var b="";a.forEach(function(c,d){b+=c.I.m()+" ";b+=1==c.qb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}de.prototype.ea=function(){return C(this.c)};de.prototype.clone=function(){var a=new de(this.ca);ae(a,this);this.h&&(a.h=this.h.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.M=this.M;this.O&&(a.O=this.O.slice());this.la&&(a.la=this.la.slice());this.Tb&&(a.Tb=this.Tb);this.Zb&&(a.Zb=this.Zb);a.Fb=this.Fb;return a};
de.prototype.bind=function(a){de.fb.bind.call(this,a);null!=this.Tb&&(this.W=a[this.Tb.Aa()]);null!=this.Zb&&(this.M=a[this.Zb.Aa()]);be(this,a);return this};function fe(a,b){this.Fa=a;this.ba=b}fe.prototype.$a=g("Fa");fe.prototype.ea=g("ba");function ge(a){var b=C();a.forEach(function(a){a.ea().forEach(b.add.bind(b))});return b};function he(a,b){this.global=a;this.Ma=a.f(gc);this.rd=b.map(function(a){return a.context});this.ef=b.map(function(a){return a.ee});this.Id=ge(this.ef);this.se=ie(this);this.cb=x()}function ie(a){return a.rd.some(function(a){return!(a instanceof de)})?1:0}m=he.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.$a().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.se?void 0:new $c(this.global,this.Id),c=[],d=this.ef.slice(),e=this.rd;return a().then(function(){return this.Ma.Hb(this.se,D(this.Id),b).ka()}.bind(this)).then(function(){this.be(c);return c}.bind(this),function(a){null!=b&&b.Mb();throw a;})};m.K=g("se");m.ea=g("Id");m.Pb=g("cb");m.$=function(){return ka(this)};m.be=aa();function je(a,b){he.call(this,a,b);this.Lb=a.f(lc)}t(je,he);je.prototype.getPriority=l(0);je.prototype.be=function(a){this.rd.forEach(function(b,c){ke(this.Lb,b,a[c])},this)};function le(a,b){this.g=a;this.Lb=a.f(lc);this.Ga=a.f(kc);this.gd=new wc(a);this.wb=b;var c=a.f(B),d=this.wb.map(function(a){return c.table(a.getName())});this.ba=C(d);this.cb=x()}m=le.prototype;m.exec=function(){this.gd.update(this.wb);this.Lc();return w()};m.K=l(1);m.ea=g("ba");m.Pb=g("cb");m.$=function(){return ka(this)};m.getPriority=l(1);m.Lc=function(){var a=me(this.Lb,this.ba);0!=a.length&&(a=new je(this.g,a),ne(this.Ga,a))};function oe(a){this.g=a;this.Ma=a.f(gc);this.Ga=a.f(kc)}oe.prototype.$d=function(a){a=new le(this.g,a);ne(this.Ga,a)};function M(a,b){this.ac=a;this.l=b;this.Va=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("l");M.prototype.dd=function(){throw new E(351);};function pe(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.fa}function qe(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.fa}
M.prototype.Ca=function(a){return pe(this.l,"@rev/R").then(function(a){this.Oa=a;return pe(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.pa().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return qe(d,b)}.bind(this))};
function re(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.fa}.call(a).then(function(a){a["@rev"]={R:++this.Oa};return qe(this.l,a)}.bind(a)):w()}M.prototype.uc=function(a){return re(this,a,l(null)).then(function(){this.Va.delete(a);return qe(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.uc;
M.prototype.rc=function(a,b,c){return re(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Oa+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.rc;M.prototype.vc=function(a,b){return re(this,a,function(a){var d=a.P;delete d[b];return{R:this.Oa+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.vc;M.prototype.Kc=function(a,b,c){return re(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Oa+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Kc;
M.prototype.zb=function(){throw new E(351);};M.prototype.createRow=M.prototype.zb;M.prototype.Cc=g("ac");M.prototype.getVersion=M.prototype.Cc;M.prototype.fc=function(a){var b=x();a=this.Va.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.fa};M.prototype.dump=function(){var a={},b=Rb(this.Va).map(function(b){return this.fc(b).then(function(d){a[b]=d})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function se(a,b,c){Yb.call(this,b,c);this.l=a}t(se,Yb);se.prototype.J=function(a){return this.l.Ac(a)};
se.prototype.tc=function(){if(0==this.re)return this.S.resolve(),this.S.fa;var a=this.Ra.wb;if(0==a.size)this.S.resolve();else{var b=this.l.Oa+1;this.l.Oa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Va.get(e);a.wa.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.oa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.za.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.S.resolve():(this.l.Oa=b-1,c=z(a).map(function(a){return te(this.l,a.getName())},this),
db(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.fa};function ue(){this.ya=y()}function ve(a,b){if(0==b.length)return z(a.ya);var c=[];b.forEach(function(a){a=this.ya.get(a)||null;null===a||c.push(a)},a);return c}ue.prototype.getData=g("ya");ue.prototype.get=function(a){return w(ve(this,a))};function we(a,b){b.forEach(function(a){this.ya.set(a.id(),a)},a)}ue.prototype.put=function(a){we(this,a);return w()};function xe(a,b){0==b.length||b.length==a.ya.size?a.ya.clear():b.forEach(function(a){this.ya.delete(a)},a)}
ue.prototype.remove=function(a){xe(this,a);return w()};function ye(a){return 0==a.ya.size?0:Rb(a.ya).reduce(function(a,c){return a>c?a:c},0)};function ze(a,b){this.i=a;this.Af=b;this.Jc=y();this.Oa=-1;this.N=y();this.Va=y();this.Fd=null}m=ze.prototype;
m.Ca=function(a){this.l=this.Af.child(this.i.name());var b=a||function(){return w()};return pe(this.l,"@db/version").then(function(a){return null===a?qe(this.l,Ae(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)).then(function(){return this.Ca()}.bind(this)):a==this.i.version()?pe(this.l,"@rev/R").then(function(a){this.Oa=a;return pe(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.i.pa().map(function(a){return te(this,a.getName())},this);
return db(a)}.bind(this)).then(function(){Be(this);Ce(this);return w()}.bind(this)):this.ce(a,b).then(function(){return this.Ca()}.bind(this))}.bind(this))};m.ce=function(a,b){var c=new M(a,this.l);return c.Ca(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return qe(a,{version:this.i.version()},!0)}.bind(this))};
function Ce(a){a.l.off();a.l.on("child_removed",a.qg.bind(a));a.Gd&&(a.Gd.off(),a.Jc.clear());a.Gd=a.l.orderByChild("R").startAt(a.Oa+1);a.Gd.on("value",a.$d.bind(a))}function Be(a){Tb=z(a.N).map(function(a){return ye(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.qg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=C(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.$d=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Oa&&(this.Oa=b,a=De(this,a),a.forEach(function(a){var b=this.N.get(a.getName()),e=Rb(a.za);0<e.length&&xe(b,e);var f=z(a.wa);a.oa.forEach(function(a){f.push(a[1])});we(b,f)},this),0<a.length&&this.Fc(a),Ce(this))};
function De(a,b){var c=C(),d=y();a.Va.forEach(function(a,b){var h=this.N.get(b),k=new Yc(b);if(this.Jc.has(a)){var n=D(this.Jc.get(a));n.forEach(function(a){c.add(a)});ve(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.N.get(a.getName()),h=this.i.table(a.getName()).kb({id:b,value:h.P});k.getData().has(b)?a.modify([ve(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.dg()})}
function te(a,b){var c=x(),d=a.Va.get(b),e=a.i.table(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new ue,k=[];a.forEach(function(a){k.push(e.kb({id:parseInt(a.key(),10),value:a.val().P}))});we(d,k);this.N.set(b,d);c.resolve()}.bind(a));return c.fa}function Ae(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.Oa=1;b["@table"]={};a.i.pa().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.N.set(e,new ue);this.Va.set(e,d)},a);return b}
m.Hb=function(a,b,c){return new se(this,a,c)};m.Ac=function(a){var b=this.N.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ca("Fd");m.Fc=function(a){null!=this.Fd&&this.Fd(a)};function N(a,b,c,d){this.l=b;this.Xa=c;this.ac=a;this.Uc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("l");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Xa");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.uc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.uc;
function Ee(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Fe(a){var b=null;return b=a instanceof ArrayBuffer?Wb(a):a instanceof Date?a.getTime():a}
function Ge(a,b,c){function d(a){var b=rc(a.value),d=b.o,e;for(e in d){var A=Ub(d[e]);c(A);d[e]=A.Ha()}a.update(b.Ha())}function e(a){var b=Ub(a.value);c(b);a.update(b.Ha())}return Ee(a,b,a.Uc?d:e,aa())}N.prototype.rc=function(a,b,c){var d=Fe(c);return Ge(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.rc;N.prototype.vc=function(a,b){return Ge(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.vc;
N.prototype.Kc=function(a,b,c){return Ge(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Kc;function He(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Uc){var e;e=rc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.zb=function(a){var b={},c;for(c in a)b[c]=Fe(a[c]);return Vb(b)};
N.prototype.createRow=N.prototype.zb;N.prototype.Cc=g("ac");N.prototype.getVersion=N.prototype.Cc;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.fc(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.fc=function(a){return He(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ie(a,b){this.Y=a;this.Ib=b}Ie.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Je(this):Ke(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Y.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return db(a)};
function Ke(a){return new v(function(a,c){var d=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Ib(c.value)),c.continue()):a(d)}.bind(this)},a)}function Je(a){return new v(function(a,c){var d;try{d=this.Y.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Ib(a)},this);a(c)}.bind(this)},a)}
Ie.prototype.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ie.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Ub(function(){return this.Y.put(a.Ha())}.bind(this))},this);return db(a)};
Ie.prototype.remove=function(a){return new v(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Ub(function(){return this.Y.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Le(a,b,c,d,e){Yb.call(this,c,e);this.g=a;this.Xa=b;this.Uc=d;this.Xa.oncomplete=this.S.resolve.bind(this.S);this.Xa.onabort=this.S.reject.bind(this.S)}t(Le,Yb);Le.prototype.J=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new sc(a,b,0==c?qa(uc,this.g):vc)):new Ie(this.Xa.objectStore(a),b)};Le.prototype.tc=function(){return this.S.fa};function Me(a,b){this.g=a;this.i=b;this.Cd=b.ff().Nf||!1}m=Me.prototype;
m.Ca=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new E(361,a.name,a.message))};f.onupgradeneeded=function(a){Ne(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.ke().then(function(b){Tb=b+1;a(this.l)}.bind(this))}.bind(this)},
this)};function Ne(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Cd);Oe(d);a.i.pa().forEach(qa(a.If,d),a);return b(c)}function Oe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.If=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Gb()&&(b.Ba().forEach(function(b){Pe(a,b.m())},this),Pe(a,Qe(b)))};function Pe(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Hb=function(a,b,c){b=this.l.transaction(Re(b),0==a?"readonly":"readwrite");return new Le(this.g,b,a,this.Cd,c)};
function Re(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Gb()&&(a.Ba().forEach(function(a){b.add(a.m())}),b.add(Qe(a)))});return D(b)}
m.ke=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.pa().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Cd?(a=rc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Ac=function(){throw new E(511);};m.subscribe=aa();m.Fc=aa();function Se(a,b,c){Yb.call(this,b,c);this.Y=a;0==b&&this.S.resolve()}t(Se,Yb);Se.prototype.J=function(a){return this.Y.Ac(a)};Se.prototype.tc=function(){this.S.resolve();return this.S.fa};function Te(a){this.i=a;this.N=y()}m=Te.prototype;m.Ca=function(){this.i.pa().forEach(this.ag,this);return w()};m.Ac=function(a){var b=this.N.get(a)||null;if(null===b)throw new E(101,a);return b};m.Hb=function(a,b,c){return new Se(this,a,c)};function Ue(a,b){if(!a.N.has(b)){var c=new ue;a.N.set(b,c)}}m.ag=function(a){Ue(this,a.getName());a.Gb()&&(a.Ba().forEach(function(a){Ue(this,a.m())},this),Ue(this,Qe(a)))};m.close=aa();m.subscribe=aa();m.Fc=aa();function Ve(a){Te.call(this,a);this.od=null}t(Ve,Te);Ve.prototype.subscribe=function(a){null===this.od&&(this.od=a)};Ve.prototype.Fc=function(a){null===this.od||this.od(a)};function We(a,b,c){this.Xa=a;this.B=b;this.Ib=c}We.prototype.get=function(a){var b=this.Ib;return Xe(this.Xa,"SELECT id, value FROM "+this.B+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
We.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.B+"(id, value) VALUES (?, ?)";a.forEach(function(a){Xe(this.Xa,b,[a.id(),JSON.stringify(a.o)])},this);return w()};We.prototype.remove=function(a){Xe(this.Xa,"DELETE FROM "+this.B+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ye(a,b,c){Yb.call(this,b,c);this.l=a;this.N=y();this.Jd=[]}t(Ye,Yb);function Ze(a){return a.replace(".","__d__").replace("#","__s__")}Ye.prototype.J=function(a,b){var c=this.N.get(a)||null;null===c&&(c=new We(this,Ze(a),b),this.N.set(a,c));return c};function Xe(a,b,c,d){var e=x();a.Jd.push({Fg:b,ug:c,transform:d,S:e});return e.fa}
Ye.prototype.tc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Jd.length?(a=k=this.Jd.shift(),b.executeSql(k.Fg,k.ug,e,c)):this.S.resolve(d)}.bind(this);0==this.re?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.S.fa};function P(a,b,c){this.l=c;this.g=a;this.ac=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.cd=g("l");P.prototype.getRawDBInstance=P.prototype.cd;P.prototype.dd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.dd;function $e(a){return new Ye(a.l,1,new $c(a.g,C()))}P.prototype.uc=function(a){var b=$e(this);Xe(b,"DROP TABLE "+a,[]);return b.ka()};P.prototype.dropTable=P.prototype.uc;
P.prototype.fc=function(a){var b=$e(this);Xe(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function af(a,b,c){var d=$e(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.fc(b).then(function(a){a.forEach(function(a){a=c(a);Xe(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
P.prototype.rc=function(a,b,c){var d=Fe(c);return af(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.rc;P.prototype.vc=function(a,b){return af(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.vc;P.prototype.Kc=function(a,b,c){return af(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Kc;P.prototype.zb=function(a){var b={},c;for(c in a)b[c]=Fe(a[c]);return Vb(b)};
P.prototype.createRow=P.prototype.zb;P.prototype.Cc=g("ac");P.prototype.getVersion=P.prototype.Cc;function bf(a){Xe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=$e(this);bf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.fc(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.fa};P.prototype.dump=P.prototype.dump;function cf(a,b,c){this.g=a;this.i=b;this.Eg=c||1}m=cf.prototype;m.Ca=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a){var d=window.openDatabase(this.i.name(),"",this.i.name(),this.Eg);if(null!=d)this.l=d,df(this,b).then(a,function(a){if(a instanceof E)throw a;throw new E(354,a.message);});else throw new E(354);},this)};
function df(a,b){var c=x(),d=new Ye(a.l,1,new $c(a.g,C()));Xe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Xe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.ce(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new E(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.fa}m.Hb=function(a,b,c){if(null!=this.l)return new Ye(this.l,a,c);throw new E(2);};m.close=aa();
m.Ac=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Fc=function(){throw new E(355);};m.ce=function(a,b){var c=x();ef(this).then(function(){a(new P(this.g,b,this.l)).then(function(){return this.ke()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.fa};
function ef(a){var b=a.i.pa(),c=new Ye(a.l,1,new $c(a.g,C())),d=new Ye(a.l,1,new $c(a.g,C()));Xe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);bf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Xe(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Gb&&(a.Ba().forEach(function(a){a=Ze(a.m());h.push(a);k.push(a)}),a=Ze(Qe(a)),h.push(a),n.push(a))});h.forEach(function(a){Xe(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.ke=function(){var a=0,b=x(),c=function(b){var c=new Ye(this.l,0);Xe(c,"SELECT MAX(id) FROM "+b,[]);return c.ka().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.pa().map(function(a){return c(a.getName())});db(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.fa};function ff(a){this.aa=y();this.$b=y();a.pa().forEach(function(a){this.$b.set(a.getName(),C())},this)}m=ff.prototype;m.set=function(a,b){this.aa.set(b.id(),b);this.$b.get(a).add(b.id())};m.Xb=function(a,b){var c=this.$b.get(a);b.forEach(function(a){this.aa.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.aa.get(a)||null};function gf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Pa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.$b.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.aa.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.aa.get(b),d.push(c));return d};m.remove=function(a,b){this.aa.delete(b);this.$b.get(a).delete(b)};m.Ng=function(a){return null!=a?this.$b.get(a).size:this.aa.size};m.clear=function(){this.aa.clear();this.$b.clear()};function hf(a,b,c){var d=0,e=a.length;for(c=c||jf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function jf(a,b){return a-b}function kf(a,b,c){c=hf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function mf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function nf(){this.ja=0}nf.prototype.add=function(a,b){this.ja+=b};nf.prototype.remove=function(a,b){this.ja-=b};nf.prototype.clear=function(){this.ja=0};function of(a,b){a.clear();b.forEach(function(a){this.ja+=a.ja},a)};function pf(a,b,c,d){this.B=a;this.Z=b;this.vf=c;this.ub=new nf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=qf(this,d);this.ta=d=rf(d)}else this.clear()}var sf=[];m=pf.prototype;m.getName=g("B");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.Db(a,b)};m.set=function(a,b){this.ta=this.ta.Db(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Yc=function(a){if(null==a)return this.Ia().ja;if(a instanceof F){if(fd(a))return this.Ia().ja;if(jd(a))return this.get(a.c).length}return this.Pa([a]).length};m.Ia=g("ub");m.Qd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ub.ja-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Pa=function(a,b,c,d){var e=tf(this.ta).b[0];if(!q(e)||0==c)return sf;b=b||!1;c=null!=c?Math.min(c,this.ub.ja):this.ub.ja;d=d||0;var f=Math.min(Math.max(this.ub.ja-d,0),c);if(0==f)return sf;if(!q(a)||1==a.length&&a[0]instanceof F&&fd(a[0]))return this.Qd(f,b,c,d);a=this.Z.rf(a);var h=Array(b?this.ub.ja:f),k={count:0,W:h.length,reverse:b,M:d},n=1<this.ib().Vd();a.forEach(function(a){for(var b=this.Z.sd(a),b=this.Z.Td(a)?e:b[0],b=this.ta.Uf(b),c=0;null!=b&&k.count<k.W;){if(n){for(var d=b,f=a,$b=k,
wb=h,Oc=d.w.ib(),ce=-1,Ia=0;Ia<d.b.length;++Ia)if(Oc.Eb(d.b[Ia],f)){ce=Ia;break}if(-1!=ce)for(Ia=ce;Ia<d.b.length&&$b.count<$b.W;++Ia)Oc.Eb(d.b[Ia],f)&&uf(d,$b,wb,Ia)}else b.Pa(a,k,h);0!=k.M||b.jd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?mf(h,b,c,d):h};m.clear=function(){this.ta=vf(this);this.ub.clear()};m.jb=function(a){return this.ta.jb(a)};m.min=function(){return this.Kb(this.Z.min.bind(this.Z))};m.max=function(){return this.Kb(this.Z.max.bind(this.Z))};
function wf(a,b,c){if(!a.Z.Kd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.vf?[b.C[c]]:b.C[c]]}m.Kb=function(a){var b;a:{b=tf(this.ta);var c=0;do if(c>=b.b.length)b=b.va,c=0;else{var d=wf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=xf(this.ta);d=c.b.length-1;do if(0>d)c=c.rb,d=0;else{var e=wf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ka=g("vf");m.ib=g("Z");
m.Na=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ha=function(){for(var a=[],b=tf(this.ta);b;)a.push(new Sb(b.ra,[b.b,b.C])),b=b.va;return a};function yf(a,b,c,d){a=new pf(b,a,c);d=zf(d,a);a.ta=d;return a}function Af(a,b){this.ra=a;this.w=b;this.mb=0;this.va=this.rb=this.G=null;this.b=[];this.C=[];this.j=[];this.Uf=1==b.ib().Vd()?this.Le:this.Ke}function vf(a){return new Af(Tb++,a)}function Q(a){return 0==a.mb}m=Af.prototype;m.next=g("va");
function Bf(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.b.join("|")+"]",d=a.j.map(function(a){return a.ra}).join("|"),e=a.C.join("/"),f=b(a.rb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.G);a.va&&(a=Bf(a.va),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Bf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.j.length&&(a+=this.j[0].toString());return a};function tf(a){return Q(a)?a:tf(a.j[0])}function xf(a){return Q(a)?a:xf(a.j[a.j.length-1])}
function Cf(a,b){b&&(b.rb=a);a&&(a.va=b)}function qf(a,b){for(var c=b.length,d=0,e=vf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.C=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=vf(e.w),Cf(e,h),e=h)}return f}function Df(a){var b=a[0],c=vf(b.w);c.mb=b.mb+1;c.j=a;for(b=0;b<a.length;++b)a[b].G=c,0<b&&c.b.push(a[b].b[0]);return c}
function rf(a){var b=a,c=[];do c.push(b),b=b.va;while(b);if(512>=c.length)b=Df(c);else{var d=c.length,e=0,b=vf(a.w);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Df(f);h.G=b;b.j.length&&(b.b.push(f[0].b[0]),Cf(b.j[b.j.length-1],h));b.j.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Ef(this,a);if(Q(this)){var c=sf;this.w.Na(this.b[b],a)&&(c=c.concat(this.C[b]));return c}b=this.w.Na(this.b[b],a)?b+1:b;return this.j[b].get(a)};
m.jb=function(a){var b=Ef(this,a);return this.w.Na(this.b[b],a)?!0:Q(this)?!1:this.j[b].jb(a)};m.remove=function(a,b){Ff(this,a,-1,b);if(null===this.G){var c=this;1==this.j.length&&(c=this.j[0],c.G=null);return c}return this};function Gf(a){return Q(a)?a.b[0]:Gf(a.j[0])}function Hf(a){a.b=[];for(var b=1;b<a.j.length;++b)a.b.push(Gf(a.j[b]))}
function Ff(a,b,c,d){var e=Ef(a,b),f=Q(a);if(!f){var h=a.w.Na(a.b[e],b)?e+1:e;if(Ff(a.j[h],b,h,d))Hf(a);else return!1}else if(!a.w.Na(a.b[e],b))return!1;if(a.b.length>e&&a.w.Na(a.b[e],b)){if(q(d)&&!a.w.Ka()&&f&&(h=a.C[e],d=hf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.w.Ia().remove(b,1),a.C[e].length))return!1;a.b.splice(e,1);f&&(f=a.w.Ka()?1:a.C[e].length,a.C.splice(e,1),a.w.Ia().remove(b,f))}if(256>a.b.length&&null!==a.G){a:{b=null;if(a.va&&256<a.va.b.length)b=a.va,e=d=0,f=a.b.length+1;else if(a.rb&&
256<a.rb.b.length)b=a.rb,d=a.rb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.C:a.j;h=null;Q(a)?h=b.C:(h=b.j,h[e].G=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Hf(b),Hf(a));b=!0}b||If(a,c)}return!0}
function If(a,b){var c,d,e;a.va&&511>a.va.b.length?(c=a.va,e=d=0):a.rb&&(c=a.rb,d=c.b.length,e=Q(c)?c.C.length:c.j.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.C:(d=a.j,d.forEach(function(a){a.G=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.C:c.j,d);Cf(a.rb,a.va);Q(c)||Hf(c);-1!=b&&(a.G.b.splice(b,1),a.G.j.splice(b,1))}
m.Db=function(a,b,c){var d=Ef(this,a);if(Q(this)){if(this.w.Na(this.b[d],a)){if(c)this.w.Ia().remove(a,this.w.Ka()?1:this.C[d].length),this.C[d]=this.w.Ka()?b:[b];else{if(this.w.Ka())throw new E(201);if(!kf(this.C[d],b))throw new E(109);}this.w.Ia().add(a,1);return this}this.b.splice(d,0,a);this.C.splice(d,0,this.w.Ka()?b:[b]);this.w.Ia().add(a,1);512==this.b.length?(d=vf(this.w),a=vf(this.w),a.mb=1,a.b=[this.b[256]],a.j=[this,d],a.G=this.G,this.G=a,d.b=this.b.splice(256),d.C=this.C.splice(256),d.G=
a,Cf(d,this.va),Cf(this,d),d=a):d=this;return d}d=this.w.Na(this.b[d],a)?d+1:d;a=this.j[d].Db(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.j[1].G=this,a.j[0].G=this,this.j.splice(d,1,a.j[1]),this.j.splice(d,0,a.j[0]));return 512==this.b.length?Jf(this):this};function Jf(a){var b=vf(a.w),c=vf(a.w);b.G=a.G;b.mb=a.mb+1;b.b=[a.b[256]];b.j=[a,c];a.b.splice(256,1);c.G=b;c.mb=a.mb;c.b=a.b.splice(256);c.j=a.j.splice(257);c.j.forEach(function(a){a.G=c});a.G=b;Cf(c,a.va);Cf(a,c);return b}
function Ef(a,b){for(var c=0,d=a.b.length,e=a.w.ib();c<d;){var f=c+d>>1;-1==e.compare(a.b[f],b)?c=f+1:d=f}return c}m.Le=function(a){if(!Q(this)){var b=Ef(this,a);this.w.Na(this.b[b],a)&&b++;return this.j[b].Le(a)}return this};m.Ke=function(a){if(!Q(this)){var b=Ef(this,a);this.w.Na(this.b[b],a)&&(a.some(function(a){return a==G})||b++);return this.j[b].Ke(a)}return this};
m.Pa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.w.ib(),f=0,h=this.b.length-1,k=this.b,n=d(e.yb(k[f],a)),A=d(e.yb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.yb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.yb(k[h],a));return 0==n?ba(b,h,n):-1==n?ba(h+1,c,f):ba(b+1,h,n)},vb=function(b,c){if(b>=c)return b;var f=d(e.yb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.yb(k[f],a));return 0==h?vb(f,c):1==h?vb(b,f-1):-1};0!=n&&(f=ba(f+1,h,A));-1!=f&&(h=vb(f,h),-1!=h&&h>=f&&Kf(this,b,c,f,h+1))}};function uf(a,b,c,d){if(a.w.Ka())!b.reverse&&b.M?b.M--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.M?b.M--:c[b.count++]=a.C[d][e]}function Kf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)uf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.w.Ka()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.ne++]=this.C[c][d],a.count--}else if(this.w.Ka())b[a.ne++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.ne++]=this.C[c][d],a.count--;else for(c=0;c<this.j.length&&0<a.count;++c)this.j[c].fill(a,b)};
function zf(a,b){for(var c=b.Ia(),d=a.map(function(a){var d=new Af(a.id(),b);d.b=a.o[0];d.C=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ka()?1:d.C[e].length)});return d}),e=0;e<d.length-1;++e)Cf(d[e],d[e+1]);return 1<d.length?rf(d[0]):d[0]}m.jd=function(a){return this.w.ib().jd(this.b[0],a)};function Lf(a){this.Xc=0==a?Mf:Nf;this.Yd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.de=0==a?Of:Pf}function Nf(a,b){return a>b?1:a<b?-1:0}function Mf(a,b){return Nf(b,a)}function Pf(a,b){return kd(a,b)}function Of(a,b){return kd(b,a)}m=Lf.prototype;m.yb=function(a,b){var c=this.Yd(b),d=[c.c==G,c.s==G];if(!d[0]){var e=this.Xc(a,c.c);d[0]=c.ga?1==e:-1!=e}d[1]||(e=this.Xc(a,c.s),d[1]=c.na?-1==e:1!=e);return d};m.compare=function(a,b){return this.Xc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Eb=function(a,b){var c=this.yb(a,b);return c[0]&&c[1]};m.jd=function(a,b){return this.Eb(a,b)};m.rf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.de(a,c)}.bind(this))};m.Td=function(a){return this.Yd(a).c==G};m.sd=function(a){a=this.Yd(a);return[a.c,a.s]};m.Kd=function(a){return null!==a};m.Vd=l(1);
m.toString=function(){return this.compare==Mf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Qf(a){Lf.call(this,a);this.Xc=0==a?Rf:Tf}t(Qf,Lf);function Tf(a,b){return null===a?null===b?0:-1:null===b?1:Nf(a,b)}function Rf(a,b){return Tf(b,a)}Qf.prototype.Eb=function(a,b){return null===a?fd(b):Qf.fb.Eb.call(this,a,b)};Qf.prototype.Kb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Qf.prototype.min=function(a,b){var c=this.Kb(a,b);null===c&&(c=Qf.fb.min.call(this,a,b));return c};
Qf.prototype.max=function(a,b){var c=this.Kb(a,b);null===c&&(c=Qf.fb.max.call(this,a,b));return c};function Uf(a){this.qa=a.map(function(a){return new Lf(a)})}function Vf(a,b,c,d){for(var e=0,f=0;f<a.qa.length&&0==e;++f)e=d(a.qa[f],b[f],c[f]);return e}m=Uf.prototype;m.compare=function(a,b){return Vf(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return Vf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Vf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.yb=function(a,b){for(var c=[!0,!0],d=0;d<this.qa.length&&(c[0]||c[1]);++d){var e=this.qa[d].yb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Eb=function(a,b){for(var c=!0,d=0;d<this.qa.length&&c;++d)c=this.qa[d].Eb(a[d],b[d]);return c};m.jd=function(a,b){return this.qa[0].Eb(a[0],b[0])};
m.rf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.qa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.qa[b].de(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.qa.length&&0==c;++h)c=this.qa[h].de(a[h],b[h]);return c}.bind(this))};m.Td=function(a){return this.qa[0].Td(a[0])};
m.sd=function(a){var b=a.map(function(a,b){return this.qa[b].sd(a)[0]},this);a=a.map(function(a,b){return this.qa[b].sd(a)[1]},this);return[b,a]};m.Kd=function(a){return a.every(function(a,c){return this.qa[c].Kd(a)},this)};m.Vd=function(){return this.qa.length};function Wf(a){Uf.call(this,a);this.qa=a.map(function(a){return new Qf(a)})}t(Wf,Uf);function Xf(a){if(1==a.h.length)return new Lf(a.h[0].qb);var b=a.h.map(function(a){return a.qb});return a.h.some(function(a){return a.ca.jc()})?new Wf(b):new Uf(b)};function Yf(a){this.ha=a;this.ob=C();this.Nc=new nf;this.ub=new nf}m=Yf.prototype;m.getName=function(){return this.ha.getName()};m.add=function(a,b){null===a?(this.ob.add(b),this.Nc.add(a,1)):this.ha.add(a,b)};m.set=function(a,b){null===a?(this.ob.clear(),this.Nc.clear(),this.add(a,b)):this.ha.set(a,b)};m.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Nc.remove(a,1)):(this.ob.clear(),this.Nc.clear()):this.ha.remove(a,b)};m.get=function(a){return null===a?D(this.ob):this.ha.get(a)};m.Yc=function(a){return this.ha.Yc(a)};
m.Ia=function(){of(this.ub,[this.ha.Ia(),this.Nc]);return this.ub};m.Pa=function(a,b,c,d){b=this.ha.Pa(a,b,c,d);return null!=a?b:b.concat(D(this.ob))};m.clear=function(){this.ob.clear();this.ha.clear()};m.jb=function(a){return null===a?0!=this.ob.size:this.ha.jb(a)};m.min=function(){return this.ha.min()};m.max=function(){return this.ha.max()};m.Ha=function(){return[new Sb(-2,D(this.ob))].concat(this.ha.Ha())};m.ib=function(){return this.ha.ib()};
function Zf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Yf(c);d.forEach(function(a){f.ob.add(a)});return f}m.Ka=function(){return this.ha.Ka()};function $f(a){this.B=a;this.tb=C();this.Z=new Lf(1)}m=$f.prototype;m.getName=g("B");m.add=function(a){if("number"!=typeof a)throw new E(103);this.tb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.tb.delete(a)};m.get=function(a){return this.jb(a)?[a]:[]};m.min=function(){return this.Kb(this.Z.min.bind(this.Z))};m.max=function(){return this.Kb(this.Z.max.bind(this.Z))};
m.Kb=function(a){if(0==this.tb.size)return null;var b=D(this.tb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.tb.size};m.Pa=function(a,b,c,d){var e=a||[id()];a=D(this.tb).filter(function(a){return e.some(function(b){return this.Z.Eb(a,b)},this)},this);return mf(a,b,c,d)};m.clear=function(){this.tb.clear()};m.jb=function(a){return this.tb.has(a)};m.Ha=function(){return[new Sb(0,D(this.tb))]};m.ib=g("Z");
function ag(a,b){var c=new $f(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ka=l(!0);m.Ia=function(){var a=new nf;a.ja=this.tb.size;return a};function bg(a){this.Ma=a.f(gc);this.F=a.f(ic);this.V=a.f(hc)}bg.prototype.Ca=function(a){var b=a.pa(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Gb()?cg(this,a):dg(this,a)).then(c)}.bind(this);return c()};function dg(a,b){var c=a.Ma.Hb(0,[b]),d=c.J(b.getName(),b.kb.bind(b),0).get([]).then(function(a){this.V.Xb(b.getName(),a);eg(this,b,a)}.bind(a));c.ka();return d}
function eg(a,b,c){var d=a.F.nc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})})}function cg(a,b){var c=a.Ma.Hb(0,[b]),d=c.J(b.getName(),b.kb,0).get([]).then(function(a){this.V.Xb(b.getName(),a)}.bind(a)),e=b.Ba().map(function(a){return fg(this,a,c)},a).concat(gg(a,b,c));c.ka();return db(e.concat(d))}
function fg(a,b,c){c=c.J(b.m(),Ub,1);var d=Xf(b);return c.get([]).then(function(a){if(0<a.length){if(hg(b)){var c=yf.bind(void 0,d,b.m(),b.Dc);a=Zf(c,a)}else a=yf(d,b.m(),b.Dc,a);this.F.set(b.oc,a)}}.bind(a))}function gg(a,b,c){return c.J(Qe(b),Ub,1).get([]).then(function(a){0<a.length&&(a=ag(Qe(b),a),this.F.set(b.getName(),a))}.bind(a))};function ig(){this.Y=y();this.nc=y()}ig.prototype.Ca=function(a){a.pa().forEach(function(a){var c=[];this.nc.set(a.getName(),c);var d=Qe(a);if(null===this.get(d)){var e=new $f(d);c.push(e);this.Y.set(d,e)}a.Ba().forEach(function(a){var b;b=Xf(a);b=new pf(a.m(),b,a.Dc);b=hg(a)&&1==a.h.length?new Yf(b):b;c.push(b);this.Y.set(a.m(),b)},this)},this);return w()};ig.prototype.get=function(a){return this.Y.get(a)||null};
ig.prototype.set=function(a,b){var c=this.nc.get(a)||null;null===c&&(c=[],this.nc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function jg(a,b){var c=[],d=null,e=null;Rd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.j?c[c.length-1]:h});return e}function kg(a){return lg(a,function(a){return null===a.j})}
function mg(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Od(b,d,c+f)});return{parent:b,children:d}}function ng(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function og(a){var b=Nd(a,0);mg(a);ng(b,a);return b}
function pg(a,b,c){var d=Nd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;mg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Pd(d,h);L(k,e);Od(d,k,h)}});return d}function qg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Pd(e,a),Od(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function lg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function rg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Rd(a,function(a){for(var b=0;b<Md(a);b++)d+="-";d+=c(a)});return d};function sg(a){Sd.call(this);this.pb=a;this.Qa=!1}t(sg,Sd);m=sg.prototype;m.Ob=function(){return jg(this,function(a){if(a instanceof sg){var b=new sg(a.pb);b.Qa=a.Qa;a=a.$();b.ra=a;return b}return a.Ob()})};m.lb=function(a){var b=a||[];Rd(this,function(a){a!=this&&a.lb(b)}.bind(this));a=C(b);return D(a)};m.u=function(a){var b=null!=a?a:C();Rd(this,function(a){a!=this&&a.u(b)}.bind(this));return b};m.td=function(a){this.Qa!=a&&(this.Qa=a,this.pb="and"==this.pb?"or":"and",K(this).forEach(function(b){return b.td(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return tg(this,b)};function tg(a,b){return"and"==a.pb?td(b):ud(b)}m.toString=function(){return"combined_pred_"+this.pb.toString()};m.qe=function(){if("or"==this.pb){var a=new md;K(this).forEach(function(b){b=b.qe().Cb();a.add(b)});return a}return new md};m.kd=function(){return"or"==this.pb?ug(this):!1};
function ug(a){var b=null;return K(a).every(function(a){if(!(a instanceof Ud&&a.kd()))return!1;null===b&&(b=a.I);return b.m()==a.I.m()})};function vg(a,b,c){Sd.call(this);this.ia=a;this.ma=b;this.D=c;this.Zd=null;a=Jd();this.wc=Kd(a,this.ia.K(),this.D);this.gg=a.Ve.get(this.ia.K())||null}t(vg,Sd);m=vg.prototype;m.Ob=function(){var a=new vg(this.ia,this.ma,this.D),b=this.$();a.ra=b;return a};m.lb=function(a){return null!=a?(a.push(this.ia),a.push(this.ma),a):[this.ia,this.ma]};m.u=function(a){a=null!=a?a:C();a.add(this.ia.J());a.add(this.ma.J());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new vg(this.ma,this.ia,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ia);a=I(a,this.ma);return this.wc(b,a)},this);return new H(b,a.u())};m.toString=function(){return"join_pred("+this.ia.m()+" "+this.D+" "+this.ma.m()+")"};
function wg(a,b,c){var d=null,e=null;-1!=b.u().indexOf(yd(a.ia.J()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ia;a.ia=a.ma;a.ma=b;b=a.D;switch(a.D){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.D=b;a.wc=Kd(Jd(),a.ia.K(),a.D)}return[e,d]}return[d,e]}function xg(a){var b={};a.lb().forEach(function(a){b[a.getName()]=null});return b}
function yg(a,b,c){null===a.Zd&&(a.Zd=xg(a.ma.J()));var d=new wd(new Sb(-1,a.Zd),!1);return Ad(b,c,d,[yd(a.ma.J())])}
function zg(a,b,c,d){var e=[b,c];d||(e=wg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ia,k=a.ma;d&&(e=c,f=b,h=a.ma,k=a.ia);var n=new Hc,A=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=e.u(),ba=f.u();f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Ad(a,ba,b,O);A.push(b)}):d&&A.push(yg(this,a,ba))}.bind(a));a=b.u().concat(c.u());return new H(A,a)}
function Ag(a,b,c,d,e){function f(a,b){var c=new wd(b,1<O.length),c=Ad(a,ba,c,O);A.push(c)}var h=d.Yf.J(),k=b,n=c;-1!=b.u().indexOf(yd(h))&&(k=c,n=b);var A=[],O=n.u(),ba=k.u();k.entries.forEach(function(a){var b=this.gg(I(a,d.ng)),b=d.index.get(b);0!=b.length&&(d.index.Ka()?f(a,e.get(b[0])):gf(e,b).forEach(f.bind(null,a)))},a);a=k.u().concat(n.u());return new H(A,a)};function Bg(a,b,c){return null===b?new Ud(a,b,c):q(b.m)?new vg(a,b,c):new Ud(a,b,c)};var Cg={};r("lf.schema.DataStoreType",Cg);Cg.INDEXED_DB=0;Cg.MEMORY=1;Cg.LOCAL_STORAGE=2;Cg.FIREBASE=3;Cg.WEB_SQL=4;Cg.OBSERVABLE_STORE=5;function Dg(a,b,c,d){this.oc=a;this.name=b;this.Dc=c;this.h=d}Dg.prototype.m=function(){return this.oc+"."+this.name};function hg(a){return a.h.some(function(a){return a.ca.jc()})}function R(a,b,c,d){this.B=a;this.sa=c;this.L=b;this.qd=d;this.gb=null}r("lf.schema.Table",R);R.prototype.getName=g("B");R.prototype.getName=R.prototype.getName;R.prototype.Za=g("gb");
function yd(a){return a.gb||a.B}R.prototype.sc=function(a){var b=new this.constructor(this.B);b.gb=a;b.zg=this.zg;return b};R.prototype.as=R.prototype.sc;R.prototype.createRow=R.prototype.zb;R.prototype.deserializeRow=R.prototype.kb;R.prototype.Ba=g("sa");R.prototype.getIndices=R.prototype.Ba;R.prototype.lb=g("L");R.prototype.getColumns=R.prototype.lb;R.prototype.getConstraint=R.prototype.Jb;R.prototype.Gb=g("qd");R.prototype.persistentIndex=R.prototype.Gb;function Qe(a){return a.B+".#"};function S(a,b){this.child=a;this.Nb=b;this.gb=null}m=S.prototype;m.getName=function(){return this.Nb+"("+this.child.getName()+")"};m.m=function(){return this.Nb+"("+this.child.m()+")"};m.J=function(){return this.child.J()};m.toString=function(){return this.m()};m.K=function(){return this.child.K()};m.Za=g("gb");m.Ba=function(){return[]};m.Aa=l(null);m.jc=l(!1);m.sc=function(a){this.gb=a;return this};S.prototype.as=S.prototype.sc;
function Eg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Fg(a){this.gb=a||null;this.U=new R("#UnknownTable",[],[],!1)}m=Fg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.J=g("U");m.K=l(4);m.Za=g("gb");m.Ba=function(){return[]};m.Aa=l(null);m.jc=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Gg(a){return new S(a||new Fg,"COUNT")}r("lf.fn.count",Gg);function Hg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Hg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){J.call(this);this.Pf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Pf){case 1:return Ig(this,a,b);case 0:return Jg(this,a,b);default:return Kg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Oc=function(){return this.toString()};function Kg(a,b,c){return new v(function(a){a(this.da([],b,c))}.bind(a))}function Ig(a,b,c){return Nd(a,0).exec(b,c).then(function(a){return this.da(a,b,c)}.bind(a))}
function Jg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.da(d,b,c)}.bind(a))};function Lg(a){T.call(this,0,1);this.ze=a}t(Lg,T);Lg.prototype.toString=function(){return"aggregation("+this.ze.map(function(a){return a.m()}).toString()+")"};Lg.prototype.da=function(a){a.forEach(function(a){Mg(new Ng(a,this.ze))},this);return a};function Ng(a,b){this.La=a;this.L=b}
function Mg(a){a.L.forEach(function(a){a=Eg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Eg(d).slice(-1)[0],f=d.child instanceof S?qd(this.La,d.child):this.La;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Og(d.Nb,f,e);e=this.La;null===e.Ya&&(e.Ya=y());e.Ya.set(d.m(),f)}},a)}
function Og(a,b,c){var d=null;switch(a){case "MIN":d=Pg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Pg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Qg(b,c);break;case "COUNT":d=Rg(b,c);break;case "SUM":d=Sg(b,c);break;case "AVG":a=Rg(b,c);0<a&&(d=Sg(b,c)/a);break;case "GEOMEAN":d=Tg(b,c);break;default:d=Ug(b,c)}return d}function Pg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Rg(a,b){return b instanceof Fg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function Sg(a,b){return Pg(a,b,function(a,b){return b+a})}function Ug(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function Tg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Qg(a,b){var c=y();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new H(z(c),a.u())};function Vg(a,b){this.Fa=a;this.ba=b}Vg.prototype.$a=g("Fa");Vg.prototype.ea=g("ba");function Wg(){J.call(this)}t(Wg,J);function Xg(a,b){J.call(this);this.table=a;this.values=b}t(Xg,Wg);function Yg(a,b){Xg.call(this,a,b)}t(Yg,Xg);function Zg(a){J.call(this);this.table=a}t(Zg,Wg);Zg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function $g(a,b){J.call(this);this.table=a;this.te=b}t($g,Wg);
$g.prototype.toString=function(){var a=[];this.te&&(a=this.te.map(function(a){return a.I.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function ah(a){J.call(this);this.X=a}t(ah,Wg);ah.prototype.toString=function(){return"select("+this.X.toString()+")"};function bh(a){J.call(this);this.table=a}t(bh,Wg);bh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function ch(){J.call(this)}t(ch,Wg);ch.prototype.toString=l("cross_product");function dh(a,b){J.call(this);this.h=a;this.Qb=b}t(dh,Wg);dh.prototype.toString=function(){var a="project("+this.h.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function eh(a){J.call(this);this.O=a}t(eh,Wg);eh.prototype.toString=function(){return"order_by("+ee(this.O)+")"};function fh(a){J.call(this);this.h=a}t(fh,Wg);
fh.prototype.toString=function(){return"aggregation("+this.h.toString()+")"};function gh(a){J.call(this);this.h=a}t(gh,Wg);gh.prototype.toString=function(){return"group_by("+this.h.toString()+")"};function hh(a){J.call(this);this.W=a}t(hh,Wg);hh.prototype.toString=function(){return"limit("+this.W+")"};function ih(a){J.call(this);this.M=a}t(ih,Wg);ih.prototype.toString=function(){return"skip("+this.M+")"};function jh(a,b){J.call(this);this.X=a;this.Sb=b}t(jh,Wg);
jh.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", "+this.X.toString()+")"};function kh(){};function lh(){}t(lh,kh);lh.prototype.eb=function(a){this.H=a;this.Wa(this.H);return this.H};lh.prototype.Wa=function(a){if(a instanceof ah){var b=mh(this,a.X),b=nh(this,b);qg(a,a,b[0],b[1]);a==this.H&&(this.H=b[0]);a=b[0]}K(a).forEach(function(a){this.Wa(a)},this)};function mh(a,b){if(0==K(b).length||"and"!=b.pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return mh(this,a)},a);return Ea(c)}
function nh(a,b){var c=null,d=null;b.map(function(a,b){var h=new ah(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function oh(){}t(oh,kh);oh.prototype.eb=function(a,b){if(3>b.c.length)return a;this.H=a;this.Wa(this.H);return this.H};oh.prototype.Wa=function(a){if(a instanceof ch)for(;2<K(a).length;){for(var b=new ch,c=0;2>c;c++){var d=Pd(a,0);L(b,d)}Od(a,b,0)}K(a).forEach(function(a){this.Wa(a)},this)};function ph(){T.call(this,0,0)}t(ph,T);ph.prototype.toString=l("cross_product");ph.prototype.da=function(a){var b=a[0],c=a[1];a=[];for(var d=b.u(),e=c.u(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Ad(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.u().concat(c.u());return[new H(a,b)]};function qh(a,b){he.call(this,a,b);this.Ga=a.f(kc);this.Lb=a.f(lc)}t(qh,he);qh.prototype.getPriority=l(2);qh.prototype.be=function(a){0==this.K()?rh(this,a):this.Lc()};function rh(a,b){a.rd.forEach(function(a,d){a instanceof de&&ke(this.Lb,a,b[d])},a)}qh.prototype.Lc=function(){var a=me(this.Lb,this.ea());0!=a.length&&(a=new je(this.global,a),ne(this.Ga,a))};function sh(a){Yd.call(this,a)}t(sh,Yd);sh.prototype.ea=function(){var a=C();a.add(this.c);th(this,this.c.getName(),a);return a};function th(a,b,c){var d=uh(a.ca.info(),b,1);uh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){th(this,a.getName(),c)},a)}sh.prototype.clone=function(){var a=new sh(this.ca);ae(a,this);a.c=this.c;return a};sh.prototype.bind=function(a){sh.fb.bind.call(this,a);be(this,a);return this};function vh(a){Yd.call(this,a)}t(vh,Yd);vh.prototype.ea=function(){var a=C();a.add(this.Ja);var b=this.ca.info();wh(this.Ja.getName(),b.cf).forEach(a.add.bind(a));this.bc&&uh(b,this.Ja.getName()).forEach(a.add.bind(a));return a};vh.prototype.clone=function(){var a=new vh(this.ca);ae(a,this);a.Ja=this.Ja;this.values&&(a.values=this.values instanceof Bd?this.values:this.values.slice());a.bc=this.bc;a.cc=this.cc;return a};
vh.prototype.bind=function(a){vh.fb.bind.call(this,a);this.cc&&(this.values=this.cc instanceof Bd?a[this.cc.Aa()]:this.cc.map(function(b){return b instanceof Bd?a[b.Aa()]:b}));return this};function xh(a){Yd.call(this,a)}t(xh,Yd);xh.prototype.ea=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.I.m()}),c=this.ca.info();yh(c,b).forEach(a.add.bind(a));zh(c,b).forEach(a.add.bind(a));return a};xh.prototype.clone=function(){var a=new xh(this.ca);ae(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};xh.prototype.bind=function(a){xh.fb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});be(this,a);return this};function Ah(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Wb(b)+"'";default:return"'"+b.toString()+"'"}}function Bh(a,b){var c=a.bc?"INSERT OR REPLACE":"INSERT",d=a.Ja.lb(),c=c+(" INTO "+a.Ja.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Ah(c.K(),d)});return c+f.join(", ")+");"}).join("\n")}
function Ch(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Dh(a,b,c,d){return a instanceof Bd?"?"+a.Aa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ah(c,a)}).join(", ")+")":"between"==b?Ah(c,a[0])+" AND "+Ah(c,a[1]):Ah(c,a).toString()}
function Eh(a,b){return K(a).map(function(a){return"("+Fh(a,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function Gh(a){return[a.ia.m(),Ch(a.D),a.ma.m()].join(" ")}function Fh(a,b){if(a instanceof Ud){var c=a.I.m(),d=Ch(a.D),e=Dh(a.value,a.D,a.I.K(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof sg)return Eh(a,b);if(a instanceof vg)return Gh(a);throw new E(357,typeof a);}
function Hh(a,b){var c=Fh(a,b);return c?" WHERE "+c:""}function Ih(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.I.m()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+Ah(a.I.K(),a.value).toString()}).join(", ");a.A&&(c+=Hh(a.A,b));return c+";"}
function Jh(a,b){var c="*";a.h.length&&(c=a.h.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Fb&&0!=a.Fb.size?c+=Kh(a,b):(c+=a.c.map(Lh).join(", "),a.A&&(c+=Hh(a.A,b)));if(a.O)var d=a.O.map(function(a){return a.I.m()+(0==a.qb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function Lh(a){return yd(a)!=a.getName()?a.getName()+" AS "+yd(a):a.getName()}function Kh(a,b){for(var c=lg(a.A,function(a){return a instanceof vg}),d=c.map(Gh),e=Lh(a.c[0]),f=1;f<a.c.length;f++)var h=Lh(a.c[f]),e=a.Fb.has(c[d.length-f].$())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Nd(a.A,0);c instanceof vg||(e+=" WHERE "+Fh(c,b));return e}
function Mh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof vh)return Bh(d,c);if(d instanceof sh){var e="DELETE FROM "+d.c.getName();d.A&&(e+=Hh(d.A,c));return e+";"}if(d instanceof xh)return Ih(d,c);if(d instanceof de)return Jh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.yg=a.f(jc);this.Ga=a.f(kc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.hb()}catch(a){return ab(a)}return new v(function(a,b){var c=new qh(this.global,[this.Bc()]);ne(this.Ga,c).then(function(b){a(od(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Rf=function(){var a=function(a){return a.Oc(this.a)+"\n"}.bind(this);return rg(Nh(this).$a(),a)};U.prototype.explain=U.prototype.Rf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Gg=function(a){return Mh(this,a)};U.prototype.toSql=U.prototype.Gg;U.prototype.hb=aa();function Nh(a){if(null==a.df){var b;b=a.yg;var c=a.a,d=b.jg.create(c);b=b.vg.create(d,c);a.df=b}return a.df}U.prototype.Bc=function(){return{context:this.a.clone(),ee:Nh(this)}};function Oh(a){U.call(this,a,new sh(a.f(B)))}t(Oh,U);r("lf.query.DeleteBuilder",Oh);Oh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Oh.prototype.from=Oh.prototype.c;Oh.prototype.A=function(a){this.Bd();this.a.A=a;return this};Oh.prototype.where=Oh.prototype.A;Oh.prototype.Bd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.A)throw new E(516);};Oh.prototype.hb=function(){Oh.fb.hb.call(this);if(null==this.a.c)throw new E(517);};function Ph(a,b){U.call(this,a,new vh(a.f(B)));this.a.bc=b||!1}t(Ph,U);r("lf.query.InsertBuilder",Ph);Ph.prototype.hb=function(){Ph.fb.hb.call(this);var a=this.a;if(null==a.Ja||null==a.values)throw new E(518);if(a.bc&&null===a.Ja.Jb().bd())throw new E(519);};Ph.prototype.Ja=function(a){if(null!=this.a.Ja)throw new E(520);this.a.Ja=a;return this};Ph.prototype.into=Ph.prototype.Ja;
Ph.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Bd||a.some(function(a){return a instanceof Bd})?this.a.cc=a:this.a.values=a;return this};Ph.prototype.values=Ph.prototype.values;function Qh(a){return Rh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Qh);r("lf.op.or",function(a){return Rh("or",Array.prototype.slice.call(arguments))});function Rh(a,b){var c=new sg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.td(!0);return a});function V(a,b){U.call(this,a,new de(a.f(B)));this.Je=this.wd=!1;this.a.h=b;Sh(this);Th(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.hb=function(){V.fb.hb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Tb)&&!q(a.W)||q(a.Zb)&&!q(a.M))throw new E(523);null!=this.a.la?Uh(this):Vh(this)};function Sh(a){var b=a.a.h.filter(function(a){return a instanceof S&&"DISTINCT"==a.Nb},a);if(0!=b.length&&(1!=b.length||1!=a.a.h.length))throw new E(524);}
function Uh(a){var b=a.a.h.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.la.length||0==a.a.h.length)c=!0;else{var d=a.a.la.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.la.some(function(a){a=a.K();return 6==a||0==a}))}if(c)throw new E(525);}function Vh(a){var b=a.a.h.some(function(a){return a instanceof S},a);a=a.a.h.some(function(a){return!(a instanceof S)},a)||0==a.a.h.length;if(b&&a)throw new E(526);}
function Th(a){a.a.h.forEach(function(a){if(a instanceof S&&!Wh(a.Nb,a.K()))throw new E(527,a.m());},a)}function Xh(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.Je)throw new E(515);this.Je=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.A=function(a){Xh(this,548);if(this.wd)throw new E(516);this.wd=!0;Yh(this,a);return this};V.prototype.where=V.prototype.A;
function Yh(a,b){if(null!=a.a.A){var c=Qh(b,a.a.A);a.a.A=c}else a.a.A=b}V.prototype.bg=function(a,b){Xh(this,542);if(this.wd)throw new E(547);this.a.c.push(a);Yh(this,b);return this};V.prototype.innerJoin=V.prototype.bg;V.prototype.hg=function(a,b){Xh(this,542);if(!(b instanceof vg))throw new E(541);if(this.wd)throw new E(547);this.a.c.push(a);null==this.a.Fb&&(this.a.Fb=C());var c=b;yd(a)!=yd(b.ma.J())&&(c=b.reverse());this.a.Fb.add(c.$());Yh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.hg;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Tb))throw new E(528);if(a instanceof Bd)this.a.Tb=a;else{if(0>a)throw new E(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.M=function(a){if(null!=(this.a.M||this.a.Zb))throw new E(529);if(a instanceof Bd)this.a.Zb=a;else{if(0>a)throw new E(531);this.a.M=a}return this};V.prototype.skip=V.prototype.M;V.prototype.O=function(a,b){Xh(this,549);null==this.a.O&&(this.a.O=[]);this.a.O.push({I:a,qb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.O;V.prototype.la=function(a){Xh(this,549);if(null!=this.a.la)throw new E(530);null==this.a.la&&(this.a.la=[]);this.a.la.push.apply(this.a.la,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.la;function Wh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.h);a.a=this.a.clone();a.a.Wc=null;return a};V.prototype.clone=V.prototype.clone;function Zh(a,b){U.call(this,a,new xh(a.f(B)));this.a.table=b}t(Zh,U);r("lf.query.UpdateBuilder",Zh);Zh.prototype.set=function(a,b){var c={Tc:b instanceof Bd?b.Aa():-1,I:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Zh.prototype.set=Zh.prototype.set;Zh.prototype.A=function(a){this.Bd();this.a.A=a;return this};Zh.prototype.where=Zh.prototype.A;Zh.prototype.Bd=function(){if(null!=this.a.A)throw new E(516);};
Zh.prototype.hb=function(){Zh.fb.hb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Bd}))throw new E(501);};function $h(a){this.a=a;this.Fa=null}$h.prototype.ic=function(){null===this.Fa&&(this.Fa=this.$c());return this.Fa};function ai(a){$h.call(this,a)}t(ai,$h);ai.prototype.$c=function(){return this.a.bc?new Yg(this.a.Ja,this.a.values):new Xg(this.a.Ja,this.a.values)};function bi(a){$h.call(this,a)}t(bi,$h);bi.prototype.$c=function(){var a=new $g(this.a.table,this.a.set),b=null!=this.a.A?new ah(this.a.A.Ob()):null,c=new bh(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function ci(a,b,c){this.Fa=a;this.fe=b;this.Wb=c}ci.prototype.ic=function(){this.Wb.forEach(function(a){this.Fa=a.eb(this.Fa,this.fe)},this);return this.Fa};function di(a,b){$h.call(this,a);this.Wb=b}t(di,$h);di.prototype.$c=function(){var a=new Zg(this.a.c),b=null!=this.a.A?new ah(this.a.A.Ob()):null,c=new bh(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new ci(a,this.a,this.Wb)).ic()};function ei(){}t(ei,kh);ei.prototype.eb=function(a,b){if(2>b.c.length)return a;this.H=a;this.Wa(this.H,b);return this.H};ei.prototype.Wa=function(a,b){if(a instanceof ah&&a.X instanceof vg){var c=a.X.$(),d=Nd(a,0);d instanceof ch&&(c=null!=b.Fb&&b.Fb.has(c),c=new jh(a.X,c),qg(a,d,c,c),a==this.H&&(this.H=c),a=c)}K(a).forEach(function(a){this.Wa(a,b)},this)};function fi(){this.Sc=C()}t(fi,kh);fi.prototype.eb=function(a,b){if(!q(b.A))return a;this.Sc.clear();this.H=a;this.Wa(this.H);this.Sc.clear();return this.H};fi.prototype.Wa=function(a){if(a instanceof ah){var b=a.X.u(),c=function(a){return gi(this,a,b)}.bind(this),c=hi(this,a,c);this.Sc.add(a);c==a&&(c=Nd(a,0));null!==c&&(fa(c.getParent())&&(this.H=c),c instanceof ah&&!this.Sc.has(c)&&this.Wa(c))}else K(a).forEach(function(a){this.Wa(a)},this)};
function hi(a,b,c){var d=b;if(Nd(b,0)instanceof ah)d=og(b),hi(a,b,c);else if(ii(b)){var e=[],d=pg(b,c,function(a){a=new ah(a.X);e.push(a);return a});e.forEach(function(a){hi(this,a,c)},a)}return d}function gi(a,b,c){var d=C();kg(b).forEach(function(a){d.add(a.table)},a);b instanceof bh&&d.add(b.table);return mc(d,c)}function ii(a){a=Nd(a,0);return a instanceof ch||a instanceof jh};function ji(a,b){$h.call(this,a);this.Wb=b;this.hf=this.Ze=this.qf=this.bf=this.Ae=this.Oe=this.pf=this.Ge=this.sf=null}t(ji,$h);
ji.prototype.$c=function(){ki(this);2<=this.a.c.length&&(this.Ge=new ch);this.pf=null!=this.a.A?new ah(this.a.A.Ob()):null;this.a.O&&(this.bf=new eh(this.a.O));null!=this.a.M&&0<this.a.M&&(this.qf=new ih(this.a.M));null!=this.a.W&&(this.Ze=new hh(this.a.W));null!=this.a.la&&(this.Oe=new gh(this.a.la));li(this);this.hf=new dh(this.a.h||[],this.a.la||null);var a=mi(this);return(new ci(a,this.a,this.Wb)).ic()};
function mi(a){for(var b=[a.Ze,a.qf,a.hf,a.bf,a.Ae,a.Oe,a.pf,a.Ge],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.sf.forEach(function(a){L(b[c],a)});return d}function ki(a){a.sf=a.a.c.map(function(a){return new bh(a)},a)}function li(a){var b=a.a.h.filter(function(a){return a instanceof S});null!=a.a.O&&a.a.O.forEach(function(a){a.I instanceof S&&b.push(a.I)});0<b.length&&(a.Ae=new fh(b))};function ni(){this.le=[new lh,new oh,new fi,new ei];this.Ld=[new lh]}ni.prototype.create=function(a){var b=null;if(a instanceof vh)b=new ai(a);else if(a instanceof sh)b=new di(a,this.Ld);else if(a instanceof de)b=new ji(a,this.le);else if(a instanceof xh)b=new bi(a);else throw new E(513);b=b.ic();return new Vg(b,a.ea())};function oi(a){T.call(this,0,1);this.U=a}t(oi,T);oi.prototype.toString=function(){return"delete("+this.U.getName()+")"};oi.prototype.da=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.U,c);return[sd()]};function pi(a,b){T.call(this,0,-1);this.table=b;this.F=a.f(ic)}t(pi,T);pi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};pi.prototype.da=function(){var a=this.F.get(Qe(this.table)),b=new H([],[this.table.getName()]),c=Gg(),a=a.Ia().ja;null===b.Ya&&(b.Ya=y());b.Ya.set(c.m(),a);return[b]};function qi(a,b){T.call(this,0,-1);this.V=a.f(hc);this.F=a.f(ic);this.table=b}t(qi,T);qi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};qi.prototype.da=function(){var a=this.F.get(Qe(this.table)).Pa();return[vd(gf(this.V,a),[yd(this.table)])]};function ri(a){this.g=a}t(ri,kh);ri.prototype.eb=function(a,b){this.H=a;if(!this.Dd(b))return a;var c=lg(a,function(a){return a instanceof qi})[0],d=new pi(this.g,c.table);qg(c,c,d,d);return this.H};ri.prototype.Dd=function(a){return 1==a.h.length&&1==a.c.length&&null==a.A&&null==a.W&&null==a.M&&null==a.la?(a=a.h[0],a instanceof S&&"COUNT"==a.Nb&&a.child instanceof Fg):!1};function si(a){T.call(this,0,1);this.Ne=a}t(si,T);si.prototype.toString=function(){return"groupBy("+this.Ne.map(function(a){return a.m()}).toString()+")"};si.prototype.da=function(a){return ti(this,a[0])};function ti(a,b){var c=new Hc,d=function(a){return this.Ne.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),b.u())},a)};function ui(a,b,c){T.call(this,0,0);this.F=a.f(ic);this.V=a.f(hc);this.X=b;this.Sb=c;this.zd="eq"==this.X.D?0:2;this.Qe=null}t(ui,T);var vi=["hash","index_nested_loop","nested_loop"];ui.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", impl: "+vi[this.zd]+", "+this.X.toString()+")"};
ui.prototype.da=function(a){switch(this.zd){case 0:return[zg(this.X,a[0],a[1],this.Sb)];case 1:return[Ag(this.X,a[0],a[1],this.Qe,this.V)];default:var b=this.X,c=a[0];a=a[1];var d=this.Sb,e=[c,a];d||(e=wg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.u(),h=a.u(),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var ba=0;ba<k;ba++){var vb=!1,Sf=I(c.entries[ba],b.ia);if(null!==Sf)for(var $b=Math.min(O+1<<8,n),wb=O<<8;wb<$b;wb++)if(b.wc(Sf,I(a.entries[wb],b.ma))){var vb=!0,Oc=Ad(c.entries[ba],
f,a.entries[wb],h);e.push(Oc)}d&&!vb&&e.push(yg(b,c.entries[ba],f))}O++}b=c.u().concat(a.u());return[new H(e,b)]}};function wi(a,b){a.zd=1;var c=a.F.get(b.Aa().m());a.Qe={Yf:b,ng:b==a.X.ia?a.X.ma:a.X.ia,index:c}};function xi(a){T.call(this,0,-1);this.jf=a}t(xi,T);xi.prototype.toString=function(){return"no_op_step("+this.jf[0].u().join(",")+")"};xi.prototype.da=g("jf");function yi(){}t(yi,kh);yi.prototype.eb=function(a,b){this.H=a;if(!this.Dd(b))return a;lg(a,function(a){return a instanceof ui}).forEach(this.xg,this);return this.H};yi.prototype.Dd=function(a){return 1<a.c.length};
yi.prototype.xg=function(a){if("eq"==a.X.D&&!a.Sb){var b=function(b){if(!(b instanceof qi))return null;b=yd(b.table)==yd(a.X.ma.J())?a.X.ma:a.X.ia;return fa(b.Aa())?null:b},c=b(Nd(a,0)),b=b(Nd(a,1));if(null!==c||null!==b){b=null===b?c:b;wi(a,b);var d=new H([],[yd(b.J())]);Qd(a,new xi([d]),b==c?0:1)}}};function zi(a){a=a.map(function(a){return a.Cb()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Ai(a){this.Rb=a}Ai.prototype.ad=function(){return 1==this.Rb.h.length?[id()]:[this.Rb.h.map(function(){return id()})]};function Bi(a,b){this.Rb=a;this.Ea=b;this.Hd=this.Xe=null}
function Ci(a,b){var c=y();a.Ea.keys().forEach(function(a){var e=this.Ea.get(a).map(function(a){return Zd(b,a)},this),f=new md([id()]);e.forEach(function(a){f=nd(f,a.qe())});c.set(a,f)},a);return c}Bi.prototype.ad=function(a){if(this.Xe==a)return this.Hd;for(var b=Ci(this,a),c=this.Rb.h.length-1;0<=c;c--){var d=this.Rb.h[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new md([id()]))}this.Hd=1==this.Rb.h.length?z(b)[0].Cb():zi(Di(this,b));this.Xe=a;return this.Hd};
function Di(a,b){var c=y(),d=0;a.Rb.h.forEach(function(a){c.set(a.ca.getName(),d);d++});return Rb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ei(a,b){this.ud=b;this.F=a.f(ic)}function Fi(a){a=a.F.get(Qe(a.ud));return Math.floor(.02*a.Ia().ja)}function Gi(a,b,c){c=c.filter(a.cg,a);if(0==c.length)return null;a=Hi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ii(c,b);return h<d?(d=h,c):a},null)}
function Hi(a,b){return a.ud.Ba().map(function(a){a=new Ji(this.F,a);Ki(a,b);return a},a).filter(function(a){if(null===a.Ea)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ab.h.length;f++){var h=a.Ea.has(a.ab.h[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Ei.prototype.cg=function(a){return a instanceof Ud?!a.kd()||a.I.J()!=this.ud||"in"==a.D&&a.value.length>Fi(this)?!1:!0:a instanceof sg?a.kd()&&Nd(a,0).I.J()==this.ud?K(a).length<=Fi(this):!1:!1};
function Ji(a,b){this.F=a;this.ab=b;this.Zf=C(this.ab.h.map(function(a){return a.ca.getName()}));this.Wd=this.Ea=null}function Li(a){null===a.Wd&&(a.Wd=new Bi(a.ab,a.Ea));return a.Wd}function Ki(a,b){b.forEach(function(a){var b=a.lb()[0].getName();this.Zf.has(b)&&(null===this.Ea&&(this.Ea=new Hc),this.Ea.set(b,a.$()))},a)}function Ii(a,b){var c=Li(a).ad(b),d=a.F.get(a.ab.m());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function Mi(a,b,c,d){T.call(this,0,-1);this.F=a.f(ic);this.index=b;this.We=c;this.je=d;this.Rc=this.Qc=!1}t(Mi,T);Mi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.je?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};Mi.prototype.Oc=function(a){var b=this.toString(),c=this.We.ad(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.W.toString()));this.Rc&&(b=b.replace("?",a.M.toString()));return b};
Mi.prototype.da=function(a,b,c){a=this.We.ad(c);b=this.F.get(this.index.m());c=(1==a.length&&a[0]instanceof F&&jd(a[0])?mf(b.get(a[0].c),!1,this.Qc?c.W:void 0,this.Rc?c.M:void 0):b.Pa(a,this.je,this.Qc?c.W:void 0,this.Rc?c.M:void 0)).map(function(a){return new Sb(a,{})},this);return[vd(c,[this.index.oc])]};function Ni(){T.call(this,0,0)}t(Ni,T);Ni.prototype.toString=l("multi_index_range_scan()");
Ni.prototype.da=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=z(b);return[new H(c,a[0].u())]};function Oi(a){T.call(this,0,1);this.lc=a}t(Oi,T);Oi.prototype.toString=l("select(?)");Oi.prototype.Oc=function(a){a=Zd(a,this.lc);return this.toString().replace("?",a.toString())};Oi.prototype.da=function(a,b,c){return[Zd(c,this.lc).eval(a[0])]};function Pi(a,b){T.call(this,0,1);this.V=a.f(hc);this.U=b}t(Pi,T);Pi.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};Pi.prototype.da=function(a){return[vd(gf(this.V,pd(a[0])),[yd(this.U)])]};function Qi(a){this.g=a}t(Qi,kh);Qi.prototype.eb=function(a,b){this.H=a;lg(a,function(a){return a instanceof qi}).forEach(function(a){var d=Ri(a);if(0!=d.length){var e=Gi(new Ei(this.g,a.table),b,d.map(function(a){return Zd(b,a.lc)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.lc,a)},this);this.H=Si(this,e,f,a)}}},this);return this.H};function Ri(a){var b=[];for(a=a.getParent();a;)a instanceof Oi&&b.push(a),a=a.getParent();return b}
function Si(a,b,c,d){(null===b.Ea?[]:b.Ea.values()).map(function(a){return c.get(a)}).forEach(mg);b=new Mi(a.g,b.ab,Li(b),!1);a=new Pi(a.g,d.table);L(a,b);qg(d,d,a,b);return b.$a()};function Ti(a,b){T.call(this,0,-1);this.F=a.f(ic);this.U=b}t(Ti,T);Ti.prototype.toString=function(){return"insert("+this.U.getName()+")"};Ti.prototype.da=function(a,b,c){Ui(this.U,c.values,this.F);b.Db(this.U,c.values);return[vd(c.values,[this.U.getName()])]};function Ui(a,b,c){a=a.Jb().bd();if(null===a?0:a.h[0].autoIncrement){var d=a.h[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Vi(a,b){T.call(this,0,-1);this.F=a.f(ic);this.U=b}t(Vi,T);Vi.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};Vi.prototype.da=function(a,b,c){Ui(this.U,c.values,this.F);b.Sd(this.U,c.values);return[vd(c.values,[this.U.getName()])]};function Wi(){T.call(this,0,1)}t(Wi,T);Wi.prototype.toString=l("limit(?)");Wi.prototype.Oc=function(a){return this.toString().replace("?",a.W.toString())};Wi.prototype.da=function(a,b,c){a[0].entries.splice(c.W);return a};function Xi(a){T.call(this,0,1);this.O=a}t(Xi,T);m=Xi.prototype;m.toString=function(){return"order_by("+ee(this.O)+")"};m.da=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.O.length;d++){var e=Hg(this.O[d].I);if(null!==b.Ya&&b.Ya.has(e.m())){c=e;break}}b=c;(null===b?a[0]:qd(a[0],b)).entries.sort(this.Of.bind(this))}else a.sort(this.Ag.bind(this));return a};
m.Z=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.O[f].I,c=this.O[f].qb,d=a(e),e=b(e);while(d==e&&f+1<this.O.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Ag=function(a,b){return this.Z(function(b){return b instanceof S?qd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?qd(b,a):I(b.entries[b.entries.length-1],a)})};m.Of=function(a,b){return this.Z(function(b){return I(a,b)},function(a){return I(b,a)})};function Yi(a,b){this.La=a;this.L=b}function Zi(a){return a.L.some(function(a){return a instanceof S},a)?$i(a):aj(a)}function $i(a){if(1==a.L.length&&"DISTINCT"==a.L[0].Nb)return a=qd(a.La,a.L[0]).entries.map(function(a){var b=new wd(new Sb(-1,{}),1<this.La.N.size);zd(b,this.L[0],I(a,this.L[0].child));return b},a),new H(a,[]);var b=new wd(new Sb(-1,{}),1<a.La.N.size);a.L.forEach(function(a){var d=a instanceof S?qd(this.La,a):I(this.La.entries[0],a);zd(b,a,d)},a);return new H([b],a.La.u())}
function aj(a){var b=Array(a.La.entries.length),c=1<a.La.N.size;a.La.entries.forEach(function(a,e){b[e]=new wd(new Sb(a.ua.id(),{}),c);this.L.forEach(function(c){zd(b[e],c,I(a,c))},this)},a);return new H(b,a.La.u())}function bj(a,b){var c=a.map(function(a){return Zi(new Yi(a,b)).entries[0]});return new H(c,a[0].u())};function cj(a,b){T.call(this,0,1);this.h=a;this.Qb=b}t(cj,T);cj.prototype.toString=function(){var a="project("+this.h.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};cj.prototype.da=function(a){0==a.length?a=[sd()]:1==a.length?(a=a[0],a=[0==this.h.length?a:Zi(new Yi(a,this.h))]):a=[bj(a,this.h)];return a};function dj(a){return a.h.some(function(a){return a instanceof S})||null!==a.Qb};function ej(){T.call(this,0,1)}t(ej,T);ej.prototype.toString=l("skip(?)");ej.prototype.Oc=function(a){return this.toString().replace("?",a.M.toString())};ej.prototype.da=function(a,b,c){return[new H(a[0].entries.slice(c.M),a[0].u())]};function fj(){}t(fj,kh);fj.prototype.eb=function(a,b){if(!q(b.W)&&!q(b.M))return a;var c=gj(a);if(null===c)return a;lg(a,function(a){return a instanceof Wi||a instanceof ej}).forEach(function(a){a instanceof Wi?c.Qc=!0:c.Rc=!0;mg(a)},this);return c.$a()};function gj(a){a=lg(a,function(a){return a instanceof Mi},function(a){return a instanceof cj&&dj(a)||a instanceof Xi||1!=K(a).length||a instanceof Oi});return 0<a.length?a[0]:null};function hj(a){this.g=a}t(hj,kh);hj.prototype.eb=function(a,b){this.H=a;var c=ij(this,b);if(0==c.length)return this.H;var d=null,e=null,f=0;do e=c[f++],d=jj(this,e,b);while(null===d&&f<c.length);return null===d?this.H:this.H=kj(this,e,d)};function ij(a,b){return lg(a.H,function(a){if(!(a instanceof Oi))return!1;a=Zd(b,a.lc);return a instanceof sg&&"or"==a.pb})}
function jj(a,b,c){b=Zd(c,b.lc);var d=b.u();if(1!=d.size)return null;var d=D(d)[0],e=new Ei(a.g,d),f=null;return K(b).every(function(a){a=Gi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function kj(a,b,c){var d=lg(a.H,function(a){return a instanceof qi&&a.table.getName()==c[0].ab.oc})[0],e=new Pi(a.g,d.table),f=new Ni;L(e,f);c.forEach(function(a){a=new Mi(this.g,a.ab,Li(a),!1);L(f,a)},a);mg(b);qg(d,d,e,f);return f.$a()};function lj(a){this.g=a}t(lj,kh);lj.prototype.eb=function(a,b){var c=mj(a,b);if(null===c)return a;var d;a:{var e=c;d=nj(Nd(c,0));if(null!==d){var f;f=c.O;for(var h=null,k=d.table.Ba(),n=0;n<k.length&&null===h;n++)h=oj(k[n],f);f=h;if(null===f){d=e;break a}e=new Mi(this.g,f.ab,new Ai(f.ab),f.Te);f=new Pi(this.g,d.table);L(f,e);mg(c);e=qg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=pj(Nd(c,0)),null!==e){f=oj(e.index,c.O);if(null===f)break a;e.je=f.Te;d=mg(c).parent}return d.$a()};
function pj(a){a=lg(a,function(a){return a instanceof Mi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function nj(a){a=lg(a,function(a){return a instanceof qi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function mj(a,b){return q(b.O)?lg(a,function(a){return a instanceof Xi})[0]:null}function oj(a,b){if(a.h.length!=b.length||!b.every(function(b,c){return b.I.getName()==a.h[c].ca.getName()}))return null;var c=qj(b,a);return c[0]||c[1]?{ab:a,Te:c[1]}:null}
function qj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.qb?0:1)},0),d=b.h.reduce(function(a,b){return a<<1|(0==b.qb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.h.length))-1]};function rj(a,b,c){this.Fa=a;this.fe=b;this.Wb=c}rj.prototype.ic=function(){this.Wb.forEach(function(a){this.Fa=a.eb(this.Fa,this.fe)},this);return this.Fa};function sj(a,b){T.call(this,0,1);this.U=a;this.Jg=b}t(sj,T);sj.prototype.toString=function(){return"update("+this.U.getName()+")"};sj.prototype.da=function(a,b){var c=a[0].entries.map(function(a){var b=this.U.kb(a.ua.Ha());this.Jg.forEach(function(a){b.o[a.I.getName()]=a.value},this);return b},this);b.update(this.U,c);return[sd()]};function tj(a){this.g=a;this.le=[new yi,new Qi(this.g),new hj(this.g),new lj(this.g),new fj,new ri(this.g)];this.Ld=[new Qi(this.g)]}tj.prototype.create=function(a,b){var c=a.$a();if(c instanceof Yg||c instanceof Xg)return uj(this,a,b);if(c instanceof dh||c instanceof hh||c instanceof ih)return uj(this,a,b,this.le);if(c instanceof Zg||c instanceof $g)return uj(this,a,b,this.Ld);throw new E(8);};
function uj(a,b,c,d){a=jg(b.$a(),a.mg.bind(a));null!=d&&(a=(new rj(a,c,d)).ic());return new fe(a,b.ea())}
tj.prototype.mg=function(a){if(a instanceof dh)return new cj(a.h,a.Qb);if(a instanceof gh)return new si(a.h);if(a instanceof fh)return new Lg(a.h);if(a instanceof eh)return new Xi(a.O);if(a instanceof ih)return new ej;if(a instanceof hh)return new Wi;if(a instanceof ah)return new Oi(a.X.$());if(a instanceof ch)return new ph;if(a instanceof jh)return new ui(this.g,a.X,a.Sb);if(a instanceof bh)return new qi(this.g,a.table);if(a instanceof Zg)return new oi(a.table);if(a instanceof $g)return new sj(a.table,
a.te);if(a instanceof Yg)return new Vi(this.g,a.table);if(a instanceof Xg)return new Ti(this.g,a.table);throw new E(514);};function vj(a){this.jg=new ni;this.vg=new tj(a)};function wj(){this.$e=y()}function xj(a,b){var c=a.$e.get(b.getName())||null;null===c&&(c=new yj,a.$e.set(b.getName(),c));return c}function zj(a,b,c,d){c.forEach(function(a){a=xj(this,a);0==d?(a.bb=null,a.xc=b):3==d?(null===a.Yb&&(a.Yb=C()),a.Yb.add(b),null===a.Ta&&(a.Ta=C()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=C()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function Aj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=xj(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.xc&&null!==a.bb&&a.bb==b:3==d?null===a.xc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Bj(a,b,c,d){var e=Aj(a,b,c,d);e&&zj(a,b,c,d);return e}wj.prototype.releaseLock=function(a,b){b.forEach(function(b){xj(this,b).releaseLock(a)},this)};
function Cj(a,b){b.forEach(function(a){xj(this,a).bb=null},a)}function yj(){this.Yb=this.Ta=this.bb=this.xc=null}yj.prototype.releaseLock=function(a){this.xc==a&&(this.xc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Yb||this.Yb.delete(a)};function Dj(){this.Vb=new Ej;this.Ec=new wj}function ne(a,b){(2>b.getPriority()||2>b.getPriority())&&Cj(a.Ec,b.ea());a.Vb.Db(b);Fj(a);return b.Pb().fa}function Fj(a){for(var b=a.Vb.Cb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.K()?Gj(a,d,1,3):Gj(a,d,2,0))a.Vb.remove(d),e=a,d.exec().then(e.sg.bind(e,d),e.rg.bind(e,d))}}function Gj(a,b,c,d){var e=!1;Bj(a.Ec,b.$(),b.ea(),c)&&(e=Bj(a.Ec,b.$(),b.ea(),d));return e}Dj.prototype.sg=function(a,b){this.Ec.releaseLock(a.$(),a.ea());a.Pb().resolve(b);Fj(this)};
Dj.prototype.rg=function(a,b){this.Ec.releaseLock(a.$(),a.ea());a.Pb().reject(b);Fj(this)};function Ej(){this.Vb=[]}Ej.prototype.Db=function(a){kf(this.Vb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.$()-c.$():d})};Ej.prototype.Cb=function(){return this.Vb.slice()};Ej.prototype.remove=function(a){var b=this.Vb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Hj(){this.Mc=y()}var Ij;function Jj(){Ij||(Ij=new Hj);return Ij}Hj.prototype.clear=function(){this.Mc.clear()};Hj.prototype.clear=Hj.prototype.clear;Hj.prototype.sb=function(a,b){this.Mc.set(a.toString(),b);return b};Hj.prototype.registerService=Hj.prototype.sb;Hj.prototype.f=function(a){var b=this.Mc.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Hj.prototype.getService=Hj.prototype.f;Hj.prototype.ld=function(a){return this.Mc.has(a.toString())};
Hj.prototype.isRegistered=Hj.prototype.ld;function Kj(){var a=Jj();return Rb(a.Mc)};function Lj(a,b,c,d){return null!=a?null!=b?Mj(a,b,c,d):Nj(a):Oj()}function Pj(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function Qj(a){var b=Jj();a=new fc("ns_"+a);return b.ld(a)?b.f(a):null}function Oj(){var a={};Kj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=Qj(b).f(B).version())});return Pj(a)}function Nj(a){a=Qj(a);var b={};if(null!=a){var c=a.f(ic);a.f(B).pa().forEach(function(a){b[a.getName()]=c.get(Qe(a)).Ia().ja})}return Pj(b)}
function Mj(a,b,c,d){var e=Qj(a);a=[];if(null!=e){var f=null;try{f=e.f(B).table(b)}catch(h){}null!=f&&(b=e.f(ic),e=e.f(hc),c=b.get(Qe(f)).Pa(void 0,!1,c,d),c.length&&(a=gf(e,c).map(function(a){return a.o})))}return Pj(a)};function Rj(a,b){this.Md=Jd();this.ge=a;this.nd=b;this.L=Sj(this)}function Sj(a){if(0<a.ge.h.length)return a.ge.h;var b=[];a.ge.c.forEach(function(a){a.lb().forEach(function(a){b.push(a)})});return b}Rj.prototype.Z=function(a,b){return this.L.every(function(c){return Kd(this.Md,c.K(),"eq")(I(a,c),I(b,c))},this)};
function Tj(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=Uj(h,k,0,a.nd),b.push(k))}e=ob(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.ua.o),k=Uj(h,[],1,a.nd),b.push(k));return b}function Uj(a,b,c,d){return{Lg:c,index:a,object:d,Og:b,type:"splice"}};function Vj(){this.gc=y()}Vj.prototype.yd=function(a,b){var c=ka(a.a).toString(),d=this.gc.get(c)||null;null===d&&(d=new Wj(a),this.gc.set(c,d));d.yd(b)};Vj.prototype.he=function(a,b){var c=ka(a.a).toString(),d=this.gc.get(c)||null;d.he(b);0<d.Gc.size||this.gc.delete(c)};function me(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.gc.forEach(function(a){a=a.Bc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ke(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.gc.get(b)||null;null!==a&&Xj(a,c)}function Wj(a){this.Ef=a;this.Gc=C();this.pg=[];this.Ye=null;this.Mf=new Rj(a.a,this.pg)}Wj.prototype.yd=function(a){this.Gc.has(a)||this.Gc.add(a)};Wj.prototype.he=function(a){return this.Gc.delete(a)};Wj.prototype.Bc=function(){var a=this.Ef;return{context:a.a,ee:Nh(a)}};function Xj(a,b){var c=Tj(a.Mf,a.Ye,b);a.Ye=b;0<c.length&&a.Gc.forEach(function(a){a(c)})};function Yj(a,b){var c=a.f(B),d=b||{},e=new ff(c);a.sb(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Qb)||(Qb=new Pb),e=Qb,e=e.$f?0:e.Kg?4:1);switch(e){case 0:e=new Me(a,c);break;case 1:e=new Te(c);break;case 5:e=new Ve(c);break;case 4:e=new cf(a,c,d.webSqlDbSize);break;case 3:e=new ze(c,d.firebase);f=!0;break;default:throw new E(300);}a.sb(gc,e);var h=new ig;a.sb(ic,h);return e.Ca(d.onUpgrade).then(function(){var b=new vj(a);a.sb(jc,b);b=new Dj;a.sb(kc,b);b=new Vj;a.sb(lc,b);return h.Ca(c)}).then(function(){if(f){var b=
new oe(a);b.Ma.subscribe(b.$d.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=Lj);return(new bg(a)).Ca(c)})};function Zj(a){this.g=a;this.i=a.f(B);this.ba=C(this.i.pa());this.cb=x()}function ak(a){var b=a.g.f(ic),c=a.g.f(hc),d={};a.i.pa().forEach(function(a){var f=b.get(Qe(a)).Pa(),f=gf(c,f).map(function(a){return a.o});d[a.getName()]=f});return{name:a.i.name(),version:a.i.version(),tables:d}}m=Zj.prototype;m.exec=function(){var a=ak(this),a=new wd(new Sb(-1,a),!0);return w([new H([a],[])])};m.K=l(0);m.ea=g("ba");m.Pb=g("cb");m.$=function(){return ka(this)};m.getPriority=l(0);function bk(a,b){this.g=a;this.i=a.f(B);this.ba=C(this.i.pa());this.cb=x();this.ya=b;this.Ma=a.f(gc);this.V=a.f(hc);this.F=a.f(ic)}m=bk.prototype;
m.exec=function(){if(!(this.Ma instanceof Me||this.Ma instanceof Te||this.Ma instanceof cf))throw new E(300);var a;a:{a=this.i.pa();for(var b=0;b<a.length;++b)if(0<this.F.get(Qe(a[b])).Ia().ja){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.i.name()!=this.ya.name||this.i.version()!=this.ya.version)throw new E(111);if(null==this.ya.tables)throw new E(112);return ck(this)};m.K=l(1);m.ea=g("ba");m.Pb=g("cb");m.$=function(){return ka(this)};m.getPriority=l(0);
function ck(a){var b=new $c(a.g,a.ba),b=a.Ma.Hb(a.K(),D(a.ba),b),c;for(c in a.ya.tables){var d=a.i.table(c),e=a.ya.tables[c].map(function(a){return d.zb(a)}),f=b.J(c,d.kb,0);a.V.Xb(c,e);var h=a.F.nc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function dk(a,b){this.g=a;this.Ma=a.f(gc);this.Ga=a.f(kc);this.Lb=a.f(lc);this.ba=C(b);this.Ra=new $c(this.g,this.ba);this.cb=x();this.yc=x();this.we=x()}m=dk.prototype;m.exec=function(){this.we.resolve();return this.yc.fa};m.K=l(1);m.ea=g("ba");m.Pb=g("cb");m.$=function(){return ka(this)};m.getPriority=l(2);function ek(a){ne(a.Ga,a);return a.we.fa}
function fk(a,b){var c=b.Bc();return c.ee.$a().exec(a.Ra,c.context).then(function(a){return od(a[0])},function(a){this.Ra.Mb();var b=new ib(a.name);this.yc.reject(b);throw a;}.bind(a))}m.ka=function(){this.Ma.Hb(this.K(),D(this.ba),this.Ra).ka().then(function(){this.Lc();this.yc.resolve()}.bind(this),function(a){this.Ra.Mb();this.yc.reject(a)}.bind(this));return this.cb.fa};m.Mb=function(){this.Ra.Mb();this.yc.resolve();return this.cb.fa};
m.Lc=function(){var a=me(this.Lb,this.ba);0!=a.length&&(a=new je(this.g,a),ne(this.Ga,a))};function gk(a){this.g=a;this.Ga=a.f(kc);this.Pc=null;this.Ua=0;0==hk.size&&(hk.set(0,C([1,4])),hk.set(1,C([2])),hk.set(2,C([3,5,6])),hk.set(3,C([2,7])),hk.set(4,C([7])),hk.set(5,C([7])),hk.set(6,C([7])))}r("lf.proc.Transaction",gk);var hk=y();function ik(a,b){var c=hk.get(a.Ua)||null;if(null===c||!c.has(b))throw new E(107,a.Ua,b);a.Ua=b}
gk.prototype.exec=function(a){ik(this,4);var b=[];try{a.forEach(function(a){a.hb();b.push(a.Bc())},this)}catch(c){return ik(this,7),ab(c)}a=new qh(this.g,b);return ne(this.Ga,a).then(function(a){ik(this,7);return a.map(function(a){return od(a)})}.bind(this),function(a){ik(this,7);throw a;}.bind(this))};gk.prototype.exec=gk.prototype.exec;gk.prototype.Cf=function(a){ik(this,1);this.Pc=new dk(this.g,a);return ek(this.Pc).then(function(){ik(this,2)}.bind(this))};gk.prototype.begin=gk.prototype.Cf;
gk.prototype.Bf=function(a){ik(this,3);return fk(this.Pc,a).then(function(a){ik(this,2);return a}.bind(this),function(a){ik(this,7);throw a;}.bind(this))};gk.prototype.attach=gk.prototype.Bf;gk.prototype.ka=function(){ik(this,5);return this.Pc.ka().then(function(){ik(this,7)}.bind(this))};gk.prototype.commit=gk.prototype.ka;gk.prototype.Mb=function(){ik(this,6);return this.Pc.Mb().then(function(){ik(this,7)}.bind(this))};gk.prototype.rollback=gk.prototype.Mb;function W(a){this.g=a;this.i=a.f(B);this.hd=!1}r("lf.proc.Database",W);W.prototype.Ca=function(a){this.g.sb(B,this.i);return Yj(this.g,a).then(function(){this.hd=!0;this.Ga=this.g.f(kc);return this}.bind(this))};W.prototype.init=W.prototype.Ca;W.prototype.Bb=g("i");W.prototype.getSchema=W.prototype.Bb;function jk(a){if(!a.hd)throw new E(2);}W.prototype.select=function(a){jk(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Db=function(){jk(this);return new Ph(this.g)};W.prototype.insert=W.prototype.Db;W.prototype.Sd=function(){jk(this);return new Ph(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Sd;W.prototype.update=function(a){jk(this);return new Zh(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){jk(this);return new Oh(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){jk(this);this.g.f(lc).yd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){jk(this);this.g.f(lc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Kf=function(){jk(this);return new gk(this.g)};W.prototype.createTransaction=W.prototype.Kf;W.prototype.close=function(){try{this.g.f(gc).close()}catch(a){}this.g.clear();this.hd=!1};W.prototype.close=W.prototype.close;
W.prototype.Sf=function(){jk(this);var a=new Zj(this.g);return ne(this.Ga,a).then(function(a){return od(a[0])[0]})};W.prototype["export"]=W.prototype.Sf;W.prototype.import=function(a){jk(this);a=new bk(this.g,a);return ne(this.Ga,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.B=b;this.Ue=c;this.Se=d;this.uf=e;this.gb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("B");m.m=function(){return yd(this.U)+"."+this.B};m.toString=function(){return this.m()};m.J=g("U");m.K=g("uf");X.prototype.getType=X.prototype.K;X.prototype.Za=g("gb");X.prototype.Ba=function(){null==this.sa&&(this.sa=[],this.J().Ba().forEach(function(a){-1!=a.h.map(function(a){return a.ca.getName()}).indexOf(this.B)&&this.sa.push(a)},this));return this.sa};
X.prototype.Aa=function(){if(!q(this.ha)){var a=this.Ba().filter(function(a){return 1!=a.h.length?!1:a.h[0].ca.getName()==this.getName()},this);this.ha=0<a.length?a[0]:null}return this.ha};X.prototype.jc=g("Se");X.prototype.isNullable=X.prototype.jc;X.prototype.Dc=g("Ue");X.prototype.Na=function(a){return Bg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.af=function(a){return Bg(this,a,"neq")};X.prototype.neq=X.prototype.af;X.prototype.kg=function(a){return Bg(this,a,"lt")};
X.prototype.lt=X.prototype.kg;X.prototype.lg=function(a){return Bg(this,a,"lte")};X.prototype.lte=X.prototype.lg;X.prototype.Vf=function(a){return Bg(this,a,"gt")};X.prototype.gt=X.prototype.Vf;X.prototype.Wf=function(a){return Bg(this,a,"gte")};X.prototype.gte=X.prototype.Wf;X.prototype.match=function(a){return Bg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Df=function(a,b){return Bg(this,[a,b],"between")};X.prototype.between=X.prototype.Df;
X.prototype.Xf=function(a){return Bg(this,a,"in")};X.prototype["in"]=X.prototype.Xf;X.prototype.fg=function(){return this.Na(null)};X.prototype.isNull=X.prototype.fg;X.prototype.eg=function(){return this.af(null)};X.prototype.isNotNull=X.prototype.eg;X.prototype.sc=function(a){return new X(this.U,this.B,this.Ue,this.Se,this.uf,a)};X.prototype.as=X.prototype.sc;function kk(a){this.i=a;this.Ed=new Hc;this.ie=new Hc;this.cf=new Hc;this.Fe=y();this.j=new Hc;this.Be=new Hc;this.kf=new Hc;this.Ee=new Hc;lk(this)}function lk(a){a.i.pa().forEach(function(a){var c=a.getName();a.Jb().Rd().forEach(function(d){this.cf.set(c,this.i.table(d.Sa));this.j.set(d.Sa,a);0==d.action?(this.ie.set(d.Sa,d),this.kf.set(d.Sa,a)):(this.Ed.set(d.Sa,d),this.Be.set(d.Sa,a));this.Fe.set(a.getName()+"."+d.xb,d.Sa);this.Ee.set(d.Sa+"."+d.Ic,a.getName())},this)},a)}
function Qc(a,b,c){if(null!=c)return 1==c?a.Ed.get(b):a.ie.get(b);c=a.Ed.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function wh(a,b){var c=b.get(a);return null===c?[]:c}function yh(a,b){var c=C();b.forEach(function(a){(a=this.Fe.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.i.table(a)},a)}function uh(a,b,c){return null!=c?0==c?wh(b,a.kf):wh(b,a.Be):wh(b,a.j)}
function zh(a,b){var c=C();b.forEach(function(a){(a=this.Ee.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.i.table(a)},a)};function mk(a,b,c){this.wg=a;this.og=b;this.Tf=c}r("lf.schema.Constraint",mk);mk.prototype.bd=g("wg");mk.prototype.getPrimaryKey=mk.prototype.bd;mk.prototype.Rd=g("Tf");mk.prototype.getForeignKeys=mk.prototype.Rd;function nk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.De=b;this.xb=a.local;this.Sa=d[0];this.Ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){ok(a);this.Md=Jd();this.B=a;this.L=y();this.vd=C();this.pc=C();this.md=C();this.Da=null;this.sa=y();this.qd=!1;this.Ab=[]}r("lf.schema.TableBuilder",Y);function pk(a){this.name=a.name;this.qb=a.order;this.autoIncrement=a.autoIncrement}var qk=C([0,6]);function ok(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function rk(a,b){if(b==a.B)throw new E(546,b);if(a.L.has(b)||a.sa.has(b)||a.pc.has(b))throw new E(503,a.B+"."+b);}
function sk(a,b){var c=!1;b.forEach(function(a){var b=this.L.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function tk(a){if(null!==a.Da){var b=a.sa.get(a.Da).map(function(a){return a.name}),c=0;if(a.Ab.some(function(a,e){c=e;return-1!=b.indexOf(a.xb)},a))throw new E(543,a.Ab[c].name);}}
function uk(a){if(null!==a.Da){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Da).map(b));a.sa.forEach(function(a,e){if(e!=this.Da){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.B+"."+e);}},a)}}function vk(a){null===a.Da||a.sa.get(a.Da).forEach(function(a){if(this.md.has(a.name))throw new E(545,this.B+"."+a.name);},a)}Y.prototype.wf=function(a,b){ok(a);rk(this,a);this.L.set(a,b);qk.has(b)&&this.ye([a]);return this};Y.prototype.addColumn=Y.prototype.wf;
Y.prototype.yf=function(a,b){var c=this.B;this.Da="pk"+(c[0].toUpperCase()+c.substring(1));ok(this.Da);rk(this,this.Da);c=wk(this,a,!0,void 0,b);sk(this,c);1==c.length&&this.vd.add(c[0].name);this.pc.add(this.Da);this.sa.set(this.Da,c);return this};Y.prototype.addPrimaryKey=Y.prototype.yf;
Y.prototype.xf=function(a,b){ok(a);rk(this,a);var c=new nk(b,this.B,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.L.has(c.xb))throw new E(540,a);this.Ab.push(c);this.xe(a,[c.xb],this.vd.has(c.xb));return this};Y.prototype.addForeignKey=Y.prototype.xf;Y.prototype.zf=function(a,b){ok(a);rk(this,a);var c=wk(this,b,!0);1==c.length&&(this.vd.add(c[0].name),xk(this,c[0].name));this.sa.set(a,c);this.pc.add(a);return this};
Y.prototype.addUnique=Y.prototype.zf;function xk(a,b){a.Ab.forEach(function(a){a.xb==b&&this.pc.add(a.name.split(".")[1])},a)}Y.prototype.ye=function(a){wk(this,a,!1).forEach(function(a){this.md.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ye;Y.prototype.xe=function(a,b,c,d){ok(a);rk(this,a);b=wk(this,b,!0,d);c&&this.pc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.xe;Y.prototype.Gb=ca("qd");Y.prototype.persistentIndex=Y.prototype.Gb;
Y.prototype.Bb=function(){tk(this);uk(this);vk(this);return new (yk(this))};Y.prototype.getSchema=Y.prototype.Bb;function zk(a){return a.Ab}function wk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new pk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new pk(a)});f.forEach(function(a){if(!this.L.has(a.name))throw new E(508,this.B,a.name);if(c){var b=this.L.get(a.name);if(0==b||6==b)throw new E(509,this.B,a.name);}},a);return f}
function yk(a){function b(){function b(c){return a.sa.get(c).map(function(a){return{ca:this[a.name],qb:a.qb,autoIncrement:a.autoIncrement}},this)}var d=Rb(a.L).map(function(b){this[b]=new X(this,b,a.vd.has(b),a.md.has(b),a.L.get(b));return this[b]},this),e=Rb(a.sa).map(function(d){return new Dg(a.B,d,a.pc.has(d),b.call(this,d))},this);R.call(this,a.B,d,e,a.qd);var f=null===a.Da?null:new Dg(a.B,a.Da,!0,b.call(this,a.Da)),h=d.filter(function(b){return!a.md.has(b.getName())});this.Gf=new mk(f,h,a.Ab);
this.nf=Ak(a,d,e)}t(b,R);b.prototype.zb=function(a){return new this.nf(Tb++,a)};b.prototype.createRow=b.prototype.zb;b.prototype.kb=function(a){var b={};this.lb().forEach(function(e){var f=e.getName();e=e.K();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.nf(a.id,b)};b.prototype.deserializeRow=
b.prototype.kb;b.prototype.Jb=g("Gf");b.prototype.getConstraint=b.prototype.Jb;return b}
function Ak(a,b,c){function d(a,d){this.L=b;this.sa=c;Sb.call(this,a,d)}t(d,Sb);d.prototype.He=function(){var a={};this.L.forEach(function(b){a[b.getName()]=b.jc()?null:Gc[b.K()]});return a};d.prototype.tf=function(){var a={};this.L.forEach(function(b){var c=b.getName();b=b.K();var d=this.o[c];a[c]=0==b?null!=d?Wb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.L.get(a.getName()),c=this.Md.Ve.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.h.length?e(a.h[0].ca):f(a.h);h[b]=a});d.prototype.nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Bk(a,b){this.i=new Z(a,b);this.vb=y();this.zc=!1;this.l=null}r("lf.schema.Builder",Bk);function Ck(a,b){b.Ab.forEach(function(a){var d=a.Sa;if(!this.vb.has(d))throw new E(536,a.name);var d=this.vb.get(d).Bb(),e=a.Ic;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.Bb()[a.xb].K()!=d[e].K())throw new E(538,a.name);if(!d[e].Dc())throw new E(539,a.name);},a)}
Bk.prototype.Ff=function(a){a.Ab.forEach(function(a){zk(this.vb.get(a.Sa)).forEach(function(c){if(c.xb==a.Ic)throw new E(534,a.name);},this)},this)};function Dk(a){a.zc||(a.vb.forEach(function(a){Ck(this,a);a=a.Bb();this.i.N.set(a.getName(),a)},a),z(a.vb).forEach(a.Ff,a),Ek(a),a.vb.clear(),a.zc=!0)}function Fk(a,b,c){b.ue||(b.ue=!0,b.ae=!0,b.Ie.forEach(function(a){a=c.get(a);if(!a.ue)Fk(this,a,c);else if(a.ae&&b!=a)throw new E(533);},a));b.ae=!1}
function Ek(a){var b=y();a.i.N.forEach(function(a,d){b.set(d,new Gk(d))},a);a.vb.forEach(function(a,d){a.Ab.forEach(function(a){b.get(a.Sa).Ie.add(d)})});z(b).forEach(function(a){Fk(this,a,b)},a)}function Gk(a){this.ae=this.ue=!1;this.Ie=C();this.oc=a}Bk.prototype.Bb=function(){this.zc||Dk(this);return this.i};Bk.prototype.getSchema=Bk.prototype.Bb;Bk.prototype.Me=function(){var a=new fc("ns_"+this.i.name()),b=Jj(),c=null;b.ld(a)?c=b.f(a):(c=new Hj,b.sb(a,c));return c};Bk.prototype.getGlobal=Bk.prototype.Me;
Bk.prototype.connect=function(a){if(null!==this.l&&this.l.hd)throw new E(113);if(null===this.l){var b=this.Me();b.ld(B)||b.sb(B,this.Bb());this.l=new W(b)}return this.l.Ca(a)};Bk.prototype.connect=Bk.prototype.connect;Bk.prototype.Jf=function(a){if(this.vb.has(a))throw new E(503,a);if(this.zc)throw new E(535);this.vb.set(a,new Y(a));return this.vb.get(a)};Bk.prototype.createTable=Bk.prototype.Jf;Bk.prototype.me=function(a){if(this.zc)throw new E(535);this.i.me(a);return this};
Bk.prototype.setPragma=Bk.prototype.me;function Z(a,b){this.B=a;this.ac=b;this.N=y();this.gf={Nf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("B");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("ac");Z.prototype.version=Z.prototype.version;Z.prototype.pa=function(){return z(this.N)};Z.prototype.tables=Z.prototype.pa;Z.prototype.table=function(a){if(!this.N.has(a))throw new E(101,a);return this.N.get(a)};Z.prototype.table=Z.prototype.table;
Z.prototype.info=function(){this.Re||(this.Re=new kk(this));return this.Re};Z.prototype.ff=g("gf");Z.prototype.pragma=Z.prototype.ff;Z.prototype.me=ca("gf");r("lf.schema.create",function(a,b){return new Bk(a,b)});v.prototype.catch=v.prototype.pe;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
