if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ug=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.og=c;this.Nf=a;this.Hg=b;this.nd=0;this.dd=null}wa.prototype.get=function(){var a;0<this.nd?(this.nd--,a=this.dd,this.dd=a.next,a.next=null):a=this.Nf();return a};wa.prototype.put=function(a){this.Hg(a);this.nd<this.og&&(this.nd++,a.next=this.dd,this.dd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=p.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function u(a){return-1!=Fa.indexOf(a)};function Ia(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ia()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Be;c.Be=null;a()}};return function(a){d.next={Be:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.xd=this.pc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.xd?this.xd.next=c:this.pc=c;this.xd=c};Oa.prototype.remove=function(){var a=null;this.pc&&(a=this.pc,this.pc=this.pc.next,this.pc||(this.xd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Pd=null}Pa.prototype.set=function(a,b){this.Pd=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Pd=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&!u("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Pd.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Qa=0;this.kf=void 0;this.Tc=this.dc=this.D=null;this.cd=this.Nd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.jc=this.Gc=this.child=null;this.Ad=!1}Ya.prototype.reset=function(){this.context=this.jc=this.Gc=this.child=null;this.Ad=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Gc=a;d.jc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Xa(b,2,a);return b}function ab(a){return new v(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],bb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new eb(c,a,b)}
v.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.pe=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.dc||2!=a.Qa&&3!=a.Qa||hb(a);a.Tc?a.Tc.next=b:a.dc=b;a.Tc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new v(function(a,h){e.Gc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(A){h(A)}}:h});e.child.D=a;gb(a,e);return e.child}v.prototype.Og=function(a){this.Qa=0;Xa(this,2,a)};v.prototype.Pg=function(a){this.Qa=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Qa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Qa=1,cb(c,a.Og,a.Pg,a)||(a.kf=c,a.Qa=b,a.D=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof v)return gb(a,$a(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function hb(a){a.Nd||(a.Nd=!0,Ra(a.Uf,a))}function lb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Tc=null);return b}
v.prototype.Uf=function(){for(var a=null;a=lb(this);){var b=this.Qa,c=this.kf;if(3==b&&a.jc&&!a.Ad)for(var d=void 0,d=this;d&&d.cd;d=d.D)d.cd=!1;if(a.child)a.child.D=null,mb(a,b,c);else try{a.Ad?a.Gc.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Nd=!1};function mb(a,b,c){2==b?a.Gc.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function jb(a,b){a.cd=!0;Ra(function(){a.cd&&nb.call(null,b)})}var nb=La;function ib(a){ra.call(this,a)}t(ib,ra);ib.prototype.name="cancel";
function eb(a,b,c){this.ea=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function ub(){}ub.prototype.next=function(){throw tb;};ub.prototype.ue=function(){return this};function vb(a){if(a instanceof ub)return a;if("function"==typeof a.ue)return a.ue(!1);if(ha(a)){var b=0,c=new ub;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=vb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new ub;var b=new ub,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function Ab(a){Bb(a);return a.a.concat()}function Bb(a){if(a.Jf!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Cb(a.Z,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Jf!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Cb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Eb=Ia(),Fb=u("Trident")||u("MSIE"),Gb=u("Edge"),Hb=u("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ib=-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge");function Jb(){var a=Fa;if(Hb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Eb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Jb())&&(a=b?b[1]:"");return Fb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Kb={};var Lb=Db()||u("iPod"),Mb=u("iPad"),Nb=Ka(),Ob=u("Safari")&&!(Ka()||u("Coast")||Ia()||u("Edge")||u("Silk")||u("Android"))&&!(Db()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Pb(){this.Ig=Ob||Mb||Lb;this.dg=!(this.Ig||Fb&&!Kb[10]&&!(Kb[10]=0<=ta(10)));!Fb||Kb[11]||(Kb[11]=0<=ta(11));this.Tg=Nb||Ob}var Qb;function y(){return new window.Map}function Rb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(a,b){this.ra=a;this.l=b||this.Ge()}var Tb=0;m=Sb.prototype;m.id=g("ra");m.Ge=function(){return{}};m.tf=g("l");m.Ia=function(){return{id:this.ra,value:this.tf()}};m.nb=function(a){return"#"==a.substr(-1)?this.ra:null};function Ub(a){return new Sb(a.id,a.value)}function Vb(a){return new Sb(Tb++,a||{})}function Wb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var Xb={};r("lf.TransactionType",Xb);Xb.READ_ONLY=0;Xb.READ_WRITE=1;function B(a,b,c,d,e){this.sd=a;this.hg=b;this.Rg=c;this.Pf=d;this.Gf=e}r("lf.TransactionStats",B);B.prototype.Mg=g("sd");B.prototype.success=B.prototype.Mg;B.prototype.gg=g("hg");B.prototype.insertedRowCount=B.prototype.gg;B.prototype.Qg=g("Rg");B.prototype.updatedRowCount=B.prototype.Qg;B.prototype.Of=g("Pf");B.prototype.deletedRowCount=B.prototype.Of;B.prototype.Ff=g("Gf");B.prototype.changedTableCount=B.prototype.Ff;function Yb(a,b){this.ud=a;this.Oa=b||null;this.O=x();this.sd=!1;this.ya=null}Yb.prototype.ka=function(){return(0==this.ud?this.sc():Zb(this)).then(function(a){this.sd=!0;return a}.bind(this))};function Zb(a){try{$b(a.Oa)}catch(b){return ab(b)}return ac(a).then(function(a){this.Oa.ka();return a}.bind(a))}function ac(a){cc(a);dc(a);return a.sc()}
function cc(a){a.Oa.fb.forEach(function(a,c){var d=this.Oa.da().get(c),d=this.H(d.getName(),d.kb.bind(d),0),e=z(a.wa).map(function(a){return a.id()});0<e.length&&d.remove(e).pe(this.Oe,this);e=z(a.ma).map(function(a){return a[1]}).concat(z(a.va));d.put(e).pe(this.Oe,this)},a)}function dc(a){ec(a.Oa).forEach(function(a){var c=this.H(a.getName(),Ub,1);c.remove([]);c.put(a.Ia())},a)}Yb.prototype.Oe=function(a){this.O.reject(a)};
Yb.prototype.aa=function(){if(null===this.ya)if(this.sd)if(0==this.ud)this.ya=new B(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Oa.fb.forEach(function(e){d++;a+=e.va.size;c+=e.ma.size;b+=e.wa.size});this.ya=new B(!0,a,c,b,d)}else this.ya=new B(!1,0,0,0,0);return this.ya};function fc(a){this.Jg=a}fc.prototype.toString=g("Jg");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),mc=new fc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function D(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function nc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function oc(a,b){this.ra=a;this.l=b||{}}function pc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}oc.prototype.V=g("ra");function qc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function rc(a,b){b.forEach(function(a){delete this.l[a]},a)}oc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function sc(a){return new oc(a.id,JSON.parse(a.value))};function tc(a,b,c){this.X=a;this.Gb=b;this.lf=c}m=tc.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Gb;return uc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.l[a])})})};function uc(a,b){var c=y(),d=x(),e=pc(b).map(function(a){return new v(function(b,d){var e;try{e=this.X.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=sc(a.target.result);c.set(a.V(),a);b()}},this)},a);db(e).then(function(){d.resolve(c)});return d.ea}
m.Qd=function(){return new v(function(a,b){var c=[],d;try{d=this.X.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=sc(b.value).l;for(var h in f)c.push(this.Gb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.lf(this.X.name,d));qc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.X.put(a.Ia())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.X.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.lf(this.X.name,d));rc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.l).length?this.X.delete(a.V()):this.X.put(a.Ia())}.bind(this))},this);return db(a)};function vc(a,b,c){a=a.b(hc);var d=[c<<9,(c+1<<9)-1];b=a.Ra(b,d[0],d[1]);c=new oc(c);qc(c,b);return c}
function wc(a,b){return new oc(b)};function xc(a){this.U=a.b(hc);this.C=a.b(ic);this.g=a.b(mc)}xc.prototype.update=function(a){a.forEach(function(a){yc(this,a);zc(this,a)},this)};function zc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.ma.forEach(function(a){this.U.set(c,a[1])},a)}function yc(a,b){var c=a.g.table(b.getName());Ac(b).forEach(function(a){Bc(this,c,a)},a)}
function Bc(a,b,c){var d=a.C.mc.get(b.getName())||[],e=0;d.forEach(function(a){try{Cc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Cc(a,[c[1],c[0]])},this),b;}},a)}function Cc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.ib().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Dc={};r("lf.ConstraintAction",Dc);Dc.RESTRICT=0;Dc.CASCADE=1;var Ec={};r("lf.ConstraintTiming",Ec);Ec.IMMEDIATE=0;Ec.DEFERRABLE=1;var Fc={};r("lf.Order",Fc);Fc.DESC=0;Fc.ASC=1;var Gc={};r("lf.Type",Gc);Gc.ARRAY_BUFFER=0;Gc.BOOLEAN=1;Gc.DATE_TIME=2;Gc.INTEGER=3;Gc.NUMBER=4;Gc.STRING=5;Gc.OBJECT=6;var Hc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Hc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Ic(){this.Z=y();this.size=0}m=Ic.prototype;m.has=function(a){return this.Z.has(a)};m.set=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=C(),this.Z.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=C(),this.Z.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Xd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.Z.get(a)||null;if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.Z.delete(a));return d};m.get=function(a){a=this.Z.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.Z.clear();this.size=0};m.keys=function(){return Rb(this.Z)};m.values=function(){var a=[];this.Z.forEach(function(b){a.push.apply(a,D(b))});return a};function Jc(a){this.C=a.b(ic);this.g=a.b(mc);this.U=a.b(hc);this.Xc=null}function Kc(a,b,c){var d=b.Hb().ug;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new E(202,b.j());},this)},a)}function Lc(a,b,c,d){b.Hb().Rd().forEach(function(a){a.timing==d&&Mc(this,a,c)},a)}function Mc(a,b,c){var d=Nc(a,b);c.forEach(function(a){if(Oc(a[0],a[1],b.name)&&(a=a[1].nb(b.name),null!==a&&!d.jb(a)))throw new E(203,b.name);},a)}
function Nc(a,b){null===a.Xc&&(a.Xc=y());var c=a.Xc.get(b.name)||null;null===c&&(c=a.g.table(b.Ta)[b.Hc].Ba(),c=a.C.get(c.j()),a.Xc.set(b.name,c));return c}function Oc(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function Qc(a,b,c,d){b=Rc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Sc(a,b,c,function(a,b,c){if(b.jb(c))throw new E(203,a.name);}))}
function Tc(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Ic;Sc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Ce,b)});return d}function Uc(a,b,c){var d=new Ic;Sc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Od:a,zg:k[1]})})});return d}function Sc(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),h=Nc(this,a);c.forEach(function(c){if(Oc(c[0],c[1],h.getName())){var n=c[0].nb(h.getName());d(a,b,n,c)}},this)},a)}
function Vc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Lc(a,b,c,d))}function Wc(a,b,c,d){0!=c.length&&(Lc(a,b,c,d),Qc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Qc(a,b,c,d))}
function Yc(a,b,c){var d={oe:[],nf:new Ic},e=new Ic;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Ic;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Tc(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Xd(b))},a);e=f;d.nf.Xd(e)}while(0<e.size);return d};function Zc(a){this.va=y();this.ma=y();this.wa=y();this.w=a}m=Zc.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.ma.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Xd=function(a){a.va.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Ac(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Rb(this.va).toString()+"], ["+Rb(this.ma).toString()+"], ["+Rb(this.wa).toString()+"]"};function $c(a){var b=new Zc(a.w);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.jg=function(){return 0==this.va.size&&0==this.wa.size&&0==this.ma.size};function ad(a,b){this.$=y();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.g=a.b(mc);this.U=a.b(hc);this.C=a.b(ic);this.za=new Jc(a);this.ed=new xc(a);this.fb=y()}function ec(a){var b=[];Rb(a.fb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.Eb()&&(a.Ca().forEach(function(a){b.push(this.C.get(a.j()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=ad.prototype;m.da=g("$");
m.Cb=function(a,b){bd(this,a);Kc(this.za,a,b);Vc(this.za,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[null,b[c]])};function cd(a,b,c){var d=b.getName(),e=a.fb.get(d)||new Zc(d);a.fb.set(d,e);try{Bc(a.ed,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){bd(this,a);Kc(this.za,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);dd(this,a,c);Wc(this.za,a,c,0);c.forEach(function(b){cd(this,a,b)},this)};m.Sd=function(a,b){bd(this,a);Kc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Hb().$c();if(null===h)f=null;else{f=this.za;var h=h.j(),k=d.nb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.ra=f,Wc(this.za,a,[[e,d]],0)):Vc(this.za,a,[d],0);cd(this,a,[e,d])}};
m.remove=function(a,b){bd(this,a);ed(this,a,b);Xc(this.za,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[b[c],null])};function dd(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null!==b){var d=Uc(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Od.Ce),d=this.U.get(a),n=c.kb(d.Ia());n.l[b.Od.wb]=b.zg.l[b.Od.Hc];cd(this,c,[d,n])},this)},a)}}
function ed(a,b,c){if(null!==Rc(a.g.info(),b.getName(),1)){b=Yc(a.za,b,c);var d=b.nf;b.oe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Xc(this.za,b,a,0);a.forEach(function(a){cd(this,b,[a,null])},this)},a)}}function $b(a){a.fb.forEach(function(a){var c=this.$.get(a.getName());Vc(this.za,c,z(a.va),1);Xc(this.za,c,z(a.wa),1);Wc(this.za,c,z(a.ma),1)},a)}m.ka=aa();m.Kb=function(){var a=z(this.fb).map(function(a){return $c(a)});this.ed.update(a)};
function bd(a,b){if(!a.$.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.from=a;this.m=b;this.fa=this.from==G?!1:c;this.oa=this.m==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.fa?"(":"[")+(this.from==G?"unbound":this.from)+", "+(this.m==G?"unbound":this.m)+(this.oa?")":"]")};function fd(a){if(gd(a))return[];var b=null,c=null;a.from==G||(b=new F(G,a.from,!1,!a.fa));a.m==G||(c=new F(a.m,G,!a.oa,!1));return[b,c].filter(function(a){return null!==a})}F.prototype.reverse=function(){return new F(this.m,this.from,this.oa,this.fa)};
function hd(a,b){var c=id(a.from,b.from,!0,a.fa,b.fa);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.m==G||d.m>c.from||d.m==c.from&&!d.oa&&!c.fa}function jd(){return new F(G,G,!1,!1)}function gd(a){return a.from==G&&a.m==G}function kd(a){return a.from==a.m&&a.from!=G&&!a.fa&&!a.oa}F.prototype.contains=function(a){var b=this.m==G||a<this.m||a==this.m&&!this.oa;return(this.from==G||a>this.from||a==this.from&&!this.fa)&&b};
function id(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function ld(a,b){var c=id(a.from,b.from,!0,a.fa,b.fa);0==c&&(c=id(a.m,b.m,!1,a.oa,b.oa));return c}function md(a){if(0==a.length)return[];a.sort(ld);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].from,!1,!0):c==b.length-1?new F(a[c-1].m,G,!0,!1):new F(a[c-1].m,a[c].from,!0,!0);return b};function nd(a){this.lc=[];q(a)&&this.add(a)}nd.prototype.toString=function(){return this.lc.map(function(a){return a.toString()}).join(",")};nd.prototype.jb=function(a){return this.lc.some(function(b){return b.contains(a)})};nd.prototype.Bb=g("lc");
nd.prototype.add=function(a){if(0!=a.length)if(a=this.lc.concat(a),1==a.length)this.lc=a;else{a.sort(ld);for(var b=[],c=a[0],d=1;d<a.length;++d)if(hd(c,a[d])){var e=a[d],f=jd();if(c.from!=G&&e.from!=G){var h=id(c.from,e.from,!0);1!=h?(f.from=c.from,f.fa=0!=h?c.fa:c.fa&&e.fa):(f.from=e.from,f.fa=e.fa)}c.m!=G&&e.m!=G&&(h=id(c.m,e.m,!1),-1!=h?(f.m=c.m,f.oa=0!=h?c.oa:c.oa&&e.oa):(f.m=e.m,f.oa=e.oa));c=f}else b.push(c),c=a[d];b.push(c);this.lc=b}};
function od(a,b){var c=[];a.Bb().map(function(a){return b.Bb().map(function(b){var c;if(hd(a,b)){c=jd();var h=id(a.from,b.from,!0),h=0==h?a.fa?a:b:-1!=h?a:b;c.from=h.from;c.fa=h.fa;a.m==G||b.m==G?b=a.m==G?b:a:(h=id(a.m,b.m,!1),b=0==h?a.oa?a:b:-1==h?a:b);c.m=b.m;c.oa=b.oa}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new nd(c.filter(function(a){return null!==a}))};function H(a,b){this.entries=a;this.L=C(b);this.Wa=null}H.prototype.o=function(){return D(this.L)};function pd(a){return a.entries.map(function(a){return a.ua.l})}function qd(a){return a.entries.map(function(a){return a.ua.id()})}function rd(a,b){return a.Wa.get(b.j())}var sd=null;function td(){null===sd&&(sd=new H([],[]));return sd}
function ud(a){if(0==a.length)return td();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(z(e),D(a[0].L))}function vd(a){if(0==a.length)return td();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(z(b),D(a[0].L))}
function wd(a,b){var c=1<b.length,d=a.map(function(a){return new xd(a,c)});return new H(d,b)}function xd(a,b){this.ua=a;this.id=yd++;this.Ud=b}var yd=0;function I(a,b){var c=b.Xa();return null!==c&&a.ua.l.hasOwnProperty(c)?a.ua.l[c]:a.Ud?a.ua.l[zd(b.H())][b.getName()]:a.ua.l[b.getName()]}function Ad(a,b,c){var d=b.Xa();if(null!=d)a.ua.l[d]=c;else if(a.Ud){var d=zd(b.H()),e=a.ua.l[d];null==e&&(e={},a.ua.l[d]=e);e[b.getName()]=c}else a.ua.l[b.getName()]=c}
function Bd(a,b,c,d){function e(a,b){if(a.Ud){var c=a.ua.l,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.l}var f={};e(a,b);e(c,d);a=new Sb(-1,f);return new xd(a,!0)};r("lf.bind",function(a){return new Cd(a)});function Cd(a){this.ga=a}r("lf.Binder",Cd);Cd.prototype.Ba=g("ga");function Dd(){this.Ue=Ed();var a=Fd();this.gc=y();this.gc.set(1,Gd());this.gc.set(2,Hd());this.gc.set(4,a);this.gc.set(3,a);this.gc.set(5,Id())}var Jd;function Kd(){null!=Jd||(Jd=new Dd);return Jd}function Ld(a,b,c){return(a.gc.get(b)||null).get(c)||null}function Ed(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Gd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Fd(){var a=Gd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Id(){var a=Fd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Hd(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.D=null}var Md=[];J.prototype.getParent=g("D");J.prototype.Ya=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Nd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||Md}function Od(a,b){return K(a)[b]||null}function Pd(a,b,c){b.D=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.D=a;null===a.h?a.h=[b]:a.h.push(b)}
function Qd(a,b){var c=a.h&&a.h[b];return c?(c.D=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Qd(this,K(this).indexOf(a))};function Rd(a,b,c){Od(a,c).D=null;b.D=a;a.h[c]=b}function Sd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Sd(a,b,c)})};function Td(){J.call(this);this.ra=Ud++}t(Td,J);var Ud=0;Td.prototype.V=g("ra");function Vd(a,b,c){Td.call(this);this.G=a;this.value=b;this.B=c;this.vc=Ld(Kd(),this.G.I(),this.B);this.Sa=!1;this.cc=b}t(Vd,Td);m=Vd.prototype;m.Nb=function(){var a=new Vd(this.G,this.value,this.B);a.cc=this.cc;a.rd(this.Sa);var b=this.V();a.ra=b;return a};m.lb=function(a){return null!=a?(a.push(this.G),a):[this.G]};m.o=function(a){a=null!=a?a:C();a.add(this.G.H());return a};m.rd=ba("Sa");
function Wd(a){var b=!1;a.value instanceof Cd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Cd}):!0);if(!b)throw new E(501);}m.eval=function(a){Wd(this);if("in"==this.B)return Xd(this,a);var b=a.entries.filter(function(a){return this.vc(I(a,this.G),this.value)!=this.Sa},this);return new H(b,a.o())};
m.bind=function(a){if(this.cc instanceof Cd){var b=this.cc.Ba();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof Cd){var d=b.Ba();if(a.length<=d)throw new E(510);return a[b.Ba()]}return b}))};function Xd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Sa}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.G))},a);return new H(e,b.o())}
m.toString=function(){return"value_pred("+this.G.j()+" "+this.B+(this.Sa?"(complement)":"")+" "+this.value+")"};m.hd=function(){Wd(this);return null!==this.value&&("between"==this.B||"in"==this.B||"eq"==this.B||"gt"==this.B||"gte"==this.B||"lt"==this.B||"lte"==this.B)};
m.qe=function(){var a=null;if("between"==this.B)a=new F(Yd(this,this.value[0]),Yd(this,this.value[1]),!1,!1);else{if("in"==this.B)return a=this.value.map(function(a){return new F(a,a,!1,!1)}),new nd(this.Sa?md(a):a);a=Yd(this,this.value);a="eq"==this.B?new F(a,a,!1,!1):"gte"==this.B?new F(a,G,!1,!1):"gt"==this.B?new F(a,G,!0,!1):"lte"==this.B?new F(G,a,!1,!1):new F(G,a,!1,!0)}return new nd(this.Sa?fd(a):[a])};function Yd(a,b){return 2==a.G.I()?b.getTime():b};function Zd(a){this.ba=a;this.Uc=this.Fa=null}function $d(a,b){null===a.Fa&&null!=a.u&&(a.Fa=ae(a.u));return a.Fa.get(b)||null}function ae(a){var b=y();Sd(a,function(a){b.set(a.V(),a)});return b}function be(a,b){b.u&&(a.u=b.u.Nb());a.Uc=b}Zd.prototype.bind=function(){return this};function ce(a,b){var c=a.u;null!=c&&Sd(c,function(a){a instanceof Vd&&a.bind(b)})};function ee(a){Zd.call(this,a)}t(ee,Zd);function fe(a){var b="";a.forEach(function(c,d){b+=c.G.j()+" ";b+=1==c.qb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ee.prototype.da=function(){return C(this.from)};ee.prototype.clone=function(){var a=new ee(this.ba);be(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.la&&(a.la=this.la.slice());this.Sb&&(a.Sb=this.Sb);this.Yb&&(a.Yb=this.Yb);a.$a=this.$a;return a};
ee.prototype.bind=function(a){ee.eb.bind.call(this,a);null!=this.Sb&&(this.W=a[this.Sb.Ba()]);null!=this.Yb&&(this.K=a[this.Yb.Ba()]);ce(this,a);return this};function ge(a,b){this.Ga=a;this.$=b}ge.prototype.Ya=g("Ga");ge.prototype.da=g("$");function he(a){var b=C();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function ie(a,b){this.global=a;this.Ma=a.b(gc);this.pd=b.map(function(a){return a.context});this.df=b.map(function(a){return a.ee});this.Id=he(this.df);this.re=je(this);this.bb=x()}function je(a){return a.pd.some(function(a){return!(a instanceof ee)})?1:0}m=ie.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.Ya().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.re?void 0:new ad(this.global,this.Id),c=[],d=this.df.slice(),e=this.pd;return a().then(function(){this.ja=this.Ma.Fb(this.re,D(this.Id),b);return this.ja.ka()}.bind(this)).then(function(){this.be(c);return c}.bind(this),function(a){null!=b&&b.Kb();throw a;})};m.I=g("re");m.da=g("Id");m.Ob=g("bb");m.V=function(){return ka(this)};m.be=aa();
m.aa=function(){var a=null;null!=this.ja&&(a=this.ja.aa());return null===a?new B(!1,0,0,0,0):a};function ke(a,b){ie.call(this,a,b);this.Jb=a.b(lc)}t(ke,ie);ke.prototype.getPriority=l(0);ke.prototype.be=function(a){this.pd.forEach(function(b,c){le(this.Jb,b,a[c])},this)};function me(a,b){this.c=a;this.Jb=a.b(lc);this.Ha=a.b(kc);this.ed=new xc(a);this.fb=b;var c=a.b(mc),d=this.fb.map(function(a){return c.table(a.getName())});this.$=C(d);this.bb=x()}m=me.prototype;m.exec=function(){this.ed.update(this.fb);this.Kc();return w()};m.I=l(1);m.da=g("$");m.Ob=g("bb");m.V=function(){return ka(this)};m.getPriority=l(1);m.Kc=function(){var a=ne(this.Jb,this.$);0!=a.length&&(a=new ke(this.c,a),oe(this.Ha,a))};function pe(a){this.c=a;this.Ma=a.b(gc);this.Ha=a.b(kc)}pe.prototype.$d=function(a){a=new me(this.c,a);oe(this.Ha,a)};function M(a,b){this.$b=a;this.i=b;this.Va=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.ad=g("i");M.prototype.bd=function(){throw new E(351);};function qe(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ea}function re(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ea}
M.prototype.Da=function(a){return qe(this.i,"@rev/R").then(function(a){this.Pa=a;return qe(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.pa().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return re(d,b)}.bind(this))};
function se(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ea}.call(a).then(function(a){a["@rev"]={R:++this.Pa};return re(this.i,a)}.bind(a)):w()}M.prototype.tc=function(a){return se(this,a,l(null)).then(function(){this.Va.delete(a);return re(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.tc;
M.prototype.qc=function(a,b,c){return se(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Pa+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.qc;M.prototype.uc=function(a,b){return se(this,a,function(a){var d=a.P;delete d[b];return{R:this.Pa+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.uc;M.prototype.Jc=function(a,b,c){return se(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Pa+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Jc;
M.prototype.yb=function(){throw new E(351);};M.prototype.createRow=M.prototype.yb;M.prototype.Bc=g("$b");M.prototype.getVersion=M.prototype.Bc;M.prototype.ec=function(a){var b=x();a=this.Va.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ea};M.prototype.dump=function(){var a={},b=Rb(this.Va).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function te(a,b,c){Yb.call(this,b,c);this.i=a}t(te,Yb);te.prototype.H=function(a){return this.i.zc(a)};
te.prototype.sc=function(){if(0==this.ud)return this.O.resolve(),this.O.ea;var a=this.Oa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Pa+1;this.i.Pa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.i.Va.get(e);a.va.forEach(function(a,d){c[d]={R:b,T:f,P:a.l}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].l}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Pa=b-1,c=z(a).map(function(a){return ue(this.i,a.getName())},this),
db(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ea};function ve(){this.Aa=y()}function we(a,b){if(0==b.length)return z(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}ve.prototype.getData=g("Aa");ve.prototype.get=function(a){return w(we(this,a))};function xe(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}ve.prototype.put=function(a){xe(this,a);return w()};function ye(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
ve.prototype.remove=function(a){ye(this,a);return w()};function ze(a){return 0==a.Aa.size?0:Rb(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Ae(a,b){this.g=a;this.Af=b;this.Ic=y();this.Pa=-1;this.L=y();this.Va=y();this.Fd=null}m=Ae.prototype;
m.Da=function(a){this.i=this.Af.child(this.g.name());var b=a||function(){return w()};return qe(this.i,"@db/version").then(function(a){return null===a?re(this.i,Be(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?qe(this.i,"@rev/R").then(function(a){this.Pa=a;return qe(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.g.pa().map(function(a){return ue(this,a.getName())},this);
return db(a)}.bind(this)).then(function(){Ce(this);De(this);return w()}.bind(this)):this.ce(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.ce=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return re(a,{version:this.g.version()},!0)}.bind(this))};
function De(a){a.i.off();a.i.on("child_removed",a.wg.bind(a));a.Gd&&(a.Gd.off(),a.Ic.clear());a.Gd=a.i.orderByChild("R").startAt(a.Pa+1);a.Gd.on("value",a.$d.bind(a))}function Ce(a){Tb=z(a.L).map(function(a){return ze(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.wg=function(a){var b=a.val(),c=this.Ic.get(b.T)||null;null===c&&(c=C(),this.Ic.set(b.T,c));c.add(parseInt(a.key(),10))};
m.$d=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Pa&&(this.Pa=b,a=Ee(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Rb(a.wa);0<e.length&&ye(b,e);var f=z(a.va);a.ma.forEach(function(a){f.push(a[1])});xe(b,f)},this),0<a.length&&this.Ec(a),De(this))};
function Ee(a,b){var c=C(),d=y();a.Va.forEach(function(a,b){var h=this.L.get(b),k=new Zc(b);if(this.Ic.has(a)){var n=D(this.Ic.get(a));n.forEach(function(a){c.add(a)});we(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.L.get(a.getName()),h=this.g.table(a.getName()).kb({id:b,value:h.P});k.getData().has(b)?a.modify([we(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.jg()})}
function ue(a,b){var c=x(),d=a.Va.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new ve,k=[];a.forEach(function(a){k.push(e.kb({id:parseInt(a.key(),10),value:a.val().P}))});xe(d,k);this.L.set(b,d);c.resolve()}.bind(a));return c.ea}function Be(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Pa=1;b["@table"]={};a.g.pa().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ve);this.Va.set(e,d)},a);return b}
m.Fb=function(a,b,c){return new te(this,a,c)};m.zc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Ec=function(a){null!=this.Fd&&this.Fd(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.$b=a;this.Sc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.ad=g("i");N.prototype.getRawDBInstance=N.prototype.ad;N.prototype.bd=g("ja");N.prototype.getRawTransaction=N.prototype.bd;N.prototype.tc=function(a){return new v(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.tc;
function Fe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.ja.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ge(a){var b=null;return b=a instanceof ArrayBuffer?Wb(a):a instanceof Date?a.getTime():a}
function He(a,b,c){function d(a){var b=sc(a.value),d=b.l,e;for(e in d){var A=Ub(d[e]);c(A);d[e]=A.Ia()}a.update(b.Ia())}function e(a){var b=Ub(a.value);c(b);a.update(b.Ia())}return Fe(a,b,a.Sc?d:e,aa())}N.prototype.qc=function(a,b,c){var d=Ge(c);return He(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.qc;N.prototype.uc=function(a,b){return He(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.uc;
N.prototype.Jc=function(a,b,c){return He(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Jc;function Ie(a,b){var c=[];return new v(function(a,e){var f;try{f=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Sc){var e;e=sc(b.value).l;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.yb=function(a){var b={},c;for(c in a)b[c]=Ge(a[c]);return Vb(b)};
N.prototype.createRow=N.prototype.yb;N.prototype.Bc=g("$b");N.prototype.getVersion=N.prototype.Bc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return Ie(this,a).then(function(a){return a.map(function(a){return a.value})})};function Je(a,b){this.X=a;this.Gb=b}Je.prototype.get=function(a){if(0==a.length)return null!=this.X.getAll?Ke(this):Le(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.X.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Gb(a.target.result))}.bind(this)},this)},this);return db(a)};
function Le(a){return new v(function(a,c){var d=[],e;try{e=this.X.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Gb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Ke(a){return new v(function(a,c){var d;try{d=this.X.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Gb(a)},this);a(c)}.bind(this)},a)}
Je.prototype.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Je.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Tb(function(){return this.X.put(a.Ia())}.bind(this))},this);return db(a)};
Je.prototype.remove=function(a){return new v(function(b,c){var d=this.X.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.X.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.X.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Me(a,b,c,d,e){Yb.call(this,c,e);this.c=a;this.ja=b;this.Sc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}t(Me,Yb);Me.prototype.H=function(a,b,c){return this.Sc?(c=null!=c?c:0,a=this.ja.objectStore(a),new tc(a,b,0==c?qa(vc,this.c):wc)):new Je(this.ja.objectStore(a),b)};Me.prototype.sc=function(){return this.O.ea};function Ne(a,b){this.c=a;this.g=b;this.Cd=b.ef().Rf||!1}m=Ne.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new E(361,a.name,a.message))};f.onupgradeneeded=function(a){Oe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.i=b.target.result;this.ke().then(function(b){Tb=b+1;a(this.i)}.bind(this))}.bind(this)},
this)};function Oe(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Cd);Pe(d);a.g.pa().forEach(qa(a.Kf,d),a);return b(c)}function Pe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Kf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Eb()&&(b.Ca().forEach(function(b){Qe(a,b.j())},this),Qe(a,Re(b)))};function Qe(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Fb=function(a,b,c){b=this.i.transaction(Se(b),0==a?"readonly":"readwrite");return new Me(this.c,b,a,this.Cd,c)};
function Se(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Eb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(Re(a)))});return D(b)}
m.ke=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(da){d(da);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.pa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Cd?(a=sc(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.zc=function(){throw new E(511);};m.subscribe=aa();m.Ec=aa();function Te(a,b,c){Yb.call(this,b,c);this.X=a;0==b&&this.O.resolve()}t(Te,Yb);Te.prototype.H=function(a){return this.X.zc(a)};Te.prototype.sc=function(){this.O.resolve();return this.O.ea};function Ue(a){this.g=a;this.L=y()}m=Ue.prototype;m.Da=function(){this.g.pa().forEach(this.eg,this);return w()};m.zc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Fb=function(a,b,c){return new Te(this,a,c)};function Ve(a,b){if(!a.L.has(b)){var c=new ve;a.L.set(b,c)}}m.eg=function(a){Ve(this,a.getName());a.Eb()&&(a.Ca().forEach(function(a){Ve(this,a.j())},this),Ve(this,Re(a)))};m.close=aa();m.subscribe=aa();m.Ec=aa();function We(a){Ue.call(this,a);this.md=null}t(We,Ue);We.prototype.subscribe=function(a){null===this.md&&(this.md=a)};We.prototype.Ec=function(a){null===this.md||this.md(a)};function Xe(a,b,c){this.ja=a;this.w='"'+b+'"';this.Gb=c}Xe.prototype.get=function(a){var b=this.Gb;return Ye(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Xe.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ye(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return w()};Xe.prototype.remove=function(a){Ye(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ze(a,b,c){Yb.call(this,b,c);this.i=a;this.L=y();this.Jd=[]}t(Ze,Yb);function $e(a){return a.replace(".","__d__").replace("#","__s__")}Ze.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Xe(this,$e(a),b),this.L.set(a,c));return c};function Ye(a,b,c,d){var e=x();a.Jd.push({Lg:b,Ag:c,transform:d,O:e});return e.ea}
Ze.prototype.sc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.O.resolve(k)}0<this.Jd.length?(a=k=this.Jd.shift(),b.executeSql(k.Lg,k.Ag,e,c)):this.O.resolve(d)}.bind(this);0==this.ud?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ea};function P(a,b,c){this.i=c;this.c=a;this.$b=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.ad=g("i");P.prototype.getRawDBInstance=P.prototype.ad;P.prototype.bd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.bd;function af(a){return new Ze(a.i,1,new ad(a.c,C()))}P.prototype.tc=function(a){var b=af(this);Ye(b,"DROP TABLE "+a,[]);return b.ka()};P.prototype.dropTable=P.prototype.tc;
P.prototype.ec=function(a){var b=af(this);Ye(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function bf(a,b,c){var d=af(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);Ye(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
P.prototype.qc=function(a,b,c){var d=Ge(c);return bf(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.qc;P.prototype.uc=function(a,b){return bf(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.uc;P.prototype.Jc=function(a,b,c){return bf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Jc;P.prototype.yb=function(a){var b={},c;for(c in a)b[c]=Ge(a[c]);return Vb(b)};
P.prototype.createRow=P.prototype.yb;P.prototype.Bc=g("$b");P.prototype.getVersion=P.prototype.Bc;function cf(a){Ye(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=af(this);cf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.ea};P.prototype.dump=P.prototype.dump;function df(a,b,c){this.c=a;this.g=b;this.Kg=c||1}m=df.prototype;m.Da=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a){var d=window.openDatabase(this.g.name(),"",this.g.name(),this.Kg);if(null!=d)this.i=d,ef(this,b).then(a,function(a){if(a instanceof E)throw a;throw new E(354,a.message);});else throw new E(354);},this)};
function ef(a,b){var c=x(),d=new Ze(a.i,1,new ad(a.c,C()));Ye(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ye(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ce(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new E(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ea}m.Fb=function(a,b,c){if(null!=this.i)return new Ze(this.i,a,c);throw new E(2);};m.close=aa();
m.zc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Ec=function(){throw new E(355);};m.ce=function(a,b){var c=x();ff(this).then(function(){a(new P(this.c,b,this.i)).then(function(){return this.ke()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ea};
function ff(a){var b=a.g.pa(),c=new Ze(a.i,1,new ad(a.c,C())),d=new Ze(a.i,1,new ad(a.c,C()));Ye(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);cf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ye(d,"DROP TABLE "+('"'+a+'"'),[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Eb&&(a.Ca().forEach(function(a){a=$e(a.j());h.push(a);k.push(a)}),a=$e(Re(a)),h.push(a),n.push(a))});
h.forEach(function(a){Ye(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.ke=function(){var a=0,b=x(),c=function(b){var c=new Ze(this.i,0);Ye(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.pa().map(function(a){return c(a.getName())});db(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ea};function gf(a){this.Z=y();this.Zb=y();a.pa().forEach(function(a){this.Zb.set(a.getName(),C())},this)}m=gf.prototype;m.set=function(a,b){this.Z.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Wb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.Z.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.Z.get(a)||null};function hf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Ra=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.Z.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.Z.get(b),d.push(c));return d};m.remove=function(a,b){this.Z.delete(b);this.Zb.get(a).delete(b)};m.Vg=function(a){return null!=a?this.Zb.get(a).size:this.Z.size};m.clear=function(){this.Z.clear();this.Zb.clear()};function jf(a,b,c){var d=0,e=a.length;for(c=c||kf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function kf(a,b){return a-b}function mf(a,b,c){c=jf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function nf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function of(){this.ia=0}of.prototype.add=function(a,b){this.ia+=b};of.prototype.remove=function(a,b){this.ia-=b};of.prototype.clear=function(){this.ia=0};function pf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function qf(a,b,c,d){this.w=a;this.Y=b;this.vf=c;this.ya=new of;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=rf(this,d);this.ta=d=sf(d)}else this.clear()}var tf=[];m=qf.prototype;m.getName=g("w");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.Cb(a,b)};m.set=function(a,b){this.ta=this.ta.Cb(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Wc=function(a){if(null==a)return this.aa().ia;if(a instanceof F){if(gd(a))return this.aa().ia;if(kd(a))return this.get(a.from).length}return this.Ra([a]).length};m.aa=g("ya");m.Qd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ya.ia-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Ra=function(a,b,c,d){var e=uf(this.ta).a[0];if(!q(e)||0==c)return tf;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return tf;if(!q(a)||1==a.length&&a[0]instanceof F&&gd(a[0]))return this.Qd(f,b,c,d);a=this.Y.rf(a);var h=Array(b?this.ya.ia:f),k={count:0,W:h.length,reverse:b,K:d},n=1<this.ib().Vd();a.forEach(function(a){for(var b=this.Y.qd(a),b=this.Y.Td(a)?e:b[0],b=this.ta.Yf(b),c=0;null!=b&&k.count<k.W;){if(n){for(var d=b,f=a,bc=k,
xb=h,Pc=d.s.ib(),de=-1,Ja=0;Ja<d.a.length;++Ja)if(Pc.Db(d.a[Ja],f)){de=Ja;break}if(-1!=de)for(Ja=de;Ja<d.a.length&&bc.count<bc.W;++Ja)Pc.Db(d.a[Ja],f)&&vf(d,bc,xb,Ja)}else b.Ra(a,k,h);0!=k.K||b.gd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?nf(h,b,c,d):h};m.clear=function(){this.ta=wf(this);this.ya.clear()};m.jb=function(a){return this.ta.jb(a)};m.min=function(){return this.Ib(this.Y.min.bind(this.Y))};m.max=function(){return this.Ib(this.Y.max.bind(this.Y))};
function xf(a,b,c){if(!a.Y.Kd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.vf?[b.A[c]]:b.A[c]]}m.Ib=function(a){var b;a:{b=uf(this.ta);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=xf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=yf(this.ta);d=c.a.length-1;do if(0>d)c=c.rb,d=0;else{var e=xf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ka=g("vf");m.ib=g("Y");
m.Na=function(a,b){return null!=a?0==this.Y.compare(a,b):!1};m.Ia=function(){for(var a=[],b=uf(this.ta);b;)a.push(new Sb(b.ra,[b.a,b.A])),b=b.xa;return a};function zf(a,b,c,d){a=new qf(b,a,c);d=Af(d,a);a.ta=d;return a}function Bf(a,b){this.ra=a;this.s=b;this.mb=0;this.xa=this.rb=this.D=null;this.a=[];this.A=[];this.h=[];this.Yf=1==b.ib().Vd()?this.Ke:this.Je}function wf(a){return new Bf(Tb++,a)}function Q(a){return 0==a.mb}m=Bf.prototype;m.next=g("xa");
function Cf(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.A.join("/"),f=b(a.rb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.D);a.xa&&(a=Cf(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Cf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function uf(a){return Q(a)?a:uf(a.h[0])}function yf(a){return Q(a)?a:yf(a.h[a.h.length-1])}
function Df(a,b){b&&(b.rb=a);a&&(a.xa=b)}function rf(a,b){for(var c=b.length,d=0,e=wf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.a=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=wf(e.s),Df(e,h),e=h)}return f}function Ef(a){var b=a[0],c=wf(b.s);c.mb=b.mb+1;c.h=a;for(b=0;b<a.length;++b)a[b].D=c,0<b&&c.a.push(a[b].a[0]);return c}
function sf(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Ef(c);else{var d=c.length,e=0,b=wf(a.s);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Ef(f);h.D=b;b.h.length&&(b.a.push(f[0].a[0]),Df(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Ff(this,a);if(Q(this)){var c=tf;this.s.Na(this.a[b],a)&&(c=c.concat(this.A[b]));return c}b=this.s.Na(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.jb=function(a){var b=Ff(this,a);return this.s.Na(this.a[b],a)?!0:Q(this)?!1:this.h[b].jb(a)};m.remove=function(a,b){Gf(this,a,-1,b);if(null===this.D){var c=this;1==this.h.length&&(c=this.h[0],c.D=null);return c}return this};function Hf(a){return Q(a)?a.a[0]:Hf(a.h[0])}function If(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Hf(a.h[b]))}
function Gf(a,b,c,d){var e=Ff(a,b),f=Q(a);if(!f){var h=a.s.Na(a.a[e],b)?e+1:e;if(Gf(a.h[h],b,h,d))If(a);else return!1}else if(!a.s.Na(a.a[e],b))return!1;if(a.a.length>e&&a.s.Na(a.a[e],b)){if(q(d)&&!a.s.Ka()&&f&&(h=a.A[e],d=jf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.aa().remove(b,1),a.A[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.Ka()?1:a.A[e].length,a.A.splice(e,1),a.s.aa().remove(b,f))}if(256>a.a.length&&null!==a.D){a:{b=null;if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.rb&&
256<a.rb.a.length)b=a.rb,d=a.rb.a.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=Q(a)?a.A:a.h;h=null;Q(a)?h=b.A:(h=b.h,h[e].D=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(If(b),If(a));b=!0}b||Jf(a,c)}return!0}
function Jf(a,b){var c,d,e;a.xa&&511>a.xa.a.length?(c=a.xa,e=d=0):a.rb&&(c=a.rb,d=c.a.length,e=Q(c)?c.A.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;Q(a)?d=a.A:(d=a.h,d.forEach(function(a){a.D=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.A:c.h,d);Df(a.rb,a.xa);Q(c)||If(c);-1!=b&&(a.D.a.splice(b,1),a.D.h.splice(b,1))}
m.Cb=function(a,b,c){var d=Ff(this,a);if(Q(this)){if(this.s.Na(this.a[d],a)){if(c)this.s.aa().remove(a,this.s.Ka()?1:this.A[d].length),this.A[d]=this.s.Ka()?b:[b];else{if(this.s.Ka())throw new E(201);if(!mf(this.A[d],b))throw new E(109);}this.s.aa().add(a,1);return this}this.a.splice(d,0,a);this.A.splice(d,0,this.s.Ka()?b:[b]);this.s.aa().add(a,1);512==this.a.length?(d=wf(this.s),a=wf(this.s),a.mb=1,a.a=[this.a[256]],a.h=[this,d],a.D=this.D,this.D=a,d.a=this.a.splice(256),d.A=this.A.splice(256),d.D=
a,Df(d,this.xa),Df(this,d),d=a):d=this;return d}d=this.s.Na(this.a[d],a)?d+1:d;a=this.h[d].Cb(a,b,c);Q(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].D=this,a.h[0].D=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Kf(this):this};function Kf(a){var b=wf(a.s),c=wf(a.s);b.D=a.D;b.mb=a.mb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.D=b;c.mb=a.mb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.D=c});a.D=b;Df(c,a.xa);Df(a,c);return b}
function Ff(a,b){for(var c=0,d=a.a.length,e=a.s.ib();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Ke=function(a){if(!Q(this)){var b=Ff(this,a);this.s.Na(this.a[b],a)&&b++;return this.h[b].Ke(a)}return this};m.Je=function(a){if(!Q(this)){var b=Ff(this,a);this.s.Na(this.a[b],a)&&(a.some(function(a){return a==G})||b++);return this.h[b].Je(a)}return this};
m.Ra=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.ib(),f=0,h=this.a.length-1,k=this.a,n=d(e.xb(k[f],a)),A=d(e.xb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},da=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.xb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.xb(k[h],a));return 0==n?da(b,h,n):-1==n?da(h+1,c,f):da(b+1,h,n)},wb=function(b,c){if(b>=c)return b;var f=d(e.xb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.xb(k[f],a));return 0==h?wb(f,c):1==h?wb(b,f-1):-1};0!=n&&(f=da(f+1,h,A));-1!=f&&(h=wb(f,h),-1!=h&&h>=f&&Lf(this,b,c,f,h+1))}};function vf(a,b,c,d){if(a.s.Ka())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Lf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)vf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.Ka()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--}else if(this.s.Ka())b[a.ne++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Af(a,b){for(var c=b.aa(),d=a.map(function(a){var d=new Bf(a.id(),b);d.a=a.l[0];d.A=a.l[1];d.a.forEach(function(a,e){c.add(a,b.Ka()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)Df(d[e],d[e+1]);return 1<d.length?sf(d[0]):d[0]}m.gd=function(a){return this.s.ib().gd(this.a[0],a)};function Mf(a){this.Vc=0==a?Nf:Of;this.Yd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.de=0==a?Pf:Qf}function Of(a,b){return a>b?1:a<b?-1:0}function Nf(a,b){return Of(b,a)}function Qf(a,b){return ld(a,b)}function Pf(a,b){return ld(b,a)}m=Mf.prototype;m.xb=function(a,b){var c=this.Yd(b),d=[c.from==G,c.m==G];if(!d[0]){var e=this.Vc(a,c.from);d[0]=c.fa?1==e:-1!=e}d[1]||(e=this.Vc(a,c.m),d[1]=c.oa?-1==e:1!=e);return d};m.compare=function(a,b){return this.Vc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Db=function(a,b){var c=this.xb(a,b);return c[0]&&c[1]};m.gd=function(a,b){return this.Db(a,b)};m.rf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.de(a,c)}.bind(this))};m.Td=function(a){return this.Yd(a).from==G};m.qd=function(a){a=this.Yd(a);return[a.from,a.m]};m.Kd=function(a){return null!==a};m.Vd=l(1);
m.toString=function(){return this.compare==Nf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Rf(a){Mf.call(this,a);this.Vc=0==a?Sf:Uf}t(Rf,Mf);function Uf(a,b){return null===a?null===b?0:-1:null===b?1:Of(a,b)}function Sf(a,b){return Uf(b,a)}Rf.prototype.Db=function(a,b){return null===a?gd(b):Rf.eb.Db.call(this,a,b)};Rf.prototype.Ib=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Rf.prototype.min=function(a,b){var c=this.Ib(a,b);null===c&&(c=Rf.eb.min.call(this,a,b));return c};
Rf.prototype.max=function(a,b){var c=this.Ib(a,b);null===c&&(c=Rf.eb.max.call(this,a,b));return c};function Vf(a){this.qa=a.map(function(a){return new Mf(a)})}function Wf(a,b,c,d){for(var e=0,f=0;f<a.qa.length&&0==e;++f)e=d(a.qa[f],b[f],c[f]);return e}m=Vf.prototype;m.compare=function(a,b){return Wf(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return Wf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Wf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.xb=function(a,b){for(var c=[!0,!0],d=0;d<this.qa.length&&(c[0]||c[1]);++d){var e=this.qa[d].xb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Db=function(a,b){for(var c=!0,d=0;d<this.qa.length&&c;++d)c=this.qa[d].Db(a[d],b[d]);return c};m.gd=function(a,b){return this.qa[0].Db(a[0],b[0])};
m.rf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.qa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.qa[b].de(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.qa.length&&0==c;++h)c=this.qa[h].de(a[h],b[h]);return c}.bind(this))};m.Td=function(a){return this.qa[0].Td(a[0])};
m.qd=function(a){var b=a.map(function(a,b){return this.qa[b].qd(a)[0]},this);a=a.map(function(a,b){return this.qa[b].qd(a)[1]},this);return[b,a]};m.Kd=function(a){return a.every(function(a,c){return this.qa[c].Kd(a)},this)};m.Vd=function(){return this.qa.length};function Xf(a){Vf.call(this,a);this.qa=a.map(function(a){return new Rf(a)})}t(Xf,Vf);function Yf(a){if(1==a.f.length)return new Mf(a.f[0].qb);var b=a.f.map(function(a){return a.qb});return a.f.some(function(a){return a.ba.ic()})?new Xf(b):new Vf(b)};function Zf(a){this.ga=a;this.ob=C();this.Mc=new of;this.ya=new of}m=Zf.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.ob.add(b),this.Mc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.ob.clear(),this.Mc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Mc.remove(a,1)):(this.ob.clear(),this.Mc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?D(this.ob):this.ga.get(a)};m.Wc=function(a){return this.ga.Wc(a)};
m.aa=function(){pf(this.ya,[this.ga.aa(),this.Mc]);return this.ya};m.Ra=function(a,b,c,d){b=this.ga.Ra(a,b,c,d);return null!=a?b:b.concat(D(this.ob))};m.clear=function(){this.ob.clear();this.ga.clear()};m.jb=function(a){return null===a?0!=this.ob.size:this.ga.jb(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Ia=function(){return[new Sb(-2,D(this.ob))].concat(this.ga.Ia())};m.ib=function(){return this.ga.ib()};
function $f(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].l,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Zf(c);d.forEach(function(a){f.ob.add(a)});return f}m.Ka=function(){return this.ga.Ka()};function ag(a){this.w=a;this.tb=C();this.Y=new Mf(1)}m=ag.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new E(103);this.tb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.tb.delete(a)};m.get=function(a){return this.jb(a)?[a]:[]};m.min=function(){return this.Ib(this.Y.min.bind(this.Y))};m.max=function(){return this.Ib(this.Y.max.bind(this.Y))};
m.Ib=function(a){if(0==this.tb.size)return null;var b=D(this.tb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Wc=function(){return this.tb.size};m.Ra=function(a,b,c,d){var e=a||[jd()];a=D(this.tb).filter(function(a){return e.some(function(b){return this.Y.Db(a,b)},this)},this);return nf(a,b,c,d)};m.clear=function(){this.tb.clear()};m.jb=function(a){return this.tb.has(a)};m.Ia=function(){return[new Sb(0,D(this.tb))]};m.ib=g("Y");
function bg(a,b){var c=new ag(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.Ka=l(!0);m.aa=function(){var a=new of;a.ia=this.tb.size;return a};function cg(a){this.Ma=a.b(gc);this.C=a.b(ic);this.U=a.b(hc)}cg.prototype.Da=function(a){var b=a.pa(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Eb()?dg(this,a):eg(this,a)).then(c)}.bind(this);return c()};function eg(a,b){var c=a.Ma.Fb(0,[b]),d=c.H(b.getName(),b.kb.bind(b),0).get([]).then(function(a){this.U.Wb(b.getName(),a);fg(this,b,a)}.bind(a));c.ka();return d}
function fg(a,b,c){var d=a.C.mc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})})}function dg(a,b){var c=a.Ma.Fb(0,[b]),d=c.H(b.getName(),b.kb,0).get([]).then(function(a){this.U.Wb(b.getName(),a)}.bind(a)),e=b.Ca().map(function(a){return gg(this,a,c)},a).concat(hg(a,b,c));c.ka();return db(e.concat(d))}
function gg(a,b,c){c=c.H(b.j(),Ub,1);var d=Yf(b);return c.get([]).then(function(a){if(0<a.length){if(ig(b)){var c=zf.bind(void 0,d,b.j(),b.Cc);a=$f(c,a)}else a=zf(d,b.j(),b.Cc,a);this.C.set(b.nc,a)}}.bind(a))}function hg(a,b,c){return c.H(Re(b),Ub,1).get([]).then(function(a){0<a.length&&(a=bg(Re(b),a),this.C.set(b.getName(),a))}.bind(a))};function jg(){this.X=y();this.mc=y()}jg.prototype.Da=function(a){a.pa().forEach(function(a){var c=[];this.mc.set(a.getName(),c);var d=Re(a);if(null===this.get(d)){var e=new ag(d);c.push(e);this.X.set(d,e)}a.Ca().forEach(function(a){var b;b=Yf(a);b=new qf(a.j(),b,a.Cc);b=ig(a)&&1==a.f.length?new Zf(b):b;c.push(b);this.X.set(a.j(),b)},this)},this);return w()};jg.prototype.get=function(a){return this.X.get(a)||null};
jg.prototype.set=function(a,b){var c=this.mc.get(a)||null;null===c&&(c=[],this.mc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.X.set(b.getName(),b)};function kg(a,b){var c=[],d=null,e=null;Sd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function lg(a){return mg(a,function(a){return null===a.h})}
function ng(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Pd(b,d,c+f)});return{parent:b,children:d}}function og(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function pg(a){var b=Od(a,0);ng(a);og(b,a);return b}
function qg(a,b,c){var d=Od(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;ng(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Qd(d,h);L(k,e);Pd(d,k,h)}});return d}function rg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Qd(e,a),Pd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function mg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function sg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Sd(a,function(a){for(var b=0;b<Nd(a);b++)d+="-";d+=c(a)});return d};function tg(a){Td.call(this);this.pb=a;this.Sa=!1}t(tg,Td);m=tg.prototype;m.Nb=function(){return kg(this,function(a){if(a instanceof tg){var b=new tg(a.pb);b.Sa=a.Sa;a=a.V();b.ra=a;return b}return a.Nb()})};m.lb=function(a){var b=a||[];Sd(this,function(a){a!=this&&a.lb(b)}.bind(this));a=C(b);return D(a)};m.o=function(a){var b=null!=a?a:C();Sd(this,function(a){a!=this&&a.o(b)}.bind(this));return b};m.rd=function(a){this.Sa!=a&&(this.Sa=a,this.pb="and"==this.pb?"or":"and",K(this).forEach(function(b){return b.rd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return ug(this,b)};function ug(a,b){return"and"==a.pb?ud(b):vd(b)}m.toString=function(){return"combined_pred_"+this.pb.toString()};m.qe=function(){if("or"==this.pb){var a=new nd;K(this).forEach(function(b){b=b.qe().Bb();a.add(b)});return a}return new nd};m.hd=function(){return"or"==this.pb?vg(this):!1};
function vg(a){var b=null;return K(a).every(function(a){if(!(a instanceof Vd&&a.hd()))return!1;null===b&&(b=a.G);return b.j()==a.G.j()})};function wg(a,b,c){Td.call(this);this.ha=a;this.na=b;this.B=c;this.Zd=null;a=Kd();this.vc=Ld(a,this.ha.I(),this.B);this.mg=a.Ue.get(this.ha.I())||null}t(wg,Td);m=wg.prototype;m.Nb=function(){var a=new wg(this.ha,this.na,this.B),b=this.V();a.ra=b;return a};m.lb=function(a){return null!=a?(a.push(this.ha),a.push(this.na),a):[this.ha,this.na]};m.o=function(a){a=null!=a?a:C();a.add(this.ha.H());a.add(this.na.H());return a};
m.reverse=function(){var a=this.B;switch(this.B){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new wg(this.na,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ha);a=I(a,this.na);return this.vc(b,a)},this);return new H(b,a.o())};m.toString=function(){return"join_pred("+this.ha.j()+" "+this.B+" "+this.na.j()+")"};
function xg(a,b,c){var d=null,e=null;-1!=b.o().indexOf(zd(a.ha.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.na;a.na=b;b=a.B;switch(a.B){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.B=b;a.vc=Ld(Kd(),a.ha.I(),a.B)}return[e,d]}return[d,e]}function yg(a){var b={};a.lb().forEach(function(a){b[a.getName()]=null});return b}
function zg(a,b,c){null===a.Zd&&(a.Zd=yg(a.na.H()));var d=new xd(new Sb(-1,a.Zd),!1);return Bd(b,c,d,[zd(a.na.H())])}
function Ag(a,b,c,d){var e=[b,c];d||(e=xg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.na;d&&(e=c,f=b,h=a.na,k=a.ha);var n=new Ic,A=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=e.o(),da=f.o();f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Bd(a,da,b,O);A.push(b)}):d&&A.push(zg(this,a,da))}.bind(a));a=b.o().concat(c.o());return new H(A,a)}
function Bg(a,b,c,d,e){function f(a,b){var c=new xd(b,1<O.length),c=Bd(a,da,c,O);A.push(c)}var h=d.bg.H(),k=b,n=c;-1!=b.o().indexOf(zd(h))&&(k=c,n=b);var A=[],O=n.o(),da=k.o();k.entries.forEach(function(a){var b=this.mg(I(a,d.tg)),b=d.index.get(b);0!=b.length&&(d.index.Ka()?f(a,e.get(b[0])):hf(e,b).forEach(f.bind(null,a)))},a);a=k.o().concat(n.o());return new H(A,a)};function Cg(a,b,c){return null===b?new Vd(a,b,c):q(b.j)?new wg(a,b,c):new Vd(a,b,c)};var Dg={};r("lf.schema.DataStoreType",Dg);Dg.INDEXED_DB=0;Dg.MEMORY=1;Dg.LOCAL_STORAGE=2;Dg.FIREBASE=3;Dg.WEB_SQL=4;Dg.OBSERVABLE_STORE=5;function Eg(a,b,c,d){this.nc=a;this.name=b;this.Cc=c;this.f=d}Eg.prototype.j=function(){return this.nc+"."+this.name};function ig(a){return a.f.some(function(a){return a.ba.ic()})}function R(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.od=d;this.gb=null}r("lf.schema.Table",R);R.prototype.getName=g("w");R.prototype.getName=R.prototype.getName;R.prototype.Xa=g("gb");
function zd(a){return a.gb||a.w}R.prototype.rc=function(a){var b=new this.constructor(this.w);b.gb=a;b.Fg=this.Fg;return b};R.prototype.as=R.prototype.rc;R.prototype.createRow=R.prototype.yb;R.prototype.deserializeRow=R.prototype.kb;R.prototype.Ca=g("sa");R.prototype.getIndices=R.prototype.Ca;R.prototype.lb=g("J");R.prototype.getColumns=R.prototype.lb;R.prototype.getConstraint=R.prototype.Hb;R.prototype.Eb=g("od");R.prototype.persistentIndex=R.prototype.Eb;function Re(a){return a.w+".#"};function S(a,b){this.child=a;this.Mb=b;this.gb=null}m=S.prototype;m.getName=function(){return this.Mb+"("+this.child.getName()+")"};m.j=function(){return this.Mb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.I=function(){return this.child.I()};m.Xa=g("gb");m.Ca=function(){return[]};m.Ba=l(null);m.ic=l(!1);m.rc=function(a){this.gb=a;return this};S.prototype.as=S.prototype.rc;
function Fg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Gg(a){this.gb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=Gg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("S");m.I=l(4);m.Xa=g("gb");m.Ca=function(){return[]};m.Ba=l(null);m.ic=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Hg(a){return new S(a||new Gg,"COUNT")}r("lf.fn.count",Hg);function Ig(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Ig);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){J.call(this);this.Tf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Tf){case 1:return Jg(this,a,b);case 0:return Kg(this,a,b);default:return Lg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Nc=function(){return this.toString()};function Lg(a,b,c){return new v(function(a){a(this.ca([],b,c))}.bind(a))}function Jg(a,b,c){return Od(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Kg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Mg(a){T.call(this,0,1);this.ye=a}t(Mg,T);Mg.prototype.toString=function(){return"aggregation("+this.ye.map(function(a){return a.j()}).toString()+")"};Mg.prototype.ca=function(a){a.forEach(function(a){Ng(new Og(a,this.ye))},this);return a};function Og(a,b){this.La=a;this.J=b}
function Ng(a){a.J.forEach(function(a){a=Fg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Fg(d).slice(-1)[0],f=d.child instanceof S?rd(this.La,d.child):this.La;if(null!==f.Wa&&f.Wa.has(d.j()))break;f=Pg(d.Mb,f,e);e=this.La;null===e.Wa&&(e.Wa=y());e.Wa.set(d.j(),f)}},a)}
function Pg(a,b,c){var d=null;switch(a){case "MIN":d=Qg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Qg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Rg(b,c);break;case "COUNT":d=Sg(b,c);break;case "SUM":d=Tg(b,c);break;case "AVG":a=Sg(b,c);0<a&&(d=Tg(b,c)/a);break;case "GEOMEAN":d=Ug(b,c);break;default:d=Vg(b,c)}return d}function Qg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Sg(a,b){return b instanceof Gg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function Tg(a,b){return Qg(a,b,function(a,b){return b+a})}function Vg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function Ug(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Rg(a,b){var c=y();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new H(z(c),a.o())};function Wg(a,b){this.Ga=a;this.$=b}Wg.prototype.Ya=g("Ga");Wg.prototype.da=g("$");function Xg(){J.call(this)}t(Xg,J);function Yg(a,b){J.call(this);this.table=a;this.values=b}t(Yg,Xg);function Zg(a,b){Yg.call(this,a,b)}t(Zg,Yg);function $g(a){J.call(this);this.table=a}t($g,Xg);$g.prototype.toString=function(){return"delete("+this.table.getName()+")"};function ah(a,b){J.call(this);this.table=a;this.se=b}t(ah,Xg);
ah.prototype.toString=function(){var a=[];this.se&&(a=this.se.map(function(a){return a.G.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function bh(a){J.call(this);this.N=a}t(bh,Xg);bh.prototype.toString=function(){return"select("+this.N.toString()+")"};function ch(a){J.call(this);this.table=a}t(ch,Xg);ch.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Xa()||(a+=" as "+this.table.Xa());return a+")"};
function dh(){J.call(this)}t(dh,Xg);dh.prototype.toString=l("cross_product");function eh(a,b){J.call(this);this.f=a;this.Pb=b}t(eh,Xg);eh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function fh(a){J.call(this);this.M=a}t(fh,Xg);fh.prototype.toString=function(){return"order_by("+fe(this.M)+")"};function gh(a){J.call(this);this.f=a}t(gh,Xg);
gh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function hh(a){J.call(this);this.f=a}t(hh,Xg);hh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function ih(a){J.call(this);this.W=a}t(ih,Xg);ih.prototype.toString=function(){return"limit("+this.W+")"};function jh(a){J.call(this);this.K=a}t(jh,Xg);jh.prototype.toString=function(){return"skip("+this.K+")"};function kh(a,b){J.call(this);this.N=a;this.Rb=b}t(kh,Xg);
kh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.N.toString()+")"};function lh(){};function mh(){}t(mh,lh);mh.prototype.cb=function(a){this.F=a;this.vb(this.F);return this.F};mh.prototype.vb=function(a){if(a instanceof bh){var b=nh(this,a.N),b=oh(this,b);rg(a,a,b[0],b[1]);a==this.F&&(this.F=b[0]);a=b[0]}K(a).forEach(function(a){this.vb(a)},this)};function nh(a,b){if(0==K(b).length||"and"!=b.pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return nh(this,a)},a);return Ea(c)}
function oh(a,b){var c=null,d=null;b.map(function(a,b){var h=new bh(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function ph(){}t(ph,lh);ph.prototype.cb=function(a,b){if(3>b.from.length)return a;this.F=a;this.vb(this.F);return this.F};ph.prototype.vb=function(a){if(a instanceof dh)for(;2<K(a).length;){for(var b=new dh,c=0;2>c;c++){var d=Qd(a,0);L(b,d)}Pd(a,b,0)}K(a).forEach(function(a){this.vb(a)},this)};function qh(){T.call(this,0,0)}t(qh,T);qh.prototype.toString=l("cross_product");qh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.o(),e=c.o(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Bd(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.o().concat(c.o());return[new H(a,b)]};function rh(a,b){ie.call(this,a,b);this.Ha=a.b(kc);this.Jb=a.b(lc)}t(rh,ie);rh.prototype.getPriority=l(2);rh.prototype.be=function(a){0==this.I()?sh(this,a):this.Kc()};function sh(a,b){a.pd.forEach(function(a,d){a instanceof ee&&le(this.Jb,a,b[d])},a)}rh.prototype.Kc=function(){var a=ne(this.Jb,this.da());0!=a.length&&(a=new ke(this.global,a),oe(this.Ha,a))};function th(a){Zd.call(this,a)}t(th,Zd);th.prototype.da=function(){var a=C();a.add(this.from);uh(this,this.from.getName(),a);return a};function uh(a,b,c){var d=vh(a.ba.info(),b,1);vh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){uh(this,a.getName(),c)},a)}th.prototype.clone=function(){var a=new th(this.ba);be(a,this);a.from=this.from;return a};th.prototype.bind=function(a){th.eb.bind.call(this,a);ce(this,a);return this};function wh(a){Zd.call(this,a)}t(wh,Zd);wh.prototype.da=function(){var a=C();a.add(this.Ja);var b=this.ba.info();xh(this.Ja.getName(),b.bf).forEach(a.add.bind(a));this.ac&&vh(b,this.Ja.getName()).forEach(a.add.bind(a));return a};wh.prototype.clone=function(){var a=new wh(this.ba);be(a,this);a.Ja=this.Ja;this.values&&(a.values=this.values instanceof Cd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
wh.prototype.bind=function(a){wh.eb.bind.call(this,a);this.bc&&(this.values=this.bc instanceof Cd?a[this.bc.Ba()]:this.bc.map(function(b){return b instanceof Cd?a[b.Ba()]:b}));return this};function yh(a){Zd.call(this,a)}t(yh,Zd);yh.prototype.da=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.G.j()}),c=this.ba.info();zh(c,b).forEach(a.add.bind(a));Ah(c,b).forEach(a.add.bind(a));return a};yh.prototype.clone=function(){var a=new yh(this.ba);be(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};yh.prototype.bind=function(a){yh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Rc&&(b.value=a[b.Rc])});ce(this,a);return this};function Bh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Wb(b)+"'";default:return"'"+b.toString()+"'"}}function Ch(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.Ja.lb(),c=c+(" INTO "+a.Ja.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Bh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function Dh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Eh(a,b,c,d){return a instanceof Cd?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Bh(c,a)}).join(", ")+")":"between"==b?Bh(c,a[0])+" AND "+Bh(c,a[1]):Bh(c,a).toString()}
function Fh(a,b){return K(a).map(function(a){return"("+Gh(a,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function Hh(a){return[a.ha.j(),Dh(a.B),a.na.j()].join(" ")}function Gh(a,b){if(a instanceof Vd){var c=a.G.j(),d=Dh(a.B),e=Eh(a.value,a.B,a.G.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof tg)return Fh(a,b);if(a instanceof wg)return Hh(a);throw new E(357,typeof a);}
function Ih(a,b){var c=Gh(a,b);return c?" WHERE "+c:""}function Jh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.G.j()+" = ";return-1!=a.Rc?b+"?"+a.Rc.toString():b+Bh(a.G.I(),a.value).toString()}).join(", ");a.u&&(c+=Ih(a.u,b));return c+";"}
function Kh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Xa()?a.j()+" AS "+a.Xa():a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.$a&&0!=a.$a.size?c+=Lh(a,b):(c+=a.from.map(Mh).join(", "),a.u&&(c+=Ih(a.u,b)));if(a.M)var d=a.M.map(function(a){return a.G.j()+(0==a.qb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Mh(a){return zd(a)!=a.getName()?a.getName()+" AS "+zd(a):a.getName()}function Lh(a,b){for(var c=mg(a.u,function(a){return a instanceof wg}),d=c.map(Hh),e=Mh(a.from[0]),f=1;f<a.from.length;f++)var h=Mh(a.from[f]),e=a.$a.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Od(a.u,0);c instanceof wg||(e+=" WHERE "+Gh(c,b));return e}
function Nh(a,b){var c=b||!1,d=a.query.clone();if(d instanceof wh)return Ch(d,c);if(d instanceof th){var e="DELETE FROM "+d.from.getName();d.u&&(e+=Ih(d.u,c));return e+";"}if(d instanceof yh)return Jh(d,c);if(d instanceof ee)return Kh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.Eg=a.b(jc);this.Ha=a.b(kc);this.query=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.hb()}catch(a){return ab(a)}return new v(function(a,b){var c=new rh(this.global,[this.Ac()]);oe(this.Ha,c).then(function(b){a(pd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Vf=function(){var a=function(a){return a.Nc(this.query)+"\n"}.bind(this);return sg(Oh(this).Ya(),a)};U.prototype.explain=U.prototype.Vf;
U.prototype.bind=function(a){this.query.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Ng=function(a){return Nh(this,a)};U.prototype.toSql=U.prototype.Ng;U.prototype.hb=aa();function Oh(a){if(null==a.cf){var b;b=a.Eg;var c=a.query,d=b.pg.create(c);b=b.Bg.create(d,c);a.cf=b}return a.cf}U.prototype.Ac=function(){return{context:this.query.clone(),ee:Oh(this)}};function Ph(a){U.call(this,a,new th(a.b(mc)))}t(Ph,U);r("lf.query.DeleteBuilder",Ph);Ph.prototype.from=function(a){if(null!=this.query.from)throw new E(515);this.query.from=a;return this};Ph.prototype.from=Ph.prototype.from;Ph.prototype.u=function(a){this.Bd();this.query.u=a;return this};Ph.prototype.where=Ph.prototype.u;Ph.prototype.Bd=function(){if(null==this.query.from)throw new E(548);if(null!=this.query.u)throw new E(516);};
Ph.prototype.hb=function(){Ph.eb.hb.call(this);if(null==this.query.from)throw new E(517);};function Qh(a,b){U.call(this,a,new wh(a.b(mc)));this.query.ac=b||!1}t(Qh,U);r("lf.query.InsertBuilder",Qh);Qh.prototype.hb=function(){Qh.eb.hb.call(this);var a=this.query;if(null==a.Ja||null==a.values)throw new E(518);if(a.ac&&null===a.Ja.Hb().$c())throw new E(519);};Qh.prototype.Ja=function(a){if(null!=this.query.Ja)throw new E(520);this.query.Ja=a;return this};Qh.prototype.into=Qh.prototype.Ja;
Qh.prototype.values=function(a){if(null!=this.query.values)throw new E(521);a instanceof Cd||a.some(function(a){return a instanceof Cd})?this.query.bc=a:this.query.values=a;return this};Qh.prototype.values=Qh.prototype.values;function Rh(a){return Sh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Rh);r("lf.op.or",function(a){return Sh("or",Array.prototype.slice.call(arguments))});function Sh(a,b){var c=new tg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.rd(!0);return a});function V(a,b){U.call(this,a,new ee(a.b(mc)));this.Ie=this.wd=!1;this.query.f=b;Th(this);Uh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.hb=function(){V.eb.hb.call(this);var a=this.query;if(null==a.from)throw new E(522);if(q(a.Sb)&&!q(a.W)||q(a.Yb)&&!q(a.K))throw new E(523);null!=this.query.la?Vh(this):Wh(this)};function Th(a){var b=a.query.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Mb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new E(524);}
function Vh(a){var b=a.query.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.j()}),c=!1;if(0==a.query.la.length||0==a.query.f.length)c=!0;else{var d=a.query.la.map(function(a){return a.j()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.query.la.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}
function Wh(a){var b=a.query.f.some(function(a){return a instanceof S},a);a=a.query.f.some(function(a){return!(a instanceof S)},a)||0==a.query.f.length;if(b&&a)throw new E(526);}function Uh(a){a.query.f.forEach(function(a){if(a instanceof S&&!Xh(a.Mb,a.I()))throw new E(527,a.j());},a)}function Yh(a,b){if(null==a.query.from)throw new E(b);}
V.prototype.from=function(a){if(this.Ie)throw new E(515);this.Ie=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.from;V.prototype.u=function(a){Yh(this,548);if(this.wd)throw new E(516);this.wd=!0;Zh(this,a);return this};V.prototype.where=V.prototype.u;function Zh(a,b){if(null!=a.query.u){var c=Rh(b,a.query.u);a.query.u=c}else a.query.u=b}
V.prototype.fg=function(a,b){Yh(this,542);if(this.wd)throw new E(547);this.query.from.push(a);Zh(this,b);return this};V.prototype.innerJoin=V.prototype.fg;V.prototype.ng=function(a,b){Yh(this,542);if(!(b instanceof wg))throw new E(541);if(this.wd)throw new E(547);this.query.from.push(a);null==this.query.$a&&(this.query.$a=C());var c=b;zd(a)!=zd(b.na.H())&&(c=b.reverse());this.query.$a.add(c.V());Zh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.ng;
V.prototype.W=function(a){if(null!=(this.query.W||this.query.Sb))throw new E(528);if(a instanceof Cd)this.query.Sb=a;else{if(0>a)throw new E(531);this.query.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.K=function(a){if(null!=(this.query.K||this.query.Yb))throw new E(529);if(a instanceof Cd)this.query.Yb=a;else{if(0>a)throw new E(531);this.query.K=a}return this};V.prototype.skip=V.prototype.K;
V.prototype.M=function(a,b){Yh(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({G:a,qb:null!=b?b:1});return this};V.prototype.orderBy=V.prototype.M;V.prototype.la=function(a){Yh(this,549);if(null!=this.query.la)throw new E(530);null==this.query.la&&(this.query.la=[]);this.query.la.push.apply(this.query.la,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.la;
function Xh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}V.prototype.clone=function(){var a=new V(this.global,this.query.f);a.query=this.query.clone();a.query.Uc=null;return a};V.prototype.clone=V.prototype.clone;function $h(a,b){U.call(this,a,new yh(a.b(mc)));this.query.table=b}t($h,U);r("lf.query.UpdateBuilder",$h);$h.prototype.set=function(a,b){var c={Rc:b instanceof Cd?b.Ba():-1,G:a,value:b};null!=this.query.set?this.query.set.push(c):this.query.set=[c];return this};$h.prototype.set=$h.prototype.set;$h.prototype.u=function(a){this.Bd();this.query.u=a;return this};$h.prototype.where=$h.prototype.u;$h.prototype.Bd=function(){if(null!=this.query.u)throw new E(516);};
$h.prototype.hb=function(){$h.eb.hb.call(this);if(null==this.query.set)throw new E(532);if(this.query.set.some(function(a){return a.value instanceof Cd}))throw new E(501);};function ai(a){this.query=a;this.Ga=null}ai.prototype.hc=function(){null===this.Ga&&(this.Ga=this.Yc());return this.Ga};function bi(a){ai.call(this,a)}t(bi,ai);bi.prototype.Yc=function(){return this.query.ac?new Zg(this.query.Ja,this.query.values):new Yg(this.query.Ja,this.query.values)};function ci(a){ai.call(this,a)}t(ci,ai);
ci.prototype.Yc=function(){var a=new ah(this.query.table,this.query.set),b=null!=this.query.u?new bh(this.query.u.Nb()):null,c=new ch(this.query.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function di(a,b,c){this.Ga=a;this.fe=b;this.Vb=c}di.prototype.hc=function(){this.Vb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function ei(a,b){ai.call(this,a);this.Vb=b}t(ei,ai);ei.prototype.Yc=function(){var a=new $g(this.query.from),b=null!=this.query.u?new bh(this.query.u.Nb()):null,c=new ch(this.query.from);null===b?L(a,c):(L(b,c),L(a,b));return(new di(a,this.query,this.Vb)).hc()};function fi(){}t(fi,lh);fi.prototype.cb=function(a,b){if(2>b.from.length)return a;this.F=a;this.vb(this.F,b);return this.F};fi.prototype.vb=function(a,b){if(a instanceof bh&&a.N instanceof wg){var c=a.N.V(),d=Od(a,0);d instanceof dh&&(c=null!=b.$a&&b.$a.has(c),c=new kh(a.N,c),rg(a,d,c,c),a==this.F&&(this.F=c),a=c)}K(a).forEach(function(a){this.vb(a,b)},this)};function gi(){this.Qc=C()}t(gi,lh);gi.prototype.cb=function(a,b){if(!q(b.u))return a;this.Qc.clear();this.F=a;this.vb(this.F,b);this.Qc.clear();return this.F};gi.prototype.vb=function(a,b){var c=function(a){K(a).forEach(d)}.bind(this),d=function(a){if(!this.Qc.has(a)){if(a instanceof bh){var f=a.N.o(),h=function(a){return hi(this,a,f)}.bind(this),h=ii(this,b,a,h);this.Qc.add(a);h!=a&&(fa(h.getParent())&&(this.F=h),d(h))}c(a)}}.bind(this);d(a)};
function ii(a,b,c,d){var e=c;if(ji(b,c))e=pg(c),ii(a,b,c,d);else if(ki(c)){var f=[],e=qg(c,d,function(a){a=new bh(a.N);f.push(a);return a});f.forEach(function(a){ii(this,b,a,d)},a)}return e}function hi(a,b,c){var d=C();lg(b).forEach(function(a){d.add(a.table)},a);b instanceof ch&&d.add(b.table);return nc(d,c)}function ki(a){a=Od(a,0);return a instanceof dh||a instanceof kh}
function ji(a,b){var c=Od(b,0);if(!(c instanceof bh))return!1;if(null==a.$a)return!0;var d=b.N instanceof wg,c=a.$a.has(c.N.V());return d||!c};function li(a,b){ai.call(this,a);this.Vb=b;this.gf=this.Ye=this.qf=this.af=this.ze=this.Ne=this.pf=this.Fe=this.sf=null}t(li,ai);
li.prototype.Yc=function(){mi(this);2<=this.query.from.length&&(this.Fe=new dh);this.pf=null!=this.query.u?new bh(this.query.u.Nb()):null;this.query.M&&(this.af=new fh(this.query.M));null!=this.query.K&&0<this.query.K&&(this.qf=new jh(this.query.K));null!=this.query.W&&(this.Ye=new ih(this.query.W));null!=this.query.la&&(this.Ne=new hh(this.query.la));ni(this);this.gf=new eh(this.query.f||[],this.query.la||null);var a=oi(this);return(new di(a,this.query,this.Vb)).hc()};
function oi(a){for(var b=[a.Ye,a.qf,a.gf,a.af,a.ze,a.Ne,a.pf,a.Fe],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.sf.forEach(function(a){L(b[c],a)});return d}function mi(a){a.sf=a.query.from.map(function(a){return new ch(a)},a)}function ni(a){var b=a.query.f.filter(function(a){return a instanceof S});null!=a.query.M&&a.query.M.forEach(function(a){a.G instanceof S&&b.push(a.G)});0<b.length&&(a.ze=new gh(b))};function pi(){this.le=[new mh,new ph,new gi,new fi];this.Ld=[new mh]}pi.prototype.create=function(a){var b=null;if(a instanceof wh)b=new bi(a);else if(a instanceof th)b=new ei(a,this.Ld);else if(a instanceof ee)b=new li(a,this.le);else if(a instanceof yh)b=new ci(a);else throw new E(513);b=b.hc();return new Wg(b,a.da())};function qi(a){T.call(this,0,1);this.S=a}t(qi,T);qi.prototype.toString=function(){return"delete("+this.S.getName()+")"};qi.prototype.ca=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.S,c);return[td()]};function ri(a,b){T.call(this,0,-1);this.table=b;this.C=a.b(ic)}t(ri,T);ri.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};ri.prototype.ca=function(){var a=this.C.get(Re(this.table)),b=new H([],[this.table.getName()]),c=Hg(),a=a.aa().ia;null===b.Wa&&(b.Wa=y());b.Wa.set(c.j(),a);return[b]};function si(a,b){T.call(this,0,-1);this.U=a.b(hc);this.C=a.b(ic);this.table=b}t(si,T);si.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Xa()||(a+=" as "+this.table.Xa());return a+")"};si.prototype.ca=function(){var a=this.C.get(Re(this.table)).Ra();return[wd(hf(this.U,a),[zd(this.table)])]};function ti(a){this.c=a}t(ti,lh);ti.prototype.cb=function(a,b){this.F=a;if(!this.Dd(b))return a;var c=mg(a,function(a){return a instanceof si})[0],d=new ri(this.c,c.table);rg(c,c,d,d);return this.F};ti.prototype.Dd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.la?(a=a.f[0],a instanceof S&&"COUNT"==a.Mb&&a.child instanceof Gg):!1};function ui(a){T.call(this,0,1);this.Me=a}t(ui,T);ui.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.j()}).toString()+")"};ui.prototype.ca=function(a){return vi(this,a[0])};function vi(a,b){var c=new Ic,d=function(a){return this.Me.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),b.o())},a)};function wi(a,b,c){T.call(this,0,0);this.C=a.b(ic);this.U=a.b(hc);this.N=b;this.Rb=c;this.zd="eq"==this.N.B?0:2;this.Pe=null}t(wi,T);var xi=["hash","index_nested_loop","nested_loop"];wi.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+xi[this.zd]+", "+this.N.toString()+")"};
wi.prototype.ca=function(a){switch(this.zd){case 0:return[Ag(this.N,a[0],a[1],this.Rb)];case 1:return[Bg(this.N,a[0],a[1],this.Pe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=xg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.o(),h=a.o(),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var da=0;da<k;da++){var wb=!1,Tf=I(c.entries[da],b.ha);if(null!==Tf)for(var bc=Math.min(O+1<<8,n),xb=O<<8;xb<bc;xb++)if(b.vc(Tf,I(a.entries[xb],b.na))){var wb=!0,Pc=Bd(c.entries[da],
f,a.entries[xb],h);e.push(Pc)}d&&!wb&&e.push(zg(b,c.entries[da],f))}O++}b=c.o().concat(a.o());return[new H(e,b)]}};function yi(a,b){a.zd=1;var c=a.C.get(b.Ba().j());a.Pe={bg:b,tg:b==a.N.ha?a.N.na:a.N.ha,index:c}};function zi(a){T.call(this,0,-1);this.hf=a}t(zi,T);zi.prototype.toString=function(){return"no_op_step("+this.hf[0].o().join(",")+")"};zi.prototype.ca=g("hf");function Ai(){}t(Ai,lh);Ai.prototype.cb=function(a,b){this.F=a;if(!this.Dd(b))return a;mg(a,function(a){return a instanceof wi}).forEach(this.Dg,this);return this.F};Ai.prototype.Dd=function(a){return 1<a.from.length};
Ai.prototype.Dg=function(a){if("eq"==a.N.B&&!a.Rb){var b=function(b){if(!(b instanceof si))return null;b=zd(b.table)==zd(a.N.na.H())?a.N.na:a.N.ha;return fa(b.Ba())?null:b},c=b(Od(a,0)),b=b(Od(a,1));if(null!==c||null!==b){b=null===b?c:b;yi(a,b);var d=new H([],[zd(b.H())]);Rd(a,new zi([d]),b==c?0:1)}}};function Bi(a){a=a.map(function(a){return a.Bb()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Ci(a){this.Qb=a}Ci.prototype.Zc=function(){return 1==this.Qb.f.length?[jd()]:[this.Qb.f.map(function(){return jd()})]};function Di(a,b){this.Qb=a;this.Fa=b;this.Hd=this.We=null}
function Ei(a,b){var c=y();a.Fa.keys().forEach(function(a){var e=this.Fa.get(a).map(function(a){return $d(b,a)},this),f=new nd([jd()]);e.forEach(function(a){f=od(f,a.qe())});c.set(a,f)},a);return c}Di.prototype.Zc=function(a){if(this.We==a)return this.Hd;for(var b=Ei(this,a),c=this.Qb.f.length-1;0<=c;c--){var d=this.Qb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new nd([jd()]))}this.Hd=1==this.Qb.f.length?z(b)[0].Bb():Bi(Fi(this,b));this.We=a;return this.Hd};
function Fi(a,b){var c=y(),d=0;a.Qb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Rb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Gi(a,b){this.td=b;this.C=a.b(ic)}function Hi(a){a=a.C.get(Re(a.td));return Math.floor(.02*a.aa().ia)}function Ii(a,b,c){c=c.filter(a.ig,a);if(0==c.length)return null;a=Ji(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ki(c,b);return h<d?(d=h,c):a},null)}
function Ji(a,b){return a.td.Ca().map(function(a){a=new Li(this.C,a);Mi(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,e=!0,f=0;f<a.Za.f.length;f++){var h=a.Fa.has(a.Za.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Gi.prototype.ig=function(a){return a instanceof Vd?!a.hd()||a.G.H()!=this.td||"in"==a.B&&a.value.length>Hi(this)?!1:!0:a instanceof tg?a.hd()&&Od(a,0).G.H()==this.td?K(a).length<=Hi(this):!1:!1};
function Li(a,b){this.C=a;this.Za=b;this.cg=C(this.Za.f.map(function(a){return a.ba.getName()}));this.Wd=this.Fa=null}function Ni(a){null===a.Wd&&(a.Wd=new Di(a.Za,a.Fa));return a.Wd}function Mi(a,b){b.forEach(function(a){var b=a.lb()[0].getName();this.cg.has(b)&&(null===this.Fa&&(this.Fa=new Ic),this.Fa.set(b,a.V()))},a)}function Ki(a,b){var c=Ni(a).Zc(b),d=a.C.get(a.Za.j());return c.reduce(function(a,b){return a+d.Wc(b)},0)};function Oi(a,b,c,d){T.call(this,0,-1);this.C=a.b(ic);this.index=b;this.Ve=c;this.je=d;this.Pc=this.Oc=!1}t(Oi,T);Oi.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Oc?", limit:?":"")+(this.Pc?", skip:?":"")+")"};Oi.prototype.Nc=function(a){var b=this.toString(),c=this.Ve.Zc(a),b=b.replace("?",c.toString());this.Oc&&(b=b.replace("?",a.W.toString()));this.Pc&&(b=b.replace("?",a.K.toString()));return b};
Oi.prototype.ca=function(a,b,c){a=this.Ve.Zc(c);b=this.C.get(this.index.j());c=(1==a.length&&a[0]instanceof F&&kd(a[0])?nf(b.get(a[0].from),!1,this.Oc?c.W:void 0,this.Pc?c.K:void 0):b.Ra(a,this.je,this.Oc?c.W:void 0,this.Pc?c.K:void 0)).map(function(a){return new Sb(a,{})},this);return[wd(c,[this.index.nc])]};function Pi(){T.call(this,0,0)}t(Pi,T);Pi.prototype.toString=l("multi_index_range_scan()");
Pi.prototype.ca=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=z(b);return[new H(c,a[0].o())]};function Qi(a){T.call(this,0,1);this.kc=a}t(Qi,T);Qi.prototype.toString=l("select(?)");Qi.prototype.Nc=function(a){a=$d(a,this.kc);return this.toString().replace("?",a.toString())};Qi.prototype.ca=function(a,b,c){return[$d(c,this.kc).eval(a[0])]};function Ri(a,b){T.call(this,0,1);this.U=a.b(hc);this.S=b}t(Ri,T);Ri.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Ri.prototype.ca=function(a){return[wd(hf(this.U,qd(a[0])),[zd(this.S)])]};function Si(a){this.c=a}t(Si,lh);Si.prototype.cb=function(a,b){this.F=a;mg(a,function(a){return a instanceof si}).forEach(function(a){var d=Ti(a);if(0!=d.length){var e=Ii(new Gi(this.c,a.table),b,d.map(function(a){return $d(b,a.kc)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.kc,a)},this);this.F=Ui(this,e,f,a)}}},this);return this.F};function Ti(a){var b=[];for(a=a.getParent();a;){if(a instanceof Qi)b.push(a);else if(a instanceof wi)break;a=a.getParent()}return b}
function Ui(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(ng);b=new Oi(a.c,b.Za,Ni(b),!1);a=new Ri(a.c,d.table);L(a,b);rg(d,d,a,b);return b.Ya()};function Vi(a,b){T.call(this,0,-1);this.C=a.b(ic);this.S=b}t(Vi,T);Vi.prototype.toString=function(){return"insert("+this.S.getName()+")"};Vi.prototype.ca=function(a,b,c){Wi(this.S,c.values,this.C);b.Cb(this.S,c.values);return[wd(c.values,[this.S.getName()])]};function Wi(a,b,c){a=a.Hb().$c();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function Xi(a,b){T.call(this,0,-1);this.C=a.b(ic);this.S=b}t(Xi,T);Xi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Xi.prototype.ca=function(a,b,c){Wi(this.S,c.values,this.C);b.Sd(this.S,c.values);return[wd(c.values,[this.S.getName()])]};function Yi(){T.call(this,0,1)}t(Yi,T);Yi.prototype.toString=l("limit(?)");Yi.prototype.Nc=function(a){return this.toString().replace("?",a.W.toString())};Yi.prototype.ca=function(a,b,c){a[0].entries.splice(c.W);return a};function Zi(a){T.call(this,0,1);this.M=a}t(Zi,T);m=Zi.prototype;m.toString=function(){return"order_by("+fe(this.M)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Ig(this.M[d].G);if(null!==b.Wa&&b.Wa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:rd(a[0],b)).entries.sort(this.Sf.bind(this))}else a.sort(this.Gg.bind(this));return a};
m.Y=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].G,c=this.M[f].qb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Gg=function(a,b){return this.Y(function(b){return b instanceof S?rd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?rd(b,a):I(b.entries[b.entries.length-1],a)})};m.Sf=function(a,b){return this.Y(function(b){return I(a,b)},function(a){return I(b,a)})};function $i(a,b){this.La=a;this.J=b}function aj(a){return a.J.some(function(a){return a instanceof S},a)?bj(a):cj(a)}function bj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Mb)return a=rd(a.La,a.J[0]).entries.map(function(a){var b=new xd(new Sb(-1,{}),1<this.La.L.size);Ad(b,this.J[0],I(a,this.J[0].child));return b},a),new H(a,[]);var b=new xd(new Sb(-1,{}),1<a.La.L.size);a.J.forEach(function(a){var d=a instanceof S?rd(this.La,a):I(this.La.entries[0],a);Ad(b,a,d)},a);return new H([b],a.La.o())}
function cj(a){var b=Array(a.La.entries.length),c=1<a.La.L.size;a.La.entries.forEach(function(a,e){b[e]=new xd(new Sb(a.ua.id(),{}),c);this.J.forEach(function(c){Ad(b[e],c,I(a,c))},this)},a);return new H(b,a.La.o())}function dj(a,b){var c=a.map(function(a){return aj(new $i(a,b)).entries[0]});return new H(c,a[0].o())};function ej(a,b){T.call(this,0,1);this.f=a;this.Pb=b}t(ej,T);ej.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};ej.prototype.ca=function(a){0==a.length?a=[td()]:1==a.length?(a=a[0],a=[0==this.f.length?a:aj(new $i(a,this.f))]):a=[dj(a,this.f)];return a};function fj(a){return a.f.some(function(a){return a instanceof S})||null!==a.Pb};function gj(){T.call(this,0,1)}t(gj,T);gj.prototype.toString=l("skip(?)");gj.prototype.Nc=function(a){return this.toString().replace("?",a.K.toString())};gj.prototype.ca=function(a,b,c){return[new H(a[0].entries.slice(c.K),a[0].o())]};function hj(){}t(hj,lh);hj.prototype.cb=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=ij(a);if(null===c)return a;mg(a,function(a){return a instanceof Yi||a instanceof gj}).forEach(function(a){a instanceof Yi?c.Oc=!0:c.Pc=!0;ng(a)},this);return c.Ya()};function ij(a){a=mg(a,function(a){return a instanceof Oi},function(a){return a instanceof ej&&fj(a)||a instanceof Zi||1!=K(a).length||a instanceof Qi});return 0<a.length?a[0]:null};function jj(a){this.c=a}t(jj,lh);jj.prototype.cb=function(a,b){this.F=a;var c=kj(this,b);if(0==c.length)return this.F;var d=null,e=null,f=0;do e=c[f++],d=lj(this,e,b);while(null===d&&f<c.length);if(null===d)return this.F;c=mj(this,d[0].Za.nc);return null===c?this.F:this.F=nj(this,e,c,d)};function kj(a,b){return mg(a.F,function(a){if(!(a instanceof Qi))return!1;a=$d(b,a.kc);return a instanceof tg&&"or"==a.pb})}
function mj(a,b){return mg(a.F,function(a){return a instanceof si&&a.table.getName()==b})[0]||null}function lj(a,b,c){b=$d(c,b.kc);var d=b.o();if(1!=d.size)return null;var d=D(d)[0],e=new Gi(a.c,d),f=null;return K(b).every(function(a){a=Ii(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function nj(a,b,c,d){var e=new Ri(a.c,c.table),f=new Pi;L(e,f);d.forEach(function(a){a=new Oi(this.c,a.Za,Ni(a),!1);L(f,a)},a);ng(b);rg(c,c,e,f);return f.Ya()};function oj(a){this.c=a}t(oj,lh);oj.prototype.cb=function(a,b){var c=pj(a,b);if(null===c)return a;var d;a:{var e=c;d=qj(Od(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.Ca(),n=0;n<k.length&&null===h;n++)h=rj(k[n],f);f=h;if(null===f){d=e;break a}e=new Oi(this.c,f.Za,new Ci(f.Za),f.Se);f=new Ri(this.c,d.table);L(f,e);ng(c);e=rg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=sj(Od(c,0)),null!==e){f=rj(e.index,c.M);if(null===f)break a;e.je=f.Se;d=ng(c).parent}return d.Ya()};
function sj(a){a=mg(a,function(a){return a instanceof Oi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function qj(a){a=mg(a,function(a){return a instanceof si},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function pj(a,b){return q(b.M)?mg(a,function(a){return a instanceof Zi})[0]:null}function rj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.G.getName()==a.f[c].ba.getName()}))return null;var c=tj(b,a);return c[0]||c[1]?{Za:a,Se:c[1]}:null}
function tj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.qb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.qb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function uj(a,b,c){this.Ga=a;this.fe=b;this.Vb=c}uj.prototype.hc=function(){this.Vb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function vj(a,b){T.call(this,0,1);this.S=a;this.Sg=b}t(vj,T);vj.prototype.toString=function(){return"update("+this.S.getName()+")"};vj.prototype.ca=function(a,b){var c=a[0].entries.map(function(a){var b=this.S.kb(a.ua.Ia());this.Sg.forEach(function(a){b.l[a.G.getName()]=a.value},this);return b},this);b.update(this.S,c);return[td()]};function wj(a){this.c=a;this.le=[new Ai,new Si(this.c),new jj(this.c),new oj(this.c),new hj,new ti(this.c)];this.Ld=[new Si(this.c)]}wj.prototype.create=function(a,b){var c=a.Ya();if(c instanceof Zg||c instanceof Yg)return xj(this,a,b);if(c instanceof eh||c instanceof ih||c instanceof jh)return xj(this,a,b,this.le);if(c instanceof $g||c instanceof ah)return xj(this,a,b,this.Ld);throw new E(8);};
function xj(a,b,c,d){a=kg(b.Ya(),a.sg.bind(a));null!=d&&(a=(new uj(a,c,d)).hc());return new ge(a,b.da())}
wj.prototype.sg=function(a){if(a instanceof eh)return new ej(a.f,a.Pb);if(a instanceof hh)return new ui(a.f);if(a instanceof gh)return new Mg(a.f);if(a instanceof fh)return new Zi(a.M);if(a instanceof jh)return new gj;if(a instanceof ih)return new Yi;if(a instanceof bh)return new Qi(a.N.V());if(a instanceof dh)return new qh;if(a instanceof kh)return new wi(this.c,a.N,a.Rb);if(a instanceof ch)return new si(this.c,a.table);if(a instanceof $g)return new qi(a.table);if(a instanceof ah)return new vj(a.table,
a.se);if(a instanceof Zg)return new Xi(this.c,a.table);if(a instanceof Yg)return new Vi(this.c,a.table);throw new E(514);};function yj(a){this.pg=new pi;this.Bg=new wj(a)};function zj(){this.Ze=y()}function Aj(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new Bj,a.Ze.set(b.getName(),c));return c}function Cj(a,b,c,d){c.forEach(function(a){a=Aj(this,a);0==d?(a.ab=null,a.wc=b):3==d?(null===a.Xb&&(a.Xb=C()),a.Xb.add(b),null===a.Ua&&(a.Ua=C()),a.Ua.delete(b)):1==d?(null===a.Ua&&(a.Ua=C()),a.Ua.add(b)):2==d&&(a.ab=b)},a)}
function Dj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Aj(this,a);var c=null===a.Ua||0==a.Ua.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.wc&&null!==a.ab&&a.ab==b:3==d?null===a.wc&&null===a.ab&&null!==a.Ua&&a.Ua.has(b):1==d?null===a.ab:c&&(null===a.ab||a.ab==b)}},a);return e}function Ej(a,b,c,d){var e=Dj(a,b,c,d);e&&Cj(a,b,c,d);return e}zj.prototype.releaseLock=function(a,b){b.forEach(function(b){Aj(this,b).releaseLock(a)},this)};
function Fj(a,b){b.forEach(function(a){Aj(this,a).ab=null},a)}function Bj(){this.Xb=this.Ua=this.ab=this.wc=null}Bj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.ab==a&&(this.ab=null);null===this.Ua||this.Ua.delete(a);null===this.Xb||this.Xb.delete(a)};function Gj(){this.Ub=new Hj;this.Dc=new zj}function oe(a,b){(2>b.getPriority()||2>b.getPriority())&&Fj(a.Dc,b.da());a.Ub.Cb(b);Ij(a);return b.Ob().ea}function Ij(a){for(var b=a.Ub.Bb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?Jj(a,d,1,3):Jj(a,d,2,0))a.Ub.remove(d),e=a,d.exec().then(e.yg.bind(e,d),e.xg.bind(e,d))}}function Jj(a,b,c,d){var e=!1;Ej(a.Dc,b.V(),b.da(),c)&&(e=Ej(a.Dc,b.V(),b.da(),d));return e}Gj.prototype.yg=function(a,b){this.Dc.releaseLock(a.V(),a.da());a.Ob().resolve(b);Ij(this)};
Gj.prototype.xg=function(a,b){this.Dc.releaseLock(a.V(),a.da());a.Ob().reject(b);Ij(this)};function Hj(){this.Ub=[]}Hj.prototype.Cb=function(a){mf(this.Ub,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};Hj.prototype.Bb=function(){return this.Ub.slice()};Hj.prototype.remove=function(a){var b=this.Ub;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Kj(){this.Lc=y()}var Lj;function Mj(){Lj||(Lj=new Kj);return Lj}Kj.prototype.clear=function(){this.Lc.clear()};Kj.prototype.clear=Kj.prototype.clear;Kj.prototype.sb=function(a,b){this.Lc.set(a.toString(),b);return b};Kj.prototype.registerService=Kj.prototype.sb;Kj.prototype.b=function(a){var b=this.Lc.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Kj.prototype.getService=Kj.prototype.b;Kj.prototype.jd=function(a){return this.Lc.has(a.toString())};
Kj.prototype.isRegistered=Kj.prototype.jd;function Nj(){var a=Mj();return Rb(a.Lc)};function Oj(a,b,c,d){return null!=a?null!=b?Pj(a,b,c,d):Qj(a):Rj()}function Sj(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function Tj(a){var b=Mj();a=new fc("ns_"+a);return b.jd(a)?b.b(a):null}function Rj(){var a={};Nj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=Tj(b).b(mc).version())});return Sj(a)}function Qj(a){a=Tj(a);var b={};if(null!=a){var c=a.b(ic);a.b(mc).pa().forEach(function(a){b[a.getName()]=c.get(Re(a)).aa().ia})}return Sj(b)}
function Pj(a,b,c,d){var e=Tj(a);a=[];if(null!=e){var f=null;try{f=e.b(mc).table(b)}catch(h){}null!=f&&(b=e.b(ic),e=e.b(hc),c=b.get(Re(f)).Ra(void 0,!1,c,d),c.length&&(a=hf(e,c).map(function(a){return a.l})))}return Sj(a)};function Uj(a,b){this.Md=Kd();this.ge=a;this.ld=b;this.J=Vj(this)}function Vj(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(a){a.lb().forEach(function(a){b.push(a)})});return b}Uj.prototype.Y=function(a,b){return this.J.every(function(c){return Ld(this.Md,c.I(),"eq")(I(a,c),I(b,c))},this)};
function Wj(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.Y.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.ld.splice(f,1),k=Xj(h,k,0,a.ld),b.push(k))}e=ob(d,c.entries,a.Y.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.ld.splice(h,0,k.ua.l),k=Xj(h,[],1,a.ld),b.push(k));return b}function Xj(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function Yj(){this.fc=y()}Yj.prototype.yd=function(a,b){var c=ka(a.query).toString(),d=this.fc.get(c)||null;null===d&&(d=new Zj(a),this.fc.set(c,d));d.yd(b)};Yj.prototype.he=function(a,b){var c=ka(a.query).toString(),d=this.fc.get(c)||null;d.he(b);0<d.Fc.size||this.fc.delete(c)};function ne(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.Ac();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function le(a,b,c){b=ka(null!=b.Uc?b.Uc:b).toString();a=a.fc.get(b)||null;null!==a&&ak(a,c)}function Zj(a){this.Ef=a;this.Fc=C();this.vg=[];this.Xe=null;this.Qf=new Uj(a.query,this.vg)}Zj.prototype.yd=function(a){this.Fc.has(a)||this.Fc.add(a)};Zj.prototype.he=function(a){return this.Fc.delete(a)};Zj.prototype.Ac=function(){var a=this.Ef;return{context:a.query,ee:Oh(a)}};function ak(a,b){var c=Wj(a.Qf,a.Xe,b);a.Xe=b;0<c.length&&a.Fc.forEach(function(a){a(c)})};function bk(a,b){var c=a.b(mc),d=b||{},e=new gf(c);a.sb(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Qb)||(Qb=new Pb),e=Qb,e=e.dg?0:e.Tg?4:1);switch(e){case 0:e=new Ne(a,c);break;case 1:e=new Ue(c);break;case 5:e=new We(c);break;case 4:e=new df(a,c,d.webSqlDbSize);break;case 3:e=new Ae(c,d.firebase);f=!0;break;default:throw new E(300);}a.sb(gc,e);var h=new jg;a.sb(ic,h);return e.Da(d.onUpgrade).then(function(){var b=new yj(a);a.sb(jc,b);b=new Gj;a.sb(kc,b);b=new Yj;a.sb(lc,b);return h.Da(c)}).then(function(){if(f){var b=
new pe(a);b.Ma.subscribe(b.$d.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=Oj);return(new cg(a)).Da(c)})};function ck(a){this.c=a;this.g=a.b(mc);this.$=C(this.g.pa());this.bb=x()}function dk(a){var b=a.c.b(ic),c=a.c.b(hc),d={};a.g.pa().forEach(function(a){var f=b.get(Re(a)).Ra(),f=hf(c,f).map(function(a){return a.l});d[a.getName()]=f});return{name:a.g.name(),version:a.g.version(),tables:d}}m=ck.prototype;m.exec=function(){var a=dk(this),a=new xd(new Sb(-1,a),!0);return w([new H([a],[])])};m.I=l(0);m.da=g("$");m.Ob=g("bb");m.V=function(){return ka(this)};m.getPriority=l(0);function ek(a,b){this.c=a;this.g=a.b(mc);this.$=C(this.g.pa());this.bb=x();this.Aa=b;this.Ma=a.b(gc);this.U=a.b(hc);this.C=a.b(ic)}m=ek.prototype;
m.exec=function(){if(!(this.Ma instanceof Ne||this.Ma instanceof Ue||this.Ma instanceof df))throw new E(300);var a;a:{a=this.g.pa();for(var b=0;b<a.length;++b)if(0<this.C.get(Re(a[b])).aa().ia){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new E(111);if(null==this.Aa.tables)throw new E(112);return fk(this)};m.I=l(1);m.da=g("$");m.Ob=g("bb");m.V=function(){return ka(this)};m.getPriority=l(0);
function fk(a){var b=new ad(a.c,a.$),b=a.Ma.Fb(a.I(),D(a.$),b),c;for(c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.yb(a)}),f=b.H(c,d.kb,0);a.U.Wb(c,e);var h=a.C.mc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function gk(a,b){this.c=a;this.Ma=a.b(gc);this.Ha=a.b(kc);this.Jb=a.b(lc);this.$=C(b);this.Oa=new ad(this.c,this.$);this.bb=x();this.xc=x();this.ve=x()}m=gk.prototype;m.exec=function(){this.ve.resolve();return this.xc.ea};m.I=l(1);m.da=g("$");m.Ob=g("bb");m.V=function(){return ka(this)};m.getPriority=l(2);function hk(a){oe(a.Ha,a);return a.ve.ea}
function ik(a,b){var c=b.Ac();return c.ee.Ya().exec(a.Oa,c.context).then(function(a){return pd(a[0])},function(a){this.Oa.Kb();var b=new ib(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Ma.Fb(this.I(),D(this.$),this.Oa);this.ja.ka().then(function(){this.Kc();this.xc.resolve()}.bind(this),function(a){this.Oa.Kb();this.xc.reject(a)}.bind(this));return this.bb.ea};m.Kb=function(){this.Oa.Kb();this.xc.resolve();return this.bb.ea};
m.Kc=function(){var a=ne(this.Jb,this.$);0!=a.length&&(a=new ke(this.c,a),oe(this.Ha,a))};m.aa=function(){var a=null;null!=this.ja&&(a=this.ja.aa());return null===a?new B(!1,0,0,0,0):a};function W(a){this.c=a;this.Ha=a.b(kc);this.Lb=null;this.Qa=0;0==jk.size&&(jk.set(0,C([1,4])),jk.set(1,C([2])),jk.set(2,C([3,5,6])),jk.set(3,C([2,7])),jk.set(4,C([7])),jk.set(5,C([7])),jk.set(6,C([7])))}r("lf.proc.Transaction",W);var jk=y();function kk(a,b){var c=jk.get(a.Qa)||null;if(null===c||!c.has(b))throw new E(107,a.Qa,b);a.Qa=b}
W.prototype.exec=function(a){kk(this,4);var b=[];try{a.forEach(function(a){a.hb();b.push(a.Ac())},this)}catch(c){return kk(this,7),ab(c)}this.Lb=new rh(this.c,b);return oe(this.Ha,this.Lb).then(function(a){kk(this,7);return a.map(function(a){return pd(a)})}.bind(this),function(a){kk(this,7);throw a;}.bind(this))};W.prototype.exec=W.prototype.exec;W.prototype.Cf=function(a){kk(this,1);this.Lb=new gk(this.c,a);return hk(this.Lb).then(function(){kk(this,2)}.bind(this))};W.prototype.begin=W.prototype.Cf;
W.prototype.Bf=function(a){kk(this,3);return ik(this.Lb,a).then(function(a){kk(this,2);return a}.bind(this),function(a){kk(this,7);throw a;}.bind(this))};W.prototype.attach=W.prototype.Bf;W.prototype.ka=function(){kk(this,5);return this.Lb.ka().then(function(){kk(this,7)}.bind(this))};W.prototype.commit=W.prototype.ka;W.prototype.Kb=function(){kk(this,6);return this.Lb.Kb().then(function(){kk(this,7)}.bind(this))};W.prototype.rollback=W.prototype.Kb;
W.prototype.aa=function(){if(7!=this.Qa)throw new E(105);return this.Lb.aa()};W.prototype.stats=W.prototype.aa;function X(a){this.c=a;this.g=a.b(mc);this.fd=!1}r("lf.proc.Database",X);X.prototype.Da=function(a){this.c.sb(mc,this.g);return bk(this.c,a).then(function(){this.fd=!0;this.Ha=this.c.b(kc);return this}.bind(this))};X.prototype.init=X.prototype.Da;X.prototype.Ab=g("g");X.prototype.getSchema=X.prototype.Ab;function lk(a){if(!a.fd)throw new E(2);}X.prototype.select=function(a){lk(this);return new V(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.Cb=function(){lk(this);return new Qh(this.c)};X.prototype.insert=X.prototype.Cb;X.prototype.Sd=function(){lk(this);return new Qh(this.c,!0)};X.prototype.insertOrReplace=X.prototype.Sd;X.prototype.update=function(a){lk(this);return new $h(this.c,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){lk(this);return new Ph(this.c)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){lk(this);this.c.b(lc).yd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){lk(this);this.c.b(lc).he(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Mf=function(){lk(this);return new W(this.c)};X.prototype.createTransaction=X.prototype.Mf;X.prototype.close=function(){try{this.c.b(gc).close()}catch(a){}this.c.clear();this.fd=!1};X.prototype.close=X.prototype.close;
X.prototype.Wf=function(){lk(this);var a=new ck(this.c);return oe(this.Ha,a).then(function(a){return pd(a[0])[0]})};X.prototype["export"]=X.prototype.Wf;X.prototype.import=function(a){lk(this);a=new ek(this.c,a);return oe(this.Ha,a).then(l(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.uf=e;this.gb=f||null}r("lf.schema.BaseColumn",Y);m=Y.prototype;m.getName=g("w");m.j=function(){return zd(this.S)+"."+this.w};m.toString=function(){return this.j()};m.H=g("S");m.I=g("uf");Y.prototype.getType=Y.prototype.I;Y.prototype.Xa=g("gb");Y.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.H().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
Y.prototype.Ba=function(){if(!q(this.ga)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};Y.prototype.ic=g("Re");Y.prototype.isNullable=Y.prototype.ic;Y.prototype.Cc=g("Te");Y.prototype.Na=function(a){return Cg(this,a,"eq")};Y.prototype.eq=Y.prototype.Na;Y.prototype.$e=function(a){return Cg(this,a,"neq")};Y.prototype.neq=Y.prototype.$e;Y.prototype.qg=function(a){return Cg(this,a,"lt")};
Y.prototype.lt=Y.prototype.qg;Y.prototype.rg=function(a){return Cg(this,a,"lte")};Y.prototype.lte=Y.prototype.rg;Y.prototype.Zf=function(a){return Cg(this,a,"gt")};Y.prototype.gt=Y.prototype.Zf;Y.prototype.$f=function(a){return Cg(this,a,"gte")};Y.prototype.gte=Y.prototype.$f;Y.prototype.match=function(a){return Cg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Df=function(a,b){return Cg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Df;
Y.prototype.ag=function(a){return Cg(this,a,"in")};Y.prototype["in"]=Y.prototype.ag;Y.prototype.lg=function(){return this.Na(null)};Y.prototype.isNull=Y.prototype.lg;Y.prototype.kg=function(){return this.$e(null)};Y.prototype.isNotNull=Y.prototype.kg;Y.prototype.rc=function(a){return new Y(this.S,this.w,this.Te,this.Re,this.uf,a)};Y.prototype.as=Y.prototype.rc;function mk(a){this.g=a;this.Ed=new Ic;this.ie=new Ic;this.bf=new Ic;this.Ee=y();this.h=new Ic;this.Ae=new Ic;this.jf=new Ic;this.De=new Ic;nk(this)}function nk(a){a.g.pa().forEach(function(a){var c=a.getName();a.Hb().Rd().forEach(function(d){this.bf.set(c,this.g.table(d.Ta));this.h.set(d.Ta,a);0==d.action?(this.ie.set(d.Ta,d),this.jf.set(d.Ta,a)):(this.Ed.set(d.Ta,d),this.Ae.set(d.Ta,a));this.Ee.set(a.getName()+"."+d.wb,d.Ta);this.De.set(d.Ta+"."+d.Hc,a.getName())},this)},a)}
function Rc(a,b,c){if(null!=c)return 1==c?a.Ed.get(b):a.ie.get(b);c=a.Ed.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function xh(a,b){var c=b.get(a);return null===c?[]:c}function zh(a,b){var c=C();b.forEach(function(a){(a=this.Ee.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.g.table(a)},a)}function vh(a,b,c){return null!=c?0==c?xh(b,a.jf):xh(b,a.Ae):xh(b,a.h)}
function Ah(a,b){var c=C();b.forEach(function(a){(a=this.De.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.g.table(a)},a)};function ok(a,b,c){this.Cg=a;this.ug=b;this.Xf=c}r("lf.schema.Constraint",ok);ok.prototype.$c=g("Cg");ok.prototype.getPrimaryKey=ok.prototype.$c;ok.prototype.Rd=g("Xf");ok.prototype.getForeignKeys=ok.prototype.Rd;function pk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ce=b;this.wb=a.local;this.Ta=d[0];this.Hc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){qk(a);this.Md=Kd();this.w=a;this.J=y();this.vd=C();this.oc=C();this.kd=C();this.Ea=null;this.sa=y();this.od=!1;this.zb=[]}r("lf.schema.TableBuilder",Z);function rk(a){this.name=a.name;this.qb=a.order;this.autoIncrement=a.autoIncrement}var sk=C([0,6]);function qk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function tk(a,b){if(b==a.w)throw new E(546,b);if(a.J.has(b)||a.sa.has(b)||a.oc.has(b))throw new E(503,a.w+"."+b);}
function uk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function vk(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.zb.some(function(a,e){c=e;return-1!=b.indexOf(a.wb)},a))throw new E(543,a.zb[c].name);}}
function wk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.w+"."+e);}},a)}}function xk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.kd.has(a.name))throw new E(545,this.w+"."+a.name);},a)}Z.prototype.wf=function(a,b){qk(a);tk(this,a);this.J.set(a,b);sk.has(b)&&this.xe([a]);return this};Z.prototype.addColumn=Z.prototype.wf;
Z.prototype.yf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));qk(this.Ea);tk(this,this.Ea);c=yk(this,a,!0,void 0,b);uk(this,c);1==c.length&&this.vd.add(c[0].name);this.oc.add(this.Ea);this.sa.set(this.Ea,c);return this};Z.prototype.addPrimaryKey=Z.prototype.yf;
Z.prototype.xf=function(a,b){qk(a);tk(this,a);var c=new pk(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.J.has(c.wb))throw new E(540,a);this.zb.push(c);this.we(a,[c.wb],this.vd.has(c.wb));return this};Z.prototype.addForeignKey=Z.prototype.xf;Z.prototype.zf=function(a,b){qk(a);tk(this,a);var c=yk(this,b,!0);1==c.length&&(this.vd.add(c[0].name),zk(this,c[0].name));this.sa.set(a,c);this.oc.add(a);return this};
Z.prototype.addUnique=Z.prototype.zf;function zk(a,b){a.zb.forEach(function(a){a.wb==b&&this.oc.add(a.name.split(".")[1])},a)}Z.prototype.xe=function(a){yk(this,a,!1).forEach(function(a){this.kd.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.xe;Z.prototype.we=function(a,b,c,d){qk(a);tk(this,a);b=yk(this,b,!0,d);c&&this.oc.add(a);this.sa.set(a,b);return this};Z.prototype.addIndex=Z.prototype.we;Z.prototype.Eb=ba("od");Z.prototype.persistentIndex=Z.prototype.Eb;
Z.prototype.Ab=function(){vk(this);wk(this);xk(this);return new (Ak(this))};Z.prototype.getSchema=Z.prototype.Ab;function Bk(a){return a.zb}function yk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new rk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new rk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new E(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new E(509,this.w,a.name);}},a);return f}
function Ak(a){function b(){function b(c){return a.sa.get(c).map(function(a){return{ba:this[a.name],qb:a.qb,autoIncrement:a.autoIncrement}},this)}var d=Rb(a.J).map(function(b){this[b]=new Y(this,b,a.vd.has(b),a.kd.has(b),a.J.get(b));return this[b]},this),e=Rb(a.sa).map(function(d){return new Eg(a.w,d,a.oc.has(d),b.call(this,d))},this);R.call(this,a.w,d,e,a.od);var f=null===a.Ea?null:new Eg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.kd.has(b.getName())});this.If=new ok(f,h,a.zb);
this.mf=Ck(a,d,e)}t(b,R);b.prototype.yb=function(a){return new this.mf(Tb++,a)};b.prototype.createRow=b.prototype.yb;b.prototype.kb=function(a){var b={};this.lb().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.mf(a.id,b)};b.prototype.deserializeRow=
b.prototype.kb;b.prototype.Hb=g("If");b.prototype.getConstraint=b.prototype.Hb;return b}
function Ck(a,b,c){function d(a,d){this.J=b;this.sa=c;Sb.call(this,a,d)}t(d,Sb);d.prototype.Ge=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Hc[b.I()]});return a};d.prototype.tf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.I();var d=this.l[c];a[c]=0==b?null!=d?Wb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Md.Ue.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Dk(a,b){this.g=new Ek(a,b);this.ub=y();this.yc=!1;this.i=null}r("lf.schema.Builder",Dk);function Fk(a,b){b.zb.forEach(function(a){var d=a.Ta;if(!this.ub.has(d))throw new E(536,a.name);var d=this.ub.get(d).Ab(),e=a.Hc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.Ab()[a.wb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Cc())throw new E(539,a.name);},a)}
Dk.prototype.Hf=function(a){a.zb.forEach(function(a){Bk(this.ub.get(a.Ta)).forEach(function(c){if(c.wb==a.Hc)throw new E(534,a.name);},this)},this)};function Gk(a){a.yc||(a.ub.forEach(function(a){Fk(this,a);a=a.Ab();this.g.L.set(a.getName(),a)},a),z(a.ub).forEach(a.Hf,a),Hk(a),a.ub.clear(),a.yc=!0)}function Ik(a,b,c){b.te||(b.te=!0,b.ae=!0,b.He.forEach(function(a){a=c.get(a);if(!a.te)Ik(this,a,c);else if(a.ae&&b!=a)throw new E(533);},a));b.ae=!1}
function Hk(a){var b=y();a.g.L.forEach(function(a,d){b.set(d,new Jk(d))},a);a.ub.forEach(function(a,d){a.zb.forEach(function(a){b.get(a.Ta).He.add(d)})});z(b).forEach(function(a){Ik(this,a,b)},a)}function Jk(a){this.ae=this.te=!1;this.He=C();this.nc=a}Dk.prototype.Ab=function(){this.yc||Gk(this);return this.g};Dk.prototype.getSchema=Dk.prototype.Ab;Dk.prototype.Le=function(){var a=new fc("ns_"+this.g.name()),b=Mj(),c=null;b.jd(a)?c=b.b(a):(c=new Kj,b.sb(a,c));return c};Dk.prototype.getGlobal=Dk.prototype.Le;
Dk.prototype.connect=function(a){if(null!==this.i&&this.i.fd)throw new E(113);if(null===this.i){var b=this.Le();b.jd(mc)||b.sb(mc,this.Ab());this.i=new X(b)}return this.i.Da(a)};Dk.prototype.connect=Dk.prototype.connect;Dk.prototype.Lf=function(a){if(this.ub.has(a))throw new E(503,a);if(this.yc)throw new E(535);this.ub.set(a,new Z(a));return this.ub.get(a)};Dk.prototype.createTable=Dk.prototype.Lf;Dk.prototype.me=function(a){if(this.yc)throw new E(535);this.g.me(a);return this};
Dk.prototype.setPragma=Dk.prototype.me;function Ek(a,b){this.w=a;this.$b=b;this.L=y();this.ff={Rf:!1}}r("lf.schema.DatabaseSchema",Ek);Ek.prototype.name=g("w");Ek.prototype.name=Ek.prototype.name;Ek.prototype.version=g("$b");Ek.prototype.version=Ek.prototype.version;Ek.prototype.pa=function(){return z(this.L)};Ek.prototype.tables=Ek.prototype.pa;Ek.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Ek.prototype.table=Ek.prototype.table;
Ek.prototype.info=function(){this.Qe||(this.Qe=new mk(this));return this.Qe};Ek.prototype.ef=g("ff");Ek.prototype.pragma=Ek.prototype.ef;Ek.prototype.me=ba("ff");r("lf.schema.create",function(a,b){return new Dk(a,b)});v.prototype.catch=v.prototype.pe;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
