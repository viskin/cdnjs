var window = this;
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function f(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.yg=function(a,c,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Zf=c;this.Ef=a;this.pg=b;this.pd=0;this.kd=null}ta.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Ef();return a};ta.prototype.put=function(a){this.pg(a);this.pd<this.Zf&&(this.pd++,a.next=this.kd,this.kd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
g=ia(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var g=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<g.length;h++)b.push(g[h]);else b.push(d)}return b};function Da(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ea;a:{var Fa=p.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function u(a){return-1!=Ea.indexOf(a)};function Ha(){return u("Opera")||u("OPR")}function Ia(){return(u("Chrome")||u("CriOS"))&&!Ha()&&!u("Edge")};function Ja(a){p.setTimeout(function(){throw a;},0)}var Ka;
function La(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.we;c.we=null;a()}};return function(a){d.next={we:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Ma(){this.zd=this.kc=null}var Oa=new ta(function(){return new Na},function(a){a.reset()},100);Ma.prototype.add=function(a,b){var c=Oa.get();c.set(a,b);this.zd?this.zd.next=c:this.kc=c;this.zd=c};Ma.prototype.remove=function(){var a=null;this.kc&&(a=this.kc,this.kc=this.kc.next,this.kc||(this.zd=null),a.next=null);return a};function Na(){this.next=this.scope=this.Md=null}Na.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Na.prototype.reset=function(){this.next=this.scope=this.Md=null};function Pa(a,b){Qa||Ra();Sa||(Qa(),Sa=!0);Ta.add(a,b)}var Qa;function Ra(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Qa=function(){a.then(Ua)}}else Qa=function(){var a=Ua;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ka||(Ka=La()),Ka(a)):p.setImmediate(a)}}var Sa=!1,Ta=new Ma;function Ua(){for(var a=null;a=Ta.remove();){try{a.Md.call(a.scope)}catch(b){Ja(b)}Oa.put(a)}Sa=!1};function v(a,b){this.Ta=0;this.df=void 0;this.Zc=this.bc=this.C=null;this.jd=this.Ld=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Va(c,2,a)},function(a){Va(c,3,a)})}catch(d){Va(this,3,d)}}function Wa(){this.next=this.context=this.gc=this.Kc=this.child=null;this.Cd=!1}Wa.prototype.reset=function(){this.context=this.gc=this.Kc=this.child=null;this.Cd=!1};var Xa=new ta(function(){return new Wa},function(a){a.reset()},100);function Ya(a,b,c){var d=Xa.get();d.Kc=a;d.gc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Va(b,2,a);return b}function $a(a){return new v(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Pa(ra(b,a))}function cb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var g=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],ab(n,ra(g,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new db(c,a,b)}
v.prototype.then=function(a,b,c){return eb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.me=function(a,b){return eb(this,null,a,b)};function fb(a,b){a.bc||2!=a.Ta&&3!=a.Ta||gb(a);a.Zc?a.Zc.next=b:a.bc=b;a.Zc=b}
function eb(a,b,c,d){var e=Ya(null,null,null);e.child=new v(function(a,h){e.Kc=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof hb?h(b):a(e)}catch(B){h(B)}}:h});e.child.C=a;fb(a,e);return e.child}v.prototype.ug=function(a){this.Ta=0;Va(this,2,a)};v.prototype.vg=function(a){this.Ta=0;Va(this,3,a)};
function Va(a,b,c){0==a.Ta&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,bb(c,a.ug,a.vg,a)||(a.df=c,a.Ta=b,a.C=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function bb(a,b,c,d){if(a instanceof v)return fb(a,Ya(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return jb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function jb(a,b,c,d,e){function g(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,g)}catch(n){g(n)}}function gb(a){a.Ld||(a.Ld=!0,Pa(a.Jf,a))}function kb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Zc=null);return b}
v.prototype.Jf=function(){for(var a=null;a=kb(this);){var b=this.Ta,c=this.df;if(3==b&&a.gc&&!a.Cd)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,lb(a,b,c);else try{a.Cd?a.Kc.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Xa.put(a)}this.Ld=!1};function lb(a,b,c){2==b?a.Kc.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function ib(a,b){a.jd=!0;Pa(function(){a.jd&&mb.call(null,b)})}var mb=Ja;function hb(a){sa.call(this,a)}t(hb,sa);hb.prototype.name="cancel";
function db(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.s=b||this.Be()}var nb=0;m=y.prototype;m.id=f("oa");function ob(a){return a.s}m.Be=function(){return{}};m.mf=f("s");m.Ia=function(){return{id:this.oa,value:this.mf()}};m.Eb=function(a){return"#"==a.substr(-1)?this.oa:null};function pb(a){return new y(a.id,a.value)}function qb(a){return new y(nb++,a||{})}function rb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function sb(a){this.type=a}function tb(a){y.call(this,-1,a)}t(tb,y);function ub(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,g=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<g+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=g;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=g;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function vb(a){return ya(arguments,function(a,c){return a+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.lc=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.lc)return a.lc(!1);if(ga(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(ga(a))try{wa(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==zb)throw d;}}}function Db(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw zb;};return b};function Eb(a,b){this.o={};this.b=[];this.Oa=this.Bb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Eb.prototype;m.yc=f("Bb");m.wa=function(){Fb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Gb(a){Fb(a);return a.b.concat()}m.La=function(a){return Hb(this.o,a)};m.md=function(){return 0==this.Bb};
m.clear=function(){this.o={};this.Oa=this.Bb=this.b.length=0};m.remove=function(a){return Hb(this.o,a)?(delete this.o[a],this.Bb--,this.Oa++,this.b.length>2*this.Bb&&Fb(this),!0):!1};function Fb(a){if(a.Bb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Hb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Bb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Hb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Hb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Hb(this.o,a)||(this.Bb++,this.b.push(a),this.Oa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Eb)b=Gb(a),a=a.wa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Da(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Gb(this),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};m.clone=function(){return new Eb(this)};
m.lc=function(a){Fb(this);var b=0,c=this.Oa,d=this,e=new Ab;e.next=function(){if(c!=d.Oa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw zb;var e=d.b[b++];return a?e:d.o[e]};return e};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(){this.o=new Eb;Object.defineProperty(this,"size",{get:function(){return this.o.yc()}})}z.prototype.clear=function(){this.o.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.o.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.o.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.o.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.o.La(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.o.set(a,b)};z.prototype.set=z.prototype.set;var Ib=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach);function A(){return Ib?new window.Map:new z}function Jb(a){if(a instanceof z)return Gb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof z)return a.o.wa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Kb={};r("lf.TransactionType",Kb);Kb.READ_ONLY=0;Kb.READ_WRITE=1;function Lb(a,b){this.Ra=a;this.nf=b;this.X=x()}Lb.prototype.ia=function(){try{Mb(this.Ra)}catch(a){return $a(a)}return(0==this.nf?this.oc():Nb(this)).then(function(a){this.Ra.ia();return a}.bind(this))};function Nb(a){Ob(a);Pb(a);return a.oc()}
function Ob(a){a.Ra.qb.forEach(function(a,c){var d=this.Ra.Z().get(c),d=this.H(d.getName(),d.Lb.bind(d)),e=C(a.Da).map(function(a){return a.id()});0<e.length&&d.remove(e).me(this.Od,this);e=C(a.pa).map(function(a){return a[1]}).concat(C(a.Ca));d.put(e).me(this.Od,this)},a)}function Pb(a){Qb(a.Ra).forEach(function(a){var c=this.H(a.getName(),pb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ia())},this.Od.bind(this))},a)}Lb.prototype.Od=function(a){this.X.reject(a)};function Rb(a){this.qg=a}Rb.prototype.toString=f("qg");var Sb=new Rb("backstore"),Tb=new Rb("cache"),Ub=new Rb("indexstore"),Vb=new Rb("engine"),Xb=new Rb("runner"),Yb=new Rb("observerregistry"),Zb=new Rb("schema");function $b(a){if("function"==typeof a.wa)return a.wa();if(ia(a))return a.split("");if(ga(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Da(a)};function ac(a){this.o=new Eb;a&&this.addAll(a)}function bc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=ac.prototype;m.yc=function(){return this.o.yc()};m.add=function(a){this.o.set(bc(a),a)};m.addAll=function(a){a=$b(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(bc(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.La(bc(a))};m.wa=function(){return this.o.wa()};
m.clone=function(){return new ac(this)};m.lc=function(){return this.o.lc(!1)};var cc=Ha(),dc=u("Trident")||u("MSIE"),ec=u("Edge"),fc=u("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),gc=-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge");function hc(){var a=Ea;if(fc)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ec)return/Edge\/([\d\.]+)/.exec(a);if(dc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(gc)return/WebKit\/(\S+)/.exec(a)}
(function(){if(cc&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=hc())&&(a=b?b[1]:"");return dc&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ia()||u("Firefox")||Ha();Ia();var ic=u("Safari")&&!(Ia()||u("Coast")||Ha()||u("Edge")||u("Silk")||u("Android"))&&!(u("iPhone")&&!u("iPod")&&!u("iPad")||u("iPad")||u("iPod"));function jc(a){this.Vb=new ac(a);Object.defineProperty(this,"size",{get:function(){return this.Vb.yc()}})}jc.prototype.add=function(a){this.Vb.add(a)};jc.prototype.add=jc.prototype.add;jc.prototype.clear=function(){this.Vb.clear()};jc.prototype.clear=jc.prototype.clear;jc.prototype.delete=function(a){return this.Vb.remove(a)};jc.prototype["delete"]=jc.prototype.delete;jc.prototype.forEach=function(a,b){this.Vb.wa().forEach(a,b)};jc.prototype.has=function(a){return this.Vb.contains(a)};
jc.prototype.has=jc.prototype.has;var kc=window.Set&&window.Set.prototype.values&&window.Set.prototype.forEach&&!ic;function D(a){return kc?q(a)?new window.Set(a):new window.Set:new jc(a)}function lc(a){if(a instanceof jc)return a.Vb.wa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function mc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function nc(a,b){this.oa=a;this.s=b||{}}function oc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return lc(b)}nc.prototype.V=f("oa");function pc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ia()},a)}function qc(a,b){b.forEach(function(a){delete this.s[a]},a)}nc.prototype.Ia=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function rc(a){return new nc(a.id,JSON.parse(a.value))};function sc(a,b,c){this.aa=a;this.Kb=b;this.ef=c}m=sc.prototype;m.get=function(a){if(0==a.length)return this.xc();var b=this.Kb;return tc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function tc(a,b){var c=A(),d=x(),e=oc(b).map(function(a){return new v(function(b,d){var e;try{e=this.aa.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=rc(a.target.result);c.set(a.V(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ha}
m.xc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=rc(b.value).s;for(var k in e)c.push(this.Kb(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.ef(this.aa.name,d));pc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.ef(this.aa.name,d));qc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.aa.delete(a.V()):this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};function uc(a,b,c){a=a.i(Tb);var d=[c<<9,(c+1<<9)-1];b=a.Za(b,d[0],d[1]);c=new nc(c);pc(c,b);return c}
function vc(a,b){return new nc(b)};function wc(){};function xc(a){this.ca=a.i(Tb);this.D=a.i(Ub);this.m=a.i(Zb)}xc.prototype.update=function(a){a.forEach(function(a){yc(this,a);zc(this,a)},this)};function zc(a,b){var c=b.getName();b.Da.forEach(function(a,b){this.ca.remove(c,b)},a);b.Ca.forEach(function(a){this.ca.set(c,a)},a);b.pa.forEach(function(a){this.ca.set(c,a[1])},a)}function yc(a,b){var c=a.m.table(b.getName());Ac(b).forEach(function(a){Bc(this,c,a)},a)}
function Bc(a,b,c){var d=[];(a.D.ic.get(b.getName())||[]).forEach(function(a){try{Cc(a,c),d.push(a)}catch(b){throw d.forEach(function(a){Cc(a,[c[1],c[0]])},this),b;}},a)}function Cc(a,b){var c=null===b[1]?void 0:b[1].Eb(a.getName()),d=null===b[0]?void 0:b[0].Eb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.pc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Dc={};r("lf.ConstraintAction",Dc);Dc.RESTRICT=0;Dc.CASCADE=1;var Ec={};r("lf.ConstraintTiming",Ec);Ec.IMMEDIATE=0;Ec.DEFERRABLE=1;var Fc={};r("lf.Order",Fc);Fc.DESC=0;Fc.ASC=1;var Gc={};r("lf.Type",Gc);Gc.ARRAY_BUFFER=0;Gc.BOOLEAN=1;Gc.DATE_TIME=2;Gc.INTEGER=3;Gc.NUMBER=4;Gc.STRING=5;Gc.OBJECT=6;var Hc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Hc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Ic(a){this.D=a.i(Ub);this.m=a.i(Zb);this.cd=null}function Jc(a,b,c){var d=b.Db().dg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.l());},this)},a)}function Kc(a,b,c,d){b.Db().Nd().forEach(function(a){a.timing==d&&Lc(this,a,c)},a)}function Lc(a,b,c){var d=Mc(a,b);c.forEach(function(a){if(Nc(a[0],a[1],b.name)&&(a=a[1].s[b.rb],null!==a&&!d.La(a)))throw new E(203,b.name);},a)}
function Mc(a,b){null===a.cd&&(a.cd=A());var c=a.cd.get(b.name)||null;null===c&&(c=a.m.table(b.ab)[b.Lc].ua(),c=a.D.get(c.l()),a.cd.set(b.name,c));return c}function Nc(a,b,c){return(null===a?null!==b:null===b)||a.Eb(c)!=b.Eb(c)}function Oc(a,b,c,d){b=Pc(a.m.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.D.get(a.name),h=Mc(this,a);c.forEach(function(c){if(Nc(c[0],c[1],h.getName())&&b.La(c[0].s[a.Lc]))throw new E(203,a.name);},this)}},a)}
function Rc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Kc(a,b,c,d))}function Sc(a,b,c,d){0!=c.length&&(Kc(a,b,c,d),Oc(a,b,c,d))}function Tc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Oc(a,b,c,d))};function Uc(a){this.Ca=A();this.pa=A();this.Da=A();this.w=a}m=Uc.prototype;m.getName=f("w");m.add=function(a){if(this.Da.has(a.id())){var b=[this.Da.get(a.id()),a];this.pa.set(a.id(),b);this.Da.delete(a.id())}else this.Ca.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.Ca.has(c)?this.Ca.set(c,b):(this.pa.has(c)&&(a=[this.pa.get(a[0].id())[0],b]),this.pa.set(c,a))};
m.delete=function(a){if(this.Ca.has(a.id()))this.Ca.delete(a.id());else if(this.pa.has(a.id())){var b=this.pa.get(a.id())[0];this.pa.delete(a.id());this.Da.set(a.id(),b)}else this.Da.set(a.id(),a)};function Ac(a){var b=[];a.Ca.forEach(function(a){b.push([null,a])});a.pa.forEach(function(a){b.push(a)});a.Da.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Jb(this.Ca).toString()+"], ["+Jb(this.pa).toString()+"], ["+Jb(this.Da).toString()+"]"};
function Vc(a){var b=new Uc(a.w);a.Ca.forEach(function(a){b.delete(a)});a.Da.forEach(function(a){b.add(a)});a.pa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.md=function(){return 0==this.Ca.size&&0==this.Da.size&&0==this.pa.size};function Wc(a,b){this.$=A();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.ca=a.i(Tb);this.D=a.i(Ub);this.Pa=new Ic(a);this.ld=new xc(a);this.qb=A()}function Qb(a){var b=[];Jb(a.qb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.zb()&&(a.va().forEach(function(a){b.push(this.D.get(a.l()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=Wc.prototype;m.Z=f("$");
function Xc(a){var b=[];a.$.forEach(function(a){a.zb()&&(a.va().forEach(function(a){b.push(a.l())}),b.push(a.getName()+".#"))});return b}m.xb=function(a,b){Yc(this,a);Jc(this.Pa,a,b);Rc(this.Pa,a,b,0);for(var c=0;c<b.length;c++)Zc(this,a,[null,b[c]])};
function Zc(a,b,c){var d=b.getName(),e=a.qb.get(d)||new Uc(d);a.qb.set(d,e);try{Bc(a.ld,b,c)}catch(g){throw g;}b=c[0];var h=c[1];null===b&&null!==h?(a.ca.set(d,h),e.add(h)):null!==b&&null!==h?(a.ca.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ca.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Yc(this,a);Jc(this.Pa,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ca.get(d.id()),d];Sc(this.Pa,a,[d],0);Zc(this,a,d)}};
m.Qd=function(a,b){Yc(this,a);Jc(this.Pa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,g,h=a.Db().fd();if(null===h)g=null;else{g=this.Pa;var h=h.l(),k=d.Eb(h);g=g.D.get(h).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.ca.get(g),d.oa=g,Sc(this.Pa,a,[[e,d]],0)):Rc(this.Pa,a,[d],0);Zc(this,a,[e,d])}};m.remove=function(a,b){Yc(this,a);Tc(this.Pa,a,b,0);for(var c=0;c<b.length;c++)Zc(this,a,[b[c],null])};
function Mb(a){a.qb.forEach(function(a){var c=this.$.get(a.getName());Rc(this.Pa,c,C(a.Ca),1);Tc(this.Pa,c,C(a.Da),1);Sc(this.Pa,c,C(a.pa),1)},a)}m.ia=aa();m.Gb=function(){var a=C(this.qb).map(function(a){return Vc(a)});this.ld.update(a)};function Yc(a,b){if(!a.$.has(b.getName()))throw new E(106,b.getName());};function $c(a,b,c,d){this.c=a;this.A=b;this.da=this.c==F?!1:c;this.ma=this.A==F?!1:d}var F=new (aa());$c.prototype.toString=function(){return(this.da?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.A==F?"unbound":this.A)+(this.ma?")":"]")};function ad(a){if(bd(a))return[];var b=null,c=null;a.c==F||(b=new $c(F,a.c,!1,!a.da));a.A==F||(c=new $c(a.A,F,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}$c.prototype.reverse=function(){return new $c(this.A,this.c,this.ma,this.da)};
function cd(a,b){var c=dd(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==F||d.A>c.c||d.A==c.c&&!d.ma&&!c.da}function ed(){return new $c(F,F,!1,!1)}function bd(a){return a.c==F&&a.A==F}function fd(a){return a.c==a.A&&a.c!=F&&!a.da&&!a.ma}$c.prototype.contains=function(a){var b=this.A==F||a<this.A||a==this.A&&!this.ma;return(this.c==F||a>this.c||a==this.c&&!this.da)&&b};
function dd(a,b,c,d,e){function g(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?g(1):g(-1):0:g(-1):b==F?g(1):a<b?-1:a==b?(d?!e:e)?d?g(1):g(-1):0:1}function gd(a,b){var c=dd(a.c,b.c,!0,a.da,b.da);0==c&&(c=dd(a.A,b.A,!1,a.ma,b.ma));return c};function G(a,b){this.entries=a;this.L=D(b);this.Xa=null}function H(a){return lc(a.L)}function hd(a){return a.entries.map(function(a){return a.sa.s})}function id(a){return a.entries.map(function(a){return a.sa.id()})}function jd(a,b){return a.Xa.get(b.l())}var kd=null;function ld(){null===kd&&(kd=new G([],[]));return kd}
function md(a){if(0==a.length)return ld();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),g=0;g<c.length;g++)b.every(function(a){return a.has(c[g].id)})&&e.set(c[g].id,c[g]);return new G(C(e),lc(a[0].L))}function nd(a){if(0==a.length)return ld();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(C(b),lc(a[0].L))}
function od(a,b){var c=1<b.length,d=a.map(function(a){return new pd(a,c)});return new G(d,b)}function pd(a,b){this.sa=a;this.id=qd++;this.Td=b}var qd=0;function I(a,b){var c=b.Ya();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Td?a.sa.s[J(b.H())][b.getName()]:a.sa.s[b.getName()]}function rd(a,b,c){var d=b.Ya();if(null!=d)a.sa.s[d]=c;else if(a.Td){var d=J(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function sd(a,b,c,d){function e(a,b){if(a.Td){var c=a.sa.s,d;for(d in c)g[d]=c[d]}else g[b[0]]=a.sa.s}var g={};e(a,b);e(c,d);a=new y(-1,g);return new pd(a,!0)};r("lf.bind",function(a){return new td(a)});function td(a){this.fa=a}r("lf.Binder",td);td.prototype.ua=f("fa");function ud(){this.Ne=vd();var a=wd();this.ec=A();this.ec.set(1,xd());this.ec.set(2,yd());this.ec.set(4,a);this.ec.set(3,a);this.ec.set(5,zd())}ud.zc=function(){return ud.Je?ud.Je:ud.Je=new ud};function Ad(a,b,c){return(a.ec.get(b)||null).get(c)||null}function vd(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function xd(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function wd(){var a=xd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function zd(){var a=wd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function yd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.h=this.C=null}var Bd=[];K.prototype.getParent=f("C");K.prototype.hb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Cd(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.h||Bd}function Dd(a,b){return L(a)[b]||null}function Ed(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function M(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Fd(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}K.prototype.removeChild=function(a){return Fd(this,L(this).indexOf(a))};function Gd(a,b,c){Dd(a,c).C=null;b.C=a;a.h[c]=b}function Hd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Hd(a,b,c)})};function Id(){K.call(this);this.oa=Jd++}t(Id,K);var Jd=0;Id.prototype.V=f("oa");function Kd(a,b,c){Id.call(this);this.O=a;this.value=b;this.G=c;this.tc=Ad(ud.zc(),this.O.I(),this.G);this.$a=!1;this.ac=b}t(Kd,Id);m=Kd.prototype;m.Jb=function(){var a=new Kd(this.O,this.value,this.G);a.ac=this.ac;a.vd(this.$a);var b=this.V();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.vd=ba("$a");function Ld(a){var b=!1;a.value instanceof td||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof td}):!0);if(!b)throw new E(501);}
m.eval=function(a){Ld(this);if("in"==this.G)return Md(this,a);var b=a.entries.filter(function(a){return this.tc(I(a,this.O),this.value)!=this.$a},this);return new G(b,H(a))};m.bind=function(a){if(this.ac instanceof td){var b=this.ac.ua();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof td){var d=b.ua();if(a.length<=d)throw new E(510);return a[b.ua()]}return b}))};
function Md(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.$a}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.O))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.O.l()+" "+this.G+(this.$a?"(complement)":"")+" "+this.value+")"};function Nd(a){this.ba=a;this.$c=this.za=null}function Od(a,b){null===a.za&&null!=a.u&&(a.za=Pd(a.u));return a.za.get(b)||null}function Pd(a){var b=A();Hd(a,function(a){b.set(a.V(),a)});return b}function Qd(a,b){b.u&&(a.u=b.u.Jb());a.$c=b}Nd.prototype.bind=function(){return this};function Rd(a,b){var c=a.u;null!=c&&Hd(c,function(a){a instanceof Kd&&a.bind(b)})};function Sd(a){Nd.call(this,a)}t(Sd,Nd);function Td(a){var b="";a.forEach(function(c,d){b+=c.O.l()+" ";b+=1==c.kb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Sd.prototype.Z=function(){return D(this.c)};Sd.prototype.clone=function(){var a=new Sd(this.ba);Qd(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.N=this.N;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Xb&&(a.Xb=this.Xb);a.yb=this.yb;return a};
Sd.prototype.bind=function(a){Sd.Hb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.ua()]);null!=this.Xb&&(this.N=a[this.Xb.ua()]);Rd(this,a);return this};function Ud(a,b){this.Aa=a;this.$=b}Ud.prototype.hb=f("Aa");Ud.prototype.Z=f("$");function Vd(a){var b=D();a.forEach(function(a){a.Z().forEach(b.add.bind(b))});return b};function Wd(a,b){this.global=a;this.Ja=a.i(Sb);this.sd=b.map(function(a){return a.context});this.Xe=b.map(function(a){return a.de});this.ze=Vd(this.Xe);this.of=Xd(this);this.cb=x()}function Xd(a){return a.sd.some(function(a){return!(a instanceof Sd)})?1:0}m=Wd.prototype;
m.exec=function(){function a(){var g=d.shift();if(g){var h=e[c.length];return g.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Wc(this.global,this.ze),c=[],d=this.Xe.slice(),e=this.sd;return a().then(function(){return this.Ja.Cb(this.of,b).ia()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){b.Gb();throw a;})};m.I=f("of");m.Z=f("ze");m.Mb=f("cb");m.V=function(){return ka(this)};m.ae=aa();function Yd(a,b){Wd.call(this,a,b);this.Fb=a.i(Yb)}t(Yd,Wd);Yd.prototype.getPriority=l(0);Yd.prototype.ae=function(a){this.sd.forEach(function(b,c){Zd(this.Fb,b,a[c])},this)};function $d(a,b){this.g=a;this.Fb=a.i(Yb);this.Ba=a.i(Xb);this.ld=new xc(a);this.qb=b;var c=a.i(Zb),d=this.qb.map(function(a){return c.table(a.getName())});this.$=D(d);this.cb=x()}m=$d.prototype;m.exec=function(){this.ld.update(this.qb);this.Oc();return w()};m.I=l(1);m.Z=f("$");m.Mb=f("cb");m.V=function(){return ka(this)};m.getPriority=l(1);m.Oc=function(){var a=ae(this.Fb,this.$);0!=a.length&&(a=new Yd(this.g,a),be(this.Ba,a))};function ce(a){this.g=a;this.Ja=a.i(Sb);this.Ba=a.i(Xb)}ce.prototype.Zd=function(a){a=new $d(this.g,a);be(this.Ba,a)};function N(a,b){this.Oa=a;this.j=b;this.Ua=A()}r("lf.backstore.FirebaseRawBackStore",N);N.prototype.gd=f("j");N.prototype.hd=function(){throw new E(351);};function de(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ee(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
N.prototype.Ea=function(a){return de(this.j,"@rev/R").then(function(a){this.Ma=a;return de(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ua.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Ua.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return ee(d,b)}.bind(this))};
function fe(a,b,c){var d=a.Ua.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Ma};return ee(this.j,a)}.bind(a)):w()}N.prototype.rc=function(a){return fe(this,a,l(null)).then(function(){this.Ua.delete(a);return ee(this.j.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.rc;
N.prototype.mc=function(a,b,c){return fe(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ma+1,T:a.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.mc;N.prototype.sc=function(a,b){return fe(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ma+1,T:a.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.sc;N.prototype.Nc=function(a,b,c){return fe(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ma+1,T:a.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Nc;
N.prototype.tb=function(){throw new E(351);};N.prototype.createRow=N.prototype.tb;N.prototype.Cc=f("Oa");N.prototype.getVersion=N.prototype.Cc;N.prototype.cc=function(a){var b=x();a=this.Ua.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};N.prototype.dump=function(){var a={},b=Jb(this.Ua).map(function(b){return this.cc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function ge(a,b,c){Lb.call(this,c,b);this.j=a}t(ge,Lb);ge.prototype.H=function(a){return this.j.Ac(a)};
ge.prototype.oc=function(){var a=this.Ra.qb;if(0==a.size)this.X.resolve();else{var b=this.j.Ma+1;this.j.Ma=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var g=this.j.Ua.get(e);a.Ca.forEach(function(a,d){c[d]={R:b,T:g,P:a.s}});a.pa.forEach(function(a,d){c[d]={R:b,T:g,P:a[1].s}});a.Da.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.X.resolve():(this.j.Ma=b-1,c=C(a).map(function(a){return he(this.j,a.getName())},this),cb(c).then(this.X.reject.bind(this.X),this.X.reject.bind(this.X)))}.bind(this))}return this.X.ha};function ie(){this.ta=A()}function je(a,b){if(0==b.length)return C(a.ta);var c=[];b.forEach(function(a){a=this.ta.get(a)||null;null===a||c.push(a)},a);return c}ie.prototype.getData=f("ta");ie.prototype.get=function(a){return w(je(this,a))};function ke(a,b){b.forEach(function(a){this.ta.set(a.id(),a)},a)}ie.prototype.put=function(a){ke(this,a);return w()};function le(a,b){0==b.length||b.length==a.ta.size?a.ta.clear():b.forEach(function(a){this.ta.delete(a)},a)}
ie.prototype.remove=function(a){le(this,a);return w()};function me(a){return 0==a.ta.size?0:Jb(a.ta).reduce(function(a,c){return a>c?a:c},0)};function ne(a,b){this.m=a;this.uf=b;this.Mc=A();this.Ma=-1;this.L=A();this.Ua=A();this.Fd=null}m=ne.prototype;
m.Ea=function(a){this.j=this.uf.child(this.m.name());var b=a||function(){return w()};return de(this.j,"@db/version").then(function(a){return null===a?ee(this.j,oe(this),!0).then(function(){var a=new N(0,this.j);return b(a)}.bind(this)):a==this.m.version()?de(this.j,"@rev/R").then(function(a){this.Ma=a;return de(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ua.set(b,a[b]);a=this.m.ra().map(function(a){return he(this,a.getName())},this);return cb(a)}.bind(this)).then(function(){pe(this);
qe(this);return w()}.bind(this)):this.be(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new N(a,this.j);return c.Ea(this.m).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return ee(a,{version:this.m.version()},!0)}.bind(this))};
function qe(a){a.j.off();a.j.on("child_removed",a.fg.bind(a));a.Gd&&(a.Gd.off(),a.Mc.clear());a.Gd=a.j.orderByChild("R").startAt(a.Ma+1);a.Gd.on("value",a.Zd.bind(a))}function pe(a){nb=C(a.L).map(function(a){return me(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.fg=function(a){var b=a.val(),c=this.Mc.get(b.T)||null;null===c&&(c=D(),this.Mc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ma&&(this.Ma=b,a=re(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Jb(a.Da);0<e.length&&le(b,e);var g=C(a.Ca);a.pa.forEach(function(a){g.push(a[1])});ke(b,g)},this),0<a.length&&this.Hc(a),qe(this))};
function re(a,b){var c=D(),d=A();a.Ua.forEach(function(a,b){var h=this.L.get(b),k=new Uc(b);if(this.Mc.has(a)){var n=lc(this.Mc.get(a));n.forEach(function(a){c.add(a)});je(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([je(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.md()})}
function he(a,b){var c=x(),d=a.Ua.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new ie,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ke(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function oe(a){var b={};b["@db"]={version:a.m.version()};b["@rev"]={R:1};a.Ma=1;b["@table"]={};a.m.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ie);this.Ua.set(e,d)},a);return b}m.Cb=function(a,b){return new ge(this,a,b)};
m.Ac=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Hc=function(a){null!=this.Fd&&this.Fd(a)};function O(a,b,c,d){this.j=b;this.Wa=c;this.Oa=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",O);O.prototype.gd=f("j");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=f("Wa");O.prototype.getRawTransaction=O.prototype.hd;O.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};O.prototype.dropTable=O.prototype.rc;
function se(a,b,c,d){return new v(function(a,g){var h;try{var k=this.Wa.objectStore(b);h=k.openCursor()}catch(n){g(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=g},a)}function te(a){var b=null;return b=a instanceof ArrayBuffer?rb(a):a instanceof Date?a.getTime():a}
function ue(a,b,c){function d(a){var b=rc(a.value),d=b.s,e;for(e in d){var B=pb(d[e]);c(B);d[e]=B.Ia()}a.update(b.Ia())}function e(a){var b=pb(a.value);c(b);a.update(b.Ia())}return se(a,b,a.Xc?d:e,aa())}O.prototype.mc=function(a,b,c){var d=te(c);return ue(this,a,function(a){a.s[b]=d})};O.prototype.addTableColumn=O.prototype.mc;O.prototype.sc=function(a,b){return ue(this,a,function(a){delete a.s[b]})};O.prototype.dropTableColumn=O.prototype.sc;
O.prototype.Nc=function(a,b,c){return ue(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};O.prototype.renameTableColumn=O.prototype.Nc;function ve(a,b){var c=[];return new v(function(a,e){var g;try{g=this.Wa.objectStore(b).openCursor()}catch(h){e(h);return}g.onsuccess=function(){var b=g.result;if(b){if(this.Xc){var e;e=rc(b.value).s;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);g.onerror=e},a)}O.prototype.tb=function(a){var b={},c;for(c in a)b[c]=te(a[c]);return qb(b)};
O.prototype.createRow=O.prototype.tb;O.prototype.Cc=f("Oa");O.prototype.getVersion=O.prototype.Cc;O.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};O.prototype.dump=O.prototype.dump;O.prototype.cc=function(a){return ve(this,a).then(function(a){return a.map(function(a){return a.value})})};function we(a,b){this.aa=a;this.Kb=b}m=we.prototype;m.get=function(a){if(0==a.length)return this.xc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.aa.get(a)}catch(g){d(g);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return cb(a)};
m.xc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Kb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.aa.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.aa.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function xe(a,b,c,d,e){Lb.call(this,c,d);this.g=a;this.Wa=b;this.Xc=e;this.Wa.oncomplete=this.X.resolve.bind(this.X);this.Wa.onabort=this.X.reject.bind(this.X)}t(xe,Lb);xe.prototype.H=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.Wa.objectStore(a),new sc(a,b,0==c?ra(uc,this.g):vc)):new we(this.Wa.objectStore(a),b)};xe.prototype.oc=function(){return this.X.ha};function ye(a,b){this.g=a;this.m=b;this.Yc=b.Ye().Gf||!1}m=ye.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var g;try{g=b.open(this.m.name(),this.m.version())}catch(h){e(h);return}g.onerror=e;g.onupgradeneeded=function(a){ze(this,c,a).then(aa(),e)}.bind(this);g.onsuccess=function(b){this.j=b.target.result;this.ie().then(function(b){nb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function ze(a,b,c){var d=c.target.result,e=c.target.transaction;c=new O(c.oldVersion,d,e,a.Yc);Ae(d);a.m.ra().forEach(ra(a.Bf,d,e),a);return b(c)}function Ae(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Bf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.va().forEach(function(c){this.qc(a,b,c.l(),"btree")},this),this.qc(a,b,Be(c),"rowid"))};m.qc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Yc?new sc(a,pb,vc):new we(a,pb)).put([new tb(new sb(d))]))};
m.Cb=function(a,b){var c=Jb(b.Z());Xc(b).forEach(function(a){c.push(a)});var d=this.j.transaction(c,0==a?"readonly":"readwrite");return new xe(this.g,d,b,a,this.Yc)};
m.ie=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ha;try{ha=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(pa){d(pa);return}ha.onsuccess=function(a){(a=a.target.result)&&(g=Math.max(g,h(a)));c(g)};ha.onerror=function(){c(g)}})}var d=this.m.ra().map(function(a){return a.getName()}),e=this.j,g=0,h=function(a){return this.Yc?(a=rc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(g)})})};m.close=function(){this.j.close()};m.Ac=function(){throw new E(511);};m.subscribe=aa();m.Hc=aa();function Ce(a,b,c){Lb.call(this,c,b);this.aa=a;0==b&&this.X.resolve()}t(Ce,Lb);Ce.prototype.H=function(a){return this.aa.Ac(a)};Ce.prototype.oc=function(){this.X.resolve();return this.X.ha};function De(a){this.m=a;this.L=A()}m=De.prototype;m.Ea=function(){this.m.ra().forEach(this.Sf,this);return w()};m.Ac=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Cb=function(a,b){return new Ce(this,a,b)};function Ee(a,b){if(!a.L.has(b)){var c=new ie;a.L.set(b,c);return c}return null}m.Sf=function(a){Ee(this,a.getName());a.zb()&&(a.va().forEach(function(a){this.qc(a.l(),"btree")},this),this.qc(Be(a),"rowid"))};m.qc=function(a,b){var c=Ee(this,a);null===c||c.put([new tb(new sb(b))])};
m.close=aa();m.subscribe=aa();m.Hc=aa();function Fe(a){De.call(this,a);this.od=null}t(Fe,De);Fe.prototype.subscribe=function(a){null===this.od&&(this.od=a)};Fe.prototype.Hc=function(a){null===this.od||this.od(a)};function Ge(a,b,c){this.Wa=a;this.w=b;this.Kb=c}Ge.prototype.get=function(a){var b=this.Kb;return He(this.Wa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),g=0;g<d;++g)e[g]=b({id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)});return e})};
Ge.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){He(this.Wa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Ge.prototype.remove=function(a){He(this.Wa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ie(a,b,c){Lb.call(this,b,c);this.j=a;this.L=A();this.Id=[]}t(Ie,Lb);function Je(a){return a.replace(".","__d__").replace("#","__s__")}Ie.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ge(this,Je(a),b),this.L.set(a,c));return c};function He(a,b,c,d){var e=x();a.Id.push({sg:b,ig:c,transform:d,X:e});return e.ha}
Ie.prototype.oc=function(){var a=null,b=this.X.reject.bind(this.X),c=function(a,b){this.X.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.X.resolve(k)}0<this.Id.length?(a=k=this.Id.shift(),b.executeSql(k.sg,k.ig,e,c)):this.X.resolve(d)}.bind(this);0==this.nf?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.X.ha};function P(a,b,c){this.j=c;this.g=a;this.Oa=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.gd=f("j");P.prototype.getRawDBInstance=P.prototype.gd;P.prototype.hd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.hd;function Ke(a){return new Ie(a.j,new Wc(a.g,D()),1)}P.prototype.rc=function(a){var b=Ke(this);He(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.rc;
P.prototype.cc=function(a){var b=Ke(this);He(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),g=0;g<b;++g)e[g]={id:a[0].rows.item(g).id,value:JSON.parse(a[0].rows.item(g).value)};return w(e)})};function Le(a,b,c){var d=Ke(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(a){a.forEach(function(a){a=c(a);He(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.mc=function(a,b,c){var d=te(c);return Le(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.mc;P.prototype.sc=function(a,b){return Le(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.sc;P.prototype.Nc=function(a,b,c){return Le(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Nc;P.prototype.tb=function(a){var b={},c;for(c in a)b[c]=te(a[c]);return qb(b)};
P.prototype.createRow=P.prototype.tb;P.prototype.Cc=f("Oa");P.prototype.getVersion=P.prototype.Cc;function Me(a){He(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=Ke(this);Me(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};P.prototype.dump=P.prototype.dump;function Ne(a,b,c){this.g=a;this.m=b;this.rg=c||4194304}function Oe(a){return new Wc(a.g,D())}m=Ne.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.m.name(),"",this.m.name(),this.rg);if(null!=e)this.j=e,Pe(this,b).then(a,d);else throw new E(354);}catch(g){d(g)}},this)};
function Pe(a,b){var c=x(),d=new Ie(a.j,Oe(a),1);He(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);He(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.m.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.m.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ha}m.Cb=function(a,b){if(null!=this.j)return new Ie(this.j,b,a);throw new E(2);};m.close=aa();
m.Ac=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Hc=function(){throw new E(355);};m.be=function(a,b){var c=x();Qe(this).then(function(){a(new P(this.g,b,this.j)).then(function(){return this.ie()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Qe(a){var b=a.m.ra(),c=new Ie(a.j,Oe(a),1),d=new Ie(a.j,Oe(a),1);He(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.m.version()]);Me(c);return c.ia().then(function(a){function c(a,b){He(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(ob(new tb(new sb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){He(d,"DROP TABLE "+a,[])});var k=[],n=[],B=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.zb&&(a.va().forEach(function(a){a=
Je(a.l());k.push(a);n.push(a)}),a=Je(Be(a)),k.push(a),B.push(a))});k.forEach(function(a){He(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});B.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.ie=function(){var a=0,b=x(),c=function(b){var c=new Ie(this.j,Oe(this),0);He(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.m.ra().map(function(a){return c(a.getName())});cb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Re(a){this.o=A();this.Yb=A();a.ra().forEach(function(a){this.Yb.set(a.getName(),D())},this)}m=Re.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Yb.get(a).add(b.id())};m.wd=function(a,b){var c=this.Yb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function Se(a,b){return b.map(function(a){return this.get(a)},a)}
m.Za=function(a,b,c){var d=[],e=Math.min(b,c),g=Math.max(b,c);a=this.Yb.get(a);if(a.size<g-e)a.forEach(function(a){a>=e&&a<=g&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=g;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Yb.get(a).delete(b)};m.yc=function(a){return null!=a?this.Yb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Yb.clear()};function Te(a,b,c){var d=0,e=a.length;for(c=c||Ue;d<e;){var g=d+e>>1;0>c(a[g],b)?d=g+1:e=g}return d==e&&a[d]==b?d:~d}function Ue(a,b){return a-b}function Ve(a,b,c){c=Te(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function We(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Xe(){this.na=0}Xe.prototype.add=function(a,b){this.na+=b};Xe.prototype.remove=function(a,b){this.na-=b};Xe.prototype.clear=function(){this.na=0};function Ye(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Ze(a,b,c,d){this.w=a;this.U=b;this.ne=c;this.ob=new Xe;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=$e(this,d);this.qa=d=af(d)}else this.clear()}var bf=[];m=Ze.prototype;m.getName=f("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.bd=function(a){if(null==a)return this.Na().na;if(a instanceof $c){if(bd(a))return this.Na().na;if(fd(a))return this.get(a.c).length}return this.Za([a]).length};m.Na=f("ob");m.xc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.ob.na-a-d:d,count:a,le:0},c);return b?c.reverse():c};
m.Za=function(a,b,c,d){var e=cf(this.qa).b[0];if(!q(e)||0==c)return bf;b=b||!1;c=null!=c?Math.min(c,this.ob.na):this.ob.na;d=d||0;var g=Math.min(Math.max(this.ob.na-d,0),c);if(0==g)return bf;if(!q(a)||1==a.length&&a[0]instanceof $c&&bd(a[0]))return this.xc(g,b,c,d);a=this.U.jf(a);var h=Array(b?this.ob.na:g),k={count:0,W:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.U.td(a),b=this.U.Sd(a)?e:b[0],b=df(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Za(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,g-k.count);return b?We(h,b,c,d):h};m.clear=function(){this.qa=ef(this);this.ob.clear()};m.La=function(a){return this.qa.La(a)};m.min=function(){return this.Gc(this.U.min.bind(this.U))};m.max=function(){return this.Gc(this.U.max.bind(this.U))};m.Gc=function(a){var b=cf(this.qa),c=ff(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.ne?[b]:b]:[e,this.ne?[c]:c]};
m.Ga=f("ne");m.pc=f("U");m.Wd=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ia=function(){for(var a=[],b=cf(this.qa);b;)a.push(new y(b.oa,[b.b,b.B])),b=b.xa;return a};function gf(a,b,c,d){a=new Ze(b,a,c);d=hf(d,a);a.qa=d;return a}function jf(a,b){this.oa=a;this.F=b;this.ib=0;this.xa=this.Ab=this.C=null;this.b=[];this.B=[];this.h=[]}function ef(a){return new jf(nb++,a)}function Q(a){return 0==a.ib}m=jf.prototype;m.next=f("xa");
function kf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),g=b(a.Ab)+"{",g=Q(a)?g+e:g+d,g=g+"}"+b(a.C);a.xa&&(a=kf(a.xa),c=c+"  "+a[0],g=g+"  "+a[1]);return[c,g]}m.toString=function(){var a="",b=kf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function cf(a){return Q(a)?a:cf(a.h[0])}function ff(a){return Q(a)?a:ff(a.h[a.h.length-1])}
function mf(a,b){b&&(b.Ab=a);a&&(a.xa=b)}function $e(a,b){for(var c=b.length,d=0,e=ef(a),g=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=ef(e.F),mf(e,h),e=h)}return g}function nf(a){var b=a[0],c=ef(b.F);c.ib=b.ib+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function af(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=nf(c);else{var d=c.length,e=0,b=ef(a.F);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var g=c.slice(e,e+a),h=nf(g);h.C=b;b.h.length&&(b.b.push(g[0].b[0]),mf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=of(this,a);if(Q(this)){var c=bf;this.F.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Qa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.La=function(a){var b=of(this,a);return this.F.Qa(this.b[b],a)?!0:Q(this)?!1:this.h[b].La(a)};m.remove=function(a,b){pf(this,a,-1,b);if(null==this.C){var c=this;1==this.h.length&&(c=this.h[0],c.C=null);return c}return this};function qf(a){return Q(a)?a.b[0]:qf(a.h[0])}function rf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(qf(a.h[b]))}
function pf(a,b,c,d){var e=of(a,b),g=Q(a);if(!g){var h=a.F.Qa(a.b[e],b)?e+1:e;if(pf(a.h[h],b,h,d))rf(a);else return!1}else if(!a.F.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.F.Qa(a.b[e],b)){if(q(d)&&!a.F.Ga()&&g&&(h=a.B[e],d=Te(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Na().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);g&&(g=a.F.Ga()?1:a.B[e].length,a.B.splice(e,1),a.F.Na().remove(b,g))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.xa&&256<a.xa.b.length)b=a.xa,e=d=0,g=a.b.length+1;else if(a.Ab&&
256<a.Ab.b.length)b=a.Ab,d=a.Ab.b.length-1,e=Q(a)?d:d+1,g=0;else{b=!1;break a}a.b.splice(g,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.B:a.h;h=null;Q(a)?h=b.B:(h=b.h,h[e].C=a);d.splice(g,0,h[e]);h.splice(e,1);Q(b)||(rf(b),rf(a));b=!0}b||sf(a,c)}return!0}
function sf(a,b){var c,d,e;a.xa&&511>a.xa.b.length?(c=a.xa,e=d=0):a.Ab&&(c=a.Ab,d=c.b.length,e=Q(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.B:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.B:c.h,d);mf(a.Ab,a.xa);Q(c)||rf(c);-1!=b&&(a.C.b.splice(b,1),a.C.h.splice(b,1))}
m.xb=function(a,b,c){var d=of(this,a);if(Q(this)){if(this.F.Qa(this.b[d],a)){if(c)this.F.Na().remove(a,this.F.Ga()?1:this.B[d].length),this.B[d]=this.F.Ga()?b:[b];else{if(this.F.Ga())throw new E(201);if(!Ve(this.B[d],b))throw new E(109);}this.F.Na().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ga()?b:[b]);this.F.Na().add(a,1);512==this.b.length?(d=ef(this.F),a=ef(this.F),a.ib=1,a.b=[this.b[256]],a.h=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,mf(d,this.xa),mf(this,d),d=a):d=this;return d}d=this.F.Qa(this.b[d],a)?d+1:d;a=this.h[d].xb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?tf(this):this};function tf(a){var b=ef(a.F),c=ef(a.F);b.C=a.C;b.ib=a.ib+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.C=b;c.ib=a.ib;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;mf(c,a.xa);mf(a,c);return b}
function of(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Wd(a.b[e],b)?c=e+1:d=e}return c}function df(a,b){if(!Q(a)){var c=of(a,b);a.F.Qa(a.b[c],b)&&c++;return df(a.h[c],b)}return a}
m.Za=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.pc(),g=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[g],a)),B=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var ha=function(a,b){var c=a+b>>1;return c==a?c+1:c},pa=function(b,c,g){if(b>=c)return 0==g?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ha(b,c);if(h==c)return 0==g?c:-1;var n=d(e.sb(k[h],a));return 0==n?pa(b,h,n):-1==n?pa(h+1,c,g):pa(b+1,h,n)},Za=function(b,c){if(b>=c)return b;var g=d(e.sb(k[c],a));if(0==g)return c;
if(-1==g)return b;g=ha(b,c);if(g==c)return b;var h=d(e.sb(k[g],a));return 0==h?Za(g,c):1==h?Za(b,g-1):-1};0!=n&&(g=pa(g+1,h,B));-1!=g&&(h=Za(g,h),-1!=h&&h>=g&&uf(this,b,c,g,h+1))}};function uf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.F.Ga())!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d];else for(var g=0;g<a.B[d].length&&b.count<c.length;++g)!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d][g]}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ga()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--}else if(this.F.Ga())b[a.le++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function hf(a,b){for(var c=b.Na(),d=a.map(function(a){var d=new jf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ga()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)mf(d[e],d[e+1]);return 1<d.length?af(d[0]):d[0]};function vf(a){if(1==a.f.length)return new wf(a.f[0].kb);a=a.f.map(function(a){return a.kb});return new xf(a)}function wf(a){this.ad=0==a?yf:zf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?Af:Bf}t(wf,wc);function zf(a,b){return a>b?1:a<b?-1:0}function yf(a,b){return zf(b,a)}function Bf(a,b){return gd(a,b)}function Af(a,b){return gd(b,a)}m=wf.prototype;
m.sb=function(a,b){var c=this.Xd(b),d=[c.c==F,c.A==F];if(!d[0]){var e=this.ad(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.ad(a,c.A),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.ad(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Rd=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.jf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};
m.Sd=function(a){return this.Xd(a).c==F};m.td=function(a){a=this.Xd(a);return[a.c,a.A]};m.toString=function(){return this.ad==yf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function xf(a){this.Ka=a.map(function(a){return new wf(a)})}t(xf,wc);function Cf(a,b,c,d){for(var e=0,g=0;g<a.Ka.length&&0==e;++g)e=d(a.Ka[g],b[g],c[g]);return e}m=xf.prototype;m.compare=function(a,b){return Cf(this,a,b,function(a,b,e){return a.compare(b,e)})};
m.min=function(a,b){return Cf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Cf(this,a,b,function(a,b,e){return a.max(b,e)})};m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka.length&&(c[0]||c[1]);++d){var e=this.Ka[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Rd=function(a,b){for(var c=!0,d=0;d<this.Ka.length&&c;++d)c=this.Ka[d].Rd(a[d],b[d]);return c};
m.jf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ka.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ka[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ka.length&&0==c;++h)c=this.Ka[h].ce(a[h],b[h]);return c}.bind(this))};m.Sd=function(a){return this.Ka[0].Sd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.Ka[b].td(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].td(a)[1]},this);return[b,a]};function Df(a){this.fa=a;this.jb=D();this.Pc=new Xe;this.ob=new Xe}m=Df.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.jb.add(b),this.Pc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.jb.clear(),this.Pc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.jb.delete(b),this.Pc.remove(a,1)):(this.jb.clear(),this.Pc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?lc(this.jb):this.fa.get(a)};
m.bd=function(a){return this.fa.bd(a)};m.Na=function(){Ye(this.ob,[this.fa.Na(),this.Pc]);return this.ob};m.Za=function(a,b,c,d){b=this.fa.Za(a,b,c,d);return null!=a?b:b.concat(lc(this.jb))};m.clear=function(){this.jb.clear();this.fa.clear()};m.La=function(a){return null===a?0!=this.jb.size:this.fa.La(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new y(-2,lc(this.jb))].concat(this.fa.Ia())};m.pc=function(){return this.fa.pc()};
function Ef(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),g=new Df(c);d.forEach(function(a){g.jb.add(a)});return g}m.Ga=function(){return this.fa.Ga()};function Ff(a){this.w=a;this.nb=D();this.U=new wf(1)}m=Ff.prototype;m.getName=f("w");m.add=function(a){if("number"!=typeof a)throw new E(103);this.nb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.nb.delete(a)};m.get=function(a){return this.La(a)?[a]:[]};m.min=function(){return this.Gc(this.U.min.bind(this.U))};m.max=function(){return this.Gc(this.U.max.bind(this.U))};
m.Gc=function(a){if(0==this.nb.size)return null;var b=lc(this.nb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.nb.size};m.Za=function(a,b,c,d){var e=a||[ed()];a=lc(this.nb).filter(function(a){return e.some(function(b){return this.U.Rd(a,b)},this)},this);return We(a,b,c,d)};m.clear=function(){this.nb.clear()};m.La=function(a){return this.nb.has(a)};m.Ia=function(){return[new y(0,lc(this.nb))]};m.pc=f("U");
function Gf(a,b){var c=new Ff(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ga=l(!0);m.Na=function(){var a=new Xe;a.na=this.nb.size;return a};function Hf(a){this.g=a;this.Ja=a.i(Sb);this.D=a.i(Ub);this.ca=a.i(Tb)}Hf.prototype.Ea=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?If(this,a):Jf(this,a)).then(c)}.bind(this);return c()};function Jf(a,b){var c=new Wc(a.g,D([b])),c=a.Ja.Cb(0,c),d=c.H(b.getName(),b.Lb.bind(b)).get([]).then(function(a){this.ca.wd(b.getName(),a);Kf(this,b,a)}.bind(a));c.ia();return d}
function Kf(a,b,c){var d=a.D.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})})}function If(a,b){var c=new Wc(a.g,D([b])),d=a.Ja.Cb(0,c),c=d.H(b.getName(),b.Lb).get([]).then(function(a){this.ca.wd(b.getName(),a)}.bind(a)),e=b.va().map(function(a){return Lf(this,a,d)},a).concat(Mf(a,b,d));d.ia();return cb(e.concat(c))}
function Lf(a,b,c){c=c.H(b.l(),pb,1);var d=vf(b);return c.get([]).then(function(a){if(1<a.length){if(Nf(b)){var c=gf.bind(void 0,d,b.l(),b.Ec);a=Ef(c,a.slice(1))}else a=gf(d,b.l(),b.Ec,a.slice(1));this.D.set(b.Qc,a)}}.bind(a))}function Mf(a,b,c){return c.H(Be(b),pb,1).get([]).then(function(a){1<a.length&&(a=Gf(Be(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function Of(){this.aa=A();this.ic=A()}Of.prototype.Ea=function(a){a.ra().forEach(function(a){var c=[];this.ic.set(a.getName(),c);var d=Be(a);if(null===this.get(d)){var e=new Ff(d);c.push(e);this.aa.set(d,e)}a.va().forEach(function(a){var b;b=vf(a);b=new Ze(a.l(),b,a.Ec);b=Nf(a)?new Df(b):b;c.push(b);this.aa.set(a.l(),b)},this)},this);return w()};Of.prototype.get=function(a){return this.aa.get(a)||null};
Of.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.aa.set(b.getName(),b)};function Pf(a){this.hc=[];q(a)&&this.add(a)}Pf.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};Pf.prototype.La=function(a){return this.hc.some(function(b){return b.contains(a)})};Pf.prototype.wa=f("hc");
Pf.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(gd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(cd(c,a[d])){var e=a[d],g=ed();if(c.c!=F&&e.c!=F){var h=dd(c.c,e.c,!0);1!=h?(g.c=c.c,g.da=0!=h?c.da:c.da&&e.da):(g.c=e.c,g.da=e.da)}c.A!=F&&e.A!=F&&(h=dd(c.A,e.A,!1),-1!=h?(g.A=c.A,g.ma=0!=h?c.ma:c.ma&&e.ma):(g.A=e.A,g.ma=e.ma));c=g}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function Sf(a,b){var c=[];a.wa().map(function(a){return b.wa().map(function(b){var c;if(cd(a,b)){c=ed();var h=dd(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;a.A==F||b.A==F?b=a.A==F?b:a:(h=dd(a.A,b.A,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.A=b.A;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Pf(c.filter(function(a){return null!==a}))};function Tf(a,b){var c=[],d=null,e=null;Hd(a,function(a){var h=b(a);null==a.getParent()?e=h:M(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function Uf(a){return Vf(a,function(a){return null===a.h})}
function Wf(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,g){a.removeChild(d);null===b||Ed(b,d,c+g)});return{parent:b,children:d}}function Xf(a,b){L(a).slice().forEach(function(c){a.removeChild(c);M(b,c)});M(a,b)}function Yf(a){var b=Dd(a,0);Wf(a);Xf(b,a);return b}
function Zf(a,b,c){var d=Dd(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;Wf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Fd(d,h);M(k,e);Ed(d,k,h)}});return d}function $f(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Fd(e,a),Ed(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);M(d,a)});return c}function Vf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function ag(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Hd(a,function(a){for(var b=0;b<Cd(a);b++)d+="-";d+=c(a)});return d};function bg(a){Id.call(this);this.Rb=a;this.$a=!1}t(bg,Id);m=bg.prototype;m.Jb=function(){return Tf(this,function(a){if(a instanceof bg){var b=new bg(a.Rb);b.$a=a.$a;a=a.V();b.oa=a;return b}return a.Jb()})};m.gb=function(a){var b=a||[];Hd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=D(b);return lc(a)};m.vd=function(a){this.$a!=a&&(this.$a=a,this.Rb="and"==this.Rb?"or":"and",L(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return cg(this,b)};function cg(a,b){return"and"==a.Rb?md(b):nd(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function dg(){this.o=A();this.size=0}m=dg.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.wd=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:lc(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Jb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,lc(b))});return a};function eg(a,b,c){Id.call(this);this.ga=a;this.la=b;this.G=c;this.Yd=null;a=ud.zc();this.tc=Ad(a,this.ga.I(),this.G);this.Xf=a.Ne.get(this.ga.I())||null}t(eg,Id);m=eg.prototype;m.Jb=function(){var a=new eg(this.ga,this.la,this.G),b=this.V();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new eg(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ga);a=I(a,this.la);return this.tc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ga.l()+" "+this.G+" "+this.la.l()+")"};
function fg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.tc=Ad(ud.zc(),a.ga.I(),a.G)}return[e,d]}return[d,e]}function gg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function hg(a,b,c){null===a.Yd&&(a.Yd=gg(a.la.H()));var d=new pd(new y(-1,a.Yd),!1);return sd(b,c,d,[J(a.la.H())])}
function ig(a,b,c,d){var e=[b,c];d||(e=fg(a,b,c));b=e[0];c=e[1];var e=b,g=c,h=a.ga,k=a.la;d&&(e=c,g=b,h=a.la,k=a.ga);var n=new dg,B=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var ha=H(e),pa=H(g);g.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=sd(a,pa,b,ha);B.push(b)}):d&&B.push(hg(this,a,pa))}.bind(a));a=H(b).concat(H(c));return new G(B,a)}
function jg(a,b,c,d,e){function g(a,b){var c=new pd(b,1<ha.length),c=sd(a,pa,c,ha);B.push(c)}var h=d.Qf.H(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var B=[],ha=H(n),pa=H(k);k.entries.forEach(function(a){var b=this.Xf(I(a,d.cg)),b=d.index.get(b);0!=b.length&&(d.index.Ga()?g(a,e.get(b[0])):Se(e,b).forEach(g.bind(null,a)))},a);a=H(k).concat(H(n));return new G(B,a)};function kg(a,b,c){return null===b?new Kd(a,b,c):q(b.l)?new eg(a,b,c):new Kd(a,b,c)};var lg={};r("lf.schema.DataStoreType",lg);lg.INDEXED_DB=0;lg.MEMORY=1;lg.LOCAL_STORAGE=2;lg.FIREBASE=3;lg.WEB_SQL=4;lg.OBSERVABLE_STORE=5;function mg(a,b,c,d){this.Qc=a;this.name=b;this.Ec=c;this.f=d}mg.prototype.l=function(){return this.Qc+"."+this.name};function Nf(a){return a.f.some(function(a){return a.ba.Dc()})}function R(a,b,c,d){this.w=a;this.ka=c;this.K=b;this.qd=d;this.eb=null}r("lf.schema.Table",R);R.prototype.getName=f("w");R.prototype.getName=R.prototype.getName;R.prototype.Ya=f("eb");
function J(a){return a.eb||a.w}R.prototype.nc=function(a){var b=new this.constructor(this.w);b.eb=a;b.ng=this.ng;return b};R.prototype.as=R.prototype.nc;R.prototype.createRow=R.prototype.tb;R.prototype.deserializeRow=R.prototype.Lb;R.prototype.va=f("ka");R.prototype.getIndices=R.prototype.va;R.prototype.gb=f("K");R.prototype.getColumns=R.prototype.gb;R.prototype.getConstraint=R.prototype.Db;R.prototype.zb=f("qd");R.prototype.persistentIndex=R.prototype.zb;function Be(a){return a.w+".#"};function S(a,b){this.child=a;this.Ib=b;this.eb=null}m=S.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.l=function(){return this.Ib+"("+this.child.l()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.l()};m.I=function(){return this.child.I()};m.Ya=f("eb");m.va=function(){return[]};m.ua=l(null);m.Dc=l(!1);m.nc=function(a){this.eb=a;return this};S.prototype.as=S.prototype.nc;
function ng(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function og(a){this.eb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=og.prototype;m.getName=l("*");m.l=function(){return this.getName()};m.toString=function(){return this.l()};m.H=f("S");m.I=l(4);m.Ya=f("eb");m.va=function(){return[]};m.ua=l(null);m.Dc=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function pg(a){return new S(a||new og,"COUNT")}r("lf.fn.count",pg);function qg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",qg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.If=b}t(T,K);T.prototype.exec=function(a,b){switch(this.If){case 1:return rg(this,a,b);case 0:return sg(this,a,b);default:return tg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Rc=function(){return this.toString()};function tg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function rg(a,b,c){return Dd(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function sg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function ug(a){T.call(this,0,1);this.te=a}t(ug,T);ug.prototype.toString=function(){return"aggregation("+this.te.map(function(a){return a.l()}).toString()+")"};ug.prototype.ea=function(a,b){b.forEach(function(a){vg(new wg(a,this.te))},this);return b};function wg(a,b){this.Ha=a;this.K=b}
function vg(a){a.K.forEach(function(a){a=ng(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=ng(d).slice(-1)[0],g=d.child instanceof S?jd(this.Ha,d.child):this.Ha;if(null!==g.Xa&&g.Xa.has(d.l()))break;g=xg(d.Ib,g,e);e=this.Ha;null===e.Xa&&(e.Xa=A());e.Xa.set(d.l(),g)}},a)}
function xg(a,b,c){var d=null;switch(a){case "MIN":d=yg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=yg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=zg(b,c);break;case "COUNT":d=Ag(b,c);break;case "SUM":d=Bg(b,c);break;case "AVG":a=Ag(b,c);0<a&&(d=Bg(b,c)/a);break;case "GEOMEAN":d=Cg(b,c);break;default:d=Dg(b,c)}return d}function yg(a,b,c){return a.entries.reduce(function(a,e){var g=I(e,b);return null===g?a:null===a?g:c(a,g)},null)}
function Ag(a,b){return b instanceof og?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(I(d,b))?0:1)},0)}function Bg(a,b){return yg(a,b,function(a,b){return b+a})}function Dg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:yb.apply(null,c)}function Cg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function zg(a,b){var c=A();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(C(c),H(a))};function Eg(a,b){this.Aa=a;this.$=b}Eg.prototype.hb=f("Aa");Eg.prototype.Z=f("$");function Fg(){K.call(this)}t(Fg,K);function Gg(a,b){K.call(this);this.table=a;this.values=b}t(Gg,Fg);function Hg(a,b){Gg.call(this,a,b)}t(Hg,Gg);function Ig(a){K.call(this);this.table=a}t(Ig,Fg);Ig.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Jg(a,b){K.call(this);this.table=a;this.oe=b}t(Jg,Fg);
Jg.prototype.toString=function(){var a=[];this.oe&&(a=this.oe.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Kg(a){K.call(this);this.J=a}t(Kg,Fg);Kg.prototype.toString=function(){return"select("+this.J.toString()+")"};function Lg(a){K.call(this);this.table=a}t(Lg,Fg);Lg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};
function Mg(){K.call(this)}t(Mg,Fg);Mg.prototype.toString=l("cross_product");function Ng(a,b){K.call(this);this.f=a;this.Nb=b}t(Ng,Fg);Ng.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Og(a){K.call(this);this.M=a}t(Og,Fg);Og.prototype.toString=function(){return"order_by("+Td(this.M)+")"};function Pg(a){K.call(this);this.f=a}t(Pg,Fg);
Pg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Qg(a){K.call(this);this.f=a}t(Qg,Fg);Qg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Rg(a){K.call(this);this.W=a}t(Rg,Fg);Rg.prototype.toString=function(){return"limit("+this.W+")"};function Sg(a){K.call(this);this.N=a}t(Sg,Fg);Sg.prototype.toString=function(){return"skip("+this.N+")"};function Tg(a,b){K.call(this);this.J=a;this.Pb=b}t(Tg,Fg);
Tg.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function Ug(){};function Vg(){}t(Vg,Ug);Vg.prototype.mb=function(a){this.Y=a;this.Va(this.Y);return this.Y};Vg.prototype.Va=function(a){if(a instanceof Kg){var b=Wg(this,a.J),b=Xg(this,b);$f(a,a,b[0],b[1]);a==this.Y&&(this.Y=b[0]);a=b[0]}L(a).forEach(function(a){this.Va(a)},this)};function Wg(a,b){if(0==L(b).length||"and"!=b.Rb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return Wg(this,a)},a);return Ca(c)}
function Xg(a,b){var c=null,d=null;b.map(function(a,b){var h=new Kg(a);0==b?c=h:M(d,h);d=h},a);return[c,d]};function Yg(){}t(Yg,Ug);Yg.prototype.mb=function(a,b){if(3>b.c.length)return a;this.Y=a;this.Va(this.Y);return this.Y};Yg.prototype.Va=function(a){if(a instanceof Mg)for(;2<L(a).length;){for(var b=new Mg,c=0;2>c;c++){var d=Fd(a,0);M(b,d)}Ed(a,b,0)}L(a).forEach(function(a){this.Va(a)},this)};function Zg(){T.call(this,0,0)}t(Zg,T);Zg.prototype.toString=l("cross_product");Zg.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],g=H(c),h=H(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var B=sd(c.entries[k],g,d.entries[n],h);e.push(B)}c=H(c).concat(H(d));return[new G(e,c)]};function $g(a,b){Wd.call(this,a,b);this.Ba=a.i(Xb);this.Fb=a.i(Yb)}t($g,Wd);$g.prototype.getPriority=l(2);$g.prototype.ae=function(a){0==this.I()?ah(this,a):this.Oc()};function ah(a,b){a.sd.forEach(function(a,d){a instanceof Sd&&Zd(this.Fb,a,b[d])},a)}$g.prototype.Oc=function(){var a=ae(this.Fb,this.Z());0!=a.length&&(a=new Yd(this.global,a),be(this.Ba,a))};function bh(a){Nd.call(this,a)}t(bh,Nd);bh.prototype.Z=function(){var a=D();a.add(this.c);ch(this,this.c.getName(),a);return a};function ch(a,b,c){var d=dh(a.ba.info(),b,1);dh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){ch(this,a.getName(),c)},a)}bh.prototype.clone=function(){var a=new bh(this.ba);Qd(a,this);a.c=this.c;return a};bh.prototype.bind=function(a){bh.Hb.bind.call(this,a);Rd(this,a);return this};function eh(a){Nd.call(this,a)}t(eh,Nd);eh.prototype.Z=function(){var a=D();a.add(this.Fa);var b=this.ba.info();fh(this.Fa.getName(),b.Ve).forEach(a.add.bind(a));this.Zb&&dh(b,this.Fa.getName()).forEach(a.add.bind(a));return a};eh.prototype.clone=function(){var a=new eh(this.ba);Qd(a,this);a.Fa=this.Fa;this.values&&(a.values=this.values instanceof td?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
eh.prototype.bind=function(a){eh.Hb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof td?a[this.$b.ua()]:this.$b.map(function(b){return b instanceof td?a[b.ua()]:b}));return this};function gh(a){Nd.call(this,a)}t(gh,Nd);gh.prototype.Z=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.l()}),c=this.ba.info();hh(c,b).forEach(a.add.bind(a));ih(c,b).forEach(a.add.bind(a));return a};gh.prototype.clone=function(){var a=new gh(this.ba);Qd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};gh.prototype.bind=function(a){gh.Hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});Rd(this,a);return this};function jh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+rb(b)+"'";default:return"'"+b.toString()+"'"}}function kh(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Fa.gb(),c=c+(" INTO "+a.Fa.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var g=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":jh(c.I(),d)});return c+g.join(", ")+");"}).join("\n")}
function lh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function mh(a,b,c,d){return a instanceof td?"?"+a.ua().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return jh(c,a)}).join(", ")+")":"between"==b?jh(c,a[0])+" AND "+jh(c,a[1]):jh(c,a).toString()}
function nh(a,b){return L(a).map(function(a){return"("+oh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function ph(a){return[a.ga.l(),lh(a.G),a.la.l()].join(" ")}function oh(a,b){if(a instanceof Kd){var c=a.O.l(),d=lh(a.G),e=mh(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof bg)return nh(a,b);if(a instanceof eg)return ph(a);throw new E(357,typeof a);}
function qh(a,b){var c=oh(a,b);return c?" WHERE "+c:""}function rh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.l()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+jh(a.O.I(),a.value).toString()}).join(", ");a.u&&(c+=qh(a.u,b));return c+";"}
function sh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ya()?a.l()+" AS "+a.Ya():a.l()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=th(a,b):(c+=a.c.map(uh).join(", "),a.u&&(c+=qh(a.u,b)));if(a.M)var d=a.M.map(function(a){return a.O.l()+(0==a.kb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.l()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function uh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function th(a,b){for(var c=Vf(a.u,function(a){return a instanceof eg}),d=c.map(ph),e=uh(a.c[0]),g=1;g<a.c.length;g++)var h=uh(a.c[g]),e=a.yb.has(c[d.length-g].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-g]+")");c=Dd(a.u,0);c instanceof eg||(e+=" WHERE "+oh(c,b));return e}
function vh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof eh)return kh(d,c);if(d instanceof bh){var e="DELETE FROM "+d.c.getName();d.u&&(e+=qh(d.u,c));return e+";"}if(d instanceof gh)return rh(d,c);if(d instanceof Sd)return sh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.mg=a.i(Vb);this.Ba=a.i(Xb);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.fb()}catch(a){return $a(a)}return new v(function(a,c){var d=new $g(this.global,[this.Bc()]);be(this.Ba,d).then(function(c){a(hd(c[0]))},c)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Kf=function(){var a=function(a){return a.Rc(this.a)+"\n"}.bind(this);return ag(wh(this).hb(),a)};U.prototype.explain=U.prototype.Kf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.tg=function(a){return vh(this,a)};U.prototype.toSql=U.prototype.tg;U.prototype.fb=aa();function wh(a){if(null==a.We){var b;b=a.mg;var c=a.a,d=b.$f.create(c);b=b.jg.create(d,c);a.We=b}return a.We}U.prototype.Bc=function(){return{context:this.a.clone(),de:wh(this)}};function xh(a){U.call(this,a,new bh(a.i(Zb)))}t(xh,U);r("lf.query.DeleteBuilder",xh);xh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};xh.prototype.from=xh.prototype.c;xh.prototype.u=function(a){this.Dd();this.a.u=a;return this};xh.prototype.where=xh.prototype.u;xh.prototype.Dd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.u)throw new E(516);};xh.prototype.fb=function(){xh.Hb.fb.call(this);if(null==this.a.c)throw new E(517);};function yh(a,b){U.call(this,a,new eh(a.i(Zb)));this.a.Zb=b||!1}t(yh,U);r("lf.query.InsertBuilder",yh);yh.prototype.fb=function(){yh.Hb.fb.call(this);var a=this.a;if(null==a.Fa||null==a.values)throw new E(518);if(a.Zb&&null===a.Fa.Db().fd())throw new E(519);};yh.prototype.Fa=function(a){if(null!=this.a.Fa)throw new E(520);this.a.Fa=a;return this};yh.prototype.into=yh.prototype.Fa;
yh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof td||a.some(function(a){return a instanceof td})?this.a.$b=a:this.a.values=a;return this};yh.prototype.values=yh.prototype.values;function zh(a){return Ah("and",Array.prototype.slice.call(arguments))}r("lf.op.and",zh);r("lf.op.or",function(a){return Ah("or",Array.prototype.slice.call(arguments))});function Ah(a,b){var c=new bg(a);b.forEach(function(a){M(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function V(a,b){U.call(this,a,new Sd(a.i(Zb)));this.De=this.yd=!1;this.a.f=b;Bh(this);Ch(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.fb=function(){V.Hb.fb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.W)||q(a.Xb)&&!q(a.N))throw new E(523);null!=this.a.ja?Dh(this):Eh(this)};function Bh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Dh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.l()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.l()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}function Eh(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Ch(a){a.a.f.forEach(function(a){if(a instanceof S&&!Fh(a.Ib,a.I()))throw new E(527,a.l());},a)}function Gh(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.De)throw new E(515);this.De=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.u=function(a){Gh(this,548);if(this.yd)throw new E(516);this.yd=!0;Hh(this,a);return this};V.prototype.where=V.prototype.u;
function Hh(a,b){if(null!=a.a.u){var c=zh(b,a.a.u);a.a.u=c}else a.a.u=b}V.prototype.Tf=function(a,b){Gh(this,542);if(this.yd)throw new E(547);this.a.c.push(a);Hh(this,b);return this};V.prototype.innerJoin=V.prototype.Tf;V.prototype.Yf=function(a,b){Gh(this,542);if(!(b instanceof eg))throw new E(541);if(this.yd)throw new E(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=D());var c=b;J(a)!=J(b.la.H())&&(c=b.reverse());this.a.yb.add(c.V());Hh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.Yf;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Qb))throw new E(528);if(a instanceof td)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.N=function(a){if(null!=(this.a.N||this.a.Xb))throw new E(529);if(a instanceof td)this.a.Xb=a;else{if(0>a)throw new E(531);this.a.N=a}return this};V.prototype.skip=V.prototype.N;V.prototype.M=function(a,b){Gh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({O:a,kb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.M;V.prototype.ja=function(a){Gh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Fh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.$c=null;return a};V.prototype.clone=V.prototype.clone;function Ih(a,b){U.call(this,a,new gh(a.i(Zb)));this.a.table=b}t(Ih,U);r("lf.query.UpdateBuilder",Ih);Ih.prototype.set=function(a,b){var c={Wc:b instanceof td?b.ua():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Ih.prototype.set=Ih.prototype.set;Ih.prototype.u=function(a){this.Dd();this.a.u=a;return this};Ih.prototype.where=Ih.prototype.u;Ih.prototype.Dd=function(){if(null!=this.a.u)throw new E(516);};
Ih.prototype.fb=function(){Ih.Hb.fb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof td}))throw new E(501);};function Jh(a){this.a=a;this.Aa=null}Jh.prototype.fc=function(){null===this.Aa&&(this.Aa=this.dd());return this.Aa};function Kh(a){Jh.call(this,a)}t(Kh,Jh);Kh.prototype.dd=function(){return this.a.Zb?new Hg(this.a.Fa,this.a.values):new Gg(this.a.Fa,this.a.values)};function Lh(a){Jh.call(this,a)}t(Lh,Jh);Lh.prototype.dd=function(){var a=new Jg(this.a.table,this.a.set),b=null!=this.a.u?new Kg(this.a.u.Jb()):null,c=new Lg(this.a.table);null===b?M(a,c):(M(b,c),M(a,b));return a};function Mh(a,b,c){this.Aa=a;this.ee=b;this.Ub=c}Mh.prototype.fc=function(){this.Ub.forEach(function(a){this.Aa=a.mb(this.Aa,this.ee)},this);return this.Aa};function Nh(a,b){Jh.call(this,a);this.Ub=b}t(Nh,Jh);Nh.prototype.dd=function(){var a=new Ig(this.a.c),b=null!=this.a.u?new Kg(this.a.u.Jb()):null,c=new Lg(this.a.c);null===b?M(a,c):(M(b,c),M(a,b));return(new Mh(a,this.a,this.Ub)).fc()};function Oh(){}t(Oh,Ug);Oh.prototype.mb=function(a,b){if(2>b.c.length)return a;this.Y=a;this.Va(this.Y,b);return this.Y};Oh.prototype.Va=function(a,b){if(a instanceof Kg&&a.J instanceof eg){var c=a.J.V(),d=Dd(a,0);d instanceof Mg&&(c=null!=b.yb&&b.yb.has(c),c=new Tg(a.J,c),$f(a,d,c,c),a==this.Y&&(this.Y=c),a=c)}L(a).forEach(function(a){this.Va(a,b)},this)};function Ph(){this.Vc=D()}t(Ph,Ug);Ph.prototype.mb=function(a,b){this.Vc.clear();if(!q(b.u))return a;this.Y=a;this.Va(this.Y);this.Vc.clear();return this.Y};Ph.prototype.Va=function(a){if(Qh(a)){var b=a.J instanceof Kd?Rh(this,a):Sh(this,a);this.Vc.add(a);b==a&&(b=Dd(a,0));null!==b&&(ea(b.getParent())&&(this.Y=b),Qh(b)&&!this.Vc.has(b)&&this.Va(b))}else L(a).forEach(function(a){this.Va(a)},this)};
function Th(a,b,c){var d=b;if(Dd(b,0)instanceof Kg)d=Yf(b),Th(a,b,c);else if(Uh(b)){var e=[],d=Zf(b,c,function(a){a=new Kg(a.J);e.push(a);return a});e.forEach(function(a){Th(this,a,c)},a)}return d}function Rh(a,b){var c=D([J(b.J.O.H())]),d=function(a){return Vh(this,a,c)}.bind(a);return Th(a,b,d)}function Sh(a,b){var c=D([J(b.J.ga.H()),J(b.J.la.H())]),d=function(a){return Vh(this,a,c)}.bind(a);return Th(a,b,d)}
function Vh(a,b,c){var d=D();Uf(b).forEach(function(a){d.add(J(a.table))},a);b instanceof Lg&&d.add(J(b.table));return mc(d,c)}function Qh(a){return a instanceof Kg&&!(a.J instanceof bg)}function Uh(a){a=Dd(a,0);return a instanceof Mg||a instanceof Tg};function Wh(a,b){Jh.call(this,a);this.Ub=b;this.$e=this.Re=this.hf=this.Ue=this.ue=this.Ge=this.gf=this.Ae=this.kf=null}t(Wh,Jh);
Wh.prototype.dd=function(){Xh(this);2<=this.a.c.length&&(this.Ae=new Mg);this.gf=null!=this.a.u?new Kg(this.a.u.Jb()):null;this.a.M&&(this.Ue=new Og(this.a.M));null!=this.a.N&&0<this.a.N&&(this.hf=new Sg(this.a.N));null!=this.a.W&&(this.Re=new Rg(this.a.W));null!=this.a.ja&&(this.Ge=new Qg(this.a.ja));Yh(this);this.$e=new Ng(this.a.f||[],this.a.ja||null);var a=Zh(this);return(new Mh(a,this.a,this.Ub)).fc()};
function Zh(a){for(var b=[a.Re,a.hf,a.$e,a.Ue,a.ue,a.Ge,a.gf,a.Ae],c=null,d=null,e=0;e<b.length;e++){var g=b[e];null!==g&&(null===d?d=g:M(b[c],g),c=e)}a.kf.forEach(function(a){M(b[c],a)});return d}function Xh(a){a.kf=a.a.c.map(function(a){return new Lg(a)},a)}function Yh(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.M&&a.a.M.forEach(function(a){a.O instanceof S&&b.push(a.O)});0<b.length&&(a.ue=new Pg(b))};function $h(){this.je=[new Vg,new Yg,new Ph,new Oh];this.Jd=[new Vg]}$h.prototype.create=function(a){var b=null;if(a instanceof eh)b=new Kh(a);else if(a instanceof bh)b=new Nh(a,this.Jd);else if(a instanceof Sd)b=new Wh(a,this.je);else if(a instanceof gh)b=new Lh(a);else throw new E(513);b=b.fc();return new Eg(b,a.Z())};function ai(a){T.call(this,0,1);this.S=a}t(ai,T);ai.prototype.toString=function(){return"delete("+this.S.getName()+")"};ai.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.S,c);return[ld()]};function bi(a,b){T.call(this,0,-1);this.table=b;this.D=a.i(Ub)}t(bi,T);bi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};bi.prototype.ea=function(){var a=this.D.get(Be(this.table)),b=new G([],[this.table.getName()]),c=pg(),a=a.Na().na;null===b.Xa&&(b.Xa=A());b.Xa.set(c.l(),a);return[b]};function ci(a,b){T.call(this,0,-1);this.ca=a.i(Tb);this.D=a.i(Ub);this.table=b}t(ci,T);ci.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};ci.prototype.ea=function(){var a=this.D.get(Be(this.table)).Za();return[od(Se(this.ca,a),[J(this.table)])]};function di(a){this.g=a}t(di,Ug);di.prototype.mb=function(a,b){this.Y=a;if(!this.Ed(b))return a;var c=Vf(a,function(a){return a instanceof ci})[0],d=new bi(this.g,c.table);$f(c,c,d,d);return this.Y};di.prototype.Ed=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.W&&null==a.N&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Ib&&a.child instanceof og):!1};function ei(a){T.call(this,0,1);this.Fe=a}t(ei,T);ei.prototype.toString=function(){return"groupBy("+this.Fe.map(function(a){return a.l()}).toString()+")"};ei.prototype.ea=function(a,b){return fi(this,b[0])};function fi(a,b){var c=new dg,d=function(a){return this.Fe.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function gi(a,b,c){T.call(this,0,0);this.D=a.i(Ub);this.ca=a.i(Tb);this.J=b;this.Pb=c;this.Bd="eq"==this.J.G?0:2;this.He=null}t(gi,T);var hi=["hash","index_nested_loop","nested_loop"];gi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+hi[this.Bd]+", "+this.J.toString()+")"};
gi.prototype.ea=function(a,b){switch(this.Bd){case 0:return[ig(this.J,b[0],b[1],this.Pb)];case 1:return[jg(this.J,b[0],b[1],this.He,this.ca)];default:var c=this.J,d=b[0],e=b[1],g=this.Pb,h=[d,e];g||(h=fg(c,d,e));for(var d=h[0],e=h[1],h=[],k=H(d),n=H(e),B=d.entries.length,ha=e.entries.length,pa=ha+256-1>>8,Za=0;Za<pa;){for(var Wb=0;Wb<B;Wb++){var Qf=!1,Rf=I(d.entries[Wb],c.ga);if(null!==Rf)for(var ki=Math.min(Za+1<<8,ha),Qc=Za<<8;Qc<ki;Qc++)if(c.tc(Rf,I(e.entries[Qc],c.la))){var Qf=!0,lj=sd(d.entries[Wb],
k,e.entries[Qc],n);h.push(lj)}g&&!Qf&&h.push(hg(c,d.entries[Wb],k))}Za++}c=H(d).concat(H(e));return[new G(h,c)]}};function ii(a,b){a.Bd=1;var c=a.D.get(b.ua().l());a.He={Qf:b,cg:b==a.J.ga?a.J.la:a.J.ga,index:c}};function ji(a){T.call(this,0,-1);this.bf=a}t(ji,T);ji.prototype.toString=function(){return"no_op_step("+H(this.bf[0]).join(",")+")"};ji.prototype.ea=f("bf");function li(){}t(li,Ug);li.prototype.mb=function(a,b){this.Y=a;if(!this.Ed(b))return a;Vf(a,function(a){return a instanceof gi}).forEach(this.lg,this);return this.Y};li.prototype.Ed=function(a){return 1<a.c.length};
li.prototype.lg=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof ci))return null;b=J(b.table)==J(a.J.la.H())?a.J.la:a.J.ga;return ea(b.ua())?null:b},c=b(Dd(a,0)),b=b(Dd(a,1));if(null!==c||null!==b){b=null===b?c:b;ii(a,b);var d=new G([],[J(b.H())]);Gd(a,new ji([d]),b==c?0:1)}}};function mi(a){a=a.map(function(a){return a.wa()});a=Db.apply(null,a);var b=[];Cb(a,function(a){b.push(a)});return b}function ni(a){this.Ob=a}ni.prototype.ed=function(){return 1==this.Ob.f.length?[ed()]:[this.Ob.f.map(function(){return ed()})]};function oi(a,b){this.Ob=a;this.za=b;this.Hd=this.Pe=null}
function pi(a,b){var c=A();a.za.keys().forEach(function(a){var e=this.za.get(a).map(function(a){return Od(b,a)},this),g=new Pf([ed()]);e.forEach(function(a){var b=null;"between"==a.G?b=new $c(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new $c(b,b,!1,!1)):b="gte"==a.G?new $c(a.value,F,!1,!1):"gt"==a.G?new $c(a.value,F,!0,!1):"lte"==a.G?new $c(F,a.value,!1,!1):new $c(F,a.value,!1,!0);a=a.$a?ad(b):[b];a=new Pf(a);g=Sf(g,a)});c.set(a,g)},a);return c}
oi.prototype.ed=function(a){if(this.Pe==a)return this.Hd;for(var b=pi(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new Pf([ed()]))}this.Hd=1==this.Ob.f.length?C(b)[0].wa():mi(qi(this,b));this.Pe=a;return this.Hd};function qi(a,b){var c=A(),d=0;a.Ob.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Jb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function ri(a,b){this.lf=b;this.D=a.i(Ub)}function si(a,b,c){c=c.filter(a.Uf,a);if(0==c.length)return null;a=ti(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=ui(c,b);return h<d?(d=h,c):a},null)}
function ti(a,b){return a.lf.va().map(function(a){a=new vi(this.D,a);wi(a,b);return a},a).filter(function(a){if(null===a.za)a=!1;else{for(var b=!1,e=!0,g=0;g<a.wb.f.length;g++){var h=a.za.has(a.wb.f[g].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}ri.prototype.Uf=function(a){var b;if(b=a instanceof Kd)Ld(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.lf:!1};
function vi(a,b){this.D=a;this.wb=b;this.Rf=D(this.wb.f.map(function(a){return a.ba.getName()}));this.Vd=this.za=null}function xi(a){null===a.Vd&&(a.Vd=new oi(a.wb,a.za));return a.Vd}function wi(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Rf.has(b)&&(null===this.za&&(this.za=new dg),this.za.set(b,a.V()))},a)}function ui(a,b){var c=xi(a).ed(b),d=a.D.get(a.wb.l());return c.reduce(function(a,b){return a+d.bd(b)},0)};function yi(a,b,c,d){T.call(this,0,-1);this.D=a.i(Ub);this.index=b;this.Oe=c;this.he=d;this.Uc=this.Tc=!1}t(yi,T);yi.prototype.toString=function(){return"index_range_scan("+this.index.l()+", ?, "+(this.he?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};yi.prototype.Rc=function(a){var b=this.toString(),c=this.Oe.ed(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.W.toString()));this.Uc&&(b=b.replace("?",a.N.toString()));return b};
yi.prototype.ea=function(a,b,c){a=this.Oe.ed(c);b=this.D.get(this.index.l());c=(1==a.length&&a[0]instanceof $c&&fd(a[0])?We(b.get(a[0].c),!1,this.Tc?c.W:void 0,this.Uc?c.N:void 0):b.Za(a,this.he,this.Tc?c.W:void 0,this.Uc?c.N:void 0)).map(function(a){return new y(a,{})},this);return[od(c,[this.index.Qc])]};function zi(a){T.call(this,0,1);this.rd=a}t(zi,T);zi.prototype.toString=l("select(?)");zi.prototype.Rc=function(a){a=Od(a,this.rd);return this.toString().replace("?",a.toString())};zi.prototype.ea=function(a,b,c){return[Od(c,this.rd).eval(b[0])]};function Ai(a,b){T.call(this,0,1);this.ca=a.i(Tb);this.S=b}t(Ai,T);Ai.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Ai.prototype.ea=function(a,b){return[od(Se(this.ca,id(b[0])),[J(this.S)])]};function Bi(a){this.g=a}t(Bi,Ug);Bi.prototype.mb=function(a,b){this.Y=a;Vf(a,function(a){return a instanceof ci}).forEach(function(a){var d=Ci(a);if(0!=d.length){var e=si(new ri(this.g,a.table),b,d.map(function(a){return Od(b,a.rd)}));if(null!==e){var g=A();d.forEach(function(a){g.set(a.rd,a)},this);this.Y=Di(this,e,g,a)}}},this);return this.Y};function Ci(a){var b=[];for(a=a.getParent();a;)a instanceof zi&&b.push(a),a=a.getParent();return b}
function Di(a,b,c,d){(null===b.za?[]:b.za.values()).map(function(a){return c.get(a)}).forEach(Wf);b=new yi(a.g,b.wb,xi(b),!1);a=new Ai(a.g,d.table);M(a,b);$f(d,d,a,b);return b.hb()};function Ei(a,b){T.call(this,0,-1);this.D=a.i(Ub);this.S=b}t(Ei,T);Ei.prototype.toString=function(){return"insert("+this.S.getName()+")"};Ei.prototype.ea=function(a,b,c){Fi(this.S,c.values,this.D);a.xb(this.S,c.values);return[od(c.values,[this.S.getName()])]};function Fi(a,b,c){a=a.Db().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.l()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Gi(a,b){T.call(this,0,-1);this.D=a.i(Ub);this.S=b}t(Gi,T);Gi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Gi.prototype.ea=function(a,b,c){Fi(this.S,c.values,this.D);a.Qd(this.S,c.values);return[od(c.values,[this.S.getName()])]};function Hi(){T.call(this,0,1)}t(Hi,T);Hi.prototype.toString=l("limit(?)");Hi.prototype.Rc=function(a){return this.toString().replace("?",a.W.toString())};Hi.prototype.ea=function(a,b,c){b[0].entries.splice(c.W);return b};function Ii(a){T.call(this,0,1);this.M=a}t(Ii,T);m=Ii.prototype;m.toString=function(){return"order_by("+Td(this.M)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var g=qg(this.M[e].O);if(null!==c.Xa&&c.Xa.has(g.l())){d=g;break}}c=d;(null===c?b[0]:jd(b[0],c)).entries.sort(this.Hf.bind(this))}else b.sort(this.og.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,g=-1;do g++,e=this.M[g].O,c=this.M[g].kb,d=a(e),e=b(e);while(d==e&&g+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.og=function(a,b){return this.U(function(b){return b instanceof S?jd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?jd(b,a):I(b.entries[b.entries.length-1],a)})};m.Hf=function(a,b){return this.U(function(b){return I(a,b)},function(a){return I(b,a)})};function Ji(a,b){this.Ha=a;this.K=b}function Ki(a){return a.K.some(function(a){return a instanceof S},a)?Li(a):Mi(a)}function Li(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Ib)return a=jd(a.Ha,a.K[0]).entries.map(function(a){var b=new pd(new y(-1,{}),1<this.Ha.L.size);rd(b,this.K[0],I(a,this.K[0].child));return b},a),new G(a,[]);var b=new pd(new y(-1,{}),1<a.Ha.L.size);a.K.forEach(function(a){var d=a instanceof S?jd(this.Ha,a):I(this.Ha.entries[0],a);rd(b,a,d)},a);return new G([b],H(a.Ha))}
function Mi(a){var b=Array(a.Ha.entries.length),c=1<a.Ha.L.size;a.Ha.entries.forEach(function(a,e){b[e]=new pd(new y(a.sa.id(),{}),c);this.K.forEach(function(c){rd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ha))}function Ni(a,b){var c=a.map(function(a){return Ki(new Ji(a,b)).entries[0]});return new G(c,H(a[0]))};function Oi(a,b){T.call(this,0,1);this.f=a;this.Nb=b}t(Oi,T);Oi.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Oi.prototype.ea=function(a,b){var c;0==b.length?c=[ld()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Ki(new Ji(c,this.f))]):c=[Ni(b,this.f)];return c};function Pi(a){return a.f.some(function(a){return a instanceof S})||null!==a.Nb};function Qi(){T.call(this,0,1)}t(Qi,T);Qi.prototype.toString=l("skip(?)");Qi.prototype.Rc=function(a){return this.toString().replace("?",a.N.toString())};Qi.prototype.ea=function(a,b,c){return[new G(b[0].entries.slice(c.N),H(b[0]))]};function Ri(){}t(Ri,Ug);Ri.prototype.mb=function(a,b){if(!q(b.W)&&!q(b.N))return a;var c=Si(a);if(null===c)return a;Vf(a,function(a){return a instanceof Hi||a instanceof Qi}).forEach(function(a){a instanceof Hi?c.Tc=!0:c.Uc=!0;Wf(a)},this);return c.hb()};function Si(a){a=Vf(a,function(a){return a instanceof yi},function(a){return a instanceof Oi&&Pi(a)||a instanceof Ii||1!=L(a).length||a instanceof zi});return 0<a.length?a[0]:null};function Ti(a){this.g=a}t(Ti,Ug);Ti.prototype.mb=function(a,b){var c=Ui(a,b);if(null===c)return a;var d;a:{var e=c;d=Vi(Dd(c,0));if(null!==d){var g;g=c.M;for(var h=null,k=d.table.va(),n=0;n<k.length&&null===h;n++)h=Wi(k[n],g);g=h;if(null===g){d=e;break a}e=new yi(this.g,g.wb,new ni(g.wb),g.Le);g=new Ai(this.g,d.table);M(g,e);Wf(c);e=$f(d,d,g,e)}d=e}if(d==c)a:if(d=c,e=Xi(Dd(c,0)),null!==e){g=Wi(e.index,c.M);if(null===g)break a;e.he=g.Le;d=Wf(c).parent}return d.hb()};
function Xi(a){a=Vf(a,function(a){return a instanceof yi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function Vi(a){a=Vf(a,function(a){return a instanceof ci},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function Ui(a,b){return q(b.M)?Vf(a,function(a){return a instanceof Ii})[0]:null}function Wi(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ba.getName()}))return null;var c=Yi(b,a);return c[0]||c[1]?{wb:a,Le:c[1]}:null}
function Yi(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Zi(a,b,c){this.Aa=a;this.ee=b;this.Ub=c}Zi.prototype.fc=function(){this.Ub.forEach(function(a){this.Aa=a.mb(this.Aa,this.ee)},this);return this.Aa};function $i(a,b){T.call(this,0,1);this.S=a;this.wg=b}t($i,T);$i.prototype.toString=function(){return"update("+this.S.getName()+")"};$i.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.Lb(a.sa.Ia());this.wg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);a.update(this.S,c);return[ld()]};function aj(a){this.g=a;this.je=[new li,new Bi(this.g),new Ti(this.g),new Ri,new di(this.g)];this.Jd=[new Bi(this.g)]}aj.prototype.create=function(a,b){var c=a.hb();if(c instanceof Hg||c instanceof Gg)return bj(this,a,b);if(c instanceof Ng||c instanceof Rg||c instanceof Sg)return bj(this,a,b,this.je);if(c instanceof Ig||c instanceof Jg)return bj(this,a,b,this.Jd);throw new E(8);};function bj(a,b,c,d){a=Tf(b.hb(),a.bg.bind(a));null!=d&&(a=(new Zi(a,c,d)).fc());return new Ud(a,b.Z())}
aj.prototype.bg=function(a){if(a instanceof Ng)return new Oi(a.f,a.Nb);if(a instanceof Qg)return new ei(a.f);if(a instanceof Pg)return new ug(a.f);if(a instanceof Og)return new Ii(a.M);if(a instanceof Sg)return new Qi;if(a instanceof Rg)return new Hi;if(a instanceof Kg)return new zi(a.J.V());if(a instanceof Mg)return new Zg;if(a instanceof Tg)return new gi(this.g,a.J,a.Pb);if(a instanceof Lg)return new ci(this.g,a.table);if(a instanceof Ig)return new ai(a.table);if(a instanceof Jg)return new $i(a.table,
a.oe);if(a instanceof Hg)return new Gi(this.g,a.table);if(a instanceof Gg)return new Ei(this.g,a.table);throw new E(514);};function cj(a){this.$f=new $h;this.jg=new aj(a)};function dj(){this.Se=A()}function ej(a,b){var c=a.Se.get(b.getName())||null;null===c&&(c=new fj,a.Se.set(b.getName(),c));return c}function gj(a,b,c,d){c.forEach(function(a){a=ej(this,a);0==d?(a.bb=null,a.uc=b):3==d?(null===a.Wb&&(a.Wb=D()),a.Wb.add(b),null===a.Sa&&(a.Sa=D()),a.Sa.delete(b)):1==d?(null===a.Sa&&(a.Sa=D()),a.Sa.add(b)):2==d&&(a.bb=b)},a)}
function hj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=ej(this,a);var c=null===a.Sa||0==a.Sa.size;e=0==d?(null===a.Wb||0==a.Wb.size)&&c&&null===a.uc&&null!==a.bb&&a.bb==b:3==d?null===a.uc&&null===a.bb&&null!==a.Sa&&a.Sa.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function ij(a,b,c,d){var e=hj(a,b,c,d);e&&gj(a,b,c,d);return e}dj.prototype.releaseLock=function(a,b){b.forEach(function(b){ej(this,b).releaseLock(a)},this)};
function jj(a,b){b.forEach(function(a){ej(this,a).bb=null},a)}function fj(){this.Wb=this.Sa=this.bb=this.uc=null}fj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.bb==a&&(this.bb=null);null===this.Sa||this.Sa.delete(a);null===this.Wb||this.Wb.delete(a)};function kj(){this.Tb=new mj;this.Fc=new dj}function be(a,b){(2>b.getPriority()||2>b.getPriority())&&jj(a.Fc,b.Z());a.Tb.xb(b);nj(a);return b.Mb().ha}function nj(a){for(var b=a.Tb.wa(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?oj(a,d,1,3):oj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.hg.bind(e,d),e.gg.bind(e,d))}}function oj(a,b,c,d){var e=!1;ij(a.Fc,b.V(),b.Z(),c)&&(e=ij(a.Fc,b.V(),b.Z(),d));return e}kj.prototype.hg=function(a,b){this.Fc.releaseLock(a.V(),a.Z());a.Mb().resolve(b);nj(this)};
kj.prototype.gg=function(a,b){this.Fc.releaseLock(a.V(),a.Z());a.Mb().reject(b);nj(this)};function mj(){this.Tb=[]}mj.prototype.xb=function(a){Ve(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};mj.prototype.wa=function(){return this.Tb.slice()};mj.prototype.remove=function(a){var b=this.Tb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function pj(a,b){this.Kd=ud.zc();this.fe=a;this.nd=b;this.K=qj(this)}function qj(a){if(0<a.fe.f.length)return a.fe.f;var b=[];a.fe.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}pj.prototype.U=function(a,b){return this.K.every(function(c){return Ad(this.Kd,c.I(),"eq")(I(a,c),I(b,c))},this)};
function rj(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var g=0,h=0;h<d.length;h++){var k=d[h];e[g]==k?g++:(k=a.nd.splice(g,1),k=sj(h,k,0,a.nd),b.push(k))}e=ub(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=g=0;h<c.entries.length;h++)k=c.entries[h],e[g]==k?g++:(a.nd.splice(h,0,k.sa.s),k=sj(h,[],1,a.nd),b.push(k));return b}function sj(a,b,c,d){return{xg:c,index:a,object:d,zg:b,type:"splice"}};function tj(){this.dc=A()}tj.prototype.Ad=function(a,b){var c=ka(a.a).toString(),d=this.dc.get(c)||null;null===d&&(d=new uj(a),this.dc.set(c,d));d.Ad(b)};tj.prototype.ge=function(a,b){var c=ka(a.a).toString(),d=this.dc.get(c)||null;d.ge(b);0<d.Jc.size||this.dc.delete(c)};function ae(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.dc.forEach(function(a){a=a.Bc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Zd(a,b,c){b=ka(null!=b.$c?b.$c:b).toString();a=a.dc.get(b)||null;null!==a&&vj(a,c)}function uj(a){this.yf=a;this.Jc=D();this.eg=[];this.Qe=null;this.Ff=new pj(a.a,this.eg)}uj.prototype.Ad=function(a){this.Jc.has(a)||this.Jc.add(a)};uj.prototype.ge=function(a){return this.Jc.delete(a)};uj.prototype.Bc=function(){var a=this.yf;return{context:a.a,de:wh(a)}};function vj(a,b){var c=rj(a.Ff,a.Qe,b);a.Qe=b;0<c.length&&a.Jc.forEach(function(a){a(c)})};function wj(a,b){var c=a.i(Zb),d=b||{},e=new Re(c);a.lb(Tb,e);var e=null,g=!1;switch(d.storeType||0){case 1:e=new De(c);break;case 5:e=new Fe(c);break;case 4:e=new Ne(a,c,d.webSqlDbSize);break;case 3:e=new ne(c,d.firebase);g=!0;break;default:e=new ye(a,c)}a.lb(Sb,e);var h=new Of;a.lb(Ub,h);return e.Ea(d.onUpgrade).then(function(){var b=new cj(a);a.lb(Vb,b);b=new kj;a.lb(Xb,b);b=new tj;a.lb(Yb,b);return h.Ea(c)}).then(function(){if(g){var b=new ce(a);b.Ja.subscribe(b.Zd.bind(b))}return(new Hf(a)).Ea(c)})}
;function xj(a){this.g=a;this.m=a.i(Zb);this.$=D(this.m.ra());this.cb=x()}m=xj.prototype;m.exec=function(){var a=this.g.i(Ub),b=this.g.i(Tb),c={};this.m.ra().forEach(function(d){var g=a.get(Be(d)).Za(),g=Se(b,g).map(function(a){return a.s});c[d.getName()]=g});var d={name:this.m.name(),version:this.m.version(),tables:c},d=new pd(new y(-1,d),!0);return w([new G([d],[])])};m.I=l(0);m.Z=f("$");m.Mb=f("cb");m.V=function(){return ka(this)};m.getPriority=l(0);function yj(a,b){this.g=a;this.m=a.i(Zb);this.$=D(this.m.ra());this.cb=x();this.ta=b;this.Ja=a.i(Sb);this.ca=a.i(Tb);this.D=a.i(Ub)}m=yj.prototype;
m.exec=function(){if(!(this.Ja instanceof ye||this.Ja instanceof De||this.Ja instanceof Ne))throw new E(300);var a;a:{a=this.m.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Be(a[b])).Na().na){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.m.name()!=this.ta.name||this.m.version()!=this.ta.version)throw new E(111);if(null==this.ta.tables)throw new E(112);return zj(this)};m.I=l(1);m.Z=f("$");m.Mb=f("cb");m.V=function(){return ka(this)};m.getPriority=l(0);
function zj(a){var b=new Wc(a.g,a.$),b=a.Ja.Cb(a.I(),b),c;for(c in a.ta.tables){var d=a.m.table(c),e=a.ta.tables[c].map(function(a){return d.tb(a)}),g=b.H(c,d.Lb);a.ca.wd(c,e);var h=a.D.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})});g.put(e)}return b.ia()};function Aj(a,b){this.g=a;this.Ja=a.i(Sb);this.Ba=a.i(Xb);this.Fb=a.i(Yb);this.$=D(b);this.Ra=new Wc(this.g,this.$);this.cb=x();this.vc=x();this.qe=x()}m=Aj.prototype;m.exec=function(){this.qe.resolve();return this.vc.ha};m.I=l(1);m.Z=f("$");m.Mb=f("cb");m.V=function(){return ka(this)};m.getPriority=l(2);function Bj(a){be(a.Ba,a);return a.qe.ha}
function Cj(a,b){var c=b.Bc();return c.de.hb().exec(a.Ra,c.context).then(function(a){return hd(a[0])},function(a){this.Ra.Gb();var b=new hb(a.name);this.vc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ja.Cb(this.I(),this.Ra).ia().then(function(){this.Oc();this.vc.resolve()}.bind(this),function(a){this.Ra.Gb();this.vc.reject(a)}.bind(this));return this.cb.ha};m.Gb=function(){this.Ra.Gb();this.vc.resolve();return this.cb.ha};
m.Oc=function(){var a=ae(this.Fb,this.$);0!=a.length&&(a=new Yd(this.g,a),be(this.Ba,a))};function Dj(a){this.g=a;this.Ba=a.i(Xb);this.Sc=null;this.Ta=0;0==Ej.size&&(Ej.set(0,D([1,4])),Ej.set(1,D([2])),Ej.set(2,D([3,5,6])),Ej.set(3,D([2,7])),Ej.set(4,D([7])),Ej.set(5,D([7])),Ej.set(6,D([7])))}r("lf.proc.Transaction",Dj);var Ej=A();function Fj(a,b){var c=Ej.get(a.Ta)||null;if(null===c||!c.has(b))throw new E(107,a.Ta,b);a.Ta=b}
Dj.prototype.exec=function(a){Fj(this,4);var b=[];try{a.forEach(function(a){a.fb();b.push(a.Bc())},this)}catch(c){return Fj(this,7),$a(c)}a=new $g(this.g,b);return be(this.Ba,a).then(function(a){Fj(this,7);return a.map(function(a){return hd(a)})}.bind(this),function(a){Fj(this,7);throw a;}.bind(this))};Dj.prototype.exec=Dj.prototype.exec;Dj.prototype.wf=function(a){Fj(this,1);this.Sc=new Aj(this.g,a);return Bj(this.Sc).then(function(){Fj(this,2)}.bind(this))};Dj.prototype.begin=Dj.prototype.wf;
Dj.prototype.vf=function(a){Fj(this,3);return Cj(this.Sc,a).then(function(a){Fj(this,2);return a}.bind(this),function(a){Fj(this,7);throw a;}.bind(this))};Dj.prototype.attach=Dj.prototype.vf;Dj.prototype.ia=function(){Fj(this,5);return this.Sc.ia().then(function(){Fj(this,7)}.bind(this))};Dj.prototype.commit=Dj.prototype.ia;Dj.prototype.Gb=function(){Fj(this,6);return this.Sc.Gb().then(function(){Fj(this,7)}.bind(this))};Dj.prototype.rollback=Dj.prototype.Gb;function W(a){this.g=a;this.m=a.i(Zb);this.Pd=!1}r("lf.proc.Database",W);W.prototype.Ea=function(a){this.g.lb(Zb,this.m);return wj(this.g,a).then(function(){this.Pd=!0;this.Ba=this.g.i(Xb);return this}.bind(this))};W.prototype.init=W.prototype.Ea;W.prototype.vb=f("m");W.prototype.getSchema=W.prototype.vb;function Gj(a){if(!a.Pd)throw new E(2);}W.prototype.select=function(a){Gj(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.xb=function(){Gj(this);return new yh(this.g)};W.prototype.insert=W.prototype.xb;W.prototype.Qd=function(){Gj(this);return new yh(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Qd;W.prototype.update=function(a){Gj(this);return new Ih(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Gj(this);return new xh(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Gj(this);this.g.i(Yb).Ad(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Gj(this);this.g.i(Yb).ge(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Df=function(){Gj(this);return new Dj(this.g)};W.prototype.createTransaction=W.prototype.Df;W.prototype.close=function(){try{this.g.i(Sb).close()}catch(a){}this.g.clear();this.Pd=!1};W.prototype.close=W.prototype.close;
W.prototype.Lf=function(){Gj(this);var a=new xj(this.g);return be(this.Ba,a).then(function(a){return hd(a[0])[0]})};W.prototype["export"]=W.prototype.Lf;W.prototype.import=function(a){Gj(this);a=new yj(this.g,a);return be(this.Ba,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,g){this.S=a;this.w=b;this.Me=c;this.Ke=d;this.pf=e;this.eb=g||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=f("w");m.l=function(){return J(this.S)+"."+this.w};m.toString=function(){return this.l()};m.H=f("S");m.I=f("pf");X.prototype.getType=X.prototype.I;X.prototype.Ya=f("eb");X.prototype.va=function(){null==this.ka&&(this.ka=[],this.H().va().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.ka.push(a)},this));return this.ka};
X.prototype.ua=function(){if(!q(this.fa)){var a=this.va().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.Dc=f("Ke");X.prototype.isNullable=X.prototype.Dc;X.prototype.Ec=f("Me");X.prototype.Qa=function(a){return kg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.Te=function(a){return kg(this,a,"neq")};X.prototype.neq=X.prototype.Te;X.prototype.Wd=function(a){return kg(this,a,"lt")};
X.prototype.lt=X.prototype.Wd;X.prototype.ag=function(a){return kg(this,a,"lte")};X.prototype.lte=X.prototype.ag;X.prototype.Nf=function(a){return kg(this,a,"gt")};X.prototype.gt=X.prototype.Nf;X.prototype.Of=function(a){return kg(this,a,"gte")};X.prototype.gte=X.prototype.Of;X.prototype.match=function(a){return kg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.xf=function(a,b){return kg(this,[a,b],"between")};X.prototype.between=X.prototype.xf;
X.prototype.Pf=function(a){return kg(this,a,"in")};X.prototype["in"]=X.prototype.Pf;X.prototype.Wf=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.Wf;X.prototype.Vf=function(){return this.Te(null)};X.prototype.isNotNull=X.prototype.Vf;X.prototype.nc=function(a){return new X(this.S,this.w,this.Me,this.Ke,this.pf,a)};X.prototype.as=X.prototype.nc;function Hj(){this.ud=A()}var Ij;Hj.prototype.clear=function(){this.ud.clear()};Hj.prototype.clear=Hj.prototype.clear;Hj.prototype.lb=function(a,b){this.ud.set(a.toString(),b);return b};Hj.prototype.registerService=Hj.prototype.lb;Hj.prototype.i=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Hj.prototype.getService=Hj.prototype.i;Hj.prototype.Ud=function(a){return this.ud.has(a.toString())};Hj.prototype.isRegistered=Hj.prototype.Ud;function Jj(a){this.m=a;this.af=new dg;this.Ve=new dg;this.ye=A();this.h=new dg;this.ve=new dg;this.cf=new dg;this.xe=new dg;Kj(this)}function Kj(a){a.m.ra().forEach(function(a){var c=a.getName();a.Db().Nd().forEach(function(d){this.af.set(d.ab,d);this.Ve.set(c,this.m.table(d.ab));this.h.set(d.ab,a);0==d.action?this.cf.set(d.ab,a):this.ve.set(d.ab,a);this.ye.set(a.getName()+"."+d.rb,d.ab);this.xe.set(d.ab+"."+d.Lc,a.getName())},this)},a)}function Pc(a,b){return a.af.get(b)}
function fh(a,b){var c=b.get(a);return null===c?[]:c}function hh(a,b){var c=D();b.forEach(function(a){(a=this.ye.get(a))&&c.add(a)},a);return lc(c).map(function(a){return this.m.table(a)},a)}function dh(a,b,c){return null!=c?0==c?fh(b,a.cf):fh(b,a.ve):fh(b,a.h)}function ih(a,b){var c=D();b.forEach(function(a){(a=this.xe.get(a))&&a.forEach(function(a){c.add(a)})},a);return lc(c).map(function(a){return this.m.table(a)},a)};function Lj(a,b,c){this.kg=a;this.dg=b;this.Mf=c}r("lf.schema.Constraint",Lj);Lj.prototype.fd=f("kg");Lj.prototype.getPrimaryKey=Lj.prototype.fd;Lj.prototype.Nd=f("Mf");Lj.prototype.getForeignKeys=Lj.prototype.Nd;function Mj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new E(540,b);this.rb=a.local;this.ab=c[0];this.Lc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function Y(a){Nj(a);this.Kd=ud.zc();this.w=a;this.K=A();this.xd=D();this.jc=D();this.Ic=D();this.ya=null;this.ka=A();this.qd=!1;this.ub=[]}r("lf.schema.TableBuilder",Y);function Oj(a){this.name=a.name;this.kb=a.order;this.autoIncrement=a.autoIncrement}var Pj=D([0,6]);function Nj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Qj(a,b){if(b==a.w)throw new E(546,b);if(a.K.has(b)||a.ka.has(b)||a.jc.has(b))throw new E(503,a.w+"."+b);}
function Rj(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Sj(a){if(null!==a.ya){var b=a.ka.get(a.ya).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.rb)},a))throw new E(543,a.ub[c].name);}}
function Tj(a){if(null!==a.ya){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.ya).map(b));a.ka.forEach(function(a,e){if(e!=this.ya){var g=a.map(b);if(JSON.stringify(g)==c)throw new E(544,this.w+"."+e);}},a)}}function Uj(a){null===a.ya||a.ka.get(a.ya).forEach(function(a){if(this.Ic.has(a.name))throw new E(545,this.w+"."+a.name);},a)}Y.prototype.qf=function(a,b){Nj(a);Qj(this,a);this.K.set(a,b);Pj.has(b)&&this.se([a]);return this};Y.prototype.addColumn=Y.prototype.qf;
Y.prototype.sf=function(a,b){var c=this.w;this.ya="pk"+(c[0].toUpperCase()+c.substring(1));Nj(this.ya);Qj(this,this.ya);c=Vj(this,a,!0,void 0,b);Rj(this,c);1==c.length&&this.xd.add(c[0].name);this.jc.add(this.ya);this.ka.set(this.ya,c);return this};Y.prototype.addPrimaryKey=Y.prototype.sf;
Y.prototype.rf=function(a,b){Nj(a);Qj(this,a);var c=new Mj(b,this.w+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.rb))throw new E(540,a);this.ub.push(c);this.re(a,[c.rb],this.xd.has(c.rb));return this};Y.prototype.addForeignKey=Y.prototype.rf;Y.prototype.tf=function(a,b){Nj(a);Qj(this,a);var c=Vj(this,b,!0);Wj(this,a,c);1==c.length&&(this.xd.add(c[0].name),Xj(this,c[0].name));this.ka.set(a,c);this.jc.add(a);return this};
Y.prototype.addUnique=Y.prototype.tf;function Xj(a,b){a.ub.forEach(function(a){a.rb==b&&this.jc.add(a.name.split(".")[1])},a)}Y.prototype.se=function(a){a=Vj(this,a,!1);Yj(this,a);a.forEach(function(a){this.Ic.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.se;function Yj(a,b){Jb(a.ka).forEach(function(a){var d=D();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new E(507,a,e.join(","));},a)}
Y.prototype.re=function(a,b,c,d){Nj(a);Qj(this,a);b=Vj(this,b,!0,d);Wj(this,a,b);c&&this.jc.add(a);this.ka.set(a,b);return this};Y.prototype.addIndex=Y.prototype.re;function Wj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Ic.has(a.name)},a),0<a.length))throw new E(507,b,a.join(","));}Y.prototype.zb=ba("qd");Y.prototype.persistentIndex=Y.prototype.zb;Y.prototype.vb=function(){Sj(this);Tj(this);Uj(this);return new (Zj(this))};Y.prototype.getSchema=Y.prototype.vb;
function ak(a){return a.ub}function Vj(a,b,c,d,e){var g=b,g="string"==typeof b[0]?b.map(function(a){return new Oj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Oj(a)});g.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.w,a.name);}},a);return g}
function Zj(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ba:this[a.name],kb:a.kb,autoIncrement:a.autoIncrement}},this)}var d=Jb(a.K).map(function(b){this[b]=new X(this,b,a.xd.has(b),a.Ic.has(b),a.K.get(b));return this[b]},this),e=Jb(a.ka).map(function(d){return new mg(a.w,d,a.jc.has(d),b.call(this,d))},this);R.call(this,a.w,d,e,a.qd);var g=null===a.ya?null:new mg(a.w,a.ya,!0,b.call(this,a.ya)),h=d.filter(function(b){return!a.Ic.has(b.getName())});this.Af=new Lj(g,h,a.ub);
this.ff=bk(a,d,e)}t(b,R);b.prototype.tb=function(a){return new this.ff(nb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Lb=function(a){var b={};this.gb().forEach(function(e){var g=e.getName();e=e.I();var h=a.value[g];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[g]=e},this);return new this.ff(a.id,b)};b.prototype.deserializeRow=
b.prototype.Lb;b.prototype.Db=f("Af");b.prototype.getConstraint=b.prototype.Db;return b}
function bk(a,b,c){function d(a,d){this.K=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.Be=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Dc()?null:Hc[b.I()]});return a};d.prototype.mf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?rb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Kd.Ne.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
g=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.l();a=1==a.f.length?e(a.f[0].ba):g(a.f);h[b]=a});d.prototype.Eb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function ck(a,b){this.m=new Z(a,b);this.pb=A();this.wc=!1}r("lf.schema.Builder",ck);function dk(a,b){b.ub.forEach(function(a){var d=a.ab;if(!this.pb.has(d))throw new E(536,a.name);var d=this.pb.get(d).vb(),e=a.Lc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.vb()[a.rb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Ec())throw new E(539,a.name);},a)}ck.prototype.zf=function(a){a.ub.forEach(function(a){ak(this.pb.get(a.ab)).forEach(function(c){if(c.rb==a.Lc)throw new E(534,a.name);},this)},this)};
function ek(a){a.wc||(a.pb.forEach(function(a){dk(this,a);a=a.vb();this.m.L.set(a.getName(),a)},a),C(a.pb).forEach(a.zf,a),fk(a),a.pb.clear(),a.wc=!0)}function gk(a,b,c){b.pe||(b.pe=!0,b.$d=!0,b.Ce.forEach(function(a){a=c.get(a);if(!a.pe)gk(this,a,c);else if(a.$d&&b!=a)throw new E(533);},a));b.$d=!1}function fk(a){var b=A();a.m.L.forEach(function(a,d){b.set(d,new hk(d))},a);a.pb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.ab).Ce.add(d)})});C(b).forEach(function(a){gk(this,a,b)},a)}
function hk(a){this.$d=this.pe=!1;this.Ce=D();this.Qc=a}ck.prototype.vb=function(){this.wc||ek(this);return this.m};ck.prototype.getSchema=ck.prototype.vb;ck.prototype.Ee=function(){var a=new Rb("ns_"+this.m.name()),b;Ij||(Ij=new Hj);b=Ij;var c=null;b.Ud(a)?c=b.i(a):(c=new Hj,b.lb(a,c));return c};ck.prototype.getGlobal=ck.prototype.Ee;ck.prototype.connect=function(a){var b=this.Ee();b.Ud(Zb)||b.lb(Zb,this.vb());return(new W(b)).Ea(a)};ck.prototype.connect=ck.prototype.connect;
ck.prototype.Cf=function(a){if(this.pb.has(a))throw new E(503,a);if(this.wc)throw new E(535);this.pb.set(a,new Y(a));return this.pb.get(a)};ck.prototype.createTable=ck.prototype.Cf;ck.prototype.ke=function(a){if(this.wc)throw new E(535);this.m.ke(a);return this};ck.prototype.setPragma=ck.prototype.ke;function Z(a,b){this.w=a;this.Oa=b;this.L=A();this.Ze={Gf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=f("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=f("Oa");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return C(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ie||(this.Ie=new Jj(this));return this.Ie};Z.prototype.Ye=f("Ze");Z.prototype.pragma=Z.prototype.Ye;Z.prototype.ke=ba("Ze");r("lf.schema.create",function(a,b){return new ck(a,b)});v.prototype.catch=v.prototype.me;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
