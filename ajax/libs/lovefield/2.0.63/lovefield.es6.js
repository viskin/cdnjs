(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function ga(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Fb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.wg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Xf=c;this.Bf=a;this.ng=b;this.kd=0;this.fd=null}ta.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Bf();return a};ta.prototype.put=function(a){this.ng(a);this.kd<this.Xf&&(this.kd++,a.next=this.fd,this.fd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Da;a:{var Ea=p.navigator;if(Ea){var Fa=Ea.userAgent;if(Fa){Da=Fa;break a}}Da=""}function u(a){return-1!=Da.indexOf(a)};function Ga(){return u("Opera")||u("OPR")}function Ha(){return(u("Chrome")||u("CriOS"))&&!Ga()&&!u("Edge")};function Ia(a){p.setTimeout(function(){throw a;},0)}var Ja;
function Ka(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.se;c.se=null;a()}};return function(a){d.next={se:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function La(){this.ud=this.ic=null}var Na=new ta(function(){return new Ma},function(a){a.reset()},100);La.prototype.add=function(a,b){var c=Na.get();c.set(a,b);this.ud?this.ud.next=c:this.ic=c;this.ud=c};La.prototype.remove=function(){var a=null;this.ic&&(a=this.ic,this.ic=this.ic.next,this.ic||(this.ud=null),a.next=null);return a};function Ma(){this.next=this.scope=this.Hd=null}Ma.prototype.set=function(a,b){this.Hd=a;this.scope=b;this.next=null};
Ma.prototype.reset=function(){this.next=this.scope=this.Hd=null};function Oa(a,b){Pa||Qa();Ra||(Pa(),Ra=!0);Sa.add(a,b)}var Pa;function Qa(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Pa=function(){a.then(Ta)}}else Pa=function(){var a=Ta;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ja||(Ja=Ka()),Ja(a)):p.setImmediate(a)}}var Ra=!1,Sa=new La;function Ta(){for(var a=null;a=Sa.remove();){try{a.Hd.call(a.scope)}catch(b){Ia(b)}Na.put(a)}Ra=!1};function v(a,b){this.Qa=0;this.$e=void 0;this.Vc=this.$b=this.B=null;this.ed=this.Gd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ua(c,2,a)},function(a){Ua(c,3,a)})}catch(d){Ua(this,3,d)}}function Va(){this.next=this.context=this.ec=this.Gc=this.child=null;this.xd=!1}Va.prototype.reset=function(){this.context=this.ec=this.Gc=this.child=null;this.xd=!1};var Wa=new ta(function(){return new Va},function(a){a.reset()},100);function Ya(a,b,c){var d=Wa.get();d.Gc=a;d.ec=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ua(b,2,a);return b}function Za(a){return new v(function(b,c){c(a)})}function $a(a,b,c){ab(a,b,c,null)||Oa(ra(b,a))}function bb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],$a(n,ra(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new cb(c,a,b)}
v.prototype.then=function(a,b,c){return db(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.he=function(a,b){return db(this,null,a,b)};function eb(a,b){a.$b||2!=a.Qa&&3!=a.Qa||fb(a);a.Vc?a.Vc.next=b:a.$b=b;a.Vc=b}
function db(a,b,c,d){var e=Ya(null,null,null);e.child=new v(function(a,h){e.Gc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.ec=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof gb?h(b):a(e)}catch(A){h(A)}}:h});e.child.B=a;eb(a,e);return e.child}v.prototype.sg=function(a){this.Qa=0;Ua(this,2,a)};v.prototype.tg=function(a){this.Qa=0;Ua(this,3,a)};
function Ua(a,b,c){0==a.Qa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Qa=1,ab(c,a.sg,a.tg,a)||(a.$e=c,a.Qa=b,a.B=null,fb(a),3!=b||c instanceof gb||hb(a,c)))}function ab(a,b,c,d){if(a instanceof v)return eb(a,Ya(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(f){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return ib(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function ib(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function fb(a){a.Gd||(a.Gd=!0,Oa(a.Gf,a))}function jb(a){var b=null;a.$b&&(b=a.$b,a.$b=b.next,b.next=null);a.$b||(a.Vc=null);return b}
v.prototype.Gf=function(){for(var a=null;a=jb(this);){var b=this.Qa,c=this.$e;if(3==b&&a.ec&&!a.xd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,kb(a,b,c);else try{a.xd?a.Gc.call(a.context):kb(a,b,c)}catch(e){lb.call(null,e)}Wa.put(a)}this.Gd=!1};function kb(a,b,c){2==b?a.Gc.call(a.context,c):a.ec&&a.ec.call(a.context,c)}function hb(a,b){a.ed=!0;Oa(function(){a.ed&&lb.call(null,b)})}var lb=Ia;function gb(a){sa.call(this,a)}t(gb,sa);gb.prototype.name="cancel";
function cb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.o=b||this.xe()}var mb=0;m=y.prototype;m.id=g("oa");function nb(a){return a.o}m.xe=function(){return{}};m.hf=g("o");m.Ha=function(){return{id:this.oa,value:this.hf()}};m.Cb=function(a){return"#"==a.substr(-1)?this.oa:null};function ob(a){return new y(a.id,a.value)}function pb(a){return new y(mb++,a||{})}function qb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function rb(a){this.type=a}function sb(a){y.call(this,-1,a)}t(sb,y);function tb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function ub(a){return ya(arguments,function(a,c){return a+c},0)}
function vb(a){return ub.apply(null,arguments)/arguments.length}function wb(a){var b=arguments.length;if(2>b)return 0;var c=vb.apply(null,arguments);return ub.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function xb(a){return Math.sqrt(wb.apply(null,arguments))};var yb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function zb(){}zb.prototype.next=function(){throw yb;};zb.prototype.le=function(){return this};function Ab(a){if(a instanceof zb)return a;if("function"==typeof a.le)return a.le(!1);if(ha(a)){var b=0,c=new zb;c.next=function(){for(;;){if(b>=a.length)throw yb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Bb(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==yb)throw c;}else{a=Ab(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==yb)throw d;}}}function Cb(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new zb;var b=new zb,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw yb;};return b};function Db(a){Eb(a);return a.c.concat()}function Eb(a){if(a.xf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Fb(a.W,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.xf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Fb(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(){return new window.Map}function Gb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Hb={};r("lf.TransactionType",Hb);Hb.READ_ONLY=0;Hb.READ_WRITE=1;function Ib(a,b){this.Oa=a;this.jf=b;this.X=x()}Ib.prototype.ia=function(){try{Jb(this.Oa)}catch(a){return Za(a)}return(0==this.jf?this.lc():Kb(this)).then(function(a){this.Oa.ia();return a}.bind(this))};function Kb(a){Lb(a);Mb(a);return a.lc()}
function Lb(a){a.Oa.ob.forEach(function(a,c){var d=this.Oa.Z().get(c),d=this.G(d.getName(),d.Jb.bind(d)),e=B(a.Ca).map(function(a){return a.id()});0<e.length&&d.remove(e).he(this.Jd,this);e=B(a.pa).map(function(a){return a[1]}).concat(B(a.Ba));d.put(e).he(this.Jd,this)},a)}function Mb(a){Nb(a.Oa).forEach(function(a){var c=this.G(a.getName(),ob),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ha())},this.Jd.bind(this))},a)}Ib.prototype.Jd=function(a){this.X.reject(a)};function Ob(a){this.og=a}Ob.prototype.toString=g("og");var Pb=new Ob("backstore"),Qb=new Ob("cache"),Rb=new Ob("indexstore"),Tb=new Ob("engine"),Ub=new Ob("runner"),Vb=new Ob("observerregistry"),Wb=new Ob("schema");var Xb=Ga(),Yb=u("Trident")||u("MSIE"),Zb=u("Edge"),$b=u("Gecko")&&!(-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),ac=-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge");function bc(){var a=Da;if($b)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Zb)return/Edge\/([\d\.]+)/.exec(a);if(Yb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ac)return/WebKit\/(\S+)/.exec(a)}
(function(){if(Xb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=bc())&&(a=b?b[1]:"");return Yb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ha()||u("Firefox")||Ga();Ha();function C(a){return q(a)?new window.Set(a):new window.Set}function cc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function dc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function ec(a,b){this.oa=a;this.o=b||{}}function fc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return cc(b)}ec.prototype.U=g("oa");function gc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ha()},a)}function hc(a,b){b.forEach(function(a){delete this.o[a]},a)}ec.prototype.Ha=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function ic(a){return new ec(a.id,JSON.parse(a.value))};function jc(a,b,c){this.aa=a;this.Ib=b;this.af=c}m=jc.prototype;m.get=function(a){if(0==a.length)return this.uc();var b=this.Ib;return kc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function kc(a,b){var c=z(),d=x(),e=fc(b).map(function(a){return new v(function(b,d){var e;try{e=this.aa.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=ic(a.target.result);c.set(a.U(),a);b()}},this)},a);bb(e).then(function(){d.resolve(c)});return d.ha}
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=ic(b.value).o;for(var k in e)c.push(this.Ib(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.af(this.aa.name,d));gc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.aa.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.af(this.aa.name,d));hc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.aa.delete(a.U()):this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};function lc(a,b,c){a=a.i(Qb);var d=[c<<9,(c+1<<9)-1];b=a.Wa(b,d[0],d[1]);c=new ec(c);gc(c,b);return c}
function mc(a,b){return new ec(b)};function nc(){};function oc(a){this.ca=a.i(Qb);this.C=a.i(Rb);this.m=a.i(Wb)}oc.prototype.update=function(a){a.forEach(function(a){pc(this,a);qc(this,a)},this)};function qc(a,b){var c=b.getName();b.Ca.forEach(function(a,b){this.ca.remove(c,b)},a);b.Ba.forEach(function(a){this.ca.set(c,a)},a);b.pa.forEach(function(a){this.ca.set(c,a[1])},a)}function pc(a,b){var c=a.m.table(b.getName());rc(b).forEach(function(a){sc(this,c,a)},a)}
function sc(a,b,c){var d=[];(a.C.gc.get(b.getName())||[]).forEach(function(a){try{tc(a,c),d.push(a)}catch(b){throw d.forEach(function(a){tc(a,[c[1],c[0]])},this),b;}},a)}function tc(a,b){var c=null===b[1]?void 0:b[1].Cb(a.getName()),d=null===b[0]?void 0:b[0].Cb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.mc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var uc={};r("lf.ConstraintAction",uc);uc.RESTRICT=0;uc.CASCADE=1;var vc={};r("lf.ConstraintTiming",vc);vc.IMMEDIATE=0;vc.DEFERRABLE=1;var wc={};r("lf.Order",wc);wc.DESC=0;wc.ASC=1;var xc={};r("lf.Type",xc);xc.ARRAY_BUFFER=0;xc.BOOLEAN=1;xc.DATE_TIME=2;xc.INTEGER=3;xc.NUMBER=4;xc.STRING=5;xc.OBJECT=6;var yc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",yc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function zc(a){this.C=a.i(Rb);this.m=a.i(Wb);this.Zc=null}function Ac(a,b,c){var d=b.Ab().bg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.l());},this)},a)}function Bc(a,b,c,d){b.Ab().Id().forEach(function(a){a.timing==d&&Cc(this,a,c)},a)}function Cc(a,b,c){var d=Dc(a,b);c.forEach(function(a){if(Ec(a[0],a[1],b.name)&&(a=a[1].o[b.pb],null!==a&&!d.cb(a)))throw new D(203,b.name);},a)}
function Dc(a,b){null===a.Zc&&(a.Zc=z());var c=a.Zc.get(b.name)||null;null===c&&(c=a.m.table(b.Ya)[b.Hc].ua(),c=a.C.get(c.l()),a.Zc.set(b.name,c));return c}function Ec(a,b,c){return(null===a?null!==b:null===b)||a.Cb(c)!=b.Cb(c)}function Fc(a,b,c,d){b=Gc(a.m.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.C.get(a.name),h=Dc(this,a);c.forEach(function(c){if(Ec(c[0],c[1],h.getName())&&b.cb(c[0].o[a.Hc]))throw new D(203,a.name);},this)}},a)}
function Hc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Bc(a,b,c,d))}function Ic(a,b,c,d){0!=c.length&&(Bc(a,b,c,d),Fc(a,b,c,d))}function Jc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Fc(a,b,c,d))};function Lc(a){this.Ba=z();this.pa=z();this.Ca=z();this.u=a}m=Lc.prototype;m.getName=g("u");m.add=function(a){if(this.Ca.has(a.id())){var b=[this.Ca.get(a.id()),a];this.pa.set(a.id(),b);this.Ca.delete(a.id())}else this.Ba.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.Ba.has(c)?this.Ba.set(c,b):(this.pa.has(c)&&(a=[this.pa.get(a[0].id())[0],b]),this.pa.set(c,a))};
m.delete=function(a){if(this.Ba.has(a.id()))this.Ba.delete(a.id());else if(this.pa.has(a.id())){var b=this.pa.get(a.id())[0];this.pa.delete(a.id());this.Ca.set(a.id(),b)}else this.Ca.set(a.id(),a)};function rc(a){var b=[];a.Ba.forEach(function(a){b.push([null,a])});a.pa.forEach(function(a){b.push(a)});a.Ca.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Gb(this.Ba).toString()+"], ["+Gb(this.pa).toString()+"], ["+Gb(this.Ca).toString()+"]"};
function Mc(a){var b=new Lc(a.u);a.Ba.forEach(function(a){b.delete(a)});a.Ca.forEach(function(a){b.add(a)});a.pa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.Sf=function(){return 0==this.Ba.size&&0==this.Ca.size&&0==this.pa.size};function Nc(a,b){this.$=z();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.ca=a.i(Qb);this.C=a.i(Rb);this.Ma=new zc(a);this.gd=new oc(a);this.ob=z()}function Nb(a){var b=[];Gb(a.ob).map(function(a){return this.$.get(a)},a).forEach(function(a){a.xb()&&(a.va().forEach(function(a){b.push(this.C.get(a.l()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=Nc.prototype;m.Z=g("$");
function Oc(a){var b=[];a.$.forEach(function(a){a.xb()&&(a.va().forEach(function(a){b.push(a.l())}),b.push(a.getName()+".#"))});return b}m.vb=function(a,b){Pc(this,a);Ac(this.Ma,a,b);Hc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Qc(this,a,[null,b[c]])};
function Qc(a,b,c){var d=b.getName(),e=a.ob.get(d)||new Lc(d);a.ob.set(d,e);try{sc(a.gd,b,c)}catch(f){throw f;}b=c[0];var h=c[1];null===b&&null!==h?(a.ca.set(d,h),e.add(h)):null!==b&&null!==h?(a.ca.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ca.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Pc(this,a);Ac(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ca.get(d.id()),d];Ic(this.Ma,a,[d],0);Qc(this,a,d)}};
m.Ld=function(a,b){Pc(this,a);Ac(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Ab().bd();if(null===h)f=null;else{f=this.Ma;var h=h.l(),k=d.Cb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.ca.get(f),d.oa=f,Ic(this.Ma,a,[[e,d]],0)):Hc(this.Ma,a,[d],0);Qc(this,a,[e,d])}};m.remove=function(a,b){Pc(this,a);Jc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Qc(this,a,[b[c],null])};
function Jb(a){a.ob.forEach(function(a){var c=this.$.get(a.getName());Hc(this.Ma,c,B(a.Ba),1);Jc(this.Ma,c,B(a.Ca),1);Ic(this.Ma,c,B(a.pa),1)},a)}m.ia=aa();m.Eb=function(){var a=B(this.ob).map(function(a){return Mc(a)});this.gd.update(a)};function Pc(a,b){if(!a.$.has(b.getName()))throw new D(106,b.getName());};function Rc(a,b,c,d){this.b=a;this.w=b;this.da=this.b==E?!1:c;this.ma=this.w==E?!1:d}var E=new (aa());Rc.prototype.toString=function(){return(this.da?"(":"[")+(this.b==E?"unbound":this.b)+", "+(this.w==E?"unbound":this.w)+(this.ma?")":"]")};function Sc(a){if(Tc(a))return[];var b=null,c=null;a.b==E||(b=new Rc(E,a.b,!1,!a.da));a.w==E||(c=new Rc(a.w,E,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}Rc.prototype.reverse=function(){return new Rc(this.w,this.b,this.ma,this.da)};
function Uc(a,b){var c=Vc(a.b,b.b,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==E||d.w>c.b||d.w==c.b&&!d.ma&&!c.da}function Wc(){return new Rc(E,E,!1,!1)}function Tc(a){return a.b==E&&a.w==E}function Xc(a){return a.b==a.w&&a.b!=E&&!a.da&&!a.ma}Rc.prototype.contains=function(a){var b=this.w==E||a<this.w||a==this.w&&!this.ma;return(this.b==E||a>this.b||a==this.b&&!this.da)&&b};
function Vc(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Yc(a,b){var c=Vc(a.b,b.b,!0,a.da,b.da);0==c&&(c=Vc(a.w,b.w,!1,a.ma,b.ma));return c};function F(a,b){this.entries=a;this.K=C(b);this.Ua=null}function G(a){return cc(a.K)}function Zc(a){return a.entries.map(function(a){return a.sa.o})}function $c(a){return a.entries.map(function(a){return a.sa.id()})}function ad(a,b){return a.Ua.get(b.l())}var bd=null;function cd(){null===bd&&(bd=new F([],[]));return bd}
function dd(a){if(0==a.length)return cd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new F(B(e),cc(a[0].K))}function ed(a){if(0==a.length)return cd();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(B(b),cc(a[0].K))}
function fd(a,b){var c=1<b.length,d=a.map(function(a){return new gd(a,c)});return new F(d,b)}function gd(a,b){this.sa=a;this.id=hd++;this.Od=b}var hd=0;function H(a,b){var c=b.Va();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Od?a.sa.o[I(b.G())][b.getName()]:a.sa.o[b.getName()]}function id(a,b,c){var d=b.Va();if(null!=d)a.sa.o[d]=c;else if(a.Od){var d=I(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function jd(a,b,c,d){function e(a,b){if(a.Od){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new y(-1,f);return new gd(a,!0)};r("lf.bind",function(a){return new kd(a)});function kd(a){this.fa=a}r("lf.Binder",kd);kd.prototype.ua=g("fa");function ld(){this.Je=md();var a=nd();this.cc=z();this.cc.set(1,od());this.cc.set(2,pd());this.cc.set(4,a);this.cc.set(3,a);this.cc.set(5,qd())}ld.vc=function(){return ld.Fe?ld.Fe:ld.Fe=new ld};function rd(a,b,c){return(a.cc.get(b)||null).get(c)||null}function md(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function od(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function nd(){var a=od();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function qd(){var a=nd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function pd(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.B=null}var sd=[];J.prototype.getParent=g("B");J.prototype.fb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function td(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||sd}function ud(a,b){return K(a)[b]||null}function vd(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function wd(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return wd(this,K(this).indexOf(a))};function xd(a,b,c){ud(a,c).B=null;b.B=a;a.h[c]=b}function yd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){yd(a,b,c)})};function zd(){J.call(this);this.oa=Ad++}t(zd,J);var Ad=0;zd.prototype.U=g("oa");function Bd(a,b,c){zd.call(this);this.N=a;this.value=b;this.F=c;this.qc=rd(ld.vc(),this.N.H(),this.F);this.Xa=!1;this.Zb=b}t(Bd,zd);m=Bd.prototype;m.Hb=function(){var a=new Bd(this.N,this.value,this.F);a.Zb=this.Zb;a.qd(this.Xa);var b=this.U();a.oa=b;return a};m.eb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Xa");function Cd(a){var b=!1;a.value instanceof kd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof kd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Cd(this);if("in"==this.F)return Dd(this,a);var b=a.entries.filter(function(a){return this.qc(H(a,this.N),this.value)!=this.Xa},this);return new F(b,G(a))};m.bind=function(a){if(this.Zb instanceof kd){var b=this.Zb.ua();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.Zb)&&(this.value=this.Zb.map(function(b){if(b instanceof kd){var d=b.ua();if(a.length<=d)throw new D(510);return a[b.ua()]}return b}))};
function Dd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Xa}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.N))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.N.l()+" "+this.F+(this.Xa?"(complement)":"")+" "+this.value+")"};function Ed(a){this.ba=a;this.Wc=this.ya=null}function Fd(a,b){null===a.ya&&null!=a.s&&(a.ya=Gd(a.s));return a.ya.get(b)||null}function Gd(a){var b=z();yd(a,function(a){b.set(a.U(),a)});return b}function Hd(a,b){b.s&&(a.s=b.s.Hb());a.Wc=b}Ed.prototype.bind=function(){return this};function Id(a,b){var c=a.s;null!=c&&yd(c,function(a){a instanceof Bd&&a.bind(b)})};function Jd(a){Ed.call(this,a)}t(Jd,Ed);function Kd(a){var b="";a.forEach(function(c,d){b+=c.N.l()+" ";b+=1==c.ib?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Jd.prototype.Z=function(){return C(this.b)};Jd.prototype.clone=function(){var a=new Jd(this.ba);Hd(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.V=this.V;a.M=this.M;this.L&&(a.L=this.L.slice());this.ja&&(a.ja=this.ja.slice());this.Ob&&(a.Ob=this.Ob);this.Ub&&(a.Ub=this.Ub);a.wb=this.wb;return a};
Jd.prototype.bind=function(a){Jd.Fb.bind.call(this,a);null!=this.Ob&&(this.V=a[this.Ob.ua()]);null!=this.Ub&&(this.M=a[this.Ub.ua()]);Id(this,a);return this};function Ld(a,b){this.za=a;this.$=b}Ld.prototype.fb=g("za");Ld.prototype.Z=g("$");function Md(a){var b=C();a.forEach(function(a){a.Z().forEach(b.add.bind(b))});return b};function Nd(a,b){this.global=a;this.Ia=a.i(Pb);this.nd=b.map(function(a){return a.context});this.Te=b.map(function(a){return a.Zd});this.ve=Md(this.Te);this.kf=Od(this);this.$a=x()}function Od(a){return a.nd.some(function(a){return!(a instanceof Jd)})?1:0}m=Nd.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.fb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Nc(this.global,this.ve),c=[],d=this.Te.slice(),e=this.nd;return a().then(function(){return this.Ia.zb(this.kf,b).ia()}.bind(this)).then(function(){this.Wd(c);return c}.bind(this),function(a){b.Eb();throw a;})};m.H=g("kf");m.Z=g("ve");m.Kb=g("$a");m.U=function(){return ka(this)};m.Wd=aa();function Pd(a,b){Nd.call(this,a,b);this.Db=a.i(Vb)}t(Pd,Nd);Pd.prototype.getPriority=l(0);Pd.prototype.Wd=function(a){this.nd.forEach(function(b,c){Qd(this.Db,b,a[c])},this)};function Rd(a,b){this.g=a;this.Db=a.i(Vb);this.Aa=a.i(Ub);this.gd=new oc(a);this.ob=b;var c=a.i(Wb),d=this.ob.map(function(a){return c.table(a.getName())});this.$=C(d);this.$a=x()}m=Rd.prototype;m.exec=function(){this.gd.update(this.ob);this.Kc();return w()};m.H=l(1);m.Z=g("$");m.Kb=g("$a");m.U=function(){return ka(this)};m.getPriority=l(1);m.Kc=function(){var a=Sd(this.Db,this.$);0!=a.length&&(a=new Pd(this.g,a),Td(this.Aa,a))};function Ud(a){this.g=a;this.Ia=a.i(Pb);this.Aa=a.i(Ub)}Ud.prototype.Ud=function(a){a=new Rd(this.g,a);Td(this.Aa,a)};function M(a,b){this.Wb=a;this.j=b;this.Ra=z()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("j");M.prototype.dd=function(){throw new D(351);};function Vd(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Wd(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Da=function(a){return Vd(this.j,"@rev/R").then(function(a){this.Ka=a;return Vd(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ra.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Ra.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return Wd(d,b)}.bind(this))};
function Xd(a,b,c){var d=a.Ra.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Ka};return Wd(this.j,a)}.bind(a)):w()}M.prototype.oc=function(a){return Xd(this,a,l(null)).then(function(){this.Ra.delete(a);return Wd(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.oc;
M.prototype.jc=function(a,b,c){return Xd(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ka+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.jc;M.prototype.pc=function(a,b){return Xd(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ka+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.pc;M.prototype.Jc=function(a,b,c){return Xd(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ka+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Jc;
M.prototype.rb=function(){throw new D(351);};M.prototype.createRow=M.prototype.rb;M.prototype.yc=g("Wb");M.prototype.getVersion=M.prototype.yc;M.prototype.ac=function(a){var b=x();a=this.Ra.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Gb(this.Ra).map(function(b){return this.ac(b).then(function(d){a[b]=d})}.bind(this));return bb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Yd(a,b,c){Ib.call(this,c,b);this.j=a}t(Yd,Ib);Yd.prototype.G=function(a){return this.j.wc(a)};
Yd.prototype.lc=function(){var a=this.Oa.ob;if(0==a.size)this.X.resolve();else{var b=this.j.Ka+1;this.j.Ka=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Ra.get(e);a.Ba.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.pa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.Ca.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.X.resolve():(this.j.Ka=b-1,c=B(a).map(function(a){return Zd(this.j,a.getName())},this),bb(c).then(this.X.reject.bind(this.X),this.X.reject.bind(this.X)))}.bind(this))}return this.X.ha};function $d(){this.ta=z()}function ae(a,b){if(0==b.length)return B(a.ta);var c=[];b.forEach(function(a){a=this.ta.get(a)||null;null===a||c.push(a)},a);return c}$d.prototype.getData=g("ta");$d.prototype.get=function(a){return w(ae(this,a))};function be(a,b){b.forEach(function(a){this.ta.set(a.id(),a)},a)}$d.prototype.put=function(a){be(this,a);return w()};function ce(a,b){0==b.length||b.length==a.ta.size?a.ta.clear():b.forEach(function(a){this.ta.delete(a)},a)}
$d.prototype.remove=function(a){ce(this,a);return w()};function de(a){return 0==a.ta.size?0:Gb(a.ta).reduce(function(a,c){return a>c?a:c},0)};function ee(a,b){this.m=a;this.qf=b;this.Ic=z();this.Ka=-1;this.K=z();this.Ra=z();this.Ad=null}m=ee.prototype;
m.Da=function(a){this.j=this.qf.child(this.m.name());var b=a||function(){return w()};return Vd(this.j,"@db/version").then(function(a){return null===a?Wd(this.j,fe(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.m.version()?Vd(this.j,"@rev/R").then(function(a){this.Ka=a;return Vd(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ra.set(b,a[b]);a=this.m.ra().map(function(a){return Zd(this,a.getName())},this);return bb(a)}.bind(this)).then(function(){ge(this);
he(this);return w()}.bind(this)):this.Xd(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.Xd=function(a,b){var c=new M(a,this.j);return c.Da(this.m).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return Wd(a,{version:this.m.version()},!0)}.bind(this))};
function he(a){a.j.off();a.j.on("child_removed",a.dg.bind(a));a.Bd&&(a.Bd.off(),a.Ic.clear());a.Bd=a.j.orderByChild("R").startAt(a.Ka+1);a.Bd.on("value",a.Ud.bind(a))}function ge(a){mb=B(a.K).map(function(a){return de(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.dg=function(a){var b=a.val(),c=this.Ic.get(b.T)||null;null===c&&(c=C(),this.Ic.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Ud=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ka&&(this.Ka=b,a=ie(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Gb(a.Ca);0<e.length&&ce(b,e);var f=B(a.Ba);a.pa.forEach(function(a){f.push(a[1])});be(b,f)},this),0<a.length&&this.Dc(a),he(this))};
function ie(a,b){var c=C(),d=z();a.Ra.forEach(function(a,b){var h=this.K.get(b),k=new Lc(b);if(this.Ic.has(a)){var n=cc(this.Ic.get(a));n.forEach(function(a){c.add(a)});ae(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([ae(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.Sf()})}
function Zd(a,b){var c=x(),d=a.Ra.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new $d,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});be(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ha}function fe(a){var b={};b["@db"]={version:a.m.version()};b["@rev"]={R:1};a.Ka=1;b["@table"]={};a.m.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new $d);this.Ra.set(e,d)},a);return b}m.zb=function(a,b){return new Yd(this,a,b)};
m.wc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Dc=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.j=b;this.Ta=c;this.Wb=a;this.Tc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("j");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ta");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.oc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.oc;
function je(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ta.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function ke(a){var b=null;return b=a instanceof ArrayBuffer?qb(a):a instanceof Date?a.getTime():a}
function le(a,b,c){function d(a){var b=ic(a.value),d=b.o,e;for(e in d){var A=ob(d[e]);c(A);d[e]=A.Ha()}a.update(b.Ha())}function e(a){var b=ob(a.value);c(b);a.update(b.Ha())}return je(a,b,a.Tc?d:e,aa())}N.prototype.jc=function(a,b,c){var d=ke(c);return le(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.jc;N.prototype.pc=function(a,b){return le(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.pc;
N.prototype.Jc=function(a,b,c){return le(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Jc;function me(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ta.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Tc){var e;e=ic(b.value).o;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.rb=function(a){var b={},c;for(c in a)b[c]=ke(a[c]);return pb(b)};
N.prototype.createRow=N.prototype.rb;N.prototype.yc=g("Wb");N.prototype.getVersion=N.prototype.yc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ac(d))}return bb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ac=function(a){return me(this,a).then(function(a){return a.map(function(a){return a.value})})};function ne(a,b){this.aa=a;this.Ib=b}m=ne.prototype;m.get=function(a){if(0==a.length)return this.uc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.aa.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return bb(a)};
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Ib(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.aa.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.aa.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.aa.delete(a)}.bind(this))},this);bb(d).then(b,c)}.bind(this);d.onerror=c},this)};function oe(a,b,c,d,e){Ib.call(this,c,d);this.g=a;this.Ta=b;this.Tc=e;this.Ta.oncomplete=this.X.resolve.bind(this.X);this.Ta.onabort=this.X.reject.bind(this.X)}t(oe,Ib);oe.prototype.G=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.Ta.objectStore(a),new jc(a,b,0==c?ra(lc,this.g):mc)):new ne(this.Ta.objectStore(a),b)};oe.prototype.lc=function(){return this.X.ha};function pe(a,b){this.g=a;this.m=b;this.Uc=b.Ue().Df||!1}m=pe.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.m.name(),this.m.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){qe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.de().then(function(b){mb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function qe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Uc);re(d);a.m.ra().forEach(ra(a.yf,d,e),a);return b(c)}function re(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.yf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.xb()&&(c.va().forEach(function(c){this.nc(a,b,c.l(),"btree")},this),this.nc(a,b,se(c),"rowid"))};m.nc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Uc?new jc(a,ob,mc):new ne(a,ob)).put([new sb(new rb(d))]))};
m.zb=function(a,b){var c=Gb(b.Z());Oc(b).forEach(function(a){c.push(a)});var d=this.j.transaction(c,0==a?"readonly":"readwrite");return new oe(this.g,d,b,a,this.Uc)};
m.de=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var fa;try{fa=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(na){d(na);return}fa.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};fa.onerror=function(){c(f)}})}var d=this.m.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Uc?(a=ic(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.wc=function(){throw new D(511);};m.subscribe=aa();m.Dc=aa();function te(a,b,c){Ib.call(this,c,b);this.aa=a;0==b&&this.X.resolve()}t(te,Ib);te.prototype.G=function(a){return this.aa.wc(a)};te.prototype.lc=function(){this.X.resolve();return this.X.ha};function ue(a){this.m=a;this.K=z()}m=ue.prototype;m.Da=function(){this.m.ra().forEach(this.Pf,this);return w()};m.wc=function(a){var b=this.K.get(a)||null;if(null===b)throw new D(101,a);return b};m.zb=function(a,b){return new te(this,a,b)};function ve(a,b){if(!a.K.has(b)){var c=new $d;a.K.set(b,c);return c}return null}m.Pf=function(a){ve(this,a.getName());a.xb()&&(a.va().forEach(function(a){this.nc(a.l(),"btree")},this),this.nc(se(a),"rowid"))};m.nc=function(a,b){var c=ve(this,a);null===c||c.put([new sb(new rb(b))])};
m.close=aa();m.subscribe=aa();m.Dc=aa();function we(a){ue.call(this,a);this.jd=null}t(we,ue);we.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};we.prototype.Dc=function(a){null===this.jd||this.jd(a)};function xe(a,b,c){this.Ta=a;this.u=b;this.Ib=c}xe.prototype.get=function(a){var b=this.Ib;return ye(this.Ta,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
xe.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){ye(this.Ta,b,[a.id(),JSON.stringify(a.o)])},this);return w()};xe.prototype.remove=function(a){ye(this.Ta,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function ze(a,b,c){Ib.call(this,b,c);this.j=a;this.K=z();this.Dd=[]}t(ze,Ib);function Ae(a){return a.replace(".","__d__").replace("#","__s__")}ze.prototype.G=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new xe(this,Ae(a),b),this.K.set(a,c));return c};function ye(a,b,c,d){var e=x();a.Dd.push({qg:b,gg:c,transform:d,X:e});return e.ha}
ze.prototype.lc=function(){var a=null,b=this.X.reject.bind(this.X),c=function(a,b){this.X.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.X.resolve(k)}0<this.Dd.length?(a=k=this.Dd.shift(),b.executeSql(k.qg,k.gg,e,c)):this.X.resolve(d)}.bind(this);0==this.jf?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.X.ha};function O(a,b,c){this.j=c;this.g=a;this.Wb=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("j");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function Be(a){return new ze(a.j,new Nc(a.g,C()),1)}O.prototype.oc=function(a){var b=Be(this);ye(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.oc;
O.prototype.ac=function(a){var b=Be(this);ye(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Ce(a,b,c){var d=Be(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ac(b).then(function(a){a.forEach(function(a){a=c(a);ye(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.jc=function(a,b,c){var d=ke(c);return Ce(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.jc;O.prototype.pc=function(a,b){return Ce(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.pc;O.prototype.Jc=function(a,b,c){return Ce(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Jc;O.prototype.rb=function(a){var b={},c;for(c in a)b[c]=ke(a[c]);return pb(b)};
O.prototype.createRow=O.prototype.rb;O.prototype.yc=g("Wb");O.prototype.getVersion=O.prototype.yc;function De(a){ye(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=Be(this);De(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ac(a).then(function(b){c[a]=b})},this);bb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Ee(a,b,c){this.g=a;this.m=b;this.pg=c||4194304}function Fe(a){return new Nc(a.g,C())}m=Ee.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.m.name(),"",this.m.name(),this.pg);if(null!=e)this.j=e,Ge(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function Ge(a,b){var c=x(),d=new ze(a.j,Fe(a),1);ye(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);ye(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.m.version()?this.Xd(b,d).then(c.resolve.bind(c)):d>this.m.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ha}m.zb=function(a,b){if(null!=this.j)return new ze(this.j,b,a);throw new D(2);};m.close=aa();
m.wc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Dc=function(){throw new D(355);};m.Xd=function(a,b){var c=x();He(this).then(function(){a(new O(this.g,b,this.j)).then(function(){return this.de()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function He(a){var b=a.m.ra(),c=new ze(a.j,Fe(a),1),d=new ze(a.j,Fe(a),1);ye(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.m.version()]);De(c);return c.ia().then(function(a){function c(a,b){ye(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(nb(new sb(new rb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){ye(d,"DROP TABLE "+a,[])});var k=[],n=[],A=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.xb&&(a.va().forEach(function(a){a=
Ae(a.l());k.push(a);n.push(a)}),a=Ae(se(a)),k.push(a),A.push(a))});k.forEach(function(a){ye(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});A.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.de=function(){var a=0,b=x(),c=function(b){var c=new ze(this.j,Fe(this),0);ye(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.m.ra().map(function(a){return c(a.getName())});bb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Ie(a){this.W=z();this.Vb=z();a.ra().forEach(function(a){this.Vb.set(a.getName(),C())},this)}m=Ie.prototype;m.set=function(a,b){this.W.set(b.id(),b);this.Vb.get(a).add(b.id())};m.rd=function(a,b){var c=this.Vb.get(a);b.forEach(function(a){this.W.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.W.get(a)||null};function Je(a,b){return b.map(function(a){return this.get(a)},a)}
m.Wa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Vb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.W.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.W.get(b),d.push(c));return d};m.remove=function(a,b){this.W.delete(b);this.Vb.get(a).delete(b)};m.xg=function(a){return null!=a?this.Vb.get(a).size:this.W.size};m.clear=function(){this.W.clear();this.Vb.clear()};function Ke(a,b,c){var d=0,e=a.length;for(c=c||Le;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Le(a,b){return a-b}function Me(a,b,c){c=Ke(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Ne(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Oe(){this.na=0}Oe.prototype.add=function(a,b){this.na+=b};Oe.prototype.remove=function(a,b){this.na-=b};Oe.prototype.clear=function(){this.na=0};function Pe(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Qe(a,b,c,d){this.u=a;this.S=b;this.ie=c;this.mb=new Oe;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Re(this,d);this.qa=d=Se(d)}else this.clear()}var Te=[];m=Qe.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.vb(a,b)};m.set=function(a,b){this.qa=this.qa.vb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.La().na;if(a instanceof Rc){if(Tc(a))return this.La().na;if(Xc(a))return this.get(a.b).length}return this.Wa([a]).length};m.La=g("mb");m.uc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.mb.na-a-d:d,count:a,ge:0},c);return b?c.reverse():c};
m.Wa=function(a,b,c,d){var e=Ue(this.qa).c[0];if(!q(e)||0==c)return Te;b=b||!1;c=null!=c?Math.min(c,this.mb.na):this.mb.na;d=d||0;var f=Math.min(Math.max(this.mb.na-d,0),c);if(0==f)return Te;if(!q(a)||1==a.length&&a[0]instanceof Rc&&Tc(a[0]))return this.uc(f,b,c,d);a=this.S.ef(a);var h=Array(b?this.mb.na:f),k={count:0,V:h.length,reverse:b,M:d};a.forEach(function(a){for(var b=this.S.od(a),b=this.S.Nd(a)?e:b[0],b=Ve(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.V;)b.Wa(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?Ne(h,b,c,d):h};m.clear=function(){this.qa=We(this);this.mb.clear()};m.cb=function(a){return this.qa.cb(a)};m.min=function(){return this.Cc(this.S.min.bind(this.S))};m.max=function(){return this.Cc(this.S.max.bind(this.S))};m.Cc=function(a){var b=Ue(this.qa),c=Xe(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.ie?[b]:b]:[e,this.ie?[c]:c]};
m.Fa=g("ie");m.mc=g("S");m.Rd=function(a,b){return null!=a?-1==this.S.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.S.compare(a,b):!1};m.Ha=function(){for(var a=[],b=Ue(this.qa);b;)a.push(new y(b.oa,[b.c,b.A])),b=b.wa;return a};function Ye(a,b,c,d){a=new Qe(b,a,c);d=Ze(d,a);a.qa=d;return a}function $e(a,b){this.oa=a;this.D=b;this.gb=0;this.wa=this.yb=this.B=null;this.c=[];this.A=[];this.h=[]}function We(a){return new $e(mb++,a)}function P(a){return 0==a.gb}m=$e.prototype;m.next=g("wa");
function af(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.c.join("|")+"]",d=a.h.map(function(a){return a.oa}).join("|"),e=a.A.join("/"),f=b(a.yb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.wa&&(a=af(a.wa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=af(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Ue(a){return P(a)?a:Ue(a.h[0])}function Xe(a){return P(a)?a:Xe(a.h[a.h.length-1])}
function bf(a,b){b&&(b.yb=a);a&&(a.wa=b)}function Re(a,b){for(var c=b.length,d=0,e=We(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=We(e.D),bf(e,h),e=h)}return f}function cf(a){var b=a[0],c=We(b.D);c.gb=b.gb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function Se(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=cf(c);else{var d=c.length,e=0,b=We(a.D);for(b.gb=a.gb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=cf(f);h.B=b;b.h.length&&(b.c.push(f[0].c[0]),bf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=df(this,a);if(P(this)){var c=Te;this.D.Na(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.c[b],a)?b+1:b;return this.h[b].get(a)};
m.cb=function(a){var b=df(this,a);return this.D.Na(this.c[b],a)?!0:P(this)?!1:this.h[b].cb(a)};m.remove=function(a,b){ef(this,a,-1,b);if(null==this.B){var c=this;1==this.h.length&&(c=this.h[0],c.B=null);return c}return this};function ff(a){return P(a)?a.c[0]:ff(a.h[0])}function gf(a){a.c=[];for(var b=1;b<a.h.length;++b)a.c.push(ff(a.h[b]))}
function ef(a,b,c,d){var e=df(a,b),f=P(a);if(!f){var h=a.D.Na(a.c[e],b)?e+1:e;if(ef(a.h[h],b,h,d))gf(a);else return!1}else if(!a.D.Na(a.c[e],b))return!1;if(a.c.length>e&&a.D.Na(a.c[e],b)){if(q(d)&&!a.D.Fa()&&f&&(h=a.A[e],d=Ke(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.La().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Fa()?1:a.A[e].length,a.A.splice(e,1),a.D.La().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.wa&&256<a.wa.c.length)b=a.wa,e=d=0,f=a.c.length+1;else if(a.yb&&
256<a.yb.c.length)b=a.yb,d=a.yb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.A:a.h;h=null;P(a)?h=b.A:(h=b.h,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(gf(b),gf(a));b=!0}b||hf(a,c)}return!0}
function hf(a,b){var c,d,e;a.wa&&511>a.wa.c.length?(c=a.wa,e=d=0):a.yb&&(c=a.yb,d=c.c.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);bf(a.yb,a.wa);P(c)||gf(c);-1!=b&&(a.B.c.splice(b,1),a.B.h.splice(b,1))}
m.vb=function(a,b,c){var d=df(this,a);if(P(this)){if(this.D.Na(this.c[d],a)){if(c)this.D.La().remove(a,this.D.Fa()?1:this.A[d].length),this.A[d]=this.D.Fa()?b:[b];else{if(this.D.Fa())throw new D(201);if(!Me(this.A[d],b))throw new D(109);}this.D.La().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Fa()?b:[b]);this.D.La().add(a,1);512==this.c.length?(d=We(this.D),a=We(this.D),a.gb=1,a.c=[this.c[256]],a.h=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,bf(d,this.wa),bf(this,d),d=a):d=this;return d}d=this.D.Na(this.c[d],a)?d+1:d;a=this.h[d].vb(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.c.length?jf(this):this};function jf(a){var b=We(a.D),c=We(a.D);b.B=a.B;b.gb=a.gb+1;b.c=[a.c[256]];b.h=[a,c];a.c.splice(256,1);c.B=b;c.gb=a.gb;c.c=a.c.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.B=c});a.B=b;bf(c,a.wa);bf(a,c);return b}
function df(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Rd(a.c[e],b)?c=e+1:d=e}return c}function Ve(a,b){if(!P(a)){var c=df(a,b);a.D.Na(a.c[c],b)&&c++;return Ve(a.h[c],b)}return a}
m.Wa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.mc(),f=0,h=this.c.length-1,k=this.c,n=d(e.qb(k[f],a)),A=d(e.qb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var fa=function(a,b){var c=a+b>>1;return c==a?c+1:c},na=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.qb(k[b],a));if(0==h)return b;if(1==h)return-1;h=fa(b,c);if(h==c)return 0==f?c:-1;var n=d(e.qb(k[h],a));return 0==n?na(b,h,n):-1==n?na(h+1,c,f):na(b+1,h,n)},Xa=function(b,c){if(b>=c)return b;var f=d(e.qb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=fa(b,c);if(f==c)return b;var h=d(e.qb(k[f],a));return 0==h?Xa(f,c):1==h?Xa(b,f-1):-1};0!=n&&(f=na(f+1,h,A));-1!=f&&(h=Xa(f,h),-1!=h&&h>=f&&kf(this,b,c,f,h+1))}};function kf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.V));++d)if(a.D.Fa())!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Fa()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ge++]=this.A[c][d],a.count--}else if(this.D.Fa())b[a.ge++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ge++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Ze(a,b){for(var c=b.La(),d=a.map(function(a){var d=new $e(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Fa()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)bf(d[e],d[e+1]);return 1<d.length?Se(d[0]):d[0]};function mf(a){if(1==a.f.length)return new nf(a.f[0].ib);a=a.f.map(function(a){return a.ib});return new of(a)}function nf(a){this.Xc=0==a?pf:qf;this.Sd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Yd=0==a?rf:sf}t(nf,nc);function qf(a,b){return a>b?1:a<b?-1:0}function pf(a,b){return qf(b,a)}function sf(a,b){return Yc(a,b)}function rf(a,b){return Yc(b,a)}m=nf.prototype;
m.qb=function(a,b){var c=this.Sd(b),d=[c.b==E,c.w==E];if(!d[0]){var e=this.Xc(a,c.b);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.Xc(a,c.w),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.Xc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Md=function(a,b){var c=this.qb(a,b);return c[0]&&c[1]};m.ef=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.Yd(a,c)}.bind(this))};
m.Nd=function(a){return this.Sd(a).b==E};m.od=function(a){a=this.Sd(a);return[a.b,a.w]};m.toString=function(){return this.Xc==pf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function of(a){this.Ja=a.map(function(a){return new nf(a)})}t(of,nc);function tf(a,b,c,d){for(var e=0,f=0;f<a.Ja.length&&0==e;++f)e=d(a.Ja[f],b[f],c[f]);return e}m=of.prototype;m.compare=function(a,b){return tf(this,a,b,function(a,b,e){return a.compare(b,e)})};
m.min=function(a,b){return tf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return tf(this,a,b,function(a,b,e){return a.max(b,e)})};m.qb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ja.length&&(c[0]||c[1]);++d){var e=this.Ja[d].qb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Md=function(a,b){for(var c=!0,d=0;d<this.Ja.length&&c;++d)c=this.Ja[d].Md(a[d],b[d]);return c};
m.ef=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.Ja.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ja[b].Yd(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ja.length&&0==c;++h)c=this.Ja[h].Yd(a[h],b[h]);return c}.bind(this))};m.Nd=function(a){return this.Ja[0].Nd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ja[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ja[b].od(a)[1]},this);return[b,a]};function uf(a){this.fa=a;this.hb=C();this.Lc=new Oe;this.mb=new Oe}m=uf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.hb.add(b),this.Lc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.hb.clear(),this.Lc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.hb.delete(b),this.Lc.remove(a,1)):(this.hb.clear(),this.Lc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?cc(this.hb):this.fa.get(a)};
m.Yc=function(a){return this.fa.Yc(a)};m.La=function(){Pe(this.mb,[this.fa.La(),this.Lc]);return this.mb};m.Wa=function(a,b,c,d){b=this.fa.Wa(a,b,c,d);return null!=a?b:b.concat(cc(this.hb))};m.clear=function(){this.hb.clear();this.fa.clear()};m.cb=function(a){return null===a?0!=this.hb.size:this.fa.cb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ha=function(){return[new y(-2,cc(this.hb))].concat(this.fa.Ha())};m.mc=function(){return this.fa.mc()};
function vf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new uf(c);d.forEach(function(a){f.hb.add(a)});return f}m.Fa=function(){return this.fa.Fa()};function wf(a){this.u=a;this.lb=C();this.S=new nf(1)}m=wf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.lb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.lb.delete(a)};m.get=function(a){return this.cb(a)?[a]:[]};m.min=function(){return this.Cc(this.S.min.bind(this.S))};m.max=function(){return this.Cc(this.S.max.bind(this.S))};
m.Cc=function(a){if(0==this.lb.size)return null;var b=cc(this.lb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.lb.size};m.Wa=function(a,b,c,d){var e=a||[Wc()];a=cc(this.lb).filter(function(a){return e.some(function(b){return this.S.Md(a,b)},this)},this);return Ne(a,b,c,d)};m.clear=function(){this.lb.clear()};m.cb=function(a){return this.lb.has(a)};m.Ha=function(){return[new y(0,cc(this.lb))]};m.mc=g("S");
function xf(a,b){var c=new wf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Fa=l(!0);m.La=function(){var a=new Oe;a.na=this.lb.size;return a};function yf(a){this.g=a;this.Ia=a.i(Pb);this.C=a.i(Rb);this.ca=a.i(Qb)}yf.prototype.Da=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.xb()?zf(this,a):Af(this,a)).then(c)}.bind(this);return c()};function Af(a,b){var c=new Nc(a.g,C([b])),c=a.Ia.zb(0,c),d=c.G(b.getName(),b.Jb.bind(b)).get([]).then(function(a){this.ca.rd(b.getName(),a);Bf(this,b,a)}.bind(a));c.ia();return d}
function Bf(a,b,c){var d=a.C.gc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})})}function zf(a,b){var c=new Nc(a.g,C([b])),d=a.Ia.zb(0,c),c=d.G(b.getName(),b.Jb).get([]).then(function(a){this.ca.rd(b.getName(),a)}.bind(a)),e=b.va().map(function(a){return Cf(this,a,d)},a).concat(Df(a,b,d));d.ia();return bb(e.concat(c))}
function Cf(a,b,c){c=c.G(b.l(),ob,1);var d=mf(b);return c.get([]).then(function(a){if(1<a.length){if(Ef(b)){var c=Ye.bind(void 0,d,b.l(),b.Ac);a=vf(c,a.slice(1))}else a=Ye(d,b.l(),b.Ac,a.slice(1));this.C.set(b.Mc,a)}}.bind(a))}function Df(a,b,c){return c.G(se(b),ob,1).get([]).then(function(a){1<a.length&&(a=xf(se(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function Ff(){this.aa=z();this.gc=z()}Ff.prototype.Da=function(a){a.ra().forEach(function(a){var c=[];this.gc.set(a.getName(),c);var d=se(a);if(null===this.get(d)){var e=new wf(d);c.push(e);this.aa.set(d,e)}a.va().forEach(function(a){var b;b=mf(a);b=new Qe(a.l(),b,a.Ac);b=Ef(a)?new uf(b):b;c.push(b);this.aa.set(a.l(),b)},this)},this);return w()};Ff.prototype.get=function(a){return this.aa.get(a)||null};
Ff.prototype.set=function(a,b){var c=this.gc.get(a)||null;null===c&&(c=[],this.gc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.aa.set(b.getName(),b)};function Gf(a){this.fc=[];q(a)&&this.add(a)}Gf.prototype.toString=function(){return this.fc.map(function(a){return a.toString()}).join(",")};Gf.prototype.cb=function(a){return this.fc.some(function(b){return b.contains(a)})};Gf.prototype.Bb=g("fc");
Gf.prototype.add=function(a){if(0!=a.length)if(a=this.fc.concat(a),1==a.length)this.fc=a;else{a.sort(Yc);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Uc(c,a[d])){var e=a[d],f=Wc();if(c.b!=E&&e.b!=E){var h=Vc(c.b,e.b,!0);1!=h?(f.b=c.b,f.da=0!=h?c.da:c.da&&e.da):(f.b=e.b,f.da=e.da)}c.w!=E&&e.w!=E&&(h=Vc(c.w,e.w,!1),-1!=h?(f.w=c.w,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.w=e.w,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.fc=b}};
function Hf(a,b){var c=[];a.Bb().map(function(a){return b.Bb().map(function(b){var c;if(Uc(a,b)){c=Wc();var h=Vc(a.b,b.b,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.b=h.b;c.da=h.da;a.w==E||b.w==E?b=a.w==E?b:a:(h=Vc(a.w,b.w,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.w=b.w;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Gf(c.filter(function(a){return null!==a}))};function Kf(a,b){var c=[],d=null,e=null;yd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function Lf(a){return Mf(a,function(a){return null===a.h})}
function Nf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||vd(b,d,c+f)});return{parent:b,children:d}}function Of(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Pf(a){var b=ud(a,0);Nf(a);Of(b,a);return b}
function Qf(a,b,c){var d=ud(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Nf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);wd(d,h);L(k,e);vd(d,k,h)}});return d}function Rf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),wd(e,a),vd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Mf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Sf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";yd(a,function(a){for(var b=0;b<td(a);b++)d+="-";d+=c(a)});return d};function Tf(a){zd.call(this);this.Pb=a;this.Xa=!1}t(Tf,zd);m=Tf.prototype;m.Hb=function(){return Kf(this,function(a){if(a instanceof Tf){var b=new Tf(a.Pb);b.Xa=a.Xa;a=a.U();b.oa=a;return b}return a.Hb()})};m.eb=function(a){var b=a||[];yd(this,function(a){a!=this&&a.eb(b)}.bind(this));a=C(b);return cc(a)};m.qd=function(a){this.Xa!=a&&(this.Xa=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Uf(this,b)};function Uf(a,b){return"and"==a.Pb?dd(b):ed(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function Vf(){this.W=z();this.size=0}m=Vf.prototype;m.has=function(a){return this.W.has(a)};m.set=function(a,b){var c=this.W.get(a)||null;null===c&&(c=C(),this.W.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.rd=function(a,b){var c=this.W.get(a)||null;null===c&&(c=C(),this.W.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.W.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.W.delete(a));return d};m.get=function(a){a=this.W.get(a)||null;return null===a?null:cc(a)};m.clear=function(){this.W.clear();this.size=0};m.keys=function(){return Gb(this.W)};m.values=function(){var a=[];this.W.forEach(function(b){a.push.apply(a,cc(b))});return a};function Wf(a,b,c){zd.call(this);this.ga=a;this.la=b;this.F=c;this.Td=null;a=ld.vc();this.qc=rd(a,this.ga.H(),this.F);this.Vf=a.Je.get(this.ga.H())||null}t(Wf,zd);m=Wf.prototype;m.Hb=function(){var a=new Wf(this.ga,this.la,this.F),b=this.U();a.oa=b;return a};m.eb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Wf(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.la);return this.qc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ga.l()+" "+this.F+" "+this.la.l()+")"};
function Xf(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ga.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.qc=rd(ld.vc(),a.ga.H(),a.F)}return[e,d]}return[d,e]}function Yf(a){var b={};a.eb().forEach(function(a){b[a.getName()]=null});return b}
function Zf(a,b,c){null===a.Td&&(a.Td=Yf(a.la.G()));var d=new gd(new y(-1,a.Td),!1);return jd(b,c,d,[I(a.la.G())])}
function $f(a,b,c,d){var e=[b,c];d||(e=Xf(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Vf,A=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var fa=G(e),na=G(f);f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=jd(a,na,b,fa);A.push(b)}):d&&A.push(Zf(this,a,na))}.bind(a));a=G(b).concat(G(c));return new F(A,a)}
function ag(a,b,c,d,e){function f(a,b){var c=new gd(b,1<fa.length),c=jd(a,na,c,fa);A.push(c)}var h=d.Nf.G(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var A=[],fa=G(n),na=G(k);k.entries.forEach(function(a){var b=this.Vf(H(a,d.ag)),b=d.index.get(b);0!=b.length&&(d.index.Fa()?f(a,e.get(b[0])):Je(e,b).forEach(f.bind(null,a)))},a);a=G(k).concat(G(n));return new F(A,a)};function bg(a,b,c){return null===b?new Bd(a,b,c):q(b.l)?new Wf(a,b,c):new Bd(a,b,c)};var cg={};r("lf.schema.DataStoreType",cg);cg.INDEXED_DB=0;cg.MEMORY=1;cg.LOCAL_STORAGE=2;cg.FIREBASE=3;cg.WEB_SQL=4;cg.OBSERVABLE_STORE=5;function dg(a,b,c,d){this.Mc=a;this.name=b;this.Ac=c;this.f=d}dg.prototype.l=function(){return this.Mc+"."+this.name};function Ef(a){return a.f.some(function(a){return a.ba.zc()})}function Q(a,b,c,d){this.u=a;this.ka=c;this.J=b;this.ld=d;this.ab=null}r("lf.schema.Table",Q);Q.prototype.getName=g("u");Q.prototype.getName=Q.prototype.getName;Q.prototype.Va=g("ab");
function I(a){return a.ab||a.u}Q.prototype.kc=function(a){var b=new this.constructor(this.u);b.ab=a;b.lg=this.lg;return b};Q.prototype.as=Q.prototype.kc;Q.prototype.createRow=Q.prototype.rb;Q.prototype.deserializeRow=Q.prototype.Jb;Q.prototype.va=g("ka");Q.prototype.getIndices=Q.prototype.va;Q.prototype.eb=g("J");Q.prototype.getColumns=Q.prototype.eb;Q.prototype.getConstraint=Q.prototype.Ab;Q.prototype.xb=g("ld");Q.prototype.persistentIndex=Q.prototype.xb;function se(a){return a.u+".#"};function R(a,b){this.child=a;this.Gb=b;this.ab=null}m=R.prototype;m.getName=function(){return this.Gb+"("+this.child.getName()+")"};m.l=function(){return this.Gb+"("+this.child.l()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.l()};m.H=function(){return this.child.H()};m.Va=g("ab");m.va=function(){return[]};m.ua=l(null);m.zc=l(!1);m.kc=function(a){this.ab=a;return this};R.prototype.as=R.prototype.kc;
function eg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function fg(a){this.ab=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=fg.prototype;m.getName=l("*");m.l=function(){return this.getName()};m.toString=function(){return this.l()};m.G=g("O");m.H=l(4);m.Va=g("ab");m.va=function(){return[]};m.ua=l(null);m.zc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function gg(a){return new R(a||new fg,"COUNT")}r("lf.fn.count",gg);function hg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",hg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Ff=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Ff){case 1:return ig(this,a,b);case 0:return jg(this,a,b);default:return kg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Nc=function(){return this.toString()};function kg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function ig(a,b,c){return ud(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function jg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return bb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function lg(a){S.call(this,0,1);this.pe=a}t(lg,S);lg.prototype.toString=function(){return"aggregation("+this.pe.map(function(a){return a.l()}).toString()+")"};lg.prototype.ea=function(a,b){b.forEach(function(a){mg(new ng(a,this.pe))},this);return b};function ng(a,b){this.Ga=a;this.J=b}
function mg(a){a.J.forEach(function(a){a=eg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=eg(d).slice(-1)[0],f=d.child instanceof R?ad(this.Ga,d.child):this.Ga;if(null!==f.Ua&&f.Ua.has(d.l()))break;f=og(d.Gb,f,e);e=this.Ga;null===e.Ua&&(e.Ua=z());e.Ua.set(d.l(),f)}},a)}
function og(a,b,c){var d=null;switch(a){case "MIN":d=pg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=pg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=qg(b,c);break;case "COUNT":d=rg(b,c);break;case "SUM":d=sg(b,c);break;case "AVG":a=rg(b,c);0<a&&(d=sg(b,c)/a);break;case "GEOMEAN":d=tg(b,c);break;default:d=ug(b,c)}return d}function pg(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function rg(a,b){return b instanceof fg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function sg(a,b){return pg(a,b,function(a,b){return b+a})}function ug(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:xb.apply(null,c)}function tg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function qg(a,b){var c=z();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(B(c),G(a))};function vg(a,b){this.za=a;this.$=b}vg.prototype.fb=g("za");vg.prototype.Z=g("$");function wg(){J.call(this)}t(wg,J);function xg(a,b){J.call(this);this.table=a;this.values=b}t(xg,wg);function yg(a,b){xg.call(this,a,b)}t(yg,xg);function zg(a){J.call(this);this.table=a}t(zg,wg);zg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Ag(a,b){J.call(this);this.table=a;this.je=b}t(Ag,wg);
Ag.prototype.toString=function(){var a=[];this.je&&(a=this.je.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Bg(a){J.call(this);this.I=a}t(Bg,wg);Bg.prototype.toString=function(){return"select("+this.I.toString()+")"};function Cg(a){J.call(this);this.table=a}t(Cg,wg);Cg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Va()||(a+=" as "+this.table.Va());return a+")"};
function Dg(){J.call(this)}t(Dg,wg);Dg.prototype.toString=l("cross_product");function Eg(a,b){J.call(this);this.f=a;this.Lb=b}t(Eg,wg);Eg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Fg(a){J.call(this);this.L=a}t(Fg,wg);Fg.prototype.toString=function(){return"order_by("+Kd(this.L)+")"};function Gg(a){J.call(this);this.f=a}t(Gg,wg);
Gg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Hg(a){J.call(this);this.f=a}t(Hg,wg);Hg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Ig(a){J.call(this);this.V=a}t(Ig,wg);Ig.prototype.toString=function(){return"limit("+this.V+")"};function Jg(a){J.call(this);this.M=a}t(Jg,wg);Jg.prototype.toString=function(){return"skip("+this.M+")"};function Kg(a,b){J.call(this);this.I=a;this.Nb=b}t(Kg,wg);
Kg.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function Lg(){};function Mg(){}t(Mg,Lg);Mg.prototype.kb=function(a){this.Y=a;this.Sa(this.Y);return this.Y};Mg.prototype.Sa=function(a){if(a instanceof Bg){var b=Ng(this,a.I),b=Og(this,b);Rf(a,a,b[0],b[1]);a==this.Y&&(this.Y=b[0]);a=b[0]}K(a).forEach(function(a){this.Sa(a)},this)};function Ng(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Ng(this,a)},a);return Ca(c)}
function Og(a,b){var c=null,d=null;b.map(function(a,b){var h=new Bg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Pg(){}t(Pg,Lg);Pg.prototype.kb=function(a,b){if(3>b.b.length)return a;this.Y=a;this.Sa(this.Y);return this.Y};Pg.prototype.Sa=function(a){if(a instanceof Dg)for(;2<K(a).length;){for(var b=new Dg,c=0;2>c;c++){var d=wd(a,0);L(b,d)}vd(a,b,0)}K(a).forEach(function(a){this.Sa(a)},this)};function Qg(){S.call(this,0,0)}t(Qg,S);Qg.prototype.toString=l("cross_product");Qg.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],f=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var A=jd(c.entries[k],f,d.entries[n],h);e.push(A)}c=G(c).concat(G(d));return[new F(e,c)]};function Rg(a,b){Nd.call(this,a,b);this.Aa=a.i(Ub);this.Db=a.i(Vb)}t(Rg,Nd);Rg.prototype.getPriority=l(2);Rg.prototype.Wd=function(a){0==this.H()?Sg(this,a):this.Kc()};function Sg(a,b){a.nd.forEach(function(a,d){a instanceof Jd&&Qd(this.Db,a,b[d])},a)}Rg.prototype.Kc=function(){var a=Sd(this.Db,this.Z());0!=a.length&&(a=new Pd(this.global,a),Td(this.Aa,a))};function Tg(a){Ed.call(this,a)}t(Tg,Ed);Tg.prototype.Z=function(){var a=C();a.add(this.b);Ug(this,this.b.getName(),a);return a};function Ug(a,b,c){var d=Vg(a.ba.info(),b,1);Vg(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Ug(this,a.getName(),c)},a)}Tg.prototype.clone=function(){var a=new Tg(this.ba);Hd(a,this);a.b=this.b;return a};Tg.prototype.bind=function(a){Tg.Fb.bind.call(this,a);Id(this,a);return this};function Wg(a){Ed.call(this,a)}t(Wg,Ed);Wg.prototype.Z=function(){var a=C();a.add(this.Ea);var b=this.ba.info();Xg(this.Ea.getName(),b.Re).forEach(a.add.bind(a));this.Xb&&Vg(b,this.Ea.getName()).forEach(a.add.bind(a));return a};Wg.prototype.clone=function(){var a=new Wg(this.ba);Hd(a,this);a.Ea=this.Ea;this.values&&(a.values=this.values instanceof kd?this.values:this.values.slice());a.Xb=this.Xb;a.Yb=this.Yb;return a};
Wg.prototype.bind=function(a){Wg.Fb.bind.call(this,a);this.Yb&&(this.values=this.Yb instanceof kd?a[this.Yb.ua()]:this.Yb.map(function(b){return b instanceof kd?a[b.ua()]:b}));return this};function Yg(a){Ed.call(this,a)}t(Yg,Ed);Yg.prototype.Z=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.l()}),c=this.ba.info();Zg(c,b).forEach(a.add.bind(a));$g(c,b).forEach(a.add.bind(a));return a};Yg.prototype.clone=function(){var a=new Yg(this.ba);Hd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Yg.prototype.bind=function(a){Yg.Fb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});Id(this,a);return this};function ah(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+qb(b)+"'";default:return"'"+b.toString()+"'"}}function bh(a,b){var c=a.Xb?"INSERT OR REPLACE":"INSERT",d=a.Ea.eb(),c=c+(" INTO "+a.Ea.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":ah(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function ch(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function dh(a,b,c,d){return a instanceof kd?"?"+a.ua().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return ah(c,a)}).join(", ")+")":"between"==b?ah(c,a[0])+" AND "+ah(c,a[1]):ah(c,a).toString()}
function eh(a,b){return K(a).map(function(a){return"("+fh(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function gh(a){return[a.ga.l(),ch(a.F),a.la.l()].join(" ")}function fh(a,b){if(a instanceof Bd){var c=a.N.l(),d=ch(a.F),e=dh(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Tf)return eh(a,b);if(a instanceof Wf)return gh(a);throw new D(357,typeof a);}
function hh(a,b){var c=fh(a,b);return c?" WHERE "+c:""}function ih(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.l()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+ah(a.N.H(),a.value).toString()}).join(", ");a.s&&(c+=hh(a.s,b));return c+";"}
function jh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Va()?a.l()+" AS "+a.Va():a.l()}).join(", "));c="SELECT "+c+" FROM ";null!=a.wb&&0!=a.wb.size?c+=kh(a,b):(c+=a.b.map(lh).join(", "),a.s&&(c+=hh(a.s,b)));if(a.L)var d=a.L.map(function(a){return a.N.l()+(0==a.ib?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.l()}).join(", "),c+=" GROUP BY "+d);a.V&&(c+=" LIMIT "+a.V.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function lh(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function kh(a,b){for(var c=Mf(a.s,function(a){return a instanceof Wf}),d=c.map(gh),e=lh(a.b[0]),f=1;f<a.b.length;f++)var h=lh(a.b[f]),e=a.wb.has(c[d.length-f].U())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=ud(a.s,0);c instanceof Wf||(e+=" WHERE "+fh(c,b));return e}
function mh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Wg)return bh(d,c);if(d instanceof Tg){var e="DELETE FROM "+d.b.getName();d.s&&(e+=hh(d.s,c));return e+";"}if(d instanceof Yg)return ih(d,c);if(d instanceof Jd)return jh(d,c);throw new D(358,typeof d);};function T(a,b){this.global=a;this.kg=a.i(Tb);this.Aa=a.i(Ub);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.bb()}catch(a){return Za(a)}return new v(function(a,c){var d=new Rg(this.global,[this.xc()]);Td(this.Aa,d).then(function(c){a(Zc(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Hf=function(){var a=function(a){return a.Nc(this.a)+"\n"}.bind(this);return Sf(nh(this).fb(),a)};T.prototype.explain=T.prototype.Hf;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.rg=function(a){return mh(this,a)};T.prototype.toSql=T.prototype.rg;T.prototype.bb=aa();function nh(a){if(null==a.Se){var b;b=a.kg;var c=a.a,d=b.Yf.create(c);b=b.hg.create(d,c);a.Se=b}return a.Se}T.prototype.xc=function(){return{context:this.a.clone(),Zd:nh(this)}};function oh(a){T.call(this,a,new Tg(a.i(Wb)))}t(oh,T);r("lf.query.DeleteBuilder",oh);oh.prototype.b=function(a){if(null!=this.a.b)throw new D(515);this.a.b=a;return this};oh.prototype.from=oh.prototype.b;oh.prototype.s=function(a){this.yd();this.a.s=a;return this};oh.prototype.where=oh.prototype.s;oh.prototype.yd=function(){if(null==this.a.b)throw new D(548);if(null!=this.a.s)throw new D(516);};oh.prototype.bb=function(){oh.Fb.bb.call(this);if(null==this.a.b)throw new D(517);};function ph(a,b){T.call(this,a,new Wg(a.i(Wb)));this.a.Xb=b||!1}t(ph,T);r("lf.query.InsertBuilder",ph);ph.prototype.bb=function(){ph.Fb.bb.call(this);var a=this.a;if(null==a.Ea||null==a.values)throw new D(518);if(a.Xb&&null===a.Ea.Ab().bd())throw new D(519);};ph.prototype.Ea=function(a){if(null!=this.a.Ea)throw new D(520);this.a.Ea=a;return this};ph.prototype.into=ph.prototype.Ea;
ph.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof kd||a.some(function(a){return a instanceof kd})?this.a.Yb=a:this.a.values=a;return this};ph.prototype.values=ph.prototype.values;function qh(a){return rh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",qh);r("lf.op.or",function(a){return rh("or",Array.prototype.slice.call(arguments))});function rh(a,b){var c=new Tf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new Jd(a.i(Wb)));this.ze=this.td=!1;this.a.f=b;sh(this);th(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.bb=function(){U.Fb.bb.call(this);var a=this.a;if(null==a.b)throw new D(522);if(q(a.Ob)&&!q(a.V)||q(a.Ub)&&!q(a.M))throw new D(523);null!=this.a.ja?uh(this):vh(this)};function sh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Gb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function uh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.l()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.l()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new D(525);}function vh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function th(a){a.a.f.forEach(function(a){if(a instanceof R&&!wh(a.Gb,a.H()))throw new D(527,a.l());},a)}function xh(a,b){if(null==a.a.b)throw new D(b);}U.prototype.b=function(a){if(this.ze)throw new D(515);this.ze=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.b;U.prototype.s=function(a){xh(this,548);if(this.td)throw new D(516);this.td=!0;yh(this,a);return this};U.prototype.where=U.prototype.s;
function yh(a,b){if(null!=a.a.s){var c=qh(b,a.a.s);a.a.s=c}else a.a.s=b}U.prototype.Qf=function(a,b){xh(this,542);if(this.td)throw new D(547);this.a.b.push(a);yh(this,b);return this};U.prototype.innerJoin=U.prototype.Qf;U.prototype.Wf=function(a,b){xh(this,542);if(!(b instanceof Wf))throw new D(541);if(this.td)throw new D(547);this.a.b.push(a);null==this.a.wb&&(this.a.wb=C());var c=b;I(a)!=I(b.la.G())&&(c=b.reverse());this.a.wb.add(c.U());yh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Wf;
U.prototype.V=function(a){if(null!=(this.a.V||this.a.Ob))throw new D(528);if(a instanceof kd)this.a.Ob=a;else{if(0>a)throw new D(531);this.a.V=a}return this};U.prototype.limit=U.prototype.V;U.prototype.M=function(a){if(null!=(this.a.M||this.a.Ub))throw new D(529);if(a instanceof kd)this.a.Ub=a;else{if(0>a)throw new D(531);this.a.M=a}return this};U.prototype.skip=U.prototype.M;U.prototype.L=function(a,b){xh(this,549);null==this.a.L&&(this.a.L=[]);this.a.L.push({N:a,ib:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.L;U.prototype.ja=function(a){xh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ja;function wh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.Wc=null;return a};U.prototype.clone=U.prototype.clone;function zh(a,b){T.call(this,a,new Yg(a.i(Wb)));this.a.table=b}t(zh,T);r("lf.query.UpdateBuilder",zh);zh.prototype.set=function(a,b){var c={Sc:b instanceof kd?b.ua():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};zh.prototype.set=zh.prototype.set;zh.prototype.s=function(a){this.yd();this.a.s=a;return this};zh.prototype.where=zh.prototype.s;zh.prototype.yd=function(){if(null!=this.a.s)throw new D(516);};
zh.prototype.bb=function(){zh.Fb.bb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof kd}))throw new D(501);};function Ah(a){this.a=a;this.za=null}Ah.prototype.dc=function(){null===this.za&&(this.za=this.$c());return this.za};function Bh(a){Ah.call(this,a)}t(Bh,Ah);Bh.prototype.$c=function(){return this.a.Xb?new yg(this.a.Ea,this.a.values):new xg(this.a.Ea,this.a.values)};function Ch(a){Ah.call(this,a)}t(Ch,Ah);Ch.prototype.$c=function(){var a=new Ag(this.a.table,this.a.set),b=null!=this.a.s?new Bg(this.a.s.Hb()):null,c=new Cg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Dh(a,b,c){this.za=a;this.$d=b;this.Sb=c}Dh.prototype.dc=function(){this.Sb.forEach(function(a){this.za=a.kb(this.za,this.$d)},this);return this.za};function Eh(a,b){Ah.call(this,a);this.Sb=b}t(Eh,Ah);Eh.prototype.$c=function(){var a=new zg(this.a.b),b=null!=this.a.s?new Bg(this.a.s.Hb()):null,c=new Cg(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new Dh(a,this.a,this.Sb)).dc()};function Fh(){}t(Fh,Lg);Fh.prototype.kb=function(a,b){if(2>b.b.length)return a;this.Y=a;this.Sa(this.Y,b);return this.Y};Fh.prototype.Sa=function(a,b){if(a instanceof Bg&&a.I instanceof Wf){var c=a.I.U(),d=ud(a,0);d instanceof Dg&&(c=null!=b.wb&&b.wb.has(c),c=new Kg(a.I,c),Rf(a,d,c,c),a==this.Y&&(this.Y=c),a=c)}K(a).forEach(function(a){this.Sa(a,b)},this)};function Gh(){this.Rc=C()}t(Gh,Lg);Gh.prototype.kb=function(a,b){this.Rc.clear();if(!q(b.s))return a;this.Y=a;this.Sa(this.Y);this.Rc.clear();return this.Y};Gh.prototype.Sa=function(a){if(Hh(a)){var b=a.I instanceof Bd?Ih(this,a):Jh(this,a);this.Rc.add(a);b==a&&(b=ud(a,0));null!==b&&(ea(b.getParent())&&(this.Y=b),Hh(b)&&!this.Rc.has(b)&&this.Sa(b))}else K(a).forEach(function(a){this.Sa(a)},this)};
function Kh(a,b,c){var d=b;if(ud(b,0)instanceof Bg)d=Pf(b),Kh(a,b,c);else if(Lh(b)){var e=[],d=Qf(b,c,function(a){a=new Bg(a.I);e.push(a);return a});e.forEach(function(a){Kh(this,a,c)},a)}return d}function Ih(a,b){var c=C([I(b.I.N.G())]),d=function(a){return Mh(this,a,c)}.bind(a);return Kh(a,b,d)}function Jh(a,b){var c=C([I(b.I.ga.G()),I(b.I.la.G())]),d=function(a){return Mh(this,a,c)}.bind(a);return Kh(a,b,d)}
function Mh(a,b,c){var d=C();Lf(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Cg&&d.add(I(b.table));return dc(d,c)}function Hh(a){return a instanceof Bg&&!(a.I instanceof Tf)}function Lh(a){a=ud(a,0);return a instanceof Dg||a instanceof Kg};function Nh(a,b){Ah.call(this,a);this.Sb=b;this.We=this.Ne=this.df=this.Qe=this.qe=this.Ce=this.cf=this.we=this.ff=null}t(Nh,Ah);
Nh.prototype.$c=function(){Oh(this);2<=this.a.b.length&&(this.we=new Dg);this.cf=null!=this.a.s?new Bg(this.a.s.Hb()):null;this.a.L&&(this.Qe=new Fg(this.a.L));null!=this.a.M&&0<this.a.M&&(this.df=new Jg(this.a.M));null!=this.a.V&&(this.Ne=new Ig(this.a.V));null!=this.a.ja&&(this.Ce=new Hg(this.a.ja));Ph(this);this.We=new Eg(this.a.f||[],this.a.ja||null);var a=Qh(this);return(new Dh(a,this.a,this.Sb)).dc()};
function Qh(a){for(var b=[a.Ne,a.df,a.We,a.Qe,a.qe,a.Ce,a.cf,a.we],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.ff.forEach(function(a){L(b[c],a)});return d}function Oh(a){a.ff=a.a.b.map(function(a){return new Cg(a)},a)}function Ph(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.L&&a.a.L.forEach(function(a){a.N instanceof R&&b.push(a.N)});0<b.length&&(a.qe=new Gg(b))};function Rh(){this.ee=[new Mg,new Pg,new Gh,new Fh];this.Ed=[new Mg]}Rh.prototype.create=function(a){var b=null;if(a instanceof Wg)b=new Bh(a);else if(a instanceof Tg)b=new Eh(a,this.Ed);else if(a instanceof Jd)b=new Nh(a,this.ee);else if(a instanceof Yg)b=new Ch(a);else throw new D(513);b=b.dc();return new vg(b,a.Z())};function Sh(a){S.call(this,0,1);this.O=a}t(Sh,S);Sh.prototype.toString=function(){return"delete("+this.O.getName()+")"};Sh.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.O,c);return[cd()]};function Th(a,b){S.call(this,0,-1);this.table=b;this.C=a.i(Rb)}t(Th,S);Th.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Th.prototype.ea=function(){var a=this.C.get(se(this.table)),b=new F([],[this.table.getName()]),c=gg(),a=a.La().na;null===b.Ua&&(b.Ua=z());b.Ua.set(c.l(),a);return[b]};function Uh(a,b){S.call(this,0,-1);this.ca=a.i(Qb);this.C=a.i(Rb);this.table=b}t(Uh,S);Uh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Va()||(a+=" as "+this.table.Va());return a+")"};Uh.prototype.ea=function(){var a=this.C.get(se(this.table)).Wa();return[fd(Je(this.ca,a),[I(this.table)])]};function Vh(a){this.g=a}t(Vh,Lg);Vh.prototype.kb=function(a,b){this.Y=a;if(!this.zd(b))return a;var c=Mf(a,function(a){return a instanceof Uh})[0],d=new Th(this.g,c.table);Rf(c,c,d,d);return this.Y};Vh.prototype.zd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.s&&null==a.V&&null==a.M&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Gb&&a.child instanceof fg):!1};function Wh(a){S.call(this,0,1);this.Be=a}t(Wh,S);Wh.prototype.toString=function(){return"groupBy("+this.Be.map(function(a){return a.l()}).toString()+")"};Wh.prototype.ea=function(a,b){return Xh(this,b[0])};function Xh(a,b){var c=new Vf,d=function(a){return this.Be.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function Yh(a,b,c){S.call(this,0,0);this.C=a.i(Rb);this.ca=a.i(Qb);this.I=b;this.Nb=c;this.wd="eq"==this.I.F?0:2;this.De=null}t(Yh,S);var Zh=["hash","index_nested_loop","nested_loop"];Yh.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+Zh[this.wd]+", "+this.I.toString()+")"};
Yh.prototype.ea=function(a,b){switch(this.wd){case 0:return[$f(this.I,b[0],b[1],this.Nb)];case 1:return[ag(this.I,b[0],b[1],this.De,this.ca)];default:var c=this.I,d=b[0],e=b[1],f=this.Nb,h=[d,e];f||(h=Xf(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),n=G(e),A=d.entries.length,fa=e.entries.length,na=fa+256-1>>8,Xa=0;Xa<na;){for(var Sb=0;Sb<A;Sb++){var If=!1,Jf=H(d.entries[Sb],c.ga);if(null!==Jf)for(var $h=Math.min(Xa+1<<8,fa),Kc=Xa<<8;Kc<$h;Kc++)if(c.qc(Jf,H(e.entries[Kc],c.la))){var If=!0,aj=jd(d.entries[Sb],
k,e.entries[Kc],n);h.push(aj)}f&&!If&&h.push(Zf(c,d.entries[Sb],k))}Xa++}c=G(d).concat(G(e));return[new F(h,c)]}};function ai(a,b){a.wd=1;var c=a.C.get(b.ua().l());a.De={Nf:b,ag:b==a.I.ga?a.I.la:a.I.ga,index:c}};function bi(a){S.call(this,0,-1);this.Ye=a}t(bi,S);bi.prototype.toString=function(){return"no_op_step("+G(this.Ye[0]).join(",")+")"};bi.prototype.ea=g("Ye");function ci(){}t(ci,Lg);ci.prototype.kb=function(a,b){this.Y=a;if(!this.zd(b))return a;Mf(a,function(a){return a instanceof Yh}).forEach(this.jg,this);return this.Y};ci.prototype.zd=function(a){return 1<a.b.length};
ci.prototype.jg=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof Uh))return null;b=I(b.table)==I(a.I.la.G())?a.I.la:a.I.ga;return ea(b.ua())?null:b},c=b(ud(a,0)),b=b(ud(a,1));if(null!==c||null!==b){b=null===b?c:b;ai(a,b);var d=new F([],[I(b.G())]);xd(a,new bi([d]),b==c?0:1)}}};function di(a){a=a.map(function(a){return a.Bb()});a=Cb.apply(null,a);var b=[];Bb(a,function(a){b.push(a)});return b}function ei(a){this.Mb=a}ei.prototype.ad=function(){return 1==this.Mb.f.length?[Wc()]:[this.Mb.f.map(function(){return Wc()})]};function fi(a,b){this.Mb=a;this.ya=b;this.Cd=this.Le=null}
function gi(a,b){var c=z();a.ya.keys().forEach(function(a){var e=this.ya.get(a).map(function(a){return Fd(b,a)},this),f=new Gf([Wc()]);e.forEach(function(a){var b=null;"between"==a.F?b=new Rc(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new Rc(b,b,!1,!1)):b="gte"==a.F?new Rc(a.value,E,!1,!1):"gt"==a.F?new Rc(a.value,E,!0,!1):"lte"==a.F?new Rc(E,a.value,!1,!1):new Rc(E,a.value,!1,!0);a=a.Xa?Sc(b):[b];a=new Gf(a);f=Hf(f,a)});c.set(a,f)},a);return c}
fi.prototype.ad=function(a){if(this.Le==a)return this.Cd;for(var b=gi(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new Gf([Wc()]))}this.Cd=1==this.Mb.f.length?B(b)[0].Bb():di(hi(this,b));this.Le=a;return this.Cd};function hi(a,b){var c=z(),d=0;a.Mb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Gb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function ii(a,b){this.gf=b;this.C=a.i(Rb)}function ji(a,b,c){c=c.filter(a.Rf,a);if(0==c.length)return null;a=ki(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=li(c,b);return h<d?(d=h,c):a},null)}
function ki(a,b){return a.gf.va().map(function(a){a=new mi(this.C,a);ni(a,b);return a},a).filter(function(a){if(null===a.ya)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ub.f.length;f++){var h=a.ya.has(a.ub.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}ii.prototype.Rf=function(a){var b;if(b=a instanceof Bd)Cd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.gf:!1};
function mi(a,b){this.C=a;this.ub=b;this.Of=C(this.ub.f.map(function(a){return a.ba.getName()}));this.Qd=this.ya=null}function oi(a){null===a.Qd&&(a.Qd=new fi(a.ub,a.ya));return a.Qd}function ni(a,b){b.forEach(function(a){var b=a.eb()[0].getName();this.Of.has(b)&&(null===this.ya&&(this.ya=new Vf),this.ya.set(b,a.U()))},a)}function li(a,b){var c=oi(a).ad(b),d=a.C.get(a.ub.l());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function pi(a,b,c,d){S.call(this,0,-1);this.C=a.i(Rb);this.index=b;this.Ke=c;this.ce=d;this.Qc=this.Pc=!1}t(pi,S);pi.prototype.toString=function(){return"index_range_scan("+this.index.l()+", ?, "+(this.ce?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};pi.prototype.Nc=function(a){var b=this.toString(),c=this.Ke.ad(a),b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.V.toString()));this.Qc&&(b=b.replace("?",a.M.toString()));return b};
pi.prototype.ea=function(a,b,c){a=this.Ke.ad(c);b=this.C.get(this.index.l());c=(1==a.length&&a[0]instanceof Rc&&Xc(a[0])?Ne(b.get(a[0].b),!1,this.Pc?c.V:void 0,this.Qc?c.M:void 0):b.Wa(a,this.ce,this.Pc?c.V:void 0,this.Qc?c.M:void 0)).map(function(a){return new y(a,{})},this);return[fd(c,[this.index.Mc])]};function qi(a){S.call(this,0,1);this.md=a}t(qi,S);qi.prototype.toString=l("select(?)");qi.prototype.Nc=function(a){a=Fd(a,this.md);return this.toString().replace("?",a.toString())};qi.prototype.ea=function(a,b,c){return[Fd(c,this.md).eval(b[0])]};function ri(a,b){S.call(this,0,1);this.ca=a.i(Qb);this.O=b}t(ri,S);ri.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};ri.prototype.ea=function(a,b){return[fd(Je(this.ca,$c(b[0])),[I(this.O)])]};function si(a){this.g=a}t(si,Lg);si.prototype.kb=function(a,b){this.Y=a;Mf(a,function(a){return a instanceof Uh}).forEach(function(a){var d=ti(a);if(0!=d.length){var e=ji(new ii(this.g,a.table),b,d.map(function(a){return Fd(b,a.md)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.md,a)},this);this.Y=ui(this,e,f,a)}}},this);return this.Y};function ti(a){var b=[];for(a=a.getParent();a;)a instanceof qi&&b.push(a),a=a.getParent();return b}
function ui(a,b,c,d){(null===b.ya?[]:b.ya.values()).map(function(a){return c.get(a)}).forEach(Nf);b=new pi(a.g,b.ub,oi(b),!1);a=new ri(a.g,d.table);L(a,b);Rf(d,d,a,b);return b.fb()};function vi(a,b){S.call(this,0,-1);this.C=a.i(Rb);this.O=b}t(vi,S);vi.prototype.toString=function(){return"insert("+this.O.getName()+")"};vi.prototype.ea=function(a,b,c){wi(this.O,c.values,this.C);a.vb(this.O,c.values);return[fd(c.values,[this.O.getName()])]};function wi(a,b,c){a=a.Ab().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.l()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function xi(a,b){S.call(this,0,-1);this.C=a.i(Rb);this.O=b}t(xi,S);xi.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};xi.prototype.ea=function(a,b,c){wi(this.O,c.values,this.C);a.Ld(this.O,c.values);return[fd(c.values,[this.O.getName()])]};function yi(){S.call(this,0,1)}t(yi,S);yi.prototype.toString=l("limit(?)");yi.prototype.Nc=function(a){return this.toString().replace("?",a.V.toString())};yi.prototype.ea=function(a,b,c){b[0].entries.splice(c.V);return b};function zi(a){S.call(this,0,1);this.L=a}t(zi,S);m=zi.prototype;m.toString=function(){return"order_by("+Kd(this.L)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.L.length;e++){var f=hg(this.L[e].N);if(null!==c.Ua&&c.Ua.has(f.l())){d=f;break}}c=d;(null===c?b[0]:ad(b[0],c)).entries.sort(this.Ef.bind(this))}else b.sort(this.mg.bind(this));return b};
m.S=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.L[f].N,c=this.L[f].ib,d=a(e),e=b(e);while(d==e&&f+1<this.L.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.mg=function(a,b){return this.S(function(b){return b instanceof R?ad(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?ad(b,a):H(b.entries[b.entries.length-1],a)})};m.Ef=function(a,b){return this.S(function(b){return H(a,b)},function(a){return H(b,a)})};function Ai(a,b){this.Ga=a;this.J=b}function Bi(a){return a.J.some(function(a){return a instanceof R},a)?Ci(a):Di(a)}function Ci(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Gb)return a=ad(a.Ga,a.J[0]).entries.map(function(a){var b=new gd(new y(-1,{}),1<this.Ga.K.size);id(b,this.J[0],H(a,this.J[0].child));return b},a),new F(a,[]);var b=new gd(new y(-1,{}),1<a.Ga.K.size);a.J.forEach(function(a){var d=a instanceof R?ad(this.Ga,a):H(this.Ga.entries[0],a);id(b,a,d)},a);return new F([b],G(a.Ga))}
function Di(a){var b=Array(a.Ga.entries.length),c=1<a.Ga.K.size;a.Ga.entries.forEach(function(a,e){b[e]=new gd(new y(a.sa.id(),{}),c);this.J.forEach(function(c){id(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ga))}function Ei(a,b){var c=a.map(function(a){return Bi(new Ai(a,b)).entries[0]});return new F(c,G(a[0]))};function Fi(a,b){S.call(this,0,1);this.f=a;this.Lb=b}t(Fi,S);Fi.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Fi.prototype.ea=function(a,b){var c;0==b.length?c=[cd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Bi(new Ai(c,this.f))]):c=[Ei(b,this.f)];return c};function Gi(a){return a.f.some(function(a){return a instanceof R})||null!==a.Lb};function Hi(){S.call(this,0,1)}t(Hi,S);Hi.prototype.toString=l("skip(?)");Hi.prototype.Nc=function(a){return this.toString().replace("?",a.M.toString())};Hi.prototype.ea=function(a,b,c){return[new F(b[0].entries.slice(c.M),G(b[0]))]};function Ii(){}t(Ii,Lg);Ii.prototype.kb=function(a,b){if(!q(b.V)&&!q(b.M))return a;var c=Ji(a);if(null===c)return a;Mf(a,function(a){return a instanceof yi||a instanceof Hi}).forEach(function(a){a instanceof yi?c.Pc=!0:c.Qc=!0;Nf(a)},this);return c.fb()};function Ji(a){a=Mf(a,function(a){return a instanceof pi},function(a){return a instanceof Fi&&Gi(a)||a instanceof zi||1!=K(a).length||a instanceof qi});return 0<a.length?a[0]:null};function Ki(a){this.g=a}t(Ki,Lg);Ki.prototype.kb=function(a,b){var c=Li(a,b);if(null===c)return a;var d;a:{var e=c;d=Mi(ud(c,0));if(null!==d){var f;f=c.L;for(var h=null,k=d.table.va(),n=0;n<k.length&&null===h;n++)h=Ni(k[n],f);f=h;if(null===f){d=e;break a}e=new pi(this.g,f.ub,new ei(f.ub),f.He);f=new ri(this.g,d.table);L(f,e);Nf(c);e=Rf(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=Oi(ud(c,0)),null!==e){f=Ni(e.index,c.L);if(null===f)break a;e.ce=f.He;d=Nf(c).parent}return d.fb()};
function Oi(a){a=Mf(a,function(a){return a instanceof pi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Mi(a){a=Mf(a,function(a){return a instanceof Uh},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Li(a,b){return q(b.L)?Mf(a,function(a){return a instanceof zi})[0]:null}function Ni(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ba.getName()}))return null;var c=Pi(b,a);return c[0]||c[1]?{ub:a,He:c[1]}:null}
function Pi(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.ib?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.ib?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Qi(a,b,c){this.za=a;this.$d=b;this.Sb=c}Qi.prototype.dc=function(){this.Sb.forEach(function(a){this.za=a.kb(this.za,this.$d)},this);return this.za};function Ri(a,b){S.call(this,0,1);this.O=a;this.ug=b}t(Ri,S);Ri.prototype.toString=function(){return"update("+this.O.getName()+")"};Ri.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Jb(a.sa.Ha());this.ug.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);a.update(this.O,c);return[cd()]};function Si(a){this.g=a;this.ee=[new ci,new si(this.g),new Ki(this.g),new Ii,new Vh(this.g)];this.Ed=[new si(this.g)]}Si.prototype.create=function(a,b){var c=a.fb();if(c instanceof yg||c instanceof xg)return Ti(this,a,b);if(c instanceof Eg||c instanceof Ig||c instanceof Jg)return Ti(this,a,b,this.ee);if(c instanceof zg||c instanceof Ag)return Ti(this,a,b,this.Ed);throw new D(8);};function Ti(a,b,c,d){a=Kf(b.fb(),a.$f.bind(a));null!=d&&(a=(new Qi(a,c,d)).dc());return new Ld(a,b.Z())}
Si.prototype.$f=function(a){if(a instanceof Eg)return new Fi(a.f,a.Lb);if(a instanceof Hg)return new Wh(a.f);if(a instanceof Gg)return new lg(a.f);if(a instanceof Fg)return new zi(a.L);if(a instanceof Jg)return new Hi;if(a instanceof Ig)return new yi;if(a instanceof Bg)return new qi(a.I.U());if(a instanceof Dg)return new Qg;if(a instanceof Kg)return new Yh(this.g,a.I,a.Nb);if(a instanceof Cg)return new Uh(this.g,a.table);if(a instanceof zg)return new Sh(a.table);if(a instanceof Ag)return new Ri(a.table,
a.je);if(a instanceof yg)return new xi(this.g,a.table);if(a instanceof xg)return new vi(this.g,a.table);throw new D(514);};function Ui(a){this.Yf=new Rh;this.hg=new Si(a)};function Vi(){this.Oe=z()}function Wi(a,b){var c=a.Oe.get(b.getName())||null;null===c&&(c=new Xi,a.Oe.set(b.getName(),c));return c}function Yi(a,b,c,d){c.forEach(function(a){a=Wi(this,a);0==d?(a.Za=null,a.rc=b):3==d?(null===a.Tb&&(a.Tb=C()),a.Tb.add(b),null===a.Pa&&(a.Pa=C()),a.Pa.delete(b)):1==d?(null===a.Pa&&(a.Pa=C()),a.Pa.add(b)):2==d&&(a.Za=b)},a)}
function Zi(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Wi(this,a);var c=null===a.Pa||0==a.Pa.size;e=0==d?(null===a.Tb||0==a.Tb.size)&&c&&null===a.rc&&null!==a.Za&&a.Za==b:3==d?null===a.rc&&null===a.Za&&null!==a.Pa&&a.Pa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function $i(a,b,c,d){var e=Zi(a,b,c,d);e&&Yi(a,b,c,d);return e}Vi.prototype.releaseLock=function(a,b){b.forEach(function(b){Wi(this,b).releaseLock(a)},this)};
function bj(a,b){b.forEach(function(a){Wi(this,a).Za=null},a)}function Xi(){this.Tb=this.Pa=this.Za=this.rc=null}Xi.prototype.releaseLock=function(a){this.rc==a&&(this.rc=null);this.Za==a&&(this.Za=null);null===this.Pa||this.Pa.delete(a);null===this.Tb||this.Tb.delete(a)};function cj(){this.Rb=new dj;this.Bc=new Vi}function Td(a,b){(2>b.getPriority()||2>b.getPriority())&&bj(a.Bc,b.Z());a.Rb.vb(b);ej(a);return b.Kb().ha}function ej(a){for(var b=a.Rb.Bb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?fj(a,d,1,3):fj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.fg.bind(e,d),e.eg.bind(e,d))}}function fj(a,b,c,d){var e=!1;$i(a.Bc,b.U(),b.Z(),c)&&(e=$i(a.Bc,b.U(),b.Z(),d));return e}cj.prototype.fg=function(a,b){this.Bc.releaseLock(a.U(),a.Z());a.Kb().resolve(b);ej(this)};
cj.prototype.eg=function(a,b){this.Bc.releaseLock(a.U(),a.Z());a.Kb().reject(b);ej(this)};function dj(){this.Rb=[]}dj.prototype.vb=function(a){Me(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.U()-c.U():d})};dj.prototype.Bb=function(){return this.Rb.slice()};dj.prototype.remove=function(a){var b=this.Rb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function gj(a,b){this.Fd=ld.vc();this.ae=a;this.hd=b;this.J=hj(this)}function hj(a){if(0<a.ae.f.length)return a.ae.f;var b=[];a.ae.b.forEach(function(a){a.eb().forEach(function(a){b.push(a)})});return b}gj.prototype.S=function(a,b){return this.J.every(function(c){return rd(this.Fd,c.H(),"eq")(H(a,c),H(b,c))},this)};
function ij(a,b,c){var d=null===b?[]:b.entries,e=tb(d,c.entries,a.S.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=jj(h,k,0,a.hd),b.push(k))}e=tb(d,c.entries,a.S.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=jj(h,[],1,a.hd),b.push(k));return b}function jj(a,b,c,d){return{vg:c,index:a,object:d,yg:b,type:"splice"}};function kj(){this.bc=z()}kj.prototype.vd=function(a,b){var c=ka(a.a).toString(),d=this.bc.get(c)||null;null===d&&(d=new lj(a),this.bc.set(c,d));d.vd(b)};kj.prototype.be=function(a,b){var c=ka(a.a).toString(),d=this.bc.get(c)||null;d.be(b);0<d.Fc.size||this.bc.delete(c)};function Sd(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.bc.forEach(function(a){a=a.xc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Qd(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.bc.get(b)||null;null!==a&&mj(a,c)}function lj(a){this.uf=a;this.Fc=C();this.cg=[];this.Me=null;this.Cf=new gj(a.a,this.cg)}lj.prototype.vd=function(a){this.Fc.has(a)||this.Fc.add(a)};lj.prototype.be=function(a){return this.Fc.delete(a)};lj.prototype.xc=function(){var a=this.uf;return{context:a.a,Zd:nh(a)}};function mj(a,b){var c=ij(a.Cf,a.Me,b);a.Me=b;0<c.length&&a.Fc.forEach(function(a){a(c)})};function nj(a,b){var c=a.i(Wb),d=b||{},e=new Ie(c);a.jb(Qb,e);var e=null,f=!1;switch(d.storeType||0){case 1:e=new ue(c);break;case 5:e=new we(c);break;case 4:e=new Ee(a,c,d.webSqlDbSize);break;case 3:e=new ee(c,d.firebase);f=!0;break;default:e=new pe(a,c)}a.jb(Pb,e);var h=new Ff;a.jb(Rb,h);return e.Da(d.onUpgrade).then(function(){var b=new Ui(a);a.jb(Tb,b);b=new cj;a.jb(Ub,b);b=new kj;a.jb(Vb,b);return h.Da(c)}).then(function(){if(f){var b=new Ud(a);b.Ia.subscribe(b.Ud.bind(b))}return(new yf(a)).Da(c)})}
;function oj(a){this.g=a;this.m=a.i(Wb);this.$=C(this.m.ra());this.$a=x()}m=oj.prototype;m.exec=function(){var a=this.g.i(Rb),b=this.g.i(Qb),c={};this.m.ra().forEach(function(d){var f=a.get(se(d)).Wa(),f=Je(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.m.name(),version:this.m.version(),tables:c},d=new gd(new y(-1,d),!0);return w([new F([d],[])])};m.H=l(0);m.Z=g("$");m.Kb=g("$a");m.U=function(){return ka(this)};m.getPriority=l(0);function pj(a,b){this.g=a;this.m=a.i(Wb);this.$=C(this.m.ra());this.$a=x();this.ta=b;this.Ia=a.i(Pb);this.ca=a.i(Qb);this.C=a.i(Rb)}m=pj.prototype;
m.exec=function(){if(!(this.Ia instanceof pe||this.Ia instanceof ue||this.Ia instanceof Ee))throw new D(300);var a;a:{a=this.m.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(se(a[b])).La().na){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.m.name()!=this.ta.name||this.m.version()!=this.ta.version)throw new D(111);if(null==this.ta.tables)throw new D(112);return qj(this)};m.H=l(1);m.Z=g("$");m.Kb=g("$a");m.U=function(){return ka(this)};m.getPriority=l(0);
function qj(a){var b=new Nc(a.g,a.$),b=a.Ia.zb(a.H(),b),c;for(c in a.ta.tables){var d=a.m.table(c),e=a.ta.tables[c].map(function(a){return d.rb(a)}),f=b.G(c,d.Jb);a.ca.rd(c,e);var h=a.C.gc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function rj(a,b){this.g=a;this.Ia=a.i(Pb);this.Aa=a.i(Ub);this.Db=a.i(Vb);this.$=C(b);this.Oa=new Nc(this.g,this.$);this.$a=x();this.sc=x();this.me=x()}m=rj.prototype;m.exec=function(){this.me.resolve();return this.sc.ha};m.H=l(1);m.Z=g("$");m.Kb=g("$a");m.U=function(){return ka(this)};m.getPriority=l(2);function sj(a){Td(a.Aa,a);return a.me.ha}
function tj(a,b){var c=b.xc();return c.Zd.fb().exec(a.Oa,c.context).then(function(a){return Zc(a[0])},function(a){this.Oa.Eb();var b=new gb(a.name);this.sc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ia.zb(this.H(),this.Oa).ia().then(function(){this.Kc();this.sc.resolve()}.bind(this),function(a){this.Oa.Eb();this.sc.reject(a)}.bind(this));return this.$a.ha};m.Eb=function(){this.Oa.Eb();this.sc.resolve();return this.$a.ha};
m.Kc=function(){var a=Sd(this.Db,this.$);0!=a.length&&(a=new Pd(this.g,a),Td(this.Aa,a))};function uj(a){this.g=a;this.Aa=a.i(Ub);this.Oc=null;this.Qa=0;0==vj.size&&(vj.set(0,C([1,4])),vj.set(1,C([2])),vj.set(2,C([3,5,6])),vj.set(3,C([2,7])),vj.set(4,C([7])),vj.set(5,C([7])),vj.set(6,C([7])))}r("lf.proc.Transaction",uj);var vj=z();function wj(a,b){var c=vj.get(a.Qa)||null;if(null===c||!c.has(b))throw new D(107,a.Qa,b);a.Qa=b}
uj.prototype.exec=function(a){wj(this,4);var b=[];try{a.forEach(function(a){a.bb();b.push(a.xc())},this)}catch(c){return wj(this,7),Za(c)}a=new Rg(this.g,b);return Td(this.Aa,a).then(function(a){wj(this,7);return a.map(function(a){return Zc(a)})}.bind(this),function(a){wj(this,7);throw a;}.bind(this))};uj.prototype.exec=uj.prototype.exec;uj.prototype.sf=function(a){wj(this,1);this.Oc=new rj(this.g,a);return sj(this.Oc).then(function(){wj(this,2)}.bind(this))};uj.prototype.begin=uj.prototype.sf;
uj.prototype.rf=function(a){wj(this,3);return tj(this.Oc,a).then(function(a){wj(this,2);return a}.bind(this),function(a){wj(this,7);throw a;}.bind(this))};uj.prototype.attach=uj.prototype.rf;uj.prototype.ia=function(){wj(this,5);return this.Oc.ia().then(function(){wj(this,7)}.bind(this))};uj.prototype.commit=uj.prototype.ia;uj.prototype.Eb=function(){wj(this,6);return this.Oc.Eb().then(function(){wj(this,7)}.bind(this))};uj.prototype.rollback=uj.prototype.Eb;function V(a){this.g=a;this.m=a.i(Wb);this.Kd=!1}r("lf.proc.Database",V);V.prototype.Da=function(a){this.g.jb(Wb,this.m);return nj(this.g,a).then(function(){this.Kd=!0;this.Aa=this.g.i(Ub);return this}.bind(this))};V.prototype.init=V.prototype.Da;V.prototype.tb=g("m");V.prototype.getSchema=V.prototype.tb;function xj(a){if(!a.Kd)throw new D(2);}V.prototype.select=function(a){xj(this);return new U(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.vb=function(){xj(this);return new ph(this.g)};V.prototype.insert=V.prototype.vb;V.prototype.Ld=function(){xj(this);return new ph(this.g,!0)};V.prototype.insertOrReplace=V.prototype.Ld;V.prototype.update=function(a){xj(this);return new zh(this.g,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){xj(this);return new oh(this.g)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){xj(this);this.g.i(Vb).vd(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){xj(this);this.g.i(Vb).be(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.Af=function(){xj(this);return new uj(this.g)};V.prototype.createTransaction=V.prototype.Af;V.prototype.close=function(){try{this.g.i(Pb).close()}catch(a){}this.g.clear();this.Kd=!1};V.prototype.close=V.prototype.close;
V.prototype.If=function(){xj(this);var a=new oj(this.g);return Td(this.Aa,a).then(function(a){return Zc(a[0])[0]})};V.prototype["export"]=V.prototype.If;V.prototype.import=function(a){xj(this);a=new pj(this.g,a);return Td(this.Aa,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,f){this.O=a;this.u=b;this.Ie=c;this.Ge=d;this.lf=e;this.ab=f||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=g("u");m.l=function(){return I(this.O)+"."+this.u};m.toString=function(){return this.l()};m.G=g("O");m.H=g("lf");W.prototype.getType=W.prototype.H;W.prototype.Va=g("ab");W.prototype.va=function(){null==this.ka&&(this.ka=[],this.G().va().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.u)&&this.ka.push(a)},this));return this.ka};
W.prototype.ua=function(){if(!q(this.fa)){var a=this.va().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};W.prototype.zc=g("Ge");W.prototype.isNullable=W.prototype.zc;W.prototype.Ac=g("Ie");W.prototype.Na=function(a){return bg(this,a,"eq")};W.prototype.eq=W.prototype.Na;W.prototype.Pe=function(a){return bg(this,a,"neq")};W.prototype.neq=W.prototype.Pe;W.prototype.Rd=function(a){return bg(this,a,"lt")};
W.prototype.lt=W.prototype.Rd;W.prototype.Zf=function(a){return bg(this,a,"lte")};W.prototype.lte=W.prototype.Zf;W.prototype.Kf=function(a){return bg(this,a,"gt")};W.prototype.gt=W.prototype.Kf;W.prototype.Lf=function(a){return bg(this,a,"gte")};W.prototype.gte=W.prototype.Lf;W.prototype.match=function(a){return bg(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.tf=function(a,b){return bg(this,[a,b],"between")};W.prototype.between=W.prototype.tf;
W.prototype.Mf=function(a){return bg(this,a,"in")};W.prototype["in"]=W.prototype.Mf;W.prototype.Uf=function(){return this.Na(null)};W.prototype.isNull=W.prototype.Uf;W.prototype.Tf=function(){return this.Pe(null)};W.prototype.isNotNull=W.prototype.Tf;W.prototype.kc=function(a){return new W(this.O,this.u,this.Ie,this.Ge,this.lf,a)};W.prototype.as=W.prototype.kc;function yj(){this.pd=z()}var zj;yj.prototype.clear=function(){this.pd.clear()};yj.prototype.clear=yj.prototype.clear;yj.prototype.jb=function(a,b){this.pd.set(a.toString(),b);return b};yj.prototype.registerService=yj.prototype.jb;yj.prototype.i=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};yj.prototype.getService=yj.prototype.i;yj.prototype.Pd=function(a){return this.pd.has(a.toString())};yj.prototype.isRegistered=yj.prototype.Pd;function Aj(a){this.m=a;this.Xe=new Vf;this.Re=new Vf;this.ue=z();this.h=new Vf;this.re=new Vf;this.Ze=new Vf;this.te=new Vf;Bj(this)}function Bj(a){a.m.ra().forEach(function(a){var c=a.getName();a.Ab().Id().forEach(function(d){this.Xe.set(d.Ya,d);this.Re.set(c,this.m.table(d.Ya));this.h.set(d.Ya,a);0==d.action?this.Ze.set(d.Ya,a):this.re.set(d.Ya,a);this.ue.set(a.getName()+"."+d.pb,d.Ya);this.te.set(d.Ya+"."+d.Hc,a.getName())},this)},a)}function Gc(a,b){return a.Xe.get(b)}
function Xg(a,b){var c=b.get(a);return null===c?[]:c}function Zg(a,b){var c=C();b.forEach(function(a){(a=this.ue.get(a))&&c.add(a)},a);return cc(c).map(function(a){return this.m.table(a)},a)}function Vg(a,b,c){return null!=c?0==c?Xg(b,a.Ze):Xg(b,a.re):Xg(b,a.h)}function $g(a,b){var c=C();b.forEach(function(a){(a=this.te.get(a))&&a.forEach(function(a){c.add(a)})},a);return cc(c).map(function(a){return this.m.table(a)},a)};function Cj(a,b,c){this.ig=a;this.bg=b;this.Jf=c}r("lf.schema.Constraint",Cj);Cj.prototype.bd=g("ig");Cj.prototype.getPrimaryKey=Cj.prototype.bd;Cj.prototype.Id=g("Jf");Cj.prototype.getForeignKeys=Cj.prototype.Id;function Dj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new D(540,b);this.pb=a.local;this.Ya=c[0];this.Hc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Ej(a);this.Fd=ld.vc();this.u=a;this.J=z();this.sd=C();this.hc=C();this.Ec=C();this.xa=null;this.ka=z();this.ld=!1;this.sb=[]}r("lf.schema.TableBuilder",X);function Fj(a){this.name=a.name;this.ib=a.order;this.autoIncrement=a.autoIncrement}var Gj=C([0,6]);function Ej(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Hj(a,b){if(b==a.u)throw new D(546,b);if(a.J.has(b)||a.ka.has(b)||a.hc.has(b))throw new D(503,a.u+"."+b);}
function Ij(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Jj(a){if(null!==a.xa){var b=a.ka.get(a.xa).map(function(a){return a.name}),c=0;if(a.sb.some(function(a,e){c=e;return-1!=b.indexOf(a.pb)},a))throw new D(543,a.sb[c].name);}}
function Kj(a){if(null!==a.xa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.xa).map(b));a.ka.forEach(function(a,e){if(e!=this.xa){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.u+"."+e);}},a)}}function Lj(a){null===a.xa||a.ka.get(a.xa).forEach(function(a){if(this.Ec.has(a.name))throw new D(545,this.u+"."+a.name);},a)}X.prototype.mf=function(a,b){Ej(a);Hj(this,a);this.J.set(a,b);Gj.has(b)&&this.oe([a]);return this};X.prototype.addColumn=X.prototype.mf;
X.prototype.of=function(a,b){var c=this.u;this.xa="pk"+(c[0].toUpperCase()+c.substring(1));Ej(this.xa);Hj(this,this.xa);c=Mj(this,a,!0,void 0,b);Ij(this,c);1==c.length&&this.sd.add(c[0].name);this.hc.add(this.xa);this.ka.set(this.xa,c);return this};X.prototype.addPrimaryKey=X.prototype.of;
X.prototype.nf=function(a,b){Ej(a);Hj(this,a);var c=new Dj(b,this.u+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.pb))throw new D(540,a);this.sb.push(c);this.ne(a,[c.pb],this.sd.has(c.pb));return this};X.prototype.addForeignKey=X.prototype.nf;X.prototype.pf=function(a,b){Ej(a);Hj(this,a);var c=Mj(this,b,!0);Nj(this,a,c);1==c.length&&(this.sd.add(c[0].name),Oj(this,c[0].name));this.ka.set(a,c);this.hc.add(a);return this};
X.prototype.addUnique=X.prototype.pf;function Oj(a,b){a.sb.forEach(function(a){a.pb==b&&this.hc.add(a.name.split(".")[1])},a)}X.prototype.oe=function(a){a=Mj(this,a,!1);Pj(this,a);a.forEach(function(a){this.Ec.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.oe;function Pj(a,b){Gb(a.ka).forEach(function(a){var d=C();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}
X.prototype.ne=function(a,b,c,d){Ej(a);Hj(this,a);b=Mj(this,b,!0,d);Nj(this,a,b);c&&this.hc.add(a);this.ka.set(a,b);return this};X.prototype.addIndex=X.prototype.ne;function Nj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Ec.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}X.prototype.xb=ba("ld");X.prototype.persistentIndex=X.prototype.xb;X.prototype.tb=function(){Jj(this);Kj(this);Lj(this);return new (Qj(this))};X.prototype.getSchema=X.prototype.tb;
function Rj(a){return a.sb}function Mj(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Fj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Fj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return f}
function Qj(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ba:this[a.name],ib:a.ib,autoIncrement:a.autoIncrement}},this)}var d=Gb(a.J).map(function(b){this[b]=new W(this,b,a.sd.has(b),a.Ec.has(b),a.J.get(b));return this[b]},this),e=Gb(a.ka).map(function(d){return new dg(a.u,d,a.hc.has(d),b.call(this,d))},this);Q.call(this,a.u,d,e,a.ld);var f=null===a.xa?null:new dg(a.u,a.xa,!0,b.call(this,a.xa)),h=d.filter(function(b){return!a.Ec.has(b.getName())});this.wf=new Cj(f,h,a.sb);
this.bf=Sj(a,d,e)}t(b,Q);b.prototype.rb=function(a){return new this.bf(mb++,a)};b.prototype.createRow=b.prototype.rb;b.prototype.Jb=function(a){var b={};this.eb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.bf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Jb;b.prototype.Ab=g("wf");b.prototype.getConstraint=b.prototype.Ab;return b}
function Sj(a,b,c){function d(a,d){this.J=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.xe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.zc()?null:yc[b.H()]});return a};d.prototype.hf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?qb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Fd.Je.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.l();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.Cb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Y(a,b){this.m=new Z(a,b);this.nb=z();this.tc=!1}r("lf.schema.Builder",Y);function Tj(a,b){b.sb.forEach(function(a){var d=a.Ya;if(!this.nb.has(d))throw new D(536,a.name);var d=this.nb.get(d).tb(),e=a.Hc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.tb()[a.pb].H()!=d[e].H())throw new D(538,a.name);if(!d[e].Ac())throw new D(539,a.name);},a)}Y.prototype.vf=function(a){a.sb.forEach(function(a){Rj(this.nb.get(a.Ya)).forEach(function(c){if(c.pb==a.Hc)throw new D(534,a.name);},this)},this)};
function Uj(a){a.tc||(a.nb.forEach(function(a){Tj(this,a);a=a.tb();this.m.K.set(a.getName(),a)},a),B(a.nb).forEach(a.vf,a),Vj(a),a.nb.clear(),a.tc=!0)}function Wj(a,b,c){b.ke||(b.ke=!0,b.Vd=!0,b.ye.forEach(function(a){a=c.get(a);if(!a.ke)Wj(this,a,c);else if(a.Vd&&b!=a)throw new D(533);},a));b.Vd=!1}function Vj(a){var b=z();a.m.K.forEach(function(a,d){b.set(d,new Xj(d))},a);a.nb.forEach(function(a,d){a.sb.forEach(function(a){b.get(a.Ya).ye.add(d)})});B(b).forEach(function(a){Wj(this,a,b)},a)}
function Xj(a){this.Vd=this.ke=!1;this.ye=C();this.Mc=a}Y.prototype.tb=function(){this.tc||Uj(this);return this.m};Y.prototype.getSchema=Y.prototype.tb;Y.prototype.Ae=function(){var a=new Ob("ns_"+this.m.name()),b;zj||(zj=new yj);b=zj;var c=null;b.Pd(a)?c=b.i(a):(c=new yj,b.jb(a,c));return c};Y.prototype.getGlobal=Y.prototype.Ae;Y.prototype.connect=function(a){var b=this.Ae();b.Pd(Wb)||b.jb(Wb,this.tb());return(new V(b)).Da(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.zf=function(a){if(this.nb.has(a))throw new D(503,a);if(this.tc)throw new D(535);this.nb.set(a,new X(a));return this.nb.get(a)};Y.prototype.createTable=Y.prototype.zf;Y.prototype.fe=function(a){if(this.tc)throw new D(535);this.m.fe(a);return this};Y.prototype.setPragma=Y.prototype.fe;function Z(a,b){this.u=a;this.Wb=b;this.K=z();this.Ve={Df:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Wb");Z.prototype.version=Z.prototype.version;
Z.prototype.ra=function(){return B(this.K)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.K.has(a))throw new D(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ee||(this.Ee=new Aj(this));return this.Ee};Z.prototype.Ue=g("Ve");Z.prototype.pragma=Z.prototype.Ue;Z.prototype.fe=ba("Ve");r("lf.schema.create",function(a,b){return new Y(a,b)});v.prototype.catch=v.prototype.he;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
