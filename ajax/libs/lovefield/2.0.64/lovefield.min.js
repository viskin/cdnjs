if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Kg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var B=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==B[0].length&&0==O[0].length)break;b=va(0==B[1].length?0:parseInt(B[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==B[2].length,0==O[2].length)||va(B[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.gg=c;this.Lf=a;this.Ag=b;this.pd=0;this.hd=null}wa.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.hd,this.hd=a.next,a.next=null):a=this.Lf();return a};wa.prototype.put=function(a){this.Ag(a);this.pd<this.gg&&(this.pd++,a.next=this.hd,this.hd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.De;c.De=null;a()}};return function(a){d.next={De:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.yd=this.qc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.yd?this.yd.next=c:this.qc=c;this.yd=c};Pa.prototype.remove=function(){var a=null;this.qc&&(a=this.qc,this.qc=this.qc.next,this.qc||(this.yd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Qd=null}Qa.prototype.set=function(a,b){this.Qd=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Qd=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Qd.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Ua=0;this.lf=void 0;this.Xc=this.ec=this.C=null;this.gd=this.Od=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.lc=this.Kc=this.child=null;this.Bd=!1}Za.prototype.reset=function(){this.context=this.lc=this.Kc=this.child=null;this.Bd=!1};var ab=new wa(function(){return new Za},function(a){a.reset()},100);function bb(a,b,c){var d=ab.get();d.Kc=a;d.lc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ya(b,2,a);return b}function cb(a){return new v(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Sa(qa(b,a))}function fb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],db(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new gb(c,a,b)}
v.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.se=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.ec||2!=a.Ua&&3!=a.Ua||jb(a);a.Xc?a.Xc.next=b:a.ec=b;a.Xc=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new v(function(a,h){e.Kc=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.lc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof kb?h(b):a(e)}catch(B){h(B)}}:h});e.child.C=a;ib(a,e);return e.child}v.prototype.Fg=function(a){this.Ua=0;Ya(this,2,a)};v.prototype.Gg=function(a){this.Ua=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,eb(c,a.Fg,a.Gg,a)||(a.lf=c,a.Ua=b,a.C=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof v)return ib(a,bb(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function jb(a){a.Od||(a.Od=!0,Sa(a.Qf,a))}function nb(a){var b=null;a.ec&&(b=a.ec,a.ec=b.next,b.next=null);a.ec||(a.Xc=null);return b}
v.prototype.Qf=function(){for(var a=null;a=nb(this);){var b=this.Ua,c=this.lf;if(3==b&&a.lc&&!a.Bd)for(var d=void 0,d=this;d&&d.gd;d=d.C)d.gd=!1;if(a.child)a.child.C=null,ob(a,b,c);else try{a.Bd?a.Kc.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Od=!1};function ob(a,b,c){2==b?a.Kc.call(a.context,c):a.lc&&a.lc.call(a.context,c)}function lb(a,b){a.gd=!0;Sa(function(){a.gd&&pb.call(null,b)})}var pb=Ma;function kb(a){ra.call(this,a)}t(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function qb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function rb(a){return Aa(arguments,function(a,c){return a+c},0)}
function sb(a){return rb.apply(null,arguments)/arguments.length}function tb(a){var b=arguments.length;if(2>b)return 0;var c=sb.apply(null,arguments);return rb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function ub(a){return Math.sqrt(tb.apply(null,arguments))};var vb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw vb;};wb.prototype.rc=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.rc)return a.rc(!1);if(ha(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw vb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==vb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==vb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw vb;};return b};function Ab(a,b){this.o={};this.b=[];this.Pa=this.Cb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Ab.prototype;m.Bc=g("Cb");m.sa=function(){Bb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Db(a){Bb(a);return a.b.concat()}m.Ma=function(a){return Eb(this.o,a)};m.ld=function(){return 0==this.Cb};
m.clear=function(){this.o={};this.Pa=this.Cb=this.b.length=0};m.remove=function(a){return Eb(this.o,a)?(delete this.o[a],this.Cb--,this.Pa++,this.b.length>2*this.Cb&&Bb(this),!0):!1};function Bb(a){if(a.Cb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Eb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Cb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Eb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Eb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Eb(this.o,a)||(this.Cb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Ab)b=Db(a),a=a.sa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Db(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Ab(this)};
m.rc=function(a){Bb(this);var b=0,c=this.Pa,d=this,e=new wb;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw vb;var e=d.b[b++];return a?e:d.o[e]};return e};function Eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Gb=Ja(),Hb=u("Trident")||u("MSIE"),Ib=u("Edge"),Jb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Kb=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Lb(){var a=Ga;if(Jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ib)return/Edge\/([\d\.]+)/.exec(a);if(Hb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Kb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Gb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Lb())&&(a=b?b[1]:"");return Hb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Mb={};var Nb=Fb()||u("iPod"),Ob=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Pb=Ka(),Qb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Fb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Rb(){this.me=Qb||Ob||Nb;this.Zf=!(this.me||Hb&&!Mb[10]&&!(Mb[10]=0<=ta(10)));!Hb||Mb[11]||(Mb[11]=0<=ta(11));this.Ig=Pb||Qb;this.kg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.me;this.lg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.me}var Sb;function Tb(){q(Sb)||(Sb=new Rb);return Sb};function y(){this.o=new Ab;Object.defineProperty(this,"size",{get:function(){return this.o.Bc()}})}y.prototype.clear=function(){this.o.clear()};y.prototype.clear=y.prototype.clear;y.prototype.delete=function(a){return this.o.remove(a)};y.prototype["delete"]=y.prototype.delete;y.prototype.forEach=function(a,b){return this.o.forEach(a,b)};y.prototype.forEach=y.prototype.forEach;y.prototype.get=function(a){return this.o.get(a)};y.prototype.get=y.prototype.get;y.prototype.has=function(a){return this.o.Ma(a)};
y.prototype.has=y.prototype.has;y.prototype.set=function(a,b){return this.o.set(a,b)};y.prototype.set=y.prototype.set;var Ub=Tb().kg;function z(){return Ub?new window.Map:new y}function Vb(a){if(a instanceof y)return Db(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function A(a){if(a instanceof y)return a.o.sa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(a,b){this.oa=a;this.s=b||this.Ie()}var Xb=0;m=Wb.prototype;m.id=g("oa");m.Ie=function(){return{}};m.uf=g("s");m.Ga=function(){return{id:this.oa,value:this.uf()}};m.Hb=function(a){return"#"==a.substr(-1)?this.oa:null};function Yb(a){return new Wb(a.id,a.value)}function Zb(a){return new Wb(Xb++,a||{})}function $b(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var ac={};r("lf.TransactionType",ac);ac.READ_ONLY=0;ac.READ_WRITE=1;function bc(a,b){this.te=a;this.Ra=b||null;this.S=x()}bc.prototype.ia=function(){return 0==this.te?this.uc():cc(this)};function cc(a){try{dc(a.Ra)}catch(b){return cb(b)}return ec(a).then(function(a){this.Ra.ia();return a}.bind(a))}function ec(a){fc(a);gc(a);return a.uc()}
function fc(a){a.Ra.tb.forEach(function(a,c){var d=this.Ra.ca().get(c),d=this.I(d.getName(),d.Fb.bind(d),0),e=A(a.za).map(function(a){return a.id()});0<e.length&&d.remove(e).se(this.Oe,this);e=A(a.ma).map(function(a){return a[1]}).concat(A(a.va));d.put(e).se(this.Oe,this)},a)}function gc(a){hc(a.Ra).forEach(function(a){var c=this.I(a.getName(),Yb,1);c.remove([]);c.put(a.Ga())},a)}bc.prototype.Oe=function(a){this.S.reject(a)};function ic(a){this.Bg=a}ic.prototype.toString=g("Bg");var jc=new ic("backstore"),kc=new ic("cache"),lc=new ic("indexstore"),mc=new ic("engine"),nc=new ic("runner"),oc=new ic("observerregistry"),pc=new ic("schema");function qc(a){if(a.sa&&"function"==typeof a.sa)return a.sa();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function rc(a){this.o=new Ab;a&&this.addAll(a)}function sc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=rc.prototype;m.Bc=function(){return this.o.Bc()};m.add=function(a){this.o.set(sc(a),a)};m.addAll=function(a){a=qc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(sc(a))};m.clear=function(){this.o.clear()};m.ld=function(){return this.o.ld()};m.contains=function(a){return this.o.Ma(sc(a))};m.sa=function(){return this.o.sa()};
m.clone=function(){return new rc(this)};m.rc=function(){return this.o.rc(!1)};function tc(a){this.Yb=new rc(a);Object.defineProperty(this,"size",{get:function(){return this.Yb.Bc()}})}tc.prototype.add=function(a){this.Yb.add(a)};tc.prototype.add=tc.prototype.add;tc.prototype.clear=function(){this.Yb.clear()};tc.prototype.clear=tc.prototype.clear;tc.prototype.delete=function(a){return this.Yb.remove(a)};tc.prototype["delete"]=tc.prototype.delete;tc.prototype.forEach=function(a,b){this.Yb.sa().forEach(a,b)};tc.prototype.has=function(a){return this.Yb.contains(a)};
tc.prototype.has=tc.prototype.has;var uc=Tb().lg;function C(a){return uc?q(a)?new window.Set(a):new window.Set:new tc(a)}function D(a){if(a instanceof tc)return a.Yb.sa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function vc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function wc(a,b){this.oa=a;this.s=b||{}}function xc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}wc.prototype.Z=g("oa");function yc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ga()},a)}function zc(a,b){b.forEach(function(a){delete this.s[a]},a)}wc.prototype.Ga=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function Ac(a){return new wc(a.id,JSON.parse(a.value))};function Bc(a,b,c){this.Y=a;this.Eb=b;this.mf=c}m=Bc.prototype;m.get=function(a){if(0==a.length)return this.Rd();var b=this.Eb;return Cc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Cc(a,b){var c=z(),d=x(),e=xc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Y.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=Ac(a.target.result);c.set(a.Z(),a);b()}},this)},a);fb(e).then(function(){d.resolve(c)});return d.da}
m.Rd=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Ac(b.value).s;for(var h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.mf(this.Y.name,d));yc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Ub(function(){return this.Y.put(a.Ga())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.mf(this.Y.name,d));zc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Ub(function(){return 0==Object.keys(a.s).length?this.Y.delete(a.Z()):this.Y.put(a.Ga())}.bind(this))},this);return fb(a)};function Dc(a,b,c){a=a.l(kc);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new wc(c);yc(c,b);return c}
function Ec(a,b){return new wc(b)};function Fc(){};function Gc(a){this.V=a.l(kc);this.F=a.l(lc);this.i=a.l(pc)}Gc.prototype.update=function(a){a.forEach(function(a){Hc(this,a);Ic(this,a)},this)};function Ic(a,b){var c=b.getName();b.za.forEach(function(a,b){this.V.remove(c,b)},a);b.va.forEach(function(a){this.V.set(c,a)},a);b.ma.forEach(function(a){this.V.set(c,a[1])},a)}function Hc(a,b){var c=a.i.table(b.getName());Jc(b).forEach(function(a){Kc(this,c,a)},a)}
function Kc(a,b,c){var d=a.F.oc.get(b.getName())||[],e=0;d.forEach(function(a){try{Lc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Lc(a,[c[1],c[0]])},this),b;}},a)}function Lc(a,b){var c=null===b[1]?void 0:b[1].Hb(a.getName()),d=null===b[0]?void 0:b[0].Hb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.fc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Mc={};r("lf.ConstraintAction",Mc);Mc.RESTRICT=0;Mc.CASCADE=1;var Nc={};r("lf.ConstraintTiming",Nc);Nc.IMMEDIATE=0;Nc.DEFERRABLE=1;var Oc={};r("lf.Order",Oc);Oc.DESC=0;Oc.ASC=1;var Pc={};r("lf.Type",Pc);Pc.ARRAY_BUFFER=0;Pc.BOOLEAN=1;Pc.DATE_TIME=2;Pc.INTEGER=3;Pc.NUMBER=4;Pc.STRING=5;Pc.OBJECT=6;var Qc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Qc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Rc(){this.o=z();this.size=0}m=Rc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Xb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Zd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Xb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Vb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,D(b))});return a};function Sc(a){this.F=a.l(lc);this.i=a.l(pc);this.V=a.l(kc);this.ad=null}function Tc(a,b,c){var d=b.Gb().ng;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Vc(a,b,c,d){b.Gb().Sd().forEach(function(a){a.timing==d&&Wc(this,a,c)},a)}function Wc(a,b,c){var d=Xc(a,b);c.forEach(function(a){if(Yc(a[0],a[1],b.name)&&(a=a[1].s[b.hb],null!==a&&!d.Ma(a)))throw new E(203,b.name);},a)}
function Xc(a,b){null===a.ad&&(a.ad=z());var c=a.ad.get(b.name)||null;null===c&&(c=a.i.table(b.Sa)[b.mc].Aa(),c=a.F.get(c.m()),a.ad.set(b.name,c));return c}function Yc(a,b,c){return(null===a?null!==b:null===b)||a.Hb(c)!=b.Hb(c)}function Zc(a,b,c,d){b=$c(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&ad(a,b,c,function(a,b,c){if(b.Ma(c))throw new E(203,a.name);}))}
function bd(a,b,c){b=$c(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Rc;ad(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Xb(a.Ee,b)});return d}function cd(a,b,c){var d=new Rc;ad(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Pd:a,sg:k[1]})})});return d}function ad(a,b,c,d){b.forEach(function(a){var b=this.F.get(a.name),h=Xc(this,a);c.forEach(function(c){Yc(c[0],c[1],h.getName())&&d(a,b,c[0].s[a.mc],c)},this)},a)}
function dd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Vc(a,b,c,d))}function ed(a,b,c,d){0!=c.length&&(Vc(a,b,c,d),Zc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Zc(a,b,c,d))}
function gd(a,b,c){var d={re:[],of:new Rc},e=new Rc;e.Xb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Rc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=bd(this,b,a);null!==b&&(d.re.unshift.apply(d.re,b.keys()),f.Zd(b))},a);e=f;d.of.Zd(e)}while(0<e.size);return d};function hd(a){this.va=z();this.ma=z();this.za=z();this.w=a}m=hd.prototype;m.getName=g("w");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.ma.set(a.id(),b);this.za.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};m.Zd=function(a){a.va.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.za.forEach(function(a){this.delete(a)},this)};
function Jc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Vb(this.va).toString()+"], ["+Vb(this.ma).toString()+"], ["+Vb(this.za).toString()+"]"};function id(a){var b=new hd(a.w);a.va.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.ld=function(){return 0==this.va.size&&0==this.za.size&&0==this.ma.size};function jd(a,b){this.aa=z();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.i=a.l(pc);this.V=a.l(kc);this.F=a.l(lc);this.xa=new Sc(a);this.jd=new Gc(a);this.tb=z()}function hc(a){var b=[];Vb(a.tb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Bb()&&(a.Ba().forEach(function(a){b.push(this.F.get(a.m()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=jd.prototype;m.ca=g("aa");
m.zb=function(a,b){kd(this,a);Tc(this.xa,a,b);dd(this.xa,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[null,b[c]])};function ld(a,b,c){var d=b.getName(),e=a.tb.get(d)||new hd(d);a.tb.set(d,e);try{Kc(a.jd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){kd(this,a);Tc(this.xa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);md(this,a,c);ed(this.xa,a,c,0);c.forEach(function(b){ld(this,a,b)},this)};m.Td=function(a,b){kd(this,a);Tc(this.xa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Gb().dd();if(null===h)f=null;else{f=this.xa;var h=h.m(),k=d.Hb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.oa=f,ed(this.xa,a,[[e,d]],0)):dd(this.xa,a,[d],0);ld(this,a,[e,d])}};
m.remove=function(a,b){kd(this,a);nd(this,a,b);fd(this.xa,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[b[c],null])};function md(a,b,c){b=$c(a.i.info(),b.getName(),1);if(null!==b){var d=cd(a.xa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Pd.Ee),d=this.V.get(a),n=c.Fb(d.Ga());n.s[b.Pd.hb]=b.sg.s[b.Pd.mc];ld(this,c,[d,n])},this)},a)}}
function nd(a,b,c){if(null!==$c(a.i.info(),b.getName(),1)){b=gd(a.xa,b,c);var d=b.of;b.re.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);fd(this.xa,b,a,0);a.forEach(function(a){ld(this,b,[a,null])},this)},a)}}function dc(a){a.tb.forEach(function(a){var c=this.aa.get(a.getName());dd(this.xa,c,A(a.va),1);fd(this.xa,c,A(a.za),1);ed(this.xa,c,A(a.ma),1)},a)}m.ia=aa();m.Kb=function(){var a=A(this.tb).map(function(a){return id(a)});this.jd.update(a)};
function kd(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function od(a,b,c,d){this.c=a;this.A=b;this.ea=this.c==F?!1:c;this.la=this.A==F?!1:d}var F=new (aa());od.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.A==F?"unbound":this.A)+(this.la?")":"]")};function pd(a){if(qd(a))return[];var b=null,c=null;a.c==F||(b=new od(F,a.c,!1,!a.ea));a.A==F||(c=new od(a.A,F,!a.la,!1));return[b,c].filter(function(a){return null!==a})}od.prototype.reverse=function(){return new od(this.A,this.c,this.la,this.ea)};
function rd(a,b){var c=sd(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==F||d.A>c.c||d.A==c.c&&!d.la&&!c.ea}function td(){return new od(F,F,!1,!1)}function qd(a){return a.c==F&&a.A==F}function ud(a){return a.c==a.A&&a.c!=F&&!a.ea&&!a.la}od.prototype.contains=function(a){var b=this.A==F||a<this.A||a==this.A&&!this.la;return(this.c==F||a>this.c||a==this.c&&!this.ea)&&b};
function sd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function vd(a,b){var c=sd(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=sd(a.A,b.A,!1,a.la,b.la));return c};function G(a,b){this.entries=a;this.M=C(b);this.Ya=null}function H(a){return D(a.M)}function wd(a){return a.entries.map(function(a){return a.ua.s})}function xd(a){return a.entries.map(function(a){return a.ua.id()})}function yd(a,b){return a.Ya.get(b.m())}var zd=null;function Ad(){null===zd&&(zd=new G([],[]));return zd}
function Bd(a){if(0==a.length)return Ad();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(A(e),D(a[0].M))}function Cd(a){if(0==a.length)return Ad();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(A(b),D(a[0].M))}
function Dd(a,b){var c=1<b.length,d=a.map(function(a){return new Ed(a,c)});return new G(d,b)}function Ed(a,b){this.ua=a;this.id=Fd++;this.Vd=b}var Fd=0;function I(a,b){var c=b.Za();return null!==c&&a.ua.s.hasOwnProperty(c)?a.ua.s[c]:a.Vd?a.ua.s[J(b.I())][b.getName()]:a.ua.s[b.getName()]}function Gd(a,b,c){var d=b.Za();if(null!=d)a.ua.s[d]=c;else if(a.Vd){var d=J(b.I()),e=a.ua.s[d];null==e&&(e={},a.ua.s[d]=e);e[b.getName()]=c}else a.ua.s[b.getName()]=c}
function Hd(a,b,c,d){function e(a,b){if(a.Vd){var c=a.ua.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.s}var f={};e(a,b);e(c,d);a=new Wb(-1,f);return new Ed(a,!0)};r("lf.bind",function(a){return new Id(a)});function Id(a){this.ga=a}r("lf.Binder",Id);Id.prototype.Aa=g("ga");function Jd(){this.Ve=Kd();var a=Ld();this.ic=z();this.ic.set(1,Md());this.ic.set(2,Nd());this.ic.set(4,a);this.ic.set(3,a);this.ic.set(5,Od())}Jd.Cc=function(){return Jd.Re?Jd.Re:Jd.Re=new Jd};function Pd(a,b,c){return(a.ic.get(b)||null).get(c)||null}function Kd(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Md(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Ld(){var a=Md();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Od(){var a=Ld();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Nd(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.g=this.C=null}var Qd=[];K.prototype.getParent=g("C");K.prototype.jb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Rd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.g||Qd}function Sd(a,b){return L(a)[b]||null}function Td(a,b,c){b.C=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function Ud(a,b){b.C=a;null===a.g?a.g=[b]:a.g.push(b)}
function Vd(a,b){var c=a.g&&a.g[b];return c?(c.C=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}K.prototype.removeChild=function(a){return Vd(this,L(this).indexOf(a))};function Wd(a,b,c){Sd(a,c).C=null;b.C=a;a.g[c]=b}function Xd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Xd(a,b,c)})};function Yd(){K.call(this);this.oa=Zd++}t(Yd,K);var Zd=0;Yd.prototype.Z=g("oa");function $d(a,b,c){Yd.call(this);this.N=a;this.value=b;this.G=c;this.xc=Pd(Jd.Cc(),this.N.H(),this.G);this.ab=!1;this.dc=b}t($d,Yd);m=$d.prototype;m.Mb=function(){var a=new $d(this.N,this.value,this.G);a.dc=this.dc;a.vd(this.ab);var b=this.Z();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.vd=ba("ab");function ae(a){var b=!1;a.value instanceof Id||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Id}):!0);if(!b)throw new E(501);}
m.eval=function(a){ae(this);if("in"==this.G)return be(this,a);var b=a.entries.filter(function(a){return this.xc(I(a,this.N),this.value)!=this.ab},this);return new G(b,H(a))};m.bind=function(a){if(this.dc instanceof Id){var b=this.dc.Aa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.dc)&&(this.value=this.dc.map(function(b){if(b instanceof Id){var d=b.Aa();if(a.length<=d)throw new E(510);return a[b.Aa()]}return b}))};
function be(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.N))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function ce(a,b){return 2==a.N.H()?b.getTime():b};function de(a){this.ba=a;this.Yc=this.Da=null}function ee(a,b){null===a.Da&&null!=a.u&&(a.Da=fe(a.u));return a.Da.get(b)||null}function fe(a){var b=z();Xd(a,function(a){b.set(a.Z(),a)});return b}function ge(a,b){b.u&&(a.u=b.u.Mb());a.Yc=b}de.prototype.bind=function(){return this};function he(a,b){var c=a.u;null!=c&&Xd(c,function(a){a instanceof $d&&a.bind(b)})};function ie(a){de.call(this,a)}t(ie,de);function je(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.mb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ie.prototype.ca=function(){return C(this.c)};ie.prototype.clone=function(){var a=new ie(this.ba);ge(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.L=this.L;this.O&&(a.O=this.O.slice());this.ja&&(a.ja=this.ja.slice());this.Sb&&(a.Sb=this.Sb);this.$b&&(a.$b=this.$b);a.Ab=this.Ab;return a};
ie.prototype.bind=function(a){ie.eb.bind.call(this,a);null!=this.Sb&&(this.X=a[this.Sb.Aa()]);null!=this.$b&&(this.L=a[this.$b.Aa()]);he(this,a);return this};function ke(a,b){this.Ea=a;this.aa=b}ke.prototype.jb=g("Ea");ke.prototype.ca=g("aa");function le(a){var b=C();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function oe(a,b){this.global=a;this.La=a.l(jc);this.sd=b.map(function(a){return a.context});this.ef=b.map(function(a){return a.ge});this.Jd=le(this.ef);this.ue=pe(this);this.cb=x()}function pe(a){return a.sd.some(function(a){return!(a instanceof ie)})?1:0}m=oe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.jb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.ue?void 0:new jd(this.global,this.Jd),c=[],d=this.ef.slice(),e=this.sd;return a().then(function(){return this.La.Db(this.ue,D(this.Jd),b).ia()}.bind(this)).then(function(){this.de(c);return c}.bind(this),function(a){null!=b&&b.Kb();throw a;})};m.H=g("ue");m.ca=g("Jd");m.Nb=g("cb");m.Z=function(){return ka(this)};m.de=aa();function qe(a,b){oe.call(this,a,b);this.Jb=a.l(oc)}t(qe,oe);qe.prototype.getPriority=l(0);qe.prototype.de=function(a){this.sd.forEach(function(b,c){re(this.Jb,b,a[c])},this)};function se(a,b){this.h=a;this.Jb=a.l(oc);this.Fa=a.l(nc);this.jd=new Gc(a);this.tb=b;var c=a.l(pc),d=this.tb.map(function(a){return c.table(a.getName())});this.aa=C(d);this.cb=x()}m=se.prototype;m.exec=function(){this.jd.update(this.tb);this.Nc();return w()};m.H=l(1);m.ca=g("aa");m.Nb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(1);m.Nc=function(){var a=te(this.Jb,this.aa);0!=a.length&&(a=new qe(this.h,a),ue(this.Fa,a))};function ve(a){this.h=a;this.La=a.l(jc);this.Fa=a.l(nc)}ve.prototype.be=function(a){a=new se(this.h,a);ue(this.Fa,a)};function M(a,b){this.Pa=a;this.j=b;this.Va=z()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.ed=g("j");M.prototype.fd=function(){throw new E(351);};function we(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function xe(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
M.prototype.Ha=function(a){return we(this.j,"@rev/R").then(function(a){this.Na=a;return we(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return xe(d,b)}.bind(this))};
function ye(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.Na};return xe(this.j,a)}.bind(a)):w()}M.prototype.vc=function(a){return ye(this,a,l(null)).then(function(){this.Va.delete(a);return xe(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.vc;
M.prototype.sc=function(a,b,c){return ye(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.sc;M.prototype.wc=function(a,b){return ye(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.wc;M.prototype.Mc=function(a,b,c){return ye(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Mc;
M.prototype.vb=function(){throw new E(351);};M.prototype.createRow=M.prototype.vb;M.prototype.Fc=g("Pa");M.prototype.getVersion=M.prototype.Fc;M.prototype.gc=function(a){var b=x();a=this.Va.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};M.prototype.dump=function(){var a={},b=Vb(this.Va).map(function(b){return this.gc(b).then(function(d){a[b]=d})}.bind(this));return fb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ze(a,b,c){bc.call(this,b,c);this.j=a}t(ze,bc);ze.prototype.I=function(a){return this.j.Dc(a)};
ze.prototype.uc=function(){if(0==this.te)return this.S.resolve(),this.S.da;var a=this.Ra.tb;if(0==a.size)this.S.resolve();else{var b=this.j.Na+1;this.j.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Va.get(e);a.va.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.za.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.S.resolve():(this.j.Na=b-1,c=A(a).map(function(a){return Ae(this.j,a.getName())},this),
fb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.da};function Be(){this.ya=z()}function Ce(a,b){if(0==b.length)return A(a.ya);var c=[];b.forEach(function(a){a=this.ya.get(a)||null;null===a||c.push(a)},a);return c}Be.prototype.getData=g("ya");Be.prototype.get=function(a){return w(Ce(this,a))};function De(a,b){b.forEach(function(a){this.ya.set(a.id(),a)},a)}Be.prototype.put=function(a){De(this,a);return w()};function Ee(a,b){0==b.length||b.length==a.ya.size?a.ya.clear():b.forEach(function(a){this.ya.delete(a)},a)}
Be.prototype.remove=function(a){Ee(this,a);return w()};function Fe(a){return 0==a.ya.size?0:Vb(a.ya).reduce(function(a,c){return a>c?a:c},0)};function Ge(a,b){this.i=a;this.Bf=b;this.Lc=z();this.Na=-1;this.M=z();this.Va=z();this.Gd=null}m=Ge.prototype;
m.Ha=function(a){this.j=this.Bf.child(this.i.name());var b=a||function(){return w()};return we(this.j,"@db/version").then(function(a){return null===a?xe(this.j,He(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.i.version()?we(this.j,"@rev/R").then(function(a){this.Na=a;return we(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.i.ra().map(function(a){return Ae(this,a.getName())},this);return fb(a)}.bind(this)).then(function(){Ie(this);
Je(this);return w()}.bind(this)):this.ee(a,b).then(function(){return this.Ha()}.bind(this))}.bind(this))};m.ee=function(a,b){var c=new M(a,this.j);return c.Ha(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return xe(a,{version:this.i.version()},!0)}.bind(this))};
function Je(a){a.j.off();a.j.on("child_removed",a.pg.bind(a));a.Hd&&(a.Hd.off(),a.Lc.clear());a.Hd=a.j.orderByChild("R").startAt(a.Na+1);a.Hd.on("value",a.be.bind(a))}function Ie(a){Xb=A(a.M).map(function(a){return Fe(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.pg=function(a){var b=a.val(),c=this.Lc.get(b.T)||null;null===c&&(c=C(),this.Lc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.be=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Ke(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=Vb(a.za);0<e.length&&Ee(b,e);var f=A(a.va);a.ma.forEach(function(a){f.push(a[1])});De(b,f)},this),0<a.length&&this.Ic(a),Je(this))};
function Ke(a,b){var c=C(),d=z();a.Va.forEach(function(a,b){var h=this.M.get(b),k=new hd(b);if(this.Lc.has(a)){var n=D(this.Lc.get(a));n.forEach(function(a){c.add(a)});Ce(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.M.get(h.getName());k.getData().has(b)?h.modify([Ce(k,[b])[0],new Wb(b,a.P)]):h.add(new Wb(b,a.P))}}}.bind(a));return A(d).filter(function(a){return!a.ld()})}
function Ae(a,b){var c=x(),d=a.Va.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new Be,h=[];a.forEach(function(a){h.push(new Wb(parseInt(a.key(),10),a.val().P))});De(d,h);this.M.set(b,d);c.resolve()}.bind(a));return c.da}function He(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.M.set(e,new Be);this.Va.set(e,d)},a);return b}m.Db=function(a,b,c){return new ze(this,a,c)};
m.Dc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Gd");m.Ic=function(a){null!=this.Gd&&this.Gd(a)};function N(a,b,c,d){this.j=b;this.Xa=c;this.Pa=a;this.Wc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.ed=g("j");N.prototype.getRawDBInstance=N.prototype.ed;N.prototype.fd=g("Xa");N.prototype.getRawTransaction=N.prototype.fd;N.prototype.vc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.vc;
function Le(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Me(a){var b=null;return b=a instanceof ArrayBuffer?$b(a):a instanceof Date?a.getTime():a}
function Ne(a,b,c){function d(a){var b=Ac(a.value),d=b.s,e;for(e in d){var B=Yb(d[e]);c(B);d[e]=B.Ga()}a.update(b.Ga())}function e(a){var b=Yb(a.value);c(b);a.update(b.Ga())}return Le(a,b,a.Wc?d:e,aa())}N.prototype.sc=function(a,b,c){var d=Me(c);return Ne(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.sc;N.prototype.wc=function(a,b){return Ne(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.wc;
N.prototype.Mc=function(a,b,c){return Ne(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Mc;function Oe(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Wc){var e;e=Ac(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Me(a[c]);return Zb(b)};
N.prototype.createRow=N.prototype.vb;N.prototype.Fc=g("Pa");N.prototype.getVersion=N.prototype.Fc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.gc(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.gc=function(a){return Oe(this,a).then(function(a){return a.map(function(a){return a.value})})};function Pe(a,b){this.Y=a;this.Eb=b}Pe.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Qe(this):Re(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Y.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Eb(a.target.result))}.bind(this)},this)},this);return fb(a)};
function Re(a){return new v(function(a,c){var d=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Eb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Qe(a){return new v(function(a,c){var d;try{d=this.Y.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
Pe.prototype.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Pe.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Ub(function(){return this.Y.put(a.Ga())}.bind(this))},this);return fb(a)};
Pe.prototype.remove=function(a){return new v(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Ub(function(){return this.Y.delete(a)}.bind(this))},this);fb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Se(a,b,c,d,e){bc.call(this,c,e);this.h=a;this.Xa=b;this.Wc=d;this.Xa.oncomplete=this.S.resolve.bind(this.S);this.Xa.onabort=this.S.reject.bind(this.S)}t(Se,bc);Se.prototype.I=function(a,b,c){return this.Wc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new Bc(a,b,0==c?qa(Dc,this.h):Ec)):new Pe(this.Xa.objectStore(a),b)};Se.prototype.uc=function(){return this.S.da};function Te(a,b){this.h=a;this.i=b;this.Dd=b.ff().Nf||!1}m=Te.prototype;
m.Ha=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ue(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.ne().then(function(b){Xb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Ue(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Dd);Ve(d);a.i.ra().forEach(qa(a.If,d),a);return b(c)}function Ve(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.If=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Bb()&&(b.Ba().forEach(function(b){We(a,b.m())},this),We(a,Xe(b)))};
function We(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Db=function(a,b,c){b=this.j.transaction(Ye(b),0==a?"readonly":"readwrite");return new Se(this.h,b,a,this.Dd,c)};function Ye(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Ba().forEach(function(a){b.add(a.m())}),b.add(Xe(a)))});return D(b)}
m.ne=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(da){d(da);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Dd?(a=Ac(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.Dc=function(){throw new E(511);};m.subscribe=aa();m.Ic=aa();function Ze(a,b,c){bc.call(this,b,c);this.Y=a;0==b&&this.S.resolve()}t(Ze,bc);Ze.prototype.I=function(a){return this.Y.Dc(a)};Ze.prototype.uc=function(){this.S.resolve();return this.S.da};function $e(a){this.i=a;this.M=z()}m=$e.prototype;m.Ha=function(){this.i.ra().forEach(this.$f,this);return w()};m.Dc=function(a){var b=this.M.get(a)||null;if(null===b)throw new E(101,a);return b};m.Db=function(a,b,c){return new Ze(this,a,c)};function af(a,b){if(!a.M.has(b)){var c=new Be;a.M.set(b,c)}}m.$f=function(a){af(this,a.getName());a.Bb()&&(a.Ba().forEach(function(a){af(this,a.m())},this),af(this,Xe(a)))};m.close=aa();m.subscribe=aa();m.Ic=aa();function bf(a){$e.call(this,a);this.od=null}t(bf,$e);bf.prototype.subscribe=function(a){null===this.od&&(this.od=a)};bf.prototype.Ic=function(a){null===this.od||this.od(a)};function cf(a,b,c){this.Xa=a;this.w=b;this.Eb=c}cf.prototype.get=function(a){var b=this.Eb;return df(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
cf.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){df(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};cf.prototype.remove=function(a){df(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function ef(a,b,c){bc.call(this,b,c);this.j=a;this.M=z();this.Kd=[]}t(ef,bc);function ff(a){return a.replace(".","__d__").replace("#","__s__")}ef.prototype.I=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new cf(this,ff(a),b),this.M.set(a,c));return c};function df(a,b,c,d){var e=x();a.Kd.push({Dg:b,tg:c,transform:d,S:e});return e.da}
ef.prototype.uc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Kd.length?(a=k=this.Kd.shift(),b.executeSql(k.Dg,k.tg,e,c)):this.S.resolve(d)}.bind(this);0==this.te?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.S.da};function P(a,b,c){this.j=c;this.h=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.ed=g("j");P.prototype.getRawDBInstance=P.prototype.ed;P.prototype.fd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.fd;function gf(a){return new ef(a.j,1,new jd(a.h,C()))}P.prototype.vc=function(a){var b=gf(this);df(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.vc;
P.prototype.gc=function(a){var b=gf(this);df(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function hf(a,b,c){var d=gf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.gc(b).then(function(a){a.forEach(function(a){a=c(a);df(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.sc=function(a,b,c){var d=Me(c);return hf(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.sc;P.prototype.wc=function(a,b){return hf(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.wc;P.prototype.Mc=function(a,b,c){return hf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Mc;P.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Me(a[c]);return Zb(b)};
P.prototype.createRow=P.prototype.vb;P.prototype.Fc=g("Pa");P.prototype.getVersion=P.prototype.Fc;function jf(a){df(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=gf(this);jf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.gc(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.da};P.prototype.dump=P.prototype.dump;function kf(a,b,c){this.h=a;this.i=b;this.Cg=c||4194304}m=kf.prototype;m.Ha=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.Cg);if(null!=e)this.j=e,mf(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function mf(a,b){var c=x(),d=new ef(a.j,1,new jd(a.h,C()));df(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);df(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.ee(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.da}m.Db=function(a,b,c){if(null!=this.j)return new ef(this.j,a,c);throw new E(2);};m.close=aa();
m.Dc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Ic=function(){throw new E(355);};m.ee=function(a,b){var c=x();nf(this).then(function(){a(new P(this.h,b,this.j)).then(function(){return this.ne()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function nf(a){var b=a.i.ra(),c=new ef(a.j,1,new jd(a.h,C())),d=new ef(a.j,1,new jd(a.h,C()));df(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);jf(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){df(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Bb&&(a.Ba().forEach(function(a){a=ff(a.m());h.push(a);k.push(a)}),a=ff(Xe(a)),h.push(a),n.push(a))});h.forEach(function(a){df(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.ne=function(){var a=0,b=x(),c=function(b){var c=new ef(this.j,0);df(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});fb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function of(a){this.o=z();this.ac=z();a.ra().forEach(function(a){this.ac.set(a.getName(),C())},this)}m=of.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.ac.get(a).add(b.id())};m.Xb=function(a,b){var c=this.ac.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function pf(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.ac.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.ac.get(a).delete(b)};m.Bc=function(a){return null!=a?this.ac.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.ac.clear()};function qf(a,b,c){var d=0,e=a.length;for(c=c||rf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function rf(a,b){return a-b}function sf(a,b,c){c=qf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function tf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function uf(){this.na=0}uf.prototype.add=function(a,b){this.na+=b};uf.prototype.remove=function(a,b){this.na-=b};uf.prototype.clear=function(){this.na=0};function vf(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function wf(a,b,c,d){this.w=a;this.W=b;this.wf=c;this.rb=new uf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=xf(this,d);this.qa=d=yf(d)}else this.clear()}var zf=[];m=wf.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.zb(a,b)};m.set=function(a,b){this.qa=this.qa.zb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.$c=function(a){if(null==a)return this.Oa().na;if(a instanceof od){if(qd(a))return this.Oa().na;if(ud(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("rb");m.Rd=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.rb.na-a-d:d,count:a,qe:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=Af(this.qa).b[0];if(!q(e)||0==c)return zf;b=b||!1;c=null!=c?Math.min(c,this.rb.na):this.rb.na;d=d||0;var f=Math.min(Math.max(this.rb.na-d,0),c);if(0==f)return zf;if(!q(a)||1==a.length&&a[0]instanceof od&&qd(a[0]))return this.Rd(f,b,c,d);a=this.W.rf(a);var h=Array(b?this.rb.na:f),k={count:0,X:h.length,reverse:b,L:d},n=1<e.length;a.forEach(function(a){for(var b=this.W.td(a),b=this.W.Ud(a)?e:b[0],b=Bf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.X;){if(n){for(var f=b,Uc=a,
$a=k,me=h,Xf=f.D.fc(),ne=-1,La=0;La<f.b.length;++La)if(Xf.Qb(f.b[La],Uc)){ne=La;break}if(-1!=ne)for(La=ne;La<f.b.length&&$a.count<$a.X;++La)Xf.Qb(f.b[La],Uc)&&Cf(f,$a,me,La)}else b.$a(a,k,h),k.count!=c||0<k.L?(d=0,c=k.count):d++;b=2==d?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?tf(h,b,c,d):h};m.clear=function(){this.qa=Df(this);this.rb.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Ib(this.W.min.bind(this.W))};m.max=function(){return this.Ib(this.W.max.bind(this.W))};
function Ef(a,b,c){if(!a.W.Ld(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.wf?[b.B[c]]:b.B[c]]}m.Ib=function(a){var b;a:{b=Af(this.qa);var c=0;do if(c>=b.b.length)b=b.ta,c=0;else{var d=Ef(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Ff(this.qa);d=c.b.length-1;do if(0>d)c=c.nb,d=0;else{var e=Ef(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ja=g("wf");m.fc=g("W");
m.Yd=function(a,b){return null!=a?-1==this.W.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.W.compare(a,b):!1};m.Ga=function(){for(var a=[],b=Af(this.qa);b;)a.push(new Wb(b.oa,[b.b,b.B])),b=b.ta;return a};function Gf(a,b,c,d){a=new wf(b,a,c);d=Hf(d,a);a.qa=d;return a}function If(a,b){this.oa=a;this.D=b;this.kb=0;this.ta=this.nb=this.C=null;this.b=[];this.B=[];this.g=[]}function Df(a){return new If(Xb++,a)}function Q(a){return 0==a.kb}m=If.prototype;m.next=g("ta");
function Jf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),f=b(a.nb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.C);a.ta&&(a=Jf(a.ta),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Jf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Af(a){return Q(a)?a:Af(a.g[0])}function Ff(a){return Q(a)?a:Ff(a.g[a.g.length-1])}
function Kf(a,b){b&&(b.nb=a);a&&(a.ta=b)}function xf(a,b){for(var c=b.length,d=0,e=Df(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Df(e.D),Kf(e,h),e=h)}return f}function Lf(a){var b=a[0],c=Df(b.D);c.kb=b.kb+1;c.g=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function yf(a){var b=a,c=[];do c.push(b),b=b.ta;while(b);if(512>=c.length)b=Lf(c);else{var d=c.length,e=0,b=Df(a.D);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Lf(f);h.C=b;b.g.length&&(b.b.push(f[0].b[0]),Kf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Mf(this,a);if(Q(this)){var c=zf;this.D.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.D.Qa(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.Ma=function(a){var b=Mf(this,a);return this.D.Qa(this.b[b],a)?!0:Q(this)?!1:this.g[b].Ma(a)};m.remove=function(a,b){Nf(this,a,-1,b);if(null===this.C){var c=this;1==this.g.length&&(c=this.g[0],c.C=null);return c}return this};function Of(a){return Q(a)?a.b[0]:Of(a.g[0])}function Pf(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(Of(a.g[b]))}
function Nf(a,b,c,d){var e=Mf(a,b),f=Q(a);if(!f){var h=a.D.Qa(a.b[e],b)?e+1:e;if(Nf(a.g[h],b,h,d))Pf(a);else return!1}else if(!a.D.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.D.Qa(a.b[e],b)){if(q(d)&&!a.D.Ja()&&f&&(h=a.B[e],d=qf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Oa().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.D.Ja()?1:a.B[e].length,a.B.splice(e,1),a.D.Oa().remove(b,f))}if(256>a.b.length&&null!==a.C){a:{b=null;if(a.ta&&256<a.ta.b.length)b=a.ta,e=d=0,f=a.b.length+1;else if(a.nb&&
256<a.nb.b.length)b=a.nb,d=a.nb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.B:a.g;h=null;Q(a)?h=b.B:(h=b.g,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Pf(b),Pf(a));b=!0}b||Qf(a,c)}return!0}
function Qf(a,b){var c,d,e;a.ta&&511>a.ta.b.length?(c=a.ta,e=d=0):a.nb&&(c=a.nb,d=c.b.length,e=Q(c)?c.B.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.B:(d=a.g,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.B:c.g,d);Kf(a.nb,a.ta);Q(c)||Pf(c);-1!=b&&(a.C.b.splice(b,1),a.C.g.splice(b,1))}
m.zb=function(a,b,c){var d=Mf(this,a);if(Q(this)){if(this.D.Qa(this.b[d],a)){if(c)this.D.Oa().remove(a,this.D.Ja()?1:this.B[d].length),this.B[d]=this.D.Ja()?b:[b];else{if(this.D.Ja())throw new E(201);if(!sf(this.B[d],b))throw new E(109);}this.D.Oa().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.D.Ja()?b:[b]);this.D.Oa().add(a,1);512==this.b.length?(d=Df(this.D),a=Df(this.D),a.kb=1,a.b=[this.b[256]],a.g=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,Kf(d,this.ta),Kf(this,d),d=a):d=this;return d}d=this.D.Qa(this.b[d],a)?d+1:d;a=this.g[d].zb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].C=this,a.g[0].C=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?Rf(this):this};function Rf(a){var b=Df(a.D),c=Df(a.D);b.C=a.C;b.kb=a.kb+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.C=b;c.kb=a.kb;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.C=c});a.C=b;Kf(c,a.ta);Kf(a,c);return b}
function Mf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.D.Yd(a.b[e],b)?c=e+1:d=e}return c}function Bf(a,b){if(!Q(a)){var c=Mf(a,b);a.D.Qa(a.b[c],b)&&c++;return Bf(a.g[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.fc(),f=0,h=this.b.length-1,k=this.b,n=d(e.ub(k[f],a)),B=d(e.ub(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},da=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.ub(k[h],a));return 0==n?da(b,h,n):-1==n?da(h+1,c,f):da(b+1,h,n)},Cb=function(b,c){if(b>=c)return b;var f=d(e.ub(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.ub(k[f],a));return 0==h?Cb(f,c):1==h?Cb(b,f-1):-1};0!=n&&(f=da(f+1,h,B));-1!=f&&(h=Cb(f,h),-1!=h&&h>=f&&Sf(this,b,c,f,h+1))}};function Cf(a,b,c,d){if(a.D.Ja())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function Sf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Cf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ja()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.qe++]=this.B[c][d],a.count--}else if(this.D.Ja())b[a.qe++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.qe++]=this.B[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Hf(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new If(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ja()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Kf(d[e],d[e+1]);return 1<d.length?yf(d[0]):d[0]};function Tf(a){this.Zc=0==a?Uf:Vf;this.$d=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.fe=0==a?Yf:Zf}t(Tf,Fc);function Vf(a,b){return a>b?1:a<b?-1:0}function Uf(a,b){return Vf(b,a)}function Zf(a,b){return vd(a,b)}function Yf(a,b){return vd(b,a)}m=Tf.prototype;m.ub=function(a,b){var c=this.$d(b),d=[c.c==F,c.A==F];if(!d[0]){var e=this.Zc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Zc(a,c.A),d[1]=c.la?-1==e:1!=e);return d};
m.compare=function(a,b){return this.Zc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Qb=function(a,b){var c=this.ub(a,b);return c[0]&&c[1]};m.rf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.fe(a,c)}.bind(this))};m.Ud=function(a){return this.$d(a).c==F};m.td=function(a){a=this.$d(a);return[a.c,a.A]};m.Ld=function(a){return null!==a};m.toString=function(){return this.compare==Uf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function $f(a){Tf.call(this,a);this.Zc=0==a?ag:bg}t($f,Tf);function bg(a,b){return null===a?null===b?0:-1:null===b?1:Vf(a,b)}function ag(a,b){return bg(b,a)}$f.prototype.Qb=function(a,b){return null===a?qd(b):$f.eb.Qb.call(this,a,b)};$f.prototype.Ib=function(a,b){return null===a?null===b?0:-1:null===b?1:null};$f.prototype.min=function(a,b){var c=this.Ib(a,b);null===c&&(c=$f.eb.min.call(this,a,b));return c};$f.prototype.max=function(a,b){var c=this.Ib(a,b);null===c&&(c=$f.eb.max.call(this,a,b));return c};function cg(a){this.wa=a.map(function(a){return new Tf(a)})}t(cg,Fc);function dg(a,b,c,d){for(var e=0,f=0;f<a.wa.length&&0==e;++f)e=d(a.wa[f],b[f],c[f]);return e}m=cg.prototype;m.compare=function(a,b){return dg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return dg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return dg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.wa.length&&(c[0]||c[1]);++d){var e=this.wa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Qb=function(a,b){for(var c=!0,d=0;d<this.wa.length&&c;++d)c=this.wa[d].Qb(a[d],b[d]);return c};
m.rf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.wa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.wa[b].fe(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.wa.length&&0==c;++h)c=this.wa[h].fe(a[h],b[h]);return c}.bind(this))};m.Ud=function(a){return this.wa[0].Ud(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.wa[b].td(a)[0]},this);a=a.map(function(a,b){return this.wa[b].td(a)[1]},this);return[b,a]};m.Ld=function(a){return a.every(function(a,c){return this.wa[c].Ld(a)},this)};function eg(a){cg.call(this,a);this.wa=a.map(function(a){return new $f(a)})}t(eg,cg);function fg(a){if(1==a.f.length)return new Tf(a.f[0].mb);var b=a.f.map(function(a){return a.mb});return a.f.some(function(a){return a.ba.kc()})?new eg(b):new cg(b)};function gg(a){this.ga=a;this.lb=C();this.Oc=new uf;this.rb=new uf}m=gg.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.lb.add(b),this.Oc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.lb.clear(),this.Oc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.lb.delete(b),this.Oc.remove(a,1)):(this.lb.clear(),this.Oc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?D(this.lb):this.ga.get(a)};m.$c=function(a){return this.ga.$c(a)};
m.Oa=function(){vf(this.rb,[this.ga.Oa(),this.Oc]);return this.rb};m.$a=function(a,b,c,d){b=this.ga.$a(a,b,c,d);return null!=a?b:b.concat(D(this.lb))};m.clear=function(){this.lb.clear();this.ga.clear()};m.Ma=function(a){return null===a?0!=this.lb.size:this.ga.Ma(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Ga=function(){return[new Wb(-2,D(this.lb))].concat(this.ga.Ga())};m.fc=function(){return this.ga.fc()};
function hg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new gg(c);d.forEach(function(a){f.lb.add(a)});return f}m.Ja=function(){return this.ga.Ja()};function ig(a){this.w=a;this.qb=C();this.W=new Tf(1)}m=ig.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new E(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Ib(this.W.min.bind(this.W))};m.max=function(){return this.Ib(this.W.max.bind(this.W))};
m.Ib=function(a){if(0==this.qb.size)return null;var b=D(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.$c=function(){return this.qb.size};m.$a=function(a,b,c,d){var e=a||[td()];a=D(this.qb).filter(function(a){return e.some(function(b){return this.W.Qb(a,b)},this)},this);return tf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.Ma=function(a){return this.qb.has(a)};m.Ga=function(){return[new Wb(0,D(this.qb))]};m.fc=g("W");
function jg(a,b){var c=new ig(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ja=l(!0);m.Oa=function(){var a=new uf;a.na=this.qb.size;return a};function kg(a){this.La=a.l(jc);this.F=a.l(lc);this.V=a.l(kc)}kg.prototype.Ha=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Bb()?lg(this,a):mg(this,a)).then(c)}.bind(this);return c()};function mg(a,b){var c=a.La.Db(0,[b]),d=c.I(b.getName(),b.Fb.bind(b),0).get([]).then(function(a){this.V.Xb(b.getName(),a);ng(this,b,a)}.bind(a));c.ia();return d}
function ng(a,b,c){var d=a.F.oc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Hb(b.getName());b.add(c,a.id())})})}function lg(a,b){var c=a.La.Db(0,[b]),d=c.I(b.getName(),b.Fb,0).get([]).then(function(a){this.V.Xb(b.getName(),a)}.bind(a)),e=b.Ba().map(function(a){return og(this,a,c)},a).concat(pg(a,b,c));c.ia();return fb(e.concat(d))}
function og(a,b,c){c=c.I(b.m(),Yb,1);var d=fg(b);return c.get([]).then(function(a){if(0<a.length){if(qg(b)){var c=Gf.bind(void 0,d,b.m(),b.Gc);a=hg(c,a)}else a=Gf(d,b.m(),b.Gc,a);this.F.set(b.Pc,a)}}.bind(a))}function pg(a,b,c){return c.I(Xe(b),Yb,1).get([]).then(function(a){0<a.length&&(a=jg(Xe(b),a),this.F.set(b.getName(),a))}.bind(a))};function rg(){this.Y=z();this.oc=z()}rg.prototype.Ha=function(a){a.ra().forEach(function(a){var c=[];this.oc.set(a.getName(),c);var d=Xe(a);if(null===this.get(d)){var e=new ig(d);c.push(e);this.Y.set(d,e)}a.Ba().forEach(function(a){var b;b=fg(a);b=new wf(a.m(),b,a.Gc);b=qg(a)&&1==a.f.length?new gg(b):b;c.push(b);this.Y.set(a.m(),b)},this)},this);return w()};rg.prototype.get=function(a){return this.Y.get(a)||null};
rg.prototype.set=function(a,b){var c=this.oc.get(a)||null;null===c&&(c=[],this.oc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function sg(a){this.nc=[];q(a)&&this.add(a)}sg.prototype.toString=function(){return this.nc.map(function(a){return a.toString()}).join(",")};sg.prototype.Ma=function(a){return this.nc.some(function(b){return b.contains(a)})};sg.prototype.sa=g("nc");
sg.prototype.add=function(a){if(0!=a.length)if(a=this.nc.concat(a),1==a.length)this.nc=a;else{a.sort(vd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(rd(c,a[d])){var e=a[d],f=td();if(c.c!=F&&e.c!=F){var h=sd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.A!=F&&e.A!=F&&(h=sd(c.A,e.A,!1),-1!=h?(f.A=c.A,f.la=0!=h?c.la:c.la&&e.la):(f.A=e.A,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.nc=b}};
function tg(a,b){var c=[];a.sa().map(function(a){return b.sa().map(function(b){var c;if(rd(a,b)){c=td();var h=sd(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.A==F||b.A==F?b=a.A==F?b:a:(h=sd(a.A,b.A,!1),b=0==h?a.la?a:b:-1==h?a:b);c.A=b.A;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new sg(c.filter(function(a){return null!==a}))};function ug(a,b){var c=[],d=null,e=null;Xd(a,function(a){var h=b(a);null==a.getParent()?e=h:Ud(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function vg(a){return wg(a,function(a){return null===a.g})}
function xg(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Td(b,d,c+f)});return{parent:b,children:d}}function yg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Ud(b,c)});Ud(a,b)}function zg(a){var b=Sd(a,0);xg(a);yg(b,a);return b}
function Ag(a,b,c){var d=Sd(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;xg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Vd(d,h);Ud(k,e);Td(d,k,h)}});return d}function Bg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Vd(e,a),Td(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Ud(d,a)});return c}function wg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function Cg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Xd(a,function(a){for(var b=0;b<Rd(a);b++)d+="-";d+=c(a)});return d};function Dg(a){Yd.call(this);this.Tb=a;this.ab=!1}t(Dg,Yd);m=Dg.prototype;m.Mb=function(){return ug(this,function(a){if(a instanceof Dg){var b=new Dg(a.Tb);b.ab=a.ab;a=a.Z();b.oa=a;return b}return a.Mb()})};m.ib=function(a){var b=a||[];Xd(this,function(a){a!=this&&a.ib(b)}.bind(this));a=C(b);return D(a)};m.vd=function(a){this.ab!=a&&(this.ab=a,this.Tb="and"==this.Tb?"or":"and",L(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return Eg(this,b)};function Eg(a,b){return"and"==a.Tb?Bd(b):Cd(b)}m.toString=function(){return"combined_pred_"+this.Tb.toString()};function Fg(a,b,c){Yd.call(this);this.ha=a;this.ka=b;this.G=c;this.ae=null;a=Jd.Cc();this.xc=Pd(a,this.ha.H(),this.G);this.eg=a.Ve.get(this.ha.H())||null}t(Fg,Yd);m=Fg.prototype;m.Mb=function(){var a=new Fg(this.ha,this.ka,this.G),b=this.Z();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Fg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ha);a=I(a,this.ka);return this.xc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.G+" "+this.ka.m()+")"};
function Gg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ha.I()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.xc=Pd(Jd.Cc(),a.ha.H(),a.G)}return[e,d]}return[d,e]}function Hg(a){var b={};a.ib().forEach(function(a){b[a.getName()]=null});return b}
function Ig(a,b,c){null===a.ae&&(a.ae=Hg(a.ka.I()));var d=new Ed(new Wb(-1,a.ae),!1);return Hd(b,c,d,[J(a.ka.I())])}
function Jg(a,b,c,d){var e=[b,c];d||(e=Gg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Rc,B=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=H(e),da=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Hd(a,da,b,O);B.push(b)}):d&&B.push(Ig(this,a,da))}.bind(a));a=H(b).concat(H(c));return new G(B,a)}
function Kg(a,b,c,d,e){function f(a,b){var c=new Ed(b,1<O.length),c=Hd(a,da,c,O);B.push(c)}var h=d.Xf.I(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var B=[],O=H(n),da=H(k);k.entries.forEach(function(a){var b=this.eg(I(a,d.mg)),b=d.index.get(b);0!=b.length&&(d.index.Ja()?f(a,e.get(b[0])):pf(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(B,a)};function Lg(a,b,c){return null===b?new $d(a,b,c):q(b.m)?new Fg(a,b,c):new $d(a,b,c)};var Mg={};r("lf.schema.DataStoreType",Mg);Mg.INDEXED_DB=0;Mg.MEMORY=1;Mg.LOCAL_STORAGE=2;Mg.FIREBASE=3;Mg.WEB_SQL=4;Mg.OBSERVABLE_STORE=5;function Ng(a,b,c,d){this.Pc=a;this.name=b;this.Gc=c;this.f=d}Ng.prototype.m=function(){return this.Pc+"."+this.name};function qg(a){return a.f.some(function(a){return a.ba.kc()})}function R(a,b,c,d){this.w=a;this.pa=c;this.K=b;this.qd=d;this.fb=null}r("lf.schema.Table",R);R.prototype.getName=g("w");R.prototype.getName=R.prototype.getName;R.prototype.Za=g("fb");
function J(a){return a.fb||a.w}R.prototype.tc=function(a){var b=new this.constructor(this.w);b.fb=a;b.yg=this.yg;return b};R.prototype.as=R.prototype.tc;R.prototype.createRow=R.prototype.vb;R.prototype.deserializeRow=R.prototype.Fb;R.prototype.Ba=g("pa");R.prototype.getIndices=R.prototype.Ba;R.prototype.ib=g("K");R.prototype.getColumns=R.prototype.ib;R.prototype.getConstraint=R.prototype.Gb;R.prototype.Bb=g("qd");R.prototype.persistentIndex=R.prototype.Bb;function Xe(a){return a.w+".#"};function S(a,b){this.child=a;this.Lb=b;this.fb=null}m=S.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.m=function(){return this.Lb+"("+this.child.m()+")"};m.I=function(){return this.child.I()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Za=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);m.tc=function(a){this.fb=a;return this};S.prototype.as=S.prototype.tc;
function Og(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Pg(a){this.fb=a||null;this.U=new R("#UnknownTable",[],[],!1)}m=Pg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.I=g("U");m.H=l(4);m.Za=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Qg(a){return new S(a||new Pg,"COUNT")}r("lf.fn.count",Qg);function Rg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Rg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.Pf=b}t(T,K);T.prototype.exec=function(a,b){switch(this.Pf){case 1:return Sg(this,a,b);case 0:return Tg(this,a,b);default:return Ug(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Qc=function(){return this.toString()};function Ug(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Sg(a,b,c){return Sd(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Tg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Vg(a){T.call(this,0,1);this.Ae=a}t(Vg,T);Vg.prototype.toString=function(){return"aggregation("+this.Ae.map(function(a){return a.m()}).toString()+")"};Vg.prototype.fa=function(a){a.forEach(function(a){Wg(new Xg(a,this.Ae))},this);return a};function Xg(a,b){this.Ka=a;this.K=b}
function Wg(a){a.K.forEach(function(a){a=Og(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Og(d).slice(-1)[0],f=d.child instanceof S?yd(this.Ka,d.child):this.Ka;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Yg(d.Lb,f,e);e=this.Ka;null===e.Ya&&(e.Ya=z());e.Ya.set(d.m(),f)}},a)}
function Yg(a,b,c){var d=null;switch(a){case "MIN":d=Zg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Zg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=$g(b,c);break;case "COUNT":d=ah(b,c);break;case "SUM":d=bh(b,c);break;case "AVG":a=ah(b,c);0<a&&(d=bh(b,c)/a);break;case "GEOMEAN":d=ch(b,c);break;default:d=dh(b,c)}return d}function Zg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function ah(a,b){return b instanceof Pg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function bh(a,b){return Zg(a,b,function(a,b){return b+a})}function dh(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:ub.apply(null,c)}function ch(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function $g(a,b){var c=z();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(A(c),H(a))};function eh(a,b){this.Ea=a;this.aa=b}eh.prototype.jb=g("Ea");eh.prototype.ca=g("aa");function fh(){K.call(this)}t(fh,K);function gh(a,b){K.call(this);this.table=a;this.values=b}t(gh,fh);function hh(a,b){gh.call(this,a,b)}t(hh,gh);function ih(a){K.call(this);this.table=a}t(ih,fh);ih.prototype.toString=function(){return"delete("+this.table.getName()+")"};function jh(a,b){K.call(this);this.table=a;this.ve=b}t(jh,fh);
jh.prototype.toString=function(){var a=[];this.ve&&(a=this.ve.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function kh(a){K.call(this);this.J=a}t(kh,fh);kh.prototype.toString=function(){return"select("+this.J.toString()+")"};function lh(a){K.call(this);this.table=a}t(lh,fh);lh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function mh(){K.call(this)}t(mh,fh);mh.prototype.toString=l("cross_product");function nh(a,b){K.call(this);this.f=a;this.Ob=b}t(nh,fh);nh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function oh(a){K.call(this);this.O=a}t(oh,fh);oh.prototype.toString=function(){return"order_by("+je(this.O)+")"};function ph(a){K.call(this);this.f=a}t(ph,fh);
ph.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function qh(a){K.call(this);this.f=a}t(qh,fh);qh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function rh(a){K.call(this);this.X=a}t(rh,fh);rh.prototype.toString=function(){return"limit("+this.X+")"};function sh(a){K.call(this);this.L=a}t(sh,fh);sh.prototype.toString=function(){return"skip("+this.L+")"};function th(a,b){K.call(this);this.J=a;this.Rb=b}t(th,fh);
th.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.J.toString()+")"};function uh(){};function vh(){}t(vh,uh);vh.prototype.pb=function(a){this.$=a;this.Wa(this.$);return this.$};vh.prototype.Wa=function(a){if(a instanceof kh){var b=wh(this,a.J),b=xh(this,b);Bg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}L(a).forEach(function(a){this.Wa(a)},this)};function wh(a,b){if(0==L(b).length||"and"!=b.Tb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return wh(this,a)},a);return Ea(c)}
function xh(a,b){var c=null,d=null;b.map(function(a,b){var h=new kh(a);0==b?c=h:Ud(d,h);d=h},a);return[c,d]};function yh(){}t(yh,uh);yh.prototype.pb=function(a,b){if(3>b.c.length)return a;this.$=a;this.Wa(this.$);return this.$};yh.prototype.Wa=function(a){if(a instanceof mh)for(;2<L(a).length;){for(var b=new mh,c=0;2>c;c++){var d=Vd(a,0);Ud(b,d)}Td(a,b,0)}L(a).forEach(function(a){this.Wa(a)},this)};function zh(){T.call(this,0,0)}t(zh,T);zh.prototype.toString=l("cross_product");zh.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=H(b),e=H(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Hd(b.entries[f],d,c.entries[h],e);a.push(k)}b=H(b).concat(H(c));return[new G(a,b)]};function Ah(a,b){oe.call(this,a,b);this.Fa=a.l(nc);this.Jb=a.l(oc)}t(Ah,oe);Ah.prototype.getPriority=l(2);Ah.prototype.de=function(a){0==this.H()?Bh(this,a):this.Nc()};function Bh(a,b){a.sd.forEach(function(a,d){a instanceof ie&&re(this.Jb,a,b[d])},a)}Ah.prototype.Nc=function(){var a=te(this.Jb,this.ca());0!=a.length&&(a=new qe(this.global,a),ue(this.Fa,a))};function Ch(a){de.call(this,a)}t(Ch,de);Ch.prototype.ca=function(){var a=C();a.add(this.c);Dh(this,this.c.getName(),a);return a};function Dh(a,b,c){var d=Eh(a.ba.info(),b,1);Eh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Dh(this,a.getName(),c)},a)}Ch.prototype.clone=function(){var a=new Ch(this.ba);ge(a,this);a.c=this.c;return a};Ch.prototype.bind=function(a){Ch.eb.bind.call(this,a);he(this,a);return this};function Fh(a){de.call(this,a)}t(Fh,de);Fh.prototype.ca=function(){var a=C();a.add(this.Ia);var b=this.ba.info();Gh(this.Ia.getName(),b.cf).forEach(a.add.bind(a));this.bc&&Eh(b,this.Ia.getName()).forEach(a.add.bind(a));return a};Fh.prototype.clone=function(){var a=new Fh(this.ba);ge(a,this);a.Ia=this.Ia;this.values&&(a.values=this.values instanceof Id?this.values:this.values.slice());a.bc=this.bc;a.cc=this.cc;return a};
Fh.prototype.bind=function(a){Fh.eb.bind.call(this,a);this.cc&&(this.values=this.cc instanceof Id?a[this.cc.Aa()]:this.cc.map(function(b){return b instanceof Id?a[b.Aa()]:b}));return this};function Hh(a){de.call(this,a)}t(Hh,de);Hh.prototype.ca=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ba.info();Ih(c,b).forEach(a.add.bind(a));Jh(c,b).forEach(a.add.bind(a));return a};Hh.prototype.clone=function(){var a=new Hh(this.ba);ge(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Hh.prototype.bind=function(a){Hh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Vc&&(b.value=a[b.Vc])});he(this,a);return this};function Kh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+$b(b)+"'";default:return"'"+b.toString()+"'"}}function Lh(a,b){var c=a.bc?"INSERT OR REPLACE":"INSERT",d=a.Ia.ib(),c=c+(" INTO "+a.Ia.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Kh(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function Mh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Nh(a,b,c,d){return a instanceof Id?"?"+a.Aa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Kh(c,a)}).join(", ")+")":"between"==b?Kh(c,a[0])+" AND "+Kh(c,a[1]):Kh(c,a).toString()}
function Oh(a,b){return L(a).map(function(a){return"("+Ph(a,b)+")"}).join("and"==a.Tb?" AND ":" OR ")}function Qh(a){return[a.ha.m(),Mh(a.G),a.ka.m()].join(" ")}function Ph(a,b){if(a instanceof $d){var c=a.N.m(),d=Mh(a.G),e=Nh(a.value,a.G,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Dg)return Oh(a,b);if(a instanceof Fg)return Qh(a);throw new E(357,typeof a);}
function Rh(a,b){var c=Ph(a,b);return c?" WHERE "+c:""}function Sh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Vc?b+"?"+a.Vc.toString():b+Kh(a.N.H(),a.value).toString()}).join(", ");a.u&&(c+=Rh(a.u,b));return c+";"}
function Th(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Ab&&0!=a.Ab.size?c+=Uh(a,b):(c+=a.c.map(Vh).join(", "),a.u&&(c+=Rh(a.u,b)));if(a.O)var d=a.O.map(function(a){return a.N.m()+(0==a.mb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Vh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Uh(a,b){for(var c=wg(a.u,function(a){return a instanceof Fg}),d=c.map(Qh),e=Vh(a.c[0]),f=1;f<a.c.length;f++)var h=Vh(a.c[f]),e=a.Ab.has(c[d.length-f].Z())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Sd(a.u,0);c instanceof Fg||(e+=" WHERE "+Ph(c,b));return e}
function Wh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Fh)return Lh(d,c);if(d instanceof Ch){var e="DELETE FROM "+d.c.getName();d.u&&(e+=Rh(d.u,c));return e+";"}if(d instanceof Hh)return Sh(d,c);if(d instanceof ie)return Th(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.xg=a.l(mc);this.Fa=a.l(nc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.gb()}catch(a){return cb(a)}return new v(function(a,b){var c=new Ah(this.global,[this.Ec()]);ue(this.Fa,c).then(function(b){a(wd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Rf=function(){var a=function(a){return a.Qc(this.a)+"\n"}.bind(this);return Cg(Xh(this).jb(),a)};U.prototype.explain=U.prototype.Rf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Eg=function(a){return Wh(this,a)};U.prototype.toSql=U.prototype.Eg;U.prototype.gb=aa();function Xh(a){if(null==a.df){var b;b=a.xg;var c=a.a,d=b.hg.create(c);b=b.ug.create(d,c);a.df=b}return a.df}U.prototype.Ec=function(){return{context:this.a.clone(),ge:Xh(this)}};function Yh(a){U.call(this,a,new Ch(a.l(pc)))}t(Yh,U);r("lf.query.DeleteBuilder",Yh);Yh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Yh.prototype.from=Yh.prototype.c;Yh.prototype.u=function(a){this.Cd();this.a.u=a;return this};Yh.prototype.where=Yh.prototype.u;Yh.prototype.Cd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.u)throw new E(516);};Yh.prototype.gb=function(){Yh.eb.gb.call(this);if(null==this.a.c)throw new E(517);};function Zh(a,b){U.call(this,a,new Fh(a.l(pc)));this.a.bc=b||!1}t(Zh,U);r("lf.query.InsertBuilder",Zh);Zh.prototype.gb=function(){Zh.eb.gb.call(this);var a=this.a;if(null==a.Ia||null==a.values)throw new E(518);if(a.bc&&null===a.Ia.Gb().dd())throw new E(519);};Zh.prototype.Ia=function(a){if(null!=this.a.Ia)throw new E(520);this.a.Ia=a;return this};Zh.prototype.into=Zh.prototype.Ia;
Zh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Id||a.some(function(a){return a instanceof Id})?this.a.cc=a:this.a.values=a;return this};Zh.prototype.values=Zh.prototype.values;function $h(a){return ai("and",Array.prototype.slice.call(arguments))}r("lf.op.and",$h);r("lf.op.or",function(a){return ai("or",Array.prototype.slice.call(arguments))});function ai(a,b){var c=new Dg(a);b.forEach(function(a){Ud(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function V(a,b){U.call(this,a,new ie(a.l(pc)));this.Ke=this.xd=!1;this.a.f=b;bi(this);ci(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.gb=function(){V.eb.gb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Sb)&&!q(a.X)||q(a.$b)&&!q(a.L))throw new E(523);null!=this.a.ja?di(this):ei(this)};function bi(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function di(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new E(525);}function ei(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function ci(a){a.a.f.forEach(function(a){if(a instanceof S&&!fi(a.Lb,a.H()))throw new E(527,a.m());},a)}function gi(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.Ke)throw new E(515);this.Ke=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.u=function(a){gi(this,548);if(this.xd)throw new E(516);this.xd=!0;hi(this,a);return this};V.prototype.where=V.prototype.u;
function hi(a,b){if(null!=a.a.u){var c=$h(b,a.a.u);a.a.u=c}else a.a.u=b}V.prototype.ag=function(a,b){gi(this,542);if(this.xd)throw new E(547);this.a.c.push(a);hi(this,b);return this};V.prototype.innerJoin=V.prototype.ag;V.prototype.fg=function(a,b){gi(this,542);if(!(b instanceof Fg))throw new E(541);if(this.xd)throw new E(547);this.a.c.push(a);null==this.a.Ab&&(this.a.Ab=C());var c=b;J(a)!=J(b.ka.I())&&(c=b.reverse());this.a.Ab.add(c.Z());hi(this,c);return this};V.prototype.leftOuterJoin=V.prototype.fg;
V.prototype.X=function(a){if(null!=(this.a.X||this.a.Sb))throw new E(528);if(a instanceof Id)this.a.Sb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.L=function(a){if(null!=(this.a.L||this.a.$b))throw new E(529);if(a instanceof Id)this.a.$b=a;else{if(0>a)throw new E(531);this.a.L=a}return this};V.prototype.skip=V.prototype.L;V.prototype.O=function(a,b){gi(this,549);null==this.a.O&&(this.a.O=[]);this.a.O.push({N:a,mb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.O;V.prototype.ja=function(a){gi(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function fi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Yc=null;return a};V.prototype.clone=V.prototype.clone;function ii(a,b){U.call(this,a,new Hh(a.l(pc)));this.a.table=b}t(ii,U);r("lf.query.UpdateBuilder",ii);ii.prototype.set=function(a,b){var c={Vc:b instanceof Id?b.Aa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};ii.prototype.set=ii.prototype.set;ii.prototype.u=function(a){this.Cd();this.a.u=a;return this};ii.prototype.where=ii.prototype.u;ii.prototype.Cd=function(){if(null!=this.a.u)throw new E(516);};
ii.prototype.gb=function(){ii.eb.gb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Id}))throw new E(501);};function ji(a){this.a=a;this.Ea=null}ji.prototype.jc=function(){null===this.Ea&&(this.Ea=this.bd());return this.Ea};function ki(a){ji.call(this,a)}t(ki,ji);ki.prototype.bd=function(){return this.a.bc?new hh(this.a.Ia,this.a.values):new gh(this.a.Ia,this.a.values)};function li(a){ji.call(this,a)}t(li,ji);li.prototype.bd=function(){var a=new jh(this.a.table,this.a.set),b=null!=this.a.u?new kh(this.a.u.Mb()):null,c=new lh(this.a.table);null===b?Ud(a,c):(Ud(b,c),Ud(a,b));return a};function mi(a,b,c){this.Ea=a;this.he=b;this.Wb=c}mi.prototype.jc=function(){this.Wb.forEach(function(a){this.Ea=a.pb(this.Ea,this.he)},this);return this.Ea};function ni(a,b){ji.call(this,a);this.Wb=b}t(ni,ji);ni.prototype.bd=function(){var a=new ih(this.a.c),b=null!=this.a.u?new kh(this.a.u.Mb()):null,c=new lh(this.a.c);null===b?Ud(a,c):(Ud(b,c),Ud(a,b));return(new mi(a,this.a,this.Wb)).jc()};function oi(){}t(oi,uh);oi.prototype.pb=function(a,b){if(2>b.c.length)return a;this.$=a;this.Wa(this.$,b);return this.$};oi.prototype.Wa=function(a,b){if(a instanceof kh&&a.J instanceof Fg){var c=a.J.Z(),d=Sd(a,0);d instanceof mh&&(c=null!=b.Ab&&b.Ab.has(c),c=new th(a.J,c),Bg(a,d,c,c),a==this.$&&(this.$=c),a=c)}L(a).forEach(function(a){this.Wa(a,b)},this)};function pi(){this.Uc=C()}t(pi,uh);pi.prototype.pb=function(a,b){this.Uc.clear();if(!q(b.u))return a;this.$=a;this.Wa(this.$);this.Uc.clear();return this.$};pi.prototype.Wa=function(a){if(qi(a)){var b=a.J instanceof $d?ri(this,a):si(this,a);this.Uc.add(a);b==a&&(b=Sd(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),qi(b)&&!this.Uc.has(b)&&this.Wa(b))}else L(a).forEach(function(a){this.Wa(a)},this)};
function ti(a,b,c){var d=b;if(Sd(b,0)instanceof kh)d=zg(b),ti(a,b,c);else if(ui(b)){var e=[],d=Ag(b,c,function(a){a=new kh(a.J);e.push(a);return a});e.forEach(function(a){ti(this,a,c)},a)}return d}function ri(a,b){var c=C([J(b.J.N.I())]),d=function(a){return vi(this,a,c)}.bind(a);return ti(a,b,d)}function si(a,b){var c=C([J(b.J.ha.I()),J(b.J.ka.I())]),d=function(a){return vi(this,a,c)}.bind(a);return ti(a,b,d)}
function vi(a,b,c){var d=C();vg(b).forEach(function(a){d.add(J(a.table))},a);b instanceof lh&&d.add(J(b.table));return vc(d,c)}function qi(a){return a instanceof kh&&!(a.J instanceof Dg)}function ui(a){a=Sd(a,0);return a instanceof mh||a instanceof th};function wi(a,b){ji.call(this,a);this.Wb=b;this.hf=this.Ze=this.qf=this.bf=this.Be=this.Ne=this.pf=this.He=this.sf=null}t(wi,ji);
wi.prototype.bd=function(){xi(this);2<=this.a.c.length&&(this.He=new mh);this.pf=null!=this.a.u?new kh(this.a.u.Mb()):null;this.a.O&&(this.bf=new oh(this.a.O));null!=this.a.L&&0<this.a.L&&(this.qf=new sh(this.a.L));null!=this.a.X&&(this.Ze=new rh(this.a.X));null!=this.a.ja&&(this.Ne=new qh(this.a.ja));yi(this);this.hf=new nh(this.a.f||[],this.a.ja||null);var a=zi(this);return(new mi(a,this.a,this.Wb)).jc()};
function zi(a){for(var b=[a.Ze,a.qf,a.hf,a.bf,a.Be,a.Ne,a.pf,a.He],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Ud(b[c],f),c=e)}a.sf.forEach(function(a){Ud(b[c],a)});return d}function xi(a){a.sf=a.a.c.map(function(a){return new lh(a)},a)}function yi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.O&&a.a.O.forEach(function(a){a.N instanceof S&&b.push(a.N)});0<b.length&&(a.Be=new ph(b))};function Ai(){this.oe=[new vh,new yh,new pi,new oi];this.Md=[new vh]}Ai.prototype.create=function(a){var b=null;if(a instanceof Fh)b=new ki(a);else if(a instanceof Ch)b=new ni(a,this.Md);else if(a instanceof ie)b=new wi(a,this.oe);else if(a instanceof Hh)b=new li(a);else throw new E(513);b=b.jc();return new eh(b,a.ca())};function Bi(a){T.call(this,0,1);this.U=a}t(Bi,T);Bi.prototype.toString=function(){return"delete("+this.U.getName()+")"};Bi.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.U,c);return[Ad()]};function Ci(a,b){T.call(this,0,-1);this.table=b;this.F=a.l(lc)}t(Ci,T);Ci.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Ci.prototype.fa=function(){var a=this.F.get(Xe(this.table)),b=new G([],[this.table.getName()]),c=Qg(),a=a.Oa().na;null===b.Ya&&(b.Ya=z());b.Ya.set(c.m(),a);return[b]};function Di(a,b){T.call(this,0,-1);this.V=a.l(kc);this.F=a.l(lc);this.table=b}t(Di,T);Di.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};Di.prototype.fa=function(){var a=this.F.get(Xe(this.table)).$a();return[Dd(pf(this.V,a),[J(this.table)])]};function Ei(a){this.h=a}t(Ei,uh);Ei.prototype.pb=function(a,b){this.$=a;if(!this.Ed(b))return a;var c=wg(a,function(a){return a instanceof Di})[0],d=new Ci(this.h,c.table);Bg(c,c,d,d);return this.$};Ei.prototype.Ed=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.X&&null==a.L&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Lb&&a.child instanceof Pg):!1};function Fi(a){T.call(this,0,1);this.Me=a}t(Fi,T);Fi.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.m()}).toString()+")"};Fi.prototype.fa=function(a){return Gi(this,a[0])};function Gi(a,b){var c=new Rc,d=function(a){return this.Me.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function Hi(a,b,c){T.call(this,0,0);this.F=a.l(lc);this.V=a.l(kc);this.J=b;this.Rb=c;this.Ad="eq"==this.J.G?0:2;this.Pe=null}t(Hi,T);var Ii=["hash","index_nested_loop","nested_loop"];Hi.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Ii[this.Ad]+", "+this.J.toString()+")"};
Hi.prototype.fa=function(a){switch(this.Ad){case 0:return[Jg(this.J,a[0],a[1],this.Rb)];case 1:return[Kg(this.J,a[0],a[1],this.Pe,this.V)];default:var b=this.J,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Gg(b,c,a));c=e[0];a=e[1];for(var e=[],f=H(c),h=H(a),k=c.entries.length,n=a.entries.length,B=n+256-1>>8,O=0;O<B;){for(var da=0;da<k;da++){var Cb=!1,Wf=I(c.entries[da],b.ha);if(null!==Wf)for(var Uc=Math.min(O+1<<8,n),$a=O<<8;$a<Uc;$a++)if(b.xc(Wf,I(a.entries[$a],b.ka))){var Cb=!0,me=Hd(c.entries[da],
f,a.entries[$a],h);e.push(me)}d&&!Cb&&e.push(Ig(b,c.entries[da],f))}O++}b=H(c).concat(H(a));return[new G(e,b)]}};function Ji(a,b){a.Ad=1;var c=a.F.get(b.Aa().m());a.Pe={Xf:b,mg:b==a.J.ha?a.J.ka:a.J.ha,index:c}};function Ki(a){T.call(this,0,-1);this.jf=a}t(Ki,T);Ki.prototype.toString=function(){return"no_op_step("+H(this.jf[0]).join(",")+")"};Ki.prototype.fa=g("jf");function Li(){}t(Li,uh);Li.prototype.pb=function(a,b){this.$=a;if(!this.Ed(b))return a;wg(a,function(a){return a instanceof Hi}).forEach(this.wg,this);return this.$};Li.prototype.Ed=function(a){return 1<a.c.length};
Li.prototype.wg=function(a){if("eq"==a.J.G&&!a.Rb){var b=function(b){if(!(b instanceof Di))return null;b=J(b.table)==J(a.J.ka.I())?a.J.ka:a.J.ha;return fa(b.Aa())?null:b},c=b(Sd(a,0)),b=b(Sd(a,1));if(null!==c||null!==b){b=null===b?c:b;Ji(a,b);var d=new G([],[J(b.I())]);Wd(a,new Ki([d]),b==c?0:1)}}};function Mi(a){a=a.map(function(a){return a.sa()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Ni(a){this.Pb=a}Ni.prototype.cd=function(){return 1==this.Pb.f.length?[td()]:[this.Pb.f.map(function(){return td()})]};function Oi(a,b){this.Pb=a;this.Da=b;this.Id=this.Xe=null}
function Pi(a,b){var c=z();a.Da.keys().forEach(function(a){var e=this.Da.get(a).map(function(a){return ee(b,a)},this),f=new sg([td()]);e.forEach(function(a){var b=null;"between"==a.G?b=new od(ce(a,a.value[0]),ce(a,a.value[1]),!1,!1):(b=ce(a,a.value),b="eq"==a.G?new od(b,b,!1,!1):"gte"==a.G?new od(b,F,!1,!1):"gt"==a.G?new od(b,F,!0,!1):"lte"==a.G?new od(F,b,!1,!1):new od(F,b,!1,!0));a=a.ab?pd(b):[b];a=new sg(a);f=tg(f,a)});c.set(a,f)},a);return c}
Oi.prototype.cd=function(a){if(this.Xe==a)return this.Id;for(var b=Pi(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new sg([td()]))}this.Id=1==this.Pb.f.length?A(b)[0].sa():Mi(Qi(this,b));this.Xe=a;return this.Id};function Qi(a,b){var c=z(),d=0;a.Pb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Vb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ri(a,b){this.tf=b;this.F=a.l(lc)}function Si(a,b,c){c=c.filter(a.bg,a);if(0==c.length)return null;a=Ti(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ui(c,b);return h<d?(d=h,c):a},null)}
function Ti(a,b){return a.tf.Ba().map(function(a){a=new Vi(this.F,a);Wi(a,b);return a},a).filter(function(a){if(null===a.Da)a=!1;else{for(var b=!1,e=!0,f=0;f<a.yb.f.length;f++){var h=a.Da.has(a.yb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Ri.prototype.bg=function(a){var b;if(b=a instanceof $d)ae(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.N.I()==this.tf:!1};
function Vi(a,b){this.F=a;this.yb=b;this.Yf=C(this.yb.f.map(function(a){return a.ba.getName()}));this.Xd=this.Da=null}function Xi(a){null===a.Xd&&(a.Xd=new Oi(a.yb,a.Da));return a.Xd}function Wi(a,b){b.forEach(function(a){var b=a.ib()[0].getName();this.Yf.has(b)&&(null===this.Da&&(this.Da=new Rc),this.Da.set(b,a.Z()))},a)}function Ui(a,b){var c=Xi(a).cd(b),d=a.F.get(a.yb.m());return c.reduce(function(a,b){return a+d.$c(b)},0)};function Yi(a,b,c,d){T.call(this,0,-1);this.F=a.l(lc);this.index=b;this.We=c;this.le=d;this.Tc=this.Sc=!1}t(Yi,T);Yi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.le?"reverse":"natural")+(this.Sc?", limit:?":"")+(this.Tc?", skip:?":"")+")"};Yi.prototype.Qc=function(a){var b=this.toString(),c=this.We.cd(a),b=b.replace("?",c.toString());this.Sc&&(b=b.replace("?",a.X.toString()));this.Tc&&(b=b.replace("?",a.L.toString()));return b};
Yi.prototype.fa=function(a,b,c){a=this.We.cd(c);b=this.F.get(this.index.m());c=(1==a.length&&a[0]instanceof od&&ud(a[0])?tf(b.get(a[0].c),!1,this.Sc?c.X:void 0,this.Tc?c.L:void 0):b.$a(a,this.le,this.Sc?c.X:void 0,this.Tc?c.L:void 0)).map(function(a){return new Wb(a,{})},this);return[Dd(c,[this.index.Pc])]};function Zi(a){T.call(this,0,1);this.rd=a}t(Zi,T);Zi.prototype.toString=l("select(?)");Zi.prototype.Qc=function(a){a=ee(a,this.rd);return this.toString().replace("?",a.toString())};Zi.prototype.fa=function(a,b,c){return[ee(c,this.rd).eval(a[0])]};function $i(a,b){T.call(this,0,1);this.V=a.l(kc);this.U=b}t($i,T);$i.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};$i.prototype.fa=function(a){return[Dd(pf(this.V,xd(a[0])),[J(this.U)])]};function aj(a){this.h=a}t(aj,uh);aj.prototype.pb=function(a,b){this.$=a;wg(a,function(a){return a instanceof Di}).forEach(function(a){var d=bj(a);if(0!=d.length){var e=Si(new Ri(this.h,a.table),b,d.map(function(a){return ee(b,a.rd)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.rd,a)},this);this.$=cj(this,e,f,a)}}},this);return this.$};function bj(a){var b=[];for(a=a.getParent();a;)a instanceof Zi&&b.push(a),a=a.getParent();return b}
function cj(a,b,c,d){(null===b.Da?[]:b.Da.values()).map(function(a){return c.get(a)}).forEach(xg);b=new Yi(a.h,b.yb,Xi(b),!1);a=new $i(a.h,d.table);Ud(a,b);Bg(d,d,a,b);return b.jb()};function dj(a,b){T.call(this,0,-1);this.F=a.l(lc);this.U=b}t(dj,T);dj.prototype.toString=function(){return"insert("+this.U.getName()+")"};dj.prototype.fa=function(a,b,c){ej(this.U,c.values,this.F);b.zb(this.U,c.values);return[Dd(c.values,[this.U.getName()])]};function ej(a,b,c){a=a.Gb().dd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function fj(a,b){T.call(this,0,-1);this.F=a.l(lc);this.U=b}t(fj,T);fj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};fj.prototype.fa=function(a,b,c){ej(this.U,c.values,this.F);b.Td(this.U,c.values);return[Dd(c.values,[this.U.getName()])]};function gj(){T.call(this,0,1)}t(gj,T);gj.prototype.toString=l("limit(?)");gj.prototype.Qc=function(a){return this.toString().replace("?",a.X.toString())};gj.prototype.fa=function(a,b,c){a[0].entries.splice(c.X);return a};function hj(a){T.call(this,0,1);this.O=a}t(hj,T);m=hj.prototype;m.toString=function(){return"order_by("+je(this.O)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.O.length;d++){var e=Rg(this.O[d].N);if(null!==b.Ya&&b.Ya.has(e.m())){c=e;break}}b=c;(null===b?a[0]:yd(a[0],b)).entries.sort(this.Of.bind(this))}else a.sort(this.zg.bind(this));return a};
m.W=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.O[f].N,c=this.O[f].mb,d=a(e),e=b(e);while(d==e&&f+1<this.O.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.zg=function(a,b){return this.W(function(b){return b instanceof S?yd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?yd(b,a):I(b.entries[b.entries.length-1],a)})};m.Of=function(a,b){return this.W(function(b){return I(a,b)},function(a){return I(b,a)})};function ij(a,b){this.Ka=a;this.K=b}function jj(a){return a.K.some(function(a){return a instanceof S},a)?kj(a):lj(a)}function kj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Lb)return a=yd(a.Ka,a.K[0]).entries.map(function(a){var b=new Ed(new Wb(-1,{}),1<this.Ka.M.size);Gd(b,this.K[0],I(a,this.K[0].child));return b},a),new G(a,[]);var b=new Ed(new Wb(-1,{}),1<a.Ka.M.size);a.K.forEach(function(a){var d=a instanceof S?yd(this.Ka,a):I(this.Ka.entries[0],a);Gd(b,a,d)},a);return new G([b],H(a.Ka))}
function lj(a){var b=Array(a.Ka.entries.length),c=1<a.Ka.M.size;a.Ka.entries.forEach(function(a,e){b[e]=new Ed(new Wb(a.ua.id(),{}),c);this.K.forEach(function(c){Gd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ka))}function mj(a,b){var c=a.map(function(a){return jj(new ij(a,b)).entries[0]});return new G(c,H(a[0]))};function nj(a,b){T.call(this,0,1);this.f=a;this.Ob=b}t(nj,T);nj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};nj.prototype.fa=function(a){0==a.length?a=[Ad()]:1==a.length?(a=a[0],a=[0==this.f.length?a:jj(new ij(a,this.f))]):a=[mj(a,this.f)];return a};function oj(a){return a.f.some(function(a){return a instanceof S})||null!==a.Ob};function pj(){T.call(this,0,1)}t(pj,T);pj.prototype.toString=l("skip(?)");pj.prototype.Qc=function(a){return this.toString().replace("?",a.L.toString())};pj.prototype.fa=function(a,b,c){return[new G(a[0].entries.slice(c.L),H(a[0]))]};function qj(){}t(qj,uh);qj.prototype.pb=function(a,b){if(!q(b.X)&&!q(b.L))return a;var c=rj(a);if(null===c)return a;wg(a,function(a){return a instanceof gj||a instanceof pj}).forEach(function(a){a instanceof gj?c.Sc=!0:c.Tc=!0;xg(a)},this);return c.jb()};function rj(a){a=wg(a,function(a){return a instanceof Yi},function(a){return a instanceof nj&&oj(a)||a instanceof hj||1!=L(a).length||a instanceof Zi});return 0<a.length?a[0]:null};function sj(a){this.h=a}t(sj,uh);sj.prototype.pb=function(a,b){var c=tj(a,b);if(null===c)return a;var d;a:{var e=c;d=uj(Sd(c,0));if(null!==d){var f;f=c.O;for(var h=null,k=d.table.Ba(),n=0;n<k.length&&null===h;n++)h=vj(k[n],f);f=h;if(null===f){d=e;break a}e=new Yi(this.h,f.yb,new Ni(f.yb),f.Te);f=new $i(this.h,d.table);Ud(f,e);xg(c);e=Bg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=wj(Sd(c,0)),null!==e){f=vj(e.index,c.O);if(null===f)break a;e.le=f.Te;d=xg(c).parent}return d.jb()};
function wj(a){a=wg(a,function(a){return a instanceof Yi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function uj(a){a=wg(a,function(a){return a instanceof Di},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function tj(a,b){return q(b.O)?wg(a,function(a){return a instanceof hj})[0]:null}function vj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ba.getName()}))return null;var c=xj(b,a);return c[0]||c[1]?{yb:a,Te:c[1]}:null}
function xj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function yj(a,b,c){this.Ea=a;this.he=b;this.Wb=c}yj.prototype.jc=function(){this.Wb.forEach(function(a){this.Ea=a.pb(this.Ea,this.he)},this);return this.Ea};function zj(a,b){T.call(this,0,1);this.U=a;this.Hg=b}t(zj,T);zj.prototype.toString=function(){return"update("+this.U.getName()+")"};zj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.U.Fb(a.ua.Ga());this.Hg.forEach(function(a){b.s[a.N.getName()]=a.value},this);return b},this);b.update(this.U,c);return[Ad()]};function Aj(a){this.h=a;this.oe=[new Li,new aj(this.h),new sj(this.h),new qj,new Ei(this.h)];this.Md=[new aj(this.h)]}Aj.prototype.create=function(a,b){var c=a.jb();if(c instanceof hh||c instanceof gh)return Bj(this,a,b);if(c instanceof nh||c instanceof rh||c instanceof sh)return Bj(this,a,b,this.oe);if(c instanceof ih||c instanceof jh)return Bj(this,a,b,this.Md);throw new E(8);};function Bj(a,b,c,d){a=ug(b.jb(),a.jg.bind(a));null!=d&&(a=(new yj(a,c,d)).jc());return new ke(a,b.ca())}
Aj.prototype.jg=function(a){if(a instanceof nh)return new nj(a.f,a.Ob);if(a instanceof qh)return new Fi(a.f);if(a instanceof ph)return new Vg(a.f);if(a instanceof oh)return new hj(a.O);if(a instanceof sh)return new pj;if(a instanceof rh)return new gj;if(a instanceof kh)return new Zi(a.J.Z());if(a instanceof mh)return new zh;if(a instanceof th)return new Hi(this.h,a.J,a.Rb);if(a instanceof lh)return new Di(this.h,a.table);if(a instanceof ih)return new Bi(a.table);if(a instanceof jh)return new zj(a.table,
a.ve);if(a instanceof hh)return new fj(this.h,a.table);if(a instanceof gh)return new dj(this.h,a.table);throw new E(514);};function Cj(a){this.hg=new Ai;this.ug=new Aj(a)};function Dj(){this.$e=z()}function Ej(a,b){var c=a.$e.get(b.getName())||null;null===c&&(c=new Fj,a.$e.set(b.getName(),c));return c}function Gj(a,b,c,d){c.forEach(function(a){a=Ej(this,a);0==d?(a.bb=null,a.yc=b):3==d?(null===a.Zb&&(a.Zb=C()),a.Zb.add(b),null===a.Ta&&(a.Ta=C()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=C()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function Hj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Ej(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Zb||0==a.Zb.size)&&c&&null===a.yc&&null!==a.bb&&a.bb==b:3==d?null===a.yc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Ij(a,b,c,d){var e=Hj(a,b,c,d);e&&Gj(a,b,c,d);return e}Dj.prototype.releaseLock=function(a,b){b.forEach(function(b){Ej(this,b).releaseLock(a)},this)};
function Jj(a,b){b.forEach(function(a){Ej(this,a).bb=null},a)}function Fj(){this.Zb=this.Ta=this.bb=this.yc=null}Fj.prototype.releaseLock=function(a){this.yc==a&&(this.yc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Zb||this.Zb.delete(a)};function Kj(){this.Vb=new Lj;this.Hc=new Dj}function ue(a,b){(2>b.getPriority()||2>b.getPriority())&&Jj(a.Hc,b.ca());a.Vb.zb(b);Mj(a);return b.Nb().da}function Mj(a){for(var b=a.Vb.sa(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?Nj(a,d,1,3):Nj(a,d,2,0))a.Vb.remove(d),e=a,d.exec().then(e.rg.bind(e,d),e.qg.bind(e,d))}}function Nj(a,b,c,d){var e=!1;Ij(a.Hc,b.Z(),b.ca(),c)&&(e=Ij(a.Hc,b.Z(),b.ca(),d));return e}Kj.prototype.rg=function(a,b){this.Hc.releaseLock(a.Z(),a.ca());a.Nb().resolve(b);Mj(this)};
Kj.prototype.qg=function(a,b){this.Hc.releaseLock(a.Z(),a.ca());a.Nb().reject(b);Mj(this)};function Lj(){this.Vb=[]}Lj.prototype.zb=function(a){sf(this.Vb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Z()-c.Z():d})};Lj.prototype.sa=function(){return this.Vb.slice()};Lj.prototype.remove=function(a){var b=this.Vb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Oj(a,b){this.Nd=Jd.Cc();this.ie=a;this.nd=b;this.K=Pj(this)}function Pj(a){if(0<a.ie.f.length)return a.ie.f;var b=[];a.ie.c.forEach(function(a){a.ib().forEach(function(a){b.push(a)})});return b}Oj.prototype.W=function(a,b){return this.K.every(function(c){return Pd(this.Nd,c.H(),"eq")(I(a,c),I(b,c))},this)};
function Qj(a,b,c){var d=null===b?[]:b.entries,e=qb(d,c.entries,a.W.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=Rj(h,k,0,a.nd),b.push(k))}e=qb(d,c.entries,a.W.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.ua.s),k=Rj(h,[],1,a.nd),b.push(k));return b}function Rj(a,b,c,d){return{Jg:c,index:a,object:d,Lg:b,type:"splice"}};function Sj(){this.hc=z()}Sj.prototype.zd=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;null===d&&(d=new Tj(a),this.hc.set(c,d));d.zd(b)};Sj.prototype.je=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;d.je(b);0<d.Jc.size||this.hc.delete(c)};function te(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.hc.forEach(function(a){a=a.Ec();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function re(a,b,c){b=ka(null!=b.Yc?b.Yc:b).toString();a=a.hc.get(b)||null;null!==a&&Uj(a,c)}function Tj(a){this.Ff=a;this.Jc=C();this.og=[];this.Ye=null;this.Mf=new Oj(a.a,this.og)}Tj.prototype.zd=function(a){this.Jc.has(a)||this.Jc.add(a)};Tj.prototype.je=function(a){return this.Jc.delete(a)};Tj.prototype.Ec=function(){var a=this.Ff;return{context:a.a,ge:Xh(a)}};function Uj(a,b){var c=Qj(a.Mf,a.Ye,b);a.Ye=b;0<c.length&&a.Jc.forEach(function(a){a(c)})};function Vj(a,b){var c=a.l(pc),d=b||{},e=new of(c);a.ob(kc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=Tb(),e=e.Zf?0:e.Ig?4:1);switch(e){case 0:e=new Te(a,c);break;case 1:e=new $e(c);break;case 5:e=new bf(c);break;case 4:e=new kf(a,c,d.webSqlDbSize);break;case 3:e=new Ge(c,d.firebase);f=!0;break;default:throw new E(300);}a.ob(jc,e);var h=new rg;a.ob(lc,h);return e.Ha(d.onUpgrade).then(function(){var b=new Cj(a);a.ob(mc,b);b=new Kj;a.ob(nc,b);b=new Sj;a.ob(oc,b);return h.Ha(c)}).then(function(){if(f){var b=
new ve(a);b.La.subscribe(b.be.bind(b))}return(new kg(a)).Ha(c)})};function Wj(a){this.h=a;this.i=a.l(pc);this.aa=C(this.i.ra());this.cb=x()}m=Wj.prototype;m.exec=function(){var a=this.h.l(lc),b=this.h.l(kc),c={};this.i.ra().forEach(function(d){var f=a.get(Xe(d)).$a(),f=pf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new Ed(new Wb(-1,d),!0);return w([new G([d],[])])};m.H=l(0);m.ca=g("aa");m.Nb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);function Xj(a,b){this.h=a;this.i=a.l(pc);this.aa=C(this.i.ra());this.cb=x();this.ya=b;this.La=a.l(jc);this.V=a.l(kc);this.F=a.l(lc)}m=Xj.prototype;
m.exec=function(){if(!(this.La instanceof Te||this.La instanceof $e||this.La instanceof kf))throw new E(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.F.get(Xe(a[b])).Oa().na){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.i.name()!=this.ya.name||this.i.version()!=this.ya.version)throw new E(111);if(null==this.ya.tables)throw new E(112);return Yj(this)};m.H=l(1);m.ca=g("aa");m.Nb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);
function Yj(a){var b=new jd(a.h,a.aa),b=a.La.Db(a.H(),D(a.aa),b),c;for(c in a.ya.tables){var d=a.i.table(c),e=a.ya.tables[c].map(function(a){return d.vb(a)}),f=b.I(c,d.Fb,0);a.V.Xb(c,e);var h=a.F.oc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Hb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Zj(a,b){this.h=a;this.La=a.l(jc);this.Fa=a.l(nc);this.Jb=a.l(oc);this.aa=C(b);this.Ra=new jd(this.h,this.aa);this.cb=x();this.zc=x();this.xe=x()}m=Zj.prototype;m.exec=function(){this.xe.resolve();return this.zc.da};m.H=l(1);m.ca=g("aa");m.Nb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(2);function ak(a){ue(a.Fa,a);return a.xe.da}
function bk(a,b){var c=b.Ec();return c.ge.jb().exec(a.Ra,c.context).then(function(a){return wd(a[0])},function(a){this.Ra.Kb();var b=new kb(a.name);this.zc.reject(b);throw a;}.bind(a))}m.ia=function(){this.La.Db(this.H(),D(this.aa),this.Ra).ia().then(function(){this.Nc();this.zc.resolve()}.bind(this),function(a){this.Ra.Kb();this.zc.reject(a)}.bind(this));return this.cb.da};m.Kb=function(){this.Ra.Kb();this.zc.resolve();return this.cb.da};
m.Nc=function(){var a=te(this.Jb,this.aa);0!=a.length&&(a=new qe(this.h,a),ue(this.Fa,a))};function ck(a){this.h=a;this.Fa=a.l(nc);this.Rc=null;this.Ua=0;0==dk.size&&(dk.set(0,C([1,4])),dk.set(1,C([2])),dk.set(2,C([3,5,6])),dk.set(3,C([2,7])),dk.set(4,C([7])),dk.set(5,C([7])),dk.set(6,C([7])))}r("lf.proc.Transaction",ck);var dk=z();function ek(a,b){var c=dk.get(a.Ua)||null;if(null===c||!c.has(b))throw new E(107,a.Ua,b);a.Ua=b}
ck.prototype.exec=function(a){ek(this,4);var b=[];try{a.forEach(function(a){a.gb();b.push(a.Ec())},this)}catch(c){return ek(this,7),cb(c)}a=new Ah(this.h,b);return ue(this.Fa,a).then(function(a){ek(this,7);return a.map(function(a){return wd(a)})}.bind(this),function(a){ek(this,7);throw a;}.bind(this))};ck.prototype.exec=ck.prototype.exec;ck.prototype.Df=function(a){ek(this,1);this.Rc=new Zj(this.h,a);return ak(this.Rc).then(function(){ek(this,2)}.bind(this))};ck.prototype.begin=ck.prototype.Df;
ck.prototype.Cf=function(a){ek(this,3);return bk(this.Rc,a).then(function(a){ek(this,2);return a}.bind(this),function(a){ek(this,7);throw a;}.bind(this))};ck.prototype.attach=ck.prototype.Cf;ck.prototype.ia=function(){ek(this,5);return this.Rc.ia().then(function(){ek(this,7)}.bind(this))};ck.prototype.commit=ck.prototype.ia;ck.prototype.Kb=function(){ek(this,6);return this.Rc.Kb().then(function(){ek(this,7)}.bind(this))};ck.prototype.rollback=ck.prototype.Kb;function W(a){this.h=a;this.i=a.l(pc);this.kd=!1}r("lf.proc.Database",W);W.prototype.Ha=function(a){this.h.ob(pc,this.i);return Vj(this.h,a).then(function(){this.kd=!0;this.Fa=this.h.l(nc);return this}.bind(this))};W.prototype.init=W.prototype.Ha;W.prototype.xb=g("i");W.prototype.getSchema=W.prototype.xb;function fk(a){if(!a.kd)throw new E(2);}W.prototype.select=function(a){fk(this);return new V(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){fk(this);return new Zh(this.h)};W.prototype.insert=W.prototype.zb;W.prototype.Td=function(){fk(this);return new Zh(this.h,!0)};W.prototype.insertOrReplace=W.prototype.Td;W.prototype.update=function(a){fk(this);return new ii(this.h,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){fk(this);return new Yh(this.h)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){fk(this);this.h.l(oc).zd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){fk(this);this.h.l(oc).je(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Kf=function(){fk(this);return new ck(this.h)};W.prototype.createTransaction=W.prototype.Kf;W.prototype.close=function(){try{this.h.l(jc).close()}catch(a){}this.h.clear();this.kd=!1};W.prototype.close=W.prototype.close;
W.prototype.Sf=function(){fk(this);var a=new Wj(this.h);return ue(this.Fa,a).then(function(a){return wd(a[0])[0]})};W.prototype["export"]=W.prototype.Sf;W.prototype.import=function(a){fk(this);a=new Xj(this.h,a);return ue(this.Fa,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.w=b;this.Ue=c;this.Se=d;this.vf=e;this.fb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.m=function(){return J(this.U)+"."+this.w};m.toString=function(){return this.m()};m.I=g("U");m.H=g("vf");X.prototype.getType=X.prototype.H;X.prototype.Za=g("fb");X.prototype.Ba=function(){null==this.pa&&(this.pa=[],this.I().Ba().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.pa.push(a)},this));return this.pa};
X.prototype.Aa=function(){if(!q(this.ga)){var a=this.Ba().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.kc=g("Se");X.prototype.isNullable=X.prototype.kc;X.prototype.Gc=g("Ue");X.prototype.Qa=function(a){return Lg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.af=function(a){return Lg(this,a,"neq")};X.prototype.neq=X.prototype.af;X.prototype.Yd=function(a){return Lg(this,a,"lt")};
X.prototype.lt=X.prototype.Yd;X.prototype.ig=function(a){return Lg(this,a,"lte")};X.prototype.lte=X.prototype.ig;X.prototype.Uf=function(a){return Lg(this,a,"gt")};X.prototype.gt=X.prototype.Uf;X.prototype.Vf=function(a){return Lg(this,a,"gte")};X.prototype.gte=X.prototype.Vf;X.prototype.match=function(a){return Lg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Ef=function(a,b){return Lg(this,[a,b],"between")};X.prototype.between=X.prototype.Ef;
X.prototype.Wf=function(a){return Lg(this,a,"in")};X.prototype["in"]=X.prototype.Wf;X.prototype.dg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.dg;X.prototype.cg=function(){return this.af(null)};X.prototype.isNotNull=X.prototype.cg;X.prototype.tc=function(a){return new X(this.U,this.w,this.Ue,this.Se,this.vf,a)};X.prototype.as=X.prototype.tc;function gk(){this.ud=z()}var hk;gk.prototype.clear=function(){this.ud.clear()};gk.prototype.clear=gk.prototype.clear;gk.prototype.ob=function(a,b){this.ud.set(a.toString(),b);return b};gk.prototype.registerService=gk.prototype.ob;gk.prototype.l=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};gk.prototype.getService=gk.prototype.l;gk.prototype.Wd=function(a){return this.ud.has(a.toString())};gk.prototype.isRegistered=gk.prototype.Wd;function ik(a){this.i=a;this.Fd=new Rc;this.ke=new Rc;this.cf=new Rc;this.Ge=z();this.g=new Rc;this.Ce=new Rc;this.kf=new Rc;this.Fe=new Rc;jk(this)}function jk(a){a.i.ra().forEach(function(a){var c=a.getName();a.Gb().Sd().forEach(function(d){this.cf.set(c,this.i.table(d.Sa));this.g.set(d.Sa,a);0==d.action?(this.ke.set(d.Sa,d),this.kf.set(d.Sa,a)):(this.Fd.set(d.Sa,d),this.Ce.set(d.Sa,a));this.Ge.set(a.getName()+"."+d.hb,d.Sa);this.Fe.set(d.Sa+"."+d.mc,a.getName())},this)},a)}
function $c(a,b,c){if(null!=c)return 1==c?a.Fd.get(b):a.ke.get(b);c=a.Fd.get(b);a=a.ke.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Gh(a,b){var c=b.get(a);return null===c?[]:c}function Ih(a,b){var c=C();b.forEach(function(a){(a=this.Ge.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.i.table(a)},a)}function Eh(a,b,c){return null!=c?0==c?Gh(b,a.kf):Gh(b,a.Ce):Gh(b,a.g)}
function Jh(a,b){var c=C();b.forEach(function(a){(a=this.Fe.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.i.table(a)},a)};function kk(a,b,c){this.vg=a;this.ng=b;this.Tf=c}r("lf.schema.Constraint",kk);kk.prototype.dd=g("vg");kk.prototype.getPrimaryKey=kk.prototype.dd;kk.prototype.Sd=g("Tf");kk.prototype.getForeignKeys=kk.prototype.Sd;function lk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ee=b;this.hb=a.local;this.Sa=d[0];this.mc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){mk(a);this.Nd=Jd.Cc();this.w=a;this.K=z();this.wd=C();this.pc=C();this.md=C();this.Ca=null;this.pa=z();this.qd=!1;this.wb=[]}r("lf.schema.TableBuilder",Y);function nk(a){this.name=a.name;this.mb=a.order;this.autoIncrement=a.autoIncrement}var ok=C([0,6]);function mk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function pk(a,b){if(b==a.w)throw new E(546,b);if(a.K.has(b)||a.pa.has(b)||a.pc.has(b))throw new E(503,a.w+"."+b);}
function qk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function rk(a){if(null!==a.Ca){var b=a.pa.get(a.Ca).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.hb)},a))throw new E(543,a.wb[c].name);}}
function sk(a){if(null!==a.Ca){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ca).map(b));a.pa.forEach(function(a,e){if(e!=this.Ca){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.w+"."+e);}},a)}}function tk(a){null===a.Ca||a.pa.get(a.Ca).forEach(function(a){if(this.md.has(a.name))throw new E(545,this.w+"."+a.name);},a)}Y.prototype.xf=function(a,b){mk(a);pk(this,a);this.K.set(a,b);ok.has(b)&&this.ze([a]);return this};Y.prototype.addColumn=Y.prototype.xf;
Y.prototype.zf=function(a,b){var c=this.w;this.Ca="pk"+(c[0].toUpperCase()+c.substring(1));mk(this.Ca);pk(this,this.Ca);c=uk(this,a,!0,void 0,b);qk(this,c);1==c.length&&this.wd.add(c[0].name);this.pc.add(this.Ca);this.pa.set(this.Ca,c);return this};Y.prototype.addPrimaryKey=Y.prototype.zf;
Y.prototype.yf=function(a,b){mk(a);pk(this,a);var c=new lk(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.hb))throw new E(540,a);this.wb.push(c);this.ye(a,[c.hb],this.wd.has(c.hb));return this};Y.prototype.addForeignKey=Y.prototype.yf;Y.prototype.Af=function(a,b){mk(a);pk(this,a);var c=uk(this,b,!0);1==c.length&&(this.wd.add(c[0].name),vk(this,c[0].name));this.pa.set(a,c);this.pc.add(a);return this};
Y.prototype.addUnique=Y.prototype.Af;function vk(a,b){a.wb.forEach(function(a){a.hb==b&&this.pc.add(a.name.split(".")[1])},a)}Y.prototype.ze=function(a){uk(this,a,!1).forEach(function(a){this.md.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ze;Y.prototype.ye=function(a,b,c,d){mk(a);pk(this,a);b=uk(this,b,!0,d);c&&this.pc.add(a);this.pa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ye;Y.prototype.Bb=ba("qd");Y.prototype.persistentIndex=Y.prototype.Bb;
Y.prototype.xb=function(){rk(this);sk(this);tk(this);return new (wk(this))};Y.prototype.getSchema=Y.prototype.xb;function xk(a){return a.wb}function uk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new nk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new nk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.w,a.name);}},a);return f}
function wk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{ba:this[a.name],mb:a.mb,autoIncrement:a.autoIncrement}},this)}var d=Vb(a.K).map(function(b){this[b]=new X(this,b,a.wd.has(b),a.md.has(b),a.K.get(b));return this[b]},this),e=Vb(a.pa).map(function(d){return new Ng(a.w,d,a.pc.has(d),b.call(this,d))},this);R.call(this,a.w,d,e,a.qd);var f=null===a.Ca?null:new Ng(a.w,a.Ca,!0,b.call(this,a.Ca)),h=d.filter(function(b){return!a.md.has(b.getName())});this.Hf=new kk(f,h,a.wb);
this.nf=yk(a,d,e)}t(b,R);b.prototype.vb=function(a){return new this.nf(Xb++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.Fb=function(a){var b={};this.ib().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.nf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Fb;b.prototype.Gb=g("Hf");b.prototype.getConstraint=b.prototype.Gb;return b}
function yk(a,b,c){function d(a,d){this.K=b;this.pa=c;Wb.call(this,a,d)}t(d,Wb);d.prototype.Ie=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.kc()?null:Qc[b.H()]});return a};d.prototype.uf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.H();var d=this.s[c];a[c]=0==b?null!=d?$b(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Nd.Ve.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.Hb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function zk(a,b){this.i=new Z(a,b);this.sb=z();this.Ac=!1;this.j=null}r("lf.schema.Builder",zk);function Ak(a,b){b.wb.forEach(function(a){var d=a.Sa;if(!this.sb.has(d))throw new E(536,a.name);var d=this.sb.get(d).xb(),e=a.mc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.xb()[a.hb].H()!=d[e].H())throw new E(538,a.name);if(!d[e].Gc())throw new E(539,a.name);},a)}
zk.prototype.Gf=function(a){a.wb.forEach(function(a){xk(this.sb.get(a.Sa)).forEach(function(c){if(c.hb==a.mc)throw new E(534,a.name);},this)},this)};function Bk(a){a.Ac||(a.sb.forEach(function(a){Ak(this,a);a=a.xb();this.i.M.set(a.getName(),a)},a),A(a.sb).forEach(a.Gf,a),Ck(a),a.sb.clear(),a.Ac=!0)}function Dk(a,b,c){b.we||(b.we=!0,b.ce=!0,b.Je.forEach(function(a){a=c.get(a);if(!a.we)Dk(this,a,c);else if(a.ce&&b!=a)throw new E(533);},a));b.ce=!1}
function Ck(a){var b=z();a.i.M.forEach(function(a,d){b.set(d,new Ek(d))},a);a.sb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Sa).Je.add(d)})});A(b).forEach(function(a){Dk(this,a,b)},a)}function Ek(a){this.ce=this.we=!1;this.Je=C();this.Pc=a}zk.prototype.xb=function(){this.Ac||Bk(this);return this.i};zk.prototype.getSchema=zk.prototype.xb;zk.prototype.Le=function(){var a=new ic("ns_"+this.i.name()),b;hk||(hk=new gk);b=hk;var c=null;b.Wd(a)?c=b.l(a):(c=new gk,b.ob(a,c));return c};
zk.prototype.getGlobal=zk.prototype.Le;zk.prototype.connect=function(a){if(null!==this.j&&this.j.kd)throw new E(113);if(null===this.j){var b=this.Le();b.Wd(pc)||b.ob(pc,this.xb());this.j=new W(b)}return this.j.Ha(a)};zk.prototype.connect=zk.prototype.connect;zk.prototype.Jf=function(a){if(this.sb.has(a))throw new E(503,a);if(this.Ac)throw new E(535);this.sb.set(a,new Y(a));return this.sb.get(a)};zk.prototype.createTable=zk.prototype.Jf;
zk.prototype.pe=function(a){if(this.Ac)throw new E(535);this.i.pe(a);return this};zk.prototype.setPragma=zk.prototype.pe;function Z(a,b){this.w=a;this.Pa=b;this.M=z();this.gf={Nf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Pa");Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return A(this.M)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.M.has(a))throw new E(101,a);return this.M.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Qe||(this.Qe=new ik(this));return this.Qe};Z.prototype.ff=g("gf");Z.prototype.pragma=Z.prototype.ff;Z.prototype.pe=ba("gf");r("lf.schema.create",function(a,b){return new zk(a,b)});v.prototype.catch=v.prototype.se;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
