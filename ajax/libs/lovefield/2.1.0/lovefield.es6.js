if(!self.window){window=self;}
(function(){'use strict';function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.fb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Mg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.ig=c;this.Lf=a;this.Bg=b;this.nd=0;this.ed=null}wa.prototype.get=function(){var a;0<this.nd?(this.nd--,a=this.ed,this.ed=a.next,a.next=null):a=this.Lf();return a};wa.prototype.put=function(a){this.Bg(a);this.nd<this.ig&&(this.nd++,a.next=this.ed,this.ed=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=p.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function u(a){return-1!=Fa.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ce;c.Ce=null;a()}};return function(a){d.next={Ce:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.wd=this.qc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.wd?this.wd.next=c:this.qc=c;this.wd=c};Oa.prototype.remove=function(){var a=null;this.qc&&(a=this.qc,this.qc=this.qc.next,this.qc||(this.wd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Od=null}Pa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Od.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ta=0;this.lf=void 0;this.Uc=this.ec=this.G=null;this.dd=this.Md=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.kc=this.Hc=this.child=null;this.zd=!1}Ya.prototype.reset=function(){this.context=this.kc=this.Hc=this.child=null;this.zd=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Hc=a;d.kc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Xa(b,2,a);return b}function ab(a){return new v(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],bb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new eb(c,a,b)}
v.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.pe=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.ec||2!=a.Ta&&3!=a.Ta||hb(a);a.Uc?a.Uc.next=b:a.ec=b;a.Uc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new v(function(a,h){e.Hc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.kc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(A){h(A)}}:h});e.child.G=a;gb(a,e);return e.child}v.prototype.Hg=function(a){this.Ta=0;Xa(this,2,a)};v.prototype.Ig=function(a){this.Ta=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ta&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,cb(c,a.Hg,a.Ig,a)||(a.lf=c,a.Ta=b,a.G=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof v)return gb(a,$a(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function hb(a){a.Md||(a.Md=!0,Ra(a.Qf,a))}function lb(a){var b=null;a.ec&&(b=a.ec,a.ec=b.next,b.next=null);a.ec||(a.Uc=null);return b}
v.prototype.Qf=function(){for(var a=null;a=lb(this);){var b=this.Ta,c=this.lf;if(3==b&&a.kc&&!a.zd)for(var d=void 0,d=this;d&&d.dd;d=d.G)d.dd=!1;if(a.child)a.child.G=null,mb(a,b,c);else try{a.zd?a.Hc.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Md=!1};function mb(a,b,c){2==b?a.Hc.call(a.context,c):a.kc&&a.kc.call(a.context,c)}function jb(a,b){a.dd=!0;Ra(function(){a.dd&&nb.call(null,b)})}var nb=La;function ib(a){ra.call(this,a)}t(ib,ra);ib.prototype.name="cancel";
function eb(a,b,c){this.fa=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function ub(){}ub.prototype.next=function(){throw tb;};ub.prototype.ve=function(){return this};function xb(a){if(a instanceof ub)return a;if("function"==typeof a.ve)return a.ve(!1);if(ha(a)){var b=0,c=new ub;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new ub;var b=new ub,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function Ab(a){Bb(a);return a.b.concat()}function Bb(a){if(a.Hf!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Cb(a.aa,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Hf!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Cb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Eb=Ja(),Fb=u("Trident")||u("MSIE"),Gb=u("Edge"),Hb=u("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ib=-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge");function Jb(){var a=Fa;if(Hb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Eb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Jb())&&(a=b?b[1]:"");return Fb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Kb={};var Lb=Db()||u("iPod"),Mb=u("iPad"),Nb=Ka(),Ob=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Db()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Pb(){this.Cg=Ob||Mb||Lb;this.$f=!(this.Cg||Fb&&!Kb[10]&&!(Kb[10]=0<=ta(10)));!Fb||Kb[11]||(Kb[11]=0<=ta(11));this.Kg=Nb||Ob}var Qb;function y(){return new window.Map}function Rb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(a,b){this.qa=a;this.o=b||this.He()}var Tb=0;m=Sb.prototype;m.id=g("qa");m.He=function(){return{}};m.tf=g("o");m.Ha=function(){return{id:this.qa,value:this.tf()}};m.nb=function(a){return"#"==a.substr(-1)?this.qa:null};function Ub(a){return new Sb(a.id,a.value)}function Vb(a){return new Sb(Tb++,a||{})}function Wb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var Xb={};r("lf.TransactionType",Xb);Xb.READ_ONLY=0;Xb.READ_WRITE=1;function Yb(a,b){this.re=a;this.Qa=b||null;this.S=x()}Yb.prototype.ja=function(){return 0==this.re?this.tc():$b(this)};function $b(a){try{ac(a.Qa)}catch(b){return ab(b)}return bc(a).then(function(a){this.Qa.ja();return a}.bind(a))}function bc(a){cc(a);dc(a);return a.tc()}
function cc(a){a.Qa.wb.forEach(function(a,c){var d=this.Qa.ea().get(c),d=this.J(d.getName(),d.kb.bind(d),0),e=z(a.za).map(function(a){return a.id()});0<e.length&&d.remove(e).pe(this.Pe,this);e=z(a.oa).map(function(a){return a[1]}).concat(z(a.wa));d.put(e).pe(this.Pe,this)},a)}function dc(a){ec(a.Qa).forEach(function(a){var c=this.J(a.getName(),Ub,1);c.remove([]);c.put(a.Ha())},a)}Yb.prototype.Pe=function(a){this.S.reject(a)};function fc(a){this.Dg=a}fc.prototype.toString=g("Dg");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),mc=new fc("schema");function B(a){return q(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function nc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function oc(a,b){this.qa=a;this.o=b||{}}function pc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}oc.prototype.$=g("qa");function qc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ha()},a)}function rc(a,b){b.forEach(function(a){delete this.o[a]},a)}oc.prototype.Ha=function(){return{id:this.qa,value:JSON.stringify(this.o)}};function sc(a){return new oc(a.id,JSON.parse(a.value))};function tc(a,b,c){this.Y=a;this.Ib=b;this.mf=c}m=tc.prototype;m.get=function(a){if(0==a.length)return this.Pd();var b=this.Ib;return uc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function uc(a,b){var c=y(),d=x(),e=pc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Y.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=sc(a.target.result);c.set(a.$(),a);b()}},this)},a);db(e).then(function(){d.resolve(c)});return d.fa}
m.Pd=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=sc(b.value).o;for(var h in f)c.push(this.Ib(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.mf(this.Y.name,d));qc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Ub(function(){return this.Y.put(a.Ha())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.mf(this.Y.name,d));rc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Ub(function(){return 0==Object.keys(a.o).length?this.Y.delete(a.$()):this.Y.put(a.Ha())}.bind(this))},this);return db(a)};function vc(a,b,c){a=a.l(hc);var d=[c<<9,(c+1<<9)-1];b=a.Za(b,d[0],d[1]);c=new oc(c);qc(c,b);return c}
function wc(a,b){return new oc(b)};function xc(a){this.V=a.l(hc);this.F=a.l(ic);this.h=a.l(mc)}xc.prototype.update=function(a){a.forEach(function(a){yc(this,a);zc(this,a)},this)};function zc(a,b){var c=b.getName();b.za.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.oa.forEach(function(a){this.V.set(c,a[1])},a)}function yc(a,b){var c=a.h.table(b.getName());Ac(b).forEach(function(a){Bc(this,c,a)},a)}
function Bc(a,b,c){var d=a.F.nc.get(b.getName())||[],e=0;d.forEach(function(a){try{Cc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Cc(a,[c[1],c[0]])},this),b;}},a)}function Cc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.ib().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Dc={};r("lf.ConstraintAction",Dc);Dc.RESTRICT=0;Dc.CASCADE=1;var Ec={};r("lf.ConstraintTiming",Ec);Ec.IMMEDIATE=0;Ec.DEFERRABLE=1;var Fc={};r("lf.Order",Fc);Fc.DESC=0;Fc.ASC=1;var Gc={};r("lf.Type",Gc);Gc.ARRAY_BUFFER=0;Gc.BOOLEAN=1;Gc.DATE_TIME=2;Gc.INTEGER=3;Gc.NUMBER=4;Gc.STRING=5;Gc.OBJECT=6;var Hc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Hc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Ic(){this.aa=y();this.size=0}m=Ic.prototype;m.has=function(a){return this.aa.has(a)};m.set=function(a,b){var c=this.aa.get(a)||null;null===c&&(c=B(),this.aa.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Xb=function(a,b){var c=this.aa.get(a)||null;null===c&&(c=B(),this.aa.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Xd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Xb(b,c)},this);return this};
m.delete=function(a,b){var c=this.aa.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.aa.delete(a));return d};m.get=function(a){a=this.aa.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.aa.clear();this.size=0};m.keys=function(){return Rb(this.aa)};m.values=function(){var a=[];this.aa.forEach(function(b){a.push.apply(a,C(b))});return a};function Jc(a){this.F=a.l(ic);this.h=a.l(mc);this.V=a.l(hc);this.Yc=null}function Kc(a,b,c){var d=b.Jb().og;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Lc(a,b,c,d){b.Jb().Qd().forEach(function(a){a.timing==d&&Mc(this,a,c)},a)}function Mc(a,b,c){var d=Nc(a,b);c.forEach(function(a){if(Pc(a[0],a[1],b.name)&&(a=a[1].nb(b.name),null!==a&&!d.jb(a)))throw new D(203,b.name);},a)}
function Nc(a,b){null===a.Yc&&(a.Yc=y());var c=a.Yc.get(b.name)||null;null===c&&(c=a.h.table(b.Ra)[b.Ic].Aa(),c=a.F.get(c.m()),a.Yc.set(b.name,c));return c}function Pc(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function Qc(a,b,c,d){b=Rc(a.h.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Sc(a,b,c,function(a,b,c){if(b.jb(c))throw new D(203,a.name);}))}
function Tc(a,b,c){b=Rc(a.h.info(),b.getName(),1);if(null===b)return null;var d=new Ic;Sc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Xb(a.De,b)});return d}function Uc(a,b,c){var d=new Ic;Sc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Nd:a,tg:k[1]})})});return d}function Sc(a,b,c,d){b.forEach(function(a){var b=this.F.get(a.name),h=Nc(this,a);c.forEach(function(c){if(Pc(c[0],c[1],h.getName())){var n=c[0].nb(h.getName());d(a,b,n,c)}},this)},a)}
function Vc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Lc(a,b,c,d))}function Wc(a,b,c,d){0!=c.length&&(Lc(a,b,c,d),Qc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Qc(a,b,c,d))}
function Yc(a,b,c){var d={oe:[],of:new Ic},e=new Ic;e.Xb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Ic;e.keys().forEach(function(a){var b=this.h.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=Tc(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Xd(b))},a);e=f;d.of.Xd(e)}while(0<e.size);return d};function Zc(a){this.wa=y();this.oa=y();this.za=y();this.B=a}m=Zc.prototype;m.getName=g("B");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.oa.set(a.id(),b);this.za.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.oa.has(c)&&(a=[this.oa.get(a[0].id())[0],b]),this.oa.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.oa.has(a.id())){var b=this.oa.get(a.id())[0];this.oa.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};m.Xd=function(a){a.wa.forEach(function(a){this.add(a)},this);a.oa.forEach(function(a){this.modify(a)},this);a.za.forEach(function(a){this.delete(a)},this)};
function Ac(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.oa.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Rb(this.wa).toString()+"], ["+Rb(this.oa).toString()+"], ["+Rb(this.za).toString()+"]"};function $c(a){var b=new Zc(a.B);a.wa.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.oa.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.dg=function(){return 0==this.wa.size&&0==this.za.size&&0==this.oa.size};function ad(a,b){this.ba=y();b.forEach(function(a){this.ba.set(a.getName(),a)},this);this.h=a.l(mc);this.V=a.l(hc);this.F=a.l(ic);this.xa=new Jc(a);this.fd=new xc(a);this.wb=y()}function ec(a){var b=[];Rb(a.wb).map(function(a){return this.ba.get(a)},a).forEach(function(a){a.Gb()&&(a.Ba().forEach(function(a){b.push(this.F.get(a.m()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=ad.prototype;m.ea=g("ba");
m.Db=function(a,b){bd(this,a);Kc(this.xa,a,b);Vc(this.xa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[null,b[c]])};function cd(a,b,c){var d=b.getName(),e=a.wb.get(d)||new Zc(d);a.wb.set(d,e);try{Bc(a.fd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){bd(this,a);Kc(this.xa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);dd(this,a,c);Wc(this.xa,a,c,0);c.forEach(function(b){cd(this,a,b)},this)};m.Rd=function(a,b){bd(this,a);Kc(this.xa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Jb().ad();if(null===h)f=null;else{f=this.xa;var h=h.m(),k=d.nb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.qa=f,Wc(this.xa,a,[[e,d]],0)):Vc(this.xa,a,[d],0);cd(this,a,[e,d])}};
m.remove=function(a,b){bd(this,a);ed(this,a,b);Xc(this.xa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[b[c],null])};function dd(a,b,c){b=Rc(a.h.info(),b.getName(),1);if(null!==b){var d=Uc(a.xa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.h.table(b.Nd.De),d=this.V.get(a),n=c.kb(d.Ha());n.o[b.Nd.xb]=b.tg.o[b.Nd.Ic];cd(this,c,[d,n])},this)},a)}}
function ed(a,b,c){if(null!==Rc(a.h.info(),b.getName(),1)){b=Yc(a.xa,b,c);var d=b.of;b.oe.forEach(function(a){var b=this.h.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);Xc(this.xa,b,a,0);a.forEach(function(a){cd(this,b,[a,null])},this)},a)}}function ac(a){a.wb.forEach(function(a){var c=this.ba.get(a.getName());Vc(this.xa,c,z(a.wa),1);Xc(this.xa,c,z(a.za),1);Wc(this.xa,c,z(a.oa),1)},a)}m.ja=ba();m.Mb=function(){var a=z(this.wb).map(function(a){return $c(a)});this.fd.update(a)};
function bd(a,b){if(!a.ba.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.c=a;this.s=b;this.ga=this.c==F?!1:c;this.na=this.s==F?!1:d}var F=new (ba());E.prototype.toString=function(){return(this.ga?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.s==F?"unbound":this.s)+(this.na?")":"]")};function fd(a){if(gd(a))return[];var b=null,c=null;a.c==F||(b=new E(F,a.c,!1,!a.ga));a.s==F||(c=new E(a.s,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.s,this.c,this.na,this.ga)};
function hd(a,b){var c=id(a.c,b.c,!0,a.ga,b.ga);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.s==F||d.s>c.c||d.s==c.c&&!d.na&&!c.ga}function jd(){return new E(F,F,!1,!1)}function gd(a){return a.c==F&&a.s==F}function kd(a){return a.c==a.s&&a.c!=F&&!a.ga&&!a.na}E.prototype.contains=function(a){var b=this.s==F||a<this.s||a==this.s&&!this.na;return(this.c==F||a>this.c||a==this.c&&!this.ga)&&b};
function id(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function ld(a,b){var c=id(a.c,b.c,!0,a.ga,b.ga);0==c&&(c=id(a.s,b.s,!1,a.na,b.na));return c}function md(a){if(0==a.length)return[];a.sort(ld);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].c,!1,!0):c==b.length-1?new E(a[c-1].s,F,!0,!1):new E(a[c-1].s,a[c].c,!0,!0);return b};function nd(a){this.mc=[];q(a)&&this.add(a)}nd.prototype.toString=function(){return this.mc.map(function(a){return a.toString()}).join(",")};nd.prototype.jb=function(a){return this.mc.some(function(b){return b.contains(a)})};nd.prototype.Cb=g("mc");
nd.prototype.add=function(a){if(0!=a.length)if(a=this.mc.concat(a),1==a.length)this.mc=a;else{a.sort(ld);for(var b=[],c=a[0],d=1;d<a.length;++d)if(hd(c,a[d])){var e=a[d],f=jd();if(c.c!=F&&e.c!=F){var h=id(c.c,e.c,!0);1!=h?(f.c=c.c,f.ga=0!=h?c.ga:c.ga&&e.ga):(f.c=e.c,f.ga=e.ga)}c.s!=F&&e.s!=F&&(h=id(c.s,e.s,!1),-1!=h?(f.s=c.s,f.na=0!=h?c.na:c.na&&e.na):(f.s=e.s,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.mc=b}};
function od(a,b){var c=[];a.Cb().map(function(a){return b.Cb().map(function(b){var c;if(hd(a,b)){c=jd();var h=id(a.c,b.c,!0),h=0==h?a.ga?a:b:-1!=h?a:b;c.c=h.c;c.ga=h.ga;a.s==F||b.s==F?b=a.s==F?b:a:(h=id(a.s,b.s,!1),b=0==h?a.na?a:b:-1==h?a:b);c.s=b.s;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new nd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.N=B(b);this.Xa=null}G.prototype.u=function(){return C(this.N)};function pd(a){return a.entries.map(function(a){return a.ta.o})}function qd(a){return a.entries.map(function(a){return a.ta.id()})}function rd(a,b){return a.Xa.get(b.m())}var sd=null;function td(){null===sd&&(sd=new G([],[]));return sd}
function ud(a){if(0==a.length)return td();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(z(e),C(a[0].N))}function vd(a){if(0==a.length)return td();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(z(b),C(a[0].N))}
function wd(a,b){var c=1<b.length,d=a.map(function(a){return new xd(a,c)});return new G(d,b)}function xd(a,b){this.ta=a;this.id=yd++;this.Td=b}var yd=0;function H(a,b){var c=b.Ya();return null!==c&&a.ta.o.hasOwnProperty(c)?a.ta.o[c]:a.Td?a.ta.o[zd(b.J())][b.getName()]:a.ta.o[b.getName()]}function Ad(a,b,c){var d=b.Ya();if(null!=d)a.ta.o[d]=c;else if(a.Td){var d=zd(b.J()),e=a.ta.o[d];null==e&&(e={},a.ta.o[d]=e);e[b.getName()]=c}else a.ta.o[b.getName()]=c}
function Bd(a,b,c,d){function e(a,b){if(a.Td){var c=a.ta.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ta.o}var f={};e(a,b);e(c,d);a=new Sb(-1,f);return new xd(a,!0)};r("lf.bind",function(a){return new Cd(a)});function Cd(a){this.ha=a}r("lf.Binder",Cd);Cd.prototype.Aa=g("ha");function Dd(){this.Ve=Ed();var a=Fd();this.hc=y();this.hc.set(1,Gd());this.hc.set(2,Hd());this.hc.set(4,a);this.hc.set(3,a);this.hc.set(5,Id())}var Jd;function Kd(){null!=Jd||(Jd=new Dd);return Jd}function Ld(a,b,c){return(a.hc.get(b)||null).get(c)||null}function Ed(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Gd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Fd(){var a=Gd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Id(){var a=Fd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Hd(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.i=this.G=null}var Md=[];I.prototype.getParent=g("G");I.prototype.$a=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Nd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function J(a){return a.i||Md}function Od(a,b){return J(a)[b]||null}function Pd(a,b,c){b.G=a;null===a.i?a.i=[b]:a.i.splice(c,0,b)}function K(a,b){b.G=a;null===a.i?a.i=[b]:a.i.push(b)}
function Qd(a,b){var c=a.i&&a.i[b];return c?(c.G=null,a.i.splice(b,1),0==a.i.length&&(a.i=null),c):null}I.prototype.removeChild=function(a){return Qd(this,J(this).indexOf(a))};function Rd(a,b,c){Od(a,c).G=null;b.G=a;a.i[c]=b}function Sd(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){Sd(a,b,c)})};function Td(){I.call(this);this.qa=Ud++}t(Td,I);var Ud=0;Td.prototype.$=g("qa");function Vd(a,b,c){Td.call(this);this.I=a;this.value=b;this.D=c;this.wc=Ld(Kd(),this.I.K(),this.D);this.Pa=!1;this.dc=b}t(Vd,Td);m=Vd.prototype;m.Ob=function(){var a=new Vd(this.I,this.value,this.D);a.dc=this.dc;a.sd(this.Pa);var b=this.$();a.qa=b;return a};m.lb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.u=function(a){a=null!=a?a:B();a.add(this.I.J());return a};m.sd=ca("Pa");
function Wd(a){var b=!1;a.value instanceof Cd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Cd}):!0);if(!b)throw new D(501);}m.eval=function(a){Wd(this);if("in"==this.D)return Xd(this,a);var b=a.entries.filter(function(a){return this.wc(H(a,this.I),this.value)!=this.Pa},this);return new G(b,a.u())};
m.bind=function(a){if(this.dc instanceof Cd){var b=this.dc.Aa();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ea(this.dc)&&(this.value=this.dc.map(function(b){if(b instanceof Cd){var d=b.Aa();if(a.length<=d)throw new D(510);return a[b.Aa()]}return b}))};function Xd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Pa}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(e,b.u())}
m.toString=function(){return"value_pred("+this.I.m()+" "+this.D+(this.Pa?"(complement)":"")+" "+this.value+")"};m.jd=function(){Wd(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new E(Yd(this,this.value[0]),Yd(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new nd(this.Pa?md(a):a);a=Yd(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new nd(this.Pa?fd(a):[a])};function Yd(a,b){return 2==a.I.K()?b.getTime():b};function Zd(a){this.ca=a;this.Vc=this.Ea=null}function $d(a,b){null===a.Ea&&null!=a.A&&(a.Ea=ae(a.A));return a.Ea.get(b)||null}function ae(a){var b=y();Sd(a,function(a){b.set(a.$(),a)});return b}function be(a,b){b.A&&(a.A=b.A.Ob());a.Vc=b}Zd.prototype.bind=function(){return this};function de(a,b){var c=a.A;null!=c&&Sd(c,function(a){a instanceof Vd&&a.bind(b)})};function ee(a){Zd.call(this,a)}t(ee,Zd);function fe(a){var b="";a.forEach(function(c,d){b+=c.I.m()+" ";b+=1==c.qb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ee.prototype.ea=function(){return B(this.c)};ee.prototype.clone=function(){var a=new ee(this.ca);be(a,this);this.g&&(a.g=this.g.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.M=this.M;this.O&&(a.O=this.O.slice());this.ka&&(a.ka=this.ka.slice());this.Tb&&(a.Tb=this.Tb);this.Zb&&(a.Zb=this.Zb);a.Fb=this.Fb;return a};
ee.prototype.bind=function(a){ee.fb.bind.call(this,a);null!=this.Tb&&(this.W=a[this.Tb.Aa()]);null!=this.Zb&&(this.M=a[this.Zb.Aa()]);de(this,a);return this};function ge(a,b){this.Fa=a;this.ba=b}ge.prototype.$a=g("Fa");ge.prototype.ea=g("ba");function he(a){var b=B();a.forEach(function(a){a.ea().forEach(b.add.bind(b))});return b};function ie(a,b){this.global=a;this.Ma=a.l(gc);this.pd=b.map(function(a){return a.context});this.ef=b.map(function(a){return a.ee});this.Hd=he(this.ef);this.se=je(this);this.cb=x()}function je(a){return a.pd.some(function(a){return!(a instanceof ee)})?1:0}m=ie.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.$a().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.se?void 0:new ad(this.global,this.Hd),c=[],d=this.ef.slice(),e=this.pd;return a().then(function(){return this.Ma.Hb(this.se,C(this.Hd),b).ja()}.bind(this)).then(function(){this.be(c);return c}.bind(this),function(a){null!=b&&b.Mb();throw a;})};m.K=g("se");m.ea=g("Hd");m.Pb=g("cb");m.$=function(){return ka(this)};m.be=ba();function ke(a,b){ie.call(this,a,b);this.Lb=a.l(lc)}t(ke,ie);ke.prototype.getPriority=l(0);ke.prototype.be=function(a){this.pd.forEach(function(b,c){le(this.Lb,b,a[c])},this)};function me(a,b){this.f=a;this.Lb=a.l(lc);this.Ga=a.l(kc);this.fd=new xc(a);this.wb=b;var c=a.l(mc),d=this.wb.map(function(a){return c.table(a.getName())});this.ba=B(d);this.cb=x()}m=me.prototype;m.exec=function(){this.fd.update(this.wb);this.Lc();return w()};m.K=l(1);m.ea=g("ba");m.Pb=g("cb");m.$=function(){return ka(this)};m.getPriority=l(1);m.Lc=function(){var a=ne(this.Lb,this.ba);0!=a.length&&(a=new ke(this.f,a),oe(this.Ga,a))};function pe(a){this.f=a;this.Ma=a.l(gc);this.Ga=a.l(kc)}pe.prototype.$d=function(a){a=new me(this.f,a);oe(this.Ga,a)};function L(a,b){this.ac=a;this.j=b;this.Ua=y()}r("lf.backstore.FirebaseRawBackStore",L);L.prototype.bd=g("j");L.prototype.cd=function(){throw new D(351);};function qe(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.fa}function re(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.fa}
L.prototype.Ca=function(a){return qe(this.j,"@rev/R").then(function(a){this.Oa=a;return qe(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ua.set(d,b[d]),b[d]>c&&(c=b[d]);a.ua().forEach(function(a){this.Ua.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return re(d,b)}.bind(this))};
function se(a,b,c){var d=a.Ua.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.fa}.call(a).then(function(a){a["@rev"]={R:++this.Oa};return re(this.j,a)}.bind(a)):w()}L.prototype.uc=function(a){return se(this,a,l(null)).then(function(){this.Ua.delete(a);return re(this.j.child("@table/"+a),null,!0)}.bind(this))};L.prototype.dropTable=L.prototype.uc;
L.prototype.rc=function(a,b,c){return se(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Oa+1,T:a.T,P:e}}.bind(this))};L.prototype.addTableColumn=L.prototype.rc;L.prototype.vc=function(a,b){return se(this,a,function(a){var d=a.P;delete d[b];return{R:this.Oa+1,T:a.T,P:d}}.bind(this))};L.prototype.dropTableColumn=L.prototype.vc;L.prototype.Kc=function(a,b,c){return se(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Oa+1,T:a.T,P:e}}.bind(this))};L.prototype.renameTableColumn=L.prototype.Kc;
L.prototype.zb=function(){throw new D(351);};L.prototype.createRow=L.prototype.zb;L.prototype.Cc=g("ac");L.prototype.getVersion=L.prototype.Cc;L.prototype.fc=function(a){var b=x();a=this.Ua.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.fa};L.prototype.dump=function(){var a={},b=Rb(this.Ua).map(function(b){return this.fc(b).then(function(d){a[b]=d})}.bind(this));return db(b).then(function(){return a})};
L.prototype.dump=L.prototype.dump;function te(a,b,c){Yb.call(this,b,c);this.j=a}t(te,Yb);te.prototype.J=function(a){return this.j.Ac(a)};
te.prototype.tc=function(){if(0==this.re)return this.S.resolve(),this.S.fa;var a=this.Qa.wb;if(0==a.size)this.S.resolve();else{var b=this.j.Oa+1;this.j.Oa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Ua.get(e);a.wa.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.oa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.za.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.S.resolve():(this.j.Oa=b-1,c=z(a).map(function(a){return ue(this.j,a.getName())},this),
db(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.fa};function ve(){this.ya=y()}function we(a,b){if(0==b.length)return z(a.ya);var c=[];b.forEach(function(a){a=this.ya.get(a)||null;null===a||c.push(a)},a);return c}ve.prototype.getData=g("ya");ve.prototype.get=function(a){return w(we(this,a))};function xe(a,b){b.forEach(function(a){this.ya.set(a.id(),a)},a)}ve.prototype.put=function(a){xe(this,a);return w()};function ye(a,b){0==b.length||b.length==a.ya.size?a.ya.clear():b.forEach(function(a){this.ya.delete(a)},a)}
ve.prototype.remove=function(a){ye(this,a);return w()};function ze(a){return 0==a.ya.size?0:Rb(a.ya).reduce(function(a,c){return a>c?a:c},0)};function Ae(a,b){this.h=a;this.Af=b;this.Jc=y();this.Oa=-1;this.N=y();this.Ua=y();this.Ed=null}m=Ae.prototype;
m.Ca=function(a){this.j=this.Af.child(this.h.name());var b=a||function(){return w()};return qe(this.j,"@db/version").then(function(a){return null===a?re(this.j,Be(this),!0).then(function(){var a=new L(0,this.j);return b(a)}.bind(this)).then(function(){return this.Ca()}.bind(this)):a==this.h.version()?qe(this.j,"@rev/R").then(function(a){this.Oa=a;return qe(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ua.set(b,a[b]);a=this.h.ua().map(function(a){return ue(this,a.getName())},this);
return db(a)}.bind(this)).then(function(){Ce(this);De(this);return w()}.bind(this)):this.ce(a,b).then(function(){return this.Ca()}.bind(this))}.bind(this))};m.ce=function(a,b){var c=new L(a,this.j);return c.Ca(this.h).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return re(a,{version:this.h.version()},!0)}.bind(this))};
function De(a){a.j.off();a.j.on("child_removed",a.qg.bind(a));a.Fd&&(a.Fd.off(),a.Jc.clear());a.Fd=a.j.orderByChild("R").startAt(a.Oa+1);a.Fd.on("value",a.$d.bind(a))}function Ce(a){Tb=z(a.N).map(function(a){return ze(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.qg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=B(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.$d=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Oa&&(this.Oa=b,a=Ee(this,a),a.forEach(function(a){var b=this.N.get(a.getName()),e=Rb(a.za);0<e.length&&ye(b,e);var f=z(a.wa);a.oa.forEach(function(a){f.push(a[1])});xe(b,f)},this),0<a.length&&this.Fc(a),De(this))};
function Ee(a,b){var c=B(),d=y();a.Ua.forEach(function(a,b){var h=this.N.get(b),k=new Zc(b);if(this.Jc.has(a)){var n=C(this.Jc.get(a));n.forEach(function(a){c.add(a)});we(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.N.get(a.getName()),h=this.h.table(a.getName()).kb({id:b,value:h.P});k.getData().has(b)?a.modify([we(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.dg()})}
function ue(a,b){var c=x(),d=a.Ua.get(b),e=a.h.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new ve,k=[];a.forEach(function(a){k.push(e.kb({id:parseInt(a.key(),10),value:a.val().P}))});xe(d,k);this.N.set(b,d);c.resolve()}.bind(a));return c.fa}function Be(a){var b={};b["@db"]={version:a.h.version()};b["@rev"]={R:1};a.Oa=1;b["@table"]={};a.h.ua().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.N.set(e,new ve);this.Ua.set(e,d)},a);return b}
m.Hb=function(a,b,c){return new te(this,a,c)};m.Ac=function(a){var b=this.N.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=ba();m.subscribe=ca("Ed");m.Fc=function(a){null!=this.Ed&&this.Ed(a)};function M(a,b,c,d){this.j=b;this.Wa=c;this.ac=a;this.Tc=d}r("lf.backstore.IndexedDBRawBackStore",M);M.prototype.bd=g("j");M.prototype.getRawDBInstance=M.prototype.bd;M.prototype.cd=g("Wa");M.prototype.getRawTransaction=M.prototype.cd;M.prototype.uc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};M.prototype.dropTable=M.prototype.uc;
function Fe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Wa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ge(a){var b=null;return b=a instanceof ArrayBuffer?Wb(a):a instanceof Date?a.getTime():a}
function He(a,b,c){function d(a){var b=sc(a.value),d=b.o,e;for(e in d){var A=Ub(d[e]);c(A);d[e]=A.Ha()}a.update(b.Ha())}function e(a){var b=Ub(a.value);c(b);a.update(b.Ha())}return Fe(a,b,a.Tc?d:e,ba())}M.prototype.rc=function(a,b,c){var d=Ge(c);return He(this,a,function(a){a.o[b]=d})};M.prototype.addTableColumn=M.prototype.rc;M.prototype.vc=function(a,b){return He(this,a,function(a){delete a.o[b]})};M.prototype.dropTableColumn=M.prototype.vc;
M.prototype.Kc=function(a,b,c){return He(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};M.prototype.renameTableColumn=M.prototype.Kc;function Ie(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Wa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Tc){var e;e=sc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}M.prototype.zb=function(a){var b={},c;for(c in a)b[c]=Ge(a[c]);return Vb(b)};
M.prototype.createRow=M.prototype.zb;M.prototype.Cc=g("ac");M.prototype.getVersion=M.prototype.Cc;M.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.fc(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};M.prototype.dump=M.prototype.dump;M.prototype.fc=function(a){return Ie(this,a).then(function(a){return a.map(function(a){return a.value})})};function Je(a,b){this.Y=a;this.Ib=b}Je.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Ke(this):Le(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Y.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return db(a)};
function Le(a){return new v(function(a,c){var d=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Ib(c.value)),c.continue()):a(d)}.bind(this)},a)}function Ke(a){return new v(function(a,c){var d;try{d=this.Y.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Ib(a)},this);a(c)}.bind(this)},a)}
Je.prototype.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Je.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Ub(function(){return this.Y.put(a.Ha())}.bind(this))},this);return db(a)};
Je.prototype.remove=function(a){return new v(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Ub(function(){return this.Y.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Me(a,b,c,d,e){Yb.call(this,c,e);this.f=a;this.Wa=b;this.Tc=d;this.Wa.oncomplete=this.S.resolve.bind(this.S);this.Wa.onabort=this.S.reject.bind(this.S)}t(Me,Yb);Me.prototype.J=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.Wa.objectStore(a),new tc(a,b,0==c?qa(vc,this.f):wc)):new Je(this.Wa.objectStore(a),b)};Me.prototype.tc=function(){return this.S.fa};function Ne(a,b){this.f=a;this.h=b;this.Bd=b.ff().Nf||!1}m=Ne.prototype;
m.Ca=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.h.name(),this.h.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};f.onupgradeneeded=function(a){Oe(this,c,a).then(ba(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.ke().then(function(b){Tb=b+1;a(this.j)}.bind(this))}.bind(this)},
this)};function Oe(a,b,c){var d=c.target.result;c=new M(c.oldVersion,d,c.target.transaction,a.Bd);Pe(d);a.h.ua().forEach(qa(a.If,d),a);return b(c)}function Pe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.If=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Gb()&&(b.Ba().forEach(function(b){Qe(a,b.m())},this),Qe(a,Re(b)))};function Qe(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Hb=function(a,b,c){b=this.j.transaction(Se(b),0==a?"readonly":"readwrite");return new Me(this.f,b,a,this.Bd,c)};
function Se(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Gb()&&(a.Ba().forEach(function(a){b.add(a.m())}),b.add(Re(a)))});return C(b)}
m.ke=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(aa){d(aa);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.h.ua().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Bd?(a=sc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.Ac=function(){throw new D(511);};m.subscribe=ba();m.Fc=ba();function Te(a,b,c){Yb.call(this,b,c);this.Y=a;0==b&&this.S.resolve()}t(Te,Yb);Te.prototype.J=function(a){return this.Y.Ac(a)};Te.prototype.tc=function(){this.S.resolve();return this.S.fa};function Ue(a){this.h=a;this.N=y()}m=Ue.prototype;m.Ca=function(){this.h.ua().forEach(this.ag,this);return w()};m.Ac=function(a){var b=this.N.get(a)||null;if(null===b)throw new D(101,a);return b};m.Hb=function(a,b,c){return new Te(this,a,c)};function Ve(a,b){if(!a.N.has(b)){var c=new ve;a.N.set(b,c)}}m.ag=function(a){Ve(this,a.getName());a.Gb()&&(a.Ba().forEach(function(a){Ve(this,a.m())},this),Ve(this,Re(a)))};m.close=ba();m.subscribe=ba();m.Fc=ba();function We(a){Ue.call(this,a);this.md=null}t(We,Ue);We.prototype.subscribe=function(a){null===this.md&&(this.md=a)};We.prototype.Fc=function(a){null===this.md||this.md(a)};function Xe(a,b,c){this.Wa=a;this.B=b;this.Ib=c}Xe.prototype.get=function(a){var b=this.Ib;return Ye(this.Wa,"SELECT id, value FROM "+this.B+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Xe.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.B+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ye(this.Wa,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Xe.prototype.remove=function(a){Ye(this.Wa,"DELETE FROM "+this.B+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ze(a,b,c){Yb.call(this,b,c);this.j=a;this.N=y();this.Id=[]}t(Ze,Yb);function $e(a){return a.replace(".","__d__").replace("#","__s__")}Ze.prototype.J=function(a,b){var c=this.N.get(a)||null;null===c&&(c=new Xe(this,$e(a),b),this.N.set(a,c));return c};function Ye(a,b,c,d){var e=x();a.Id.push({Fg:b,ug:c,transform:d,S:e});return e.fa}
Ze.prototype.tc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Id.length?(a=k=this.Id.shift(),b.executeSql(k.Fg,k.ug,e,c)):this.S.resolve(d)}.bind(this);0==this.re?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.S.fa};function N(a,b,c){this.j=c;this.f=a;this.ac=b}r("lf.backstore.WebSqlRawBackStore",N);N.prototype.bd=g("j");N.prototype.getRawDBInstance=N.prototype.bd;N.prototype.cd=function(){throw new D(356);};N.prototype.getRawTransaction=N.prototype.cd;function af(a){return new Ze(a.j,1,new ad(a.f,B()))}N.prototype.uc=function(a){var b=af(this);Ye(b,"DROP TABLE "+a,[]);return b.ja()};N.prototype.dropTable=N.prototype.uc;
N.prototype.fc=function(a){var b=af(this);Ye(b,"SELECT id, value FROM "+a,[]);return b.ja().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function bf(a,b,c){var d=af(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.fc(b).then(function(a){a.forEach(function(a){a=c(a);Ye(d,e,[JSON.stringify(a.value),a.id])});return d.ja()})}
N.prototype.rc=function(a,b,c){var d=Ge(c);return bf(this,a,function(a){a.value[b]=d;return a})};N.prototype.addTableColumn=N.prototype.rc;N.prototype.vc=function(a,b){return bf(this,a,function(a){delete a.value[b];return a})};N.prototype.dropTableColumn=N.prototype.vc;N.prototype.Kc=function(a,b,c){return bf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};N.prototype.renameTableColumn=N.prototype.Kc;N.prototype.zb=function(a){var b={},c;for(c in a)b[c]=Ge(a[c]);return Vb(b)};
N.prototype.createRow=N.prototype.zb;N.prototype.Cc=g("ac");N.prototype.getVersion=N.prototype.Cc;function cf(a){Ye(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
N.prototype.dump=function(){var a=x(),b=af(this);cf(b);var c={};b.ja().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.fc(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.fa};N.prototype.dump=N.prototype.dump;function df(a,b,c){this.f=a;this.h=b;this.Eg=c||1}m=df.prototype;m.Ca=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a){var d=window.openDatabase(this.h.name(),"",this.h.name(),this.Eg);if(null!=d)this.j=d,ef(this,b).then(a,function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function ef(a,b){var c=x(),d=new Ze(a.j,1,new ad(a.f,B()));Ye(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ye(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ja().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.h.version()?this.ce(b,d).then(c.resolve.bind(c)):d>this.h.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.fa}m.Hb=function(a,b,c){if(null!=this.j)return new Ze(this.j,a,c);throw new D(2);};m.close=ba();
m.Ac=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Fc=function(){throw new D(355);};m.ce=function(a,b){var c=x();ff(this).then(function(){a(new N(this.f,b,this.j)).then(function(){return this.ke()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.fa};
function ff(a){var b=a.h.ua(),c=new Ze(a.j,1,new ad(a.f,B())),d=new Ze(a.j,1,new ad(a.f,B()));Ye(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.h.version()]);cf(c);return c.ja().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ye(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Gb&&(a.Ba().forEach(function(a){a=$e(a.m());h.push(a);k.push(a)}),a=$e(Re(a)),h.push(a),n.push(a))});h.forEach(function(a){Ye(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ja()})}m.ke=function(){var a=0,b=x(),c=function(b){var c=new Ze(this.j,0);Ye(c,"SELECT MAX(id) FROM "+b,[]);return c.ja().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.h.ua().map(function(a){return c(a.getName())});db(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.fa};function gf(a){this.aa=y();this.$b=y();a.ua().forEach(function(a){this.$b.set(a.getName(),B())},this)}m=gf.prototype;m.set=function(a,b){this.aa.set(b.id(),b);this.$b.get(a).add(b.id())};m.Xb=function(a,b){var c=this.$b.get(a);b.forEach(function(a){this.aa.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.aa.get(a)||null};function hf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Za=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.$b.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.aa.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.aa.get(b),d.push(c));return d};m.remove=function(a,b){this.aa.delete(b);this.$b.get(a).delete(b)};m.Ng=function(a){return null!=a?this.$b.get(a).size:this.aa.size};m.clear=function(){this.aa.clear();this.$b.clear()};function jf(a,b,c){var d=0,e=a.length;for(c=c||kf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function kf(a,b){return a-b}function mf(a,b,c){c=jf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function nf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function of(){this.ma=0}of.prototype.add=function(a,b){this.ma+=b};of.prototype.remove=function(a,b){this.ma-=b};of.prototype.clear=function(){this.ma=0};function pf(a,b){a.clear();b.forEach(function(a){this.ma+=a.ma},a)};function qf(a,b,c,d){this.B=a;this.Z=b;this.vf=c;this.ub=new of;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=rf(this,d);this.sa=d=sf(d)}else this.clear()}var tf=[];m=qf.prototype;m.getName=g("B");m.toString=function(){return this.sa.toString()};m.add=function(a,b){this.sa=this.sa.Db(a,b)};m.set=function(a,b){this.sa=this.sa.Db(a,b,!0)};m.remove=function(a,b){this.sa=this.sa.remove(a,b)};m.get=function(a){return this.sa.get(a)};
m.Xc=function(a){if(null==a)return this.La().ma;if(a instanceof E){if(gd(a))return this.La().ma;if(kd(a))return this.get(a.c).length}return this.Za([a]).length};m.La=g("ub");m.Pd=function(a,b,c,d){c=Array(a);this.sa.fill({offset:b?this.ub.ma-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Za=function(a,b,c,d){var e=uf(this.sa).b[0];if(!q(e)||0==c)return tf;b=b||!1;c=null!=c?Math.min(c,this.ub.ma):this.ub.ma;d=d||0;var f=Math.min(Math.max(this.ub.ma-d,0),c);if(0==f)return tf;if(!q(a)||1==a.length&&a[0]instanceof E&&gd(a[0]))return this.Pd(f,b,c,d);a=this.Z.rf(a);var h=Array(b?this.ub.ma:f),k={count:0,W:h.length,reverse:b,M:d},n=1<this.ib().Vd();a.forEach(function(a){for(var b=this.Z.qd(a),b=this.Z.Sd(a)?e:b[0],b=this.sa.Uf(b),c=0;null!=b&&k.count<k.W;){if(n){for(var d=b,f=a,Zb=k,
wb=h,Oc=d.w.ib(),ce=-1,Ia=0;Ia<d.b.length;++Ia)if(Oc.Eb(d.b[Ia],f)){ce=Ia;break}if(-1!=ce)for(Ia=ce;Ia<d.b.length&&Zb.count<Zb.W;++Ia)Oc.Eb(d.b[Ia],f)&&vf(d,Zb,wb,Ia)}else b.Za(a,k,h);0!=k.M||b.hd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?nf(h,b,c,d):h};m.clear=function(){this.sa=wf(this);this.ub.clear()};m.jb=function(a){return this.sa.jb(a)};m.min=function(){return this.Kb(this.Z.min.bind(this.Z))};m.max=function(){return this.Kb(this.Z.max.bind(this.Z))};
function xf(a,b,c){if(!a.Z.Jd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.vf?[b.C[c]]:b.C[c]]}m.Kb=function(a){var b;a:{b=uf(this.sa);var c=0;do if(c>=b.b.length)b=b.va,c=0;else{var d=xf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=yf(this.sa);d=c.b.length-1;do if(0>d)c=c.rb,d=0;else{var e=xf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ja=g("vf");m.ib=g("Z");
m.Na=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ha=function(){for(var a=[],b=uf(this.sa);b;)a.push(new Sb(b.qa,[b.b,b.C])),b=b.va;return a};function zf(a,b,c,d){a=new qf(b,a,c);d=Af(d,a);a.sa=d;return a}function Bf(a,b){this.qa=a;this.w=b;this.mb=0;this.va=this.rb=this.G=null;this.b=[];this.C=[];this.i=[];this.Uf=1==b.ib().Vd()?this.Le:this.Ke}function wf(a){return new Bf(Tb++,a)}function P(a){return 0==a.mb}m=Bf.prototype;m.next=g("va");
function Cf(a){function b(a){return null!=a?a.qa.toString():"_"}var c=a.qa+"["+a.b.join("|")+"]",d=a.i.map(function(a){return a.qa}).join("|"),e=a.C.join("/"),f=b(a.rb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.G);a.va&&(a=Cf(a.va),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Cf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i.length&&(a+=this.i[0].toString());return a};function uf(a){return P(a)?a:uf(a.i[0])}function yf(a){return P(a)?a:yf(a.i[a.i.length-1])}
function Df(a,b){b&&(b.rb=a);a&&(a.va=b)}function rf(a,b){for(var c=b.length,d=0,e=wf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.C=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=wf(e.w),Df(e,h),e=h)}return f}function Ef(a){var b=a[0],c=wf(b.w);c.mb=b.mb+1;c.i=a;for(b=0;b<a.length;++b)a[b].G=c,0<b&&c.b.push(a[b].b[0]);return c}
function sf(a){var b=a,c=[];do c.push(b),b=b.va;while(b);if(512>=c.length)b=Ef(c);else{var d=c.length,e=0,b=wf(a.w);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Ef(f);h.G=b;b.i.length&&(b.b.push(f[0].b[0]),Df(b.i[b.i.length-1],h));b.i.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Ff(this,a);if(P(this)){var c=tf;this.w.Na(this.b[b],a)&&(c=c.concat(this.C[b]));return c}b=this.w.Na(this.b[b],a)?b+1:b;return this.i[b].get(a)};
m.jb=function(a){var b=Ff(this,a);return this.w.Na(this.b[b],a)?!0:P(this)?!1:this.i[b].jb(a)};m.remove=function(a,b){Gf(this,a,-1,b);if(null===this.G){var c=this;1==this.i.length&&(c=this.i[0],c.G=null);return c}return this};function Hf(a){return P(a)?a.b[0]:Hf(a.i[0])}function If(a){a.b=[];for(var b=1;b<a.i.length;++b)a.b.push(Hf(a.i[b]))}
function Gf(a,b,c,d){var e=Ff(a,b),f=P(a);if(!f){var h=a.w.Na(a.b[e],b)?e+1:e;if(Gf(a.i[h],b,h,d))If(a);else return!1}else if(!a.w.Na(a.b[e],b))return!1;if(a.b.length>e&&a.w.Na(a.b[e],b)){if(q(d)&&!a.w.Ja()&&f&&(h=a.C[e],d=jf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.w.La().remove(b,1),a.C[e].length))return!1;a.b.splice(e,1);f&&(f=a.w.Ja()?1:a.C[e].length,a.C.splice(e,1),a.w.La().remove(b,f))}if(256>a.b.length&&null!==a.G){a:{b=null;if(a.va&&256<a.va.b.length)b=a.va,e=d=0,f=a.b.length+1;else if(a.rb&&
256<a.rb.b.length)b=a.rb,d=a.rb.b.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.C:a.i;h=null;P(a)?h=b.C:(h=b.i,h[e].G=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(If(b),If(a));b=!0}b||Jf(a,c)}return!0}
function Jf(a,b){var c,d,e;a.va&&511>a.va.b.length?(c=a.va,e=d=0):a.rb&&(c=a.rb,d=c.b.length,e=P(c)?c.C.length:c.i.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.C:(d=a.i,d.forEach(function(a){a.G=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.C:c.i,d);Df(a.rb,a.va);P(c)||If(c);-1!=b&&(a.G.b.splice(b,1),a.G.i.splice(b,1))}
m.Db=function(a,b,c){var d=Ff(this,a);if(P(this)){if(this.w.Na(this.b[d],a)){if(c)this.w.La().remove(a,this.w.Ja()?1:this.C[d].length),this.C[d]=this.w.Ja()?b:[b];else{if(this.w.Ja())throw new D(201);if(!mf(this.C[d],b))throw new D(109);}this.w.La().add(a,1);return this}this.b.splice(d,0,a);this.C.splice(d,0,this.w.Ja()?b:[b]);this.w.La().add(a,1);512==this.b.length?(d=wf(this.w),a=wf(this.w),a.mb=1,a.b=[this.b[256]],a.i=[this,d],a.G=this.G,this.G=a,d.b=this.b.splice(256),d.C=this.C.splice(256),d.G=
a,Df(d,this.va),Df(this,d),d=a):d=this;return d}d=this.w.Na(this.b[d],a)?d+1:d;a=this.i[d].Db(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.i[1].G=this,a.i[0].G=this,this.i.splice(d,1,a.i[1]),this.i.splice(d,0,a.i[0]));return 512==this.b.length?Kf(this):this};function Kf(a){var b=wf(a.w),c=wf(a.w);b.G=a.G;b.mb=a.mb+1;b.b=[a.b[256]];b.i=[a,c];a.b.splice(256,1);c.G=b;c.mb=a.mb;c.b=a.b.splice(256);c.i=a.i.splice(257);c.i.forEach(function(a){a.G=c});a.G=b;Df(c,a.va);Df(a,c);return b}
function Ff(a,b){for(var c=0,d=a.b.length,e=a.w.ib();c<d;){var f=c+d>>1;-1==e.compare(a.b[f],b)?c=f+1:d=f}return c}m.Le=function(a){if(!P(this)){var b=Ff(this,a);this.w.Na(this.b[b],a)&&b++;return this.i[b].Le(a)}return this};m.Ke=function(a){if(!P(this)){var b=Ff(this,a);this.w.Na(this.b[b],a)&&(a.some(function(a){return a==F})||b++);return this.i[b].Ke(a)}return this};
m.Za=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.w.ib(),f=0,h=this.b.length-1,k=this.b,n=d(e.yb(k[f],a)),A=d(e.yb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},aa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.yb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.yb(k[h],a));return 0==n?aa(b,h,n):-1==n?aa(h+1,c,f):aa(b+1,h,n)},vb=function(b,c){if(b>=c)return b;var f=d(e.yb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.yb(k[f],a));return 0==h?vb(f,c):1==h?vb(b,f-1):-1};0!=n&&(f=aa(f+1,h,A));-1!=f&&(h=vb(f,h),-1!=h&&h>=f&&Lf(this,b,c,f,h+1))}};function vf(a,b,c,d){if(a.w.Ja())!b.reverse&&b.M?b.M--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.M?b.M--:c[b.count++]=a.C[d][e]}function Lf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)vf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.w.Ja()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.ne++]=this.C[c][d],a.count--}else if(this.w.Ja())b[a.ne++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.ne++]=this.C[c][d],a.count--;else for(c=0;c<this.i.length&&0<a.count;++c)this.i[c].fill(a,b)};
function Af(a,b){for(var c=b.La(),d=a.map(function(a){var d=new Bf(a.id(),b);d.b=a.o[0];d.C=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ja()?1:d.C[e].length)});return d}),e=0;e<d.length-1;++e)Df(d[e],d[e+1]);return 1<d.length?sf(d[0]):d[0]}m.hd=function(a){return this.w.ib().hd(this.b[0],a)};function Mf(a){this.Wc=0==a?Nf:Of;this.Yd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.de=0==a?Pf:Rf}function Of(a,b){return a>b?1:a<b?-1:0}function Nf(a,b){return Of(b,a)}function Rf(a,b){return ld(a,b)}function Pf(a,b){return ld(b,a)}m=Mf.prototype;m.yb=function(a,b){var c=this.Yd(b),d=[c.c==F,c.s==F];if(!d[0]){var e=this.Wc(a,c.c);d[0]=c.ga?1==e:-1!=e}d[1]||(e=this.Wc(a,c.s),d[1]=c.na?-1==e:1!=e);return d};m.compare=function(a,b){return this.Wc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Eb=function(a,b){var c=this.yb(a,b);return c[0]&&c[1]};m.hd=function(a,b){return this.Eb(a,b)};m.rf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.de(a,c)}.bind(this))};m.Sd=function(a){return this.Yd(a).c==F};m.qd=function(a){a=this.Yd(a);return[a.c,a.s]};m.Jd=function(a){return null!==a};m.Vd=l(1);
m.toString=function(){return this.compare==Nf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Sf(a){Mf.call(this,a);this.Wc=0==a?Tf:Uf}t(Sf,Mf);function Uf(a,b){return null===a?null===b?0:-1:null===b?1:Of(a,b)}function Tf(a,b){return Uf(b,a)}Sf.prototype.Eb=function(a,b){return null===a?gd(b):Sf.fb.Eb.call(this,a,b)};Sf.prototype.Kb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Sf.prototype.min=function(a,b){var c=this.Kb(a,b);null===c&&(c=Sf.fb.min.call(this,a,b));return c};
Sf.prototype.max=function(a,b){var c=this.Kb(a,b);null===c&&(c=Sf.fb.max.call(this,a,b));return c};function Vf(a){this.pa=a.map(function(a){return new Mf(a)})}function Wf(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=Vf.prototype;m.compare=function(a,b){return Wf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return Wf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Wf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.yb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].yb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Eb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Eb(a[d],b[d]);return c};m.hd=function(a,b){return this.pa[0].Eb(a[0],b[0])};
m.rf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].de(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.pa.length&&0==c;++h)c=this.pa[h].de(a[h],b[h]);return c}.bind(this))};m.Sd=function(a){return this.pa[0].Sd(a[0])};
m.qd=function(a){var b=a.map(function(a,b){return this.pa[b].qd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].qd(a)[1]},this);return[b,a]};m.Jd=function(a){return a.every(function(a,c){return this.pa[c].Jd(a)},this)};m.Vd=function(){return this.pa.length};function Xf(a){Vf.call(this,a);this.pa=a.map(function(a){return new Sf(a)})}t(Xf,Vf);function Yf(a){if(1==a.g.length)return new Mf(a.g[0].qb);var b=a.g.map(function(a){return a.qb});return a.g.some(function(a){return a.ca.jc()})?new Xf(b):new Vf(b)};function Zf(a){this.ha=a;this.ob=B();this.Mc=new of;this.ub=new of}m=Zf.prototype;m.getName=function(){return this.ha.getName()};m.add=function(a,b){null===a?(this.ob.add(b),this.Mc.add(a,1)):this.ha.add(a,b)};m.set=function(a,b){null===a?(this.ob.clear(),this.Mc.clear(),this.add(a,b)):this.ha.set(a,b)};m.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Mc.remove(a,1)):(this.ob.clear(),this.Mc.clear()):this.ha.remove(a,b)};m.get=function(a){return null===a?C(this.ob):this.ha.get(a)};m.Xc=function(a){return this.ha.Xc(a)};
m.La=function(){pf(this.ub,[this.ha.La(),this.Mc]);return this.ub};m.Za=function(a,b,c,d){b=this.ha.Za(a,b,c,d);return null!=a?b:b.concat(C(this.ob))};m.clear=function(){this.ob.clear();this.ha.clear()};m.jb=function(a){return null===a?0!=this.ob.size:this.ha.jb(a)};m.min=function(){return this.ha.min()};m.max=function(){return this.ha.max()};m.Ha=function(){return[new Sb(-2,C(this.ob))].concat(this.ha.Ha())};m.ib=function(){return this.ha.ib()};
function $f(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Zf(c);d.forEach(function(a){f.ob.add(a)});return f}m.Ja=function(){return this.ha.Ja()};function ag(a){this.B=a;this.tb=B();this.Z=new Mf(1)}m=ag.prototype;m.getName=g("B");m.add=function(a){if("number"!=typeof a)throw new D(103);this.tb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.tb.delete(a)};m.get=function(a){return this.jb(a)?[a]:[]};m.min=function(){return this.Kb(this.Z.min.bind(this.Z))};m.max=function(){return this.Kb(this.Z.max.bind(this.Z))};
m.Kb=function(a){if(0==this.tb.size)return null;var b=C(this.tb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Xc=function(){return this.tb.size};m.Za=function(a,b,c,d){var e=a||[jd()];a=C(this.tb).filter(function(a){return e.some(function(b){return this.Z.Eb(a,b)},this)},this);return nf(a,b,c,d)};m.clear=function(){this.tb.clear()};m.jb=function(a){return this.tb.has(a)};m.Ha=function(){return[new Sb(0,C(this.tb))]};m.ib=g("Z");
function bg(a,b){var c=new ag(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ja=l(!0);m.La=function(){var a=new of;a.ma=this.tb.size;return a};function cg(a){this.Ma=a.l(gc);this.F=a.l(ic);this.V=a.l(hc)}cg.prototype.Ca=function(a){var b=a.ua(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Gb()?dg(this,a):eg(this,a)).then(c)}.bind(this);return c()};function eg(a,b){var c=a.Ma.Hb(0,[b]),d=c.J(b.getName(),b.kb.bind(b),0).get([]).then(function(a){this.V.Xb(b.getName(),a);fg(this,b,a)}.bind(a));c.ja();return d}
function fg(a,b,c){var d=a.F.nc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})})}function dg(a,b){var c=a.Ma.Hb(0,[b]),d=c.J(b.getName(),b.kb,0).get([]).then(function(a){this.V.Xb(b.getName(),a)}.bind(a)),e=b.Ba().map(function(a){return gg(this,a,c)},a).concat(hg(a,b,c));c.ja();return db(e.concat(d))}
function gg(a,b,c){c=c.J(b.m(),Ub,1);var d=Yf(b);return c.get([]).then(function(a){if(0<a.length){if(ig(b)){var c=zf.bind(void 0,d,b.m(),b.Dc);a=$f(c,a)}else a=zf(d,b.m(),b.Dc,a);this.F.set(b.oc,a)}}.bind(a))}function hg(a,b,c){return c.J(Re(b),Ub,1).get([]).then(function(a){0<a.length&&(a=bg(Re(b),a),this.F.set(b.getName(),a))}.bind(a))};function jg(){this.Y=y();this.nc=y()}jg.prototype.Ca=function(a){a.ua().forEach(function(a){var c=[];this.nc.set(a.getName(),c);var d=Re(a);if(null===this.get(d)){var e=new ag(d);c.push(e);this.Y.set(d,e)}a.Ba().forEach(function(a){var b;b=Yf(a);b=new qf(a.m(),b,a.Dc);b=ig(a)&&1==a.g.length?new Zf(b):b;c.push(b);this.Y.set(a.m(),b)},this)},this);return w()};jg.prototype.get=function(a){return this.Y.get(a)||null};
jg.prototype.set=function(a,b){var c=this.nc.get(a)||null;null===c&&(c=[],this.nc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function kg(a,b){var c=[],d=null,e=null;Sd(a,function(a){var h=b(a);null==a.getParent()?e=h:K(d,h);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(h);d=null===a.i?c[c.length-1]:h});return e}function lg(a){return mg(a,function(a){return null===a.i})}
function ng(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Pd(b,d,c+f)});return{parent:b,children:d}}function og(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function pg(a){var b=Od(a,0);ng(a);og(b,a);return b}
function qg(a,b,c){var d=Od(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;ng(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Qd(d,h);K(k,e);Pd(d,k,h)}});return d}function rg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),Qd(e,a),Pd(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function mg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function sg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Sd(a,function(a){for(var b=0;b<Nd(a);b++)d+="-";d+=c(a)});return d};function tg(a){Td.call(this);this.pb=a;this.Pa=!1}t(tg,Td);m=tg.prototype;m.Ob=function(){return kg(this,function(a){if(a instanceof tg){var b=new tg(a.pb);b.Pa=a.Pa;a=a.$();b.qa=a;return b}return a.Ob()})};m.lb=function(a){var b=a||[];Sd(this,function(a){a!=this&&a.lb(b)}.bind(this));a=B(b);return C(a)};m.u=function(a){var b=null!=a?a:B();Sd(this,function(a){a!=this&&a.u(b)}.bind(this));return b};m.sd=function(a){this.Pa!=a&&(this.Pa=a,this.pb="and"==this.pb?"or":"and",J(this).forEach(function(b){return b.sd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return ug(this,b)};function ug(a,b){return"and"==a.pb?ud(b):vd(b)}m.toString=function(){return"combined_pred_"+this.pb.toString()};m.qe=function(){if("or"==this.pb){var a=new nd;J(this).forEach(function(b){b=b.qe().Cb();a.add(b)});return a}return new nd};m.jd=function(){return"or"==this.pb?vg(this):!1};
function vg(a){var b=null;return J(a).every(function(a){if(!(a instanceof Vd&&a.jd()))return!1;null===b&&(b=a.I);return b.m()==a.I.m()})};function wg(a,b,c){Td.call(this);this.ia=a;this.la=b;this.D=c;this.Zd=null;a=Kd();this.wc=Ld(a,this.ia.K(),this.D);this.gg=a.Ve.get(this.ia.K())||null}t(wg,Td);m=wg.prototype;m.Ob=function(){var a=new wg(this.ia,this.la,this.D),b=this.$();a.qa=b;return a};m.lb=function(a){return null!=a?(a.push(this.ia),a.push(this.la),a):[this.ia,this.la]};m.u=function(a){a=null!=a?a:B();a.add(this.ia.J());a.add(this.la.J());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new wg(this.la,this.ia,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ia);a=H(a,this.la);return this.wc(b,a)},this);return new G(b,a.u())};m.toString=function(){return"join_pred("+this.ia.m()+" "+this.D+" "+this.la.m()+")"};
function xg(a,b,c){var d=null,e=null;-1!=b.u().indexOf(zd(a.ia.J()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ia;a.ia=a.la;a.la=b;b=a.D;switch(a.D){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.D=b;a.wc=Ld(Kd(),a.ia.K(),a.D)}return[e,d]}return[d,e]}function yg(a){var b={};a.lb().forEach(function(a){b[a.getName()]=null});return b}
function zg(a,b,c){null===a.Zd&&(a.Zd=yg(a.la.J()));var d=new xd(new Sb(-1,a.Zd),!1);return Bd(b,c,d,[zd(a.la.J())])}
function Ag(a,b,c,d){var e=[b,c];d||(e=xg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ia,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ia);var n=new Ic,A=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var O=e.u(),aa=f.u();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Bd(a,aa,b,O);A.push(b)}):d&&A.push(zg(this,a,aa))}.bind(a));a=b.u().concat(c.u());return new G(A,a)}
function Bg(a,b,c,d,e){function f(a,b){var c=new xd(b,1<O.length),c=Bd(a,aa,c,O);A.push(c)}var h=d.Yf.J(),k=b,n=c;-1!=b.u().indexOf(zd(h))&&(k=c,n=b);var A=[],O=n.u(),aa=k.u();k.entries.forEach(function(a){var b=this.gg(H(a,d.ng)),b=d.index.get(b);0!=b.length&&(d.index.Ja()?f(a,e.get(b[0])):hf(e,b).forEach(f.bind(null,a)))},a);a=k.u().concat(n.u());return new G(A,a)};function Cg(a,b,c){return null===b?new Vd(a,b,c):q(b.m)?new wg(a,b,c):new Vd(a,b,c)};var Dg={};r("lf.schema.DataStoreType",Dg);Dg.INDEXED_DB=0;Dg.MEMORY=1;Dg.LOCAL_STORAGE=2;Dg.FIREBASE=3;Dg.WEB_SQL=4;Dg.OBSERVABLE_STORE=5;function Eg(a,b,c,d){this.oc=a;this.name=b;this.Dc=c;this.g=d}Eg.prototype.m=function(){return this.oc+"."+this.name};function ig(a){return a.g.some(function(a){return a.ca.jc()})}function Q(a,b,c,d){this.B=a;this.ra=c;this.L=b;this.od=d;this.gb=null}r("lf.schema.Table",Q);Q.prototype.getName=g("B");Q.prototype.getName=Q.prototype.getName;Q.prototype.Ya=g("gb");
function zd(a){return a.gb||a.B}Q.prototype.sc=function(a){var b=new this.constructor(this.B);b.gb=a;b.zg=this.zg;return b};Q.prototype.as=Q.prototype.sc;Q.prototype.createRow=Q.prototype.zb;Q.prototype.deserializeRow=Q.prototype.kb;Q.prototype.Ba=g("ra");Q.prototype.getIndices=Q.prototype.Ba;Q.prototype.lb=g("L");Q.prototype.getColumns=Q.prototype.lb;Q.prototype.getConstraint=Q.prototype.Jb;Q.prototype.Gb=g("od");Q.prototype.persistentIndex=Q.prototype.Gb;function Re(a){return a.B+".#"};function R(a,b){this.child=a;this.Nb=b;this.gb=null}m=R.prototype;m.getName=function(){return this.Nb+"("+this.child.getName()+")"};m.m=function(){return this.Nb+"("+this.child.m()+")"};m.J=function(){return this.child.J()};m.toString=function(){return this.m()};m.K=function(){return this.child.K()};m.Ya=g("gb");m.Ba=function(){return[]};m.Aa=l(null);m.jc=l(!1);m.sc=function(a){this.gb=a;return this};R.prototype.as=R.prototype.sc;
function Fg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Gg(a){this.gb=a||null;this.U=new Q("#UnknownTable",[],[],!1)}m=Gg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.J=g("U");m.K=l(4);m.Ya=g("gb");m.Ba=function(){return[]};m.Aa=l(null);m.jc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function Hg(a){return new R(a||new Gg,"COUNT")}r("lf.fn.count",Hg);function Ig(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",Ig);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Pf=b}t(S,I);S.prototype.exec=function(a,b){switch(this.Pf){case 1:return Jg(this,a,b);case 0:return Kg(this,a,b);default:return Lg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Nc=function(){return this.toString()};function Lg(a,b,c){return new v(function(a){a(this.da([],b,c))}.bind(a))}function Jg(a,b,c){return Od(a,0).exec(b,c).then(function(a){return this.da(a,b,c)}.bind(a))}
function Kg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.da(d,b,c)}.bind(a))};function Mg(a){S.call(this,0,1);this.ze=a}t(Mg,S);Mg.prototype.toString=function(){return"aggregation("+this.ze.map(function(a){return a.m()}).toString()+")"};Mg.prototype.da=function(a){a.forEach(function(a){Ng(new Og(a,this.ze))},this);return a};function Og(a,b){this.Ka=a;this.L=b}
function Ng(a){a.L.forEach(function(a){a=Fg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Fg(d).slice(-1)[0],f=d.child instanceof R?rd(this.Ka,d.child):this.Ka;if(null!==f.Xa&&f.Xa.has(d.m()))break;f=Pg(d.Nb,f,e);e=this.Ka;null===e.Xa&&(e.Xa=y());e.Xa.set(d.m(),f)}},a)}
function Pg(a,b,c){var d=null;switch(a){case "MIN":d=Qg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Qg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Rg(b,c);break;case "COUNT":d=Sg(b,c);break;case "SUM":d=Tg(b,c);break;case "AVG":a=Sg(b,c);0<a&&(d=Tg(b,c)/a);break;case "GEOMEAN":d=Ug(b,c);break;default:d=Vg(b,c)}return d}function Qg(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Sg(a,b){return b instanceof Gg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(H(d,b))?0:1)},0)}function Tg(a,b){return Qg(a,b,function(a,b){return b+a})}function Vg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function Ug(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Rg(a,b){var c=y();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new G(z(c),a.u())};function Wg(a,b){this.Fa=a;this.ba=b}Wg.prototype.$a=g("Fa");Wg.prototype.ea=g("ba");function Xg(){I.call(this)}t(Xg,I);function Yg(a,b){I.call(this);this.table=a;this.values=b}t(Yg,Xg);function Zg(a,b){Yg.call(this,a,b)}t(Zg,Yg);function $g(a){I.call(this);this.table=a}t($g,Xg);$g.prototype.toString=function(){return"delete("+this.table.getName()+")"};function ah(a,b){I.call(this);this.table=a;this.te=b}t(ah,Xg);
ah.prototype.toString=function(){var a=[];this.te&&(a=this.te.map(function(a){return a.I.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function bh(a){I.call(this);this.X=a}t(bh,Xg);bh.prototype.toString=function(){return"select("+this.X.toString()+")"};function ch(a){I.call(this);this.table=a}t(ch,Xg);ch.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};
function dh(){I.call(this)}t(dh,Xg);dh.prototype.toString=l("cross_product");function eh(a,b){I.call(this);this.g=a;this.Qb=b}t(eh,Xg);eh.prototype.toString=function(){var a="project("+this.g.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function fh(a){I.call(this);this.O=a}t(fh,Xg);fh.prototype.toString=function(){return"order_by("+fe(this.O)+")"};function gh(a){I.call(this);this.g=a}t(gh,Xg);
gh.prototype.toString=function(){return"aggregation("+this.g.toString()+")"};function hh(a){I.call(this);this.g=a}t(hh,Xg);hh.prototype.toString=function(){return"group_by("+this.g.toString()+")"};function ih(a){I.call(this);this.W=a}t(ih,Xg);ih.prototype.toString=function(){return"limit("+this.W+")"};function jh(a){I.call(this);this.M=a}t(jh,Xg);jh.prototype.toString=function(){return"skip("+this.M+")"};function kh(a,b){I.call(this);this.X=a;this.Sb=b}t(kh,Xg);
kh.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", "+this.X.toString()+")"};function lh(){};function mh(){}t(mh,lh);mh.prototype.eb=function(a){this.H=a;this.Va(this.H);return this.H};mh.prototype.Va=function(a){if(a instanceof bh){var b=nh(this,a.X),b=oh(this,b);rg(a,a,b[0],b[1]);a==this.H&&(this.H=b[0]);a=b[0]}J(a).forEach(function(a){this.Va(a)},this)};function nh(a,b){if(0==J(b).length||"and"!=b.pb)return[b];var c=J(b).slice().map(function(a){b.removeChild(a);return nh(this,a)},a);return Ea(c)}
function oh(a,b){var c=null,d=null;b.map(function(a,b){var h=new bh(a);0==b?c=h:K(d,h);d=h},a);return[c,d]};function ph(){}t(ph,lh);ph.prototype.eb=function(a,b){if(3>b.c.length)return a;this.H=a;this.Va(this.H);return this.H};ph.prototype.Va=function(a){if(a instanceof dh)for(;2<J(a).length;){for(var b=new dh,c=0;2>c;c++){var d=Qd(a,0);K(b,d)}Pd(a,b,0)}J(a).forEach(function(a){this.Va(a)},this)};function qh(){S.call(this,0,0)}t(qh,S);qh.prototype.toString=l("cross_product");qh.prototype.da=function(a){var b=a[0],c=a[1];a=[];for(var d=b.u(),e=c.u(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Bd(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.u().concat(c.u());return[new G(a,b)]};function rh(a,b){ie.call(this,a,b);this.Ga=a.l(kc);this.Lb=a.l(lc)}t(rh,ie);rh.prototype.getPriority=l(2);rh.prototype.be=function(a){0==this.K()?sh(this,a):this.Lc()};function sh(a,b){a.pd.forEach(function(a,d){a instanceof ee&&le(this.Lb,a,b[d])},a)}rh.prototype.Lc=function(){var a=ne(this.Lb,this.ea());0!=a.length&&(a=new ke(this.global,a),oe(this.Ga,a))};function th(a){Zd.call(this,a)}t(th,Zd);th.prototype.ea=function(){var a=B();a.add(this.c);uh(this,this.c.getName(),a);return a};function uh(a,b,c){var d=vh(a.ca.info(),b,1);vh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){uh(this,a.getName(),c)},a)}th.prototype.clone=function(){var a=new th(this.ca);be(a,this);a.c=this.c;return a};th.prototype.bind=function(a){th.fb.bind.call(this,a);de(this,a);return this};function wh(a){Zd.call(this,a)}t(wh,Zd);wh.prototype.ea=function(){var a=B();a.add(this.Ia);var b=this.ca.info();xh(this.Ia.getName(),b.cf).forEach(a.add.bind(a));this.bc&&vh(b,this.Ia.getName()).forEach(a.add.bind(a));return a};wh.prototype.clone=function(){var a=new wh(this.ca);be(a,this);a.Ia=this.Ia;this.values&&(a.values=this.values instanceof Cd?this.values:this.values.slice());a.bc=this.bc;a.cc=this.cc;return a};
wh.prototype.bind=function(a){wh.fb.bind.call(this,a);this.cc&&(this.values=this.cc instanceof Cd?a[this.cc.Aa()]:this.cc.map(function(b){return b instanceof Cd?a[b.Aa()]:b}));return this};function yh(a){Zd.call(this,a)}t(yh,Zd);yh.prototype.ea=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.m()}),c=this.ca.info();zh(c,b).forEach(a.add.bind(a));Ah(c,b).forEach(a.add.bind(a));return a};yh.prototype.clone=function(){var a=new yh(this.ca);be(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};yh.prototype.bind=function(a){yh.fb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});de(this,a);return this};function Bh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Wb(b)+"'";default:return"'"+b.toString()+"'"}}function Ch(a,b){var c=a.bc?"INSERT OR REPLACE":"INSERT",d=a.Ia.lb(),c=c+(" INTO "+a.Ia.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Bh(c.K(),d)});return c+f.join(", ")+");"}).join("\n")}
function Dh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Eh(a,b,c,d){return a instanceof Cd?"?"+a.Aa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Bh(c,a)}).join(", ")+")":"between"==b?Bh(c,a[0])+" AND "+Bh(c,a[1]):Bh(c,a).toString()}
function Fh(a,b){return J(a).map(function(a){return"("+Gh(a,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function Hh(a){return[a.ia.m(),Dh(a.D),a.la.m()].join(" ")}function Gh(a,b){if(a instanceof Vd){var c=a.I.m(),d=Dh(a.D),e=Eh(a.value,a.D,a.I.K(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof tg)return Fh(a,b);if(a instanceof wg)return Hh(a);throw new D(357,typeof a);}
function Ih(a,b){var c=Gh(a,b);return c?" WHERE "+c:""}function Jh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.I.m()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+Bh(a.I.K(),a.value).toString()}).join(", ");a.A&&(c+=Ih(a.A,b));return c+";"}
function Kh(a,b){var c="*";a.g.length&&(c=a.g.map(function(a){return a.Ya()?a.m()+" AS "+a.Ya():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Fb&&0!=a.Fb.size?c+=Lh(a,b):(c+=a.c.map(Mh).join(", "),a.A&&(c+=Ih(a.A,b)));if(a.O)var d=a.O.map(function(a){return a.I.m()+(0==a.qb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ka&&(d=a.ka.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function Mh(a){return zd(a)!=a.getName()?a.getName()+" AS "+zd(a):a.getName()}function Lh(a,b){for(var c=mg(a.A,function(a){return a instanceof wg}),d=c.map(Hh),e=Mh(a.c[0]),f=1;f<a.c.length;f++)var h=Mh(a.c[f]),e=a.Fb.has(c[d.length-f].$())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Od(a.A,0);c instanceof wg||(e+=" WHERE "+Gh(c,b));return e}
function Nh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof wh)return Ch(d,c);if(d instanceof th){var e="DELETE FROM "+d.c.getName();d.A&&(e+=Ih(d.A,c));return e+";"}if(d instanceof yh)return Jh(d,c);if(d instanceof ee)return Kh(d,c);throw new D(358,typeof d);};function T(a,b){this.global=a;this.yg=a.l(jc);this.Ga=a.l(kc);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.hb()}catch(a){return ab(a)}return new v(function(a,b){var c=new rh(this.global,[this.Bc()]);oe(this.Ga,c).then(function(b){a(pd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Rf=function(){var a=function(a){return a.Nc(this.a)+"\n"}.bind(this);return sg(Oh(this).$a(),a)};T.prototype.explain=T.prototype.Rf;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Gg=function(a){return Nh(this,a)};T.prototype.toSql=T.prototype.Gg;T.prototype.hb=ba();function Oh(a){if(null==a.df){var b;b=a.yg;var c=a.a,d=b.jg.create(c);b=b.vg.create(d,c);a.df=b}return a.df}T.prototype.Bc=function(){return{context:this.a.clone(),ee:Oh(this)}};function Ph(a){T.call(this,a,new th(a.l(mc)))}t(Ph,T);r("lf.query.DeleteBuilder",Ph);Ph.prototype.c=function(a){if(null!=this.a.c)throw new D(515);this.a.c=a;return this};Ph.prototype.from=Ph.prototype.c;Ph.prototype.A=function(a){this.Ad();this.a.A=a;return this};Ph.prototype.where=Ph.prototype.A;Ph.prototype.Ad=function(){if(null==this.a.c)throw new D(548);if(null!=this.a.A)throw new D(516);};Ph.prototype.hb=function(){Ph.fb.hb.call(this);if(null==this.a.c)throw new D(517);};function Qh(a,b){T.call(this,a,new wh(a.l(mc)));this.a.bc=b||!1}t(Qh,T);r("lf.query.InsertBuilder",Qh);Qh.prototype.hb=function(){Qh.fb.hb.call(this);var a=this.a;if(null==a.Ia||null==a.values)throw new D(518);if(a.bc&&null===a.Ia.Jb().ad())throw new D(519);};Qh.prototype.Ia=function(a){if(null!=this.a.Ia)throw new D(520);this.a.Ia=a;return this};Qh.prototype.into=Qh.prototype.Ia;
Qh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof Cd||a.some(function(a){return a instanceof Cd})?this.a.cc=a:this.a.values=a;return this};Qh.prototype.values=Qh.prototype.values;function Rh(a){return Sh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Rh);r("lf.op.or",function(a){return Sh("or",Array.prototype.slice.call(arguments))});function Sh(a,b){var c=new tg(a);b.forEach(function(a){K(c,a)});return c}r("lf.op.not",function(a){a.sd(!0);return a});function U(a,b){T.call(this,a,new ee(a.l(mc)));this.Je=this.vd=!1;this.a.g=b;Th(this);Uh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.hb=function(){U.fb.hb.call(this);var a=this.a;if(null==a.c)throw new D(522);if(q(a.Tb)&&!q(a.W)||q(a.Zb)&&!q(a.M))throw new D(523);null!=this.a.ka?Vh(this):Wh(this)};function Th(a){var b=a.a.g.filter(function(a){return a instanceof R&&"DISTINCT"==a.Nb},a);if(0!=b.length&&(1!=b.length||1!=a.a.g.length))throw new D(524);}
function Vh(a){var b=a.a.g.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ka.length||0==a.a.g.length)c=!0;else{var d=a.a.ka.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ka.some(function(a){a=a.K();return 6==a||0==a}))}if(c)throw new D(525);}function Wh(a){var b=a.a.g.some(function(a){return a instanceof R},a);a=a.a.g.some(function(a){return!(a instanceof R)},a)||0==a.a.g.length;if(b&&a)throw new D(526);}
function Uh(a){a.a.g.forEach(function(a){if(a instanceof R&&!Xh(a.Nb,a.K()))throw new D(527,a.m());},a)}function Yh(a,b){if(null==a.a.c)throw new D(b);}U.prototype.c=function(a){if(this.Je)throw new D(515);this.Je=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.c;U.prototype.A=function(a){Yh(this,548);if(this.vd)throw new D(516);this.vd=!0;Zh(this,a);return this};U.prototype.where=U.prototype.A;
function Zh(a,b){if(null!=a.a.A){var c=Rh(b,a.a.A);a.a.A=c}else a.a.A=b}U.prototype.bg=function(a,b){Yh(this,542);if(this.vd)throw new D(547);this.a.c.push(a);Zh(this,b);return this};U.prototype.innerJoin=U.prototype.bg;U.prototype.hg=function(a,b){Yh(this,542);if(!(b instanceof wg))throw new D(541);if(this.vd)throw new D(547);this.a.c.push(a);null==this.a.Fb&&(this.a.Fb=B());var c=b;zd(a)!=zd(b.la.J())&&(c=b.reverse());this.a.Fb.add(c.$());Zh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.hg;
U.prototype.W=function(a){if(null!=(this.a.W||this.a.Tb))throw new D(528);if(a instanceof Cd)this.a.Tb=a;else{if(0>a)throw new D(531);this.a.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.M=function(a){if(null!=(this.a.M||this.a.Zb))throw new D(529);if(a instanceof Cd)this.a.Zb=a;else{if(0>a)throw new D(531);this.a.M=a}return this};U.prototype.skip=U.prototype.M;U.prototype.O=function(a,b){Yh(this,549);null==this.a.O&&(this.a.O=[]);this.a.O.push({I:a,qb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.O;U.prototype.ka=function(a){Yh(this,549);if(null!=this.a.ka)throw new D(530);null==this.a.ka&&(this.a.ka=[]);this.a.ka.push.apply(this.a.ka,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ka;function Xh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.g);a.a=this.a.clone();a.a.Vc=null;return a};U.prototype.clone=U.prototype.clone;function $h(a,b){T.call(this,a,new yh(a.l(mc)));this.a.table=b}t($h,T);r("lf.query.UpdateBuilder",$h);$h.prototype.set=function(a,b){var c={Sc:b instanceof Cd?b.Aa():-1,I:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};$h.prototype.set=$h.prototype.set;$h.prototype.A=function(a){this.Ad();this.a.A=a;return this};$h.prototype.where=$h.prototype.A;$h.prototype.Ad=function(){if(null!=this.a.A)throw new D(516);};
$h.prototype.hb=function(){$h.fb.hb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof Cd}))throw new D(501);};function ai(a){this.a=a;this.Fa=null}ai.prototype.ic=function(){null===this.Fa&&(this.Fa=this.Zc());return this.Fa};function bi(a){ai.call(this,a)}t(bi,ai);bi.prototype.Zc=function(){return this.a.bc?new Zg(this.a.Ia,this.a.values):new Yg(this.a.Ia,this.a.values)};function ci(a){ai.call(this,a)}t(ci,ai);ci.prototype.Zc=function(){var a=new ah(this.a.table,this.a.set),b=null!=this.a.A?new bh(this.a.A.Ob()):null,c=new ch(this.a.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function di(a,b,c){this.Fa=a;this.fe=b;this.Wb=c}di.prototype.ic=function(){this.Wb.forEach(function(a){this.Fa=a.eb(this.Fa,this.fe)},this);return this.Fa};function ei(a,b){ai.call(this,a);this.Wb=b}t(ei,ai);ei.prototype.Zc=function(){var a=new $g(this.a.c),b=null!=this.a.A?new bh(this.a.A.Ob()):null,c=new ch(this.a.c);null===b?K(a,c):(K(b,c),K(a,b));return(new di(a,this.a,this.Wb)).ic()};function fi(){}t(fi,lh);fi.prototype.eb=function(a,b){if(2>b.c.length)return a;this.H=a;this.Va(this.H,b);return this.H};fi.prototype.Va=function(a,b){if(a instanceof bh&&a.X instanceof wg){var c=a.X.$(),d=Od(a,0);d instanceof dh&&(c=null!=b.Fb&&b.Fb.has(c),c=new kh(a.X,c),rg(a,d,c,c),a==this.H&&(this.H=c),a=c)}J(a).forEach(function(a){this.Va(a,b)},this)};function gi(){this.Rc=B()}t(gi,lh);gi.prototype.eb=function(a,b){if(!q(b.A))return a;this.Rc.clear();this.H=a;this.Va(this.H);this.Rc.clear();return this.H};gi.prototype.Va=function(a){if(a instanceof bh){var b=a.X.u(),c=function(a){return hi(this,a,b)}.bind(this),c=ii(this,a,c);this.Rc.add(a);c==a&&(c=Od(a,0));null!==c&&(fa(c.getParent())&&(this.H=c),c instanceof bh&&!this.Rc.has(c)&&this.Va(c))}else J(a).forEach(function(a){this.Va(a)},this)};
function ii(a,b,c){var d=b;if(Od(b,0)instanceof bh)d=pg(b),ii(a,b,c);else if(ji(b)){var e=[],d=qg(b,c,function(a){a=new bh(a.X);e.push(a);return a});e.forEach(function(a){ii(this,a,c)},a)}return d}function hi(a,b,c){var d=B();lg(b).forEach(function(a){d.add(a.table)},a);b instanceof ch&&d.add(b.table);return nc(d,c)}function ji(a){a=Od(a,0);return a instanceof dh||a instanceof kh};function ki(a,b){ai.call(this,a);this.Wb=b;this.hf=this.Ze=this.qf=this.bf=this.Ae=this.Oe=this.pf=this.Ge=this.sf=null}t(ki,ai);
ki.prototype.Zc=function(){li(this);2<=this.a.c.length&&(this.Ge=new dh);this.pf=null!=this.a.A?new bh(this.a.A.Ob()):null;this.a.O&&(this.bf=new fh(this.a.O));null!=this.a.M&&0<this.a.M&&(this.qf=new jh(this.a.M));null!=this.a.W&&(this.Ze=new ih(this.a.W));null!=this.a.ka&&(this.Oe=new hh(this.a.ka));mi(this);this.hf=new eh(this.a.g||[],this.a.ka||null);var a=ni(this);return(new di(a,this.a,this.Wb)).ic()};
function ni(a){for(var b=[a.Ze,a.qf,a.hf,a.bf,a.Ae,a.Oe,a.pf,a.Ge],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.sf.forEach(function(a){K(b[c],a)});return d}function li(a){a.sf=a.a.c.map(function(a){return new ch(a)},a)}function mi(a){var b=a.a.g.filter(function(a){return a instanceof R});null!=a.a.O&&a.a.O.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.Ae=new gh(b))};function oi(){this.le=[new mh,new ph,new gi,new fi];this.Kd=[new mh]}oi.prototype.create=function(a){var b=null;if(a instanceof wh)b=new bi(a);else if(a instanceof th)b=new ei(a,this.Kd);else if(a instanceof ee)b=new ki(a,this.le);else if(a instanceof yh)b=new ci(a);else throw new D(513);b=b.ic();return new Wg(b,a.ea())};function pi(a){S.call(this,0,1);this.U=a}t(pi,S);pi.prototype.toString=function(){return"delete("+this.U.getName()+")"};pi.prototype.da=function(a,b){var c=a[0].entries.map(function(a){return a.ta});b.remove(this.U,c);return[td()]};function qi(a,b){S.call(this,0,-1);this.table=b;this.F=a.l(ic)}t(qi,S);qi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};qi.prototype.da=function(){var a=this.F.get(Re(this.table)),b=new G([],[this.table.getName()]),c=Hg(),a=a.La().ma;null===b.Xa&&(b.Xa=y());b.Xa.set(c.m(),a);return[b]};function ri(a,b){S.call(this,0,-1);this.V=a.l(hc);this.F=a.l(ic);this.table=b}t(ri,S);ri.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};ri.prototype.da=function(){var a=this.F.get(Re(this.table)).Za();return[wd(hf(this.V,a),[zd(this.table)])]};function si(a){this.f=a}t(si,lh);si.prototype.eb=function(a,b){this.H=a;if(!this.Cd(b))return a;var c=mg(a,function(a){return a instanceof ri})[0],d=new qi(this.f,c.table);rg(c,c,d,d);return this.H};si.prototype.Cd=function(a){return 1==a.g.length&&1==a.c.length&&null==a.A&&null==a.W&&null==a.M&&null==a.ka?(a=a.g[0],a instanceof R&&"COUNT"==a.Nb&&a.child instanceof Gg):!1};function ti(a){S.call(this,0,1);this.Ne=a}t(ti,S);ti.prototype.toString=function(){return"groupBy("+this.Ne.map(function(a){return a.m()}).toString()+")"};ti.prototype.da=function(a){return ui(this,a[0])};function ui(a,b){var c=new Ic,d=function(a){return this.Ne.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.u())},a)};function vi(a,b,c){S.call(this,0,0);this.F=a.l(ic);this.V=a.l(hc);this.X=b;this.Sb=c;this.yd="eq"==this.X.D?0:2;this.Qe=null}t(vi,S);var wi=["hash","index_nested_loop","nested_loop"];vi.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", impl: "+wi[this.yd]+", "+this.X.toString()+")"};
vi.prototype.da=function(a){switch(this.yd){case 0:return[Ag(this.X,a[0],a[1],this.Sb)];case 1:return[Bg(this.X,a[0],a[1],this.Qe,this.V)];default:var b=this.X,c=a[0];a=a[1];var d=this.Sb,e=[c,a];d||(e=xg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.u(),h=a.u(),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var aa=0;aa<k;aa++){var vb=!1,Qf=H(c.entries[aa],b.ia);if(null!==Qf)for(var Zb=Math.min(O+1<<8,n),wb=O<<8;wb<Zb;wb++)if(b.wc(Qf,H(a.entries[wb],b.la))){var vb=!0,Oc=Bd(c.entries[aa],
f,a.entries[wb],h);e.push(Oc)}d&&!vb&&e.push(zg(b,c.entries[aa],f))}O++}b=c.u().concat(a.u());return[new G(e,b)]}};function xi(a,b){a.yd=1;var c=a.F.get(b.Aa().m());a.Qe={Yf:b,ng:b==a.X.ia?a.X.la:a.X.ia,index:c}};function yi(a){S.call(this,0,-1);this.jf=a}t(yi,S);yi.prototype.toString=function(){return"no_op_step("+this.jf[0].u().join(",")+")"};yi.prototype.da=g("jf");function zi(){}t(zi,lh);zi.prototype.eb=function(a,b){this.H=a;if(!this.Cd(b))return a;mg(a,function(a){return a instanceof vi}).forEach(this.xg,this);return this.H};zi.prototype.Cd=function(a){return 1<a.c.length};
zi.prototype.xg=function(a){if("eq"==a.X.D&&!a.Sb){var b=function(b){if(!(b instanceof ri))return null;b=zd(b.table)==zd(a.X.la.J())?a.X.la:a.X.ia;return fa(b.Aa())?null:b},c=b(Od(a,0)),b=b(Od(a,1));if(null!==c||null!==b){b=null===b?c:b;xi(a,b);var d=new G([],[zd(b.J())]);Rd(a,new yi([d]),b==c?0:1)}}};function Ai(a){a=a.map(function(a){return a.Cb()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Bi(a){this.Rb=a}Bi.prototype.$c=function(){return 1==this.Rb.g.length?[jd()]:[this.Rb.g.map(function(){return jd()})]};function Ci(a,b){this.Rb=a;this.Ea=b;this.Gd=this.Xe=null}
function Di(a,b){var c=y();a.Ea.keys().forEach(function(a){var e=this.Ea.get(a).map(function(a){return $d(b,a)},this),f=new nd([jd()]);e.forEach(function(a){f=od(f,a.qe())});c.set(a,f)},a);return c}Ci.prototype.$c=function(a){if(this.Xe==a)return this.Gd;for(var b=Di(this,a),c=this.Rb.g.length-1;0<=c;c--){var d=this.Rb.g[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new nd([jd()]))}this.Gd=1==this.Rb.g.length?z(b)[0].Cb():Ai(Ei(this,b));this.Xe=a;return this.Gd};
function Ei(a,b){var c=y(),d=0;a.Rb.g.forEach(function(a){c.set(a.ca.getName(),d);d++});return Rb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Fi(a,b){this.td=b;this.F=a.l(ic)}function Gi(a){a=a.F.get(Re(a.td));return Math.floor(.02*a.La().ma)}function Hi(a,b,c){c=c.filter(a.cg,a);if(0==c.length)return null;a=Ii(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ji(c,b);return h<d?(d=h,c):a},null)}
function Ii(a,b){return a.td.Ba().map(function(a){a=new Ki(this.F,a);Li(a,b);return a},a).filter(function(a){if(null===a.Ea)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ab.g.length;f++){var h=a.Ea.has(a.ab.g[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Fi.prototype.cg=function(a){return a instanceof Vd?!a.jd()||a.I.J()!=this.td||"in"==a.D&&a.value.length>Gi(this)?!1:!0:a instanceof tg?a.jd()&&Od(a,0).I.J()==this.td?J(a).length<=Gi(this):!1:!1};
function Ki(a,b){this.F=a;this.ab=b;this.Zf=B(this.ab.g.map(function(a){return a.ca.getName()}));this.Wd=this.Ea=null}function Mi(a){null===a.Wd&&(a.Wd=new Ci(a.ab,a.Ea));return a.Wd}function Li(a,b){b.forEach(function(a){var b=a.lb()[0].getName();this.Zf.has(b)&&(null===this.Ea&&(this.Ea=new Ic),this.Ea.set(b,a.$()))},a)}function Ji(a,b){var c=Mi(a).$c(b),d=a.F.get(a.ab.m());return c.reduce(function(a,b){return a+d.Xc(b)},0)};function Ni(a,b,c,d){S.call(this,0,-1);this.F=a.l(ic);this.index=b;this.We=c;this.je=d;this.Qc=this.Pc=!1}t(Ni,S);Ni.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.je?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};Ni.prototype.Nc=function(a){var b=this.toString(),c=this.We.$c(a),b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.W.toString()));this.Qc&&(b=b.replace("?",a.M.toString()));return b};
Ni.prototype.da=function(a,b,c){a=this.We.$c(c);b=this.F.get(this.index.m());c=(1==a.length&&a[0]instanceof E&&kd(a[0])?nf(b.get(a[0].c),!1,this.Pc?c.W:void 0,this.Qc?c.M:void 0):b.Za(a,this.je,this.Pc?c.W:void 0,this.Qc?c.M:void 0)).map(function(a){return new Sb(a,{})},this);return[wd(c,[this.index.oc])]};function Oi(){S.call(this,0,0)}t(Oi,S);Oi.prototype.toString=l("multi_index_range_scan()");
Oi.prototype.da=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ta.id(),a)})});var c=z(b);return[new G(c,a[0].u())]};function Pi(a){S.call(this,0,1);this.lc=a}t(Pi,S);Pi.prototype.toString=l("select(?)");Pi.prototype.Nc=function(a){a=$d(a,this.lc);return this.toString().replace("?",a.toString())};Pi.prototype.da=function(a,b,c){return[$d(c,this.lc).eval(a[0])]};function Qi(a,b){S.call(this,0,1);this.V=a.l(hc);this.U=b}t(Qi,S);Qi.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};Qi.prototype.da=function(a){return[wd(hf(this.V,qd(a[0])),[zd(this.U)])]};function Ri(a){this.f=a}t(Ri,lh);Ri.prototype.eb=function(a,b){this.H=a;mg(a,function(a){return a instanceof ri}).forEach(function(a){var d=Si(a);if(0!=d.length){var e=Hi(new Fi(this.f,a.table),b,d.map(function(a){return $d(b,a.lc)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.lc,a)},this);this.H=Ti(this,e,f,a)}}},this);return this.H};function Si(a){var b=[];for(a=a.getParent();a;)a instanceof Pi&&b.push(a),a=a.getParent();return b}
function Ti(a,b,c,d){(null===b.Ea?[]:b.Ea.values()).map(function(a){return c.get(a)}).forEach(ng);b=new Ni(a.f,b.ab,Mi(b),!1);a=new Qi(a.f,d.table);K(a,b);rg(d,d,a,b);return b.$a()};function Ui(a,b){S.call(this,0,-1);this.F=a.l(ic);this.U=b}t(Ui,S);Ui.prototype.toString=function(){return"insert("+this.U.getName()+")"};Ui.prototype.da=function(a,b,c){Vi(this.U,c.values,this.F);b.Db(this.U,c.values);return[wd(c.values,[this.U.getName()])]};function Vi(a,b,c){a=a.Jb().ad();if(null===a?0:a.g[0].autoIncrement){var d=a.g[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Wi(a,b){S.call(this,0,-1);this.F=a.l(ic);this.U=b}t(Wi,S);Wi.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};Wi.prototype.da=function(a,b,c){Vi(this.U,c.values,this.F);b.Rd(this.U,c.values);return[wd(c.values,[this.U.getName()])]};function Xi(){S.call(this,0,1)}t(Xi,S);Xi.prototype.toString=l("limit(?)");Xi.prototype.Nc=function(a){return this.toString().replace("?",a.W.toString())};Xi.prototype.da=function(a,b,c){a[0].entries.splice(c.W);return a};function Yi(a){S.call(this,0,1);this.O=a}t(Yi,S);m=Yi.prototype;m.toString=function(){return"order_by("+fe(this.O)+")"};m.da=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.O.length;d++){var e=Ig(this.O[d].I);if(null!==b.Xa&&b.Xa.has(e.m())){c=e;break}}b=c;(null===b?a[0]:rd(a[0],b)).entries.sort(this.Of.bind(this))}else a.sort(this.Ag.bind(this));return a};
m.Z=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.O[f].I,c=this.O[f].qb,d=a(e),e=b(e);while(d==e&&f+1<this.O.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Ag=function(a,b){return this.Z(function(b){return b instanceof R?rd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?rd(b,a):H(b.entries[b.entries.length-1],a)})};m.Of=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function Zi(a,b){this.Ka=a;this.L=b}function $i(a){return a.L.some(function(a){return a instanceof R},a)?aj(a):bj(a)}function aj(a){if(1==a.L.length&&"DISTINCT"==a.L[0].Nb)return a=rd(a.Ka,a.L[0]).entries.map(function(a){var b=new xd(new Sb(-1,{}),1<this.Ka.N.size);Ad(b,this.L[0],H(a,this.L[0].child));return b},a),new G(a,[]);var b=new xd(new Sb(-1,{}),1<a.Ka.N.size);a.L.forEach(function(a){var d=a instanceof R?rd(this.Ka,a):H(this.Ka.entries[0],a);Ad(b,a,d)},a);return new G([b],a.Ka.u())}
function bj(a){var b=Array(a.Ka.entries.length),c=1<a.Ka.N.size;a.Ka.entries.forEach(function(a,e){b[e]=new xd(new Sb(a.ta.id(),{}),c);this.L.forEach(function(c){Ad(b[e],c,H(a,c))},this)},a);return new G(b,a.Ka.u())}function cj(a,b){var c=a.map(function(a){return $i(new Zi(a,b)).entries[0]});return new G(c,a[0].u())};function dj(a,b){S.call(this,0,1);this.g=a;this.Qb=b}t(dj,S);dj.prototype.toString=function(){var a="project("+this.g.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};dj.prototype.da=function(a){0==a.length?a=[td()]:1==a.length?(a=a[0],a=[0==this.g.length?a:$i(new Zi(a,this.g))]):a=[cj(a,this.g)];return a};function ej(a){return a.g.some(function(a){return a instanceof R})||null!==a.Qb};function fj(){S.call(this,0,1)}t(fj,S);fj.prototype.toString=l("skip(?)");fj.prototype.Nc=function(a){return this.toString().replace("?",a.M.toString())};fj.prototype.da=function(a,b,c){return[new G(a[0].entries.slice(c.M),a[0].u())]};function gj(){}t(gj,lh);gj.prototype.eb=function(a,b){if(!q(b.W)&&!q(b.M))return a;var c=hj(a);if(null===c)return a;mg(a,function(a){return a instanceof Xi||a instanceof fj}).forEach(function(a){a instanceof Xi?c.Pc=!0:c.Qc=!0;ng(a)},this);return c.$a()};function hj(a){a=mg(a,function(a){return a instanceof Ni},function(a){return a instanceof dj&&ej(a)||a instanceof Yi||1!=J(a).length||a instanceof Pi});return 0<a.length?a[0]:null};function ij(a){this.f=a}t(ij,lh);ij.prototype.eb=function(a,b){this.H=a;var c=jj(this,b);if(0==c.length)return this.H;var d=null,e=null,f=0;do e=c[f++],d=kj(this,e,b);while(null===d&&f<c.length);return null===d?this.H:this.H=lj(this,e,d)};function jj(a,b){return mg(a.H,function(a){if(!(a instanceof Pi))return!1;a=$d(b,a.lc);return a instanceof tg&&"or"==a.pb})}
function kj(a,b,c){b=$d(c,b.lc);var d=b.u();if(1!=d.size)return null;var d=C(d)[0],e=new Fi(a.f,d),f=null;return J(b).every(function(a){a=Hi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function lj(a,b,c){var d=mg(a.H,function(a){return a instanceof ri&&a.table.getName()==c[0].ab.oc})[0],e=new Qi(a.f,d.table),f=new Oi;K(e,f);c.forEach(function(a){a=new Ni(this.f,a.ab,Mi(a),!1);K(f,a)},a);ng(b);rg(d,d,e,f);return f.$a()};function mj(a){this.f=a}t(mj,lh);mj.prototype.eb=function(a,b){var c=nj(a,b);if(null===c)return a;var d;a:{var e=c;d=oj(Od(c,0));if(null!==d){var f;f=c.O;for(var h=null,k=d.table.Ba(),n=0;n<k.length&&null===h;n++)h=pj(k[n],f);f=h;if(null===f){d=e;break a}e=new Ni(this.f,f.ab,new Bi(f.ab),f.Te);f=new Qi(this.f,d.table);K(f,e);ng(c);e=rg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=qj(Od(c,0)),null!==e){f=pj(e.index,c.O);if(null===f)break a;e.je=f.Te;d=ng(c).parent}return d.$a()};
function qj(a){a=mg(a,function(a){return a instanceof Ni},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function oj(a){a=mg(a,function(a){return a instanceof ri},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function nj(a,b){return q(b.O)?mg(a,function(a){return a instanceof Yi})[0]:null}function pj(a,b){if(a.g.length!=b.length||!b.every(function(b,c){return b.I.getName()==a.g[c].ca.getName()}))return null;var c=rj(b,a);return c[0]||c[1]?{ab:a,Te:c[1]}:null}
function rj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.qb?0:1)},0),d=b.g.reduce(function(a,b){return a<<1|(0==b.qb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.g.length))-1]};function sj(a,b,c){this.Fa=a;this.fe=b;this.Wb=c}sj.prototype.ic=function(){this.Wb.forEach(function(a){this.Fa=a.eb(this.Fa,this.fe)},this);return this.Fa};function tj(a,b){S.call(this,0,1);this.U=a;this.Jg=b}t(tj,S);tj.prototype.toString=function(){return"update("+this.U.getName()+")"};tj.prototype.da=function(a,b){var c=a[0].entries.map(function(a){var b=this.U.kb(a.ta.Ha());this.Jg.forEach(function(a){b.o[a.I.getName()]=a.value},this);return b},this);b.update(this.U,c);return[td()]};function uj(a){this.f=a;this.le=[new zi,new Ri(this.f),new ij(this.f),new mj(this.f),new gj,new si(this.f)];this.Kd=[new Ri(this.f)]}uj.prototype.create=function(a,b){var c=a.$a();if(c instanceof Zg||c instanceof Yg)return vj(this,a,b);if(c instanceof eh||c instanceof ih||c instanceof jh)return vj(this,a,b,this.le);if(c instanceof $g||c instanceof ah)return vj(this,a,b,this.Kd);throw new D(8);};
function vj(a,b,c,d){a=kg(b.$a(),a.mg.bind(a));null!=d&&(a=(new sj(a,c,d)).ic());return new ge(a,b.ea())}
uj.prototype.mg=function(a){if(a instanceof eh)return new dj(a.g,a.Qb);if(a instanceof hh)return new ti(a.g);if(a instanceof gh)return new Mg(a.g);if(a instanceof fh)return new Yi(a.O);if(a instanceof jh)return new fj;if(a instanceof ih)return new Xi;if(a instanceof bh)return new Pi(a.X.$());if(a instanceof dh)return new qh;if(a instanceof kh)return new vi(this.f,a.X,a.Sb);if(a instanceof ch)return new ri(this.f,a.table);if(a instanceof $g)return new pi(a.table);if(a instanceof ah)return new tj(a.table,
a.te);if(a instanceof Zg)return new Wi(this.f,a.table);if(a instanceof Yg)return new Ui(this.f,a.table);throw new D(514);};function wj(a){this.jg=new oi;this.vg=new uj(a)};function xj(a){this.f=a;this.h=a.l(mc);this.ba=B(this.h.ua());this.cb=x()}function yj(a){var b=a.f.l(ic),c=a.f.l(hc),d={};a.h.ua().forEach(function(a){var f=b.get(Re(a)).Za(),f=hf(c,f).map(function(a){return a.o});d[a.getName()]=f});return{name:a.h.name(),version:a.h.version(),tables:d}}m=xj.prototype;m.exec=function(){var a=yj(this),a=new xd(new Sb(-1,a),!0);return w([new G([a],[])])};m.K=l(0);m.ea=g("ba");m.Pb=g("cb");m.$=function(){return ka(this)};m.getPriority=l(0);function zj(){this.$e=y()}function Aj(a,b){var c=a.$e.get(b.getName())||null;null===c&&(c=new Bj,a.$e.set(b.getName(),c));return c}function Cj(a,b,c,d){c.forEach(function(a){a=Aj(this,a);0==d?(a.bb=null,a.xc=b):3==d?(null===a.Yb&&(a.Yb=B()),a.Yb.add(b),null===a.Sa&&(a.Sa=B()),a.Sa.delete(b)):1==d?(null===a.Sa&&(a.Sa=B()),a.Sa.add(b)):2==d&&(a.bb=b)},a)}
function Dj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Aj(this,a);var c=null===a.Sa||0==a.Sa.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.xc&&null!==a.bb&&a.bb==b:3==d?null===a.xc&&null===a.bb&&null!==a.Sa&&a.Sa.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Ej(a,b,c,d){var e=Dj(a,b,c,d);e&&Cj(a,b,c,d);return e}zj.prototype.releaseLock=function(a,b){b.forEach(function(b){Aj(this,b).releaseLock(a)},this)};
function Fj(a,b){b.forEach(function(a){Aj(this,a).bb=null},a)}function Bj(){this.Yb=this.Sa=this.bb=this.xc=null}Bj.prototype.releaseLock=function(a){this.xc==a&&(this.xc=null);this.bb==a&&(this.bb=null);null===this.Sa||this.Sa.delete(a);null===this.Yb||this.Yb.delete(a)};function Gj(){this.Vb=new Hj;this.Ec=new zj}function oe(a,b){(2>b.getPriority()||2>b.getPriority())&&Fj(a.Ec,b.ea());a.Vb.Db(b);Ij(a);return b.Pb().fa}function Ij(a){for(var b=a.Vb.Cb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.K()?Jj(a,d,1,3):Jj(a,d,2,0))a.Vb.remove(d),e=a,d.exec().then(e.sg.bind(e,d),e.rg.bind(e,d))}}function Jj(a,b,c,d){var e=!1;Ej(a.Ec,b.$(),b.ea(),c)&&(e=Ej(a.Ec,b.$(),b.ea(),d));return e}Gj.prototype.sg=function(a,b){this.Ec.releaseLock(a.$(),a.ea());a.Pb().resolve(b);Ij(this)};
Gj.prototype.rg=function(a,b){this.Ec.releaseLock(a.$(),a.ea());a.Pb().reject(b);Ij(this)};function Hj(){this.Vb=[]}Hj.prototype.Db=function(a){mf(this.Vb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.$()-c.$():d})};Hj.prototype.Cb=function(){return this.Vb.slice()};Hj.prototype.remove=function(a){var b=this.Vb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Kj(a,b){this.Ld=Kd();this.ge=a;this.ld=b;this.L=Lj(this)}function Lj(a){if(0<a.ge.g.length)return a.ge.g;var b=[];a.ge.c.forEach(function(a){a.lb().forEach(function(a){b.push(a)})});return b}Kj.prototype.Z=function(a,b){return this.L.every(function(c){return Ld(this.Ld,c.K(),"eq")(H(a,c),H(b,c))},this)};
function Mj(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.ld.splice(f,1),k=Nj(h,k,0,a.ld),b.push(k))}e=ob(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.ld.splice(h,0,k.ta.o),k=Nj(h,[],1,a.ld),b.push(k));return b}function Nj(a,b,c,d){return{Lg:c,index:a,object:d,Og:b,type:"splice"}};function Oj(){this.gc=y()}Oj.prototype.xd=function(a,b){var c=ka(a.a).toString(),d=this.gc.get(c)||null;null===d&&(d=new Pj(a),this.gc.set(c,d));d.xd(b)};Oj.prototype.he=function(a,b){var c=ka(a.a).toString(),d=this.gc.get(c)||null;d.he(b);0<d.Gc.size||this.gc.delete(c)};function ne(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.gc.forEach(function(a){a=a.Bc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function le(a,b,c){b=ka(null!=b.Vc?b.Vc:b).toString();a=a.gc.get(b)||null;null!==a&&Qj(a,c)}function Pj(a){this.Ef=a;this.Gc=B();this.pg=[];this.Ye=null;this.Mf=new Kj(a.a,this.pg)}Pj.prototype.xd=function(a){this.Gc.has(a)||this.Gc.add(a)};Pj.prototype.he=function(a){return this.Gc.delete(a)};Pj.prototype.Bc=function(){var a=this.Ef;return{context:a.a,ee:Oh(a)}};function Qj(a,b){var c=Mj(a.Mf,a.Ye,b);a.Ye=b;0<c.length&&a.Gc.forEach(function(a){a(c)})};function Rj(a,b){var c=a.l(mc),d=b||{},e=new gf(c);a.sb(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Qb)||(Qb=new Pb),e=Qb,e=e.$f?0:e.Kg?4:1);switch(e){case 0:e=new Ne(a,c);break;case 1:e=new Ue(c);break;case 5:e=new We(c);break;case 4:e=new df(a,c,d.webSqlDbSize);break;case 3:e=new Ae(c,d.firebase);f=!0;break;default:throw new D(300);}a.sb(gc,e);var h=new jg;a.sb(ic,h);return e.Ca(d.onUpgrade).then(function(){var b=new wj(a);a.sb(jc,b);b=new Gj;a.sb(kc,b);b=new Oj;a.sb(lc,b);return h.Ca(c)}).then(function(){if(f){var b=
new pe(a);b.Ma.subscribe(b.$d.bind(b))}d.enableInspector&&Sj(a);return(new cg(a)).Ca(c)})}function Sj(a){window["#lfExport"]=function(){var b=new xj(a);return JSON.stringify(yj(b),void 0,2)}};function Tj(a,b){this.f=a;this.h=a.l(mc);this.ba=B(this.h.ua());this.cb=x();this.ya=b;this.Ma=a.l(gc);this.V=a.l(hc);this.F=a.l(ic)}m=Tj.prototype;
m.exec=function(){if(!(this.Ma instanceof Ne||this.Ma instanceof Ue||this.Ma instanceof df))throw new D(300);var a;a:{a=this.h.ua();for(var b=0;b<a.length;++b)if(0<this.F.get(Re(a[b])).La().ma){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.h.name()!=this.ya.name||this.h.version()!=this.ya.version)throw new D(111);if(null==this.ya.tables)throw new D(112);return Uj(this)};m.K=l(1);m.ea=g("ba");m.Pb=g("cb");m.$=function(){return ka(this)};m.getPriority=l(0);
function Uj(a){var b=new ad(a.f,a.ba),b=a.Ma.Hb(a.K(),C(a.ba),b),c;for(c in a.ya.tables){var d=a.h.table(c),e=a.ya.tables[c].map(function(a){return d.zb(a)}),f=b.J(c,d.kb,0);a.V.Xb(c,e);var h=a.F.nc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ja()};function Vj(a,b){this.f=a;this.Ma=a.l(gc);this.Ga=a.l(kc);this.Lb=a.l(lc);this.ba=B(b);this.Qa=new ad(this.f,this.ba);this.cb=x();this.yc=x();this.we=x()}m=Vj.prototype;m.exec=function(){this.we.resolve();return this.yc.fa};m.K=l(1);m.ea=g("ba");m.Pb=g("cb");m.$=function(){return ka(this)};m.getPriority=l(2);function Wj(a){oe(a.Ga,a);return a.we.fa}
function Xj(a,b){var c=b.Bc();return c.ee.$a().exec(a.Qa,c.context).then(function(a){return pd(a[0])},function(a){this.Qa.Mb();var b=new ib(a.name);this.yc.reject(b);throw a;}.bind(a))}m.ja=function(){this.Ma.Hb(this.K(),C(this.ba),this.Qa).ja().then(function(){this.Lc();this.yc.resolve()}.bind(this),function(a){this.Qa.Mb();this.yc.reject(a)}.bind(this));return this.cb.fa};m.Mb=function(){this.Qa.Mb();this.yc.resolve();return this.cb.fa};
m.Lc=function(){var a=ne(this.Lb,this.ba);0!=a.length&&(a=new ke(this.f,a),oe(this.Ga,a))};function Yj(a){this.f=a;this.Ga=a.l(kc);this.Oc=null;this.Ta=0;0==Zj.size&&(Zj.set(0,B([1,4])),Zj.set(1,B([2])),Zj.set(2,B([3,5,6])),Zj.set(3,B([2,7])),Zj.set(4,B([7])),Zj.set(5,B([7])),Zj.set(6,B([7])))}r("lf.proc.Transaction",Yj);var Zj=y();function ak(a,b){var c=Zj.get(a.Ta)||null;if(null===c||!c.has(b))throw new D(107,a.Ta,b);a.Ta=b}
Yj.prototype.exec=function(a){ak(this,4);var b=[];try{a.forEach(function(a){a.hb();b.push(a.Bc())},this)}catch(c){return ak(this,7),ab(c)}a=new rh(this.f,b);return oe(this.Ga,a).then(function(a){ak(this,7);return a.map(function(a){return pd(a)})}.bind(this),function(a){ak(this,7);throw a;}.bind(this))};Yj.prototype.exec=Yj.prototype.exec;Yj.prototype.Cf=function(a){ak(this,1);this.Oc=new Vj(this.f,a);return Wj(this.Oc).then(function(){ak(this,2)}.bind(this))};Yj.prototype.begin=Yj.prototype.Cf;
Yj.prototype.Bf=function(a){ak(this,3);return Xj(this.Oc,a).then(function(a){ak(this,2);return a}.bind(this),function(a){ak(this,7);throw a;}.bind(this))};Yj.prototype.attach=Yj.prototype.Bf;Yj.prototype.ja=function(){ak(this,5);return this.Oc.ja().then(function(){ak(this,7)}.bind(this))};Yj.prototype.commit=Yj.prototype.ja;Yj.prototype.Mb=function(){ak(this,6);return this.Oc.Mb().then(function(){ak(this,7)}.bind(this))};Yj.prototype.rollback=Yj.prototype.Mb;function V(a){this.f=a;this.h=a.l(mc);this.gd=!1}r("lf.proc.Database",V);V.prototype.Ca=function(a){this.f.sb(mc,this.h);return Rj(this.f,a).then(function(){this.gd=!0;this.Ga=this.f.l(kc);return this}.bind(this))};V.prototype.init=V.prototype.Ca;V.prototype.Bb=g("h");V.prototype.getSchema=V.prototype.Bb;function bk(a){if(!a.gd)throw new D(2);}V.prototype.select=function(a){bk(this);return new U(this.f,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.Db=function(){bk(this);return new Qh(this.f)};V.prototype.insert=V.prototype.Db;V.prototype.Rd=function(){bk(this);return new Qh(this.f,!0)};V.prototype.insertOrReplace=V.prototype.Rd;V.prototype.update=function(a){bk(this);return new $h(this.f,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){bk(this);return new Ph(this.f)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){bk(this);this.f.l(lc).xd(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){bk(this);this.f.l(lc).he(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.Kf=function(){bk(this);return new Yj(this.f)};V.prototype.createTransaction=V.prototype.Kf;V.prototype.close=function(){try{this.f.l(gc).close()}catch(a){}this.f.clear();this.gd=!1};V.prototype.close=V.prototype.close;
V.prototype.Sf=function(){bk(this);var a=new xj(this.f);return oe(this.Ga,a).then(function(a){return pd(a[0])[0]})};V.prototype["export"]=V.prototype.Sf;V.prototype.import=function(a){bk(this);a=new Tj(this.f,a);return oe(this.Ga,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,f){this.U=a;this.B=b;this.Ue=c;this.Se=d;this.uf=e;this.gb=f||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=g("B");m.m=function(){return zd(this.U)+"."+this.B};m.toString=function(){return this.m()};m.J=g("U");m.K=g("uf");W.prototype.getType=W.prototype.K;W.prototype.Ya=g("gb");W.prototype.Ba=function(){null==this.ra&&(this.ra=[],this.J().Ba().forEach(function(a){-1!=a.g.map(function(a){return a.ca.getName()}).indexOf(this.B)&&this.ra.push(a)},this));return this.ra};
W.prototype.Aa=function(){if(!q(this.ha)){var a=this.Ba().filter(function(a){return 1!=a.g.length?!1:a.g[0].ca.getName()==this.getName()},this);this.ha=0<a.length?a[0]:null}return this.ha};W.prototype.jc=g("Se");W.prototype.isNullable=W.prototype.jc;W.prototype.Dc=g("Ue");W.prototype.Na=function(a){return Cg(this,a,"eq")};W.prototype.eq=W.prototype.Na;W.prototype.af=function(a){return Cg(this,a,"neq")};W.prototype.neq=W.prototype.af;W.prototype.kg=function(a){return Cg(this,a,"lt")};
W.prototype.lt=W.prototype.kg;W.prototype.lg=function(a){return Cg(this,a,"lte")};W.prototype.lte=W.prototype.lg;W.prototype.Vf=function(a){return Cg(this,a,"gt")};W.prototype.gt=W.prototype.Vf;W.prototype.Wf=function(a){return Cg(this,a,"gte")};W.prototype.gte=W.prototype.Wf;W.prototype.match=function(a){return Cg(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.Df=function(a,b){return Cg(this,[a,b],"between")};W.prototype.between=W.prototype.Df;
W.prototype.Xf=function(a){return Cg(this,a,"in")};W.prototype["in"]=W.prototype.Xf;W.prototype.fg=function(){return this.Na(null)};W.prototype.isNull=W.prototype.fg;W.prototype.eg=function(){return this.af(null)};W.prototype.isNotNull=W.prototype.eg;W.prototype.sc=function(a){return new W(this.U,this.B,this.Ue,this.Se,this.uf,a)};W.prototype.as=W.prototype.sc;function ck(){this.rd=y()}var dk;ck.prototype.clear=function(){this.rd.clear()};ck.prototype.clear=ck.prototype.clear;ck.prototype.sb=function(a,b){this.rd.set(a.toString(),b);return b};ck.prototype.registerService=ck.prototype.sb;ck.prototype.l=function(a){var b=this.rd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};ck.prototype.getService=ck.prototype.l;ck.prototype.Ud=function(a){return this.rd.has(a.toString())};ck.prototype.isRegistered=ck.prototype.Ud;function ek(a){this.h=a;this.Dd=new Ic;this.ie=new Ic;this.cf=new Ic;this.Fe=y();this.i=new Ic;this.Be=new Ic;this.kf=new Ic;this.Ee=new Ic;fk(this)}function fk(a){a.h.ua().forEach(function(a){var c=a.getName();a.Jb().Qd().forEach(function(d){this.cf.set(c,this.h.table(d.Ra));this.i.set(d.Ra,a);0==d.action?(this.ie.set(d.Ra,d),this.kf.set(d.Ra,a)):(this.Dd.set(d.Ra,d),this.Be.set(d.Ra,a));this.Fe.set(a.getName()+"."+d.xb,d.Ra);this.Ee.set(d.Ra+"."+d.Ic,a.getName())},this)},a)}
function Rc(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function xh(a,b){var c=b.get(a);return null===c?[]:c}function zh(a,b){var c=B();b.forEach(function(a){(a=this.Fe.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.h.table(a)},a)}function vh(a,b,c){return null!=c?0==c?xh(b,a.kf):xh(b,a.Be):xh(b,a.i)}
function Ah(a,b){var c=B();b.forEach(function(a){(a=this.Ee.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.h.table(a)},a)};function gk(a,b,c){this.wg=a;this.og=b;this.Tf=c}r("lf.schema.Constraint",gk);gk.prototype.ad=g("wg");gk.prototype.getPrimaryKey=gk.prototype.ad;gk.prototype.Qd=g("Tf");gk.prototype.getForeignKeys=gk.prototype.Qd;function hk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.De=b;this.xb=a.local;this.Ra=d[0];this.Ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function X(a){ik(a);this.Ld=Kd();this.B=a;this.L=y();this.ud=B();this.pc=B();this.kd=B();this.Da=null;this.ra=y();this.od=!1;this.Ab=[]}r("lf.schema.TableBuilder",X);function jk(a){this.name=a.name;this.qb=a.order;this.autoIncrement=a.autoIncrement}var kk=B([0,6]);function ik(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function lk(a,b){if(b==a.B)throw new D(546,b);if(a.L.has(b)||a.ra.has(b)||a.pc.has(b))throw new D(503,a.B+"."+b);}
function mk(a,b){var c=!1;b.forEach(function(a){var b=this.L.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function nk(a){if(null!==a.Da){var b=a.ra.get(a.Da).map(function(a){return a.name}),c=0;if(a.Ab.some(function(a,e){c=e;return-1!=b.indexOf(a.xb)},a))throw new D(543,a.Ab[c].name);}}
function ok(a){if(null!==a.Da){var b=function(a){return a.name},c=JSON.stringify(a.ra.get(a.Da).map(b));a.ra.forEach(function(a,e){if(e!=this.Da){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.B+"."+e);}},a)}}function pk(a){null===a.Da||a.ra.get(a.Da).forEach(function(a){if(this.kd.has(a.name))throw new D(545,this.B+"."+a.name);},a)}X.prototype.wf=function(a,b){ik(a);lk(this,a);this.L.set(a,b);kk.has(b)&&this.ye([a]);return this};X.prototype.addColumn=X.prototype.wf;
X.prototype.yf=function(a,b){var c=this.B;this.Da="pk"+(c[0].toUpperCase()+c.substring(1));ik(this.Da);lk(this,this.Da);c=qk(this,a,!0,void 0,b);mk(this,c);1==c.length&&this.ud.add(c[0].name);this.pc.add(this.Da);this.ra.set(this.Da,c);return this};X.prototype.addPrimaryKey=X.prototype.yf;
X.prototype.xf=function(a,b){ik(a);lk(this,a);var c=new hk(b,this.B,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.L.has(c.xb))throw new D(540,a);this.Ab.push(c);this.xe(a,[c.xb],this.ud.has(c.xb));return this};X.prototype.addForeignKey=X.prototype.xf;X.prototype.zf=function(a,b){ik(a);lk(this,a);var c=qk(this,b,!0);1==c.length&&(this.ud.add(c[0].name),rk(this,c[0].name));this.ra.set(a,c);this.pc.add(a);return this};
X.prototype.addUnique=X.prototype.zf;function rk(a,b){a.Ab.forEach(function(a){a.xb==b&&this.pc.add(a.name.split(".")[1])},a)}X.prototype.ye=function(a){qk(this,a,!1).forEach(function(a){this.kd.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.ye;X.prototype.xe=function(a,b,c,d){ik(a);lk(this,a);b=qk(this,b,!0,d);c&&this.pc.add(a);this.ra.set(a,b);return this};X.prototype.addIndex=X.prototype.xe;X.prototype.Gb=ca("od");X.prototype.persistentIndex=X.prototype.Gb;
X.prototype.Bb=function(){nk(this);ok(this);pk(this);return new (sk(this))};X.prototype.getSchema=X.prototype.Bb;function tk(a){return a.Ab}function qk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new jk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new jk(a)});f.forEach(function(a){if(!this.L.has(a.name))throw new D(508,this.B,a.name);if(c){var b=this.L.get(a.name);if(0==b||6==b)throw new D(509,this.B,a.name);}},a);return f}
function sk(a){function b(){function b(c){return a.ra.get(c).map(function(a){return{ca:this[a.name],qb:a.qb,autoIncrement:a.autoIncrement}},this)}var d=Rb(a.L).map(function(b){this[b]=new W(this,b,a.ud.has(b),a.kd.has(b),a.L.get(b));return this[b]},this),e=Rb(a.ra).map(function(d){return new Eg(a.B,d,a.pc.has(d),b.call(this,d))},this);Q.call(this,a.B,d,e,a.od);var f=null===a.Da?null:new Eg(a.B,a.Da,!0,b.call(this,a.Da)),h=d.filter(function(b){return!a.kd.has(b.getName())});this.Gf=new gk(f,h,a.Ab);
this.nf=uk(a,d,e)}t(b,Q);b.prototype.zb=function(a){return new this.nf(Tb++,a)};b.prototype.createRow=b.prototype.zb;b.prototype.kb=function(a){var b={};this.lb().forEach(function(e){var f=e.getName();e=e.K();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.nf(a.id,b)};b.prototype.deserializeRow=
b.prototype.kb;b.prototype.Jb=g("Gf");b.prototype.getConstraint=b.prototype.Jb;return b}
function uk(a,b,c){function d(a,d){this.L=b;this.ra=c;Sb.call(this,a,d)}t(d,Sb);d.prototype.He=function(){var a={};this.L.forEach(function(b){a[b.getName()]=b.jc()?null:Hc[b.K()]});return a};d.prototype.tf=function(){var a={};this.L.forEach(function(b){var c=b.getName();b=b.K();var d=this.o[c];a[c]=0==b?null!=d?Wb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.L.get(a.getName()),c=this.Ld.Ve.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.g.length?e(a.g[0].ca):f(a.g);h[b]=a});d.prototype.nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Y(a,b){this.h=new Z(a,b);this.vb=y();this.zc=!1;this.j=null}r("lf.schema.Builder",Y);function vk(a,b){b.Ab.forEach(function(a){var d=a.Ra;if(!this.vb.has(d))throw new D(536,a.name);var d=this.vb.get(d).Bb(),e=a.Ic;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.Bb()[a.xb].K()!=d[e].K())throw new D(538,a.name);if(!d[e].Dc())throw new D(539,a.name);},a)}
Y.prototype.Ff=function(a){a.Ab.forEach(function(a){tk(this.vb.get(a.Ra)).forEach(function(c){if(c.xb==a.Ic)throw new D(534,a.name);},this)},this)};function wk(a){a.zc||(a.vb.forEach(function(a){vk(this,a);a=a.Bb();this.h.N.set(a.getName(),a)},a),z(a.vb).forEach(a.Ff,a),xk(a),a.vb.clear(),a.zc=!0)}function yk(a,b,c){b.ue||(b.ue=!0,b.ae=!0,b.Ie.forEach(function(a){a=c.get(a);if(!a.ue)yk(this,a,c);else if(a.ae&&b!=a)throw new D(533);},a));b.ae=!1}
function xk(a){var b=y();a.h.N.forEach(function(a,d){b.set(d,new zk(d))},a);a.vb.forEach(function(a,d){a.Ab.forEach(function(a){b.get(a.Ra).Ie.add(d)})});z(b).forEach(function(a){yk(this,a,b)},a)}function zk(a){this.ae=this.ue=!1;this.Ie=B();this.oc=a}Y.prototype.Bb=function(){this.zc||wk(this);return this.h};Y.prototype.getSchema=Y.prototype.Bb;Y.prototype.Me=function(){var a=new fc("ns_"+this.h.name()),b;dk||(dk=new ck);b=dk;var c=null;b.Ud(a)?c=b.l(a):(c=new ck,b.sb(a,c));return c};
Y.prototype.getGlobal=Y.prototype.Me;Y.prototype.connect=function(a){if(null!==this.j&&this.j.gd)throw new D(113);if(null===this.j){var b=this.Me();b.Ud(mc)||b.sb(mc,this.Bb());this.j=new V(b)}return this.j.Ca(a)};Y.prototype.connect=Y.prototype.connect;Y.prototype.Jf=function(a){if(this.vb.has(a))throw new D(503,a);if(this.zc)throw new D(535);this.vb.set(a,new X(a));return this.vb.get(a)};Y.prototype.createTable=Y.prototype.Jf;Y.prototype.me=function(a){if(this.zc)throw new D(535);this.h.me(a);return this};
Y.prototype.setPragma=Y.prototype.me;function Z(a,b){this.B=a;this.ac=b;this.N=y();this.gf={Nf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("B");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("ac");Z.prototype.version=Z.prototype.version;Z.prototype.ua=function(){return z(this.N)};Z.prototype.tables=Z.prototype.ua;Z.prototype.table=function(a){if(!this.N.has(a))throw new D(101,a);return this.N.get(a)};Z.prototype.table=Z.prototype.table;
Z.prototype.info=function(){this.Re||(this.Re=new ek(this));return this.Re};Z.prototype.ff=g("gf");Z.prototype.pragma=Z.prototype.ff;Z.prototype.me=ca("gf");r("lf.schema.create",function(a,b){return new Y(a,b)});v.prototype.catch=v.prototype.pe;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
