if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ib=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Qg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var B=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==B[0].length&&0==O[0].length)break;b=va(0==B[1].length?0:parseInt(B[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==B[2].length,0==O[2].length)||va(B[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.lg=c;this.Pf=a;this.Gg=b;this.sd=0;this.jd=null}wa.prototype.get=function(){var a;0<this.sd?(this.sd--,a=this.jd,this.jd=a.next,a.next=null):a=this.Pf();return a};wa.prototype.put=function(a){this.Gg(a);this.sd<this.lg&&(this.sd++,a.next=this.jd,this.jd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.He;c.He=null;a()}};return function(a){d.next={He:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.Bd=this.sc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.Bd?this.Bd.next=c:this.sc=c;this.Bd=c};Pa.prototype.remove=function(){var a=null;this.sc&&(a=this.sc,this.sc=this.sc.next,this.sc||(this.Bd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Td=null}Qa.prototype.set=function(a,b){this.Td=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Td=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Td.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Wa=0;this.qf=void 0;this.Yc=this.gc=this.H=null;this.hd=this.Rd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.mc=this.Lc=this.child=null;this.Ed=!1}Za.prototype.reset=function(){this.context=this.mc=this.Lc=this.child=null;this.Ed=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Lc=a;d.mc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Ya(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ve=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.gc||2!=a.Wa&&3!=a.Wa||ib(a);a.Yc?a.Yc.next=b:a.gc=b;a.Yc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Lc=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.mc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(B){h(B)}}:h});e.child.H=a;hb(a,e);return e.child}v.prototype.Lg=function(a){this.Wa=0;Ya(this,2,a)};v.prototype.Mg=function(a){this.Wa=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Wa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Wa=1,db(c,a.Lg,a.Mg,a)||(a.qf=c,a.Wa=b,a.H=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Rd||(a.Rd=!0,Sa(a.Uf,a))}function mb(a){var b=null;a.gc&&(b=a.gc,a.gc=b.next,b.next=null);a.gc||(a.Yc=null);return b}
v.prototype.Uf=function(){for(var a=null;a=mb(this);){var b=this.Wa,c=this.qf;if(3==b&&a.mc&&!a.Ed)for(var d=void 0,d=this;d&&d.hd;d=d.H)d.hd=!1;if(a.child)a.child.H=null,nb(a,b,c);else try{a.Ed?a.Lc.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Rd=!1};function nb(a,b,c){2==b?a.Lc.call(a.context,c):a.mc&&a.mc.call(a.context,c)}function kb(a,b){a.hd=!0;Sa(function(){a.hd&&ob.call(null,b)})}var ob=Ma;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.fa=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function qb(a){return Aa(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function vb(){}vb.prototype.next=function(){throw ub;};vb.prototype.tc=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.tc)return a.tc(!1);if(ha(a)){var b=0,c=new vb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function xb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=wb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function yb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new vb;var b=new vb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function zb(a,b){this.o={};this.b=[];this.Ra=this.Ib=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=zb.prototype;m.Dc=g("Ib");m.qa=function(){Cb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Db(a){Cb(a);return a.b.concat()}m.Oa=function(a){return Eb(this.o,a)};m.md=function(){return 0==this.Ib};
m.clear=function(){this.o={};this.Ra=this.Ib=this.b.length=0};m.remove=function(a){return Eb(this.o,a)?(delete this.o[a],this.Ib--,this.Ra++,this.b.length>2*this.Ib&&Cb(this),!0):!1};function Cb(a){if(a.Ib!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Eb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Ib!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Eb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Eb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Eb(this.o,a)||(this.Ib++,this.b.push(a),this.Ra++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof zb)b=Db(a),a=a.qa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Db(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new zb(this)};
m.tc=function(a){Cb(this);var b=0,c=this.Ra,d=this,e=new vb;e.next=function(){if(c!=d.Ra)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw ub;var e=d.b[b++];return a?e:d.o[e]};return e};function Eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Gb=Ja(),Hb=u("Trident")||u("MSIE"),Ib=u("Edge"),Jb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Kb=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Lb(){var a=Ga;if(Jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ib)return/Edge\/([\d\.]+)/.exec(a);if(Hb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Kb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Gb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Lb())&&(a=b?b[1]:"");return Hb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Mb={};var Nb=Fb()||u("iPod"),Ob=u("iPad"),Pb=Ka(),Qb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Fb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Rb(){this.pe=Qb||Ob||Nb;this.dg=!(this.pe||Hb&&!Mb[10]&&!(Mb[10]=0<=ta(10)));!Hb||Mb[11]||(Mb[11]=0<=ta(11));this.Og=Pb||Qb;this.qg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.pe;this.rg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.pe}var Sb;function Tb(){q(Sb)||(Sb=new Rb);return Sb};function y(){this.o=new zb;Object.defineProperty(this,"size",{get:function(){return this.o.Dc()}})}y.prototype.clear=function(){this.o.clear()};y.prototype.clear=y.prototype.clear;y.prototype.delete=function(a){return this.o.remove(a)};y.prototype["delete"]=y.prototype.delete;y.prototype.forEach=function(a,b){return this.o.forEach(a,b)};y.prototype.forEach=y.prototype.forEach;y.prototype.get=function(a){return this.o.get(a)};y.prototype.get=y.prototype.get;y.prototype.has=function(a){return this.o.Oa(a)};
y.prototype.has=y.prototype.has;y.prototype.set=function(a,b){return this.o.set(a,b)};y.prototype.set=y.prototype.set;var Ub=Tb().qg;function z(){return Ub?new window.Map:new y}function Vb(a){if(a instanceof y)return Db(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function A(a){if(a instanceof y)return a.o.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(a,b){this.ra=a;this.s=b||this.Me()}var Xb=0;m=Wb.prototype;m.id=g("ra");m.Me=function(){return{}};m.yf=g("s");m.Ia=function(){return{id:this.ra,value:this.yf()}};m.pb=function(a){return"#"==a.substr(-1)?this.ra:null};function Yb(a){return new Wb(a.id,a.value)}function Zb(a){return new Wb(Xb++,a||{})}function $b(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var ac={};r("lf.TransactionType",ac);ac.READ_ONLY=0;ac.READ_WRITE=1;function bc(a,b){this.xe=a;this.Ta=b||null;this.U=x()}bc.prototype.ja=function(){return 0==this.xe?this.wc():dc(this)};function dc(a){try{ec(a.Ta)}catch(b){return bb(b)}return fc(a).then(function(a){this.Ta.ja();return a}.bind(a))}function fc(a){gc(a);hc(a);return a.wc()}
function gc(a){a.Ta.yb.forEach(function(a,c){var d=this.Ta.ea().get(c),d=this.K(d.getName(),d.mb.bind(d),0),e=A(a.Aa).map(function(a){return a.id()});0<e.length&&d.remove(e).ve(this.Ue,this);e=A(a.oa).map(function(a){return a[1]}).concat(A(a.xa));d.put(e).ve(this.Ue,this)},a)}function hc(a){ic(a.Ta).forEach(function(a){var c=this.K(a.getName(),Yb,1);c.remove([]);c.put(a.Ia())},a)}bc.prototype.Ue=function(a){this.U.reject(a)};function jc(a){this.Hg=a}jc.prototype.toString=g("Hg");var kc=new jc("backstore"),lc=new jc("cache"),mc=new jc("indexstore"),nc=new jc("engine"),oc=new jc("runner"),pc=new jc("observerregistry"),qc=new jc("schema");function rc(a){if(a.qa&&"function"==typeof a.qa)return a.qa();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function sc(a){this.o=new zb;a&&this.addAll(a)}function tc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=sc.prototype;m.Dc=function(){return this.o.Dc()};m.add=function(a){this.o.set(tc(a),a)};m.addAll=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(tc(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.Oa(tc(a))};m.qa=function(){return this.o.qa()};
m.clone=function(){return new sc(this)};m.tc=function(){return this.o.tc(!1)};function uc(a){this.$b=new sc(a);Object.defineProperty(this,"size",{get:function(){return this.$b.Dc()}})}uc.prototype.add=function(a){this.$b.add(a)};uc.prototype.add=uc.prototype.add;uc.prototype.clear=function(){this.$b.clear()};uc.prototype.clear=uc.prototype.clear;uc.prototype.delete=function(a){return this.$b.remove(a)};uc.prototype["delete"]=uc.prototype.delete;uc.prototype.forEach=function(a,b){this.$b.qa().forEach(a,b)};uc.prototype.has=function(a){return this.$b.contains(a)};
uc.prototype.has=uc.prototype.has;var vc=Tb().rg;function C(a){return vc?q(a)?new window.Set(a):new window.Set:new uc(a)}function D(a){if(a instanceof uc)return a.$b.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function wc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function xc(a,b){this.ra=a;this.s=b||{}}function yc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}xc.prototype.aa=g("ra");function zc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ia()},a)}function Ac(a,b){b.forEach(function(a){delete this.s[a]},a)}xc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.s)}};function Bc(a){return new xc(a.id,JSON.parse(a.value))};function Cc(a,b,c){this.Z=a;this.Kb=b;this.rf=c}m=Cc.prototype;m.get=function(a){if(0==a.length)return this.Ud();var b=this.Kb;return Dc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Dc(a,b){var c=z(),d=x(),e=yc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Z.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=Bc(a.target.result);c.set(a.aa(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.fa}
m.Ud=function(){return new v(function(a,b){var c=[],d;try{d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Bc(b.value).s;for(var h in f)c.push(this.Kb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Wb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.rf(this.Z.name,d));zc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Wb(function(){return this.Z.put(a.Ia())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Wb(function(){return this.Z.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.rf(this.Z.name,d));Ac(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Wb(function(){return 0==Object.keys(a.s).length?this.Z.delete(a.aa()):this.Z.put(a.Ia())}.bind(this))},this);return eb(a)};function Ec(a,b,c){a=a.l(lc);var d=[c<<9,(c+1<<9)-1];b=a.bb(b,d[0],d[1]);c=new xc(c);zc(c,b);return c}
function Fc(a,b){return new xc(b)};function Gc(a){this.W=a.l(lc);this.G=a.l(mc);this.h=a.l(qc)}Gc.prototype.update=function(a){a.forEach(function(a){Hc(this,a);Ic(this,a)},this)};function Ic(a,b){var c=b.getName();b.Aa.forEach(function(a,b){this.W.remove(c,b)},a);b.xa.forEach(function(a){this.W.set(c,a)},a);b.oa.forEach(function(a){this.W.set(c,a[1])},a)}function Hc(a,b){var c=a.h.table(b.getName());Jc(b).forEach(function(a){Kc(this,c,a)},a)}
function Kc(a,b,c){var d=a.G.pc.get(b.getName())||[],e=0;d.forEach(function(a){try{Lc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Lc(a,[c[1],c[0]])},this),b;}},a)}function Lc(a,b){var c=null===b[1]?void 0:b[1].pb(a.getName()),d=null===b[0]?void 0:b[0].pb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.lb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Mc={};r("lf.ConstraintAction",Mc);Mc.RESTRICT=0;Mc.CASCADE=1;var Nc={};r("lf.ConstraintTiming",Nc);Nc.IMMEDIATE=0;Nc.DEFERRABLE=1;var Oc={};r("lf.Order",Oc);Oc.DESC=0;Oc.ASC=1;var Pc={};r("lf.Type",Pc);Pc.ARRAY_BUFFER=0;Pc.BOOLEAN=1;Pc.DATE_TIME=2;Pc.INTEGER=3;Pc.NUMBER=4;Pc.STRING=5;Pc.OBJECT=6;var Qc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Qc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Rc(){this.o=z();this.size=0}m=Rc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Zb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.be=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Zb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Vb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,D(b))});return a};function Sc(a){this.G=a.l(mc);this.h=a.l(qc);this.W=a.l(lc);this.bd=null}function Uc(a,b,c){var d=b.Lb().tg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Vc(a,b,c,d){b.Lb().Vd().forEach(function(a){a.timing==d&&Wc(this,a,c)},a)}function Wc(a,b,c){var d=Xc(a,b);c.forEach(function(a){if(Yc(a[0],a[1],b.name)&&(a=a[1].pb(b.name),null!==a&&!d.Oa(a)))throw new E(203,b.name);},a)}
function Xc(a,b){null===a.bd&&(a.bd=z());var c=a.bd.get(b.name)||null;null===c&&(c=a.h.table(b.Ua)[b.Mc].Ba(),c=a.G.get(c.m()),a.bd.set(b.name,c));return c}function Yc(a,b,c){return(null===a?null!==b:null===b)||a.pb(c)!=b.pb(c)}function Zc(a,b,c,d){b=$c(a.h.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&ad(a,b,c,function(a,b,c){if(b.Oa(c))throw new E(203,a.name);}))}
function bd(a,b,c){b=$c(a.h.info(),b.getName(),1);if(null===b)return null;var d=new Rc;ad(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Zb(a.Ie,b)});return d}function cd(a,b,c){var d=new Rc;ad(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Sd:a,yg:k[1]})})});return d}function ad(a,b,c,d){b.forEach(function(a){var b=this.G.get(a.name),h=Xc(this,a);c.forEach(function(c){if(Yc(c[0],c[1],h.getName())){var n=c[0].pb(h.getName());d(a,b,n,c)}},this)},a)}
function dd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Vc(a,b,c,d))}function ed(a,b,c,d){0!=c.length&&(Vc(a,b,c,d),Zc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Zc(a,b,c,d))}
function gd(a,b,c){var d={ue:[],tf:new Rc},e=new Rc;e.Zb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Rc;e.keys().forEach(function(a){var b=this.h.table(a);a=e.get(a).map(function(a){return[this.W.get(a),null]},this);b=bd(this,b,a);null!==b&&(d.ue.unshift.apply(d.ue,b.keys()),f.be(b))},a);e=f;d.tf.be(e)}while(0<e.size);return d};function hd(a){this.xa=z();this.oa=z();this.Aa=z();this.C=a}m=hd.prototype;m.getName=g("C");m.add=function(a){if(this.Aa.has(a.id())){var b=[this.Aa.get(a.id()),a];this.oa.set(a.id(),b);this.Aa.delete(a.id())}else this.xa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.xa.has(c)?this.xa.set(c,b):(this.oa.has(c)&&(a=[this.oa.get(a[0].id())[0],b]),this.oa.set(c,a))};
m.delete=function(a){if(this.xa.has(a.id()))this.xa.delete(a.id());else if(this.oa.has(a.id())){var b=this.oa.get(a.id())[0];this.oa.delete(a.id());this.Aa.set(a.id(),b)}else this.Aa.set(a.id(),a)};m.be=function(a){a.xa.forEach(function(a){this.add(a)},this);a.oa.forEach(function(a){this.modify(a)},this);a.Aa.forEach(function(a){this.delete(a)},this)};
function Jc(a){var b=[];a.xa.forEach(function(a){b.push([null,a])});a.oa.forEach(function(a){b.push(a)});a.Aa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Vb(this.xa).toString()+"], ["+Vb(this.oa).toString()+"], ["+Vb(this.Aa).toString()+"]"};function id(a){var b=new hd(a.C);a.xa.forEach(function(a){b.delete(a)});a.Aa.forEach(function(a){b.add(a)});a.oa.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.md=function(){return 0==this.xa.size&&0==this.Aa.size&&0==this.oa.size};function jd(a,b){this.ba=z();b.forEach(function(a){this.ba.set(a.getName(),a)},this);this.h=a.l(qc);this.W=a.l(lc);this.G=a.l(mc);this.ya=new Sc(a);this.kd=new Gc(a);this.yb=z()}function ic(a){var b=[];Vb(a.yb).map(function(a){return this.ba.get(a)},a).forEach(function(a){a.Hb()&&(a.Ca().forEach(function(a){b.push(this.G.get(a.m()))},this),b.push(this.G.get(a.getName()+".#")))},a);return b}m=jd.prototype;m.ea=g("ba");
m.Eb=function(a,b){kd(this,a);Uc(this.ya,a,b);dd(this.ya,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[null,b[c]])};function ld(a,b,c){var d=b.getName(),e=a.yb.get(d)||new hd(d);a.yb.set(d,e);try{Kc(a.kd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.W.set(d,f),e.add(f)):null!==b&&null!==f?(a.W.set(d,f),e.modify(c)):null!==b&&null===f&&(a.W.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){kd(this,a);Uc(this.ya,a,b);var c=b.map(function(a){return[this.W.get(a.id()),a]},this);md(this,a,c);ed(this.ya,a,c,0);c.forEach(function(b){ld(this,a,b)},this)};m.Wd=function(a,b){kd(this,a);Uc(this.ya,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Lb().ed();if(null===h)f=null;else{f=this.ya;var h=h.m(),k=d.pb(h);f=f.G.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.W.get(f),d.ra=f,ed(this.ya,a,[[e,d]],0)):dd(this.ya,a,[d],0);ld(this,a,[e,d])}};
m.remove=function(a,b){kd(this,a);nd(this,a,b);fd(this.ya,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[b[c],null])};function md(a,b,c){b=$c(a.h.info(),b.getName(),1);if(null!==b){var d=cd(a.ya,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.h.table(b.Sd.Ie),d=this.W.get(a),n=c.mb(d.Ia());n.s[b.Sd.zb]=b.yg.s[b.Sd.Mc];ld(this,c,[d,n])},this)},a)}}
function nd(a,b,c){if(null!==$c(a.h.info(),b.getName(),1)){b=gd(a.ya,b,c);var d=b.tf;b.ue.forEach(function(a){var b=this.h.table(a);a=d.get(a).map(function(a){return this.W.get(a)},this);fd(this.ya,b,a,0);a.forEach(function(a){ld(this,b,[a,null])},this)},a)}}function ec(a){a.yb.forEach(function(a){var c=this.ba.get(a.getName());dd(this.ya,c,A(a.xa),1);fd(this.ya,c,A(a.Aa),1);ed(this.ya,c,A(a.oa),1)},a)}m.ja=aa();m.Ob=function(){var a=A(this.yb).map(function(a){return id(a)});this.kd.update(a)};
function kd(a,b){if(!a.ba.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.c=a;this.u=b;this.ga=this.c==G?!1:c;this.na=this.u==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.ga?"(":"[")+(this.c==G?"unbound":this.c)+", "+(this.u==G?"unbound":this.u)+(this.na?")":"]")};function od(a){if(pd(a))return[];var b=null,c=null;a.c==G||(b=new F(G,a.c,!1,!a.ga));a.u==G||(c=new F(a.u,G,!a.na,!1));return[b,c].filter(function(a){return null!==a})}F.prototype.reverse=function(){return new F(this.u,this.c,this.na,this.ga)};
function qd(a,b){var c=rd(a.c,b.c,!0,a.ga,b.ga);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.u==G||d.u>c.c||d.u==c.c&&!d.na&&!c.ga}function sd(){return new F(G,G,!1,!1)}function pd(a){return a.c==G&&a.u==G}function td(a){return a.c==a.u&&a.c!=G&&!a.ga&&!a.na}F.prototype.contains=function(a){var b=this.u==G||a<this.u||a==this.u&&!this.na;return(this.c==G||a>this.c||a==this.c&&!this.ga)&&b};
function rd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function ud(a,b){var c=rd(a.c,b.c,!0,a.ga,b.ga);0==c&&(c=rd(a.u,b.u,!1,a.na,b.na));return c}function vd(a){if(0==a.length)return[];a.sort(ud);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].c,!1,!0):c==b.length-1?new F(a[c-1].u,G,!0,!1):new F(a[c-1].u,a[c].c,!0,!0);return b};function wd(a){this.oc=[];q(a)&&this.add(a)}wd.prototype.toString=function(){return this.oc.map(function(a){return a.toString()}).join(",")};wd.prototype.Oa=function(a){return this.oc.some(function(b){return b.contains(a)})};wd.prototype.qa=g("oc");
wd.prototype.add=function(a){if(0!=a.length)if(a=this.oc.concat(a),1==a.length)this.oc=a;else{a.sort(ud);for(var b=[],c=a[0],d=1;d<a.length;++d)if(qd(c,a[d])){var e=a[d],f=sd();if(c.c!=G&&e.c!=G){var h=rd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ga=0!=h?c.ga:c.ga&&e.ga):(f.c=e.c,f.ga=e.ga)}c.u!=G&&e.u!=G&&(h=rd(c.u,e.u,!1),-1!=h?(f.u=c.u,f.na=0!=h?c.na:c.na&&e.na):(f.u=e.u,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.oc=b}};
function xd(a,b){var c=[];a.qa().map(function(a){return b.qa().map(function(b){var c;if(qd(a,b)){c=sd();var h=rd(a.c,b.c,!0),h=0==h?a.ga?a:b:-1!=h?a:b;c.c=h.c;c.ga=h.ga;a.u==G||b.u==G?b=a.u==G?b:a:(h=rd(a.u,b.u,!1),b=0==h?a.na?a:b:-1==h?a:b);c.u=b.u;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new wd(c.filter(function(a){return null!==a}))};function H(a,b){this.entries=a;this.O=C(b);this.$a=null}H.prototype.w=function(){return D(this.O)};function yd(a){return a.entries.map(function(a){return a.ua.s})}function zd(a){return a.entries.map(function(a){return a.ua.id()})}function Ad(a,b){return a.$a.get(b.m())}var Bd=null;function Cd(){null===Bd&&(Bd=new H([],[]));return Bd}
function Dd(a){if(0==a.length)return Cd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(A(e),D(a[0].O))}function Ed(a){if(0==a.length)return Cd();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(A(b),D(a[0].O))}
function Fd(a,b){var c=1<b.length,d=a.map(function(a){return new Gd(a,c)});return new H(d,b)}function Gd(a,b){this.ua=a;this.id=Hd++;this.Yd=b}var Hd=0;function I(a,b){var c=b.ab();return null!==c&&a.ua.s.hasOwnProperty(c)?a.ua.s[c]:a.Yd?a.ua.s[Id(b.K())][b.getName()]:a.ua.s[b.getName()]}function Jd(a,b,c){var d=b.ab();if(null!=d)a.ua.s[d]=c;else if(a.Yd){var d=Id(b.K()),e=a.ua.s[d];null==e&&(e={},a.ua.s[d]=e);e[b.getName()]=c}else a.ua.s[b.getName()]=c}
function Kd(a,b,c,d){function e(a,b){if(a.Yd){var c=a.ua.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.s}var f={};e(a,b);e(c,d);a=new Wb(-1,f);return new Gd(a,!0)};r("lf.bind",function(a){return new Ld(a)});function Ld(a){this.ha=a}r("lf.Binder",Ld);Ld.prototype.Ba=g("ha");function Md(){this.$e=Nd();var a=Od();this.jc=z();this.jc.set(1,Pd());this.jc.set(2,Qd());this.jc.set(4,a);this.jc.set(3,a);this.jc.set(5,Rd())}var Sd;function Td(){null!=Sd||(Sd=new Md);return Sd}function Ud(a,b,c){return(a.jc.get(b)||null).get(c)||null}function Nd(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Pd(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Od(){var a=Pd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Rd(){var a=Od();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Qd(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.i=this.H=null}var Vd=[];J.prototype.getParent=g("H");J.prototype.cb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Wd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.i||Vd}function Xd(a,b){return K(a)[b]||null}function Yd(a,b,c){b.H=a;null===a.i?a.i=[b]:a.i.splice(c,0,b)}function L(a,b){b.H=a;null===a.i?a.i=[b]:a.i.push(b)}
function Zd(a,b){var c=a.i&&a.i[b];return c?(c.H=null,a.i.splice(b,1),0==a.i.length&&(a.i=null),c):null}J.prototype.removeChild=function(a){return Zd(this,K(this).indexOf(a))};function $d(a,b,c){Xd(a,c).H=null;b.H=a;a.i[c]=b}function ae(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){ae(a,b,c)})};function be(){J.call(this);this.ra=ce++}t(be,J);var ce=0;be.prototype.aa=g("ra");function de(a,b,c){be.call(this);this.J=a;this.value=b;this.F=c;this.zc=Ud(Td(),this.J.L(),this.F);this.Sa=!1;this.fc=b}t(de,be);m=de.prototype;m.Qb=function(){var a=new de(this.J,this.value,this.F);a.fc=this.fc;a.xd(this.Sa);var b=this.aa();a.ra=b;return a};m.nb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.w=function(a){a=null!=a?a:C();a.add(this.J.K());return a};m.xd=ca("Sa");
function ee(a){var b=!1;a.value instanceof Ld||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Ld}):!0);if(!b)throw new E(501);}m.eval=function(a){ee(this);if("in"==this.F)return fe(this,a);var b=a.entries.filter(function(a){return this.zc(I(a,this.J),this.value)!=this.Sa},this);return new H(b,a.w())};
m.bind=function(a){if(this.fc instanceof Ld){var b=this.fc.Ba();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.fc)&&(this.value=this.fc.map(function(b){if(b instanceof Ld){var d=b.Ba();if(a.length<=d)throw new E(510);return a[b.Ba()]}return b}))};function fe(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Sa}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.J))},a);return new H(e,b.w())}
m.toString=function(){return"value_pred("+this.J.m()+" "+this.F+(this.Sa?"(complement)":"")+" "+this.value+")"};m.od=function(){ee(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
m.we=function(){var a=null;if("between"==this.F)a=new F(ge(this,this.value[0]),ge(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(a){return new F(a,a,!1,!1)}),new wd(this.Sa?vd(a):a);a=ge(this,this.value);a="eq"==this.F?new F(a,a,!1,!1):"gte"==this.F?new F(a,G,!1,!1):"gt"==this.F?new F(a,G,!0,!1):"lte"==this.F?new F(G,a,!1,!1):new F(G,a,!1,!0)}return new wd(this.Sa?od(a):[a])};function ge(a,b){return 2==a.J.L()?b.getTime():b};function he(a){this.ca=a;this.Zc=this.Fa=null}function ie(a,b){null===a.Fa&&null!=a.B&&(a.Fa=je(a.B));return a.Fa.get(b)||null}function je(a){var b=z();ae(a,function(a){b.set(a.aa(),a)});return b}function ke(a,b){b.B&&(a.B=b.B.Qb());a.Zc=b}he.prototype.bind=function(){return this};function le(a,b){var c=a.B;null!=c&&ae(c,function(a){a instanceof de&&a.bind(b)})};function ne(a){he.call(this,a)}t(ne,he);function oe(a){var b="";a.forEach(function(c,d){b+=c.J.m()+" ";b+=1==c.sb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ne.prototype.ea=function(){return C(this.c)};ne.prototype.clone=function(){var a=new ne(this.ca);ke(a,this);this.g&&(a.g=this.g.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.N=this.N;this.S&&(a.S=this.S.slice());this.ka&&(a.ka=this.ka.slice());this.Vb&&(a.Vb=this.Vb);this.bc&&(a.bc=this.bc);a.Gb=this.Gb;return a};
ne.prototype.bind=function(a){ne.ib.bind.call(this,a);null!=this.Vb&&(this.X=a[this.Vb.Ba()]);null!=this.bc&&(this.N=a[this.bc.Ba()]);le(this,a);return this};function pe(a,b){this.Ga=a;this.ba=b}pe.prototype.cb=g("Ga");pe.prototype.ea=g("ba");function qe(a){var b=C();a.forEach(function(a){a.ea().forEach(b.add.bind(b))});return b};function re(a,b){this.global=a;this.Na=a.l(kc);this.ud=b.map(function(a){return a.context});this.kf=b.map(function(a){return a.je});this.Md=qe(this.kf);this.ye=se(this);this.gb=x()}function se(a){return a.ud.some(function(a){return!(a instanceof ne)})?1:0}m=re.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.cb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.ye?void 0:new jd(this.global,this.Md),c=[],d=this.kf.slice(),e=this.ud;return a().then(function(){return this.Na.Jb(this.ye,D(this.Md),b).ja()}.bind(this)).then(function(){this.ge(c);return c}.bind(this),function(a){null!=b&&b.Ob();throw a;})};m.L=g("ye");m.ea=g("Md");m.Rb=g("gb");m.aa=function(){return ka(this)};m.ge=aa();function te(a,b){re.call(this,a,b);this.Nb=a.l(pc)}t(te,re);te.prototype.getPriority=l(0);te.prototype.ge=function(a){this.ud.forEach(function(b,c){ue(this.Nb,b,a[c])},this)};function ve(a,b){this.f=a;this.Nb=a.l(pc);this.Ha=a.l(oc);this.kd=new Gc(a);this.yb=b;var c=a.l(qc),d=this.yb.map(function(a){return c.table(a.getName())});this.ba=C(d);this.gb=x()}m=ve.prototype;m.exec=function(){this.kd.update(this.yb);this.Pc();return w()};m.L=l(1);m.ea=g("ba");m.Rb=g("gb");m.aa=function(){return ka(this)};m.getPriority=l(1);m.Pc=function(){var a=we(this.Nb,this.ba);0!=a.length&&(a=new te(this.f,a),xe(this.Ha,a))};function ye(a){this.f=a;this.Na=a.l(kc);this.Ha=a.l(oc)}ye.prototype.ee=function(a){a=new ve(this.f,a);xe(this.Ha,a)};function M(a,b){this.Ra=a;this.j=b;this.Xa=z()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.fd=g("j");M.prototype.gd=function(){throw new E(351);};function ze(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.fa}function Ae(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.fa}
M.prototype.Da=function(a){return ze(this.j,"@rev/R").then(function(a){this.Qa=a;return ze(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Xa.set(d,b[d]),b[d]>c&&(c=b[d]);a.va().forEach(function(a){this.Xa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return Ae(d,b)}.bind(this))};
function Be(a,b,c){var d=a.Xa.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.fa}.call(a).then(function(a){a["@rev"]={R:++this.Qa};return Ae(this.j,a)}.bind(a)):w()}M.prototype.xc=function(a){return Be(this,a,l(null)).then(function(){this.Xa.delete(a);return Ae(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.xc;
M.prototype.uc=function(a,b,c){return Be(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Qa+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.uc;M.prototype.yc=function(a,b){return Be(this,a,function(a){var d=a.P;delete d[b];return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.yc;M.prototype.Oc=function(a,b,c){return Be(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Qa+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Oc;
M.prototype.Bb=function(){throw new E(351);};M.prototype.createRow=M.prototype.Bb;M.prototype.Gc=g("Ra");M.prototype.getVersion=M.prototype.Gc;M.prototype.hc=function(a){var b=x();a=this.Xa.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.fa};M.prototype.dump=function(){var a={},b=Vb(this.Xa).map(function(b){return this.hc(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Ce(a,b,c){bc.call(this,b,c);this.j=a}t(Ce,bc);Ce.prototype.K=function(a){return this.j.Ec(a)};
Ce.prototype.wc=function(){if(0==this.xe)return this.U.resolve(),this.U.fa;var a=this.Ta.yb;if(0==a.size)this.U.resolve();else{var b=this.j.Qa+1;this.j.Qa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Xa.get(e);a.xa.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.oa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.Aa.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.U.resolve():(this.j.Qa=b-1,c=A(a).map(function(a){return De(this.j,a.getName())},this),
eb(c).then(this.U.reject.bind(this.U),this.U.reject.bind(this.U)))}.bind(this))}return this.U.fa};function Ee(){this.za=z()}function Fe(a,b){if(0==b.length)return A(a.za);var c=[];b.forEach(function(a){a=this.za.get(a)||null;null===a||c.push(a)},a);return c}Ee.prototype.getData=g("za");Ee.prototype.get=function(a){return w(Fe(this,a))};function Ge(a,b){b.forEach(function(a){this.za.set(a.id(),a)},a)}Ee.prototype.put=function(a){Ge(this,a);return w()};function He(a,b){0==b.length||b.length==a.za.size?a.za.clear():b.forEach(function(a){this.za.delete(a)},a)}
Ee.prototype.remove=function(a){He(this,a);return w()};function Ie(a){return 0==a.za.size?0:Vb(a.za).reduce(function(a,c){return a>c?a:c},0)};function Je(a,b){this.h=a;this.Ff=b;this.Nc=z();this.Qa=-1;this.O=z();this.Xa=z();this.Jd=null}m=Je.prototype;
m.Da=function(a){this.j=this.Ff.child(this.h.name());var b=a||function(){return w()};return ze(this.j,"@db/version").then(function(a){return null===a?Ae(this.j,Ke(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.h.version()?ze(this.j,"@rev/R").then(function(a){this.Qa=a;return ze(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Xa.set(b,a[b]);a=this.h.va().map(function(a){return De(this,a.getName())},this);
return eb(a)}.bind(this)).then(function(){Le(this);Me(this);return w()}.bind(this)):this.he(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.he=function(a,b){var c=new M(a,this.j);return c.Da(this.h).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return Ae(a,{version:this.h.version()},!0)}.bind(this))};
function Me(a){a.j.off();a.j.on("child_removed",a.vg.bind(a));a.Kd&&(a.Kd.off(),a.Nc.clear());a.Kd=a.j.orderByChild("R").startAt(a.Qa+1);a.Kd.on("value",a.ee.bind(a))}function Le(a){Xb=A(a.O).map(function(a){return Ie(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.vg=function(a){var b=a.val(),c=this.Nc.get(b.T)||null;null===c&&(c=C(),this.Nc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.ee=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=Ne(this,a),a.forEach(function(a){var b=this.O.get(a.getName()),e=Vb(a.Aa);0<e.length&&He(b,e);var f=A(a.xa);a.oa.forEach(function(a){f.push(a[1])});Ge(b,f)},this),0<a.length&&this.Jc(a),Me(this))};
function Ne(a,b){var c=C(),d=z();a.Xa.forEach(function(a,b){var h=this.O.get(b),k=new hd(b);if(this.Nc.has(a)){var n=D(this.Nc.get(a));n.forEach(function(a){c.add(a)});Fe(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.O.get(a.getName()),h=this.h.table(a.getName()).mb({id:b,value:h.P});k.getData().has(b)?a.modify([Fe(k,[b])[0],h]):a.add(h)}}}.bind(a));return A(d).filter(function(a){return!a.md()})}
function De(a,b){var c=x(),d=a.Xa.get(b),e=a.h.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ee,k=[];a.forEach(function(a){k.push(e.mb({id:parseInt(a.key(),10),value:a.val().P}))});Ge(d,k);this.O.set(b,d);c.resolve()}.bind(a));return c.fa}function Ke(a){var b={};b["@db"]={version:a.h.version()};b["@rev"]={R:1};a.Qa=1;b["@table"]={};a.h.va().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.O.set(e,new Ee);this.Xa.set(e,d)},a);return b}
m.Jb=function(a,b,c){return new Ce(this,a,c)};m.Ec=function(a){var b=this.O.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ca("Jd");m.Jc=function(a){null!=this.Jd&&this.Jd(a)};function N(a,b,c,d){this.j=b;this.Za=c;this.Ra=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.fd=g("j");N.prototype.getRawDBInstance=N.prototype.fd;N.prototype.gd=g("Za");N.prototype.getRawTransaction=N.prototype.gd;N.prototype.xc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.xc;
function Oe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Za.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Pe(a){var b=null;return b=a instanceof ArrayBuffer?$b(a):a instanceof Date?a.getTime():a}
function Qe(a,b,c){function d(a){var b=Bc(a.value),d=b.s,e;for(e in d){var B=Yb(d[e]);c(B);d[e]=B.Ia()}a.update(b.Ia())}function e(a){var b=Yb(a.value);c(b);a.update(b.Ia())}return Oe(a,b,a.Xc?d:e,aa())}N.prototype.uc=function(a,b,c){var d=Pe(c);return Qe(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.uc;N.prototype.yc=function(a,b){return Qe(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.yc;
N.prototype.Oc=function(a,b,c){return Qe(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Oc;function Re(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Za.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Xc){var e;e=Bc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.Bb=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return Zb(b)};
N.prototype.createRow=N.prototype.Bb;N.prototype.Gc=g("Ra");N.prototype.getVersion=N.prototype.Gc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.hc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.hc=function(a){return Re(this,a).then(function(a){return a.map(function(a){return a.value})})};function Se(a,b){this.Z=a;this.Kb=b}Se.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?Te(this):Ue(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Z.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Ue(a){return new v(function(a,c){var d=[],e;try{e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Kb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Te(a){return new v(function(a,c){var d;try{d=this.Z.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Kb(a)},this);a(c)}.bind(this)},a)}
Se.prototype.Wb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Se.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Wb(function(){return this.Z.put(a.Ia())}.bind(this))},this);return eb(a)};
Se.prototype.remove=function(a){return new v(function(b,c){var d=this.Z.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Wb(function(){return this.Z.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Wb(function(){return this.Z.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ve(a,b,c,d,e){bc.call(this,c,e);this.f=a;this.Za=b;this.Xc=d;this.Za.oncomplete=this.U.resolve.bind(this.U);this.Za.onabort=this.U.reject.bind(this.U)}t(Ve,bc);Ve.prototype.K=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.Za.objectStore(a),new Cc(a,b,0==c?qa(Ec,this.f):Fc)):new Se(this.Za.objectStore(a),b)};Ve.prototype.wc=function(){return this.U.fa};function We(a,b){this.f=a;this.h=b;this.Gd=b.lf().Rf||!1}m=We.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.h.name(),this.h.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new E(361,a.name,a.message))};f.onupgradeneeded=function(a){Xe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.qe().then(function(b){Xb=b+1;a(this.j)}.bind(this))}.bind(this)},
this)};function Xe(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Gd);Ye(d);a.h.va().forEach(qa(a.Mf,d),a);return b(c)}function Ye(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Mf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Hb()&&(b.Ca().forEach(function(b){Ze(a,b.m())},this),Ze(a,$e(b)))};function Ze(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Jb=function(a,b,c){b=this.j.transaction(af(b),0==a?"readonly":"readwrite");return new Ve(this.f,b,a,this.Gd,c)};
function af(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Hb()&&(a.Ca().forEach(function(a){b.add(a.m())}),b.add($e(a)))});return D(b)}
m.qe=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.h.va().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Gd?(a=Bc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.Ec=function(){throw new E(511);};m.subscribe=aa();m.Jc=aa();function bf(a,b,c){bc.call(this,b,c);this.Z=a;0==b&&this.U.resolve()}t(bf,bc);bf.prototype.K=function(a){return this.Z.Ec(a)};bf.prototype.wc=function(){this.U.resolve();return this.U.fa};function cf(a){this.h=a;this.O=z()}m=cf.prototype;m.Da=function(){this.h.va().forEach(this.eg,this);return w()};m.Ec=function(a){var b=this.O.get(a)||null;if(null===b)throw new E(101,a);return b};m.Jb=function(a,b,c){return new bf(this,a,c)};function df(a,b){if(!a.O.has(b)){var c=new Ee;a.O.set(b,c)}}m.eg=function(a){df(this,a.getName());a.Hb()&&(a.Ca().forEach(function(a){df(this,a.m())},this),df(this,$e(a)))};m.close=aa();m.subscribe=aa();m.Jc=aa();function ef(a){cf.call(this,a);this.rd=null}t(ef,cf);ef.prototype.subscribe=function(a){null===this.rd&&(this.rd=a)};ef.prototype.Jc=function(a){null===this.rd||this.rd(a)};function ff(a,b,c){this.Za=a;this.C=b;this.Kb=c}ff.prototype.get=function(a){var b=this.Kb;return gf(this.Za,"SELECT id, value FROM "+this.C+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
ff.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.C+"(id, value) VALUES (?, ?)";a.forEach(function(a){gf(this.Za,b,[a.id(),JSON.stringify(a.s)])},this);return w()};ff.prototype.remove=function(a){gf(this.Za,"DELETE FROM "+this.C+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function hf(a,b,c){bc.call(this,b,c);this.j=a;this.O=z();this.Nd=[]}t(hf,bc);function jf(a){return a.replace(".","__d__").replace("#","__s__")}hf.prototype.K=function(a,b){var c=this.O.get(a)||null;null===c&&(c=new ff(this,jf(a),b),this.O.set(a,c));return c};function gf(a,b,c,d){var e=x();a.Nd.push({Jg:b,zg:c,transform:d,U:e});return e.fa}
hf.prototype.wc=function(){var a=null,b=this.U.reject.bind(this.U),c=function(a,b){this.U.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.U.resolve(k)}0<this.Nd.length?(a=k=this.Nd.shift(),b.executeSql(k.Jg,k.zg,e,c)):this.U.resolve(d)}.bind(this);0==this.xe?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.U.fa};function P(a,b,c){this.j=c;this.f=a;this.Ra=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.fd=g("j");P.prototype.getRawDBInstance=P.prototype.fd;P.prototype.gd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.gd;function kf(a){return new hf(a.j,1,new jd(a.f,C()))}P.prototype.xc=function(a){var b=kf(this);gf(b,"DROP TABLE "+a,[]);return b.ja()};P.prototype.dropTable=P.prototype.xc;
P.prototype.hc=function(a){var b=kf(this);gf(b,"SELECT id, value FROM "+a,[]);return b.ja().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function mf(a,b,c){var d=kf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.hc(b).then(function(a){a.forEach(function(a){a=c(a);gf(d,e,[JSON.stringify(a.value),a.id])});return d.ja()})}
P.prototype.uc=function(a,b,c){var d=Pe(c);return mf(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.uc;P.prototype.yc=function(a,b){return mf(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.yc;P.prototype.Oc=function(a,b,c){return mf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Oc;P.prototype.Bb=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return Zb(b)};
P.prototype.createRow=P.prototype.Bb;P.prototype.Gc=g("Ra");P.prototype.getVersion=P.prototype.Gc;function nf(a){gf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=kf(this);nf(b);var c={};b.ja().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.hc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.fa};P.prototype.dump=P.prototype.dump;function of(a,b,c){this.f=a;this.h=b;this.Ig=c||1}m=of.prototype;m.Da=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a){var d=window.openDatabase(this.h.name(),"",this.h.name(),this.Ig);if(null!=d)this.j=d,pf(this,b).then(a,function(a){if(a instanceof E)throw a;throw new E(354,a.message);});else throw new E(354);},this)};
function pf(a,b){var c=x(),d=new hf(a.j,1,new jd(a.f,C()));gf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);gf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ja().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.h.version()?this.he(b,d).then(c.resolve.bind(c)):d>this.h.version()?c.reject(new E(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.fa}m.Jb=function(a,b,c){if(null!=this.j)return new hf(this.j,a,c);throw new E(2);};m.close=aa();
m.Ec=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Jc=function(){throw new E(355);};m.he=function(a,b){var c=x();qf(this).then(function(){a(new P(this.f,b,this.j)).then(function(){return this.qe()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.fa};
function qf(a){var b=a.h.va(),c=new hf(a.j,1,new jd(a.f,C())),d=new hf(a.j,1,new jd(a.f,C()));gf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.h.version()]);nf(c);return c.ja().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){gf(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Hb&&(a.Ca().forEach(function(a){a=jf(a.m());h.push(a);k.push(a)}),a=jf($e(a)),h.push(a),n.push(a))});h.forEach(function(a){gf(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ja()})}m.qe=function(){var a=0,b=x(),c=function(b){var c=new hf(this.j,0);gf(c,"SELECT MAX(id) FROM "+b,[]);return c.ja().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.h.va().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.fa};function rf(a){this.o=z();this.cc=z();a.va().forEach(function(a){this.cc.set(a.getName(),C())},this)}m=rf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.cc.get(a).add(b.id())};m.Zb=function(a,b){var c=this.cc.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function sf(a,b){return b.map(function(a){return this.get(a)},a)}
m.bb=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.cc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.cc.get(a).delete(b)};m.Dc=function(a){return null!=a?this.cc.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.cc.clear()};function tf(a,b,c){var d=0,e=a.length;for(c=c||uf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function uf(a,b){return a-b}function vf(a,b,c){c=tf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function wf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function xf(){this.ma=0}xf.prototype.add=function(a,b){this.ma+=b};xf.prototype.remove=function(a,b){this.ma-=b};xf.prototype.clear=function(){this.ma=0};function yf(a,b){a.clear();b.forEach(function(a){this.ma+=a.ma},a)};function zf(a,b,c,d){this.C=a;this.$=b;this.Af=c;this.wb=new xf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=Af(this,d);this.ta=d=Bf(d)}else this.clear()}var Cf=[];m=zf.prototype;m.getName=g("C");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.Eb(a,b)};m.set=function(a,b){this.ta=this.ta.Eb(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.ad=function(a){if(null==a)return this.Ma().ma;if(a instanceof F){if(pd(a))return this.Ma().ma;if(td(a))return this.get(a.c).length}return this.bb([a]).length};m.Ma=g("wb");m.Ud=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.wb.ma-a-d:d,count:a,te:0},c);return b?c.reverse():c};
m.bb=function(a,b,c,d){var e=Df(this.ta).b[0];if(!q(e)||0==c)return Cf;b=b||!1;c=null!=c?Math.min(c,this.wb.ma):this.wb.ma;d=d||0;var f=Math.min(Math.max(this.wb.ma-d,0),c);if(0==f)return Cf;if(!q(a)||1==a.length&&a[0]instanceof F&&pd(a[0]))return this.Ud(f,b,c,d);a=this.$.wf(a);var h=Array(b?this.wb.ma:f),k={count:0,X:h.length,reverse:b,N:d},n=1<this.lb().$d();a.forEach(function(a){for(var b=this.$.vd(a),b=this.$.Xd(a)?e:b[0],b=this.ta.Yf(b),c=0;null!=b&&k.count<k.X;){if(n){for(var d=b,f=a,cc=k,
Bb=h,Tc=d.A.lb(),me=-1,La=0;La<d.b.length;++La)if(Tc.Fb(d.b[La],f)){me=La;break}if(-1!=me)for(La=me;La<d.b.length&&cc.count<cc.X;++La)Tc.Fb(d.b[La],f)&&Ef(d,cc,Bb,La)}else b.bb(a,k,h);0!=k.N||b.nd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?wf(h,b,c,d):h};m.clear=function(){this.ta=Ff(this);this.wb.clear()};m.Oa=function(a){return this.ta.Oa(a)};m.min=function(){return this.Mb(this.$.min.bind(this.$))};m.max=function(){return this.Mb(this.$.max.bind(this.$))};
function Gf(a,b,c){if(!a.$.Od(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.Af?[b.D[c]]:b.D[c]]}m.Mb=function(a){var b;a:{b=Df(this.ta);var c=0;do if(c>=b.b.length)b=b.wa,c=0;else{var d=Gf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Hf(this.ta);d=c.b.length-1;do if(0>d)c=c.tb,d=0;else{var e=Gf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ka=g("Af");m.lb=g("$");
m.Pa=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.Ia=function(){for(var a=[],b=Df(this.ta);b;)a.push(new Wb(b.ra,[b.b,b.D])),b=b.wa;return a};function If(a,b,c,d){a=new zf(b,a,c);d=Jf(d,a);a.ta=d;return a}function Kf(a,b){this.ra=a;this.A=b;this.ob=0;this.wa=this.tb=this.H=null;this.b=[];this.D=[];this.i=[];this.Yf=1==b.lb().$d()?this.Qe:this.Pe}function Ff(a){return new Kf(Xb++,a)}function Q(a){return 0==a.ob}m=Kf.prototype;m.next=g("wa");
function Lf(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.b.join("|")+"]",d=a.i.map(function(a){return a.ra}).join("|"),e=a.D.join("/"),f=b(a.tb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.H);a.wa&&(a=Lf(a.wa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Lf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i.length&&(a+=this.i[0].toString());return a};function Df(a){return Q(a)?a:Df(a.i[0])}function Hf(a){return Q(a)?a:Hf(a.i[a.i.length-1])}
function Mf(a,b){b&&(b.tb=a);a&&(a.wa=b)}function Af(a,b){for(var c=b.length,d=0,e=Ff(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.D=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Ff(e.A),Mf(e,h),e=h)}return f}function Nf(a){var b=a[0],c=Ff(b.A);c.ob=b.ob+1;c.i=a;for(b=0;b<a.length;++b)a[b].H=c,0<b&&c.b.push(a[b].b[0]);return c}
function Bf(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=Nf(c);else{var d=c.length,e=0,b=Ff(a.A);for(b.ob=a.ob+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Nf(f);h.H=b;b.i.length&&(b.b.push(f[0].b[0]),Mf(b.i[b.i.length-1],h));b.i.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Of(this,a);if(Q(this)){var c=Cf;this.A.Pa(this.b[b],a)&&(c=c.concat(this.D[b]));return c}b=this.A.Pa(this.b[b],a)?b+1:b;return this.i[b].get(a)};
m.Oa=function(a){var b=Of(this,a);return this.A.Pa(this.b[b],a)?!0:Q(this)?!1:this.i[b].Oa(a)};m.remove=function(a,b){Pf(this,a,-1,b);if(null===this.H){var c=this;1==this.i.length&&(c=this.i[0],c.H=null);return c}return this};function Qf(a){return Q(a)?a.b[0]:Qf(a.i[0])}function Rf(a){a.b=[];for(var b=1;b<a.i.length;++b)a.b.push(Qf(a.i[b]))}
function Pf(a,b,c,d){var e=Of(a,b),f=Q(a);if(!f){var h=a.A.Pa(a.b[e],b)?e+1:e;if(Pf(a.i[h],b,h,d))Rf(a);else return!1}else if(!a.A.Pa(a.b[e],b))return!1;if(a.b.length>e&&a.A.Pa(a.b[e],b)){if(q(d)&&!a.A.Ka()&&f&&(h=a.D[e],d=tf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.A.Ma().remove(b,1),a.D[e].length))return!1;a.b.splice(e,1);f&&(f=a.A.Ka()?1:a.D[e].length,a.D.splice(e,1),a.A.Ma().remove(b,f))}if(256>a.b.length&&null!==a.H){a:{b=null;if(a.wa&&256<a.wa.b.length)b=a.wa,e=d=0,f=a.b.length+1;else if(a.tb&&
256<a.tb.b.length)b=a.tb,d=a.tb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.D:a.i;h=null;Q(a)?h=b.D:(h=b.i,h[e].H=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Rf(b),Rf(a));b=!0}b||Sf(a,c)}return!0}
function Sf(a,b){var c,d,e;a.wa&&511>a.wa.b.length?(c=a.wa,e=d=0):a.tb&&(c=a.tb,d=c.b.length,e=Q(c)?c.D.length:c.i.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.D:(d=a.i,d.forEach(function(a){a.H=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.D:c.i,d);Mf(a.tb,a.wa);Q(c)||Rf(c);-1!=b&&(a.H.b.splice(b,1),a.H.i.splice(b,1))}
m.Eb=function(a,b,c){var d=Of(this,a);if(Q(this)){if(this.A.Pa(this.b[d],a)){if(c)this.A.Ma().remove(a,this.A.Ka()?1:this.D[d].length),this.D[d]=this.A.Ka()?b:[b];else{if(this.A.Ka())throw new E(201);if(!vf(this.D[d],b))throw new E(109);}this.A.Ma().add(a,1);return this}this.b.splice(d,0,a);this.D.splice(d,0,this.A.Ka()?b:[b]);this.A.Ma().add(a,1);512==this.b.length?(d=Ff(this.A),a=Ff(this.A),a.ob=1,a.b=[this.b[256]],a.i=[this,d],a.H=this.H,this.H=a,d.b=this.b.splice(256),d.D=this.D.splice(256),d.H=
a,Mf(d,this.wa),Mf(this,d),d=a):d=this;return d}d=this.A.Pa(this.b[d],a)?d+1:d;a=this.i[d].Eb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.i[1].H=this,a.i[0].H=this,this.i.splice(d,1,a.i[1]),this.i.splice(d,0,a.i[0]));return 512==this.b.length?Tf(this):this};function Tf(a){var b=Ff(a.A),c=Ff(a.A);b.H=a.H;b.ob=a.ob+1;b.b=[a.b[256]];b.i=[a,c];a.b.splice(256,1);c.H=b;c.ob=a.ob;c.b=a.b.splice(256);c.i=a.i.splice(257);c.i.forEach(function(a){a.H=c});a.H=b;Mf(c,a.wa);Mf(a,c);return b}
function Of(a,b){for(var c=0,d=a.b.length,e=a.A.lb();c<d;){var f=c+d>>1;-1==e.compare(a.b[f],b)?c=f+1:d=f}return c}m.Qe=function(a){if(!Q(this)){var b=Of(this,a);this.A.Pa(this.b[b],a)&&b++;return this.i[b].Qe(a)}return this};m.Pe=function(a){if(!Q(this)){var b=Of(this,a);this.A.Pa(this.b[b],a)&&(a.some(function(a){return a==G})||b++);return this.i[b].Pe(a)}return this};
m.bb=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.A.lb(),f=0,h=this.b.length-1,k=this.b,n=d(e.Ab(k[f],a)),B=d(e.Ab(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.Ab(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.Ab(k[h],a));return 0==n?ba(b,h,n):-1==n?ba(h+1,c,f):ba(b+1,h,n)},Ab=function(b,c){if(b>=c)return b;var f=d(e.Ab(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.Ab(k[f],a));return 0==h?Ab(f,c):1==h?Ab(b,f-1):-1};0!=n&&(f=ba(f+1,h,B));-1!=f&&(h=Ab(f,h),-1!=h&&h>=f&&Uf(this,b,c,f,h+1))}};function Ef(a,b,c,d){if(a.A.Ka())!b.reverse&&b.N?b.N--:c[b.count++]=a.D[d];else for(var e=0;e<a.D[d].length&&b.count<c.length;++e)!b.reverse&&b.N?b.N--:c[b.count++]=a.D[d][e]}function Uf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Ef(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.D.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.A.Ka()?1:this.D[c].length,0>a.offset)for(var d=this.D[c].length+a.offset;d<this.D[c].length&&0<a.count;++d)b[a.te++]=this.D[c][d],a.count--}else if(this.A.Ka())b[a.te++]=this.D[c],a.count--;else for(d=0;d<this.D[c].length&&0<a.count;++d)b[a.te++]=this.D[c][d],a.count--;else for(c=0;c<this.i.length&&0<a.count;++c)this.i[c].fill(a,b)};
function Jf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new Kf(a.id(),b);d.b=a.s[0];d.D=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ka()?1:d.D[e].length)});return d}),e=0;e<d.length-1;++e)Mf(d[e],d[e+1]);return 1<d.length?Bf(d[0]):d[0]}m.nd=function(a){return this.A.lb().nd(this.b[0],a)};function Vf(a){this.$c=0==a?Wf:Xf;this.ce=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ie=0==a?Yf:$f}function Xf(a,b){return a>b?1:a<b?-1:0}function Wf(a,b){return Xf(b,a)}function $f(a,b){return ud(a,b)}function Yf(a,b){return ud(b,a)}m=Vf.prototype;m.Ab=function(a,b){var c=this.ce(b),d=[c.c==G,c.u==G];if(!d[0]){var e=this.$c(a,c.c);d[0]=c.ga?1==e:-1!=e}d[1]||(e=this.$c(a,c.u),d[1]=c.na?-1==e:1!=e);return d};m.compare=function(a,b){return this.$c(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Fb=function(a,b){var c=this.Ab(a,b);return c[0]&&c[1]};m.nd=function(a,b){return this.Fb(a,b)};m.wf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ie(a,c)}.bind(this))};m.Xd=function(a){return this.ce(a).c==G};m.vd=function(a){a=this.ce(a);return[a.c,a.u]};m.Od=function(a){return null!==a};m.$d=l(1);
m.toString=function(){return this.compare==Wf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function ag(a){Vf.call(this,a);this.$c=0==a?bg:cg}t(ag,Vf);function cg(a,b){return null===a?null===b?0:-1:null===b?1:Xf(a,b)}function bg(a,b){return cg(b,a)}ag.prototype.Fb=function(a,b){return null===a?pd(b):ag.ib.Fb.call(this,a,b)};ag.prototype.Mb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};ag.prototype.min=function(a,b){var c=this.Mb(a,b);null===c&&(c=ag.ib.min.call(this,a,b));return c};
ag.prototype.max=function(a,b){var c=this.Mb(a,b);null===c&&(c=ag.ib.max.call(this,a,b));return c};function dg(a){this.pa=a.map(function(a){return new Vf(a)})}function eg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=dg.prototype;m.compare=function(a,b){return eg(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return eg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return eg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.Ab=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].Ab(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Fb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Fb(a[d],b[d]);return c};m.nd=function(a,b){return this.pa[0].Fb(a[0],b[0])};
m.wf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ie(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.pa.length&&0==c;++h)c=this.pa[h].ie(a[h],b[h]);return c}.bind(this))};m.Xd=function(a){return this.pa[0].Xd(a[0])};
m.vd=function(a){var b=a.map(function(a,b){return this.pa[b].vd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].vd(a)[1]},this);return[b,a]};m.Od=function(a){return a.every(function(a,c){return this.pa[c].Od(a)},this)};m.$d=function(){return this.pa.length};function fg(a){dg.call(this,a);this.pa=a.map(function(a){return new ag(a)})}t(fg,dg);function gg(a){if(1==a.g.length)return new Vf(a.g[0].sb);var b=a.g.map(function(a){return a.sb});return a.g.some(function(a){return a.ca.lc()})?new fg(b):new dg(b)};function hg(a){this.ha=a;this.qb=C();this.Qc=new xf;this.wb=new xf}m=hg.prototype;m.getName=function(){return this.ha.getName()};m.add=function(a,b){null===a?(this.qb.add(b),this.Qc.add(a,1)):this.ha.add(a,b)};m.set=function(a,b){null===a?(this.qb.clear(),this.Qc.clear(),this.add(a,b)):this.ha.set(a,b)};m.remove=function(a,b){null===a?b?(this.qb.delete(b),this.Qc.remove(a,1)):(this.qb.clear(),this.Qc.clear()):this.ha.remove(a,b)};m.get=function(a){return null===a?D(this.qb):this.ha.get(a)};m.ad=function(a){return this.ha.ad(a)};
m.Ma=function(){yf(this.wb,[this.ha.Ma(),this.Qc]);return this.wb};m.bb=function(a,b,c,d){b=this.ha.bb(a,b,c,d);return null!=a?b:b.concat(D(this.qb))};m.clear=function(){this.qb.clear();this.ha.clear()};m.Oa=function(a){return null===a?0!=this.qb.size:this.ha.Oa(a)};m.min=function(){return this.ha.min()};m.max=function(){return this.ha.max()};m.Ia=function(){return[new Wb(-2,D(this.qb))].concat(this.ha.Ia())};m.lb=function(){return this.ha.lb()};
function ig(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new hg(c);d.forEach(function(a){f.qb.add(a)});return f}m.Ka=function(){return this.ha.Ka()};function jg(a){this.C=a;this.vb=C();this.$=new Vf(1)}m=jg.prototype;m.getName=g("C");m.add=function(a){if("number"!=typeof a)throw new E(103);this.vb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.vb.delete(a)};m.get=function(a){return this.Oa(a)?[a]:[]};m.min=function(){return this.Mb(this.$.min.bind(this.$))};m.max=function(){return this.Mb(this.$.max.bind(this.$))};
m.Mb=function(a){if(0==this.vb.size)return null;var b=D(this.vb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.ad=function(){return this.vb.size};m.bb=function(a,b,c,d){var e=a||[sd()];a=D(this.vb).filter(function(a){return e.some(function(b){return this.$.Fb(a,b)},this)},this);return wf(a,b,c,d)};m.clear=function(){this.vb.clear()};m.Oa=function(a){return this.vb.has(a)};m.Ia=function(){return[new Wb(0,D(this.vb))]};m.lb=g("$");
function kg(a,b){var c=new jg(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ka=l(!0);m.Ma=function(){var a=new xf;a.ma=this.vb.size;return a};function lg(a){this.Na=a.l(kc);this.G=a.l(mc);this.W=a.l(lc)}lg.prototype.Da=function(a){var b=a.va(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Hb()?mg(this,a):ng(this,a)).then(c)}.bind(this);return c()};function ng(a,b){var c=a.Na.Jb(0,[b]),d=c.K(b.getName(),b.mb.bind(b),0).get([]).then(function(a){this.W.Zb(b.getName(),a);og(this,b,a)}.bind(a));c.ja();return d}
function og(a,b,c){var d=a.G.pc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.pb(b.getName());b.add(c,a.id())})})}function mg(a,b){var c=a.Na.Jb(0,[b]),d=c.K(b.getName(),b.mb,0).get([]).then(function(a){this.W.Zb(b.getName(),a)}.bind(a)),e=b.Ca().map(function(a){return pg(this,a,c)},a).concat(qg(a,b,c));c.ja();return eb(e.concat(d))}
function pg(a,b,c){c=c.K(b.m(),Yb,1);var d=gg(b);return c.get([]).then(function(a){if(0<a.length){if(rg(b)){var c=If.bind(void 0,d,b.m(),b.Hc);a=ig(c,a)}else a=If(d,b.m(),b.Hc,a);this.G.set(b.qc,a)}}.bind(a))}function qg(a,b,c){return c.K($e(b),Yb,1).get([]).then(function(a){0<a.length&&(a=kg($e(b),a),this.G.set(b.getName(),a))}.bind(a))};function sg(){this.Z=z();this.pc=z()}sg.prototype.Da=function(a){a.va().forEach(function(a){var c=[];this.pc.set(a.getName(),c);var d=$e(a);if(null===this.get(d)){var e=new jg(d);c.push(e);this.Z.set(d,e)}a.Ca().forEach(function(a){var b;b=gg(a);b=new zf(a.m(),b,a.Hc);b=rg(a)&&1==a.g.length?new hg(b):b;c.push(b);this.Z.set(a.m(),b)},this)},this);return w()};sg.prototype.get=function(a){return this.Z.get(a)||null};
sg.prototype.set=function(a,b){var c=this.pc.get(a)||null;null===c&&(c=[],this.pc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Z.set(b.getName(),b)};function tg(a,b){var c=[],d=null,e=null;ae(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.i?c[c.length-1]:h});return e}function ug(a){return vg(a,function(a){return null===a.i})}
function wg(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Yd(b,d,c+f)});return{parent:b,children:d}}function xg(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function yg(a){var b=Xd(a,0);wg(a);xg(b,a);return b}
function zg(a,b,c){var d=Xd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;wg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Zd(d,h);L(k,e);Yd(d,k,h)}});return d}function Ag(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Zd(e,a),Yd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function vg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Bg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ae(a,function(a){for(var b=0;b<Wd(a);b++)d+="-";d+=c(a)});return d};function Cg(a){be.call(this);this.rb=a;this.Sa=!1}t(Cg,be);m=Cg.prototype;m.Qb=function(){return tg(this,function(a){if(a instanceof Cg){var b=new Cg(a.rb);b.Sa=a.Sa;a=a.aa();b.ra=a;return b}return a.Qb()})};m.nb=function(a){var b=a||[];ae(this,function(a){a!=this&&a.nb(b)}.bind(this));a=C(b);return D(a)};m.w=function(a){var b=null!=a?a:C();ae(this,function(a){a!=this&&a.w(b)}.bind(this));return b};m.xd=function(a){this.Sa!=a&&(this.Sa=a,this.rb="and"==this.rb?"or":"and",K(this).forEach(function(b){return b.xd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Dg(this,b)};function Dg(a,b){return"and"==a.rb?Dd(b):Ed(b)}m.toString=function(){return"combined_pred_"+this.rb.toString()};m.we=function(){if("or"==this.rb){var a=new wd;K(this).forEach(function(b){b=b.we().qa();a.add(b)});return a}return new wd};m.od=function(){return"or"==this.rb?Eg(this):!1};
function Eg(a){var b=null;return K(a).every(function(a){if(!(a instanceof de&&a.od()))return!1;null===b&&(b=a.J);return b.m()==a.J.m()})};function Fg(a,b,c){be.call(this);this.ia=a;this.la=b;this.F=c;this.de=null;a=Td();this.zc=Ud(a,this.ia.L(),this.F);this.jg=a.$e.get(this.ia.L())||null}t(Fg,be);m=Fg.prototype;m.Qb=function(){var a=new Fg(this.ia,this.la,this.F),b=this.aa();a.ra=b;return a};m.nb=function(a){return null!=a?(a.push(this.ia),a.push(this.la),a):[this.ia,this.la]};m.w=function(a){a=null!=a?a:C();a.add(this.ia.K());a.add(this.la.K());return a};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Fg(this.la,this.ia,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ia);a=I(a,this.la);return this.zc(b,a)},this);return new H(b,a.w())};m.toString=function(){return"join_pred("+this.ia.m()+" "+this.F+" "+this.la.m()+")"};
function Gg(a,b,c){var d=null,e=null;-1!=b.w().indexOf(Id(a.ia.K()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ia;a.ia=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.zc=Ud(Td(),a.ia.L(),a.F)}return[e,d]}return[d,e]}function Hg(a){var b={};a.nb().forEach(function(a){b[a.getName()]=null});return b}
function Ig(a,b,c){null===a.de&&(a.de=Hg(a.la.K()));var d=new Gd(new Wb(-1,a.de),!1);return Kd(b,c,d,[Id(a.la.K())])}
function Jg(a,b,c,d){var e=[b,c];d||(e=Gg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ia,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ia);var n=new Rc,B=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=e.w(),ba=f.w();f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Kd(a,ba,b,O);B.push(b)}):d&&B.push(Ig(this,a,ba))}.bind(a));a=b.w().concat(c.w());return new H(B,a)}
function Kg(a,b,c,d,e){function f(a,b){var c=new Gd(b,1<O.length),c=Kd(a,ba,c,O);B.push(c)}var h=d.bg.K(),k=b,n=c;-1!=b.w().indexOf(Id(h))&&(k=c,n=b);var B=[],O=n.w(),ba=k.w();k.entries.forEach(function(a){var b=this.jg(I(a,d.sg)),b=d.index.get(b);0!=b.length&&(d.index.Ka()?f(a,e.get(b[0])):sf(e,b).forEach(f.bind(null,a)))},a);a=k.w().concat(n.w());return new H(B,a)};function Lg(a,b,c){return null===b?new de(a,b,c):q(b.m)?new Fg(a,b,c):new de(a,b,c)};var Mg={};r("lf.schema.DataStoreType",Mg);Mg.INDEXED_DB=0;Mg.MEMORY=1;Mg.LOCAL_STORAGE=2;Mg.FIREBASE=3;Mg.WEB_SQL=4;Mg.OBSERVABLE_STORE=5;function Ng(a,b,c,d){this.qc=a;this.name=b;this.Hc=c;this.g=d}Ng.prototype.m=function(){return this.qc+"."+this.name};function rg(a){return a.g.some(function(a){return a.ca.lc()})}function R(a,b,c,d){this.C=a;this.sa=c;this.M=b;this.td=d;this.jb=null}r("lf.schema.Table",R);R.prototype.getName=g("C");R.prototype.getName=R.prototype.getName;R.prototype.ab=g("jb");
function Id(a){return a.jb||a.C}R.prototype.vc=function(a){var b=new this.constructor(this.C);b.jb=a;b.Eg=this.Eg;return b};R.prototype.as=R.prototype.vc;R.prototype.createRow=R.prototype.Bb;R.prototype.deserializeRow=R.prototype.mb;R.prototype.Ca=g("sa");R.prototype.getIndices=R.prototype.Ca;R.prototype.nb=g("M");R.prototype.getColumns=R.prototype.nb;R.prototype.getConstraint=R.prototype.Lb;R.prototype.Hb=g("td");R.prototype.persistentIndex=R.prototype.Hb;function $e(a){return a.C+".#"};function S(a,b){this.child=a;this.Pb=b;this.jb=null}m=S.prototype;m.getName=function(){return this.Pb+"("+this.child.getName()+")"};m.m=function(){return this.Pb+"("+this.child.m()+")"};m.K=function(){return this.child.K()};m.toString=function(){return this.m()};m.L=function(){return this.child.L()};m.ab=g("jb");m.Ca=function(){return[]};m.Ba=l(null);m.lc=l(!1);m.vc=function(a){this.jb=a;return this};S.prototype.as=S.prototype.vc;
function Og(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Pg(a){this.jb=a||null;this.V=new R("#UnknownTable",[],[],!1)}m=Pg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.K=g("V");m.L=l(4);m.ab=g("jb");m.Ca=function(){return[]};m.Ba=l(null);m.lc=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Qg(a){return new S(a||new Pg,"COUNT")}r("lf.fn.count",Qg);function Rg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Rg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){J.call(this);this.Tf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Tf){case 1:return Sg(this,a,b);case 0:return Tg(this,a,b);default:return Ug(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Rc=function(){return this.toString()};function Ug(a,b,c){return new v(function(a){a(this.da([],b,c))}.bind(a))}function Sg(a,b,c){return Xd(a,0).exec(b,c).then(function(a){return this.da(a,b,c)}.bind(a))}
function Tg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.da(d,b,c)}.bind(a))};function Vg(a){T.call(this,0,1);this.Ee=a}t(Vg,T);Vg.prototype.toString=function(){return"aggregation("+this.Ee.map(function(a){return a.m()}).toString()+")"};Vg.prototype.da=function(a){a.forEach(function(a){Wg(new Xg(a,this.Ee))},this);return a};function Xg(a,b){this.La=a;this.M=b}
function Wg(a){a.M.forEach(function(a){a=Og(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Og(d).slice(-1)[0],f=d.child instanceof S?Ad(this.La,d.child):this.La;if(null!==f.$a&&f.$a.has(d.m()))break;f=Yg(d.Pb,f,e);e=this.La;null===e.$a&&(e.$a=z());e.$a.set(d.m(),f)}},a)}
function Yg(a,b,c){var d=null;switch(a){case "MIN":d=Zg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Zg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=$g(b,c);break;case "COUNT":d=ah(b,c);break;case "SUM":d=bh(b,c);break;case "AVG":a=ah(b,c);0<a&&(d=bh(b,c)/a);break;case "GEOMEAN":d=ch(b,c);break;default:d=dh(b,c)}return d}function Zg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function ah(a,b){return b instanceof Pg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function bh(a,b){return Zg(a,b,function(a,b){return b+a})}function dh(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function ch(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function $g(a,b){var c=z();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new H(A(c),a.w())};function eh(a,b){this.Ga=a;this.ba=b}eh.prototype.cb=g("Ga");eh.prototype.ea=g("ba");function fh(){J.call(this)}t(fh,J);function gh(a,b){J.call(this);this.table=a;this.values=b}t(gh,fh);function hh(a,b){gh.call(this,a,b)}t(hh,gh);function ih(a){J.call(this);this.table=a}t(ih,fh);ih.prototype.toString=function(){return"delete("+this.table.getName()+")"};function jh(a,b){J.call(this);this.table=a;this.ze=b}t(jh,fh);
jh.prototype.toString=function(){var a=[];this.ze&&(a=this.ze.map(function(a){return a.J.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function kh(a){J.call(this);this.Y=a}t(kh,fh);kh.prototype.toString=function(){return"select("+this.Y.toString()+")"};function lh(a){J.call(this);this.table=a}t(lh,fh);lh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.ab()||(a+=" as "+this.table.ab());return a+")"};
function mh(){J.call(this)}t(mh,fh);mh.prototype.toString=l("cross_product");function nh(a,b){J.call(this);this.g=a;this.Sb=b}t(nh,fh);nh.prototype.toString=function(){var a="project("+this.g.toString();if(null!==this.Sb)var b=this.Sb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function oh(a){J.call(this);this.S=a}t(oh,fh);oh.prototype.toString=function(){return"order_by("+oe(this.S)+")"};function ph(a){J.call(this);this.g=a}t(ph,fh);
ph.prototype.toString=function(){return"aggregation("+this.g.toString()+")"};function qh(a){J.call(this);this.g=a}t(qh,fh);qh.prototype.toString=function(){return"group_by("+this.g.toString()+")"};function rh(a){J.call(this);this.X=a}t(rh,fh);rh.prototype.toString=function(){return"limit("+this.X+")"};function sh(a){J.call(this);this.N=a}t(sh,fh);sh.prototype.toString=function(){return"skip("+this.N+")"};function th(a,b){J.call(this);this.Y=a;this.Ub=b}t(th,fh);
th.prototype.toString=function(){return"join(type: "+(this.Ub?"outer":"inner")+", "+this.Y.toString()+")"};function uh(){};function vh(){}t(vh,uh);vh.prototype.hb=function(a){this.I=a;this.Ya(this.I);return this.I};vh.prototype.Ya=function(a){if(a instanceof kh){var b=wh(this,a.Y),b=xh(this,b);Ag(a,a,b[0],b[1]);a==this.I&&(this.I=b[0]);a=b[0]}K(a).forEach(function(a){this.Ya(a)},this)};function wh(a,b){if(0==K(b).length||"and"!=b.rb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return wh(this,a)},a);return Ea(c)}
function xh(a,b){var c=null,d=null;b.map(function(a,b){var h=new kh(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function yh(){}t(yh,uh);yh.prototype.hb=function(a,b){if(3>b.c.length)return a;this.I=a;this.Ya(this.I);return this.I};yh.prototype.Ya=function(a){if(a instanceof mh)for(;2<K(a).length;){for(var b=new mh,c=0;2>c;c++){var d=Zd(a,0);L(b,d)}Yd(a,b,0)}K(a).forEach(function(a){this.Ya(a)},this)};function zh(){T.call(this,0,0)}t(zh,T);zh.prototype.toString=l("cross_product");zh.prototype.da=function(a){var b=a[0],c=a[1];a=[];for(var d=b.w(),e=c.w(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Kd(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.w().concat(c.w());return[new H(a,b)]};function Ah(a,b){re.call(this,a,b);this.Ha=a.l(oc);this.Nb=a.l(pc)}t(Ah,re);Ah.prototype.getPriority=l(2);Ah.prototype.ge=function(a){0==this.L()?Bh(this,a):this.Pc()};function Bh(a,b){a.ud.forEach(function(a,d){a instanceof ne&&ue(this.Nb,a,b[d])},a)}Ah.prototype.Pc=function(){var a=we(this.Nb,this.ea());0!=a.length&&(a=new te(this.global,a),xe(this.Ha,a))};function Ch(a){he.call(this,a)}t(Ch,he);Ch.prototype.ea=function(){var a=C();a.add(this.c);Dh(this,this.c.getName(),a);return a};function Dh(a,b,c){var d=Eh(a.ca.info(),b,1);Eh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Dh(this,a.getName(),c)},a)}Ch.prototype.clone=function(){var a=new Ch(this.ca);ke(a,this);a.c=this.c;return a};Ch.prototype.bind=function(a){Ch.ib.bind.call(this,a);le(this,a);return this};function Fh(a){he.call(this,a)}t(Fh,he);Fh.prototype.ea=function(){var a=C();a.add(this.Ja);var b=this.ca.info();Gh(this.Ja.getName(),b.hf).forEach(a.add.bind(a));this.dc&&Eh(b,this.Ja.getName()).forEach(a.add.bind(a));return a};Fh.prototype.clone=function(){var a=new Fh(this.ca);ke(a,this);a.Ja=this.Ja;this.values&&(a.values=this.values instanceof Ld?this.values:this.values.slice());a.dc=this.dc;a.ec=this.ec;return a};
Fh.prototype.bind=function(a){Fh.ib.bind.call(this,a);this.ec&&(this.values=this.ec instanceof Ld?a[this.ec.Ba()]:this.ec.map(function(b){return b instanceof Ld?a[b.Ba()]:b}));return this};function Hh(a){he.call(this,a)}t(Hh,he);Hh.prototype.ea=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.J.m()}),c=this.ca.info();Ih(c,b).forEach(a.add.bind(a));Jh(c,b).forEach(a.add.bind(a));return a};Hh.prototype.clone=function(){var a=new Hh(this.ca);ke(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Hh.prototype.bind=function(a){Hh.ib.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});le(this,a);return this};function Kh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+$b(b)+"'";default:return"'"+b.toString()+"'"}}function Lh(a,b){var c=a.dc?"INSERT OR REPLACE":"INSERT",d=a.Ja.nb(),c=c+(" INTO "+a.Ja.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Kh(c.L(),d)});return c+f.join(", ")+");"}).join("\n")}
function Mh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Nh(a,b,c,d){return a instanceof Ld?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Kh(c,a)}).join(", ")+")":"between"==b?Kh(c,a[0])+" AND "+Kh(c,a[1]):Kh(c,a).toString()}
function Oh(a,b){return K(a).map(function(a){return"("+Ph(a,b)+")"}).join("and"==a.rb?" AND ":" OR ")}function Qh(a){return[a.ia.m(),Mh(a.F),a.la.m()].join(" ")}function Ph(a,b){if(a instanceof de){var c=a.J.m(),d=Mh(a.F),e=Nh(a.value,a.F,a.J.L(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Cg)return Oh(a,b);if(a instanceof Fg)return Qh(a);throw new E(357,typeof a);}
function Rh(a,b){var c=Ph(a,b);return c?" WHERE "+c:""}function Sh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.J.m()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+Kh(a.J.L(),a.value).toString()}).join(", ");a.B&&(c+=Rh(a.B,b));return c+";"}
function Th(a,b){var c="*";a.g.length&&(c=a.g.map(function(a){return a.ab()?a.m()+" AS "+a.ab():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Gb&&0!=a.Gb.size?c+=Uh(a,b):(c+=a.c.map(Vh).join(", "),a.B&&(c+=Rh(a.B,b)));if(a.S)var d=a.S.map(function(a){return a.J.m()+(0==a.sb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ka&&(d=a.ka.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function Vh(a){return Id(a)!=a.getName()?a.getName()+" AS "+Id(a):a.getName()}function Uh(a,b){for(var c=vg(a.B,function(a){return a instanceof Fg}),d=c.map(Qh),e=Vh(a.c[0]),f=1;f<a.c.length;f++)var h=Vh(a.c[f]),e=a.Gb.has(c[d.length-f].aa())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Xd(a.B,0);c instanceof Fg||(e+=" WHERE "+Ph(c,b));return e}
function Wh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Fh)return Lh(d,c);if(d instanceof Ch){var e="DELETE FROM "+d.c.getName();d.B&&(e+=Rh(d.B,c));return e+";"}if(d instanceof Hh)return Sh(d,c);if(d instanceof ne)return Th(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.Dg=a.l(nc);this.Ha=a.l(oc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.kb()}catch(a){return bb(a)}return new v(function(a,b){var c=new Ah(this.global,[this.Fc()]);xe(this.Ha,c).then(function(b){a(yd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Vf=function(){var a=function(a){return a.Rc(this.a)+"\n"}.bind(this);return Bg(Xh(this).cb(),a)};U.prototype.explain=U.prototype.Vf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Kg=function(a){return Wh(this,a)};U.prototype.toSql=U.prototype.Kg;U.prototype.kb=aa();function Xh(a){if(null==a.jf){var b;b=a.Dg;var c=a.a,d=b.mg.create(c);b=b.Ag.create(d,c);a.jf=b}return a.jf}U.prototype.Fc=function(){return{context:this.a.clone(),je:Xh(this)}};function Yh(a){U.call(this,a,new Ch(a.l(qc)))}t(Yh,U);r("lf.query.DeleteBuilder",Yh);Yh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Yh.prototype.from=Yh.prototype.c;Yh.prototype.B=function(a){this.Fd();this.a.B=a;return this};Yh.prototype.where=Yh.prototype.B;Yh.prototype.Fd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.B)throw new E(516);};Yh.prototype.kb=function(){Yh.ib.kb.call(this);if(null==this.a.c)throw new E(517);};function Zh(a,b){U.call(this,a,new Fh(a.l(qc)));this.a.dc=b||!1}t(Zh,U);r("lf.query.InsertBuilder",Zh);Zh.prototype.kb=function(){Zh.ib.kb.call(this);var a=this.a;if(null==a.Ja||null==a.values)throw new E(518);if(a.dc&&null===a.Ja.Lb().ed())throw new E(519);};Zh.prototype.Ja=function(a){if(null!=this.a.Ja)throw new E(520);this.a.Ja=a;return this};Zh.prototype.into=Zh.prototype.Ja;
Zh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Ld||a.some(function(a){return a instanceof Ld})?this.a.ec=a:this.a.values=a;return this};Zh.prototype.values=Zh.prototype.values;function $h(a){return ai("and",Array.prototype.slice.call(arguments))}r("lf.op.and",$h);r("lf.op.or",function(a){return ai("or",Array.prototype.slice.call(arguments))});function ai(a,b){var c=new Cg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.xd(!0);return a});function V(a,b){U.call(this,a,new ne(a.l(qc)));this.Oe=this.Ad=!1;this.a.g=b;bi(this);ci(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.kb=function(){V.ib.kb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Vb)&&!q(a.X)||q(a.bc)&&!q(a.N))throw new E(523);null!=this.a.ka?di(this):ei(this)};function bi(a){var b=a.a.g.filter(function(a){return a instanceof S&&"DISTINCT"==a.Pb},a);if(0!=b.length&&(1!=b.length||1!=a.a.g.length))throw new E(524);}
function di(a){var b=a.a.g.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ka.length||0==a.a.g.length)c=!0;else{var d=a.a.ka.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ka.some(function(a){a=a.L();return 6==a||0==a}))}if(c)throw new E(525);}function ei(a){var b=a.a.g.some(function(a){return a instanceof S},a);a=a.a.g.some(function(a){return!(a instanceof S)},a)||0==a.a.g.length;if(b&&a)throw new E(526);}
function ci(a){a.a.g.forEach(function(a){if(a instanceof S&&!fi(a.Pb,a.L()))throw new E(527,a.m());},a)}function gi(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.Oe)throw new E(515);this.Oe=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.B=function(a){gi(this,548);if(this.Ad)throw new E(516);this.Ad=!0;hi(this,a);return this};V.prototype.where=V.prototype.B;
function hi(a,b){if(null!=a.a.B){var c=$h(b,a.a.B);a.a.B=c}else a.a.B=b}V.prototype.fg=function(a,b){gi(this,542);if(this.Ad)throw new E(547);this.a.c.push(a);hi(this,b);return this};V.prototype.innerJoin=V.prototype.fg;V.prototype.kg=function(a,b){gi(this,542);if(!(b instanceof Fg))throw new E(541);if(this.Ad)throw new E(547);this.a.c.push(a);null==this.a.Gb&&(this.a.Gb=C());var c=b;Id(a)!=Id(b.la.K())&&(c=b.reverse());this.a.Gb.add(c.aa());hi(this,c);return this};V.prototype.leftOuterJoin=V.prototype.kg;
V.prototype.X=function(a){if(null!=(this.a.X||this.a.Vb))throw new E(528);if(a instanceof Ld)this.a.Vb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.N=function(a){if(null!=(this.a.N||this.a.bc))throw new E(529);if(a instanceof Ld)this.a.bc=a;else{if(0>a)throw new E(531);this.a.N=a}return this};V.prototype.skip=V.prototype.N;V.prototype.S=function(a,b){gi(this,549);null==this.a.S&&(this.a.S=[]);this.a.S.push({J:a,sb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.S;V.prototype.ka=function(a){gi(this,549);if(null!=this.a.ka)throw new E(530);null==this.a.ka&&(this.a.ka=[]);this.a.ka.push.apply(this.a.ka,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ka;function fi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.g);a.a=this.a.clone();a.a.Zc=null;return a};V.prototype.clone=V.prototype.clone;function ii(a,b){U.call(this,a,new Hh(a.l(qc)));this.a.table=b}t(ii,U);r("lf.query.UpdateBuilder",ii);ii.prototype.set=function(a,b){var c={Wc:b instanceof Ld?b.Ba():-1,J:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};ii.prototype.set=ii.prototype.set;ii.prototype.B=function(a){this.Fd();this.a.B=a;return this};ii.prototype.where=ii.prototype.B;ii.prototype.Fd=function(){if(null!=this.a.B)throw new E(516);};
ii.prototype.kb=function(){ii.ib.kb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Ld}))throw new E(501);};function ji(a){this.a=a;this.Ga=null}ji.prototype.kc=function(){null===this.Ga&&(this.Ga=this.cd());return this.Ga};function ki(a){ji.call(this,a)}t(ki,ji);ki.prototype.cd=function(){return this.a.dc?new hh(this.a.Ja,this.a.values):new gh(this.a.Ja,this.a.values)};function li(a){ji.call(this,a)}t(li,ji);li.prototype.cd=function(){var a=new jh(this.a.table,this.a.set),b=null!=this.a.B?new kh(this.a.B.Qb()):null,c=new lh(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function mi(a,b,c){this.Ga=a;this.ke=b;this.Yb=c}mi.prototype.kc=function(){this.Yb.forEach(function(a){this.Ga=a.hb(this.Ga,this.ke)},this);return this.Ga};function ni(a,b){ji.call(this,a);this.Yb=b}t(ni,ji);ni.prototype.cd=function(){var a=new ih(this.a.c),b=null!=this.a.B?new kh(this.a.B.Qb()):null,c=new lh(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new mi(a,this.a,this.Yb)).kc()};function oi(){}t(oi,uh);oi.prototype.hb=function(a,b){if(2>b.c.length)return a;this.I=a;this.Ya(this.I,b);return this.I};oi.prototype.Ya=function(a,b){if(a instanceof kh&&a.Y instanceof Fg){var c=a.Y.aa(),d=Xd(a,0);d instanceof mh&&(c=null!=b.Gb&&b.Gb.has(c),c=new th(a.Y,c),Ag(a,d,c,c),a==this.I&&(this.I=c),a=c)}K(a).forEach(function(a){this.Ya(a,b)},this)};function pi(){this.Vc=C()}t(pi,uh);pi.prototype.hb=function(a,b){if(!q(b.B))return a;this.Vc.clear();this.I=a;this.Ya(this.I);this.Vc.clear();return this.I};pi.prototype.Ya=function(a){if(a instanceof kh){var b=a.Y.w(),c=function(a){return qi(this,a,b)}.bind(this),c=ri(this,a,c);this.Vc.add(a);c==a&&(c=Xd(a,0));null!==c&&(fa(c.getParent())&&(this.I=c),c instanceof kh&&!this.Vc.has(c)&&this.Ya(c))}else K(a).forEach(function(a){this.Ya(a)},this)};
function ri(a,b,c){var d=b;if(Xd(b,0)instanceof kh)d=yg(b),ri(a,b,c);else if(si(b)){var e=[],d=zg(b,c,function(a){a=new kh(a.Y);e.push(a);return a});e.forEach(function(a){ri(this,a,c)},a)}return d}function qi(a,b,c){var d=C();ug(b).forEach(function(a){d.add(a.table)},a);b instanceof lh&&d.add(b.table);return wc(d,c)}function si(a){a=Xd(a,0);return a instanceof mh||a instanceof th};function ti(a,b){ji.call(this,a);this.Yb=b;this.nf=this.df=this.vf=this.gf=this.Fe=this.Te=this.uf=this.Le=this.xf=null}t(ti,ji);
ti.prototype.cd=function(){ui(this);2<=this.a.c.length&&(this.Le=new mh);this.uf=null!=this.a.B?new kh(this.a.B.Qb()):null;this.a.S&&(this.gf=new oh(this.a.S));null!=this.a.N&&0<this.a.N&&(this.vf=new sh(this.a.N));null!=this.a.X&&(this.df=new rh(this.a.X));null!=this.a.ka&&(this.Te=new qh(this.a.ka));vi(this);this.nf=new nh(this.a.g||[],this.a.ka||null);var a=wi(this);return(new mi(a,this.a,this.Yb)).kc()};
function wi(a){for(var b=[a.df,a.vf,a.nf,a.gf,a.Fe,a.Te,a.uf,a.Le],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.xf.forEach(function(a){L(b[c],a)});return d}function ui(a){a.xf=a.a.c.map(function(a){return new lh(a)},a)}function vi(a){var b=a.a.g.filter(function(a){return a instanceof S});null!=a.a.S&&a.a.S.forEach(function(a){a.J instanceof S&&b.push(a.J)});0<b.length&&(a.Fe=new ph(b))};function xi(){this.re=[new vh,new yh,new pi,new oi];this.Pd=[new vh]}xi.prototype.create=function(a){var b=null;if(a instanceof Fh)b=new ki(a);else if(a instanceof Ch)b=new ni(a,this.Pd);else if(a instanceof ne)b=new ti(a,this.re);else if(a instanceof Hh)b=new li(a);else throw new E(513);b=b.kc();return new eh(b,a.ea())};function yi(a){T.call(this,0,1);this.V=a}t(yi,T);yi.prototype.toString=function(){return"delete("+this.V.getName()+")"};yi.prototype.da=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.V,c);return[Cd()]};function zi(a,b){T.call(this,0,-1);this.table=b;this.G=a.l(mc)}t(zi,T);zi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};zi.prototype.da=function(){var a=this.G.get($e(this.table)),b=new H([],[this.table.getName()]),c=Qg(),a=a.Ma().ma;null===b.$a&&(b.$a=z());b.$a.set(c.m(),a);return[b]};function Ai(a,b){T.call(this,0,-1);this.W=a.l(lc);this.G=a.l(mc);this.table=b}t(Ai,T);Ai.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.ab()||(a+=" as "+this.table.ab());return a+")"};Ai.prototype.da=function(){var a=this.G.get($e(this.table)).bb();return[Fd(sf(this.W,a),[Id(this.table)])]};function Bi(a){this.f=a}t(Bi,uh);Bi.prototype.hb=function(a,b){this.I=a;if(!this.Hd(b))return a;var c=vg(a,function(a){return a instanceof Ai})[0],d=new zi(this.f,c.table);Ag(c,c,d,d);return this.I};Bi.prototype.Hd=function(a){return 1==a.g.length&&1==a.c.length&&null==a.B&&null==a.X&&null==a.N&&null==a.ka?(a=a.g[0],a instanceof S&&"COUNT"==a.Pb&&a.child instanceof Pg):!1};function Ci(a){T.call(this,0,1);this.Se=a}t(Ci,T);Ci.prototype.toString=function(){return"groupBy("+this.Se.map(function(a){return a.m()}).toString()+")"};Ci.prototype.da=function(a){return Di(this,a[0])};function Di(a,b){var c=new Rc,d=function(a){return this.Se.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),b.w())},a)};function Ei(a,b,c){T.call(this,0,0);this.G=a.l(mc);this.W=a.l(lc);this.Y=b;this.Ub=c;this.Dd="eq"==this.Y.F?0:2;this.Ve=null}t(Ei,T);var Fi=["hash","index_nested_loop","nested_loop"];Ei.prototype.toString=function(){return"join(type: "+(this.Ub?"outer":"inner")+", impl: "+Fi[this.Dd]+", "+this.Y.toString()+")"};
Ei.prototype.da=function(a){switch(this.Dd){case 0:return[Jg(this.Y,a[0],a[1],this.Ub)];case 1:return[Kg(this.Y,a[0],a[1],this.Ve,this.W)];default:var b=this.Y,c=a[0];a=a[1];var d=this.Ub,e=[c,a];d||(e=Gg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.w(),h=a.w(),k=c.entries.length,n=a.entries.length,B=n+256-1>>8,O=0;O<B;){for(var ba=0;ba<k;ba++){var Ab=!1,Zf=I(c.entries[ba],b.ia);if(null!==Zf)for(var cc=Math.min(O+1<<8,n),Bb=O<<8;Bb<cc;Bb++)if(b.zc(Zf,I(a.entries[Bb],b.la))){var Ab=!0,Tc=Kd(c.entries[ba],
f,a.entries[Bb],h);e.push(Tc)}d&&!Ab&&e.push(Ig(b,c.entries[ba],f))}O++}b=c.w().concat(a.w());return[new H(e,b)]}};function Gi(a,b){a.Dd=1;var c=a.G.get(b.Ba().m());a.Ve={bg:b,sg:b==a.Y.ia?a.Y.la:a.Y.ia,index:c}};function Hi(a){T.call(this,0,-1);this.of=a}t(Hi,T);Hi.prototype.toString=function(){return"no_op_step("+this.of[0].w().join(",")+")"};Hi.prototype.da=g("of");function Ii(){}t(Ii,uh);Ii.prototype.hb=function(a,b){this.I=a;if(!this.Hd(b))return a;vg(a,function(a){return a instanceof Ei}).forEach(this.Cg,this);return this.I};Ii.prototype.Hd=function(a){return 1<a.c.length};
Ii.prototype.Cg=function(a){if("eq"==a.Y.F&&!a.Ub){var b=function(b){if(!(b instanceof Ai))return null;b=Id(b.table)==Id(a.Y.la.K())?a.Y.la:a.Y.ia;return fa(b.Ba())?null:b},c=b(Xd(a,0)),b=b(Xd(a,1));if(null!==c||null!==b){b=null===b?c:b;Gi(a,b);var d=new H([],[Id(b.K())]);$d(a,new Hi([d]),b==c?0:1)}}};function Ji(a){a=a.map(function(a){return a.qa()});a=yb.apply(null,a);var b=[];xb(a,function(a){b.push(a)});return b}function Ki(a){this.Tb=a}Ki.prototype.dd=function(){return 1==this.Tb.g.length?[sd()]:[this.Tb.g.map(function(){return sd()})]};function Li(a,b){this.Tb=a;this.Fa=b;this.Ld=this.bf=null}
function Mi(a,b){var c=z();a.Fa.keys().forEach(function(a){var e=this.Fa.get(a).map(function(a){return ie(b,a)},this),f=new wd([sd()]);e.forEach(function(a){f=xd(f,a.we())});c.set(a,f)},a);return c}Li.prototype.dd=function(a){if(this.bf==a)return this.Ld;for(var b=Mi(this,a),c=this.Tb.g.length-1;0<=c;c--){var d=this.Tb.g[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new wd([sd()]))}this.Ld=1==this.Tb.g.length?A(b)[0].qa():Ji(Ni(this,b));this.bf=a;return this.Ld};
function Ni(a,b){var c=z(),d=0;a.Tb.g.forEach(function(a){c.set(a.ca.getName(),d);d++});return Vb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Oi(a,b){this.yd=b;this.G=a.l(mc)}function Pi(a){a=a.G.get($e(a.yd));return Math.floor(.02*a.Ma().ma)}function Qi(a,b,c){c=c.filter(a.gg,a);if(0==c.length)return null;a=Ri(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Si(c,b);return h<d?(d=h,c):a},null)}
function Ri(a,b){return a.yd.Ca().map(function(a){a=new Ti(this.G,a);Ui(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,e=!0,f=0;f<a.eb.g.length;f++){var h=a.Fa.has(a.eb.g[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Oi.prototype.gg=function(a){return a instanceof de?!a.od()||a.J.K()!=this.yd||"in"==a.F&&a.value.length>Pi(this)?!1:!0:a instanceof Cg?a.od()&&Xd(a,0).J.K()==this.yd?K(a).length<=Pi(this):!1:!1};
function Ti(a,b){this.G=a;this.eb=b;this.cg=C(this.eb.g.map(function(a){return a.ca.getName()}));this.ae=this.Fa=null}function Vi(a){null===a.ae&&(a.ae=new Li(a.eb,a.Fa));return a.ae}function Ui(a,b){b.forEach(function(a){var b=a.nb()[0].getName();this.cg.has(b)&&(null===this.Fa&&(this.Fa=new Rc),this.Fa.set(b,a.aa()))},a)}function Si(a,b){var c=Vi(a).dd(b),d=a.G.get(a.eb.m());return c.reduce(function(a,b){return a+d.ad(b)},0)};function Wi(a,b,c,d){T.call(this,0,-1);this.G=a.l(mc);this.index=b;this.af=c;this.oe=d;this.Uc=this.Tc=!1}t(Wi,T);Wi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.oe?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};Wi.prototype.Rc=function(a){var b=this.toString(),c=this.af.dd(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.X.toString()));this.Uc&&(b=b.replace("?",a.N.toString()));return b};
Wi.prototype.da=function(a,b,c){a=this.af.dd(c);b=this.G.get(this.index.m());c=(1==a.length&&a[0]instanceof F&&td(a[0])?wf(b.get(a[0].c),!1,this.Tc?c.X:void 0,this.Uc?c.N:void 0):b.bb(a,this.oe,this.Tc?c.X:void 0,this.Uc?c.N:void 0)).map(function(a){return new Wb(a,{})},this);return[Fd(c,[this.index.qc])]};function Xi(){T.call(this,0,0)}t(Xi,T);Xi.prototype.toString=l("multi_index_range_scan()");
Xi.prototype.da=function(a){var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=A(b);return[new H(c,a[0].w())]};function Yi(a){T.call(this,0,1);this.nc=a}t(Yi,T);Yi.prototype.toString=l("select(?)");Yi.prototype.Rc=function(a){a=ie(a,this.nc);return this.toString().replace("?",a.toString())};Yi.prototype.da=function(a,b,c){return[ie(c,this.nc).eval(a[0])]};function Zi(a,b){T.call(this,0,1);this.W=a.l(lc);this.V=b}t(Zi,T);Zi.prototype.toString=function(){return"table_access_by_row_id("+this.V.getName()+")"};Zi.prototype.da=function(a){return[Fd(sf(this.W,zd(a[0])),[Id(this.V)])]};function $i(a){this.f=a}t($i,uh);$i.prototype.hb=function(a,b){this.I=a;vg(a,function(a){return a instanceof Ai}).forEach(function(a){var d=aj(a);if(0!=d.length){var e=Qi(new Oi(this.f,a.table),b,d.map(function(a){return ie(b,a.nc)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.nc,a)},this);this.I=bj(this,e,f,a)}}},this);return this.I};function aj(a){var b=[];for(a=a.getParent();a;)a instanceof Yi&&b.push(a),a=a.getParent();return b}
function bj(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(wg);b=new Wi(a.f,b.eb,Vi(b),!1);a=new Zi(a.f,d.table);L(a,b);Ag(d,d,a,b);return b.cb()};function cj(a,b){T.call(this,0,-1);this.G=a.l(mc);this.V=b}t(cj,T);cj.prototype.toString=function(){return"insert("+this.V.getName()+")"};cj.prototype.da=function(a,b,c){dj(this.V,c.values,this.G);b.Eb(this.V,c.values);return[Fd(c.values,[this.V.getName()])]};function dj(a,b,c){a=a.Lb().ed();if(null===a?0:a.g[0].autoIncrement){var d=a.g[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function ej(a,b){T.call(this,0,-1);this.G=a.l(mc);this.V=b}t(ej,T);ej.prototype.toString=function(){return"insert_replace("+this.V.getName()+")"};ej.prototype.da=function(a,b,c){dj(this.V,c.values,this.G);b.Wd(this.V,c.values);return[Fd(c.values,[this.V.getName()])]};function fj(){T.call(this,0,1)}t(fj,T);fj.prototype.toString=l("limit(?)");fj.prototype.Rc=function(a){return this.toString().replace("?",a.X.toString())};fj.prototype.da=function(a,b,c){a[0].entries.splice(c.X);return a};function gj(a){T.call(this,0,1);this.S=a}t(gj,T);m=gj.prototype;m.toString=function(){return"order_by("+oe(this.S)+")"};m.da=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.S.length;d++){var e=Rg(this.S[d].J);if(null!==b.$a&&b.$a.has(e.m())){c=e;break}}b=c;(null===b?a[0]:Ad(a[0],b)).entries.sort(this.Sf.bind(this))}else a.sort(this.Fg.bind(this));return a};
m.$=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.S[f].J,c=this.S[f].sb,d=a(e),e=b(e);while(d==e&&f+1<this.S.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Fg=function(a,b){return this.$(function(b){return b instanceof S?Ad(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?Ad(b,a):I(b.entries[b.entries.length-1],a)})};m.Sf=function(a,b){return this.$(function(b){return I(a,b)},function(a){return I(b,a)})};function hj(a,b){this.La=a;this.M=b}function ij(a){return a.M.some(function(a){return a instanceof S},a)?jj(a):kj(a)}function jj(a){if(1==a.M.length&&"DISTINCT"==a.M[0].Pb)return a=Ad(a.La,a.M[0]).entries.map(function(a){var b=new Gd(new Wb(-1,{}),1<this.La.O.size);Jd(b,this.M[0],I(a,this.M[0].child));return b},a),new H(a,[]);var b=new Gd(new Wb(-1,{}),1<a.La.O.size);a.M.forEach(function(a){var d=a instanceof S?Ad(this.La,a):I(this.La.entries[0],a);Jd(b,a,d)},a);return new H([b],a.La.w())}
function kj(a){var b=Array(a.La.entries.length),c=1<a.La.O.size;a.La.entries.forEach(function(a,e){b[e]=new Gd(new Wb(a.ua.id(),{}),c);this.M.forEach(function(c){Jd(b[e],c,I(a,c))},this)},a);return new H(b,a.La.w())}function lj(a,b){var c=a.map(function(a){return ij(new hj(a,b)).entries[0]});return new H(c,a[0].w())};function mj(a,b){T.call(this,0,1);this.g=a;this.Sb=b}t(mj,T);mj.prototype.toString=function(){var a="project("+this.g.toString();if(null!==this.Sb)var b=this.Sb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};mj.prototype.da=function(a){0==a.length?a=[Cd()]:1==a.length?(a=a[0],a=[0==this.g.length?a:ij(new hj(a,this.g))]):a=[lj(a,this.g)];return a};function nj(a){return a.g.some(function(a){return a instanceof S})||null!==a.Sb};function oj(){T.call(this,0,1)}t(oj,T);oj.prototype.toString=l("skip(?)");oj.prototype.Rc=function(a){return this.toString().replace("?",a.N.toString())};oj.prototype.da=function(a,b,c){return[new H(a[0].entries.slice(c.N),a[0].w())]};function pj(){}t(pj,uh);pj.prototype.hb=function(a,b){if(!q(b.X)&&!q(b.N))return a;var c=qj(a);if(null===c)return a;vg(a,function(a){return a instanceof fj||a instanceof oj}).forEach(function(a){a instanceof fj?c.Tc=!0:c.Uc=!0;wg(a)},this);return c.cb()};function qj(a){a=vg(a,function(a){return a instanceof Wi},function(a){return a instanceof mj&&nj(a)||a instanceof gj||1!=K(a).length||a instanceof Yi});return 0<a.length?a[0]:null};function rj(a){this.f=a}t(rj,uh);rj.prototype.hb=function(a,b){this.I=a;var c=sj(this,b);if(0==c.length)return this.I;var d=null,e=null,f=0;do e=c[f++],d=tj(this,e,b);while(null===d&&f<c.length);return null===d?this.I:this.I=uj(this,e,d)};function sj(a,b){return vg(a.I,function(a){if(!(a instanceof Yi))return!1;a=ie(b,a.nc);return a instanceof Cg&&"or"==a.rb})}
function tj(a,b,c){b=ie(c,b.nc);var d=b.w();if(1!=d.size)return null;var d=D(d)[0],e=new Oi(a.f,d),f=null;return K(b).every(function(a){a=Qi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function uj(a,b,c){var d=vg(a.I,function(a){return a instanceof Ai&&a.table.getName()==c[0].eb.qc})[0],e=new Zi(a.f,d.table),f=new Xi;L(e,f);c.forEach(function(a){a=new Wi(this.f,a.eb,Vi(a),!1);L(f,a)},a);wg(b);Ag(d,d,e,f);return f.cb()};function vj(a){this.f=a}t(vj,uh);vj.prototype.hb=function(a,b){var c=wj(a,b);if(null===c)return a;var d;a:{var e=c;d=xj(Xd(c,0));if(null!==d){var f;f=c.S;for(var h=null,k=d.table.Ca(),n=0;n<k.length&&null===h;n++)h=yj(k[n],f);f=h;if(null===f){d=e;break a}e=new Wi(this.f,f.eb,new Ki(f.eb),f.Ye);f=new Zi(this.f,d.table);L(f,e);wg(c);e=Ag(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=zj(Xd(c,0)),null!==e){f=yj(e.index,c.S);if(null===f)break a;e.oe=f.Ye;d=wg(c).parent}return d.cb()};
function zj(a){a=vg(a,function(a){return a instanceof Wi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function xj(a){a=vg(a,function(a){return a instanceof Ai},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function wj(a,b){return q(b.S)?vg(a,function(a){return a instanceof gj})[0]:null}function yj(a,b){if(a.g.length!=b.length||!b.every(function(b,c){return b.J.getName()==a.g[c].ca.getName()}))return null;var c=Aj(b,a);return c[0]||c[1]?{eb:a,Ye:c[1]}:null}
function Aj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.sb?0:1)},0),d=b.g.reduce(function(a,b){return a<<1|(0==b.sb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.g.length))-1]};function Bj(a,b,c){this.Ga=a;this.ke=b;this.Yb=c}Bj.prototype.kc=function(){this.Yb.forEach(function(a){this.Ga=a.hb(this.Ga,this.ke)},this);return this.Ga};function Cj(a,b){T.call(this,0,1);this.V=a;this.Ng=b}t(Cj,T);Cj.prototype.toString=function(){return"update("+this.V.getName()+")"};Cj.prototype.da=function(a,b){var c=a[0].entries.map(function(a){var b=this.V.mb(a.ua.Ia());this.Ng.forEach(function(a){b.s[a.J.getName()]=a.value},this);return b},this);b.update(this.V,c);return[Cd()]};function Dj(a){this.f=a;this.re=[new Ii,new $i(this.f),new rj(this.f),new vj(this.f),new pj,new Bi(this.f)];this.Pd=[new $i(this.f)]}Dj.prototype.create=function(a,b){var c=a.cb();if(c instanceof hh||c instanceof gh)return Ej(this,a,b);if(c instanceof nh||c instanceof rh||c instanceof sh)return Ej(this,a,b,this.re);if(c instanceof ih||c instanceof jh)return Ej(this,a,b,this.Pd);throw new E(8);};
function Ej(a,b,c,d){a=tg(b.cb(),a.pg.bind(a));null!=d&&(a=(new Bj(a,c,d)).kc());return new pe(a,b.ea())}
Dj.prototype.pg=function(a){if(a instanceof nh)return new mj(a.g,a.Sb);if(a instanceof qh)return new Ci(a.g);if(a instanceof ph)return new Vg(a.g);if(a instanceof oh)return new gj(a.S);if(a instanceof sh)return new oj;if(a instanceof rh)return new fj;if(a instanceof kh)return new Yi(a.Y.aa());if(a instanceof mh)return new zh;if(a instanceof th)return new Ei(this.f,a.Y,a.Ub);if(a instanceof lh)return new Ai(this.f,a.table);if(a instanceof ih)return new yi(a.table);if(a instanceof jh)return new Cj(a.table,
a.ze);if(a instanceof hh)return new ej(this.f,a.table);if(a instanceof gh)return new cj(this.f,a.table);throw new E(514);};function Fj(a){this.mg=new xi;this.Ag=new Dj(a)};function Gj(a){this.f=a;this.h=a.l(qc);this.ba=C(this.h.va());this.gb=x()}function Hj(a){var b=a.f.l(mc),c=a.f.l(lc),d={};a.h.va().forEach(function(a){var f=b.get($e(a)).bb(),f=sf(c,f).map(function(a){return a.s});d[a.getName()]=f});return{name:a.h.name(),version:a.h.version(),tables:d}}m=Gj.prototype;m.exec=function(){var a=Hj(this),a=new Gd(new Wb(-1,a),!0);return w([new H([a],[])])};m.L=l(0);m.ea=g("ba");m.Rb=g("gb");m.aa=function(){return ka(this)};m.getPriority=l(0);function Ij(){this.ef=z()}function Jj(a,b){var c=a.ef.get(b.getName())||null;null===c&&(c=new Kj,a.ef.set(b.getName(),c));return c}function Lj(a,b,c,d){c.forEach(function(a){a=Jj(this,a);0==d?(a.fb=null,a.Ac=b):3==d?(null===a.ac&&(a.ac=C()),a.ac.add(b),null===a.Va&&(a.Va=C()),a.Va.delete(b)):1==d?(null===a.Va&&(a.Va=C()),a.Va.add(b)):2==d&&(a.fb=b)},a)}
function Mj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Jj(this,a);var c=null===a.Va||0==a.Va.size;e=0==d?(null===a.ac||0==a.ac.size)&&c&&null===a.Ac&&null!==a.fb&&a.fb==b:3==d?null===a.Ac&&null===a.fb&&null!==a.Va&&a.Va.has(b):1==d?null===a.fb:c&&(null===a.fb||a.fb==b)}},a);return e}function Nj(a,b,c,d){var e=Mj(a,b,c,d);e&&Lj(a,b,c,d);return e}Ij.prototype.releaseLock=function(a,b){b.forEach(function(b){Jj(this,b).releaseLock(a)},this)};
function Oj(a,b){b.forEach(function(a){Jj(this,a).fb=null},a)}function Kj(){this.ac=this.Va=this.fb=this.Ac=null}Kj.prototype.releaseLock=function(a){this.Ac==a&&(this.Ac=null);this.fb==a&&(this.fb=null);null===this.Va||this.Va.delete(a);null===this.ac||this.ac.delete(a)};function Pj(){this.Xb=new Qj;this.Ic=new Ij}function xe(a,b){(2>b.getPriority()||2>b.getPriority())&&Oj(a.Ic,b.ea());a.Xb.Eb(b);Rj(a);return b.Rb().fa}function Rj(a){for(var b=a.Xb.qa(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.L()?Sj(a,d,1,3):Sj(a,d,2,0))a.Xb.remove(d),e=a,d.exec().then(e.xg.bind(e,d),e.wg.bind(e,d))}}function Sj(a,b,c,d){var e=!1;Nj(a.Ic,b.aa(),b.ea(),c)&&(e=Nj(a.Ic,b.aa(),b.ea(),d));return e}
Pj.prototype.xg=function(a,b){this.Ic.releaseLock(a.aa(),a.ea());a.Rb().resolve(b);Rj(this)};Pj.prototype.wg=function(a,b){this.Ic.releaseLock(a.aa(),a.ea());a.Rb().reject(b);Rj(this)};function Qj(){this.Xb=[]}Qj.prototype.Eb=function(a){vf(this.Xb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.aa()-c.aa():d})};Qj.prototype.qa=function(){return this.Xb.slice()};Qj.prototype.remove=function(a){var b=this.Xb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Tj(a,b){this.Qd=Td();this.le=a;this.qd=b;this.M=Uj(this)}function Uj(a){if(0<a.le.g.length)return a.le.g;var b=[];a.le.c.forEach(function(a){a.nb().forEach(function(a){b.push(a)})});return b}Tj.prototype.$=function(a,b){return this.M.every(function(c){return Ud(this.Qd,c.L(),"eq")(I(a,c),I(b,c))},this)};
function Vj(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.qd.splice(f,1),k=Wj(h,k,0,a.qd),b.push(k))}e=pb(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.qd.splice(h,0,k.ua.s),k=Wj(h,[],1,a.qd),b.push(k));return b}function Wj(a,b,c,d){return{Pg:c,index:a,object:d,Rg:b,type:"splice"}};function Xj(){this.ic=z()}Xj.prototype.Cd=function(a,b){var c=ka(a.a).toString(),d=this.ic.get(c)||null;null===d&&(d=new Yj(a),this.ic.set(c,d));d.Cd(b)};Xj.prototype.me=function(a,b){var c=ka(a.a).toString(),d=this.ic.get(c)||null;d.me(b);0<d.Kc.size||this.ic.delete(c)};function we(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.ic.forEach(function(a){a=a.Fc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ue(a,b,c){b=ka(null!=b.Zc?b.Zc:b).toString();a=a.ic.get(b)||null;null!==a&&Zj(a,c)}function Yj(a){this.Jf=a;this.Kc=C();this.ug=[];this.cf=null;this.Qf=new Tj(a.a,this.ug)}Yj.prototype.Cd=function(a){this.Kc.has(a)||this.Kc.add(a)};Yj.prototype.me=function(a){return this.Kc.delete(a)};Yj.prototype.Fc=function(){var a=this.Jf;return{context:a.a,je:Xh(a)}};function Zj(a,b){var c=Vj(a.Qf,a.cf,b);a.cf=b;0<c.length&&a.Kc.forEach(function(a){a(c)})};function ak(a,b){var c=a.l(qc),d=b||{},e=new rf(c);a.ub(lc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=Tb(),e=e.dg?0:e.Og?4:1);switch(e){case 0:e=new We(a,c);break;case 1:e=new cf(c);break;case 5:e=new ef(c);break;case 4:e=new of(a,c,d.webSqlDbSize);break;case 3:e=new Je(c,d.firebase);f=!0;break;default:throw new E(300);}a.ub(kc,e);var h=new sg;a.ub(mc,h);return e.Da(d.onUpgrade).then(function(){var b=new Fj(a);a.ub(nc,b);b=new Pj;a.ub(oc,b);b=new Xj;a.ub(pc,b);return h.Da(c)}).then(function(){if(f){var b=
new ye(a);b.Na.subscribe(b.ee.bind(b))}d.enableInspector&&bk(a);return(new lg(a)).Da(c)})}function bk(a){window["#lfExport"]=function(){var b=new Gj(a);return JSON.stringify(Hj(b),void 0,2)}};function ck(a,b){this.f=a;this.h=a.l(qc);this.ba=C(this.h.va());this.gb=x();this.za=b;this.Na=a.l(kc);this.W=a.l(lc);this.G=a.l(mc)}m=ck.prototype;
m.exec=function(){if(!(this.Na instanceof We||this.Na instanceof cf||this.Na instanceof of))throw new E(300);var a;a:{a=this.h.va();for(var b=0;b<a.length;++b)if(0<this.G.get($e(a[b])).Ma().ma){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.h.name()!=this.za.name||this.h.version()!=this.za.version)throw new E(111);if(null==this.za.tables)throw new E(112);return dk(this)};m.L=l(1);m.ea=g("ba");m.Rb=g("gb");m.aa=function(){return ka(this)};m.getPriority=l(0);
function dk(a){var b=new jd(a.f,a.ba),b=a.Na.Jb(a.L(),D(a.ba),b),c;for(c in a.za.tables){var d=a.h.table(c),e=a.za.tables[c].map(function(a){return d.Bb(a)}),f=b.K(c,d.mb,0);a.W.Zb(c,e);var h=a.G.pc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.pb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ja()};function ek(a,b){this.f=a;this.Na=a.l(kc);this.Ha=a.l(oc);this.Nb=a.l(pc);this.ba=C(b);this.Ta=new jd(this.f,this.ba);this.gb=x();this.Bc=x();this.Be=x()}m=ek.prototype;m.exec=function(){this.Be.resolve();return this.Bc.fa};m.L=l(1);m.ea=g("ba");m.Rb=g("gb");m.aa=function(){return ka(this)};m.getPriority=l(2);function fk(a){xe(a.Ha,a);return a.Be.fa}
function gk(a,b){var c=b.Fc();return c.je.cb().exec(a.Ta,c.context).then(function(a){return yd(a[0])},function(a){this.Ta.Ob();var b=new jb(a.name);this.Bc.reject(b);throw a;}.bind(a))}m.ja=function(){this.Na.Jb(this.L(),D(this.ba),this.Ta).ja().then(function(){this.Pc();this.Bc.resolve()}.bind(this),function(a){this.Ta.Ob();this.Bc.reject(a)}.bind(this));return this.gb.fa};m.Ob=function(){this.Ta.Ob();this.Bc.resolve();return this.gb.fa};
m.Pc=function(){var a=we(this.Nb,this.ba);0!=a.length&&(a=new te(this.f,a),xe(this.Ha,a))};function hk(a){this.f=a;this.Ha=a.l(oc);this.Sc=null;this.Wa=0;0==ik.size&&(ik.set(0,C([1,4])),ik.set(1,C([2])),ik.set(2,C([3,5,6])),ik.set(3,C([2,7])),ik.set(4,C([7])),ik.set(5,C([7])),ik.set(6,C([7])))}r("lf.proc.Transaction",hk);var ik=z();function jk(a,b){var c=ik.get(a.Wa)||null;if(null===c||!c.has(b))throw new E(107,a.Wa,b);a.Wa=b}
hk.prototype.exec=function(a){jk(this,4);var b=[];try{a.forEach(function(a){a.kb();b.push(a.Fc())},this)}catch(c){return jk(this,7),bb(c)}a=new Ah(this.f,b);return xe(this.Ha,a).then(function(a){jk(this,7);return a.map(function(a){return yd(a)})}.bind(this),function(a){jk(this,7);throw a;}.bind(this))};hk.prototype.exec=hk.prototype.exec;hk.prototype.Hf=function(a){jk(this,1);this.Sc=new ek(this.f,a);return fk(this.Sc).then(function(){jk(this,2)}.bind(this))};hk.prototype.begin=hk.prototype.Hf;
hk.prototype.Gf=function(a){jk(this,3);return gk(this.Sc,a).then(function(a){jk(this,2);return a}.bind(this),function(a){jk(this,7);throw a;}.bind(this))};hk.prototype.attach=hk.prototype.Gf;hk.prototype.ja=function(){jk(this,5);return this.Sc.ja().then(function(){jk(this,7)}.bind(this))};hk.prototype.commit=hk.prototype.ja;hk.prototype.Ob=function(){jk(this,6);return this.Sc.Ob().then(function(){jk(this,7)}.bind(this))};hk.prototype.rollback=hk.prototype.Ob;function W(a){this.f=a;this.h=a.l(qc);this.ld=!1}r("lf.proc.Database",W);W.prototype.Da=function(a){this.f.ub(qc,this.h);return ak(this.f,a).then(function(){this.ld=!0;this.Ha=this.f.l(oc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.Db=g("h");W.prototype.getSchema=W.prototype.Db;function kk(a){if(!a.ld)throw new E(2);}W.prototype.select=function(a){kk(this);return new V(this.f,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Eb=function(){kk(this);return new Zh(this.f)};W.prototype.insert=W.prototype.Eb;W.prototype.Wd=function(){kk(this);return new Zh(this.f,!0)};W.prototype.insertOrReplace=W.prototype.Wd;W.prototype.update=function(a){kk(this);return new ii(this.f,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){kk(this);return new Yh(this.f)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){kk(this);this.f.l(pc).Cd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){kk(this);this.f.l(pc).me(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Of=function(){kk(this);return new hk(this.f)};W.prototype.createTransaction=W.prototype.Of;W.prototype.close=function(){try{this.f.l(kc).close()}catch(a){}this.f.clear();this.ld=!1};W.prototype.close=W.prototype.close;
W.prototype.Wf=function(){kk(this);var a=new Gj(this.f);return xe(this.Ha,a).then(function(a){return yd(a[0])[0]})};W.prototype["export"]=W.prototype.Wf;W.prototype.import=function(a){kk(this);a=new ck(this.f,a);return xe(this.Ha,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.V=a;this.C=b;this.Ze=c;this.Xe=d;this.zf=e;this.jb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("C");m.m=function(){return Id(this.V)+"."+this.C};m.toString=function(){return this.m()};m.K=g("V");m.L=g("zf");X.prototype.getType=X.prototype.L;X.prototype.ab=g("jb");X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.K().Ca().forEach(function(a){-1!=a.g.map(function(a){return a.ca.getName()}).indexOf(this.C)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!q(this.ha)){var a=this.Ca().filter(function(a){return 1!=a.g.length?!1:a.g[0].ca.getName()==this.getName()},this);this.ha=0<a.length?a[0]:null}return this.ha};X.prototype.lc=g("Xe");X.prototype.isNullable=X.prototype.lc;X.prototype.Hc=g("Ze");X.prototype.Pa=function(a){return Lg(this,a,"eq")};X.prototype.eq=X.prototype.Pa;X.prototype.ff=function(a){return Lg(this,a,"neq")};X.prototype.neq=X.prototype.ff;X.prototype.ng=function(a){return Lg(this,a,"lt")};
X.prototype.lt=X.prototype.ng;X.prototype.og=function(a){return Lg(this,a,"lte")};X.prototype.lte=X.prototype.og;X.prototype.Zf=function(a){return Lg(this,a,"gt")};X.prototype.gt=X.prototype.Zf;X.prototype.$f=function(a){return Lg(this,a,"gte")};X.prototype.gte=X.prototype.$f;X.prototype.match=function(a){return Lg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.If=function(a,b){return Lg(this,[a,b],"between")};X.prototype.between=X.prototype.If;
X.prototype.ag=function(a){return Lg(this,a,"in")};X.prototype["in"]=X.prototype.ag;X.prototype.ig=function(){return this.Pa(null)};X.prototype.isNull=X.prototype.ig;X.prototype.hg=function(){return this.ff(null)};X.prototype.isNotNull=X.prototype.hg;X.prototype.vc=function(a){return new X(this.V,this.C,this.Ze,this.Xe,this.zf,a)};X.prototype.as=X.prototype.vc;function lk(){this.wd=z()}var mk;lk.prototype.clear=function(){this.wd.clear()};lk.prototype.clear=lk.prototype.clear;lk.prototype.ub=function(a,b){this.wd.set(a.toString(),b);return b};lk.prototype.registerService=lk.prototype.ub;lk.prototype.l=function(a){var b=this.wd.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};lk.prototype.getService=lk.prototype.l;lk.prototype.Zd=function(a){return this.wd.has(a.toString())};lk.prototype.isRegistered=lk.prototype.Zd;function nk(a){this.h=a;this.Id=new Rc;this.ne=new Rc;this.hf=new Rc;this.Ke=z();this.i=new Rc;this.Ge=new Rc;this.pf=new Rc;this.Je=new Rc;ok(this)}function ok(a){a.h.va().forEach(function(a){var c=a.getName();a.Lb().Vd().forEach(function(d){this.hf.set(c,this.h.table(d.Ua));this.i.set(d.Ua,a);0==d.action?(this.ne.set(d.Ua,d),this.pf.set(d.Ua,a)):(this.Id.set(d.Ua,d),this.Ge.set(d.Ua,a));this.Ke.set(a.getName()+"."+d.zb,d.Ua);this.Je.set(d.Ua+"."+d.Mc,a.getName())},this)},a)}
function $c(a,b,c){if(null!=c)return 1==c?a.Id.get(b):a.ne.get(b);c=a.Id.get(b);a=a.ne.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Gh(a,b){var c=b.get(a);return null===c?[]:c}function Ih(a,b){var c=C();b.forEach(function(a){(a=this.Ke.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.h.table(a)},a)}function Eh(a,b,c){return null!=c?0==c?Gh(b,a.pf):Gh(b,a.Ge):Gh(b,a.i)}
function Jh(a,b){var c=C();b.forEach(function(a){(a=this.Je.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.h.table(a)},a)};function pk(a,b,c){this.Bg=a;this.tg=b;this.Xf=c}r("lf.schema.Constraint",pk);pk.prototype.ed=g("Bg");pk.prototype.getPrimaryKey=pk.prototype.ed;pk.prototype.Vd=g("Xf");pk.prototype.getForeignKeys=pk.prototype.Vd;function qk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ie=b;this.zb=a.local;this.Ua=d[0];this.Mc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){rk(a);this.Qd=Td();this.C=a;this.M=z();this.zd=C();this.rc=C();this.pd=C();this.Ea=null;this.sa=z();this.td=!1;this.Cb=[]}r("lf.schema.TableBuilder",Y);function sk(a){this.name=a.name;this.sb=a.order;this.autoIncrement=a.autoIncrement}var tk=C([0,6]);function rk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function uk(a,b){if(b==a.C)throw new E(546,b);if(a.M.has(b)||a.sa.has(b)||a.rc.has(b))throw new E(503,a.C+"."+b);}
function vk(a,b){var c=!1;b.forEach(function(a){var b=this.M.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function wk(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.Cb.some(function(a,e){c=e;return-1!=b.indexOf(a.zb)},a))throw new E(543,a.Cb[c].name);}}
function xk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.C+"."+e);}},a)}}function yk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.pd.has(a.name))throw new E(545,this.C+"."+a.name);},a)}Y.prototype.Bf=function(a,b){rk(a);uk(this,a);this.M.set(a,b);tk.has(b)&&this.De([a]);return this};Y.prototype.addColumn=Y.prototype.Bf;
Y.prototype.Df=function(a,b){var c=this.C;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));rk(this.Ea);uk(this,this.Ea);c=zk(this,a,!0,void 0,b);vk(this,c);1==c.length&&this.zd.add(c[0].name);this.rc.add(this.Ea);this.sa.set(this.Ea,c);return this};Y.prototype.addPrimaryKey=Y.prototype.Df;
Y.prototype.Cf=function(a,b){rk(a);uk(this,a);var c=new qk(b,this.C,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.M.has(c.zb))throw new E(540,a);this.Cb.push(c);this.Ce(a,[c.zb],this.zd.has(c.zb));return this};Y.prototype.addForeignKey=Y.prototype.Cf;Y.prototype.Ef=function(a,b){rk(a);uk(this,a);var c=zk(this,b,!0);1==c.length&&(this.zd.add(c[0].name),Ak(this,c[0].name));this.sa.set(a,c);this.rc.add(a);return this};
Y.prototype.addUnique=Y.prototype.Ef;function Ak(a,b){a.Cb.forEach(function(a){a.zb==b&&this.rc.add(a.name.split(".")[1])},a)}Y.prototype.De=function(a){zk(this,a,!1).forEach(function(a){this.pd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.De;Y.prototype.Ce=function(a,b,c,d){rk(a);uk(this,a);b=zk(this,b,!0,d);c&&this.rc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.Ce;Y.prototype.Hb=ca("td");Y.prototype.persistentIndex=Y.prototype.Hb;
Y.prototype.Db=function(){wk(this);xk(this);yk(this);return new (Bk(this))};Y.prototype.getSchema=Y.prototype.Db;function Ck(a){return a.Cb}function zk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new sk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new sk(a)});f.forEach(function(a){if(!this.M.has(a.name))throw new E(508,this.C,a.name);if(c){var b=this.M.get(a.name);if(0==b||6==b)throw new E(509,this.C,a.name);}},a);return f}
function Bk(a){function b(){function b(c){return a.sa.get(c).map(function(a){return{ca:this[a.name],sb:a.sb,autoIncrement:a.autoIncrement}},this)}var d=Vb(a.M).map(function(b){this[b]=new X(this,b,a.zd.has(b),a.pd.has(b),a.M.get(b));return this[b]},this),e=Vb(a.sa).map(function(d){return new Ng(a.C,d,a.rc.has(d),b.call(this,d))},this);R.call(this,a.C,d,e,a.td);var f=null===a.Ea?null:new Ng(a.C,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.pd.has(b.getName())});this.Lf=new pk(f,h,a.Cb);
this.sf=Dk(a,d,e)}t(b,R);b.prototype.Bb=function(a){return new this.sf(Xb++,a)};b.prototype.createRow=b.prototype.Bb;b.prototype.mb=function(a){var b={};this.nb().forEach(function(e){var f=e.getName();e=e.L();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.sf(a.id,b)};b.prototype.deserializeRow=
b.prototype.mb;b.prototype.Lb=g("Lf");b.prototype.getConstraint=b.prototype.Lb;return b}
function Dk(a,b,c){function d(a,d){this.M=b;this.sa=c;Wb.call(this,a,d)}t(d,Wb);d.prototype.Me=function(){var a={};this.M.forEach(function(b){a[b.getName()]=b.lc()?null:Qc[b.L()]});return a};d.prototype.yf=function(){var a={};this.M.forEach(function(b){var c=b.getName();b=b.L();var d=this.s[c];a[c]=0==b?null!=d?$b(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.M.get(a.getName()),c=this.Qd.$e.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.g.length?e(a.g[0].ca):f(a.g);h[b]=a});d.prototype.pb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function Ek(a,b){this.h=new Z(a,b);this.xb=z();this.Cc=!1;this.j=null}r("lf.schema.Builder",Ek);function Fk(a,b){b.Cb.forEach(function(a){var d=a.Ua;if(!this.xb.has(d))throw new E(536,a.name);var d=this.xb.get(d).Db(),e=a.Mc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.Db()[a.zb].L()!=d[e].L())throw new E(538,a.name);if(!d[e].Hc())throw new E(539,a.name);},a)}
Ek.prototype.Kf=function(a){a.Cb.forEach(function(a){Ck(this.xb.get(a.Ua)).forEach(function(c){if(c.zb==a.Mc)throw new E(534,a.name);},this)},this)};function Gk(a){a.Cc||(a.xb.forEach(function(a){Fk(this,a);a=a.Db();this.h.O.set(a.getName(),a)},a),A(a.xb).forEach(a.Kf,a),Hk(a),a.xb.clear(),a.Cc=!0)}function Ik(a,b,c){b.Ae||(b.Ae=!0,b.fe=!0,b.Ne.forEach(function(a){a=c.get(a);if(!a.Ae)Ik(this,a,c);else if(a.fe&&b!=a)throw new E(533);},a));b.fe=!1}
function Hk(a){var b=z();a.h.O.forEach(function(a,d){b.set(d,new Jk(d))},a);a.xb.forEach(function(a,d){a.Cb.forEach(function(a){b.get(a.Ua).Ne.add(d)})});A(b).forEach(function(a){Ik(this,a,b)},a)}function Jk(a){this.fe=this.Ae=!1;this.Ne=C();this.qc=a}Ek.prototype.Db=function(){this.Cc||Gk(this);return this.h};Ek.prototype.getSchema=Ek.prototype.Db;Ek.prototype.Re=function(){var a=new jc("ns_"+this.h.name()),b;mk||(mk=new lk);b=mk;var c=null;b.Zd(a)?c=b.l(a):(c=new lk,b.ub(a,c));return c};
Ek.prototype.getGlobal=Ek.prototype.Re;Ek.prototype.connect=function(a){if(null!==this.j&&this.j.ld)throw new E(113);if(null===this.j){var b=this.Re();b.Zd(qc)||b.ub(qc,this.Db());this.j=new W(b)}return this.j.Da(a)};Ek.prototype.connect=Ek.prototype.connect;Ek.prototype.Nf=function(a){if(this.xb.has(a))throw new E(503,a);if(this.Cc)throw new E(535);this.xb.set(a,new Y(a));return this.xb.get(a)};Ek.prototype.createTable=Ek.prototype.Nf;
Ek.prototype.se=function(a){if(this.Cc)throw new E(535);this.h.se(a);return this};Ek.prototype.setPragma=Ek.prototype.se;function Z(a,b){this.C=a;this.Ra=b;this.O=z();this.mf={Rf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("C");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Ra");Z.prototype.version=Z.prototype.version;Z.prototype.va=function(){return A(this.O)};Z.prototype.tables=Z.prototype.va;Z.prototype.table=function(a){if(!this.O.has(a))throw new E(101,a);return this.O.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.We||(this.We=new nk(this));return this.We};Z.prototype.lf=g("mf");Z.prototype.pragma=Z.prototype.lf;Z.prototype.se=ca("mf");r("lf.schema.create",function(a,b){return new Ek(a,b)});v.prototype.catch=v.prototype.ve;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
