// Copyright (c) 2012 Florian H., https://github.com/js-coder https://github.com/js-coder/lostorage.js
!function(a,b){var c={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isPlainObj:function(a){return a===Object(a)},toArray:function(a){return Array.prototype.slice.call(a)},prepareArgs:function(a,b){return a=c.toArray(a),a.unshift(b),a},getObjKeyByValue:function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c},prepareReturn:function(b){return a[c.getObjKeyByValue(f,b)]},retrieve:function(a,c){return a===b?c:a},serialize:function(a){return JSON.stringify(a)},unserialize:function(a){return a===b?b:JSON.parse(a)}},d=function(){return d.get.apply(this,arguments)};a.storage=function(){return storage.get.apply(storage,arguments)},a.session=function(){return session.get.apply(session,arguments)},d.set=function(a,b,d){if(c.isPlainObj(b))for(var e in b)b.hasOwnProperty(e)&&a.setItem(e,c.serialize(b[e]));else a.setItem(b,c.serialize(d));return c.prepareReturn(a)},d.invert=function(a,b){return this.set(a,b,!this.get(a,b))},d.add=function(a,b,c){return this.set(a,b,this.get(a,b)+parseInt(c,10))},d.increase=function(a,b){return this.add(a,b,1)},d.decrease=function(a,b){return this.add(a,b,-1)},d.concat=function(a,b,c){return this.set(a,b,this.get(a,b)+c)},d.push=function(a,b){var e=c.toArray(arguments),f=this.get(a,b);return e.splice(0,2),f.push.apply(f,e),this.set(a,b,f)},d.extend=function(a,b,d,e){var f=this.get(a,b,{});if(c.isPlainObj(d))for(var g in d)d.hasOwnProperty(g)&&(f[g]=d[g]);else f[d]=e;return this.set(a,b,f)},d.remove=function(a,b){b=c.isArray(b)?b:c.toArray(arguments);for(var d=0,e=b.length;e>d;d++)delete a[b[d]];return c.prepareReturn(a)},d.empty=function(a){return a.clear(),c.prepareReturn(a)},d.get=function(a,d,e){if(e=e||b,c.isArray(d)){for(var f={},g=0,h=d.length;h>g;g++){var i=d[g];f[i]=this.get(a,i,e)}return f}return c.retrieve(c.unserialize(a.getItem(d)),e)},d.all=function(a){return JSON.parse(JSON.stringify(a))};for(var e="set invert add increase decrease concat push extend remove empty get all".split(" "),f={storage:localStorage,session:sessionStorage},g=0,h=e.length;h>g;g++){var i=e[g];for(var j in f)if(f.hasOwnProperty(j)){var k=f[j];a[j][i]=function(a,b){return function(){var e=c.prepareArgs(arguments,b);return d[a].apply(d,e)}}(i,k)}}}(window);